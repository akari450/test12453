var Laya=window.Laya=function(e,t){var i={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(e,t){return 1==arguments.length?i.__presubstr.call(this,e):i.__presubstr.call(this,e,t>0?t:this.length+t)},__init:function(e){e.forEach(function(e){e.__init$&&e.__init$()})},__isClass:function(e){return e&&(e.__isclass||e==Object||e==String||e==Array)},__newvec:function(e,t){var i=[];i.length=e;for(var n=0;e>n;n++)i[n]=t;return i},__extend:function(e,t){function n(){i.un(this,"constructor",e)}for(var o in t)if(t.hasOwnProperty(o)){var s=Object.getOwnPropertyDescriptor(t,o),r=s.get,a=s.set;r||a?r&&a?Object.defineProperty(e,o,s):(r&&Object.defineProperty(e,o,r),a&&Object.defineProperty(e,o,a)):e[o]=t[o]}n.prototype=t.prototype,e.prototype=new n,i.un(e.prototype,"__imps",i.__copy({},t.prototype.__imps))},__copy:function(e,t){if(!t)return null;e=e||{};for(var i in t)e[i]=t[i];return e},__package:function(t,n){if(!i.__packages[t]){i.__packages[t]=!0;var o=e,s=t.split(".");if(s.length>1)for(var r=0,a=s.length-1;a>r;r++){var l=o[s[r]];o=l?l:o[s[r]]={}}o[s[s.length-1]]||(o[s[s.length-1]]=n||{})}},__hasOwnProperty:function(e,t){function i(e,t){if(Object.hasOwnProperty.call(t.prototype,e))return!0;var n=t.prototype.__super;return null==n?null:i(e,n)}return t=t||this,Object.hasOwnProperty.call(t,e)||i(e,t.__class)},__typeof:function(e,t){if(!e||!t)return!1;if(t===String)return"string"==typeof e;if(t===Number)return"number"==typeof e;if(t.__interface__)t=t.__interface__;else if("string"!=typeof t)return e instanceof t;return e.__imps&&e.__imps[t]||e.__class==t},__as:function(e,t){return this.__typeof(e,t)?e:null},__int:function(e){return e?parseInt(e):0},"interface":function(t,n){i.__package(t,{});var o=i.__internals,s=o[t]=o[t]||{self:t};if(n){var r=n.split(",");s.extend=[];for(var a=0;a<r.length;a++){var l=r[a];o[l]=o[l]||{self:l},s.extend.push(o[l])}}for(var h=e,c=t.split("."),a=0;a<c.length-1;a++)h=h[c[a]];h[c[c.length-1]]={__interface__:t}},"class":function(t,n,o,s){if(o&&i.__extend(t,o),n)if(i.__package(n,t),i.__classmap[n]=t,n.indexOf(".")>0){if(0==n.indexOf("laya.")){var r=n.split(".");s=s||r[r.length-1],i[s]&&console.log("Warning!,this class["+s+"] already exist:",i[s]),i[s]=t}}else"Main"==n?e.Main=t:(i[n]&&console.log("Error!,this class["+n+"] already exist:",i[n]),i[n]=t);var a=i.un,l=t.prototype;a(l,"hasOwnProperty",i.__hasOwnProperty),a(l,"__class",t),a(l,"__super",o),a(l,"__className",n),a(t,"__super",o),a(t,"__className",n),a(t,"__isclass",!0),a(t,"super",function(e){this.__super.call(e)})},imps:function(e,t){function n(e){var t,s;if((t=i.__internals[e])&&(o[e]=!0,s=t.extend))for(var r=0;r<s.length;r++)n(s[r].self)}if(!t)return null;var o=e.__imps||i.un(e,"__imps",{});for(var s in t)n(s)},superSet:function(e,t,i,n){var o=e.prototype["_$set_"+i];o&&o.call(t,n)},superGet:function(e,t,i){var n=e.prototype["_$get_"+i];return n?n.call(t):null},getset:function(e,t,n,o,s){e?(o&&(t["_$GET_"+n]=o),s&&(t["_$SET_"+n]=s)):(o&&i.un(t,"_$get_"+n,o),s&&i.un(t,"_$set_"+n,s)),o&&s?Object.defineProperty(t,n,{get:o,set:s,enumerable:!1,configurable:!0}):(o&&Object.defineProperty(t,n,{get:o,enumerable:!1,configurable:!0}),s&&Object.defineProperty(t,n,{set:s,enumerable:!1,configurable:!0}))},"static":function(e,t){function i(){var i=t[n],o=t[n+1];Object.defineProperty(e,i,{get:function(){return delete this[i],this[i]=o.call(this)},set:function(e){delete this[i],this[i]=e},enumerable:!0,configurable:!0})}for(var n=0,o=t.length;o>n;n+=2)"length"==t[n]?e.length=t[n+1].call(e):i()},un:function(e,t,n){return n||(n=e[t]),i.__propun.value=n,Object.defineProperty(e,t,i.__propun),n},uns:function(e,t){t.forEach(function(t){i.un(e,t)})}};return e.console=e.console||{log:function(){}},e.trace=e.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),i}(window,document);!function(e,t,i){var n=(i.un,i.uns,i["static"]),o=i["class"],s=i.getset,r=i.__newvec;i["interface"]("laya.ui.IItem"),i["interface"]("laya.ui.ISelect"),i["interface"]("laya.d3.core.IClone"),i["interface"]("laya.runtime.IMarket"),i["interface"]("laya.filters.IFilter"),i["interface"]("laya.display.ILayout"),i["interface"]("laya.resource.IDispose"),i["interface"]("laya.runtime.IConchNode"),i["interface"]("laya.webgl.shapes.IShape"),i["interface"]("laya.d3.graphics.IVertex"),i["interface"]("laya.webgl.submit.ISubmit"),i["interface"]("laya.filters.IFilterAction"),i["interface"]("laya.d3.core.render.IUpdate"),i["interface"]("laya.d3.core.scene.ITreeNode"),i["interface"]("laya.webgl.text.ICharSegment"),i["interface"]("laya.runtime.ICPlatformClass"),i["interface"]("laya.d3.core.render.IRenderable"),i["interface"]("laya.webgl.canvas.save.ISaveData"),i["interface"]("org.puremvc.as3.interfaces.IView"),i["interface"]("org.puremvc.as3.interfaces.IModel"),i["interface"]("org.puremvc.as3.interfaces.IProxy"),i["interface"]("org.puremvc.as3.interfaces.IMediator"),i["interface"]("org.puremvc.as3.interfaces.IObserver"),i["interface"]("laya.webgl.resource.IMergeAtlasBitmap"),i["interface"]("org.puremvc.as3.interfaces.INotification"),i["interface"]("laya.filters.IFilterActionGL","laya.filters.IFilterAction"),i["interface"]("org.puremvc.as3.interfaces.IFacade","INotifier");var a=function(){function t(){}return o(t,"laya.utils.RunDriver"),t.FILTER_ACTIONS=[],t.pixelRatio=-1,t._charSizeTestDiv=null,t.now=function(){return Date.now()},t.getWindow=function(){return e},t.getPixelRatio=function(){if(t.pixelRatio<0){var e=Or.context,i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;t.pixelRatio=(Or.window.devicePixelRatio||1)/i,t.pixelRatio<1&&(t.pixelRatio=1)}return t.pixelRatio},t.getIncludeStr=function(e){return null},t.createShaderCondition=function(e){var t="(function() {return "+e+";})";return i._runScript(t)},t.fontMap=[],t.measureText=function(e,i){var n=t.hanzi.test(e);if(n&&t.fontMap[i])return t.fontMap[i];var o=Or.context;o.font=i;var s=o.measureText(e);return n&&(t.fontMap[i]=s),s},t.getWebGLContext=function(e){},t.beginFlush=function(){},t.endFinish=function(){},t.addToAtlas=null,t.flashFlushImage=function(e){},t.drawToCanvas=function(e,t,i,n,o,s){var r=GS.create("2D"),a=new Ps(i,n,r);return As.renders[t]._fun(e,a,o,s),r},t.createParticleTemplate2D=null,t.createGLTextur=null,t.createWebGLContext2D=null,t.changeWebGLSize=function(e,t){},t.createRenderSprite=function(e,t){return new As(e,t)},t.createFilterAction=function(e){return new hs},t.createGraphics=function(){return new _s},t.clear=function(e){Ns._context.ctx.clear()},t.cancelLoadByUrl=function(e){},t.clearAtlas=function(e){},t.isAtlas=function(e){return!1},t.addTextureToAtlas=function(e){},t.getTexturePixels=function(e,t,i,n,o){return null},t.skinAniSprite=function(){return null},t.update3DLoop=function(){},n(t,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),t}(),l=(function(){return s(1,i,"alertGlobalError",null,function(e){var t=0;e?Or.window.onerror=function(e,i,n,o,s){t++<5&&s&&alert("出错啦，请把此信息截图给研发商\n"+e+"\n"+s.stack||s)}:Or.window.onerror=null}),i.init=function(e,t,n){for(var o=[],s=2,r=arguments.length;r>s;s++)o.push(arguments[s]);if(!i._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=i._arrayBufferSlice),i._isinit=!0,Or.__init__(),cr.__init__(),_s.__init__(),i.timer=new Yr,i.scaleTimer=new Yr,i.loader=new Au,Gr.__init__();for(var s=0,a=o.length;a>s;s++)o[s].enable&&o[s].enable();return Dh.__init__(),Mh.__init__(),Gh.__init__(),kr.beginCheck(),i._currentStage=i.stage=new _S,i.stage.conchModel&&i.stage.conchModel.setRootNode(),i._getUrlPath(),i.render=new Ns(0,0),i.stage.size(e,t),As.__init__(),Vh.__init__(),Fh.instance.__init__(i.stage,Ns.canvas),fw.__init__(),jh.autoStopMusic=!0,Ts.__init__(),Ns.canvas}},i._getUrlPath=function(){var e=Or.window.location,t=e.pathname;t=":"==t.charAt(2)?t.substring(1):t,Cs.rootPath=Cs.basePath=Cs.getPath("file:"==e.protocol?t:e.protocol+"//"+e.host+e.pathname)},i._arrayBufferSlice=function(e,t){var i=this,n=new Uint8Array(i,e,t-e),o=new Uint8Array(n.length);return o.set(n),o.buffer},i._runScript=function(e){return Or.window[i._evcode](e)},i.stage=null,i.timer=null,i.scaleTimer=null,i.loader=null,i.version="1.8.15beta",i.render=null,i._currentStage=null,i._isinit=!1,i.MiniAdpter={init:function(){e.navigator&&e.navigator.userAgent&&e.navigator.userAgent.indexOf("MiniGame")>-1&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},n(i,["conchMarket",function(){return this.conchMarket=e.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=e.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),i}(),function(){function e(){this._events=null}var t;o(e,"laya.events.EventDispatcher");var i=e.prototype;return i.hasListener=function(e){var t=this._events&&this._events[e];return!!t},i.event=function(e,t){if(!this._events||!this._events[e])return!1;var i=this._events[e];if(i.run)i.once&&delete this._events[e],null!=t?i.runWith(t):i.run();else{for(var n=0,o=i.length;o>n;n++){var s=i[n];s&&(null!=t?s.runWith(t):s.run()),s&&!s.once||(i.splice(n,1),n--,o--)}0===i.length&&this._events&&delete this._events[e]}return!0},i.on=function(e,t,i,n){return this._createListener(e,t,i,n,!1)},i.once=function(e,t,i,n){return this._createListener(e,t,i,n,!0)},i._createListener=function(e,i,n,o,s,r){void 0===r&&(r=!0),r&&this.off(e,i,n,s);var a=t.create(i||this,n,o,s);this._events||(this._events={});var l=this._events;return l[e]?l[e].run?l[e]=[l[e],a]:l[e].push(a):l[e]=a,this},i.off=function(e,t,i,n){if(void 0===n&&(n=!1),!this._events||!this._events[e])return this;var o=this._events[e];if(null!=o)if(o.run)t&&o.caller!==t||o.method!==i||n&&!o.once||(delete this._events[e],o.recover());else{for(var s=0,r=0,a=o.length;a>r;r++){var l=o[r];l?!l||t&&l.caller!==t||l.method!==i||n&&!l.once||(s++,o[r]=null,l.recover()):s++}s===a&&delete this._events[e]}return this},i.offAll=function(e){var t=this._events;if(!t)return this;if(e)this._recoverHandlers(t[e]),delete t[e];else{for(var i in t)this._recoverHandlers(t[i]);this._events=null}return this},i._recoverHandlers=function(e){if(e)if(e.run)e.recover();else for(var t=e.length-1;t>-1;t--)e[t]&&(e[t].recover(),e[t]=null)},i.isMouseEvent=function(t){return e.MOUSE_EVENTS[t]},e.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},e.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),t=function(e){function t(e,i,n,o){t.__super.call(this,e,i,n,o)}o(t,"",e);var i=t.prototype;return i.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,i,n,o){return void 0===o&&(o=!0),t._pool.length?t._pool.pop().setTo(e,i,n,o):new t(e,i,n,o)},t._pool=[],t}(h)},e}()),h=function(){function e(e,t,i,n){this.once=!1,this._id=0,void 0===n&&(n=!1),this.setTo(e,t,i,n)}o(e,"laya.utils.Handler");var t=e.prototype;return t.setTo=function(t,i,n,o){return this._id=e._gid++,this.caller=t,this.method=i,this.args=n,this.once=o,this},t.run=function(){if(null==this.method)return null;var e=this._id,t=this.method.apply(this.caller,this.args);return this._id===e&&this.once&&this.recover(),t},t.runWith=function(e){if(null==this.method)return null;var t=this._id;if(null==e)var i=this.method.apply(this.caller,this.args);else i=this.args||e.unshift?this.args?this.method.apply(this.caller,this.args.concat(e)):this.method.apply(this.caller,e):this.method.call(this.caller,e);return this._id===t&&this.once&&this.recover(),i},t.clear=function(){return this.caller=null,this.method=null,this.args=null,this},t.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,i,n,o){return void 0===o&&(o=!0),e._pool.length?e._pool.pop().setTo(t,i,n,o):new e(t,i,n,o)},e._pool=[],e._gid=1,e}(),c=function(){function e(e,t){this.lo=null,this.hi=null,this.lo=e>>>0,this.hi=t>>>0}o(e,"net.LongNumber");var t=e.prototype;return t.getLow=function(){return this.lo},t.getHight=function(){return this.hi},t.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},e.fromNumber=function(t){if(0===t)return e.zero;var i=0>t;i&&(t=-t);var n=t>>>0,o=(t-n)/4294967296>>>0;return i&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new e(n,o)},n(e,["zero",function(){return this.zero=new e(0,0)}]),e}(),u=(function(){function e(){}return o(e,"net.SocketNotification"),e.OPEN="socket_OPEN",e.CLOSE="socket_CLOSE",e.ERROR="socket_ERROR",e.RESPONSE_ERROR="RESPONSE_ERROR",e.REQ_TIME_OUT="REQ_TIME_OUT",e.RECONECTING="socket_RECONECT",e}(),function(){function e(e){this.module=0,this.module=e}o(e,"net.ARequest");var t=e.prototype;return t.send=function(t){var i=new no;i.module=this.module,i.cmd=t,i.value=null,null==e.socketProxy&&(e.socketProxy=x.getInstance().retrieveProxy("SocketProxy")),e.socketProxy&&e.socketProxy.send(i)},t.sendProto=function(t,i,n){var o=new no;o.module=this.module,o.cmd=t,o.value=n?v.protoCodec.getRequestEncoder().encode(i,n):null,null==e.socketProxy&&(e.socketProxy=x.getInstance().retrieveProxy("SocketProxy")),e.socketProxy&&e.socketProxy.send(o)},t.sendInt=function(t,i){var n=new no;n.module=this.module,n.cmd=t;var o=new Vr;o.endian="bigEndian",o.writeInt32(i),n.value=o.buffer,null==e.socketProxy&&(e.socketProxy=x.getInstance().retrieveProxy("SocketProxy")),e.socketProxy&&e.socketProxy.send(n)},t.sendLong=function(t,i){var n=new no;n.module=this.module,n.cmd=t;var o=new Vr;o.endian="bigEndian";var s=c.fromNumber(i);o.writeUint32(s.getHight()),o.writeUint32(s.getLow()),n.value=o.buffer,null==e.socketProxy&&(e.socketProxy=x.getInstance().retrieveProxy("SocketProxy")),e.socketProxy&&e.socketProxy.send(n)},t.sendIntArr=function(t,i){var n=new no;n.module=this.module,n.cmd=t;var o=new Vr;o.endian="bigEndian";var s;for(var r in i)s=i[r],o.writeInt32(s);n.value=o.buffer,null==e.socketProxy&&(e.socketProxy=x.getInstance().retrieveProxy("SocketProxy")),e.socketProxy&&e.socketProxy.send(n)},t.sendString=function(t,i){var n=new no;n.module=this.module,n.cmd=t;var o=new Vr;o.writeUTFBytes(i),n.value=o.buffer,null==e.socketProxy&&(e.socketProxy=x.getInstance().retrieveProxy("SocketProxy")),e.socketProxy&&e.socketProxy.send(n)},e.socketProxy=null,e}()),d=function(){function e(e){this.requestEncoder=null,this.responseDecoder=null;var t=Or.window.protobuf;this.requestEncoder=new _(t.roots["default"]),this.responseDecoder=new f(t.roots["default"]),e&&e.run()}o(e,"net.codec.ProtoCodec");var t=e.prototype;return t.getRequestEncoder=function(){return this.requestEncoder},t.getResponseDecoder=function(){return this.responseDecoder},e}(),p=function(){function e(){}return o(e,"net.codec.ProtoUtil"),e.valueOf=function(e){return null==e?0:"string"==typeof e||"number"==typeof e||"number"==typeof e&&Math.floor(e)==e?e:e.intValue?e.intValue:e.longValue?e.longValue:e.strValue?e.strValue:0==isNaN(e)?e:0},e}(),f=function(){function e(e){this.root=null,this.root=e}o(e,"net.codec.Decoder");var t=e.prototype;return t.decode=function(e,t){t||(t=new Vr);var i=t.getUint8Array(t.pos,t.bytesAvailable),n=this.root.ResponsePkg,o=n[e];o||console.log("-----not find protokey:"+e);var s=o.decode(i);return s},t.decodeInt=function(e){return e.getInt32()},t.decodeLong=function(e){var t=e.getUint32(),i=e.getUint32();return new c(i,t)},t.decodeIntArr=function(e){var t=[];if(null==e||!(e instanceof laya.utils.Byte))return t;for(;e.bytesAvailable>=4;)t.push(e.getInt32());return t},t.decodeString=function(e){return e?e.readUTFBytes():""},e.LoginVO="LoginVO",e.BindSession="BindSession",e.ParamKeyValue="ParamKeyValue",e.AnimalInfo="AnimalInfo",e.FightContext="FightContext",e.FightReport="FightReport",e.FightReportGroup="FightReportGroup",e.FightAwards="FightAwards",e.FightContextTeam="FightContextTeam",e.DungeonSpInfo="DungeonSpInfo",e.DungeonSpRankList="DungeonSpRankList",e.ArenaInfo="ArenaInfo",e.ArenaRoom="ArenaRoom",e.VipInfo="VipInfo",e.BoneInfo="BoneInfo",e.DropRewardGroup="DropRewardGroup",e.Skill="Skill",e.SkillList="SkillList",e.CoolTimeGroup="CoolTimeGroup",e.SomeIdArray="SomeIdArray",e.ItemGoods="ItemGoods",e.ItemGoodsGroup="ItemGoodsGroup",e.GoodsInfo="GoodsInfo",e.ItemSimple="ItemSimple",e.ItemSimpleGroup="ItemSimpleGroup",e.GoodCountChange="GoodCountChange",e.Equip="Equip",e.PetShop="PetShop",e.PetShopAuto="PetShopAuto",e.PlayerPet="PlayerPet",e.PlayerPetGroup="PlayerPetGroup",e.PetTake="PetTake",e.PetDress="PetDress",e.LookPet="LookPet",e.PlayerForest="PlayerForest",e.ForestEvent="ForestEvent",e.PlayerInvite="PlayerInvite",e.PlayerTower="PlayerTower",e.GlobalArena="GlobalArena",e.GlobalArenaList="GlobalArenaList",e.GlobalArenaLog="GlobalArenaLog",e.GlobalArenaLogList="GlobalArenaLogList",e.CultureInfo="CultureInfo",e.PlayerTask="PlayerTask",e.PlayerAchieve="PlayerAchieve",e.PlayerPayTotal="PlayerPayTotal",e.PlayerSign="PlayerSign",e.PlayerGift="PlayerGift",e.PlayerBlood="PlayerBlood",e.BloodAutoLevelUpVO="BloodAutoLevelUpVO",e.PlayerDailyTask="PlayerDailyTask",e.PlayerMarket="PlayerMarket",e.MarketDaily="MarketDaily",e.PlayerTeam="PlayerTeam",e.Team="Team",e.Pager="Pager",e.TeamPager="TeamPager",e.TeamLogs="TeamLogs",e.ExchangeItem="ExchangeItem",e.ExchangeItemPager="ExchangeItemPager",e.Handbook="Handbook",e.HandbookBattle="HandbookBattle",e.PlayerActivity="PlayerActivity",e.PlayerLottery="PlayerLottery",e.PlayerAlliance="PlayerAlliance",e.Alliance="Alliance",e.AllianceSimple="AllianceSimple",e.AllianceListPager="AllianceListPager",e.ApplyAlliance="ApplyAlc",e.ApplyAllianceListPager="ApplyAlcListPager",e.MemberOfAlliance="MemberOfAlc",e.MemberAllianceListPager="MemberAlcListPager",e.DonateOfAlliance="DonateOfAlc",e.AlcOption="AlcOption",e.AlcLogs="AlcLogs",e.AlcDaonateLogs="AlcDaonateLogs",e.AlcTask="AlcTask",e.AlcTaskLogs="AlcTaskLogs",e.PlayerLadder="PlayerLadder",e.LadderAround="LadderAround",e.AlcArena="AlcArena",e.AlcaVideo="AlcaVideo",e.AlcaVideoLog="AlcaVideoLog",e.AlcaVideoLogs="AlcaVideoLogs",e.AlcaAwardLogs="AlcaAwardLogs",e.PlayerAlcBoss="PlayerAlcBoss",e.AlcBoss="AlcBoss",e.AlcBossRankList="AlcBossRankList",e.AlcBossLogList="AlcBossLogList",e.ChatInfo="ChatInfo",e.ChatRespose="ChatRespose",e.PlayerMine="PlayerMine",e.PlayerMineList="PlayerMineList",e.MineLog="MineLog",e.MineLogList="MineLogList",e.PlayerExpenseList="PlayerExpenseList",e.PlayerPearl="PlayerPearl",e.MarketRebate="MarketRebate",e.AllianceMine="AllianceMine",e.AllianceMineList="AllianceMineList",e.AllianceMineLogList="AllianceMineLogList",e.Activity7Day="Activity7Day",e.Activity7DayEx="Activity7DayEx",e.ActivityInvest="PlayerInvest",e.ActivityPayWeek="ActivityPayWeek",e.MailSummary="MailSummary",e.MailSummaryList="MailSummaryList",e.MailDetail="MailDetail",e.PlayerMeridian="PlayerMeridian",e.PlayerSamsara="PlayerSamsara",e.OldPlayerWF="OldPlayerWF",e.Mystery="Mestery",e.PlayerMystery="PlayerMestery",e.PlayerDemonMarket="PlayerDemonMarket",e.PlayerPetSkill="PlayerPetSkill",e.PetSkillAwardVO="PetSkillAwardVO",e.PlayerVipExt="PlayerVipExt",e.PlayerCaptcha="PlayerCaptcha",e.PlayerGuard="PlayerGuard",e.PlayerDungeonDaily="PlayerDungeonDaily",e.DungeonLimitOpen="DungeonLimitOpen",e.PlayerSurprise="PlayerSurprise",e.PlayerWorldBoss="PlayerWorldBoss",e.WorldBoss="WorldBoss",e.WorldBossRank="WorldBossRank",e.WorldBossView="WorldBossView",e.WorldBossDamageWrap="WorldBossDamageWrap",e.PetEquipStar="PetEquipStar",e.PetEquipAutoRefine="PetEquipAutoRefine",e.PlayerPetPvp="PlayerPetPvp",e.PetPvpRoom="PetPvpRoom",e.PlayerLotteryRoll="PlayerLotteryRoll",e.LotteryRollDraw="LotteryRollDraw",e}(),_=function(){function e(e){this.root=null,this.root=e}o(e,"net.codec.Encoder");var t=e.prototype;return t.encode=function(e,t){var i=this.root.RequestPkg,n=i[e],o=n.encode(t).finish();return o},e.LoginDebug="LoginDebug",e.LoginPlatform="LoginPlatform",e.CreatePlayer="CreatePlayer",e.Point="Point",e.FightAct="FightAct",e.SkillLearn="SkillLearn",e.SettingInfo="SettingInfo",e.LongStr="LongStr",e.LongInt="LongInt",e.LongIntGroup="LongIntGroup",e.LongLong="LongLong",e.SwapItem="SwapItem",e.SwapPack="SwapPack",e.Team="Team",e.ChatRequest="ChatRequest",e}(),m=function(){function e(){this.facade=x.getInstance()}o(e,"org.puremvc.as3.patterns.observer.Notifier");var t=e.prototype;return i.imps(t,{"org.puremvc.as3.patterns.observer.INotifier":!0}),t.sendNotification=function(e,t,i){this.facade.sendNotification(e,t,i)},e}(),g=function(){function e(){}o(e,"core.Application");var t=e.prototype;return t.startUp=function(){0==e.started?(e.started=!0,e.loadingManager=new rs,i.loader.load(e.database.getCommDataUrls(),h.create(this,this.onDataComplete),new h(this,this.onDataProgress))):(v.progressShow.visible=!0,v.progressShow.showModelStep("重连服务"),v.progressShow.showProgress("重新绑定会话",1),hc.instance.bindSession(v.playerId))},t.onDataProgress=function(e){v.progressShow.visible=!0,v.progressShow.showProgress("下载公共资源",e)},t.onDataComplete=function(t){null===t?v.progressShow.showError("资源加载失败:003，请刷新页面重试"):e.database.onLoadComplement(t,h.create(this,this.startDelay))},t.startDelay=function(){hc.instance.bindSession(v.playerId)},t.prepMVC=function(){x.getInstance().hasCommand("startup")||i.timer.once(100,this,function(){x.getInstance().registerCommand("startup",Kd),x.getInstance().sendNotification("startup")})},s(1,e,"facade",function(){return x.getInstance()}),s(1,e,"instance",function(){return null==e._instance&&(e._instance=new e),e._instance}),e.STARTUP="startup",e.BINDING_NEW_SESSION_SUCCESS="binding_new_session_success",e.loadingManager=null,e._instance=null,e.started=!1,n(e,["database",function(){return this.database=new ss},"clock",function(){return this.clock=new os}]),e}(),v=function(){function e(){}return o(e,"GameSysConfig"),s(1,e,"limitChat",function(){return e._limitChat||T.IS_ON_MINI},function(t){e._limitChat=t}),s(1,e,"progressShow",function(){var e=x.getInstance().retrieveMediator("LoadingMediator");return e?e.mainView:null}),e.enableChat=function(){return""!=e.socketIPChat},e.getAssetsFile=function(e){return e=Cs.formatURL("res/atlas/"+e+".atlas"),{url:e,type:"atlas",size:100,priority:1}},e.getPngFile=function(e){return e=Cs.formatURL(e+".png"),{url:e,type:"image",size:100,priority:1}},e.getDataFileUrl=function(e){return Cs.formatURL("data/"+e+".json")},e.init=function(){var t=Ts.getItem("game_init");lo.isNull(t)&&(e.isNewUsre=!0,Ts.setItem("game_init","true"))},e.KEY_PF_FID="_platform_fid",e.KEY_SERVER_SELECTED="_sever_selectd",e.KEY_SESSION_KEY="session_key",e.VISITOR_ACCOUNT="visitor_account",e.CPUMemoryLimit=125829120,e.GPUMemoryLimit=167772160,e.version_app="",e.GAME_FPS=50,e.MOVIE_INTERVAL=100,e.SHOW_ALERT_PANEL=!1,e.OPEN_PAYMENT=!1,e.OPEN_TEST_PAY=!1,e.paymentOpen=!0,e.giftOpen=!0,e.giftOpenSp=!0,e.modifyName=!0,e.SHOW_INVIT_PANEL=!1,e.OPEN_GUIDE_TASK=!1,e.INDULGE_TYPE="none",e.GAME_NAME="【无尽洪荒】",e.GAME_NUMBER="",e.IS_THIRD_PT=!1,e.IS_THIRD_PT_H5=!1,e.LIMIT_DUNGEON_OPEN_VERSION=!1,e.MULTY_VERSION_SERVER_LIST=null,e.MULTY_VERSION_SERVER_LIST_DEFALUT_INDEX=0,e.IS_GLOBAL_VERSION=!1,e.resPath="",e.uiPath="",e.tipDelay=200,e.tipFollowMove=!0,e.touchScrollEnable=!0,e.mouseWheelEnable=!0,e.browerWidth=NaN,e.browerHeight=NaN,e.gameMain=null,e.isDebug=!1,e.socketIP=null,e.socketPort=0,e.account=null,e.playerId=NaN,e.serverId=0,e.serverName=null,e.loginData=null,e.isLoginSp=!1,e.loginDataSp=null,e.serialNum=null,e.protoCodec=null,e.socketIPChat="127.0.0.1",e.socketPortChat=9004,e.idfa="",e._limitChat=!0,e.isNewUsre=!1,e}(),y=function(){function e(){if(this.proxyMap=null,this.SINGLETON_MSG="Model Singleton already constructed!",null!=e.instance)throw Error(this.SINGLETON_MSG);e.instance=this,this.proxyMap=[],this.initializeModel()}o(e,"org.puremvc.as3.core.Model");var t=e.prototype;return i.imps(t,{"org.puremvc.as3.interfaces.IModel":!0}),t.initializeModel=function(){},t.registerProxy=function(e){this.proxyMap[e.getProxyName()]=e,e.onRegister()},t.retrieveProxy=function(e){return this.proxyMap[e]},t.hasProxy=function(e){return null!=this.proxyMap[e]},t.removeProxy=function(e){var t=this.proxyMap[e];return t&&(this.proxyMap[e]=null,t.onRemove()),t},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.instance=null,e}(),b=function(){function e(){if(this.mediatorMap=null,this.observerMap=null,this.SINGLETON_MSG="View Singleton already constructed!",null!=e.instance)throw Error(this.SINGLETON_MSG);e.instance=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}o(e,"org.puremvc.as3.core.PuremvcView");var t=e.prototype;return i.imps(t,{"org.puremvc.as3.interfaces.IView":!0}),t.initializeView=function(){},t.registerObserver=function(e,t){var i=this.observerMap[e];i?i.push(t):this.observerMap[e]=[t]},t.notifyObservers=function(e){if(null!=this.observerMap[e.getName()]){for(var t,i=this.observerMap[e.getName()],n=[],o=0;o<i.length;o++)t=i[o],n.push(t);for(o=0;o<n.length;o++)t=n[o],t.notifyObserver(e)}},t.removeObserver=function(e,t){for(var i=this.observerMap[e],n=0;n<i.length;n++)if(1==i[n].compareNotifyContext(t)){i.splice(n,1);break}0==i.length&&delete this.observerMap[e]},t.registerMediator=function(e){if(null==this.mediatorMap[e.getMediatorName()]){this.mediatorMap[e.getMediatorName()]=e;var t=e.listNotificationInterests();if(t.length>0)for(var i=new S(e.handleNotification,e),n=0;n<t.length;n++)this.registerObserver(t[n],i);e.onRegister()}},t.retrieveMediator=function(e){return this.mediatorMap[e]},t.removeMediator=function(e){var t=this.mediatorMap[e];if(t){for(var i=t.listNotificationInterests(),n=0;n<i.length;n++)this.removeObserver(i[n],t);delete this.mediatorMap[e],t.onRemove()}return t},t.hasMediator=function(e){return null!=this.mediatorMap[e]},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.instance=null,e}(),E=function(){function e(){if(this.view=null,this.commandMap=null,this.syncReqCmdSet=null,this.SINGLETON_MSG="Controller Singleton already constructed!",null!=e.instance)throw Error(this.SINGLETON_MSG);e.instance=this,this.commandMap=[],this.syncReqCmdSet=new go,this.initializeController()}o(e,"org.puremvc.as3.core.Controller");var t=e.prototype;return i.imps(t,{"org.puremvc.as3.core.IController":!0}),t.initializeController=function(){this.view=b.getInstance()},t.executeCommand=function(e){var t=this.commandMap[e.getName()];if(null!=t){var i=new t;i.execute(e)}},t.registerCommand=function(e,t,i){void 0===i&&(i=!1),null==this.commandMap[e]&&this.view.registerObserver(e,new S(this.executeCommand,this)),this.commandMap[e]=t,i&&this.syncReqCmdSet.add(e)},t.hasCommand=function(e){return null!=this.commandMap[e]},t.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null,this.syncReqCmdSet.remove(e))},t.isSyncReqCmd=function(e){return this.syncReqCmdSet.contain(e)},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.instance=null,e}(),x=function(){function e(){if(this.controller=null,this.model=null,this.view=null,this.SINGLETON_MSG="Facade Singleton already constructed!",null!=e.instance)throw Error(this.SINGLETON_MSG);e.instance=this,this.initializeFacade()}o(e,"org.puremvc.as3.patterns.facade.Facade");var t=e.prototype;return i.imps(t,{"org.puremvc.as3.patterns.facade.IFacade":!0}),t.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},t.initializeController=function(){null==this.controller&&(this.controller=E.getInstance())},t.initializeModel=function(){null==this.model&&(this.model=y.getInstance())},t.initializeView=function(){null==this.view&&(this.view=b.getInstance())},t.registerCommand=function(e,t,i){void 0===i&&(i=!1),this.controller.registerCommand(e,t,i)},t.removeCommand=function(e){this.controller.removeCommand(e)},t.hasCommand=function(e){return this.controller.hasCommand(e)},t.isSyncReqCmd=function(e){return this.controller.isSyncReqCmd(e)},t.registerProxy=function(e){this.model.registerProxy(e)},t.retrieveProxy=function(e){return this.model.retrieveProxy(e)},t.removeProxy=function(e){var t;return null!=this.model&&(t=this.model.removeProxy(e)),t},t.hasProxy=function(e){return this.model.hasProxy(e)},t.registerMediator=function(e){null!=this.view&&this.view.registerMediator(e)},t.retrieveMediator=function(e){return this.view.retrieveMediator(e)},t.removeMediator=function(e){var t;return null!=this.view&&(t=this.view.removeMediator(e)),t},t.hasMediator=function(e){return this.view.hasMediator(e)},t.sendNotification=function(e,t,i){this.notifyObservers(new w(e,t,i))},t.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.instance=null,e}(),S=function(){function e(e,t){this.notify=null,this.context=null,this.setNotifyMethod(e),this.setNotifyContext(t)}o(e,"org.puremvc.as3.patterns.observer.Observer");var t=e.prototype;return i.imps(t,{"org.puremvc.as3.patterns.observer.IObserver":!0}),t.setNotifyMethod=function(e){this.notify=e},t.setNotifyContext=function(e){this.context=e},t.getNotifyMethod=function(){return this.notify},t.getNotifyContext=function(){return this.context},t.notifyObserver=function(e){this.getNotifyMethod().apply(this.getNotifyContext(),[e])},t.compareNotifyContext=function(e){return e===this.context},e}(),w=function(){function e(e,t,i){this.name=null,this.type=null,this.body=null,this.name=e,this.body=t,this.type=i}o(e,"org.puremvc.as3.patterns.observer.Notification");var t=e.prototype;return i.imps(t,{"org.puremvc.as3.patterns.observer.INotification":!0}),t.getName=function(){return this.name},t.setBody=function(e){this.body=e},t.getBody=function(){return this.body},t.setType=function(e){this.type=e},t.getType=function(){return this.type},t.toString=function(){var e="Notification Name: "+this.getName();return e+="\nBody:"+(null==this.body?"null":this.body.toString()),e+="\nType:"+(null==this.type?"null":this.type)},e}(),C=function(){function e(){}return o(e,"gamelogin.controller.LoginCmd"),e.HEART_BEAT=0,e.ACCOUNT_LOGIN=1,e.ACCOUNT_LOGIN_SP=4,e.ACCOUNT_LOGIN_PLATFORM=50,e.CREATE_CHARACTER=2,n(e,["USER_HEART_BEAT",function(){return this.USER_HEART_BEAT="3_0"},"USER_ACCOUNT_LOGIN",function(){return this.USER_ACCOUNT_LOGIN="3_1"},"USER_ACCOUNT_LOGIN_SP",function(){return this.USER_ACCOUNT_LOGIN_SP="3_4"},"USER_ACCOUNT_LOGIN_PLATFORM",function(){return this.USER_ACCOUNT_LOGIN_PLATFORM="3_50"},"USER_CREATE_CHARACTER",function(){return this.USER_CREATE_CHARACTER="3_2"}]),e}(),T=(function(){function e(){}return o(e,"gamelogin.LoginNotification"),e.TRACE_LOAD_INFO="trace_load_info",e.TRACE_LOAD_PRESS="trace_load_press",e.LOAD_GAME_MAIN="load_game_main",e.LOAD_GAME_ROLE="load_game_role",e.SEND_LINES_INFO="send_lines_info",e.SHOW_LINES_INFO="SHOW_LINES_INFO",e.SEND_SELECT_GAME_LINE="send_select_game_line",e.CREATE_ROLE_SUCCED="create_role_succed",e.CREATE_ROLE_FIELD="create_role_field",e.LOAD_NECESSARY_INFO="load_necessary_info",e.SHOW_LOADING_ERROR_INFO="show_loading_error_info",e.OPEN_LOGIN_REG_PAGE="OPEN_LOGIN_REG_PAGE",e.OPEN_MINI_LOGIN_REG_PAGE="OPEN_MINI_LOGIN_REG_PAGE",e.OPEN_VISITOR_BINDING_PAGE="OPEN_VISITOR_BINDING_PAGE",e.OPEN_AGREEMENT_PAGE="OPEN_AGREEMENT_PAGE",e}(),function(){function e(){this.lodingTxt=null,this.confAndVsState=0,this.gameNotice=null,this._healthView=null,this._testLoginView=null,this.reloadHandler=new h(this,this.reLoaded);var t=this;if(nc.isAntialias=!0,e.IS_ON_ISQD=a.getWindow().isQD,console.log("渠道：",a.getWindow().isQD,e.IS_ON_ISQD),null!=e.IS_ON_ISQD)op.initMini();else{Q.init(),
console.log("初始化本地"),e.IS_ON_MINI=!1;try{var n=Or.getElementById("loadingTxt");n&&(n.style.display="none");var o=Or.getElementById("loadingBtn");o&&Or.removeElement(o)}catch(s){}}if(v.browerWidth=Or.clientWidth<=750?750:Or.clientWidth,v.browerHeight=Or.clientHeight<=1334?1334:Or.clientHeight,1==e.IS_ON_MINI){Or.onHWMiniGame||Or.onQGMiniGame||Or.onVVMiniGame||Or.onKGMiniGame?i.init(750,1334,ur):i.init(750,1334);var r=Or.clientHeight/Or.clientWidth;Or.onIOS&&r>=2.1?(i.stage.y=140,i.stage.scaleY=.88):(i.stage.y=110,i.stage.scaleY=.9),i.stage.scaleMode="exactfit",i.stage.alignH="center",i.stage.alignV="middle"}else Q.isLaya()?(i.init(750,1334),Or.onIOS?(r=Or.clientHeight>Or.clientWidth?Or.clientHeight/Or.clientWidth:Or.clientWidth/Or.clientHeight,console.log("isIphonex:"+r),r>=2.1?i.stage.scaleMode="showall":i.stage.scaleMode="fixedwidth"):i.stage.scaleMode="showall",i.stage.alignH="center",i.stage.alignV="middle"):(i.init(750,1334,ur),i.stage.scaleMode="showall",i.stage.alignH="center",i.stage.alignV="middle");v.init(),ds.buttonLabelColors=["#ffffff","#e70626","#ff0000","#C0C0C0"],Qw.manager.popupEffectHandler=null,Qw.manager.closeEffectHandler=null,ls.popupBgAlpha=0,ls.closeDialogOnSide=!1,1==e.IS_ON_MINI?i.loader.load("version.json",h.create(this,function(e){t.confAndVsState=1,op.miniUrl=e.urlMini,t.loadConfigComplete(e.syscfg)}),null,"json"):Q.isLaya()?(this.confAndVsState=1,Cs.basePath=gameSet.urlBase,this.loadConfigComplete(gameSet.syscfg)):(Cs.basePath=gameSet.urlBase,this.loadConfigComplete(gameSet.syscfg),this.loadVersionComplete(gameSet.resversion)),v.gameMain=this,i.stage.useRetinalCanvas=!0,i.stage.frameRate="fast"}o(e,"GameMain");var t=e.prototype;return t.loadConfigComplete=function(e){X.init(e),this.confAndVsState+=1,this._protoCodecInit(),D.instance.onOpenGame()},t.loadVersionComplete=function(e){Cs.version=e,this.confAndVsState+=1,this._protoCodecInit()},t._protoCodecInit=function(){if(!(this.confAndVsState<2)){var e=this;this.lodingTxt=new iw,this.lodingTxt.color="#ffffff",this.lodingTxt.fontSize=14,this.lodingTxt.changeText("正在努力加载资源..."),i.stage.addChild(this.lodingTxt),v.protoCodec=new d(h.create(this,function(){i.loader.load([v.getAssetsFile("comp"),v.getAssetsFile("ui"),v.getAssetsFile("ui/skill"),v.getAssetsFile("ui/head"),v.getAssetsFile("create"),v.getAssetsFile("chat"),v.getAssetsFile("chat/face"),v.getAssetsFile("samsara")],h.create(e,e.onLoaded))}))}},t.reloadRes=function(){if(e.IS_ON_MINI)this.reLoaded();else if(Q.isLaya())try{Or.window.loadingView&&Or.window.loadingView.loading(0),Or.window.location.reload(!0)}catch(t){}else Or.window.location.reload(!0)},t.alertNetProblem=function(){x.getInstance().sendNotification("POP_ALERT_INFO",{info:"请求超时，请确认您的网络，点击重试。",handler:this.reloadHandler})},t.alertSeverBulding=function(){x.getInstance().sendNotification("POP_ALERT_INFO",{info:"服务器正在更新维护中，请稍后重试",handler:this.reloadHandler})},t.reLoaded=function(){X.gameReload(!0)},t.onLoaded=function(t){if(void 0===t&&(t=!0),0==t)return this.lodingTxt.text="载入资源失败，请确认您的网络，点击重试。",this.lodingTxt.color="red",this.lodingTxt.underline=!0,this.lodingTxt.mouseEnabled=!0,void this.lodingTxt.once("mousedown",this,this.reloadRes);null==this._healthView&&(this._healthView=new hN),this._healthView.showTime(),this.lodingTxt.text="";var i=x.getInstance();i.hasMediator("AlertMediator")||(i.registerMediator(new ap),i.registerMediator(new rp),i.registerMediator(new ip),i.registerMediator(new lp),i.registerMediator(new hp),v.isLoginSp?i.registerMediator(new ep):e.IS_ON_MINI?i.registerMediator(new np):i.registerMediator(new Jd),i.registerMediator(new ix),i.registerMediator(new tp)),console.log("平台加载",X.PLATE_FORM),X.beginLogin(),Q.isLaya()&&Or.window.loadingView&&Or.window.loadingView.loading(100),v.OPEN_TEST_PAY,1},t.showTestPage=function(){this._testLoginView=new kC;var e=Ts.getItem("name");null!=e&&""!=e&&(this._testLoginView.txtName.text=e),i.stage.addChild(this._testLoginView),this._testLoginView.btnLogin.once("mouseup",this,this.gameLoginTest),this._testLoginView.comServer.selectHandler=new h(this,this.onServerSelect),e=Ts.getItem("server_ip_port"),null!=e&&""!=e?this._testLoginView.txtServer.text=e:this.onServerSelect(0)},t.onServerSelect=function(e){switch(e){case 0:this._testLoginView.txtServer.text="127.0.0.1:9001";break;case 1:this._testLoginView.txtServer.text="wjhh666.com:19001"}},t.gameLoginTest=function(){v.isDebug=!0,v.account=this._testLoginView.txtName.text,Ts.setItem("name",v.account),v.serverId=vo["int"](this._testLoginView.txtBranch.text);var e=this._testLoginView.txtServer.text.split(":");if(Ts.setItem("server_ip_port",this._testLoginView.txtServer.text),v.socketIP=e[0],v.socketPort=vo["int"](e[1]),i.stage.removeChild(this._testLoginView),v.progressShow){var t=x.getInstance(),n=t.retrieveMediator("LoadingMediator");n.start()}},t.queryNotice=function(){this.lodingTxt.changeText("正在连接服务器");var t=this;if(null==this.gameNotice&&(this.gameNotice=new FN,this.gameNotice.closeHandler=new h(this,this.beginMyLogin)),i.timer.once(6e4,t,this.alertNetProblem),e.IS_ON_MINI)B.getHttp(X.LOGIN_API_PLATFORM_NOTICE,{pid:X.PLATE_FORM+"_"+X.FID},null,function(e){t.onHttp(e)},function(e){t.onHttpErr(null)});else{if(Q.isLaya())return void e.sendNavite(X.LOGIN_API_PLATFORM_NOTICE+"?pid="+X.PLATE_FORM+"_"+X.FID);var n=new Iu;n.on("complete",this,this.onHttp),n.on("error",this,this.onHttpErr),n.send(X.LOGIN_API_PLATFORM_NOTICE+"?pid="+X.PLATE_FORM+"_"+X.FID,null,"get","json")}},t.onHttp=function(e){this.lodingTxt.removeSelf(),e.qqGroup&&"undefined"!=e.qqGroup&&(X.QQ_GROUP=e.qqGroup),this.gameNotice.showInfo(e.info,e.state),i.timer.clear(this,this.alertNetProblem),x.getInstance().sendNotification("HIDE_SERVER_LIST")},t.onHttpErr=function(e){x.getInstance().sendNotification("POP_ALERT_INFO",{info:"服务器升级维护中，预计1小时",handler:this.reloadHandler}),i.timer.clear(this,this.alertNetProblem),x.getInstance().sendNotification("HIDE_SERVER_LIST")},t.beginMyLogin=function(){if(op.miniRegisterStep(14),console.log("点击公告"),this.gameNotice.isStoping&&1!=X.IS_TEST)return void(e.IS_ON_MINI?this.onLoaded():v.gameMain.reLoaded());if(v.progressShow){var t=x.getInstance(),i=t.retrieveMediator("LoadingMediator");i.start()}},e.gameLoginPlatform=function(e){as.debug("gamemain","登陆信息:",JSON.stringify(e)),v.isDebug=!1,v.account=e.openid,Ts.setItem("session_key",e.sk),v.loginData={userName:e.openid,time:e.ts,adult:e.ad,serverId:e.sid,partnerId:e.pId,sign:e.sn,oid:e.oid},x.getInstance().sendNotification("POP_SERVER_LIST",X.PLATE_FORM)},e.sendNavite=function(e){Q.httpDoGet(e,"GameMain.httpSucceed","GameMain.httpError")},e.httpSucceed=function(e,t,i){var n;"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),v.gameMain.onHttp(n)},e.httpError=function(e,t,i){v.gameMain.onHttpErr("")},e.onInitAD=function(e){v.version_app=e;var t="广告初始化完成"+e;Q.log(t)},e.onReward=function(e){var t=e.split("|")[0],i=e.split("|")[1];if(x.getInstance().sendNotification("AD_COMPLETE",i),"box"==i){var n=Number(e.split("|")[2]);bu.instance.speedClockBoxByVideo(n),x.getInstance().sendNotification("AD_COMPLETE",i)}else"fuli"==i&&(mu.instance.shareGame(),x.getInstance().sendNotification("AD_COMPLETE",i));var o="发送奖励"+t+i;Q.log(o),D.instance.logVideo(o)},e.onAdShow=function(e){var t="打开了广告"+e;Q.log(t);e.split("|")[1];D.instance.logVideo(t)},e.onADClick=function(e){var t="点击了广告"+e;Q.log(t),D.instance.logVideo(t)},e.onVideoComplete=function(e){var t=(e.split("|")[0],e.split("|")[1]);if("box"==t){var i=Ts.getItem("BOX_SPEED"+v.playerId);if(null==i||""==i){var n=Number(e.split("|")[2]);bu.instance.speedClockBoxByVideo(n),x.getInstance().sendNotification("AD_COMPLETE",t)}}else"fuli"==t&&(i=Ts.getItem("FULI_SPEED"+v.playerId),null!=i&&""!=i||(mu.instance.shareGame(),x.getInstance().sendNotification("AD_COMPLETE",t)));var o="广告播放完成"+e;Q.log(o),D.instance.logVideo(o)},e.onADClose=function(e){var t="关闭广告"+e;Q.log(t),x.getInstance().sendNotification("AD_COLSE"),D.instance.logVideo(t)},e.onError=function(e){var t="失败"+e;Q.log(t),x.getInstance().sendNotification("AD_COLSE"),D.instance.logVideo(t)},e.doGet=function(e,t,i){var n=e+t+i;Q.log(n)},e.doPost=function(e,t,i){var n=e+t+i;Q.log(n)},e.onLoginPlatform=function(t){op.miniRegisterStep(10),e.gameLoginPlatform(t)},e.onLogoutPlatform=function(e){Qw.closeAll(),Ts.removeItem("session_key"),X.logout(!0),X.beginLogin()},e.IS_ON_ISQD=null,e.IS_ON_MINI=!0,e.NET_TIME_OUT=6e4,e}()),I=(function(){function e(){}return o(e,"common.type.ElementType"),e.NONE=-1,e.PLAYER=0,e.MONSTER=1,e.PET=2,e.NPC=3,e}(),function(){function e(){}return o(e,"common.type.ColorType"),e.GRAY="#b0bcb0",e.WHITE="#ffffff",e.BLUE="#0084ff",e.LT_BLUE="#E0FFFF",e.GREEN="#00dc24",e.YELLOW="#fffc00",e.RED="#e70626",e.PURPLE="#c527ff",e.ORANGE="#FFA500",e}(),function(){function e(){}return o(e,"common.type.JobType"),e.getJobName=function(e){var t=null;switch(e){case 1:t="天劍";break;case 2:t="飛羽";break;case 3:t="神印"}return t},e.BOY=1,e.GIRL=0,e.JOB_NONE=0,e.JOB_SOLDIER=1,e.JOB_ARCHER=2,e.JOB_SORCERESS=3,e}(),function(){function e(){}return o(e,"common.type.AttributeKey"),e.isPercentAtrribut=function(e){switch(e){case 1301:case 1104:case 1105:case 1205:case 1411:case 1412:case 1414:case 1413:case 1415:case 1416:case 1303:case 1305:case 1304:case 1417:case 1418:case 1419:case 1420:case 1421:case 1422:case 1423:case 1424:case 1425:case 1306:case 1307:case 1308:case 1309:case 1310:case 1346:case 1311:case 1312:case 1501:case 1509:case 1313:case 1314:case 1315:case 1426:case 1429:case 1317:case 1318:case 1321:case 1322:case 1323:case 1324:case 1325:case 1331:case 1332:case 1333:case 1334:case 1335:case 1427:case 1428:case 1207:case 1208:case 1338:case 1340:case 1339:case 1341:case 1345:case 1347:case 1351:case 1352:case 1353:case 1354:case 1355:case 1508:return!0;default:return!1}},e.getValueStr=function(e,t,i){void 0===i&&(i=!1);var n;if(common.type.AttributeKey.isPercentAtrribut(e)){1304==e&&(t=-t);var o=""+t/100;o=vo.toFixed(o),n=o+"%"}else switch(e){case 1203:case 1204:n=""+t/10;break;case 1511:case 1512:case 1513:case 1514:case 1515:t=Math.abs(t),n=""+t;break;default:n=""+t}return i&&t>0?" + "+n:n},e.getValueMinMaxStr=function(e,t,i,n){void 0===n&&(n=!1);var o;return common.type.AttributeKey.isPercentAtrribut(e)?(1304==e&&0>t&&(t=-t,i=-i),o=t/100+"~"+i/100+"%"):o=1203==e||1204==e?t/10+"~"+i/10:t+"~"+i,n&&t>0?" + "+o:o},e.getName=function(t){e._attributeNameByKey||(e._attributeNameByKey=new uo,e._attributeNameByKey.set(1001,"编号"),e._attributeNameByKey.set(1100,"生命"),e._attributeNameByKey.set(1101,"法力"),e._attributeNameByKey.set(110001,"生命"),e._attributeNameByKey.set(110101,"法力"),e._attributeNameByKey.set(1102,"生命恢复值"),e._attributeNameByKey.set(1103,"法力恢复值"),e._attributeNameByKey.set(1104,"生命回复率"),e._attributeNameByKey.set(1105,"法力回复率"),e._attributeNameByKey.set(1106,"生命"),e._attributeNameByKey.set(1107,"法力"),e._attributeNameByKey.set(1201,"攻击"),e._attributeNameByKey.set(1202,"防御"),e._attributeNameByKey.set(1203,"命中"),e._attributeNameByKey.set(1204,"闪避"),e._attributeNameByKey.set(1205,"攻速"),e._attributeNameByKey.set(1206,"反弹"),e._attributeNameByKey.set(1301,"技能触发概率"),e._attributeNameByKey.set(1302,"伤害减免"),e._attributeNameByKey.set(1303,"特殊状态抗性"),e._attributeNameByKey.set(1304,"减伤"),e._attributeNameByKey.set(1305,"攻击伤害"),e._attributeNameByKey.set(1306,"无视防御"),e._attributeNameByKey.set(1307,"吸血攻击"),e._attributeNameByKey.set(1308,"摄取法力"),e._attributeNameByKey.set(1309,"连击概率"),e._attributeNameByKey.set(1310,"增加伤害"),e._attributeNameByKey.set(1401,"对金系攻击加成"),e._attributeNameByKey.set(1402,"对木系攻击加成"),e._attributeNameByKey.set(1403,"对水系攻击加成"),e._attributeNameByKey.set(1404,"对火系攻击加成"),e._attributeNameByKey.set(1405,"对土系攻击加成"),e._attributeNameByKey.set(1406,"金防御"),e._attributeNameByKey.set(1407,"木防御"),e._attributeNameByKey.set(1408,"水防御"),e._attributeNameByKey.set(1409,"火防御"),e._attributeNameByKey.set(1410,"土防御"),e._attributeNameByKey.set(1411,"击晕攻击几率"),e._attributeNameByKey.set(1412,"中毒攻击几率"),e._attributeNameByKey.set(1414,"致盲攻击几率"),e._attributeNameByKey.set(1413,"冰冻攻击几率"),e._attributeNameByKey.set(1415,"虚弱攻击几率"),e._attributeNameByKey.set(1416,"会心一击"),e._attributeNameByKey.set(1417,"金系状态反弹"),e._attributeNameByKey.set(1418,"木系状态反弹"),e._attributeNameByKey.set(1419,"水系状态反弹"),e._attributeNameByKey.set(1420,"火系状态反弹"),e._attributeNameByKey.set(1421,"土系状态反弹"),e._attributeNameByKey.set(1422,"状态反弹"),e._attributeNameByKey.set(1423,"伤害反射"),e._attributeNameByKey.set(1424,"无视闪避"),e._attributeNameByKey.set(1425,"凝心剑术"),e._attributeNameByKey.set(1312,"韧性"),e._attributeNameByKey.set(1311,"重伤攻击几率"),e._attributeNameByKey.set(1501,"法力吸收伤害"),e._attributeNameByKey.set(1509,"受伤时减免法力消耗"),e._attributeNameByKey.set(1313,"破招概率"),e._attributeNameByKey.set(1314,"状态延长"),e._attributeNameByKey.set(1315,"生命上限"),e._attributeNameByKey.set(1426,"生命上限"),e._attributeNameByKey.set(1429,"法力上限"),e._attributeNameByKey.set(1316,"技能攻击"),e._attributeNameByKey.set(1317,"净化概率"),e._attributeNameByKey.set(1318,"不屈"),e._attributeNameByKey.set(1321,"眩晕状态抗性"),e._attributeNameByKey.set(1322,"中毒状态抗性"),e._attributeNameByKey.set(1323,"冰冻状态抗性"),e._attributeNameByKey.set(1324,"致盲状态抗性"),e._attributeNameByKey.set(1325,"虚弱状态抗性"),e._attributeNameByKey.set(1331,"对金系伤害加成"),e._attributeNameByKey.set(1332,"对木系伤害加成"),e._attributeNameByKey.set(1333,"对水系伤害加成"),e._attributeNameByKey.set(1334,"对火系伤害加成"),e._attributeNameByKey.set(1335,"对土系伤害加成"),e._attributeNameByKey.set(1207,"攻击"),e._attributeNameByKey.set(1208,"防御"),e._attributeNameByKey.set(1340,"闪避"),e._attributeNameByKey.set(1339,"命中"),e._attributeNameByKey.set(1341,"攻击伤害免疫"),e._attributeNameByKey.set(1427,"会心伤害"),e._attributeNameByKey.set(1428,"中毒伤害"),e._attributeNameByKey.set(1338,"诅咒攻击几率"),e._attributeNameByKey.set(1508,"四维"),e._attributeNameByKey.set(1511,"破·金防"),e._attributeNameByKey.set(1512,"破·木防"),e._attributeNameByKey.set(1513,"破·水防"),e._attributeNameByKey.set(1514,"破·火防"),e._attributeNameByKey.set(1515,"破·土防"),e._attributeNameByKey.set(1344,"抗腐蚀"),e._attributeNameByKey.set(1346,"法力燃烧"),e._attributeNameByKey.set(1345,"无视攻击免疫"),e._attributeNameByKey.set(1347,"精准打击"),e._attributeNameByKey.set(1351,"金系技能减免"),e._attributeNameByKey.set(1352,"木系技能减免"),e._attributeNameByKey.set(1353,"水系技能减免"),e._attributeNameByKey.set(1354,"火系技能减免"),e._attributeNameByKey.set(1355,"土系技能减免"));var i=e._attributeNameByKey.get(t);return null==i?"null"+t:i},e.RATE_BASE=1e4,e.ID=1001,e.NAME=1002,e.JOB=1003,e.JOBNATURE=1004,e.SEX=1005,e.LEVEL=1006,e.EXP=1007,e.EXP_MAX=1008,e.SILVER=1009,e.GOLDEN=1010,e.ICON=1011,e.BOX_SIZE=1012,e.LAST_SHARE_TIME=1013,e.GUIDE=1015,e.USER_ACCOUNT=1016,e.INDULGE_STATE=1017,e.JADE=1019,e.DOUBLE_PAY_TIME=1021,e.CHG_NATURE_TIMES=1022,e.PET_FOOD=1023,e.RUNING_TIME=1024,e.LAST_SHARE_VIDEO_TIME=1025,e.CHG_NATURE_TIMES_EXT=1026,e.COLOR=1027,e.HP=1100,e.MP=1101,e.HP_CHANGE=110001,e.MP_CHANGE=110101,e.HP_RECOVERY_VALUE=1102,e.MP_RECOVERY_VALUE=1103,e.HP_RECOVERY_PERCENT=1104,e.MP_RECOVERY_PERCENT=1105,e.HP_MAX=1106,e.MP_MAX=1107,e.ATTACK=1201,e.DEFENSE=1202,e.HIT=1203,e.DODGE=1204,e.FIGHT_SPEED=1205,e.SPRINGBACK=1206,e.ATTACK_PERCENT=1207,e.DEFENSE_PERCENT=1208,e.SKILL_TRIGGER_PROBABILITY=1301,e.DAMAGE_REDUCE=1302,e.SPECIAL_DEFENSE=1303,e.DAMAGE_DEFENCE_PERCENT=1304,e.DAMAGE_ATTACK_PERCENT=1305,e.IGNORE_DEFENSE_PERCENT=1306,e.SUCK_HP_PERCENT=1307,e.SUCK_MP_PERCENT=1308,e.CONTINUE_ATTACK_PERCENT=1309,e.REAL_DAMAGE_PERCENT=1310,e.BADLY_DAMAGE_PERCENT=1311,e.TOUGHNESS_PERCENT=1312,e.SILENCE_PERCENT=1313,e.EXTEND_BUF_TIME_PERCENT=1314,e.HP_MAX_PERCENT_PET=1315,e.SKILL_ATTACK_ADD=1316,e.PURIFY=1317,e.UNYIELD=1318,e.STUN_DEFENSE=1321,e.POISONING_DEFENSE=1322,e.FROZEN_DEFENSE=1323,e.BLINDNESS_DEFENSE=1324,e.BROKEN_DEFENSE=1325,e.DAMAGE_ADD_METAL=1331,e.DAMAGE_ADD_WOOD=1332,e.DAMAGE_ADD_WATER=1333,e.DAMAGE_ADD_FIRE=1334,e.DAMAGE_ADD_EARTH=1335,e.CURSE_PERCENT=1338,e.DODGE_PERCENT=1340,e.HIT_PERCENT=1339,e.DAMAGE_IGNORE=1341,e.CORROSION_DEFENSE=1344,e.DE_DAMAGE_IGNORE=1345,e.DESTORY_MP_PERCENT=1346,e.DE_DODGE_IGNORE_PERCENT=1347,e.DECREASE_METAL_SKILL=1351,e.DECREASE_WOOD_SKILL=1352,e.DECREASE_WATER_SKILL=1353,e.DECREASE_FIRE_SKILL=1354,e.DECREASE_EARTH_SKILL=1355,e.ATTACK_METAL=1401,e.ATTACK_WOOD=1402,e.ATTACK_WATER=1403,e.ATTACK_FIRE=1404,e.ATTACK_EARTH=1405,e.METAL_DEFENSE=1406,e.WOOD_DEFENSE=1407,e.WATER_DEFENSE=1408,e.FIRE_DEFENSE=1409,e.EARTH_DEFENSE=1410,e.STUN_ATTACK=1411,e.POISONING_ATTACK=1412,e.FROZEN_ATTACK=1413,e.BLINDNESS_ATTACK=1414,e.BROKEN_ATTACK=1415,e.DOUBLE_ATTACK=1416,e.METAL_SPRINGBACK=1417,e.WOOD_SPRINGBACK=1418,e.WATER_SPRINGBACK=1419,e.FIRE_SPRINGBACK=1420,e.EARTH_SPRINGBACK=1421,e.NATURE_SPRINGBACK=1422,e.PERCENT_SPRINGBACK=1423,e.IGNORE_DODGE_PERCENT=1424,e.STRONGLY_SKILL_MP=1425,e.HP_MAX_PERCENT=1426,e.DOUBLE_ATTACK_ADD=1427,e.POISONING_ATTACK_ADD=1428,e.MP_MAX_PERCENT=1429,e.DAMAGE_REDUCE_BY_MP_PERCENT=1501,e.HP_MAX_PERCENT_VIEW=1502,e.MP_MAX_PERCENT_VIEW=1503,e.ATTACK_PERCENT_VIEW=1504,e.DEFENSE_PERCENT_VIEW=1505,e.HIT_PERCENT_VIEW=1506,e.DODGE_PERCENT_VIEW=1507,e.FORE_ATTR_VIEW=1508,e.DAMAGE_REDUCE_BY_MP_PERCENT_SAVE=1509,e.HALO_REDUCE_METAL=1511,e.HALO_REDUCE_WOOD=1512,e.HALO_REDUCE_WATER=1513,e.HALO_REDUCE_FIRE=1514,e.HALO_REDUCE_EARTH=1515,e.SILVER_DROP_ADD_PCT=1601,e.EQUIP_WEAPON_NATURE=7001,e.VIP_ARENA_MINE_TIME=7002,e.VIP_STAR_FAIL_RETURN=7003,e.VIP_ARENA_MINE_COUNT=7004,e.ACHIEVE_TITLE=7006,e.TEAM_ID=7007,e.TEAM_TIME=7008,e.LOOK_VIDEO_TIME=7009,e.LOOK_VIDEO_CARD=7010,e.ALLIANCE_ID=7011,e.ALLIANCE_NAME=7012,e.ALLIANCE_LEVEL=7013,e.ALLIANCE_SKILL_LEVEL=7014,e.MAX_PASSED_DUNGEON_ID=7020,e.VIP_OFFLINE_AUTO_OPEN_BOX=7021,e.TRIBLE_END_TIME=7022,e.LOGIN_TIME=2003,e.LOGOUT_TIME=2004,e.TOTAL_ONLINE_TIMES=2005,e.SERVER_ID=19e3,e.CREATE_TIME=19001,e.HANG_DUNGEON_ID=19002,e.FAST_BOSS_TIME=19003,e.OPEN_SERVER_TIME=19004,e._attributeNameByKey=null,n(e,["ROLE_ATTRIBUTE_SHOW",function(){return this.ROLE_ATTRIBUTE_SHOW=[1106,1107,1102,1103,1104,1105,1201,1202,1203,1204,1205,1206,1301,1302,1303,1304,1401,1402,1403,1404,1405,1406,1407,1408,1409,1410,1411,1412,1414,1413,1415,1416,1427,1417,1418,1419,1420,1421,1306,1307,1308,1309,1310,1311,1312,1338,1313,1314,1315,1316,1317,1318,1321,1322,1323,1324,1325,1331,1332,1333,1334,1335,1422,1423,1424,1425,1428,1511,1512,1513,1514,1515,1344,1346,1347,1351,1352,1353,1354,1355]}]),e}()),A=(function(){function e(){}return o(e,"common.type.GoodsType"),e.PROPS=0,e.EQUIP=1,e.SILVER=2,e.GOLDEN=3,e.COUPON=4,e.EXP=5,e.TALISMAN=6,e.DONATE=7,e.PET=8,e.FIGHT=9,e.ACHIEVE_TITLE=10,e.MERIDIAN_GAS=11,e.DEMON=12,e.TOWER_COIN=13,e.PET_EQUIP=14,e.PET_SKILL=15,e.OFFLINE_TIME=1001,e.ARENA_MINE_TIME=1002,e.STAR_FAIL_RETURN=1003,e.PET_FOOD_DROP_ADD=1004,e.ARENA_MINE_COUNT=1005,e.GAS=1006,e.BOSS_RATE=1007,e}(),function(){function e(){}return o(e,"common.type.GameFunType"),e.ROLE_INFO=1,e.MIX_EQUIP=2,e.TOWER_SHOP=3,e.TALISMAN_UPGRADE=4,e.EQUIP_DREESED=5,e.ACIVE_CODE=6,e.SKY_PIECE_FROM=7,e.PET_SHOP=8,e.TOWER_SHOP_RATE=9,e.EQUIP_REBUILD=10,e.EXCHANGE=11,e.ALLIANCE_TITLE=12,e.ALLIANCE_ARENA=13,e.EQUIP_GHOST_BOX=14,e.ALLIANCE_BOSS=15,e.PEARL=16,e.ALLIANCE_MINE=17,e.DEMON=18,e.ARENA=19,e.PET_SKILL_STORE=21,e.WORLD_BOSS=22,e.LOTTERY=23,e.VIP_MONTH=100,e}(),function(){function e(){}return o(e,"common.type.BagType"),e.SOLD_BACKPACK=-2,e.DROP_BACKPACK=-1,e.DEFAULT_BACKPACK=0,e.STORAGE_BACKPACK=1,e.DRESSED_BACKPACK=2,e.BOX_BACKPACK=5,e}()),N=function(){function e(){}return o(e,"common.type.QualityType"),e.parseFromServer=function(e){switch(e){case"WHITE":return 1;case"BLUE":return 2;case"GREEN":return 3;case"YELLOW":return 4;case"RED":return 5;case"PURPLE":return 6;case"ORANGE":return 20;default:return parseInt(e)}},e.getColor=function(e){switch(e){case 1:return"#ffffff";case 2:return"#0084ff";case 3:return"#00dc24";case 4:return"#fffc00";case 5:return"#e70626";case 6:return"#c527ff";case 20:case 7:return"#FFA500";default:return"#ffffff"}},e.getName=function(e){switch(e){case 1:return"白";case 2:return"蓝";case 3:return"绿";case 4:return"黄";case 5:return"红";case 6:return"紫";case 20:case 7:return"橙";default:return"白"}},e.getStar=function(t){return 0>t?"":t>=e._stars.length?e._stars[e._stars.length-1]:e._stars[t]},e.WHITE=1,e.BLUE=2,e.GREEN=3,e.YELLOW=4,e.RED=5,e.PURPLE=6,e.ORANGE=20,e.SP_GREEN=7,e.SP_YELLOW=8,e.SP_RED=9,e.SP_PURPLE=10,n(e,["_stars",function(){return this._stars=["","★","★★","★★★","★★★★","★★★★★","★★★★★★","★★★★★★★"]}]),e}(),P=function(){function e(e,t){this._id=NaN,this._type=0,this._key=null,this._id=e,this._type=t,this._key=null}o(e,"common.type.UnitId");var t=e.prototype;return t.clear=function(){this._id=0,this._type=0,this._key=null},t.equals=function(e){return this._id==e._id&&this._type==e._type},s(0,t,"key",function(){return null==this._key&&(this._key=this.type+"_"+this.id),this._key}),s(0,t,"id",function(){return this._id},function(e){this._id=e,this._key=null}),s(0,t,"type",function(){return this._type},function(e){this._type=e,this._key=null}),e}(),R=function(){function e(){}return o(e,"common.type.WuxingType"),e.parse=function(e){switch(e){case"METAL":return 1;case"WOOD":return 2;case"WATER":return 3;case"FIRE":return 4;case"DUST":return 5;case"NONE":default:return e}},e.parseByChineseName=function(e){switch(e){case"金":return 1;case"木":return 2;case"水":return 3;case"火":return 4;case"土":return 5}return 0},e.getColor=function(e){switch(e){case 1:return"#fffc00";case 2:return"#00dc24";case 3:return"#0084ff";case 4:return"#e70626";case 5:return"#c527ff";case 0:default:return"#FFA500"}},e.getName=function(e){switch(e){case 1:return"金";case 2:return"木";case 3:return"水";case 4:return"火";case 5:return"土";case 0:default:return"无"}},e.getBornOf=function(e){switch(e){case 0:return 0;case 1:return 5;case 2:return 3;case 3:return 1;case 4:return 2;case 5:return 4}return 0},e.isBorn=function(e,t){switch(e){case 1:return 3==t;case 2:return 4==t;case 3:return 2==t;case 4:return 5==t;case 5:return 1==t}return!1},e.isHurt=function(e,t){if(0==e||0==t)return!1;switch(e){case 0:return!1;case 1:return 2==t;case 2:return 5==t;case 3:return 4==t;case 4:return 1==t;case 5:return 3==t}return!1},e.NONE=0,e.METAL=1,e.WOOD=2,e.WATER=3,e.FIRE=4,e.DUST=5,n(e,["CHINESE_NAMES",function(){return this.CHINESE_NAMES=["无","金","木","水","火","土"]}]),e}(),L=(function(){function e(){}return o(e,"common.type.PropsType"),e.GHOST=0,e.COMMON=1,e.SPECAIL=2,e.SKY_STONE=3,e.DEFINDE_STONE=4,e.SKY_STONE_PIECE=5,e.BOX=6,e.OPEN_BOX_KEY=7,e.EQUIP_STAR_STONE=8,e.PET_GHOST_PIECE=9,e.PET_GHOST=10,e.PET_FOOD=11,e.PET_QUALITY=12,e.PET_FRESH_QUALITY=13,e.PET_BLOOD=14,e.PET_BLOOD_KEY=15,e.COAT_COMMON=16,e.COAT_GRAPH=17,e.COAT_SPECAIL=18,e.ALLIANCE_MATERIAL=19,e.PET_CREATE=20,e.FUN_TIME_ADD=21,e.HANDBOOK=22,e.SKY_STONE_BOX=23,e.PEARL=24,e.BONE_DRUG=25,e.PET_GHOST_SOUL=26,e.SIMLE_BOX=27,e.STAR_PROTECT_PIECE=28,e.PROP_OTHER=100,e}(),function(){function e(){}return o(e,"common.type.EquipPosType"),e.isPropsMat=function(e,t){return 1==e?1==t:2==e?2==t||3==t||4==t||5==t:3==e?6==t||7==t:!1},e.getTypeName=function(t){return"【"+e.getTypeNameSimple(t)+"】"},e.getFindWay=function(e){switch(e){case 8:return"40级、70级组队副本可获得图纸和材料，使用图纸可合成装备";case 9:return"55级组队副本可获得图纸和材料，使用图纸可合成装备"}return null},e.getTypeNameSimple=function(e){switch(e){case 1:return"武器";case 2:return"衣服";case 3:return"头盔";case 4:return"鞋子";case 5:return"护腕";case 6:return"项链";case 7:return"戒指";case 8:return"披风";case 9:return"内甲";case 10:return"护符"}return""},e.getClazzNameSimple=function(e){switch(e){case 1:return"武器";case 2:case 3:case 4:case 5:return"防具";case 6:case 7:return"饰品";case 8:case 9:case 10:return"特装"}return""},e.getClazzTypeSimple=function(e){switch(e){case 1:return 1;case 2:case 3:case 4:case 5:return 2;case 6:case 7:return 3;case 8:case 9:case 10:return 4}return 0},e.MAX_GRID_NUM=9,e.WEAPON=1,e.CLOTHES=2,e.HEAD=3,e.SHOE=4,e.CUFF=5,e.JEWELRY=6,e.RING=7,e.CLOAK=8,e.ARMOR=9,e.AMULET=10,e.CLASS_WQ=1,e.CLASS_FJ=2,e.CLASS_SP=3,e.CLASS_COAT=4,e}()),O=function(){function e(){this.hpPages=1,this.isBoss=!1,this.isGlobal=!1,this._unitId=null,this._atrributes=null,this._unitId=new P(0,0),this._atrributes=new uo}o(e,"common.model.AnimalVO");var t=e.prototype;return t.setTo=function(e,t){if(this._unitId.id=e,this._unitId.type=t,this.isBoss=!1,this.isGlobal=!1,this.hpPages=1,1==this._unitId.type){var i=g.database.getData("monster",this._unitId.id);i?1==i.monsterType&&1==i.type?this.hpPages=1:2==i.monsterType&&1==i.type?(this.hpPages=2,this.isBoss=!0):1==i.monsterType&&3==i.type?this.hpPages=2:2==i.monsterType&&3==i.type?(this.hpPages=3,this.isBoss=!0):3==i.monsterType&&4==i.type?(this.hpPages=4,this.isBoss=!0,this.isGlobal=!0):2==i.monsterType&&4==i.type&&(this.hpPages=4,this.isBoss=!0):(this.hpPages=2,this.isBoss=!0)}return this},t.getValue=function(e){return this._atrributes.get(e)},t.setValue=function(e,t){t=p.valueOf(t);var i=0;switch(e){case 1100:i=this.getValue(1106),0>t?t=0:t>i&&i>0&&(t=i);break;case 1101:i=this.getValue(1107),0>t?t=0:t>i&&i>0&&(t=i)}this._atrributes.set(e,t)},t.isDead=function(){return 0==this.unitId.type&&0==this.unitId.id?!0:this.getValue(1100)<=0},t.update=function(e,t){for(var i=e.length-1;i>=0;i--)this.setValue(e[i],t[i]);return this},t.clear=function(){return this._atrributes.clear(),this},t.recover=function(){0!=this._unitId.id&&(this._unitId.clear(),Hr.recover("AnimalVO",this.clear()))},s(0,t,"unitId",function(){return this._unitId}),e.build=function(){return Hr.getItemByClass("AnimalVO",e)},e.NAME="AnimalVO",e}(),M=(function(){function e(){}return o(e,"common.view.FunNoticeNotification"),e.POP_FUN_NOTICE="POP_FUN_NOTICE",e}(),function(){function e(){}return o(e,"common.view.UIHelper"),e.drawBlackBg=function(t,i){if(e.drawBlackBgTmp(t,i?60:0),t instanceof laya.ui.Dialog){var n=t;n.popupCenter=!1}},e.drawBlackBgTmp=function(e,t){var i=new Bd;i.name="blackBG",i.width=v.browerWidth,i.height=v.browerHeight,i.graphics.drawRect(0,t,i.width,i.height,"#000000"),e.addChildAt(i,0)},e.heightScaleNum=function(e){var t=i.stage.height-i.stage.y-1334;return t>0?t:0},e}()),D=(function(){function e(){}return o(e,"common.view.UINotification"),e.PROMPTED_INFO_SHOW="prompted_info_show",e.POP_ALERT_INFO="POP_ALERT_INFO",e.POP_ALERT_COPY="POP_ALERT_COPY",e.POP_ALERT_OFFLINE="POP_ALERT_OFFLINE",e.CLOSE_ALL_DIALOG="CLOSE_ALL_DIALOG",e.POP_CONFIRM_INFO="POP_CONFIRM_INFO",e.POP_USE_CONFIRM_INFO="POP_USE_CONFIRM_INFO",e.DAY_OF_YEAR_CHANGED="day_of_year_changed",e.STAGE_RESIZE="STAGE_RESIZE",e.POP_SERVER_LIST="POP_SERVER_LIST",e.HIDE_SERVER_LIST="HIDE_SERVER_LIST",e.SYS_MESSAGE_SEND_CMD="SYS_MESSAGE_SEND_CMD",e.SYS_MESSAGE_RECEIVE_CMD="SYS_MESSAGE_RECEIVE_CMD",e.SYS_HTTP_SEND="SYS_HTTP_SEND",e.SYS_HTTP_RECEIVE="SYS_HTTP_RECEIVE",e.ZERO_CLOCK_TRIGER="ZERO_CLOCK_TRIGER",e.AD_COMPLETE="AD_COMPLETE",e.AD_COLSE="AD_COLSE",e}(),function(){function e(){this.ttadReg=/^(ttad09|ttzc09|ttff)/,this.ttzcReg=/^(ttzc09|ttff)/}o(e,"common.AdReporter");var t=e.prototype;return t.onOpenGame=function(){},t.onLogin=function(){Or.onIOS&&!T.IS_ON_MINI&&null!=v.idfa&&""!=v.idfa&&(Q.httpDoGet("https://mudgj.com/api/s094/ios/report?idfa="+v.idfa+"&openId="+v.account+"&type=1","",""),Q.httpDoGet("https://mudgj.com/api/s094/kwai/report?fid=kwai&idfa="+v.idfa+"&openId="+v.account+"&type=1","",""))},t.onHttp=function(e){},t.onHttpErr=function(e){},t.isToutiaoAd=function(){return"SELF"==X.PLATE_FORM&&this.ttadReg.test(X.FID)&&Q.isLaya()},t.logVideo=function(e){try{if(X.API_ROOT_EXT_AD){var t=new Iu;t.on("complete",this,this.onHttp),t.on("error",this,this.onHttpErr),t.send(X.API_ROOT_EXT_AD+"/video/log?pid="+v.playerId+"&info="+e,null,"get","json")}}catch(i){}},n(e,["instance",function(){return this.instance=new e}]),e}()),k=function(){function e(){}return o(e,"common.Reporter"),e._init=function(e,t){if(null!=t&&null!=v.account&&""!=v.account){var i={};i.accountId=v.playerId+"",i.gameServer=v.serverId;var n=t.getValue(1004)>0?t.getValue(1006):0;i.level=n;var o=t.getValue(1017)<0?0:t.getValue(1017);i.age=o;var s=0==t.getValue(1005)?2:1;i.gender=s,i.accountType=1,i.accountName=v.account;try{if(Q.isLaya()){if(null==Ng.userVO.getValue(1002))return;var r=Ng.userVO.getValue(1004);switch(i={serverId:v.serverId+"",roleName:Ng.userVO.getValue(1002)+"",wuxing:R.getName(r),serverName:v.serverName+"",roleId:v.playerId+"",age:o,sex:s,roleLevel:n},e){case"login":Q.profile("um_plus_game_login",i);break;case"logout":Q.profile("um_plus_game_logout",i);break;case"create":Q.profile("um_plus_game_create",i);break;case"levelup":Q.profile("um_plus_game_levelup",i)}}else v.IS_THIRD_PT_H5&&(i={serverId:v.serverId+"",serverName:v.serverName+"",roleId:v.playerId+"",roleLevel:n+"",roleName:Ng.userVO.getValue(1002)+"",vipLevel:"0"},ETSDK.Game.roleUpload({role:i,success:function(e){console.log("上传角色成功：",e)},error:function(e){console.log("上传角色失败：",e)}}))}catch(a){}}},e.reportData=function(t,i){switch(t){case"login":e._init(t,i);break;case"logout":e._init(t,i);break;case"create":e._init(t,i);break;case"levelup":e._init(t,i)}},e.goldenCost=function(e,t,i){void 0===i&&(i=0);try{Q.isLaya()&&Q.buy(e,t,i)}catch(n){}},e.goldenAward=function(e,t){try{Q.isLaya()&&Q.bonus(t,e,0)}catch(i){}},e.createOrder=function(e,t){if(null!=t){var i=vo["int"](t.buy),n={accountId:v.playerId+"",orderId:t.game_id,iapId:t.buy_tips,gid:t.gid,currencyAmount:i,currencyType:"CNY",virtualCurrencyAmount:10*i,paymentType:e};try{Q.isLaya()&&Q.createOrder(n)}catch(o){}var s=JSON.stringify(n);Ts.setItem("_AD_ORDER_KEY",s)}},e.order=function(e){var t=Ts.getItem("_AD_PAY_TOTAL_KEY"),i=0;if(null!=t&&(i=vo["int"](t)),e>i)try{Ts.setItem("_AD_PAY_TOTAL_KEY",""+e);var n=Ts.getItem("_AD_ORDER_KEY");if(null==n)return;var o=JSON.parse(n);Q.isLaya()&&Q.order(o)}catch(s){}},e.cancelOrder=function(){try{if(Q.isLaya()){var e=Ts.getItem("_AD_ORDER_KEY");if(null==e)return;var t=JSON.parse(e);Q.cancelOrder(t)}}catch(i){}},e.EVENT_CREATE="create",e.EVENT_LOGIN="login",e.EVENT_LEVELUP="levelup",e.EVENT_LOGOUT="logout",e._AD_ORDER_KEY="_AD_ORDER_KEY",e._AD_PAY_TOTAL_KEY="_AD_PAY_TOTAL_KEY",e}(),B=function(){function e(){}return o(e,"link.utils.PTGameSdkHttp"),e.getHttp=function(e,t,i,n,o,s,r){if(void 0===s&&(s="post"),void 0===r&&(r="json"),T.IS_ON_MINI){if(Or.onHWMiniGame||Or.onQGMiniGame||Or.onKGMiniGame){var a="";if(null!=t)for(var l in t){var h=t[l];a=a+l+"="+h+"&"}console.log("请求地址："+e),console.log("请求参数："+a);var c=new Iu;c.on("complete",null,function(e){console.log("请求返回信息："+JSON.stringify(e)),n&&n(e)}),c.on("error",null,function(e){n&&o(e)}),c.send(e,encodeURI(a),s,"json")}if(Or.onMiniGame||Or.onTTMiniGame||Or.onQQMiniGame||Or.onVVMiniGame){console.log("请求地址："+e),console.log("请求参数："+JSON.stringify(t));var u=op.isp_Data.request;u({url:e,method:s,data:t,dataType:r,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){console.log("请求返回信息："+JSON.stringify(e)),n&&n(e.data)},fail:function(e){n&&o(e.data)}})}}},e}(),V=function(){function e(){}return o(e,"link.denglu.mini.MiniReported"),e.aldSendEvent=function(e,t){void 0===t&&(t=!1),Or.onMiniGame&&(console.log("上报:",e,t),t?op.isp_Data.eventSendEvent(e,t):op.isp_Data.eventSendEvent(e))},e.onInitLevel=function(e){Or.onMiniGame&&op.isp_Data.eventLevel.onInitLevel({levelId:"1",levelName:"创建等级",userId:e}),(Or.onQQMiniGame||Or.onTTMiniGame)&&op.isp_Data.eventLevel.onInitLevel({levelId:"1",levelName:"创建等级",userId:e})},e.onSetLevel=function(e,t){Or.onMiniGame&&op.isp_Data.eventLevel.onSetLevel({levelId:e,levelName:"第"+e+"级",userId:t}),(Or.onQQMiniGame||Or.onTTMiniGame)&&op.isp_Data.eventLevel.onSetLevel({levelId:"1",levelName:"创建等级",userId:t})},e.onPaySuccess=function(e,t,i){Or.onMiniGame&&(console.log("充值成功:",e,t),op.isp_Data.eventRevenue({group:"default",money:e,name:t,desc:i})),(Or.onQQMiniGame||Or.onTTMiniGame)&&(console.log("充值成功:",e,t),op.isp_Data.eventRevenue({group:"default",money:e,name:t,desc:i}))},e.miniRegisterStep=function(t){(Or.onQQMiniGame||Or.onTTMiniGame)&&op.isp_Data.eventSendEvent("register",{stepName:t+e.getStepMessage(t)}),Or.onMiniGame&&(e.kuaishouReported(t),op.isp_Data.eventStage.onStart({stageId:t.toString(),stageName:e.getStepMessage(t),userId:G.openId}))},e.getStepMessage=function(e){switch(e){case 10:return"登录游戏";case 11:return"服务器展示";case 12:return"服务器确定";case 13:return"公告展示";
case 14:return"公告确定";case 15:return"建角界面展示";case 16:return"建角确定";case 17:return"加载开始";case 18:return"加载完成";case 19:return"五行界面展示";case 20:return"五行确定";case 21:return"主界面"}return""},e.getIsNewUser=function(e){return e?"新用户":"老用户"},e.kuaishouReported=function(e){if(console.log("kuaishou-0"),Or.onMiniGame&&21==e){console.log("kuaishou-1");var t=wx.getLaunchOptionsSync();t.query.ksChannel&&"kuaishou"==t.query.ksChannel&&(console.log("kuaishou-2"),console.log("getLaunchOptionsSync:"+JSON.stringify(t)),console.log(t.query.ksChannel),console.log(g.clock.currentTime),console.log(t.query.callback),B.getHttp("http://ad.partner.gifshow.com/track/activate?event_type=1&event_time="+g.clock.currentTime+"&callback="+t.query.callback,"",""))}},e}(),F=function(){function e(){}return o(e,"link.denglu.mini.MiniConston"),s(1,e,"shareMessage",function(){var t=Math.round(Math.random()*(e.shareUrlArr.length-1)),i=e.shareUrlArr[t],n=Math.round(Math.random()*(e.shareNameArr.length-1)),o=e.shareNameArr[n];return[o,i]}),e.normatName=function(e){return e.length>=6&&(e=e.slice(0,5)+"... "),e},e.miniUrlAndEncode=function(e,t){return-1!=e.indexOf(".fnt")||-1!=e.indexOf(".json")?"utf8":"arraybuffer"==t?"":"ascii"},n(e,["hashtag_list",function(){return this.hashtag_list=["文字游戏","文字挂机","放置挂机","无尽洪荒"]},"shareUrlArr",function(){return this.shareUrlArr=["https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibt49ygKb3icEKO8yvn2qNESUxGx5wtxLfnvRtBqibNibwOkn9of3G3icyPW/0","https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibuyMiaQcwIBBFV36o59WiaJR26LVfsvpibIiaSUAJg1wJXKibeakuqDXiaKCL/0","https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibsRfxUQEiaQ2AtryDMmhLXUBn4vLaQl0Jgr3jdr22Yp2G4MX5ZyDpH2H/0","https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibv9icBVrqU1fgczCX73mN8wibcrUKicw2tXesq9J3z0eQqvIQH5YzOZyPt/0","https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibt1SMUHKogFIsPRUyTLKLEalOz5icylSiaDrX8pcR0BiccT3Ke9xZCiagUV/0","https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibuFp2zDlH9wbtia1qCicicyrvjyzWG9UjjwIxtb1CHw8vlRrFDguKOvQ6z/0","https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibsbWhQmDnUc5R454emHmycH4sOicJAB4EPrY7OIymQH4ibgxibtXzBUBRU/0","https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibv19BicyLbT0NZ9Dkw0eqDm2zmsGkREibmOIicJsAsbG3FSYRRBaIJyhPI/0","https://mmocgame.qpic.cn/wechatgame/dI1GYRuaBibtH3IALqgebfF88ibQ0OrstKgWa82RhLRKN6zibP7fYkj1iaQ1kALPBcZW/0"]},"shareNameArr",function(){return this.shareNameArr=["魔性挂机游戏，休闲解压，这款游戏真的太好玩了！","这款文字挂机游戏真的太好玩了！","最近迷上了这款文字挂机游戏，一玩就是通宵……","文字挂机游戏，不用一滴水，轻松愉快，随时随地想玩就玩。","轻松挂机游戏，上班挂机，下班回收，好玩不累！","这款文字挂机游戏，自动挂机，自动升级，爽翻了！","超解压的挂机小游戏，小伙一玩就停不下来！","挂机挂机也能玩，这款放置挂机游戏超好玩！","佛系放置挂机小游戏，佛系养成不氪金，佛系挂机升级！","我想要的天！这游戏挂机也能玩一天，太爽了吧！","放置挂机小游戏，自动挂机升级，挂机捡装备！","这才是良心放置游戏，挂机收装备，不氪金也能玩！","老铁们，这款放置挂机游戏火了，还不快来试试？","经典文字游戏！挂机放置，挂机就能升级，升级就是快！","文字挂机游戏，一玩就停不下来，你敢来挑战吗？","放置修仙新游戏，MUD文字挂机修仙小游戏","看脸的时代终于来了！这款文字挂机游戏，自动挂机收资源！"]}]),e}(),G=function(){function e(){}return o(e,"link.denglu.api.UserData"),e.encryptedData=null,e.iv=null,e.score=NaN,e.carList=null,e.rankArr=null,e.saveScoreFlag=!1,e.vip=0,e.gamekay="C7IwtLe7bSxK!FodKy5GCRwb5BiKSvta",e.gameType=null,e.kid=NaN,e.gameKid=NaN,e.sid="",e.uid=null,e.pid="ps",e.gid="1",e.cj_time=null,e.dl_time=null,e.type=null,e.g_name=null,e.isShare=!1,e.mycode="",e.drawCount=0,e.headImg="",e.nickName="",e.serverId="cloud_8808",e.serverKey="1690a1c5bc44bff5e41220c6a0bb4011",e.userId=null,e.oId=null,e.token=null,e.session_key="",e.openId="",e.userName="",e.userHead=null,e.screenWidth=NaN,e.screenHeight=NaN,e.windowWidth=NaN,e.windowHeight=NaN,e.platform="",e.ssdVersion="",e.pixelRatio=NaN,e.appName="",e.statusBarHeight=NaN,e.isUnread=!1,e.ptagent=null,e.gameSound=null,e}(),H=function(){function e(){}return o(e,"link.denglu.api.HWData"),e.initSpecialApi=function(){qg.setPreferredFramesPerSecond(30)},e.createRewardedVideoAd=function(t,i){e.isCall||(e.succeedFun=t,e.errorFun=i,console.log("加载广告"),e.isCall=!0,e.isInitAD?e.rewardedVideoAd.load():(e.rewardedVideoAd=e.initRewardedVideoAd({adUnitId:"x8p9x7zoz7",success:function(e){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd success")},fail:function(e,t){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd fail: "+e+","+t)},complete:function(){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd complete")}}),e.rewardedVideoAd.onLoad(function(){console.log("ad demo :ad loaded."),e.rewardedVideoAd.show()}),e.rewardedVideoAd.onError(function(t){switch(console.error("load ad error:"+JSON.stringify(t)),t.errCode){case 1004:console.log("无合适的广告, 尝试重新加载"),e.isCall&&x.getInstance().sendNotification("prompted_info_show",{info:"暂无合适的广告, 请稍后尝试"})}e.isCall=!1}),e.rewardedVideoAd.onClose(function(t){console.log("ad onClose: "+t.isEnded),e.isCall&&(e.isCall=!1,t&&t.isEnded||void 0===t?(console.log("播放激励视频结束，给予奖励"),e.succeedFun()):(console.log("播放没结束，不给予奖励"),e.errorFun()))}),e.rewardedVideoAd.load(),e.isInitAD=!0))},e.gamelogin=function(){console.log("Sign-in"),e.login({forceLogin:1,appid:"105223067",success:function(e){console.log("Game login success:"),console.log(JSON.stringify(e)),console.log("准备发送数据给服务器"),op.sendOpedId({playerLevel:e.playerLevel,playerSSign:encodeURI(e.gameAuthSign),ts:e.ts,playerId:e.playerId})},fail:function(e,t){console.log("game login with real fail:"+e+", code:"+t),x.getInstance().sendNotification("OPEN_MINI_LOGIN_REG_PAGE")}})},e.payment=function(t){B.getHttp("https://s001.mudgj.com/api/s079/exthwmini/buildSign",{data:JSON.stringify(t)},null,function(t){e.requestGamePayment({orderInfo:t,success:function(e){console.log("pay success "+e)},fail:function(e,t){console.log("pay fail : "+t+","+e)}})},function(e){})},e.exitMiniProgram=function(){e.exitApplication({success:function(){console.log("exitApplication success")},fail:function(){console.log("exitApplication fail")},complete:function(){console.log("exitApplication complete")}})},e.miniGame_name="华为小游戏",e.rewardedVideoAd=null,e.isCall=!1,e.isInitAD=!1,e.succeedFun=null,e.errorFun=null,n(e,["exitApplication",function(){return this.exitApplication=qg.exitApplication},"requestGamePayment",function(){return this.requestGamePayment=qg.hwPay},"login",function(){return this.login=qg.gameLoginWithReal},"getSystemInfo",function(){return this.getSystemInfo=qg.getSystemInfo},"onShow",function(){return this.onShow=qg.onShow},"onHide",function(){return this.onHide=qg.onHide},"showToast",function(){return this.showToast=qg.showToast},"showLoading",function(){return this.showLoading=qg.showLoading},"hideLoading",function(){return this.hideLoading=qg.hideLoading},"getSetting",function(){return this.getSetting=qg.getSetting},"showModal",function(){return this.showModal=qg.showModal},"initRewardedVideoAd",function(){return this.initRewardedVideoAd=qg.createRewardedVideoAd}]),e}(),U=function(){function e(){}return o(e,"link.denglu.api.VIVOData"),e.initSpecialApi=function(){qg.setPreferredFramesPerSecond(30)},e.createRewardedVideoAd=function(t,i){e.isCall||(e.succeedFun=t,e.errorFun=i,console.log("加载广告"),e.isCall=!0,e.isInitAD?e.rewardedVideoAd.load():(e.rewardedVideoAd=e.initRewardedVideoAd({posId:"61c1cf2d7b06491f8af29539f3daf05c",success:function(e){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd success")},fail:function(e,t){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd fail: "+e+","+t)},complete:function(){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd complete")}}),e.rewardedVideoAd.onLoad(function(){console.log("ad demo :ad loaded."),e.rewardedVideoAd.show()}),e.rewardedVideoAd.onError(function(t){switch(console.error("load ad error:"+JSON.stringify(t)),t.errCode){case 1004:console.log("无合适的广告, 尝试重新加载"),e.isCall&&x.getInstance().sendNotification("prompted_info_show",{info:"暂无合适的广告, 请稍后尝试"})}e.isCall=!1}),e.rewardedVideoAd.onClose(function(t){console.log("ad onClose: "+t.isEnded),e.isCall&&(e.isCall=!1,t&&t.isEnded||void 0===t?(console.log("播放激励视频结束，给予奖励"),e.succeedFun()):(console.log("播放没结束，不给予奖励"),e.errorFun()))}),e.isInitAD=!0))},e.gamelogin=function(){as.debug(e.miniGame_name,"vivo","Sign-in"),e.login({success:function(e){console.log("Game login success:"),console.log(JSON.stringify(e)),e.data.token?op.sendOpedId({token:e.data.token}):console.error("小程序Login：登录失败!",e.errMsg)},fail:function(e){console.error("小程序login接口调用失败:",e),x.getInstance().sendNotification("OPEN_MINI_LOGIN_REG_PAGE")}})},e.payment=function(t){B.getHttp("https://s001.mudgj.com/api/s079/extvivomini/buildSign",{data:JSON.stringify(t)},null,function(t){e.requestGamePayment({orderInfo:JSON.stringify(t),success:function(e){console.log("pay success "+e)},fail:function(e){console.log("pay fail : "+e)},cancel:function(e){console.log("pay cancel "+e)},complete:function(){console.log("pay complete ")}})},function(e){})},e.exitMiniProgram=function(){e.exitApplication()},e.miniGame_name="vivo小游戏",e.rewardedVideoAd=null,e.isCall=!1,e.isInitAD=!1,e.succeedFun=null,e.errorFun=null,n(e,["exitApplication",function(){return this.exitApplication=qg.exitApplication},"requestGamePayment",function(){return this.requestGamePayment=qg.pay},"login",function(){return this.login=qg.login},"getSystemInfo",function(){return this.getSystemInfo=qg.getSystemInfo},"getSystemInfoSync",function(){return this.getSystemInfoSync=qg.getSystemInfoSync},"request",function(){return this.request=qg.request},"onShow",function(){return this.onShow=qg.onShow},"onHide",function(){return this.onHide=qg.onHide},"getUpdateManager",function(){return this.getUpdateManager=qg.getUpdateManager},"showToast",function(){return this.showToast=qg.showToast},"showLoading",function(){return this.showLoading=qg.showLoading},"hideLoading",function(){return this.hideLoading=qg.hideLoading},"getSetting",function(){return this.getSetting=qg.getSetting},"showModal",function(){return this.showModal=qg.showModal},"initRewardedVideoAd",function(){return this.initRewardedVideoAd=qg.createRewardedVideoAd}]),e}(),z=function(){function e(){}return o(e,"link.denglu.api.XMData"),e.initSpecialApi=function(){qg.setPreferredFramesPerSecond(30),e.isInitAD||(e.rewardedVideoAd=e.initRewardedVideoAd({adUnitId:"e03aff3e3c45946b4475a00f30e7704e",success:function(e){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd success")},fail:function(e,t){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd fail: "+e+","+t)},complete:function(){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd complete")}}),e.rewardedVideoAd.onLoad(function(){console.log("ad demo :ad loaded."),e.isReady=!0}),e.rewardedVideoAd.onError(function(t){switch(console.error("load ad error:"+JSON.stringify(t)),t.errCode){case 1004:console.log("无合适的广告, 尝试重新加载"),e.isCall&&x.getInstance().sendNotification("prompted_info_show",{info:"暂无合适的广告, 请稍后尝试"})}e.isCall=!1}),e.rewardedVideoAd.onClose(function(t){console.log("ad onClose: "+t.isEnded),e.isCall=!1,t&&t.isEnded||void 0===t?(console.log("播放激励视频结束，给予奖励"),e.succeedFun()):(console.log("播放没结束，不给予奖励"),e.errorFun())}),e.isInitAD=!0)},e.createRewardedVideoAd=function(t,i){e.isCall||(e.succeedFun=t,e.errorFun=i,console.log("加载广告"),e.isCall=!0,e.isReady?(e.rewardedVideoAd.show(),e.isReady=!1):(e.rewardedVideoAd.show(),e.rewardedVideoAd.load(),e.isReady=!1))},e.gamelogin=function(){console.log("Sign-in"),e.login({success:function(t){console.log("Game login success:"),console.log(JSON.stringify(t)),t.data.session?(e.xm_appAccountId=t.data.appAccountId,e.xm_session=t.data.session,op.sendOpedId({session:e.xm_session,userId:e.xm_appAccountId})):(console.error("小程序Login：登录失败!",t.errMsg),x.getInstance().sendNotification("OPEN_MINI_LOGIN_REG_PAGE"))},fail:function(e){console.error("小程序login接口调用失败:",e),x.getInstance().sendNotification("OPEN_MINI_LOGIN_REG_PAGE")}})},e.payment=function(t){B.getHttp("https://s001.mudgj.com/api/s079/extxmmini/buildSign",{data:JSON.stringify(t),appAccountId:e.xm_appAccountId,session:e.xm_session},null,function(t){e.requestGamePayment({orderInfo:t,success:function(e){console.log("pay success "+e)},fail:function(e,t){console.log("pay fail : "+t+","+e)}})},function(e){})},e.exitMiniProgram=function(){e.exitApplication({success:function(){console.log("exitApplication success")},fail:function(){console.log("exitApplication fail")},complete:function(){console.log("exitApplication complete")}})},e.miniGame_name="小米小游戏",e.rewardedVideoAd=null,e.isCall=!1,e.isInitAD=!1,e.isReady=!1,e.succeedFun=null,e.errorFun=null,e.xm_appAccountId="",e.xm_session="",n(e,["exitApplication",function(){return this.exitApplication=qg.exitApplication},"requestGamePayment",function(){return this.requestGamePayment=qg.pay},"login",function(){return this.login=qg.login},"getSystemInfo",function(){return this.getSystemInfo=qg.getSystemInfo},"onShow",function(){return this.onShow=qg.onShow},"onHide",function(){return this.onHide=qg.onHide},"getUpdateManager",function(){return this.getUpdateManager=qg.getUpdateManager},"showToast",function(){return this.showToast=qg.showToast},"showLoading",function(){return this.showLoading=qg.showLoading},"hideLoading",function(){return this.hideLoading=qg.hideLoading},"showModal",function(){return this.showModal=qg.showModal},"initRewardedVideoAd",function(){return this.initRewardedVideoAd=qg.createRewardedVideoAd}]),e}(),W=function(){function e(){}return o(e,"link.denglu.api.WXData"),e.initSpecialApi=function(){},e.createRewardedVideoAd=function(t,i){e.isCall||(e.succeedFun=t,e.errorFun=i,console.log("加载广告"),e.isInitAD||(e.videoAd.onLoad(function(){console.log("广告激励视频 广告加载成功")}),e.videoAd.onError(function(t){e.isCall=!1,console.log("广告失败",t)}),e.videoAd.onClose(function(t){console.log("广告播放完成",t),e.isCall&&(e.isCall=!1,t&&t.isEnded||void 0===t?e.succeedFun():e.errorFun())}),e.isInitAD=!0),e.isCall=!0,console.log("广告播放"),e.videoAd.show()["catch"](function(t){e.isCall=!1,console.log("广告播放失败，重新加载",t),e.videoAd.load().then(function(){console.log("广告加载成功，开始播放"),e.isCall=!0,e.videoAd.show()})["catch"](function(t){e.isCall=!1,console.log("激励视频 广告显示失败",t)})}))},e.payment=function(t){e.requestGamePayment({mode:"game",env:0,currencyType:"CNY",platform:"android",buyQuantity:10*t.buy,offerId:1450031305,zoneId:1,success:function(i){B.getHttp("https://s001.mudgj.com/payment/ext/callbackWX",{data:JSON.stringify(t)},null,function(t){console.log("支付后台错误",t),0==t.code&&(e.showToast({title:"充值成功",duration:2e3}),op.onPaySuccess(vo["int"](t.buy),t.buy_tips,"wx"))},function(e){console.log("支付后台错误",i)})},fail:function(e){console.log("支付微信错误",e)}})},e.miniGame_name="微信小游戏",e.contactUi=null,e.isCall=!1,e.isInitAD=!1,e.succeedFun=null,e.errorFun=null,n(e,["getOpenDataContext",function(){return this.getOpenDataContext=wx.getOpenDataContext},"openSetting",function(){return this.openSetting=wx.openSetting},"vibrateShort",function(){return this.vibrateShort=wx.vibrateShort},"vibrateLong",function(){return this.vibrateLong=wx.vibrateLong},"previewImage",function(){return this.previewImage=wx.previewImage},"exitMiniProgram",function(){return this.exitMiniProgram=wx.exitMiniProgram},"requestGamePayment",function(){return this.requestGamePayment=wx.requestMidasPayment},"checkSession",function(){return this.checkSession=wx.checkSession},"login",function(){return this.login=wx.login},"request",function(){return this.request=wx.request},"getSystemInfo",function(){return this.getSystemInfo=wx.getSystemInfo},"getLaunchOptionsSync",function(){return this.getLaunchOptionsSync=wx.getLaunchOptionsSync},"onShow",function(){return this.onShow=wx.onShow},"onHide",function(){return this.onHide=wx.onHide},"showShareMenu",function(){return this.showShareMenu=wx.showShareMenu},"getUpdateManager",function(){return this.getUpdateManager=wx.getUpdateManager},"showToast",function(){return this.showToast=wx.showToast},"onShareAppMessage",function(){return this.onShareAppMessage=wx.aldOnShareAppMessage},"shareAppMessage",function(){return this.shareAppMessage=wx.aldShareAppMessage},"showLoading",function(){return this.showLoading=wx.showLoading},"hideLoading",function(){return this.hideLoading=wx.hideLoading},"getSetting",function(){return this.getSetting=wx.getSetting},"videoAd",function(){return this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-cbbd7ff30d66eb7c"})},"showModal",function(){return this.showModal=wx.showModal},"createFeedbackButton",function(){return this.createFeedbackButton=wx.createFeedbackButton},"eventSetOpenid",function(){return this.eventSetOpenid=wx.aldSendOpenid},"eventSendEvent",function(){return this.eventSendEvent=wx.aldSendEvent},"eventLevel",function(){return this.eventLevel=wx.aldLevel},"eventRevenue",function(){return this.eventRevenue=wx.aldRevenue},"eventStage",function(){return this.eventStage=wx.aldStage}]),e}(),Y=function(){function e(){}return o(e,"link.denglu.api.OPPOData"),e.init=function(){},e.initSpecialApi=function(){e.getSystemInfo({success:function(t){e.engineVersion=t.platformVersionCode,console.log("获取引擎版本号:"+e.engineVersion)}}),e.getManifestInfo({success:function(t){console.log(JSON.stringify(t)),console.log(e.appVersion),e.appVersion=t.manifest.versionCode,console.log(e.appVersion)}})},e.createRewardedVideoAd=function(t,i){e.isCall||(e.succeedFun=t,e.errorFun=i,console.log("加载广告"),e.isCall=!0,e.isInitAD?e.rewardedVideoAd.load():(e.rewardedVideoAd=e.initRewardedVideoAd({adUnitId:"532088",success:function(e){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd success")},fail:function(e,t){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd fail: "+e+","+t)},complete:function(){console.log("ad demo : loadAndShowVideoAd createRewardedVideoAd complete")}}),e.rewardedVideoAd.onLoad(function(){console.log("ad demo :ad loaded."),e.rewardedVideoAd.show()}),e.rewardedVideoAd.onError(function(t){switch(console.error("load ad error:"+JSON.stringify(t)),t.errCode){case 1004:console.log("无合适的广告, 尝试重新加载"),e.isCall&&x.getInstance().sendNotification("prompted_info_show",{info:"暂无合适的广告, 请稍后尝试"})}e.isCall=!1}),e.rewardedVideoAd.onClose(function(t){console.log("ad onClose: "+t.isEnded),e.isCall&&(e.isCall=!1,t&&t.isEnded||void 0===t?(console.log("播放激励视频结束，给予奖励"),e.succeedFun()):(console.log("播放没结束，不给予奖励"),e.errorFun()))}),e.rewardedVideoAd.load(),e.isInitAD=!0))},e.gamelogin=function(){console.log("Sign-in"),e.login({success:function(t){console.log("Game login success:"),console.log(JSON.stringify(t)),t.data.token?(e.vivo_token=t.data.token,op.sendOpedId({token:t.data.token})):(console.error("小程序Login：登录失败!",t.errMsg),x.getInstance().sendNotification("OPEN_MINI_LOGIN_REG_PAGE"))},fail:function(e){console.error("小程序login接口调用失败:",e),x.getInstance().sendNotification("OPEN_MINI_LOGIN_REG_PAGE")}})},e.payment=function(t){B.getHttp("https://s001.mudgj.com/api/s079/extoppomini/buildSign",{data:JSON.stringify(t),token:e.vivo_token,appVersion:e.appVersion,engineVersion:e.engineVersion},null,function(t){e.requestGamePayment({appId:t.appId,token:t.token,timestamp:t.timestamp,paySign:t.paySign,orderNo:t.orderNo,success:function(e){console.log(JSON.stringify(e.data))},fail:function(e){console.log(JSON.stringify(e))}})},function(e){})},e.playMusic=function(t){if(null==e.audio){e.audio=e.createInnerAudioContext(),e.audio.loop=!0,e.audio.volume=.1,e.audio.autoplay=!1;var i=function(){e.audio.play(),e.audio.offCanplay(i)};e.audio.onCanplay(i),e.audio.src=t}else e.audio.play()},e.stopAll=function(){null==e.audio&&(e.audio=e.createInnerAudioContext(),e.audio.stop())},e.miniGame_name="oppo小游戏",e.rewardedVideoAd=null,e.isCall=!1,e.isInitAD=!1,e.succeedFun=null,e.errorFun=null,e.vivo_token="",e.appVersion="1045",e.engineVersion="",e.audio=null,n(e,["exitMiniProgram",function(){return this.exitMiniProgram=qg.exitApplication},"requestGamePayment",function(){return this.requestGamePayment=qg.pay},"login",function(){return this.login=qg.login},"getSystemInfo",function(){return this.getSystemInfo=qg.getSystemInfo},"getSystemInfoSync",function(){return this.getSystemInfoSync=qg.getSystemInfoSync},"request",function(){return this.request=qg.request},"onShow",function(){return this.onShow=qg.onShow},"onHide",function(){return this.onHide=qg.onHide},"getUpdateManager",function(){return this.getUpdateManager=qg.getUpdateManager},"showToast",function(){return this.showToast=qg.showToast},"showLoading",function(){return this.showLoading=qg.showLoading},"hideLoading",function(){return this.hideLoading=qg.hideLoading},"getSetting",function(){return this.getSetting=qg.getSetting},"showModal",function(){return this.showModal=qg.showModal},"getManifestInfo",function(){return this.getManifestInfo=qg.getManifestInfo},"createInnerAudioContext",function(){return this.createInnerAudioContext=qg.createInnerAudioContext},"setEnableDebug",function(){return this.setEnableDebug=qg.setEnableDebug},"initRewardedVideoAd",function(){return this.initRewardedVideoAd=qg.createRewardedVideoAd}]),e}(),q=function(){function e(){}return o(e,"link.denglu.api.QQData"),e.initSpecialApi=function(){},e.createRewardedVideoAd=function(t,i){e.isCall||(e.succeedFun=t,e.errorFun=i,console.log("加载广告"),e.isInitAD||(e.videoAd.onLoad(function(){console.log("广告激励视频 广告加载成功")}),e.videoAd.onError(function(e){W.isCall=!1,console.log("广告失败",e)}),e.videoAd.onClose(function(t){console.log("广告播放完成",t),e.isCall&&(e.isCall=!1,t&&t.isEnded||void 0===t?e.succeedFun():e.errorFun())}),e.isInitAD=!0),e.isCall=!0,console.log("广告播放"),e.videoAd.show()["catch"](function(t){W.isCall=!1,console.log("广告播放失败，重新加载",t),e.videoAd.load().then(function(){console.log("广告加载成功，开始播放"),e.isCall=!0,e.videoAd.show()})["catch"](function(e){W.isCall=!1,console.log("激励视频 广告显示失败",e)})}))},e.payment=function(t){vo["int"](t.amt);console.log(JSON.stringify(t)),e.requestGamePayment({setEnv:0,starCurrency:t.amt,prepayId:t.prepayId,success:function(e){op.onPaySuccess(vo["int"](t.amt)/10,t.buy_tips,"qq"),console.log(e)},fail:function(e){console.log(e)}})},e.miniGame_name="qq小游戏",e.contactUi=null,e.onShowAd=!1,e.isCall=!1,e.isInitAD=!1,e.succeedFun=null,e.errorFun=null,n(e,["getOpenDataContext",function(){return this.getOpenDataContext=qq.getOpenDataContext},"openSetting",function(){return this.openSetting=qq.openSetting},"vibrateShort",function(){return this.vibrateShort=qq.vibrateShort},"vibrateLong",function(){return this.vibrateLong=qq.vibrateLong},"previewImage",function(){return this.previewImage=qq.previewImage},"exitMiniProgram",function(){return this.exitMiniProgram=qq.exitMiniProgram},"requestGamePayment",function(){return this.requestGamePayment=qq.requestMidasPayment},"checkSession",function(){return this.checkSession=qq.checkSession},"login",function(){return this.login=qq.login},"request",function(){return this.request=qq.request},"getSystemInfo",function(){return this.getSystemInfo=qq.getSystemInfo},"getLaunchOptionsSync",function(){return this.getLaunchOptionsSync=qq.getLaunchOptionsSync},"onShow",function(){return this.onShow=qq.onShow},"onHide",function(){return this.onHide=qq.onHide},"showShareMenu",function(){return this.showShareMenu=qq.showShareMenu},"getUpdateManager",function(){return this.getUpdateManager=qq.getUpdateManager},"showToast",function(){return this.showToast=qq.showToast},"onShareAppMessage",function(){return this.onShareAppMessage=qq.uma.onShareAppMessage},"shareAppMessage",function(){return this.shareAppMessage=qq.uma.shareAppMessage},"showLoading",function(){return this.showLoading=qq.showLoading},"hideLoading",function(){return this.hideLoading=qq.hideLoading},"getSetting",function(){return this.getSetting=qq.getSetting},"videoAd",function(){return this.videoAd=qq.createRewardedVideoAd({adUnitId:"07e8ebc4743c5065272e7c3f90403d26"})},"showModal",function(){return this.showModal=qq.showModal},"createFeedbackButton",function(){return this.createFeedbackButton=qq.createFeedbackButton},"eventSetOpenid",function(){return this.eventSetOpenid=qq.uma.setOpenid},"eventSendEvent",function(){return this.eventSendEvent=qq.uma.trackEvent},"eventLevel",function(){return this.eventLevel=qq.uma.level},"eventRevenue",function(){return this.eventRevenue=qq.uma.revenue},"eventStage",function(){return this.eventStage=qq.uma.stage}]),e}(),K=function(){function e(){}return o(e,"link.denglu.api.TTData"),e.initSpecialApi=function(){e.initCreateContactButton(),e.initVideo(),e.isInitAD||(e.videoAd.onLoad(function(){console.log("ad demo :ad loaded.")}),e.videoAd.onError(function(t){switch(console.error("load ad error:"+JSON.stringify(t)),t.errCode){case 1004:console.log("无合适的广告, 尝试重新加载"),x.getInstance().sendNotification("prompted_info_show",{info:"暂无合适的广告, 请稍后尝试"})}e.isCall=!1}),e.videoAd.onClose(function(t){console.log("ad onClose: "+t.isEnded),e.isCall&&(e.isCall=!1,t.isEnded?(e.succeedFun(),console.log("观看完视频")):(console.log("未观看完视频"),e.errorFun()))}),e.isInitAD=!0)},e.createRewardedVideoAd=function(t,i){e.isCall||(e.succeedFun=t,e.errorFun=i,console.log("加载广告"),e.isCall=!0,e.videoAd.show(),e.videoAd.load())},e.initCreateContactButton=function(){e.contactUi&&e.createContactButton||(e.contactUi=e.createContactButton({type:"image",image:"./ui/agent.png",style:{left:30,top:10,width:36,height:36},success:function(e){console.log("create success",e)},fail:function(e){console.log("create fail",e)},complete:function(e){console.log("create complete",e)}}))},e.initVideo=function(){function t(){f?(e.videoUi.on("mousedown",i.stage,o),c(!1)):(e.videoUi.on("mousedown",i.stage,a),c(!0)),i.stage.off("mousemove",i.stage,r),i.stage.off("mouseup",i.stage,s),i.stage.off("mouseout",i.stage,s),i.stage.off("mouseover",i.stage,s)}function n(){e.videoUi.off("mousedown",i.stage,o),i.stage.on("mousemove",i.stage,r),i.stage.on("mouseup",i.stage,s),i.stage.on("mouseout",i.stage,s),i.stage.on("mouseover",i.stage,s)}function o(t){console.log("点击成功：",t.stageX,t.stageY),e.isVideoUIMove=!1,i.stage.timer.once(80,i.stage,function(){e.isVideoUIMove=!0}),_=t.stageX,m=t.stageY,f=!1,n()}function s(e){t(),0==f&&(console.log("开始录像"),d.start({duration:300}))}function r(t){var i=e.videoUi.x-(_-t.stageX);_<t.stageX&&(i=e.videoUi.x+(t.stageX-_));var n=e.videoUi.y-(m-t.stageY);m<t.stageY&&(n=e.videoUi.y+(t.stageY-m)),console.log("移动：",i),0!=e.isVideoUIMove&&(i>e.videoUi.width/2+10&&i<740-e.videoUi.width/2&&(e.videoUi.x=i,_=t.stageX),n>e.videoUi.height/2+10&&n<1334-e.videoUi.height/2&&(e.videoUi.y=n,m=t.stageY),f=!0)}function a(n){e.videoTime<=26?(f=!0,e.videoUi.off("mousedown",i.stage,a),t(),console.log("停止录像"),d.stop()):e.showToast({title:"大于4秒才能停止",duration:2e3})}function l(){e.videoUi.visible=op.onVideoShow,1==e.videoUi.type2.visible?(e.videoTime--,e.videoTime>=30?e.videoUi.times.text="30s":e.videoUi.times.text=e.videoTime+"s",e.videoTime<=1&&a(),e.videoTime<27?e.videoUi.times.color="#ffffff":e.videoUi.times.color="#ff0400"):e.videoTime=30}function c(t){e.videoUi&&(e.videoUi.type1.visible=!1,e.videoUi.type2.visible=!1,t?e.videoUi.type2.visible=!0:(e.videoUi.type1.visible=!0,e.videoUi.times.text="30s",e.videoUi.times.color="#ff0400"))}function u(t){e.shareAppMessage({channel:"video",title:"无尽洪荒",desc:F.shareMessage[0],extra:{videoPath:t,hashtag_list:F.hashtag_list,withVideoId:!0},success:function(e){var t=x.getInstance().retrieveProxy("SocketProxy");Ng.userVO&&Ng.userVO.getValue(1002)&&t.isConnecting()&&mu.instance.shareGameTT(),console.log("分享视频成功")},fail:function(e){console.log("分享失败"+e.errMsg)}})}if(!e.videoUi||!e.getGameRecorderManager){var d=e.getGameRecorderManager();d.onStart(function(e){console.log("录像中。。。")});var p=["本次分享后可获得龙涎果*3","本次分享后可获得龙涎果*5","本次分享后可获得20元宝"];d.onStop(function(e){var t=Ng.userVO.getValue(1025);console.log(t);var n=3-t%1e3;ro.isToday(new Date(t))||(n=3),console.log(n);var o="";o=0>=n?"今日录屏分享奖励已全部领取完成，点击确定继续分享。":"今日录屏分享奖励剩余"+n+"次\n"+p[3-n];var s=x.getInstance().retrieveProxy("SocketProxy");s.isConnecting()||(o="分享"),x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:o,handler:h.create(i.stage,function(t){t&&u(e.videoPath)})}),console.log("完成录像",e.videoPath)}),e.videoUi=new IC,i.stage.addChild(e.videoUi),e.videoUi.zOrder=1e4,e.videoUi.anchorX=.5,e.videoUi.anchorY=.5,e.videoUi.x=e.videoUi.width/2+380,e.videoUi.y=100,e.videoUi.visible=!1;var f=!0;e.onVideoTrue=!1;var _=0,m=0;t(),e.videoUi.timer.loop(1e3,i.stage,l)}},e.getShareTime=function(){var e=Ng.userVO.getValue(1025),t=3-e%1e3;return ro.isToday(new Date(e))||(t=3),t},e.payment=function(t){var i=(Ng.userVO.unitId.id,Ng.userVO.getValue(1002),Ng.userVO.getValue(1006),vo["int"](t.buy));e.requestGamePayment({mode:"game",env:0,currencyType:"CNY",platform:"android",buyQuantity:10*i,zoneId:v.serverId,customId:t.game_id,extraInfo:"{game_id: '"+t.game_id+"',gameData: '"+t.gameData+"',buy_tips: '"+t.buy_tips+"'}",success:function(i){console.log(i),e.active_ad_pay(t),op.onPaySuccess(vo["int"](t.buy),t.buy_tips,"tt")},fail:function(e){console.log(e)}})},e.active_ad_register=function(){var t=Ts.getItem(op.mini_user_ad_params);null!=t&&""!=t&&(console.log("sendtoTAQ"+t),e.sendtoTAQ({event_type:"active_register",extra:{ad_params:t}}))},e.active_ad_pay=function(t){var i=Ts.getItem(op.mini_user_ad_params);i&&""!=i&&(console.log("sendtoTAQ"+i),e.sendtoTAQ({event_type:"active_pay",extra:{buy_tips:t.buy_tips,customId:t.game_id,buyQuantity:10*t.buy}}))},e.miniGame_name="字节小游戏",e.videoUi=null,e.contactUi=null,e.videoTime=0,e.isVideoUIMove=!1,e.onVideoTrue=!1,e.isCall=!1,e.isInitAD=!1,e.succeedFun=null,e.errorFun=null,n(e,["getOpenDataContext",function(){return this.getOpenDataContext=tt.getOpenDataContext},"openSetting",function(){return this.openSetting=tt.openSetting},"vibrateShort",function(){return this.vibrateShort=tt.vibrateShort},"vibrateLong",function(){return this.vibrateLong=tt.vibrateLong},"previewImage",function(){return this.previewImage=tt.previewImage},"exitMiniProgram",function(){return this.exitMiniProgram=tt.exitMiniProgram},"requestGamePayment",function(){return this.requestGamePayment=tt.requestGamePayment},"checkSession",function(){return this.checkSession=tt.checkSession},"login",function(){return this.login=tt.login},"request",function(){return this.request=tt.request},"reportAnalytics",function(){return this.reportAnalytics=tt.reportAnalytics},"getSystemInfo",function(){return this.getSystemInfo=tt.getSystemInfo},"getLaunchOptionsSync",function(){return this.getLaunchOptionsSync=tt.getLaunchOptionsSync},"onShow",function(){return this.onShow=tt.onShow},"onHide",function(){return this.onHide=tt.onHide},"showShareMenu",function(){return this.showShareMenu=tt.showShareMenu},"getUpdateManager",function(){return this.getUpdateManager=tt.getUpdateManager},"showToast",function(){return this.showToast=tt.showToast},"onShareAppMessage",function(){return this.onShareAppMessage=tt.uma.onShareAppMessage},"shareAppMessage",function(){return this.shareAppMessage=tt.uma.shareAppMessage},"showLoading",function(){return this.showLoading=tt.showLoading},"hideLoading",function(){return this.hideLoading=tt.hideLoading},"getSetting",function(){return this.getSetting=tt.getSetting},"videoAd",function(){return this.videoAd=tt.createRewardedVideoAd({adUnitId:"fjrbfijl7mn2c6b0i3"})},"showModal",function(){return this.showModal=tt.showModal},"getGameRecorderManager",function(){return this.getGameRecorderManager=tt.getGameRecorderManager},"createContactButton",function(){return this.createContactButton=tt.createContactButton},"sendtoTAQ",function(){return this.sendtoTAQ=tt.sendtoTAQ},"eventSetAnonymousOpenId",function(){return this.eventSetAnonymousOpenId=tt.uma.setAnonymousid},"eventSetOpenid",function(){return this.eventSetOpenid=tt.uma.setOpenid},"eventSendEvent",function(){return this.eventSendEvent=tt.uma.trackEvent},"eventLevel",function(){return this.eventLevel=tt.uma.level},"eventRevenue",function(){return this.eventRevenue=tt.uma.revenue},"eventStage",function(){return this.eventStage=tt.uma.stage}]),e}(),X=function(){function e(){}return o(e,"APIConfig"),e.init=function(t){e.PLATE_FORM=t.pf,Q.isLaya()?(e.FID=Q.getFlavor(),e.FLAVOR=Q.getFlavor()):e.FID=t.fid,"qingf"==e.FID?e.PLATE_FORM="QF":"tianran"==e.FID?e.PLATE_FORM="TR":"shihao"==e.FID?e.PLATE_FORM="SHIHAO":"tt199"==e.FID?e.PLATE_FORM="TT199":"u77"==e.FID?e.PLATE_FORM="U77":"u771"==e.FID?e.PLATE_FORM="U771":"p01"==e.FID?e.PLATE_FORM="P01":"xiaobai"==e.FID&&(e.PLATE_FORM="XB"),
e.QQ_GROUP=t.qqgrp,e.API_ROOT_USER=t.apiUser,e.API_ROOT_EXT=t.apiExt,!lo.isNull(t.apiExtAd)&&t.apiExtAd&&(e.API_ROOT_EXT_AD=t.apiExtAd),!lo.isNull(t.appVersionCode)&&t.appVersionCode&&(e.APP_VERSION_CODE=t.appVersionCode),$e._OPEN_WORLD_BOSS_FUN=!0,v.MULTY_VERSION_SERVER_LIST=null,"https://mudgj.com/api/s091"!=e.API_ROOT_USER&&"https://wjhh666.com/api/s091"!=e.API_ROOT_USER||"SELF"!=e.PLATE_FORM&&"IOS"!=e.PLATE_FORM||(v.MULTY_VERSION_SERVER_LIST=[{name:"经典版",pf:e.PLATE_FORM,fid:e.FID},{name:"限时版",pf:"P01",fid:"p01"}],v.MULTY_VERSION_SERVER_LIST_DEFALUT_INDEX=0,"hyad"==e.FID&&(v.MULTY_VERSION_SERVER_LIST_DEFALUT_INDEX=1)),e.PAYMENT_API_ORDER=t.payment,e.PAYMENT_API_JUMP=t.payment_jump,e.INDULGE_CHECK=t.indulge+"/check",e.INDULGE_IDENTIFY=t.indulge+"/identify",e._TEMP_LOSE_LOGIN=t.tempclose,!lo.isNull(t.debug)&&t.debug&&(e.IS_TEST=!0),!lo.isNull(t.testpay)&&t.testpay&&(v.OPEN_TEST_PAY=!0),!lo.isNull(t.show_invite)&&t.show_invite&&(v.SHOW_INVIT_PANEL=!0,e.INVITE_SHARE_URL=t.invite_url),v.socketIPChat=t.chatIP,v.socketPortChat=t.chatPort,lo.isNull(t.chatLimit)?"IOS"!=e.PLATE_FORM||Q.isLaya()||T.IS_ON_MINI||(v.limitChat=!1):v.limitChat="limit"==t.chatLimit,lo.isNull(t.indulgeType)||(v.INDULGE_TYPE=t.indulgeType),lo.isNull(t.gameName)||(v.GAME_NAME=t.gameName),lo.isNull(t.gameNumber)||(v.GAME_NUMBER=t.gameNumber),e.INDULGE_IDNAME="true"==t.indulgeIdName,lo.isNull(t.openJade)||(e._OPEN_JADE_FORCE="true"==t.openJade),lo.isNull(t.isGlobal)||(v.IS_GLOBAL_VERSION="true"==t.isGlobal);var i=!1;switch(e.PLATE_FORM){case"QF":case"TR":case"TT199":case"OL":case"IOS":case"P01":e.FID,v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0,"bd"==e.FID&&(v.isLoginSp=!0,v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0);break;case"PT":e.FID,i="2"!=gameSet.loginVo.fid,v.SHOW_ALERT_PANEL=i,v.OPEN_PAYMENT=i;break;case"XIAOMI":case"HUAWEI":case"OPPO":case"VIVO":case"JIUYOU":case"MEIZU":case"YYB":case"M4399":case"YIWAN":case"X7SY":case"WUFAN":case"BILI":lo.isNull(t.api_user_login)||(e.THIRD_PT_LOGIN_URL=t.api_user_login),lo.isNull(t.api_user_login2)||(e.THIRD_PT_LOGIN_URL2=t.api_user_login2),lo.isNull(t.api_query_order)||(e.THIRD_PT_QUERY_ORDER_URL=t.api_query_order),v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0,v.SHOW_INVIT_PANEL=!1,v.IS_THIRD_PT=!0,e.FID=t.fid;break;case"SHIHAO":lo.isNull(t.api_user_login)||(e.THIRD_PT_LOGIN_URL=t.api_user_login),lo.isNull(t.api_user_login2)||(e.THIRD_PT_LOGIN_URL2=t.api_user_login2),lo.isNull(t.api_query_order)||(e.THIRD_PT_QUERY_ORDER_URL=t.api_query_order),v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0,v.SHOW_INVIT_PANEL=!1,v.IS_THIRD_PT=!0;break;case"SHIHAOH5":lo.isNull(t.api_user_login)||(e.THIRD_PT_LOGIN_URL=t.api_user_login),lo.isNull(t.api_user_login2)||(e.THIRD_PT_LOGIN_URL2=t.api_user_login2),lo.isNull(t.api_query_order)||(e.THIRD_PT_QUERY_ORDER_URL=t.api_query_order),v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0,v.SHOW_INVIT_PANEL=!1,v.IS_THIRD_PT=!0,v.IS_THIRD_PT_H5=!0,ETSDK.Game.init({appid:"n9p81e5abaaf7f64791",secretkey:"e1c66d895fdd4facb89d384fb853d138"}),ETSDK.Game.show();break;case"HUAWEIGL":case"GOOGLE":case"IOSGL":case"QOOAPP":case"TAPTAP":lo.isNull(t.api_user_login)||(e.THIRD_PT_LOGIN_URL=t.api_user_login),lo.isNull(t.api_user_login2)||(e.THIRD_PT_LOGIN_URL2=t.api_user_login2),lo.isNull(t.api_query_order)||(e.THIRD_PT_QUERY_ORDER_URL=t.api_query_order),v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0,v.SHOW_INVIT_PANEL=!1,v.IS_THIRD_PT=!0,e.FID=t.fid;break;case"XMMINI":case"TT":case"WX":case"QQ":case"HWMINI":case"VIVOMINI":case"OPPOMINI":Or.onAndroid&&(v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0),Or.onIOS&&(v.SHOW_ALERT_PANEL=!1,v.OPEN_PAYMENT=!1);break;case"SELF":v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0,"bd"==e.FID&&(v.isLoginSp=!0,v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0);break;case"TEST":v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0;break;default:v.SHOW_ALERT_PANEL=!0,v.OPEN_PAYMENT=!0}e.initApiUrl()},e.initApiUrl=function(){e.LOGIN_API_SERVER_LIST=e.API_ROOT_EXT+"/server/list",e.LOGIN_API_PLATFORM_WX=e.API_ROOT_USER+"/user/loginWX",e.LOGIN_API_PLATFORM_WX_RELOAD=e.API_ROOT_USER+"/user/reloginWX",e.LOGIN_API_PLATFORM_ME_RELOAD=e.API_ROOT_USER+"/user/relogin",e.LOGIN_API_PLATFORM_ME_LOGIN=e.API_ROOT_USER+"/user/login",e.LOGIN_API_PLATFORM_ME_REG=e.API_ROOT_USER+"/user/reg",e.LOGIN_API_PLATFORM_ME_REG_SEND_MAIL=e.API_ROOT_USER+"/user/sendmail",e.LOGIN_API_PLATFORM_ME_REBACK=e.API_ROOT_USER+"/user/reback",e.LOGIN_API_PLATFORM_ME_LOGIN_PHONE=e.API_ROOT_USER+"/user/loginPhone",e.LOGIN_API_PLATFORM_ME_REG_SMS=e.API_ROOT_USER+"/user/regSms",e.LOGIN_API_PLATFORM_ME_REG_SEND_SMS=e.API_ROOT_USER+"/user/sendSms",e.LOGIN_API_PLATFORM_ME_REBACK_SMS=e.API_ROOT_USER+"/user/rebackSms",e.LOGIN_API_PLATFORM_ME_VISITOR_REG=e.API_ROOT_USER+"/user/visitreg",e.LOGIN_API_PLATFORM_ME_VISITOR_LOGIN=e.API_ROOT_USER+"/user/visitlogin",e.LOGIN_API_PLATFORM_ME_VISITOR_BIND=e.API_ROOT_USER+"/user/visitbind",e.LOGIN_API_PLATFORM_ME_LOGOUT=e.API_ROOT_USER+"/user/logout"},e.beginLogin=function(){var t;switch(e.PLATE_FORM){case"TEST":v.gameMain.showTestPage();break;case"PT":t=gameSet.loginVo,T.gameLoginPlatform(t);break;case"XIAOMI":case"HUAWEI":case"OPPO":case"VIVO":case"JIUYOU":case"MEIZU":case"YYB":case"M4399":case"YIWAN":case"X7SY":case"WUFAN":case"BILI":var i={login_url:e.THIRD_PT_LOGIN_URL,login_url2:e.THIRD_PT_LOGIN_URL2,query_order_url:e.THIRD_PT_QUERY_ORDER_URL};Q.onlogin(i);break;case"HUAWEIGL":case"GOOGLE":case"QOOAPP":case"TAPTAP":i={login_url:e.THIRD_PT_LOGIN_URL,login_url2:e.THIRD_PT_LOGIN_URL2,query_order_url:e.THIRD_PT_QUERY_ORDER_URL},Q.onlogin(i);break;case"SHIHAO":i={login_url:e.THIRD_PT_LOGIN_URL,login_url2:e.THIRD_PT_LOGIN_URL2,query_order_url:e.THIRD_PT_QUERY_ORDER_URL},Q.onlogin(i);break;case"SHIHAOH5":ETSDK.Game.login({success:function(t){function i(e){console.log("登录成功2：",e),T.gameLoginPlatform(e)}function n(e){console.log("登录失败2：",e)}console.log("登录成功：",t);var o="";o=e.THIRD_PT_LOGIN_URL+"?type=h5&uid="+t.userId+"&token="+t.access_token;var s=new Iu;s.on("complete",null,i),s.on("error",null,n),s.send(o,null,"get","json")},error:function(e){console.log("登录失败：",e)}});break;case"XMMINI":case"TT":case"WX":case"QQ":case"HWMINI":case"VIVOMINI":case"OPPOMINI":x.getInstance().sendNotification("OPEN_MINI_LOGIN_REG_PAGE");break;case"QF":case"TR":case"TT199":case"OL":case"SELF":case"IOS":case"P01":case"IOSGL":x.getInstance().sendNotification("OPEN_LOGIN_REG_PAGE");break;default:t=gameSet.loginVo,lo.isNull(t)?x.getInstance().sendNotification("OPEN_LOGIN_REG_PAGE"):T.gameLoginPlatform(t)}},e.gameReload=function(t){if(t&&e._clearData(),t||e.BE_KICKED_OFF)"TEST"==e.PLATE_FORM?Or.window.location.reload(!0):(e._gameReloadAll(),e.BE_KICKED_OFF=!1);else if("TEST"==e.PLATE_FORM)Or.window.location.reload(!0);else{var i=Ts.getItem("_sever_selectd");null==i||""==i?e.logout(!0):e._gameReloadOnlyNet()}},e._gameReloadOnlyNet=function(){var e=x.getInstance().retrieveProxy("SocketProxy");e.tryConnectTimes>=6?(e.resetTryConnectTimes(),Ts.removeItem("_sever_selectd"),x.getInstance().sendNotification("POP_ALERT_OFFLINE","尝试网络重连次数超6次")):(x.getInstance().sendNotification("socket_RECONECT"),x.getInstance().sendNotification("prompted_info_show",{info:"网络已断开，正在尝试重连"}),e.reconect())},e._clearData=function(){var e=x.getInstance().retrieveProxy("UserProxy");0==lo.isNull(e)&&e.reset();var t=x.getInstance().retrieveProxy("GoodsProxy");0==lo.isNull(t)&&t.reset(),x.getInstance().sendNotification("CLEAR_CACHE_DATA")},e._gameReloadAll=function(){v.gameMain.onLoaded()},e.openJade=function(){if(Q.isLayaAndIos()){var t=Q.getVersionCode(),i=vo["int"](t);if(!isNaN(i)&&i>=10027)return!0}return T.IS_ON_MINI?!0:e._OPEN_JADE_FORCE},e.payment=function(t){if(t.serverId=v.serverId+"",t.roleName=Ng.userVO.getValue(1002),t.serverName=v.serverName+"",t.roleId=v.playerId+"",t.roleLevel=Ng.userVO.getValue(1006),console.log(e.FLAVOR),T.IS_ON_MINI)op.payment(t);else if(v.IS_THIRD_PT&&v.IS_THIRD_PT_H5){var i={goodsId:t.gid,goodsNum:1,outTradeNo:t.game_id,goodsImg:"",orderAmount:t.buy,subject:t.im_name,body:t.buy_tips,extData:t.gameData};ETSDK.Game.pay({data:i,success:function(){console.log("调起收银台成功")},error:function(e){console.log("调起收银台失败",e)}})}else v.IS_THIRD_PT||Q.isLayaAndIos()?"TAPTAP"==e.PLATE_FORM?(x.getInstance().sendNotification("SHOW_PAYMENT_SELECT",t),k.createOrder(e.PLATE_FORM,t)):(Q.onPayment(t),k.createOrder(e.PLATE_FORM,t)):(x.getInstance().sendNotification("SHOW_PAYMENT_SELECT",t),k.createOrder(e.PLATE_FORM,t))},e.logout=function(t){void 0===t&&(t=!1);var i=x.getInstance().retrieveMediator("LoadingMediator");i&&i.stop(),e.BE_KICKED_OFF=!0,k.reportData("logout",Ng.userVO);var n=x.getInstance().retrieveProxy("SocketProxy");n&&n.desconnect(),t&&e.gameReload(!0)},e.callBackForAd=function(){if("OL"==e.PLATE_FORM){var t=new Iu;t.send("https://mudgj.com/ad/callback/?type=1",null,"get","json")}},e.PLATE_FORM=null,e.FID=null,e.FLAVOR=null,e.QQ_GROUP=null,e._TEMP_LOSE_LOGIN=0,e.API_ROOT_USER=null,e.API_ROOT_EXT=null,e.API_ROOT_EXT_AD=null,e.IS_TEST=!1,e.IS_VISITOR=!1,e.BE_KICKED_OFF=!1,e.LOGIN_API_PLATFORM_WX=null,e.LOGIN_API_PLATFORM_WX_RELOAD=null,e.LOGIN_API_SERVER_LIST=null,e.LOGIN_API_PLATFORM_NOTICE=null,e.LOGIN_API_PLATFORM_ME_RELOAD=null,e.LOGIN_API_PLATFORM_ME_LOGIN=null,e.LOGIN_API_PLATFORM_ME_REG=null,e.LOGIN_API_PLATFORM_ME_REG_SEND_MAIL=null,e.LOGIN_API_PLATFORM_ME_REBACK=null,e.LOGIN_API_PLATFORM_ME_LOGIN_PHONE=null,e.LOGIN_API_PLATFORM_ME_REG_SMS=null,e.LOGIN_API_PLATFORM_ME_REG_SEND_SMS=null,e.LOGIN_API_PLATFORM_ME_REBACK_SMS=null,e.LOGIN_API_PLATFORM_ME_VISITOR_REG=null,e.LOGIN_API_PLATFORM_ME_VISITOR_LOGIN=null,e.LOGIN_API_PLATFORM_ME_VISITOR_BIND=null,e.LOGIN_API_PLATFORM_ME_LOGOUT=null,e.PAYMENT_API_ORDER="",e.PAYMENT_API_JUMP="",e.INDULGE_CHECK="",e.INDULGE_IDENTIFY="",e.INDULGE_IDNAME=!1,e.INVITE_SHARE_URL="https://mudgj.com/wjhh/share",e.HOME_PAGE="https://mudgj.com/wjhh/login.do",e.AD_CALLBACK_TOUTIAO="https://mudgj.com/ad/callback/?type=1",e.THIRD_PT_LOGIN_URL="",e.THIRD_PT_LOGIN_URL2="",e.THIRD_PT_QUERY_ORDER_URL="",e._OPEN_JADE_FORCE=!1,e.APP_VERSION_CODE=0,e}(),Q=function(){function t(){}return o(t,"JSBridge"),t.isLaya=function(){return Or.window.navigator.userAgent.indexOf("LayaBox")>-1},t.isLayaAndAndroid=function(){return Or.window.navigator.userAgent.indexOf("LayaBox")>-1&&Or.onAndroid},t.isLayaAndIos=function(){return Or.window.navigator.userAgent.indexOf("LayaBox")>-1&&Or.onIOS},t.init=function(){t.isLaya()&&(t.initAd(),t.isLayaAndIos()&&(t.getIDFA(),t.getVersionCode(),t.getVersionName(),t.getFlavor()))},t.isNetWork=function(){try{var e=Or.window.conch.config.getNetworkType();return console.log("isNetWork:"+e),e>0}catch(t){}return!0},t.getIDFA=function(){try{if(t.isLayaAndIos()){var e=t.platformClass.createClass("JSBridge");e.call("getIDFA")}}catch(i){}},t.setIdfa=function(e){v.idfa=e,console.log("GameSysConfig.idfa:"+v.idfa)},t.CopyTextToClipboard=function(e){try{if(t.isLayaAndAndroid()){var i=t.platformClass.createClass("zykj.JSBridge");i.call("CopyTextToClipboard",e)}else t.isLayaAndIos()&&(i=t.platformClass.createClass("JSBridge"),i.call("CopyTextToClipboard:",e))}catch(n){}},t.openWebview=function(e){try{if(t.isLayaAndAndroid()){var i=t.platformClass.createClass("zykj.JSBridge");i.call("openWebview",e)}else t.isLayaAndIos()&&(i=t.platformClass.createClass("JSBridge"),i.call("openWebview:",e))}catch(n){}},t.onlogin=function(e){try{if(t.isLayaAndAndroid()){var i=t.platformClass.createClass("zykj.JSBridge");i.call("onlogin",e)}else t.isLayaAndIos()&&(i=t.platformClass.createClass("JSBridge"),i.call("onlogin:",e))}catch(n){}},t.logout=function(e){try{if(t.isLayaAndAndroid()){var i=t.platformClass.createClass("zykj.JSBridge");i.call("logout",e)}else t.isLayaAndIos()&&(i=t.platformClass.createClass("JSBridge"),i.call("logout:",e))}catch(n){}},t.onPayment=function(e){try{if(t.isLayaAndAndroid()){var i=t.platformClass.createClass("zykj.JSBridge");i.call("onPayment",e)}else t.isLayaAndIos()&&(i=t.platformClass.createClass("JSBridge"),i.call("onPayment:",JSON.stringify(e)))}catch(n){}},t.getVersionCode=function(){if(""!=t.versionCode)return t.versionCode;try{if(t.isLayaAndAndroid()){var e=t.platformClass.createClass("zykj.JSBridge");t.versionCode=e.call("getVersionCode")}else t.isLayaAndIos()&&(e=t.platformClass.createClass("JSBridge"),e.callWithBack(function(e){t.versionCode=e,console.log("JSBridge-ios:"+t.versionCode)},"getVersionCode"))}catch(i){}return t.versionCode},t.checkOpen=function(){if(t.isLayaAndIos()){var e=t.getVersionCode(),i=parseInt(e);if(!isNaN(i)&&i>=X.APP_VERSION_CODE)return!0}return!1},t.checkUpdata=function(){try{if(t.isLayaAndIos()){var e=!1;if(""==t.versionCode)e=!0;else{var i=parseInt(t.versionCode);10027>i&&(e=!0)}console.log("JSBridge-ios:"+e),e&&x.getInstance().sendNotification("POP_ALERT_INFO",{info:"请前往AppStore下载最新版本",handler:new h(null,function(){try{var e=t.platformClass.createClass("JSBridge");e.call("openAppStore:","itms-apps://itunes.apple.com/cn/app/id1612773782")}catch(i){}})})}}catch(n){}},t.getVersionName=function(){if(""!=t.versionName)return t.versionName;try{if(t.isLayaAndAndroid()){var e=t.platformClass.createClass("zykj.JSBridge");t.versionName=e.call("getVersionName")}else t.isLayaAndIos()&&(e=t.platformClass.createClass("JSBridge"),e.callWithBack(function(e){t.versionName=e,console.log("JSBridge-ios:"+t.versionName)},"getVersionName"))}catch(i){}return t.versionName},t.getPackageName=function(){if(""!=t.packageName)return t.packageName;try{if(t.isLayaAndAndroid()){var e=t.platformClass.createClass("zykj.JSBridge");t.packageName=e.call("getPackageName")}else t.isLayaAndIos()&&(e=t.platformClass.createClass("JSBridge"),e.callWithBack(function(e){t.packageName=e,console.log("JSBridge-ios:"+t.packageName)},"getPackageName"))}catch(i){}return t.packageName},t.getFlavor=function(){if(""!=t.flavor)return t.flavor;try{if(t.isLayaAndAndroid()){var e=t.platformClass.createClass("zykj.JSBridge");t.flavor=e.call("getFlavor")}else t.isLayaAndIos()&&(e=t.platformClass.createClass("JSBridge"),e.callWithBack(function(e){t.flavor=e,console.log("JSBridge-ios:"+t.flavor)},"getFlavor"))}catch(i){}return""==t.flavor&&t.isLayaAndIos()?"ios":t.flavor},t.initAd=function(){try{if(console.log("isLaya ----- initAd"),t.isLayaAndAndroid()){console.log("isLaya ----- initAd android true");var e=t.platformClass.createClass("zykj.JSBridge");e.call("initAd")}else t.isLayaAndIos()&&(console.log("isLaya ----- initAd ios true"),e=t.platformClass.createClass("JSBridge"),e.call("initAd"))}catch(i){console.log("isLaya ----- error")}try{ADnative.initAd("")}catch(i){}},t.showAd=function(e){try{if(t.isLayaAndAndroid()){var i=t.platformClass.createClass("zykj.JSBridge");i.call("showAd",e)}else t.isLayaAndIos()&&(i=t.platformClass.createClass("JSBridge"),i.call("showAd:",e))}catch(n){}try{ADnative.showAd(e)}catch(n){}},t.log=function(e){try{if(t.isLayaAndAndroid()){var i=t.platformClass.createClass("zykj.JSBridge");i.call("log",e)}else t.isLayaAndIos()&&(i=t.platformClass.createClass("JSBridge"),i.call("log:",e))}catch(n){}},t.httpDoGet=function(e,i,n){try{if(t.isLayaAndAndroid()){var o=t.platformClass.createClass("zykj.JSBridge");o.call("httpDoGet",e,i,n)}else t.isLayaAndIos()&&(o=t.platformClass.createClass("JSBridge"),o.call("httpDoGet:callSucceed:callError:",e,i,n))}catch(s){}},t.httpDoPost=function(e,i,n,o){try{if(t.isLayaAndAndroid()){var s=t.platformClass.createClass("zykj.JSBridge");s.call("httpDoPost",e,i,n,o)}else t.isLayaAndIos()&&(s=t.platformClass.createClass("JSBridge"),s.call("httpDoPost:json:callSucceed:callError:",e,i,n,o))}catch(r){}},t.profile=function(e,i){t.onEventObject(e,JSON.stringify(i))},t.createOrder=function(e){t.onEventObject("um_plus_game_create_order",JSON.stringify(e))},t.order=function(e){t.onEventObject("um_plus_game_order",JSON.stringify(e))},t.cancelOrder=function(e){t.onEventObject("um_plus_game_cancel_order",JSON.stringify(e))},t.buy=function(e,i,n){t.onEventObject("um_plus_game_buy",JSON.stringify({item:e,number:i,price:n}))},t.bonus=function(e,i,n){t.onEventObject("um_plus_game_bonus",JSON.stringify({item:e,num:i,price:n}))},t.regStep=function(e,i){t.onEventObject("um_plus_game_register",JSON.stringify({stepName:e+i}))},t.onEventObject=function(e,i){if(!T.IS_ON_MINI)try{if(t.isLayaAndAndroid()){var n=t.platformClass.createClass("zykj.JSBridge");n.call("onEventObject",e,i)}else t.isLayaAndIos()&&(n=t.platformClass.createClass("JSBridge"),n.call("onEventObject:json:",e,i))}catch(o){}},t.versionCode="",t.versionName="",t.packageName="",t.flavor="",n(t,["platformClass",function(){return this.platformClass=e.PlatformClass}]),t}(),j=function(){function e(){}return o(e,"modules.lode.controller.LodeCmd"),e.INFO=1,e.LOGS=2,e.OPEN=3,e.OTHERS=4,e.FIGHT=5,e.PROTECT=6,e.PROTECT_BY_GOLD=7,e.TAKE_AWARD=8,e.FIGHT_OTHER=9,e.PUSH_MINE_LOG=10,e.FIGHT_USE_GOLD=11,n(e,["LODE_INFO",function(){return this.LODE_INFO="40_1"},"LODE_LOGS",function(){return this.LODE_LOGS="40_2"},"LODE_OPEN",function(){return this.LODE_OPEN="40_3"},"LODE_OTHERS",function(){return this.LODE_OTHERS="40_4"},"LODE_FIGHT",function(){return this.LODE_FIGHT="40_5"},"LODE_FIGHT_USE_GOLD",function(){return this.LODE_FIGHT_USE_GOLD="40_11"},"LODE_PROTECT",function(){return this.LODE_PROTECT="40_6"},"LODE_PROTECT_BY_GOLD",function(){return this.LODE_PROTECT_BY_GOLD="40_7"},"LODE_TAKE_AWARD",function(){return this.LODE_TAKE_AWARD="40_8"},"LODE_FIGHT_OTHER",function(){return this.LODE_FIGHT_OTHER="40_9"},"LODE_PUSH_MINE_LOG",function(){return this.LODE_PUSH_MINE_LOG="40_10"}]),e}(),Z=function(){function e(){}return o(e,"modules.lode.model.LodeRule"),e.OPEN_LEVEL=25,e.LODE_MAP_PROP_ID=500010,e.LODE_PROTECT_PROP_ID=500011,e.LODE_PROTECT_ACT_SUM=5,e.LODE_PROTECT_ROB_SUM=2,e.IS_FLTER=0,e.LODE_PROTECT_PROP_PRICE=5,e.FIGHT_USE_GOLD=30,e}(),J=(function(){function e(){this.type=0,this.playerA=NaN,this.nameA=null,this.playerB=NaN,this.nameB=null,this.awards=null,this.awardsLoser=null,this.actTime=NaN,this.mineType=0}return o(e,"modules.lode.model.MineLog"),e}(),function(){function e(){this.playerId=0,this.name=null,this.level=0,this.nature=0,this.type=0,this.endTime=0,this.protectTime=0,this.productA=0,this.productB=0,this.attack=0,this.beAttack=0,this.awardedA=0,this.awardedB=0,this.alcName=null}return o(e,"modules.lode.model.PlayerMine"),e}(),function(){function e(){}return o(e,"modules.lode.LodeNotification"),e.SHOW_LODE_PAGE="SHOW_LODE_PAGE",e.CLOSE_LODE_PAGE="CLOSE_LODE_PAGE",e.SHOW_LODE_MYSELFT_INNFO="SHOW_LODE_MYSELFT_INNFO",e.SHOW_LODE_OTHERS_INNFO="SHOW_LODE_OTHERS_INNFO",e.SHOW_LODE_OTHERS_UPDATA="SHOW_LODE_OTHERS_UPDATA",e.SHOW_LODE_LOGS="SHOW_LODE_LOGS",e.SHOW_LODE_AWARD_SUCCESS="SHOW_LODE_AWARD_SUCCESS",e.SHOW_LODE_PUSH_LOG="SHOW_LODE_PUSH_LOG",e}(),function(){function e(){this._tempTypeActTmp=1,this._tempRedState=new uo,this._tempRedState.set(0,0),this._tempRedState.set(1,0),this._tempRedState.set(2,0),this._tempRedState.set(3,0),this._tempRedState.set(4,0)}o(e,"modules.guide.proxy.TempRedManager");var t=e.prototype;return t.needRed=function(e){return"1"==this._tempRedState.get(e)},t.clicked=function(e){this._tempRedState.remove(e)},t.check=function(e,t,i,n){t.off("mousedown",i,n),this.needRed(e)&&t.on("mousedown",i,n)},e.TYPE_TEMP_ACTIVITY=0,e.TYPE_7DAY_ACTIVITY=1,e.TYPE_7DAYEX_ACTIVITY=2,e.TYPE_INVEST_ACTIVITY=3,e.TYPE_TAPTAP_ACTIVITY=4,e._KEY_STORE="KEY_TMP_RED_",e}()),$=function(){function e(){this.passedSet=new go}o(e,"modules.guide.proxy.PlayerGuide");var t=e.prototype;return t.update=function(e){if(this.passedSet.clear(),e){var t,i=e.split("|");for(var n in i)t=i[n],this.passedSet.add(vo["int"](t))}},t.isPassed=function(e){return this.passedSet.contain(e)},e.GUIDE_BONE=1,e.GUIDE_SKILL=2,e}(),ee=(function(){function e(){}return o(e,"modules.guide.GuideNotification"),e.RECEIVE_GUIDE_INFO="RECEIVE_GUIDE_INFO",e.DUNGEON_SP_HAS_READY="DUNGEON_SP_HAS_READY",e.FOREST_HAS_READY="FOREST_HAS_READY",e.GUIDE_PET_SHOP_FREE="GUIDE_PET_SHOP_FREE",e.GUIDE_HOME_BAR_CLICK="GUIDE_HOME_BAR_CLICK",e.GUIDE_REBATE_STATE_CHG="GUIDE_REBATE_STATE_CHG",e}(),function(){function e(){}return o(e,"modules.forest.ForestNotification"),e.RECEIVE_FOREST_INFO="RECEIVE_FOREST_INFO",e.RECEIVE_FOREST_EVENT="RECEIVE_FOREST_EVENT",e.FOREST_MOVE_ERR="FOREST_MOVE_ERR",e}(),function(){function e(){}return o(e,"modules.forest.controller.ForestCmd"),e.QUERY=1,e.ENTER=2,e.EXIT=3,e.MOVE_STEP=4,e.CHOSE_EVENT=5,e.BUY_LIFE=6,e.ADD_BY_PROP=90,e.PUSH_FOREST=100,e.PUSH_EVENT=101,n(e,["FOREST_QUERY",function(){return this.FOREST_QUERY="17_1"},"FOREST_ENTER",function(){return this.FOREST_ENTER="17_2"},"FOREST_EXIT",function(){return this.FOREST_EXIT="17_3"},"FOREST_MOVE_STEP",function(){return this.FOREST_MOVE_STEP="17_4"},"FOREST_CHOSE_EVENT",function(){return this.FOREST_CHOSE_EVENT="17_5"},"FOREST_BUY_LIFE",function(){return this.FOREST_BUY_LIFE="17_6"},"FOREST_ADD_BY_PROP",function(){return this.FOREST_ADD_BY_PROP="17_90"},"FOREST_PUSH_FOREST",function(){return this.FOREST_PUSH_FOREST="17_100"},"FOREST_PUSH_EVENT",function(){return this.FOREST_PUSH_EVENT="17_101"}]),e}()),te=function(){function e(){}return o(e,"modules.forest.model.ForestRule"),e.getForestName=function(t){var i=t.currentId;return 1>i||i>8?"森林阶数有误："+i:1==t.diff?e.FOREST_NAMES[i-1]+"【困难】":e.FOREST_NAMES[i-1]},e.getGradeLabels=function(e){switch(e){case 0:return"一 阶";case 1:return"一 阶,二 阶";case 2:return"一 阶,二 阶,三 阶";case 3:return"一 阶,二 阶,三 阶,四 阶";case 4:return"一 阶,二 阶,三 阶,四 阶,五阶";case 5:return"一 阶,二 阶,三 阶,四 阶,五阶,六阶";case 6:return"一 阶,二 阶,三 阶,四 阶,五阶,六阶,七阶";case 7:case 8:default:return"一 阶,二 阶,三 阶,四 阶,五阶,六阶,七阶,八阶"}},e.FOREST_LIMIT_LEVEL=20,e.BUY_ENTER_COST_GOLD=100,e.BUY_ENTER_MAX=2,e.PET_FOREST_GRAD_MAX=8,n(e,["FOREST_NAMES",function(){return this.FOREST_NAMES=["一阶兽魂森林","二阶兽魂森林","三阶兽魂森林","四阶兽魂森林","五阶兽魂森林","六阶兽魂森林","七阶兽魂森林","八阶兽魂森林"]}]),e}(),ie=function(){function e(e){this.obj=null,this.update(e)}o(e,"modules.forest.model.data.ForestEvent");var t=e.prototype;return t.update=function(e){this.obj=e},s(0,t,"acting",function(){return this.obj.acting}),s(0,t,"type",function(){return this.obj.type}),s(0,t,"message",function(){return this.obj.message}),s(0,t,"eventId",function(){return this.obj.eventId}),e.TYPE_NOTHING=0,e.TYPE_FIGHTING=1,e.TYPE_EFFECT=2,e.TYPE_CHOSE=3,e.TYPE_PET_SHOP=4,e.TYPE_PROPS_SHOP=5,e}(),ne=function(){function e(){this.obj=null,this._events=null,this._passedSet=null,this.maxPassGradNormal=0,this.maxPassGradDiff=0,this._events=new Array,this._passedSet=new go}o(e,"modules.forest.model.data.ForestInfo");var t=e.prototype;return t.update=function(e){if(this.obj=e,this.obj.events){var t;for(var i in this.obj.events)t=this.obj.events[i],this._events.push(new ie(t))}var n,o,s=0;if(this.maxPassGradNormal=0,this.maxPassGradDiff=0,this._passedSet.clear(),e.passedId&&""!=e.passedId){n=e.passedId.split("|");var r;for(r in n)o=n[r],s=vo["int"](o),this._passedSet.add(s),this.checkMaxGrad(s)}if(e.passCount&&""!=e.passCount){n=e.passCount.split("|");var r;for(r in n){o=n[r];var a=o.split("_");a.length<2||(s=vo["int"](a[1]),0!=s&&(s=vo["int"](a[0]),this.checkMaxGrad(s)))}}if(e.killedId&&""!=e.killedId){n=e.killedId.split("|");var r;for(r in n)o=n[r],s=vo["int"](o),this.checkMaxGrad(s)}},t.checkMaxGrad=function(e){e>1e3?(e%=10,e>this.maxPassGradDiff&&(this.maxPassGradDiff=e)):(e%=10,e>this.maxPassGradNormal&&(this.maxPassGradNormal=e))},t.clear=function(){this._events.length=0},t.getLastEvent=function(){return this._events&&this._events.length?this._events[this._events.length-1]:null},t.isPassed=function(e,t,i){var n=1e3*e+100*i+t;return this._passedSet.contain(n)},t.isCurrentFast=function(e){if(!e||e.vipMontAdd<=0)return!1;var t=1e3*this.diff+100*this.nature+this.currentId;return this._passedSet.contain(t)},s(0,t,"diff",function(){return this.obj.difficulty}),s(0,t,"nature",function(){return this.obj.nature}),s(0,t,"lastEnterTime",function(){return this.obj.lastEnterTime}),s(0,t,"lastEnterId",function(){return this.obj.lastEnterId}),s(0,t,"playerId",function(){return this.obj.playerId}),s(0,t,"firstBuyDate",function(){return this.obj.firstBuyDate}),s(0,t,"monsterKilled",function(){return this.obj.monsterKilled}),s(0,t,"canEnterTimes",function(){return this.obj.canEnterTimes}),s(0,t,"buyLife",function(){return this.obj.buyLife}),s(0,t,"buyTimes",function(){return this.obj.buyTimes}),s(0,t,"currentId",function(){return this.obj.currentId}),s(0,t,"failTime",function(){return this.obj.failTime}),s(0,t,"events",function(){return this._events}),e}(),oe=(function(){function e(){}return o(e,"modules.marcket.MarcketNotification"),e.OPEN_MARCKET_VIEW="OPEN_MARCKET_VIEW",e.OPEN_MARCKET_FAST_BUY="OPEN_MARCKET_FAST_BUY",e.RECIEVE_PLAYER_MARKET="RECIEVE_PLAYER_MARKET",e.INIT_VIP_INFO="INIT_VIP_INFO",e.CHANGE_VIP_INFO="CHANGE_VIP_INFO",e.OPEN_EQUIP_GHOST="OPEN_EQUIP_GHOST",e.RECIEVE_PLAYER_MARKET_DAILY="RECIEVE_PLAYER_MARKET_DAILY",e.BOX_WELFARE_UPDATE="BOX_WELFARE_UPDATE",e.BOX_WELFARE_RED="BOX_WELFARE_RED",e}(),function(){function e(){}return o(e,"modules.marcket.controller.MarketCmd"),e.BUY=1,e.QUERY=2,e.BUY_BOOK=3,e.OPEN_EQUIP_GHOST=4,e.CHG_EQUIP_GHOST=5,e.AWARD_EQUIP_GHOST=6,e.OPEN_EQUIP_GHOST_AUTO=7,e.QUERY_DAILY=8,e.BUY_DAILY=9,e.QUERY_REBATE=10,e.TAKE_REBATE=11,e.RESET_REBATE=12,n(e,["MARKET_BUY",function(){return this.MARKET_BUY="22_1"},"MARKET_QUERY",function(){return this.MARKET_QUERY="22_2"},"MARKET_BUY_BOOK",function(){return this.MARKET_BUY_BOOK="22_3"},"MARKET_OPEN_EQUIP_GHOST",function(){return this.MARKET_OPEN_EQUIP_GHOST="22_4"},"MARKET_CHG_EQUIP_GHOST",function(){return this.MARKET_CHG_EQUIP_GHOST="22_5"},"MARKET_AWARD_EQUIP_GHOST",function(){return this.MARKET_AWARD_EQUIP_GHOST="22_6"},"MARKET_OPEN_EQUIP_GHOST_AUTO",function(){return this.MARKET_OPEN_EQUIP_GHOST_AUTO="22_7"},"MARKET_QUERY_DAILY",function(){return this.MARKET_QUERY_DAILY="22_8"},"MARKET_BUY_DAILY",function(){return this.MARKET_BUY_DAILY="22_9"},"MARKET_QUERY_REBATE",function(){return this.MARKET_QUERY_REBATE="22_10"},"MARKET_TAKE_REBATE",function(){return this.MARKET_TAKE_REBATE="22_11"},"MARKET_RESET_REBATE",function(){return this.MARKET_RESET_REBATE="22_12"}]),e}()),se=function(){function e(){}return o(e,"modules.marcket.controller.VipCmd"),e.QUERY=1,e.BUY_EXP_RATE=2,e.BUY_SILVER_RATE=3,e.BUY_PROP_RATE=4,e.BUY_OFFLINE_TIME=5,e.BUY_ARENA_MINE_TIME=6,e.BUY_STAR_FAIL_RETURN=7,e.BUY_PET_FOOD_DROP_ADD=8,e.BUY_ARENA_MINE_COUNT=9,e.BUY_GAS_RATE=10,e.BUY_BOSS_RATE=11,e.BUY_OFFLINE_OPEN_BOX=19,e.GET_VIP_MONTH_AWARD=60,e.PUSH_VIP_CHANGE=101,n(e,["VIP_QUERY",function(){return this.VIP_QUERY="9_1"},"VIP_BUY_EXP_RATE",function(){return this.VIP_BUY_EXP_RATE="9_2"},"VIP_BUY_SILVER_RATE",function(){return this.VIP_BUY_SILVER_RATE="9_3"},"VIP_BUY_PROP_RATE",function(){return this.VIP_BUY_PROP_RATE="9_4"},"VIP_BUY_OFFLINE_TIME",function(){return this.VIP_BUY_OFFLINE_TIME="9_5"},"VIP_BUY_ARENA_MINE_TIME",function(){return this.VIP_BUY_ARENA_MINE_TIME="9_6"},"VIP_BUY_STAR_FAIL_RETURN",function(){return this.VIP_BUY_STAR_FAIL_RETURN="9_7"},"VIP_BUY_PET_FOOD_DROP_ADD",function(){return this.VIP_BUY_PET_FOOD_DROP_ADD="9_8"},"VIP_BUY_ARENA_MINE_COUNT",function(){return this.VIP_BUY_ARENA_MINE_COUNT="9_9"},"VIP_BUY_GAS_RATE",function(){return this.VIP_BUY_GAS_RATE="9_10"},"VIP_BUY_BOSS_RATE",function(){return this.VIP_BUY_BOSS_RATE="9_11"},"VIP_BUY_OFFLINE_OPEN_BOX",function(){return this.VIP_BUY_OFFLINE_OPEN_BOX="9_19"},"VIP_GET_VIP_MONTH_AWARD",function(){return this.VIP_GET_VIP_MONTH_AWARD="9_60"},"VIP_PUSH_VIP_CHANGE",function(){return this.VIP_PUSH_VIP_CHANGE="9_101"}]),e}(),re=function(){function e(){}return o(e,"modules.marcket.model.MarketRule"),e.queryBookGoldenPrice=function(e){switch(e.level){case 5:return 30;case 15:return 40;case 20:return 45;case 25:return 50;case 30:return 55;case 35:return 60;case 40:return 600101==e.id?150:100;case 45:return 80;case 50:return 90;case 55:return 600102==e.id?220:100;case 60:return 150;case 65:return 120;case 70:return 130;case 75:return 140;case 80:return 200;case 85:return 150;default:return 0}},e.getAutoEquipGhostPrice=function(t){var i;for(var n in e.EQUIP_GHOST_BOXS)if(i=e.EQUIP_GHOST_BOXS[n],i.level==t)return i.gold;return 0},e.FULI_OPEN_LEVEL=5,e.BOOK_SHOP_OPEN_LEVEL=40,e.DAILY_OPEN_LEVEL=45,e.FULI_SPEED="FULI_SPEED",e.EQUIP_GHOST_RED_TIME_LIMIT=30,e.EQUIP_GHOST_PURPLE_TIME_LIMIT=100,n(e,["EQUIP_GHOST_BOXS",function(){return this.EQUIP_GHOST_BOXS=[{id:40,level:40,gold:50,name:"梼杌熔灵宝箱",desc:"可随机开出一个梼杌之灵，开出红色品质以上可选择更换五行，紫色保底100次出"},{id:55,level:55,gold:70,name:"帝江熔灵宝箱",desc:"可随机开出一个帝江之灵，开出红色品质以上可选择更换五行，紫色保底100次出"},{id:70,level:70,gold:98,name:"九婴熔灵宝箱",desc:"可随机开出一个九婴之灵，开出红色品质以上可选择更换五行，紫色保底100次出"},{id:85,level:85,gold:98,name:"岩蛟熔灵宝箱",desc:"可随机开出一个岩蛟之灵，开出红色品质以上可选择更换五行，紫色保底100次出"}]}]),e}(),ae=function(){function e(){this.playerId=NaN,this.item=0,this.buyTime=NaN,this.buyTimePearl=NaN}return o(e,"modules.marcket.model.PlayerMarketDaily"),e}(),le=function(){function e(){this._endDate=0,this._signDate=0,this.awardTemp=0,this.goldGeted=0,this._liveDay=0,this._sign=!1,this.type=0,this.name=null,this.color=null,this.funAdd=0,this.goldTotal=0,this.goldDaily=0,this.money=0,this.paymentId=0}o(e,"modules.marcket.model.MonthCard");var t=e.prototype;return t.update=function(e,t,i,n,o){switch(this._endDate=1e3*t,this._signDate=1e3*i,this.awardTemp=n,this.goldGeted=o,this.type=e,e){case 100:this.name="黄金月卡",this.paymentId=102,this.color="#e70626",this.funAdd=1,this.goldTotal=1170,this.goldDaily=30,this.money=30;break;case 101:this.name="至尊月卡",this.paymentId=101,this.color="#c527ff",this.funAdd=2,this.goldTotal=2710,this.goldDaily=70,this.money=68}this.checkDate()},t.checkDate=function(){var e=g.clock.todayZero,t=ro.newDate(this._endDate);this._liveDay=ro.dateDiff(t,e),t=ro.newDate(this._signDate),this._sign=0==ro.dateDiff(t,e)},s(0,t,"isSigned",function(){return this._sign}),s(0,t,"liveDay",function(){return this._liveDay}),s(0,t,"isEffecting",function(){return this._liveDay>0}),e.TYPE_GOLDEN=100,e.TYPE_DIAMOND=101,e}(),he=function(){function e(){this.buyItems=null,this._freshTime=null,this._bookBuyed=0,this._books=null,this.equipGhostId=0,this.equipGhostTimes=0,this.autoTime=0,this.purpleFialed=0,this.buyItems=new uo}o(e,"modules.marcket.model.PlayerMarket");var t=e.prototype;return t.update=function(e){if(this.buyItems.clear(),e.dailybuyed&&""!=e.dailybuyed){var t,i=e.dailybuyed.split("|");for(var n in i){t=i[n];var o=t.split("_");this.buyItems.set(vo["int"](o[0]),vo["int"](o[1]))}}if(this._freshTime=ro.newDate(e.freshTime),e.bookShop&&""!=e.bookShop){this._books=e.bookShop.split("|");for(var s=0;s<this._books.length;s++)this._books[s]=vo["int"](this._books[s]);this._books=this._books.sort()}else this._books=[];this._bookBuyed=e.bookBuyed,this.equipGhostId=e.equipGhostId,this.equipGhostTimes=e.equipGhostTimes,this.autoTime=e.autoTime,this.purpleFialed=e.purpleFialed},t.getBuyedTime=function(e){var t=this.buyItems.get(e);return null==t?0:t},t.needFresh=function(){return!ro.isToday(this._freshTime)},t.getBookBuyed=function(){return this._bookBuyed},t.getBooks=function(){return this._books},e}(),ce=function(){function e(e){this.expRate=0,this.silverRate=0,this.propsRate=0,this.offlineTime=0,this.arenaMineTime=0,this.arenaMineCount=0,this.starFailReturn=0,this.petFoodRate=0,this.gasRate=0,this.exGasRateTime=0,this.bossRate=0,this.goldenVip=null,this.diamondVip=null,this.jadeCard=null,this.vipMontAdd=0,this.groupBuyTime=new uo,this.update(e)}o(e,"modules.marcket.model.VipInfo");var t=e.prototype;return t.update=function(e){this.vipMontAdd=0;var t=0;this.expRate=e[t++],this.silverRate=e[t++],this.propsRate=e[t++],this.offlineTime=e[t++],this.arenaMineTime=e[t++],this.arenaMineCount=e[t++],this.starFailReturn=e[t++],this.petFoodRate=e[t++],this.gasRate=e[t++],this.exGasRateTime=e[t++];var i=e[t++],n=e[t++],o=e[t++],s=e[t++];null==this.goldenVip&&(this.goldenVip=new le),this.goldenVip.update(100,i,n,o,s),this.goldenVip.isEffecting&&(this.vipMontAdd+=this.goldenVip.funAdd),i=e[t++],n=e[t++],o=e[t++],s=e[t++],null==this.diamondVip&&(this.diamondVip=new le),this.diamondVip.update(101,i,n,o,s),this.diamondVip.isEffecting&&(this.vipMontAdd+=this.diamondVip.funAdd),
this.bossRate=e[t++],null==this.jadeCard&&(this.jadeCard=new ue),i=e[t++],this.jadeCard.update(i),this.groupBuyTime.set(1,1e3*e[t++]+2592e6),this.groupBuyTime.set(2,1e3*e[t++]+31104e6),this.groupBuyTime.set(3,1e3*e[t++]+31104e6),this.groupBuyTime.set(4,1e3*e[t++]+31104e6)},s(0,t,"globalArenaTimeAdd",function(){switch(this.vipMontAdd){case 1:return 2;case 2:return 3;case 3:return 5;default:return 0}}),s(0,t,"jadeCardLiveDay",function(){var e=this.jadeCard.isEffecting?this.jadeCard.liveDay:0;if(this.isDubleMVIP){var t=0;if(t=this.diamondVip.liveDay<this.goldenVip.liveDay?this.diamondVip.liveDay:this.goldenVip.liveDay,t>e)return t}return e}),s(0,t,"isYearVIP",function(){return this.isDubleMVIP&&this.groupBuyTime.get(4)>g.clock.currentTime}),s(0,t,"isMVIP",function(){return this.diamondVip.isEffecting||this.goldenVip.isEffecting}),s(0,t,"isDubleMVIP",function(){return this.diamondVip.isEffecting&&this.goldenVip.isEffecting}),e}(),ue=function(){function e(){this._endDate=0,this._liveDay=0,this.name="商会卡",this.color=null,this.money=0,this.paymentId=0}o(e,"modules.marcket.model.JadeCard");var t=e.prototype;return t.update=function(e){this._endDate=1e3*e,this.paymentId=103,this.color="#e70626",this.money=28,this.checkDate()},t.checkDate=function(){var e=g.clock.todayZero,t=ro.newDate(this._endDate);this._liveDay=ro.dateDiff(t,e)},s(0,t,"liveDay",function(){return this._liveDay}),s(0,t,"isEffecting",function(){return this._liveDay>0}),e}(),de=function(){function e(){}return o(e,"modules.marcket.model.VipRule"),e.queryCostGold=function(e){var t=e/500;switch(t){case 0:return 25;case 1:return 40;case 2:return 60;case 3:return 80;case 4:return 100;case 5:return 120;case 6:return 150;case 7:return 180;case 8:return 210;case 9:return 250;case 10:return 350;case 11:return 500;case 12:return 700;case 13:return 1e3;case 14:return 1500;case 15:return 2200;case 16:return 3200;case 17:return 5e3;case 18:return 7e3;case 19:return 1e4;default:return 250+50*(t-9)}},e.queryCostGoldForOffline=function(e){var t=e-modules.marcket.model.VipRule.OFFLINE_BASE_TIME;switch(t){case 0:return 25;case 1800:return 40;case 3600:return 60;case 5400:return 80;case 7200:return 100;case 9e3:return 120;case 10800:return 150;case 12600:return 180;case 14400:return 210;case 16200:return 250;default:return 0}},e.queryCostGoldForArenaMine=function(e){var t=e-modules.marcket.model.VipRule.ARENA_MINE_BASE_TIME;switch(t){case 0:return 25;case 1800:return 40;case 3600:return 60;case 5400:return 80;case 7200:return 100;case 9e3:return 120;case 10800:return 150;case 12600:return 180;case 14400:return 210;case 16200:return 250;default:return 0}},e.queryCostGoldForArenaMineCount=function(e){switch(e){case 0:return 25;case 1:return 40;case 2:return 60;case 3:return 80;case 4:return 100;case 5:return 120;case 6:return 150;case 7:return 180;case 8:return 210;case 9:return 250;default:return 0}},e.queryCostGoldForStarFailReturn=function(e){switch(e){case 0:return 25;case 300:return 40;case 600:return 60;case 900:return 80;case 1200:return 100;case 1500:return 120;case 1800:return 150;case 2100:return 180;case 2400:return 210;case 2700:return 250;default:return 0}},e.getTag=function(e){switch(e){case 1:case 2:case 3:return"『月』";case 4:return"『年』"}return null},e.getTagColor=function(e){switch(e){case 1:return"#00dc24";case 2:return"#fffc00";case 3:return"#e70626";case 4:return"#c527ff"}return null},e.RATE_ADD_ONCE=500,e.OFFLINE_BASE_TIME=18e3,e.OFFLINE_ADD_ONCE=1800,e.ARENA_MINE_BASE_TIME=21600,e.ARENA_MINE_ADD_ONCE=1800,e.STAR_FAIL_RETURN_ADD_ONCE=300,e}(),pe=function(){function e(){this.title="",this.actTime="",this.isOpen=!0,this.forceOpen=0,this.type=-1,this.hasAward=!1}return o(e,"modules.home.model.ActListModel"),e}(),fe=function(){function e(e,t){this.groupList=null,this.hangingDot=null,this._currentDungeonId=-1,this.groupList=e,this.hangingDot=t,this.groupList.renderHandler=new h(this,this.dungeonGroupRender),this.groupList.mouseHandler=new h(this,this.onDunGroupSelect);var i=g.database.getDungeonCulture();this.groupList.dataSource=i,this.groupList.scrollBar.hide=!0,this.groupList.selectEnable=!0}o(e,"modules.home.view.componets.CultureRender");var t=e.prototype;return t.scrollToDungeonId=function(){this._currentDungeonId=Ng.userVO.getValue(19002);var e=this._currentDungeonId;e=e>0?Math.abs(e)-1:0,this.groupList.refresh()},t.dungeonGroupRender=function(e,t){var i=Ng.userVO.getValue(1006),n=Ng.userVO.getValue(7020);n=-vo["int"](n/1e4)-1;var o=e.dataSource,s=e.getChildByName("dName");switch(s.text=o.name,o.id){case-1:s.color="#0084ff";break;case-2:s.color="#00dc24";break;case-3:s.color="#fffc00";break;case-4:case-5:s.color="#e70626";break;case-6:case-7:s.color="#c527ff"}o.id<n?e.alpha=.5:o.id==n?e.alpha=.8:e.alpha=1,s=e.getChildByName("monsterLb");var r=e.getChildByName("monsterLv");35>i&&0==t?(s.text="开启等级：35",s.color="#e70626",r.text=""):(s.text="怪物等级：",s.color="#ffffff",r.text=""+o.monsterLevel,i<o.monsterLevel?r.color="#e70626":r.color="#00dc24"),this._currentDungeonId<0&&(this._currentDungeonId==o.id?(1==e.alpha?this.hangingDot.changeInfo("挂机中...","#0cd41c",26):this.hangingDot.changeInfo("闯关中...","#e70626",26),this.hangingDot.pos(580,35),e.addChild(this.hangingDot)):this.hangingDot.parent==e&&this.hangingDot.removeSelf())},t.onDunGroupSelect=function(e,t){if("click"==e.type){var i=this.groupList.getCell(t);if(.5==i.alpha)return void x.getInstance().sendNotification("prompted_info_show",{info:"击败上一关BOSS解锁"});var n=this.groupList.dataSource[t],o=n.id,s=Ng.userVO.getValue(19002);if(o==s)x.getInstance().sendNotification("SHOW_FIGHT_HANG_PAGE",o);else{var r=Ng.userVO.getValue(1006);35>r?x.getInstance().sendNotification("prompted_info_show",{info:"35级开启境界副本"}):x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"装备副本和境界副本同时只能进入一个，是否确认？",handler:h.create(this,function(e){e&&(Gc.instance.enterDungeon(o),x.getInstance().sendNotification("SHOW_FIGHT_HANG_PAGE",o))})})}}},e}(),_e=function(){function e(e,t,i,n){this.owner=null,this.groupList=null,this.selectDunge=null,this.head=null,this.suitLb=null,this.itemsList=null,this.hangingDot=null,this._dungeonEnterBtn=null,this._currentDungeonId=-1,this._openInfo=null,this._enterJumTxt=null,this._hangingJumTxt=null,this.dungeonSelectTempIndex=-1,this.owner=e,this.groupList=t,this.hangingDot=n,this.selectDunge=i,this.groupList.renderHandler=new h(this,this.dungeonGroupRender),this.groupList.mouseHandler=new h(this,this.onDunGroupSelect);var o=g.database.getDungeonGroup();this.groupList.dataSource=o,this.groupList.scrollBar.hide=!0,this.groupList.selectEnable=!0,this.scrollToDungeonId(null),this.owner.addChild(this.groupList),i.x=this.groupList.x,this._dungeonEnterBtn=i.getChildByName("btnEnter"),this._dungeonEnterBtn.visible=!1,this._dungeonEnterBtn.y=24,i.removeSelf(),this.itemsList=i.getChildByName("items"),this.suitLb=i.getChildByName("suitInfo"),this.itemsList.renderHandler=new h(this,this.dungeonRender),this.itemsList.mouseHandler=new h(this,this.onDunSelect),this.itemsList.selectEnable=!0,this.head=i.getChildByName("head"),this.head.on("mouseup",this,this.onBack)}o(e,"modules.home.view.componets.DungeonRender");var t=e.prototype;return t.onBack=function(e){if(null!=e&&"equipView"==e.target.name){var t=this.head.getChildByName("equipLv"),i=this.head.getChildByName("dName");x.getInstance().sendNotification("OPEN_EQUIP_PREVIEW",vo["int"](t.text),i)}else this.owner.addChild(this.groupList),this.selectDunge.removeSelf()},t.scrollToDungeonId=function(e){this._openInfo=e;var t=Ng.userVO.getValue(19002);0!=t&&0==this._currentDungeonId&&this._enterJumTxt&&(this._enterJumTxt.clearJumping(),this._enterJumTxt.removeSelf()),this._hangingJumTxt&&(this._hangingJumTxt.visible=!1),this._currentDungeonId=t;var i=this._currentDungeonId;i=i>0?Math.ceil(i/5)-1:0;var n=Ng.userVO.getValue(7020);n%=1e4;var o=g.database.getDungeonGroup(),s=Ng.userVO.getValue(1006);if(0==n||10>s&&Eb.isNewGuy)this.groupList.dataSource=[o[0]];else if(null==this._openInfo)this.groupList.dataSource=[o[0],o[1],o[2],o[3],o[4]];else if(this._openInfo.openLimit){var r,a=[];for(var l in o)r=o[l],5*r.id<=this._openInfo.passedId+5&&a.push(r);this.groupList.dataSource=a}else this.groupList.dataSource=o;this.groupList.refresh(),this.groupList.scrollTo(i),this.itemsList&&this.itemsList.refresh()},t.dungeonGroupRender=function(e,t){var n=e.dataSource,o=Ng.userVO.getValue(1006),s=Ng.userVO.getValue(7020),r=e.getChildByName("equipLv"),a=e.getChildByName("monsterLv"),l=e.getChildByName("equipType"),h=e.getChildByName("tips"),c=e.getChildByName("dCulture"),u=e.getChildByName("dName");switch(s%=1e4,u.text=n.name,c.visible=!0,h.visible=!1,n.id){case 1:h.color="#7985e0",h.text="（建议锻造蓝色以上套装）",h.visible=!0,u.color="#ffffff";break;case 2:h.color="#fffc00",h.text="（建议锻造黄色以上套装）",h.visible=!0,u.color="#0084ff";break;case 3:h.color="#fffc00",h.text="（建议锻造黄色以上套装）",h.visible=!0,u.color="#0084ff";break;case 4:u.color="#00dc24";break;case 5:u.color="#00dc24";break;case 6:case 7:c.text="【炼气】",c.visible=!0,u.color="#fffc00";break;case 8:c.text="【筑基】",c.visible=!0,u.color="#e70626";break;case 9:c.text="【筑基】",c.visible=!0,u.color="#e70626";break;case 10:c.text="【金丹】",c.visible=!0,u.color="#c527ff";break;case 11:c.text="【金丹】",c.visible=!0,u.color="#c527ff";break;case 12:c.text="【元婴】",c.visible=!0,u.color="#FFA500";break;case 13:c.text="【元婴】",c.visible=!0,u.color="#FFA500";break;case 14:c.text="【化神】",c.visible=!0,u.color="#FFA500";break;case 15:c.text="【化神】",c.visible=!0,u.color="#FFA500";break;case 101:c.text="【炼虚】",c.visible=!0,u.color="#FFA500"}var d=Math.ceil(s/5)+1;if(d>=16&&(d=d>16?102:101),n.id==d?1==n.id?e.alpha=1:e.alpha=.8:n.id<d?e.alpha=1:e.alpha=.5,.8==e.alpha&&(h.color="#e70626",h.text="（未击败Boss离线无收益）",h.visible=!0),r.text="装备等级："+n.equipLv,r.color="#ffffff",a.text="怪物等级："+n.monsterLv,n.minLv>o?a.color="#e70626":n.maxLv<o?a.color="#ffffff":a.color="#00dc24",n.id>=101?(l.text="灵宠装备",l.color="#c527ff"):0==n.limit?(l.text="通用装备",l.color="#ffffff"):(l.text="五行专属装备",l.color="#fffc00"),0==this._currentDungeonId&&0==t)return a.text="",null==this._enterJumTxt&&(this._enterJumTxt=new hS("点击开始...","#c527ff",26),this._enterJumTxt.pos(a.x+50,a.y)),void e.addChild(this._enterJumTxt);if(this._currentDungeonId>0){var p=Math.ceil(this._currentDungeonId/5);this._currentDungeonId>=101&&(p=101),p==n.id?(1==e.alpha?this.hangingDot.changeInfo("挂机中...","#0cd41c",26):this.hangingDot.changeInfo("闯关中...","#e70626",26),this.hangingDot.pos(580,35),e.addChild(this.hangingDot)):this.hangingDot.parent==e&&this.hangingDot.removeSelf()}if(null!=this._openInfo&&this._openInfo.openLimit){var f=this._openInfo.passedId+5,_=5*n.id;f>=76&&(f=101,_=n.id),_==f&&(h.visible=!1,a.text="",this._openInfo.waitedId>0?(r.text="",r.text="恭喜【"+this._openInfo.triggerName+"】率先到达"+this._openInfo.triggerLevel+"级",r.color="#fffc00",this._openInfo.waitTime-g.clock.currentTime<24*ro.T_1H?(i.timer.loop(1e3,this,this.waitClocker),l.text="副本开启倒计时："+ro.clockBackTime(this._openInfo.waitTime)):(l.text="副本将于"+ro.parseSimple(ro.newDate(this._openInfo.waitTime))+"开启",i.timer.clear(this,this.waitClocker)),l.color="#e70626"):(r.text="当有玩家到达"+Ht.getOpenNeedLevel(f)+"级开启倒计时",r.color="#e70626",l.text="",i.timer.clear(this,this.waitClocker)),e.alpha=.6)}},t.waitClocker=function(){var e=this.groupList.getCell(this.groupList.dataSource.length-1);if(null!=e){var t=e.dataSource;if(null!=this._openInfo&&this._openInfo.openLimit){var n=this._openInfo.passedId+5,o=5*t.id;if(n>=76&&(n=101,o=t.id),o==n){var s=e.getChildByName("equipType");if(this._openInfo.waitedId>0){var r=this._openInfo.waitTime-g.clock.currentTime;r<24*ro.T_1H?(0>=r&&Gc.instance.queryLimitOpen(),s.text="副本开启倒计时："+ro.clockBackTime(this._openInfo.waitTime)):(s.text="副本将于"+ro.parseSimple(ro.newDate(this._openInfo.waitTime))+"开启",i.timer.clear(this,this.waitClocker)),s.color="#e70626"}else s.text="",i.timer.clear(this,this.waitClocker)}}}},t.dungeonRender=function(e,t){var i=(Ng.userVO.getValue(1004),Ng.userVO.getValue(1006),e.dataSource),n=e.getChildByName("dName");n.text=i.name;var o=(200-n.width)/2-10;n.x=o;var s=n.x+i.name.length*n.fontSize;if(e.getChildByName("dNature").index=i.monsterNature-1,e.getChildByName("dNature").x=s,n=e.getChildByName("lbHang"),this._currentDungeonId==i.id){n.text="",n.color="#00dc24",n.visible=!0;var r="挂机中",a="#00dc24",l=Ng.userVO.getValue(7020);l%=1e4,this._currentDungeonId>5&&l<this._currentDungeonId&&(r="闯关中",a="#e70626"),null==this._hangingJumTxt?(this._hangingJumTxt=new hS(r,a,n.fontSize),this._hangingJumTxt.pos(n.x,n.y)):this._hangingJumTxt.changeInfo(r,a,n.fontSize),e.addChild(this._hangingJumTxt),this._hangingJumTxt.visible=!0}else n.visible=!1,this._hangingJumTxt&&this._hangingJumTxt.parent==e&&(this._hangingJumTxt.visible=!1);var h=this._dungeonEnterBtn.getChildByName("light");i.id<=5&&0==this._currentDungeonId&&0==t?(n.visible=!1,this.itemsList.getCell(t).addChild(this._dungeonEnterBtn),this._dungeonEnterBtn.visible=!0,null==h&&(h=new aw("create/clip_select.png"),h.autoPlay=!0,h.clipX=15,h.pos(-10,-10),h.width=this._dungeonEnterBtn.width+20,h.height=this._dungeonEnterBtn.height+20,this._dungeonEnterBtn.addChild(h))):(h&&h.removeSelf(),this.dungeonSelectTempIndex==t?e.addChild(this._dungeonEnterBtn):this._dungeonEnterBtn.visible&&this._dungeonEnterBtn.parent==e&&this._dungeonEnterBtn.removeSelf());var c,u=0;if(i.id>=101){for(u=0;6>u;u++)c=e.getChildByName("suitInfo_"+u),c.text="";c=e.getChildByName("suitInfo_lv"),c.text="灵宠装备"+i.equipLevel+"级（神圣"+an.getSacred(i.id)+"级）",c.visible=!0,n=e.getChildByName("dName"),n.color=N.getColor(an.getQuality(i.id))}else{var d=g.database.getData("equipsuit",i.suitId);if(d){var p=d.purpleAttr;if(0!=p.length)for(u;6>u;u++)if(c=e.getChildByName("suitInfo_"+u),0==u&&(1==p.length?c.y=32:c.y=18),c.color="#c527ff",u<p.length){var f=p[u],_=I.getName(f.key),m=I.getValueStr(f.key,f.value,!0);c.text=_+" "+m}else c.text=""}c=e.getChildByName("suitInfo_lv"),c.visible=!1,n=e.getChildByName("dName"),n.color="#ffffff"}},t.onDunGroupSelect=function(e,t){if("click"==e.type){var i=this.groupList.getCell(t);if(.5==i.alpha)return void x.getInstance().sendNotification("prompted_info_show",{info:"击败上一关BOSS解锁"});if(.6==i.alpha)return x.getInstance().sendNotification("prompted_info_show",{info:"当前副本暂未开启"}),void(this._openInfo&&this._openInfo.openLimit&&this._openInfo.waitedId>0&&this._openInfo.waitTime<g.clock.currentTime&&Gc.instance.queryLimitOpen());if(.9==i.alpha)return void x.getInstance().sendNotification("prompted_info_show",{info:"大侠，请先完成任务装备武器再进入副本"});var n=i.dataSource;if(null==n)return;if(n.id>=101&&Ng.userVO.getValue(1006)<100)return void x.getInstance().sendNotification("prompted_info_show",{info:"该副本100级开启"});this.owner.addChild(this.selectDunge),this.groupList.removeSelf();var o=this.head,s=Ng.userVO.getValue(1006),r=o.getChildByName("dName");switch(r.text=n.name,n.id){case 1:r.color="#ffffff";break;case 2:r.color="#0084ff";break;case 3:r.color="#0084ff";break;case 4:r.color="#00dc24";break;case 5:r.color="#00dc24";break;case 6:case 7:r.color="#fffc00";break;case 8:r.color="#e70626";break;case 9:r.color="#e70626";break;case 10:r.color="#c527ff";break;case 11:r.color="#c527ff"}o.getChildByName("equipLv").text=n.equipLv,r=o.getChildByName("monsterLv"),r.text=""+n.monsterLv,n.minLv>s?r.color="#e70626":n.maxLv<s?r.color="#ffffff":r.color="#00dc24",r=o.getChildByName("equipType"),0==n.limit?(r.text="通用装备",r.color="#ffffff"):(r.text="五行专属装备",r.color="#fffc00"),this._hangingJumTxt&&(this._hangingJumTxt.visible=!1),this.itemsList.dataSource=n.list;var a=this.head.getChildByName("equipView");n.id>=101?(this.suitLb.changeText("【装备等级】"),a.visible=!1,r.text="灵宠装备",r.color="#c527ff"):(this.suitLb.changeText("【套装属性】"),a.visible=!0)}},t.onDunSelect=function(e,t){var n=this;if("mouseup"==e.type){this._dungeonEnterBtn.visible=!1;var o=this.itemsList.dataSource[t],s=o.id,r=Ng.userVO.getValue(19002);if(s==r)this.dungeonSelectTempIndex=-1,x.getInstance().sendNotification("SHOW_FIGHT_HANG_PAGE",s),this.onBack();else{if(5>=s)return this.dungeonSelectTempIndex=-1,Gc.instance.enterDungeon(s),x.getInstance().sendNotification("SHOW_FIGHT_HANG_PAGE",s),void this.onBack();this.dungeonSelectTempIndex==t?0!=o.equipNature&&o.equipNature!=Ng.userVO.getValue(1004)?x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"当前副本专属装备与您的五行不一至，是否确认？",handler:h.create(this,function(e){e&&(n.dungeonSelectTempIndex=-1,Gc.instance.enterDungeon(s),x.getInstance().sendNotification("SHOW_FIGHT_HANG_PAGE",s),n.onBack())})}):(this.dungeonSelectTempIndex=-1,Gc.instance.enterDungeon(s),x.getInstance().sendNotification("SHOW_FIGHT_HANG_PAGE",s),this.onBack()):(this.dungeonSelectTempIndex=t,this.itemsList.getCell(t).addChild(this._dungeonEnterBtn),this._dungeonEnterBtn.visible=!0,i.timer.once(3e3,this,this.onSelectDunTimeout))}}},t.onSelectDunTimeout=function(){this.dungeonSelectTempIndex=-1,this._dungeonEnterBtn.visible=!1},e}(),me=(function(){function e(){}return o(e,"modules.home.HomeNotification"),e.SHOW_HOME_PAGE="SHOW_HOME_PAGE",e.UPDATA_HOME_LIST_ACT="UPDATA_HOME_LIST_ACT",e}(),function(){function e(){}return o(e,"modules.alca.controller.AlcaCmd"),e.SIGNUP=1,e.QUERY_SELF=2,e.QUERY_ENEMY=3,e.LINE_UP=4,e.LINE_OFF=5,e.EAT_DRUG=6,e.ATTACK=7,e.LIST_VD_LOGS=8,e.LOOK_VD=9,e.AUTHORIZE_LINEUP=10,e.LIST_AWARD_LOG=11,e.ATTACK_FORCE=12,e.TAKE_EXT_AWARD=13,e.PUSH_FIGHT_OVER=100,e.PUSH_ARENA_CHG=101,e.PUSH_GAME_END=102,n(e,["ALCA_SIGNUP",function(){return this.ALCA_SIGNUP="39_1"},"ALCA_QUERY_SELF",function(){return this.ALCA_QUERY_SELF="39_2"},"ALCA_QUERY_ENEMY",function(){return this.ALCA_QUERY_ENEMY="39_3"},"ALCA_LINE_UP",function(){return this.ALCA_LINE_UP="39_4"},"ALCA_LINE_OFF",function(){return this.ALCA_LINE_OFF="39_5"},"ALCA_EAT_DRUG",function(){return this.ALCA_EAT_DRUG="39_6"},"ALCA_ATTACK",function(){return this.ALCA_ATTACK="39_7"},"ALCA_ATTACK_FORCE",function(){return this.ALCA_ATTACK_FORCE="39_12"},"ALCA_LIST_VD_LOGS",function(){return this.ALCA_LIST_VD_LOGS="39_8"},"ALCA_LOOK_VD",function(){return this.ALCA_LOOK_VD="39_9"},"ALCA_AUTHORIZE_LINEUP",function(){return this.ALCA_AUTHORIZE_LINEUP="39_10"},"ALCA_LIST_AWARD_LOG",function(){return this.ALCA_LIST_AWARD_LOG="39_11"},"ALCA_TAKE_EXT_AWARD",function(){return this.ALCA_TAKE_EXT_AWARD="39_13"},"ALCA_PUSH_FIGHT_OVER",function(){return this.ALCA_PUSH_FIGHT_OVER="39_100"},"ALCA_PUSH_ARENA_CHG",function(){return this.ALCA_PUSH_ARENA_CHG="39_101"},"ALCA_PUSH_GAME_END",function(){return this.ALCA_PUSH_GAME_END="39_102"}]),e}()),ge=function(){function e(e){this.obj=null,this._date=null,this.obj=e;var t=this.videoId.split("-");2==t.length&&(this._date=ro.newDate(vo["int"](t[1])))}o(e,"modules.alca.model.AlcaVideoLog");var t=e.prototype;return t.getInfo=function(e){100==this.teamId?this.isWin?(e.text="战斗胜利",e.color="#00dc24"):(e.text="战斗失败",e.color="#e70626"):this.teamId<300?this.isWin?(e.text="进攻成功，积分+300",e.color="#00dc24"):(e.text="进攻失败",e.color="#e70626"):this.isWin?(e.text="防守成功",e.color="#00dc24"):(e.text="防守失败",e.color="#e70626")},s(0,t,"videoId",function(){return this.obj.videoId}),s(0,t,"date",function(){return this._date}),s(0,t,"isWin",function(){return 1==this.obj.isWin}),s(0,t,"teamId",function(){return this.obj.teamId}),e}(),ve=function(){function e(e){this.obj=null,this.obj=e}o(e,"modules.alca.model.AlcaAwardLog");var t=e.prototype;return t.getInfo=function(){if(this.allianceIdB<=0)return"<font color='#00dc24'>"+this.allianceNameA+"</font> 未逢对手，获胜";var e,t;return this.awardA>0?(e=this.allianceNameA,t=this.allianceNameB):(e=this.allianceNameB,t=this.allianceNameA),"<font color='#00dc24'>"+e+"(胜)</font> 对战 <font color='#e70626'>"+t+"(败)</font>"},s(0,t,"awardA",function(){return this.obj.awardA}),s(0,t,"awardB",function(){return this.obj.awardB}),s(0,t,"allianceNameA",function(){return this.obj.nameA}),s(0,t,"allianceNameB",function(){return this.obj.nameB}),s(0,t,"allianceIdB",function(){return this.obj.idB}),s(0,t,"allianceIdA",function(){return this.obj.idA}),e}(),ye=function(){function e(){this.obj=null,this.memeberList=null,this.memeberInfo=null,this.detailDic=null,this.timesDic=null,this.drugDic=null,this.memeber2team=null,this.detailDic=new uo,this.timesDic=new uo,this.drugDic=new uo,this.memeberInfo=new uo,this.memeber2team=new uo}o(e,"modules.alca.model.AlcArean");var t=e.prototype;return t.update=function(e){this.obj=e;var t,i,n;if(e.groupTimes){t=e.groupTimes.split("|");var o;for(o in t)i=t[o],n=i.split("_"),2==n.length&&this.timesDic.set(vo["int"](n[0]),vo["int"](n[1]))}if(e.drugs){t=e.drugs.split("|");var o;for(o in t)i=t[o],n=i.split("_"),2==n.length&&this.drugDic.set(vo["int"](n[0]),vo["int"](n[1]))}this.memeber2team.clear();var s,r=0;if(e.groupDetail){t=e.groupDetail.split("|");var o;for(o in t)if(i=t[o],n=i.split("_"),4==n.length){r=vo["int"](n[0]),s=this.detailDic.get(r),null==s&&(s=new Ee(r),this.detailDic.set(r,s));var a=vo["int"](n[1]),l=vo["int"](n[2]),h=vo["int"](n[3]);a>0&&this.memeber2team.set(a,r),l>0&&this.memeber2team.set(l,r),h>0&&this.memeber2team.set(h,r);var c=[a,l,h];s.mids=c}}var u;for(u in be.GROUP_ALL)r=be.GROUP_ALL[u],s=this.detailDic.get(r),null==s&&(s=new Ee(r),s.mids=[0,0,0],this.detailDic.set(r,s))},t.receiveMembers=function(e){this.memeberInfo.clear(),this.memeberList=e.pager.recoards;var t;for(var i in e.pager.recoards)t=e.pager.recoards[i],this.memeberInfo.set(t.playerId,t)},t.getMemeberInfo=function(e){return this.memeberInfo.get(e)},t.inited=function(){return null!=this.obj},t.clear=function(){this.obj=null,this.detailDic.clear(),this.timesDic.clear(),this.drugDic.clear()},t.getDetail=function(e){var t=this.detailDic.get(e);if(t){var i,n=[];for(var o in t.mids)i=t.mids[o],0>=i?n.push(null):n.push(this.memeberInfo.get(i));t.members=n}return this.detailDic.get(e)},t.getTeamId=function(e){var t=this.memeber2team.get(e);return t?t:0},t.getTime=function(e){var t=this.timesDic.get(e);return null==t?0:t},t.hasDrug=function(e){var t=this.drugDic.get(e);return null==t?0:t},s(0,t,"award",function(){return this.obj.award}),s(0,t,"eliteState",function(){return this.obj.eliteState}),s(0,t,"allianceId",function(){return this.obj.allianceId}),s(0,t,"enemyName",function(){return this.obj.enemyName}),s(0,t,"signDate",function(){return this.obj.signDate}),s(0,t,"score",function(){return this.obj.score}),s(0,t,"lastAwardTime",function(){return this.obj.lastAwardTime}),s(0,t,"authorizeLine",function(){return this.obj.authorizeLine}),s(0,t,"enemyId",function(){return this.obj.enemyId}),e}(),be=function(){function e(){}return o(e,"modules.alca.model.AlcaRule"),e.getTeamColor=function(e){return 100==e?"#c527ff":300>e?"#fffc00":"#0084ff"},e.getTeamName=function(e){switch(e){case 100:return"精英组";case 200:return"进攻一组";case 201:return"进攻二组";case 202:return"进攻三组";case 203:return"进攻四组";case 300:return"防守一组";case 301:return"防守二组";case 302:return"防守三组";case 303:return"防守四组"}return"??"},e.getTeamStat=function(e,t){return""},e.isSignUpTime=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours();switch(t){case 1:case 2:case 3:return!0;case 4:return 18>i}return!1},e.waitLineup=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours();return 4==t&&i>=18},e.isLineUpTime=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours();return 5==t&&21>i},e.waitFight=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours();return 5==t&&i>=21||6==t&&9>i},e.isFightTime=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours();return 6==t&&i>=9||0==t&&15>i},e.canForceAttack=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours();return 0==t&&i>=13&&15>=i},e.fightOver=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours();return 0==t&&i>=15},e.getLineupEndTs=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay();return 5>=t?(e.setDate(e.getDate()+(5-t)),e.setSeconds(0),e.setMinutes(0),e.setHours(21),g.clock.fixTimeZoneOffset(e),e.getTime()):-1},e.getFightBeginTs=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay();return 6>t&&e.setDate(e.getDate()+(6-t)),e.setSeconds(0),e.setMinutes(0),e.setHours(9),g.clock.fixTimeZoneOffset(e),e.getTime()},e.getFightEndTs=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay();return 0!=t&&e.setDate(e.getDate()+(7-t)),e.setSeconds(0),e.setMinutes(0),e.setHours(15),g.clock.fixTimeZoneOffset(e),e.getTime()},e.getEliteBeginTs=function(e){var t=ro.newDate(g.clock.currentTime),i=t.getDay();switch(6>i&&t.setDate(t.getDate()+(6-i)),t.setSeconds(0),e){case 1:t.setMinutes(30),t.setHours(9),g.clock.fixTimeZoneOffset(t);break;case 2:t.setMinutes(0),t.setHours(10),g.clock.fixTimeZoneOffset(t);break;case 3:t.setMinutes(30),t.setHours(10),g.clock.fixTimeZoneOffset(t);break;default:return 0}return t.getTime()},e.GROUP_ELITE=100,n(e,["GROUP_ALL",function(){return this.GROUP_ALL=[100,200,201,202,203,300,301,302,303]},"GROUP_ATTACK",function(){return this.GROUP_ATTACK=[200,201,202,203]},"GROUP_DEFENSE",function(){return this.GROUP_DEFENSE=[300,301,302,303]},"GROUP_SIMPLE",function(){return this.GROUP_SIMPLE=[200,201,202,203,300,301,302,303]},"GROUP_SIMPLE_BACKWORD",function(){return this.GROUP_SIMPLE_BACKWORD=[302,303,300,301,202,203,200,201]}]),e}(),Ee=function(){function e(e){this._teamId=0,this.mids=null,this.members=null,this._teamId=e}o(e,"modules.alca.model.AlcaTeamDetail");var t=e.prototype;return s(0,t,"teamName",function(){return be.getTeamName(this._teamId)}),s(0,t,"teamId",function(){return this._teamId}),e}(),xe=(function(){function e(){}return o(e,"modules.alca.AlcaNotification"),e.OPEN_ALCA_PAGE="OPEN_ALCA_PAGE",e.OPEN_ALCA_LINEUP_PAGE="OPEN_ALCA_LINEUP_PAGE",e.OPEN_ALCA_FIGHT_PAGE="OPEN_ALCA_FIGHT_PAGE",e.OPEN_ALCA_VIDEO_PAGE="OPEN_ALCA_VIDEO_PAGE",e.RECIVE_ALLIANCE_ARENA="RECIVE_ALLIANCE_ARENA",e.RECIVE_ALCA_TEAM_CHG="RECIVE_ALCA_TEAM_CHG",e.RECIVE_ALCA_ENEMY="RECIVE_ALCA_ENEMY",e.RECEIVE_ALCA_VIDEO_LOGS="RECEIVE_ALCA_VIDEO_LOGS",e.RECEIVE_ALCA_VIDEO_DETAIL="RECEIVE_ALCA_VIDEO_DETAIL",e.RECEIVE_ALCA_AWARD_LOGS="RECEIVE_ALCA_AWARD_LOGS",e}(),function(){function e(){}return o(e,"modules.fight.controller.FightCmd"),e.OFFLINE_AWARD=1,e.PUSH_START_CONTEXT=100,e.PUSH_REPORTS=101,e.PUSH_AWARDS=102,e.PUSH_START_CONTEXT_TEAM=104,e.PUSH_DUNGEON_EXP_AVERAGE=103,n(e,["FIGHT_OFFLINE_AWARD",function(){return this.FIGHT_OFFLINE_AWARD="5_1"},"FIGHT_PUSH_START_CONTEXT",function(){return this.FIGHT_PUSH_START_CONTEXT="5_100"},"FIGHT_PUSH_REPORTS",function(){return this.FIGHT_PUSH_REPORTS="5_101"},"FIGHT_PUSH_AWARDS",function(){return this.FIGHT_PUSH_AWARDS="5_102"},"FIGHT_PUSH_START_CONTEXT_TEAM",function(){return this.FIGHT_PUSH_START_CONTEXT_TEAM="5_104"},"FIGHT_PUSH_DUNGEON_EXP_AVERAGE",function(){return this.FIGHT_PUSH_DUNGEON_EXP_AVERAGE="5_103"}]),e}()),Se=(function(){function e(){}return o(e,"modules.fight.type.FightType"),e.VIDEO=-1,e.MONSTER_HANG=0,e.SP_MONSTER=1,e.ARENA_PLAYER=2,e.FOREST_FIGHT=3,e.TOWER_FIGHT=4,e.ARENA_GLOBAL=5,e.TEAM_DUNGEON=6,e.ALLIANCE_STEAL=7,e.LADDER=8,e.ALLIANCE_ARENA=9,e.MINE=10,e.MINE_COLLECT=11,e.MARKET_DAILY=12,e.ALC_BOSS=13,e.ALLIANCE_MINE=14,e.SAMSARA=15,e.MESTERY=16,e.GUARD=17,e.DUNGEON_DAILY=18,e.PET_DUNGEON_PVP=19,e}(),function(){function e(){this.unitidFrom=null,this.unitidTo=null,this.effectId=0,this.skillId=0,this.attribute=0,this.value=0,this.statusEndTime=NaN,this.valueExt=0}o(e,"modules.fight.model.FightReportBase");var t=e.prototype;return t.update=function(e){this.unitidFrom=new P(e.unitidFrom.id,e.unitidFrom.type),this.unitidTo=new P(e.unitid.id,e.unitid.type),this.effectId=e.effectId,this.skillId=e.skillId,this.attribute=e.attribute,this.value=e.value,this.statusEndTime=e.statusEndTime,this.valueExt=e.valueExt},t.buildHtml=function(e,t,i,n,o){var s=null,r=this.value<0?""+-this.value:""+this.value,a=0==this.value;switch(this.effectId){case 1e3:if(110001==this.attribute)this.tmpSkillEffect?(this.tmpSkillEffect=!1,s=a?"攻击了&nbsp;"+e+"，但伤害被免疫":"对&nbsp;"+e+"&nbsp;造成 <font color='#e70626'>&nbsp;"+r+"&nbsp;</font>点&nbsp;"+i+"&nbsp;伤害"):s=a?"<br>"+t+"攻击了&nbsp;"+e+"，但伤害被免疫":"<br>"+t+"&nbsp;对&nbsp;"+e+"&nbsp;造成 <font color='#e70626'>&nbsp;"+r+"&nbsp;</font>点&nbsp;"+i+"&nbsp;伤害";else if(110101==this.attribute){var l="";this.valueExt>0&&(l="<font color='#0084ff'>"+this.valueExt+"</font>"),s="，"+e+"&nbsp;消耗"+l+"法力吸收<font color='#e70626'>&nbsp;"+r+"&nbsp;</font>伤害"}break;case 1001:s="移除负面效果",this.tmpSkillEffect&&(this.tmpSkillEffect=!1);break;case 1010:s="，"+e+"&nbsp;触发<font color='#00cc00'>【净化】</font>移除负面效果";break;case 1015:s="，生命恢复效果翻倍，";break;case 1020:s="，净化时增加攻击力，";break;case 1026:s="，闪避时增加攻击力，";break;case 1027:s="，闪避时增加攻击伤害，";break;case 1021:this.tmpSkillEffect&&(s="，攻击减防");break;case 1022:this.tmpSkillEffect&&(s="，攻击增伤");break;case 1023:this.tmpSkillEffect&&(s="，攻击吸防，");break;case 1024:s="，移除负面效果，";break;case 1025:this.skillId>0?this.statusEndTime<0?(s=this._bufDefense(e),s+="灵宠绝技<font color='#0084ff'>【清影】</font>"):s="，触发灵宠绝技<font color='#0084ff'>【清影】</font>移除增益效果":this.statusEndTime<0?(s=this._bufDefense(e),s+="<font color='#0084ff'>【诅咒】</font>"):s="，触发<font color='#0084ff'>【诅咒】</font>移除增益效果";break;case 1002:case 1003:if(0!=this.value){var h;h=1204==this.attribute&&0!=this.valueExt?I.getValueStr(1340,this.valueExt,!0):1202==this.attribute&&0!=this.valueExt?I.getValueStr(1208,this.valueExt,!0):I.getValueStr(this.attribute,this.value,!0),h=1341==this.attribute?h+"概率"+I.getName(this.attribute):I.getName(this.attribute)+h,s=this.skillId<0?"<br>"+e+" "+h:"，"+h}this.tmpSkillEffect&&1016==this.skillId&&1421==this.attribute&&(this.tmpSkillEffect=!1);break;case 1004:s="&nbsp;吸取生命<font color='#e70626'>&nbsp;"+r+"&nbsp;</font>点";break;case 1006:s="&nbsp;吸取法力<font color='#0084ff'>&nbsp;"+r+"&nbsp;</font>点";break;case 1007:s="，消耗"+e+"法力<font color='#0084ff'>&nbsp;"+r+"&nbsp;</font>点";break;case 1005:switch(this.statusEndTime<0?(s=this._bufDefense(e),this.tmpSkillEffect&&(this.tmpSkillEffect=!1)):(this.tmpSkillEffect&&(this.tmpSkillEffect=!1),s=this.unitidFrom.equals(this.unitidTo)?"，&nbsp;受到状态反弹效果，"+e+"&nbsp;被":"，&nbsp;"+e+"&nbsp;被"),this.value){case 1:s+="<font color='#fffc00'>【眩晕】</font>";break;case 2:s+="<font color='#00dc24'>【中毒】</font>";break;case 3:s+="<font color='#0084ff'>【冰冻】</font>";break;case 4:s+="<font color='#e70626'>【致盲】</font>";break;case 5:s+="<font color='#c527ff'>【虚弱】</font>"}break;case 1008:s=this.statusEndTime<0?this._bufDefense(e):"，&nbsp;"+e+"&nbsp;被",s+="<font color='#e70626'>【重伤】</font>";break;case 1009:this.statusEndTime<0?(s=this._bufDefense(e),s+="<font color='#e70626'>【破招】</font>"):s="，&nbsp;"+e+"&nbsp;被<font color='#e70626'>【破招】</font>";break;case 2002:s="，&nbsp;"+e+"&nbsp;生命<font color='#00dc24'> + "+r+"</font>",this.tmpSkillEffect=!1;break;case 2004:s="，&nbsp;"+e+"&nbsp;法力<font color='#0084ff'> + "+r+"</font>",this.tmpSkillEffect=!1;break;case 2e4:var c=g.database.getSkill(this.attribute);this.value>0?s="<br>"+e+"&nbsp;蓄力技能<font color='#00d8ff'>&nbsp;【"+c.name+"】&nbsp;</font>":(c.id>=3016&&c.id<=3050?(s="<br>"+e+"&nbsp;放出灵宠绝技<font color='#00d8ff'>&nbsp;【"+c.name+"】&nbsp;</font>",3042==c.id?s=s+"，<font color='#00dc24'>每2秒恢复生命"+-this.value+"</font>":3043==c.id&&(s=s+"，<font color='#0084ff'>每2秒恢复法力"+-this.value+"</font>")):s="<br>"+e+"&nbsp;放出技能<font color='#00d8ff'>&nbsp;【"+c.name+"】&nbsp;</font>",this.tmpSkillEffect=!0);break;case 20001:this.tmpSkillEffect?(this.tmpSkillEffect=!1,s="，被&nbsp;"+e+"&nbsp;躲开了"):s=e+"&nbsp;躲开了&nbsp;"+t+"&nbsp;攻击",this.value>0&&this.attribute>0&&(h=I.getValueStr(this.attribute,this.value,!0),h=I.getName(this.attribute)+h,s=s+"，"+e+h);break;case 20002:this.tmpSkillEffect?(this.tmpSkillEffect=!1,s="，被 "+e+"&nbsp;免疫了"):s="<br>"+e+"&nbsp;免疫了&nbsp;"+t+"&nbsp;攻击";break;case 20003:s="，受到 <font color='#e0e00d'>&nbsp;"+r+"&nbsp;</font>点反弹伤害";break;case 20004:case 20005:;this.tmpSkillEffect?(this.tmpSkillEffect=!1,s=a?"攻击了&nbsp;"+e+"【会心一击】，但伤害被免疫":"对&nbsp;"+e+"&nbsp;造成<font color='#40fb06'>&nbsp;"+r+"&nbsp;</font>点 "+i+"&nbsp;伤害【会心一击】"):s=a?"<br>"+t+"攻击了&nbsp;"+e+"【会心一击】，但伤害被免疫":"<br>"+t+"对&nbsp;"+e+"&nbsp;造成<font color='#40fb06'>&nbsp;"+r+"&nbsp;</font>点&nbsp;"+i+"&nbsp;伤害【会心一击】",
20005==this.effectId&&(s+="【韧性抵抗】");break;case 2005:v.OPEN_TEST_PAY&&this.value>0&&(s=e+"回复"+I.getName(this.attribute)+" +"+r);break;case 2014:s=e+"触发灵宠绝技<font color='#e0e00d'>【返源】</font>"+I.getName(this.attribute)+" +"+r,o-1>n&&(n>0&&(s="<br>"+s),s+="<br>");break;case 2015:s=e+"触发灵宠绝技<font color='#e0e00d'>【巫毒】</font>"+I.getName(this.attribute)+" +"+r,o-1>n&&(n>0&&(s="<br>"+s),s+="<br>");break;case 2006:s=e+"&nbsp;中毒流血<font color='#3dc613'>&nbsp;"+r+"&nbsp;</font>点",o-1>n&&(s+="<br>");break;case 2007:s="&nbsp;自损生命 <font color='#e70626'>&nbsp;"+r+"&nbsp;</font>点";break;case 2008:break;case 2009:s="&nbsp;自损法力 <font color='#e70626'>&nbsp;"+r+"&nbsp;</font>点";break;case 2010:s="&nbsp;额外损失生命 <font color='#e70626'>&nbsp;"+r+"&nbsp;</font>点，";break;case 2011:s="<br>"+e+"<font color='#e70626'>【狂暴】</font>了";break;case 2012:s="<br>"+e+"&nbsp;被<font color='#00d8ff'>【天击】</font>损失生命<font color='#e0e00d'>&nbsp;"+r+"&nbsp;</font>点";break;case 2013:s="<br>"+e+"&nbsp;触发灵宠绝技<font color='#00d8ff'>【涅槃】</font>复活生命<font color='#e70626'>&nbsp;"+this.value+"&nbsp;</font>，法力<font color='#0084ff'>&nbsp;"+this.valueExt+"&nbsp;</font>";break;case 1028:s="，额外<font color='#40fb06'>"+r+"</font>伤害";break;default:s="effect:"+this.effectId}return s},t._bufDefense=function(e){var t;return t=-2==this.statusEndTime?"，"+e+"&nbsp;触发灵宠绝技<font color='#00d8ff'>【逍遥】</font>抵抗":"，"+e+"&nbsp;抵抗"},s(0,t,"tmpSkillEffect",function(){return console.log("子类需覆盖实现"),!1},function(e){console.log("子类需覆盖实现")}),e}()),we=function(){function e(){this.EFFECT_TMP_SKILL_FLAG=!1,this.fightingTime=0}o(e,"modules.fight.model.FightContextBase");var t=e.prototype;return t.isRightDead=function(){return!1},t.isLeftDead=function(){return!1},e}(),Ce=function(){function e(){this._members=null,this._map=null,this._members=new Array;for(var e=0;3>e;e++)this._members.push(O.build());this._map=new uo}o(e,"modules.fight.model.FighterGroup");var t=e.prototype;return t.getFighter=function(e){return this._map.get(e)},t.updateAnimal=function(e){this._map.clear();for(var t=0;3>t;t++){var i=e[t],n=this._members[t];i?(n.setTo(i.id.id,i.id.type),n.clear(),n.update(i.attributes.keys,i.attributes.values),this._map.set(n.unitId.key,n)):(n.setTo(0,0),n.clear())}},t.isDead=function(){for(var e=0;3>e;e++){var t=this._members[e];if(!t.isDead())return!1}return!0},s(0,t,"members",function(){return this._members}),e}(),Te=function(){function e(){this.exp=NaN,this.gas=NaN,this.silver=NaN,this.gold=NaN,this.donate=NaN,this.gasM=NaN,this.towerCoin=0,this.isBoxFull=!1,this.extAward=null,this.items=null,this.counts=null}o(e,"modules.fight.model.FightAwards");var t=e.prototype;return t.renderItems=function(t,i){if(void 0===i&&(i=!1),this.items&&t){var n,o,s,r=0,a=0,l=!1;for(var h in this.items)if(s=this.items[h],r=this.counts[a++],null!=s){if(s instanceof com.nwei.basedb.Props){var c=s;if(o=N.getColor(c.quality),n="【"+c.name+"】",r>0);else{if(0>r){if(e._dealHtml(t,"<br><font color='"+o+"'>获得"+n+"</font>*"+-r),19==c.propType)if(i){var u=x.getInstance().retrieveProxy("AllianceProxy");u&&u.playerAlliance&&u.playerAlliance.inited()&&(u.playerAlliance.donate+=this.donate);var d=5*-r;e._dealHtml(t,"<font color='#fffc00'>&nbsp;&nbsp;(自动进贡，宗门贡献+"+this.donate+"、资源+"+d+")</font>")}else e._dealHtml(t,"<font color='#fffc00'>&nbsp;&nbsp;(自动进贡)</font>");else 6==c.propType?e._dealHtml(t,"<font color='#fffc00'>&nbsp;&nbsp;(自动开启)</font>"):e._dealHtml(t,"<font color='#fffc00'>&nbsp;&nbsp;(自动出售)</font>");continue}if(19==c.propType){e._dealHtml(t,"<font color='#e70626'>&nbsp;&nbsp;(未加入宗门，无法获得原木)</font>");continue}}l=!0}else if(s instanceof com.nwei.basedb.Equip){var p=s;o=N.getColor(p.quality),n="【"+p.name+"】"}else if(s instanceof modules.goods.model.data.PetEquipSimple){var f=s;if(o=N.getColor(f.quality),n=f.extCfg.prefix+"【"+f.baseCfg.name+"】"+R.getName(f.nature),0>r){var _=an.queryMaterialExpSimple(f.prefix,f.quality);_*=-r,e._dealHtml(t,"<br><font color='"+o+"'>获得"+n+"</font>*"+-r+"<font color='#fffc00'>&nbsp;&nbsp;(自动分解，培养值+"+_+")</font>");continue}l=!0}else if(s instanceof com.nwei.basedb.Demon){var m=s;o=N.getColor(m.quality),n="【"+m.name+"】"+m.star+"（"+m.level+"级）",l=!0}else if(s instanceof com.nwei.basedb.Achieve){var g=s;o=N.getColor(g.quailty),n="成就【"+g.name+"】"}else if(s instanceof com.nwei.basedb.Talisman){var v=s;n="法宝【"+v.name+"】",o="#c527ff"}else if(s instanceof com.nwei.basedb.PetSkill){var y=s;y.id<16?(o="#fffc00",n="【战技】"+y.name):(o="#e70626",n="【绝技】"+y.name)}else n="未知类型"+s;e._dealHtml(t,"<br><font color='"+o+"'>获得"+n+"</font>"+(l&&r>0?"*"+r:""))}}},t.getItemsHtmlSimple=function(){var e,t,i,n="",o=0,s=0;for(var r in this.items)if(i=this.items[r],o=this.counts[s++],null!=i){var a=!1;if(i instanceof com.nwei.basedb.Props){var l=i;t=N.getColor(l.quality),e="【"+l.name+"】",a=!0}else if(i instanceof com.nwei.basedb.Equip){var h=i;t=N.getColor(h.quality),e="【"+h.name+"】"}else if(i instanceof modules.goods.model.data.PetEquipSimple){var c=i;t=N.getColor(c.quality),e=c.extCfg.prefix+"【"+c.baseCfg.name+"】"+R.getName(c.nature),a=!0}else if(i instanceof com.nwei.basedb.Demon){var u=i;t=N.getColor(u.quality),e="【"+u.name+"】"+u.star+"（"+u.level+"级）",a=!0}else if(i instanceof com.nwei.basedb.Achieve){var d=i;t=N.getColor(d.quailty),e="成就【"+d.name+"】"}else if(i instanceof com.nwei.basedb.Talisman){var p=i;e="法宝【"+p.name+"】",t="#c527ff"}else if(i instanceof com.nwei.basedb.PetSkill){var f=i;f.id<16?(t="#fffc00",e="【战技】"+f.name):(t="#e70626",e="【绝技】"+f.name)}else e="未知类型"+i;o>0&&(n=n+"<br><font color='"+t+"'>获得"+e+"</font>"+(a&&o>0?"*"+o:""))}return n},s(0,t,"isEmpty",function(){return 0==this.exp&&0==this.gold&&0==this.gas&&0==this.silver&&0==this.donate&&0==this.towerCoin&&(null==this.items||0==this.items.length)}),s(0,t,"itemSize",function(){return this.items?this.items.length:0}),e._dealHtml=function(e,t){if(e instanceof laya.html.dom.HTMLDivElement){var i=e;i.appendHTML(t)}else if(e instanceof modules.fight.view.components.FightingLivePage){var n=e;n.appendReport(t)}else if(e instanceof modules.fight.view.components.FightingLiveTeamPage){var o=e;o.appendReport(t)}},e.valueFighting=function(t){var i=new e;if(i.exp=t.exp,i.gas=t.gas,i.silver=t.silver,i.gold=t.gold,i.donate=t.donate,i.gasM=t.gas_m,i.towerCoin=0,t.props){i.items=[];for(var n=0;n<t.props.length;n++){var o=t.types[n],s=t.props[n],r=t.counts[n];if(0>s)i.isBoxFull=!0,i.items.push(null);else{var a;switch(o){case 0:a=g.database.getData("props",s),i.items.push(a);break;case 1:a=g.database.getData("equip",s),i.items.push(a);break;case 14:a=new Dn(s),i.items.push(a);break;case 10:var l=g.database.getData("achieve",1e3*r+7);i.items.push(l);break;case 12:a=g.database.getData("demon",s),i.items.push(a);break;case 6:a=g.database.getData("talisman",s),i.items.push(a);break;case 15:a=g.database.getData("petskill",s),i.items.push(a);break;case 13:i.towerCoin+=r,i.items.push(null);break;default:console.log("未解析类型"+o),i.items.push(null)}}}}return i},e.value=function(t){var i=e.valueFighting(t);return i.counts=t.counts,t.extAward&&(i.extAward=e.valueFighting(t.extAward),i.extAward.counts=t.extAward.counts),i},e}(),Ie=function(){function e(e){this.panel=null,this.txtReports=null,this.reportsNum=0,this.panel=e,this.txtReports=new uw,this.txtReports.width=e.width,this.txtReports.style.lineHeight=40,this.txtReports.style.fontSize=26,this.txtReports.style.color="#ffffff",this.panel.addChild(this.txtReports)}o(e,"modules.fight.view.components.FightingReporter");var t=e.prototype;return t.appendReport=function(e){this.txtReports.appendHTML(e),this.reportsNum+=1,this.reportsNum>100&&(this.reportsNum=0,this.txtReports.innerHTML="",this.txtReports.height=0,this.reportsNum=0,this.layout())},t.layout=function(){this.panel.refresh(),this.panel.vScrollBar.value=this.panel.vScrollBar.max},t.clear=function(){this.txtReports.innerHTML="",this.txtReports.height=0,this.reportsNum=0,this.panel.refresh()},t.getReportsNum=function(){return this.reportsNum},e.MAX_REPORT_LEN=100,e}(),Ae=function(){function e(e){this.page=null,this.page=e}o(e,"modules.fight.view.components.FightingLiveHelper");var t=e.prototype;return t.popCombat=function(e,t,i,n,o,s){if(void 0===o&&(o=!1),void 0===s&&(s=!1),0!=this.page.isPopup&&0!=e.name.visible){var r=oS.getOne();e.popTips(r),t?r.popMis():s?r.popHurtCritic(i):r.popHurt(i,n,o)}},t.popCrazy=function(e,t){if(0!=this.page.isPopup&&0!=e.name.visible){var i=oS.getOne();e.popTips(i),i.popCrazy(t)}},t.popCombatMP=function(e,t){if(0!=this.page.isPopup&&0!=e.name.visible){var i=oS.getOne();e.popTips(i,!0),i.popMPChange(t)}},t.actFininsh=function(e){},t.act=function(e,t,i,n,o,s){if(null!=e){var r=0;switch(t.effectId){case 1e3:case 20005:110101==t.attribute?(r=s.getValue(1101),t.valueExt>0?s.setValue(1101,r-t.valueExt):s.setValue(1101,r+t.value),n.freshFighterMP(s),this.popCombatMP(n,t.value)):110001==t.attribute&&(0==t.valueExt?(r=s.getValue(1100),s.setValue(1100,r+t.value)):s.setValue(1100,t.valueExt),n.freshFighterHP(s),this.popCombat(n,!1,t.value,!1));break;case 1001:this.actFininsh(i),n.clearDebuf();break;case 1024:n.clearDebuf();break;case 1025:t.statusEndTime<0||n.clearBuf();break;case 1010:n.clearDebuf();break;case 1002:case 1003:t.statusEndTime>0&&(t.skillId>0?i.addBuffOfSkill(t.skillId,t.statusEndTime-e.fightingTime):t.skillId<0&&n.addBuffOfSkill(t.skillId,t.statusEndTime-e.fightingTime)),t.skillId>0&&this.actFininsh(i);break;case 1004:if(0==t.value)return;0==t.valueExt?(r=o.getValue(1100),r+=t.value,o.setValue(1100,r)):o.setValue(1100,t.valueExt),i.freshFighterHP(o),this.popCombat(i,!1,t.value,!1);break;case 1006:if(0==t.value)return;0==t.valueExt?(r=o.getValue(1101),o.setValue(1101,r+t.value)):o.setValue(1101,t.valueExt),i.freshFighterMP(o),this.popCombatMP(i,t.value),r=s.getValue(1101),s.setValue(1101,r-t.value),n.freshFighterMP(s),this.popCombatMP(n,-t.value);break;case 1007:0==t.valueExt?(r=s.getValue(1101),s.setValue(1101,r-t.value)):s.setValue(1101,t.valueExt),n.freshFighterMP(s),this.popCombatMP(n,-t.value);break;case 1005:case 1008:case 1009:if(t.statusEndTime<0)break;var a=0;a=1005==t.effectId?t.value:t.effectId,n.addBuff(a,t.statusEndTime-e.fightingTime);break;case 2e4:t.value>0&&i.setSpeed(t.value);break;case 20001:this.popCombat(n,!0,t.value,!1),this.actFininsh(i);break;case 20002:this.actFininsh(i);break;case 20003:0==t.valueExt?(r=s.getValue(1100),s.setValue(1100,r+t.value)):s.setValue(1100,t.valueExt),n.freshFighterHP(s),this.popCombat(n,!1,t.value,!1,!0);break;case 20004:0==t.valueExt?(r=s.getValue(1100),s.setValue(1100,r+t.value)):s.setValue(1100,t.valueExt),n.freshFighterHP(s),this.popCombat(n,!1,t.value,!1,!1,!0),this.actFininsh(i);break;case 2005:case 2014:case 2015:if(0!=t.value){var l=0;110001==t.attribute?(0==t.valueExt?(l=s.getValue(1100)+t.value,s.setValue(1100,l)):s.setValue(1100,t.valueExt),n.freshFighterHP(s),(t.value<0||!i.name.visible||2005!=t.effectId)&&this.popCombat(n,!1,t.value,!1)):110101==t.attribute&&(0==t.valueExt?(l=s.getValue(1101)+t.value,s.setValue(1101,l)):s.setValue(1101,t.valueExt),n.freshFighterMP(s),(t.value<0||!i.visible||2005!=t.effectId)&&this.popCombatMP(n,t.value))}break;case 2006:case 2012:0==t.valueExt?(r=s.getValue(1100),s.setValue(1100,r+t.value)):s.setValue(1100,t.valueExt),n.freshFighterHP(s),this.popCombat(n,!1,t.value,!0);break;case 2007:case 2010:0==t.valueExt?(r=s.getValue(1100),s.setValue(1100,r-t.value)):s.setValue(1100,t.valueExt),n.freshFighterHP(s),this.popCombat(n,!1,-t.value,!0);break;case 2009:if(0==t.valueExt){var h=o.getValue(1101);o.setValue(1101,h-t.value)}else o.setValue(1101,t.valueExt);i.freshFighterMP(o),this.popCombatMP(i,-t.value);break;case 2008:if(e.isLeftDead()||e.isRightDead())break;var c=Math.abs(t.value)-e.fightingTime;n.syncSpeed(c,t.value>=0);break;case 2011:this.popCrazy(n,t.value);break;case 2013:n.clearBufAll(),s.setValue(1100,t.value),s.setValue(1101,t.valueExt)}}},e}(),Ne=function(){function e(t){this.name=null,this.nature=null,this.level=null,this.hp=null,this.mp=null,this.lbHp=null,this.lbMp=null,this.lbSpeed=null,this.speed=null,this.bgSpeed=null,this.buffContain=null,this.debuffContain=null,this._speedTest=null,this._hideCaller=null,this._hideFun=null,this._hashMp=!1,this._baseSpeed=0,this._speedTween=null,this._tempSpeed=0,this._pausing=!1,this.popCombat=new Bd,this.popCombat_MP=new Bd,this.name=t.getChildByName("name"),this.nature=t.getChildByName("nature"),this.level=t.getChildByName("level"),this.hp=t.getChildByName("hp"),this.mp=t.getChildByName("mp"),this.speed=t.getChildByName("speed"),this.bgSpeed=this.speed.getChildByName("bgPress"),e.PRESS_BG_WIDTH=this.bgSpeed.width,this.lbHp=t.getChildByName("lbHp"),this.lbMp=t.getChildByName("lbMp"),this.lbSpeed=t.getChildByName("lbSpeed"),this.buffContain=t.getChildByName("buff"),this.debuffContain=t.getChildByName("debuff"),this.name.text="",this.nature.index=-1,this.level.text="",this.name.visible=!1,this.nature.visible=!1,this.level.visible=!1,this.hp.visible=!1,this.lbHp.visible=!1,this.lbSpeed.visible=!1,this.speed.visible=!1,this.lbMp.visible=!1,this.mp.visible=!1,this.buffContain.visible=!1,this.debuffContain.visible=!1,t.addChild(this.popCombat),t.addChild(this.popCombat_MP),this._speedTest=new iw("0"),this._speedTest.fontSize=24,this._speedTest.color="#00ff00",-1==this.speed.scaleX?this._speedTest.pos(this.speed.x-this.speed.width,this.speed.y):this._speedTest.pos(this.speed.x,this.speed.y),t.addChild(this._speedTest),this._speedTest.visible=!1}o(e,"modules.fight.view.components.FighterCellAdaptor");var t=e.prototype;return t.visible=function(e){this.name.visible=e,this.nature.visible=e,this.level.visible=e,this.hp.visible=e,this.lbHp.visible=e,this.lbSpeed.visible=e,this.speed.visible=e,this._hashMp&&(this.lbMp.visible=e,this.mp.visible=e),this.buffContain.visible=e,this.debuffContain.visible=e,e&&this._hideCaller&&(i.timer.clear(this._hideCaller,this._hideFun),this._hideCaller=null)},t.hideDelay=function(e,t){this.name.visible&&(this._hideCaller=e,this._hideFun=t,i.timer.once(1e3,this._hideCaller,this._hideFun))},t.showFighter=function(e,t){this.name.text=e.getValue(1002);var i=this.name.x+this.name.width;if(this.nature.index=e.getValue(1004)-1,this.nature.x=i,i=i+this.nature.width+5,this.level.text="Lv."+e.getValue(1006),this.level.x=i,e.isBoss)e.isGlobal||e.hpPages>=4?this.name.color="#c527ff":this.name.color="#0084ff",this.nature.index<0&&(this.name.color="#FFA500");else if(e.unitId.equals(Ng.userVO.unitId)?this.name.color="#00dc24":this.name.color="#ffffff",0==e.unitId.type){var n=e.getValue(1027);n>0&&(this.name.color=N.getColor(n))}this.freshFighterHP(e),this._pausing=!1,this._baseSpeed=e.getValue(1205),this.setSpeed(this._baseSpeed),e.getValue(1107)>0?(this._hashMp=!0,this.showPress(this.getPressBg(this.mp),e.getValue(1101),e.getValue(1107)),this.mp.visible=!0,this.lbMp.visible=!0):(this._hashMp=!1,this.mp.visible=!1,this.lbMp.visible=!1),t?this.clearBufAll():this.clearDebuf()},t.freshFighterHP=function(e){var t=this.hp.getChildByName("bgRed"),i=this.hp.getChildByName("bgYellow"),n=e.getValue(1100),o=e.getValue(1106);n>o&&(n=o);var s=o/e.hpPages,r=Math.ceil(n/s),a=0;switch(r){case 2:a=n-s,t.skin="ui/bgHp.png",i.skin="ui/bgHp2.png",this.showPress(t,1,1),this.showPress(i,a,s);break;case 3:a=n-s-s,t.skin="ui/bgHp2.png",i.skin="ui/bgHp3.png",this.showPress(t,1,1),this.showPress(i,a,s);break;case 4:a=n-s-s-s,t.skin="ui/bgHp3.png",i.skin="ui/bgHp4.png",this.showPress(t,1,1),this.showPress(i,a,s);break;case 1:default:a=n,t.skin="ui/bgHp.png",i.skin="ui/bgHp2.png",this.showPress(t,a,s),this.showPress(i,0,1)}},t.showEmptyHP=function(e){var t=this.hp.getChildByName("bgRed"),i=this.hp.getChildByName("bgYellow");e?this.showPress(t,1,1):this.showPress(t,0,1),this.showPress(i,0,1)},t.freshFighterMP=function(e){var t=e.getValue(1101),i=e.getValue(1107);t>i&&(t=i),this.showPress(this.getPressBg(this.mp),t,i)},t.getPressBg=function(e){return e.getChildByName("bgPress")},t.showPress=function(t,i,n){isNaN(n)||0==n||0==i?(t.width=0,t.visible=!1):(t.visible=!0,t.width=e.PRESS_BG_WIDTH*i/n)},t.setSpeed=function(t){var i=this.getPressBg(this.speed);if(i.width=1,!this._speedTween){this._speedTween=new Lr;var n=i.$_GID||(i.$_GID=Dr.getGID());this._speedTween.gid=n}0>=t?this._speedTween.clear():this._pausing?this._tempSpeed=t:(this._tempSpeed=t,this._speedTest.text="set:"+this._tempSpeed,this._speedTween.to(i,{width:e.PRESS_BG_WIDTH},this._tempSpeed,null,h.create(this,this.onSpeedEnd)))},t.syncSpeed=function(t,i){if(-1==t&&(t=this._tempSpeed),!(200>=t)){var n=this.getPressBg(this.speed);return i||n.width>=e.PRESS_BG_WIDTH?void this.setSpeed(t):void(this._speedTween&&(t>0&&n.width>1?this._pausing||this._tempSpeed!=t&&(this._tempSpeed=t,this._speedTest.text="syc:"+this._tempSpeed,this._speedTween.to(n,{width:e.PRESS_BG_WIDTH},this._tempSpeed,null,h.create(this,this.onSpeedEnd))):this.setSpeed(this._tempSpeed)))}},t.onSpeedEnd=function(){this._speedTween.clear()},t.clearBufAll=function(){var e,t=[];if(this.buffContain.numChildren>0)for(var i=0;i<this.buffContain.numChildren;i++)e=this.buffContain.getChildAt(i),(e instanceof modules.fight.view.components.BuffCell||e instanceof modules.fight.view.components.BuffSkillCell)&&(e.clear(),t.push(e));if(this.debuffContain.numChildren>0)for(i=0;i<this.debuffContain.numChildren;i++)e=this.debuffContain.getChildAt(i),(e instanceof modules.fight.view.components.BuffCell||e instanceof modules.fight.view.components.BuffSkillCell)&&(e.clear(),t.push(e));var n;for(n in t)e=t[n],e.removeSelf();this.changeSpeedColor(0),this.desplayBuffs()},t.clearDebuf=function(){var e,t=[];if(this.debuffContain.numChildren>0)for(var i=0;i<this.debuffContain.numChildren;i++)e=this.debuffContain.getChildAt(i),(e instanceof modules.fight.view.components.BuffCell||e instanceof modules.fight.view.components.BuffSkillCell)&&(e.clear(),t.push(e));var n;for(n in t)e=t[n],e.removeSelf();this.changeSpeedColor(0),this.desplayBuffs()},t.clearBuf=function(){var e,t=[];if(this.buffContain.numChildren>0)for(var i=0;i<this.buffContain.numChildren;i++)e=this.buffContain.getChildAt(i),(e instanceof modules.fight.view.components.BuffCell||e instanceof modules.fight.view.components.BuffSkillCell)&&(e.clear(),t.push(e));var n;for(n in t)e=t[n],e.removeSelf();this.desplayBuffs()},t.pauseEnd=function(){if(this._pausing=!1,0!=this.speed.visible){var t=this.getPressBg(this.speed);if(t.width<=1)this.setSpeed(this._baseSpeed);else{this._tempSpeed<=0&&(this._tempSpeed=this._baseSpeed);var i=e.PRESS_BG_WIDTH/this._tempSpeed;i=vo["int"]((e.PRESS_BG_WIDTH-t.width)/i),this._speedTest.text="pauseE:"+i,this._speedTween.to(t,{width:e.PRESS_BG_WIDTH},i,null,h.create(this,this.onSpeedEnd))}}},t.addBuff=function(e,t){var i=1==e;i&&(this._speedTween.pause(),this._pausing=!0);for(var n,o=0;o<this.debuffContain.numChildren;o++)if(n=this.debuffContain.getChildAt(o),n instanceof modules.fight.view.components.BuffCell&&n.nature==e)return n.offAll("complete"),t>=1e3&&(this.changeSpeedColor(e),n.once("complete",this,this.onNatureBufEnd)),i&&n.once("complete",this,this.pauseEnd),void n.showBuf(e,t);n=iS.getOne(),n.offAll("complete"),t>=1e3&&(this.changeSpeedColor(e),n.once("complete",this,this.onNatureBufEnd)),this.debuffContain.addChild(n),i&&n.once("complete",this,this.pauseEnd),n.showBuf(e,t),this.desplayBuffs()},t.desplayBuffs=function(){for(var e,t=0,i=0;i<this.buffContain.numChildren;i++)e=this.buffContain.getChildAt(i),e.x=t,t+=e.width;for(t=0,i=0;i<this.debuffContain.numChildren;i++)e=this.debuffContain.getChildAt(i),e.x=t,t+=e.width},t.onNatureBufEnd=function(e){void 0===e&&(e=0),this.changeSpeedColor(0)},t.changeSpeedColor=function(e){switch(e){case 1:this.bgSpeed.index=2;break;case 2:this.bgSpeed.index=1;break;case 3:this.bgSpeed.index=3;break;case 4:this.bgSpeed.index=4;break;case 5:this.bgSpeed.index=5;break;case 0:this.bgSpeed.index=0}},t.addBuffOfSkill=function(e,t){var i;if(0>e)i=this.debuffContain;else{if(!(e>0))return;i=this.buffContain}var n;if(1e6>e)for(var o=e+1e6,s=0;s<i.numChildren;s++)if(n=i.getChildAt(s),n instanceof modules.fight.view.components.BuffSkillCell&&n.skillId==o)return;for(s=0;s<i.numChildren;s++)if(n=i.getChildAt(s),n instanceof modules.fight.view.components.BuffSkillCell&&n.skillId==e)return void n.showBuf(e,t);n=nS.getOne(),i.addChild(n),n.showBuf(e,t),this.desplayBuffs()},t.popTips=function(e,t){void 0===t&&(t=!1),t?(e.pos(this.mp.x+this.mp.scaleX*this.mp.width/2,this.mp.y-this.mp.height+16*this.popCombat_MP.numChildren),this.popCombat_MP.addChild(e)):(e.pos(this.hp.x+this.mp.scaleX*this.hp.width/2,this.hp.y-this.mp.height+16*this.popCombat.numChildren),this.popCombat.addChild(e))},t.clearTips=function(){var e=null;if(this.popCombat.numChildren){for(var t=0;t<this.popCombat.numChildren;t++)e=this.popCombat.getChildAt(t),e&&e.clear();this.popCombat.removeChildren()}if(this.popCombat_MP.numChildren){for(t=0;t<this.popCombat_MP.numChildren;t++)e=this.popCombat_MP.getChildAt(t),e&&e.clear();this.popCombat_MP.removeChildren()}},e.PRESS_BG_WIDTH=0,e}(),Pe=(function(){function e(){}return o(e,"modules.fight.FightNotification"),e.RECEIVE_DUNGEON_EXP_AVERAGE="RECEIVE_DUNGEON_EXP_AVERAGE",e.RECEIVE_FIGHT_CONTEXT="RECEIVE_FIGHT_CONTEXT",e.RECEIVE_FIGHT_REPORTS="RECEIVE_FIGHT_REPORTS",e.RECEIVE_FIGHT_AWARDS="RECEIVE_FIGHT_AWARDS",e.RECEIVE_OFFLINE_AWARDS="RECEIVE_OFFLINE_AWARDS",e.SHOW_FIGHT_HANG_PAGE="SHOW_FIGHT_HANG_PAGE",e.SHOW_FIGHT_PAGE_OTHER="SHOW_FIGHT_PAGE_OTHER",e.RECEIVE_FIGHT_CONTEXT_OTHER="RECEIVE_FIGHT_CONTEXT_OTHER",e.RECEIVE_FIGHT_REPORTS_OTHER="RECEIVE_FIGHT_REPORTS_OTHER",e.RECEIVE_FIGHT_AWARDS_OTHER="RECEIVE_FIGHT_AWARDS_OTHER",e}(),function(){function e(){}return o(e,"modules.talisman.controller.TalismanCmd"),e.DRESS=1,e.UPGRADE=2,e.UPGRADE_BY_STONE=3,e.REBUILD=4,e.REBUILD_DELAY=5,e.REBUILD_CHOSE=6,e.CHANGE_NATURE=7,n(e,["TALISMAN_DRESS",function(){return this.TALISMAN_DRESS="24_1"},"TALISMAN_UPGRADE",function(){return this.TALISMAN_UPGRADE="24_2"},"TALISMAN_UPGRADE_BY_STONE",function(){return this.TALISMAN_UPGRADE_BY_STONE="24_3"},"TALISMAN_REBUILD",function(){return this.TALISMAN_REBUILD="24_4"},"TALISMAN_REBUILD_DELAY",function(){return this.TALISMAN_REBUILD_DELAY="24_5"},"TALISMAN_REBUILD_CHOSE",function(){return this.TALISMAN_REBUILD_CHOSE="24_6"},"TALISMAN_CHANGE_NATURE",function(){return this.TALISMAN_CHANGE_NATURE="24_7"}]),e}()),Re=function(){function e(){}return o(e,"modules.talisman.model.TalismanRule"),e.getClutureName=function(t){return e.CULTURE_NAMES[t-1]},e.getCultureColor=function(e){return e+=1,e>7&&(e=7),N.getColor(e)},e.getUpgradeStone=function(e){var t=e.talismanConf.level,i=e.quality,n=0;return n=40>=t?5>i?145005:145006:50>=t?5>i?165005:165006:5>i?185007:185008,g.database.getData("props",n)},e.getUpgradeStoneNum=function(e){switch(e.quality){case 1:return 1;case 2:return 2;case 3:return 4;case 4:return 8;case 5:return 10}return 10},e.getRebuildStone=function(e){var t=e.talismanConf.level,i=e.quality,n=0;return n=40>=t?5>=i?145005:145006:50>=t?5>=i?165005:165006:5>=i?185007:185008,g.database.getData("props",n)},e.getRebuildNeedStoneNum=function(e){var t=e.quality;switch(t){case 1:case 2:case 3:return 1;case 4:case 5:return 2;case 6:return 2}return 2},e.getMaxAttrCount=function(e){var t=e.quality;switch(t){case 1:return 1;case 2:case 3:return 2;case 4:case 5:return 3;case 6:return 4}return 1},e.getChgNatureNeed=function(e){switch(e.talismanConf.grad){case 1:return 1;case 2:return 2;default:return 3}},n(e,["CULTURE_NAMES",function(){return this.CULTURE_NAMES=["【炼气】","【筑基】","【金丹】","【元婴】","【化神】","【炼虚】","【合体】"]}]),e}(),Le=(function(){function e(){}return o(e,"modules.talisman.TalismanNotification"),e.OPEN_DRESS_TALISMAN_CHANGE="OPEN_DRESS_TALISMAN_CHANGE",e.OPEN_UPGRADE_TALISMAN_VIEW="OPEN_UPGRADE_TALISMAN_VIEW",e.OPEN_REBUILD_TALISMAN_VIEW="OPEN_REBUILD_TALISMAN_VIEW",e.OPEN_REBUILD_CHOSE_VIEW="OPEN_REBUILD_CHOSE_VIEW",e.OPEN_CHG_NATURE_VIEW="OPEN_CHG_NATURE_VIEW",e.POP_TALISMAN_OPTION_SUCCESS="POP_TALISMAN_OPTION_SUCCESS",e}(),function(){function e(){}return o(e,"modules.vip.conroller.VipExtCmd"),e.QUERY=1,e.TAKE_AWARD=2,n(e,["VIP_EXT_QUERY",function(){return this.VIP_EXT_QUERY="58_1"},"VIP_EXT_TAKE_AWARD",function(){return this.VIP_EXT_TAKE_AWARD="58_2"}]),e}()),Oe=function(){function e(){this._endDate=0,this._signDate=0,this._liveDay=0,this._sign=!1}o(e,"modules.vip.model.PlayerVipExt");var t=e.prototype;return t.update=function(e){this._endDate=e.diamondDate,this._signDate=e.diamondSignDate,this.checkDate()},t.checkDate=function(){var e=g.clock.todayZero,t=ro.newDate(this._endDate);this._liveDay=ro.dateDiff(t,e),t=ro.newDate(this._signDate),this._sign=0==ro.dateDiff(t,e)},s(0,t,"isSigned",function(){return this._sign}),s(0,t,"liveDay",function(){return this._liveDay}),s(0,t,"isEffecting",function(){return this._liveDay>0}),e}(),Me=(function(){function e(){}return o(e,"modules.vip.model.VipExtRule"),e.OPEN_LEVEL=40,e}(),function(){function e(){}return o(e,"modules.vip.VipExtNotification"),e.RECEIVE_VIP_EXT="RECEIVE_VIP_EXT",e}(),function(){function e(){}return o(e,"modules.exchange.controller.ExchangeCmd"),e.QUERY_SALING=1,e.QUERY_SOLD=2,e.PUT_ON=3,e.PULL_OFF=4,e.SEARCH=5,e.BUY=6,e.CHANGE_GOLDEN=10,e.CHANGE_HANDBOOK=11,n(e,["EXHANGE_QUERY_SALING",function(){return this.EXHANGE_QUERY_SALING="33_1"},"EXHANGE_QUERY_SOLD",function(){return this.EXHANGE_QUERY_SOLD="33_2"},"EXHANGE_PUT_ON",function(){return this.EXHANGE_PUT_ON="33_3"},"EXHANGE_PULL_OFF",function(){return this.EXHANGE_PULL_OFF="33_4"},"EXHANGE_SEARCH",function(){return this.EXHANGE_SEARCH="33_5"},"EXHANGE_BUY",function(){return this.EXHANGE_BUY="33_6"},"EXHANGE_CHANGE_GOLDEN",function(){return this.EXHANGE_CHANGE_GOLDEN="33_10"},"EXHANGE_CHANGE_HANDBOOK",function(){return this.EXHANGE_CHANGE_HANDBOOK="33_11"}]),e}()),De=function(){function e(){this.type=0,this.typeChild=-1,this.nature=-1,this.quality=-1,this.keywd=0}o(e,"modules.exchange.model.SearchCnd");var t=e.prototype;return t.setGoodsFilter=function(e){switch(e){case 0:this.type=0,this.typeChild=17;break;case 1:this.type=0,this.typeChild=16;break;case 2:this.type=0,this.typeChild=18;break;case 3:this.type=1,this.typeChild=-1;break;case 4:this.type=0,this.typeChild=22}},t.getSendArr=function(){return[this.type,this.typeChild,this.nature,this.quality,this.keywd]},e}(),ke=function(){function e(){this.pager=new oo}o(e,"modules.exchange.model.SearchPager");var t=e.prototype;return t.update=function(e){this.pager.update(e.pager),null==this.pager.recoards&&(this.pager.recoards=[]),this.pager.pageNumber<=1&&(this.pager.recoards.length=0);var t;for(var i in e.list)t=e.list[i],this.pager.recoards.push(new Be(t))},e}(),Be=function(){function e(e){this._obj=null,this.baseAttr=null,this.exAttr=null,this.spAttr=null,this.liveAttr=null,this.creatAttr=null,this.update(e)}o(e,"modules.exchange.model.ExchangeItem");var t=e.prototype;return t.update=function(e){this._obj=e,this.analyzeAttrs(this.attributes)},t.analyzeAttrs=function(e){this.baseAttr=[],this.exAttr=[],this.spAttr=[],this.liveAttr=[],this.creatAttr=[];var t,i=e.split("|");for(var n in i){t=i[n],t=t.split("_");var o=vo["int"](t[0]),s=vo["int"](t[1]),r=vo["int"](t[2]),a={id:o,key:s,value:r};switch(o){case 0:this.baseAttr.push(a);break;case 1:this.exAttr.push(a);break;case 2:this.spAttr.push(a);break;case 3:this.liveAttr.push(a);break;case 4:this.creatAttr.push(a);break;default:console.log("error EquipAttrIdType:",t.id)}}},t.canCreatAttr=function(e){return 8==e.position||9==e.position||10==e.position?!1:e.quality>=4&&0==this.creatAttr.length},t.isIdentify=function(e){return 2==e.propType?this.baseAttr.length>0:18==e.propType?this.baseAttr.length>0:!1},t.needIdentify=function(e){return 2==e.propType&&e.level>35?!this.isIdentify(e):18==e.propType?!this.isIdentify(e):!1},s(0,t,"isShowTime",function(){return g.clock.currentTime>this.actTime+12e5}),s(0,t,"attributes",function(){return this._obj.attributes}),s(0,t,"goodsId",function(){return this._obj.goodsId}),s(0,t,"count",function(){return this._obj.count}),s(0,t,"baseId",function(){return this._obj.baseId}),s(0,t,"type",function(){return this._obj.type}),s(0,t,"price",function(){return this._obj.price}),s(0,t,"level",function(){return this._obj.level}),s(0,t,"playerId",function(){return this._obj.playerId}),s(0,t,"actTime",function(){return this._obj.actTime}),s(0,t,"state",function(){return this._obj.state}),s(0,t,"id",function(){return this._obj.id}),e}(),Ve=function(){function e(){this.salings=[],this.solds=[]}o(e,"modules.exchange.model.PlayerBooth");var t=e.prototype;return t.update=function(e,t){var i;i=t?this.salings:this.solds,i.length=0;for(var n=0;n<e.length;n++){var o=new Be(e[n]);i.push(o)}},t.updateItem=function(e){var t;if(0==e.state){var i;for(i in this.salings)if(t=this.salings[i],t.id==e.id)return t.update(e),t;return t=new Be(e),this.salings.push(t),t}if(1==e.state){var i;for(i in this.salings){if(t=this.salings[i],t.id==e.id){t.update(e),this.salings.splice(this.salings.indexOf(t),1);break}t=null}return null==t&&(t=new Be(e)),this.solds.push(t),t}var i;for(i in this.salings)if(t=this.salings[i],t.id==e.id)return t.update(e),this.salings.splice(this.salings.indexOf(t),1),t;return null},e}(),Fe=(function(){function e(){}return o(e,"modules.exchange.ExchangeNotification"),e.OPEN_EXCHANGE_VIEW="OPEN_EXCHANGE_VIEW",e.RECIVE_EXCH_PLAYER_BOOTH="RECIVE_EXCH_PLAYER_BOOTH",e.RECIVE_EXCH_PLAYER_ITEM="RECIVE_EXCH_PLAYER_ITEM",e.RECIVE_EXCH_SEARCH_RESULT="RECIVE_EXCH_SEARCH_RESULT",e.RECIVE_EXCH_BUY_RESULT="RECIVE_EXCH_BUY_RESULT",e}(),function(){function e(){}return o(e,"modules.record.controller.RecordCmd"),e.LAST_EXPENSE=1,n(e,["RECORD_LAST_EXPENSE",function(){return this.RECORD_LAST_EXPENSE="42_1"}]),e}()),Ge=function(){function e(e){this._obj=null,this._obj=e}o(e,"modules.record.model.PlayerExpense");var t=e.prototype;return s(0,t,"itemId",function(){return this._obj.itemId}),s(0,t,"time",function(){return this._obj.time}),s(0,t,"count",function(){return this._obj.count}),s(0,t,"typeName",function(){switch(this.type){case 1:return"商城消费";case 2:return"重置五行宫";case 3:return"进入森林";case 4:return"森林复活";case 5:return"森林矿脉";case 6:return"宝箱格子";case 7:return"灵宠乐园";case 8:return"灵宠乐园";case 9:return"鉴定";case 10:return"宝箱加速";case 11:return"森林买东西";case 12:return"强化";case 13:return"爬塔复活";case 14:return"商城功能";case 15:return"夺擂";case 16:return"交易所";case 17:return"建宗";case 18:return"圣诞老人";case 19:return"宗门任务";case 20:return"宗门贡献";case 21:return"竞技场";case 22:return"开熔灵宝箱";case 23:return"换熔灵宝箱";case 24:return"灵脉";case 25:return"商城每日礼包";case 26:return"兑换威望";case 27:return"每日限购";case 28:return"投资元宝";case 29:return"双倍领取";case 30:return"秘境挂机";case 31:return"灵宠战技阁";case 32:return"离线宝箱会员"}return""+this.type}),s(0,t,"value",function(){return this._obj.value}),s(0,t,"type",function(){return this._obj.type}),e.USE_JADE=100,e}(),He=(function(){function e(){}return o(e,"modules.record.RecordNotification"),e.OPEN_RECORD_VIEW="OPEN_RECORD_VIEW",e.RECEIVE_RECORD_EXPENSE="RECEIVE_RECORD_EXPENSE",e}(),function(){function e(){}return o(e,"modules.activity7day.Activity7DayNotification"),e.SHOW_ACTIVIT_7_DAY_PAGE="SHOW_ACTIVIT_7_DAY_PAGE",e.ACTIVIT_7_DAY_INFO="ACTIVIT_7_DAY_INFO",e}(),function(){function e(){}return o(e,"modules.activity7day.controller.Activity7DayCmd"),e.QUERY=1,e.TAKE_AWARD=2,e.TAKE_AWARD_EX=3,n(e,["ACTIVITY_7DAY_QUERY",function(){return this.ACTIVITY_7DAY_QUERY="46_1"},"ACTIVITY_7DAY_TAKE_AWARD",function(){return this.ACTIVITY_7DAY_TAKE_AWARD="46_2"},"ACTIVITY_7DAY_TAKE_AWARD_EX",function(){return this.ACTIVITY_7DAY_TAKE_AWARD_EX="46_3"}]),e}()),Ue=(function(){function e(){this.playerId=0,this.finishedIds=null,this.awardedIds=null,this.activing=null,this.awardsExts=null,this.begin=0}return o(e,"modules.activity7day.model.Activity7Day"),e}(),function(){function e(){}return o(e,"modules.skill.SkillNotification"),e.OPEN_SKILL_VIEW="OPEN_SKILL_VIEW",e.SKILL_DATA_INIT="SKILL_DATA_INIT",e.SKILL_LEVEL_UP="SKILL_DATA_LEVEL",e.SKILL_PASSIVE_INIT="SKILL_PASSIVE_INIT",e.SKILL_PASSIVE_LEVEL_UP="SKILL_PASSIVE_LEVEL_UP",e}(),function(){function e(){}return o(e,"modules.skill.controller.SkillCmd"),
e.LIST=1,e.LEARN=2,e.CHANGE_POSITION=3,e.LIST_PASSIVE=4,e.LEARN_PASSIVE=101,n(e,["SKILL_LIST",function(){return this.SKILL_LIST="4_1"},"SKILL_LEARN",function(){return this.SKILL_LEARN="4_2"},"SKILL_CHANGE_POSITION",function(){return this.SKILL_CHANGE_POSITION="4_3"},"SKILL_LIST_PASSIVE",function(){return this.SKILL_LIST_PASSIVE="4_4"},"PUSH_LEARN_PASSIVE",function(){return this.PUSH_LEARN_PASSIVE="4_101"}]),e}()),ze=(function(){function e(){}return o(e,"modules.skill.type.SkillEffectType"),e.DAMAGE=1e3,e.CLEAR=1001,e.ATTRIBUTE=1002,e.ATTRIBUTE_SP=1003,e.SUCK_HP=1004,e.NATURE_STAT=1005,e.SUCK_MP=1006,e.DESTROY_MP=1007,e.BADLY_DAMAGE=1008,e.SILENCE_SKILL=1009,e.PURIFY_CLEAR=1010,e.DOUBLE_REBACK=1015,e.PURIFY_CLEAR_ADD_ATTACK=1020,e.DEC_TARGET_DEFENSE=1021,e.INC_ATTACK_DAMAGE=1022,e.SUCK_DEFENSE_ADD=1023,e.CLEAR_TARGTE_BUF=1024,e.CLEAR_TARGTE_BUF_1=1025,e.DODGE_ADD_ATTACK=1026,e.DODGE_ADD_DAMAGE=1027,e.DAMAGE_EXT=1028,e.ARENA_POISON=2001,e.RECOVER_HP=2002,e.ARENA_BLIND=2003,e.RECOVER_MP=2004,e.STATIC_USE_SKILL=2e4,e.STATIC_MISS=20001,e.STATIC_IMMUNE=20002,e.STATIC_REBACK=20003,e.STATIC_CRITIC=20004,e.STATIC_CRITIC_CANCEL=20005,e.STATIC_RECOVER=2005,e.STATIC_DOT=2006,e.STATIC_HURT_SELF=2007,e.STATIC_SYNC_ACTTIME=2008,e.STATIC_LOSE_MP_SELF=2009,e.STATIC_HURT_SELF_DAMAGE=2010,e.STATIC_CRAZY=2011,e.STATIC_DOT_SP=2012,e.STATIC_REVIVE=2013,e.STATIC_RECOVER_SP=2014,e.STATIC_POISON_ADD_HP=2015,e}(),function(){function e(){}return o(e,"modules.skill.model.SkillRule"),e.getBaseSkills=function(e){switch(e){case 1:return[1001,1002,1003,1004];case 2:return[1001,1005,1006,1007];case 3:return[1001,1008,1009,1010];case 4:return[1001,1011,1012,1013];case 5:return[1001,1014,1015,1016]}return[1001]},e.getPassiveSkillNeedLevel=function(e){switch(e){case 1001:return 20;case 1002:case 1005:case 1008:case 1011:case 1014:return 40;case 1003:case 1006:case 1009:case 1012:case 1015:return 60;case 1004:case 1007:case 1010:case 1013:case 1016:return 80}return 100},e}()),We=function(){function e(e){this.id=0,this.level=0,this.id=e.id,this.level=e.level}return o(e,"modules.skill.model.SkillVO"),e}(),Ye=function(){function e(){}return o(e,"modules.smithy.controller.SmithyCmd"),e.EXCHANGE_GHOST=0,e.MIX_PROPS=1,e.MIX_PROPS_SP=2,e.MIX_EQUIP=3,e.DIANHUA_EQUIP=4,e.IDENTIFY_SP_PROP=5,e.BUILD_EQUIP_EX=6,e.ENCHANTMENT=7,e.REBUILD_EQUIP_EX=8,e.UPGRADE_GRAPH_SIMPLE=9,e.UPGRADE_GRAPH_STONE=10,e.REBUILD_EQUIP_EX_DELAY=11,e.REBUILD_CHOSE=12,e.MIX_PROPS_FAST=20,e.CHG_EX_EQUIP_NATURE=21,n(e,["SMITHY_EXCHANGE_GHOST",function(){return this.SMITHY_EXCHANGE_GHOST="101_0"},"SMITHY_HECHENG_COMMON",function(){return this.SMITHY_HECHENG_COMMON="101_1"},"SMITHY_HECHENG_COMMON_FAST",function(){return this.SMITHY_HECHENG_COMMON_FAST="101_20"},"SMITHY_HECHENG_SPECIAL",function(){return this.SMITHY_HECHENG_SPECIAL="101_2"},"SMITHY_EQUIP",function(){return this.SMITHY_EQUIP="101_3"},"SMITHY_EQUIP_DH",function(){return this.SMITHY_EQUIP_DH="101_4"},"SMITHY_IDENTIFY_SP_PROP",function(){return this.SMITHY_IDENTIFY_SP_PROP="101_5"},"SMITHY_BUILD_EQUIP_EX",function(){return this.SMITHY_BUILD_EQUIP_EX="101_6"},"SMITHY_ENCHANTMENT",function(){return this.SMITHY_ENCHANTMENT="101_7"},"SMITHY_REBUILD_EQUIP_EX",function(){return this.SMITHY_REBUILD_EQUIP_EX="101_8"},"SMITHY_REBUILD_EQUIP_EX_DELAY",function(){return this.SMITHY_REBUILD_EQUIP_EX_DELAY="101_11"},"SMITHY_REBUILD_CHOSE",function(){return this.SMITHY_REBUILD_CHOSE="101_12"},"SMITHY_UPGRADE_GRAPH_SIMPLE",function(){return this.SMITHY_UPGRADE_GRAPH_SIMPLE="101_9"},"SMITHY_UPGRADE_GRAPH_STONE",function(){return this.SMITHY_UPGRADE_GRAPH_STONE="101_10"},"SMITHY_CHG_EX_EQUIP_NATURE",function(){return this.SMITHY_CHG_EX_EQUIP_NATURE="101_21"}]),e}(),qe=function(){function e(){}return o(e,"modules.smithy.model.SmithyRule"),e.getUpgradeStone=function(e){var t=e.propConf.level,i=e.quality,n=0;return n=40>=t?5>i?145005:145006:50>=t?5>i?165005:165006:5>i?185007:185008,g.database.getData("props",n)},e.getUpgradeStoneNum=function(e){switch(e.quality){case 1:return 1;case 2:return 2;case 3:return 4;case 4:return 8;case 5:return 10}return 10},e}(),Ke=(function(){function e(){}return o(e,"modules.smithy.SmithyNotification"),e.OPEN_SMITHY_VIEW="OPEN_SMITHY_VIEW",e.OPEN_UPGRADE_GRAPH_VIEW="OPEN_UPGRADE_GRAPH_VIEW",e.SMITHY_SUCCESS="SMITHY_SUCCESS",e}(),function(){function e(){}return o(e,"modules.chat.controller.ChatCmd"),e.GAME_TOKEN=5,e.LOOK_ITEM=10,e.LOOK_PET=11,e.GAME_PUSH=100,e.GAME_PUSH_PROMPT=200,e.HEART_BEAT=0,e.CHECK_TOKEN=6,e.UPDATE_TOKEN=7,e.SEND=1,e.REPORT=8,e.NOT_CARE=9,e.LIST_LASTMSG=30,e.PUSH=101,n(e,["CHAT_GAME_TOKEN",function(){return this.CHAT_GAME_TOKEN="1_5"},"CHAT_LOOK_ITEM",function(){return this.CHAT_LOOK_ITEM="1_10"},"CHAT_LOOK_PET",function(){return this.CHAT_LOOK_PET="1_11"},"CHAT_GAME_PUSH",function(){return this.CHAT_GAME_PUSH="1_100"},"CHAT_GAME_PUSH_PROMPT",function(){return this.CHAT_GAME_PUSH_PROMPT="1_200"},"CHAT_CHECK_TOKEN",function(){return this.CHAT_CHECK_TOKEN="1_6"},"CHAT_UPDATE_TOKEN",function(){return this.CHAT_UPDATE_TOKEN="1_7"},"CHAT_SEND",function(){return this.CHAT_SEND="1_1"},"CHAT_REPORT",function(){return this.CHAT_REPORT="1_8"},"CHAT_NOT_CARE",function(){return this.CHAT_NOT_CARE="1_9"},"CHAT_PUSH",function(){return this.CHAT_PUSH="1_101"}]),e}()),Xe=function(){function e(){}return o(e,"modules.chat.model.ChanelType"),e.ALL=0,e.WORLD=1,e.ALLIANCE=2,e.TEAM=3,e.PRIVATE=4,e.SYSTEM=5,n(e,["CHANELS_ARR",function(){return this.CHANELS_ARR=[{name:"综合",color:"#ffffff"},{name:"世界",color:"#0084ff"},{name:"宗门",color:"#00dc24"},{name:"组队",color:"#E0FFFF"},{name:"私聊",color:"#c527ff"},{name:"系统",color:"#e70626"}]}]),e}(),Qe=(function(){function e(e){this.obj=null,this.obj=e}o(e,"modules.chat.model.ChatInfo");var t=e.prototype;return s(0,t,"channel",function(){return this.obj.channel}),s(0,t,"info",function(){return this.obj.info}),s(0,t,"playerName",function(){return this.obj.playerName}),s(0,t,"playerId",function(){return this.obj.playerId}),e}(),function(){function e(){this.ch=0,this.uid=NaN,this.name=null,this.vip=0,this.ext=null,this.msg=null}return o(e,"modules.chat.model.ChatRespose"),e}()),je=(function(){function e(){}return o(e,"modules.chat.ChatNotification"),e.SERVER_TRY_CONNECT="CHAT_SERVER_TRY_CONNECT",e.SERVER_CLOSE="CHAT_SERVER_CLOSE",e.SERVER_CONNECTED="CHAT_SERVER_CONNECTED",e.TOKEN_CHECKED="TOKEN_CHECKED",e.CHAT_PANEL_SHOW="CHAT_PANEL_SHOW",e.CHAT_INPUT_ITEM="CHAT_INPUT_ITEM",e.CHAT_LOOK_ITEM="CHAT_LOOK_ITEM",e.CHAT_LOOK_PET="CHAT_LOOK_PET",e.SHOW_MARQUEE="SHOW_CHAT_MARQUEE",e.RECEIVE_CHAT_PUSH="RECEIVE_CHAT_PUSH",e.ALERT_DONT_SEND_NUMBER="CHAT_DONT_SEND_NUMBER",e}(),function(){function e(){}return o(e,"modules.worldboss.controller.WorldBossCmd"),e.QUERY_INFO=1,e.QUERY_VIEW=2,e.FEED=3,e.CHG_OPEN=4,e.FIGHT_ONCE=5,e.AWARD_FEED=6,e.AWARD_FIGHT=7,e.PUSH_CHG_OPEN=8,e.PUSH_KILLED=9,e.FEED_TALISMAN=10,e.AWARD_FIGHT_DELAY=11,n(e,["WORLD_BOSS_QUERY_INFO",function(){return this.WORLD_BOSS_QUERY_INFO="63_1"},"WORLD_BOSS_QUERY_VIEW",function(){return this.WORLD_BOSS_QUERY_VIEW="63_2"},"WORLD_BOSS_FEED",function(){return this.WORLD_BOSS_FEED="63_3"},"WORLD_BOSS_CHG_OPEN",function(){return this.WORLD_BOSS_CHG_OPEN="63_4"},"WORLD_BOSS_FIGHT_ONCE",function(){return this.WORLD_BOSS_FIGHT_ONCE="63_5"},"WORLD_BOSS_AWARD_FEED",function(){return this.WORLD_BOSS_AWARD_FEED="63_6"},"WORLD_BOSS_AWARD_FIGHT",function(){return this.WORLD_BOSS_AWARD_FIGHT="63_7"},"WORLD_BOSS_FEED_TALISMAN",function(){return this.WORLD_BOSS_FEED_TALISMAN="63_10"},"WORLD_BOSS_AWARD_FIGHT_DELAY",function(){return this.WORLD_BOSS_AWARD_FIGHT_DELAY="63_11"},"WORLD_BOSS_PUSH_CHG_OPEN",function(){return this.WORLD_BOSS_PUSH_CHG_OPEN="63_8"},"WORLD_BOSS_PUSH_KILLED",function(){return this.WORLD_BOSS_PUSH_KILLED="63_9"}]),e}()),Ze=(function(){function e(){}return o(e,"modules.worldboss.WorldBossNotification"),e.OPEN_WORLD_BOSS_HOME="OPEN_WORLD_BOSS_HOME",e.OPEN_WORLD_BOSS_RANK="OPEN_WORLD_BOSS_RANK",e.OPEN_WORLD_BOSS_FEED="OPEN_WORLD_BOSS_FEED",e.OPEN_WORLD_BOSS_CHG="OPEN_WORLD_BOSS_CHG",e.RECEIVE_WORLD_BOSS_PLAYER="RECEIVE_WORLD_BOSS_PLAYER",e.RECEIVE_WORLD_BOSS_BASE="RECEIVE_WORLD_BOSS_BASE",e.RECEIVE_WORLD_BOSS_VIEW="RECEIVE_WORLD_BOSS_VIEW",e.RECEIVE_WORLD_BOSS_DAMAGE="RECEIVE_WORLD_BOSS_DAMAGE",e.RECEIVE_WORLD_BOSS_FIGHT_ERRO="RECEIVE_WORLD_BOSS_FIGHT_ERRO",e}(),function(){function e(){this.playerId=NaN,this.name=null,this.level=0,this.nature=0,this.value=0,this.rank=0}return o(e,"modules.worldboss.model.vo.WorldBossRank"),e}(),function(){function e(){this.playerId=1,this.fightCd=2,this.damage=3}return o(e,"modules.worldboss.model.vo.WorldBossDamage"),e}(),function(){function e(e){this.selfFeed=null,this.selfFight=null,this.top10feed=null,this.top10fight=null,this.freshTime=NaN,this.selfFeed=e.selfFeed,this.selfFight=e.selfFight,this.top10feed=e.top10feed,this.top10fight=e.top10fight,this.freshTime=e.freshTime;var t,i,n=!1;if(this.selfFeed){t=[],n=!1;var o;for(o in this.top10feed)i=this.top10feed[o],i.playerId==v.playerId?(t.push(this.selfFeed),n=!0):t.push(i);0==n&&t.push(this.selfFeed),this.top10feed=t}if(this.selfFight){t=[],n=!1;var o;for(o in this.top10fight)i=this.top10fight[o],i.playerId==v.playerId?(t.push(this.selfFight),n=!0):t.push(i);0==n&&t.push(this.selfFight),this.top10fight=t}}return o(e,"modules.worldboss.model.vo.WorldBossView"),e}()),Je=function(){function e(){this.id=0,this.culture=0,this.exp=0,this.feedPerson=0,this.fightPerson=0,this.openDate=NaN,this.openPlayer=NaN,this.setTime=NaN,this.killer=NaN,this.killTime=NaN,this.expExt=NaN}o(e,"modules.worldboss.model.vo.WorldBoss");var t=e.prototype;return t.update=function(e){this.id=e.id,this.culture=e.culture,this.exp=e.exp,this.feedPerson=e.feedPerson,this.fightPerson=e.fightPerson,this.openDate=e.openDate,this.openPlayer=e.openPlayer,this.setTime=e.setTime,this.killer=e.killer,this.killTime=e.killTime,this.expExt=e.expExt},t.isFull=function(){return this.exp+this.expExt>=1e6},t.canFeed=function(){return!(this.openDate>0&&g.clock.currentTime>this.openDate-12e4)},t.isOpen=function(){return this.openDate>0&&g.clock.currentTime>this.openDate},t.isKilled=function(){return this.killTime>0&&g.clock.currentTime>=this.killTime},e}(),$e=(function(){function e(){this.playerId=NaN,this.bossId=0,this.feed=0,this.feedRank=0,this.awardFeed=NaN,this.damage=0,this.damageRank=0,this.awardDamage=NaN,this.fightCd=NaN,this.isKiller=!1,this.lastAwardIndex=0}return o(e,"modules.worldboss.model.vo.PlayerWorldBoss"),e}(),function(){function e(){this.self=null,this.lastDamage=null}return o(e,"modules.worldboss.model.vo.WorldBossDamageWrap"),e}(),function(){function e(){}return o(e,"modules.worldboss.model.WorldBossRule"),e.queryFeedAwardStr=function(t,i,n){if(1>t)return 0>=n?"未参与喂养":"排名计算中";var o=e.dealRankAwardIndex(t,i),s=0,r=3>=o?"护灵符":"护灵符碎片";switch(o){case 1:s=3;break;case 2:s=2;break;case 3:s=1;break;case 4:s=70;break;case 5:s=50;break;case 6:s=30;break;case 7:s=20;break;case 8:s=15;break;default:s=10}return r+"*"+s},e.queryFightAwardStr=function(t,i,n){if(0>=n&&(t=-1),1>t&&n>0)return"排名计算中";var o=e.dealRankAwardIndex(t,i);return e.getFightAward(o)},e.getFightAward=function(e){var t=0;switch(e){case 1:t=80;break;case 2:t=70;break;case 3:t=65;break;case 4:t=60;break;case 5:t=55;break;case 6:t=50;break;case 7:t=45;break;case 8:t=40;break;default:t=35}return"【真龙血脉】*"+t},e.dealRankAwardIndex=function(e,t){return 3>=e?e:6>=e?4:10>=e?5:(100>t&&(t=100),20*t/100>=e?6:40*t/100>=e?7:75*t/100>=e?8:9)},e.queryPrice=function(e){var t=0;switch(e.quality){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=5;break;case 6:t=100;break;default:return 0}var i=e.propConf.level;return 40>i?t:60>i?2*t:80>i?3*t:4*t},e.queryPriceOfTalisman=function(e){var t=0;switch(e.talismanConf.grad){case 1:t=1500;break;case 2:t=3e3;break;case 3:t=5e3;break;case 4:t=8e3;break;case 5:t=13e3;break;case 6:t=2e4;break;case 7:t=3e4;break;default:t=2e4}return t+=vo["int"](t*(3*(e.quality-1)/10))},e.isInSetingTime=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours();switch(t){case 0:case 6:return!1;case 5:return 18>i;default:return!0}},e.checkFriPoorExp=function(e){if(e.isFull()||e.feedPerson<=0||e.feedPerson>=30)return 0;var t=ro.newDate(g.clock.currentTime),i=t.getDay();if(5!=i)return 0;var n=30*e.exp/e.feedPerson;return vo["int"](n)},e.checkPoorExpNeedMin=function(e){if(e.isFull()||e.feedPerson<=0||e.feedPerson>=30)return-1;var t=(1e6-e.expExt)*e.feedPerson/30-e.exp;return 0>t?t=0:Math.ceil(t)},e._OPEN_WORLD_BOSS_FUN=!1,e.OPEN_LEVEL=45,e.BOSS_EXP_FULL=1e6,e.SETTING_BOSS_CD=6e5,e.BOSS_LIVE_TIME=9e5,e.FIGHT_NEED_FEED=1e3,e}()),et=(function(){function e(){}return o(e,"modules.tower.TowerNotification"),e.RECEIVE_TOWER_INFO="RECEIVE_TOWER_INFO",e.SHOW_TOWER_SHOP_PAGE="SHOW_TOWER_SHOP_PAGE",e.SHOW_TOWER_SHOP_RECOVER_PAGE="SHOW_TOWER_SHOP_RECOVER_PAGE",e.OPEN_TOWER_RANK_PAGE="OPEN_TOWER_RANK_PAGE",e.RECEIVE_TOWER_RANK="RECEIVE_TOWER_RANK",e}(),function(){function e(){}return o(e,"modules.tower.controller.TowerCmd"),e.QUERY=1,e.SIGN_UP=2,e.ENTER=3,e.FIGHT=4,e.BUY_LIFE=5,e.EXCHANGE=6,e.QUERY_RANK=7,e.BUY_POINT=8,e.RECOVER_PROPS=9,e.PUSH_TOWER=100,n(e,["TOWER_QUERY",function(){return this.TOWER_QUERY="21_1"},"TOWER_SIGN_UP",function(){return this.TOWER_SIGN_UP="21_2"},"TOWER_ENTER",function(){return this.TOWER_ENTER="21_3"},"TOWER_FIGHT",function(){return this.TOWER_FIGHT="21_4"},"TOWER_BUY_LIFE",function(){return this.TOWER_BUY_LIFE="21_5"},"TOWER_EXCHANGE",function(){return this.TOWER_EXCHANGE="21_6"},"TOWER_QUERY_RANK",function(){return this.TOWER_QUERY_RANK="21_7"},"TOWER_BUY_POINT",function(){return this.TOWER_BUY_POINT="21_8"},"TOWER_RECOVER_PROPS",function(){return this.TOWER_RECOVER_PROPS="21_9"},"TOWER_PUSH_TOWER",function(){return this.TOWER_PUSH_TOWER="21_100"}]),e}()),it=function(){function e(){}return o(e,"modules.tower.model.TowerRule"),e.isSignUpTime=function(){var e=ro.newDate(g.clock.currentTime),t=e.getHours();return t>=0&&15>t},e.isRaceTime=function(){var e=ro.newDate(g.clock.currentTime),t=e.getHours();return t>=17&&22>=t},e.countTempCoin=function(e){for(var t=50,i=1;e>i;i++)i>10||(t+=5==i?10:10==i?16:3);return t},e.OPEN_LEVEL=35,e.BUY_LIFE_COST=100,e}(),nt=function(){function e(){this.obj=null}o(e,"modules.tower.model.TowerInfo");var t=e.prototype;return t.update=function(e){this.obj=e},t.isFail=function(){return this.failTime>0},s(0,t,"floor",function(){return this.obj.floor}),s(0,t,"failTime",function(){return this.obj.failTime}),s(0,t,"coin",function(){return this.obj.coin}),s(0,t,"state",function(){return this.obj.state}),s(0,t,"playerId",function(){return this.obj.id}),e.FREE=0,e.READY=1,e.RACE=2,e}(),ot=function(){function e(){}return o(e,"modules.activity.controller.ActivityLotteryCmd"),e.QUERY=1,e.DRAW=2,n(e,["ACTIVITY_LOTTERY_QUERY",function(){return this.ACTIVITY_LOTTERY_QUERY="49_1"},"ACTIVITY_LOTTERY_DRAW",function(){return this.ACTIVITY_LOTTERY_DRAW="49_2"}]),e}(),st=function(){function e(){}return o(e,"modules.activity.controller.ActivityCmd"),e.QUERY=1,e.SIGN=2,e.TAKE_AWARD=3,e.EXCHANGE_GUOQIN=4,e.TAKE_AWARD_ONCE_PAY=5,e.OPEN_RED_BOX=6,e.SIGN_TOTAL=7,n(e,["ACTIVITY_QUERY",function(){return this.ACTIVITY_QUERY="34_1"},"ACTIVITY_SIGN",function(){return this.ACTIVITY_SIGN="34_2"},"ACTIVITY_TAKE_AWARD",function(){return this.ACTIVITY_TAKE_AWARD="34_3"},"ACTIVITY_EXCHANGE_GUOQIN",function(){return this.ACTIVITY_EXCHANGE_GUOQIN="34_4"},"ACTIVITY_TAKE_AWARD_ONCE_PAY",function(){return this.ACTIVITY_TAKE_AWARD_ONCE_PAY="34_5"},"ACTIVITY_OPEN_RED_BOX",function(){return this.ACTIVITY_OPEN_RED_BOX="34_6"},"ACTIVITY_SIGN_TOTAL",function(){return this.ACTIVITY_SIGN_TOTAL="34_7"}]),e}(),rt=function(){function e(){this.playerId=NaN,this.rmb=0,this.awards=null}return o(e,"modules.activity.model.PlayerLottery"),e.getDrawNeedGold=function(e){switch(e){case 1:return 0;case 2:return 10;case 3:return 50;case 4:return 100;case 5:return 200;case 6:return 400;case 7:return 600;case 8:return 900;case 9:return 1400;case 10:return 2e3}return-1},n(e,["RATES",function(){return this.RATES=[{id:0,r:3500,info:"100万铜币",col:"#ffffff"},{id:1,r:730,info:"100元宝",col:"#fffc00"},{id:2,r:2500,info:"红天籁石碎片*20",col:"#e70626"},{id:3,r:1200,info:"紫天籁石碎片*5",col:"#c527ff"},{id:4,r:50,info:"灵宠资质丹*1",col:"#c527ff"},{id:5,r:800,info:"组队副本令*1",col:"#e70626"},{id:6,r:300,info:"红仙品天籁石*1",col:"#e70626"},{id:7,r:100,info:"紫仙品天籁石*1",col:"#c527ff"},{id:8,r:800,info:"森林探索令*1",col:"#e70626"},{id:9,r:20,info:"特殊称号：财神降临·兔",col:"#FFA500"}]}]),e}(),at=(function(){function e(){}return o(e,"modules.activity.model.TempActivityType"),e.NONE=0,e.DOUBLE_EXP=1,e.DOUBLE_DROP=2,e.DOUBLE_SP_DROP=3,e.DOUBLE_COLL_STARSTONE=4,e.FOREST_RABBIT=5,e.TEAM_DROP_YUANDAN_BOX=6,e.TEAM_DROP_GUOQIN=7,e.TEAM_DROP_MOONCAKE=8,e.ACT_ONCE_RMB=9,e.ACT_USE_GOLD=10,e.ACT_SIGN=11,e.MOSTER_SPRING=12,e.OPEN_RED_BOS=13,e.ACT_LOTTERY=14,e.PAY_SKY_STONE=15,e.ACT_SIGN_TOTAL=16,e.ACT_RESET_DOUBLE_PAY=17,e.FOREST_CHRISTMAS=19,e.ACT_RESET_DOUBLE_PAY_648=20,e.OTHER_ONLY_SHOW=1e3,e}(),function(){function e(e){this.lastSignTime=null,this.goldenTotal=0,this.buyTimeStone=NaN,this.forceOpenStone=NaN,this.oncePayGold=0,this.oncePayTime=NaN,this.redboxTime=NaN,this.signeds=new go,this.goldAwarded=new go,this.update(e)}o(e,"modules.activity.model.PlayerActivity");var t=e.prototype;return t.update=function(e){this.signeds.clear();var t,i;if(e.signDay&&""!=e.signDay){t=e.signDay.split("|");var n;for(n in t)i=t[n],this.signeds.add(vo["int"](i))}if(e.lastSignTime?this.lastSignTime=ro.newDate(e.lastSignTime):this.lastSignTime=null,this.goldAwarded.clear(),e.goldenAward&&""!=e.goldenAward){t=e.goldenAward.split("|");var n;for(n in t)i=t[n],this.goldAwarded.add(vo["int"](i))}this.goldenTotal=e.goldenTotal,this.buyTimeStone=e.buyTimeStone,this.oncePayGold=e.oncePayGold,this.oncePayTime=e.oncePayTime,this.redboxTime=e.redboxTime,this.forceOpenStone=e.forceOpenStone},t.getSignDayState=function(e,t){if(this.signeds.contain(e))return 2;var i=ro.newDate(g.clock.currentTime),n=t.begin,o=ro.dateDiff(i,n);return o==e?1:o>e?3:0},t.getSignDayIndex=function(e){var t=ro.newDate(g.clock.currentTime),i=e.begin,n=ro.dateDiff(t,i);return n-1},t.getGoldState=function(e){return this.goldAwarded.contain(e)?2:this.goldAwarded.contain(-e)?3:this.goldenTotal>=e?1:0},t.isActing=function(e){return!1},e}()),lt=function(){function e(e){this._tempTypes=null,this._begin=null,this._end=null,this._name=null,this._showDate=null,this._otherInfo=null,this.update(e)}o(e,"modules.activity.model.TempActivitySet");var t=e.prototype;return t.update=function(e){if(this._tempTypes=null,this._begin=null,this._end=null,this._name="",this._showDate=null,this._otherInfo="",null!=e&&""!=e){var t,i;if(this._tempTypes=e.split("|"),this._tempTypes.length>1&&(i=this._tempTypes[1],t=i.split("_"),t.length>=2&&(this._name=t[0],this._showDate=ro.parse(t[1]))),this._tempTypes.length>=3&&(this._otherInfo=this._tempTypes[2]),i=this._tempTypes[0],t=i.split("_"),t.length>=3){this._begin=ro.parse(t[0]),this._end=ro.parse(t[1]),this._tempTypes=[];for(var n=2;n<t.length;n++)this._tempTypes.push(vo["int"](t[n]))}null!=this._begin&&null==this._showDate&&(this._showDate=this._begin),null!=this._name&&""!=this._name||(this._name="临时活动")}},t.showTime=function(){return null!=this._showDate&&null!=this._end&&g.clock.currentTime>this._showDate.getTime()&&g.clock.currentTime<this._end.getTime()},t.inTime=function(){return null!=this._begin&&null!=this._end&&g.clock.currentTime>this._begin.getTime()&&g.clock.currentTime<this._end.getTime()},t.lotteryOpen=function(){return null!=this._begin&&null!=this._end&&g.clock.currentTime>this._begin.getTime()+432e6&&g.clock.currentTime<this._end.getTime()},t.getName=function(){return this._name},t.getBeginDate=function(){return ro.parseSimpleChinese(this._begin)},t.getEndDate=function(){return ro.parseSimpleChinese(this._end)},t.getEndTimestamp=function(){return this._end?this._end.getTime():0},t.getOpenTypes=function(){return this._tempTypes},t.isOpen=function(e){return-1!=this._tempTypes.indexOf(e)},t.getOtherInfo=function(){return this._otherInfo},s(0,t,"begin",function(){return this._begin}),e}(),ht=function(){function e(){}return o(e,"modules.activity.model.TempActiveCfg"),e.isActiveTime=function(){return g.clock.currentTime>=16129728e5&&g.clock.currentTime<161366394e4},e.isMarketPercent=function(){return e.isActiveTime()},e}(),ct=(function(){function e(){}return o(e,"modules.activity.ActivityNotification"),e.SHOW_ACTIVITY_PAGE="SHOW_ACTIVITY_PAGE",e.SHOW_ACTIVITY_LIMIT_PAGE="SHOW_ACTIVITY_LIMIT_PAGE",e.RECEIVE_ACTIVITY_INFO="RECEIVE_ACTIVITY_INFO",e.RECEIVE_ACTIVITY_LOTTERY_INFO="RECEIVE_ACTIVITY_LOTTERY_INFO",e}(),function(){function e(){}return o(e,"modules.mail.MailNotification"),e.RECEIVE_MAIL_LIST="RECEIVE_MAIL_LIST",e.RECEIVE_MAIL_DETAIL="RECEIVE_MAIL_DETAIL",e}(),function(){function e(){}return o(e,"modules.mail.controller.MailCmd"),e.LIST_SUMMARY=1,e.QUERY_DETAIL=2,e.READ=3,e.DEL=4,e.READ_ALL=5,e.DELETE_ALL=6,e.PUSH_SUMMARY=100,n(e,["MAIL_LIST_SUMMARY",function(){return this.MAIL_LIST_SUMMARY="51_1"},"MAIL_QUERY_DETAIL",function(){return this.MAIL_QUERY_DETAIL="51_2"},"MAIL_READ",function(){return this.MAIL_READ="51_3"},"MAIL_DEL",function(){return this.MAIL_DEL="51_4"},"MAIL_READ_ALL",function(){return this.MAIL_READ_ALL="51_5"},"MAIL_DEL_ALL",function(){return this.MAIL_DEL_ALL="51_6"},"MAIL_PUSH_SUMMARY",function(){return this.MAIL_PUSH_SUMMARY="51_100"}]),e}()),ut=(function(){function e(){this.id=0,this.title=null,this.state=0,this.sendtime=NaN,this.endtime=NaN}return o(e,"modules.mail.model.MailSummary"),e.STATE_NOT_READ=0,e.STATE_READED=1,e.STATE_DELETED=2,e}(),function(){function e(e){this.id=0,this.type=0,this.playerIds=null,this.title=null,this.content=null,this.awards=null,this.sendtime=0,this._awardHtml=null,this.id=e.id,this.type=e.type,this.playerIds=e.playerIds,this.title=e.title,this.content=e.content,this.awards=e.awards,this.sendtime=e.sendtime}o(e,"modules.mail.model.MailDetail");var t=e.prototype;return s(0,t,"awardHtml",function(){if(null==this._awardHtml){this._awardHtml="";for(var e=this.awards.split("|"),t=0;t<e.length;t++){var i=e[t].split("_");if(3==i.length){var n=vo["int"](i[0]),o=vo["int"](i[1]),s=vo["int"](i[2]);switch(n){case 3:this._awardHtml=this._awardHtml+"<font color='#fffc00'>"+s+"元宝</font><br>";break;case 2:this._awardHtml=this._awardHtml+"<font color='#ffffff'>"+s+"铜币</font><br>";break;case 0:var r=g.database.getData("props",o);r?this._awardHtml=this._awardHtml+"<font color='"+N.getColor(r.quality)+"'>【"+r.name+"】*"+s+" </font><br>":this._awardHtml="物品有误,请联系管理员："+o;break;case 10:var a=g.database.getData("achieve",o);a?this._awardHtml=this._awardHtml+"<font color='"+N.getColor(s)+"'>称号【"+a.name+"】 </font><br>":this._awardHtml="称号有误,请联系管理员："+o}}e[t]=i}}return this._awardHtml}),e}()),dt=(function(){function e(){}return o(e,"modules.shop.ShopNotification"),e.SHOW_SHOP_PAGE="SHOW_SHOP_PAGE",e.RECEIVE_SHOP_INFO="RECEIVE_SHOP_INFO",e}(),function(){function e(){}return o(e,"modules.shop.controller.ShopCmd"),e.QUERY=1,e.BUY=2,n(e,["SHOP_QUERY",function(){return this.SHOP_QUERY="20_1"},"SHOP_BUY",function(){return this.SHOP_BUY="20_2"}]),e}()),pt=function(){function e(e,t,i){this.id=0,this.count=0,this.gold=0,this.id=e,this.count=t,this.gold=i}return o(e,"modules.shop.model.ShopItem"),e}(),ft=function(){function e(){}return o(e,"modules.bone.controller.BoneCmd"),e.QUERY=1,e.FEED=2,e.UPGRADE=3,e.DRUG=4,n(e,["BONE_QUERY",function(){return this.BONE_QUERY="11_1"},"BONE_FEED",function(){return this.BONE_FEED="11_2"},"BONE_UPGRADE",function(){return this.BONE_UPGRADE="11_3"},"BONE_DRUG",function(){return this.BONE_DRUG="11_4"}]),e}(),_t=(function(){function e(){}return o(e,"modules.bone.BoneNotification"),e.SHOW_BONE_PAGE="SHOW_BONE_PAGE",e.RECEIVE_BONE_INFO="RECEIVE_BONE_INFO",e}(),function(){function e(){this.obj=null,this.level=0,this.name=null,this.currentAttrs=null,this.nextAttrsAdd=null,this.nextFoodArr=null,this.nextSilver=0,this.variation=0,this.currentAttrs=new uo,this.nextAttrsAdd=new uo,this.nextFoodArr=new Array}o(e,"modules.bone.model.PlayerBone");var t=e.prototype;return t.update=function(e,t){this.obj=e,this.variation=e.variation,this.currentAttrs.clear(),this.nextAttrsAdd.clear(),this.nextFoodArr.length=0,this.nextSilver=0;for(var i=1;i<=this.boneId&&81>i;i++){var n=i;this.dealAttributeTemp(n,this.currentAttrs,t)}if(this.boneId+1<=80){this.dealAttributeTemp(this.boneId+1,this.nextAttrsAdd,t);var o=g.database.getData("boneUpgrade",this.boneId+1);this.nextSilver=o.costSilver;var s,r=o.needProps.split("|");for(var a in r){s=r[a];var l=s.split("_"),h=vo["int"](l[0]),c=vo["int"](l[1]),u=vo["int"](l[2]),d=vo["int"](l[3]),p=new gt;switch(h){case-2:p.quality=3;break;case-1:p.quality=4;break;case 1:p.quality=5;break;case 2:p.quality=9;break;case 3:p.quality=6;break;case 4:p.quality=10}p.matchNature=0!=c,p.level=u,p.count=d,this.nextFoodArr.push(p)}}},t.dealAttributeTemp=function(e,t,i){var n=e%9,o=null;switch(n){case 1:case 5:this.addValue(t,1201,8>=e?15:30);break;case 2:case 6:this.addValue(t,1202,8>=e?5:15);break;case 3:case 7:this.addValue(t,1106,8>=e?40:120);break;case 4:case 8:this.addValue(t,1107,8>=e?15:50);break;case 0:var s=Math.floor(e/9);if(o=g.database.getData("boneAttribute",s)){var r;switch(i){case 1:r=o.metalAttr.split("_");break;case 2:r=o.woodAttr.split("_");break;case 3:r=o.waterAttr.split("_");break;case 4:r=o.fireAttr.split("_");break;case 5:r=o.earthAttr.split("_")}this.addValue(t,vo["int"](r[0]),vo["int"](r[1]))}}},t.addValue=function(e,t,i){var n=e.get(t);n||(n=0),e.set(t,n+i)},s(0,t,"propTwoNum",function(){return this.obj.propTwoNum}),s(0,t,"propThreeNum",function(){return this.obj.propThreeNum}),s(0,t,"propOneNum",function(){return this.obj.propOneNum}),s(0,t,"boneId",function(){return this.obj.id}),e}()),mt=function(){function e(){}return o(e,"modules.bone.model.BoneRule"),e.getPercentAdd=function(e){return 5*e},e.getSpColor=function(e){return N.getColor(vo["int"]((e+1)/2)+1)},e.needSpDrug=function(e){return 1==e?1:e>1&&10>=e?3*(e-1):-1},e.BONE_SP_DRUG_ID=191002,n(e,["nameArr",function(){return this.nameArr=["凡品","珍品","极品","灵品","地品","天品","绝品","玄品","仙品"]},"colorArr",function(){return this.colorArr=["#ffffff","#0084ff","#00dc24","#00dc24","#fffc00","#fffc00","#e70626","#e70626","#c527ff"]},"clzArr",function(){return this.clzArr=["一阶","二阶","三阶","四阶","五阶","六阶","七阶","八阶","九阶"]}]),e}(),gt=function(){function e(){this.quality=0,this.matchNature=!1,this.level=0,this.count=0}return o(e,"modules.bone.model.BoneFood"),e}(),vt=function(){function e(){}return o(e,"modules.alliance.controller.AllianceConst"),e.getInfo=function(t){switch(t){case e.HAS_ALLIANCE_YET:return"宗门已存在";case e.NAME_NOT_USABLE:return"名字不可用";case e.ALLIANCE_MEMBER_FULL:return"宗门成员已满";case e.NOT_HAS_ALLIANCE:return"宗门不存在";case e.NOT_HAS_PERMISSION:return"";case e.ALLIANCE_CLOSED:return"已关闭申请";case e.ALLIANCE_APPLY_FULL:return"申请列表已满";case e.ALLIANCE_APPLY_OVER:return"申请已提交等审批";case e.ALLIANCE_APPLY_REG:return"申请已提交等审批";case e.ALLIANCE_APPLY_NOT_FOUND:return"申请已失效";case e.PLAYER_NOT_POWER:return"权限不足";case e.VILIDA_THE_SAME:return"设置已生效";case e.MASTER_CAN_NOT_QUIT:return"宗主不能直接退";case e.TODAY_DONATED_YET:return"今天已进贡过了";case e.BUILDING_LEVEL_FULL:return"已是满级了";case e.RESOURCE_NOT_ENOUGH:return"资源不足";case e.BUILDING_LEVEL_LIMIT:return"等级受限,请先升级宗门";case e.DONATE_NOT_ENOUGH:return"贡献不足";case e.TITLE_PERSON_FULL:return"职位人数已满";case e.DEGRADE_TIME_LIMIT:return"任职7天后才能降职";case e.PLAYER_LEVEL_NOT_ENOUGH:return"您的等级未达到该宗门要求等级";case e.ALCA_SIGN_UP:return"参加宗门战期间，暂时不可执行此操作";case e.ALCA_MEMBER_PRIMED:return"成员已上阵";case e.ALCA_DRUGED_FULL:return"鼓舞已达上限";case e.ALCA_TEAM_GROUP_ERRO:return"队伍分组错误";case e.ALCA_FIGHT_TIME_OVER:return"进攻次数已用完";case e.ALCA_DEFENSE_OVER:return"防守失败";case e.ALCA_MEMEBER_NOT_ENOUGH:return"宗门成员不足10人";case e.ALCA_TEAM_NOT_FOUND:return"未能找到目标队伍";case e.COOL_TIMING:return"当前时间不可操作";default:return"宗门状态码:"+t}},e.PLAYER_LEVEL_NOT_ENOUGH=-12,e.COOL_TIMING=-37,e.HAS_ALLIANCE_YET=-1e3,e.NAME_NOT_USABLE=-1001,e.ALLIANCE_MEMBER_FULL=-1002,e.NOT_HAS_ALLIANCE=-1003,e.NOT_HAS_PERMISSION=-1004,e.ALLIANCE_CLOSED=-1005,e.ALLIANCE_APPLY_FULL=-10006,e.ALLIANCE_APPLY_OVER=-10007,e.ALLIANCE_APPLY_REG=-10008,e.ALLIANCE_APPLY_NOT_FOUND=-10009,e.PLAYER_NOT_POWER=-10010,e.VILIDA_THE_SAME=-10011,e.MASTER_CAN_NOT_QUIT=-10012,e.TODAY_DONATED_YET=-10013,e.BUILDING_LEVEL_FULL=-10014,e.RESOURCE_NOT_ENOUGH=-10015,e.BUILDING_LEVEL_LIMIT=-10016,e.DONATE_NOT_ENOUGH=-10017,e.TITLE_PERSON_FULL=-10018,e.DEGRADE_TIME_LIMIT=-10019,e.ALCA_SIGN_UP=-100022,e.ALCA_MEMBER_PRIMED=-10023,e.ALCA_DRUGED_FULL=-10024,e.ALCA_TEAM_GROUP_ERRO=-10025,e.ALCA_FIGHT_TIME_OVER=-10026,e.ALCA_DEFENSE_OVER=-10027,e.ALCA_MEMEBER_NOT_ENOUGH=-10028,e.ALCA_TEAM_NOT_FOUND=-10029,e}(),yt=function(){function e(){}return o(e,"modules.alliance.controller.AlcTaskCmd"),e.QUERY=1,e.TRY_STEAL=2,e.TRY_FINISH=3,e.FAST_FINISH=4,e.DROP=5,e.FRESH_BY_GOLD=6,e.LIST_LOGS=10,n(e,["ALC_TASK_QUERY",function(){return this.ALC_TASK_QUERY="37_1"},"ALC_TASK_TRY_STEAL",function(){return this.ALC_TASK_TRY_STEAL="37_2"},"ALC_TASK_TYR_FINISH",function(){return this.ALC_TASK_TYR_FINISH="37_3"},"ALC_TASK_FAST_FINISH",function(){return this.ALC_TASK_FAST_FINISH="37_4"},"ALC_TASK_DROP",function(){return this.ALC_TASK_DROP="37_5"},"ALC_TASK_FRESH_BY_GOLD",function(){return this.ALC_TASK_FRESH_BY_GOLD="37_6"},"ALC_TASK_LIST_LOGS",function(){return this.ALC_TASK_LIST_LOGS="37_10"}]),e}(),bt=function(){function e(){}return o(e,"modules.alliance.controller.AllianceCmd"),e.QUERY_PLAYER_ALLIANCE=0,e.QUERY_ALLIANCE=1,e.CREATE=2,e.JOIN=3,e.QUIT=4,e.LIST=5,e.LIST_MEMBERS=6,e.DISBAND=911,e.QUERY_RANK=20,e.QUERY_DONATE_LOGS=21,e.QUERY_ALLIANCE_LOGS=22,e.LOOK_MEMBERS=23,e.LIST_APPLYS=7,e.DISMIS_MEMBER=8,e.CHG_VALID_STATE=9,e.EXAMINE_APPLY=10,e.APPOINT_TITLE=11,e.ABDICATE=12,e.DONATE_GOLDEN=13,e.DONATE_PROP=14,e.LEVE_UP=15,e.LEARN_BOOK=16,e.UPGRADE_SKILL=17,e.CHG_BUILDING_LOCK=18,e.CHG_NOTICE=19,e.PUSH_DISMISS_MEMBER=100,e.PUSH_JOIN_MEMBER=101,e.PUSH_QUIT=102,e.PUSH_VALID_STATE=103,e.PUSH_ABDICATE=104,e.PUSH_BUILDING_LEVEL=105,e.PUSH_APOINT_TITLE=106,e.PUSH_DONATE_CHG_RES=107,e.PUSH_PUSH_DISBAND=108,e.PUSH_APPLY_SIZE=109,n(e,["ALLIANCE_QUERY_PLAYER_ALLIANCE",function(){return this.ALLIANCE_QUERY_PLAYER_ALLIANCE="36_0"},"ALLIANCE_QUERY_ALLIANCE",function(){return this.ALLIANCE_QUERY_ALLIANCE="36_1"},"ALLIANCE_CREATE",function(){return this.ALLIANCE_CREATE="36_2"},"ALLIANCE_JOIN",function(){return this.ALLIANCE_JOIN="36_3"},"ALLIANCE_QUIT",function(){return this.ALLIANCE_QUIT="36_4"},"ALLIANCE_DISBAND",function(){return this.ALLIANCE_DISBAND="36_911"},"ALLIANCE_QUERY_RANK",function(){return this.ALLIANCE_QUERY_RANK="36_20"},"ALLIANCE_QUERY_DONATE_LOGS",function(){return this.ALLIANCE_QUERY_DONATE_LOGS="36_21"},"ALLIANCE_QUERY_ALLIANCE_LOGS",function(){return this.ALLIANCE_QUERY_ALLIANCE_LOGS="36_22"},"ALLIANCE_LOOK_MEMBERS",function(){return this.ALLIANCE_LOOK_MEMBERS="36_23"},"ALLIANCE_LIST",function(){return this.ALLIANCE_LIST="36_5"},"ALLIANCE_LIST_MEMBERS",function(){return this.ALLIANCE_LIST_MEMBERS="36_6"},"ALLIANCE_LIST_APPLYS",function(){return this.ALLIANCE_LIST_APPLYS="36_7"},"ALLIANCE_DISMIS_MEMBER",function(){return this.ALLIANCE_DISMIS_MEMBER="36_8"},"ALLIANCE_CHG_VALID_STATE",function(){return this.ALLIANCE_CHG_VALID_STATE="36_9"},"ALLIANCE_EXAMINE_APPLY",function(){return this.ALLIANCE_EXAMINE_APPLY="36_10"},"ALLIANCE_APPOINT_TITLE",function(){return this.ALLIANCE_APPOINT_TITLE="36_11"},"ALLIANCE_ABDICATE",function(){return this.ALLIANCE_ABDICATE="36_12"},"ALLIANCE_DONATE_GOLDEN",function(){return this.ALLIANCE_DONATE_GOLDEN="36_13"},"ALLIANCE_DONATE_PROP",function(){return this.ALLIANCE_DONATE_PROP="36_14"},"ALLIANCE_LEVE_UP",function(){return this.ALLIANCE_LEVE_UP="36_15"},"ALLIANCE_LEARN_BOOK",function(){return this.ALLIANCE_LEARN_BOOK="36_16"},"ALLIANCE_UPGRADE_SKILL",function(){return this.ALLIANCE_UPGRADE_SKILL="36_17"},"ALLIANCE_CHG_NOTICE",function(){return this.ALLIANCE_CHG_NOTICE="36_19"},"ALLIANCE_PUSH_DISMISS_MEMBER",function(){
return this.ALLIANCE_PUSH_DISMISS_MEMBER="36_100"},"ALLIANCE_PUSH_JOIN_MEMBER",function(){return this.ALLIANCE_PUSH_JOIN_MEMBER="36_101"},"ALLIANCE_PUSH_QUIT",function(){return this.ALLIANCE_PUSH_QUIT="36_102"},"ALLIANCE_PUSH_VALID_STATE",function(){return this.ALLIANCE_PUSH_VALID_STATE="36_103"},"ALLIANCE_PUSH_ABDICATE",function(){return this.ALLIANCE_PUSH_ABDICATE="36_104"},"ALLIANCE_PUSH_BUILDING_LEVEL",function(){return this.ALLIANCE_PUSH_BUILDING_LEVEL="36_105"},"ALLIANCE_PUSH_APOINT_TITLE",function(){return this.ALLIANCE_PUSH_APOINT_TITLE="36_106"},"ALLIANCE_PUSH_DONATE_CHG_RES",function(){return this.ALLIANCE_PUSH_DONATE_CHG_RES="36_107"},"ALLIANCE_PUSH_PUSH_DISBAND",function(){return this.ALLIANCE_PUSH_PUSH_DISBAND="36_108"},"ALLIANCE_PUSH_APPLY_SIZE",function(){return this.ALLIANCE_PUSH_APPLY_SIZE="36_109"}]),e}(),Et=(function(){function e(){}return o(e,"modules.alliance.type.AlcTaskType"),e.STEAL=0,e.TALISMAN=1,e.METAL_SP_RED=2,e.GRAHP_PAPE=3,e.EQUIP_GHOST=4,e.HAND_BOOK=5,e.BLOOD=6,e.SILVER=7,e.DROP_PET=8,e.METAL_YELLOW_ANY=9,e.METAL_COMMON_RADOM=10,e.METAL_SP_RADOM=11,e.EQUIP_ANY=12,e}(),function(){function e(){}return o(e,"modules.alliance.type.BuildingType"),e.ALLIANCE=0,e.BOOKS=1,e.SHOP=3,e.TASK=4,e.MINE=5,e}(),function(){function e(e,t,i){this._ordinal=0,this._name=null,this._donateRate=0,this._ordinal=e,this._name=t,this._donateRate=i}o(e,"modules.alliance.type.AllianceTitle");var t=e.prototype;return s(0,t,"donateRate",function(){return this._donateRate}),s(0,t,"color",function(){switch(this._ordinal){case 0:return"#ffffff";case 1:return"#0084ff";case 2:return"#00dc24";case 3:return"#fffc00";case 4:return"#e70626";case 5:return"#c527ff";default:return"#ffffff"}}),s(0,t,"name",function(){return this._name}),s(0,t,"ordinal",function(){return this._ordinal}),e.getTitle=function(t){switch(t){case 0:return e.NAMAL;case 1:return e.MEMBER;case 2:return e.PROLAW;case 3:return e.ELDER;case 4:return e.DEPUTYMASTER;case 5:return e.MASTER}return null},e.getTitleByName=function(t){switch(t){case e.NAMAL.name:return e.NAMAL;case e.MEMBER.name:return e.MEMBER;case e.PROLAW.name:return e.PROLAW;case e.ELDER.name:return e.ELDER;case e.DEPUTYMASTER.name:return e.DEPUTYMASTER;case e.MASTER.name:return e.MASTER}return null},e.canKick=function(t,i){return t<e.DEPUTYMASTER.ordinal?!1:t>i},e.canTile=function(t,i){return t<e.ELDER.ordinal?!1:i<e.MEMBER.ordinal?!1:t==e.MASTER.ordinal?!0:t>i+1},e.canChgApplySet=function(t){return t>=e.ELDER.ordinal},e.canDealApply=function(t){return t>e.MEMBER.ordinal},e.canLevelUp=function(t){return t>=e.PROLAW.ordinal},n(e,["NAMAL",function(){return this.NAMAL=new e(0,"成员",1e4)},"MEMBER",function(){return this.MEMBER=new e(1,"精英",10500)},"PROLAW",function(){return this.PROLAW=new e(2,"护法",10700)},"ELDER",function(){return this.ELDER=new e(3,"长老",10800)},"DEPUTYMASTER",function(){return this.DEPUTYMASTER=new e(4,"副宗主",11e3)},"MASTER",function(){return this.MASTER=new e(5,"宗主",11e3)},"ALL_TITLES",function(){return this.ALL_TITLES=[e.NAMAL,e.MEMBER,e.PROLAW,e.ELDER,e.DEPUTYMASTER,e.MASTER]}]),e}()),xt=(function(){function e(){}return o(e,"modules.alliance.type.OptionType"),e.DONATE_GOLDEN=0,e.DONATE_PROP=1,e.DONATE_SKILL=2,e.ALLIANCE_JOIN=3,e.ALLIANCE_QUIT=4,e.ALLIANCE_CHG_STATE=5,e.ALLIANCE_CHG_TITLE=6,e.ALLIANCE_ABDICATE=7,e.ALLIANCE_UPGREADE_MAIN=8,e.ALLIANCE_UPGREADE_BOOK=9,e.ALLIANCE_DISBAND=10,e.ALLIANCE_UPGREADE_TASK=11,e.ALLIANCE_ABDICATE_AUTO=20,e.ALCA_FIGHT_AWARD=21,e.ALC_BOSS=22,e.ALLIANCE_UPGREADE_MINE=23,e.DONATE_PROP_MINE=24,e.DONATE_IRON_MINE=25,e}(),function(){function e(){}return o(e,"modules.alliance.AllianceNotification"),e.OPEN_ALLIANCE_VIEW="OPEN_ALLIANCE_VIEW",e.RECIVE_ALLIANCE="RECIVE_ALLIANCE",e.RECIVE_PLAYER_ALLIANCE="RECIVE_PLAYER_ALLIANCE",e.RECIVE_MEMBER_LIST="RECIVE_ALC_MEMBER_LIST",e.RECIVE_APPLY_LIST="RECIVE_ALC_APPLY_LIST",e.RECIVE_ALLIANCE_LIST="RECIVE_ALLIANCE_LIST",e.RECIVE_ALLIANCE_RANK_LIST="RECIVE_ALLIANCE_RANK_LIST",e.RECIVE_ALLIANCE_LOGS="RECIVE_ALLIANCE_LOGS",e.RECIVE_ALLIANCE_DONATE_LOGS="RECIVE_ALLIANCE_DONATE_LOGS",e.RECIVE_ALLIANCE_TASK="RECIVE_ALLIANCE_TASK",e.RECIVE_ALLIANCE_TASK_LOGS="RECIVE_ALLIANCE_TASK_LOGS",e.RECIVE_APPLY_SIZE="RECIVE_APPLY_SIZE",e.RECIVE_LOOK_MEMEBERS="RECIVE_ALC_LOOK_MEMEBERS",e.OPEN_ALC_APPLY="OPEN_ALC_APPLY",e.OPEN_ALC_BUILDING="OPEN_ALC_BUILDING",e.OPEN_ALC_DONATE="OPEN_ALC_DONATE",e.OPEN_ALC_MEMBER="OPEN_ALC_MEMBER",e.OPEN_ALC_RANK="OPEN_ALC_RANK",e.OPEN_ALC_LOGS="OPEN_ALC_LOGS",e.OPEN_ALC_SKILLS="OPEN_ALC_SKILLS",e.OPEN_ALC_TASK="OPEN_ALC_TASK",e.OPEN_ALC_NOTICE="OPEN_ALC_NOTICE",e.OPEN_ALC_LOOK_MEMBER="OPEN_ALC_LOOK_MEMBER",e.PUSH_MEMBER_CHANGED="PUSH_ALC_MEMBER_CHANGED",e.PUSH_ALLIANCE_CHANGED="PUSH_ALC_ALLIANCE_CHANGED",e}(),function(){function e(){this.pager=new oo}o(e,"modules.alliance.model.vo.AlliancePager");var t=e.prototype;return t.update=function(e){this.pager.update(e.pager),null==this.pager.recoards?this.pager.recoards=[]:this.pager.recoards.length=0;var t;for(var i in e.list)t=e.list[i],this.pager.recoards.push(new At(t))},e}()),St=function(){function e(){this.pager=new oo}o(e,"modules.alliance.model.vo.MemberPager");var t=e.prototype;return t.update=function(e){this.pager.update(e.pager),null==this.pager.recoards?this.pager.recoards=[]:this.pager.recoards.length=0;var t;for(var i in e.list)t=e.list[i],this.pager.recoards.push(new Rt(t));this.pager.recoards.sort(this.compareFunction)},t.compareFunction=function(e,t){return e.title>t.title?-1:e.title<t.title?1:t.donate-e.donate},t.compareFunctionToday=function(e,t){return e.todayDonate>t.todayDonate?-1:e.todayDonate<t.todayDonate?1:t.title-e.title},e}(),wt=function(){function e(){this.pager=new oo}o(e,"modules.alliance.model.vo.ApplyPager");var t=e.prototype;return t.update=function(e){this.pager.update(e.pager),null==this.pager.recoards?this.pager.recoards=[]:this.pager.recoards.length=0;var t;for(var i in e.list)t=e.list[i],this.pager.recoards.push(new It(t))},e}(),Ct=function(){function e(){this._obj=null}o(e,"modules.alliance.model.AlcOption");var t=e.prototype;return t.update=function(e){return this._obj=e,this},s(0,t,"value2",function(){return this._obj.value2}),s(0,t,"value",function(){return this._obj.value}),s(0,t,"targetId",function(){return this._obj.targetId}),s(0,t,"optionId",function(){return this._obj.optionId}),e.getIns=function(){return null==e._ins&&(e._ins=new e),e._ins},e._ins=null,e}(),Tt=function(){function e(e){this._obj=null,this._lastQuality=0,this.update(e)}o(e,"modules.alliance.model.AllianceTask");var t=e.prototype;return t.update=function(e){this._obj&&(this._lastQuality=this._obj.quality),this._obj=e},t.getName=function(){return e.getTaskName(this.type)},t.getAward=function(){return e.getTaskAward(this.quality)},t.getInfo=function(){return e.getTaskInfo(this.type,this.extValue,this.stealName)},s(0,t,"lastQuality",function(){return this._lastQuality}),s(0,t,"freshTime",function(){return this._obj.freshTime}),s(0,t,"finishCount",function(){return this._obj.finishCount}),s(0,t,"stealName",function(){return this._obj.stealName}),s(0,t,"type",function(){return this._obj.type}),s(0,t,"extValue",function(){return this._obj.extValue}),s(0,t,"quality",function(){return this._obj.quality}),s(0,t,"playerId",function(){return this._obj.playerId}),e.getTaskName=function(e){switch(e){case 0:return"偷取资源";case 1:return"交纳法宝";case 2:case 9:case 10:case 11:return"交纳材料";case 3:return"交纳图纸";case 4:return"交纳熔灵";case 5:return"交纳器灵";case 6:return"交纳血脉";case 7:return"扶危济困";case 8:return"日行一善";case 12:return"缴纳装备"}return""},e.getTaskAward=function(e){switch(e){case 1:return 20;case 2:return 30;case 3:return 50;case 4:return 80;case 5:return 120;case 6:return 200}return 20},e.getTaskInfo=function(e,t,i){switch(e){case 0:return"因本宗资源匮乏，特派门下弟子前往<font color='#e70626'>"+i+"宗</font>偷取资源，请注意安全";case 1:return"宗门需要炼制高阶法宝，故向宗门弟子征收<font color='#00dc24'>法宝</font>用于炼制";case 2:return"宗门炼制高阶装备，需要红色以上<font color='#e70626'>特殊材料</font>一个";case 9:return"宗门炼制高阶装备，需要黄色以上<font color='#fffc00'>任意材料</font>一个";case 3:return"宗门炼制高阶装备，需任意<font color='#00dc24'>图纸</font>一张";case 4:return"宗门炼制高阶装备，需任意<font color='#00dc24'>熔灵</font>一个";case 5:return"宗门炼制高阶装备，需任意<font color='#00dc24'>器灵</font>一个";case 6:return"喂养宗门灵兽，需要任意<font color='#00dc24'>血脉</font>一个";case 7:return"宗门发展缺少铜币，特征收<font color='#fffc00'>"+3e3*Ng.userVO.getValue(1006)+"铜币</font>";case 8:return"放生一只<font color='#0084ff'>蓝色品质</font>以上的灵宠";case 10:return"宗门炼制装备，需要任意品质<font color='"+R.getColor(t)+"'>【"+R.getName(t)+"】属性</font>材料一组(10个)";case 11:return"宗门炼制装备，需要绿色以上<font color='"+R.getColor(t)+"'>【"+R.getName(t)+"】属性</font>特殊材料一个";case 12:return"宗门炼制高阶装备，需要<font color='#ffffff'>任意装备</font>一件"}return""},e}(),It=function(){function e(e){this._obj=null,this.update(e)}o(e,"modules.alliance.model.AllianceApply");var t=e.prototype;return t.update=function(e){this._obj=e},s(0,t,"date",function(){return this._obj.date}),s(0,t,"vip",function(){return this._obj.vip}),s(0,t,"nature",function(){return this._obj.nature}),s(0,t,"playerId",function(){return this._obj.playerId}),s(0,t,"level",function(){return this._obj.level}),s(0,t,"name",function(){return this._obj.name}),e}(),At=function(){function e(e){this._obj=null,this.update(e)}o(e,"modules.alliance.model.AllianceSimple");var t=e.prototype;return t.update=function(e){this._obj=e},s(0,t,"masterName",function(){return this._obj.masterName}),s(0,t,"state",function(){return this._obj.state}),s(0,t,"allianceLevel",function(){return this._obj.level}),s(0,t,"members",function(){return this._obj.members}),s(0,t,"name",function(){return this._obj.name}),s(0,t,"masterId",function(){return this._obj.masterId}),s(0,t,"allianceId",function(){return this._obj.id}),e}(),Nt=function(){function e(e){this._obj=null,this.update(e)}o(e,"modules.alliance.model.AllianceDonate");var t=e.prototype;return t.update=function(e){this._obj=e},s(0,t,"golden",function(){return this._obj.golden}),s(0,t,"resource",function(){return this._obj.resource}),s(0,t,"type",function(){return this._obj.type}),s(0,t,"date",function(){return this._obj.date}),s(0,t,"nature",function(){return this._obj.nature}),s(0,t,"exvalue",function(){return this._obj.exvalue}),s(0,t,"playerId",function(){return this._obj.playerId}),s(0,t,"level",function(){return this._obj.level}),s(0,t,"donate",function(){return this._obj.donate}),s(0,t,"name",function(){return this._obj.name}),e}(),Pt=function(){function e(e){this._obj=null,this.update(e)}o(e,"modules.alliance.model.AllianceVo");var t=e.prototype;return t.update=function(e){this._obj=e},s(0,t,"buildingLock",function(){return this._obj.buildinglock},function(e){this._obj.buildinglock=e}),s(0,t,"mineExp",function(){return this._obj.mineExp}),s(0,t,"mineLevel",function(){return this._obj.mineLevel}),s(0,t,"allianceLevel",function(){return this._obj.level},function(e){this._obj.level=e}),s(0,t,"resource",function(){return this._obj.resource},function(e){this._obj.resource=e}),s(0,t,"taskLevel",function(){return this._obj.taskLevel},function(e){this._obj.taskLevel=e}),s(0,t,"booksLevel",function(){return this._obj.booksLevel},function(e){this._obj.booksLevel=e}),s(0,t,"member",function(){return this._obj.member},function(e){this._obj.member=e}),s(0,t,"limitLv",function(){return this._obj.limitLv},function(e){this._obj.limitLv=e}),s(0,t,"shopLevel",function(){return this._obj.shopLevel},function(e){this._obj.shopLevel=e}),s(0,t,"notice",function(){return this._obj.notice},function(e){this._obj.notice=e}),s(0,t,"vilidState",function(){return 1==this._obj.vilidState},function(e){this._obj.vilidState=e}),s(0,t,"name",function(){return this._obj.name}),s(0,t,"masterId",function(){return this._obj.masterId},function(e){this._obj.masterId=e}),s(0,t,"allianceId",function(){return this._obj.id}),e}(),Rt=function(){function e(e){this._obj=null,this.update(e)}o(e,"modules.alliance.model.AllianceMember");var t=e.prototype;return t.update=function(e){this._obj=e},s(0,t,"resource",function(){return this._obj.resource}),s(0,t,"online",function(){return this._obj.online}),s(0,t,"nature",function(){return this._obj.nature}),s(0,t,"donate",function(){return this._obj.donate}),s(0,t,"title",function(){return this._obj.title}),s(0,t,"todayDonate",function(){return this._obj.todayDonate}),s(0,t,"name",function(){return this._obj.name}),s(0,t,"vip",function(){return this._obj.vip}),s(0,t,"lastOnline",function(){return this._obj.lastonline}),s(0,t,"hisdonate",function(){return this._obj.hisdonate}),s(0,t,"level",function(){return this._obj.level}),s(0,t,"playerId",function(){return this._obj.playerId}),e}(),Lt=function(){function e(){}return o(e,"modules.alliance.model.AllianceRule"),e.getAlcColor=function(e){var t=vo["int"](e/4)+1;return t>6&&(t=6),N.getColor(t)},e.OPEN_LEVEL=5,e.TASK_OPEN_LEVEL=15,e.CREATE_ALLIANCE_NEED_GOLD=350,e}(),Ot=function(){function e(){this._obj=null}o(e,"modules.alliance.model.PlayerAlliance");var t=e.prototype;return t.update=function(e){this._obj=e},t.inited=function(){return this._obj},t.isDonateToday=function(){return this.lastDonateDate>0&&ro.isTodayTs(this.lastDonateDate)},s(0,t,"mineAwardToday",function(){return this._obj.mineAwardToday}),s(0,t,"mineAward",function(){return this._obj.mineAward}),s(0,t,"joinTime",function(){return this._obj.joinTime}),s(0,t,"lastDonateDate",function(){return this._obj.lastDonate},function(e){this._obj&&(this._obj.lastDonate=e)}),s(0,t,"extAwardTime",function(){return this._obj.extAwardTime}),s(0,t,"allianceId",function(){return this._obj.allianceId},function(e){this._obj&&(this._obj.allianceId=e)}),s(0,t,"title",function(){return this._obj.title},function(e){this._obj&&(this._obj.title=e)}),s(0,t,"skillLevel",function(){return this._obj.skillLv},function(e){this._obj&&(this._obj.skillLv=e)}),s(0,t,"donate",function(){return this._obj.donate},function(e){this._obj&&(this._obj.donate=e)}),s(0,t,"playerId",function(){return this._obj.playerId}),e}(),Mt=(function(){function e(){}return o(e,"modules.activityinvest.ActivityInvestNotification"),e.SHOW_ACTIVIT_INVEST_PAGE="SHOW_ACTIVIT_INVEST_PAGE",e.ACTIVIT_INVEST_INFO="ACTIVIT_INVEST_INFO",e}(),function(){function e(){}return o(e,"modules.activityinvest.controller.ActivityInvestCmd"),e.QUERY=1,e.BUY=2,e.TAKE_AWARD=3,n(e,["ACTIVITY_INVEST_QUERY",function(){return this.ACTIVITY_INVEST_QUERY="48_1"},"ACTIVITY_INVEST_BUY",function(){return this.ACTIVITY_INVEST_BUY="48_2"},"ACTIVITY_INVEST_TAKE_AWARD",function(){return this.ACTIVITY_INVEST_TAKE_AWARD="48_3"}]),e}()),Dt=(function(){function e(){this.playerId=0,this.buyedIds=null,this.awardedIds=null,this.activing=null,this.begin=0}return o(e,"modules.activityinvest.model.ActivityInvest"),e}(),function(){function e(){}return o(e,"modules.pearl.controller.PearlCmd"),e.QUERY=1,e.OPEN_HOLE=2,e.FEED_PEARL=3,e.CHG_NATURE=4,e.ACTIVE_PEARL=5,n(e,["PEARL_QUERY",function(){return this.PEARL_QUERY="43_1"},"PEARL_OPEN_HOLE",function(){return this.PEARL_OPEN_HOLE="43_2"},"PEARL_FEED_PEARL",function(){return this.PEARL_FEED_PEARL="43_3"},"PEARL_CHG_NATURE",function(){return this.PEARL_CHG_NATURE="43_4"},"PEARL_ACTIVE_PEARL",function(){return this.PEARL_ACTIVE_PEARL="43_5"}]),e}()),kt=function(){function e(){this.pos=0,this.nature=0,this.level=0,this.holeLv=0,this.chg=0}o(e,"modules.pearl.model.PearlItem");var t=e.prototype;return t.getAttr=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var i=1e3*L.getClazzTypeSimple(this.pos)+(e>0?e:this.nature),n=g.database.getData("pearl",i);if(n){var o=[{key:n.attrKey,value:n.getAttrValue(t>0?t:this.level)}],s=n.getPercValue(t>0?t:this.level);return s>0&&o.push({key:1508,value:s}),o}return console.log("not find pearl config :"+i),null},e}(),Bt=function(){function e(){this._obj=null,this._pearlMap=null,this._suitLevel=0,this._pearlMap=new uo}o(e,"modules.pearl.model.PlayerPearl");var t=e.prototype;return t.update=function(e){this._obj=e,this._pearlMap.clear(),this._suitLevel=0;var t=0,i=this._obj.pearlGrads;if(null!=i&&""!=i){var n,o=i.split("|");for(var s in o){n=o[s];var r=n.split("_");if(5==r.length){var a=new kt;a.pos=vo["int"](r[0]),a.nature=vo["int"](r[1]),a.level=vo["int"](r[2]),a.holeLv=vo["int"](r[3]),a.chg=vo["int"](r[4]),this._pearlMap.set(a.pos,a),this._suitLevel+=a.level,a.level>0&&(t+=1)}}}t>=9?this._suitLevel=vo["int"](this._suitLevel/9):this._suitLevel=0},t.isInit=function(){return null!=this._obj},t.clear=function(){this._obj=null,this._pearlMap.clear(),this._suitLevel=0},t.getPearl=function(e){return this._pearlMap.get(e)},t.getSuitLevel=function(){return this._suitLevel},e}(),Vt=function(){function e(){}return o(e,"modules.pearl.model.PearlRule"),e.openHoleNeedStone=function(t){return 0>t||t>=e._HOLE_STONE.length?null:e._HOLE_STONE[t]},e.levelUpNeedPearl=function(e,t){switch(e){case 0:return t>1?10:30;case 1:return t>1?25:75;case 2:return t>1?60:180;case 3:return t>1?150:450;case 4:return t>1?550:1650;case 5:return t>1?2e3:6e3;case 6:return t>1?6500:19500;case 7:return t>1?21e3:63e3;case 8:return t>1?65e3:195e3;case 9:return t>1?2e5:6e5;default:return 0}},e.getSuitAdd=function(e){switch(e){case 1:return 200;case 2:return 500;case 3:return 1e3;case 4:return 2e3;case 5:return 3500;case 6:return 6e3;case 7:return 9500;case 8:return 15e3;case 9:return 2e4;case 10:return 33300;default:return 0}},e.getQuality=function(e){switch(e){case 1:case 2:return 1;case 3:case 4:return 2;case 5:case 6:return 3;case 7:case 8:return 4;case 9:return 5;case 10:return 6}return 1},e.OPEN_LEVEL=45,e.NVWA_STONE=500017,n(e,["_HOLE_STONE",function(){return this._HOLE_STONE=[[0,0],[1,0],[3,0],[6,1],[8,2],[10,3],[15,5],[20,7],[30,10],[45,15]]}]),e}(),Ft=(function(){function e(){}return o(e,"modules.pearl.PearlNotification"),e.OPEN_PEARL_DRESS_PAGE="OPEN_PEARL_DRESS_PAGE",e.OPEN_PEARL_ACTIVE_PAGE="OPEN_PEARL_ACTIVE_PAGE",e.OPEN_PEARL_CHANGE_PAGE="OPEN_PEARL_CHANGE_PAGE",e.OPEN_PEARL_LEVELUP_PAGE="OPEN_PEARL_LEVELUP_PAGE",e.RECEIVE_PLAYER_PEARL="RECEIVE_PLAYER_PEARL",e}(),function(){function e(){}return o(e,"modules.equip.EquipNotification"),e.OPEN_EQUIP_VIEW="OPEN_EQUIP_VIEW",e.OPEN_REBUILD_EQUIP_VIEW="OPEN_REBUILD_EQUIP_VIEW",e.OPEN_ENCHANTMENT_EQUIP_VIEW="OPEN_ENCHANTMENT_EQUIP_VIEW",e.POP_EQUIP_OPTION_SUCCESS="POP_EQUIP_OPTION_SUCCESS",e.OPEN_EQUIP_PREVIEW="OPEN_EQUIP_PREVIEW",e}(),function(){function e(){}return o(e,"modules.equip.model.EquipRule"),e.getRebuildStone=function(e){var t=e.equipConf.level,i=e.quality,n=0;return n=50>=t?5>=i?165005:165006:5>=i?185007:185008,g.database.getData("props",n)},e.getRebuildNeedStoneNum=function(e){var t=e.quality;switch(t){case 1:case 2:case 3:return 1;case 4:case 5:return 2;case 6:return 2}return 2},e}()),Gt=function(){function e(){}return o(e,"modules.dungeon.controller.DungeonCmd"),e.ENTER_DUNGEON=1,e.FIGHT_WITH_OTHER=2,e.QUERY_DUNGEON_SP=3,e.FIGHT_DUNGEON_SP=4,e.RESET_DUNGEON_SP=7,e.QUERY_DUNGEON_SP_RANK=5,e.LOCK_FIGHT_BOSS=6,e.SUBSCRIBE=8,e.UNSUBSCRIBE=9,e.QUERY_DUNGEON_LIMIT=10,n(e,["DUNGEON_QUERY_DUNGEON_SP",function(){return this.DUNGEON_QUERY_DUNGEON_SP="7_3"},"DUNGEON_FIGHT_DUNGEON_SP",function(){return this.DUNGEON_FIGHT_DUNGEON_SP="7_4"},"DUNGEON_RESET_DUNGEON_SP",function(){return this.DUNGEON_RESET_DUNGEON_SP="7_7"},"DUNGEON_QUERY_DUNGEON_SP_RANK",function(){return this.DUNGEON_QUERY_DUNGEON_SP_RANK="7_5"},"DUNGEON_LOCK_FIGHT_BOSS",function(){return this.DUNGEON_LOCK_FIGHT_BOSS="7_6"},"DUNGEON_QUERY_DUNGEON_LIMIT",function(){return this.DUNGEON_QUERY_DUNGEON_LIMIT="7_10"}]),e}(),Ht=function(){function e(){}return o(e,"modules.dungeon.model.DungeonLimitRule"),e.getOpenNeedLevel=function(t){if(t>=101)return 100;var i=(t-25)/5-1;return 0>i||i>e._OPEN_NEED_LEVEL.length?1e4:e._OPEN_NEED_LEVEL[i]},e.NORMAL_DUNGEON_MAX_ID=75,e.PET_DUNGON_GROUPID=101,e.DEFAULT_PASSID=25,n(e,["_OPEN_NEED_LEVEL",function(){return this._OPEN_NEED_LEVEL=[35,45,50,55,65,70,75,85,90,95]}]),e}(),Ut=function(){function e(){this.openLimit=!1,this.serverId=0,this.passedId=0,this.waitedId=0,this.waitTime=NaN,this.triggerId=NaN,this.triggerName=null,this.triggerLevel=NaN}o(e,"modules.dungeon.model.data.DungeonLimitOpen");var t=e.prototype;return t.update=function(e){if(null==e)this.openLimit=!1;else if(this.openLimit=!0,this.serverId=e.serverId,this.passedId=e.passedId,this.waitedId=e.waitedId,this.waitTime=e.waitTime,this.triggerId=0,this.triggerName="",this.triggerLevel=0,e.triggerHero){var t=e.triggerHero.split("_");t.length>=3&&(this.triggerId=vo["int"](t[0]),this.triggerName=t[1],this.triggerLevel=vo["int"](t[2]))}},e}(),zt=function(){function e(e){this.list=null,this.update(e)}o(e,"modules.dungeon.model.data.DungeonSpRankList");var t=e.prototype;return t.update=function(e){this.list=e.list,this.list.sort(this.compareFunctionProp)},t.compareFunctionProp=function(e,t){return e.maxNum==t.maxNum?t.level-e.level:t.maxNum-e.maxNum},e}(),Wt=function(){function e(e){this.passedId=0,this.failTime=0,this.lastEnterTime=NaN,this.currentId=0,this.currentRound=0,this.fighting=!1,this.update(e)}o(e,"modules.dungeon.model.data.DungeonSpInfo");var t=e.prototype;return t.update=function(e){this.passedId=e.passedId,this.failTime=e.failTime,this.lastEnterTime=e.lastEnterTime,this.currentId=e.currentId,this.currentRound=e.currentRound,this.fighting=e.fighting},t.getRoundShow=function(){return this.currentId<=0&&(this.currentId=1),5*(this.currentId-1)+this.currentRound+1},e}(),Yt=(function(){function e(){}return o(e,"modules.dungeon.DungeonNotification"),e.RECEIVE_DUNGEON_SP_INFO="RECEIVE_DUNGEON_SP_INFO",e.RECEIVE_DUNGEON_SP_RANK="RECEIVE_DUNGEON_SP_RANK",e.RECEIVE_DUNGEON_LIMIT_INFO="RECEIVE_DUNGEON_LIMIT_INFO",e.OPEN_DUNGEON_SP_RANK_PAGE="OPEN_DUNGEON_SP_RANK_PAGE",e}(),function(){function e(){}return o(e,"modules.pay.controller.PayCmd"),e.TEST_PAY=110,e.JADE_PAY=111,n(e,["PAY_TEST_PAY",function(){return this.PAY_TEST_PAY="10001_110"},"PAY_JADE_PAY",function(){return this.PAY_JADE_PAY="10001_111"}]),e}()),qt=(function(){function e(){}return o(e,"modules.pay.PaymentNotification"),e.SHOW_PAYMENT_SELECT="SHOW_PAYMENT_SELECT",e.SHOW_PAYMENT_ADD_JADE="SHOW_PAYMENT_ADD_JADE",e.SHOW_PAYMENT_USE_JADE="SHOW_PAYMENT_USE_JADE",e}(),function(){function e(t,i,n,o,s,r){this.id=0,this.rmb=0,this.value=0,this.name=null,this.info=null,this.usd=null,this.id=t,this.rmb=i,this.value=n,this.name=o,this.info=s,this.usd=r,null==o&&(this.name=n+"元宝",this.info=n+"元宝,"+i+"元"),e.dic.set(this.id,this)}o(e,"modules.pay.model.PayItem");var t=e.prototype;return t.canJump=function(){return e.canJumpPay(this.rmb)},e.getOne=function(t){return null==e.dic&&(e.dic=new uo,new e(1,6,60),new e(2,30,309),new e(3,98,1029),new e(4,198,2119),new e(5,648,7128),new e(6,1298,14668),new e(7,3999,46789),new e(8,8888,106656),new e(100,30,280,"黄金月卡","黄金月卡"),new e(101,68,680,"至尊月卡","至尊月卡"),new e(102,30,300,"黄金月卡","黄金月卡"),new e(201,12,120),new e(202,50,515),new e(203,98,1029),new e(204,198,2119),new e(205,648,7128),new e(206,6,60),new e(104,88,0,"大小卡","大小月卡组合"),new e(105,300,0,"小年卡","小年卡"),new e(106,730,0,"大年卡","大年卡"),new e(107,888,0,"大小年卡","大小年卡"),new e(108,198,0,"钻石月卡","钻石月卡"),new e(301,6,1,"20级礼包","20级礼包"),new e(302,12,2,"22级礼包","22级礼包"),new e(303,18,3,"25级礼包","25级礼包"),new e(304,18,4,"28级礼包","28级礼包"),new e(305,6,5,"30级礼包","30级礼包"),new e(306,6,6,"32级礼包","32级礼包"),new e(307,30,7,"35级礼包","35级礼包"),new e(308,68,8,"40级礼包","40级礼包"),new e(309,198,9,"45级礼包","45级礼包"),new e(310,328,10,"50级礼包","50级礼包"),new e(401,30,201,"特惠礼包","直升30级礼包"),new e(402,6,202,"特惠礼包","120元宝"),new e(505,18,106,"特惠珍宝","森林森林探索令*3"),new e(506,30,107,"特惠珍宝","森林森林探索令*5"),new e(507,18,108,"特惠珍宝","组队副本探索令*3"),new e(508,30,109,"特惠珍宝","组队副本探索令*5"),new e(601,2,301,"2元礼包","2元初级成长礼包"),X.openJade()&&!modules.pay.model.PayItem.canJumpPay(30)?(new e(602,18,302,"中级投资礼包","18仙玉成长礼包"),new e(603,30,303,"高级投资礼包","30仙玉投资礼包"),new e(604,3,304,"初级投资礼包","3元初级成长礼包")):(new e(602,18,302,"18元礼包","中级成长礼包"),new e(603,30,303,"30元礼包","高级投资礼包"),new e(604,3,304,"3元礼包","3元初级成长礼包")),new e(701,18,1,"每日礼包","大量灵石"),new e(702,30,2,"每日礼包","大量铜币"),new e(703,18,3,"每日礼包","森林探索令*3"),new e(704,18,4,"每日礼包","组队副本令*3"),new e(705,68,5,"每日礼包","护灵符*10"),new e(706,18,6,"每日礼包","原木*200"),new e(707,6,101,"初级灵珠礼包","60元宝,2灵珠碎片"),new e(708,98,102,"中级灵珠礼包","980元宝,30灵珠碎片"),new e(709,648,103,"高级灵珠礼包","6480元宝,200灵珠碎片"),new e(720,98,101,"初级天籁石礼包","980元宝,2个红色仙品天籁石"),new e(721,648,102,"中级天籁石礼包","6480元宝,15个红色仙品天籁石"),new e(722,3999,103,"高级天籁石礼包","39990元宝,100个红色仙品天籁石"),new e(800,30,104,"每周礼包","一周礼物天天领"),new e(10006,6,0,"6仙玉","6仙玉"),new e(10030,30,0,"30仙玉","30仙玉"),new e(10098,98,0,"98仙玉","98仙玉"),new e(10328,328,0,"328仙玉","328仙玉"),new e(10648,648,0,"648仙玉","648仙玉"),new e(11298,1298,0,"1298仙玉","1298仙玉"),new e(12598,2598,0,"2598仙玉","2598仙玉"),new e(16498,6498,0,"6498仙玉","6498仙玉"),new e(13999,3999,0,"3999仙玉","3999仙玉"),new e(18888,8888,0,"8888仙玉","8888仙玉"),new e(20006,6,0,"1级惊喜礼包","6仙玉惊喜礼包"),new e(20030,30,0,"2级惊喜礼包","30仙玉惊喜礼包"),new e(20098,98,0,"3级惊喜礼包","98仙玉惊喜礼包"),new e(20198,198,0,"4级惊喜礼包","198仙玉惊喜礼包"),new e(20328,328,0,"5级惊喜礼包","328仙玉惊喜礼包"),new e(20648,648,0,"6级惊喜礼包","648仙玉惊喜礼包"),new e(30006,6,4,"4仙玉","4仙玉","0.99"),new e(30018,18,12,"12仙玉","12仙玉","2.99"),new e(30030,30,21,"21仙玉","21仙玉","4.99"),new e(30068,68,47,"47仙玉","47仙玉","9.99"),new e(30098,98,69,"69仙玉","69仙玉","14.99"),new e(30128,128,92,"92仙玉","92仙玉","19.99"),new e(30168,168,123,"123仙玉","123仙玉","25.99"),new e(30198,198,147,"147仙玉","147仙玉","29.99"),new e(30328,328,247,"247仙玉","247仙玉","49.99"),new e(30648,648,498,"498仙玉","498仙玉","99.99")),e.dic.get(t)},e.isJadeItem=function(e){return e>=1e4&&2e4>e||e>=3e4&&4e4>e},e.canJumpPay=function(e){if(0==v.OPEN_PAYMENT)return!1;if(T.IS_ON_MINI||Q.isLayaAndIos()){if(300==e||730==e||888==e)return!!Or.onQQMiniGame;if(e>648)return!1}return!v.IS_GLOBAL_VERSION},e.dic=null,e}()),Kt=(function(){function e(){}return o(e,"modules.Module"),e.ADMIN=1e4,e.PAY=10001,e.CHAT=1,e.CHANNEL=2,e.USER=3,e.SKILL=4,e.FIGHT=5,e.LOOT=6,e.DUNGEON=7,e.COOL_TIME=8,e.VIP=9,e.TASK=10,e.BONE=11,e.ARENA=12,e.STAR=13,e.LOOK=14,e.PET=15,e.PET_SHOP=16,e.FOREST=17,e.ACTIVE=18,e.INVITE=19,e.SHOP=20,e.TOWER=21,e.MARKET=22,e.CULTURE=23,e.TALISMAN=24,e.GUIDE=-10,e.ACHIEVE=25,e.PAY_TOTAL=26,e.DAILY=27,e.GIFT=28,e.BLOOD=29,e.DAILY_TASK=30,e.GIFT_FUTURE=31,e.TEAM=32,e.EXHANGE=33,e.ACTIVITY=34,e.HANDBOOK=35,e.ALLIANCE=36,e.ALLIANCE_TASK=37,e.LADDER=38,e.ALLIANCE_ARENA=39,e.LODE=40,e.ALLIANE_BOSS=41,e.RECORD=42,e.PEARL=43,e.ALLIANCE_MINE=44,e.ALLIANCE_SHOP=45,e.ACTIVITY_7_DAY=46,e.ACTIVITY_WEEK=47,e.ACTIVITY_INVEST=48,e.ACTIVITY_LOTTERY=49,e.ACTIVITY_PAY_WEEK=50,e.MAIL=51,e.MERIDIAN=52,e.SAMSARA=53,e.OLDGUY=54,e.MYSTERY=55,e.DEMON=56,e.PET_SKILL=57,e.VIP_EXT=58,e.CAPTCHA=59,e.GUARD=60,e.DUNGEON_DAILY=61,e.SURPRISE_GIFT=62,e.WORLD_BOSS=63,e.PET_EQUIP=64,e.PET_PVP=65,e.LOTTERY=66,e.GOODS=100,e.SMITHY=101,e.SETTING=200,e}(),function(){function e(){}return o(e,"modules.oldguy.OldGuyRule"),e.enable=function(){return v.account&&0==v.account.indexOf("wf_")&&1==v.serverId},n(e,["DAY_STEP",function(){return this.DAY_STEP=[1,2,3,6,9,12,15,18,21,24,27,30]}]),e}()),Xt=(function(){function e(){}return o(e,"modules.oldguy.OldGuyNotification"),e.OLD_GUY_INFO="OLD_GUY_INFO",e.OLD_GUY_TAKE="OLD_GUY_TAKE",e}(),function(){function e(){}return o(e,"modules.oldguy.controller.OldGuyCmd"),e.INFO=1,e.TAKE=2,n(e,["OLDGUY_INFO",function(){return this.OLDGUY_INFO="54_1"},"OLDGUY_TAKE",function(){return this.OLDGUY_TAKE="54_2"}]),e}()),Qt=(function(){function e(){this.account=null,this.totalRmb=0,this.awardIndex=0,this.sid=0}return o(e,"modules.oldguy.model.OldPlayer"),e}(),function(){function e(){}return o(e,"modules.mystery.controller.MysteryConst"),e.getInfo=function(t){switch(t){case e.FORBIDEN_ENTER:return"秘境不可进入";case e.MOVE_COOLING:return"移动冷却中";case e.NEED_EXIT:return"请先退出秘境";case e.ENTER_CND_NOT_HAS:return"进入条件不满足";case e.NOT_OPEN:return"秘境未开启";case e.FIGHTING_LOCK:return"秘境战斗中";case e.MAP_TIME_OUT:return"秘境已关闭";case e.DEAD_GUY:return"长时间未行动，您已被移出秘境";case e.MAP_FULL:return"当前秘境地图已满，请稍候再试";case e.QUIT_LOCK:return"目标战斗中";case e.MAP_TIME_OUT_NEAR:return"秘境正在关闭。";case e.TODAY_HANG_FULL:return"今日挂机次数已满，请明天再试";default:return console.log("秘境状态码:"+t),""}},e.FORBIDEN_ENTER=-1e4,e.MOVE_COOLING=-10001,e.NEED_EXIT=-10002,e.ENTER_CND_NOT_HAS=-10003,e.NOT_OPEN=-10004,e.FIGHTING_LOCK=-10005,e.MAP_TIME_OUT=-10006,e.DEAD_GUY=-10007,e.MAP_FULL=-10008,e.QUIT_LOCK=-10009,e.MAP_TIME_OUT_NEAR=-10010,e.TODAY_HANG_FULL=-10011,e}()),jt=function(){function e(){}return o(e,"modules.mystery.controller.MysteryCmd"),e.INFO=1,e.ENTER=2,e.MOVE=3,e.FIGHT_MONSTER=4,e.FIGHT_PLAYER=5,e.ANSWER=6,e.QUIT=7,e.FRESH=8,e.APPLY_QUIT=10,e.STOP_HANG=12,e.START_HANG=13,e.PUSH_MESTERY=101,e.PUSH_MAP=102,n(e,["MYSTERY_INFO",function(){return this.MYSTERY_INFO="55_1"},"MYSTERY_ENTER",function(){return this.MYSTERY_ENTER="55_2"},"MYSTERY_MOVE",function(){return this.MYSTERY_MOVE="55_3"},"MYSTERY_FIGHT_MONSTER",function(){return this.MYSTERY_FIGHT_MONSTER="55_4"},"MYSTERY_FIGHT_PLAYER",function(){return this.MYSTERY_FIGHT_PLAYER="55_5"},"MYSTERY_ANSWER",function(){return this.MYSTERY_ANSWER="55_6"},"MYSTERY_QUIT",function(){return this.MYSTERY_QUIT="55_7"},"MYSTERY_APPLY_QUIT",function(){return this.MYSTERY_APPLY_QUIT="55_10"},"MYSTERY_START_HANG",function(){return this.MYSTERY_START_HANG="55_13"},"MYSTERY_STOP_HANG",function(){return this.MYSTERY_STOP_HANG="55_12"},"MYSTERY_PUSH_MESTERY",function(){return this.MYSTERY_PUSH_MESTERY="55_101"},"MYSTERY_PUSH_MAP",function(){return this.MYSTERY_PUSH_MAP="55_102"}]),e}(),Zt=function(){function e(){this.grade=0,this.checkTime=0,this.overTime=0,this.mapStr=null,this.hasMonster=0,this._points=null,this._points=[];for(var e=0;18>e;e++)this._points.push([])}o(e,"modules.mystery.model.Mystery");var t=e.prototype;return t.update=function(e){this.grade=e.grade,this.checkTime=e.checkTime,this.overTime=e.overTime,this.hasMonster=0;var t=e.maps;if(this.mapStr=t.join(","),576==t.length)for(var i=0;i<t.length;i++){var n=vo["int"](i/18),o=i%18,s=t[i];this._points[o][n]=s,s>0&&6>s&&(this.hasMonster+=1)}},t.getP=function(e,t){return this._points[e][t]},t.isOverTime=function(){return g.clock.currentTime>this.overTime},t.clear=function(){this.grade=0},e.W=18,e.H=32,e.TYPE_EMPTY=0,e.TYPE_BLOCK=9,e.TYPE_DRUG=8,e.TYPE_TRAP=7,e.TYPE_BORN=10,e}(),Jt=function(){function e(){this.id=NaN,this.grade=0,this.x=0,this.y=0,this.moveCd=NaN,this.fighting=!1,this.question=null,this.questionCd=0,this.forbiden=0,this.applyquit=0,this.hangGrade=0,this.hangBegin=0,this.hangToday=0,this.hangAimHour=0,this.todayBossTime=0}o(e,"modules.mystery.model.PlayerMystery");var t=e.prototype;return t.update=function(e){this.id=e.id,this.grade=e.grade,this.x=e.x,this.y=e.y,this.moveCd=e.moveCd,this.fighting=e.fighting,this.question=e.question,this.questionCd=e.questionCd,this.forbiden=e.forbideen,this.applyquit=e.applyquit,this.hangGrade=e.hangGrade,this.hangBegin=e.hangBegin,this.hangToday=e.hangToday,this.hangAimHour=e.hangAimHour,this.todayBossTime=e.todayBossTime},t.clear=function(){this.id=0,this.questionCd=0},e}(),$t=function(){function e(){}return o(e,"modules.mystery.model.MysteryRule"),e.getHangTimeMax=function(e){return e*ro.T_1H},e.getOpenTime=function(e){switch(e){case 1:case 2:return 0;case 3:return 30;case 4:return 45;case 5:return 60;default:return 1e5}},e.getDropLevel=function(e){switch(e){case 1:return"1-2";case 2:return"1-4";case 3:return"2-6";case 4:return"3-8";case 5:return"5-12";default:return"??"}},e.OPEN_LEVEL=39,e.MOVE_CD=800,e.APPLY_QUIT_WAIT=18e4,e.MAX_MONSTER=5,e.PROPS_CORROSION_ID=500021,e.HANG_PROP_ID=500022,e.HANG_GOLD_PRICE=50,e.ONEDAY_MAX_HANG_TIME=5,e.ONEDAY_MAX_BOSS=50,n(e,["GATE_GRADES",function(){return this.GATE_GRADES=[1,2,3,4,5]},"HANG_HOUR_SELECTABLE",function(){return this.HANG_HOUR_SELECTABLE=[{hour:1,pct:100,num:12},{hour:2,pct:80,num:20},{hour:4,pct:60,num:26},{hour:8,pct:40,num:40}]}]),e}(),ei=(function(){function e(){}return o(e,"modules.mystery.MysteryNotification"),e.RECEIVE_PLAYER_MYSTERY="RECEIVE_PLAYER_MYSTERY",e.RECEIVE_MYSTERY_MAP="RECEIVE_MYSTERY_MAP",e.OPEN_MYSTERY_GATE_VIEW="OPEN_MYSTERY_GATE_VIEW",e.OPEN_MYSTERY_MAP_VIEW="OPEN_MYSTERY_MAP_VIEW",e.OPEN_MYSTERY_HANG_VIEW="OPEN_MYSTERY_HANG_VIEW",e}(),function(){function e(){}return o(e,"modules.ladder.LadderNotification"),
e.OPEN_LADDER_VIEW="OPEN_LADDER_VIEW",e.RECEIVE_PLAYER_LADDER="RECEIVE_PLAYER_LADDER",e.RECEIVE_AROUND_LADDER="RECEIVE_AROUND_LADDER",e.RECEIVE_LADDER_TOP10="RECEIVE_LADDER_TOP10",e}(),function(){function e(){}return o(e,"modules.ladder.controller.LadderCmd"),e.QUERY=1,e.LIST_RANK=2,e.FIGHT=3,e.TAKE_AWARD=4,e.LIST_TOP10=5,n(e,["LADDER_QUERY",function(){return this.LADDER_QUERY="38_1"},"LADDER_LIST_RANK",function(){return this.LADDER_LIST_RANK="38_2"},"LADDER_FIGHT",function(){return this.LADDER_FIGHT="38_3"},"LADDER_TAKE_AWARD",function(){return this.LADDER_TAKE_AWARD="38_4"},"LADDER_LIST_TOP10",function(){return this.LADDER_LIST_TOP10="38_5"}]),e}()),ti=(function(){function e(e){this._obj=null,this._obj=e}o(e,"modules.ladder.model.LadderLog");var t=e.prototype;return s(0,t,"value",function(){return this._obj.value}),s(0,t,"win",function(){return this._obj.win}),s(0,t,"name",function(){return this._obj.name}),s(0,t,"action",function(){return this._obj.action}),s(0,t,"nature",function(){return this._obj.nature}),s(0,t,"level",function(){return this._obj.level}),s(0,t,"playerId",function(){return this._obj.playerId}),e}(),function(){function e(e){this._obj=null,this._obj=e}o(e,"modules.ladder.model.LadderRank");var t=e.prototype;return s(0,t,"alcName",function(){return this._obj.alcName}),s(0,t,"alcLv",function(){return this._obj.alcLv}),s(0,t,"nature",function(){return this._obj.nature}),s(0,t,"name",function(){return this._obj.name}),s(0,t,"playerId",function(){return this._obj.playerId}),s(0,t,"level",function(){return this._obj.level}),s(0,t,"rank",function(){return this._obj.rank}),e}(),function(){function e(){this._obj=null}o(e,"modules.ladder.model.LadderAround");var t=e.prototype;return t.update=function(e){this._obj=e},s(0,t,"logs",function(){return this._obj.logs}),s(0,t,"players",function(){return this._obj.players}),e}()),ii=function(){function e(){this._obj=null}o(e,"modules.ladder.model.PlayerLadder");var t=e.prototype;return t.update=function(e){this._obj=e},t.showRedPoint=function(){return this.fightTimes>0?!0:this.rankTmp>0},s(0,t,"freshTime",function(){return this._obj.freshTime}),s(0,t,"collectTime",function(){return this._obj.collectTime}),s(0,t,"rankTmp",function(){return this._obj.rankTmp}),s(0,t,"buyTimes",function(){return this._obj.buyTimes}),s(0,t,"rank",function(){return this._obj.rank}),s(0,t,"fightTimes",function(){return this._obj.fightTimes}),s(0,t,"playerId",function(){return this._obj.playerId}),e}(),ni=function(){function e(){}return o(e,"modules.ladder.LadderRule"),e.isRankTime=function(){var e=ro.newDate(g.clock.currentTime),t=e.getHours(),i=e.getMinutes();return 22==t&&1>i},e.OPEN_LEVEL=30,e.FIGHT_COST_GOLD=20,e}(),oi=function(){function e(){}return o(e,"modules.user.controller.UserCmd"),e.BINDING_NEW_SESSION=3,e.BIND_PLATFORM_ID=9,e.CHANGE_NATURE=10,e.SAVE_ADULT_STATE=13,e.REQ_OFFLINE=18,e.NOTICE_2_KICK=100,e.NOTICE_2_KICK_NO_REPEAT=101,e.PUSH_PLAYER_ATTRIBUTE=108,n(e,["USER_BINDING_NEW_SESSION",function(){return this.USER_BINDING_NEW_SESSION="3_3"},"USER_CHANGE_NATURE",function(){return this.USER_CHANGE_NATURE="3_10"},"USER_PUSH_NOTICE_2_KICK",function(){return this.USER_PUSH_NOTICE_2_KICK="3_100"},"USER_PUSH_NOTICE_2_KICK_NO_REPEAT",function(){return this.USER_PUSH_NOTICE_2_KICK_NO_REPEAT="3_101"},"USER_PUSH_PLAYER_ATTRIBUTE",function(){return this.USER_PUSH_PLAYER_ATTRIBUTE="3_108"}]),e}(),si=(function(){function e(){}return o(e,"modules.user.UserNotification"),e.USER_INIT="USER_INIT",e.USER_HP_MP_FRESH="USER_HP_MP_FRESH",e.USER_GAS_FRESH="USER_GAS_FRESH",e.USER_DOUBLE_PAY_TIME_CHG="USER_DOUBLE_PAY_TIME_CHG",e.USER_NAME_CHANGE="USER_NAME_CHANGE",e.USER_NATURE_CHANGE="USER_NATURE_CHANGE",e.USER_LEVEL_CHANGE="USER_LEVEL_CHANGE",e.USER_EXP_CHANGE="USER_EXP_CHANGE",e.USER_CURRENCY_CHANGE="USER_CURRENCY_CHANGE",e.USER_HANGDUNGEON_CHANGE="USER_HANGDUNGEON_CHANGE",e.USER_INDULGE_CHANGE="USER_INDULGE_CHANGE",e.CHECK_INDULGE_NOT_ADULT="CHECK_INDULGE_NOT_ADULT",e.USER_LOOK_VIDEO_CARD_CHANGE="USER_LOOK_VIDEO_CARD_CHANGE",e.USER_ALLIANCE_CHANGE="USER_ALLIANCE_CHANGE",e.USER_TEAM_CHANGE="USER_TEAM_CHANGE",e.USER_PET_FOOD_CHANGE="USER_PET_FOOD_CHANGE",e.USER_MAX_PASSDUNGEON_CHG="USER_MAX_PASSDUNGEON_CHG",e.USER_OFFLINE_OPEN_BOX_CHG="USER_OFFLINE_OPEN_BOX_CHG",e.USER_TRIBLE_END_TIME_CHG="USER_TRIBLE_END_TIME_CHG",e.USER_OTHER_ATTRIBUTE_CHANGE="USER_OTHER_ATTRIBUTE_CHANGE",e.USER_BOX_SIZE_CHANGE="USER_BOX_SIZE_CHANGE",e.USER_LAST_SHARE_TIME_CHANGE="USER_LAST_SHARE_TIME_CHANGE",e.USER_VIP_ARENA_MINE_TIME_CHANGE="USER_VIP_ARENA_MINE_TIME_CHANGE",e.USER_VIP_STAR_FAIL_RETURN="USER_VIP_STAR_FAIL_RETURN",e.USER_LOCK_FIGHT_BOSS_TIME="USER_LOCK_FIGHT_BOSS_TIME",e.USER_DRESSED_TITLE_CHANGE="USER_DRESSED_TITLE_CHANGE",e.ROLE_VIEW="ROLE_VIEW",e.SELECT_WUXING_VIEW="SELECT_WUXING_VIEW",e.CLEAR_CACHE_DATA="CLEAR_CACHE_DATA",e.VISITOR_BIND_CHG="VISITOR_BIND_CHG",e}(),function(){function e(){}return o(e,"modules.user.model.UserRule"),e.updateAndCheck=function(e,t,i){var n=e.getValue(t);switch(t){case 1204:n-=3e3;break;case 1203:n-=3e3,2!=e.getValue(1004)&&2!=e.getValue(1004)||(n-=1500);break;case 1427:n+=2e4;break;default:return}e.setValue(t,n)},e.HIT_DODEG_OFFSET=3e3,e.DOUBLE_ATTACK_ADD_BASE=2e4,e}()),ri=function(){function e(){}return o(e,"modules.user.UserConstant"),e.getLoginErrorInfo=function(t){return e._loginErrorInfo||(e._loginErrorInfo=new uo,e._loginErrorInfo[e.PARAM_INVALID]="角色名不可用",e._loginErrorInfo[e.ACCOUNT_NOT_FOUND]="帐号不存在",e._loginErrorInfo[e.PLAYER_NAME_REPEAT]="角色名已存在",e._loginErrorInfo[e.SEX_FORBIT_BY_JOB]="职业性别限制",e._loginErrorInfo[e.LOGIN_KEYWORD_TIMEOUT]="登录令牌已失效",e._loginErrorInfo[e.LOGIN_USER_ERROR]="登录请求用户名错误",e._loginErrorInfo[e.LOGIN_TIME_ERROR]="登录请求时间错误",e._loginErrorInfo[e.LOGIN_ADULT_ERROR]="登录请求AdultFlag错误",e._loginErrorInfo[e.LOGIN_SERVER_ERROR]="登录请求服务器号错误",e._loginErrorInfo[e.LOGIN_PARTNER_ERROR]="登录请求平台号错误 ",e._loginErrorInfo[e.LOGIN_SIGN_ERROR]="登录请求验证码错误",e._loginErrorInfo[e.NAME_NOT_RIGHT]="名字包含屏蔽字"),e._loginErrorInfo[t]?e._loginErrorInfo[t]:"非知错误码："+t},e.PARAM_INVALID=-10001,e.ACCOUNT_NOT_FOUND=-10002,e.PLAYER_NAME_REPEAT=-10003,e.SEX_FORBIT_BY_JOB=-10004,e.LOGIN_KEYWORD_TIMEOUT=-10005,e.LOGIN_USER_ERROR=-10006,e.LOGIN_TIME_ERROR=-10007,e.LOGIN_ADULT_ERROR=-10008,e.LOGIN_SERVER_ERROR=-10009,e.LOGIN_PARTNER_ERROR=-10020,e.LOGIN_SIGN_ERROR=-10021,e.NAME_NOT_RIGHT=-10022,e._loginErrorInfo=null,e}(),ai=(function(){function e(){}return o(e,"modules.dungeondaily.DungeonDailyNotification"),e.RECEIVE_DUNGEON_DAILY_INFO="RECEIVE_DUNGEON_DAILY_INFO",e}(),function(){function e(){}return o(e,"modules.dungeondaily.controller.DungeonDailyCmd"),e.QUERY=1,e.FIGHT=2,n(e,["DUNGEON_DAILY_QUERY",function(){return this.DUNGEON_DAILY_QUERY="61_1"},"DUNGEON_DAILY_FIGHT",function(){return this.DUNGEON_DAILY_FIGHT="61_2"}]),e}()),li=(function(){function e(){this.playerId=0,this.awardType=0,this.fightTimes=0,this.winTimes=0,this.fighting=!1}return o(e,"modules.dungeondaily.model.PlayerDungeonDaily"),e}(),function(){function e(){}return o(e,"modules.dungeondaily.model.PlayerDungeonRule"),e.OPEN_LEVEL=55,e.FIGHT_COST_GOLD=10,e}(),function(){function e(){}return o(e,"modules.dungeondaily.view.commponets.DungeonDailyView"),e}(),function(){function e(){}return o(e,"modules.blood.BloodNotification"),e.SHOW_BLOOD_PAGE="SHOW_BLOOD_PAGE",e.SHOW_BLOOD_UPQUALITY_PAGE="SHOW_BLOOD_UPQUALITY_PAGE",e.SHOW_BLOOD_UPLEVEL_PAGE="SHOW_BLOOD_UPLEVEL_PAGE",e.SHOW_BLOOD_DRESS_CHANGE="SHOW_BLOOD_DRESS_CHANGE",e.SHOW_ORANGE_LEVEL_MOVE="SHOW_ORANGE_LEVEL_MOVE",e.RECEIVE_BLOOD_INFO="RECEIVE_BLOOD_INFO",e.RECEIVE_BLOOD_PIECE_CHANGE="RECEIVE_BLOOD_PIECE_CHANGE",e.UPGRADE_BLOOD_Q_SUCCESS="UPGRADE_BLOOD_Q_SUCCESS",e.BUID_BLOOD_SUCCESS="BUID_BLOOD_SUCCESS",e}(),function(){function e(){}return o(e,"modules.blood.controller.BloodCmd"),e.QUERY=1,e.OPEN_GRAD=2,e.UPGRADE_LEVEL=3,e.UPGRADE_QUALITY=4,e.UPGRADE_QUALITY_BY_STONE=5,e.BUILD_BLOOD=6,e.DRESS=7,e.TAKE_OFF=8,e.UPGRADE_LEVEL_AUTO=9,e.UPGRADE_QUALITY_ORANGE=10,e.UPGRADE_ORANGE_ATTR_LEVEL=11,e.MOVE_ORANGE_ATTR_LEVEL=12,e.PUSH_PIECES=100,n(e,["BLOOD_QUERY",function(){return this.BLOOD_QUERY="29_1"},"BLOOD_OPEN_GRAD",function(){return this.BLOOD_OPEN_GRAD="29_2"},"BLOOD_UPGRADE_LEVEL",function(){return this.BLOOD_UPGRADE_LEVEL="29_3"},"BLOOD_UPGRADE_QUALITY",function(){return this.BLOOD_UPGRADE_QUALITY="29_4"},"BLOOD_UPGRADE_QUALITY_BY_STONE",function(){return this.BLOOD_UPGRADE_QUALITY_BY_STONE="29_5"},"BLOOD_BUILD_BLOOD",function(){return this.BLOOD_BUILD_BLOOD="29_6"},"BLOOD_DRESS",function(){return this.BLOOD_DRESS="29_7"},"BLOOD_TAKE_OFF",function(){return this.BLOOD_TAKE_OFF="29_8"},"BLOOD_UPGRADE_LEVEL_AUTO",function(){return this.BLOOD_UPGRADE_LEVEL_AUTO="29_9"},"BLOOD_UPGRADE_QUALITY_ORANGE",function(){return this.BLOOD_UPGRADE_QUALITY_ORANGE="29_10"},"BLOOD_UPGRADE_ORANGE_ATTR_LEVEL",function(){return this.BLOOD_UPGRADE_ORANGE_ATTR_LEVEL="29_11"},"BLOOD_MOVE_ORANGE_ATTR_LEVEL",function(){return this.BLOOD_MOVE_ORANGE_ATTR_LEVEL="29_12"},"BLOOD_PUSH_PIECES",function(){return this.BLOOD_PUSH_PIECES="29_100"}]),e}()),hi=function(){function e(){}return o(e,"modules.blood.model.BloodRule"),e.getPriceBy=function(e){switch(e){case 1:return 3e4;case 2:return 6e4;case 3:return 9e4;case 4:return 12e4;case 5:return 15e4}return 0},e.getUpgradeStone=function(e){return e.quality>=5?g.database.getData("props",165006):g.database.getData("props",165005)},e.getOpenLevel=function(t){return 0>t||t>e.PLAYER_LEVEL_MAP.length-1?100:e.PLAYER_LEVEL_MAP[t]},e.canOpenGrad=function(e,t){switch(e){case 0:return t>=45;case 1:return t>=55;case 2:return t>=65;case 3:return t>=75;default:return!1}},e.openGradNeedPropsNum=function(e){switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:return 4;default:return 0}},e.getUpgradeStoneNum=function(e){switch(e){case 1:return 1;case 2:return 2;case 3:return 4;case 4:return 8;case 5:return 10}return 10},e.getOrangeAttr=function(e,t){void 0===t&&(t=0);var i=0;switch(e.propConf.nature){case 1:i=1352;break;case 2:i=1355;break;case 3:i=1354;break;case 4:i=1351;break;case 5:i=1353;break;default:return""}try{var n=e.baseAttr[0],o=t>0?t:n.value,s=g.database.getData("bloodupgrade",o);return I.getName(i)+I.getValueStr(i,s.orangeAdd,!0)}catch(r){return""}},e.getUpgradeOrangeAttCostSilver=function(e){return 5e5*e},e.OPEN_GRAD_PROP_BASE_ID=4e4,e.ONE_BLOOD_NEED_PIECE_COUNT=50,n(e,["PLAYER_LEVEL_MAP",function(){return this.PLAYER_LEVEL_MAP=[45,55,65,75]}]),e}(),ci=function(){function e(){this.id=NaN,this.bloodPiece=NaN,this.bloodGrads=null,this.bloodArr=null,this.NATURE_HAS=new go,this.bloodArr=new Array(4)}o(e,"modules.blood.model.PlayerBlood");var t=e.prototype;return t.update=function(e){this.id=e.id,this.bloodPiece=e.bloodPiece,this.bloodGrads=e.bloodGrads,this.NATURE_HAS.clear();for(var t=this.bloodGrads.split("|"),i=0;i<this.bloodArr.length;i++)this.bloodArr[i]=null;var n,o=x.getInstance().retrieveProxy("GoodsProxy");for(var s in t){n=t[s];var r=n.split("_");if(r.length>=4){var a=vo["int"](r[0]),l=vo["int"](r[1]),h=vo["int"](r[2]),c=vo["int"](r[3]);if(this.bloodArr[a]={index:a,lv:l,id:h,rt:c},h>0){var u=o.getItemById(h,0);u&&this.NATURE_HAS.add(u.propConf.nature)}}}},e}(),ui=(function(){function e(){}return o(e,"modules.daily.DailyNotification"),e.RECEIVE_INVITE_INFO="RECEIVE_INVITE_INFO",e.RECEIVE_ACTIVE_INFO="RECEIVE_ACTIVE_INFO",e.RECEIVE_SIGN_INFO="RECEIVE_SIGN_INFO",e}(),function(){function e(){}return o(e,"modules.daily.controller.ActiveCmd"),e.QUERY=1,e.ACTIVE=2,n(e,["ACTIVE_QUERY",function(){return this.ACTIVE_QUERY="18_1"},"ACTIVE_ACTIVE",function(){return this.ACTIVE_ACTIVE="18_2"}]),e}()),di=function(){function e(){}return o(e,"modules.daily.controller.DailyCmd"),e.QUERY=1,e.SIGN_IN=2,n(e,["DAILY_QUERY",function(){return this.DAILY_QUERY="27_1"},"DAILY_SIGN_IN",function(){return this.DAILY_SIGN_IN="27_2"}]),e}(),pi=function(){function e(){}return o(e,"modules.daily.controller.InviteCmd"),e.QUERY=1,e.BIND=2,e.GET_AWARD=3,n(e,["INVITE_QUERY",function(){return this.INVITE_QUERY="19_1"},"INVITE_BIND",function(){return this.INVITE_BIND="19_2"},"INVITE_GET_AWARD",function(){return this.INVITE_GET_AWARD="19_3"}]),e}(),fi=function(){function e(e){this.mycode=null,this.mastercode=null,this.childCount=0,this.grandchildCount=0,this.childRmb=0,this.grandchildRmb=0,this.rmbShare=0,this.rmbShareAward=0,this.update(e)}o(e,"modules.daily.model.PlayerInvite");var t=e.prototype;return t.update=function(e){this.mycode=e.mycode,this.mastercode=e.mastercode,this.childCount=e.childCount,this.grandchildCount=e.grandchildCount,this.childRmb=e.childRmb,this.grandchildRmb=e.grandchildRmb,this.rmbShare=e.rmbShare,this.rmbShareAward=e.rmbShareAward},t.hasAward=function(){return this.rmbShare>this.rmbShareAward},e}(),_i=function(){function e(e){this.totalDay=0,this.signTime=NaN,this._isSignToday=!1,this.update(e)}o(e,"modules.daily.model.PlayerSign");var t=e.prototype;return t.update=function(e){this.totalDay=e.totalDay,this.signTime=e.signTime,this._isSignToday=ro.isTodayTs(this.signTime)},t.isSignToday=function(){return this._isSignToday},t.getTodayNum=function(){return this.isSignToday()?this.totalDay:this.totalDay+1},e}(),mi=function(){function e(){}return o(e,"modules.daily.model.DailySignRule"),e.isSpecailDay=function(t){return 28==t?!1:t>=365&&0==t%365?!0:t>30&&t%7==0?!0:null!=e._specialDic.get(t)},e.getSpecailItem=function(t){return 28==t?!1:t>=365&&0==t%365?e._specialDic.get(365):t>30&&t%7==0?t%28==0?e._specialDic.get(28):e._specialDic.get(7):e._specialDic.get(t)},e.getPoint=function(e){return 10>=e?e:20>e?10:20},e.SIGN_AWARD_GOLD=10,n(e,["_specialDic",function(){return this._specialDic=new uo}]),e.__init$=function(){e._specialDic.set(2,{i:125005,c:1}),e._specialDic.set(4,{i:500001,c:5e3}),e._specialDic.set(10,{i:30002,c:2}),e._specialDic.set(14,{i:185007,c:1}),e._specialDic.set(20,{i:-1,c:200}),e._specialDic.set(30,{i:185008,c:1}),e._specialDic.set(7,{i:185007,c:1}),e._specialDic.set(28,{i:185008,c:1}),e._specialDic.set(365,{i:185008,c:10})},e}(),gi=function(){function e(e){this.codes=[],this.update(e)}o(e,"modules.daily.model.PlayerActive");var t=e.prototype;return t.update=function(e){this.codes=e.split("|")},e}(),vi=(function(){function e(){}return o(e,"modules.surprise.SurpriseNotification"),e.OPEN_SURPRISE_VIEW="OPEN_SURPRISE_VIEW",e.RECEIVE_SURPRISE_INFO="RECEIVE_SURPRISE_INFO",e.RECEIVE_SURPRISE_CHOSE="RECEIVE_SURPRISE_CHOSE",e}(),function(){function e(){}return o(e,"modules.surprise.controller.SurpriseCmd"),e.QUERY=1,e.CHOSE=2,e.AWARD=3,e.PUSH_GIVE=4,n(e,["SURPRISE_GIFT_QUERY",function(){return this.SURPRISE_GIFT_QUERY="62_1"},"SURPRISE_GIFT_CHOSE",function(){return this.SURPRISE_GIFT_CHOSE="62_2"},"SURPRISE_GIFT_AWARD",function(){return this.SURPRISE_GIFT_AWARD="62_3"},"SURPRISE_GIFT_PUSH_GIVE",function(){return this.SURPRISE_GIFT_PUSH_GIVE="62_4"}]),e}()),yi=function(){function e(e,t,i){this.rmb=0,this.surprise=null,this.props=null,void 0===i&&(i=0),this.surprise=e,this.props=t,this.rmb=i}o(e,"modules.surprise.model.SupriseItem");var t=e.prototype;return t.isLimit=function(){var e=this.surprise.getNum(this.rmb);return 0>e},s(0,t,"count",function(){var e=this.surprise.getNum(this.rmb);if(500001==this.surprise.propId){var t=x.getInstance().retrieveProxy("DungeonProxy");if(t&&t.dungeonSpInfo){var i=t.dungeonSpInfo,n=In.queryCountPerM(i.passedId);e*=6*n*60}}return Math.abs(e)}),s(0,t,"id",function(){return this.surprise.id}),e}(),bi=function(){function e(e){this.state=0,this.gift=0,this._giftItem=null,this.expiration=NaN,this.update(e)}o(e,"modules.surprise.model.PlayerSurprise");var t=e.prototype;return t.update=function(e){this.state=e.state,this.gift=e.gift,this._giftItem=e.giftItem,this.expiration=e.expiration},s(0,t,"item2",function(){return null!=this._giftItem&&3==this._giftItem.length?this._giftItem[2]:0}),s(0,t,"item1",function(){return null!=this._giftItem&&3==this._giftItem.length?this._giftItem[1]:0}),s(0,t,"rmb",function(){return null!=this._giftItem&&3==this._giftItem.length?this._giftItem[0]:0}),e.STATE_NONE=0,e.STATE_WAIT_CHOSE=1,e.STATE_WAIT_PAY=2,e.STATE_FINISH_PAY=3,e.GIFT_NONE=0,e.GIFT_SMALL=1,e.GIFT_BIG=2,e.GIFT_HUGE=3,e}(),Ei=function(){function e(){}return o(e,"modules.captcha.controller.CaptchaCmd"),e.QUERY=1,e.ANSWER=2,n(e,["CAPTCHA_QUERY",function(){return this.CAPTCHA_QUERY="59_1"},"CAPTCHA_ANSWER",function(){return this.CAPTCHA_ANSWER="59_2"}]),e}(),xi=function(){function e(){}return o(e,"modules.captcha.controller.CaptchaConst"),e.isCaptchaErro=function(t){return t==e.CAPTCHA_FORBIDEN||t==e.CAPTCHA_VERING},e.CAPTCHA_FORBIDEN=-71,e.CAPTCHA_VERING=-72,e}(),Si=function(){function e(){this.img=null,this.veringEndTime=NaN,this.forbidenEndTime=NaN}o(e,"modules.captcha.view.componets.PlayerCaptcha");var t=e.prototype;return t.update=function(e){this.img=e.img,this.veringEndTime=e.veringEndTime,this.forbidenEndTime=e.forbidenEndTime},t.isVering=function(){return null!=this.img&&""!=this.img&&this.veringEndTime>g.clock.currentTime},t.isForbiden=function(){return this.forbidenEndTime>g.clock.currentTime},e}(),wi=(function(){function e(){}return o(e,"modules.captcha.CaptchaNotification"),e.SHOW_CAPTCHA_PAGE="SHOW_CAPTCHA_PAGE",e.RECEIVE_CAPTCHA_INFO="RECEIVE_CAPTCHA_INFO",e.CAPTCHA_ALERT_FORBIDEN="CAPTCHA_ALERT_FORBIDEN",e}(),function(){function e(){this.playerId=NaN,this.goldCostTotal4Pearl=0,this.rebateGotMax4Pearl=0,this.startDay=0,this.endDay=0,this.extOpenEnd=NaN,this.extRestTime=0}return o(e,"modules.rebate.model.MarketRebate"),e}(),function(){function e(e){this.txtTitle=null,this.clock=null,this.txtContent=null,this.htmlContent1=null,this.htmlContent2=null,this.btnReceive=null,this.btnReset=null,this.lbReset=null,this.timespan=new ao(0),this.txtTitle=e.getChildByName("txtTitle"),this.clock=e.getChildByName("clock"),this.txtContent=e.getChildByName("txtContent"),this.htmlContent1=e.getChildByName("htmlContent1"),this.htmlContent2=e.getChildByName("htmlContent2"),this.btnReceive=e.getChildByName("btnReceive"),this.btnReset=e.getChildByName("btnReset"),this.lbReset=e.getChildByName("txtRest"),this.htmlContent1.style.fontSize=24,this.htmlContent1.style.color="#ffffff",this.htmlContent1.style.bold=!0,this.htmlContent2.style.fontSize=24,this.htmlContent2.style.color="#ffffff",this.htmlContent2.style.bold=!0}o(e,"modules.rebate.view.componets.RebatePearlView");var t=e.prototype;return t.onOpened=function(){i.timer.loop(1e3,this,this.onDownClock)},t.onClosed=function(e){i.timer.clear(this,this.onDownClock)},t.onDownClock=function(){var e=x.getInstance().retrieveProxy("RebateProxy"),t=e.endDate,n=t?t.getTime():0,o=n-g.clock.currentTime;n>0&&o>0?(this.timespan.update(o),this.clock.changeText("倒计时 "+this.timespan.formatStringFullHour)):(i.timer.clear(this,this.onDownClock),this.clock.changeText("活动已结束 "))},t.updataRebatePearlView=function(){var e=x.getInstance().retrieveProxy("RebateProxy");e.hasAward()?this.btnReceive.visible=!0:this.btnReceive.visible=!1,this.htmlContent1.innerHTML=e.getContent1(),this.htmlContent2.innerHTML=e.getContent2()},e}()),Ci=(function(){function e(){}return o(e,"modules.rebate.RebateNotification"),e.SHOW_REBATE_PAGE="SHOW_REBATE_PAGE",e.QUERY_REBATE="QUERY_REBATE",e.TAKE_REBATE="TAKE_REBATE",e.UPDATA_REBATE="UPDATA_REBATE",e}(),function(){function e(){}return o(e,"modules.notice.NoticeNotification"),e.SHOW_PLAY_NOTICE="SHOW_PLAY_NOTICE",e}(),function(){function e(){}return o(e,"modules.gift.controller.GiftFutureCmd"),e.QUERY=1,e.AWARD=2,n(e,["GIFT_FUTURE_QUERY",function(){return this.GIFT_FUTURE_QUERY="31_1"},"GIFT_FUTURE_AWARD",function(){return this.GIFT_FUTURE_AWARD="31_2"}]),e}()),Ti=function(){function e(){}return o(e,"modules.gift.controller.GiftCmd"),e.QUERY=1,e.LIMIT_AWARD=2,e.CHECK_SP_GIFT=3,e.DORP_CURRENT_LIMIT=4,n(e,["GIFT_QUERY",function(){return this.GIFT_QUERY="28_1"},"GIFT_LIMIT_AWARD",function(){return this.GIFT_LIMIT_AWARD="28_2"},"GIFT_CHECK_SP_GIFT",function(){return this.GIFT_CHECK_SP_GIFT="28_3"},"GIFT_DORP_CURRENT_LIMIT",function(){return this.GIFT_DORP_CURRENT_LIMIT="28_4"}]),e}(),Ii=(function(){function e(){}return o(e,"modules.gift.GiftNotification"),e.RECIVE_LIMIT_GIFT_INFO="RECIVE_LIMIT_GIFT_INFO",e.RECIVE_SP_GIFT_INFO="RECIVE_SP_GIFT_INFO",e.CHECK_6RMB_SPGIFT="CHECK_6RMB_SPGIFT",e.DISPLAYE_GIFT_PANLE="DISPLAYE_GIFT_PANLE",e.OPEN_FUTURE_GIFT_PAGE="OPEN_FUTURE_GIFT_PAGE",e.RECIVE_FUTURE_GIFT_INFO="RECIVE_FUTURE_GIFT_INFO",e}(),function(){function e(){}return o(e,"modules.gift.type.GiftSpType"),e.LEVE_30_FAST=201,e.GOLD_120_6RMB=202,e._6RMB_POP_DATE="_6RMB_POP_DATE",e}(),function(){function e(){this.buyed=null,this.awarded=null,this.buyed=new go,this.awarded=new uo}o(e,"modules.gift.model.PlayerGiftFuture");var t=e.prototype;return t.update=function(e,t){if(this.buyed.clear(),""!=e){var i,n=e.split("_");for(var o in n)i=n[o],this.buyed.add(vo["int"](i))}if(this.awarded.clear(),""!=t){n=t.split("|");var s;for(var r in n){s=n[r];var a=s.split("_");2==a.length&&this.awarded.set(vo["int"](a[0]),vo["int"](a[1]))}}},t.isBuyed=function(e){return this.buyed.contain(e)},t.getLastAwarded=function(e){return this.awarded.get(e)},e}()),Ai=function(){function e(){this.limitId=0,this.limitEndTime=NaN,this.cfg=null,this.awarded=null,this._spItems=null,this.awarded=new go,this._spItems=new uo}o(e,"modules.gift.model.PlayerGift");var t=e.prototype;return t.clear=function(){this.awarded.clear(),this._spItems.clear(),this.limitId=0,this.limitEndTime=0,this.cfg=null},t.update=function(e){if(this.limitId=e.limitId,this.limitEndTime=e.limitEndTime,this.awarded.clear(),this.cfg=g.database.getData("giftlimit",this.limitId),""!=e.awardlimitIds){var t,i=e.awardlimitIds.split("_");for(var n in i)t=i[n],this.awarded.add(vo["int"](t))}},t.setSpItems=function(e,t){this._spItems.set(e,t)},t.getSpItems=function(e){return this._spItems.get(e)},s(0,t,"payItemId",function(){return this.limitId+300}),s(0,t,"isWaitingAward",function(){return this.awarded.contain(this.limitId)}),s(0,t,"isActing",function(){return 0==this.limitId||null==this.cfg?!1:this.isWaitingAward?!0:this.limitEndTime>g.clock.currentTime}),e}(),Ni=function(){function e(){}return o(e,"modules.gift.GiftRule"),s(1,e,"FUTURE_GIFT2",function(){return null==e._FUTURE_GIFT3&&(v.OPEN_PAYMENT&&!v.IS_GLOBAL_VERSION?e._FUTURE_GIFT3={id:301,name:"3元大礼",level:2,payId:604,rmb:3,desc:"可获得19倍元宝收益！！！"}:e._FUTURE_GIFT3={id:301,name:"投资大礼",level:2,payId:604,rmb:3,desc:"可获得19倍元宝收益！！！"}),e._FUTURE_GIFT3}),e._FUTURE_GIFT3=null,n(e,["FUTURE_GIFT18",function(){return this.FUTURE_GIFT18={id:302,name:"成长礼包",level:30,payId:602,rmb:18,desc:"可获得6.66倍元宝收益"}},"FUTURE_GIFT30",function(){return this.FUTURE_GIFT30={id:303,name:"投资礼包",level:60,payId:603,rmb:30,desc:"可获得6倍元宝收益"}}]),e}(),Pi=(function(){function e(){}return o(e,"modules.rolegroup.RolegroupNotification"),e.OPEN_ROLEGROUP_VIEW="OPEN_ROLEGROUP_VIEW",e}(),function(){function e(){}return o(e,"modules.head.HeadNotification"),e.SHOW_HIDE_HEAD_BAR="SHOW_HIDE_HEAD_BAR",e.FRESH_HEAD_BAR="FRESH_HEAD_BAR",e}(),function(){function e(){}return o(e,"modules.handbook.HandbookNotification"),e.OPEN_HANDBOOK_VIEW="OPEN_HANDBOOK_VIEW",e.RECEIVE_HANDBOOK_BATTLE="RECEIVE_HANDBOOK_BATTLE",e.RECEIVE_PLAYER_HANDBOOK="RECEIVE_PLAYER_HANDBOOK",e}(),function(){function e(){}return o(e,"modules.handbook.controller.HandbookCmd"),e.QUERY=1,e.LIGHT_EQUIP=2,n(e,["HANDBOOK_QUERY",function(){return this.HANDBOOK_QUERY="35_1"},"HANDBOOK_LIGHT_EQUIP",function(){return this.HANDBOOK_LIGHT_EQUIP="35_2"}]),e}()),Ri=function(){function e(e){this._obj=null,this._equip2quality=null,this._suitColor=0,this._equip2quality=new uo,this.update(e)}o(e,"modules.handbook.model.PlayerHandbook");var t=e.prototype;return t.update=function(e){if(this._obj=e,this._equip2quality.clear(),this._suitColor=0,null!=this.equips&&""!=this.equips){var t,i=this.equips.split("|"),n=0,o=0;for(var s in i){t=i[s];var r=t.split("_"),a=vo["int"](r[1]);if(a>=6)o+=1;else{if(!(a>=5))continue;n+=1}this._equip2quality.set(vo["int"](r[0]),a)}this.level<0?o>0?this._suitColor=6:n&&(this._suitColor=5):o>=7?this._suitColor=6:n>=7?this._suitColor=5:o+n>=7?this._suitColor=5:this._suitColor=0}},t.getPosArr=function(){var e,t=[];switch(this.level){case Li.SP_EQUIP[0].lv:case Li.SP_EQUIP[2].lv:e=Li.POS_ARR[0];break;case Li.SP_EQUIP[1].lv:case Li.SP_EQUIP[3].lv:e=Li.POS_ARR[1];break;default:e=Li.POS_ARR[2]}var i;for(var n in e)i=e[n],t.push({lv:this.level,p:i,q:this.getPosColor(i)});return t},t.getPosColor=function(e){return this._equip2quality.get(e)},t.getSuitColor=function(){return this._suitColor},t.getLightedNum=function(){return this._equip2quality.keys.length},s(0,t,"level",function(){return this._obj.level}),s(0,t,"equips",function(){return this._obj.equips}),s(0,t,"palyerId",function(){return this._obj.playerId}),e}(),Li=function(){function e(){}return o(e,"modules.handbook.model.HandbookRule"),e.getNeedNum=function(e){switch(e){case 1:return 1;case 2:return 3;case 3:return 9;case 4:return 27;case 5:return 81;case 6:return 243;default:return vo["int"](Math.pow(3,e-1))}},e.getEmptPosArr=function(t){var i,n=[];switch(t){case e.SP_EQUIP[0].lv:case e.SP_EQUIP[2].lv:i=modules.handbook.model.HandbookRule.POS_ARR[0];break;case e.SP_EQUIP[1].lv:case e.SP_EQUIP[3].lv:i=modules.handbook.model.HandbookRule.POS_ARR[1];break;default:i=modules.handbook.model.HandbookRule.POS_ARR[2]}var o;for(var s in i)o=i[s],n.push({lv:t,p:o,q:null});return n},e.OPEN_LEVEL=15,n(e,["KEY_BASE",function(){return this.KEY_BASE=[1201,1202,1106,1107]},"KEY_SUIT",function(){return this.KEY_SUIT=e.KEY_BASE},"SP_EQUIP",function(){return this.SP_EQUIP=[{lv:-40,name:"梼杌披风"},{lv:-55,name:"帝江内甲"},{lv:-70,name:"九婴披风"},{lv:-85,name:"岩蛟内甲"}]},"POS_ARR",function(){return this.POS_ARR=[[8],[9],[1,2,3,4,5,6,7]]}]),e}(),Oi=function(){function e(){this._obj=null,this._suitIdSet=null,this._suit2bookMap=null,this._suitAttr=null,this._suitIdSet=new go,this._suit2bookMap=new uo,this._suitAttr=new uo}o(e,"modules.handbook.model.HandbookBattle");var t=e.prototype;return t.clear=function(){this._obj=null,this._suitIdSet.clear(),this._suit2bookMap.clear(),this._suitAttr.clear()},t.update=function(e,t){if(void 0===t&&(t=!1),this._obj=e,this._suitIdSet.clear(),null!=this.suitIds&&""!=this.suitIds){var i,n=this.suitIds.split("|");for(var o in n){i=n[o];var s=vo["int"](i);this.addSuit(s)}}t&&this._suitAttr.clear();var r=0;if(this.keys)for(r=0;r<this.keys.length;r++)this._suitAttr.set(this.keys[r],this.values[r]);if(this._obj.books&&this._obj.books.length>0){var a;for(var l in this._obj.books){a=this._obj.books[l];var h=new Ri(a);this.setBook(h.level,h)}}},t.addSuit=function(e){this._suitIdSet.add(e)},t.getSuitIdSet=function(){return this._suitIdSet},t.getBook=function(e){return this._suit2bookMap.get(e)},t.setBook=function(e,t){this._suitIdSet.add(e),this._suit2bookMap.set(e,t)},t.isInited=function(){return null!=this._obj},s(0,t,"suitAttr",function(){return this._suitAttr}),s(0,t,"suitIds",function(){return this._obj.suitIds}),s(0,t,"values",function(){return this._obj.values}),s(0,t,"keys",function(){return this._obj.keys}),e}(),Mi=function(){function e(){}return o(e,"modules.alcm.controller.AlcmCmd"),e.LIST=0,e.DONATE=1,e.LINE_ON=2,e.LINE_OFF=3,e.TAKE_AWARD=4,e.LOGS=5,e.VIDEO=6,e.TAKE_AWARD_GOLD=7,e.PUSH_CHG=101,n(e,["ALCM_LIST",function(){return this.ALCM_LIST="44_0"},"ALCM_DONATE",function(){return this.ALCM_DONATE="44_1"},"ALCM_LINE_ON",function(){return this.ALCM_LINE_ON="44_2"},"ALCM_LINE_OFF",function(){return this.ALCM_LINE_OFF="44_3"},"ALCM_TAKE_AWARD",function(){return this.ALCM_TAKE_AWARD="44_4"},"ALCM_TAKE_AWARD_GOLD",function(){return this.ALCM_TAKE_AWARD_GOLD="44_7"},"ALCM_LOGS",function(){return this.ALCM_LOGS="44_5"},"ALCM_VIDEO",function(){return this.ALCM_VIDEO="44_6"},"ALCM_PUSH_CHG",function(){return this.ALCM_PUSH_CHG="44_101"}]),e}(),Di=(function(){function e(){this.mineIdA=NaN,this.indexA=0,this.nameA=null,this.type=0,this.mineIdB=NaN,this.indexB=0,this.nameB=null,this.value=0,this.videoId=null,this.time=NaN}return o(e,"modules.alcm.model.AlcMineLog"),e.TYPE_DIGING=0,e.TYPE_FIGHT=1,e.TYPE_POOR=2,e}(),function(){function e(){}return o(e,"modules.alcm.model.AlcmRule"),e.queryDonatePrice=function(e){if(null==e||e.quality<5)return 0;if(1==e.propType)return e.quality<=5?0:25;if(2==e.propType)return e.quality<=5?5:25;if(3==e.propType)switch(e.level){case 25:return e.quality<=5?25:75;case 40:return e.quality<=5?50:150;case 50:return e.quality<=5?75:225;case 99:case 100:return e.quality<=5?225:675;default:return e.quality<=5?25:75}return 0},e.queryExpPrice=function(e){if(null==e||e.quality<5)return 0;if(1==e.propType)return 5==e.quality?0:5;if(2==e.propType)return e.quality<=5?1:5;if(3==e.propType)switch(e.level){case 25:return e.quality<=5?5:15;case 40:return e.quality<=5?10:30;case 50:return e.quality<=5?15:45;case 99:case 100:return e.quality<=5?45:135;default:return e.quality<=5?5:15}return 0},e.getBoxMaxPerDay=function(e){return 12>e?e+4:16},e.chgTeamFreeTime=function(){var e=ro.newDate(g.clock.currentTime),t=e.getMinutes(),i=e.getHours();return i>20&&23>=i||20==i&&t>5},e}()),ki=function(){function e(e){this.id=NaN,this.allianceId=NaN,this.index=0,this.iron=0,this.wintime=0,this.losetime=0,this.group=null,this.mids=null,this.mids=new Array(3),this.update(e)}o(e,"modules.alcm.model.AlcMine");var t=e.prototype;return t.update=function(e){this.id=e.id,this.allianceId=e.allianceId,this.index=e.index,this.iron=e.iron,this.wintime=e.wintime,this.losetime=e.losetime,this.group=e.group;for(var t=0;3>t;t++)this.mids[t]=null;if(null==this.group||""==this.group);else{var i=this.group.split("_");for(t=0;t<i.length&&3>t;t++)this.mids[t]=vo["int"](i[t])}},e}(),Bi=(function(){function e(){}return o(e,"modules.alcm.AlcmNotification"),e.OPEN_ALCM_PAGE="OPEN_ALCM_PAGE",e.OPEN_ALCM_DONATE_PAGE="OPEN_ALCM_DONATE_PAGE",e.OPEN_ALCM_LINEUP_PAGE="OPEN_ALCM_LINEUP_PAGE",e.OPEN_ALCM_LOGS_PAGE="OPEN_ALCM_LOGS_PAGE",e.RECEIVE_ALCM_LIST="RECEIVE_ALCM_LIST",e.RECEIVE_ALCM_CHG="RECEIVE_ALCM_CHG",e.RECEIVE_ALCM_LOGS="RECEIVE_ALCM_LOGS",e.RECEIVE_ALCM_VIDEO_DETAIL="RECEIVE_ALCM_VIDEO_DETAIL",e}(),function(){function e(){}return o(e,"modules.samsara.controller.SamsaraCmd"),e.INFO=1,e.MOVE=2,e.FIGHT=3,e.CHALLENGE=4,e.DROP_CHALLENGE=5,n(e,["MERIDIAN_INFO",function(){return this.MERIDIAN_INFO="53_1"},"MERIDIAN_MOVE",function(){return this.MERIDIAN_MOVE="53_2"},"MERIDIAN_FIGHT",function(){return this.MERIDIAN_FIGHT="53_3"},"MERIDIAN_CHALLENGE",function(){return this.MERIDIAN_CHALLENGE="53_4"},"MERIDIAN_DROP_CHALLENGE",function(){return this.MERIDIAN_DROP_CHALLENGE="53_5"}]),e}()),Vi=function(){function e(){}return o(e,"modules.samsara.model.SamsarRule"),e.queryAwards=function(e,t){for(var i,n,o=0,s=0,r=0,a=new uo,l=0,h=0,c=e;t>=c;c++){if(i=g.database.getData("samsara",c),null==i)return;o+=i.awdGas,i.awdProp>0&&(n=a.get(i.awdProp),null==n&&(n=0),a.set(i.awdProp,n+1)),s+=i.awdAttack,r+=i.awdDefense,l+=i.awdHP,h+=i.awdMP}return{gas:o,props:a,attack:s,defense:r,hp:l,mp:l,endcfg:i}},e.OPEN_LEVEL=38,e.MOVE_CD=300,e.MAX_BASE_ID=96,e}(),Fi=function(){function e(){this.playerId=0,this.hp=0,this.hpMax=0,this.mp=0,this.mpMax=0,this.baseId=0,this.x=0,this.y=0,this.moveCd=0,this.fighting=!1,this.mapStr=null,this.challengeId=0,this.hasMonster=0,this._points=null,this._points=[];for(var e=0;9>e;e++)this._points.push([])}o(e,"modules.samsara.model.PlayerSamsara");var t=e.prototype;return t.update=function(e){this.playerId=e.id,this.hp=e.hp,this.hpMax=e.hpMax,this.mp=e.mp,this.mpMax=e.mpMax,this.baseId=e.baseId,this.challengeId=e.challengeId,this.x=e.x,this.y=e.y,this.moveCd=e.moveCd,this.fighting=e.fighting,this.hasMonster=0,this.mapStr=e.grads;var t=this.mapStr.split(",");if(108==t.length)for(var i=0;i<t.length;i++){var n=vo["int"](i/9),o=i%9,s=vo["int"](t[i]);this._points[o][n]=s,s>0&&6>s&&(this.hasMonster+=1)}},t.getP=function(e,t){return this._points[e][t]},t.getArroundMonsterEffect=function(e,t){var i=this.getP(e,t),n=0,o=0,s=0;o=e-1,o>=0&&(s=this.getP(o,t),this.isMonster(s)&&(R.isBorn(s,i)?n+=1:R.isHurt(s,i)&&(n-=1))),o=e+1,9>o&&(s=this.getP(o,t),this.isMonster(s)&&(R.isBorn(s,i)?n+=1:R.isHurt(s,i)&&(n-=1))),
o=t-1,o>=0&&(s=this.getP(e,o),this.isMonster(s)&&(R.isBorn(s,i)?n+=1:R.isHurt(s,i)&&(n-=1))),o=t+1,12>o&&(s=this.getP(e,o),this.isMonster(s)&&(R.isBorn(s,i)?n+=1:R.isHurt(s,i)&&(n-=1)));var r=0;return o=e-1,r=t-1,o>=0&&r>=0&&(s=this.getP(o,r),this.isMonster(s)&&(R.isBorn(s,i)?n+=1:R.isHurt(s,i)&&(n-=1))),o=e+1,r=t-1,9>o&&r>=0&&(s=this.getP(o,r),this.isMonster(s)&&(R.isBorn(s,i)?n+=1:R.isHurt(s,i)&&(n-=1))),o=e-1,r=t+1,o>=0&&12>r&&(s=this.getP(o,r),this.isMonster(s)&&(R.isBorn(s,i)?n+=1:R.isHurt(s,i)&&(n-=1))),o=e+1,r=t+1,9>o&&12>r&&(s=this.getP(o,r),this.isMonster(s)&&(R.isBorn(s,i)?n+=1:R.isHurt(s,i)&&(n-=1))),n},t.isMonster=function(e){return e>0&&6>e},e.W=9,e.H=12,e.TYPE_EMPTY=0,e.TYPE_BLOCK=9,e.TYPE_DRUG=8,e.TYPE_TRAP=7,e}(),Gi=(function(){function e(){}return o(e,"modules.samsara.SamsaraNotification"),e.RECEIVE_SAMSARA="RECEIVE_SAMSARA",e.OPEN_SAMSARA="OPEN_SAMSARA",e}(),function(){function e(){}return o(e,"modules.star.controller.StarCmd"),e.QUERY=1,e.UPGRADE=2,n(e,["STAR_QUERY",function(){return this.STAR_QUERY="13_1"},"STAR_UPGRADE",function(){return this.STAR_UPGRADE="13_2"}]),e}()),Hi=(function(){function e(){}return o(e,"modules.star.StarNotification"),e.OPEN_STAR_VIEW="OPEN_STAR_VIEW",e.RECEIVE_STAR_INFO="RECEIVE_STAR_INFO",e}(),function(){function e(e){this.dic=null,this.dicFail=null,this.dic=new uo,this.dicFail=new uo,this.update(e)}o(e,"modules.star.model.PlayerStar");var t=e.prototype;return t.clear=function(){this.dic.clear(),this.dicFail.clear()},t.update=function(e){var t,i,n,o=e.split(",");if(o.length>0){i=o[0].split("|");var s;for(s in i)t=i[s],n=t.split("_"),2==n.length&&this.dic.set(vo["int"](n[0]),vo["int"](n[1]))}if(o.length>1){i=o[1].split("|");var s;for(s in i)t=i[s],n=t.split("_"),2==n.length&&this.dicFail.set(vo["int"](n[0]),vo["int"](n[1]))}},t.getStar=function(e){var t=this.dic.get(e);return t?t:0},t.getFail=function(e){var t=this.dicFail.get(e);return t?t:0},e}()),Ui=function(){function e(){}return o(e,"modules.star.model.StarRule"),e.getSuccPercentAdd=function(e,t){return t},e.getHoldTime=function(e,t){var i=2147483647;if(10>=e)switch(t){case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:i=t-2;break;case 15:i=14;break;case 16:i=16;break;case 17:i=18;break;case 18:i=20;break;case 19:i=22}return i},e.STAR_MAX_LV=20,e.STAR_STONE=500001,e.PROTECTED_STONE=500002,e.STAR_STONE_PROP_EQ_GOLDEN=100,e}(),zi=function(){function e(){}return o(e,"modules.activitypayweek.controller.ActivityPayWeekCmd"),e.QUERY=1,e.TAKE_AWARD=2,n(e,["ACTIVITY_PAY_WEEK_QUERY",function(){return this.ACTIVITY_PAY_WEEK_QUERY="50_1"},"ACTIVITY_PAY_WEEK_BUY",function(){return this.ACTIVITY_PAY_WEEK_BUY="50_2"}]),e}(),Wi=(function(){function e(){this.playerId=0,this.awardId=0,this.actTime=NaN}return o(e,"modules.activitypayweek.model.ActivityPayWeek"),e}(),function(){function e(){}return o(e,"modules.activitypayweek.ActivityPayWeekNotification"),e.SHOW_ACTIVIT_PAY_WEEK_PAGE="SHOW_ACTIVIT_PAY_WEEK_PAGE",e.ACTIVIT_PAY_WEEK_INFO="ACTIVIT_PAY_WEEK_INFO",e.ACTIVIT_PAY_WEEK_INFO_NOTIFICATION="ACTIVIT_PAY_WEEK_INFO_NOTIFICATION",e}(),function(){function e(){}return o(e,"modules.alcboss.AlcBossNotification"),e.OPEN_ALC_BOSS_PAGE="OPEN_ALC_BOSS_PAGE",e.RECIEVE_ALC_BOSS="RECIEVE_ALC_BOSS",e.RECIEVE_PLAYER_ALC_BOSS="RECIEVE_PLAYER_ALC_BOSS",e.OPEN_ALC_BOSS_RANK_PAGE="OPEN_ALC_BOSS_RANK_PAGE",e.RECIEVE_ALC_BOSS_RANK="RECIEVE_ALC_BOSS_RANK",e.OPEN_ALC_BOSS_LOG_PAGE="OPEN_ALC_BOSS_LOG_PAGE",e.RECIEVE_ALC_BOSS_LOG="RECIEVE_ALC_BOSS_LOG",e.OPEN_ALC_BOSS_PASS_RANK="OPEN_ALC_BOSS_PASS_RANK",e.RECIVE_ALC_BOSS_PASS_RANK="RECIVE_ALC_BOSS_PASS_RANK",e}(),function(){function e(){}return o(e,"modules.alcboss.controller.AlcBossCmd"),e.QUERY_PLAYER_BOSS=0,e.QUERY_BOSS=1,e.LIST_RANK=2,e.LIST_LOGS=3,e.FIGHT=4,e.AUTHORIZE=5,e.RESET_BOSS=6,e.BOSS_RANK=7,e.TAKE_AWARD=8,n(e,["ALCBOSS_QUERY_PLAYER_BOSS",function(){return this.ALCBOSS_QUERY_PLAYER_BOSS="41_0"},"ALCBOSS_QUERY_BOSS",function(){return this.ALCBOSS_QUERY_BOSS="41_1"},"ALCBOSS_LIST_RANK",function(){return this.ALCBOSS_LIST_RANK="41_2"},"ALCBOSS_LIST_LOGS",function(){return this.ALCBOSS_LIST_LOGS="41_3"},"ALCBOSS_FIGHT",function(){return this.ALCBOSS_FIGHT="41_4"},"ALCBOSS_TAKE_AWARD",function(){return this.ALCBOSS_TAKE_AWARD="41_8"},"ALCBOSS_AUTHORIZE",function(){return this.ALCBOSS_AUTHORIZE="41_5"},"ALCBOSS_RESET_BOSS",function(){return this.ALCBOSS_RESET_BOSS="41_6"},"ALCBOSS_BOSS_RANK",function(){return this.ALCBOSS_BOSS_RANK="41_7"}]),e}()),Yi=function(){function e(){}return o(e,"modules.alcboss.model.AlcBossRule"),e.getBossNature=function(e){return(e-1)%5+1},e.getBossName=function(t){var i=e.getBossNature(t);return e.NAMES[i-1]},e.getBossLevel=function(e){return 25+5*e},e.OPNE_ALC_LEVEL=2,e.OPNE_HERO_LEVEL=25,e.MAX_FIGHT_TIME=1,e.RESET_CD_DAY=30,n(e,["NAMES",function(){return this.NAMES=["当康","混沌","厉风","傲因","饕餮"]}]),e}(),qi=function(){function e(){this.playerId=NaN,this.maxPassId=0,this.currentId=0,this.hpDamage=0,this.fightTime=0,this.goldAward=0,this.pieceAward=0}return o(e,"modules.alcboss.model.data.PlayerAlcBoss"),e}(),Ki=(function(){function e(){this.id=0,this.type=0,this.alcId=NaN,this.playerId=NaN,this.donate=0,this.awards=null,this.actTime=NaN}return o(e,"modules.alcboss.model.data.AlcBossLog"),e.TYPE_COMMON=0,e.TYPE_KILLED=1,e}(),function(){function e(){this.alcId=NaN,this.baseId=0,this.hp=0,this.hpMax=0,this.maxPassed=0,this.authorizeId=NaN,this.resetDate=NaN}return o(e,"modules.alcboss.model.data.AlcBoss"),e}(),function(){function e(){this.playerId=NaN,this.name=null,this.hpDamage=0,this.percent=0,this.fighted=0}return o(e,"modules.alcboss.model.data.AlcBossRank"),e}(),function(){function e(){}return o(e,"modules.petpvp.PetPvpRule"),e.MAX_FIGHT_ONEDAY=20,e.ROOM_MEMEBER_SIZE=20,e}(),function(){function e(){}return o(e,"modules.petpvp.PetPvpNotification"),e.OPEN_PET_PVP_PAGE="OPEN_PET_PVP_PAGE",e.RECEIVE_PET_PVP_INFO="RECEIVE_PET_PVP_INFO",e.RECEIVE_PET_PVP_ROOM="RECEIVE_PET_PVP_ROOM",e}(),function(){function e(){}return o(e,"modules.petpvp.controller.PetPvpCmd"),e.QUERY_INFO=1,e.QUERY_ROOM=2,e.FIGHT=3,n(e,["PET_PVP_QUERY_INFO",function(){return this.PET_PVP_QUERY_INFO="65_1"},"PET_PVP_QUERY_ROOM",function(){return this.PET_PVP_QUERY_ROOM="65_2"},"PET_PVP_FIGHT",function(){return this.PET_PVP_FIGHT="65_3"}]),e}()),Xi=(function(){function e(){this.players=null,this.logs=null}return o(e,"modules.petpvp.model.PetPvpRoom"),e}(),function(){function e(){this.playerId=NaN,this.name=null,this.level=0,this.natue=0}return o(e,"modules.petpvp.model.PetPvpPlayer"),e}(),function(){function e(){this.id=NaN,this.name=null,this.action=0,this.win=!1,this.rate=0}return o(e,"modules.petpvp.model.PetPvpLog"),e.build=function(e){var t="";switch(e.action){case 1:t="【您】挑战【"+e.name+"】";break;case 2:t="【"+e.name+"】挑战【您】";break;case 3:t="【您】遇到【"+e.name+"】";break;case 4:t="【"+e.name+"】遇到【您】"}return e.rate>0?t=t+"，您获得胜利，寻宝概率+"+e.rate/100+"%":e.rate<0&&(t=t+"，您被打败，寻宝概率"+e.rate/100+"%"),t},e}()),Qi=(function(){function e(){this.playerId=NaN,this.maxGrad=0,this.dropRate=0,this.fighted=0}return o(e,"modules.petpvp.model.PlayerPetPvp"),e}(),function(){function e(){}return o(e,"modules.pet.PetNotification"),e.SHOW_PET_PAGE="SHOW_PET_PAGE",e.SHOW_PET_SHOP_PAGE="SHOW_PET_SHOP_PAGE",e.SHOW_PET_UPGRADE_PAGE="SHOW_PET_UPGRADE_PAGE",e.SHOW_PET_FEED_ORANGE_DRUG_PAGE="SHOW_PET_FEED_ORANGE_DRUG_PAGE",e.SHOW_PET_CHG_NATURE_PAGE="SHOW_PET_CHG_NATURE_PAGE",e.SHOW_PET_ORANGE_GHOST_PAGE="SHOW_PET_ORANGE_GHOST_PAGE",e.SHOW_PET_CHG_GHOST_NATURE_PAGE="SHOW_PET_CHG_GHOST_NATURE_PAGE",e.RECEIVE_PET_SHOP="RECEIVE_PET_SHOP",e.RECEIVE_PET_LIST="RECEIVE_PET_LIST",e.RECEIVE_PET_ATTRIBUTES="RECEIVE_PET_ATTRIBUTES",e.RECEIVE_PET_CHANGE="RECEIVE_PET_CHANGE",e.RECEIVE_PET_NEW="RECEIVE_PET_NEW",e.RECEIVE_PET_DROP="RECEIVE_PET_DROP",e.RECEIVE_PET_SKILL="RECEIVE_PET_SKILL",e}(),function(){function e(){}return o(e,"modules.pet.PetSkillHelper"),e.renderSkill=function(e,t,i,n){var o=g.database.getData("petskill",t);if(o){var s=e.getChildByName("bg"),r=e.getChildByName("nature"),a=e.getChildByName("name"),l=e.getChildByName("type"),h=e.getChildByName("info");if(s.index=i-1,a.text=o.name,a.color=N.getColor(i),16>t?(l.text="【战技】",l.color="#fffc00"):(l.text="【绝技】",l.color="#e70626"),r.index=o.nature-1,r.x=a.x+a.width,h.text=o.getInfo(i),n){var c=e.getChildByName("spInfo");c.text=o.getSpInfo(i)}}else console.log("not find petskill:"+t)},e.renderSkillEmpty=function(e,t){var i=e.getChildByName("bg"),n=e.getChildByName("nature"),o=e.getChildByName("name"),s=e.getChildByName("type"),r=e.getChildByName("info");i.index=0,n.index=-1,o.text="未装备",o.color=N.getColor(1),2>t?(s.text="【战技】",s.color="#fffc00"):(s.text="【绝技】",s.color="#e70626"),r.text="";var a=e.getChildByName("spInfo");a&&(a.text="")},e}()),ji=(function(){function e(){}return o(e,"modules.pet.PetEquipNotification"),e.SHOW_PET_EQUIP_PAGE="SHOW_PET_EQUIP_PAGE",e.SHOW_PET_EQUIP_CHG_PAGE="SHOW_PET_EQUIP_CHG_PAGE",e.SHOW_PET_EQUIP_STAR_PAGE="SHOW_PET_EQUIP_STAR_PAGE",e.SHOW_PET_EQUIP_FEED_PAGE="SHOW_PET_EQUIP_FEED_PAGE",e.SHOW_PET_EQUIP_FEEDUP_PAGE="SHOW_PET_EQUIP_FEEDUP_PAGE",e.SHOW_PET_EQUIP_REFINE_PAGE="SHOW_PET_EQUIP_REFINE_PAGE",e.SHOW_PET_EQUIP_BREAK_PAGE="SHOW_PET_EQUIP_BREAK_PAGE",e.RECEIVE_PET_EQUIP_INFO="RECEIVE_PET_EQUIP_INFO",e.RECEIVE_PET_EQUIP_CHG="RECEIVE_PET_EQUIP_CHG",e.RECEIVE_PET_EQUIP_FEED="RECEIVE_PET_EQUIP_FEED",e.RECEIVE_PET_EQUIP_STAR="RECEIVE_PET_EQUIP_STAR",e}(),function(){function e(){}return o(e,"modules.pet.PetSkillNotification"),e.OPEN_PET_SKILL_DRESS="OPEN_PET_SKILL_DRESS",e.OPEN_PET_SKILL_DRESS_SELECT="OPEN_PET_SKILL_DRESS_SELECT",e.OPEN_PET_SKILL_UPGRADE="OPEN_PET_SKILL_UPGRADE",e.OPEN_PET_SKILL_OPENAWARD="OPEN_PET_SKILL_OPENAWARD",e.OPEN_PET_SKILL_BOOK="OPEN_PET_SKILL_BOOK",e}(),function(){function e(){}return o(e,"modules.pet.controller.PetSkillCmd"),e.QUERY=1,e.UPGRADE=2,e.DRESS=3,e.RECOVER=4,e.OPEN_BOX_ONCE=10,e.OPEN_BOX_TEN=11,n(e,["PET_SKILL_QUERY",function(){return this.PET_SKILL_QUERY="57_1"},"PET_SKILL_UPGRADE",function(){return this.PET_SKILL_UPGRADE="57_2"},"PET_SKILL_DRESS",function(){return this.PET_SKILL_DRESS="57_3"},"PET_SKILL_RECOVER",function(){return this.PET_SKILL_RECOVER="57_4"},"PET_SKILL_OPEN_BOX_ONCE",function(){return this.PET_SKILL_OPEN_BOX_ONCE="57_10"},"PET_SKILL_OPEN_BOX_TEN",function(){return this.PET_SKILL_OPEN_BOX_TEN="57_11"}]),e}()),Zi=function(){function e(){}return o(e,"modules.pet.controller.PetCmd"),e.LIST=1,e.QUERY_ATTRIBUTES=2,e.DROP=3,e.FIGHT_ON=4,e.FEED=5,e.QUERY_DRESS_GHOST=6,e.DRESS_GHOST=7,e.TAKE_OFF_GHOST=8,e.MIX_GHOST=9,e.DECOMPOSE_GHOST=10,e.UN_MIX_GHOST_PIECE=11,e.FEED_QUALITY_DRUG=12,e.FEED_ORANGE_DRUG=14,e.TWO_MIX_ONE=15,e.MAKE_ORANGE_GHOST=16,e.FEED_GROW_DRUG=17,e.CHG_GHOST_NATURE=18,e.FEED_NATURE_DRUG=19,n(e,["PET_LIST",function(){return this.PET_LIST="15_1"},"PET_QUERY_ATTRIBUTES",function(){return this.PET_QUERY_ATTRIBUTES="15_2"},"PET_DROP",function(){return this.PET_DROP="15_3"},"PET_FIGHT_ON",function(){return this.PET_FIGHT_ON="15_4"},"PET_FEED",function(){return this.PET_FEED="15_5"},"PET_QUERY_DRESS_GHOST",function(){return this.PET_QUERY_DRESS_GHOST="15_6"},"PET_DRESS_GHOST",function(){return this.PET_DRESS_GHOST="15_7"},"PET_TAKE_OFF_GHOST",function(){return this.PET_TAKE_OFF_GHOST="15_8"},"PET_MIX_GHOST",function(){return this.PET_MIX_GHOST="15_9"},"PET_DECOMPOSE_GHOST",function(){return this.PET_DECOMPOSE_GHOST="15_10"},"PET_UN_MIX_GHOST_PIECE",function(){return this.PET_UN_MIX_GHOST_PIECE="15_11"},"PET_FEED_QUALITY_DRUG",function(){return this.PET_FEED_QUALITY_DRUG="15_12"},"PET_FEED_ORANGE_DRUG",function(){return this.PET_FEED_ORANGE_DRUG="15_14"},"PET_TWO_MIX_ONE",function(){return this.PET_TWO_MIX_ONE="15_15"},"PET_MAKE_ORANGE_GHOST",function(){return this.PET_MAKE_ORANGE_GHOST="15_16"},"PET_FEED_GROW_DRUG",function(){return this.PET_FEED_GROW_DRUG="15_17"},"PET_CHG_GHOST_NATURE",function(){return this.PET_CHG_GHOST_NATURE="15_18"},"PET_FEED_NATURE_DRUG",function(){return this.PET_FEED_NATURE_DRUG="15_19"}]),e}(),Ji=function(){function e(){}return o(e,"modules.pet.controller.PetEquipCmd"),e.QUERY_INFO=1,e.IDENTIFY=2,e.DRESS=3,e.FEED_METERIAL=4,e.UPGRADE_FEED=5,e.REFINE=6,e.REFINE_AUTO=7,e.UPGRADE_STAR=8,n(e,["PETEQ_QUERY_INFO",function(){return this.PETEQ_QUERY_INFO="64_1"},"PETEQ_IDENTIFY",function(){return this.PETEQ_IDENTIFY="64_2"},"PETEQ_DRESS",function(){return this.PETEQ_DRESS="64_3"},"PETEQ_FEED_METERIAL",function(){return this.PETEQ_FEED_METERIAL="64_4"},"PETEQ_UPGRADE_FEED",function(){return this.PETEQ_UPGRADE_FEED="64_5"},"PETEQ_REFINE",function(){return this.PETEQ_REFINE="64_6"},"PETEQ_REFINE_AUTO",function(){return this.PETEQ_REFINE_AUTO="64_7"},"PETEQ_UPGRADE_STAR",function(){return this.PETEQ_UPGRADE_STAR="64_8"}]),e}(),$i=function(){function e(){}return o(e,"modules.pet.controller.PetShopCmd"),e.QUERY=1,e.FRESH=2,e.FRESH_AUTO=3,e.TAKE_ONE=4,e.FRESH_USE_FRUIT=5,e.FRESH_USE_QUALITY=6,e.TAKE_BY_PROP=7,e.FRESH_FREE=8,e.FRESH_USE_FRUIT_AUTO=9,n(e,["PET_SHOP_QUERY",function(){return this.PET_SHOP_QUERY="16_1"},"PET_SHOP_FRESH",function(){return this.PET_SHOP_FRESH="16_2"},"PET_SHOP_FRESH_AUTO",function(){return this.PET_SHOP_FRESH_AUTO="16_3"},"PET_SHOP_TAKE_ONE",function(){return this.PET_SHOP_TAKE_ONE="16_4"},"PET_SHOP_FRESH_USE_FRUIT",function(){return this.PET_SHOP_FRESH_USE_FRUIT="16_5"},"PET_SHOP_FRESH_USE_QUALITY",function(){return this.PET_SHOP_FRESH_USE_QUALITY="16_6"},"PET_SHOP_TAKE_BY_PROP",function(){return this.PET_SHOP_TAKE_BY_PROP="16_7"},"PET_SHOP_FRESH_FREE",function(){return this.PET_SHOP_FRESH_FREE="16_8"},"PET_SHOP_FRESH_USE_FRUIT_AUTO",function(){return this.PET_SHOP_FRESH_USE_FRUIT_AUTO="16_9"}]),e}(),en=function(){function e(){}return o(e,"modules.pet.type.PetEquipPos"),e.getName=function(t){return t-=1,0>t||t>e.NAMES.length-1?""+t:e.NAMES[t]},e.BELL=1,e.GOURD=2,e.SWORD=3,e.ARMOR=4,e.INTERAL=5,e.MONFIRE=6,n(e,["ARR_ALL",function(){return this.ARR_ALL=[1,2,3,4,5,6]},"NAMES",function(){return this.NAMES=["铃铛","葫芦","飞剑","灵甲","内丹","兽炎"]}]),e}(),tn=function(){function e(){}return o(e,"modules.pet.type.PetType"),n(e,["GHOST_POS",function(){return this.GHOST_POS=["【一阶兽魂】","【二阶兽魂】","【三阶兽魂】","【四阶兽魂】","【五阶兽魂】","【六阶兽魂】","【七阶兽魂】","【八阶兽魂】"]}]),e}(),nn=function(){function e(){this.playerId=NaN,this._exp=NaN,this._suitLv=0,this.feed2Lv=new uo,this.refines=new uo,this.star2Lv=new uo,this.star2Fial=new uo}o(e,"modules.pet.model.PetEquipStar");var t=e.prototype;return t.getFeedLv=function(e){var t=this.feed2Lv.get(e);return null!=t?t:0},t.getExp=function(){return this._exp},t.getRefine=function(e){var t=this.refines.get(e);return null!=t?t:0},t.getStarLv=function(e){var t=this.star2Lv.get(e);return null!=t?t:0},t.getStarFail=function(e){var t=this.star2Fial.get(e);return null!=t?t:0},t.update=function(e){this.playerId=e.playerId,this._exp=e.exp,this.feed2Lv.clear(),this.refines.clear();var t,i,n,o,s=0,r=0;if(t=e.feeds,!lo.isNull(t)){i=t.split("|");var a;for(a in i)n=i[a],o=n.split("_"),2==o.length&&(s=vo["int"](o[0]),r=vo["int"](o[1]),this.feed2Lv.set(s,r))}if(t=e.refines,!lo.isNull(t)){i=t.split("|");var a;for(a in i)n=i[a],o=n.split("_"),2==o.length&&(s=vo["int"](o[0]),r=vo["int"](o[1]),this.refines.set(s,r))}if(t=e.stars,!lo.isNull(t)){i=t.split("|");var a;for(a in i)n=i[a],o=n.split("_"),2==o.length&&(s=vo["int"](o[0]),r=vo["int"](o[1]),this.star2Lv.set(s,r))}if(t=e.fails,!lo.isNull(t)){i=t.split("|");var a;for(a in i)n=i[a],o=n.split("_"),2==o.length&&(s=vo["int"](o[0]),r=vo["int"](o[1]),this.star2Fial.set(s,r))}this._suitLv=1e4;var l;for(l in en.ARR_ALL){s=en.ARR_ALL[l];var h=this.getFeedLv(s);if(0>=h){this._suitLv=0;break}h<this._suitLv&&(this._suitLv=h)}this._suitLv=vo["int"](this._suitLv/5)},s(0,t,"suitLv",function(){return this._suitLv}),e}(),on=function(){function e(e){this._obj=null,this._state=0,this._ghosts=null,this._atrributes=null,this._skill=null,this.petCfg=null,this._skill2level=null,this._skillBook=null,this._ghosts=new uo,this._atrributes=new uo,this.update(e)}o(e,"modules.pet.model.PlayerPet");var t=e.prototype;return t.update=function(e){this._obj=e,this._state=this._obj.state,this.petCfg=g.database.getData("pet",this.baseId),this._ghosts.clear();var t,i=0;if(this._obj.ghosts)for(t=this._obj.ghosts.split("|"),i=0;i<t.length;i++){var n=t[i].split("_");this._ghosts.set(vo["int"](n[0]),Number(n[1]))}var o=sn.getSkillGrad(this.petCfg.quality);for(this._skill=[],i=0;o>i;i++)this._skill.push(0);if(null!=this._obj.skills&&""!=this._obj.skills)for(t=this._obj.skills.split("_"),i=0;i<t.length;i++)this._skill[i]=vo["int"](t[i]);return this},t.updateAttributes=function(e){this._atrributes.clear();for(var t=0;t<e.keys.length;t++){var i=p.valueOf(e.values[t]);i&&this._atrributes.set(e.keys[t],i)}},t.updateSkillLevel=function(e){if(this._skill2level=new uo,this._skillBook=new Array,null!=e&&""!=e){var t;t=e.split("|");var i;for(var n in t){i=t[n];var o=i.split("_"),s={id:vo["int"](o[0]),lv:vo["int"](o[1])};if(this._skill2level.set(s.id,s.lv),s.lv>0){var r=g.database.getData("petskill",s.id);s.cfg=r,this._skillBook.push(s)}}this._skillBook.sort(ln.compareFunctionBook)}},t.getSkillLv=function(e){var t=this._skill2level.get(e);return null==t?0:t},t.listSkillBook=function(){return this._skillBook},t.getRealName=function(){return this.nickName?this.nickName:this.petCfg.name},t.getRealQuality=function(){return this.color>6?this.color:this.petCfg.quality},t.getQrangeQualityLeveLAdd=function(){return this.color>6?10:0},s(0,t,"playerId",function(){return this._obj.playerId}),s(0,t,"nickName",function(){return this._obj.nickName}),s(0,t,"state",function(){return this._state},function(e){this._state=e}),s(0,t,"color",function(){return this._obj.color}),s(0,t,"ghosts",function(){return this._ghosts}),s(0,t,"attributes",function(){return this._atrributes}),s(0,t,"growAdd",function(){return this._obj.growDrug}),s(0,t,"level",function(){return this._obj.level}),s(0,t,"qualityLevel",function(){return this._obj.qualityLevel}),s(0,t,"addQuality",function(){return this._obj.addQuality}),s(0,t,"skill",function(){return this._skill}),s(0,t,"baseId",function(){return this._obj.baseId}),s(0,t,"id",function(){return this._obj.id}),e.STATE_FREE=0,e.STATE_FIGHTING=1,e.STATE_ABANDON=-1,e}(),sn=function(){function e(){}return o(e,"modules.pet.model.PetRule"),e.getSkillGrad=function(e){switch(e){case 3:return 1;case 4:return 2;case 5:return 3;case 6:return 4}return 0},e.getNeedSilver=function(e,t){switch(t){case 2:return 1e6;case 3:return 3e6;case 4:return 9e6;case 5:return 27e6;case 6:return 81e6;default:return 1e8}},e.getNeedPiece=function(e,t){switch(t){case 2:return 15>=e?120:420;case 3:return 15>=e?360:1260;case 4:return 15>=e?1080:3780;case 5:return 15>=e?3420:11340;case 6:return 15>=e?9720:34020;default:return 1e6}},e.PET_SKILL_OPEN_LEVEL=50,e.SKILL_BOX_ID=500024,e.ONCE_OPEN_NEED_GOLD=60,e.TEN_OPEN_NEED_GOLD=500,e.PET_BLOOD_KEY_ID=4e4,e.PET_BLOOD_LONG=40001,e}(),rn=(function(){function e(){this.playerId=NaN,this.count=0,this.addValue=0,this.starInfo=null}return o(e,"modules.pet.model.PetEquipAutoRefine"),e}(),function(){function e(){this.obj=null,this.ids=null,this.ids=new Array}o(e,"modules.pet.model.PetShop");var t=e.prototype;return t.update=function(e){this.obj=e,this.ids.length=0;var t,i=e.petIds.split("|");for(var n in i)t=i[n],this.ids.push(vo["int"](t))},s(0,t,"freshTime",function(){return this.obj.freshTime}),s(0,t,"petIds",function(){return this.ids}),e}()),an=function(){function e(){}return o(e,"modules.pet.model.PetEquipRule"),e.getQuality=function(e){return e%=100,vo["int"](e/2)+1},e.getSacred=function(e){var t=e%100,i=g.database.getData("petequipext",t);return null==i?0:i.sacred},e.getFeedAdd=function(e,t){var i=e,n=vo["int"](t*i/100);return 1>n&&(n=1),n},e.getStarAdd=function(e,t){var i=Math.pow(1.1,e)-1,n=vo["int"](t*i);return 1>n&&(n=1),n},e.queryMaxFeedLevel=function(e){var t=g.database.getData("petequipext",e);return null==t?0:t.maxLevel},e.queryMaterialExp=function(t){return e.queryMaterialExpSimple(t.prefix,t.quality)},e.queryMaterialExpSimple=function(e,t){return 100*e*t},e.queryFeedUpNeedExp=function(e){if(e+=1,1>e||e>500)return 0;if(50>=e)return 500*e;var t=Math.floor(e/50);return t=vo["int"](t),500*e*t},e.queryFeedUpNeedRedStone=function(e){return e+=1,1>e||e>500?0:e%5==0?e%20==0?4:2:0},e.queryFeedUpNeedPurpleStone=function(e){return e+=1,1>e||e>500?0:e%5==0?e%20==0?2:1:0},e.queryMaxRefineAdd=function(e){var t=g.database.getData("petequipext",e);return null==t?0:t.maxRefine},e.OPEN_LEVEL=100,e.REFINE_STONE_ID=500026,e.PET_EQUIP_DUNGEON_MINID=100,e}(),ln=function(){function e(){this.playerId=NaN,this.piece=NaN,this.totalGold=0,this.skillDic=null,this.skillAll=null,this.skillBook=null,this.baseLearn=null,this.fightLearn=null,this.skillDic=new uo,this.skillAll=[],this.skillBook=[],this.baseLearn=[],this.fightLearn=[]}o(e,"modules.pet.model.PlayerPetSkill");var t=e.prototype;return t.update=function(t){this.playerId=t.playerId,this.piece=t.piece,this.totalGold=t.totalGold;var i=t.skill,n=i.split("|");this.skillDic.clear();var o,s=0,r=0;for(var a in n){o=n[a];var l=o.split("_");s=vo["int"](l[0]),r=vo["int"](l[1]),this.skillDic.set(s,r)}this.skillAll.length=0,this.skillBook.length=0;var h;for(s=1;30>=s;s++){r=this.getLevel(s),this.skillAll.push({id:s,lv:r});var c=g.database.getData("petskill",s);this.skillBook.push({id:s,lv:r,cfg:c})}for(s=41;54>=s;s++){var u=this.skillDic.get(s);null!=u&&(this.skillAll.push({id:s,lv:u}),c=g.database.getData("petskill",s),this.skillBook.push({id:s,lv:u,cfg:c}))}this.skillAll.sort(this.compareFunction),this.baseLearn.length=0,this.fightLearn.length=0;var d;for(d in this.skillAll)h=this.skillAll[d],h.lv<=0||(h.id<=15?this.baseLearn.push(h):this.fightLearn.push(h));this.skillBook.sort(e.compareFunctionBook)},t.compareFunction=function(e,t){return t.lv-e.lv},t.listBook=function(){return this.skillBook},t.listAll=function(){return this.skillAll},t.listBaseSkills=function(){return this.baseLearn},t.listFightSkills=function(){return this.fightLearn},t.getLevel=function(e){var t=this.skillDic.get(e);return null==t?0:t},e.compareFunctionBook=function(e,t){return e.lv>0&&t.lv<=0?-1:t.cfg.spKey!=e.cfg.spKey?t.cfg.spKey-e.cfg.spKey:t.id-e.id},e}(),hn=function(){function e(){}return o(e,"modules.team.controller.TeamCmd"),e.QUERY_PLAYER_TEAM=1,e.LIST_TEAM=2,e.QUERY_MEMBER_INOF=3,e.CREATE=4,e.JOIN=5,e.JOIN_NPC=6,e.LEAVE=7,e.KICK=8,e.CHANGE_LEADER=9,e.CHANGE_POS=10,e.FIGHT=11,e.QUERY_TEAM=12,e.BUY_TIME=13,e.LIST_LOGS=14,e.JOIN_WITH_PWD=15,e.CHG_DUNGEON=16,e.ADD_BY_PROP=90,e.PUSH_TEAM=101,e.PUSH_JOIN=102,e.PUSH_REMOVE=103,e.PUSH_LEADER_CHG=104,e.PUSH_POS_CHG=105,e.PUSH_BREAK=106,e.PUSH_BE_KICK=107,n(e,["TEAM_QUERY_PLAYER_TEAM",function(){return this.TEAM_QUERY_PLAYER_TEAM="32_1"},"TEAM_LIST_TEAM",function(){return this.TEAM_LIST_TEAM="32_2"},"TEAM_QUERY_MEMBER_INOF",function(){return this.TEAM_QUERY_MEMBER_INOF="32_3"},"TEAM_CREATE",function(){return this.TEAM_CREATE="32_4"},"TEAM_JOIN",function(){return this.TEAM_JOIN="32_5"},"TEAM_JOIN_NPC",function(){return this.TEAM_JOIN_NPC="32_6"},"TEAM_LEAVE",function(){return this.TEAM_LEAVE="32_7"},"TEAM_KICK",function(){return this.TEAM_KICK="32_8"},"TEAM_CHANGE_LEADER",function(){return this.TEAM_CHANGE_LEADER="32_9"},"TEAM_CHANGE_POS",function(){return this.TEAM_CHANGE_POS="32_10"},"TEAM_FIGHT",function(){return this.TEAM_FIGHT="32_11"},"TEAM_QUERY_TEAM",function(){return this.TEAM_QUERY_TEAM="32_12"},"TEAM_BUY_TIME",function(){return this.TEAM_BUY_TIME="32_13"},"TEAM_LIST_LOGS",function(){return this.TEAM_LIST_LOGS="32_14"},"TEAM_JOIN_WITH_PWD",function(){return this.TEAM_JOIN_WITH_PWD="32_15"},"TEAM_CHG_DUNGEON",function(){return this.TEAM_CHG_DUNGEON="32_16"},"TEAM_ADD_BY_PROP",function(){return this.TEAM_ADD_BY_PROP="32_90"},"TEAM_PUSH_TEAM",function(){return this.TEAM_PUSH_TEAM="32_101"},"TEAM_PUSH_JOIN",function(){return this.TEAM_PUSH_JOIN="32_102"},"TEAM_PUSH_REMOVE",function(){return this.TEAM_PUSH_REMOVE="32_103"},"TEAM_PUSH_LEADER_CHG",function(){return this.TEAM_PUSH_LEADER_CHG="32_104"},"TEAM_PUSH_POS_CHG",function(){return this.TEAM_PUSH_POS_CHG="32_105"},"TEAM_PUSH_BREAK",function(){return this.TEAM_PUSH_BREAK="32_106"},"TEAM_PUSH_BE_KICK",function(){return this.TEAM_PUSH_BE_KICK="32_107"}]),e}(),cn=function(){function e(){}return o(e,"modules.team.controller.TeamConstant"),e.getLoginErrorInfo=function(t){return e._errorInfo||(e._errorInfo=new uo,e._errorInfo[e.COOL_TIMING]="操作冷却中，请1分钟后再试",e._errorInfo[e.TEAM_NOT_FOUND]="队伍不存在",e._errorInfo[e.TEAM_FULL]="队伍成员已满",e._errorInfo[e.TEAM_LOCKING]="队伍战斗中",e._errorInfo[e.MEMBER_LEVEL_OVER5]="队员之间等级，最大不能超过5级",e._errorInfo[e.POS_NOT_EMPTY]="未找到空位",e._errorInfo[e.NO_TIMES]="进入副本次数限制",e._errorInfo[e.KICKED_WAITING]="入队请求超时，请稍后再试",e._errorInfo[e.HAS_BADWORD]="队伍描述信息有误",e._errorInfo[e.PWD_NOT_MATCH]="入队口令有误"),e._errorInfo[t]?e._errorInfo[t]:"非知错误码："+t},e.COOL_TIMING=-37,e.TEAM_NOT_FOUND=-1e4,e.TEAM_FULL=-10001,e.TEAM_LOCKING=-10002,e.MEMBER_LEVEL_OVER5=-10003,e.POS_NOT_EMPTY=-10004,e.NO_TIMES=-10005,e.KICKED_WAITING=-10006,e.PWD_NOT_MATCH=-10007,e.HAS_BADWORD=-10009,e._errorInfo=null,e}(),un=function(){function e(){this._obj=null}o(e,"modules.team.model.PlayerTeam");var t=e.prototype;return t.update=function(e){this._obj=e},s(0,t,"buyed",function(){return this._obj.buyed}),s(0,t,"times",function(){return this._obj.times}),e}(),dn=function(){function e(){this.pager=new oo}o(e,"modules.team.model.TeamPager");var t=e.prototype;return t.update=function(e){this.pager.update(e.pager);var t,i=Ng.userVO.getValue(1006),n=[];for(var o in e.list){t=e.list[o];var s=t.minLv+5;s<t.maxLv&&(s=t.maxLv);var r={id:t.id,leaderId:t.leaderId,desc:t.desc,minLv:t.maxLv-5,maxLv:s,hasPwd:t.autoStart},a=0;if(null!=t.members&&""!=t.members){var l=t.members.split("|");a=l.length}r.memberNum=a,a>=3?(n.push(r),r.canjoin=!1):i>r.maxLv||i<r.minLv?(n.push(r),r.canjoin=!1):(n.unshift(r),r.canjoin=!0)}this.pager.recoards=n},e}(),pn=function(){function e(){}return o(e,"modules.team.model.TeamRule"),e.buyTimeNeedGold=function(e){switch(e){case 0:case 1:return 100;case 2:case 3:return 200;default:return 300}},e.OPEN_LEVEL=40,e.MAX_MEMBER=3,e}(),fn=function(){function e(){this.obj=null,this._memberPos=new uo}o(e,"modules.team.model.Team");var t=e.prototype;return t.update=function(e){this.obj=e,this._memberPos.clear();var t,i=this.obj.members.split("|");for(var n in i){t=i[n];var o=t.split("_"),s=vo["int"](o[0]),r=vo["int"](o[1]);this._memberPos.set(s,r)}},t.checkNpcId=function(e){(1>e||e>5)&&(e=0);var t,i=new go;for(var n in this._memberPos.values)if(t=this._memberPos.values[n],0>t){var o=vo["int"](t/-1e3);i.add(o)}if(i.contain(e))return 0;if(0==e){var s,r=fo.RandomArray([1,2,3,4,5]);for(var a in r)if(s=r[a],!i.contain(s))return-1e3*s;return 0}return-1e3*e},s(0,t,"members",function(){return this._memberPos}),s(0,t,"desc",function(){return this.obj.desc}),s(0,t,"autoStart",function(){return this.obj.autoStart}),s(0,t,"createTime",function(){return this.obj.createTime}),s(0,t,"isLeader",function(){return this.leaderId==Ng.userVO.unitId.id}),s(0,t,"state",function(){return this.obj.state}),s(0,t,"id",function(){return this.obj.id}),s(0,t,"dungeonId",function(){return this.obj.dungeonId}),s(0,t,"leaderId",function(){return this.obj.leaderId}),e.FREE=0,e.FIGHTING=1,e}(),_n=(function(){function e(){}return o(e,"modules.team.TeamNotifcation"),e.RECEIVE_PLAYER_TEAM="RECEIVE_PLAYER_TEAM",e.RECEIVE_TEAM_LIST="RECEIVE_TEAM_LIST",e.RECEIVE_TEAM_MEMBER_INFO="RECEIVE_TEAM_MEMBER_INFO",e.RECEIVE_TEAM_INFO="RECEIVE_TEAM_INFO",e.RECEIVE_TEAM_LOGS="RECEIVE_TEAM_LOGS",e.OPEN_TEAM_GATE="OPEN_TEAM_GATE",e.OPEN_TEAM_SELF="OPEN_TEAM_SELF",e.OPEN_TEAM_LIST="OPEN_TEAM_LIST",e}(),function(){function e(){}return o(e,"modules.alcshop.AlcshopNotification"),e.OPEN_ALC_SHOP_PAGE="OPEN_ALC_SHOP_PAGE",e}(),function(){function e(){}return o(e,"modules.alcshop.controller.AlcshopCmd"),e.BUY=1,n(e,["ALCSHOP_BUY",function(){return this.ALCSHOP_BUY="45_1"}]),e}()),mn=(function(){function e(){}return o(e,"modules.task.TaskNotification"),e.SHOW_TASK_PAGE="SHOW_TASK_PAGE",e.CLOSE_TASK_PAGE="CLOSE_TASK_PAGE",e.RECEIVE_TASK_INFO="RECEIVE_TASK_INFO",e.RECEIVE_TASK_DAILY_INFO="RECEIVE_TASK_DAILY_INFO",e}(),function(){function e(){}return o(e,"modules.task.controller.DailyTaskCmd"),e.QUERY=1,e.FINISH=2,e.AWARD=3,n(e,["DAILY_TASK_QUERY",function(){return this.DAILY_TASK_QUERY="30_1"},"DAILY_TASK_FINISH",function(){return this.DAILY_TASK_FINISH="30_2"},"DAILY_TASK_AWARD",function(){return this.DAILY_TASK_AWARD="30_3"}]),e}()),gn=function(){function e(){}return o(e,"modules.task.controller.TaskCmd"),e.SHARE_GAME=1,e.SHARE_GAME_VIDEO=9,e.GUID_EMPTY_PROPS=2,e.QUERY=3,e.GET_AWARD=4,e.SHARE_GAME_4VIP=5,e.PUSH_TASK=100,n(e,["TASK_SHARE_GAME",function(){return this.TASK_SHARE_GAME="10_1"},"TASK_SHARE_GAME_4VIP",function(){return this.TASK_SHARE_GAME_4VIP="10_5"},"TASK_SHARE_SHARE_GAME_VIDEO",function(){return this.TASK_SHARE_SHARE_GAME_VIDEO="10_9"},"TASK_GUID_EMPTY_PROPS",function(){return this.TASK_GUID_EMPTY_PROPS="10_2"},"TASK_QUERY",function(){return this.TASK_QUERY="10_3"},"TASK_GET_AWARD",function(){return this.TASK_GET_AWARD="10_4"},"TASK_PUSH_TASK",function(){return this.TASK_PUSH_TASK="10_100"}]),e}(),vn=(function(){function e(){}return o(e,"modules.task.model.TaskType"),e.USE_FIGHT_BOSS=1,e.MIX_EQUIP_COMMON=2,e.MIX_PROP_COMMON=3,e.MIX_PROP_COMMON_GREEN=4,e.MIX_EQUIP_GREEN=5,e.ACTIVE_SUIT=6,e.LEARN_SKILL=7,e.UPGRADE_BONE=8,e.KILL_DUNGEON_SEC=9,e.MIX_PROP_COMMON_YELLOW=10,e.MIX_EQUIP_YELLOW=11,e.DIANHUA_EQUIP=12,e.ACTIVE_SUIT_YELLOW=13,e.ENTER_SP_DUNGEON=14,e.FIGHT_ARENA_STONE=15,e.STAR_EQUIP=16,e.BUY_VIP_FUN=17,e.KILL_MONSTER_MYNATURE_0=18,e.GET_PET=19,e.FEED_PET=20,e.MIX_PET_GHOST=21,e.DRESS_PET_GHOST=22,e.KILL_MONSTER_MYNATURE_1=23,e.MIX_EQUIP_RED=24,e.OPEN_NEW_MINE=25,e.FIGHT_MINE=26,e.LADDER_ARENA_FIGHT=27,e.LADDER_ARENA_AWARD=28,e.OPEN_HANDBOOK=29,e.TOWER_FLOOR_THIRD=30,e.KILL_DUNGEON_CULTURE=31,e.UPGRADE_TALISMAN=32,e.KILL_MONSTER_MYNATURE_2=33,e.KILL_MONSTER_BORNNATURE_1=34,e.FIGHT_GLOBAL_ARENA=35,e.UPGRADE_CULTURE_SEC=36,e.KILL_DUNGEON_EIGHT=37,e}(),function(){function e(){this.finished=null,this.awarded=null,this.value=0,this.version=0,this._lastTask=null,this._lastState=0,this.finished=new go,this.awarded=new go}o(e,"modules.task.model.PlayerTask");var t=e.prototype;return t.update=function(e){var t,i;if(this.finished.clear(),this.awarded.clear(),this.value=e.value,""!=e.finishedIds){i=e.finishedIds.split("_");var n;for(n in i)t=i[n],this.finished.add(vo["int"](t))}if(""!=e.awardedIds){i=e.awardedIds.split("_");var n;for(n in i)t=i[n],this.awarded.add(vo["int"](t))}void 0==e.version||"undefined"==e.version||(this.version=e.version),this._lastTask=null,this._lastState=0;for(var o=g.database.getDict("taskmain"),s=1;s<=o.keys.length;s++){var r=o.get(s);if(0==this.version){var a=g.database.getData("taskmainpack",s);a&&(r=a)}if(r){if(!this.finished.contain(r.id)){this._lastTask=r,this._lastState=0;break}if(!this.awarded.contain(r.id)){this._lastTask=r,this._lastState=1;break}}}},t.isFinish=function(e){return this.finished.contain(e)},s(0,t,"lastState",function(){return this._lastState}),s(0,t,"lastTask",function(){return this._lastTask}),e}()),yn=function(){function e(){this.acting=null,this.awarded=null,this._obj=null,this.acting=new uo,this.awarded=new go}o(e,"modules.task.model.PlayerDailyTask");var t=e.prototype;return t.update=function(e){this._obj=e,this.acting.clear(),this.awarded.clear();var t,i;if(""!=e.awardedIds){i=e.awardedIds.split("_");var n;for(n in i)t=i[n],this.awarded.add(vo["int"](t))}if(""!=e.acting){i=e.acting.split("|");var o;for(var s in i){o=i[s];var r=o.split("_");2==r.length&&this.acting.set(vo["int"](r[0]),vo["int"](r[1]))}}return this},t.isAwarded=function(e){return this.awarded.contain(e)},t.getActNum=function(e){var t=this.acting.get(e);return null==t?0:t},t.hasFinish=function(){var e,t=Ng.userVO.getValue(1006);for(var i in yb.DAILY_TASK_AWARDS)if(e=yb.DAILY_TASK_AWARDS[i],this.point>=e.s&&t>=e.lv&&!this.awarded.contain(e.id))return!0;var n;for(var o in this.acting.keys){
n=this.acting.keys[o];var s=this.acting.get(n);if(s>0){var r=g.database.getData("dailytask",n);if(r&&s>=r.cnd){if(8==e.id&&T.IS_ON_MINI&&Or.onIOS)continue;return!0}}}return!1},s(0,t,"freshTime",function(){return this._obj.freshTime}),s(0,t,"point",function(){return this._obj.point}),s(0,t,"id",function(){return this._obj.id}),e}(),bn=(function(){function e(){}return o(e,"modules.meridian.MeridianNotification"),e.RECEIVE_MERIDIAN="RECEIVE_MERIDIAN",e.OPEN_MERIDIAN="OPEN_MERIDIAN",e}(),function(){function e(){}return o(e,"modules.meridian.controller.MeridianCmd"),e.INFO=1,e.UPGRADE=2,e.UPGRADE_SP=3,n(e,["MERIDIAN_INFO",function(){return this.MERIDIAN_INFO="52_1"},"MERIDIAN_UPGRADE",function(){return this.MERIDIAN_UPGRADE="52_2"},"MERIDIAN_UPGRADE_SP",function(){return this.MERIDIAN_UPGRADE_SP="52_3"}]),e}()),En=function(){function e(){this.id=NaN,this.gas=NaN,this.attackLv=0,this.defenceLv=0,this.hpLv=0,this.mpLv=0}o(e,"modules.meridian.model.PlayerMeridian");var t=e.prototype;return t.update=function(e){this.id=e.id,this.gas=e.gas,this.attackLv=e.attackLv,this.defenceLv=e.defenceLv,this.hpLv=e.hpLv,this.mpLv=e.mpLv},t.getGasMax=function(){var e=this.attackLv;this.defenceLv>e&&(e=this.defenceLv),this.hpLv>e&&(e=this.hpLv),this.mpLv>e&&(e=this.mpLv);var t=20*xn.getNeedGas(e+1);return t},e}(),xn=function(){function e(){}return o(e,"modules.meridian.model.MeridianRule"),e.getAttrAdd=function(e,t){if(0>=t)return 0;var i=0;switch(e){case 0:i=3;break;case 1:i=2;break;case 2:i=15;break;case 3:i=8}return t>=7&&(t+=vo["int"](t/7)),i*t},e.getNeedGas=function(e){return 20*e},e.getNeedSilver=function(e){return 9500+500*e},e.UPGRADE_SP_PROP_ID=500020,e.UPGRADE_SP_PROP_EQ_GOLD=5,e.OPEN_LEVEL=7,e.ATTACK_PER_LV=3,e.DEFENCE_PER_LV=2,e.HP_PER_LV=15,e.MP_PER_LV=8,n(e,["STAR_NAME",function(){return this.STAR_NAME=[["角","亢","氐","房","心","尾","箕"],["斗","牛","女","虚","危","室","壁"],["奎","娄","胃","昴","毕","觜","参"],["井","鬼","柳","星","张","翼","轸"]]}]),e}(),Sn=function(){function e(){}return o(e,"modules.paytotal.controller.PayTotalCmd"),e.QUERY=1,e.AWARD=2,e.PRIVILEGE_REST=3,n(e,["PAY_TOTAL_QUERY",function(){return this.PAY_TOTAL_QUERY="26_1"},"PAY_TOTAL_AWARD",function(){return this.PAY_TOTAL_AWARD="26_2"},"PAY_PRIVILEGE_REST",function(){return this.PAY_PRIVILEGE_REST="26_3"}]),e}(),wn=(function(){function e(){}return o(e,"modules.paytotal.PaytotalNotification"),e.SHOW_PAY_TOTAL_PAGE="SHOW_PAY_TOTAL_PAGE",e.RECIVE_PAY_TOTAL_INFO="RECIVE_PAY_TOTAL_INFO",e}(),function(){function e(){this._totalRmb=0,this._montRmb=0,this._resetDouble=0,this._resetRebate=0,this._resetStone=0,this.awarded=null,this.awarded=new go}o(e,"modules.paytotal.model.PlayerPayTotal");var t=e.prototype;return t.update=function(e){if(this.awarded.clear(),this._totalRmb=e.rmb,this._montRmb=e.rmb,this._resetDouble=e.resetDouble,this._resetRebate=e.resetRebate,this._resetStone=e.resetStone,""!=e.awardedIds){var t,i=e.awardedIds.split("_");for(var n in i)t=i[n],this.awarded.add(vo["int"](t))}},t.isFinish=function(e){return this._totalRmb>=e},t.isAwarded=function(e){return this.awarded.contain(e)},t.getForestPetFoodAddPercent=function(){return this.awarded.contain(888)?30:0},t.getSimpleBossRateAdd=function(){return this.awarded.contain(1688)?30:0},t.getCultureBossRateAdd=function(){return this.awarded.contain(4288)?30:0},t.getGasAddPercent=function(){return this.awarded.contain(4288)?30:0},t.getVipFunAdd=function(){return this.awarded.contain(4288)?2:0},t.isMarcket90percent=function(){return this.awarded.contain(4288)},t.isRecoverArenaFightCDShort=function(){return this.awarded.contain(9888)},t.isRecoverForestFightCDShort=function(){return this.awarded.contain(9888)},t.spDungeonAddPercent=function(){return this.awarded.contain(9888)?20:0},t.connectStoneAddPercent=function(){return this.awarded.contain(9888)?20:0},t.marketStoneBuyTimeAdd=function(){var e=0;return this.isAwarded(18888)&&(e=5),this.isAwarded(36888)&&(e=10),this.isAwarded(58888)&&(e=15),this.isAwarded(88888)&&(e=20),e},t.forestBuyTimeAdd=function(){var e=0;return this.isAwarded(18888)&&(e=1),this.isAwarded(36888)&&(e=2),this.isAwarded(58888)&&(e=3),this.isAwarded(88888)&&(e=4),e},t.spDungeonBuyTimeAdd=function(){var e=0;return this.isAwarded(18888)&&(e=2),this.isAwarded(36888)&&(e=4),this.isAwarded(58888)&&(e=6),this.isAwarded(88888)&&(e=8),e},t.isStarExHold=function(){return this.isAwarded(4288)},t.addTeamBuyTime=function(){var e=0;return this.isAwarded(358)&&(e=1),this.isAwarded(1688)&&(e=2),this.isAwarded(18888)&&(e=4),e},t.addVipFunTime=function(){return this.isAwarded(88888)?10:this.isAwarded(58888)?8:this.isAwarded(36888)?6:this.isAwarded(18888)?5:this.isAwarded(9888)?4:this.isAwarded(4288)?3:this.isAwarded(1688)?2:this.isAwarded(888)?1:0},t.bookShopMaxBuyNum=function(){return this.isAwarded(88888)?150:this.isAwarded(36888)?100:this.isAwarded(9888)?70:this.isAwarded(1688)?40:this.isAwarded(520)?20:5},t.costPetFoodRate=function(){return this.isAwarded(36888)?35:0},t.canResetDoublePay=function(){if(!this.isAwarded(9888))return!1;if(this._resetDouble<=0)return!0;var e=ro.newDate(this._resetDouble),t=ro.newDate(),i=t.getMonth(),n=t.getDate(),o=e.getMonth(),s=e.getDate();return i-o>=2?!0:i-o==1?20>s||n>=20:n>=20&&20>s},t.canResetRebate=function(){return this.isAwarded(4288)?this._resetRebate<=0?!0:!ro.isSameMonth(ro.newDate(this._resetRebate)):!1},t.canResetStone=function(){return this.isAwarded(9888)?this._resetStone<=0?!0:!ro.isSameMonth(ro.newDate(this._resetStone)):!1},t.recoverPetSkillAddPercent=function(){return this.isAwarded(268888)?20:this.isAwarded(188888)?15:this.isAwarded(128888)?10:0},t.payDoubleGoldMaxRmb=function(){return this.isAwarded(188888)?8888:this.isAwarded(88888)?3999:this.isAwarded(36888)?1298:this.isAwarded(9888)?648:0},s(0,t,"monthRmb",function(){return this._montRmb}),s(0,t,"totalRmb",function(){return this._totalRmb}),e}()),Cn=function(){function e(e,t,i,n){this.rmb=0,this.title=null,this.openLv=0,this.openRmb=0,this.htmlInfo=null,this.rmb=e,this.title=1==e?"充值任意金额":"累计充值"+e,e>1&&v.IS_GLOBAL_VERSION&&(this.title+="仙玉"),this.openLv=t,this.openRmb=i,this.htmlInfo=n}return o(e,"modules.paytotal.model.PayTotalItem"),e}(),Tn=(function(){function e(){}return o(e,"modules.arena.ArenaNotification"),e.SHOW_GLOBAL_ARENA_PAGE="SHOW_GLOBAL_ARENA_PAGE",e.OPEN_ARENA_RANK_PAGE="OPEN_ARENA_RANK_PAGE",e.RECIEVE_ARENA_INFO="RECIEVE_ARENA_INFO",e.RECIEVE_ARENA_ROOM="RECIEVE_ARENA_ROOM",e.RECIEVE_ARENA_GLOBAL="RECIEVE_ARENA_GLOBAL",e.WINNER_ARENA_GLOBAL="WINNER_ARENA_GLOBAL",e.FIGHT_ARENA_GLOBAL_FAIL="FIGHT_ARENA_GLOBAL_FAIL",e.RECIEVE_ARENA_GLOBAL_LOGS="RECIEVE_ARENA_GLOBAL_LOGS",e.RECIEVE_ARENA_GLOBAL_LOGS_MINE="RECIEVE_ARENA_GLOBAL_LOGS_MINE",e}(),function(){function e(){}return o(e,"modules.arena.controller.ArenaCmd"),e.QUERY_INFO=1,e.QUERY_ROOM_INFO=2,e.FIGHT_WITH_OTHER=3,e.COLLECT_STONE=4,e.QUERY_GLOBAL_INFO=12,e.GLOBAL_FIGHT=6,e.GLOBAL_TAKE_AWARDS=7,e.QUERY_GLOBAL_LOGS=8,e.LAST_GLOBAL_LOGS_MINE=9,e.QUERY_GLOBAL_INFO_CROSS=13,e.GLOBAL_FIGHT_BY_GOLD=11,n(e,["ARENA_QUERY_INFO",function(){return this.ARENA_QUERY_INFO="12_1"},"ARENA_QUERY_ROOM_INFO",function(){return this.ARENA_QUERY_ROOM_INFO="12_2"},"ARENA_FIGHT_WITH_OTHER",function(){return this.ARENA_FIGHT_WITH_OTHER="12_3"},"ARENA_COLLECT_STONE",function(){return this.ARENA_COLLECT_STONE="12_4"},"ARENA_QUERY_GLOBAL_INFO",function(){return this.ARENA_QUERY_GLOBAL_INFO="12_12"},"ARENA_QUERY_GLOBAL_INFO_CROSS",function(){return this.ARENA_QUERY_GLOBAL_INFO_CROSS="12_13"},"ARENA_GLOBAL_FIGHT",function(){return this.ARENA_GLOBAL_FIGHT="12_6"},"ARENA_GLOBAL_GLOBAL_FIGHT_BY_GOLD",function(){return this.ARENA_GLOBAL_GLOBAL_FIGHT_BY_GOLD="12_11"},"ARENA_GLOBAL_TAKE_AWARDS",function(){return this.ARENA_GLOBAL_TAKE_AWARDS="12_7"},"ARENA_QUERY_GLOBAL_LOGS",function(){return this.ARENA_QUERY_GLOBAL_LOGS="12_8"},"ARENA_LAST_GLOBAL_LOGS_MINE",function(){return this.ARENA_LAST_GLOBAL_LOGS_MINE="12_9"}]),e}()),In=function(){function e(){}return o(e,"modules.arena.model.ArenaRule"),e.queryCountPerM=function(e){var t=Math.floor(e/5)+1,i=g.database.getData("arenaStone",t);return i?i.countPerMin:0},e.GLOBAL_OPEN_LV=32,e.DAY_CAN_ATACK_TIMES=10,e.COLLENCT_TIME_LIMIT=18e5,e.MAX_WAIT_COLLECT_TIME_m=480,e.GLOBAL_FIGHT_TIMES_MAX=20,e.GLOBAL_FIGHT_USE_GOLD=20,e}(),An=function(){function e(e){this.fightTimes=0,this.rank=0,this.coolTime=NaN,this.buyTimes=0,this.mineTimeBegin=NaN,this.totalCount=0,this.collectDate=NaN,this.globalFighted=0,this.update(e)}o(e,"modules.arena.model.data.ArenaInfo");var t=e.prototype;return t.update=function(e){this.fightTimes=e.fightTimes,this.rank=e.rank,this.coolTime=e.coolTime,this.buyTimes=e.buyTimes,this.mineTimeBegin=e.mineTimeBegin,this.totalCount=e.totalCount,this.collectDate=e.collectDate,this.globalFighted=e.globalFighted},t.hasFightTime=function(){return this.fightTimes>0},e}(),Nn=function(){function e(e){this.id=0,this.type=0,this.arenaId=0,this.playerA=NaN,this.nameA=null,this.playerB=NaN,this.nameB=null,this.awards=null,this.actTime=null,this.awardsLoser=null,this.update(e)}o(e,"modules.arena.model.data.GlobalArenaLog");var t=e.prototype;return t.update=function(e){this.id=e.id,this.type=e.type,this.arenaId=e.arenaId,this.playerA=e.playerA,this.nameA=e.nameA,this.playerB=e.playerB,this.nameB=e.nameB,this.awards=e.awards,this.actTime=ro.newDate(e.actTime),this.awardsLoser=e.awardsLoser;var t=Ng.userVO.unitId.id;this.playerA==t?this.nameA="您":2!=this.type&&this.playerB==t&&(this.nameB="您")},t.getHtmlStr=function(t){var i="";switch(i=ro.parseSimple(this.actTime)+"&nbsp;&nbsp;",this.type){case 0:i+="<font color='#fffc00'>【"+this.nameA+"】</font>夺擂<font color='#e70626'>失败</font><br><font color ='#00dc24'>【"+this.nameB+"】</font>守擂成功。";break;case 1:i+="<font color='#fffc00'>【"+this.nameA+"】</font>打败擂主<font color ='#00dc24'>【"+this.nameB+"】</font>";break;case 2:if(this.playerB<0){var n=vo["int"](-this.playerB/6e4);i+=n>=480?"擂主<font color='#00dc24'>【"+this.nameA+"】</font><font color ='#fffc00'>开始分身</font>并领取奖池(占领"+n+"分钟)。":"擂主<font color='#00dc24'>【"+this.nameA+"】</font><font color ='#fffc00'>离开擂台</font>并领取奖池(占领"+n+"分钟)。"}else i+="擂主<font color='#00dc24'>【"+this.nameA+"】</font>领取奖池(占领"+vo["int"](this.playerB/6e4)+"分钟)。"}var o=e._dealAward(this.awards);o&&(i+="<br>获得：",i+=o);var s=e._dealAward(this.awardsLoser);return s&&(i+="<br>擂主获得奖励：",i+=s),i},e._dealAward=function(e){var t=null;if(e){var i=e.split("|");if(i.length>0){t="";var n;for(var o in i){n=i[o];var s=n.split("_");if(3==s.length){var r=vo["int"](s[0]),a=vo["int"](s[1]),l=vo["int"](s[2]);switch(r){case 2:t+=l+"铜币 ";break;case 3:t+=l+"元宝 ";break;case 5:t+=l+"经验 ";break;case 0:var h=g.database.getData("props",a);h&&(t+="<font color='"+N.getColor(h.quality)+"'>【"+h.name+"】</font>*"+l+" ")}}}}}return t},e}(),Pn=function(){function e(e){this.id=0,this.baseId=0,this.percent=0,this.startTime=NaN,this.collectTime=NaN,this.keepTimes=0,this.silverPool=0,this.propsPool=null,this.playerId=NaN,this.name=null,this.nature=0,this.level=0,this.update(e)}o(e,"modules.arena.model.data.GlobalArenaInfo");var t=e.prototype;return t.update=function(e){this.id=e.id,this.baseId=e.baseId,this.percent=e.percent,this.startTime=e.startTime,this.collectTime=e.collectTime,this.keepTimes=e.keepTimes,this.silverPool=e.silverPool,this.propsPool=e.propsPool,this.playerId=e.playerId,this.name=e.name,this.nature=e.nature,this.level=e.level},t.updateBase=function(e){this.startTime=e.startTime,this.collectTime=e.collectTime,this.keepTimes=e.keepTimes,this.silverPool=e.silverPool,this.propsPool=e.propsPool,this.playerId=e.playerId},t.getAwardsHtml=function(){var e="";this.silverPool>0&&(e+="<font color='#ffffff'>"+this.silverPool+" 铜币</font><br>");var t,i=this.propsPool.split("|");for(var n in i){t=i[n];var o=t.split("_");if(2==o.length){var s=vo["int"](o[0]),r=g.database.getData("props",s);r&&(e+="<font color='"+N.getColor(r.quality)+"'>【"+r.name+"】*"+o[1]+"</font><br>")}}return e},e}(),Rn=(function(){function e(){}return o(e,"modules.bagpack.BagpackNotification"),e.OPEN_BAGPACK_VIEW="OPEN_BAGPACK_VIEW",e.BAGPACK_HAS_BOX_READY="BAGPACK_HAS_BOX_READY",e.CHANGE_NAME_RESULT="CHANGE_NAME_RESULT",e.CHANGE_NATURE_RESULT="CHANGE_NATURE_RESULT",e.OPEN_COAT_SPECIAL_REBUILD="OPEN_COAT_SPECIAL_REBUILD",e}(),function(){function e(){}return o(e,"modules.goods.GoodsNotification"),e.FRESH_GOODS_PACK="FRESH_GOODS_PACK",e.RECEIVE_DETAIL_INFO="RECEIVE_DETAIL_INFO",e.POP_COMMON_AWARDS_INFO="POP_COMMON_AWARDS_INFO",e.POP_COMMON_AWARDS_INFO_SIMPLE="POP_COMMON_AWARDS_INFO_SIMPLE",e}(),function(){function e(){}return o(e,"modules.goods.controller.GoodsCmd"),e.LIST=1,e.DRESS=2,e.SELL=3,e.BEGIN_CLOCK_BOX=4,e.SPEED_CLOCK_BOX=5,e.OPEN_BOX=6,e.ADD_BOX_SIZE=7,e.SELL_PROPS=8,e.SPEED_CLOCK_BOX_BY_KEY=9,e.BREAK_EQUIP=10,e.SPEED_CLOCK_BOX_AD=11,e.CHANGE_PLAYER_NAME=12,e.OPEN_PROP=13,e.MIX_PET_FOOD=14,e.BREAK_PET_FOOD=15,e.CHANGE_PLAYER_NATURE=16,e.CHANGE_GRAPH_NATURE=17,e.REBUILD_COAT_SPECIAL=18,e.BREAK_PET_GHOSTSOUL=19,e.CHANGE_PLAYER_NATURE_EXT=20,e.TAKE_PLAYER_NATURE_EXT_AWD=21,e.PUSH_GOODS_CHANGE=100,e.PUSH_GOODS_COUNT_CHANGE=101,e.PUSH_COMMON_AWARDS_POP=102,e.PUSH_CHANGE_SIMPLE=103,n(e,["GOODS_LIST",function(){return this.GOODS_LIST="100_1"},"GOODS_DRESS",function(){return this.GOODS_DRESS="100_2"},"GOODS_SELL",function(){return this.GOODS_SELL="100_3"},"GOODS_SELL_PROPS",function(){return this.GOODS_SELL_PROPS="100_8"},"GOODS_BEGIN_CLOCK_BOX",function(){return this.GOODS_BEGIN_CLOCK_BOX="100_4"},"GOODS_SPEED_CLOCK_BOX",function(){return this.GOODS_SPEED_CLOCK_BOX="100_5"},"GOODS_SPEED_CLOCK_BOX_BY_KEY",function(){return this.GOODS_SPEED_CLOCK_BOX_BY_KEY="100_9"},"GOODS_SPEED_CLOCK_BOX_AD",function(){return this.GOODS_SPEED_CLOCK_BOX_AD="100_11"},"GOODS_CHANGE_PLAYER_NAME",function(){return this.GOODS_CHANGE_PLAYER_NAME="100_12"},"GOODS_CHANGE_PLAYER_NATURE",function(){return this.GOODS_CHANGE_PLAYER_NATURE="100_16"},"GOODS_CHANGE_PLAYER_NATURE_EXT",function(){return this.GOODS_CHANGE_PLAYER_NATURE_EXT="100_20"},"GOODS_TAKE_PLAYER_NATURE_EXT_AWD",function(){return this.GOODS_TAKE_PLAYER_NATURE_EXT_AWD="100_21"},"GOODS_OPEN_BOX",function(){return this.GOODS_OPEN_BOX="100_6"},"GOODS_ADD_BOX_SIZE",function(){return this.GOODS_ADD_BOX_SIZE="100_7"},"GOODS_BREAK_EQUIP",function(){return this.GOODS_BREAK_EQUIP="100_10"},"GOODS_OPEN_PROP",function(){return this.GOODS_OPEN_PROP="100_13"},"GOODS_MIX_PET_FOOD",function(){return this.GOODS_MIX_PET_FOOD="100_14"},"GOODS_BREAK_PET_FOOD",function(){return this.GOODS_BREAK_PET_FOOD="100_15"},"GOODS_CHANGE_GRAPH_NATURE",function(){return this.GOODS_CHANGE_GRAPH_NATURE="100_17"},"GOODS_REBUILD_COAT_SPECIAL",function(){return this.GOODS_REBUILD_COAT_SPECIAL="100_18"},"GOODS_BREAK_PET_GHOSTSOUL",function(){return this.GOODS_BREAK_PET_GHOSTSOUL="100_19"},"GOODS_PUSH_GOODS_CHANGE",function(){return this.GOODS_PUSH_GOODS_CHANGE="100_100"},"GOODS_PUSH_GOODS_COUNT_CHANGE",function(){return this.GOODS_PUSH_GOODS_COUNT_CHANGE="100_101"},"GOODS_PUSH_CHANGE_SIMPLE",function(){return this.GOODS_PUSH_CHANGE_SIMPLE="100_103"},"GOODS_PUSH_COMMON_AWARDS_POP",function(){return this.GOODS_PUSH_COMMON_AWARDS_POP="100_102"}]),e}()),Ln=function(){function e(){console.log("this class is static please do not new it!!")}return o(e,"modules.goods.GoodsRenderHelper"),e.renderProps=function(t,i){if(14==i.propConf.propType)return void e.renderBlood(t,i,-1,!0);var n=Ng.userVO.getValue(1006),o=0,s=t.getChildByName("name");s.color=N.getColor(i.propConf.quality),s.text=i.propConf.name,o=s.x+s.width+5;var r=t.getChildByName("nature");r.index=i.propConf.nature-1,r.x=o,o=o+r.width+5,s=t.getChildByName("level"),s.text="Lv."+i.propConf.level,i.propConf.level>n?s.color="#e70626":s.color="#ffffff",9!=i.propConf.propType&&10!=i.propConf.propType||(s.text=""),s.x=o,o=o+s.width+5,s=t.getChildByName("count"),s.text=i.count+"个",10==i.propConf.propType&&(s.text="");var a=!1;22==i.propConf.propType&&(a=!i.binding),s=t.getChildByName("binding"),s&&(s.visible=a,s.x=o);var l=t.getChildByName("priceIcon");if(3==i.propConf.propType||5==i.propConf.propType||23==i.propConf.propType||27==i.propConf.propType||7==i.propConf.propType||8==i.propConf.propType||10==i.propConf.propType||11==i.propConf.propType||12==i.propConf.propType||13==i.propConf.propType||15==i.propConf.propType||20==i.propConf.propType||21==i.propConf.propType||100==i.propConf.propType||24==i.propConf.propType||25==i.propConf.propType||26==i.propConf.propType)s=t.getChildByName("lbPrice"),s&&(s.visible=!1),s=t.getChildByName("price"),s.text="",l&&(l.visible=!1);else{var h=i.propConf.silverPrice;0>=h?(s=t.getChildByName("price"),s.text="",l&&(l.visible=!1),s=t.getChildByName("lbPrice"),s&&(s.visible=!1)):(s=t.getChildByName("price"),s.text=h+"",l&&(l.visible=!0),s=t.getChildByName("lbPrice"),s&&(s.visible=!0))}s=t.getChildByName("desc"),1==i.propConf.propType&&25>=n&&110001!=i.propConf.type?s.text=i.propConf.desc+"，3个相同材料可以合成更高级材料，材料可以锻造成装备":s.text=i.propConf.desc;var c=t.getChildByName("attribute3");c&&(c.visible=!1),2==i.propConf.propType&&0==i.baseAttr.length?(i.needIdentify&&(s.text=s.text+"(未鉴定)"),s=t.getChildByName("attribute1"),0!=i.propConf.baseAttr.length?e.showPropAttr2(i.propConf.baseAttr[0],s):s.visible=!1,s=t.getChildByName("attribute2"),i.propConf.baseAttr.length>1?(s.color="#46A3FF",e.showPropAttr2(i.propConf.baseAttr[1],s)):s.visible=!1):18==i.propConf.propType&&0==i.baseAttr.length?(i.needIdentify,s=t.getChildByName("attribute1"),s.text="??? + ??",s.visible=!0,s=t.getChildByName("attribute2"),s.visible=!1):(s=t.getChildByName("attribute1"),0!=i.baseAttr.length?e.showPropAttr(i.baseAttr[0],s):s.visible=!1,s=t.getChildByName("attribute2"),i.baseAttr.length>1?(s.color="#46A3FF",e.showPropAttr(i.baseAttr[1],s)):s.visible=!1)},e.showPropAttr=function(e,t){t.visible=!0;var i=I.getName(e.key);t.text=i+I.getValueStr(e.key,e.value,!0)},e.showPropAttr2=function(e,t){t.visible=!0;var i=I.getName(e.key);t.text=i+I.getValueStr(e.key,e.min,!0)+"~"+I.getValueStr(e.key,e.max,!1)},e.changeCountShow=function(e,t){var i=e.getChildByName("count");t>0?i.text=t+"个":i.text=""},e.renderPropsByCfg=function(t,i,n,o){void 0===o&&(o=!0);var s=Ng.userVO.getValue(1006),r=0,a=t.getChildByName("name");a.color=N.getColor(i.quality),a.text=i.name,r=a.x+a.width+5;var l=t.getChildByName("nature");l.index=i.nature-1,l.x=r,r=r+l.width+5,a=t.getChildByName("level"),a.text="Lv."+i.level,i.level>s?a.color="#e70626":a.color="#ffffff",a.x=r,a=t.getChildByName("count"),n>0?a.text=n+"个":a.text="",a=t.getChildByName("price"),a.text=i.silverPrice+"";var h=t.getChildByName("priceIcon");if(3==i.propType||5==i.propType||23==i.propType||27==i.propType||7==i.propType||8==i.propType||10==i.propType||11==i.propType||12==i.propType||13==i.propType||20==i.propType||21==i.propType||22==i.propType)a=t.getChildByName("lbPrice"),a&&(a.visible=!1),a=t.getChildByName("price"),a.text="",h&&(h.visible=!1);else{var c=i.silverPrice;0>=c?(a=t.getChildByName("lbPrice"),a&&(a.visible=!1),a=t.getChildByName("price"),a.text="",h&&(h.visible=!1)):(a=t.getChildByName("price"),a.text=c+"",a.visible=o,h&&(h.visible=o),a=t.getChildByName("lbPrice"),a&&(a.visible=o))}a=t.getChildByName("desc"),1==i.propType&&25>=s&&110001!=i.type?a.text=i.desc+"，3个相同材料可以合成更高级材料，材料可以锻造成装备":a.text=i.desc;var u=t.getChildByName("attribute3");u&&(u.visible=!1),2==i.propType?(a=t.getChildByName("attribute1"),0!=i.baseAttr.length?e.showPropAttr2(i.baseAttr[0],a):a.visible=!1,a=t.getChildByName("attribute2"),i.baseAttr.length>1?e.showPropAttr2(i.baseAttr[1],a):a.visible=!1):(a=t.getChildByName("attribute1"),a.visible=!1,a=t.getChildByName("attribute2"),a.visible=!1)},e.renderEquipEmptyGrid=function(e,t){var i;i=e.getChildByName("position"),i.text=L.getTypeName(t),i=e.getChildByName("name"),i.color=N.getColor(5),i.text="未装备";var n=e.getChildByName("nature");n.visible=!1,i=e.getChildByName("level"),i.text="",i=e.getChildByName("star"),i.text="",i=e.getChildByName("natureLimit"),i.visible=!1;var o=e.getChildByName("attribute");o.innerHTML="";var s=L.getFindWay(t);s&&(o.style.fontSize=26,o.style.color="#ffffff",o.style.bold=!0,o.appendHTML(s)),i=e.getChildByName("price"),i.text="",i=e.getChildByName("lbPrice"),i.visible=!1;var r=e.getChildByName("priceIcon");r.visible=!1,i=e.getChildByName("attributeSP"),i&&(i.visible=!1)},e.renderEquip=function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=!1);var s,r=Ng.userVO.getValue(1006),a=Ng.userVO.getValue(1004),l=0;s=t.getChildByName("position"),s.text=L.getTypeName(i.equipConf.position),s=t.getChildByName("name"),s.color=N.getColor(i.quality),s.text=i.equipConf.name,l=s.x+s.width+5;var h=t.getChildByName("nature");h.index=i.equipConf.nature-1,h.x=l,h.visible=!0,l=l+h.width+5,s=t.getChildByName("level"),i.equipConf.level<=1?s.text="":s.text="Lv."+i.equipConf.level,i.equipConf.level>r?s.color="#e70626":s.color="#ffffff",s.x=l,l=l+s.width+10,s=t.getChildByName("star"),n?s.text="★+"+n:s.text="",s.x=l,s=t.getChildByName("natureLimit"),0!=i.equipConf.needNature?(s.visible=!0,s.text="限定：【"+R.getName(i.equipConf.needNature)+"】",i.equipConf.needNature!=a?s.color="#e70626":s.color="#ffffff"):s.visible=!1;var c=t.getChildByName("attribute");if(c.style.lineHeight=30,c.style.fontSize=26,c.style.bold=!0,c.innerHTML="",n){var u=6==i.equipConf.position||7==i.equipConf.position;if(u){var d=g.database.getData("equipStar",n);d&&e.addAttributeHtmlForStarSp(c,i,"#ffffff",d)}else e.addAttributeHtmlForStar(c,i,"#ffffff",n)}else e.addAttributeHtml(c,i.baseAttr,"#ffffff");var p=i.baseAttr.length+i.exAttr.length+i.liveAttr.length+i.spAttr.length+i.creatAttr.length;if(i.equipConf.position>=8&&o?e.addAttributeHtml(c,i.creatAttr,"#1440ee"):e.addAttributeHtml(c,i.exAttr,"#1440ee"),s=t.getChildByName("attributeSP"),i.equipConf.position<8)e.addAttributeHtml(c,i.liveAttr,"#7985e0"),s.visible=!1;else if(i.liveAttr&&i.liveAttr.length){var f=i.liveAttr[0],_=I.getName(f.key);s.text=_+I.getValueStr(f.key,f.value,!0),s.visible=!0}else s.visible=!1;e.addAttributeHtml(c,i.spAttr,"#46A3FF"),i.equipConf.position<8&&e.addAttributeHtml(c,i.creatAttr,"#1a9915",p>6),i.canCreatAttr()&&c.appendHTML("<font color='#b0bcb0' size='12'>未点化</font>"),s=t.getChildByName("price"),s.text=" "+i.equipConf.silverPrice;var m=t.getChildByName("priceIcon");m&&(m.visible=!0),s=t.getChildByName("lbPrice"),s&&(s.visible=!0)},e.renderEquipByCfg=function(t,i,n){void 0===n&&(n=!0);var o,s=Ng.userVO.getValue(1006),r=Ng.userVO.getValue(1004),a=0;o=t.getChildByName("position"),o.text=L.getTypeName(i.position),o=t.getChildByName("name"),o.color=N.getColor(i.quality),o.text=i.name,a=o.x+o.width+5;var l=t.getChildByName("nature");l.index=i.nature-1,l.x=a,l.visible=!0,a=a+l.width+5,o=t.getChildByName("level"),o.text="Lv."+i.level,i.level>s?o.color="#e70626":o.color="#ffffff",o.x=a,o=t.getChildByName("star"),o.text="",o=t.getChildByName("natureLimit"),0!=i.needNature?(o.visible=!0,o.text="限定：【"+R.getName(i.needNature)+"】",i.needNature!=r?o.color="#e70626":o.color="#ffffff"):o.visible=!1;var h=t.getChildByName("attribute");h.style.lineHeight=30,h.style.fontSize=26,h.style.bold=!0,h.innerHTML="",e.addAttributeHtmlByCfg(h,i.baseAttr,"#ffffff"),e.addAttributeHtmlByCfg(h,i.exAttr,"#1440ee"),e.addAttributeHtmlByCfg(h,i.creatAttr,"#1a9915"),o=t.getChildByName("price"),o.text=" "+i.silverPrice,o.visible=n;var c=t.getChildByName("priceIcon");c&&(c.visible=n),o=t.getChildByName("lbPrice"),o&&(o.visible=n)},e.renderEquipSuit=function(t,i,n){var o,s=0;o=t.getChildByName("position"),o.text="【套装】";var r=t.getChildByName("nature");o=t.getChildByName("level"),o.text="",o=t.getChildByName("star"),o.text="",o=t.getChildByName("natureLimit"),o.visible=!1;var a=t.getChildByName("attribute");a.style.lineHeight=30,a.style.fontSize=26,a.style.bold=!0,o=t.getChildByName("price"),o.text="",o=t.getChildByName("lbPrice"),o.visible=!1;var l=t.getChildByName("priceIcon");if(l.visible=!1,null==i)r.visible=!1,o=t.getChildByName("name"),o.color=N.getColor(5),o.text="未激活",a.innerHTML="",a.appendHTML("<font color='#b0bcb0' size='32'>头盔、铠甲、靴子,集齐一套即可激活对应套装^.^</font>");else{o=t.getChildByName("name"),o.color=N.getColor(n),o.text=i.name,s=o.x+o.width+5,r.index=i.nature-1,r.x=s,r.visible=!0,a.innerHTML="";var h=N.getColor(n);switch(n){case 1:e.addAttributeHtml(a,i.whiteAttr,h);break;case 2:e.addAttributeHtml(a,i.blueAttr,h);break;case 3:e.addAttributeHtml(a,i.greenAttr,h);break;case 4:e.addAttributeHtml(a,i.yellowAttr,h);break;case 5:e.addAttributeHtml(a,i.redAttr,h);break;case 6:e.addAttributeHtml(a,i.purpleAttr,h)}}},e.addAttributeHtmlForStar=function(e,t,i,n){var o=t.baseAttr,s=t.baseForStar;if(0!=o.length){var r,a="";for(var l in o){r=o[l];var h=I.getName(r.key);a=a+"<font color='"+i+"'>"+h+I.getValueStr(r.key,r.value,!0)+"</font>";var c=s.get(r.key);c=vo["int"](c*(Math.pow(1.1,n)-1)),2*n>c&&(c=2*n),a=a+"<font color='#fffc00'>&nbsp;&nbsp;"+I.getValueStr(r.key,c,!0)+"</font><br>"}e.appendHTML(a)}},e.addAttributeHtmlForStarSp=function(e,t,i,n){var o=t.baseAttr;if(0!=o.length){var s,r="",a=0;for(var l in o){s=o[l];var h=I.getName(s.key);r=r+"<font color='"+i+"'>"+h+I.getValueStr(s.key,s.value,!0)+"</font>",0==a?r=6==t.equipConf.position?r+"<font color='#fffc00'>&nbsp;&nbsp;&nbsp;&nbsp;生命上限 +"+n.hpPercent/100+"%</font><br>":7==t.equipConf.position?r+"<font color='#fffc00'>&nbsp;&nbsp;&nbsp;&nbsp;法力上限 +"+n.hpPercent/100+"%</font><br>":r+"<font color='#fffc00'>&nbsp;&nbsp;&nbsp;&nbsp;??? +"+n.hpPercent/100+"%</font><br>":r+="<br>",a++}e.appendHTML(r)}},e.addAttributeHtml=function(e,t,i,n){if(void 0===n&&(n=!1),0!=t.length){var o,s="";for(var r in t){o=t[r];var a=I.getName(o.key);s=n?s+"<font color='"+i+"'>"+a+I.getValueStr(o.key,o.value,!0)+"</font>&nbsp;&nbsp;&nbsp;&nbsp;":s+"<font color='"+i+"'>"+a+I.getValueStr(o.key,o.value,!0)+"</font><br>"}e.appendHTML(s)}},e.addAttributeHtmlByCfg=function(e,t,i){if(0!=t.length){var n,o="";for(var s in t){n=t[s];var r=I.getName(n.key);o=o+"<font color='"+i+"'>"+r+I.getValueMinMaxStr(n.key,n.min,n.max,!0)+"</font><br>"}e.appendHTML(o)}},e._renderTalisman=function(t,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var s;s=t.getChildByName("name"),s.text=i.talismanConf.name,s.color=N.getColor(i.quality);var r=t.getChildByName("nature");r.index=i.talismanConf.nature-1,r.x=s.x+s.width,s=t.getChildByName("grad"),s.text=Re.getClutureName(i.talismanConf.grad),s.color=Re.getCultureColor(i.talismanConf.grad),s.x=r.x+r.width;var a;o&&i.quality<6?(s=t.getChildByName("price"),s.text=""+i.getPrice(),s=t.getChildByName("lbPrice"),s.visible=!0,a=t.getChildByName("priceIcon"),a.visible=!0):(s=t.getChildByName("price"),s.text="",s=t.getChildByName("lbPrice"),s.visible=!1,a=t.getChildByName("priceIcon"),a.visible=!1);var l,h,c;switch(c=n?i.creatAttr:i.baseAttr,c.length){case 1:h="#0084ff";break;case 2:h="#fffc00";break;case 3:h="#e70626";break;case 4:h="#c527ff";break;default:h="#ffffff"}for(var u=0;4>u;u++)if(s=t.getChildByName("attribute"+u),u<c.length){var d=c[u].key;l=g.database.getData("talismanattr",d);var p=I.getName(l.key),f=I.getValueStr(l.key,l.getValue(i.quality),!0);s.text=p+f,s.color=h}else s.text="";if(s=t.getChildByName("attributeSP"),0==i.talismanConf.nature)s.text="",s=t.getChildByName("attribute0"),s.text="器魂可用作升级法宝的材料";else{var _,m=0;m=e.getTalismanSpAttrId(i.talismanConf.grad,i.talismanConf.nature),i.quality>=5?(l=g.database.getData("talismanattr",m),_=I.getName(l.key),_+=I.getValueStr(l.key,l.getValue(i.quality),!0),s.text=_,s.color=N.getColor(i.quality)):(l=g.database.getData("talismanattr",m),_=I.getName(l.key),_+=I.getValueStr(l.key,l.getValue(5),!0),s.text=_+"（红色品质激活）",s.color="#b0bcb0")}},e.getTalismanSpAttrId=function(e,t){var i=0;return i=e>=6?1e3*t+5:e>=4?1e3*t+4:1e3*t+3},e.renderTalisman=function(t,i,n){void 0===n&&(n=!1),e._renderTalisman(t,i,!1,n)},e.renderTalismanTempAttr=function(t,i,n){void 0===n&&(n=!1),e._renderTalisman(t,i,!0,n)},e.renderTalismanEmptyGrid=function(e,t){var i;i=e.getChildByName("name"),i.text="未装备",i.color="#ffffff";var n=e.getChildByName("nature");n.index=-1,i=e.getChildByName("grad"),i.text=Re.getClutureName(t),i.color=Re.getCultureColor(t);for(var o=0;4>o;o++)i=e.getChildByName("attribute"+o),i.text="";i=e.getChildByName("attributeSP"),i.text="",i=e.getChildByName("price"),i.text="",i=e.getChildByName("lbPrice"),i.visible=!1;var s=e.getChildByName("priceIcon");s.visible=!1},e.renderTalismanOverview=function(t,i,n){var o;o=t.getChildByName("name"),o.text=i.talismanConf.name,o.color=N.getColor(i.quality);var s=t.getChildByName("nature");s.index=i.talismanConf.nature-1,o=t.getChildByName("price"),o.text="",o=t.getChildByName("lbPrice"),o.visible=!1;var r=t.getChildByName("priceIcon");r.visible=!1,o=t.getChildByName("grad"),o.text=Re.getClutureName(i.talismanConf.grad),o.color=Re.getCultureColor(i.talismanConf.grad);var a,l,h=Re.getMaxAttrCount(i);switch(i.baseAttr.length){case 1:l="#0084ff";break;case 2:l="#fffc00";break;case 3:l="#e70626";break;case 4:l="#c527ff";break;default:l="#ffffff"}for(var c=0;4>c;c++)if(o=t.getChildByName("attribute"+c),c<i.baseAttr.length)if(-1!=n.indexOf(c)){var u=i.baseAttr[c].key;a=g.database.getData("talismanattr",u);var d=I.getName(a.key),p=I.getValueStr(a.key,a.getValue(i.quality),!0);o.text=d+p,o.color=l}else o.text="?? + ???",o.color=l;else c==i.baseAttr.length&&h>c&&c==n.length?o.text="?? + ???":o.text="";o=t.getChildByName("attributeSP");var f,_=0;_=e.getTalismanSpAttrId(i.talismanConf.grad,i.talismanConf.nature),i.quality>=5?(a=g.database.getData("talismanattr",_),f=I.getName(a.key),f+=I.getValueStr(a.key,a.getValue(i.quality),!0),o.text=f,o.color=N.getColor(i.quality)):(a=g.database.getData("talismanattr",_),f=I.getName(a.key),f+=I.getValueStr(a.key,a.getValue(5),!0),o.text=f+"（红色品质激活）",o.color=N.getColor(5))},e.renderTalismanNatureOverview=function(t,i,n){var o,s=1e3*n+i.baseId%1e3,r=g.database.getData("talisman",s);o=t.getChildByName("name"),o.text=r.name,o.color=N.getColor(i.quality);var a=t.getChildByName("nature");a.index=n-1,a.x=o.x+o.width,o=t.getChildByName("grad"),o.text=Re.getClutureName(i.talismanConf.grad),o.color=Re.getCultureColor(i.talismanConf.grad),o.x=a.x+a.width;var l;o=t.getChildByName("price"),o.text="",o=t.getChildByName("lbPrice"),o.visible=!1,l=t.getChildByName("priceIcon"),l.visible=!1;var h,c,u=i.baseAttr;switch(u.length){case 1:c="#0084ff";break;case 2:c="#fffc00";break;case 3:c="#e70626";break;case 4:c="#c527ff";break;default:c="#ffffff"}for(var d=0;4>d;d++)if(o=t.getChildByName("attribute"+d),0!=d)if(d<u.length){var p=u[d].key;h=g.database.getData("talismanattr",p);var f=I.getName(h.key),_=I.getValueStr(h.key,h.getValue(i.quality),!0);o.text=f+_,o.color=c}else o.text="";else o.text="??",o.color=c;if(o=t.getChildByName("attributeSP"),0==r.nature)o.text="",o=t.getChildByName("attribute0"),o.text="器魂可用作升级法宝的材料";else{var m,v=e.getTalismanSpAttrId(r.grad,r.nature);i.quality>=5?(h=g.database.getData("talismanattr",v),m=I.getName(h.key),m+=I.getValueStr(h.key,h.getValue(i.quality),!0),o.text=m,o.color=N.getColor(i.quality)):(h=g.database.getData("talismanattr",v),m=I.getName(h.key),m+=I.getValueStr(h.key,h.getValue(5),!0),o.text=m+"（红色品质激活）",o.color="#b0bcb0")}},e.renderBlood=function(e,t,i,n){if(void 0===i&&(i=-1),void 0===n&&(n=!1),null!=t){var o=(Ng.userVO.getValue(1006),0),s=e.getChildByName("name");s.color=N.getColor(t.quality),t.quality>6?s.text="真·"+t.propConf.name:s.text=t.propConf.name,o=s.x+s.width+5;var r=e.getChildByName("nature");r.index=t.propConf.nature-1,r.x=o,o=o+r.width+5,s=e.getChildByName("level"),0>=i?s.text="":s.text="★+"+i,s.color="#fffc00",s.x=o,s=e.getChildByName("count"),0>i&&t.count>1?s.text=t.count+"个":s.text="";var a=e.getChildByName("priceIcon");if(a){var l=t.propConf.silverPrice;0>=l?(s=e.getChildByName("price"),s.text="",s.visible=!1,a&&(a.visible=!1),s=e.getChildByName("lbPrice"),s&&(s.visible=!1)):(s=e.getChildByName("price"),s.text=l+"",s.visible=n,a&&(a.visible=n),s=e.getChildByName("lbPrice"),s&&(s.visible=n))}var h=e.getChildByName("attribute3");h&&(t.quality>6?(h.text=hi.getOrangeAttr(t),h.color="#FFA500",h.visible=!0):h.visible=!1),s=e.getChildByName("desc"),s.text=t.propConf.desc;
var c=t.propConf.baseAttr[0],u=I.getName(c.key),d=c.min,p=c.max;-1==i?(s=e.getChildByName("attribute1"),s.visible=!0,s.text=u+I.getValueStr(c.key,d,!0),s.color="#0084ff",s=e.getChildByName("attribute2"),s.visible=-1==i,s.text="熔炼每级"+I.getValueStr(c.key,p,!0),s.color="#fffc00"):(s=e.getChildByName("attribute1"),s.visible=!0,s.text=u+I.getValueStr(c.key,d,!0),s.color="#0084ff",s=e.getChildByName("attribute2"),s.text=u+I.getValueStr(c.key,p*i,!0),s.color="#fffc00")}},e.renderBloodSimple=function(e,t,i){void 0===i&&(i=-1);var n=(Ng.userVO.getValue(1006),0),o=e.getChildByName("name");o.color=N.getColor(t.quality),t.quality>6?o.text="真·"+t.propConf.name:o.text=t.propConf.name,n=o.x+o.width+5;var s=e.getChildByName("nature");s.index=t.propConf.nature-1,s.x=n,o=e.getChildByName("count"),o&&(o.text=t.countTmp+"个");var r=e.getChildByName("attribute3");r&&(t.quality>6?(r.text=hi.getOrangeAttr(t),r.color="#FFA500",r.visible=!0):r.visible=!1);var a=t.propConf.baseAttr[0],l=I.getName(a.key),h=a.min,c=a.max;0>=i?(o=e.getChildByName("attribute1"),o.visible=!0,o.text=l+I.getValueStr(a.key,h,!0),o=e.getChildByName("attribute2"),o.visible=!0,o.text="熔炼每级"+I.getValueStr(a.key,c,!0)):(o=e.getChildByName("attribute1"),o.visible=!0,o.text=l+I.getValueStr(a.key,h,!0),o=e.getChildByName("attribute2"),o.visible=!0,o.text="熔炼加成"+I.getValueStr(a.key,c*i,!0))},e.renderBloodSimpleByCfg=function(e,t,i){void 0===i&&(i=-1);var n=(Ng.userVO.getValue(1006),0),o=e.getChildByName("name");o.color=N.getColor(t.quality),t.quality>6?o.text="真·"+t.name:o.text=t.name,n=o.x+o.width+5;var s=e.getChildByName("nature");s.index=t.nature-1,s.x=n,o=e.getChildByName("count"),o&&(o.text="1个");var r=e.getChildByName("attribute3");r&&(r.visible=!1);var a=t.baseAttr[0],l=I.getName(a.key),h=a.min,c=a.max;0>=i?(o=e.getChildByName("attribute1"),o.visible=!0,o.text=l+I.getValueStr(a.key,h,!0),o=e.getChildByName("attribute2"),o.visible=!0,o.text="熔炼每级"+I.getValueStr(a.key,c,!0)):(o=e.getChildByName("attribute1"),o.visible=!0,o.text=l+I.getValueStr(a.key,h,!0),o=e.getChildByName("attribute2"),o.visible=!0,o.text="熔炼加成"+I.getValueStr(a.key,c*i,!0))},e.renderExchangeItem=function(t,i){var n,o;if(1==i.type){n=g.database.getData("equip",i.baseId),e.renderEquipByCfg(t,n);var s=t.getChildByName("attribute");s.style.lineHeight=30,s.style.fontSize=26,s.style.bold=!0,s.innerHTML="",e.addAttributeHtml(s,i.baseAttr,"#ffffff");var r=i.baseAttr.length+i.exAttr.length+i.liveAttr.length+i.spAttr.length+i.creatAttr.length;if(e.addAttributeHtml(s,i.exAttr,"#1440ee"),o=t.getChildByName("attributeSP"),n.position<8)e.addAttributeHtml(s,i.liveAttr,"#7985e0"),o.visible=!1;else if(i.liveAttr&&i.liveAttr.length){var a=i.liveAttr[0],l=I.getName(a.key);o.text=l+I.getValueStr(a.key,a.value,!0),o.visible=!0}else o.visible=!1;e.addAttributeHtml(s,i.spAttr,"#46A3FF"),e.addAttributeHtml(s,i.creatAttr,"#1a9915",r>6),i.canCreatAttr(n)&&s.appendHTML("<font color='#b0bcb0' size='12'>未点化</font>")}else if(0==i.type){var h=t.getChildByName("attribute3");h&&(h.visible=!1),n=g.database.getData("props",i.baseId),modules.goods.GoodsRenderHelper.renderPropsByCfg(t,n,i.count),2==n.propType&&0==i.baseAttr.length?(i.needIdentify(n)&&(o.text=o.text+"(未鉴定)"),o=t.getChildByName("attribute1"),0!=n.baseAttr.length?e.showPropAttr2(n.baseAttr[0],o):o.visible=!1,o=t.getChildByName("attribute2"),n.baseAttr.length>1?(o.color="#46A3FF",e.showPropAttr2(n.baseAttr[1],o)):o.visible=!1):18==n.propType&&0==i.baseAttr.length?(i.needIdentify(n),o=t.getChildByName("attribute1"),o.text="??? + ??",o.visible=!0,o=t.getChildByName("attribute2"),o.visible=!1):(o=t.getChildByName("attribute1"),0!=i.baseAttr.length?e.showPropAttr(i.baseAttr[0],o):o.visible=!1,o=t.getChildByName("attribute2"),i.baseAttr.length>1?(o.color="#46A3FF",e.showPropAttr(i.baseAttr[1],o)):o.visible=!1)}},e.renderPearSimple=function(t,i,n,o){void 0===o&&(o=0);var s=(Ng.userVO.getValue(1006),0),r=t.getChildByName("name");r.color="#ffffff",r.text=R.getName(n)+"灵珠",s=r.x+r.width+5;var a=t.getChildByName("nature");a.index=n-1,a.x=s,s=s+a.width+5,r=t.getChildByName("level"),r.text="1级",r.x=s,s=s+r.width+5,r=t.getChildByName("count"),r.text="",r=t.getChildByName("binding"),r&&(r.visible=!1,r.x=s);var l=t.getChildByName("priceIcon");r=t.getChildByName("lbPrice"),r&&(r.visible=!1),r=t.getChildByName("price"),r.text="",l&&(l.visible=!1),r=t.getChildByName("desc"),r.text="";var h=t.getChildByName("attribute3");h&&(h.visible=!1);var c=i.getAttr(n,o);r=t.getChildByName("attribute1"),r.color="#ffffff",e.showPropAttr(c[0],r),r=t.getChildByName("attribute2"),c.length>1?(r.color="#ffffff",e.showPropAttr(c[1],r)):r.visible=!1},e.renderPearl=function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var s=o>0?o:i.level,r=n>0?n:i.nature,a=t.getChildByName("position");a.text=L.getTypeName(i.pos);var l=N.getColor(Vt.getQuality(s));a=t.getChildByName("name"),a.color=l,a.text=s+"级"+R.getName(r)+"灵珠";var h=a.x+a.width+5,c=t.getChildByName("nature");c.index=r-1,c.x=h,c.visible=!0,h=h+c.width+5,a=t.getChildByName("level"),a.text="";var u=t.getChildByName("attribute");u.style.lineHeight=30,u.style.fontSize=26,u.style.bold=!0,u.innerHTML="",e.addAttributeHtml(u,i.getAttr(n,o),l);var d=t.getChildByName("arrow");d.visible=!1,10>s&&(u.appendHTML("<font color='#b0bcb0'>升级后↓</font><br>"),e.addAttributeHtml(u,i.getAttr(n,s+1),"#b0bcb0"));var p=t.getChildByName("attributeNext");p.innerHTML=""},e.renderPearlSuit=function(t,i){var n=t.getChildByName("position");n.text="【套装】";var o=N.getColor(Vt.getQuality(i));n=t.getChildByName("name"),n.color=o,i>0?n.text=i+"级五行灵珠":n.text="五行灵珠";var s=n.x+n.width+5,r=t.getChildByName("nature");r.visible=!1,n=t.getChildByName("level"),0>=i?(o="#b0bcb0",n.text="未激活"):n.text="",n.x=s+5,n.color=o;var a=t.getChildByName("attribute");a.style.lineHeight=30,a.style.fontSize=26,a.style.bold=!0,a.innerHTML="",i>0?a.appendHTML("<font color='#00dc24'>当前加成:</font><br>"):a.appendHTML("<font color='#b0bcb0'>激活1级后加成:</font><br>");var l=Vt.getSuitAdd(i);0>=l&&(l=200);var h=[{key:1426,value:l},{key:1429,value:l},{key:1207,value:l},{key:1208,value:l}];e.addAttributeHtml(a,h,o);var c=t.getChildByName("attrSp1"),u=t.getChildByName("attrSp2");i>=10?(c.text="玩家对战时：生命增加3.5倍、攻击防御增加1.7倍",c.color="#c527ff",c.visible=!0,u.visible=!1):i>=9?(c.text="玩家对战时：生命增加2倍、攻击防御增加1.3倍",c.color="#e70626",c.visible=!0,u.text="玩家对战时：生命增加3.5倍、攻击防御增加1.7倍(10级激活)",u.color="#b0bcb0",u.visible=!0):i>=8?(c.text="玩家对战时：生命增加1.5倍",c.color="#fffc00",c.visible=!0,u.text="玩家对战时：生命增加2倍、攻击防御增加1.3倍(9级激活)",u.color="#b0bcb0",u.visible=!0):i>=7?(c.text="玩家对战时：生命增加1.5倍(8级激活）",c.color="#b0bcb0",c.visible=!0,u.visible=!1):(c.visible=!1,u.visible=!1);var d=t.getChildByName("arrow");d.visible=!1,a=t.getChildByName("attributeNext"),a.innerHTML="",i>0&&10>i&&(d.visible=!0,a.style.lineHeight=30,a.style.fontSize=26,a.style.bold=!0,a.appendHTML("<font color='#b0bcb0'>下级加成:</font><br>"),l=Vt.getSuitAdd(i+1),h=[{key:1426,value:l},{key:1429,value:l},{key:1207,value:l},{key:1208,value:l}],e.addAttributeHtml(a,h,"#b0bcb0"))},e.renderPearlEmpty=function(e,t){var i=e.getChildByName("position");i.text=L.getTypeName(t);var n="#b0bcb0";i=e.getChildByName("name"),i.color=n,i.text="灵珠未装备";var o=i.x+i.width+5,s=e.getChildByName("nature");s.visible=!1,o=o+s.width+5,i=e.getChildByName("level"),i.text="";var r=e.getChildByName("arrow");r.visible=!1;var a=e.getChildByName("attribute");a.innerHTML="";var l=e.getChildByName("attributeNext");l.innerHTML=""},e.renderDemonEmptyGrid=function(e,t){var i=e.getChildByName("position");i.text=Xn.getTypeNameFull(t),i.color="#b0bcb0",i=e.getChildByName("level"),i.text="未装备",i.color="#e70626";var n=e.getChildByName("attribute");n.innerHTML=""},e.renderDemon=function(t,i){e.renderDemonByCfg(t,i.demonConf)},e.renderDemonByCfg=function(e,t){var i=0,n=e.getChildByName("position");n.text=Xn.getTypeNameFull(t.position),i=n.x+n.width;var o=N.getColor(t.quality);n.color=o,n=e.getChildByName("level"),n.text=t.star+"",n.color=o,n.x=i;var s=e.getChildByName("attribute");s.style.lineHeight=30,s.style.fontSize=26,s.style.bold=!0,s.innerHTML="",s.appendHTML("<font color='#fffc00'>"+t.level+"级伏魔装备</font><br><br>"),v.LIMIT_DUNGEON_OPEN_VERSION?(s.appendHTML("<font color='"+o+"'>&nbsp;攻击 + "+t.attack/10+"</font><br>"),s.appendHTML("<font color='"+o+"'>&nbsp;防御 + "+t.defense/10+"</font><br>"),s.appendHTML("<font color='"+o+"'>&nbsp;生命 + "+t.hp/10+"</font><br>")):(s.appendHTML("<font color='"+o+"'>&nbsp;攻击 + "+t.attack+"</font><br>"),s.appendHTML("<font color='"+o+"'>&nbsp;防御 + "+t.defense+"</font><br>"),s.appendHTML("<font color='"+o+"'>&nbsp;生命 + "+t.hp+"</font><br>"))},e.renderDemonSuit=function(e,t){var i=e.getChildByName("attribute");i.style.lineHeight=30,i.style.fontSize=26,i.style.bold=!0,i.innerHTML="";for(var n=null,o=1e3,s=1;4>=s;s++){var r=Xn.getTypeNameFull(s),a=t[s];null==a?(o=0,i.appendHTML("<font color='#b0bcb0'>"+r+"</font><br>")):(a.demonConf.level<o&&(o=a.demonConf.level),i.appendHTML("<font color='"+N.getColor(a.quality)+"'>"+r+a.demonConf.star+"</font><br>"))}var l;0>=o||1e3==o?(o=0,n=g.database.getData("demonupgrade",1),l="#b0bcb0"):(n=g.database.getData("demonupgrade",o),l=N.getColor(jn.getLevelColor(n.id)));var h=e.getChildByName("position");h.text="【套装】",h.color=l;var c=h.x+h.width;h=e.getChildByName("level"),o>0?(h.text="",h.color=l):(h.text="未激活",h.color="#e70626",h.x=c),i.appendHTML("<font color='"+l+"'>抗腐蚀 + "+n.suitAdd+"</font><font color='#c527ff'>（可抵消轮回之地【腐蚀】等级）</font><br>")},e.renderPetEquip=function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var s=e,r=t.baseCfg,a=t.extCfg,l=N.getColor(t.quality);s.prefix.text=a.prefix,s.prefix.color=l,s.lbPos.text="【"+r.name+"】",s.lbPos.x=s.prefix.x+s.prefix.width,s.lbPos.color=l,s.nature.index=t.nature-1,s.nature.x=s.lbPos.x+s.lbPos.width;var h=o,c=n,u=0;if(null!=i?(h+=i.getFeedLv(t.pos),c+=i.getStarLv(t.pos),u+=i.getRefine(t.pos),t.count>1?s.lbCount.text=t.count+"个":s.lbCount.text=""):s.lbCount.text=t.count+"个",h>0){var d=an.queryMaxFeedLevel(t.prefix);h==d?s.lbFeed.text="◆+"+h+"满":h>d?(h=d,s.lbFeed.text="◆+"+h+"溢"):s.lbFeed.text="◆+"+h}else s.lbFeed.text="";s.lbFeed.x=s.nature.x+s.nature.width,c>0?s.star.text="★+"+c:s.star.text="",s.star.x=s.lbFeed.x+s.lbFeed.width;var p=0,f=0;switch(p=r.getKey(),f=r.getValue(t.prefix),s.attr_base.text=I.getName(p)+I.getValueStr(p,f,!0),t.nature){case 1:s.attr_nature0.text=I.getName(1407)+"+10",s.attr_nature1.text=I.getName(1409)+"-10";break;case 2:s.attr_nature0.text=I.getName(1410)+"+10",s.attr_nature1.text=I.getName(1406)+"-10";break;case 3:s.attr_nature0.text=I.getName(1409)+"+10",s.attr_nature1.text=I.getName(1410)+"-10";break;case 4:s.attr_nature0.text=I.getName(1406)+"+10",s.attr_nature1.text=I.getName(1408)+"-10";break;case 5:s.attr_nature0.text=I.getName(1408)+"+10",s.attr_nature1.text=I.getName(1407)+"-10"}if(h>0){var _=an.getFeedAdd(h,f);s.attr_feed.text=" + "+_,f+=_}else s.attr_feed.text="";if(s.attr_feed.x=s.attr_base.x+s.attr_base.width,c>0?s.attr_star.text=" + "+an.getStarAdd(c,f):s.attr_star.text="",s.attr_star.x=s.attr_feed.x+s.attr_feed.width,s.attr_nature0.x=s.attr_star.x+s.attr_star.width+10,s.attr_nature1.x=s.attr_nature0.x+s.attr_nature0.width+10,u>0){var m=an.queryMaxRefineAdd(t.prefix);u==m?s.attr_refine.text="精炼度"+u/100+"%满":u>m?(u=m,s.attr_refine.text="精炼度"+u/100+"%溢"):s.attr_refine.text="精炼度"+u/100+"%"}else s.attr_refine.text="未精炼";for(var g=0;5>g;g++){var v=s["attr_ext"+g],y=s["attr_add"+g];if(g<t.extAttr.length){var b=t.extAttr[g];if(f=b.value,v.text=I.getName(b.key)+I.getValueStr(b.key,f,!0),u>0){var E=f*u/1e4;E=vo["int"](E),1>E&&(E=1),y.text=I.getValueStr(b.key,E,!0),y.x=v.x+v.width}else y.changeText("")}else t.isIdentify||4!=g?v.text="":v.text="未鉴定",y.changeText("")}s.lbChg.visible=t.quality>=5},e.renderPetEquipEmpty=function(e,t){var i=e;i.prefix.text="【"+en.getName(t)+"】未装备",i.prefix.color="#b0bcb0",i.lbPos.text="",i.nature.index=-1,i.lbFeed.text="",i.lbCount.text="",i.star.text="",i.attr_refine.text="",i.attr_base.text="",i.attr_feed.text="",i.attr_star.text="",i.attr_nature0.text="",i.attr_nature1.text="",i.attr_ext0.text="",i.attr_ext1.text="",i.attr_ext2.text="",i.attr_ext3.text="",i.attr_ext4.text="",i.attr_add0.text="",i.attr_add1.text="",i.attr_add2.text="",i.attr_add3.text="",i.attr_add4.text="",i.lbCount.text="",i.lbChg.visible=!1},e.PROP_PRICE_LEVEL_LIMIT=5,e}(),On=function(){function e(){}return o(e,"modules.goods.model.BoxRule"),e.queryOpenTime=function(e){switch(e){case 300001:return"15分钟";case 300002:return"1小时";case 300003:return"4小时";case 300004:return"8小时";case 300005:return"16小时";default:return"3600000"}},e.queryOpenImmediatelyTime=function(e){switch(e){case 300001:return 9e5;case 300002:return 36e5;case 300003:return 144e5;case 300004:return 288e5;case 300005:return 576e5;default:return 36e5}},e.queryOpenImmediatelyGold=function(t){switch(t){case 300001:return e.queryGoldNeedOfSpeed(9e5);case 300002:return e.queryGoldNeedOfSpeed(36e5);case 300003:return e.queryGoldNeedOfSpeed(144e5);case 300004:return e.queryGoldNeedOfSpeed(288e5);case 300005:return e.queryGoldNeedOfSpeed(576e5);default:return e.queryGoldNeedOfSpeed(36e5)}},e.queryGoldNeedOfSpeed=function(e){var t=Math.ceil(e/6e4/5);return t},e.queryGoldNeedOfOpen=function(e){switch(e){case 2:return 300;case 3:return 500;case 4:return 800;default:return 0}},e.queryGoldNeedLevel=function(e){switch(e){case 2:return 20;case 3:return 45;case 4:return 60;default:return 100}},e.FRESH_BOX=300001,e.GREEN_BOX=300002,e.YELLOW_BOX=300003,e.RED_BOX=300004,e.PURPLE_BOX=300005,e}(),Mn=function(){function e(e){this._id=NaN,this._baseId=0,this._count=0,this._index=0,this._backpack=0,this._binding=!1,this._quality=0,this._discardTime=NaN,this._reason=0,this._expiration=NaN,this._trading=!1,this._goodsType=0,this._key=null,this._id=e.id,this._baseId=e.baseId,this._count=e.count,this._index=e.index,this._backpack=e.backpack,this._binding=e.binding,this._quality=e.quality,this._discardTime=e.discardTime,this._reason=e.reason,this._expiration=e.expiration,this._trading=e.trading,this._goodsType=e.goodsType,e.attrs&&this.analyzeAttrs(e.attrs)}o(e,"modules.goods.model.data.PackGoods");var t=e.prototype;return t.updateAttr=function(e){this.analyzeAttrs(e)},t.analyzeAttrs=function(e){console.log("解析物品属性，子类未实现--！")},t.updateSimple=function(e){return this._id!=e.id||this._goodsType!=e.goodsType?void as.error(this,"updateSimple","更新目标错误"):(this._count=e.count,this._index=e.index,void(this._backpack=e.backpack))},s(0,t,"goodsType",function(){return this._goodsType}),s(0,t,"id",function(){return this._id}),s(0,t,"backpack",function(){return this._backpack},function(e){this._backpack=e}),s(0,t,"trading",function(){return this._trading},function(e){this._trading=e}),s(0,t,"expiration",function(){return this._expiration},function(e){this._expiration=e}),s(0,t,"key",function(){return null==this._key&&(this._key=e.buildKey(this.id,this.goodsType)),this._key}),s(0,t,"discardTime",function(){return this._discardTime},function(e){this._discardTime=e}),s(0,t,"binding",function(){return this._binding},function(e){this._binding=e}),s(0,t,"reason",function(){return this._reason},function(e){this._reason=e}),s(0,t,"count",function(){return this._count},function(e){this._count=e}),s(0,t,"iconPath",function(){return console.log("子类必需覆盖"),null}),s(0,t,"quality",function(){return this._quality},function(e){this._quality=e}),s(0,t,"baseId",function(){return this._baseId},function(e){this._baseId=e}),e.buildKey=function(e,t){return e+"_"+t},e}(),Dn=(function(){function e(){}return o(e,"modules.goods.model.data.EquipAttrIdType"),e.BASE=0,e.EXTEND=1,e.SPECAIL=2,e.LIVE=3,e.CREAT=4,e}(),function(){function e(e){this.pos=0,this.prefix=0,this.nature=0,this.quality=0,this.pos=vo["int"](e/1e4),this.prefix=vo["int"](e%1e4/100),this.quality=vo["int"](e%100/10),this.nature=e%10}o(e,"modules.goods.model.data.PetEquipSimple");var t=e.prototype;return s(0,t,"baseCfg",function(){return g.database.getData("petequipbase",this.pos)}),s(0,t,"extCfg",function(){return g.database.getData("petequipext",this.prefix)}),s(0,t,"isIdentify",function(){return this.quality<=1}),e}()),kn=function(){function e(){}return o(e,"modules.goods.model.PropRule"),e.getDhCostSilver=function(e){var t=e*e*50;return 20>=e?t/=10:30>=e?t/=5:40>=e&&(t/=2),t},e.getDropGhostNum=function(e,t){var i=0;switch(e){case 1:i=4;break;case 2:i=2;break;case 3:i=3}switch(t){case 1:break;case 2:i*=3;break;case 3:i*=9;break;case 4:i*=27;break;case 5:i*=81}return i},e.getExchangeGhostRate=function(e){switch(e){case 15:case 25:return 150;case 30:return 300;case 35:return 400;case 45:return 500;case 50:return 600;case 55:case 56:return 700;default:return 1e3}},e.getGhostExchangeCostSilver=function(e,t){switch(t){case 1:break;case 2:break;case 3:e=vo["int"](166*e/100);break;case 4:e*=2;break;case 5:e=vo["int"](250*e/100)}return e},e.PET_FRUIT_ID=500003,e.CHANGE_NAME_CARD=500005,e.HANDBOOK_BOX=500006,e.GOD_BOX=500007,e.CHANGE_NATURE_DRUG=500008,e.SPRING_BOX=500009,e.MOON_CAKE=500012,e.CHAR_GUO=500013,e.CHAR_QIN=500014,e.CHAR_KUAI=500015,e.CHAR_LE=500016,e.NEW_YEAR_BOX=500018,e.TALISMAN_CHG_NATURE=500023,e.FOREST_ADD_PROPS=200002,e.TEAM_ADD_PROPS=200003,e.PET_ORANGE_DRUG=30009,e.PET_GROW_DRUG=30010,e.PET_NATURE_DRUG=30011,e.ALLIANCE_MINE_BOX=185018,e.SKY_STONE_RED=185007,e.SKY_STONE_PURPLE=185008,e.SKY_STONE_PIECE_RED=185009,e.SKY_STONE_PIECE_PURPLE=185010,e}(),Bn=(function(){function e(){}return o(e,"modules.guard.GuardNotification"),e.OPEN_GUARD_PAGE="OPEN_GUARD_PAGE",e.RECEIVE_GUARD_INFO="RECEIVE_GUARD_INFO",e}(),function(){function e(){}return o(e,"modules.guard.controller.GuardCmd"),e.QUERY=1,e.FRESH=2,e.CATCH_FIGHT=3,e.REVOLT_FIGHT=4,e.CHG_POS=5,e.TAKE_DONATE=6,e.ABANDON=7,e.CHG_ROBAT=8,n(e,["GUARD_QUERY",function(){return this.GUARD_QUERY="60_1"},"GUARD_FRESH",function(){return this.GUARD_FRESH="60_2"},"GUARD_CATCH_FIGHT",function(){return this.GUARD_CATCH_FIGHT="60_3"},"GUARD_REVOLT_FIGHT",function(){return this.GUARD_REVOLT_FIGHT="60_4"},"GUARD_CHG_POS",function(){return this.GUARD_CHG_POS="60_5"},"GUARD_TAKE_DONATE",function(){return this.GUARD_TAKE_DONATE="60_6"},"GUARD_ABANDON",function(){return this.GUARD_ABANDON="60_7"},"GUARD_CHG_ROBAT",function(){return this.GUARD_CHG_ROBAT="60_8"}]),e}()),Vn=(function(){function e(){this.playerId=NaN,this.host=null,this.hostHalo=null,this.guardA=null,this.guardB=null,this.team=null,this.guardTemp=null,this.guardTempHost=null,this.freshTime=NaN,this.catchFail=0,this.catchCd=NaN,this.revoltFail=0,this.revoltCd=NaN}return o(e,"modules.guard.model.PlayerGuard"),e}(),function(){function e(){this.id=NaN,this.name=null,this.nature=0,this.level=0,this.donate=0,this.extVip=NaN}return o(e,"modules.guard.model.GuardMember"),e}(),function(){function e(){}return o(e,"modules.guard.model.GuardRule"),e.getRobatLevel=function(e){var t=e,i=t%5;return i=0!=i?t+(5-i):t},e.OPEN_LEVEL=55,e.FREE_FRESH_CD=216e5,e.FRESH_COST_GOLD=10,e}()),Fn=(function(){function e(){}return o(e,"modules.adult.AdultType"),e.NONE="none",e.NORMAL="normal",e.HARD="hard",e}(),function(){function e(){}return o(e,"modules.adult.AdultNotification"),e.OPEN_ADULT_IDENTIFY="OPEN_ADULT_IDENTIFY",e}(),function(){function e(){}return o(e,"modules.adult.StepType"),e.VISITOR=1e3,e.WAIT_REG=1001,e.REG_SEND=1002,e.REG_CONFIRM=1003,e.REG_FAIL=1004,e}(),function(){function e(){}return o(e,"modules.setting.SettingNotification"),e.OPEN_SETTING_VIEW="OPEN_SETTING_VIEW",e.SETTING_SUCCESS="SETTING_SUCCESS",e.RECEIVE_SETTING_INFO="RECEIVE_SETTING_INFO",e}(),function(){function e(){}return o(e,"modules.setting.controller.SettingCmd"),e.QUERY=1,e.UPDATE=2,e.QUERY_HANG_SKILL=3,e.UPDATE_HANG_SKILL=4,n(e,["SETTING_QUERY",function(){return this.SETTING_QUERY="200_1"},"SETTING_UPDATE",function(){return this.SETTING_UPDATE="200_2"},"SETTING_QUERY_HANG_SKILL",function(){return this.SETTING_QUERY_HANG_SKILL="200_3"},"SETTING_UPDATE_HANG_SKILL",function(){return this.SETTING_UPDATE_HANG_SKILL="200_4"}]),e}()),Gn=(function(){function e(){}return o(e,"modules.setting.model.SettingType"),e.HANG_SETTING=1,e.SYSTEM_SETTING=2,e.TEAM_SETTING=3,e.HANG_SKILL_SETTING=4,e}(),function(){function e(){this.autoOpenBoxQuality=0,this.autoSaleSpQuality=0,this.autoSaleCmQuality=0,this.skillOnlyHang=0,this.tasktopshow=!1,this.autoBreakPetEquip=0,this.skillDisableDic=new go}o(e,"modules.setting.model.SettingInfo");var t=e.prototype;return t.getInfo=function(){return this.autoOpenBoxQuality+"_"+this.autoSaleSpQuality+"_"+this.autoSaleCmQuality+"_"+this.skillOnlyHang+"_"+(this.tasktopshow?"1":"0")+"_"+this.autoBreakPetEquip},t.getHangSkills=function(){var e,t="";for(var i in this.skillDisableDic.keys)e=this.skillDisableDic.keys[i],t=t+e+"_";return t.length>1&&(t=t.substr(0,t.length-1)),t},e}()),Hn=function(){function e(){}return o(e,"modules.achieve.controller.AchieveCmd"),e.QUERY=1,e.GET_AWARD=2,e.DRESS_TITLE=3,e.PUSH_ACHIEVE=100,n(e,["ACHIEVE_QUERY",function(){return this.ACHIEVE_QUERY="25_1"},"ACHIEVE_GET_AWARD",function(){return this.ACHIEVE_GET_AWARD="25_2"},"ACHIEVE_DRESS_TITLE",function(){return this.ACHIEVE_DRESS_TITLE="25_3"},"ACHIEVE_PUSH_ACHIEVE",function(){return this.ACHIEVE_PUSH_ACHIEVE="25_100"}]),e}(),Un=function(){function e(){this.finished=null,this.awarded=null,this.achieving=null,this._achieveList=null,this._baseAttrOnce=null,this.finished=new go,this.awarded=new go,this.achieving=new uo,this._baseAttrOnce=new uo,this._achieveList=[]}o(e,"modules.achieve.model.PlayerAchieve");var t=e.prototype;return t.update=function(e){var t,i,n;this.finished.clear(),this.awarded.clear(),this.achieving.clear(),this._baseAttrOnce.clear();var o=0;if(""!=e.finishedIds){var s,r=e.finishedIds.split("_");for(s in r)t=r[s],o=vo["int"](t),this._isOnMiniIosNoPay(o)||this.finished.add(o)}if(""!=e.awardedIds){r=e.awardedIds.split("_");var s;for(s in r)t=r[s],o=vo["int"](t),this._isOnMiniIosNoPay(o)||this.awarded.add(o)}if(null!=e.achieving){r=e.achieving.split("|");var a;for(a in r)i=r[a],n=i.split("_"),2==n.length&&this.achieving.set(vo["int"](n[0]),vo["int"](n[1]))}this._achieveList.length=0;var l,h,c=g.database.getDict("achieve"),u=new go,d=new go;for(var p in c.keys)if(h=c.keys[p],l=c.get(h)){if(this._isOnMiniIosNoPay(l.type))continue;if(d.add(l.type),u.contain(l.type))continue;if(!this.finished.contain(l.id)){if(l.type>=22&&l.type<29)continue;this._achieveList.push({state:0,vo:l}),u.add(l.type);continue}if(!this.awarded.contain(l.id)){this._achieveList.unshift({state:1,vo:l}),u.add(l.type);continue}}var f;for(var _ in d.keys)if(f=d.keys[_],!u.contain(f)&&(l=c.get(1e3*f+7),l||(l=c.get(1e3*f+6)),l)){if(!this.finished.contain(l.id)&&l.type>=22)continue;this._achieveList.push({state:2,vo:l})}r=l.awardattr.split("|");var a;for(a in r)i=r[a],n=i.split("_"),2==n.length&&this._baseAttrOnce.set(vo["int"](n[0]),vo["int"](n[1]));this._achieveList.sort(this.compareFunctionBetter)},t._isOnMiniIosNoPay=function(e){return e>1e3&&(e=vo["int"](e/1e3)),!(10!=e&&17!=e||!T.IS_ON_MINI||!Or.onIOS)},t.compareFunctionBetter=function(e,t){if(1==e.state)return-1;if(1==t.state)return 1;if(t.vo.quailty==e.vo.quailty){if(2==e.state)return-1;if(2==t.state)return 1}return t.vo.quailty-e.vo.quailty},t.getAchievingVal=function(e){e>=29&&33>=e&&(e=14);var t=this.achieving.get(e);return null==t?0:t},s(0,t,"achieveList",function(){return this._achieveList}),s(0,t,"totalAwardNum",function(){return this.awarded.size}),s(0,t,"baseAttrOnce",function(){return this._baseAttrOnce}),s(0,t,"hasAward",function(){return this.finished.size>this.awarded.size}),e}(),zn=(function(){function e(){}return o(e,"modules.achieve.AchieveNotification"),e.RECEIVE_ACHIEVE_INFO="RECEIVE_ACHIEVE_INFO",e}(),function(){function e(){}return o(e,"modules.activityweek.ActivityWeekNotification"),e.SHOW_ACTIVIT_WEEK_PAGE="SHOW_ACTIVIT_WEEK_PAGE",e.ACTIVIT_WEEK_INFO="ACTIVIT_WEEK_INFO",e.ACTIVIT_WEEK_INFO_NOTIFICATION="ACTIVIT_WEEK_INFO_NOTIFICATION",e}(),function(){function e(){}return o(e,"modules.activityweek.controller.ActivityWeekCmd"),e.QUERY=1,e.TAKE_AWARD=2,e.TAKE_AWARD_EX=3,e.FAST_CHG=4,n(e,["ACTIVITY_WEEK_QUERY",function(){return this.ACTIVITY_WEEK_QUERY="47_1"},"ACTIVITY_WEEK_TAKE_AWARD",function(){return this.ACTIVITY_WEEK_TAKE_AWARD="47_2"},"ACTIVITY_WEEK_TAKE_AWARD_EX",function(){return this.ACTIVITY_WEEK_TAKE_AWARD_EX="47_3"},"ACTIVITY_WEEK_TAKE_FAST_CHG",function(){return this.ACTIVITY_WEEK_TAKE_FAST_CHG="47_4"}]),e}()),Wn=(function(){function e(){this.playerId=0,this.type=0,this.point=0,this.awardedIds=null,this.begin=0,this.buyTimes=0}return o(e,"modules.activityweek.model.Activity7DayEx"),e}(),function(){function e(){}return o(e,"modules.lottery.LotteryNotification"),e.OPEN_LOTTERY_PAGE="OPEN_LOTTERY_PAGE",e.RECEIVE_PLAYER_LOTTERY="RECEIVE_PLAYER_LOTTERY",e.RECEIVE_LOTTERY_DRAW="RECEIVE_LOTTERY_DRAW",e}(),function(){function e(){}return o(e,"modules.lottery.controller.LotteryCmd"),e.INFO=1,e.DRAW=2,n(e,["LOTTERY_INFO",function(){return this.LOTTERY_INFO="66_1"},"LOTTERY_DRAW",function(){return this.LOTTERY_DRAW="66_2"}]),e}()),Yn=function(){function e(){this.id=NaN,this.costGold=0,this.tripleEndTime=NaN,this.spAwardFlag=0,this.freshTime=NaN,this._RBase=0,this.awards=new go,this.spAwards=new go}o(e,"modules.lottery.model.PlayerLottery",null,"PlayerLottery$1");var t=e.prototype;return t.update=function(e){this.id=e.id,this.costGold=e.costGold,this.tripleEndTime=e.tripleEndTime,this.spAwardFlag=e.spAwardFlag,this.freshTime=e.freshTime;var t=0;if(this.awards.clear(),e.awards)var i;for(i in e.awards)t=e.awards[i],this.awards.add(t);if(this.spAwards.clear(),e.spAwards)var i;for(i in e.spAwards)t=e.spAwards[i],this.spAwards.add(t);this._RBase=0;var n;for(var o in qn.ITEMS)n=qn.ITEMS[o],this.awards.contain(n.id)||(this._RBase+=n.rate)},t.spAwardFull=function(){if(this.spAwards.size<5)return!1;for(var e=1;5>=e;e++)if(1==this.spAwardFlag){if(!this.spAwards.contain(-e))return!1}else if(!this.spAwards.contain(e))return!1;return!0},e}(),qn=function(){function e(){}return o(e,"modules.lottery.model.LotteryRule"),e.getDrawNeedGold=function(e){switch(e){case 1:return 1e3;case 2:return 2e3;case 3:return 4e3;case 4:return 6e3;case 5:return 8e3;case 6:return 1e4;case 7:return 13e3;case 8:return 16e3;case 9:return 2e4;case 10:return 25e3;case 11:return 4e4;case 12:return 5e4}return-1},e.OPEN_LEVE=55,e.OPEN_AFTER_DAY=18,e.EFFECT_DAY=30,n(e,["ITEMS",function(){return this.ITEMS=[{id:1,name:"3倍收益\n2小时",rate:2500,color:"#ffffff"},{id:2,name:"3倍收益\n6小时",rate:2050,color:"#e70626"},{id:3,name:"天籁石碎片\n5个",rate:1200,color:"#c527ff"},{id:4,name:"密阁之钥\n50个",rate:50,color:"#c527ff"},{id:5,name:"组队副本令\n1个",rate:800,color:"#fffc00"},{id:6,name:"仙品天籁石\n1个",rate:300,color:"#e70626"},{id:7,name:"仙品天籁石\n1个",rate:100,color:"#c527ff"},{id:8,name:"森林探索令\n1个",rate:800,color:"#fffc00"},{id:9,name:"3倍收益\n12小时",rate:1270,color:"#c527ff"},{id:10,name:"3倍收益\n3天",rate:650,color:"#c527ff"},{id:11,name:"3倍收益\n7天",rate:250,color:"#c527ff"},{id:12,name:"特技或血脉",rate:30,color:"#FFA500"}]}]),e}(),Kn=(function(){function e(){}return o(e,"modules.demon.DemonNotification"),e.RECEIVE_DEMON_MARKET_INFO="RECEIVE_DEMON_MARKET_INFO",e.OPEN_DEMON_DRESS_PAGE="OPEN_DEMON_DRESS_PAGE",e.OPEN_DEMON_MIX_PAGE="OPEN_DEMON_MIX_PAGE",e.RECEIVE_DEMON_UPGRADE="RECEIVE_DEMON_UPGRADE",e}(),function(){function e(){}return o(e,"modules.demon.controller.DemonCmd"),e.QUERY_MARKET=1,e.MARKET_TAKE=2,e.BUILD_ONE=3,e.UPGRADE_ONE=4,e.DRESS=5,n(e,["DEMON_QUERY_MARKET",function(){return this.DEMON_QUERY_MARKET="56_1"},"DEMON_MARKET_TAKE",function(){return this.DEMON_MARKET_TAKE="56_2"},"DEMON_BUILD_ONE",function(){return this.DEMON_BUILD_ONE="56_3"},"DEMON_UPGRADE_ONE",function(){return this.DEMON_UPGRADE_ONE="56_4"},"DEMON_DRESS",function(){return this.DEMON_DRESS="56_5"}]),e}()),Xn=function(){function e(){}return o(e,"modules.demon.model.DemonPosType"),e.getTypeNameSimple=function(t){return t>0&&4>=t?e.POS_NAMES[t]:""},e.getTypeNameFull=function(t){return t>0&&4>=t?"【伏魔"+e.POS_NAMES[t]+"】":""},e.MAX_GRID_NUM=4,e.BOW=1,e.LIAN=2,e.ARMOR=3,e.SHEILD=4,n(e,["POS_NAMES",function(){return this.POS_NAMES=["","弓","链","甲","盾"]}]),e}(),Qn=function(){function e(){this.id=NaN,this.level=0,this.times=0,this.gotToday=0,this.maxToday=0}o(e,"modules.demon.model.PlayerDemon");var t=e.prototype;return t.update=function(e){return null==e?void(this.id=-1):(this.id=e.id,this.level=e.level,this.times=e.times,this.gotToday=e.gotToday,void(this.maxToday=e.maxToday))},e}(),jn=function(){function e(){}return o(e,"modules.demon.model.DemonRule"),e.getDemonMarketUpgradeNeedTime=function(e){switch(e){case 1:return 30;case 2:return 35;case 3:return 45;case 4:return 60;case 5:return 90;case 6:return 125;case 7:return 160;case 8:return 200;default:return-1}},e.getLevelColor=function(e){return vo["int"](Math.ceil(e/3))},e.getDemonMarketPropCount=function(e){return e+1},e.OPEN_LEVEL=39,e}(),Zn=(function(){function e(){}return o(e,"modules.help.HelpNotification"),e.SHOW_HELP_PAGE="SHOW_HELP_PAGE",e.SHOW_HELP_STRONG_PAGE="SHOW_HELP_STRONG_PAGE",e}(),function(){function e(){}return o(e,"modules.look.LookNotification"),e.SHOW_LOOK_PAGE="SHOW_LOOK_PAGE",e.LOOK_RECEIVE_ATTR="LOOK_RECEIVE_ATTR",e.LOOK_RECEIVE_EQUIPS="LOOK_RECEIVE_EQUIPS",e.LOOK_RECEIVE_STARS="LOOK_RECEIVE_STARS",e.LOOK_RECEIVE_BONE="LOOK_RECEIVE_BONE",e.LOOK_RECEIVE_PET="LOOK_RECEIVE_PET",e.LOOK_RECEIVE_CULTURE="LOOK_RECEIVE_CULTURE",e.LOOK_RECEIVE_BLOOD="LOOK_RECEIVE_BLOOD",e.LOOK_RECEIVE_HANDBOOK="LOOK_RECEIVE_BOOK",e.LOOK_RECEIVE_PEARL="LOOK_RECEIVE_PEARL",e.LOOK_RECEIVE_MERIDIAN="LOOK_RECEIVE_MERIDIAN",e.LOOK_RECEIVE_PET_EQUIP_STAR="LOOK_RECEIVE_PET_EQUIP_STAR",e}(),function(){function e(){}return o(e,"modules.look.controller.LookCmd"),e.INFO=1,e.EQUIP=2,e.STAR=3,e.BONE=4,e.PET=5,e.CULTURE=6,e.BLOOD=7,e.HANDBOOK=8,e.PEARL=9,e.MERIDIAN=10,e.PET_EQUIP_INFO=11,n(e,["LOOK_INFO",function(){return this.LOOK_INFO="14_1"},"LOOK_EQUIP",function(){return this.LOOK_EQUIP="14_2"},"LOOK_STAR",function(){return this.LOOK_STAR="14_3"},"LOOK_BONE",function(){return this.LOOK_BONE="14_4"},"LOOK_PET",function(){return this.LOOK_PET="14_5"},"LOOK_CULTURE",function(){return this.LOOK_CULTURE="14_6"},"LOOK_BLOOD",function(){return this.LOOK_BLOOD="14_7"},"LOOK_HANDBOOK",function(){return this.LOOK_HANDBOOK="14_8"},"LOOK_PEARL",function(){return this.LOOK_PEARL="14_9"},"LOOK_MERIDIAN",function(){return this.LOOK_MERIDIAN="14_10"},"LOOK_PET_EQUIP_INFO",function(){return this.LOOK_PET_EQUIP_INFO="14_11"}]),e}()),Jn=function(){function e(){}return o(e,"modules.culture.CultureNotification"),e.SHOW_CULTURE_PAGE="SHOW_CULTURE_PAGE",e.RECEIVE_CULTURE_INFO="RECEIVE_CULTURE_INFO",e.RECEIVE_CULTURE_GAS="RECEIVE_CULTURE_GAS",e.RECEIVE_GLOBAL_BOSS_FRESH="RECEIVE_GLOBAL_BOSS_FRESH",e.__init$=function(){},e}(),$n=function(){function e(){}return o(e,"modules.culture.controller.CultureCmd"),e.QUERY=1,e.UPGRADE=2,e.PUSH_GAS=100,e.PUSH_GLOBAL_BOSS=101,n(e,["CULTURE_QUERY",function(){return this.CULTURE_QUERY="23_1"},"CULTURE_UPGRADE",function(){return this.CULTURE_UPGRADE="23_2"},"CULTURE_PUSH_GAS",function(){return this.CULTURE_PUSH_GAS="23_100"},"CULTURE_PUSH_GLOBAL_BOSS",function(){return this.CULTURE_PUSH_GLOBAL_BOSS="23_101"}]),e}(),eo=(function(){function e(){}return o(e,"modules.culture.model.CultureRule"),e.OPEN_LEVEL=35,e}(),function(){function e(){this._gas=NaN,this._current=null,this._next=null}o(e,"modules.culture.model.PlayerCulture");var t=e.prototype;return t.update=function(e){e>0?this._current=g.database.getData("culture",e):this._current=null,this._next=g.database.getData("culture",e+1)},s(0,t,"next",function(){return this._next}),s(0,t,"current",function(){return this._current}),s(0,t,"gas",function(){return this._gas},function(e){this._gas=e}),e}()),to=function(){function e(){}return o(e,"com.nwei.net.BaseSocketResponseType"),e.RESPONSE_CODE_ERROR=-1,e.RESPONSE_CODE_USER_TOO_MANY=-100,e.RESPONSE_CODE_SUCCESS=0,e.RESPONSE_CODE_NO_RESULTS=1,e.RESPONSE_CODE_RESOLVE_ERROR=2,e.RESPONSE_CODE_NO_RIGHT=3,e.RESPONSE_CODE_AUTH_CODE_ERROR=4,e}(),io=function(){function e(e,t,i){this._type=null,this._protocol=null,
this._data=null,this._type=e,this._protocol=t,this._data=i}o(e,"com.nwei.net.BaseSocketEvent");var t=e.prototype;return s(0,t,"protocol",function(){return this._protocol}),s(0,t,"data",function(){return this._data}),s(0,t,"type",function(){return this._type}),e.RECEIVED="received",e.RESPONSE_CODE_NO_RESULTS="response_code_no_results",e.RESPONSE_CODE_RESOLVE_ERROR="response_code_resolve_error",e.RESPONSE_CODE_NO_RIGHT="response_code_no_right",e.RESPONSE_CODE_AUTH_CODE_ERROR="response_code_auth_code_error",e.RESPONSE_CODE_ERROR="response_code_error",e}(),no=function(){function e(){this.module=0,this.cmd=0,this.value=null,this.status=0}o(e,"com.nwei.net.BaseSocketPacket");var t=e.prototype;return t.toString=function(){return this.module+"_"+this.cmd},s(0,t,"success",function(){return 0==this.status}),e}(),oo=function(){function e(){this.pageSize=10,this.pageNumber=0,this.totalPage=0,this.recoards=null}o(e,"com.nwei.utils.Pager");var t=e.prototype;return t.update=function(e){e&&(this.pageSize=e.pageSize,this.pageNumber=e.pageNum,this.totalPage=e.totalPage)},e}(),so=function(){function e(){console.log("util class please do not create")}return o(e,"com.nwei.utils.ChineseUtil"),e.getChineseNumSimple=function(e){return e>=1e8?vo.toFixedNum(e/1e8)+"亿":e>=1e4?vo.toFixedNum(e/1e4)+"万":e+""},e.getChineseNum=function(t){var i="",n=0;return t>1e8&&(n=vo["int"](t/1e8),i=i+e.getChineseNum(n)+e._CH_NUM[14],t%=1e8),t>1e4&&(n=vo["int"](t/1e4),i=i+e.getChineseNum(n)+e._CH_NUM[13],t%=1e4),t>1e3&&(n=vo["int"](t/1e3),i=i+e._CH_NUM[n]+e._CH_NUM[12],t%=1e3),t>100&&(n=vo["int"](t/100),i=i+e._CH_NUM[n]+e._CH_NUM[11],t%=100),t>10&&(n=vo["int"](t/10),i=i+e._CH_NUM[n]+e._CH_NUM[10],t%=10),t>0&&(i+=e._CH_NUM[t]),i},n(e,["_CH_NUM",function(){return this._CH_NUM=["","一","二","三","四","五","六","七","八","九","十","百","千","万","亿"]}]),e}(),ro=function(){function e(){}return o(e,"com.nwei.utils.DateUtil"),e.dateDiff=function(t,i){return e.dateDiffByMs(t.getTime(),i.getTime())},e.dateDiffByMs=function(t,i,n){void 0===n&&(n=!1);var o=0,s=0;return n?(o=vo["int"]((t-576e5)/e.T_1D),s=vo["int"]((i-576e5)/e.T_1D)):(o=Math.ceil((t-576e5)/e.T_1D),s=Math.ceil((i-576e5)/e.T_1D)),o-s},e.dateDiffHour=function(t,i){return Math.floor((t.getTime()-i.getTime())/e.T_1H)},e.isToday=function(e){var t=com.nwei.utils.DateUtil.newDate(g.clock.currentTime);return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},e.isTodayTs=function(t){return e.isToday(e.newDate(t))},e.isSameMonth=function(t){var i=e.newDate(g.clock.currentTime);return i.getMonth()==t.getMonth()&&i.getFullYear()==t.getFullYear()},e.newDate=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=8);var i=new Date,n=i.getTimezoneOffset();0>e&&(e=i.getTime());var o=new Date(e+60*n*1e3+60*t*60*1e3);return o},e.parseSimple=function(e){if(null==e)return"";var t=e.getHours(),i=e.getMinutes();return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(10>t?"0":"")+t+":"+(10>i?"0":"")+i},e.parseSimpleChinese=function(e){return null==e?"":e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日"+e.getHours()+"点"+e.getMinutes()+"分"},e.parseSimpleChineseShort=function(e){return null==e?"":e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日"},e.parseSystem=function(t){return null==t?"":t.getMonth()+1+"月"+t.getDate()+"日"+e.getWeekName(t.getDay())+t.getHours()+":"+t.getMinutes()},e.clockBackTime=function(t){var i=t-g.clock.currentTime;if(0>=i)return"00:00:01";var n=Math.floor(i/e.T_1H);10>n&&(n="0"+n),i%=e.T_1H;var o=Math.floor(i/e.T_1M);10>o&&(o="0"+o),i%=e.T_1M;var s=Math.floor(i/1e3);return 10>s&&(s="0"+s),n+":"+o+":"+s},e.parse=function(e){var t,i=e.indexOf(" "),n=null,o=null,s=null,r=null,a=null,l=null;if(-1!=i){t=e.substring(0,i);var h=t.split("-");n=h[0],o=h[1],s=h[2],t=o+"/"+s+"/"+n;var c=Date.parse(t),u=new Date(c);return t=e.substring(i+1),h=t.split(":"),r=h[0],a=h[1],l=h[2],u.setHours(r,a,l),g.clock.fixTimeZoneOffset(u),u}return null},e.getWeekName=function(t){return 0>t||t>6?"周"+t:e._WEEKS[t]},e.getWeek=function(){var t=e.newDate(g.clock.currentTime);return t.getDay()},e.getWeek2java=function(e){return e+1},e.T_1S=1e3,e.T_1M=6e4,e.T_1H=36e5,e.T_1D=864e5,n(e,["_WEEKS",function(){return this._WEEKS=["周日","周一","周二","周三","周四","周五","周六"]}]),e}(),ao=function(){function e(e){this._totalMilliseconds=NaN,this._totalMilliseconds=Math.floor(e)}o(e,"com.nwei.utils.TimeSpan");var t=e.prototype;return t.update=function(e){this._totalMilliseconds=e},s(0,t,"totalSeconds",function(){return this._totalMilliseconds/1e3}),s(0,t,"totalMinutes",function(){return this._totalMilliseconds/6e4}),s(0,t,"totalHours",function(){return this._totalMilliseconds/36e5}),s(0,t,"totalDays",function(){return this._totalMilliseconds/864e5}),s(0,t,"milliseconds",function(){return vo["int"](this._totalMilliseconds)%1e3}),s(0,t,"seconds",function(){return vo["int"](this._totalMilliseconds/1e3)%60}),s(0,t,"formatStringFullHour",function(){return _o.substitute("{0}:{1}:{2}",this.hoursFull<10?"0"+this.hoursFull:this.hoursFull,this.minutes<10?"0"+this.minutes:this.minutes,this.seconds<10?"0"+this.seconds:this.seconds)}),s(0,t,"days",function(){return vo["int"](this._totalMilliseconds/864e5)}),s(0,t,"minutes",function(){return vo["int"](this._totalMilliseconds/6e4)%60}),s(0,t,"totalMilliseconds",function(){return this._totalMilliseconds}),s(0,t,"hours",function(){return vo["int"](this._totalMilliseconds/36e5)%24}),s(0,t,"hoursFull",function(){return vo["int"](this._totalMilliseconds/36e5)}),s(0,t,"formatString",function(){return _o.substitute("{0}:{1}:{2}",this.hours<10?"0"+this.hours:this.hours,this.minutes<10?"0"+this.minutes:this.minutes,this.seconds<10?"0"+this.seconds:this.seconds)}),e.fromMilliseconds=function(t){return new e(t)},e.fromSeconds=function(t){return new e(1e3*t)},e.fromMinutes=function(t){return new e(6e4*t)},e.fromHours=function(t){return new e(36e5*t)},e.fromDays=function(t){return new e(864e5*t)},e.MILLISECONDS_IN_DAY=864e5,e.MILLISECONDS_IN_HOUR=36e5,e.MILLISECONDS_IN_MINUTE=6e4,e.MILLISECONDS_IN_SECOND=1e3,n(e,["me",function(){return this.me=new e(0)}]),e}(),lo=function(){function e(){}return o(e,"com.nwei.utils.TypeUtil"),e.isNull=function(e){return void 0==e||"undefined"==e?!0:!e||null==e},e.transform=function(e){for(var t=["","",""],i=1e3,n=3;e/i>=1;)i*=10,n+=1;var o,s=0;return 4>=n?(t[1]="千",t[0]=vo["int"](e/1e3)+""):8>=n?(o=vo["int"](n-4)/3>1?"千万":"万",s="万"===o?1e4:1e7,t[1]=o,t[0]=vo["int"](e/s)+""):16>=n&&(o=(n-8)/3>1?"千亿":"亿",o=(n-8)/4>1?"万亿":o,o=(n-8)/7>1?"千万亿":o,s=1,"亿"===o?s=1e8:"千亿"===o?s=1e11:"万亿"===o?s=1e12:"千万亿"===o&&(s=1e15),t[1]=o,t[0]=vo["int"](e/s)+""),1e3>e&&(t[1]="",t[0]=e+""),t.join("")},e}(),ho=function(){function e(){}return o(e,"com.nwei.utils.ArrayExtension"),e.createBetweenTwoNumbersArray=function(e,t){for(var i=[],n=e;t>=n;)i.push(n),n++;return i},e.addArray=function(e,t){for(var i=0;i<t.length;)e.push(t[i]),i++;return e},e.noRepeatArray=function(e){for(var t=new Array(0),i=0;i<e.length;){for(var n=!1,o=0;o<t.length;){if(t[o]==e[i]){n=!0;break}o++}n||t.push(e[i]),i++}return t},e.uniquArray=function(e,t){for(var i=[],n=0;n<e.length;){for(var o=!0,s=0;s<t.length;){if(t[s]==e[n]){o=!1;break}s++}o&&i.push(e[n]),n++}return i},e.countNumberArray=function(e){for(var t=new Number,i=0;i<e.length;i++)"number"==typeof e[i]&&(t+=e[i]);return t},e.clone=function(t,i){void 0===i&&(i=!1);var n;if(i){if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)"object"==typeof t[o]?n[o]=e.clone(t[o]):n[o]=t[o];return n}n=new Object;for(var s in t)"object"==typeof t[s]&&"string"!=typeof t[s]&&"boolean"!=typeof t[s]&&"number"!=typeof t[s]?n[s]=e.clone(t[s],i):n[s]=t[s];return n}if(t instanceof Array)return t.concat();n=new Object;for(s in t)n[s]=t[s];return n},e}(),co=function(){function e(){}return o(e,"com.nwei.utils.RedPointUitl"),e.showOrHide=function(t,i,n,o,s){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=""),!lo.isNull(t)){var r=t.getChildByName("red_point_name"+s);i?r||(r=e.getOneRedPoint(s),r.pos(t.width-10+n,-10+o),t.addChild(r)):r&&(r.removeSelf(),Hr.recover("red_point_name",r))}},e.getOneRedPoint=function(e){void 0===e&&(e="");var t=Hr.getItem("red_point_name");return null==t&&(t=new rw("ui/red_point.png"),t.width=t.height=18,t.zOrder=100),t.name="red_point_name"+e,t},e.isRed=function(e){lo.isNull(e);var t=e.getChildByName("red_point_name");return!!t},e.RED_POINT_NAME="red_point_name",e.RED_POINT_SIZE=18,e.RED_POINT_SIZE_half=10,e}(),uo=function(){function e(){this._values=[],this._keys=[]}o(e,"com.nwei.utils.Dictionary");var t=e.prototype;return t.set=function(e,t){var i=this.indexOf(e);return i>=0?void(this._values[i]=t):(this._keys.push(e),void this._values.push(t))},t.indexOf=function(e){var t=this._keys.indexOf(e);return t>=0?t:(e="string"==typeof e?Number(e):"number"==typeof e?e.toString():e,this._keys.indexOf(e))},t.get=function(e){var t=this.indexOf(e);return 0>t?null:this._values[t]},t.remove=function(e){var t=this.indexOf(e);return t>=0?(this._keys.splice(t,1),this._values.splice(t,1),!0):!1},t.clear=function(){this._values.length=0,this._keys.length=0},s(0,t,"keys",function(){return this._keys}),s(0,t,"values",function(){return this._values}),e}(),po=function(){function e(){}return o(e,"com.nwei.utils.MathExtension"),e.getRadarRangePoint=function(e,t,i,n,o){var s=NaN,r=NaN,a=NaN,l=NaN,h=NaN;return a=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e)),l=(n-t)/a,h=(i-e)/a,a>o?(s=o*h+e,r=o*l+t):(s=i,r=n),new Ah(s,r)},e.angle=function(e,t){var i=Math.PI/2;return e.x!=t.x&&(i=Math.atan((e.y-t.y)/(e.x-t.x))),i},e.floor=function(e,t){return void 0===t&&(t=1),Math.floor(e/t)*t},e.distance=function(e,t,i,n){var o=Math.abs(e-i),s=Math.abs(t-n);return Math.max(o,s)},e}(),fo=function(){function e(){}return o(e,"com.nwei.utils.RandomExtension"),e.RandomNumbersArray=function(t){for(var i=[],n=0;t>n;)i[n]=n,n++;return e.RandomArray(i)},e.RandomNumbersFormSingleNumbersArray=function(t){t=Math.min(t,10),t=Math.max(t,0);for(var i=e.RandomNumbersArray(10),n=new Array(t),o=0;t>o;o++)n[o]=i[o];return n},e.RandomArray=function(e){var t=function(){var e=Math.random()-.5;return 0>e?-1:1},i=ho.clone(e);return i.sort(t),i},e.RandomExtract=function(e){return e[Math.floor(Math.random()*e.length)]},e.RandomBetweenTwoNumbersArray=function(t,i){for(var n=[],o=t;i>=o;)n.push(o),o++;return e.RandomArray(n)},e.RandomBetweenTwoNumbers=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=1),e>t){var n=e;e=t,t=n}var o=t-e+1*i,s=Math.random()*o;return s+=e,po.floor(s,i)},e.RandomString=function(t){for(var i=[],n=0;n<t.length;)i.push(t.charAt(n)),n++;return i=e.RandomArray(i),t=i.join("")},e}(),_o=function(){function e(){throw new Error("StringUtil class is static container only")}return o(e,"com.nwei.utils.StringUtil"),e.trim=function(t){if(null==t)return"";for(var i=0;e.isWhitespace(t.charAt(i));)++i;for(var n=t.length-1;e.isWhitespace(t.charAt(n));)--n;return n>=i?t.slice(i,n+1):""},e.trimArrayElements=function(e,t){if(""!=e&&null!=e){for(var i=e.split(t),n=i.length,o=0;n>o;o++)i[o]=com.nwei.utils.StringUtil.trim(i[o]);n>0&&(e=i.join(t))}return e},e.isWhitespace=function(e){switch(e){case" ":case"	":case"\r":case"\n":case"\f":return!0;default:return!1}},e.substitute=function(e,t){for(var i=[],n=1,o=arguments.length;o>n;n++)i.push(arguments[n]);if(null==e)return"";var s,r=i.length;1==r&&i[0]instanceof Array?(s=i[0],r=s.length):s=i;for(var n=0;r>n;n++)e=e.replace(new RegExp("\\{"+n+"\\}","g"),s[n]);return e},e.repeat=function(e,t){if(0==t)return"";for(var i=e,n=1;t>n;n++)i+=e;return i},e.restrict=function(t,i){if(null==i)return t;if(""==i)return"";for(var n=[],o=t.length,s=0;o>s;s++){var r=t.charCodeAt(s);e.testCharacter(r,i)&&n.push(r)}return String.fromCharCode.apply(null,n)},e.testCharacter=function(e,t){var i=!1,n=!1,o=!1,s=!0,r=0,a=t.length,l=0;a>0&&(l=t.charCodeAt(0),94==l&&(i=!0));for(var h=0;a>h;h++){l=t.charCodeAt(h);var c=!1;n?(c=!0,n=!1):45==l?o=!0:94==l?s=!s:92==l?n=!0:c=!0,c&&(o?(e>=r&&l>=e&&(i=s),o=!1,r=0):(e==l&&(i=s),r=l))}return i},e.startWith=function(e,t){if(null==e||""==e||null==t||""==t)return!1;if(e.length<t.length)return!1;for(var i=0;i<t.length;i++)if(t.charAt(i)!=e.charAt(i))return!1;return!0},e.endWith=function(e,t){if(null==e||""==e||null==t||""==t)return!1;if(e.length<t.length)return!1;for(var i=0;i<t.length;i++)if(t.charAt(i)!=e.charAt(e.length-t.length+i))return!1;return!0},e}(),mo=function(){function e(){}return o(e,"com.nwei.utils.NameUtil"),e.getCharLength=function(e){var t=new Vr;return t.writeUTFBytes(e),t.length},e.isLegalWord=function(t){var i,n=!0;for(var o in e.ILLEGAL_WORDS)if(i=e.ILLEGAL_WORDS[o],-1!=t.indexOf(i)){n=!1;break}return n},n(e,["ILLEGAL_WORDS",function(){return this.ILLEGAL_WORDS=[",","_","?",">","<","|","\\","%",",","*","^","#","$","&",":","_","[","]","|"]}]),e}(),go=function(){function e(){this._keys=[]}o(e,"com.nwei.utils.SetDic");var t=e.prototype;return t.add=function(e){var t=this.indexOf(e);t>=0||this._keys.push(e)},t.contain=function(e){return-1!=this.indexOf(e)},t.indexOf=function(e){var t=this._keys.indexOf(e);return t>=0?t:(e="string"==typeof e?Number(e):"number"==typeof e?e.toString():e,this._keys.indexOf(e))},t.remove=function(e){var t=this.indexOf(e);return t>=0?(this._keys.splice(t,1),!0):!1},t.clear=function(){this._keys.length=0},s(0,t,"size",function(){return this._keys.length}),s(0,t,"keys",function(){return this._keys}),e}(),vo=function(){function e(){}return o(e,"com.nwei.utils.IntegerUtil"),e["int"]=function(e){var t;return t=parseInt(e)},e.toFixed=function(e){var t=e.indexOf(".");return-1!=t?(e=e.substr(0,e.indexOf(".")+3),e=e.replace(".00","")):e},e.toFixedNum=function(t){return e.toFixed(t+"")},e.MAX=2147483647,e}(),yo=function(){function e(){this.id=0,this.level=0,this.job=0,this.name=null,this.monsterType=0,this.type=0,this._hpPages=1}o(e,"com.nwei.basedb.Monster");var t=e.prototype;return s(0,t,"hpPages",function(){return this._hpPages}),s(0,t,"isBoss",function(){return 2==this.monsterType}),e.builds=function(t,i,n){for(var o=0,s=6;o<t.length-s;){var r=new e;r.id=t[o++],r.level=t[o++],r.job=t[o++],r.name=t[o++],r.monsterType=t[o++],r.type=t[o++],1==r.monsterType&&1==r.type?r._hpPages=1:2==r.monsterType&&1==r.type?r._hpPages=2:1==r.monsterType&&3==r.type?r._hpPages=2:2==r.monsterType&&3==r.type?r._hpPages=3:3==r.monsterType&&4==r.type&&(r._hpPages=4),n&&n.runWith([i,r])}},e}(),bo=function(){function e(){this.id=0,this.skillId=0,this.level=0,this.costSilver=0,this.needLevel=0,this.costMp=0}return o(e,"com.nwei.basedb.SkillLearn"),e.builds=function(t,i,n){for(var o=0,s=6;o<t.length-s;){var r=new e;r.id=t[o++],r.skillId=t[o++],r.level=t[o++],r.costSilver=t[o++],r.needLevel=t[o++],r.costMp=t[o++],n&&n.runWith([i,r])}},e}(),Eo=function(){function e(){this.id=null,this.awards=null,this.desc=null,this._awardsDic=null}o(e,"com.nwei.basedb.GiftFuture");var t=e.prototype;return t.getAwards=function(e){return this.awardsDic.get(e)},s(0,t,"awardsDic",function(){if(null==this._awardsDic){this._awardsDic=new uo;var e,t=this.awards.split(",");for(var i in t){e=t[i];var n=e.split("$");if(2==n.length){for(var o=vo["int"](n[0]),s=n[1].split("|"),r=0;r<s.length;r++){var a=s[r].split("_");3==a.length&&(a[0]=vo["int"](a[0]),a[1]=vo["int"](a[1]),a[2]=vo["int"](a[2])),s[r]=a}this._awardsDic.set(o,s)}}}return this._awardsDic}),e.builds=function(t,i,n){for(var o=0,s=3;o<t.length-s;){var r=new e;r.id=t[o++],r.awards=t[o++],r.desc=t[o++],n&&n.runWith([i,r])}},e}(),xo=function(){function e(){this.id=null,this.metalAttr=null,this.woodAttr=null,this.waterAttr=null,this.fireAttr=null,this.earthAttr=null}return o(e,"com.nwei.basedb.BoneAttribute"),e.builds=function(t,i,n){for(var o=0,s=6;o<t.length-s;){var r=new e;r.id=t[o++],r.metalAttr=t[o++],r.woodAttr=t[o++],r.waterAttr=t[o++],r.fireAttr=t[o++],r.earthAttr=t[o++],n&&n.runWith([i,r])}},e}(),So=function(){function e(){this.id=null,this.levelMin=null,this.levelMax=null,this._costSilver=null}o(e,"com.nwei.basedb.ArenaGlobal");var t=e.prototype;return s(0,t,"costSilver",function(){return 3666*Ng.userVO.getValue(1006)}),s(0,t,"color",function(){return this.id>6?N.getColor(6):N.getColor(this.id)}),s(0,t,"name",function(){return e._names[this.id-1]}),e.builds=function(t,i,n){for(var o=0,s=4;o<t.length-s;){var r=new e;r.id=t[o++],r.levelMin=t[o++],r.levelMax=t[o++],r._costSilver=t[o++],n&&n.runWith([i,r])}},n(e,["_names",function(){return this._names=["青铜擂台","白银擂台","黄金擂台","铂金擂台","钻石擂台","大师擂台","王者擂台"]}]),e}(),wo=function(){function e(){this.id=null,this.silver=null,this.orangeAdd=0,this.orangeCost=0}return o(e,"com.nwei.basedb.BloodUpgrade"),e.builds=function(t,i,n){for(var o=0,s=4;o<t.length-s;){var r=new e;r.id=t[o++],r.silver=t[o++],r.orangeAdd=t[o++],r.orangeCost=t[o++],n&&n.runWith([i,r])}},e}(),Co=function(){function e(){this.id=null,this.needProps=null,this.costSilver=null}return o(e,"com.nwei.basedb.BoneUpgrade"),e.builds=function(t,i,n){for(var o=0,s=3;o<t.length-s;){var r=new e;r.id=t[o++],r.needProps=t[o++],r.costSilver=t[o++],n&&n.runWith([i,r])}},e}(),To=function(){function e(){this.id=null,this.name=null,this.level=null,this.grad=null,this.nature=null}return o(e,"com.nwei.basedb.Talisman"),e.builds=function(t,i,n){for(var o=0,s=5;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.level=t[o++],r.grad=t[o++],r.nature=t[o++],n&&n.runWith([i,r])}},e}(),Io=function(){function e(){this.id=0,this.needExp=0,this.iron=null}return o(e,"com.nwei.basedb.AllianceMine"),e.builds=function(t,i,n){for(var o=0,s=3;o<t.length-s;){var r=new e;r.id=t[o++],r.needExp=t[o++],r.iron=t[o++],n&&n.runWith([i,r])}},e}(),Ao=function(){function e(){this.id=null,this.name=null,this.equipIds=null,this.attributesWhite=null,this.attributesBlue=null,this.attributesGreen=null,this.attributesYellow=null,this.attributesRed=null,this.attributesPurple=null,this.nature=null,this.whiteAttr=null,this.blueAttr=null,this.greenAttr=null,this.yellowAttr=null,this.redAttr=null,this.purpleAttr=null}return o(e,"com.nwei.basedb.EquipSuit"),e.dealStr2Arr=function(e){for(var t=e.split("|"),i=[],n=0;n<t.length;n++){var o=t[n].split("_");i.push({id:n,key:vo["int"](o[0]),value:vo["int"](o[1])})}return i},e.builds=function(t,i,n){for(var o=0,s=10;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.equipIds=t[o++],r.attributesWhite=t[o++],r.attributesBlue=t[o++],r.attributesGreen=t[o++],r.attributesYellow=t[o++],r.attributesRed=t[o++],r.attributesPurple=t[o++],r.nature=t[o++],r.whiteAttr=e.dealStr2Arr(r.attributesWhite),r.blueAttr=e.dealStr2Arr(r.attributesBlue),r.greenAttr=e.dealStr2Arr(r.attributesGreen),r.yellowAttr=e.dealStr2Arr(r.attributesYellow),r.redAttr=e.dealStr2Arr(r.attributesRed),r.purpleAttr=e.dealStr2Arr(r.attributesPurple),n&&n.runWith([i,r])}},e}(),No=function(){function e(){this.id=null,this.name=null,this.nature=0,this.info=null,this._baseAttr=null,this.spInfo=null,this._spAttr=0,this.spKey=0}o(e,"com.nwei.basedb.PetSkill");var t=e.prototype;return t.getInfo=function(e){var t=0;if(0>=e||e>6)return"配置错误";t=this._baseAttr[e-1],0>t&&(t=-t);var i;return-1!=this.info.indexOf("%")?(t/=100,i=""+t,i=vo.toFixed(i)):i=""+t,this.info.replace("{0}",i)},t.getSpInfo=function(e){var t=0;if(0>=e||e>6)return"配置错误";t=this._spAttr*e;var i;return-1!=this.spInfo.indexOf("%")?(t/=100,i=""+t,i=vo.toFixed(i)):i=""+t,this.spInfo.replace("{0}",i)},s(0,t,"spAttr",null,function(e){var t=e.split("_");if(2==t.length)switch(this.spKey=vo["int"](t[0]),this._spAttr=vo["int"](t[1]),this.spKey){case 1204:case 1203:this._spAttr/=10;break;case 1304:this._spAttr=-this._spAttr}}),s(0,t,"baseAttr",null,function(e){this._baseAttr=[];var t=e.split("_"),i=0,n=0;for(7==t.length&&(n=vo["int"](t[0]),i=1),i;i<t.length;i++){var o=vo["int"](t[i]);switch(n){case 1204:case 1203:o/=10;break;case 1304:o=-o}this._baseAttr.push(o)}}),e.builds=function(t,i,n){for(var o=0,s=7;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.nature=t[o++],r.info=t[o++],r.baseAttr=t[o++],r.spInfo=t[o++],r.spAttr=t[o++],n&&n.runWith([i,r])}},e}(),Po=function(){function e(){this.id=0,this.prefix=null,this.maxLevel=0,this.maxRefine=0,this.sacred=0}o(e,"com.nwei.basedb.PetEquipExt");var t=e.prototype;return s(0,t,"showLv",function(){return 10*this.id}),e.builds=function(t,i,n){for(var o=0,s=5;o<t.length-s;){var r=new e;r.id=t[o++],r.prefix=t[o++],r.maxLevel=t[o++],r.maxRefine=t[o++],r.sacred=t[o++],n&&n.runWith([i,r])}},e}(),Ro=function(){function e(){this.id=null,this.needSrc=null,this.needSrc4Book=null,this.memberMax=null,this._taskRate=null}o(e,"com.nwei.basedb.Alliance");var t=e.prototype;return t.setTaskRate=function(e){var t=e.split("|");this._taskRate=[];var i;for(var n in t){i=t[n];var o=vo["int"](i.split("_")[1]);this._taskRate.push(o)}},s(0,t,"taskRate",function(){return this._taskRate}),s(0,t,"needSrc4Task",function(){return 25*this.needSrc4Book/100}),e.builds=function(t,i,n){for(var o=0,s=5,r=0;o<t.length-s;){var a=new e;a.id=t[o++],r+=t[o++],a.needSrc=r,a.needSrc4Book=t[o++],a.memberMax=t[o++],a.setTaskRate(t[o++]),n&&n.runWith([i,a])}},e}(),Lo=function(){function e(){this.id=null,this.type=null,this.quailty=null,this.cndname=null,this.cndvalue=0,this.awardattr=null,this.awardgolden=null,this.name=null}return o(e,"com.nwei.basedb.Achieve"),e.builds=function(t,i,n){for(var o=0,s=8;o<t.length-s;){var r=new e;r.id=t[o++],r.type=t[o++],r.quailty=t[o++],r.cndname=t[o++],r.cndvalue=t[o++],r.awardattr=t[o++],r.awardgolden=t[o++],r.name="【"+t[o++]+"】",n&&n.runWith([i,r])}},e}(),Oo=function(){function e(){this.id=null,this.name=null,this.level=null,this.position=null,this.silverPrice=null,this.nature=null,this.needNature=null,this.quality=null,this.baseAttributes=null,this.exAttributes=null,this.createAttributes=null,this.mainPropsType=null,this.icon=null,this.suitId=null,this.baseAttr=null,this.exAttr=null,this.creatAttr=null}o(e,"com.nwei.basedb.Equip");var t=e.prototype;return t.analyzeAttrs=function(){this.baseAttr=e.dealAtt(this.baseAttributes),this.exAttr=e.dealAtt(this.exAttributes),this.creatAttr=e.dealAtt(this.createAttributes)},e.builds=function(t,i,n){for(var o=0,s=14;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.level=t[o++],r.position=t[o++],r.silverPrice=t[o++],r.nature=t[o++],r.needNature=t[o++],r.quality=t[o++],r.baseAttributes=t[o++],r.exAttributes=t[o++],r.createAttributes=t[o++],r.mainPropsType=t[o++],r.icon=t[o++],r.suitId=t[o++],r.analyzeAttrs(),n&&n.runWith([i,r])}},e.dealAtt=function(e){var t=[],i=e.split("|");if(i.length>0)for(var n=0;n<i.length;n++){var o=i[n].split("_");o.length>=3&&t.push({key:vo["int"](o[0]),min:vo["int"](o[1]),max:vo["int"](o[2])})}return t},e}(),Mo=function(){function e(){this.id=0,this.monsterLv=0,this.corrosion=0,this.awdGas=0,this.awdProp=0,this.awdAttack=0,this.awdDefense=0,this.awdHP=0,this.awdMP=0,this.totalAttack=0,this.totalDefense=0,this.totalHP=0,this.totalMP=0}return o(e,"com.nwei.basedb.Samsara"),e.builds=function(t,i,n){for(var o,s=0,r=4,a=0,l=0,h=0;s<t.length-r;){var c=new e;c.id=t[s++],c.monsterLv=t[s++],c.corrosion=t[s++];var u=t[s++];if("number"==typeof u&&Math.floor(u)==u)c.awdGas=u;else{var d=u.split("|");if(d.length>0&&(c.awdGas=vo["int"](d[0])),d.length>1){var p=d[1];o=p.split("_"),c.awdAttack=vo["int"](o[0]),c.awdDefense=c.awdAttack,c.awdHP=vo["int"](o[1]),c.awdMP=vo["int"](o[2]),a+=c.awdAttack,l+=c.awdHP,h+=c.awdMP}d.length>2&&(o=d[2].split("_"),c.awdProp=vo["int"](o[0]))}c.totalAttack=a,c.totalDefense=a,c.totalHP=l,c.totalMP=h,n&&n.runWith([i,c])}},e}(),Do=function(){function e(){this.id=null,this.grade=null,this.level=null,this.name=null,this.needGas=0,this.attrPercent=null}return o(e,"com.nwei.basedb.Culture"),e.builds=function(t,i,n){for(var o=0,s=6;o<t.length-s;){var r=new e;r.id=t[o++],r.grade=t[o++],r.level=t[o++],r.name=t[o++],r.needGas=t[o++],r.attrPercent=t[o++],n&&n.runWith([i,r])}},e}(),ko=function(){function e(){this.id=null,this.type=null,this.name=null,this.level=null,this.propType=null,this.silverPrice=null,this.mallPrice=null,this.nature=null,this.quality=null,this.maxAmount=null,this.attributes=null,this.desc=null,this.icon=null,this.drop=null,this.position=null,this._baseAttr=null}o(e,"com.nwei.basedb.Props");var t=e.prototype;return s(0,t,"baseAttr",function(){if(null!=this._baseAttr)return this._baseAttr;if(null!=this.attributes&&""!=this.attributes){this._baseAttr=new Array;var e,t=this.attributes.split("|");for(var i in t){e=t[i];var n=e.split("_"),o=vo["int"](n[0]),s=vo["int"](n[1]),r=0;r=n.length<=2?s:vo["int"](n[2]),this._baseAttr.push({key:o,min:s,max:r})}}return this._baseAttr}),e.builds=function(t,i,n){for(var o=0,s=15;o<t.length-s;){var r=new e;r.id=t[o++],r.type=t[o++],r.name=t[o++],r.level=t[o++],r.propType=t[o++],r.silverPrice=t[o++],r.mallPrice=t[o++],r.nature=t[o++],r.quality=t[o++],r.maxAmount=t[o++],r.attributes=t[o++],r.desc=t[o++],r.icon=t[o++],r.drop=t[o++],r.position=t[o++],n&&n.runWith([i,r])}},e}(),Bo=function(){function e(){this.id=null,this.effectSec=null,this.info=null,this.priceOld=null,this.priceNow=null}o(e,"com.nwei.basedb.GiftLimit");var t=e.prototype;return t.openLevel=function(){switch(this.id){case 1:return 15;case 2:return 22;case 3:return 25;case 4:return 28;case 5:return 30;case 6:return 32;case 7:return 35;case 8:return 40;case 9:return 45;case 10:return 50}return 1e3},e.builds=function(t,i,n){for(var o=0,s=5;o<t.length-s;){var r=new e;r.id=t[o++],r.effectSec=t[o++],r.info=t[o++],r.priceOld=t[o++],r.priceNow=t[o++],n&&n.runWith([i,r])}},e}(),Vo=function(){function e(){this.id=null,this.needCount=null}return o(e,"com.nwei.basedb.PetUpgrade"),e.builds=function(t,i,n){for(var o=0,s=2;o<t.length-s;){var r=new e;r.id=t[o++],r.needCount=t[o++],n&&n.runWith([i,r])}},e.getUpgradeAttrAdd=function(e,t){var i=50,n=20,o=12,s=5;switch(e){case 1:o=15;break;case 2:i=65;break;case 3:n=28;break;case 4:break;case 5:s=7}switch(t){case 1106:return i;case 1107:return n;case 1201:return o;case 1202:return s}return 0},e}(),Fo=function(){function e(){this.id=null,this.needStone=null,this.succPercent=null,this.hpPercent=null}return o(e,"com.nwei.basedb.EquipStar"),e.builds=function(t,i,n){for(var o=0,s=4;o<t.length-s;){var r=new e;r.id=t[o++],r.needStone=t[o++],r.succPercent=t[o++],r.hpPercent=t[o++],n&&n.runWith([i,r])}},e}(),Go=function(){function e(){this.id=null,this.name=null,this.nature=null,this.quality=null,this.qualityLevel=null,this.desc=null,this.maxQuality=0}return o(e,"com.nwei.basedb.Pet"),e.builds=function(t,i,n){for(var o=0,s=6;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.nature=t[o++],r.quality=t[o++],r.qualityLevel=t[o++],r.desc=t[o++],r.maxQuality=vo["int"](r.qualityLevel.split("~")[1]),n&&n.runWith([i,r])}},e}(),Ho=function(){function e(){this.id=0,this.name=null,this.postion=0,this._values=null}o(e,"com.nwei.basedb.PetEquipBase");var t=e.prototype;return t.getKey=function(){return null==this._values?0:this._values[0]},t.getValue=function(e){return null==this._values?0:1>e||e>=this._values.length?0:this._values[e]},e.builds=function(t,i,n){for(var o=0,s=4;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.postion=t[o++];for(var a=t[o++],l=a.split("_"),h=0;h<l.length;h++)l[h]=vo["int"](l[h]);r._values=l,n&&n.runWith([i,r])}},e}(),Uo=function(){function e(){this.id=null,this.needDonate=null,this.needHouseLv=null,this.needHeroLv=null,this.attr=null,this.needSilver=0,this.totalAttr=null}o(e,"com.nwei.basedb.AllianceSkill");var t=e.prototype;return s(0,t,"color",function(){var e=Math.ceil(this.needHouseLv/4)+1;return e>6&&(e=6),N.getColor(e)}),e.builds=function(t,i,n){for(var o=0,s=0,r=6;s<t.length-r;){var a=new e;a.id=t[s++],a.needDonate=t[s++],a.needHouseLv=t[s++],a.needHeroLv=t[s++],a.attr=t[s++],a.needSilver=t[s++],a.attr>0&&(o+=a.attr),a.totalAttr=o,n&&n.runWith([i,a])}},e}(),zo=function(){function e(){this.id=0,this.name=null,this.propId=0,this.val=0,this.rmb2num=null,this.minLv=0,this.maxLv=0}o(e,"com.nwei.basedb.SurpriseGift");var t=e.prototype;return t.getNum=function(e){var t=this.rmb2num.get(e);return null==t?0:t},e.builds=function(t,i,n){for(var o=0,s=7;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.propId=t[o++],r.val=t[o++];for(var a=t[o++].split("_"),l=new uo,h=0;h<e.RMB_ARR.length&&h<t.length;h++){var c=e.RMB_ARR[h],u=vo["int"](a[h]);l.set(c,u)}r.rmb2num=l,r.minLv=t[o++],r.maxLv=t[o++],n&&n.runWith([i,r])}},n(e,["RMB_ARR",function(){return this.RMB_ARR=[6,30,98,198,328,648]}]),e}(),Wo=function(){function e(){this.id=0,this.propId=0,this.donatePrice=0}return o(e,"com.nwei.basedb.AllianceShop"),e.builds=function(t,i,n){for(var o=0,s=3;o<t.length-s;){var r=new e;r.id=t[o++],r.propId=t[o++],r.donatePrice=t[o++],n&&n.runWith([i,r])}},e}(),Yo=function(){function e(){this.id=0,this.name=null,this.info=null,this.type=0}o(e,"com.nwei.basedb.Skill");var t=e.prototype;return t.getSkillInfo=function(e){0>=e&&(e=1);for(var t="",i=this.info.indexOf("["),n=-1;-1!=i;){var o=this.info.substring(n+1,i);t+=o,n=this.info.indexOf("]",i);var s=this.info.substring(i+1,n),r=s.indexOf("+"),a=Number(s.substring(0,r)),l=Number(s.substring(r+1)),h=a+l*e,c=h.toFixed(2);c=c.replace(".00",""),t+=c,i=this.info.indexOf("[",n)}var u=this.info.substring(n+1);return t+=u},t.getTypeInfo=function(){return 0==this.type?"【状态】":"【攻击】"},e.builds=function(t,i,n){for(var o=0,s=4;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.info=t[o++],r.type=t[o++],n&&n.runWith([i,r])}},e}(),qo=function(){function e(){this.id=0,this.pos=0,this.nature=0,this.attrKey=0,this.values=null,this.percents=null,this.attrValues=null,this.percValues=null}o(e,"com.nwei.basedb.Pearl");var t=e.prototype;return t.getAttrValue=function(e){if(null==this.attrValues){if(null==this.values||""==this.values)return 0;var t=this.values.split("_");this.attrValues=[];for(var i=0;i<t.length;i++)this.attrValues.push(vo["int"](t[i]))}return 0>=e||e-1>=this.attrValues.length?0:this.attrValues[e-1]},t.getPercValue=function(e){if(null==this.percValues){if(null==this.percents||""==this.percents)return 0;if(null==this.percValues){var t=this.percents.split("_");this.percValues=[];for(var i=0;i<t.length;i++)this.percValues.push(vo["int"](t[i]))}}return 0>=e||e-1>=this.percValues.length?0:this.percValues[e-1]},e.builds=function(t,i,n){for(var o=0,s=6;o<t.length-s;){var r=new e;r.id=t[o++],r.pos=t[o++],r.nature=t[o++],r.attrKey=t[o++],r.values=t[o++],r.percents=t[o++],n&&n.runWith([i,r])}},e}(),Ko=function(){function e(){this.id=null,this.countPerMin=null}return o(e,"com.nwei.basedb.ArenaStone"),e.builds=function(t,i,n){for(var o=0,s=2;o<t.length-s;){var r=new e;r.id=t[o++],r.countPerMin=t[o++],n&&n.runWith([i,r])}},e}(),Xo=function(){function e(){this.id=0,this.name=null,this.level=0,this.quality=0,this.position=0,this.attack=0,this.defense=0,this.hp=0,this.mp=0,this._decorrosion=0}o(e,"com.nwei.basedb.Demon");var t=e.prototype;return s(0,t,"star",function(){switch(this._decorrosion){case 1:return"★";case 2:return"★★";case 3:return"★★★";default:return""}}),e.builds=function(t,i,n){for(var o=0,s=10;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.level=t[o++],r.quality=t[o++],r.position=t[o++],r.attack=t[o++],r.defense=t[o++],r.hp=t[o++],r.mp=t[o++],r._decorrosion=t[o++],r.level>e.MAX_LEVEL&&(e.MAX_LEVEL=r.level),n&&n.runWith([i,r])}},e.MAX_LEVEL=0,e}(),Qo=function(){function e(){this.id=null,this.key=null,this.values=null,this.attrs=null}o(e,"com.nwei.basedb.TalismanAttr");var t=e.prototype;return t.getAttrs=function(){if(null==this.attrs){this.attrs=[];for(var e=this.values.split("_"),t=0;t<e.length;t++)this.attrs.push(vo["int"](e[t]))}return this.attrs},t.getValue=function(e){return e-=1,this.getAttrs(),0>e||e>=this.attrs.length?0:this.attrs[e]},e.builds=function(t,i,n){for(var o=0,s=3;o<t.length-s;){var r=new e;r.id=t[o++],r.key=t[o++],r.values=t[o++],n&&n.runWith([i,r])}},e}(),jo=function(){function e(){this.id=null,this.name=null,this.level=null,this.quality=null,this.baseAttr=null,this.suitAttr=null}return o(e,"com.nwei.basedb.Handbook"),e.builds=function(t,i,n){for(var o=0,s=6;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.level=t[o++],r.quality=t[o++],r.baseAttr=t[o++],r.suitAttr=t[o++],
n&&n.runWith([i,r])}},e}(),Zo=function(){function e(){this.id=null,this.propId=null,this.golden=null,this.lvMin=null,this.lvMax=null,this.limitTime=null}return o(e,"com.nwei.basedb.MarketProps"),e.builds=function(t,i,n){for(var o=0,s=6;o<t.length-s;){var r=new e;r.id=t[o++],r.propId=t[o++],r.golden=t[o++],r.lvMin=t[o++],r.lvMax=t[o++],r.limitTime=t[o++],n&&n.runWith([i,r])}},e}(),Jo=function(){function e(){this.id=null,this.cnd=null,this.minLv=null,this.point=null,this.info=null}return o(e,"com.nwei.basedb.DailyTask"),e.builds=function(t,i,n){for(var o=0,s=5;o<t.length-s;){var r=new e;r.id=t[o++],r.cnd=t[o++],r.minLv=t[o++],r.point=t[o++],r.info=t[o++],n&&n.runWith([i,r])}},e}(),$o=function(){function e(){this.id=null,this.propId=null,this.count=null,this.gold=null,this.rmb=null,this.priceOld=null,this.des=null}return o(e,"com.nwei.basedb.MarketDaily"),e.builds=function(t,i,n){for(var o=0,s=7;o<t.length-s;){var r=new e;r.id=t[o++],r.propId=t[o++],r.count=t[o++],r.gold=t[o++],r.rmb=t[o++],r.priceOld=t[o++],r.des=t[o++],n&&n.runWith([i,r])}},e}(),es=function(){function e(){this.id=null,this.silver=null,this.golden=null,this.info=null,this.title=null}return o(e,"com.nwei.basedb.TaskMain"),e.builds=function(t,i,n){for(var o=0,s=5;o<t.length-s;){var r=new e;r.id=t[o++],r.silver=t[o++],r.golden=t[o++],r.info=t[o++],r.title=t[o++],n&&n.runWith([i,r])}},e}(),ts=function(){function e(){this.id=null,this.name=null,this.level=null,this.info=null}return o(e,"com.nwei.basedb.DungeonTeam"),e.builds=function(t,i,n){for(var o=0,s=4;o<t.length-s;){var r=new e;r.id=t[o++],r.name=t[o++],r.level=t[o++],r.info=t[o++],n&&n.runWith([i,r])}},e}(),is=function(){function e(){this.id=null,this.name=null,this.monsterId=0,this.monsterLevel=0,this.monsterNature=0,this.equipLevel=null,this.equipNature=0,this.suitId=0,this.index=0}o(e,"com.nwei.basedb.Dungeon");var t=e.prototype;return t.getEquipNatureLimit=function(){switch(this.equipNature){case 1:return"仅限金系装备";case 2:return"仅限木系装备";case 3:return"仅限水系装备";case 4:return"仅限火系装备";case 5:return"仅限土系装备"}return"通用装备"},e.builds=function(t,i,n){for(var o=0,s=0,r=8;s<t.length-r;){var a=new e;a.id=t[s++],a.name=t[s++],a.monsterId=t[s++],a.monsterLevel=t[s++],a.monsterNature=t[s++],a.equipLevel=t[s++],a.equipNature=t[s++],a.suitId=t[s++],a.index=o++,n&&n.runWith([i,a])}},e}(),ns=function(){function e(){this.id=0,this.costSilver=0,this.costProp=0,this.suitAdd=0}return o(e,"com.nwei.basedb.DemonUpgrade"),e.builds=function(t,i,n){for(var o=0,s=5;o<t.length-s;){var r=new e;r.id=t[o++],r.costSilver=t[o++],r.costProp=t[o++],r.suitAdd=t[o++],n&&n.runWith([i,r])}},e}(),os=function(){function e(){this._offsetTimestamp=0,this._timezoneOffset=0,this._todayZero=null;var e=new Date;this._timezoneOffset=e.getTimezoneOffset()+480}o(e,"com.nwei.manager.ClockManager");var t=e.prototype;return t.syncServerTime=function(e){this._offsetTimestamp=e-Or.now(),Math.abs(this._offsetTimestamp)<3e3&&(this._offsetTimestamp=0),this._dealZeroClock()},t._dealZeroClock=function(){var e=this.todayZero.getTime()+ro.T_1D+ro.T_1M-this.currentTime;3e3>e&&(e=3e3),i.timer.once(e,this,this.onClockZero)},t.onClockZero=function(){this._todayZero=null,x.getInstance().sendNotification("ZERO_CLOCK_TRIGER"),this._dealZeroClock()},t.fixTimeZoneOffset=function(e){0!=this._timezoneOffset&&e.setTime(e.getTime()-6e4*this._timezoneOffset)},t.isTimeSyn=function(){return console.log("当前时区偏移:"+this._timezoneOffset),console.log("当前时间戳偏移:"+this._offsetTimestamp),0==this._timezoneOffset&&this._offsetTimestamp<3e5},s(0,t,"currentTime",function(){return Or.now()+this._offsetTimestamp}),s(0,t,"todayZero",function(){if(null==this._todayZero||this.currentTime-this._todayZero.getTime()>ro.T_1D){var e=new Date(this.currentTime);e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),this.fixTimeZoneOffset(e),this._todayZero=e,console.log("校准今日0点:"+e.getTime())}return this._todayZero}),e}(),ss=(function(){function e(){}return o(e,"com.nwei.manager.DatabaseConst"),e.MONSTER="monster",e.DUNGEON="dungeon",e.SKILL="skill",e.SKILL_LEARN="skilllearn",e.EQUIP="equip",e.EQUIP_SUIT="equipsuit",e.PROPS="props",e.ARENA_STONE="arenaStone",e.EQUIP_STAR="equipStar",e.BoneUpgrade="boneUpgrade",e.BoneAttribute="boneAttribute",e.PET="pet",e.PET_UPGRADE="petupgrade",e.ARENA_GLOBAL="arenaglobal",e.MARKET_PROPS="marketprops",e.CULTURE="culture",e.TALISMAN="talisman",e.TALISMAN_ATTR="talismanattr",e.TASKMAIN="taskmain",e.TASKMAIN_PACK="taskmainpack",e.ACHIEVE="achieve",e.GIFTLIMIT="giftlimit",e.BLOOD_UPGRADE="bloodupgrade",e.DAILY_TASK="dailytask",e.GIFT_FUTURE="giftfuture",e.DUNGEON_TEAM="dungeonteam",e.HANDBOOK="handbook",e.ALLIANCE="alliance",e.ALLIANCE_SKILL="allianceskill",e.MARKET_DAILY="marketdaily",e.PEARL="pearl",e.ALLIANCE_MINE="alliancemine",e.ALLIANCE_SHOP="allianceshop",e.ACTIVITY_7_DAY="activity7day",e.ACTIVITY_7_DAY_v1="activity7day_v1",e.ACTIVITY_WEEK_TIANLAI="activityTianNai",e.ACTIVITY_WEEK_LINGSHI="activityLingshi",e.ACTIVITY_WEEK_LINGZHU="activityLingzhu",e.ACTIVITY_WEEK_HUFU="activityHufu",e.ACTIVITY_INVEST="activityInvest",e.ACTIVITY_PAY_WEEK="activityPayWeek",e.SAMSAR="samsara",e.DEMON="demon",e.DEMON_UPGRADE="demonupgrade",e.PET_SKILL="petskill",e.SURPRISE_GIFT="surprisegift",e.PET_EQUIP_BASE="petequipbase",e.PET_EQUIP_EXT="petequipext",e}(),function(){function e(){this.marketProps=null,this.dailyTasks=null,this.dungeonTeams=null,this._dungeons=null,this._waitIndex=0,this.onComplete=null,this._dungeonGroup=null,this._dungeonCulture=null,this._totalDict=new uo,this._props2euipDict=new uo,this._ghost2propDict=new uo,this._suit2bookDic=new uo,this._jsonDic=new uo,this._poslv2demonDict=new uo,this.renderHandler=new h(this,this.onRender)}o(e,"com.nwei.manager.DatabaseManager");var t=e.prototype;return t.getCommDataUrls=function(){var t,i,n,o=[];for(n in e.JSON_TYPE_ARR)t=e.JSON_TYPE_ARR[n],i=v.getDataFileUrl(t),o.push({url:i,type:"json",size:100,priority:1});return o},t.analysis=function(){var t,n,o=e.JSON_TYPE_ARR[this._waitIndex++];switch(n=v.getDataFileUrl(o),t=i.loader.getRes(n),o){case"monster":yo.builds(t,o,this.renderHandler);break;case"dungeon":this._dungeons=[],is.builds(t,o,this.renderHandler),this.buildDungeonGroup(this._dungeons);break;case"arenaStone":Ko.builds(t,o,this.renderHandler);break;case"equip":Oo.builds(t,o,this.renderHandler);break;case"equipsuit":Ao.builds(t,o,this.renderHandler);break;case"equipStar":Fo.builds(t,o,this.renderHandler);break;case"props":ko.builds(t,o,this.renderHandler);break;case"pet":Go.builds(t,o,this.renderHandler);break;case"petupgrade":Vo.builds(t,o,this.renderHandler);break;case"skill":Yo.builds(t,o,this.renderHandler);break;case"skilllearn":bo.builds(t,o,this.renderHandler);break;case"boneAttribute":xo.builds(t,o,this.renderHandler);break;case"boneUpgrade":Co.builds(t,o,this.renderHandler);break;case"arenaglobal":So.builds(t,o,this.renderHandler);break;case"marketprops":this.marketProps=[],Zo.builds(t,o,this.renderHandler);break;case"culture":Do.builds(t,o,this.renderHandler);break;case"talisman":To.builds(t,o,this.renderHandler);break;case"talismanattr":Qo.builds(t,o,this.renderHandler);break;case"taskmain":es.builds(t,o,this.renderHandler);break;case"taskmainpack":es.builds(t,o,this.renderHandler);break;case"achieve":Lo.builds(t,o,this.renderHandler);break;case"giftlimit":Bo.builds(t,o,this.renderHandler);break;case"bloodupgrade":wo.builds(t,o,this.renderHandler);break;case"dailytask":this.dailyTasks=[],Jo.builds(t,o,this.renderHandler);break;case"giftfuture":Eo.builds(t,o,this.renderHandler);break;case"dungeonteam":this.dungeonTeams=[],ts.builds(t,o,this.renderHandler);break;case"handbook":jo.builds(t,o,this.renderHandler);break;case"alliance":Ro.builds(t,o,this.renderHandler);break;case"allianceskill":Uo.builds(t,o,this.renderHandler);break;case"marketdaily":$o.builds(t,o,this.renderHandler);break;case"pearl":qo.builds(t,o,this.renderHandler);break;case"alliancemine":Io.builds(t,o,this.renderHandler);break;case"allianceshop":Wo.builds(t,o,this.renderHandler);break;case"samsara":Mo.builds(t,o,this.renderHandler);break;case"activity7day":case"activity7day_v1":case"activityTianNai":case"activityLingshi":case"activityLingzhu":case"activityHufu":case"activityInvest":case"activityPayWeek":this._jsonDic.set(o,t);break;case"demon":Xo.builds(t,o,this.renderHandler);break;case"demonupgrade":ns.builds(t,o,this.renderHandler);break;case"petskill":No.builds(t,o,this.renderHandler);break;case"surprisegift":zo.builds(t,o,this.renderHandler);break;case"petequipbase":Ho.builds(t,o,this.renderHandler);break;case"petequipext":Po.builds(t,o,this.renderHandler);break;default:as.error(this,"onLoadComplement","基础数据解析错误 notfind class,type："+o)}i.loader.clearRes(n),v.progressShow.showProgress("解析公共资源"+this._waitIndex,this._waitIndex/e.JSON_TYPE_ARR.length),this._waitIndex>e.JSON_TYPE_ARR.length-1&&(i.timer.clear(this,this.analysis),this.onComplete.run(),this.onComplete=null,op.miniRegisterStep(18))},t.onRender=function(e,t){var i;switch(i=this.getDict(e),i.set(t.id,t),e){case"marketprops":this.marketProps.push(t);break;case"dungeon":this._dungeons.push(t);break;case"dailytask":this.dailyTasks.push(t);break;case"dungeonteam":this.dungeonTeams.push(t);break;case"skilllearn":var n=t,o=i.get(n.skillId);null==o&&(o=new uo,i.set(n.skillId,o)),o.set(n.level,n);break;case"equip":var s=t;1==s.level&&s.id>60027||this._props2euipDict.set(s.mainPropsType+"_"+s.position+"_"+s.quality,s);break;case"props":var r=t;1==r.propType?this._ghost2propDict.set(r.type+"_"+r.quality,r):22==r.propType&&this._suit2bookDic.set(vo["int"](r.attributes),t);break;case"demon":var a=t;this._poslv2demonDict.set(a.position+"_"+a.level,a)}},t.onLoadComplement=function(e,t){this._waitIndex=0,this.onComplete=t,op.miniRegisterStep(17),i.timer.loop(10,this,this.analysis)},t.getDict=function(e){var t=this._totalDict.get(e);return null==t&&(t=new uo,this._totalDict.set(e,t)),t},t.getData=function(e,t){return this.getDict(e).get(t)},t.getEquipForMix=function(e,t,i){return this._props2euipDict.get(e+"_"+t+"_"+i)},t.getDemon=function(e,t){return this._poslv2demonDict.get(e+"_"+t)},t.getPropForGhost=function(e,t){return this._ghost2propDict.get(e+"_"+t)},t.getHandbook=function(e){return this._suit2bookDic.get(e)},t.buildDungeonGroup=function(e){var t=["烂木","废铁","青铜","白银","黄金","铂金","翡翠","钻石","大师","王者","皇者","宗者","尊者","圣者","帝王","仙尊"];this._dungeonGroup=[],this._dungeonCulture=[];var i,n=[];for(var o in e)if(i=e[o],i.id<0)this._dungeonCulture.unshift(i);else if(i.id>=101)101==i.id&&(n=[],this._dungeonGroup.push({id:i.id,name:t[t.length-1],monsterLv:""+i.monsterLevel,minLv:i.monsterLevel,maxLv:i.monsterLevel,equipLv:i.equipLevel,limit:i.equipNature,list:n})),n.push(i);else if(i.id<=5?2==i.monsterNature&&n.push(i):n.push(i),i.id%5==0){n.sort(this.compareFunctionLevel);var s=n[0].monsterLevel;10>s&&(s=1),this._dungeonGroup.push({id:i.id/5,name:t[i.id/5-1],monsterLv:s+"~"+i.monsterLevel,minLv:s,maxLv:i.monsterLevel,equipLv:i.equipLevel,limit:i.equipNature,list:n}),n.sort(this.compareFunctionNature),n=[]}},t.compareFunctionLevel=function(e,t){return e.monsterLevel-t.monsterLevel},t.compareFunctionNature=function(e,t){return e.monsterNature-t.monsterNature},t.getDungeonGroup=function(){return this._dungeonGroup},t.getDungeonCulture=function(){return this._dungeonCulture},t.getSkill=function(e){var t=this.getData("skill",e);return t},t.getSkillLearn=function(e,t){var i=this.getData("skilllearn",e);return i?i.get(t):null},t.getJsonObj=function(e){return this._jsonDic.get(e)},n(e,["JSON_TYPE_ARR",function(){return this.JSON_TYPE_ARR=["monster","dungeon","props","equip","equipsuit","pet","petupgrade","arenaStone","equipStar","skill","skilllearn","boneAttribute","boneUpgrade","arenaglobal","marketprops","culture","talisman","talismanattr","taskmain","taskmainpack","achieve","giftlimit","bloodupgrade","dailytask","giftfuture","dungeonteam","alliance","allianceskill","marketdaily","pearl","alliancemine","allianceshop","samsara","activity7day","activity7day_v1","activityTianNai","activityLingshi","activityLingzhu","activityHufu","activityInvest","activityPayWeek","demon","demonupgrade","petskill","surprisegift","petequipbase","petequipext"]}]),e}()),rs=function(){function e(){}return o(e,"com.nwei.manager.LoadingManager"),e}(),as=function(){function e(){console.log("Logger is a static class. Please do not init it.")}return o(e,"com.nwei.debug.Logger"),e.openLogger=function(){null==e._logView&&(e._logView=new RA,e._logView.info.text="",e._logView.clear.clickHandler=new h(e._logView,function(){e._logView.info.text=""}),e._logView.btnLoger.zOrder=999999999,i.stage.addChild(e._logView.btnLoger),e._logView.btnLoger.clickHandler=new h(e._logView,function(){e._logView.popup()}))},e.error=function(t,i,n){e.logLevel>=0&&("string"==typeof t||(t=t.__className),e._logView?e._logView.info.text=e._logView.info.text+"errr:"+t+":"+i+":"+n+"\n":console.log(ro.newDate()+"Logger.errr:",t,i,":",n))},e.info=function(t,i,n){e.logLevel>=1&&("string"==typeof t||(t=t.__className),e._logView?e._logView.info.text=e._logView.info.text+"info:"+t+":"+i+":"+n+"\n":console.log(ro.newDate()+"Logger.info:",t,i,":",n))},e.debug=function(t,i,n){e.logLevel>=2&&("string"==typeof t||(t=t.__className),e._logView?e._logView.info.text=e._logView.info.text+"debug:"+t+":"+i+":"+n+"\n":console.log(ro.newDate()+"Logger.debug:",t,i,":",n))},e.ERRO=0,e.INFO=1,e.DEBUG=2,e.logLevel=2,e._logView=null,e}(),ls=function(){function e(){}return o(e,"UIConfig"),e.touchScrollEnable=!0,e.mouseWheelEnable=!0,e.showButtons=!0,e.popupBgColor="#000000",e.popupBgAlpha=.5,e.closeDialogOnSide=!0,e}(),hs=function(){function e(){this.data=null}o(e,"laya.filters.ColorFilterAction");var t=e.prototype;return i.imps(t,{"laya.filters.IFilterAction":!0}),t.apply=function(e){var t=e.ctx.ctx,i=e.ctx.ctx.canvas;if(0==i.width||0==i.height)return i;for(var n,o=t.getImageData(0,0,i.width,i.height),s=o.data,r=0,a=s.length;a>r;r+=4)n=this.getColor(s[r],s[r+1],s[r+2],s[r+3]),0!=s[r+3]&&(s[r]=n[0],s[r+1]=n[1],s[r+2]=n[2],s[r+3]=n[3]);return t.putImageData(o,0,0),e},t.getColor=function(e,t,i,n){var o=[];if(this.data._mat&&this.data._alpha){var s=this.data._mat,r=this.data._alpha;o[0]=s[0]*e+s[1]*t+s[2]*i+s[3]*n+r[0],o[1]=s[4]*e+s[5]*t+s[6]*i+s[7]*n+r[1],o[2]=s[8]*e+s[9]*t+s[10]*i+s[11]*n+r[2],o[3]=s[12]*e+s[13]*t+s[14]*i+s[15]*n+r[3]}return o},e}(),cs=function(){function e(){this._action=null}o(e,"laya.filters.Filter");var t=e.prototype;return i.imps(t,{"laya.filters.IFilter":!0}),t.callNative=function(e){},s(0,t,"action",function(){return this._action}),s(0,t,"type",function(){return-1}),e.BLUR=16,e.COLOR=32,e.GLOW=8,e._filterStart=null,e._filterEnd=null,e._EndTarget=null,e._recycleScope=null,e._filter=null,e._useSrc=null,e._endSrc=null,e._useOut=null,e._endOut=null,e}(),us=function(){function e(){}o(e,"laya.filters.webgl.FilterActionGL");var t=e.prototype;return i.imps(t,{"laya.filters.IFilterActionGL":!0}),t.setValue=function(e){},t.setValueMix=function(e){},t.apply3d=function(e,t,i,n,o){return null},t.apply=function(e){return null},s(0,t,"typeMix",function(){return 0}),e}(),ds=function(){function e(){}return o(e,"laya.ui.Styles"),e.labelColor="#000000",e.buttonStateNum=3,e.scrollBarMinNum=15,e.scrollBarDelayTime=500,n(e,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),e}(),ps=function(){function e(){}return o(e,"laya.ui.UIUtils"),e.fillArray=function(e,t,i){var n=e.concat();if(t)for(var o=t.split(","),s=0,r=Math.min(n.length,o.length);r>s;s++){var a=o[s];n[s]="true"==a?!0:"false"==a?!1:a,null!=i&&(n[s]=i(a))}return n},e.toColor=function(e){return Dr.toHexColor(e)},e.gray=function(t,i){void 0===i&&(i=!0),i?e.addFilter(t,e.grayFilter):e.clearFilter(t,ud)},e.addFilter=function(e,t){var i=e.filters||[];i.push(t),e.filters=i},e.clearFilter=function(e,t){var n=e.filters;if(null!=n&&n.length>0){for(var o=n.length-1;o>-1;o--){var s=n[o];i.__typeof(s,t)&&n.splice(o,1)}e.filters=n}},e._getReplaceStr=function(t){return e.escapeSequence[t]},e.adptString=function(t){return t.replace(/\\(\w)/g,e._getReplaceStr)},e.getBindFun=function(t){var n=e._funMap.get(t);if(null==n){var o='"'+t+'"';o=o.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"');var s="(function(data){if(data==null)return;with(data){try{\nreturn "+o+"\n}catch(e){}}})";n=i._runScript(s),e._funMap.set(t,n)}return n},n(e,["grayFilter",function(){return this.grayFilter=new ud([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"	"}},"_funMap",function(){return this._funMap=new Gr}]),e}(),fs=function(){function e(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return o(e,"laya.ui.LayoutStyle"),n(e,["EMPTY",function(){return this.EMPTY=new e}]),e}(),_s=function(){function t(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,Ns.isConchNode){var t=this;t._nativeObj=new e._conchGraphics,t.id=t._nativeObj.conchID}}o(t,"laya.display.Graphics");var n=t.prototype;return n.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},n.clear=function(e){void 0===e&&(e=!1);var i=0,n=0;if(e){var o=this._one;if(this._cmds){for(n=this._cmds.length,i=0;n>i;i++)o=this._cmds[i],!o||o.callee!==Ns._context._drawTexture&&o.callee!==Ns._context._drawTextureWithTransform||(o[0]=null,t._cache.push(o));this._cmds.length=0}else o&&(!o||o.callee!==Ns._context._drawTexture&&o.callee!==Ns._context._drawTextureWithTransform||(o[0]=null,t._cache.push(o)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(i=0,n=this._vectorgraphArray.length;n>i;i++)Wr.getInstance().deleteShape(this._vectorgraphArray[i]);this._vectorgraphArray.length=0}},n._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},n._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new Lh,this._graphicBounds._graphics=this)},n._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},n._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},n.getBounds=function(e){return void 0===e&&(e=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(e)},n.getBoundPoints=function(e){return void 0===e&&(e=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(e)},n._addCmd=function(e){this._cmds=this._cmds||[],e.callee=e.shift(),this._cmds.push(e)},n.setFilters=function(e){this._saveToCmd(Ns._context._setFilters,e)},n.drawTexture=function(e,i,n,o,s,r,a){if(void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=1),!e||.01>a)return null;o||(o=e.sourceWidth),s||(s=e.sourceHeight),a=0>a?0:a>1?1:a;var l=!Ns.isWebGL&&(Or.onFirefox||Or.onEdge||Or.onIE||Or.onSafari)?.5:0,h=o/e.sourceWidth,c=s/e.sourceHeight;if(o=e.width*h,s=e.height*c,e.loaded&&(0>=o||0>=s))return null;i+=e.offsetX*h,n+=e.offsetY*c,this._sp&&(this._sp._renderType|=512);var u;return i-=l,n-=l,o+=2*l,s+=2*l,t._cache.length?(u=t._cache.pop(),u[0]=e,u[1]=i,u[2]=n,u[3]=o,u[4]=s,u[5]=r,u[6]=a):u=[e,i,n,o,s,r,a],u.callee=r||1!=a?Ns._context._drawTextureWithTransform:Ns._context._drawTexture,null!=this._one||r||1!=a?this._saveToCmd(u.callee,u):(this._one=u,this._render=this._renderOneImg),e.loaded||e.once("loaded",this,this._textureLoaded,[e,u]),this._repaint(),u},n.cleanByTexture=function(e,t,i,n,o){if(void 0===n&&(n=0),void 0===o&&(o=0),!e)return this.clear();if(this._one&&this._render===this._renderOneImg){n||(n=e.sourceWidth),o||(o=e.sourceHeight);var s=n/e.sourceWidth,r=o/e.sourceHeight;n=e.width*s,o=e.height*r,t+=e.offsetX*s,i+=e.offsetY*r,this._one[0]=e,this._one[1]=t,this._one[2]=i,this._one[3]=n,this._one[4]=o,this._repaint()}else this.clear(),e&&this.drawTexture(e,t,i,n,o)},n.drawTextures=function(e,t){e&&this._saveToCmd(Ns._context._drawTextures,[e,t])},n.fillTexture=function(e,t,i,n,o,s,r){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s="repeat"),e){var a=[e,t,i,n,o,s,r||Ah.EMPTY,{}];e.loaded||e.once("loaded",this,this._textureLoaded,[e,a]),this._saveToCmd(Ns._context._fillTexture,a)}},n._textureLoaded=function(e,t){t[3]=t[3]||e.width,t[4]=t[4]||e.height,this._repaint()},n.fillCircle=function(e,t,i,n,o,s,r){i.bitmap.enableMerageInAtlas=!1;var a=new Float32Array(2*(r+1)),l=new Float32Array(2*(r+1)),h=new Uint16Array(3*r),c=2*Math.PI/r,u=0;a[0]=n,a[1]=o,l[0]=n/i.width,l[1]=o/i.height;for(var d=2,p=0;r>p;p++){var f=s*Math.cos(u)+n,_=s*Math.sin(u)+o;a[d]=f,a[d+1]=_,l[d]=f/i.width,l[d+1]=_/i.height,u+=c,d+=2}for(d=0,p=0;r>p;p++)h[d++]=0,h[d++]=p+1,h[d++]=p+2>=r+1?1:p+2;this.drawTriangles(i,e,t,a,l,h)},n.drawTriangles=function(e,t,i,n,o,s,r,a,l,h){void 0===a&&(a=1),this._saveToCmd(Ns._context.drawTriangles,[e,t,i,n,o,s,r,a,l,h])},n._saveToCmd=function(e,t){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=t,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(t)),t.callee=e,this._repaint(),t},n.clipRect=function(e,t,i,n){this._saveToCmd(Ns._context._clipRect,[e,t,i,n])},n.fillText=function(e,t,i,n,o,s,r){void 0===r&&(r=0),this._saveToCmd(Ns._context._fillText,[e,t,i,n||Dh.defaultFont,o,s])},n.fillBorderText=function(e,t,i,n,o,s,r,a){this._saveToCmd(Ns._context._fillBorderText,[e,t,i,n||Dh.defaultFont,o,s,r,a])},n.strokeText=function(e,t,i,n,o,s,r){this._saveToCmd(Ns._context._strokeText,[e,t,i,n||Dh.defaultFont,o,s,r])},n.alpha=function(e){e=0>e?0:e>1?1:e,this._saveToCmd(Ns._context._alpha,[e])},n.setAlpha=function(e){e=0>e?0:e>1?1:e,this._saveToCmd(Ns._context._setAlpha,[e])},n.transform=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this._saveToCmd(Ns._context._transform,[e,t,i])},n.rotate=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this._saveToCmd(Ns._context._rotate,[e,t,i])},n.scale=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._saveToCmd(Ns._context._scale,[e,t,i,n])},n.translate=function(e,t){this._saveToCmd(Ns._context._translate,[e,t])},n.save=function(){this._saveToCmd(Ns._context._save,[])},n.restore=function(){this._saveToCmd(Ns._context._restore,[])},n.replaceText=function(e){this._repaint();var t=this._cmds;if(t){for(var i=t.length-1;i>-1;i--)if(this._isTextCmd(t[i].callee))return t[i][0].toUpperCase?t[i][0]=e:t[i][0].setText(e),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=e:this._one[0].setText(e),!0;return!1},n._isTextCmd=function(e){return e===Ns._context._fillText||e===Ns._context._fillBorderText||e===Ns._context._strokeText},n.replaceTextColor=function(e){this._repaint();var t=this._cmds;if(t)for(var i=t.length-1;i>-1;i--)this._isTextCmd(t[i].callee)&&(t[i][4]=e,t[i][0].toUpperCase||(t[i][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=e,this._one[0].toUpperCase||(this._one[0].changed=!0))},n.loadImage=function(e,t,n,o,s,r){function a(e){e&&(l.drawTexture(e,t,n,o,s),null!=r&&r.call(l._sp,e))}var l=this;void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0);var c=Tu.getRes(e);c?a(c):i.loader.load(e,h.create(null,a),null,"image")},n._renderEmpty=function(e,t,i,n){},n._renderAll=function(e,t,i,n){for(var o,s=this._cmds,r=0,a=s.length;a>r;r++)(o=s[r]).callee.call(t,i,n,o)},n._renderOne=function(e,t,i,n){this._one.callee.call(t,i,n,this._one)},n._renderOneImg=function(e,t,i,n){this._one.callee.call(t,i,n,this._one),2305!==e._renderType&&(e._renderType|=1)},n.drawLine=function(e,t,i,n,o,s){void 0===s&&(s=1);var r=0;Ns.isWebGL&&(r=Wr.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r));var a=s%2===0?0:.5,l=[e+a,t+a,i+a,n+a,o,s,r];this._saveToCmd(Ns._context._drawLine,l)},n.drawLines=function(e,t,i,n,o){void 0===o&&(o=1);var s=0;if(i&&!(i.length<4)){Ns.isWebGL&&(s=Wr.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(s));var r=o%2===0?0:.5,a=[e+r,t+r,i,n,o,s];this._saveToCmd(Ns._context._drawLines,a)}},n.drawCurves=function(e,t,i,n,o){void 0===o&&(o=1);var s=[e,t,i,n,o];this._saveToCmd(Ns._context._drawCurves,s)},n.drawRect=function(e,t,i,n,o,s,r){void 0===r&&(r=1);var a=s?r/2:0,l=s?r:0,h=[e+a,t+a,i-l,n-l,o,s,r];this._saveToCmd(Ns._context._drawRect,h)},n.drawCircle=function(e,t,i,n,o,s){void 0===s&&(s=1);var r=o?s/2:0,a=0;Ns.isWebGL&&(a=Wr.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a));var l=[e,t,i-r,n,o,s,a];this._saveToCmd(Ns._context._drawCircle,l)},n.drawPie=function(e,t,i,n,o,s,r,a){void 0===a&&(a=1);var l=r?a/2:0,h=r?a:0,c=0;Ns.isWebGL&&(c=Wr.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c));var u=[e+l,t+l,i-h,n,o,s,r,a,c];u[3]=Dr.toRadian(n),u[4]=Dr.toRadian(o),this._saveToCmd(Ns._context._drawPie,u)},n.drawPoly=function(e,t,i,n,o,s){void 0===s&&(s=1);var r=0,a=!1;Ns.isWebGL&&(r=Wr.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r),a=!(i.length>6));var l=o?s%2===0?0:.5:0,h=[e+l,t+l,i,n,o,s,r,a];this._saveToCmd(Ns._context._drawPoly,h)},n.drawPath=function(e,t,i,n,o){var s=[e,t,i,n,o];this._saveToCmd(Ns._context._drawPath,s)},n.setDirection=function(e){},s(0,n,"cmds",function(){return this._cmds},function(e){this._sp&&(this._sp._renderType|=512),this._cmds=e,this._render=this._renderAll,this._repaint()}),t.__init__=function(){if(Ns.isConchNode){for(var e=laya.display.Graphics.prototype,t=Or.window.ConchGraphics.prototype,i=["setDirection","clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],n=0,o=i.length;o>=n;n++){var s=i[n];e[s]=t[s]}e._saveToCmd=null,t.drawImageS&&(e.drawTextures=function(e,t){if(e&&e.loaded&&e.bitmap&&e.source){var i=e.uv,n=e.bitmap.width,o=e.bitmap.height;this.drawImageS(e.bitmap.source,i[0]*n,i[1]*o,(i[2]-i[0])*n,(i[5]-i[3])*o,e.offsetX,e.offsetY,e.width,e.height,t)}}),e.drawTexture=function(e,t,i,n,o,s,r){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=1),e){if(!e.loaded)return void e.once("loaded",this,function(){this.drawTexture(e,t,i,n,o,s)});if(e.loaded&&e.bitmap&&e.source&&(n||(n=e.sourceWidth),o||(o=e.sourceHeight),r=0>r?0:r>1?1:r,n=n-e.sourceWidth+e.width,o=o-e.sourceHeight+e.height,!(0>=n||0>=o))){t+=e.offsetX,i+=e.offsetY;var a=e.uv,l=e.bitmap.width,h=e.bitmap.height;a[4]<a[0]&&a[5]<a[1]?this.drawImageM(e.bitmap.source,a[4]*l,a[5]*h,(a[0]-a[4])*l,(a[1]-a[5])*h,t,i,n,o,s,r):this.drawImageM(e.bitmap.source,a[0]*l,a[1]*h,(a[2]-a[0])*l,(a[5]-a[3])*h,t,i,n,o,s,r),this._repaint()}}},e.fillTexture=function(e,t,i,n,o,s,r){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s="repeat"),e&&e.loaded){var a,l=Ns._context.ctx,h=e.bitmap.width,c=e.bitmap.height,u=e.uv;a=e.uv!=Vu.DEF_UV?l.createPattern(e.bitmap.source,s,u[0]*h,u[1]*c,(u[2]-u[0])*h,(u[5]-u[3])*c):l.createPattern(e.bitmap.source,s);var d=0,p=0;r&&(t+=r.x%e.width,i+=r.y%e.height,d-=r.x%e.width,p-=r.y%e.height),this._fillImage(a,t,i,d,p,n,o)}}}},t._cache=[],t}(),ms=function(){function e(){}o(e,"laya.events.Event");var t=e.prototype;return t.setTo=function(e,t,i){return this.type=e,this.currentTarget=t,this.target=i,this},t.stopPropagation=function(){this._stoped=!0},s(0,t,"stageY",function(){return i.stage.mouseY}),s(0,t,"stageX",function(){return i.stage.mouseX}),s(0,t,"keyLocation",function(){return this.nativeEvent.keyLocation}),s(0,t,"charCode",function(){return this.nativeEvent.charCode}),s(0,t,"shiftKey",function(){return this.nativeEvent.shiftKey}),s(0,t,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),s(0,t,"altKey",function(){return this.nativeEvent.altKey}),s(0,t,"touches",function(){var e=this.nativeEvent.touches;if(e)for(var t=i.stage,n=0,o=e.length;o>n;n++){var s=e[n],r=Ah.TEMP;r.setTo(s.clientX,s.clientY),t._canvasTransform.invertTransformPoint(r),t.transform.invertTransformPoint(r),s.stageX=r.x,s.stageY=r.y}return e}),e.EMPTY=new e,e.MOUSE_DOWN="mousedown",e.MOUSE_UP="mouseup",e.CLICK="click",e.RIGHT_MOUSE_DOWN="rightmousedown",e.RIGHT_MOUSE_UP="rightmouseup",e.RIGHT_CLICK="rightclick",e.MOUSE_MOVE="mousemove",e.MOUSE_OVER="mouseover",e.MOUSE_OUT="mouseout",e.MOUSE_WHEEL="mousewheel",e.ROLL_OVER="mouseover",e.ROLL_OUT="mouseout",e.DOUBLE_CLICK="doubleclick",e.CHANGE="change",e.CHANGED="changed",e.RESIZE="resize",e.ADDED="added",e.REMOVED="removed",e.DISPLAY="display",e.UNDISPLAY="undisplay",e.ERROR="error",e.COMPLETE="complete",e.LOADED="loaded",e.PROGRESS="progress",e.INPUT="input",e.RENDER="render",e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.KEY_DOWN="keydown",e.KEY_PRESS="keypress",e.KEY_UP="keyup",e.FRAME="enterframe",e.DRAG_START="dragstart",e.DRAG_MOVE="dragmove",e.DRAG_END="dragend",e.ENTER="enter",e.SELECT="select",e.BLUR="blur",e.FOCUS="focus",e.VISIBILITY_CHANGE="visibilitychange",e.FOCUS_CHANGE="focuschange",e.PLAYED="played",e.PAUSED="paused",e.STOPPED="stopped",e.START="start",e.END="end",e.ENABLE_CHANGED="enablechanged",e.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",e.COMPONENT_ADDED="componentadded",e.COMPONENT_REMOVED="componentremoved",e.LAYER_CHANGED="layerchanged",e.HIERARCHY_LOADED="hierarchyloaded",e.RECOVERED="recovered",e.RELEASED="released",e.LINK="link",e.LABEL="label",e.FULL_SCREEN_CHANGE="fullscreenchange",e.DEVICE_LOST="devicelost",e.MESH_CHANGED="meshchanged",e.MATERIAL_CHANGED="materialchanged",e.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",e.ANIMATION_CHANGED="animationchanged",e.TRIGGER_ENTER="triggerenter",e.TRIGGER_STAY="triggerstay",e.TRIGGER_EXIT="triggerexit",e.TRAIL_FILTER_CHANGE="trailfilterchange",e.DOMINO_FILTER_CHANGE="dominofilterchange",e}(),gs=function(){function e(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return o(e,"laya.ani.KeyFramesContent"),e}(),vs=function(){function e(){}return o(e,"laya.ani.AnimationParser02"),e.READ_DATA=function(){e._DATA.offset=e._reader.getUint32(),e._DATA.size=e._reader.getUint32()},e.READ_BLOCK=function(){for(var t=e._BLOCK.count=e._reader.getUint16(),i=e._BLOCK.blockStarts=[],n=e._BLOCK.blockLengths=[],o=0;t>o;o++)i.push(e._reader.getUint32()),n.push(e._reader.getUint32())},e.READ_STRINGS=function(){var t=e._reader.getUint32(),i=e._reader.getUint16(),n=e._reader.pos;e._reader.pos=t+e._DATA.offset;for(var o=0;i>o;o++)e._strings[o]=e._reader.readUTFString();e._reader.pos=n},e.parse=function(t,i){e._templet=t,e._reader=i;i.__getBuffer();e.READ_DATA(),e.READ_BLOCK(),e.READ_STRINGS();for(var n=0,o=e._BLOCK.count;o>n;n++){var s=i.getUint16(),r=e._strings[s],a=e["READ_"+r];if(null==a)throw new Error("model file err,no this function:"+s+" "+r);a.call()}},e.READ_ANIMATIONS=function(){var t=e._reader,i=t.__getBuffer(),n=0,o=0,s=0,r=0,a=t.getUint16(),l=[];for(l.length=a,n=0;a>n;n++)l[n]=ux.interpolation[t.getByte()];var h=t.getUint8();for(e._templet._anis.length=h,n=0;h>n;n++){var c=e._templet._anis[n]={};c.nodes=new Array;var u=c.name=e._strings[t.getUint16()];e._templet._aniMap[u]=n,c.bone3DMap={},c.playTime=t.getFloat32();
var d=c.nodes.length=t.getInt16();for(c.totalKeyframeDatasLength=0,o=0;d>o;o++){var p=c.nodes[o]={};p.keyframeWidth=a,p.childs=[];var f=t.getUint16();f>=0&&(p.name=e._strings[f],c.bone3DMap[p.name]=o),p.keyFrame=new Array,p.parentIndex=t.getInt16(),-1==p.parentIndex?p.parent=null:p.parent=c.nodes[p.parentIndex],c.totalKeyframeDatasLength+=a,p.interpolationMethod=l,null!=p.parent&&p.parent.childs.push(p);var _=t.getUint16();p.keyFrame.length=_;var m=null,g=null;for(s=0,r=_;r>s;s++){m=p.keyFrame[s]={},m.startTime=t.getFloat32(),g&&(g.duration=m.startTime-g.startTime);var v=e._DATA.offset,y=t.getUint32(),b=4*a,E=i.slice(v+y,v+y+b);m.data=new Float32Array(E),g=m}m.duration=0,p.playTime=c.playTime,e._templet._calculateKeyFrame(p,_,a)}}},e._templet=null,e._reader=null,e._strings=[],n(e,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e}(),ys=function(){function e(){this.mesh=null,this.transform=null,this.context=null,this.mode=0}o(e,"laya.ani.bone.canvasmesh.CanvasMeshRender");var t=e.prototype;return t.renderToContext=function(e){this.context=e.ctx||e,this.mesh&&(0==this.mode?this._renderWithIndexes(this.mesh):this._renderNoIndexes(this.mesh))},t._renderNoIndexes=function(e){var t=0,i=e.vertices.length/2,n=0;for(t=0;i-2>t;t++)n=2*t,this._renderDrawTriangle(e,n,n+2,n+4)},t._renderWithIndexes=function(e){var t=e.indexes,i=0,n=t.length;for(i=0;n>i;i+=3){var o=2*t[i],s=2*t[i+1],r=2*t[i+2];this._renderDrawTriangle(e,o,s,r)}},t._renderDrawTriangle=function(e,t,i,n){var o=this.context,s=e.uvs,r=e.vertices,a=e.texture,l=a.bitmap,h=l.source,c=a.width,u=a.height,d=l.width,p=l.height,f=NaN,_=NaN,m=NaN,g=NaN,v=NaN,y=NaN;if(e.useUvTransform){var b=e.uvTransform;f=(s[t]*b.a+s[t+1]*b.c+b.tx)*d,_=(s[i]*b.a+s[i+1]*b.c+b.tx)*d,m=(s[n]*b.a+s[n+1]*b.c+b.tx)*d,g=(s[t]*b.b+s[t+1]*b.d+b.ty)*p,v=(s[i]*b.b+s[i+1]*b.d+b.ty)*p,y=(s[n]*b.b+s[n+1]*b.d+b.ty)*p}else f=s[t]*d,_=s[i]*d,m=s[n]*d,g=s[t+1]*p,v=s[i+1]*p,y=s[n+1]*p;var E=r[t],x=r[i],S=r[n],w=r[t+1],C=r[i+1],T=r[n+1];if(e.canvasPadding>0){var I=e.canvasPadding,A=e.canvasPadding,N=(E+x+S)/3,P=(w+C+T)/3,R=E-N,L=w-P,O=Math.sqrt(R*R+L*L);E=N+R/O*(O+I),w=P+L/O*(O+A),R=x-N,L=C-P,O=Math.sqrt(R*R+L*L),x=N+R/O*(O+I),C=P+L/O*(O+A),R=S-N,L=T-P,O=Math.sqrt(R*R+L*L),S=N+R/O*(O+I),T=P+L/O*(O+A)}if(o.save(),this.transform){var M=this.transform;o.transform(M.a,M.b,M.c,M.d,M.tx,M.ty)}o.beginPath(),o.moveTo(E,w),o.lineTo(x,C),o.lineTo(S,T),o.closePath(),o.clip();var D=f*v+g*m+_*y-v*m-g*_-f*y,k=1/D,B=E*v+g*S+x*y-v*S-g*x-E*y,V=f*x+E*m+_*S-x*m-E*_-f*S,F=f*v*S+g*x*m+E*_*y-E*v*m-g*_*S-f*x*y,G=w*v+g*T+C*y-v*T-g*C-w*y,H=f*C+w*m+_*T-C*m-w*_-f*T,U=f*v*T+g*C*m+w*_*y-w*v*m-g*_*T-f*C*y;o.transform(B*k,G*k,V*k,H*k,F*k,U*k),o.drawImage(h,a.uv[0]*d,a.uv[1]*p,c,u,a.uv[0]*d,a.uv[1]*p,c,u),o.restore()},e}(),bs=function(){function e(){this.texture=null,this.uvs=[0,0,1,0,1,1,0,1],this.vertices=[0,0,100,0,100,100,0,100],this.indexes=[0,1,3,3,1,2],this.uvTransform=null,this.useUvTransform=!1,this.canvasPadding=1}o(e,"laya.ani.bone.canvasmesh.MeshData");var t=e.prototype;return t.getBounds=function(){return Ch._getWrapRec(this.vertices)},e}(),Es=function(){function e(){}return o(e,"laya.ani.math.BezierLerp"),e.getBezierRate=function(t,i,n,o,s){var r=e._getBezierParamKey(i,n,o,s),a=100*r+t;if(e._bezierResultCache[a])return e._bezierResultCache[a];var l=e._getBezierPoints(i,n,o,s,r),h=0,c=0;for(c=l.length,h=0;c>h;h+=2)if(t<=l[h])return e._bezierResultCache[a]=l[h+1],l[h+1];return e._bezierResultCache[a]=1,1},e._getBezierParamKey=function(e,t,i,n){return 100*(100*(100*(100*e+t)+i)+n)},e._getBezierPoints=function(t,i,n,o,s){if(e._bezierPointsCache[s])return e._bezierPointsCache[s];var r;r=[0,0,t,i,n,o,1,1];var a;a=new Rh;var l;return l=a.getBezierPoints(r,100,3),e._bezierPointsCache[s]=l,l},e._bezierResultCache={},e._bezierPointsCache={},e}(),xs=function(){function e(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return o(e,"laya.ani.AnimationNodeContent"),e}(),Ss=function(){function e(){}return o(e,"laya.ani.AnimationParser01"),e.parse=function(e,t){var i=t.__getBuffer(),n=0,o=0,s=0,r=0,a=0,l=0,h=0,c=t.readUTFString();e._aniClassName=c;var u,d=t.readUTFString().split("\n"),p=t.getUint8(),f=t.getUint32(),_=t.getUint32();f>0&&(u=i.slice(f,_));var m=new Vr(u);for(_>0&&(e._publicExtData=i.slice(_,i.byteLength)),e._useParent=!!t.getUint8(),e._anis.length=p,n=0;p>n;n++){var g=e._anis[n]=new ws;g.nodes=new Array;var v=g.name=d[t.getUint16()];e._aniMap[v]=n,g.bone3DMap={},g.playTime=t.getFloat32();var y=g.nodes.length=t.getUint8();for(g.totalKeyframeDatasLength=0,o=0;y>o;o++){var b=g.nodes[o]=new xs;b.childs=[];var E=t.getInt16();E>=0&&(b.name=d[E],g.bone3DMap[b.name]=o),b.keyFrame=new Array,b.parentIndex=t.getInt16(),-1==b.parentIndex?b.parent=null:b.parent=g.nodes[b.parentIndex],b.lerpType=t.getUint8();var x=t.getUint32();m.pos=x;var S=b.keyframeWidth=m.getUint16();if(g.totalKeyframeDatasLength+=S,0===b.lerpType||1===b.lerpType)for(b.interpolationMethod=[],b.interpolationMethod.length=S,s=0;S>s;s++)b.interpolationMethod[s]=ux.interpolation[m.getUint8()];null!=b.parent&&b.parent.childs.push(b);var w=t.getUint16();w>0&&(b.extenData=i.slice(t.pos,t.pos+w),t.pos+=w);var C=t.getUint16();b.keyFrame.length=C;var T,I=0;for(s=0,r=C;r>s;s++){if(T=b.keyFrame[s]=new gs,T.duration=t.getFloat32(),T.startTime=I,2===b.lerpType){T.interpolationData=[];var A=t.getUint8(),N=0;switch(N=t.getFloat32()){case 254:for(T.interpolationData.length=S,h=0;S>h;h++)T.interpolationData[h]=0;break;case 255:for(T.interpolationData.length=S,h=0;S>h;h++)T.interpolationData[h]=5;break;default:for(T.interpolationData.push(N),l=1;A>l;l++)T.interpolationData.push(t.getFloat32())}}for(T.data=new Float32Array(S),a=0;S>a;a++)T.data[a]=t.getFloat32(),T.data[a]>-1e-8&&T.data[a]<1e-8&&(T.data[a]=0);I+=T.duration}T.startTime=g.playTime,b.playTime=g.playTime,e._calculateKeyFrame(b,C,S)}}},e}(),ws=function(){function e(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return o(e,"laya.ani.AnimationContent"),e}(),Cs=(function(){function e(){}return o(e,"laya.ani.AnimationState"),e.stopped=0,e.paused=1,e.playing=2,e}(),function(){function e(t){this._url=null,this._path=null,this._url=e.formatURL(t),this._path=e.getPath(t)}o(e,"laya.net.URL");var t=e.prototype;return s(0,t,"path",function(){return this._path}),s(0,t,"url",function(){return this._url}),e.formatURL=function(t,i){if(!t)return"null path";if(t.indexOf(":")>0)return t;null!=e.customFormat&&(t=e.customFormat(t,i));var n=t.charAt(0);if("."===n)return e.formatRelativePath((i||e.basePath)+t);if("~"===n)return e.rootPath+t.substring(1);if("d"===n){if(0===t.indexOf("data:image"))return t}else if("/"===n)return t;return(i||e.basePath)+t},e.formatRelativePath=function(e){for(var t=e.split("/"),i=0,n=t.length;n>i;i++)".."==t[i]&&(t.splice(i-1,2),i-=2);return t.join("/")},e.isAbsolute=function(e){return e.indexOf(":")>0||"/"==e.charAt(0)},e.getPath=function(e){var t=e.lastIndexOf("/");return t>0?e.substr(0,t+1):""},e.getFileName=function(e){var t=e.lastIndexOf("/");return t>0?e.substr(t+1):e},e.version={},e.basePath="",e.rootPath="",e.customFormat=function(t){var i=e.version[t];return!Ns.isConchApp&&i&&(t+="?v="+i),t},e}()),Ts=function(){function t(){}var i;return o(t,"laya.net.LocalStorage"),t.__init__=function(){t._baseClass||(t._baseClass=i,i.init()),t.items=t._baseClass.items,t.support=t._baseClass.support},t.setItem=function(e,i){t._baseClass.setItem(e,i)},t.getItem=function(e){return t._baseClass.getItem(e)},t.setJSON=function(e,i){t._baseClass.setJSON(e,i)},t.getJSON=function(e){return t._baseClass.getJSON(e)},t.removeItem=function(e){t._baseClass.removeItem(e)},t.clear=function(){t._baseClass.clear()},t._baseClass=null,t.items=null,t.support=!1,t.__init$=function(){i=function(){function t(){}return o(t,""),t.init=function(){try{t.support=!0,t.items=e.localStorage,t.setItem("laya","1"),t.removeItem("laya")}catch(i){t.support=!1}t.support||console.log("LocalStorage is not supprot or browser is private mode.")},t.setItem=function(e,i){try{t.support&&t.items.setItem(e,i)}catch(n){console.warn("set localStorage failed",n)}},t.getItem=function(e){return t.support?t.items.getItem(e):null},t.setJSON=function(e,i){try{t.support&&t.items.setItem(e,JSON.stringify(i))}catch(n){console.warn("set localStorage failed",n)}},t.getJSON=function(e){return JSON.parse(t.support?t.items.getItem(e):null)},t.removeItem=function(e){t.support&&t.items.removeItem(e)},t.clear=function(){t.support&&t.items.clear()},t.items=null,t.support=!1,t}()},t}(),Is=function(){function e(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}o(e,"laya.net.TTFLoader");var t=e.prototype;return t.load=function(e){this._url=e;var t=e.split(".ttf")[0].split("/");this.fontName=t[t.length-1],Or.window.conch?this._loadConch():Or.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},t._loadConch=function(){this._http=new Iu,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},t._onHttpLoaded=function(e){Or.window.conch.setFontFaceFromBuffer(this.fontName,e),this._clearHttp(),this._complete()},t._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},t._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},t._complete=function(){i.timer.clear(this,this._complete),i.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},t._checkComplete=function(){a.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},t._loadWithFontFace=function(){var e=new Or.window.FontFace(this.fontName,"url('"+this._url+"')");Or.window.document.fonts.add(e);var t=this;e.loaded.then(function(){t._complete()}),e.load()},t._createDiv=function(){this._div=Or.createElement("div"),this._div.innerHTML="laya";var e=this._div.style;e.fontFamily=this.fontName,e.position="absolute",e.left="-100px",e.top="-100px",Or.document.body.appendChild(this._div)},t._loadWithCSS=function(){var e=this,t=Or.createElement("style");t.type="text/css",Or.document.body.appendChild(t),t.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=a.measureText("LayaTTFFont",this._fontTxt).width;var n=this;t.onload=function(){i.timer.once(1e4,n,e._complete)},i.timer.loop(20,this,this._checkComplete),this._createDiv()},e._testString="LayaTTFFont",e}(),As=function(){function e(t,i){switch(this._next=i||e.NORENDER,t){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:return void(this._fun=this._image2);case 517:return void(this._fun=this._image2);case 32:return void(this._fun=cs._filter);case 69905:return void(this._fun=e._initRenderFun)}this.onCreate(t)}o(e,"laya.renders.RenderSprite");var t=e.prototype;return t.onCreate=function(e){},t._style=function(e,t,i,n){e._style.render(e,t,i,n);var o=this._next;o._fun.call(o,e,t,i,n)},t._no=function(e,t,i,n){},t._custom=function(e,t,i,n){e.customRender(t,i,n);var o=e._style._tf;this._next._fun.call(this._next,e,t,i-o.translateX,n-o.translateY)},t._clip=function(t,i,n,o){var s=this._next;if(s!=e.NORENDER){var r=t._style.scrollRect;i.ctx.save(),i.ctx.clipRect(n,o,r.width,r.height),s._fun.call(s,t,i,n-r.x,o-r.y),i.ctx.restore()}},t._blend=function(e,t,i,n){var o=e._style;o.blendMode&&(t.ctx.globalCompositeOperation=o.blendMode);var s=this._next;s._fun.call(s,e,t,i,n),t.ctx.globalCompositeOperation="source-over"},t._mask=function(e,t,i,n){var o=this._next;o._fun.call(o,e,t,i,n);var s=e.mask;s&&(t.ctx.globalCompositeOperation="destination-in",(s.numChildren>0||!s.graphics._isOnlyOne())&&(s.cacheAsBitmap=!0),s.render(t,i-e.pivotX,n-e.pivotY)),t.ctx.globalCompositeOperation="source-over"},t._graphics=function(e,t,i,n){var o=e._style._tf;e._graphics&&e._graphics._render(e,t,i-o.translateX,n-o.translateY);var s=this._next;s._fun.call(s,e,t,i,n)},t._image=function(e,t,i,n){var o=e._style;t.ctx.drawTexture2(i,n,o._tf.translateX,o._tf.translateY,e.transform,o.alpha,o.blendMode,e._graphics._one)},t._image2=function(e,t,i,n){var o=e._style._tf;t.ctx.drawTexture2(i,n,o.translateX,o.translateY,e.transform,1,null,e._graphics._one)},t._alpha=function(e,t,i,n){var o,s=e._style;if((o=s.alpha)>.01||e._needRepaint()){var r=t.ctx.globalAlpha;t.ctx.globalAlpha*=o;var a=this._next;a._fun.call(a,e,t,i,n),t.ctx.globalAlpha=r}},t._transform=function(t,i,n,o){var s=t.transform,r=this._next;s&&r!=e.NORENDER?(i.save(),i.transform(s.a,s.b,s.c,s.d,s.tx+n,s.ty+o),r._fun.call(r,t,i,0,0),i.restore()):r._fun.call(r,t,i,n,o)},t._childs=function(e,t,i,n){var o=e._style,s=o._tf;if(i=i-s.translateX+o.paddingLeft,n=n-s.translateY+o.paddingTop,o._calculation){var r=e._getWords();if(r){var a=o;a&&(a.stroke?t.fillBorderWords(r,i,n,a.font,a.color,a.strokeColor,a.stroke):t.fillWords(r,i,n,a.font,a.color,"none"!=a.textDecoration&&a.underLine?1:0))}}var l,h=e._childs,c=h.length;if(e.viewport||e.optimizeScrollRect&&e._style.scrollRect){var u=e.viewport||e._style.scrollRect,d=u.x,p=u.y,f=u.right,_=u.bottom,m=NaN,g=NaN;for(v=0;c>v;++v)(l=h[v]).visible&&(m=l._x)<f&&m+l.width>d&&(g=l._y)<_&&g+l.height>p&&l.render(t,i,n)}else for(var v=0;c>v;++v)(l=h[v])._style.visible&&l.render(t,i,n)},t._canvas=function(e,t,i,n){var o=e._$P.cacheCanvas;if(!o)return void this._next._fun.call(this._next,e,t,i,n);"bitmap"===o.type?Nr.canvasBitmap++:Nr.canvasNormal++;var s=o.ctx;if(e._needRepaint()||!s)this._canvas_repaint(e,t,i,n);else{var r=o._cacheRec;t.drawCanvas(s.canvas,i+r.x,n+r.y,r.width,r.height)}},t._canvas_repaint=function(e,t,n,o){var s=e._$P.cacheCanvas,r=this._next;if(!s)return void r._fun.call(r,e,u,n,o);var a,l,h,c,u=s.ctx,d=e._needRepaint()||!u,p=s.type;if("bitmap"===p?Nr.canvasBitmap++:Nr.canvasNormal++,d){s._cacheRec||(s._cacheRec=new Ch);var f,_;Ns.isWebGL&&"bitmap"!==p?s._cacheRec.setTo(-e.pivotX,-e.pivotY,1,1):(c=e.getSelfBounds(),c.x=c.x-e.pivotX,c.y=c.y-e.pivotY,c.x=c.x-16,c.y=c.y-16,c.width=c.width+32,c.height=c.height+32,c.x=Math.floor(c.x+n)-n,c.y=Math.floor(c.y+o)-o,c.width=Math.floor(c.width),c.height=Math.floor(c.height),s._cacheRec.copyFrom(c)),c=s._cacheRec;var m=Ns.isWebGL?1:Or.pixelRatio*i.stage.clientScaleX,g=Ns.isWebGL?1:Or.pixelRatio*i.stage.clientScaleY;if(!Ns.isWebGL){var v,y=1,b=1;for(v=e;v&&v!=i.stage;)y*=v.scaleX,b*=v.scaleY,v=v.parent;Ns.isWebGL?(1>y&&(m*=y),1>b&&(g*=b)):(y>1&&(m*=y),b>1&&(g*=b))}if(e.scrollRect){var E=e.scrollRect;c.x-=E.x,c.y-=E.y}if(f=c.width*m,_=c.height*g,l=c.x,h=c.y,Ns.isWebGL&&"bitmap"===p&&(f>2048||_>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),s.ctx&&(Hr.recover("RenderContext",s.ctx),s.ctx.canvas.size(0,0),s.ctx=null),void r._fun.call(r,e,t,n,o);u||(u=s.ctx=Hr.getItem("RenderContext")||new Ps(f,_,GS.create("AUTO"))),u.ctx.sprite=e,a=u.canvas,a.clear(),(a.width!=f||a.height!=_)&&a.size(f,_),"bitmap"===p?a.context.asBitmap=!0:"normal"===p&&(a.context.asBitmap=!1);var x;if(1!=m||1!=g){var S=u.ctx;S.save(),S.scale(m,g),!Ns.isConchWebGL&&Ns.isConchApp&&(x=e._$P.cf,x&&S.setFilterMatrix&&S.setFilterMatrix(x._mat,x._alpha)),r._fun.call(r,e,u,-l,-h),S.restore(),Ns.isConchApp&&!Ns.isConchWebGL||e._applyFilters()}else S=u.ctx,!Ns.isConchWebGL&&Ns.isConchApp&&(x=e._$P.cf,x&&S.setFilterMatrix&&S.setFilterMatrix(x._mat,x._alpha)),r._fun.call(r,e,u,-l,-h),Ns.isConchApp&&!Ns.isConchWebGL||e._applyFilters();e._$P.staticCache&&(s.reCache=!1),Nr.canvasReCache++}else c=s._cacheRec,l=c.x,h=c.y,a=u.canvas;t.drawCanvas(a,n+l,o+h,c.width,c.height)},e.__init__=function(){function t(t,i){for(var n=0,o=0;o<t.length;o++)n|=t[o],e.renders[n]=i}var i,n=0,o=0;for(i=a.createRenderSprite(69905,null),o=e.renders.length=4096,n=0;o>n;n++)e.renders[n]=i;e.renders[0]=a.createRenderSprite(0,null),t([1,512,4,2],new e(1,null)),e.renders[513]=a.createRenderSprite(513,null),e.renders[517]=new e(517,null)},e._initRenderFun=function(t,i,n,o){var s=t._renderType,r=e.renders[s]=e._getTypeRender(s);r._fun(t,i,n,o)},e._getTypeRender=function(e){for(var t=null,i=2048;i>1;)i&e&&(t=a.createRenderSprite(i,t)),i>>=1;return t},e.IMAGE=1,e.ALPHA=2,e.TRANSFORM=4,e.BLEND=8,e.CANVAS=16,e.FILTERS=32,e.MASK=64,e.CLIP=128,e.STYLE=256,e.GRAPHICS=512,e.CUSTOM=1024,e.CHILDS=2048,e.INIT=69905,e.renders=[],e.NORENDER=new e(0,null),e}(),Ns=function(){function t(e,n){function o(e){i.stage._loop(),Or.window.requestAnimationFrame(o)}this._timeId=0;var s=t._mainCanvas.source.style;s.position="absolute",s.top=s.left="0px",s.background="#000000",t._mainCanvas.source.id="layaCanvas";var r=laya.renders.Render.isWebGL;t._mainCanvas.source.width=e,t._mainCanvas.source.height=n,r&&t.WebGL.init(t._mainCanvas,e,n),Or.onKGMiniGame||Or.container.appendChild(t._mainCanvas.source),t._context=new Ps(e,n,r?null:t._mainCanvas),t._context.ctx.setIsMainContext(),Or.window.requestAnimationFrame(o),i.stage.on("visibilitychange",this,this._onVisibilitychange)}o(t,"laya.renders.Render");var n=t.prototype;return n._onVisibilitychange=function(){i.stage.isVisibility?0!=this._timeId&&Or.window.clearInterval(this._timeId):this._timeId=Or.window.setInterval(this._enterFrame,1e3)},n._enterFrame=function(e){i.stage._loop()},s(1,t,"canvas",function(){return t._mainCanvas.source}),s(1,t,"context",function(){return t._context}),t._context=null,t._mainCanvas=null,t.WebGL=null,t.isConchNode=!1,t.isConchApp=!1,t.isConchWebGL=!1,t.isWebGL=!1,t.is3DMode=!1,t.optimizeTextureMemory=function(e,t){return!0},t.__init$=function(){e.ConchRenderType=e.ConchRenderType||1,e.ConchRenderType|=e.conch?4:0,t.isConchNode=5==(5&e.ConchRenderType),t.isConchApp=4==(4&e.ConchRenderType),t.isConchWebGL=6==e.ConchRenderType},t}(),Ps=function(){function e(t,i,n){this.x=0,this.y=0,this._drawTexture=function(e,t,i){i[0].loaded&&this.ctx.drawTexture(i[0],i[1],i[2],i[3],i[4],e,t)},this._fillTexture=function(e,t,i){i[0].loaded&&this.ctx.fillTexture(i[0],i[1]+e,i[2]+t,i[3],i[4],i[5],i[6],i[7])},this._drawTextureWithTransform=function(e,t,i){i[0].loaded&&this.ctx.drawTextureWithTransform(i[0],i[1],i[2],i[3],i[4],i[5],e,t,i[6])},this._fillQuadrangle=function(e,t,i){this.ctx.fillQuadrangle(i[0],i[1],i[2],i[3],i[4])},this._drawRect=function(e,t,i){var n=this.ctx;null!=i[4]&&(n.fillStyle=i[4],n.fillRect(e+i[0],t+i[1],i[2],i[3],null)),null!=i[5]&&(n.strokeStyle=i[5],n.lineWidth=i[6],n.strokeRect(e+i[0],t+i[1],i[2],i[3],i[6]))},this._drawPie=function(e,t,i){var n=this.ctx;Ns.isWebGL&&n.setPathId(i[8]),n.beginPath(),Ns.isWebGL?(n.movePath(i[0]+e,i[1]+t),n.moveTo(0,0)):n.moveTo(e+i[0],t+i[1]),n.arc(e+i[0],t+i[1],i[2],i[3],i[4]),n.closePath(),this._fillAndStroke(i[5],i[6],i[7],!0)},this._clipRect=function(e,t,i){this.ctx.clipRect(e+i[0],t+i[1],i[2],i[3])},this._fillRect=function(e,t,i){this.ctx.fillRect(e+i[0],t+i[1],i[2],i[3],i[4])},this._drawCircle=function(t,i,n){var o=this.ctx;Ns.isWebGL&&o.setPathId(n[6]),Nr.drawCall++,o.beginPath(),Ns.isWebGL&&o.movePath(n[0]+t,n[1]+i),o.arc(n[0]+t,n[1]+i,n[2],0,e.PI2),o.closePath(),this._fillAndStroke(n[3],n[4],n[5],!0)},this._fillCircle=function(t,i,n){Nr.drawCall++;var o=this.ctx;o.beginPath(),o.fillStyle=n[3],o.arc(n[0]+t,n[1]+i,n[2],0,e.PI2),o.fill()},this._setShader=function(e,t,i){this.ctx.setShader(i[0])},this._drawLine=function(e,t,i){var n=this.ctx;Ns.isWebGL&&n.setPathId(i[6]),n.beginPath(),n.strokeStyle=i[4],n.lineWidth=i[5],Ns.isWebGL?(n.movePath(e,t),n.moveTo(i[0],i[1]),n.lineTo(i[2],i[3])):(n.moveTo(e+i[0],t+i[1]),n.lineTo(e+i[2],t+i[3])),n.stroke()},this._drawLines=function(e,t,i){var n=this.ctx;Ns.isWebGL&&n.setPathId(i[5]),n.beginPath(),e+=i[0],t+=i[1],Ns.isWebGL&&n.movePath(e,t),n.strokeStyle=i[3],n.lineWidth=i[4];var o=i[2],s=2,r=o.length;if(Ns.isWebGL)for(n.moveTo(o[0],o[1]);r>s;)n.lineTo(o[s++],o[s++]);else for(n.moveTo(e+o[0],t+o[1]);r>s;)n.lineTo(e+o[s++],t+o[s++]);n.stroke()},this._drawLinesWebGL=function(e,t,i){this.ctx.drawLines(e+this.x+i[0],t+this.y+i[1],i[2],i[3],i[4])},this._drawCurves=function(e,t,i){this.ctx.drawCurves(e,t,i)},this._draw=function(e,t,i){i[0].call(null,this,e,t)},this._transformByMatrix=function(e,t,i){this.ctx.transformByMatrix(i[0])},this._setTransform=function(e,t,i){this.ctx.setTransform(i[0],i[1],i[2],i[3],i[4],i[5])},this._setTransformByMatrix=function(e,t,i){this.ctx.setTransformByMatrix(i[0])},this._save=function(e,t,i){this.ctx.save()},this._restore=function(e,t,i){this.ctx.restore()},this._translate=function(e,t,i){this.ctx.translate(i[0],i[1])},this._transform=function(e,t,i){this.ctx.translate(i[1]+e,i[2]+t);var n=i[0];this.ctx.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),this.ctx.translate(-e-i[1],-t-i[2])},this._rotate=function(e,t,i){this.ctx.translate(i[1]+e,i[2]+t),this.ctx.rotate(i[0]),this.ctx.translate(-e-i[1],-t-i[2])},this._scale=function(e,t,i){this.ctx.translate(i[2]+e,i[3]+t),this.ctx.scale(i[0],i[1]),this.ctx.translate(-e-i[2],-t-i[3])},this._alpha=function(e,t,i){this.ctx.globalAlpha*=i[0]},this._setAlpha=function(e,t,i){this.ctx.globalAlpha=i[0]},this._fillText=function(e,t,i){this.ctx.fillText(i[0],i[1]+e,i[2]+t,i[3],i[4],i[5])},this._strokeText=function(e,t,i){this.ctx.strokeText(i[0],i[1]+e,i[2]+t,i[3],i[4],i[5],i[6])},this._fillBorderText=function(e,t,i){this.ctx.fillBorderText(i[0],i[1]+e,i[2]+t,i[3],i[4],i[5],i[6],i[7])},this._blendMode=function(e,t,i){this.ctx.globalCompositeOperation=i[0]},this._beginClip=function(e,t,i){this.ctx.beginClip&&this.ctx.beginClip(e+i[0],t+i[1],i[2],i[3])},this._setIBVB=function(e,t,i){this.ctx.setIBVB(i[0]+e,i[1]+t,i[2],i[3],i[4],i[5],i[6],i[7])},this._fillTrangles=function(e,t,i){this.ctx.fillTrangles(i[0],i[1]+e,i[2]+t,i[3],i[4])},this._drawPath=function(e,t,i){var n=this.ctx;Ns.isWebGL&&n.setPathId(-1),n.beginPath(),e+=i[0],t+=i[1],Ns.isWebGL&&n.movePath(e,t);for(var o=i[2],s=0,r=o.length;r>s;s++){var a=o[s];switch(a[0]){case"moveTo":Ns.isWebGL?n.moveTo(a[1],a[2]):n.moveTo(e+a[1],t+a[2]);break;case"lineTo":Ns.isWebGL?n.lineTo(a[1],a[2]):n.lineTo(e+a[1],t+a[2]);break;case"arcTo":Ns.isWebGL?n.arcTo(a[1],a[2],a[3],a[4],a[5]):n.arcTo(e+a[1],t+a[2],e+a[3],t+a[4],a[5]);break;case"closePath":n.closePath()}}var l=i[3];null!=l&&(n.fillStyle=l.fillStyle,n.fill());var h=i[4];null!=h&&(n.strokeStyle=h.strokeStyle,n.lineWidth=h.lineWidth||1,n.lineJoin=h.lineJoin,n.lineCap=h.lineCap,n.miterLimit=h.miterLimit,n.stroke())},this.drawPoly=function(e,t,i){this.ctx.drawPoly(e+this.x+i[0],t+this.y+i[1],i[2],i[3],i[4],i[5],i[6])},this._drawPoly=function(e,t,i){var n=this.ctx,o=i[2],s=2,r=o.length;if(Ns.isWebGL)for(n.setPathId(i[6]),n.beginPath(),e+=i[0],t+=i[1],n.movePath(e,t),n.moveTo(o[0],o[1]);r>s;)n.lineTo(o[s++],o[s++]);else for(n.beginPath(),e+=i[0],t+=i[1],n.moveTo(e+o[0],t+o[1]);r>s;)n.lineTo(e+o[s++],t+o[s++]);n.closePath(),this._fillAndStroke(i[3],i[4],i[5],i[7])},this._drawSkin=function(e,t,i){var n=i[0];if(n){var o=this.ctx;n.render(o,e,t)}},this._drawParticle=function(e,t,i){this.ctx.drawParticle(e+this.x,t+this.y,i[0])},this._setFilters=function(e,t,i){this.ctx.setFilters(i)},n?this.ctx=n.getContext("2d"):(n=GS.create("3D"),this.ctx=a.createWebGLContext2D(n),n._setContext(this.ctx)),n.size(t,i),this.canvas=n}o(e,"laya.renders.RenderContext");var t=e.prototype;return t.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},t.drawTexture=function(e,t,i,n,o){e.loaded&&this.ctx.drawTexture(e,t,i,n,o,this.x,this.y)},t._drawTextures=function(e,t,i){i[0].loaded&&this.ctx.drawTextures(i[0],i[1],e+this.x,t+this.y)},t.drawTextureWithTransform=function(e,t,i,n,o,s,r){e.loaded&&this.ctx.drawTextureWithTransform(e,t,i,n,o,s,this.x,this.y,r)},t.fillQuadrangle=function(e,t,i,n,o){this.ctx.fillQuadrangle(e,t,i,n,o)},t.drawCanvas=function(e,t,i,n,o){this.ctx.drawCanvas(e,t+this.x,i+this.y,n,o)},t.drawRect=function(e,t,i,n,o,s){void 0===s&&(s=1);var r=this.ctx;r.strokeStyle=o,r.lineWidth=s,r.strokeRect(e+this.x,t+this.y,i,n,s)},t._fillAndStroke=function(e,t,i,n){void 0===n&&(n=!1);var o=this.ctx;null!=e&&(o.fillStyle=e,Ns.isWebGL?o.fill(n):o.fill()),null!=t&&i>0&&(o.strokeStyle=t,o.lineWidth=i,o.stroke())},t.clipRect=function(e,t,i,n){this.ctx.clipRect(e+this.x,t+this.y,i,n)},t.fillRect=function(e,t,i,n,o){this.ctx.fillRect(e+this.x,t+this.y,i,n,o)},t.drawCircle=function(t,i,n,o,s){void 0===s&&(s=1),Nr.drawCall++;var r=this.ctx;r.beginPath(),r.strokeStyle=o,r.lineWidth=s,r.arc(t+this.x,i+this.y,n,0,e.PI2),r.stroke()},t.drawTriangles=function(e,t,i){if(Ns.isWebGL)this.ctx.drawTriangles(i[0],e+i[1],t+i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9]);else{var n=i[5],o=0,s=n.length,r=this.ctx;for(o=0;s>o;o+=3){var a=2*n[o],l=2*n[o+1],h=2*n[o+2];r.drawTriangle(i[0],i[3],i[4],a,l,h,i[6],!0)}}},t.fillCircle=function(t,i,n,o){Nr.drawCall++;var s=this.ctx;s.beginPath(),s.fillStyle=o,s.arc(t+this.x,i+this.y,n,0,e.PI2),s.fill()},t.setShader=function(e){this.ctx.setShader(e)},t.drawLine=function(e,t,i,n,o,s){void 0===s&&(s=1);var r=this.ctx;r.beginPath(),r.strokeStyle=o,r.lineWidth=s,r.moveTo(this.x+e,this.y+t),r.lineTo(this.x+i,this.y+n),r.stroke()},t.clear=function(){this.ctx.clear()},t.transformByMatrix=function(e){this.ctx.transformByMatrix(e)},t.setTransform=function(e,t,i,n,o,s){this.ctx.setTransform(e,t,i,n,o,s)},t.setTransformByMatrix=function(e){this.ctx.setTransformByMatrix(e)},t.save=function(){this.ctx.save()},t.restore=function(){this.ctx.restore()},t.translate=function(e,t){this.ctx.translate(e,t)},t.transform=function(e,t,i,n,o,s){this.ctx.transform(e,t,i,n,o,s)},t.rotate=function(e){this.ctx.rotate(e)},t.scale=function(e,t){this.ctx.scale(e,t)},t.alpha=function(e){this.ctx.globalAlpha*=e},t.setAlpha=function(e){this.ctx.globalAlpha=e},t.fillWords=function(e,t,i,n,o,s){void 0===s&&(s=0),this.ctx.fillWords(e,t,i,n,o,s)},t.fillBorderWords=function(e,t,i,n,o,s,r){this.ctx.fillBorderWords(e,t,i,n,o,s,r)},t.fillText=function(e,t,i,n,o,s){this.ctx.fillText(e,t+this.x,i+this.y,n,o,s)},t.strokeText=function(e,t,i,n,o,s,r){this.ctx.strokeText(e,t+this.x,i+this.y,n,o,s,r)},t.blendMode=function(e){this.ctx.globalCompositeOperation=e},t.flush=function(){this.ctx.flush&&this.ctx.flush()},t.addRenderObject=function(e){this.ctx.addRenderObject(e)},t.beginClip=function(e,t,i,n){this.ctx.beginClip&&this.ctx.beginClip(e,t,i,n)},t.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},t.fillTrangles=function(e,t,i){this.ctx.fillTrangles(i[0],i[1],i[2],i[3],i.length>4?i[4]:null)},e.PI2=2*Math.PI,e}(),Rs=function(){function e(){}o(e,"laya.hw.mini.MiniImage");var t=e.prototype;return t._loadImage=function(t){var i=this;if(Ms.isZiYu)return void e.onCreateImage(t,i,!0);var n=!1;if(Os.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=Os.loadPath)t=t.split(Os.loadPath)[1];else{var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=t;""!=o&&(t=t.split(o)[1]),t||(t=s)}if(Ms.subNativeFiles&&0==Ms.subNativeheads.length)for(var r in Ms.subNativeFiles){var a=Ms.subNativeFiles[r];Ms.subNativeheads=Ms.subNativeheads.concat(a);for(var l=0;l<a.length;l++)Ms.subMaps[a[l]]=r+"/"+a[l]}if(Ms.subNativeFiles&&-1!=t.indexOf("/")){var c=t.split("/")[0]+"/";if(c&&-1!=Ms.subNativeheads.indexOf(c)){var u=Ms.subMaps[c];t=t.replace(c,u)}}}else n=!0,t=Cs.formatURL(t);Os.getFileInfo(t)?e.onCreateImage(t,i,!n):-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?Ms.isZiYu?e.onCreateImage(t,i,!0):Os.downOtherFiles(encodeURI(t),new h(e,e.onDownImgCallBack,[t,i]),t):e.onCreateImage(t,i,!0)},e.onDownImgCallBack=function(t,i,n,o){void 0===o&&(o=""),n?i.onError(null):e.onCreateImage(t,i,!1,o)},e.onCreateImage=function(e,t,i,n){function o(){h.onload=null,h.onerror=null,delete t.imgCache[e]}void 0===i&&(i=!1),void 0===n&&(n="");var s;if(Ms.autoCacheFile)if(i)if(Ms.isZiYu){var r=Cs.formatURL(e);s=Os.ziyuFileTextureData[r]?Os.ziyuFileTextureData[r]:e}else s=e;else if(""!=n)s=n;else{var a=Os.getFileInfo(e),l=a.md5;s=Os.getFileNativePath(l)}else s=i?e:n;null==t.imgCache&&(t.imgCache={});var h,c=function(){o(),t.onLoaded(h)},u=function(){o(),delete Os.filesListObj[e],delete Os.fakeObj[e],t.event("error","Load image failed")};"nativeimage"==t._type?(h=new Or.window.Image,h.crossOrigin="",h.onload=c,h.onerror=u,h.src=s,t.imgCache[e]=h):new xw.create(s,{onload:c,onerror:u,onCreate:function(i){h=i,t.imgCache[e]=i}})},e}(),Ls=function(){function e(){}return o(e,"laya.hw.mini.MiniInput"),e._createInputElement=function(){fw._initInput(fw.area=Or.createElement("textarea")),fw._initInput(fw.input=Or.createElement("input")),fw.inputContainer=Or.createElement("div"),fw.inputContainer.style.position="absolute",fw.inputContainer.style.zIndex=1e5,Or.container.appendChild(fw.inputContainer),fw.inputContainer.setPos=function(e,t){fw.inputContainer.style.left=e+"px",fw.inputContainer.style.top=t+"px"},i.stage.on("resize",null,e._onStageResize),Ms.window.hbs.onWindowResize&&Ms.window.hbs.onWindowResize(function(e){Ms.window.dispatchEvent&&Ms.window.dispatchEvent("resize")}),jh._soundClass=Lu,jh._musicClass=Lu;var t=Ms.systemInfo.model,n=Ms.systemInfo.system;-1!=t.indexOf("iPhone")&&(Or.onIPhone=!0,Or.onIOS=!0,Or.onIPad=!0,Or.onAndroid=!1),-1==n.indexOf("Android")&&-1==n.indexOf("Adr")||(Or.onAndroid=!0,Or.onIPhone=!1,Or.onIOS=!1,Or.onIPad=!1)},e._onStageResize=function(){var e=i.stage._canvasTransform.identity();e.scale(Or.width/Ns.canvas.width/a.getPixelRatio(),Or.height/Ns.canvas.height/a.getPixelRatio())},e.inputFocus=function(e){var t=fw.inputElement.target;t&&!t.editable||(Ms.window.hbs.offKeyboardConfirm(),Ms.window.hbs.offKeyboardInput(),Ms.window.hbs.showKeyboard({defaultValue:t.text,maxLength:t.maxChars,multiple:t.multiline,confirmHold:!0,confirmType:"done",success:function(e){},fail:function(e){}}),Ms.window.hbs.onKeyboardConfirm(function(e){var i=e?e.value:"";t.text=i,t.event("input"),laya.hw.mini.MiniInput.inputEnter()}),Ms.window.hbs.onKeyboardInput(function(e){var i=e?e.value:"";return t.multiline||-1==i.indexOf("\n")?(t.text=i,void t.event("input")):void laya.hw.mini.MiniInput.inputEnter()}))},e.inputEnter=function(){fw.inputElement.target.focus=!1},e.inputblur=function(){e.hideKeyboard()},e.hideKeyboard=function(){Ms.window.hbs.offKeyboardConfirm(),Ms.window.hbs.offKeyboardInput(),Ms.window.hbs.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})},e}(),Os=function(){function e(){}return o(e,"laya.hw.mini.MiniFileMgr"),e.isLocalNativeFile=function(e){for(var t=0,i=Ms.nativefiles.length;i>t;t++)if(-1!=e.indexOf(Ms.nativefiles[t]))return!0;return!1},e.getFileInfo=function(t){var i=t,n=e.fakeObj[i];return null==n?null:n},e.read=function(t,i,n,o,s,r){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r="");var a;a=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:a,encoding:i,success:function(e){null!=n&&n.runWith([0,e])},fail:function(t){t&&""!=o?e.downFiles(o,i,n,o,s,r):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,s,r,a){void 0===i&&(i="ascii"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0);var l=e.wxdown({url:t,success:function(l){200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,s,r,a):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l]);
},fail:function(e){null!=n&&n.runWith([1,e])}});l.onProgressUpdate(function(e){null!=n&&n.runWith([2,e.progress])})},e.readFile=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0),e.fs.readFile({filePath:t,encoding:i,success:function(r){(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))&&(Ms.autoCacheFile||s)?(null!=n&&n.runWith([0,r]),e.copyFile(t,o,null,i,a)):null!=n&&n.runWith([0,r])},fail:function(t){t?null!=n&&n.runWith([1,t]):e.filesListObj[o]&&(e.filesListObj[o]==e.fakeObj[o]&&delete e.fakeObj[o],delete e.filesListObj[o])}})},e.downOtherFiles=function(t,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===s&&(s=!0),e.wxdown({url:t,success:function(t){200===t.statusCode?(Ms.autoCacheFile||o)&&-1==n.indexOf("wx.qlogo.cn")&&-1==n.indexOf(".php")?(null!=i&&i.runWith([0,t.tempFilePath]),e.copyFile(t.tempFilePath,n,null,"",s)):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(e){null!=i&&i.runWith([1,e])}})},e.downLoadFile=function(t,n,o,s){void 0===n&&(n=""),void 0===s&&(s="ascii"),Ms.window.navigator.userAgent.indexOf("MiniGame")<0?i.loader.load(t,o):"image"==n||"sound"==n?e.downOtherFiles(t,o,t,!0,!1):e.downFiles(t,s,o,t,!0,n,!1)},e.copyFile=function(t,i,n,o,s){void 0===o&&(o=""),void 0===s&&(s=!0);var r=t.split("/"),a=r[r.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(a);e.fakeObj[i]={md5:a,readyUrl:i,size:0,times:Or.now(),encoding:o};var c=52428800,u=4194304,d=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>Ms.minClearSize&&(Ms.minClearSize=r.size),e.onClearCacheRes()),e.deleteFile(t,i,n,o,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>Ms.minClearSize&&(Ms.minClearSize=r.size),e.onClearCacheRes()),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,a,!0,o,n,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}})},fail:function(e){null!=n&&n.runWith([1,e])}})},e.onClearCacheRes=function(){var t=Ms.minClearSize,i=[];for(var n in e.filesListObj)"fileUsedSize"!=n&&i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,s=1,r=i.length;r>s;s++){var a=i[s];if(o>=t)break;o+=a.size,e.deleteFile("",a.readyUrl)}},e.sortOn=function(e,t,i){return void 0===i&&(i=0),16==i?e.sort(function(e,i){return e[t]-i[t]}):18==i?e.sort(function(e,i){return i[t]-e[t]}):e.sort(function(e,i){return e[t]-i[t]})},e.getFileNativePath=function(e){return laya.hw.mini.MiniFileMgr.fileNativeDir+"/"+e},e.deleteFile=function(t,i,n,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=0);var r=e.getFileInfo(i),a=e.getFileNativePath(r.md5);e.fs.unlink({filePath:a,success:function(r){var a=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(s){e.onSaveFile(i,t,a,o,n,s.size)},fail:function(e){null!=n&&n.runWith([1,e])}})}else e.onSaveFile(i,t,a,o,n,s)},fail:function(e){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)t.push(e.filesListObj[i]);for(var n=1,o=t.length;o>n;n++){var s=t[n];e.deleteFile("",s.readyUrl)}laya.hw.mini.MiniFileMgr.filesListObj&&laya.hw.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.hw.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.hw.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,s,r){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===r&&(r=0);var a=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[a]={md5:i,readyUrl:t,size:r,times:Or.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+r,e.writeFilesList(a,JSON.stringify(e.filesListObj),!0),null!=s&&s.runWith([0])}else if(e.filesListObj[a]){var l=parseInt(e.filesListObj[a].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-l,e.fakeObj[a].md5==e.filesListObj[a].md5&&delete e.fakeObj[a],delete e.filesListObj[a],e.writeFilesList(a,JSON.stringify(e.filesListObj),!1),null!=s&&s.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(e){},fail:function(e){}}),!Ms.isZiYu&&Ms.isPosMsgYu&&Ms.window.hbs.postMessage&&Ms.window.hbs.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(e){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,t])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="utf8"),void 0===o&&(o="");var s,r=e.getFileNativePath(t);try{s=e.fs.readFileSync(r,i),null!=n&&n.runWith([0,{data:s}])}catch(a){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=Ms.window.hbs.env.USER_DATA_PATH+t},e.filesListObj={},e.fakeObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=Ms.window.hbs.getFileSystemManager()},"wxdown",function(){return this.wxdown=Ms.window.hbs.downloadFile}]),e}(),Ms=function(){function t(){}return o(t,"laya.hw.mini.HWMiniAdapter"),t.getJson=function(e){return JSON.parse(e)},t.init=function(n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!t._inited&&(t._inited=!0,t.window=e,t.window.hasOwnProperty("hbs"))){t.isZiYu=o,t.isPosMsgYu=n,t.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(s){}if(t.isZiYu||(Os.setNativeFileDir("/layaairGame"),Os.existDir(Os.fileNativeDir,h.create(t,t.onMkdirCallBack))),t.systemInfo=t.window.hbs.getSystemInfoSync(),"ios 10.1.1"===t.systemInfo.system.toLowerCase())try{laya.webgl.resource.WebGLCharImage.canUseCanvas=!1}catch(s){}t.window.focus=function(){},i._getUrlPath=function(){},i.getUrlPath=function(){},t.window.logtime=function(e){},t.window.alertTimeLog=function(e){},t.window.resetShareInfo=function(){},t._preCreateElement=Or.createElement,Or.createElement=t.createElement,a.createShaderCondition=t.createShaderCondition,Dr.parseXMLFromString=t.parseXMLFromString,fw._createInputElement=Ls._createInputElement,t.EnvConfig.load=Tu.prototype.load,Tu.prototype.load=Ru.prototype.load,Tu.prototype._loadImage=Rs.prototype._loadImage,nc.useRetinalCanvas=!0}},t.measureText=function(e){var i=t._measureText(e);return i||(i={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),i},t.getUrlEncode=function(e,t){return"arraybuffer"==t?"binary":"utf8"},t.downLoadFile=function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n="utf8");var o=Os.getFileInfo(e);o?null!=i&&i.runWith([0]):Os.downLoadFile(e,t,i,n)},t.remove=function(e,t){Os.deleteFile("",e,t,"",0)},t.removeAll=function(){Os.deleteAll()},t.hasNativeFile=function(e){return Os.isLocalNativeFile(e)},t.getFileInfo=function(e){return Os.getFileInfo(e)},t.getFileList=function(){return Os.filesListObj},t.exitMiniProgram=function(){t.window.hbs.exitMiniProgram()},t.onMkdirCallBack=function(e,t){e||(Os.filesListObj=JSON.parse(t.data),Os.fakeObj=JSON.parse(t.data)||{})},t.pixelRatio=function(){if(!t.EnvConfig.pixelRatioInt)try{return t.EnvConfig.pixelRatioInt=t.systemInfo.pixelRatio,t.systemInfo.pixelRatio}catch(e){}return t.EnvConfig.pixelRatioInt},t.createElement=function(e){if("textarea"==e||"input"==e)return t.onCreateInput(e);if("div"==e){var i=t._preCreateElement(e);return i.contains=function(e){return null},i.removeChild=function(e){},i}return t._preCreateElement(e)},t.onCreateInput=function(e){var i=t._preCreateElement(e);return i.focus=Ls.inputFocus,i.blur=Ls.inputblur,i.style={},i.value=0,i.parentElement={},i.placeholder={},i.type={},i.setColor=function(e){},i.setType=function(e){},i.setFontFace=function(e){},i.addEventListener=function(e){},i.contains=function(e){return null},i.removeChild=function(e){},i},t.createShaderCondition=function(e){var t=this,i=function(){return t[e.replace("this.","")]};return i},t.sendAtlasToOpenDataContext=function(e){if(!laya.hw.mini.HWMiniAdapter.isZiYu){var i=Tu.getRes(Cs.formatURL(e));if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";i.meta.image.split(",");if(i.meta&&i.meta.image)for(var n=i.meta.image.split(","),o=e.indexOf("/")>=0?"/":"\\",s=e.lastIndexOf(o),r=s>=0?e.substr(0,s+1):"",a=0,l=n.length;l>a;a++)n[a]=r+n[a];else n=[e.replace(".json",".png")];for(a=0;a<n.length;a++){var h=n[a];t.postInfoToContext(e,h,i)}}},t.postInfoToContext=function(e,i,n){var o={frames:n.frames,meta:n.meta},s=i,r=Os.getFileInfo(Cs.formatURL(i));if(r)var a=r.md5,l=Os.getFileNativePath(a);else l=s;if(!l)throw"获取图集的磁盘url路径不存在！";t.window.hbs.postMessage({url:e,atlasdata:o,imgNativeUrl:l,imgReadyUrl:s,isLoad:"opendatacontext"})},t.sendSinglePicToOpenDataContext=function(e){var i=Cs.formatURL(e),n=Os.getFileInfo(i);if(n){var o=n.md5,s=Os.getFileNativePath(o);e=i}else s=e;if(!s)throw"获取图集的磁盘url路径不存在！";t.window.hbs.postMessage({url:e,imgNativeUrl:s,imgReadyUrl:e,isLoad:"openJsondatacontextPic"})},t.sendJsonDataToDataContext=function(e){if(!laya.hw.mini.HWMiniAdapter.isZiYu){var i=Tu.getRes(e);if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";t.window.hbs.postMessage({url:e,atlasdata:i,isLoad:"openJsondatacontext"})}},t.EnvConfig=null,t.window=null,t._preCreateElement=null,t._inited=!1,t.systemInfo=null,t.isZiYu=!1,t.isPosMsgYu=!1,t.autoCacheFile=!0,t.minClearSize=5242880,t.subNativeFiles=null,t.subNativeheads=[],t.subMaps=[],t.AutoCacheDownFile=!1,t._measureText=null,t.parseXMLFromString=function(t){var i;t=t.replace(/>\s+</g,"><");try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(n){throw"需要引入xml解析库文件"}return i},t.idx=1,n(t,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),t}(),Ds=function(){function e(){}o(e,"laya.mi.mini.MiniImage",null,"MiniImage$2");var t=e.prototype;return t._loadImage=function(t){var i=this;if(ks.isZiYu)return void e.onCreateImage(t,i,!0);var n=!1;if(Vs.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=Vs.loadPath)t=t.split(Vs.loadPath)[1];else{var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=t;""!=o&&(t=t.split(o)[1]),t||(t=s)}if(ks.subNativeFiles&&0==ks.subNativeheads.length)for(var r in ks.subNativeFiles){var a=ks.subNativeFiles[r];ks.subNativeheads=ks.subNativeheads.concat(a);for(var l=0;l<a.length;l++)ks.subMaps[a[l]]=r+"/"+a[l]}if(ks.subNativeFiles&&-1!=t.indexOf("/")){var c=t.split("/")[0]+"/";if(c&&-1!=ks.subNativeheads.indexOf(c)){var u=ks.subMaps[c];t=t.replace(c,u)}}}else n=!0,t=Cs.formatURL(t);Vs.getFileInfo(t)?e.onCreateImage(t,i,!n):-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?ks.isZiYu?e.onCreateImage(t,i,!0):Vs.downOtherFiles(t,new h(e,e.onDownImgCallBack,[t,i]),t):e.onCreateImage(t,i,!0)},e.onDownImgCallBack=function(t,i,n,o){void 0===o&&(o=""),n?i.onError(null):e.onCreateImage(t,i,!1,o)},e.onCreateImage=function(e,t,i,n){function o(){h.onload=null,h.onerror=null,delete t.imgCache[e]}void 0===i&&(i=!1),void 0===n&&(n="");var s;if(ks.autoCacheFile)if(i)if(ks.isZiYu){var r=Cs.formatURL(e);s=Vs.ziyuFileTextureData[r]?Vs.ziyuFileTextureData[r]:e}else s=e;else if(""!=n)s=n;else{var a=Vs.getFileInfo(e),l=a.md5;s=Vs.getFileNativePath(l)}else s=i?e:n;null==t.imgCache&&(t.imgCache={});var h,c=function(){console.log("====获取磁盘文件 onload ===thisLoader.url:"+t.url),o(),t.onLoaded(h)},u=function(e){console.log(e),console.log("====获取磁盘文件 onerror =====thisLoader.url:"+t.url),o(),t.event("error","Load image failed")};"nativeimage"==t._type?(h=new Or.window.Image,h.crossOrigin="",h.onload=c,h.onerror=u,h.src=s,t.imgCache[e]=h):new xw.create(s,{onload:c,onerror:u,onCreate:function(i){h=i,t.imgCache[e]=i}})},e}(),ks=function(){function t(){}return o(t,"laya.mi.mini.KGMiniAdapter"),t.getJson=function(e){return JSON.parse(e)},t.init=function(n,o){void 0===n&&(n=!1),void 0===o&&(o=!1),t._inited||(t._inited=!0,t.window=e,t.window.navigator.userAgent.indexOf("QuickGame")<0||(t.isZiYu=o,t.isPosMsgYu=n,t.EnvConfig={},t.isZiYu||(Vs.setNativeFileDir("/layaairGame"),Vs.existDir(Vs.fileNativeDir,h.create(t,t.onMkdirCallBack))),t.isZiYu||(t.systemInfo=laya.mi.mini.KGMiniAdapter.window.qg.getSystemInfoSync()),t.window.focus=function(){},i.getUrlPath=function(){},i._getUrlPath=function(){},t.window.logtime=function(e){},t.window.alertTimeLog=function(e){},t.window.resetShareInfo=function(){},t.EnvConfig.pixelRatioInt=0,a.getPixelRatio=t.pixelRatio,t._preCreateElement=Or.createElement,Or.createElement=t.createElement,a.createShaderCondition=t.createShaderCondition,Dr.parseXMLFromString=t.parseXMLFromString,fw._createInputElement=Bs._createInputElement,t.EnvConfig.load=Tu.prototype.load,Tu.prototype.load=Mu.prototype.load,Tu.prototype._loadImage=Ds.prototype._loadImage,t.onReciveData()))},t.onReciveData=function(){laya.mi.mini.KGMiniAdapter.isZiYu&&laya.mi.mini.KGMiniAdapter.window.qg.onMessage&&laya.mi.mini.KGMiniAdapter.window.qg.onMessage(function(e){"opendatacontext"==e.isLoad?e.url&&(Vs.ziyuFileData[e.url]=e.atlasdata,Vs.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl):"openJsondatacontext"==e.isLoad?e.url&&(Vs.ziyuFileData[e.url]=e.atlasdata):"openJsondatacontextPic"==e.isLoad&&(Vs.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl)})},t.measureText=function(e){var i=t._measureText(e);return i||(i={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),i},t.getUrlEncode=function(e,t){return"arraybuffer"==t?"":"utf8"},t.downLoadFile=function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n="utf8");var o=Vs.getFileInfo(e);o?null!=i&&i.runWith([0]):Vs.downLoadFile(e,t,i,n)},t.remove=function(e,t){Vs.deleteFile("",e,t,"",0)},t.removeAll=function(){Vs.deleteAll()},t.hasNativeFile=function(e){return Vs.isLocalNativeFile(e)},t.getFileInfo=function(e){return Vs.getFileInfo(e)},t.getFileList=function(){return Vs.filesListObj},t.exitMiniProgram=function(){laya.mi.mini.KGMiniAdapter.window.qg.exitMiniProgram()},t.onMkdirCallBack=function(e,t){e||(Vs.filesListObj=JSON.parse(t.data))},t.pixelRatio=function(){if(!t.EnvConfig.pixelRatioInt)try{return t.EnvConfig.pixelRatioInt=t.systemInfo.pixelRatio,t.systemInfo.pixelRatio}catch(e){}return t.EnvConfig.pixelRatioInt},t.createElement=function(e){if("canvas"==e){var i;return 1==t.idx?t.isZiYu?(i=t.window.document.createElement("canvas"),i.style={}):(i=t.window.document.getElementById("canvas"),i.style={width:i.width+"px",height:i.height+"px"}):i=t.window.document.createElement("canvas"),t.idx++,i}if("textarea"==e||"input"==e)return t.onCreateInput(e);if("div"==e){var n=t._preCreateElement(e);return n.contains=function(e){return null},n.removeChild=function(e){},n}return t._preCreateElement(e)},t.onCreateInput=function(e){var i=t._preCreateElement(e);return i.focus=Bs.wxinputFocus,i.blur=Bs.wxinputblur,i.style={},i.value=0,i.placeholder={},i.setColor=function(e){},i.setType=function(e){},i.setFontFace=function(e){},i.addEventListener=function(e){},i.contains=function(e){return null},i.removeChild=function(e){},i},t.createShaderCondition=function(e){var t=this,i=function(){return t[e.replace("this.","")]};return i},t.sendAtlasToOpenDataContext=function(e){if(!laya.mi.mini.KGMiniAdapter.isZiYu){var i=Tu.getRes(Cs.formatURL(e));if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";i.meta.image.split(",");if(i.meta&&i.meta.image)for(var n=i.meta.image.split(","),o=e.indexOf("/")>=0?"/":"\\",s=e.lastIndexOf(o),r=s>=0?e.substr(0,s+1):"",a=0,l=n.length;l>a;a++)n[a]=r+n[a];else n=[e.replace(".json",".png")];for(a=0;a<n.length;a++){var h=n[a];t.postInfoToContext(e,h,i)}}},t.postInfoToContext=function(e,t,i){var n={frames:i.frames,meta:i.meta},o=t,s=Vs.getFileInfo(Cs.formatURL(t));if(s)var r=s.md5,a=Vs.getFileNativePath(r);else a=o;if(!a)throw"获取图集的磁盘url路径不存在！";var l=laya.mi.mini.KGMiniAdapter.window.qg.getOpenDataContext();l.postMessage({url:e,atlasdata:n,imgNativeUrl:a,imgReadyUrl:o,isLoad:"opendatacontext"})},t.sendSinglePicToOpenDataContext=function(e){var t=Cs.formatURL(e),i=Vs.getFileInfo(t);if(i){var n=i.md5,o=Vs.getFileNativePath(n);e=t}else o=e;if(!o)throw"获取图集的磁盘url路径不存在！";laya.mi.mini.KGMiniAdapter.window.qg.postMessage({url:e,imgNativeUrl:o,imgReadyUrl:e,isLoad:"openJsondatacontextPic"})},t.sendJsonDataToDataContext=function(e){if(!laya.mi.mini.KGMiniAdapter.isZiYu){var t=Tu.getRes(e);if(!t)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";laya.mi.mini.KGMiniAdapter.window.qg.postMessage({url:e,atlasdata:t,isLoad:"openJsondatacontext"})}},t.EnvConfig=null,t.window=null,t._preCreateElement=null,t._inited=!1,t.systemInfo={},t.isZiYu=!1,t.isPosMsgYu=!1,t.autoCacheFile=!0,t.minClearSize=5242880,t.subNativeFiles=null,t.subNativeheads=[],t.subMaps=[],t.AutoCacheDownFile=!1,t._measureText=null,t.parseXMLFromString=function(t){var i;t=t.replace(/>\s+</g,"><");try{i=(new e.Parser.DOMParser).parseFromString(t,"text/xml")}catch(n){throw"需要引入xml解析库文件"}return i},t.idx=1,n(t,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),t}(),Bs=function(){function e(){}return o(e,"laya.mi.mini.MiniInput",null,"MiniInput$2"),e._createInputElement=function(){fw._initInput(fw.area=Or.createElement("textarea")),fw._initInput(fw.input=Or.createElement("input")),fw.inputContainer=Or.createElement("div"),fw.inputContainer.style.position="absolute",fw.inputContainer.style.zIndex=1e5,Or.container.appendChild(fw.inputContainer),fw.inputContainer.setPos=function(e,t){fw.inputContainer.style.left=e+"px",fw.inputContainer.style.top=t+"px"},i.stage.on("resize",null,e._onStageResize),ks.window.qg.onWindowResize&&ks.window.qg.onWindowResize(function(e){ks.window.dispatchEvent&&ks.window.dispatchEvent("resize")}),jh._soundClass=Du,jh._musicClass=Du;var t=ks.systemInfo.model,n=ks.systemInfo.system;t&&-1!=t.indexOf("iPhone")&&(Or.onIPhone=!0,Or.onIOS=!0,Or.onIPad=!0,Or.onAndroid=!1),!n||-1==n.indexOf("Android")&&-1==n.indexOf("Adr")||(Or.onAndroid=!0,Or.onIPhone=!1,Or.onIOS=!1,Or.onIPad=!1)},e._onStageResize=function(){var e=i.stage._canvasTransform.identity();e.scale(Or.width/Ns.canvas.width/a.getPixelRatio(),Or.height/Ns.canvas.height/a.getPixelRatio())},e.wxinputFocus=function(e){var t=fw.inputElement.target;t&&!t.editable||(ks.window.qg.offKeyboardConfirm(),ks.window.qg.offKeyboardInput(),ks.window.qg.showKeyboard({defaultValue:t.text,maxLength:t.maxChars,multiple:t.multiline,enterHold:!0,enterType:"done",success:function(e){},fail:function(e){}}),ks.window.qg.onKeyboardConfirm(function(e){var i=e?e.value:"";t._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),t._restrictPattern.test(i)&&(i=i.replace(t._restrictPattern,""))),t.text=i,t.event("input"),laya.mi.mini.MiniInput.inputEnter()}),ks.window.qg.onKeyboardInput(function(e){var i=e?e.value:"";return t.multiline||-1==i.indexOf("\n")?(t._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),t._restrictPattern.test(i)&&(i=i.replace(t._restrictPattern,""))),t.text=i,void t.event("input")):void laya.mi.mini.MiniInput.inputEnter()}))},e.inputEnter=function(){fw.inputElement.target.focus=!1},e.wxinputblur=function(){e.hideKeyboard()},e.hideKeyboard=function(){ks.window.qg.offKeyboardConfirm(),ks.window.qg.offKeyboardInput(),ks.window.qg.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})},e}(),Vs=function(){function e(){}return o(e,"laya.mi.mini.MiniFileMgr",null,"MiniFileMgr$2"),e.isLocalNativeFile=function(e){for(var t=0,i=ks.nativefiles.length;i>t;t++)if(-1!=e.indexOf(ks.nativefiles[t]))return!0;return!1},e.getFileInfo=function(t){var i=t,n=e.filesListObj[i];return null==n?null:n},e.read=function(t,i,n,o,s,r){void 0===i&&(i="ascill"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r="");var a;a=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:a,encoding:i,success:function(e){null!=n&&n.runWith([0,e])},fail:function(t){t&&""!=o?e.downFiles(o,i,n,o,s,r):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0);var l=e.wxdown({url:t,success:function(l){200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,s,r,a):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l])},fail:function(e){null!=n&&n.runWith([1,e])}});l.onProgressUpdate(function(e){null!=n&&n.runWith([2,e.progress])})},e.readFile=function(t,i,n,o,s,r,a){void 0===i&&(i="ascill"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0),e.fs.readFile({filePath:t,encoding:i,success:function(r){-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?(ks.autoCacheFile||s)&&e.copyFile(t,o,n,i,a):null!=n&&n.runWith([0,r])},fail:function(e){e&&null!=n&&n.runWith([1,e])}})},e.downOtherFiles=function(t,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===s&&(s=!0),console.log("====fileUrl:"+t),e.wxdown({url:t,success:function(t){console.log("===downOtherFiles success:"+JSON.stringify(t)),200===t.statusCode?(ks.autoCacheFile||o)&&-1==n.indexOf("qlogo.cn")&&-1==n.indexOf(".php")?e.copyFile(t.tempFilePath,n,i,"",s):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(e){console.log("===downOtherFiles fail data:"+JSON.stringify(e)),null!=i&&i.runWith([1,e])}})},e.downLoadFile=function(t,n,o,s){void 0===n&&(n=""),void 0===s&&(s="utf8"),"function"==typeof getApp==0?i.loader.load(t,o):"image"==n||"sound"==n?e.downOtherFiles(t,o,t,!0,!1):e.downFiles(t,s,o,t,!0,n,!1)},e.copyFile=function(t,i,n,o,s){void 0===o&&(o=""),void 0===s&&(s=!0);var r=t.split("/"),a=r[r.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(a),c=52428800,u=4194304,d=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>ks.minClearSize&&(ks.minClearSize=r.size),e.onClearCacheRes()),e.deleteFile(t,i,n,o,r.size)},fail:function(e){console.log("=1==getFileInfo fail data:"+JSON.stringify(e)),null!=n&&n.runWith([1,e])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>ks.minClearSize&&(ks.minClearSize=r.size),e.onClearCacheRes()),console.log("=====tempFilePath:"+t+"===saveFilePath:"+h),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,a,!0,o,n,r.size)},fail:function(e){console.log("===copyFile fail data:"+JSON.stringify(e)),null!=n&&n.runWith([1,e])}})},fail:function(e){console.log("=2==getFileInfo fail data:"+JSON.stringify(e)),null!=n&&n.runWith([1,e])}})},e.onClearCacheRes=function(){var t=ks.minClearSize,i=[];for(var n in e.filesListObj)"fileUsedSize"!=n&&i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,s=1,r=i.length;r>s;s++){var a=i[s];if(o>=t)break;o+=a.size,e.deleteFile("",a.readyUrl)}},e.sortOn=function(e,t,i){return void 0===i&&(i=0),16==i?e.sort(function(e,i){return e[t]-i[t]}):18==i?e.sort(function(e,i){return i[t]-e[t]}):e.sort(function(e,i){return e[t]-i[t]})},e.getFileNativePath=function(e){return laya.mi.mini.MiniFileMgr.fileNativeDir+"/"+e},e.deleteFile=function(t,i,n,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=0);var r=e.getFileInfo(i),a=e.getFileNativePath(r.md5);e.fs.unlink({filePath:a,success:function(r){var a=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(s){e.onSaveFile(i,t,a,o,n,s.size)},fail:function(e){null!=n&&n.runWith([1,e])}})}else e.onSaveFile(i,t,a,o,n,s)},fail:function(e){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)"fileUsedSize"!=i&&t.push(e.filesListObj[i]);for(var n=1,o=t.length;o>n;n++){var s=t[n];e.deleteFile("",s.readyUrl)}laya.mi.mini.MiniFileMgr.filesListObj&&laya.mi.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.mi.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.mi.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,s,r){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===r&&(r=0);var a=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[a]={md5:i,readyUrl:t,size:r,times:Or.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+r,e.writeFilesList(a,JSON.stringify(e.filesListObj),!0),null!=s&&s.runWith([0])}else if(e.filesListObj[a]){var l=parseInt(e.filesListObj[a].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-l,delete e.filesListObj[a],e.writeFilesList(a,JSON.stringify(e.filesListObj),!1),null!=s&&s.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(e){},fail:function(e){}}),!ks.isZiYu&&ks.isPosMsgYu&&wx.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(e){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,t])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="ascill"),void 0===o&&(o="");var s,r=e.getFileNativePath(t);try{s=e.fs.readFileSync(r,i),null!=n&&n.runWith([0,{data:s}])}catch(a){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=ks.window.qg.env.USER_DATA_PATH+t,console.log("fileNativeDir:"+e.fileNativeDir)},e.filesListObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=ks.window.qg.getFileSystemManager()},"wxdown",function(){return this.wxdown=ks.window.qg.downloadFile}]),e}(),Fs=function(){function e(){}return o(e,"laya.webgl.WebGLContext"),e.UseProgram=function(t){return e._useProgram===t?!1:(ur.mainContext.useProgram(t),e._useProgram=t,!0)},e.setDepthTest=function(t,i){i!==e._depthTest&&(e._depthTest=i,i?t.enable(2929):t.disable(2929))},e.setDepthMask=function(t,i){i!==e._depthMask&&(e._depthMask=i,t.depthMask(i))},e.setDepthFunc=function(t,i){i!==e._depthFunc&&(e._depthFunc=i,t.depthFunc(i))},e.setBlend=function(t,i){i!==e._blend&&(e._blend=i,i?t.enable(3042):t.disable(3042))},e.setBlendFunc=function(t,i,n){(i!==e._sFactor||n!==e._dFactor)&&(e._sFactor=i,e._dFactor=n,t.blendFunc(i,n))},e.setCullFace=function(t,i){i!==e._cullFace&&(e._cullFace=i,i?t.enable(2884):t.disable(2884))},e.setFrontFace=function(t,i){i!==e._frontFace&&(e._frontFace=i,t.frontFace(i))},e.bindTexture=function(t,i,n){t.bindTexture(i,n),e.curBindTexTarget=i,e.curBindTexValue=n},e.DEPTH_BUFFER_BIT=256,e.STENCIL_BUFFER_BIT=1024,e.COLOR_BUFFER_BIT=16384,e.POINTS=0,e.LINES=1,e.LINE_LOOP=2,e.LINE_STRIP=3,e.TRIANGLES=4,e.TRIANGLE_STRIP=5,e.TRIANGLE_FAN=6,e.ZERO=0,e.ONE=1,e.SRC_COLOR=768,e.ONE_MINUS_SRC_COLOR=769,e.SRC_ALPHA=770,e.ONE_MINUS_SRC_ALPHA=771,e.DST_ALPHA=772,e.ONE_MINUS_DST_ALPHA=773,e.DST_COLOR=774,e.ONE_MINUS_DST_COLOR=775,e.SRC_ALPHA_SATURATE=776,e.FUNC_ADD=32774,e.BLEND_EQUATION=32777,e.BLEND_EQUATION_RGB=32777,e.BLEND_EQUATION_ALPHA=34877,e.FUNC_SUBTRACT=32778,e.FUNC_REVERSE_SUBTRACT=32779,e.BLEND_DST_RGB=32968,e.BLEND_SRC_RGB=32969,e.BLEND_DST_ALPHA=32970,e.BLEND_SRC_ALPHA=32971,e.CONSTANT_COLOR=32769,e.ONE_MINUS_CONSTANT_COLOR=32770,e.CONSTANT_ALPHA=32771,e.ONE_MINUS_CONSTANT_ALPHA=32772,e.BLEND_COLOR=32773,e.ARRAY_BUFFER=34962,e.ELEMENT_ARRAY_BUFFER=34963,e.ARRAY_BUFFER_BINDING=34964,e.ELEMENT_ARRAY_BUFFER_BINDING=34965,e.STREAM_DRAW=35040,e.STATIC_DRAW=35044,e.DYNAMIC_DRAW=35048,e.BUFFER_SIZE=34660,e.BUFFER_USAGE=34661,e.CURRENT_VERTEX_ATTRIB=34342,e.FRONT=1028,e.BACK=1029,e.CULL_FACE=2884,e.FRONT_AND_BACK=1032,e.BLEND=3042,e.DITHER=3024,e.STENCIL_TEST=2960,e.DEPTH_TEST=2929,e.SCISSOR_TEST=3089,e.POLYGON_OFFSET_FILL=32823,e.SAMPLE_ALPHA_TO_COVERAGE=32926,e.SAMPLE_COVERAGE=32928,e.NO_ERROR=0,e.INVALID_ENUM=1280,e.INVALID_VALUE=1281,e.INVALID_OPERATION=1282,e.OUT_OF_MEMORY=1285,e.CW=2304,e.CCW=2305,e.LINE_WIDTH=2849,e.ALIASED_POINT_SIZE_RANGE=33901,e.ALIASED_LINE_WIDTH_RANGE=33902,e.CULL_FACE_MODE=2885,e.FRONT_FACE=2886,e.DEPTH_RANGE=2928,e.DEPTH_WRITEMASK=2930,e.DEPTH_CLEAR_VALUE=2931,e.DEPTH_FUNC=2932,e.STENCIL_CLEAR_VALUE=2961,e.STENCIL_FUNC=2962,e.STENCIL_FAIL=2964,e.STENCIL_PASS_DEPTH_FAIL=2965,e.STENCIL_PASS_DEPTH_PASS=2966,e.STENCIL_REF=2967,e.STENCIL_VALUE_MASK=2963,e.STENCIL_WRITEMASK=2968,e.STENCIL_BACK_FUNC=34816,e.STENCIL_BACK_FAIL=34817,e.STENCIL_BACK_PASS_DEPTH_FAIL=34818,e.STENCIL_BACK_PASS_DEPTH_PASS=34819,e.STENCIL_BACK_REF=36003,e.STENCIL_BACK_VALUE_MASK=36004,e.STENCIL_BACK_WRITEMASK=36005,e.VIEWPORT=2978,e.SCISSOR_BOX=3088,e.COLOR_CLEAR_VALUE=3106,e.COLOR_WRITEMASK=3107,e.UNPACK_ALIGNMENT=3317,e.PACK_ALIGNMENT=3333,e.MAX_TEXTURE_SIZE=3379,e.MAX_VIEWPORT_DIMS=3386,e.SUBPIXEL_BITS=3408,e.RED_BITS=3410,e.GREEN_BITS=3411,e.BLUE_BITS=3412,e.ALPHA_BITS=3413,e.DEPTH_BITS=3414,e.STENCIL_BITS=3415,e.POLYGON_OFFSET_UNITS=10752,e.POLYGON_OFFSET_FACTOR=32824,e.TEXTURE_BINDING_2D=32873,e.SAMPLE_BUFFERS=32936,e.SAMPLES=32937,e.SAMPLE_COVERAGE_VALUE=32938,e.SAMPLE_COVERAGE_INVERT=32939,e.NUM_COMPRESSED_TEXTURE_FORMATS=34466,e.COMPRESSED_TEXTURE_FORMATS=34467,e.DONT_CARE=4352,e.FASTEST=4353,e.NICEST=4354,e.GENERATE_MIPMAP_HINT=33170,e.BYTE=5120,e.UNSIGNED_BYTE=5121,e.SHORT=5122,e.UNSIGNED_SHORT=5123,e.INT=5124,e.UNSIGNED_INT=5125,e.FLOAT=5126,e.DEPTH_COMPONENT=6402,e.ALPHA=6406,e.RGB=6407,e.RGBA=6408,e.LUMINANCE=6409,e.LUMINANCE_ALPHA=6410,e.UNSIGNED_SHORT_4_4_4_4=32819,e.UNSIGNED_SHORT_5_5_5_1=32820,e.UNSIGNED_SHORT_5_6_5=33635,e.FRAGMENT_SHADER=35632,e.VERTEX_SHADER=35633,e.MAX_VERTEX_ATTRIBS=34921,e.MAX_VERTEX_UNIFORM_VECTORS=36347,e.MAX_VARYING_VECTORS=36348,e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,e.MAX_TEXTURE_IMAGE_UNITS=34930,e.MAX_FRAGMENT_UNIFORM_VECTORS=36349,e.SHADER_TYPE=35663,e.DELETE_STATUS=35712,e.LINK_STATUS=35714,e.VALIDATE_STATUS=35715,e.ATTACHED_SHADERS=35717,e.ACTIVE_UNIFORMS=35718,e.ACTIVE_ATTRIBUTES=35721,e.SHADING_LANGUAGE_VERSION=35724,e.CURRENT_PROGRAM=35725,e.NEVER=512,e.LESS=513,e.EQUAL=514,e.LEQUAL=515,e.GREATER=516,e.NOTEQUAL=517,e.GEQUAL=518,e.ALWAYS=519,e.KEEP=7680,e.REPLACE=7681,e.INCR=7682,e.DECR=7683,e.INVERT=5386,e.INCR_WRAP=34055,e.DECR_WRAP=34056,e.VENDOR=7936,e.RENDERER=7937,e.VERSION=7938,e.NEAREST=9728,e.LINEAR=9729,e.NEAREST_MIPMAP_NEAREST=9984,e.LINEAR_MIPMAP_NEAREST=9985,e.NEAREST_MIPMAP_LINEAR=9986,e.LINEAR_MIPMAP_LINEAR=9987,e.TEXTURE_MAG_FILTER=10240,e.TEXTURE_MIN_FILTER=10241,e.TEXTURE_WRAP_S=10242,e.TEXTURE_WRAP_T=10243,e.TEXTURE_2D=3553,e.TEXTURE=5890,e.TEXTURE_CUBE_MAP=34067,e.TEXTURE_BINDING_CUBE_MAP=34068,e.TEXTURE_CUBE_MAP_POSITIVE_X=34069,e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,e.MAX_CUBE_MAP_TEXTURE_SIZE=34076,e.TEXTURE0=33984,e.TEXTURE1=33985,e.TEXTURE2=33986,e.TEXTURE3=33987,e.TEXTURE4=33988,e.TEXTURE5=33989,e.TEXTURE6=33990,e.TEXTURE7=33991,e.TEXTURE8=33992,e.TEXTURE9=33993,e.TEXTURE10=33994,e.TEXTURE11=33995,e.TEXTURE12=33996,e.TEXTURE13=33997,e.TEXTURE14=33998,e.TEXTURE15=33999,e.TEXTURE16=34e3,e.TEXTURE17=34001,e.TEXTURE18=34002,e.TEXTURE19=34003,e.TEXTURE20=34004,e.TEXTURE21=34005,e.TEXTURE22=34006,e.TEXTURE23=34007,e.TEXTURE24=34008,e.TEXTURE25=34009,e.TEXTURE26=34010,e.TEXTURE27=34011,e.TEXTURE28=34012,e.TEXTURE29=34013,e.TEXTURE30=34014,e.TEXTURE31=34015,e.ACTIVE_TEXTURE=34016,e.REPEAT=10497,e.CLAMP_TO_EDGE=33071,e.MIRRORED_REPEAT=33648,e.FLOAT_VEC2=35664,e.FLOAT_VEC3=35665,e.FLOAT_VEC4=35666,e.INT_VEC2=35667,e.INT_VEC3=35668,e.INT_VEC4=35669,e.BOOL=35670,e.BOOL_VEC2=35671,e.BOOL_VEC3=35672,e.BOOL_VEC4=35673,e.FLOAT_MAT2=35674,e.FLOAT_MAT3=35675,e.FLOAT_MAT4=35676,e.SAMPLER_2D=35678,e.SAMPLER_CUBE=35680,e.VERTEX_ATTRIB_ARRAY_ENABLED=34338,e.VERTEX_ATTRIB_ARRAY_SIZE=34339,e.VERTEX_ATTRIB_ARRAY_STRIDE=34340,e.VERTEX_ATTRIB_ARRAY_TYPE=34341,
e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,e.VERTEX_ATTRIB_ARRAY_POINTER=34373,e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,e.COMPILE_STATUS=35713,e.LOW_FLOAT=36336,e.MEDIUM_FLOAT=36337,e.HIGH_FLOAT=36338,e.LOW_INT=36339,e.MEDIUM_INT=36340,e.HIGH_INT=36341,e.FRAMEBUFFER=36160,e.RENDERBUFFER=36161,e.RGBA4=32854,e.RGB5_A1=32855,e.RGB565=36194,e.DEPTH_COMPONENT16=33189,e.STENCIL_INDEX=6401,e.STENCIL_INDEX8=36168,e.DEPTH_STENCIL=34041,e.RENDERBUFFER_WIDTH=36162,e.RENDERBUFFER_HEIGHT=36163,e.RENDERBUFFER_INTERNAL_FORMAT=36164,e.RENDERBUFFER_RED_SIZE=36176,e.RENDERBUFFER_GREEN_SIZE=36177,e.RENDERBUFFER_BLUE_SIZE=36178,e.RENDERBUFFER_ALPHA_SIZE=36179,e.RENDERBUFFER_DEPTH_SIZE=36180,e.RENDERBUFFER_STENCIL_SIZE=36181,e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,e.COLOR_ATTACHMENT0=36064,e.DEPTH_ATTACHMENT=36096,e.STENCIL_ATTACHMENT=36128,e.DEPTH_STENCIL_ATTACHMENT=33306,e.NONE=0,e.FRAMEBUFFER_COMPLETE=36053,e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,e.FRAMEBUFFER_UNSUPPORTED=36061,e.FRAMEBUFFER_BINDING=36006,e.RENDERBUFFER_BINDING=36007,e.MAX_RENDERBUFFER_SIZE=34024,e.INVALID_FRAMEBUFFER_OPERATION=1286,e.UNPACK_FLIP_Y_WEBGL=37440,e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,e.CONTEXT_LOST_WEBGL=37442,e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,e.BROWSER_DEFAULT_WEBGL=37444,e._useProgram=null,e._depthTest=!0,e._depthMask=!0,e._depthFunc=513,e._blend=!1,e._sFactor=1,e._dFactor=0,e._cullFace=!1,e._frontFace=2305,e.curBindTexTarget=null,e.curBindTexValue=null,e}(),Gs=function(){function e(){this.fun=null,this.args=null}o(e,"laya.webgl.submit.SubmitCMD");var t=e.prototype;return i.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.renderSubmit=function(){return this.fun.apply(null,this.args),1},t.getRenderType=function(){return 0},t.releaseRender=function(){var t=e._cache;t[t._length++]=this},e.create=function(t,i){var n=e._cache._length?e._cache[--e._cache._length]:new e;return n.fun=i,n.args=t,n},e._cache=(e._cache=[],e._cache._length=0,e._cache),e}(),Hs=function(){function e(){this.offset=0,this.startIndex=0,this._mat=Ph.create()}o(e,"laya.webgl.submit.SubmitOtherIBVB");var t=e.prototype;return i.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.releaseRender=function(){var t=e._cache;t[t._length++]=this},t.getRenderType=function(){return 10009},t.renderSubmit=function(){var t=this._shaderValue.textureHost;if(t){var i=t.source;if(!t.bitmap||!i)return 1;this._shaderValue.texture=i}this._vb.bind_upload(this._ib);var n=Js.worldMatrix4,o=Ph.TEMP;Ph.mulPre(this._mat,n[0],n[1],n[4],n[5],n[12],n[13],o);var s=Js.worldMatrix4=e.tempMatrix4;s[0]=o.a,s[1]=o.b,s[4]=o.c,s[5]=o.d,s[12]=o.tx,s[13]=o.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var r=ur.mainContext;return nr.activeBlendFunction!==this._blendFn&&(r.enable(3042),this._blendFn(r),nr.activeBlendFunction=this._blendFn),Nr.drawCall++,Nr.trianglesFaces+=this._numEle/3,r.drawElements(4,this._numEle,5123,this.startIndex),Js.worldMatrix4=n,_x.activeShader=null,1},e.create=function(t,i,n,o,s,r,a,l,h){void 0===h&&(h=0);var c=e._cache._length?e._cache[--e._cache._length]:new e;c._ib=n,c._vb=i,c._numEle=o,c._shader=s,c._shaderValue=r;var u=t._nBlendType;switch(c._blendFn=t._targets?nr.targetFns[u]:nr.fns[u],h){case 0:c.offset=0,c.startIndex=l/(Zs.BYTES_PE*i.vertexStride)*1.5,c.startIndex*=Zs.BYTES_PIDX;break;case 1:c.startIndex=a,c.offset=l}return c},e._cache=(e._cache=[],e._cache._length=0,e._cache),e.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e}(),Us=function(){function e(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new Ch,this.screenRect=new Ch}o(e,"laya.webgl.submit.SubmitScissor");var t=e.prototype;return i.imps(t,{"laya.webgl.submit.ISubmit":!0}),t._scissor=function(e,t,i,n){var o=Js.worldMatrix4,s=o[0],r=o[5],a=o[12],l=o[13];if(e=e*s+a,t=t*r+l,i*=s,n*=r,1>i||1>n)return!1;var h=e+i,c=t+n;0>e&&(e=0,i=h-e),0>t&&(t=0,n=c-t);var u=Js.worldClipRect;if(e=Math.max(e,u.x),t=Math.max(t,u.y),i=Math.min(h,u.right)-e,n=Math.min(c,u.bottom)-t,1>i||1>n)return!1;var d=Js.worldScissorTest;return this.screenRect.copyFrom(u),u.x=e,u.y=t,u.width=i,u.height=n,Js.worldScissorTest=!0,t=Js.height-t-n,ur.mainContext.scissor(e,t,i,n),ur.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),d?(t=Js.height-this.screenRect.y-this.screenRect.height,ur.mainContext.scissor(this.screenRect.x,t,this.screenRect.width,this.screenRect.height),ur.mainContext.enable(3089)):(ur.mainContext.disable(3089),Js.worldScissorTest=!1),u.copyFrom(this.screenRect),!0},t._scissorWithTagart=function(e,t,i,n){if(1>i||1>n)return!1;var o=e+i,s=t+n;0>e&&(e=0,i=o-e),0>t&&(t=0,n=s-t);var r=Js.worldClipRect;if(e=Math.max(e,r.x),t=Math.max(t,r.y),i=Math.min(o,r.right)-e,n=Math.min(s,r.bottom)-t,1>i||1>n)return!1;var a=Js.worldScissorTest;return this.screenRect.copyFrom(r),Js.worldScissorTest=!0,r.x=e,r.y=t,r.width=i,r.height=n,t=Js.height-t-n,ur.mainContext.scissor(e,t,i,n),ur.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),a?(t=Js.height-this.screenRect.y-this.screenRect.height,ur.mainContext.scissor(this.screenRect.x,t,this.screenRect.width,this.screenRect.height),ur.mainContext.enable(3089)):(ur.mainContext.disable(3089),Js.worldScissorTest=!1),r.copyFrom(this.screenRect),!0},t.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1?this.submitLength+1:(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height),this.submitLength+1)},t.getRenderType=function(){return 0},t.releaseRender=function(){var t=e._cache;t[t._length++]=this,this.context=null},e.create=function(t){var i=e._cache._length?e._cache[--e._cache._length]:new e;return i.context=t,i},e._cache=(e._cache=[],e._cache._length=0,e._cache),e}(),zs=function(){function e(){this.step=0,this.blendMode=null,this.level=0}o(e,"laya.webgl.submit.SubmitStencil");var t=e.prototype;return i.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},t.getRenderType=function(){return 0},t.releaseRender=function(){var t=e._cache;t[t._length++]=this},t.do1=function(){var e=ur.mainContext;e.enable(2960),e.clear(1024),e.colorMask(!1,!1,!1,!1),e.stencilFunc(514,this.level,255),e.stencilOp(7680,7680,7682)},t.do2=function(){var e=ur.mainContext;e.stencilFunc(514,this.level+1,255),e.colorMask(!0,!0,!0,!0),e.stencilOp(7680,7680,7680)},t.do3=function(){var e=ur.mainContext;e.colorMask(!0,!0,!0,!0),e.stencilOp(7680,7680,7680),e.clear(1024),e.disable(2960)},t.do4=function(){var e=ur.mainContext;0==this.level&&(e.enable(2960),e.clear(1024)),e.colorMask(!1,!1,!1,!1),e.stencilFunc(519,0,255),e.stencilOp(7680,7680,7682)},t.do5=function(){var e=ur.mainContext;e.stencilFunc(514,this.level,255),e.colorMask(!0,!0,!0,!0),e.stencilOp(7680,7680,7680)},t.do6=function(){var e=ur.mainContext;nr.targetFns[nr.TOINT[this.blendMode]](e)},t.do7=function(){var e=ur.mainContext;e.colorMask(!1,!1,!1,!1),e.stencilOp(7680,7680,7683)},t.do8=function(){var e=ur.mainContext;e.colorMask(!0,!0,!0,!0),e.stencilFunc(514,this.level,255),e.stencilOp(7680,7680,7680)},e.restore=function(t,i,n,o,s){var r;if(t._renderKey=0,e._mask>0&&e._mask--,0==e._mask)r=laya.webgl.submit.SubmitStencil.create(3),t.addRenderObject(r),t._curSubmit=Ys.RENDERBASE;else{r=laya.webgl.submit.SubmitStencil.create(7),t.addRenderObject(r);var a=t._vb;a._byteLength>>2;if(er.fillRectImgVb(a,null,i.x,i.y,i.width,i.height,Vu.DEF_UV,n,o,s,0,0)){var l=t._shader2D;l.glTexture=null;var h=t._curSubmit=Ys.createSubmit(t,t._ib,a,(a._byteLength-64)/32*3,wd.create(2,0));h.shaderValue.ALPHA=1,t._submits[t._submits._length++]=h,t._curSubmit._numEle+=6,t._curSubmit=Ys.RENDERBASE}else alert("clipRect calc stencil rect error");r=laya.webgl.submit.SubmitStencil.create(8),t.addRenderObject(r)}},e.restore2=function(t,i){var n;t._renderKey=0,e._mask>0&&e._mask--,0==e._mask?(n=laya.webgl.submit.SubmitStencil.create(3),t.addRenderObject(n),t._curSubmit=Ys.RENDERBASE):(n=laya.webgl.submit.SubmitStencil.create(7),t.addRenderObject(n),t._submits[t._submits._length++]=i,n=laya.webgl.submit.SubmitStencil.create(8),t.addRenderObject(n))},e.create=function(t){var i=e._cache._length?e._cache[--e._cache._length]:new e;return i.step=t,5==t&&++e._mask,i.level=e._mask,i},e._cache=(e._cache=[],e._cache._length=0,e._cache),e._mask=0,e}(),Ws=function(){function e(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}o(e,"laya.webgl.submit.SubmitTarget");var t=e.prototype;return i.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.renderSubmit=function(){this._vb.bind_upload(this._ib);var e=this.scope.getValue(this.proName);return e&&(this.shaderValue.texture=e.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[e.width,e.height]),this.shaderValue.upload(),this.blend(),Nr.drawCall++,Nr.trianglesFaces+=this._numEle/3,ur.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},t.blend=function(){if(nr.activeBlendFunction!==nr.fns[this.blendType]){var e=ur.mainContext;e.enable(3042),nr.fns[this.blendType](e),nr.activeBlendFunction=nr.fns[this.blendType]}},t.getRenderType=function(){return 0},t.releaseRender=function(){var t=e._cache;t[t._length++]=this},e.create=function(t,i,n,o,s,r){var a=e._cache._length?e._cache[--e._cache._length]:new e;return a._ib=i,a._vb=n,a.proName=r,a._startIdx=o*Zs.BYTES_PIDX,a._numEle=0,a.blendType=t._nBlendType,a.shaderValue=s,a.shaderValue.setValue(t._shader2D),a},e._cache=(e._cache=[],e._cache._length=0,e._cache),e}(),Ys=function(){function e(e){void 0===e&&(e=1e4),this._renderType=e}o(e,"laya.webgl.submit.Submit");var t=e.prototype;return i.imps(t,{"laya.webgl.submit.ISubmit":!0}),t.releaseRender=function(){var t=e._cache;t[t._length++]=this,this.shaderValue.release(),this._vb=null},t.getRenderType=function(){return this._renderType},t.renderSubmit=function(){if(0===this._numEle)return 1;var e=this.shaderValue.textureHost;if(e){var t=e.source;if(!e.bitmap||!t)return 1;this.shaderValue.texture=t}this._vb.bind_upload(this._ib);var i=ur.mainContext;return this.shaderValue.upload(),nr.activeBlendFunction!==this._blendFn&&(i.enable(3042),this._blendFn(i),nr.activeBlendFunction=this._blendFn),Nr.drawCall++,Nr.trianglesFaces+=this._numEle/3,i.drawElements(4,this._numEle,5123,this._startIdx),1},e.__init__=function(){var t=e.RENDERBASE=new e(-1);t.shaderValue=new wd(0,0),t.shaderValue.ALPHA=-1234},e.createSubmit=function(t,i,n,o,s){var r=e._cache._length?e._cache[--e._cache._length]:new e;null==n&&(n=r._selfVb||(r._selfVb=yw.create(-1)),n.clear(),o=0),r._ib=i,r._vb=n,r._startIdx=o*Zs.BYTES_PIDX,r._numEle=0;var a=t._nBlendType;r._blendFn=t._targets?nr.targetFns[a]:nr.fns[a],r.shaderValue=s,r.shaderValue.setValue(t._shader2D);var l=t._shader2D.filters;return l&&r.shaderValue.setFilters(l),r},e.createShape=function(t,i,n,o,s,r){var a=e._cache._length?e._cache[--e._cache._length]:new e;a._ib=i,a._vb=n,a._numEle=o,a._startIdx=s,a.shaderValue=r,a.shaderValue.setValue(t._shader2D);var l=t._nBlendType;return a._blendFn=t._targets?nr.targetFns[l]:nr.fns[l],a},e.TYPE_2D=1e4,e.TYPE_CANVAS=10003,e.TYPE_CMDSETRT=10004,e.TYPE_CUSTOM=10005,e.TYPE_BLURRT=10006,e.TYPE_CMDDESTORYPRERT=10007,e.TYPE_DISABLESTENCIL=10008,e.TYPE_OTHERIBVB=10009,e.TYPE_PRIMITIVE=10010,e.TYPE_RT=10011,e.TYPE_BLUR_RT=10012,e.TYPE_TARGET=10013,e.TYPE_CHANGE_VALUE=10014,e.TYPE_SHAPE=10015,e.TYPE_TEXTURE=10016,e.TYPE_FILLTEXTURE=10017,e.RENDERBASE=null,e._cache=(e._cache=[],e._cache._length=0,e._cache),e}(),qs=function(){function e(){this.variables={}}o(e,"laya.webgl.submit.SubmitCMDScope");var t=e.prototype;return t.getValue=function(e){return this.variables[e]},t.addValue=function(e,t){return this.variables[e]=t},t.setValue=function(e,t){return this.variables.hasOwnProperty(e)?this.variables[e]=t:null},t.clear=function(){for(var e in this.variables)delete this.variables[e]},t.recycle=function(){this.clear(),e.POOL.push(this)},e.create=function(){var t=e.POOL.pop();return t||(t=new e),t},e.POOL=[],e}(),Ks=function(){function e(e,t,i,n,o,s,r,a,l){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===l&&(l=0),this.x=e,this.y=t,this.width=i,this.height=n,this.edges=o,this.color=s,this.borderWidth=r,this.borderColor=a}o(e,"laya.webgl.shapes.BasePoly");var t=e.prototype;return i.imps(t,{"laya.webgl.shapes.IShape":!0}),t.getData=function(e,t,i){},t.rebuild=function(e){},t.setMatrix=function(e){},t.needUpdate=function(e){return!0},t.sector=function(e,t,i){var n=this.x,o=this.y,s=this.edges,r=(this.r1-this.r0)/s,a=this.width,l=this.height,h=this.color,c=(h>>16&255)/255,u=(h>>8&255)/255,d=(255&h)/255;e.push(n,o,c,u,d);for(var p=0;s+1>p;p++)e.push(n+Math.sin(r*p+this.r0)*a,o+Math.cos(r*p+this.r0)*l),e.push(c,u,d);for(p=0;s>p;p++)t.push(i,i+p+1,i+p+2)},t.createLine2=function(e,t,i,n,o,s){var r,a,l,h,c,u,d,p,f,_,m,g,v,y,b,E,x,S,w,C,T,I=e.concat(),A=o,N=this.borderColor,P=(N>>16&255)/255,R=(N>>8&255)/255,L=(255&N)/255,O=I.length/2,M=n,D=i/2;l=I[0],h=I[1],c=I[2],u=I[3],f=-(h-u),_=l-c,T=Math.sqrt(f*f+_*_),f=f/T*D,_=_/T*D,A.push(l-f+this.x,h-_+this.y,P,R,L,l+f+this.x,h+_+this.y,P,R,L);for(var k=1;O-1>k;k++)l=I[2*(k-1)],h=I[2*(k-1)+1],c=I[2*k],u=I[2*k+1],d=I[2*(k+1)],p=I[2*(k+1)+1],f=-(h-u),_=l-c,T=Math.sqrt(f*f+_*_),f=f/T*D,_=_/T*D,m=-(u-p),g=c-d,T=Math.sqrt(m*m+g*g),m=m/T*D,g=g/T*D,v=-_+h-(-_+u),y=-f+c-(-f+l),b=(-f+l)*(-_+u)-(-f+c)*(-_+h),E=-g+p-(-g+u),x=-m+c-(-m+d),S=(-m+d)*(-g+u)-(-m+c)*(-g+p),w=v*x-E*y,Math.abs(w)<.1?(w+=10.1,A.push(c-f+this.x,u-_+this.y,P,R,L,c+f+this.x,u+_+this.y,P,R,L)):(r=(y*S-x*b)/w,a=(E*b-v*S)/w,C=(r-c)*(r-c)+(a-u)+(a-u),A.push(r+this.x,a+this.y,P,R,L,c-(r-c)+this.x,u-(a-u)+this.y,P,R,L));l=I[I.length-4],h=I[I.length-3],c=I[I.length-2],u=I[I.length-1],f=-(h-u),_=l-c,T=Math.sqrt(f*f+_*_),f=f/T*D,_=_/T*D,A.push(c-f+this.x,u-_+this.y,P,R,L,c+f+this.x,u+_+this.y,P,R,L);var B=s;for(k=1;B>k;k++)t.push(M+2*(k-1),M+2*(k-1)+1,M+2*k+1,M+2*k+1,M+2*k,M+2*(k-1));return A},t.createLine=function(e,t,i,n){var o=e.concat(),s=e,r=this.borderColor,a=(r>>16&255)/255,l=(r>>8&255)/255,h=(255&r)/255;o.splice(0,5);var c,u,d,p,f,_,m,g,v,y,b,E,x,S,w,C,T,I,A,N,P,R=o.length/5,L=n,O=i/2;d=o[0],p=o[1],f=o[5],_=o[6],v=-(p-_),y=d-f,P=Math.sqrt(v*v+y*y),v=v/P*O,y=y/P*O,s.push(d-v,p-y,a,l,h,d+v,p+y,a,l,h);for(var M=1;R-1>M;M++)d=o[5*(M-1)],p=o[5*(M-1)+1],f=o[5*M],_=o[5*M+1],m=o[5*(M+1)],g=o[5*(M+1)+1],v=-(p-_),y=d-f,P=Math.sqrt(v*v+y*y),v=v/P*O,y=y/P*O,b=-(_-g),E=f-m,P=Math.sqrt(b*b+E*E),b=b/P*O,E=E/P*O,x=-y+p-(-y+_),S=-v+f-(-v+d),w=(-v+d)*(-y+_)-(-v+f)*(-y+p),C=-E+g-(-E+_),T=-b+f-(-b+m),I=(-b+m)*(-E+_)-(-b+f)*(-E+g),A=x*T-C*S,Math.abs(A)<.1?(A+=10.1,s.push(f-v,_-y,a,l,h,f+v,_+y,a,l,h)):(c=(S*I-T*w)/A,u=(C*w-x*I)/A,N=(c-f)*(c-f)+(u-_)+(u-_),s.push(c,u,a,l,h,f-(c-f),_-(u-_),a,l,h));d=o[o.length-10],p=o[o.length-9],f=o[o.length-5],_=o[o.length-4],v=-(p-_),y=d-f,P=Math.sqrt(v*v+y*y),v=v/P*O,y=y/P*O,s.push(f-v,_-y,a,l,h,f+v,_+y,a,l,h);var D=this.edges+1;for(M=1;D>M;M++)t.push(L+2*(M-1),L+2*(M-1)+1,L+2*M+1,L+2*M+1,L+2*M,L+2*(M-1));return s},t.createLoopLine=function(e,t,i,n,o,s){var r=e.concat(),a=o?o:e,l=this.borderColor,h=(l>>16&255)/255,c=(l>>8&255)/255,u=(255&l)/255;r.splice(0,5);var d=[r[0],r[1]],p=[r[r.length-5],r[r.length-4]],f=p[0]+.5*(d[0]-p[0]),_=p[1]+.5*(d[1]-p[1]);r.unshift(f,_,0,0,0),r.push(f,_,0,0,0);var m,g,v,y,b,E,x,S,w,C,T,I,A,N,P,R,L,O,M,D,k,B=r.length/5,V=n,F=i/2;v=r[0],y=r[1],b=r[5],E=r[6],w=-(y-E),C=v-b,k=Math.sqrt(w*w+C*C),w=w/k*F,C=C/k*F,a.push(v-w,y-C,h,c,u,v+w,y+C,h,c,u);for(var G=1;B-1>G;G++)v=r[5*(G-1)],y=r[5*(G-1)+1],b=r[5*G],E=r[5*G+1],x=r[5*(G+1)],S=r[5*(G+1)+1],w=-(y-E),C=v-b,k=Math.sqrt(w*w+C*C),w=w/k*F,C=C/k*F,T=-(E-S),I=b-x,k=Math.sqrt(T*T+I*I),T=T/k*F,I=I/k*F,A=-C+y-(-C+E),N=-w+b-(-w+v),P=(-w+v)*(-C+E)-(-w+b)*(-C+y),R=-I+S-(-I+E),L=-T+b-(-T+x),O=(-T+x)*(-I+E)-(-T+b)*(-I+S),M=A*L-R*N,Math.abs(M)<.1?(M+=10.1,a.push(b-w,E-C,h,c,u,b+w,E+C,h,c,u)):(m=(N*O-L*P)/M,g=(R*P-A*O)/M,D=(m-b)*(m-b)+(g-E)+(g-E),a.push(m,g,h,c,u,b-(m-b),E-(g-E),h,c,u));s&&(t=s);var H=this.edges+1;for(G=1;H>G;G++)t.push(V+2*(G-1),V+2*(G-1)+1,V+2*G+1,V+2*G+1,V+2*G,V+2*(G-1));return t.push(V+2*(G-1),V+2*(G-1)+1,V+1,V+1,V,V+2*(G-1)),a},e}(),Xs=function(){function e(){}return o(e,"laya.webgl.shapes.Earcut"),e.earcut=function(t,i,n){n=n||2;var o=i&&i.length,s=o?i[0]*n:t.length,r=e.linkedList(t,0,s,n,!0),a=[];if(!r)return a;var l,h,c,u,d,p,f;if(o&&(r=e.eliminateHoles(t,i,r,n)),t.length>80*n){l=c=t[0],h=u=t[1];for(var _=n;s>_;_+=n)d=t[_],p=t[_+1],l>d&&(l=d),h>p&&(h=p),d>c&&(c=d),p>u&&(u=p);f=Math.max(c-l,u-h),f=0!==f?1/f:0}return e.earcutLinked(r,a,n,l,h,f),a},e.linkedList=function(t,i,n,o,s){var r,a;if(s===e.signedArea(t,i,n,o)>0)for(r=i;n>r;r+=o)a=e.insertNode(r,t[r],t[r+1],a);else for(r=n-o;r>=i;r-=o)a=e.insertNode(r,t[r],t[r+1],a);return a&&e.equals(a,a.next)&&(e.removeNode(a),a=a.next),a},e.filterPoints=function(t,i){if(!t)return t;i||(i=t);var n,o=t;do if(n=!1,o.steiner||!e.equals(o,o.next)&&0!==e.area(o.prev,o,o.next))o=o.next;else{if(e.removeNode(o),o=i=o.prev,o===o.next)break;n=!0}while(n||o!==i);return i},e.earcutLinked=function(t,i,n,o,s,r,a){if(t){!a&&r&&e.indexCurve(t,o,s,r);for(var l,h,c=t;t.prev!==t.next;)if(l=t.prev,h=t.next,r?e.isEarHashed(t,o,s,r):e.isEar(t))i.push(l.i/n),i.push(t.i/n),i.push(h.i/n),e.removeNode(t),t=h.next,c=h.next;else if(t=h,t===c){a?1===a?(t=e.cureLocalIntersections(t,i,n),e.earcutLinked(t,i,n,o,s,r,2)):2===a&&e.splitEarcut(t,i,n,o,s,r):e.earcutLinked(e.filterPoints(t,null),i,n,o,s,r,1);break}}},e.isEar=function(t){var i=t.prev,n=t,o=t.next;if(e.area(i,n,o)>=0)return!1;for(var s=t.next.next;s!==t.prev;){if(e.pointInTriangle(i.x,i.y,n.x,n.y,o.x,o.y,s.x,s.y)&&e.area(s.prev,s,s.next)>=0)return!1;s=s.next}return!0},e.isEarHashed=function(t,i,n,o){var s=t.prev,r=t,a=t.next;if(e.area(s,r,a)>=0)return!1;for(var l=s.x<r.x?s.x<a.x?s.x:a.x:r.x<a.x?r.x:a.x,h=s.y<r.y?s.y<a.y?s.y:a.y:r.y<a.y?r.y:a.y,c=s.x>r.x?s.x>a.x?s.x:a.x:r.x>a.x?r.x:a.x,u=s.y>r.y?s.y>a.y?s.y:a.y:r.y>a.y?r.y:a.y,d=e.zOrder(l,h,i,n,o),p=e.zOrder(c,u,i,n,o),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&e.pointInTriangle(s.x,s.y,r.x,r.y,a.x,a.y,f.x,f.y)&&e.area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=d;){if(f!==t.prev&&f!==t.next&&e.pointInTriangle(s.x,s.y,r.x,r.y,a.x,a.y,f.x,f.y)&&e.area(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0},e.cureLocalIntersections=function(t,i,n){var o=t;do{var s=o.prev,r=o.next.next;!e.equals(s,r)&&e.intersects(s,o,o.next,r)&&e.locallyInside(s,r)&&e.locallyInside(r,s)&&(i.push(s.i/n),i.push(o.i/n),i.push(r.i/n),e.removeNode(o),e.removeNode(o.next),o=t=r),o=o.next}while(o!==t);return o},e.splitEarcut=function(t,i,n,o,s,r){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&e.isValidDiagonal(a,l)){var h=e.splitPolygon(a,l);return a=e.filterPoints(a,a.next),h=e.filterPoints(h,h.next),e.earcutLinked(a,i,n,o,s,r),void e.earcutLinked(h,i,n,o,s,r)}l=l.next}a=a.next}while(a!==t)},e.eliminateHoles=function(t,i,n,o){var s,r,a,l,h,c=[];for(s=0,r=i.length;r>s;s++)a=i[s]*o,l=r-1>s?i[s+1]*o:t.length,h=e.linkedList(t,a,l,o,!1),h===h.next&&(h.steiner=!0),c.push(e.getLeftmost(h));for(c.sort(e.compareX),s=0;s<c.length;s++)e.eliminateHole(c[s],n),n=e.filterPoints(n,n.next);return n},e.compareX=function(e,t){return e.x-t.x},e.eliminateHole=function(t,i){if(i=e.findHoleBridge(t,i)){var n=e.splitPolygon(i,t);e.filterPoints(n,n.next)}},e.findHoleBridge=function(t,i){var n,o=i,s=t.x,r=t.y,a=-(1/0);do{if(r<=o.y&&r>=o.next.y&&o.next.y!==o.y){var l=o.x+(r-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(s>=l&&l>a){if(a=l,l===s){if(r===o.y)return o;if(r===o.next.y)return o.next}n=o.x<o.next.x?o:o.next}}o=o.next}while(o!==i);if(!n)return null;if(s===a)return n.prev;var h,c=n,u=n.x,d=n.y,p=1/0;for(o=n.next;o!==c;)s>=o.x&&o.x>=u&&s!==o.x&&e.pointInTriangle(d>r?s:a,r,u,d,d>r?a:s,r,o.x,o.y)&&(h=Math.abs(r-o.y)/(s-o.x),(p>h||h===p&&o.x>n.x)&&e.locallyInside(o,t)&&(n=o,p=h)),o=o.next;return n},e.indexCurve=function(t,i,n,o){var s=t;do null===s.z&&(s.z=e.zOrder(s.x,s.y,i,n,o)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,e.sortLinked(s)},e.sortLinked=function(e){var t,i,n,o,s,r,a,l,h=1;do{for(i=e,e=null,s=null,r=0;i;){for(r++,n=i,a=0,t=0;h>t&&(a++,n=n.nextZ,n);t++);for(l=h;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(o=i,i=i.nextZ,a--):(o=n,n=n.nextZ,l--),s?s.nextZ=o:e=o,o.prevZ=s,s=o;i=n}s.nextZ=null,h*=2}while(r>1);return e},e.zOrder=function(e,t,i,n,o){return e=32767*(e-i)*o,t=32767*(t-n)*o,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},e.getLeftmost=function(e){var t=e,i=e;do t.x<i.x&&(i=t),t=t.next;while(t!==e);return i},e.pointInTriangle=function(e,t,i,n,o,s,r,a){return(o-r)*(t-a)-(e-r)*(s-a)>=0&&(e-r)*(n-a)-(i-r)*(t-a)>=0&&(i-r)*(s-a)-(o-r)*(n-a)>=0},e.isValidDiagonal=function(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!e.intersectsPolygon(t,i)&&e.locallyInside(t,i)&&e.locallyInside(i,t)&&e.middleInside(t,i)},e.area=function(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)},e.equals=function(e,t){return e.x===t.x&&e.y===t.y},e.intersects=function(t,i,n,o){return e.equals(t,i)&&e.equals(n,o)||e.equals(t,o)&&e.equals(n,i)?!0:e.area(t,i,n)>0!=e.area(t,i,o)>0&&e.area(n,o,t)>0!=e.area(n,o,i)>0},e.intersectsPolygon=function(t,i){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==i.i&&n.next.i!==i.i&&e.intersects(n,n.next,t,i))return!0;n=n.next}while(n!==t);return!1},e.locallyInside=function(t,i){return e.area(t.prev,t,t.next)<0?e.area(t,i,t.next)>=0&&e.area(t,t.prev,i)>=0:e.area(t,i,t.prev)<0||e.area(t,t.next,i)<0},e.middleInside=function(e,t){var i=e,n=!1,o=(e.x+t.x)/2,s=(e.y+t.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&o<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==e);return n},e.splitPolygon=function(e,t){var i=new Qs(e.i,e.x,e.y),n=new Qs(t.i,t.x,t.y),o=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=o,o.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n},e.insertNode=function(e,t,i,n){var o=new Qs(e,t,i);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o},e.removeNode=function(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)},e.signedArea=function(e,t,i,n){for(var o=0,s=t,r=i-n;i>s;s+=n)o+=(e[r]-e[s])*(e[s+1]+e[r+1]),r=s;return o},e}(),Qs=function(){function e(e,t,i){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return o(e,"laya.webgl.shapes.EarcutNode"),e}(),js=function(){function e(e,i,n,o,s){function r(e){var i=[],n=new t(i);return a._compileToTree(n,e.split("\n"),0,i,s),n}var a=this,l=Or.now();this._VS=r(i),this._PS=r(n),this._nameMap=o,Or.now()-l>2&&console.log("ShaderCompile use time:"+(Or.now()-l)+"  size:"+i.length+"/"+n.length)}var t,i;o(e,"laya.webgl.utils.ShaderCompile");var s=e.prototype;return s._compileToTree=function(i,n,o,s,r){var a,l,h,c,u,d,p,f=0,_=0,m=0,g=0;for(_=o;_<n.length;_++)if(h=n[_],!(h.length<1)&&(f=h.indexOf("//"),0!==f)){if(f>=0&&(h=h.substr(0,f)),a=p||new t(s),p=null,a.text=h,a.noCompile=!0,(f=h.indexOf("#"))>=0){for(c="#",g=f+1,m=h.length;m>g;g++){var v=h.charAt(g);if(" "===v||"	"===v||"?"===v)break;c+=v}switch(a.name=c,c){case"#ifdef":case"#ifndef":if(a.src=h,a.noCompile=null!=h.match(/[!&|()=<>]/),a.noCompile?console.log("function():Boolean{return "+h.substr(f+a.name.length)+"}"):(d=h.replace(/^\s*/,"").split(/\s+/),a.setCondition(d[1],"#ifdef"===c?1:2),a.text="//"+a.text),a.setParent(i),i=a,r)for(d=h.substr(g).split(e._splitToWordExps3),g=0;g<d.length;g++)h=d[g],h.length&&(r[h]=!0);continue;case"#if":if(a.src=h,a.noCompile=!0,a.setParent(i),i=a,r)for(d=h.substr(g).split(e._splitToWordExps3),g=0;g<d.length;g++)h=d[g],h.length&&"defined"!=h&&(r[h]=!0);continue;case"#else":a.src=h,i=i.parent,l=i.childs[i.childs.length-1],a.noCompile=l.noCompile,a.noCompile||(a.condition=l.condition,a.conditionType=1==l.conditionType?2:1,a.text="//"+a.text+" "+l.text+" "+a.conditionType),a.setParent(i),i=a;continue;case"#endif":i=i.parent,l=i.childs[i.childs.length-1],a.noCompile=l.noCompile,a.noCompile||(a.text="//"+a.text),a.setParent(i);continue;case"#include":d=e.splitToWords(h,null);var y=e.includes[d[1]];if(!y)throw"ShaderCompile error no this include file:"+d[1];if((f=d[0].indexOf("?"))<0){a.setParent(i),h=y.getWith("with"==d[2]?d[3]:null),this._compileToTree(a,h.split("\n"),0,s,r),a.text="";continue}a.setCondition(d[0].substr(f+1),1),a.text=y.getWith("with"==d[2]?d[3]:null);break;case"#import":d=e.splitToWords(h,null),u=d[1],s.push({node:a,file:e.includes[u],ofs:a.text.length});continue}}else{if(l=i.childs[i.childs.length-1],l&&!l.name){s.length>0&&e.splitToWords(h,l),p=a,l.text+="\n"+h;continue}s.length>0&&e.splitToWords(h,a)}a.setParent(i)}},s.createShader=function(e,t,i){var n={},o="";if(e)for(var s in e)o+="#define "+s+"\n",n[s]=!0;var r=this._VS.toscript(n,[]),a=this._PS.toscript(n,[]);return(i||vS.create)(o+r.join("\n"),o+a.join("\n"),t,this._nameMap)},e._parseOne=function(t,i,n,o,s,r){var a={type:e.shaderParamsMap[n[o+1]],name:n[o+2],size:isNaN(parseInt(n[o+3]))?1:parseInt(n[o+3])};return r&&("attribute"==s?t.push(a):i.push(a)),":"==n[o+3]&&(a.type=n[o+4],o+=2),o+=2},e.addInclude=function(t,n){if(!n||0===n.length)throw new Error("add shader include file err:"+t);if(e.includes[t])throw new Error("add shader include file err, has add:"+t);e.includes[t]=new i(n)},e.preGetParams=function(t,i){var n=[t,i],o={},s=[],r=[],a={},l=[];o.attributes=s,o.uniforms=r,o.defines=a;for(var h=0,c=0,u=0;2>u;u++){n[u]=n[u].replace(e._removeAnnotation,"");var d,p=n[u].match(e._reg);for(h=0,c=p.length;c>h;h++){var f=p[h];if("attribute"==f||"uniform"==f)h=e._parseOne(s,r,p,h,f,!0);else{if("#define"==f){f=p[++h],l[f]=1;continue}if("#ifdef"==f){d=p[++h];a[d]=a[d]||[];for(h++;c>h;h++)if(f=p[h],"attribute"==f||"uniform"==f)h=e._parseOne(s,r,p,h,f,l[d]);else if("#else"==f)for(h++;c>h;h++)if(f=p[h],"attribute"==f||"uniform"==f)h=e._parseOne(s,r,p,h,f,!l[d]);else if("#endif"==f)break}}}}return o},e.splitToWords=function(e,t){for(var i,n,o=[],s=-1,r=0,a=e.length;a>r;r++)if(i=e.charAt(r)," 	=+-*/&%!<>()'\",;".indexOf(i)>=0){if(s>=0&&r-s>1&&(n=e.substr(s,r-s),o.push(n)),'"'==i||"'"==i){var l=e.indexOf(i,r+1);if(0>l)throw"Sharder err:"+e;o.push(e.substr(r+1,l-r-1)),r=l,s=-1;continue}"("==i&&t&&o.length>0&&(n=o[o.length-1]+";","vec4;main;".indexOf(n)<0&&(t.useFuns+=n)),s=-1}else 0>s&&(s=r);return a>s&&a-s>1&&(n=e.substr(s,a-s),o.push(n)),o},e.IFDEF_NO=0,e.IFDEF_YES=1,e.IFDEF_ELSE=2,e.IFDEF_PARENT=3,e._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),e._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),e._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),e.includes={},n(e,["shaderParamsMap",function(){return this.shaderParamsMap={"float":5126,"int":5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),e.__init$=function(){t=function(){function e(e){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=e}o(e,"");var t=e.prototype;return t.setParent=function(e){e.childs.push(this),this.z=e.z+1,this.parent=e},t.setCondition=function(e,t){e&&(this.conditionType=t,e=e.replace(/(\s*$)/g,""),this.condition=function(){return this[e]},this.condition.__condition=e)},t.toscript=function(t,i){return this._toscript(t,i,++e.__id)},t._toscript=function(e,t,i){if(this.childs.length<1&&!this.text)return t;t.length;if(this.condition){var n=!!this.condition.call(e);if(2===this.conditionType&&(n=!n),!n)return t}if(this.text&&t.push(this.text),this.childs.length>0&&this.childs.forEach(function(n,o,s){n._toscript(e,t,i)}),this.includefiles.length>0&&this.useFuns.length>0)for(var o,s=0,r=this.includefiles.length;r>s;s++)this.includefiles[s].curUseID!=i&&(o=this.includefiles[s].file.getFunsScript(this.useFuns),o.length>0&&(this.includefiles[s].curUseID=i,t[0]=o+t[0]));return t},e.__id=1,e}(),i=function(){function t(t){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=t;for(var i=0,n=0,o=0;;){if(i=t.indexOf("#begin",i),0>i)break;for(o=i+5;;){if(o=t.indexOf("#end",o),0>o)break;if("i"!==t.charAt(o+4))break;o+=5}if(0>o)throw"add include err,no #end:"+t;n=t.indexOf("\n",i);var s=e.splitToWords(t.substr(i,n-i),null);"code"==s[1]?this.codes[s[2]]=t.substr(n+1,o-n-1):"function"==s[1]&&(n=t.indexOf("function",i),n+="function".length,this.funs[s[3]]=t.substr(n+1,o-n-1),this.funnames+=s[3]+";"),i=o+1}}o(t,"");var i=t.prototype;return i.getWith=function(e){var t=e?this.codes[e]:this.script;if(!t)throw"get with error:"+e;return t},i.getFunsScript=function(e){var t="";for(var i in this.funs)e.indexOf(i+";")>=0&&(t+=this.funs[i]);return t},t}()},e}(),Zs=function(){function e(){}return o(e,"laya.webgl.utils.CONST3D2D"),e.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],e.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],e._TMPARRAY=[],e._OFFSETX=0,e._OFFSETY=0,n(e,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),e}(),Js=function(){function e(){}return o(e,"laya.webgl.utils.RenderState2D"),e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.mat2MatArray=function(t,i){var n=t,o=i;return o[0]=n.a,o[1]=n.b,o[2]=e.EMPTYMAT4_ARRAY[2],o[3]=e.EMPTYMAT4_ARRAY[3],o[4]=n.c,o[5]=n.d,o[6]=e.EMPTYMAT4_ARRAY[6],o[7]=e.EMPTYMAT4_ARRAY[7],o[8]=e.EMPTYMAT4_ARRAY[8],o[9]=e.EMPTYMAT4_ARRAY[9],o[10]=e.EMPTYMAT4_ARRAY[10],o[11]=e.EMPTYMAT4_ARRAY[11],o[12]=n.tx,o[13]=n.ty,o[14]=e.EMPTYMAT4_ARRAY[14],o[15]=e.EMPTYMAT4_ARRAY[15],i},e.restoreTempArray=function(){e.TEMPMAT4_ARRAY[0]=1,e.TEMPMAT4_ARRAY[1]=0,e.TEMPMAT4_ARRAY[4]=0,e.TEMPMAT4_ARRAY[5]=1,e.TEMPMAT4_ARRAY[12]=0,e.TEMPMAT4_ARRAY[13]=0},e.clear=function(){e.worldScissorTest=!1,e.worldShaderDefines=null,e.worldFilters=null,e.worldAlpha=1,e.worldClipRect.x=e.worldClipRect.y=0,e.worldClipRect.width=e.width,e.worldClipRect.height=e.height,e.curRenderTarget=null},e._MAXSIZE=99999999,e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.worldMatrix4=e.TEMPMAT4_ARRAY,e.worldAlpha=1,e.worldScissorTest=!1,e.worldFilters=null,e.worldShaderDefines=null,e.curRenderTarget=null,e.width=0,e.height=0,n(e,["worldMatrix",function(){return this.worldMatrix=new Ph},"worldClipRect",function(){return this.worldClipRect=new Ch(0,0,99999999,99999999)}]),e}(),$s=function(){function e(e,t,i){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=e,this._vb=new yw(e,35048),t&&this._vb._resizeBuffer(t,!1),
this._ib=new bw,i&&this._ib._resizeBuffer(i,!1)}o(e,"laya.webgl.utils.Mesh2D");var t=e.prototype;return t.cloneWithNewVB=function(){var t=new e(this._stride,0,0);return t._ib=this._ib,t._quadNum=this._quadNum,t._attribInfo=this._attribInfo,t},t.cloneWithNewVBIB=function(){var t=new e(this._stride,0,0);return t._attribInfo=this._attribInfo,t},t.getVBW=function(){return this._vb.setNeedUpload(),this._vb},t.getVBR=function(){return this._vb},t.getIBR=function(){return this._ib},t.getIBW=function(){return this._ib.setNeedUpload(),this._ib},t.createQuadIB=function(e){this._quadNum=e,this._ib._resizeBuffer(6*e*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var t=this._ib.getUint16Array(),i=0,n=0,o=0;e>o;o++)t[i++]=n,t[i++]=n+2,t[i++]=n+1,t[i++]=n,t[i++]=n+3,t[i++]=n+2,n+=4;this._ib.setNeedUpload()},t.setAttributes=function(e){if(this._attribInfo=e,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},t.getEleNum=function(){return this._ib.getBuffer().byteLength/2},t.releaseMesh=function(){},t.destroy=function(){},t.clearVB=function(){this._vb.clear()},e._gvaoid=0,e}(),er=function(){function e(){}return o(e,"laya.webgl.utils.GlUtils"),e.make2DProjection=function(e,t,i){return[2/e,0,0,0,0,-2/t,0,0,0,0,2/i,0,-1,1,0,1]},e.fillIBQuadrangle=function(e,t){if(t>65535/4)throw Error("IBQuadrangle count:"+t+" must<:"+Math.floor(65535/4));t=Math.floor(t),e._resizeBuffer(6*(t+1)*2,!1),e.byteLength=e.bufferLength;for(var i=e.getUint16Array(),n=0,o=0;t>o;o++)i[n++]=4*o,i[n++]=4*o+2,i[n++]=4*o+1,i[n++]=4*o,i[n++]=4*o+3,i[n++]=4*o+2;return e.setNeedUpload(),!0},e.expandIBQuadrangle=function(t,i){t.bufferLength>=6*i*2||e.fillIBQuadrangle(t,i)},e.mathCeilPowerOfTwo=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e},e.fillQuadrangleImgVb=function(e,t,i,n,o,s,r,a){var l=(e._byteLength>>2)+16;e.byteLength=l<<2;var h=e.getFloat32Array();l-=16,h[l+2]=o[0],h[l+3]=o[1],h[l+6]=o[2],h[l+7]=o[3],h[l+10]=o[4],h[l+11]=o[5],h[l+14]=o[6],h[l+15]=o[7];var c=s.a,u=s.b,d=s.c,p=s.d;if(1!==c||0!==u||0!==d||1!==p){s.bTransform=!0;var f=s.tx+r,_=s.ty+a;h[l]=(n[0]+t)*c+(n[1]+i)*d+f,h[l+1]=(n[0]+t)*u+(n[1]+i)*p+_,h[l+4]=(n[2]+t)*c+(n[3]+i)*d+f,h[l+5]=(n[2]+t)*u+(n[3]+i)*p+_,h[l+8]=(n[4]+t)*c+(n[5]+i)*d+f,h[l+9]=(n[4]+t)*u+(n[5]+i)*p+_,h[l+12]=(n[6]+t)*c+(n[7]+i)*d+f,h[l+13]=(n[6]+t)*u+(n[7]+i)*p+_}else s.bTransform=!1,t+=s.tx+r,i+=s.ty+a,h[l]=t+n[0],h[l+1]=i+n[1],h[l+4]=t+n[2],h[l+5]=i+n[3],h[l+8]=t+n[4],h[l+9]=i+n[5],h[l+12]=t+n[6],h[l+13]=i+n[7];return e._upload=!0,!0},e.fillTranglesVB=function(e,t,i,n,o,s,r){var a=(e._byteLength>>2)+n.length;e.byteLength=a<<2;var l=e.getFloat32Array();a-=n.length;for(var h=n.length,c=o.a,u=o.b,d=o.c,p=o.d,f=0;h>f;f+=4)if(l[a+f+2]=n[f+2],l[a+f+3]=n[f+3],1!==c||0!==u||0!==d||1!==p){o.bTransform=!0;var _=o.tx+s,m=o.ty+r;l[a+f]=(n[f]+t)*c+(n[f+1]+i)*d+_,l[a+f+1]=(n[f]+t)*u+(n[f+1]+i)*p+m}else o.bTransform=!1,t+=o.tx+s,i+=o.ty+r,l[a+f]=t+n[f],l[a+f+1]=i+n[f+1];return e._upload=!0,!0},e.copyPreImgVb=function(e,t,i){var n=e._byteLength>>2;e.byteLength=n+16<<2;for(var o=e.getFloat32Array(),s=0,r=n-16;4>s;s++)o[n]=o[r]+t,++n,++r,o[n]=o[r]+i,++n,++r,o[n]=o[r],++n,++r,o[n]=o[r],++n,++r;e._upload=!0},e.fillRectImgVb=function(e,t,i,n,o,s,r,a,l,h,c,u,d){void 0===d&&(d=!1);var p,f,_,m,g,v,y,b,E,x,S,w,C,T,I,A,N=1,P=a.a,R=a.b,L=a.c,O=a.d,M=t&&t.width<99999999;if(1!==P||0!==R||0!==L||1!==O?(a.bTransform=!0,0===R&&0===L&&(N=23,E=o+i,x=s+n,S=a.tx+l,w=a.ty+h,p=P*i+S,_=P*E+S,f=O*n+w,m=O*x+w)):(N=23,a.bTransform=!1,p=i+a.tx+l,_=p+o,f=n+a.ty+h,m=f+s),M&&(g=t.x,v=t.y,y=t.width+g,b=t.height+v),1!==N){if(Math.min(p,_)>=y)return!1;if(Math.min(f,m)>=b)return!1;if(Math.max(_,p)<=g)return!1;if(Math.max(m,f)<=v)return!1}var D=e._byteLength>>2;e.byteLength=D+16<<2;var k=e.getFloat32Array();switch(k[D+2]=r[0],k[D+3]=r[1],k[D+6]=r[2],k[D+7]=r[3],k[D+10]=r[4],k[D+11]=r[5],k[D+14]=r[6],k[D+15]=r[7],N){case 1:S=a.tx+l,w=a.ty+h,E=o+i,x=s+n;var B=i,V=n,F=P*B,G=L*V,H=O*V,U=R*B,z=P*E,W=L*x,Y=O*x,q=R*E;d?(C=F+G+S,I=Math.round(C)-C,T=H+U+w,A=Math.round(T)-T,k[D]=C+I,k[D+1]=T+A,k[D+4]=z+G+S+I,k[D+5]=H+q+w+A,k[D+8]=z+W+S+I,k[D+9]=Y+q+w+A,k[D+12]=F+W+S+I,k[D+13]=Y+U+w+A):(k[D]=F+G+S,k[D+1]=H+U+w,k[D+4]=z+G+S,k[D+5]=H+q+w,k[D+8]=z+W+S,k[D+9]=Y+q+w,k[D+12]=F+W+S,k[D+13]=Y+U+w);break;case 23:d?(C=p+c,I=Math.round(C)-C,T=f,A=Math.round(T)-T,k[D]=C+I,k[D+1]=T+A,k[D+4]=_+c+I,k[D+5]=f+A,k[D+8]=_+I,k[D+9]=m+A,k[D+12]=p+I,k[D+13]=m+A):(k[D]=p+c,k[D+1]=f,k[D+4]=_+c,k[D+5]=f,k[D+8]=_,k[D+9]=m,k[D+12]=p,k[D+13]=m)}return e._upload=!0,!0},e.fillLineVb=function(t,i,n,o,s,r,a,l){var h=.5*a,c=e._fillLineArray,u=-(o-r),d=n-s,p=Math.sqrt(u*u+d*d);u/=p,d/=p,u*=h,d*=h,c[0]=n-u,c[1]=o-d,c[4]=n+u,c[5]=o+d,c[8]=s+u,c[9]=r+d,c[12]=s-u,c[13]=r-d,l&&l.transformPointArray(c,c);var f=(t._byteLength>>2)+16;return t.byteLength=f<<2,t.insertData(c,f-16),!0},e._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e}(),tr=(function(){function e(){}return o(e,"laya.webgl.utils.MatirxArray"),e.ArrayMul=function(t,i,n){if(!t)return void e.copyArray(i,n);if(!i)return void e.copyArray(t,n);for(var o=NaN,s=NaN,r=NaN,a=NaN,l=0;4>l;l++)o=t[l],s=t[l+4],r=t[l+8],a=t[l+12],n[l]=o*i[0]+s*i[1]+r*i[2]+a*i[3],n[l+4]=o*i[4]+s*i[5]+r*i[6]+a*i[7],n[l+8]=o*i[8]+s*i[9]+r*i[10]+a*i[11],n[l+12]=o*i[12]+s*i[13]+r*i[14]+a*i[15]},e.copyArray=function(e,t){if(e&&t)for(var i=0;i<e.length;i++)t[i]=e[i]},e}(),function(){function e(e){this._color=zr.create("black"),this.setValue(e)}o(e,"laya.webgl.canvas.DrawStyle");var t=e.prototype;return t.setValue=function(e){if(e){if("string"==typeof e)return void(this._color=zr.create(e));if(e instanceof laya.utils.Color)return void(this._color=e)}},t.reset=function(){this._color=zr.create("black")},t.equal=function(e){return"string"==typeof e?this._color.strColor===e:e instanceof laya.utils.Color?this._color.numColor===e.numColor:!1},t.toColorStr=function(){return this._color.strColor},e.create=function(t){if(t){var i;if("string"==typeof t?i=zr.create(t):t instanceof laya.utils.Color&&(i=t),i)return i._drawStyle||(i._drawStyle=new e(t))}return laya.webgl.canvas.DrawStyle.DEFAULT},n(e,["DEFAULT",function(){return this.DEFAULT=new e("#000000")}]),e}()),ir=function(){function e(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];ur.mainContext;this.ib=bw.create(35048),this.vb=yw.create(5)}o(e,"laya.webgl.canvas.Path");var t=e.prototype;return t.addPoint=function(e,t){this.tempArray.push(e,t)},t.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},t.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},t.polygon=function(e,t,i,n,o,s){var r;return this.geomatrys.push(this._curGeomatry=r=new Ed(e,t,i,n,o,s)),n||(r.fill=!1),void 0==s&&(r.borderWidth=0),r},t.setGeomtry=function(e){this.geomatrys.push(this._curGeomatry=e)},t.drawLine=function(e,t,i,n,o){var s;return this.closePath?this.geomatrys.push(this._curGeomatry=s=new yd(e,t,i,n,o)):this.geomatrys.push(this._curGeomatry=s=new bd(e,t,i,n,o)),s.fill=!1,s},t.update=function(){var e=this.ib._byteLength,t=this.geomatrys.length;this.offset=e;for(var i=this.geoStart;t>i;i++)this.geomatrys[i].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=t,this.count=(this.ib._byteLength-e)/Zs.BYTES_PIDX},t.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},t.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},e}(),nr=function(){function e(){}return o(e,"laya.webgl.canvas.BlendMode"),e._init_=function(t){e.fns=[e.BlendNormal,e.BlendAdd,e.BlendMultiply,e.BlendScreen,e.BlendOverlay,e.BlendLight,e.BlendMask,e.BlendDestinationOut],e.targetFns=[e.BlendNormalTarget,e.BlendAddTarget,e.BlendMultiplyTarget,e.BlendScreenTarget,e.BlendOverlayTarget,e.BlendLightTarget,e.BlendMask,e.BlendDestinationOut]},e.BlendNormal=function(e){e.blendFunc(1,771)},e.BlendAdd=function(e){e.blendFunc(1,772)},e.BlendMultiply=function(e){e.blendFunc(774,771)},e.BlendScreen=function(e){e.blendFunc(1,1)},e.BlendOverlay=function(e){e.blendFunc(1,769)},e.BlendLight=function(e){e.blendFunc(1,1)},e.BlendNormalTarget=function(e){e.blendFunc(1,771)},e.BlendAddTarget=function(e){e.blendFunc(1,772)},e.BlendMultiplyTarget=function(e){e.blendFunc(774,771)},e.BlendScreenTarget=function(e){e.blendFunc(1,1)},e.BlendOverlayTarget=function(e){e.blendFunc(1,769)},e.BlendLightTarget=function(e){e.blendFunc(1,1)},e.BlendMask=function(e){e.blendFunc(0,770)},e.BlendDestinationOut=function(e){e.blendFunc(0,0)},e.activeBlendFunction=null,e.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],e.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},e.NORMAL="normal",e.ADD="add",e.MULTIPLY="multiply",e.SCREEN="screen",e.LIGHT="light",e.OVERLAY="overlay",e.DESTINATIONOUT="destination-out",e.fns=[],e.targetFns=[],e}(),or=function(){function e(){this._clipRect=new Ch}o(e,"laya.webgl.canvas.save.SaveClipRect");var t=e.prototype;return i.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){t._clipRect=this._clipSaveRect,e._cache[e._cache._length++]=this,this._submitScissor.submitLength=t._submits._length-this._submitScissor.submitIndex,t._curSubmit=Ys.RENDERBASE,t._renderKey=0},e.save=function(t,i){if(131072!=(131072&t._saveMark._saveuse)){t._saveMark._saveuse|=131072;var n=e._cache,o=n._length>0?n[--n._length]:new e;o._clipSaveRect=t._clipRect,t._clipRect=o._clipRect.copyFrom(t._clipRect),o._submitScissor=i;var s=t._save;s[s._length++]=o}},n(e,["_cache",function(){return this._cache=ar._createArray()}]),e}(),sr=function(){function e(){this._contextX=0,this._contextY=0,this._clipRect=new Ch,this._rect=new Ch,this._matrix=new Ph}o(e,"laya.webgl.canvas.save.SaveClipRectStencil");var t=e.prototype;return i.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){zs.restore(t,this._rect,this._saveMatrix,this._contextX,this._contextY),t._clipRect=this._clipSaveRect,t._curMat=this._saveMatrix,t._x=this._contextX,t._y=this._contextY,e._cache[e._cache._length++]=this,t._curSubmit=Ys.RENDERBASE},e.save=function(t,i,n,o,s,r,a,l,h,c){if(262144!=(262144&t._saveMark._saveuse)){t._saveMark._saveuse|=262144;var u=e._cache,d=u._length>0?u[--u._length]:new e;d._clipSaveRect=t._clipRect,d._clipRect.setTo(a,l,h,c),t._clipRect=d._clipRect,d._rect.x=n,d._rect.y=o,d._rect.width=s,d._rect.height=r,d._contextX=t._x,d._contextY=t._y,d._saveMatrix=t._curMat,t._curMat.copyTo(d._matrix),t._curMat=d._matrix,d._submitStencil=i;var p=t._save;p[p._length++]=d}},n(e,["_cache",function(){return this._cache=ar._createArray()}]),e}(),rr=function(){function e(){this._matrix=new Ph}o(e,"laya.webgl.canvas.save.SaveTransform");var t=e.prototype;return i.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){t._curMat=this._savematrix,e._no[e._no._length++]=this},e.save=function(t){var i=t._saveMark;if(2048!==(2048&i._saveuse)){i._saveuse|=2048;var n=e._no,o=n._length>0?n[--n._length]:new e;o._savematrix=t._curMat,t._curMat=t._curMat.copyTo(o._matrix);var s=t._save;s[s._length++]=o}},n(e,["_no",function(){return this._no=ar._createArray()}]),e}(),ar=function(){function e(){}o(e,"laya.webgl.canvas.save.SaveBase");var t=e.prototype;return i.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){this._dataObj[this._valueName]=this._value,e._cache[e._cache._length++]=this,this._newSubmit&&(t._curSubmit=Ys.RENDERBASE,t._renderKey=0)},e._createArray=function(){var e=[];return e._length=0,e},e._init=function(){var t=e._namemap={};return t[1]="ALPHA",t[2]="fillStyle",t[8]="font",t[256]="lineWidth",t[512]="strokeStyle",t[8192]="_mergeID",t[1024]=t[2048]=t[4096]=[],t[16384]="textBaseline",t[32768]="textAlign",t[65536]="_nBlendType",t[1048576]="shader",t[2097152]="filters",t},e.save=function(t,i,n,o){if((t._saveMark._saveuse&i)!==i){t._saveMark._saveuse|=i;var s=e._cache,r=s._length>0?s[--s._length]:new e;r._value=n[r._valueName=e._namemap[i]],r._dataObj=n,r._newSubmit=o;var a=t._save;a[a._length++]=r}},e._cache=laya.webgl.canvas.save.SaveBase._createArray(),e._namemap=e._init(),e}(),lr=function(){function e(){this._saveuse=0}o(e,"laya.webgl.canvas.save.SaveMark");var t=e.prototype;return i.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!0},t.restore=function(t){t._saveMark=this._preSaveMark,e._no[e._no._length++]=this},e.Create=function(t){var i=e._no,n=i._length>0?i[--i._length]:new e;return n._saveuse=0,n._preSaveMark=t._saveMark,t._saveMark=n,n},n(e,["_no",function(){return this._no=ar._createArray()}]),e}(),hr=function(){function e(){}o(e,"laya.webgl.canvas.save.SaveTranslate");var t=e.prototype;return i.imps(t,{"laya.webgl.canvas.save.ISaveData":!0}),t.isSaveMark=function(){return!1},t.restore=function(t){t._curMat;t._x=this._x,t._y=this._y,e._no[e._no._length++]=this},e.save=function(t){var i=e._no,n=i._length>0?i[--i._length]:new e;n._x=t._x,n._y=t._y;var o=t._save;o[o._length++]=n},n(e,["_no",function(){return this._no=ar._createArray()}]),e}(),cr=function(){function t(){this._repaint=!1}o(t,"laya.resource.Context");var i=t.prototype;return i.replaceReset=function(){var e=0,i=0;i=t.replaceKeys.length;var n;for(e=0;i>e;e++)n=t.replaceKeys[e],this[t.newKeys[e]]=this[n]},i.replaceResotre=function(){this.__restore(),this.__reset()},i.setIsMainContext=function(){},i.drawTextures=function(e,t,i,n){Nr.drawCall+=t.length/2;for(var o=e.width,s=e.height,r=0,a=t.length;a>r;r+=2)this.drawTexture(e,t[r],t[r+1],o,s,i,n)},i.drawCanvas=function(e,t,i,n,o){Nr.drawCall++,this.drawImage(e.source,t,i,n,o)},i.fillRect=function(e,t,i,n,o){Nr.drawCall++,o&&(this.fillStyle=o),this.__fillRect(e,t,i,n)},i.fillText=function(e,t,i,n,o,s){Nr.drawCall++,arguments.length>3&&"string"==typeof n&&(this.font=n,this.fillStyle=o,this.textAlign=s,this.textBaseline="top"),"number"==typeof n?this.__fillText(e,t,i,n):this.__fillText(e,t,i)},i.fillBorderText=function(e,t,i,n,o,s,r,a){Nr.drawCall++,this.font=n,this.fillStyle=o,this.textBaseline="top",this.strokeStyle=s,this.lineWidth=r,this.textAlign=a,this.__strokeText(e,t,i),this.__fillText(e,t,i)},i.strokeText=function(e,t,i,n,o,s,r){Nr.drawCall++,arguments.length>3&&"string"==typeof n&&(this.font=n,this.strokeStyle=o,this.lineWidth=s,this.textAlign=r,this.textBaseline="top"),"number"==typeof n?this.__strokeText(e,t,i,n):this.__strokeText(e,t,i)},i.transformByMatrix=function(e){this.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)},i.setTransformByMatrix=function(e){this.setTransform(e.a,e.b,e.c,e.d,e.tx,e.ty)},i.clipRect=function(e,t,i,n){Nr.drawCall++,this.beginPath(),this.rect(e,t,i,n),this.clip()},i.drawTexture=function(e,t,i,n,o,s,r){Nr.drawCall++;var a=e.uv,l=e.bitmap.width,h=e.bitmap.height;this.drawImage(e.source,a[0]*l,a[1]*h,(a[2]-a[0])*l,(a[5]-a[3])*h,t+s,i+r,n,o)},i.drawTextureWithTransform=function(e,t,i,n,o,s,r,a,l){Nr.drawCall++;var h=e.uv,c=e.bitmap.width,u=e.bitmap.height;this.save(),1!=l&&(this.globalAlpha*=l),s?(this.transform(s.a,s.b,s.c,s.d,s.tx+r,s.ty+a),this.drawImage(e.source,h[0]*c,h[1]*u,(h[2]-h[0])*c,(h[5]-h[3])*u,t,i,n,o)):this.drawImage(e.source,h[0]*c,h[1]*u,(h[2]-h[0])*c,(h[5]-h[3])*u,t+r,i+a,n,o),this.restore()},i.drawTexture2=function(e,t,i,n,o,s,r,a){var l=a[0];if(l.loaded&&l.bitmap&&l.source){Nr.drawCall++;var h=1!==s;if(h){var c=this.globalAlpha;this.globalAlpha*=s}var u=l.uv,d=l.bitmap.width,p=l.bitmap.height;o?(this.save(),this.transform(o.a,o.b,o.c,o.d,o.tx+e,o.ty+t),this.drawImage(l.source,u[0]*d,u[1]*p,(u[2]-u[0])*d,(u[5]-u[3])*p,a[1]-i,a[2]-n,a[3],a[4]),this.restore()):this.drawImage(l.source,u[0]*d,u[1]*p,(u[2]-u[0])*d,(u[5]-u[3])*p,a[1]-i+e,a[2]-n+t,a[3],a[4]),h&&(this.globalAlpha=c)}},i.fillTexture=function(e,t,i,n,o,s,r,a){if(!a.pat){if(e.uv!=Vu.DEF_UV){var l=new GS("2D");l.getContext("2d"),l.size(e.width,e.height),l.context.drawTexture(e,0,0,e.width,e.height,0,0),e=new Vu(l)}a.pat=this.createPattern(e.bitmap.source,s)}var h=t,c=i,u=0,d=0;r&&(h+=r.x%e.width,c+=r.y%e.height,u-=r.x%e.width,d-=r.y%e.height),this.translate(h,c),this.fillRect(u,d,n,o,a.pat),this.translate(-h,-c)},i.drawTriangle=function(e,t,i,n,o,s,r,a){var l=e.bitmap,h=l.source,c=e.width,u=e.height,d=l.width,p=l.height,f=i[n]*d,_=i[o]*d,m=i[s]*d,g=i[n+1]*p,v=i[o+1]*p,y=i[s+1]*p,b=t[n],E=t[o],x=t[s],S=t[n+1],w=t[o+1],C=t[s+1];if(a){var T=1,I=1,A=(b+E+x)/3,N=(S+w+C)/3,P=b-A,R=S-N,L=Math.sqrt(P*P+R*R);b=A+P/L*(L+T),S=N+R/L*(L+I),P=E-A,R=w-N,L=Math.sqrt(P*P+R*R),E=A+P/L*(L+T),w=N+R/L*(L+I),P=x-A,R=C-N,L=Math.sqrt(P*P+R*R),x=A+P/L*(L+T),C=N+R/L*(L+I)}this.save(),r&&this.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.beginPath(),this.moveTo(b,S),this.lineTo(E,w),this.lineTo(x,C),this.closePath(),this.clip();var O=f*v+g*m+_*y-v*m-g*_-f*y,M=1/O,D=b*v+g*x+E*y-v*x-g*E-b*y,k=f*E+b*m+_*x-E*m-b*_-f*x,B=f*v*x+g*E*m+b*_*y-b*v*m-g*_*x-f*E*y,V=S*v+g*C+w*y-v*C-g*w-S*y,F=f*w+S*m+_*C-w*m-S*_-f*C,G=f*v*C+g*w*m+S*_*y-S*v*m-g*_*C-f*w*y;this.transform(D*M,V*M,k*M,F*M,B*M,G*M),this.drawImage(h,e.uv[0]*d,e.uv[1]*p,c,u,e.uv[0]*d,e.uv[1]*p,c,u),this.restore()},i.flush=function(){return 0},i.fillWords=function(e,t,i,n,o,s){n&&(this.font=n),o&&(this.fillStyle=o);this.textBaseline="top",this.textAlign="left";for(var r=0,a=e.length;a>r;r++){var l=e[r];if(this.__fillText(l["char"],l.x+t,l.y+i),1===s){var h=l.height,c=.5*l.style.letterSpacing;c||(c=0),this.beginPath(),this.strokeStyle=o,this.lineWidth=1,this.moveTo(t+l.x-c+.5,i+l.y+h+.5),this.lineTo(t+l.x+l.width+c+.5,i+l.y+h+.5),this.stroke()}}},i.fillBorderWords=function(e,t,i,n,o,s,r){n&&(this.font=n),o&&(this.fillStyle=o),this.textBaseline="top",this.lineWidth=r,this.textAlign="left",this.strokeStyle=s;for(var a=0,l=e.length;l>a;a++){var h=e[a];this.__strokeText(h["char"],h.x+t,h.y+i),this.__fillText(h["char"],h.x+t,h.y+i)}},i.destroy=function(){this.canvas.width=this.canvas.height=0},i.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},i.drawCurves=function(e,t,i){this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var n=i[2];e+=i[0],t+=i[1],this.moveTo(e+n[0],t+n[1]);for(var o=2,s=n.length;s>o;)this.quadraticCurveTo(e+n[o++],t+n[o++],e+n[o++],t+n[o++]);this.stroke()},t.__init__=function(t){var i=laya.resource.Context.prototype;if(t=t||e.CanvasRenderingContext2D.prototype,!t.inited){t.inited=!0,t.__fillText=t.fillText,t.__fillRect=t.fillRect,t.__strokeText=t.strokeText;var n=["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"];n.forEach(function(e){t[e]=i[e]})}},t.replaceCanvasGetSet=function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);if(!i||!i.configurable)return!1;var n,o={};for(n in i)"set"!=n&&(o[n]=i[n]);var s=i.set;return o.set=function(e){var t=this;s.call(t,e);var i=t.getContext("2d");i&&"__reset"in i&&i.__reset()},Object.defineProperty(e,t,o),!0},t.replaceGetSet=function(e,i){var n=Object.getOwnPropertyDescriptor(e,i);if(!n||!n.configurable)return!1;var o,s={};for(o in n)"set"!=o&&(s[o]=n[o]);var r=n.set,a="___"+i+"__";return t.newKeys.push(a),s.set=function(e){var t=this;e!=t[a]&&(t[a]=e,r.call(t,e))},Object.defineProperty(e,i,s),!0},t._default=new t,t.newKeys=[],n(t,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),t}(),ur=function(){function e(){}return o(e,"laya.webgl.WebGL"),e._uint8ArraySlice=function(){for(var e=this,t=e.length,i=new Uint8Array(e.length),n=0;t>n;n++)i[n]=e[n];return i},e._float32ArraySlice=function(){for(var e=this,t=e.length,i=new Float32Array(e.length),n=0;t>n;n++)i[n]=e[n];return i},e._uint16ArraySlice=function(e){var t,i=arguments,n=this,o=0,s=0;if(0===i.length)for(o=n.length,t=new Uint16Array(o),s=0;o>s;s++)t[s]=n[s];else if(2===i.length){var r=i[0],a=i[1];if(a>r)for(o=a-r,t=new Uint16Array(o),s=r;a>s;s++)t[s-r]=n[s];else t=new Uint16Array(0)}return t},e.expandContext=function(){var e=cr.prototype,t=CanvasRenderingContext2D.prototype;t.fillTrangles=e.fillTrangles,gS.__int__(null),t.setIBVB=function(e,t,i,n,o,s,r,a,l,h){void 0===l&&(l=0),void 0===h&&(h=0),null===i&&(this._ib=this._ib||bw.QuadrangleIB,i=this._ib,er.expandIBQuadrangle(i,n._byteLength/64+8)),this._setIBVB(e,t,i,n,o,s,r,a,l,h)},t.fillTrangles=function(e,t,i,n,o){this._curMat=this._curMat||Ph.create(),this._vb=this._vb||yw.create(),this._ib||(this._ib=bw.create(),er.fillIBQuadrangle(this._ib,r/4));var s=this._vb,r=n.length>>4;er.fillTranglesVB(s,t,i,n,o||this._curMat,0,0),er.expandIBQuadrangle(this._ib,s._byteLength/64+8);var a=new wd(1,0);a.textureHost=e;var l=new Ew("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; void main() {vec4 color= texture2D(texture, v_texcoord); color.a*=1.0; gl_FragColor= color;}");s._vertType=3,this._setIBVB(t,i,this._ib,s,6*r,o,l,a,0,0)}},e.enable=function(){if(Or.__init__(),Ns.isConchApp&&!Ns.isConchWebGL)return a.skinAniSprite=function(){var e=new _r;return e},e.expandContext(),!1;if(a.getWebGLContext=function(e){for(var t,i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=0;n<i.length;n++){try{t=e.getContext(i[n],{stencil:nc.isStencil,alpha:nc.isAlpha,antialias:nc.isAntialias,premultipliedAlpha:nc.premultipliedAlpha,preserveDrawingBuffer:nc.preserveDrawingBuffer})}catch(o){}if(t)return t}return null},e.mainContext=a.getWebGLContext(Ns._mainCanvas),null==e.mainContext)return!1;if(Ns.isWebGL)return!0;xw.create=function(e,t){return new Xw(e,t)},FS.create=function(e,t,i,n,o,s,r){return new bS(e,t,i,n,o,s,r)},Ns.WebGL=e,Ns.isWebGL=!0,yr.__init__(),a.createRenderSprite=function(e,t){return new md(e,t)},a.createWebGLContext2D=function(e){return new Sd(e)},a.changeWebGLSize=function(e,t){laya.webgl.WebGL.onStageResize(e,t)},a.createGraphics=function(){return new _d};var t=a.createFilterAction;return a.createFilterAction=t?t:function(e){return new dd},a.clear=function(e){Js.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var t=Ns.context.ctx,i=e&&(0==t._submits._length||nc.preserveDrawingBuffer)?zr.create(e)._color:_S._wgColor;i?t.clearBG(i[0],i[1],i[2],i[3]):t.clearBG(0,0,0,0),Js.clear()},a.addToAtlas=function(e,t){void 0===t&&(t=!1);var n=e.bitmap;return Ns.optimizeTextureMemory(e.url,e)?void(i.__typeof(n,"laya.webgl.resource.IMergeAtlasBitmap")&&n.allowMerageInAtlas&&n.on("recovered",e,e.addTextureToAtlas)):void(n.enableMerageInAtlas=!1)},a.isAtlas=function(e){return e instanceof laya.webgl.atlas.AtlasWebGLCanvas},xr._enable(),a.beginFlush=function(){for(var e=xr.instance,t=e.getAtlaserCount(),i=0;t>i;i++){var n=e.getAtlaserByIndex(i).texture;n._flashCacheImageNeedFlush&&a.flashFlushImage(n)}},a.drawToCanvas=function(e,t,i,n,o,s){(0>=i||0>=n)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),i|=0,n|=0,o|=0,s|=0;var r=xx.create(i,n,6408,5121,0,!1);r.start(),r.clear(0,0,0,0),Ns.context.clear(),As.renders[t]._fun(e,Ns.context,o,Js.height-n+s),Ns.context.flush(),r.end();var a=r.getData(0,0,i,n);if(r.recycle(),a.byteLength!=i*n*4)return void console.log("drawToCanvas error: w:"+i+",h:"+n+",datalen:"+a.byteLength);var l=new wS;l._canvas=Or.createElement("canvas"),l.size(i,n);var h=l._canvas.getContext("2d");Or.canvas.size(i,n);var c=Or.context,u=c.createImageData(i,n);return u.data.set(new Uint8ClampedArray(a.buffer)),l._imgData=u,c.putImageData(u,0,0),h.save(),h.translate(0,n),h.scale(1,-1),h.drawImage(Or.canvas.source,0,0),h.restore(),l},a.createFilterAction=function(e){var t;switch(e){case 32:t=new dd}return t},a.addTextureToAtlas=function(e){e._uvID++,xr._atlasRestore++,e.bitmap.enableMerageInAtlas&&xr.instance.addToAtlas(e)},a.getTexturePixels=function(e,t,i,n,o){Ns.context.ctx.clear();var s=new Bd;s.graphics.drawTexture(e,-t,-i);var r=xx.create(n,o);r.start(),r.clear(0,0,0,0),s.render(Ns.context,0,0),Ns.context.ctx.flush(),r.end();for(var a=r.getData(0,0,n,o),l=[],h=0,c=o-1;c>=0;c--)for(var u=0;n>u;u++)h=4*(c*n+u),l.push(a[h]),l.push(a[h+1]),l.push(a[h+2]),l.push(a[h+3]);return l},a.skinAniSprite=function(){var e=new _r;return e},GS.create=function(e,t){var i=new wS;return i._imgData=t,i.flipY=!1,i},cs._filterStart=function(e,t,i,n,o){var s=e.getValue("bounds"),r=xx.create(s.width,s.height);if(r.start(),r.clear(0,0,0,0),e.addValue("src",r),e.addValue("ScissorTest",Js.worldScissorTest),Js.worldScissorTest){var a=new Ch;a.copyFrom(i.ctx._clipRect),e.addValue("clipRect",a),Js.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},cs._filterEnd=function(e,t,i,n,o){var s=e.getValue("bounds"),r=e.getValue("src");r.end();var a=xx.create(s.width,s.height);a.start(),a.clear(0,0,0,0),e.addValue("out",a),t._set$P("_filterCache",a),t._set$P("_isHaveGlowFilter",e.getValue("_isHaveGlowFilter"))},cs._EndTarget=function(e,t){var i=e.getValue("src");i.recycle();var n=e.getValue("out");n.end();var o=e.getValue("ScissorTest");if(o){Js.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),t.ctx.save();var s=e.getValue("clipRect");t.ctx.clipRect(s.x,s.y,s.width,s.height)}},cs._useSrc=function(e){var t=e.getValue("out");t.end(),t=e.getValue("src"),t.start(),t.clear(0,0,0,0)},cs._endSrc=function(e){var t=e.getValue("src");t.end()},cs._useOut=function(e){var t=e.getValue("src");t.end(),t=e.getValue("out"),t.start(),t.clear(0,0,0,0)},cs._endOut=function(e){var t=e.getValue("out");t.end()},cs._recycleScope=function(e){e.recycle()},cs._filter=function(e,t,i,n){var o=this._next;if(o){var s=e.filters,r=s.length;if(1==r&&32==s[0].type)return t.ctx.save(),t.ctx.setFilters([s[0]]),o._fun.call(o,e,t,i,n),void t.ctx.restore();var a,l,h=qs.create(),c=Ah.TEMP,u=t.ctx._getTransformMatrix(),d=Ph.create();u.copyTo(d);var p=0,f=0,_=!1,m=e._$P._filterCache?e._$P._filterCache:null;if(!m||e._repaint){_=e._isHaveGlowFilter(),h.addValue("_isHaveGlowFilter",_),_&&(p=50,f=25),l=new Ch,l.copyFrom(e.getSelfBounds()),l.x+=e.x,l.y+=e.y,l.x-=e.pivotX+4,l.y-=e.pivotY+4;var g=l.x,v=l.y;if(l.width+=p+8,l.height+=p+8,c.x=l.x*d.a+l.y*d.c,c.y=l.y*d.d+l.x*d.b,l.x=c.x,l.y=c.y,c.x=l.width*d.a+l.height*d.c,c.y=l.height*d.d+l.width*d.b,l.width=c.x,l.height=c.y,l.width<=0||l.height<=0)return;m&&m.recycle(),h.addValue("bounds",l);var y=Gs.create([h,e,t,0,0],cs._filterStart);t.addRenderObject(y),t.ctx._renderKey=0,t.ctx._shader2D.glTexture=null;var b=e.x-g+f,E=e.y-v+f;o._fun.call(o,e,t,b,E),y=Gs.create([h,e,t,0,0],cs._filterEnd),t.addRenderObject(y);for(var x=0;r>x;x++){0!=x&&(y=Gs.create([h],cs._useSrc),t.addRenderObject(y),a=wd.create(1,0),Ph.TEMP.identity(),t.ctx.drawTarget(h,0,0,l.width,l.height,Ph.TEMP,"out",a,null,nr.TOINT.overlay),y=Gs.create([h],cs._useOut),t.addRenderObject(y));var S=s[x];S.action.apply3d(h,e,t,0,0)}y=Gs.create([h,t],cs._EndTarget),t.addRenderObject(y)}else{if(_=e._$P._isHaveGlowFilter?e._$P._isHaveGlowFilter:!1,_&&(p=50,f=25),l=e.getBounds(),l.width<=0||l.height<=0)return;l.width+=p,l.height+=p,c.x=l.x*d.a+l.y*d.c,c.y=l.y*d.d+l.x*d.b,l.x=c.x,l.y=c.y,c.x=l.width*d.a+l.height*d.c,c.y=l.height*d.d+l.width*d.b,l.width=c.x,l.height=c.y,h.addValue("out",m)}i=i-f-e.x,n=n-f-e.y,c.setTo(i,n),d.transformPoint(c),i=c.x+l.x,n=c.y+l.y,a=wd.create(1,0),Ph.TEMP.identity(),t.ctx.drawTarget(h,i,n,l.width,l.height,Ph.TEMP,"out",a,null,nr.TOINT.overlay),y=Gs.create([h],cs._recycleScope),t.addRenderObject(y),d.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=e._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=e._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=e._uint8ArraySlice),!0},e.onStageResize=function(t,i){null!=e.mainContext&&(e.mainContext.viewport(0,0,t,i),Js.width=t,Js.height=i)},e.onInvalidGLRes=function(){xr.instance.freeAll(),Gh.releaseContentManagers(!0),e.doNodeRepaint(i.stage),e.mainContext.viewport(0,0,Js.width,Js.height),i.stage.event("devicelost")},e.doNodeRepaint=function(t){0==t.numChildren&&t.repaint();for(var i=0;i<t.numChildren;i++)e.doNodeRepaint(t.getChildAt(i))},e.init=function(t,i,n){e.mainCanvas=t,GS._createContext=function(e){return new Sd(e)},wS._createContext=function(e){return new Sd(e)};var o=laya.webgl.WebGL.mainContext;if(null!=o.getShaderPrecisionFormat){var s=o.getShaderPrecisionFormat(35633,36338),r=o.getShaderPrecisionFormat(35632,36338);e.shaderHighPrecision=!(!s.precision||!r.precision)}else e.shaderHighPrecision=!1;if(e.compressAstc=o.getExtension("WEBGL_compressed_texture_astc"),e.compressAtc=o.getExtension("WEBGL_compressed_texture_atc"),e.compressEtc=o.getExtension("WEBGL_compressed_texture_etc"),e.compressEtc1=o.getExtension("WEBGL_compressed_texture_etc1"),e.compressPvrtc=o.getExtension("WEBGL_compressed_texture_pvrtc"),e.compressS3tc=o.getExtension("WEBGL_compressed_texture_s3tc"),e.compressS3tc_srgb=o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),o.deleteTexture1=o.deleteTexture,o.deleteTexture=function(e){e==Fs.curBindTexValue&&(Fs.curBindTexValue=null),o.deleteTexture1(e)},e.onStageResize(i,n),null==e.mainContext)throw new Error("webGL getContext err!");ea.__init__(),xr.__init__(),Cd.__init__(),Ys.__init__(),Sd.__init__(),wd.__init__(),pr.__init__(),gS.__int__(o),nr._init_(o),Ns.isConchApp&&conch.setOnInvalidGLRes(e.onInvalidGLRes)},e.compressAstc=null,e.compressAtc=null,e.compressEtc=null,e.compressEtc1=null,e.compressPvrtc=null,e.compressS3tc=null,e.compressS3tc_srgb=null,e.mainCanvas=null,e.mainContext=null,e.antialias=!0,e.shaderHighPrecision=!1,e._bg_null=[0,0,0,0],e}(),dr=function(){function e(e,t,i){this._value=0,this._name2int=e,this._int2name=t,this._int2nameMap=i}o(e,"laya.webgl.shader.ShaderDefines");var t=e.prototype;return t.add=function(e){return"string"==typeof e&&(e=this._name2int[e]),this._value|=e,this._value},t.addInt=function(e){return this._value|=e,this._value},t.remove=function(e){return"string"==typeof e&&(e=this._name2int[e]),this._value&=~e,this._value},t.isDefine=function(e){return(this._value&e)===e},t.getValue=function(){return this._value},t.setValue=function(e){this._value=e},t.toNameDic=function(){var t=this._int2nameMap[this._value];return t?t:e._toText(this._value,this._int2name,this._int2nameMap)},e._reg=function(e,t,i,n){i[e]=t,n[t]=e},e._toText=function(e,t,i){var n=i[e];if(n)return n;for(var o={},s=1,r=0;32>r&&(s=1<<r,!(s>e));r++)if(e&s){var a=t[s];a&&(o[a]="")}return i[e]=o,o},e._toInt=function(e,t){for(var i=e.split("."),n=0,o=0,s=i.length;s>o;o++){var r=t[i[o]];if(!r)throw new Error("Defines to int err:"+e+"/"+i[o]);n|=r}return n},e}(),pr=function(){function e(){this.ALPHA=1,this.shaderType=0,this.defines=new Cd}o(e,"laya.webgl.shader.d2.Shader2D");var t=e.prototype;return t.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},e.__init__=function(){vS.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),vS.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),vS.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),vS.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n	for(float j = 0.0;j<=c_IterationTime; ++j){\n		vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n		vec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n	}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),
vS.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),vS.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),vS.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),vS.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;");var e,t;e="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",t='precision mediump float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',vS.preCompile2D(0,1,e,t,null),e="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",t='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n	vec4 a = vec4(color.r, color.g, color.b, color.a);\n	a.w = alpha;\n	a.xyz *= alpha;\n	gl_FragColor = a;\n	#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',vS.preCompile2D(0,2,e,t,null),e="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",t="precision mediump float;\n//precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n	gl_FragColor.rgb*=alpha;\n}",vS.preCompile2D(0,4,e,t,null),e="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",t='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',vS.preCompile2D(0,256,e,t,null),e="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",t="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n	vec4 t_color = texture2D(texture, v_texcoord);\n	gl_FragColor = t_color.rgba * v_color;\n	gl_FragColor *= alpha;\n}",vS.preCompile2D(0,512,e,t,null)},e}(),fr=function(){function e(){}return o(e,"laya.webgl.shader.ShaderValue"),e}(),_r=function(){function e(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new Ph}o(e,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var t=e.prototype;return t.init=function(t,i,n){if(i)this._vs=i;else{this._vs=[];var o=t.width,s=t.height,r=1,a=1,l=1,h=1;this._vs.push(0,0,0,0,r,a,l,h),this._vs.push(o,0,1,0,r,a,l,h),this._vs.push(o,s,1,1,r,a,l,h),this._vs.push(0,s,0,1,r,a,l,h)}n?this._ps=n:(e._defaultPS||(e._defaultPS=[],e._defaultPS.push(0,1,3,3,1,2)),this._ps=e._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=t},t.init2=function(e,t,i,n,o){this.transform&&(this.transform=null),i?this._ps=i:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=n,this._uvs=o,this.mEleNum=this._ps.length,this.mTexture=e,(Ns.isConchNode||Ns.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},t._initMyData=function(){var t=0,i=0,n=this._verticles.length,o=4*n;this._vs=e._tempVS;var s=!1;if(Ns.isConchNode||Ns.isConchApp?(this._vs.length=o,s=!0):this._vs.length<o&&(this._vs.length=o,s=!0),e._tVSLen=o,s)for(;o>t;)this._vs[t]=this._verticles[i],this._vs[t+1]=this._verticles[i+1],this._vs[t+2]=this._uvs[i],this._vs[t+3]=this._uvs[i+1],this._vs[t+4]=1,this._vs[t+5]=1,this._vs[t+6]=1,this._vs[t+7]=1,t+=8,i+=2;else for(;o>t;)this._vs[t]=this._verticles[i],this._vs[t+1]=this._verticles[i+1],this._vs[t+2]=this._uvs[i],this._vs[t+3]=this._uvs[i+1],t+=8,i+=2},t.getData2=function(t,i,n){this.mVBBuffer=t,this.mIBBuffer=i,this._initMyData(),t.appendEx2(this._vs,Float32Array,e._tVSLen,4),this._indexStart=i._byteLength;var o;o=e._tempIB,o.length<this._ps.length&&(o.length=this._ps.length);for(var s=0,r=this._ps.length;r>s;s++)o[s]=this._ps[s]+n;i.appendEx2(o,Uint16Array,this._ps.length,2)},t.getData=function(e,t,i){if(this.mVBBuffer=e,this.mIBBuffer=t,e.append(this.mVBData),this._indexStart=t._byteLength,this.mIBData.start!=i){for(var n=0,o=this._ps.length;o>n;n++)this.mIBData[n]=this._ps[n]+i;this.mIBData.start=i}t.append(this.mIBData)},t.render=function(e,t,i){if(Ns.isWebGL&&this.mTexture){e._renderKey=0,e._shader2D.glTexture=null,mr.getInstance().addSkinMesh(this);var n=Ys.createShape(e,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,wd.create(512,0));this.transform||(this.transform=Ph.EMPTY),this.transform.translate(t,i),Ph.mul(this.transform,e._curMat,this._tempMatrix),this.transform.translate(-t,-i);var o=n.shaderValue,s=o.u_mmat2||Js.getMatrArray();Js.mat2MatArray(this._tempMatrix,s),o.textureHost=this.mTexture,o.offsetX=0,o.offsetY=0,o.u_mmat2=s,o.ALPHA=e._shader2D.ALPHA,e._submits[e._submits._length++]=n}else Ns.isConchApp&&this.mTexture&&(this.transform||(this.transform=Ph.EMPTY),e.setSkinMesh&&e.setSkinMesh(t,i,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},e._tempVS=[],e._tempIB=[],e._defaultPS=null,e._tVSLen=0,e}(),mr=function(){function e(){this.ib=null,this.vb=null;ur.mainContext;this.ib=bw.create(35048),this.vb=yw.create(8)}o(e,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var t=e.prototype;return t.addSkinMesh=function(e){e.getData2(this.vb,this.ib,this.vb._byteLength/32)},t.reset=function(){this.vb.clear(),this.ib.clear()},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),gr=function(){function e(t){this._index=0,this._size=14,this._italic=-2,e._cache2=e._cache2||[],this.setFont(t||"14px Arial")}o(e,"laya.webgl.text.FontInContext");var t=e.prototype;return t.setFont=function(t){var i=e._cache2[t];if(i)this._words=i[0],this._size=i[1];else{this._words=t.split(" ");for(var n=0,o=this._words.length;o>n;n++)if(this._words[n].indexOf("px")>0){this._index=n;break}this._size=parseInt(this._words[this._index]),e._cache2[t]=[this._words,this._size]}this._text=null,this._italic=-2},t.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},t.hasType=function(e){for(var t=0,i=this._words.length;i>t;t++)if(this._words[t]===e)return t;return-1},t.removeType=function(e){for(var t=0,i=this._words.length;i>t;t++)if(this._words[t]===e){this._words.splice(t,1),this._index>t&&this._index--;break}this._text=null,this._italic=-2},t.copyTo=function(e){return e._text=this._text,e._size=this._size,e._index=this._index,e._words=this._words.slice(),e._italic=-2,e},t.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},s(0,t,"size",function(){return this._size},function(e){this._size=e,this._words[this._index]=e+"px",this._text=null}),e.create=function(t){var i=e._cache[t];return i?i:i=e._cache[t]=new e(t)},e.EMPTY=new e,e._cache={},e._cache2=null,e}(),vr=function(){function e(){this._sourceStr=null}o(e,"laya.webgl.text.CharSegment");var t=e.prototype;return i.imps(t,{"laya.webgl.text.ICharSegment":!0}),t.textToSpit=function(e){this._sourceStr=e},t.getChar=function(e){return this._sourceStr.charAt(e)},t.getCharCode=function(e){return this._sourceStr.charCodeAt(e)},t.length=function(){return this._sourceStr.length},e}(),yr=function(){function e(){}var t;return o(e,"laya.webgl.text.DrawText"),e.__init__=function(){e._charsTemp=new Array,e._drawValue=new t,e._charSeg=new vr},e.customCharSeg=function(t){e._charSeg=t},e.getChar=function(t,i,n){var o=SS.createOneChar(t,n);return-1!=i&&(e._charsCache[i]=o),o},e._drawSlow=function(t,i,n,o,s,r,a,l,h,c,u,d,p,f,_){var m,g,v=e._drawValue.value(r,l,h,c,p,f,_),y=0,b=0,E=e._charsTemp,x=0,S=NaN;if(o)for(E.length=o.length,y=0,b=o.length;b>y;y++)g=o[y],S=g.charNum+v.txtID,E[y]=m=e._charsCache[S]||e.getChar(g["char"],S,v),m.active();else{var w=n instanceof laya.utils.WordText?n.toString():n;if(fS.CharacterCache){e._charSeg.textToSpit(w);var C=e._charSeg.length();for(E.length=C,y=0,b=C;b>y;y++)S=e._charSeg.getCharCode(y)+v.txtID,E[y]=m=e._charsCache[S]||e.getChar(e._charSeg.getChar(y),S,v),m.active(),x+=m.cw}else E.length=0,m=e.getChar(w,-1,v),m.active(),x+=m.cw,E[0]=m}var T=0;null!==a&&"left"!==a&&(T=-("center"==a?x/2:x));var I,A,N=NaN,P=0;if(o)for(y=0,b=E.length;b>y;y++)m=E[y],m.isSpace||(g=o[y],N=m.borderSize,I=m.texture,i._drawText(I,u+T+g.x*p-N,d+g.y*f-N,I.width,I.height,s,0,0,0,0));else{for(y=0,b=E.length;b>y;y++)m=E[y],m.isSpace||(N=m.borderSize,I=m.texture,i._drawText(I,u+T-N,d-N,I.width,I.height,s,0,0,0,0),t&&(A=t[P++],A||(A=t[P-1]=[]),A[0]=I,A[1]=T-N,A[2]=-N)),T+=m.cw;t&&(t.length=P)}},e._drawFast=function(e,t,i,n,o){for(var s,r,a=0,l=e.length;l>a;a++)r=e[a],s=r[0],s.active(),t._drawText(s,n+r[1],o+r[2],s.width,s.height,i,0,0,0,0)},e.drawText=function(t,n,o,s,r,a,l,h,c,u,d,p){if(void 0===p&&(p=0),!(n&&0===n.length||o&&0===o.length)){var f=s.a,_=s.d;(0!==s.b||0!==s.c)&&(f=_=1);var m=1!==f||1!==_;if(m&&i.stage.transform){var g=i.stage.transform;m=g.a===f&&g.d===_}else m=!1;if(m){s=s.copyTo(Sd._tmpMatrix);var v=s.tx,y=s.ty;s.scale(1/f,1/_),s._checkTransform(),u*=f,d*=_,u+=v-s.tx,d+=y-s.ty}else f=_=1;if(o)e._drawSlow(null,t,n,o,s,r,a,l,h,c,u,d,f,_,p);else{if(null===n.toUpperCase){var b=f+1e5*_,E=n;return void(E.changed||E.id!==b?(E.id=b,E.changed=!1,e._drawSlow(E.save,t,n,o,s,r,a,l,h,c,u,d,f,_,p)):e._drawFast(E.save,t,s,u,d))}var x=n+r.toString()+l+h+c+f+_+a,S=e._textsCache[x];fS.CharacterCache?S?e._drawFast(S,t,s,u,d):(e._textsCache.__length||(e._textsCache.__length=0),e._textsCache.__length>nc.WebGLTextCacheCount&&(e._textsCache={},e._textsCache.__length=0,e._curPoolIndex=0),e._textCachesPool[e._curPoolIndex]?(S=e._textsCache[x]=e._textCachesPool[e._curPoolIndex],S.length=0):e._textCachesPool[e._curPoolIndex]=S=e._textsCache[x]=[],e._textsCache.__length++,e._curPoolIndex++,e._drawSlow(S,t,n,o,s,r,a,l,h,c,u,d,f,_,p)):e._drawSlow(S,t,n,o,s,r,a,l,h,c,u,d,f,_,p)}}},e._charsTemp=null,e._textCachesPool=[],e._curPoolIndex=0,e._charsCache={},e._textsCache={},e._drawValue=null,e.d=[],e._charSeg=null,e.__init$=function(){t=function(){function e(){}o(e,"");var t=e.prototype;return t.value=function(t,i,n,o,s,r,a){this.font=t,this.fillColor=i,this.borderColor=n,this.lineWidth=o,this.scaleX=s,this.scaleY=r,this.underLine=a;var l=t.toString()+s+r+o+i+n+a;return this.txtID=e._keymap[l],this.txtID||(this.txtID=1e-7*++e._keymapCount,e._keymap[l]=this.txtID),this},e.clear=function(){e._keymap={},e._keymapCount=1},e._keymap={},e._keymapCount=1,e}()},e}(),br=function(){function e(e,t,n){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new i,void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this._cells=null,this._rowInfo=null,this._init(e,t),this._atlasID=n}var t,i;o(e,"laya.webgl.atlas.AtlasGrid");var n=e.prototype;return n.getAltasID=function(){return this._atlasID},n.setAltasID=function(e){e>=0&&(this._atlasID=e)},n.addTex=function(e,t,i){var n=this._get(t,i);return 0==n.ret?n:(this._fill(n.x,n.y,t,i,e),this._texCount++,n)},n._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},n._init=function(e,i){if(this._width=e,this._height=i,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=r(this._height);for(var n=0;n<this._height;n++)this._rowInfo[n]=new t;return this._clear(),!0},n._get=function(e,t){var i=new Er;if(e>=this._failSize.width&&t>=this._failSize.height)return i;for(var n=-1,o=-1,s=this._width,r=this._height,a=this._cells,l=0;r>l;l++)if(!(this._rowInfo[l].spaceCount<e))for(var h=0;s>h;){var c=3*(l*s+h);if(0!=a[c]||a[c+1]<e||a[c+2]<t)h+=a[c+1];else{n=h,o=l;for(var u=0;e>u;u++)if(a[3*u+c+2]<t){n=-1;break}if(!(0>n))return i.ret=!0,i.x=n,i.y=o,i;h+=a[c+1]}}return i},n._fill=function(e,t,i,n,o){var s=this._width,r=this._height;this._check(s>=e+i&&r>=t+n);for(var a=t;n+t>a;++a){this._check(this._rowInfo[a].spaceCount>=i),this._rowInfo[a].spaceCount-=i;for(var l=0;i>l;l++){var h=3*(e+a*s+l);this._check(0==this._cells[h]),this._cells[h]=o,this._cells[h+1]=i,this._cells[h+2]=n}}if(e>0)for(a=0;n>a;++a){var c=0;for(l=e-1;l>=0&&0==this._cells[3*((t+a)*s+l)];--l,++c);for(l=c;l>0;--l)this._cells[3*((t+a)*s+e-l)+1]=l,this._check(l>0)}if(t>0)for(l=e;e+i>l;++l){for(c=0,a=t-1;a>=0&&0==this._cells[3*(l+a*s)];--a,c++);for(a=c;a>0;--a)this._cells[3*(l+(t-a)*s)+2]=a,this._check(a>0)}},n._check=function(e){0==e&&console.log("xtexMerger 错误啦")},n._clear=function(){this._texCount=0;for(var e=0;e<this._height;e++)this._rowInfo[e].spaceCount=this._width;for(var t=0;t<this._height;t++)for(var i=0;i<this._width;i++){var n=3*(t*this._width+i);this._cells[n]=0,this._cells[n+1]=this._width-i,this._cells[n+2]=this._width-t}this._failSize.width=this._width+1,this._failSize.height=this._height+1},e.__init$=function(){t=function(){function e(){this.spaceCount=0}return o(e,""),e}(),i=function(){function e(){this.width=0,this.height=0}return o(e,""),e}()},e}(),Er=function(){function e(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return o(e,"laya.webgl.atlas.MergeFillInfo"),e}(),xr=function(){function e(e,t,i,n){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=e,this._height=t,this._gridSize=i,this._maxAtlaserCount=n,this._gridNumX=e/i,this._gridNumY=t/i,this._curAtlasIndex=0,this._atlaserArray=[]}o(e,"laya.webgl.atlas.AtlasResourceManager");var t=e.prototype;return t.setAtlasParam=function(t,i,n,o){if(1==this._setAtlasParam)return e._sid_=0,this._width=t,this._height=i,this._gridSize=n,this._maxAtlaserCount=o,this._gridNumX=t/n,this._gridNumY=i/n,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},t.pushData=function(t){var i=t.bitmap,n=-1,o=null,s=0,r=0,a=0;for(s=0,r=this._atlaserArray.length;r>s&&(a=(this._curAtlasIndex+s)%r,o=this._atlaserArray[a],n=o.findBitmapIsExist(i),-1==n);s++);if(-1!=n){var l=o.InAtlasWebGLImagesOffsetValue[n];return _=l[0],m=l[1],o.addToAtlas(t,_,m),!0}this._setAtlasParam=!1;for(var h=Math.ceil((t.bitmap.width+2)/this._gridSize),c=Math.ceil((t.bitmap.height+2)/this._gridSize),u=!1,d=0;2>d;d++){var p=this._maxAtlaserCount;for(s=0;p>s;s++){a=(this._curAtlasIndex+s)%p,this._atlaserArray.length-1>=a||this._atlaserArray.push(new Td(this._gridNumX,this._gridNumY,this._width,this._height,e._sid_++));var f=this._atlaserArray[a],_=0,m=0,g=f.addTex(1,h,c);if(g.ret){_=g.x*this._gridSize+1,m=g.y*this._gridSize+1,i.lock=!0,f.addToAtlasTexture(i,_,m),f.addToAtlas(t,_,m),u=!0,this._curAtlasIndex=a;break}}if(u)break;this._atlaserArray.push(new Td(this._gridNumX,this._gridNumY,this._width,this._height,e._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return u||console.log(">>>AtlasManager pushData error"),u},t.addToAtlas=function(e){laya.webgl.atlas.AtlasResourceManager.instance.pushData(e)},t.garbageCollection=function(){if(this._needGC===!0){for(var e=this._atlaserArray.length-this._maxAtlaserCount,t=0;e>t;t++)this._atlaserArray[t].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+e),this._atlaserArray.splice(0,e),this._needGC=!1}return!0},t.freeAll=function(){for(var e=0,t=this._atlaserArray.length;t>e;e++)this._atlaserArray[e].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},t.getAtlaserCount=function(){return this._atlaserArray.length},t.getAtlaserByIndex=function(e){return this._atlaserArray[e]},s(1,e,"atlasLimitWidth",function(){return e._atlasLimitWidth},function(t){e._atlasLimitWidth=t}),s(1,e,"enabled",function(){return nc.atlasEnable}),s(1,e,"atlasLimitHeight",function(){return e._atlasLimitHeight},function(t){e._atlasLimitHeight=t}),s(1,e,"instance",function(){return e._Instance||(e._Instance=new e(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),e._Instance}),e._enable=function(){nc.atlasEnable=!0},e._disable=function(){nc.atlasEnable=!1},e.__init__=function(){e.atlasTextureWidth=2048,e.atlasTextureHeight=2048,e.maxTextureCount=6,e.atlasLimitWidth=512,e.atlasLimitHeight=512},e._atlasLimitWidth=0,e._atlasLimitHeight=0,e.gridSize=16,e.atlasTextureWidth=0,e.atlasTextureHeight=0,e.maxTextureCount=0,e._atlasRestore=0,e.BOARDER_TYPE_NO=0,e.BOARDER_TYPE_RIGHT=1,e.BOARDER_TYPE_LEFT=2,e.BOARDER_TYPE_BOTTOM=4,e.BOARDER_TYPE_TOP=8,e.BOARDER_TYPE_ALL=15,e._sid_=0,e._Instance=null,e}(),Sr=function(){function e(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new Ch}o(e,"laya.webgl.resource.RenderTargetMAX");var t=e.prototype;return t.setSP=function(e){this._sp=e},t.size=function(e,t){var n=this;return this._width===e&&this._height===t?void this.target.size(e,t):(this.repaint=!0,this._width=e,this._height=t,this.target?this.target.size(e,t):this.target=xx.create(e,t),void(this.target.hasListener("recovered")||this.target.on("recovered",this,function(e){i.timer.callLater(n._sp,n._sp.repaint)})))},t._flushToTarget=function(e,t){if(!t._destroy){var i=Js.worldScissorTest,n=Js.worldClipRect;Js.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,Js.worldScissorTest=!1,ur.mainContext.disable(3089);var o=Js.worldAlpha,s=Js.worldMatrix4,r=Js.worldMatrix,a=Js.worldFilters,l=Js.worldShaderDefines;if(Js.worldMatrix=Ph.EMPTY,Js.restoreTempArray(),Js.worldMatrix4=Js.TEMPMAT4_ARRAY,Js.worldAlpha=1,Js.worldFilters=null,Js.worldShaderDefines=null,_x.activeShader=null,t.start(),nc.showCanvasMark?t.clear(0,1,0,.3):t.clear(0,0,0,0),e.flush(),t.end(),_x.activeShader=null,Js.worldAlpha=o,Js.worldMatrix4=s,Js.worldMatrix=r,Js.worldFilters=a,Js.worldShaderDefines=l,Js.worldScissorTest=i,i){var h=Js.height-n.y-n.height;ur.mainContext.scissor(n.x,h,n.width,n.height),ur.mainContext.enable(3089)}Js.worldClipRect=n}},t.flush=function(e){this.repaint&&(this._flushToTarget(e,this.target),this.repaint=!1)},t.drawTo=function(e,t,i,n,o){e.drawTexture(this.target.getTexture(),t,i,n,o,0,0)},t.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},e}(),wr=function(){function t(){}return o(t,"laya.wx.mini.MiniAdpter"),t.getJson=function(e){return JSON.parse(e)},t.init=function(n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!t._inited&&(t._inited=!0,t.window=e,t.window.hasOwnProperty("wx")&&!(t.window.navigator.userAgent.indexOf("MiniGame")<0))){t.isZiYu=o,t.isPosMsgYu=n,t.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(s){}if(t.isZiYu||(Ir.setNativeFileDir("/layaairGame"),Ir.existDir(Ir.fileNativeDir,h.create(t,t.onMkdirCallBack))),t.systemInfo=t.window.wx.getSystemInfoSync(),"ios 10.1.1"===t.systemInfo.system.toLowerCase())try{laya.webgl.resource.WebGLCharImage.canUseCanvas=!1}catch(s){}t.window.focus=function(){},i._getUrlPath=function(){},i.getUrlPath=function(){},t.window.logtime=function(e){},t.window.alertTimeLog=function(e){},t.window.resetShareInfo=function(){},t.window.CanvasRenderingContext2D=function(){},t.window.CanvasRenderingContext2D.prototype=t.window.wx.createCanvas().getContext("2d").__proto__,t.window.document.body.appendChild=function(){},t.EnvConfig.pixelRatioInt=0,a.getPixelRatio=t.pixelRatio,t._preCreateElement=Or.createElement,Or.createElement=t.createElement,a.createShaderCondition=t.createShaderCondition,Dr.parseXMLFromString=t.parseXMLFromString,fw._createInputElement=Tr._createInputElement,t.EnvConfig.load=Tu.prototype.load,Tu.prototype.load=Fu.prototype.load,Tu.prototype._loadImage=Cr.prototype._loadImage,Ts._baseClass=Ar,Ar.__init__(),t.onReciveData()}},t.onReciveData=function(){laya.wx.mini.MiniAdpter.isZiYu&&t.window.wx.onMessage(function(e){"opendatacontext"==e.isLoad?e.url&&(Ir.ziyuFileData[e.url]=e.atlasdata,Ir.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl):"openJsondatacontext"==e.isLoad?e.url&&(Ir.ziyuFileData[e.url]=e.atlasdata):"openJsondatacontextPic"==e.isLoad&&(Ir.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl)})},t.measureText=function(e){var i=t._measureText(e);return i||(i={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),i},t.getUrlEncode=function(e,t){return"arraybuffer"==t?"":"utf8"},t.downLoadFile=function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n="utf8");var o=Ir.getFileInfo(e);o?null!=i&&i.runWith([0]):Ir.downLoadFile(e,t,i,n)},t.remove=function(e,t){Ir.deleteFile("",e,t,"",0)},t.removeAll=function(){Ir.deleteAll()},t.hasNativeFile=function(e){return Ir.isLocalNativeFile(e)},t.getFileInfo=function(e){return Ir.getFileInfo(e)},t.getFileList=function(){return Ir.filesListObj},t.exitMiniProgram=function(){t.window.wx.exitMiniProgram()},t.onMkdirCallBack=function(e,t){e||(Ir.filesListObj=JSON.parse(t.data),Ir.fakeObj=JSON.parse(t.data))},t.pixelRatio=function(){if(!t.EnvConfig.pixelRatioInt)try{return t.EnvConfig.pixelRatioInt=t.systemInfo.pixelRatio,t.systemInfo.pixelRatio}catch(e){}return t.EnvConfig.pixelRatioInt},t.createElement=function(e){if("canvas"==e){var i;return 1==t.idx?t.isZiYu?(i=t.window.sharedCanvas,i.style={}):i=t.window.canvas:i=t.window.wx.createCanvas(),t.idx++,i}if("textarea"==e||"input"==e)return t.onCreateInput(e);if("div"==e){var n=t._preCreateElement(e);return n.contains=function(e){return null},n.removeChild=function(e){},n}return t._preCreateElement(e)},t.onCreateInput=function(e){var i=t._preCreateElement(e);return i.focus=Tr.wxinputFocus,i.blur=Tr.wxinputblur,i.style={},i.value=0,i.parentElement={},i.placeholder={},i.type={},i.setColor=function(e){},i.setType=function(e){},i.setFontFace=function(e){},i.addEventListener=function(e){},i.contains=function(e){return null},i.removeChild=function(e){},i},t.createShaderCondition=function(e){var t=this,i=function(){return t[e.replace("this.","")]};return i},t.sendAtlasToOpenDataContext=function(e){if(!laya.wx.mini.MiniAdpter.isZiYu){var i=Tu.getRes(Cs.formatURL(e));if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";i.meta.image.split(",");if(i.meta&&i.meta.image)for(var n=i.meta.image.split(","),o=e.indexOf("/")>=0?"/":"\\",s=e.lastIndexOf(o),r=s>=0?e.substr(0,s+1):"",a=0,l=n.length;l>a;a++)n[a]=r+n[a];else n=[e.replace(".json",".png")];for(a=0;a<n.length;a++){var h=n[a];t.postInfoToContext(e,h,i)}}},t.postInfoToContext=function(e,i,n){var o={frames:n.frames,meta:n.meta},s=i,r=Ir.getFileInfo(Cs.formatURL(i));if(r)var a=r.md5,l=Ir.getFileNativePath(a);else l=s;if(!l)throw"获取图集的磁盘url路径不存在！";t.window.wx.postMessage({url:e,atlasdata:o,imgNativeUrl:l,imgReadyUrl:s,isLoad:"opendatacontext"})},t.sendSinglePicToOpenDataContext=function(e){var i=Cs.formatURL(e),n=Ir.getFileInfo(i);if(n){var o=n.md5,s=Ir.getFileNativePath(o);e=i}else s=e;if(!s)throw"获取图集的磁盘url路径不存在！";t.window.wx.postMessage({url:e,imgNativeUrl:s,imgReadyUrl:e,isLoad:"openJsondatacontextPic"})},t.sendJsonDataToDataContext=function(e){if(!laya.wx.mini.MiniAdpter.isZiYu){var i=Tu.getRes(e);if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";t.window.wx.postMessage({url:e,atlasdata:i,isLoad:"openJsondatacontext"})}},t.EnvConfig=null,t.window=null,t._preCreateElement=null,t._inited=!1,t.systemInfo=null,t.isZiYu=!1,t.isPosMsgYu=!1,t.autoCacheFile=!0,t.minClearSize=5242880,t.subNativeFiles=null,t.subNativeheads=[],t.subMaps=[],t.AutoCacheDownFile=!1,t._measureText=null,t.parseXMLFromString=function(t){var i;t=t.replace(/>\s+</g,"><");try{i=(new e.Parser.DOMParser).parseFromString(t,"text/xml")}catch(n){throw"需要引入xml解析库文件"}return i},t.idx=1,n(t,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),t}(),Cr=function(){function e(){}o(e,"laya.wx.mini.MiniImage",null,"MiniImage$4");var t=e.prototype;return t._loadImage=function(t){var i=this;if(wr.isZiYu)return void e.onCreateImage(t,i,!0);var n=!1;if(Ir.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=Ir.loadPath)t=t.split(Ir.loadPath)[1];else{var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=t;""!=o&&(t=t.split(o)[1]),t||(t=s)}if(wr.subNativeFiles&&0==wr.subNativeheads.length)for(var r in wr.subNativeFiles){var a=wr.subNativeFiles[r];wr.subNativeheads=wr.subNativeheads.concat(a);for(var l=0;l<a.length;l++)wr.subMaps[a[l]]=r+"/"+a[l]}if(wr.subNativeFiles&&-1!=t.indexOf("/")){var c=t.split("/")[0]+"/";if(c&&-1!=wr.subNativeheads.indexOf(c)){var u=wr.subMaps[c];t=t.replace(c,u)}}}else n=!0,t=Cs.formatURL(t);Ir.getFileInfo(t)?e.onCreateImage(t,i,!n):-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?wr.isZiYu?e.onCreateImage(t,i,!0):Ir.downOtherFiles(t,new h(e,e.onDownImgCallBack,[t,i]),t):e.onCreateImage(t,i,!0)},e.onDownImgCallBack=function(t,i,n,o){void 0===o&&(o=""),n?i.onError(null):e.onCreateImage(t,i,!1,o)},e.onCreateImage=function(e,t,i,n){function o(){h.onload=null,h.onerror=null,delete t.imgCache[e]}void 0===i&&(i=!1),void 0===n&&(n="");var s;if(wr.autoCacheFile)if(i)if(wr.isZiYu){var r=Cs.formatURL(e);s=Ir.ziyuFileTextureData[r]?Ir.ziyuFileTextureData[r]:e}else s=e;else if(""!=n)s=n;else{var a=Ir.getFileInfo(e),l=a.md5;s=Ir.getFileNativePath(l)}else s=i?e:n;null==t.imgCache&&(t.imgCache={});var h,c=function(){o(),t.onLoaded(h)},u=function(){o(),delete Ir.filesListObj[e],delete Ir.fakeObj[e],t.event("error","Load image failed")};"nativeimage"==t._type?(h=new Or.window.Image,h.crossOrigin="",h.onload=c,h.onerror=u,h.src=s,t.imgCache[e]=h):new xw.create(s,{onload:c,onerror:u,onCreate:function(i){h=i,t.imgCache[e]=i}})},e}(),Tr=function(){function t(){}return o(t,"laya.wx.mini.MiniInput",null,"MiniInput$4"),t._createInputElement=function(){fw._initInput(fw.area=Or.createElement("textarea")),fw._initInput(fw.input=Or.createElement("input")),fw.inputContainer=Or.createElement("div"),fw.inputContainer.style.position="absolute",fw.inputContainer.style.zIndex=1e5,Or.container.appendChild(fw.inputContainer),fw.inputContainer.setPos=function(e,t){fw.inputContainer.style.left=e+"px",fw.inputContainer.style.top=t+"px"},i.stage.on("resize",null,t._onStageResize),wx.onWindowResize&&wx.onWindowResize(function(t){e.dispatchEvent&&e.dispatchEvent("resize")}),jh._soundClass=Gu,jh._musicClass=Gu;var n=wr.systemInfo.model,o=wr.systemInfo.system;-1!=n.indexOf("iPhone")&&(Or.onIPhone=!0,Or.onIOS=!0,Or.onIPad=!0,Or.onAndroid=!1),-1==o.indexOf("Android")&&-1==o.indexOf("Adr")||(Or.onAndroid=!0,Or.onIPhone=!1,Or.onIOS=!1,Or.onIPad=!1)},t._onStageResize=function(){var e=i.stage._canvasTransform.identity();e.scale(Or.width/Ns.canvas.width/a.getPixelRatio(),Or.height/Ns.canvas.height/a.getPixelRatio())},t.wxinputFocus=function(e){var t=fw.inputElement.target;t&&!t.editable||(wr.window.wx.offKeyboardConfirm(),wr.window.wx.offKeyboardInput(),wr.window.wx.showKeyboard({defaultValue:t.text,maxLength:t.maxChars,multiple:t.multiline,confirmHold:!0,confirmType:"done",success:function(e){},fail:function(e){}}),wr.window.wx.onKeyboardConfirm(function(e){var i=e?e.value:"";t.text=i,t.event("input"),laya.wx.mini.MiniInput.inputEnter()}),wr.window.wx.onKeyboardInput(function(e){var i=e?e.value:"";return t.multiline||-1==i.indexOf("\n")?(t.text=i,void t.event("input")):void laya.wx.mini.MiniInput.inputEnter()}))},t.inputEnter=function(){fw.inputElement.target.focus=!1},t.wxinputblur=function(){t.hideKeyboard()},t.hideKeyboard=function(){wr.window.wx.offKeyboardConfirm(),wr.window.wx.offKeyboardInput(),wr.window.wx.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})},t}(),Ir=function(){function e(){}return o(e,"laya.wx.mini.MiniFileMgr",null,"MiniFileMgr$4"),e.isLocalNativeFile=function(e){for(var t=0,i=wr.nativefiles.length;i>t;t++)if(-1!=e.indexOf(wr.nativefiles[t]))return!0;
return!1},e.getFileInfo=function(t){var i=t,n=e.fakeObj[i];return null==n?null:n},e.read=function(t,i,n,o,s,r){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r="");var a;a=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:a,encoding:i,success:function(e){null!=n&&n.runWith([0,e])},fail:function(t){t&&""!=o?e.downFiles(o,i,n,o,s,r):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,s,r,a){void 0===i&&(i="ascii"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0);var l=e.wxdown({url:t,success:function(l){200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,s,r,a):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l])},fail:function(e){null!=n&&n.runWith([1,e])}});l.onProgressUpdate(function(e){null!=n&&n.runWith([2,e.progress])})},e.readFile=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0),e.fs.readFile({filePath:t,encoding:i,success:function(r){(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))&&(wr.autoCacheFile||s)?(null!=n&&n.runWith([0,r]),e.copyFile(t,o,null,i,a)):null!=n&&n.runWith([0,r])},fail:function(e){e&&null!=n&&n.runWith([1,e])}})},e.downOtherFiles=function(t,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===s&&(s=!0),e.wxdown({url:t,success:function(t){200===t.statusCode?(wr.autoCacheFile||o)&&-1==n.indexOf("wx.qlogo.cn")&&-1==n.indexOf(".php")?(null!=i&&i.runWith([0,t.tempFilePath]),e.copyFile(t.tempFilePath,n,null,"",s)):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(e){null!=i&&i.runWith([1,e])}})},e.downLoadFile=function(t,n,o,s){void 0===n&&(n=""),void 0===s&&(s="ascii"),wr.window.navigator.userAgent.indexOf("MiniGame")<0?i.loader.load(t,o):"image"==n||"sound"==n?e.downOtherFiles(t,o,t,!0,!1):e.downFiles(t,s,o,t,!0,n,!1)},e.copyFile=function(t,i,n,o,s){void 0===o&&(o=""),void 0===s&&(s=!0);var r=t.split("/"),a=r[r.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(a);e.fakeObj[i]={md5:a,readyUrl:i,size:0,times:Or.now(),encoding:o};var c=52428800,u=4194304,d=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>wr.minClearSize&&(wr.minClearSize=r.size),e.onClearCacheRes()),e.deleteFile(t,i,n,o,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>wr.minClearSize&&(wr.minClearSize=r.size),e.onClearCacheRes()),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,a,!0,o,n,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}})},fail:function(e){null!=n&&n.runWith([1,e])}})},e.onClearCacheRes=function(){var t=wr.minClearSize,i=[];for(var n in e.filesListObj)"fileUsedSize"!=n&&i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,s=1,r=i.length;r>s;s++){var a=i[s];if(o>=t)break;o+=a.size,e.deleteFile("",a.readyUrl)}},e.sortOn=function(e,t,i){return void 0===i&&(i=0),16==i?e.sort(function(e,i){return e[t]-i[t]}):18==i?e.sort(function(e,i){return i[t]-e[t]}):e.sort(function(e,i){return e[t]-i[t]})},e.getFileNativePath=function(e){return laya.wx.mini.MiniFileMgr.fileNativeDir+"/"+e},e.deleteFile=function(t,i,n,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=0);var r=e.getFileInfo(i),a=e.getFileNativePath(r.md5);e.fs.unlink({filePath:a,success:function(r){var a=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(s){e.onSaveFile(i,t,a,o,n,s.size)},fail:function(e){null!=n&&n.runWith([1,e])}})}else e.onSaveFile(i,t,a,o,n,s)},fail:function(e){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)t.push(e.filesListObj[i]);for(var n=1,o=t.length;o>n;n++){var s=t[n];e.deleteFile("",s.readyUrl)}laya.wx.mini.MiniFileMgr.filesListObj&&laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.wx.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,s,r){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===r&&(r=0);var a=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[a]={md5:i,readyUrl:t,size:r,times:Or.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+r,e.writeFilesList(a,JSON.stringify(e.filesListObj),!0),null!=s&&s.runWith([0])}else if(e.filesListObj[a]){var l=parseInt(e.filesListObj[a].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-l,e.fakeObj[a].md5==e.filesListObj[a].md5&&delete e.fakeObj[a],delete e.filesListObj[a],e.writeFilesList(a,JSON.stringify(e.filesListObj),!1),null!=s&&s.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(e){},fail:function(e){}}),!wr.isZiYu&&wr.isPosMsgYu&&wr.window.wx.postMessage&&wr.window.wx.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(e){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,t])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="utf8"),void 0===o&&(o="");var s,r=e.getFileNativePath(t);try{s=e.fs.readFileSync(r,i),null!=n&&n.runWith([0,{data:s}])}catch(a){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=wr.window.wx.env.USER_DATA_PATH+t},e.filesListObj={},e.fakeObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=wr.window.wx.getFileSystemManager()},"wxdown",function(){return this.wxdown=wr.window.wx.downloadFile}]),e}(),Ar=function(){function e(){}return o(e,"laya.wx.mini.MiniLocalStorage",null,"MiniLocalStorage$3"),e.__init__=function(){e.items=e},e.setItem=function(e,t){try{wx.setStorageSync(e,t)}catch(i){wx.setStorage({key:e,data:t})}},e.getItem=function(e){return wx.getStorageSync(e)},e.setJSON=function(t,i){e.setItem(t,i)},e.getJSON=function(t){return e.getItem(t)},e.removeItem=function(e){wx.removeStorageSync(e)},e.clear=function(){wx.clearStorageSync()},e.getStorageInfoSync=function(){try{var e=wx.getStorageInfoSync();return console.log(e.keys),console.log(e.currentSize),console.log(e.limitSize),e}catch(t){}return null},e.support=!0,e.items=null,e}(),Nr=function(){function e(){}return o(e,"laya.utils.Stat"),s(1,e,"onclick",null,function(t){e._sp&&e._sp.on("click",e._sp,t),e._canvas&&(e._canvas.source.onclick=t,e._canvas.source.style.pointerEvents="")}),e.show=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),Ns.isConchApp&&!Ns.isConchWebGL?void(Or.window.conch.showFPS&&Or.window.conch.showFPS(t,i)):(Ns.isConchWebGL||Or.onMiniGame||Or.onLimixiu||Or.onKGMiniGame||Or.onBDMiniGame||Or.onTTMiniGame||Or.onQGMiniGame||Or.onVVMiniGame||Or.onBLMiniGame||Or.onAlipayMiniGame||Or.onQQMiniGame||Or.onTTMiniGame||Or.onHWMiniGame||Or.onTBMiniGame||(e._useCanvas=!0),e._show=!0,e._fpsData.length=60,e._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},e._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},e._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},e._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},Ns.isWebGL?(e._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},Ns.is3DMode?(e._view[0].title="FPS(3D)",e._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},e._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},e._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(e._view[0].title="FPS(WebGL)",e._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})):e._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},e._useCanvas?e.createUIPre(t,i):e.createUI(t,i),void e.enable())},e.createUIPre=function(t,n){var o=Or.pixelRatio;i.stage.useRetinalCanvas&&(o=3),e._width=130*o,e._vx=75*o,e._height=o*(12*e._view.length+3*o)+4,e._fontSize=12*o;for(var s=0;s<e._view.length;s++)e._view[s].x=4,e._view[s].y=s*e._fontSize+2*o;e._canvas||(e._canvas=new GS("2D"),e._canvas.size(e._width,e._height),e._ctx=e._canvas.getContext("2d"),e._ctx.textBaseline="top",e._ctx.font=e._fontSize+"px Sans-serif",e._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+t+"px;top:"+n+"px;width:"+e._width/o+"px;height:"+e._height/o+"px;"),e._first=!0,e.loop(),e._first=!1,Or.onKGMiniGame||Or.container.appendChild(e._canvas.source)},e.createUI=function(t,n){var o=e._sp,s=Or.pixelRatio;i.stage.useRetinalCanvas&&(s=3),o||(o=new Bd,e._leftText=new fS,e._leftText.pos(5,5),e._leftText.color="#ffffff",o.addChild(e._leftText),e._txt=new fS,e._txt.pos(80*s,5),e._txt.color="#ffffff",o.addChild(e._txt),e._sp=o),o.pos(t,n);for(var r="",a=0;a<e._view.length;a++){var l=e._view[a];r+=l.title+"\n"}e._leftText.text=r;var h=138*s,c=s*(12*e._view.length+3*s)+4;e._txt.fontSize=e._fontSize*s,e._leftText.fontSize=e._fontSize*s,o.size(h,c),o.graphics.clear(),o.graphics.setAlpha(.5),o.graphics.drawRect(0,0,h,c,"#999999"),o.graphics.setAlpha(1),e.loop()},e.enable=function(){i.timer.frameLoop(1,e,e.loop)},e.hide=function(){e._show=!1,i.timer.clear(e,e.loop),e._canvas&&Or.removeElement(e._canvas.source)},e.clear=function(){e.trianglesFaces=e.drawCall=e.shaderCall=e.spriteCount=e.spriteRenderUseCacheCount=e.treeNodeCollision=e.treeSpriteCollision=e.canvasNormal=e.canvasBitmap=e.canvasReCache=0},e.loop=function(){e._count++;var t=Or.now();if(!(t-e._timer<1e3)){var i=e._count;if(e.FPS=Math.round(1e3*i/(t-e._timer)),e._show){e.trianglesFaces=Math.round(e.trianglesFaces/i),e._useCanvas?(e.drawCall=Math.round(e.drawCall/i)-2,e.shaderCall=Math.round(e.shaderCall/i),e.spriteCount=Math.round(e.spriteCount/i)-1):(e.drawCall=Math.round(e.drawCall/i)-2,e.shaderCall=Math.round(e.shaderCall/i)-4,e.spriteCount=Math.round(e.spriteCount/i)-4),e.spriteRenderUseCacheCount=Math.round(e.spriteRenderUseCacheCount/i),e.canvasNormal=Math.round(e.canvasNormal/i),e.canvasBitmap=Math.round(e.canvasBitmap/i),e.canvasReCache=Math.ceil(e.canvasReCache/i),e.treeNodeCollision=Math.round(e.treeNodeCollision/i),e.treeSpriteCollision=Math.round(e.treeSpriteCollision/i);var n=e.FPS>0?Math.floor(1e3/e.FPS).toString():" ";e._fpsStr=e.FPS+(e.renderSlow?" slow":"")+" "+n,e._spriteStr=e.spriteCount+(e.spriteRenderUseCacheCount?"/"+e.spriteRenderUseCacheCount:""),e._canvasStr=e.canvasReCache+"/"+e.canvasNormal+"/"+e.canvasBitmap,e.currentMemorySize=Gh.systemResourceManager.memorySize,e._useCanvas?e.renderInfoPre():e.renderInfo(),e.clear()}e._count=0,e._timer=t}},e.renderInfoPre=function(){if(e._canvas){var t=e._ctx;t.clearRect(e._first?0:e._vx,0,e._width,e._height);for(var i=0;i<e._view.length;i++){var n=e._view[i];e._first&&(t.fillStyle="white",t.fillText(n.title,n.x,n.y,null,null,null)),t.fillStyle=n.color;var o=e[n.value];"M"==n.units&&(o=Math.floor(o/1048576*100)/100+" M"),t.fillText(o+"",n.x+e._vx,n.y,null,null,null)}}},e.renderInfo=function(){for(var t="",i=0;i<e._view.length;i++){var n=e._view[i],o=e[n.value];"M"==n.units&&(o=Math.floor(o/1048576*100)/100+" M"),"K"==n.units&&(o=Math.floor(o/1024*100)/100+" K"),t+=o+"\n"}e._txt.text=t},e.FPS=0,e.loopCount=0,e.shaderCall=0,e.drawCall=0,e.trianglesFaces=0,e.spriteCount=0,e.spriteRenderUseCacheCount=0,e.treeNodeCollision=0,e.treeSpriteCollision=0,e.canvasNormal=0,e.canvasBitmap=0,e.canvasReCache=0,e.renderSlow=!1,e.currentMemorySize=0,e._fpsStr=null,e._canvasStr=null,e._spriteStr=null,e._fpsData=[],e._timer=0,e._count=0,e._view=[],e._fontSize=12,e._txt=null,e._leftText=null,e._sp=null,e._show=!1,e._useCanvas=!1,e._canvas=null,e._ctx=null,e._first=!1,e._vx=NaN,e._width=0,e._height=100,e}(),Pr=function(){function e(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}o(e,"laya.utils.Dragging");var t=e.prototype;return t.start=function(e,t,n,o,s,r,a,l){void 0===l&&(l=.92),this.clearTimer(),this.target=e,this.area=t,this.hasInertia=n,this.elasticDistance=t?o:0,this.elasticBackTime=s,this.data=r,this._disableMouseEvent=a,this.ratio=l,this._parent=e.parent,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,i.stage.on("mouseup",this,this.onStageMouseUp),i.stage.on("mouseout",this,this.onStageMouseUp),i.timer.frameLoop(1,this,this.loop)},t.clearTimer=function(){i.timer.clear(this,this.loop),i.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},t.stop=function(){this._dragging&&(Fh.instance.disableMouseEvent=!1,i.stage.off("mouseup",this,this.onStageMouseUp),i.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},t.loop=function(){var e=this._parent.getMousePoint(),t=e.x,n=e.y,o=t-this._lastX,s=n-this._lastY;if(this._clickOnly){if(!(Math.abs(o*i.stage._canvasTransform.getScaleX())>1||Math.abs(s*i.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),Fh.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(o,s);0===o&&0===s||(this._lastX=t,this._lastY=n,this.target.x+=o*this._elasticRateX,this.target.y+=s*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},t.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var e=this.area.x-this.target.x;else e=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-e/this.elasticDistance),this.target.y<this.area.y)var t=this.area.y-this.target.y;else t=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-t/this.elasticDistance)}},t.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},t.onStageMouseUp=function(e){if(Fh.instance.disableMouseEvent=!1,i.stage.off("mouseup",this,this.onStageMouseUp),i.stage.off("mouseout",this,this.onStageMouseUp),i.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var t=this._offsets.length,n=Math.min(t,6),o=this._offsets.length-n,s=t-1;s>o;s--)this._offsetY+=this._offsets[s--],this._offsetX+=this._offsets[s];this._offsetX=this._offsetX/n*2,this._offsetY=this._offsetY/n*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),i.timer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},t.checkElastic=function(){var e=NaN,t=NaN;if(this.target.x<this.area.x?e=this.area.x:this.target.x>this.area.x+this.area.width&&(e=this.area.x+this.area.width),this.target.y<this.area.y?t=this.area.y:this.target.y>this.area.y+this.area.height&&(t=this.area.y+this.area.height),isNaN(e)&&isNaN(t))this.clear();else{var i={};isNaN(e)||(i.x=e),isNaN(t)||(i.y=t),this._tween=Lr.to(this.target,i,this.elasticBackTime,Br.sineOut,h.create(this,this.clear),0,!1,!1)}},t.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(i.timer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},t.clear=function(){if(this.target){this.clearTimer();var e=this.target;this.target=null,this._parent=null,e.event("dragend",this.data)}},e}(),Rr=function(){function e(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}o(e,"laya.utils.WordText");var t=e.prototype;return t.setText=function(e){this.changed=!0,this._text=e},t.toString=function(){return this._text},t.charCodeAt=function(e){return this._text?this._text.charCodeAt(e):NaN},t.charAt=function(e){return this._text?this._text.charAt(e):null},s(0,t,"length",function(){return this._text?this._text.length:0}),e}(),Lr=function(){function e(){this.gid=0}o(e,"laya.utils.Tween");var t=e.prototype;return t.to=function(e,t,i,n,o,s,r){return void 0===s&&(s=0),void 0===r&&(r=!1),this._create(e,t,i,n,o,s,r,!0,!1,!0)},t.from=function(e,t,i,n,o,s,r){return void 0===s&&(s=0),void 0===r&&(r=!1),this._create(e,t,i,n,o,s,r,!1,!1,!0)},t._create=function(t,n,o,s,r,a,l,h,c,u){if(!t)throw new Error("Tween:target is null");this._target=t,this._duration=o,this._ease=s||n.ease||e.easeNone,this._complete=r||n.complete,this._delay=a,this._props=[],this._usedTimer=0,this._startTimer=Or.now(),this._usedPool=c,this._delayParam=null,this.update=n.update;var d=t.$_GID||(t.$_GID=Dr.getGID());return e.tweenMap[d]?(l&&e.clearTween(t),e.tweenMap[d].push(this)):e.tweenMap[d]=[this],u?0>=a?this.firstStart(t,n,h):(this._delayParam=[t,n,h],i.scaleTimer.once(a,this,this.firstStart,this._delayParam)):this._initProps(t,n,h),this},t.firstStart=function(e,t,i){return this._delayParam=null,e.destroyed?void this.clear():(this._initProps(e,t,i),void this._beginLoop())},t._initProps=function(e,t,i){for(var n in t)if("number"==typeof e[n]){var o=i?e[n]:t[n],s=i?t[n]:e[n];this._props.push([n,o,s-o]),i||(e[n]=o)}},t._beginLoop=function(){i.scaleTimer.frameLoop(1,this,this._doEase)},t._doEase=function(){this._updateEase(Or.now())},t._updateEase=function(t){var i=this._target;if(i){if(i.destroyed)return e.clearTween(i);var n=this._usedTimer=t-this._startTimer-this._delay;if(!(0>n)){if(n>=this._duration)return this.complete();for(var o=n>0?this._ease(n,0,1,this._duration):0,s=this._props,r=0,a=s.length;a>r;r++){var l=s[r];i[l[0]]=l[1]+o*l[2]}this.update&&this.update.run()}}},t.complete=function(){if(this._target){i.scaleTimer.runTimer(this,this.firstStart);for(var e=this._target,t=this._props,n=this._complete,o=0,s=t.length;s>o;o++){var r=t[o];e[r[0]]=r[1]+r[2]}this.update&&this.update.run(),this.clear(),n&&n.run()}},t.pause=function(){i.scaleTimer.clear(this,this._beginLoop),i.scaleTimer.clear(this,this._doEase),i.scaleTimer.clear(this,this.firstStart);var e=Or.now(),t=NaN;t=e-this._startTimer-this._delay,0>t&&(this._usedTimer=t)},t.setStartTime=function(e){this._startTimer=e},t.clear=function(){this._target&&(this._remove(),this._clear())},t._clear=function(){this.pause(),i.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,Hr.recover("tween",this))},t.recover=function(){this._usedPool=!0,this._clear()},t._remove=function(){var t=e.tweenMap[this._target.$_GID];if(t)for(var i=0,n=t.length;n>i;i++)if(t[i]===this){t.splice(i,1);break}},t.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=Or.now(),this._delayParam)return void i.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);for(var e=this._props,t=0,n=e.length;n>t;t++){var o=e[t];this._target[o[0]]=o[1]}i.scaleTimer.once(this._delay,this,this._beginLoop)},t.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Or.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?i.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},s(0,t,"progress",null,function(e){var t=e*this._duration;this._startTimer=Or.now()-this._delay-t}),e.to=function(t,i,n,o,s,r,a,l){return void 0===r&&(r=0),void 0===a&&(a=!1),void 0===l&&(l=!0),Hr.getItemByClass("tween",e)._create(t,i,n,o,s,r,a,!0,l,!0)},e.from=function(t,i,n,o,s,r,a,l){return void 0===r&&(r=0),void 0===a&&(a=!1),void 0===l&&(l=!0),Hr.getItemByClass("tween",e)._create(t,i,n,o,s,r,a,!1,l,!0)},e.clearAll=function(t){if(t&&t.$_GID){var i=e.tweenMap[t.$_GID];if(i){for(var n=0,o=i.length;o>n;n++)i[n]._clear();i.length=0}}},e.clear=function(e){e.clear()},e.clearTween=function(t){e.clearAll(t)},e.easeNone=function(e,t,i,n){return i*e/n+t},e.tweenMap={},e}(),Or=(function(){function e(){}return o(e,"laya.utils.Mouse"),s(1,e,"cursor",function(){return e._style.cursor},function(t){e._style.cursor=t}),e.hide=function(){"none"!=e.cursor&&(e._preCursor=e.cursor,e.cursor="none")},e.show=function(){"none"==e.cursor&&(e._preCursor?e.cursor=e._preCursor:e.cursor="auto")},e._preCursor=null,n(e,["_style",function(){return this._style=Or.document.body.style}]),e}(),function(){function n(){}return o(n,"laya.utils.Browser"),s(1,n,"container",function(){return n.__init__(),n._container||(n._container=n.createElement("div"),n._container.id="layaContainer",n.document.body.appendChild(n._container)),n._container},function(e){n._container=e}),s(1,n,"pixelRatio",function(){return n.__init__(),n.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1?2:a.getPixelRatio()}),s(1,n,"isMiniGame",function(){return laya.utils.Browser.onMiniGame||laya.utils.Browser.onBDMiniGame||laya.utils.Browser.onQGMiniGame||laya.utils.Browser.onKGMiniGame||laya.utils.Browser.onVVMiniGame||laya.utils.Browser.onAlipayMiniGame||laya.utils.Browser.onQQMiniGame||laya.utils.Browser.onBLMiniGame||laya.utils.Browser.onTTMiniGame||laya.utils.Browser.onHWMiniGame||laya.utils.Browser.onTBMiniGame}),s(1,n,"document",function(){return n.__init__(),n._document}),s(1,n,"clientHeight",function(){return n.__init__(),n.window.innerHeight||n.document.body.clientHeight||n.document.documentElement.clientHeight}),s(1,n,"window",function(){return n.__init__(),n._window}),s(1,n,"height",function(){return n.__init__(),(i.stage&&i.stage.canvasRotation?n.clientWidth:n.clientHeight)*n.pixelRatio}),s(1,n,"width",function(){return n.__init__(),(i.stage&&i.stage.canvasRotation?n.clientHeight:n.clientWidth)*n.pixelRatio}),s(1,n,"clientWidth",function(){return n.__init__(),n.window.innerWidth||n.document.body.clientWidth}),n.__init__=function(){if(!n._window){n._window=a.getWindow(),n._document=n.window.document,n._window.addEventListener("message",function(e){laya.utils.Browser._onMessage(e)},!1),n.document.__createElement=n.document.createElement,e.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return e.setTimeout(t,1e3/60)};var i=e.document.body.style;i["-webkit-user-select"]="none",i["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",n.userAgent=n.window.navigator.userAgent,n.u=n.userAgent,n.onIOS=!!n.u.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),n.onMobile=n.u.indexOf("Mobile")>-1,n.onIPhone=n.u.indexOf("iPhone")>-1,n.onMac=n.u.indexOf("Mac OS X")>-1,n.onIPad=n.u.indexOf("iPad")>-1,n.onAndroid=n.u.indexOf("Android")>-1||n.u.indexOf("Adr")>-1,n.onWP=n.u.indexOf("Windows Phone")>-1,n.onQQBrowser=n.u.indexOf("QQBrowser")>-1,n.onMQQBrowser=n.u.indexOf("MQQBrowser")>-1||n.u.indexOf("Mobile")>-1&&n.u.indexOf("QQ")>-1,n.onIE=!!n.window.ActiveXObject||"ActiveXObject"in n.window,n.onWeiXin=n.u.indexOf("MicroMessenger")>-1,n.onPC=!n.onMobile,n.onSafari=n.u.indexOf("Safari")>-1,n.onFirefox=n.u.indexOf("Firefox")>-1,n.onEdge=n.u.indexOf("Edge")>-1,n.onMiniGame=n.u.indexOf("MiniGame")>-1,n.onBDMiniGame=n.u.indexOf("SwanGame")>-1,n.onHWMiniGame=laya.utils.Browser.window.hasOwnProperty("hbs"),n.u.indexOf("OPPO")>-1&&n.u.indexOf("MiniGame")>-1&&(n.onQGMiniGame=!0,n.onMiniGame=!1),laya.utils.Browser.window.hasOwnProperty("bl")&&n.u.indexOf("MiniGame")>-1&&(n.onBLMiniGame=!0,n.onMiniGame=!1),laya.utils.Browser.window.hasOwnProperty("qq")&&n.u.indexOf("MiniGame")>-1&&(n.onQQMiniGame=!0,n.onMiniGame=!1),laya.utils.Browser.window.hasOwnProperty("tt")&&n.u.indexOf("MiniGame")>-1&&(n.onTTMiniGame=!0,n.onMiniGame=!1),n.u.indexOf("VVGame")>-1&&(n.onVVMiniGame=!0),n.onKGMiniGame=n.u.indexOf("QuickGame")>-1,n.onLimixiu=n.u.indexOf("limixiu")>-1,n.onIPhoneX=/iPhone/gi.test(n.window.navigator.userAgent)&&375==Math.min(n.clientHeight,n.clientWidth)&&812==Math.max(n.clientHeight,n.clientWidth),n.httpProtocol="http:"==n.window.location.protocol,n.u.indexOf("AlipayMiniGame")>-1&&(n.onAlipayMiniGame=!0,n.onMiniGame=!1),(n.u.indexOf("TB")>-1||n.u.indexOf("Taobao")>-1||n.u.indexOf("TM/")>-1)&&laya.utils.Browser.window.hasOwnProperty("my")&&(n.onTBMiniGame=!0),n.onMiniGame&&null==n.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),n.webAudioEnabled=!!(n.window.AudioContext||n.window.webkitAudioContext||n.window.mozAudioContext),n.soundType=n.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",id=n.webAudioEnabled?nd:td,n.webAudioEnabled&&nd.initWebAudio(),n.onTBMiniGame||td._initMusicAudio(),n.enableTouch="ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch,e.focus(),jh._soundClass=id,jh._musicClass=td,Ns._mainCanvas=Ns._mainCanvas||GS.create("2D"),n.canvas||(n.canvas=GS.create("2D"),n.context=n.canvas.getContext("2d"))}},n._onMessage=function(e){if(e.data&&"size"==e.data.name){if(n.window.innerWidth=e.data.width,n.window.innerHeight=e.data.height,n.window.__innerHeight=e.data.clientHeight,!n.document.createEvent)return void console.warn("no document.createEvent");var t=n.document.createEvent("HTMLEvents");return t.initEvent("resize",!1,!1),void n.window.dispatchEvent(t)}},n.createElement=function(e){return n.__init__(),n.document.__createElement(e)},n.getElementById=function(e){return n.__init__(),n.document.getElementById(e)},n.removeElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},n.now=function(){return a.now()},n._window=null,n._document=null,n._container=null,n.userAgent=null,n.u=null,n.onIOS=!1,n.onMac=!1,n.onMobile=!1,n.onIPhone=!1,n.onIPad=!1,n.onAndroid=!1,n.onWP=!1,n.onQQBrowser=!1,n.onMQQBrowser=!1,n.onSafari=!1,n.onFirefox=!1,n.onEdge=!1,n.onIE=!1,n.onWeiXin=!1,n.onMiniGame=!1,n.onTTMiniGame=!1,n.onBDMiniGame=!1,n.onKGMiniGame=!1,n.onQGMiniGame=!1,n.onVVMiniGame=!1,n.onQQMiniGame=!1,n.onLimixiu=!1,n.onBLMiniGame=!1,n.onAlipayMiniGame=!1,n.onHWMiniGame=!1,n.onTBMiniGame=!1,n.onPC=!1,n.httpProtocol=!1,n.webAudioEnabled=!1,n.soundType=null,n.enableTouch=!1,n.canvas=null,n.context=null,n.onIPhoneX=!1,n.__init$=function(){},n}()),Mr=function(){function e(){this._strsToID={},this._idToStrs=[],this._length=0}o(e,"laya.utils.StringKey");var t=e.prototype;return t.add=function(e){var t=this._strsToID[e];return null!=t?t:(this._idToStrs[this._length]=e,this._strsToID[e]=this._length++)},t.getID=function(e){var t=this._strsToID[e];return null==t?-1:t},t.getName=function(e){var t=this._idToStrs[e];return null==t?void 0:t},e}(),Dr=function(){function e(){}return o(e,"laya.utils.Utils"),e.toRadian=function(t){return t*e._pi2},e.toAngle=function(t){return t*e._pi},e.toHexColor=function(e){if(0>e||isNaN(e))return null;for(var t=e.toString(16);t.length<6;)t="0"+t;return"#"+t},e.getGID=function(){return e._gid++},e.concatArray=function(e,t){if(!t)return e;if(!e)return t;var i=0,n=t.length;for(i=0;n>i;i++)e.push(t[i]);return e},e.clearArray=function(e){return e?(e.length=0,e):e},e.copyArray=function(e,t){if(e||(e=[]),!t)return e;e.length=t.length;var i=0,n=t.length;for(i=0;n>i;i++)e[i]=t[i];return e},e.getGlobalRecByPoints=function(e,t,i,n,o){var s;s=new Ah(t,i),s=e.localToGlobal(s);var r;return r=new Ah(n,o),r=e.localToGlobal(r),Ch._getWrapRec([s.x,s.y,r.x,r.y])},e.getGlobalPosAndScale=function(t){return e.getGlobalRecByPoints(t,0,0,1,1)},e.bind=function(e,t){var i=e;return i=e.bind(t)},e.measureText=function(e,t){return a.measureText(e,t)},e.updateOrder=function(e){if(!e||e.length<2)return!1;for(var t,i=1,n=0,o=e.length,s=NaN;o>i;){for(n=i,t=e[n],s=e[n]._zOrder;--n>-1&&e[n]._zOrder>s;)e[n+1]=e[n];e[n+1]=t,i++}var r=t.parent.conchModel;if(r)if(null!=r.updateZOrder)r.updateZOrder();else{for(i=0;o>i;i++)r.removeChild(e[i].conchModel);for(i=0;o>i;i++)r.addChildAt(e[i].conchModel,i)}return!0},e.transPointList=function(e,t,i){var n=0,o=e.length;for(n=0;o>n;n+=2)e[n]+=t,e[n+1]+=i},e.parseInt=function(e,t){void 0===t&&(t=0);var i=Or.window.parseInt(e,t);return isNaN(i)?0:i},e.getFileExtension=function(t){e._extReg.lastIndex=t.lastIndexOf(".");var i=e._extReg.exec(t);return i&&i.length>1?i[1].toLowerCase():null},e.getTransformRelativeToWindow=function(e,t,n){var o=i.stage,s=laya.utils.Utils.getGlobalPosAndScale(e),r=o._canvasTransform.clone(),a=r.tx,l=r.ty;r.rotate(-Math.PI/180*i.stage.canvasDegree),r.scale(i.stage.clientScaleX,i.stage.clientScaleY);var h=i.stage.canvasDegree%180!=0,c=NaN,u=NaN;h?(c=n+s.y,u=t+s.x,c*=r.d,u*=r.a,90==i.stage.canvasDegree?(c=a-c,u+=l):(c+=a,u=l-u)):(c=t+s.x,u=n+s.y,c*=r.a,u*=r.d,c+=a,u+=l);var d=NaN,p=NaN;return h?(d=r.d*s.height,p=r.a*s.width):(d=r.a*s.width,p=r.d*s.height),{x:c,y:u,scaleX:d,scaleY:p}},e.fitDOMElementInArea=function(t,n,o,s,r,a){t._fitLayaAirInitialized||(t._fitLayaAirInitialized=!0,t.style.transformOrigin=t.style.webKittransformOrigin="left top",t.style.position="absolute");var l=e.getTransformRelativeToWindow(n,o,s);t.style.transform=t.style.webkitTransform="scale("+l.scaleX+","+l.scaleY+") rotate("+i.stage.canvasDegree+"deg)",t.style.width=r+"px",t.style.height=a+"px",t.style.left=l.x+"px",t.style.top=l.y+"px"},e.isOkTextureList=function(e){if(!e)return!1;var t,i=0,n=e.length;for(i=0;n>i;i++)if(t=e[i],!t||!t.source)return!1;return!0},e.isOKCmdList=function(e){if(!e)return!1;var t,i,n=0,o=e.length,s=Ns._context;for(n=0;o>n;n++)switch(t=e[n],t.callee){case s._drawTexture:case s._fillTexture:case s._drawTextureWithTransform:if(i=t[0],!i||!i.source)return!1}return!0},e._gid=1,e._pi=180/Math.PI,e._pi2=Math.PI/180,e._extReg=/\.(\w+)\??/g,e.parseXMLFromString=function(e){var t;if(e=e.replace(/>\s+</g,"><"),t=(new DOMParser).parseFromString(e,"text/xml"),t.firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(t.firstChild.firstChild.textContent);return t},e}(),kr=function(){function e(){}return o(e,"laya.utils.CacheManager"),e.regCacheByFunction=function(t,i){e.unRegCacheByFunction(t,i);var n;n={tryDispose:t,getCacheList:i},e._cacheList.push(n)},e.unRegCacheByFunction=function(t,i){var n=0,o=0;for(o=e._cacheList.length,n=0;o>n;n++)if(e._cacheList[n].tryDispose==t&&e._cacheList[n].getCacheList==i)return void e._cacheList.splice(n,1)},e.forceDispose=function(){var t=0,i=e._cacheList.length;for(t=0;i>t;t++)e._cacheList[t].tryDispose(!0)},e.beginCheck=function(t){void 0===t&&(t=15e3),i.timer.loop(t,null,e._checkLoop)},e.stopCheck=function(){i.timer.clear(null,e._checkLoop)},e._checkLoop=function(){var t=e._cacheList;if(!(t.length<1)){var i=Or.now(),n=0,o=0;for(o=n=t.length;n>0&&(e._index++,e._index=e._index%o,t[e._index].tryDispose(!1),!(Or.now()-i>e.loopTimeLimit));)n--}},e.loopTimeLimit=2,e._cacheList=[],e._index=0,e}(),Br=function(){function e(){}return o(e,"laya.utils.Ease"),e.linearNone=function(e,t,i,n){return i*e/n+t},e.linearIn=function(e,t,i,n){return i*e/n+t},e.linearInOut=function(e,t,i,n){return i*e/n+t},e.linearOut=function(e,t,i,n){return i*e/n+t},e.bounceIn=function(t,i,n,o){return n-e.bounceOut(o-t,0,n,o)+i},e.bounceInOut=function(t,i,n,o){return.5*o>t?.5*e.bounceIn(2*t,0,n,o)+i:.5*e.bounceOut(2*t-o,0,n,o)+.5*n+i},e.bounceOut=function(e,t,i,n){return(e/=n)<1/2.75?i*(7.5625*e*e)+t:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t;
},e.backIn=function(e,t,i,n,o){return void 0===o&&(o=1.70158),i*(e/=n)*e*((o+1)*e-o)+t},e.backInOut=function(e,t,i,n,o){return void 0===o&&(o=1.70158),(e/=.5*n)<1?.5*i*(e*e*(((o*=1.525)+1)*e-o))+t:i/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+t},e.backOut=function(e,t,i,n,o){return void 0===o&&(o=1.70158),i*((e=e/n-1)*e*((o+1)*e+o)+1)+t},e.elasticIn=function(t,i,n,o,s,r){void 0===s&&(s=0),void 0===r&&(r=0);var a;return 0==t?i:1==(t/=o)?i+n:(r||(r=.3*o),!s||n>0&&n>s||0>n&&-n>s?(s=n,a=r/4):a=r/e.PI2*Math.asin(n/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*o-a)*e.PI2/r))+i)},e.elasticInOut=function(t,i,n,o,s,r){void 0===s&&(s=0),void 0===r&&(r=0);var a;return 0==t?i:2==(t/=.5*o)?i+n:(r||(r=o*(.3*1.5)),!s||n>0&&n>s||0>n&&-n>s?(s=n,a=r/4):a=r/e.PI2*Math.asin(n/s),1>t?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*o-a)*e.PI2/r))+i:s*Math.pow(2,-10*(t-=1))*Math.sin((t*o-a)*e.PI2/r)*.5+n+i)},e.elasticOut=function(t,i,n,o,s,r){void 0===s&&(s=0),void 0===r&&(r=0);var a;return 0==t?i:1==(t/=o)?i+n:(r||(r=.3*o),!s||n>0&&n>s||0>n&&-n>s?(s=n,a=r/4):a=r/e.PI2*Math.asin(n/s),s*Math.pow(2,-10*t)*Math.sin((t*o-a)*e.PI2/r)+n+i)},e.strongIn=function(e,t,i,n){return i*(e/=n)*e*e*e*e+t},e.strongInOut=function(e,t,i,n){return(e/=.5*n)<1?.5*i*e*e*e*e*e+t:.5*i*((e-=2)*e*e*e*e+2)+t},e.strongOut=function(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},e.sineInOut=function(e,t,i,n){return.5*-i*(Math.cos(Math.PI*e/n)-1)+t},e.sineIn=function(t,i,n,o){return-n*Math.cos(t/o*e.HALF_PI)+n+i},e.sineOut=function(t,i,n,o){return n*Math.sin(t/o*e.HALF_PI)+i},e.quintIn=function(e,t,i,n){return i*(e/=n)*e*e*e*e+t},e.quintInOut=function(e,t,i,n){return(e/=.5*n)<1?.5*i*e*e*e*e*e+t:.5*i*((e-=2)*e*e*e*e+2)+t},e.quintOut=function(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},e.quartIn=function(e,t,i,n){return i*(e/=n)*e*e*e+t},e.quartInOut=function(e,t,i,n){return(e/=.5*n)<1?.5*i*e*e*e*e+t:.5*-i*((e-=2)*e*e*e-2)+t},e.quartOut=function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},e.cubicIn=function(e,t,i,n){return i*(e/=n)*e*e+t},e.cubicInOut=function(e,t,i,n){return(e/=.5*n)<1?.5*i*e*e*e+t:.5*i*((e-=2)*e*e+2)+t},e.cubicOut=function(e,t,i,n){return i*((e=e/n-1)*e*e+1)+t},e.quadIn=function(e,t,i,n){return i*(e/=n)*e+t},e.quadInOut=function(e,t,i,n){return(e/=.5*n)<1?.5*i*e*e+t:.5*-i*(--e*(e-2)-1)+t},e.quadOut=function(e,t,i,n){return-i*(e/=n)*(e-2)+t},e.expoIn=function(e,t,i,n){return 0==e?t:i*Math.pow(2,10*(e/n-1))+t-.001*i},e.expoInOut=function(e,t,i,n){return 0==e?t:e==n?t+i:(e/=.5*n)<1?.5*i*Math.pow(2,10*(e-1))+t:.5*i*(-Math.pow(2,-10*--e)+2)+t},e.expoOut=function(e,t,i,n){return e==n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t},e.circIn=function(e,t,i,n){return-i*(Math.sqrt(1-(e/=n)*e)-1)+t},e.circInOut=function(e,t,i,n){return(e/=.5*n)<1?.5*-i*(Math.sqrt(1-e*e)-1)+t:.5*i*(Math.sqrt(1-(e-=2)*e)+1)+t},e.circOut=function(e,t,i,n){return i*Math.sqrt(1-(e=e/n-1)*e)+t},e.HALF_PI=.5*Math.PI,e.PI2=2*Math.PI,e}(),Vr=function(){function e(e){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,e?(this._u8d_=new Uint8Array(e),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}o(e,"laya.utils.Byte");var t=e.prototype;return t.___resizeBuffer=function(e){try{var t=new Uint8Array(e);null!=this._u8d_&&(this._u8d_.length<=e?t.set(this._u8d_):t.set(this._u8d_.subarray(0,e))),this._u8d_=t,this._d_=new DataView(t.buffer)}catch(i){throw"___resizeBuffer err:"+e}},t.getString=function(){return this.rUTF(this.getUint16())},t.getFloat32Array=function(e,t){var i=e+t;i=i>this._length?this._length:i;var n=new Float32Array(this._d_.buffer.slice(e,i));return this._pos_=i,n},t.getUint8Array=function(e,t){var i=e+t;i=i>this._length?this._length:i;var n=new Uint8Array(this._d_.buffer.slice(e,i));return this._pos_=i,n},t.getInt16Array=function(e,t){var i=e+t;i=i>this._length?this._length:i;var n=new Int16Array(this._d_.buffer.slice(e,i));return this._pos_=i,n},t.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var e=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,e},t.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var e=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,e},t.writeFloat32=function(e){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,e,this._xd_),this._pos_+=4},t.writeFloat64=function(e){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,e,this._xd_),this._pos_+=8},t.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var e=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,e},t.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var e=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,e},t.writeInt32=function(e){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,e,this._xd_),this._pos_+=4},t.writeUint32=function(e){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,e,this._xd_),this._pos_+=4},t.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var e=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,e},t.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var e=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,e},t.writeUint16=function(e){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,e,this._xd_),this._pos_+=2},t.writeInt16=function(e){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,e,this._xd_),this._pos_+=2},t.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},t.writeUint8=function(e){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,e),this._pos_++},t._getUInt8=function(e){return this._d_.getUint8(e)},t._getUint16=function(e){return this._d_.getUint16(e,this._xd_)},t._getMatrix=function(){var e=new Ph(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());return e},t.rUTF=function(e){for(var t="",i=this._pos_+e,n=0,o=0,s=0,r=String.fromCharCode,a=this._u8d_,l=0;this._pos_<i;)n=a[this._pos_++],128>n?0!=n&&(t+=r(n)):224>n?t+=r((63&n)<<6|127&a[this._pos_++]):240>n?(o=a[this._pos_++],t+=r((31&n)<<12|(127&o)<<6|127&a[this._pos_++])):(o=a[this._pos_++],s=a[this._pos_++],t+=r((15&n)<<18|(127&o)<<12|s<<6&127|127&a[this._pos_++])),l++;return t},t.getCustomString=function(e){for(var t="",i=0,n=0,o=0,s=String.fromCharCode,r=this._u8d_;e>0;)if(n=r[this._pos_],128>n)t+=s(n),this._pos_++,e--;else for(i=n-128,this._pos_++,e-=i;i>0;)n=r[this._pos_++],o=r[this._pos_++],t+=s(o<<8|n),i--;return t},t.clear=function(){this._pos_=0,this.length=0},t.__getBuffer=function(){return this._d_.buffer},t.writeUTFBytes=function(e){e+="";for(var t=0,i=e.length;i>t;t++){var n=e.charCodeAt(t);127>=n?this.writeByte(n):2047>=n?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|n>>6,128|63&n],this._pos_),this._pos_+=2):65535>=n?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|n>>12,128|n>>6&63,128|63&n],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n],this._pos_),this._pos_+=4)}},t.writeUTFString=function(e){var t=this.pos;this.writeUint16(1),this.writeUTFBytes(e);var i=this.pos-t-2;if(i>=65536)throw"writeUTFString byte len more than 65536";this._d_.setUint16(t,i,this._xd_)},t.readUTFString=function(){return this.readUTFBytes(this.getUint16())},t.getUTFString=function(){return this.readUTFString()},t.readUTFBytes=function(e){if(void 0===e&&(e=-1),0==e)return"";var t=this.bytesAvailable;if(e>t)throw"readUTFBytes error - Out of bounds";return e=e>0?e:t,this.rUTF(e)},t.getUTFBytes=function(e){return void 0===e&&(e=-1),this.readUTFBytes(e)},t.writeByte=function(e){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,e),this._pos_+=1},t.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},t.getByte=function(){return this.readByte()},t.ensureWrite=function(e){this._length<e&&(this._length=e),this._allocated_<e&&(this.length=e)},t.writeArrayBuffer=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),0>t||0>i)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=e.byteLength-t),this.ensureWrite(this._pos_+i);var n=new Uint8Array(e);this._u8d_.set(n.subarray(t,t+i),this._pos_),this._pos_+=i},t.readArrayBuffer=function(e){var t;return t=this._u8d_.buffer.slice(this._pos_,this._pos_+e),this._pos_=this._pos_+e,t},s(0,t,"pos",function(){return this._pos_},function(e){this._pos_=e}),s(0,t,"bytesAvailable",function(){return this._length-this._pos_}),s(0,t,"length",function(){return this._length},function(e){this._allocated_<e?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(e,2*this._allocated_))):this._allocated_>e&&this.___resizeBuffer(this._allocated_=e),this._length=e}),s(0,t,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(e){this._xd_="littleEndian"==e}),s(0,t,"buffer",function(){var e=this._d_.buffer;return e.byteLength==this.length?e:e.slice(0,this.length)}),e.getSystemEndian=function(){if(!e._sysEndian){var t=new ArrayBuffer(2);new DataView(t).setInt16(0,256,!0),e._sysEndian=256===new Int16Array(t)[0]?"littleEndian":"bigEndian"}return e._sysEndian},e.BIG_ENDIAN="bigEndian",e.LITTLE_ENDIAN="littleEndian",e._sysEndian=null,e}(),Fr=function(){function e(t,i,n,o){this["char"]=t,this.charNum=t.charCodeAt(0),this._x=this._y=0,this.width=i,this.height=n,this.style=o,this.isWord=!e._isWordRegExp.test(t)}o(e,"laya.utils.HTMLChar");var t=e.prototype;return i.imps(t,{"laya.display.ILayout":!0}),t.setSprite=function(e){this._sprite=e},t.getSprite=function(){return this._sprite},t._isChar=function(){return!0},t._getCSSStyle=function(){return this.style},s(0,t,"height",function(){return this._h},function(e){this._h=e}),s(0,t,"width",function(){return this._w},function(e){this._w=e}),s(0,t,"y",function(){return this._y},function(e){this._sprite&&(this._sprite.y=e),this._y=e}),s(0,t,"x",function(){return this._x},function(e){this._sprite&&(this._sprite.x=e),this._x=e}),e._isWordRegExp=new RegExp("[\\w.]",""),e}(),Gr=function(){function e(){this._obj=null,this._obj=e.supportWeakMap?new Or.window.WeakMap:{},e.supportWeakMap||e._maps.push(this)}o(e,"laya.utils.WeakObject");var t=e.prototype;return t.set=function(t,i){if(null!=t)if(e.supportWeakMap){var n=t;"string"!=typeof t&&"number"!=typeof t||(n=e._keys[t],n||(n=e._keys[t]={k:t})),this._obj.set(n,i)}else"string"==typeof t||"number"==typeof t?this._obj[t]=i:(t.$_GID||(t.$_GID=Dr.getGID()),this._obj[t.$_GID]=i)},t.get=function(t){if(null==t)return null;if(e.supportWeakMap){var i="string"==typeof t||"number"==typeof t?e._keys[t]:t;return i?this._obj.get(i):null}return"string"==typeof t||"number"==typeof t?this._obj[t]:this._obj[t.$_GID]},t.del=function(t){if(null!=t)if(e.supportWeakMap){var i="string"==typeof t||"number"==typeof t?e._keys[t]:t;if(!i)return;this._obj["delete"](i)}else"string"==typeof t||"number"==typeof t?delete this._obj[t]:delete this._obj[this._obj.$_GID]},t.has=function(t){if(null==t)return!1;if(e.supportWeakMap){var i="string"==typeof t||"number"==typeof t?e._keys[t]:t;return this._obj.has(i)}return"string"==typeof t||"number"==typeof t?null!=this._obj[t]:null!=this._obj[this._obj.$_GID]},e.__init__=function(){e.supportWeakMap=null!=Or.window.WeakMap,e.supportWeakMap||i.timer.loop(e.delInterval,null,e.clearCache)},e.clearCache=function(){for(var t=0,i=e._maps.length;i>t;t++){var n=e._maps[t];n._obj={}}},e.supportWeakMap=!1,e.delInterval=3e5,e._keys={},e._maps=[],n(e,["I",function(){return this.I=new e}]),e}(),Hr=function(){function e(){}return o(e,"laya.utils.Pool"),e.getPoolBySign=function(t){return e._poolDic[t]||(e._poolDic[t]=[])},e.clearBySign=function(t){e._poolDic[t]&&(e._poolDic[t].length=0)},e.recover=function(t,i){i.__InPool||(i.__InPool=!0,e.getPoolBySign(t).push(i))},e.getItemByClass=function(t,i){var n=e.getPoolBySign(t),o=n.length?n.pop():new i;return o.__InPool=!1,o},e.getItemByCreateFun=function(t,i,n){var o=e.getPoolBySign(t),s=o.length?o.pop():i.call(n);return s.__InPool=!1,s},e.getItem=function(t){var i=e.getPoolBySign(t),n=i.length?i.pop():null;return n&&(n.__InPool=!1),n},e._poolDic={},e.InPoolSign="__InPool",e}(),Ur=function(){function e(){}return o(e,"laya.utils.ClassUtils"),e.regClass=function(t,i){e._classMap[t]=i},e.getRegClass=function(t){return e._classMap[t]},e.getInstance=function(t){var i=e.getClass(t);return i?new i:(console.warn("[error] Undefined class:",t),null)},e.createByJson=function(t,i,n,o,s){"string"==typeof t&&(t=JSON.parse(t));var r=t.props;if(!i&&(i=s?s.runWith(t):e.getInstance(r.runtime||t.type),!i))return null;var a=t.child;if(a)for(var l=0,h=a.length;h>l;l++){var c=a[l];if("render"!==c.props.name&&"render"!==c.props.renderType||!i._$set_itemRender)if("Graphic"==c.type)e.addGraphicsToSprite(c,i);else if(e.isDrawType(c.type))e.addGraphicToSprite(c,i,!0);else{var u=e.createByJson(c,null,n,o,s);"Script"==c.type?u.hasOwnProperty("owner")?u.owner=i:u.hasOwnProperty("target")&&(u.target=i):"mask"==c.props.renderType?i.mask=u:i.addChild(u)}else i.itemRender=c}if(r)for(var d in r){var p=r[d];"var"===d&&n?n[p]=i:p instanceof Array&&"function"==typeof i[d]?i[d].apply(i,p):i[d]=p}return o&&t.customProps&&o.runWith([i,t]),i.created&&i.created(),i},e.addGraphicsToSprite=function(t,i){var n;if(n=t.child,n&&!(n.length<1)){var o;o=e._getGraphicsFromSprite(t,i);var s=0,r=0;t.props&&(s=e._getObjVar(t.props,"x",0),r=e._getObjVar(t.props,"y",0)),0!=s&&0!=r&&o.translate(s,r);var a=0,l=0;for(l=n.length,a=0;l>a;a++)e._addGraphicToGraphics(n[a],o);0!=s&&0!=r&&o.translate(-s,-r)}},e.addGraphicToSprite=function(t,i,n){void 0===n&&(n=!1);var o;o=n?e._getGraphicsFromSprite(t,i):i.graphics,e._addGraphicToGraphics(t,o)},e._getGraphicsFromSprite=function(e,t){var i;if(!e||!e.props)return t.graphics;var n;switch(n=e.props.renderType){case"hit":case"unHit":var o;t.hitArea||(t.hitArea=new qr),o=t.hitArea,o[n]||(o[n]=new _s),i=o[n]}return i||(i=t.graphics),i},e._getTransformData=function(t){var i;(t.hasOwnProperty("pivotX")||t.hasOwnProperty("pivotY"))&&(i=i||new Ph,i.translate(-e._getObjVar(t,"pivotX",0),-e._getObjVar(t,"pivotY",0)));var n=e._getObjVar(t,"scaleX",1),o=e._getObjVar(t,"scaleY",1),s=e._getObjVar(t,"rotation",0);e._getObjVar(t,"skewX",0),e._getObjVar(t,"skewY",0);return 1==n&&1==o&&0==s||(i=i||new Ph,i.scale(n,o),i.rotate(.0174532922222222*s)),i},e._addGraphicToGraphics=function(t,i){var n;if(n=t.props){var o;if(o=e.DrawTypeDic[t.type]){var s;s=i;var r,a=e._getParams(n,o[1],o[2],o[3]);r=e._tM,(r||1!=e._alpha)&&(s.save(),r&&s.transform(r),1!=e._alpha&&s.alpha(e._alpha)),s[o[0]].apply(s,a),(r||1!=e._alpha)&&s.restore()}}},e._adptLineData=function(e){return e[2]=parseFloat(e[0])+parseFloat(e[2]),e[3]=parseFloat(e[1])+parseFloat(e[3]),e},e._adptTextureData=function(e){return e[0]=Tu.getRes(e[0]),e},e._adptLinesData=function(t){return t[2]=e._getPointListByStr(t[2]),t},e.isDrawType=function(t){return"Image"==t?!1:e.DrawTypeDic.hasOwnProperty(t)},e._getParams=function(t,i,n,o){void 0===n&&(n=0);var s;s=e._temParam,s.length=i.length;var r=0,a=0;for(a=i.length,r=0;a>r;r++)s[r]=e._getObjVar(t,i[r][0],i[r][1]);e._alpha=e._getObjVar(t,"alpha",1);var l;return l=e._getTransformData(t),l?(n||(n=0),l.translate(s[n],s[n+1]),s[n]=s[n+1]=0,e._tM=l):e._tM=null,o&&e[o]&&(s=e[o](s)),s},e._getPointListByStr=function(e){var t;t=e.split(",");var i=0,n=0;for(n=t.length,i=0;n>i;i++)t[i]=parseFloat(t[i]);return t},e._getObjVar=function(e,t,i){return e.hasOwnProperty(t)?e[t]:i},e._temParam=[],e._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},e.getClass=function(t){var n=e._classMap[t]||t;return"string"==typeof n?i.__classmap[n]:n},e._tM=null,e._alpha=NaN,n(e,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),e}(),zr=function(){function e(t){if(this._color=[],"string"==typeof t){this.strColor=t,null===t&&(t="#000000"),"#"==t.charAt(0)&&(t=t.substr(1));var i=t.length;if(3==i||4==i){for(var n="",o=0;i>o;o++)n+=t[o]+t[o];t=n}var s=this.numColor=parseInt(t,16),r=8==t.length;if(r)return void(this._color=[parseInt(t.substr(0,2),16)/255,((16711680&s)>>16)/255,((65280&s)>>8)/255,(255&s)/255])}else s=this.numColor=t,this.strColor=Dr.toHexColor(s);this._color=[((16711680&s)>>16)/255,((65280&s)>>8)/255,(255&s)/255,1],this._color.__id=++e._COLODID}return o(e,"laya.utils.Color"),e._initDefault=function(){e._DEFAULT={};for(var t in e._COLOR_MAP)e._SAVE[t]=e._DEFAULT[t]=new e(e._COLOR_MAP[t]);return e._DEFAULT},e._initSaveMap=function(){e._SAVE_SIZE=0,e._SAVE={};for(var t in e._DEFAULT)e._SAVE[t]=e._DEFAULT[t]},e.create=function(t){var i=e._SAVE[t+""];return null!=i?i:(e._SAVE_SIZE<1e3||e._initSaveMap(),e._SAVE[t+""]=new e(t))},e._SAVE={},e._SAVE_SIZE=0,e._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},e._DEFAULT=e._initDefault(),e._COLODID=1,e}(),Wr=(function(){function e(){}return o(e,"laya.utils.Log"),e.enable=function(){e._logdiv||(e._logdiv=Or.window.document.createElement("div"),Or.window.document.body.appendChild(e._logdiv),e._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},e.toggle=function(){var t=e._logdiv.style;"1px"==t.width?t.width=t.height="50%":t.width=t.height="1px"},e.print=function(t){e._logdiv&&(e._count>=e.maxCount&&e.clear(),e._count++,e._logdiv.innerText+=t+"\n",e._logdiv.scrollTop=e._logdiv.scrollHeight)},e.clear=function(){e._logdiv.innerText="",e._count=0},e._logdiv=null,e._count=0,e.maxCount=20,e}(),function(){function e(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],Ns.isWebGL&&kr.regCacheByFunction(Dr.bind(this.startDispose,this),Dr.bind(this.getCacheList,this))}o(e,"laya.utils.VectorGraphManager");var t=e.prototype;return t.getId=function(){return this._id++},t.addShape=function(e,t){this.shapeDic[e]=t,this.useDic[e]||(this.useDic[e]=!0)},t.addLine=function(e,t){this.shapeLineDic[e]=t,this.shapeLineDic[e]||(this.shapeLineDic[e]=!0)},t.getShape=function(e){this._checkKey&&null!=this.useDic[e]&&(this.useDic[e]=!0)},t.deleteShape=function(e){this.shapeDic[e]&&(this.shapeDic[e]=null,delete this.shapeDic[e]),this.shapeLineDic[e]&&(this.shapeLineDic[e]=null,delete this.shapeLineDic[e]),null!=this.useDic[e]&&delete this.useDic[e]},t.getCacheList=function(){var e,t=[];for(e in this.shapeDic)t.push(this.shapeDic[e]);for(e in this.shapeLineDic)t.push(this.shapeLineDic[e]);return t},t.startDispose=function(e){var t;for(t in this.useDic)this.useDic[t]=!1;this._checkKey=!0},t.endDispose=function(){if(this._checkKey){var e;for(e in this.useDic)this.useDic[e]||this.deleteShape(e);this._checkKey=!1}},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}()),Yr=function(){function e(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}var t;o(e,"laya.utils.Timer",null,"Timer$1");var n=e.prototype;return n._init=function(){i.timer&&i.timer.frameLoop(1,this,this._update)},n._now=function(){return Date.now()},n._update=function(){if(this.scale<=0)return void(this._lastTimer=this._now());var e=this.currFrame=this.currFrame+this.scale,t=this._now();this._delta=(t-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;this._lastTimer=t;var n=this._handlers;for(this._count=0,r=0,a=n.length;a>r;r++)if(l=n[r],null!==l.method){var o=l.userFrame?e:i;if(o>=l.exeTime)if(l.repeat)if(l.jumpFrame)for(;o>=l.exeTime;)l.exeTime+=l.delay,l.run(!1);else l.exeTime+=l.delay,l.run(!1),o>l.exeTime&&(l.exeTime+=Math.ceil((o-l.exeTime)/l.delay)*l.delay);else l.run(!0)}else this._count++;(this._count>30||e%200===0)&&this._clearHandlers();for(var s=this._laters,r=0,a=s.length-1;a>=r;r++){var l=s[r];null!==l.method&&(this._map[l.key]=null,l.run(!1)),this._recoverHandler(l),r===a&&(a=s.length-1)}s.length=0},n._clearHandlers=function(){for(var e=this._handlers,t=0,i=e.length;i>t;t++){var n=e[t];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,this._temp=e,this._temp.length=0},n._recoverHandler=function(t){this._map[t.key]==t&&(this._map[t.key]=null),t.clear(),e._pool.push(t)},n._create=function(i,n,o,s,r,a,l){if(!o)return r.apply(s,a),null;if(l){var h=this._getHandler(s,r);if(h)return h.repeat=n,h.userFrame=i,h.delay=o,h.caller=s,h.method=r,h.args=a,h.exeTime=o+(i?this.currFrame:this.currTimer+this._now()-this._lastTimer),h}return h=e._pool.length>0?e._pool.pop():new t,h.repeat=n,h.userFrame=i,h.delay=o,h.caller=s,h.method=r,h.args=a,h.exeTime=o+(i?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(h),this._handlers.push(h),h},n._indexHandler=function(e){var t=e.caller,i=e.method,n=t?t.$_GID||(t.$_GID=Dr.getGID()):0,o=i.$_TID||(i.$_TID=1e5*this._mid++);e.key=n+o,this._map[e.key]=e},n.once=function(e,t,i,n,o){void 0===o&&(o=!0),this._create(!1,!1,e,t,i,n,o)},n.loop=function(e,t,i,n,o,s){void 0===o&&(o=!0),void 0===s&&(s=!1);var r=this._create(!1,!0,e,t,i,n,o);r&&(r.jumpFrame=s)},n.frameOnce=function(e,t,i,n,o){void 0===o&&(o=!0),this._create(!0,!1,e,t,i,n,o)},n.frameLoop=function(e,t,i,n,o){void 0===o&&(o=!0),this._create(!0,!0,e,t,i,n,o)},n.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+e._pool.length},n.clear=function(e,t){var i=this._getHandler(e,t);i&&(this._map[i.key]=null,i.key=0,i.clear())},n.clearAll=function(e){if(e)for(var t=0,i=this._handlers.length;i>t;t++){var n=this._handlers[t];n.caller===e&&(this._map[n.key]=null,n.key=0,n.clear())}},n._getHandler=function(e,t){var i=e?e.$_GID||(e.$_GID=Dr.getGID()):0,n=t.$_TID||(t.$_TID=1e5*this._mid++);return this._map[i+n]},n.callLater=function(i,n,o){if(null==this._getHandler(i,n)){if(e._pool.length)var s=e._pool.pop();else s=new t;s.caller=i,s.method=n,s.args=o,this._indexHandler(s),this._laters.push(s)}},n.runCallLater=function(e,t){var i=this._getHandler(e,t);i&&null!=i.method&&(this._map[i.key]=null,i.run(!0))},n.runTimer=function(e,t){this.runCallLater(e,t)},s(0,n,"delta",function(){return this._delta}),e._pool=[],e.__init$=function(){t=function(){function e(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}o(e,"");var t=e.prototype;return t.clear=function(){this.caller=null,this.method=null,this.args=null},t.run=function(e){var t=this.caller;if(t&&t.destroyed)return this.clear();var i=this.method,n=this.args;e&&this.clear(),null!=i&&(n?i.apply(t,n):i.call(t))},e}()},e}(),qr=function(){function e(){this._hit=null,this._unHit=null}o(e,"laya.utils.HitArea");var t=e.prototype;return t.isHit=function(t,i){return e.isHitGraphic(t,i,this.hit)?!e.isHitGraphic(t,i,this.unHit):!1},t.contains=function(e,t){return this.isHit(e,t)},s(0,t,"unHit",function(){return this._unHit||(this._unHit=new _s),this._unHit},function(e){this._unHit=e}),s(0,t,"hit",function(){return this._hit||(this._hit=new _s),this._hit},function(e){this._hit=e}),e.isHitGraphic=function(t,i,n){if(!n)return!1;var o;if(o=n.cmds,!o&&n._one&&(o=e._cmds,o.length=1,o[0]=n._one),!o)return!1;var s=0,r=0;r=o.length;var a;for(s=0;r>s;s++)if(a=o[s]){var l=Ns._context;switch(a.callee){case l._translate:case 6:t-=a[0],i-=a[1]}if(e.isHitCmd(t,i,a))return!0}return!1},e.isHitCmd=function(t,i,n){if(!n)return!1;var o=Ns._context,s=!1;switch(n.callee){case o._drawRect:case 13:e._rec.setTo(n[0],n[1],n[2],n[3]),s=e._rec.contains(t,i);break;case o._drawCircle:case o._fillCircle:case 14:var r=NaN;t-=n[0],i-=n[1],r=t*t+i*i,s=r<n[2]*n[2];break;case o._drawPoly:case 18:t-=n[0],i-=n[1],s=e.ptInPolygon(t,i,n[2])}return s},e.ptInPolygon=function(t,i,n){var o;o=e._ptPoint,o.setTo(t,i);var s=0,r=NaN,a=NaN,l=NaN,h=NaN,c=0;c=n.length;for(var u=0;c>u;u+=2)if(r=n[u],a=n[u+1],l=n[(u+2)%c],h=n[(u+3)%c],a!=h&&!(o.y<Math.min(a,h)||o.y>=Math.max(a,h))){var d=(o.y-a)*(l-r)/(h-a)+r;d>o.x&&s++}return s%2==1},e._cmds=[],n(e,["_rec",function(){return this._rec=new Ch},"_ptPoint",function(){return this._ptPoint=new Ah}]),e}(),Kr=function(){function e(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}o(e,"laya.html.utils.LayoutLine");var t=e.prototype;return t.updatePos=function(t,i,n,o,s,r,a){var l,h=0;this.elements.length>0&&(l=this.elements[this.elements.length-1],e.isNull(this.elements[0])||e.isNull(l)||(h=l.x+l.width-this.elements[0].x));var c=0,u=NaN;1===s&&(c=(i-h)/2),2===s&&(c=i-h),0===a||0!=r||(r=1);for(var d=0,p=this.elements.length;p>d;d++)if(l=this.elements[d],!e.isNull(l)){var f=l._getCSSStyle();switch(0!==c&&(l.x+=c),f._getValign()){case 0:l.y=o;break;case 1:var _=0;99999!=this.minTextHeight&&(_=this.minTextHeight);var m=(_+a)/2;m=Math.max(m,this.h),u=l instanceof laya.html.dom.HTMLImageElement?o+m-l.height:o+m-l.height,l.y=u;break;case 2:l.y=o+(a-l.height)}}},t.revertOrder=function(e){var t;if(this.elements.length>0){var i=0,n=0;for(n=this.elements.length,i=0;n>i;i++)t=this.elements[i],t.x=e-t.x-t.width}},e.isNull=function(e){return void 0==e||"undefined"==e?!0:!e||null==e},e}(),Xr=function(){function e(){}return o(e,"laya.html.utils.HTMLParse"),e.parse=function(t,i,n){i=i.replace(/<br>/g,"<br/>"),i="<root>"+i+"</root>",i=i.replace(e.spacePattern,e.char255);var o=Dr.parseXMLFromString(i);e._parseXML(t,o.childNodes[0].childNodes,n)},e._parseXML=function(t,i,n,o){var s=0,r=0;if(i.join||i.item)for(s=0,r=i.length;r>s;++s)e._parseXML(t,i[s],n,o);else{var a,l;if(3==i.nodeType){var h;return void(t instanceof laya.html.dom.HTMLDivElement?(null==i.nodeName&&(i.nodeName="#text"),l=i.nodeName.toLowerCase(),h=i.textContent.replace(/^\s+|\s+$/g,""),h.length>0&&(a=Ur.getInstance(l),a&&(t.addChild(a),a.innerTEXT=h.replace(e.char255AndOneSpacePattern," ")))):(h=i.textContent.replace(/^\s+|\s+$/g,""),h.length>0&&(t.innerTEXT=h.replace(e.char255AndOneSpacePattern," "))))}if(l=i.nodeName.toLowerCase(),"#comment"==l)return;if(a=Ur.getInstance(l)){a=t.addChild(a),a.URI=n,a.href=o;var c=i.attributes;if(c&&c.length>0)for(s=0,r=c.length;r>s;++s){var u=c[s],d=u.nodeName,p=u.value;a._setAttributes(d,p)}e._parseXML(a,i.childNodes,n,a.href)}else e._parseXML(t,i.childNodes,n,o)}},e.char255=String.fromCharCode(255),e.spacePattern=/&nbsp;|&#160;/g,e.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),e}(),Qr=function(){function e(){}return o(e,"laya.html.utils.Layout"),e.later=function(t){null==e._will&&(e._will=[],i.stage.frameLoop(1,null,function(){if(!(e._will.length<1)){for(var t=0;t<e._will.length;t++)laya.html.utils.Layout.layout(e._will[t]);e._will.length=0}})),e._will.push(t)},e.layout=function(t){if(!t||!t._style)return null;if(0===(512&t._style._type))return null;t.getStyle()._type&=-513;var i=e._multiLineLayout(t);return Ns.isConchApp&&t.layaoutCallNative&&t.layaoutCallNative(),i},e.isNull=function(e){return void 0==e||"undefined"==e?!0:!e||null==e},e._multiLineLayout=function(t){function i(){I.y=S,S+=I.h+p,0==I.h&&(S+=f),I.mWidth=P,P=0,I=new Kr,T.push(I),I.h=0,x=0,R=!0,A=!1}if(fS.RightToLeft)return e._multiLineLayout2(t);var n=new Array;t._addChildsToLayout(n);var o,s,r,a,l,h=0,c=n.length,u=t._getCSSStyle(),d=u.letterSpacing,p=u.leading,f=u.lineHeight,_=u._widthAuto()||!u.wordWrap,m=_?999999:t.width,g=(t.height,0),v=u.italic?u.fontSize/3:0,y=u._getAlign(),b=u._getValign(),E=0!==b||0!==y||0!=f,x=0,S=0,w=0,C=0,T=new Array,I=T[0]=new Kr,A=!1,N=!1;I.h=0,u.italic&&(m-=u.fontSize/3);var P=0,R=!0;for(h=0;c>h;h++)if(o=n[h],null!=o)if(R=!1,o instanceof laya.html.dom.HTMLBrElement)i(),I.y=S;else{if(o._isChar()){if(a=o,e.isNull(a))continue;if(a.isWord)A=N||"\n"===a["char"],I.wordStartIndex=I.elements.length;else{if(T.length>0&&x+w>m&&I.wordStartIndex>0){var L=0;L=I.elements.length-I.wordStartIndex+1,I.elements.length=I.wordStartIndex,h-=L,i();continue}A=!1,P+=a.width}w=a.width+d,C=a.height,N=!1,A=A||x+w>m,A&&i(),I.minTextHeight=Math.min(I.minTextHeight,o.height)}else s=o._getCSSStyle(),l=o,r=s.padding,0===s._getCssFloat()||(E=!0),A=N||s.lineElement,w=l.width*l._style._tf.scaleX+r[1]+r[3]+d,C=l.height*l._style._tf.scaleY+r[0]+r[2],N=s.lineElement,A=A||x+w>m&&s.wordWrap,A&&i();I.elements.push(o),I.h=Math.max(I.h,C),o.x=x,o.y=S,x+=w,I.w=x-d,I.y=S,g=Math.max(x+v,g)}else R||(x+=e.DIV_ELEMENT_PADDING),I.wordStartIndex=I.elements.length;if(S=I.y+I.h,E){var O=0,M=m;for(_&&t.width>0&&(M=t.width),h=0,c=T.length;c>h;h++)e.isNull(T[h])||(T[h].updatePos(0,M,h,O,y,b,f),O+=Math.max(f,T[h].h+p));S=O}return _&&(t.width=g),S>t.height&&(t.height=S),[g,S]},e._multiLineLayout2=function(t){function i(){I.y=S,S+=I.h+p,0==I.h&&(S+=f),I.mWidth=P,P=0,I=new Kr,T.push(I),I.h=0,x=0,R=!0,A=!1}var n=new Array;t._addChildsToLayout(n);var o,s,r,a,l,h=0,c=n.length,u=t._getCSSStyle(),d=u.letterSpacing,p=u.leading,f=u.lineHeight,_=u._widthAuto()||!u.wordWrap,m=_?999999:t.width,g=(t.height,0),v=u.italic?u.fontSize/3:0,y=2-u._getAlign(),b=u._getValign(),E=0!==b||0!==y||0!=f,x=0,S=0,w=0,C=0,T=new Array,I=T[0]=new Kr,A=!1,N=!1;I.h=0,u.italic&&(m-=u.fontSize/3);var P=0,R=!0;for(h=0;c>h;h++)if(o=n[h],null!=o)if(R=!1,o instanceof laya.html.dom.HTMLBrElement)i(),I.y=S;else{if(o._isChar()){if(a=o,e.isNull(a))continue;if(a.isWord)A=N||"\n"===a["char"],I.wordStartIndex=I.elements.length;else{if(T.length>0&&x+w>m&&I.wordStartIndex>0){var L=0;L=I.elements.length-I.wordStartIndex+1,I.elements.length=I.wordStartIndex,h-=L,i();continue}A=!1,P+=a.width}w=a.width+d,C=a.height,N=!1,A=A||x+w>m,A&&i(),I.minTextHeight=Math.min(I.minTextHeight,o.height)}else s=o._getCSSStyle(),l=o,r=s.padding,0===s._getCssFloat()||(E=!0),A=N||s.lineElement,w=l.width*l._style._tf.scaleX+r[1]+r[3]+d,C=l.height*l._style._tf.scaleY+r[0]+r[2],N=s.lineElement,A=A||x+w>m&&s.wordWrap,A&&i();I.elements.push(o),I.h=Math.max(I.h,C),o.x=x,o.y=S,x+=w,I.w=x-d,I.y=S,g=Math.max(x+v,g)}else R||(x+=e.DIV_ELEMENT_PADDING),I.wordStartIndex=I.elements.length;if(S=I.y+I.h,E){var O=0,M=m;for(h=0,c=T.length;c>h;h++)e.isNull(T[h])||(T[h].updatePos(0,M,h,O,y,b,f),O+=Math.max(f,T[h].h+p));S=O}for(_&&(t.width=g),S>t.height&&(t.height=S),
h=0,c=T.length;c>h;h++)e.isNull(T[h])||T[h].revertOrder(m);return[g,S]},e._will=null,e.DIV_ELEMENT_PADDING=0,e}(),jr=function(){function e(){}o(e,"laya.qg.mini.MiniImage",null,"MiniImage$5");var t=e.prototype;return t._loadImage=function(t){var i=this,n=$r.window.qg.env.USER_DATA_PATH;if(-1!=t.indexOf(n)||-1!=t.indexOf(n))return void e.onCreateImage(t,i,!0);if($r.isZiYu)return void e.onCreateImage(t,i,!0);var o=!1;if(Jr.isLocalNativeFile(t)){if(-1==t.indexOf("http://usr/")&&(-1!=t.indexOf("http://")||-1!=t.indexOf("https://")))if(""!=Jr.loadPath)t=t.split(Jr.loadPath)[1];else{var s=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,r=t;""!=s&&(t=t.split(s)[1]),t||(t=r)}if($r.subNativeFiles&&0==$r.subNativeheads.length)for(var a in $r.subNativeFiles){var l=$r.subNativeFiles[a];$r.subNativeheads=$r.subNativeheads.concat(l);for(var c=0;c<l.length;c++)$r.subMaps[l[c]]=a+"/"+l[c]}if($r.subNativeFiles&&-1!=t.indexOf("/")){var u=t.split("/")[0]+"/";if(u&&-1!=$r.subNativeheads.indexOf(u)){var d=$r.subMaps[u];t=t.replace(u,d)}}}else o=!0,t=Cs.formatURL(t);Jr.getFileInfo(t)?e.onCreateImage(t,i,!o):-1!=t.indexOf("http://usr/")||-1==t.indexOf("http://")&&-1==t.indexOf("https://")?e.onCreateImage(t,i,!0):$r.isZiYu?e.onCreateImage(t,i,!0):Jr.downOtherFiles(encodeURI(t),new h(e,e.onDownImgCallBack,[t,i]),t)},e.onDownImgCallBack=function(t,i,n,o){void 0===o&&(o=""),n?i.onError(null):e.onCreateImage(t,i,!1,o)},e.onCreateImage=function(e,t,i,n){function o(){h.onload=null,h.onerror=null,delete t.imgCache[e]}void 0===i&&(i=!1),void 0===n&&(n="");var s;if($r.autoCacheFile)if(i)if($r.isZiYu){var r=Cs.formatURL(e);s=Jr.ziyuFileTextureData[r]?Jr.ziyuFileTextureData[r]:e}else s=e;else if(""!=n)s=n;else{var a=Jr.getFileInfo(e),l=a.md5;s=Jr.getFileNativePath(l)}else s=i?e:n;null==t.imgCache&&(t.imgCache={});var h,c=function(){o(),t.onLoaded(h)},u=function(){o(),t.event("error","Load image failed")};"nativeimage"==t._type?(h=new Or.window.Image,h.crossOrigin="",h.onload=c,h.onerror=u,h.src=s,t.imgCache[e]=h):new xw.create(s,{onload:c,onerror:u,onCreate:function(i){h=i,t.imgCache[e]=i}})},e}(),Zr=function(){function e(){}return o(e,"laya.qg.mini.MiniInput",null,"MiniInput$5"),e._createInputElement=function(){fw._initInput(fw.area=Or.createElement("textarea")),fw._initInput(fw.input=Or.createElement("input")),fw.inputContainer=Or.createElement("div"),fw.inputContainer.style.position="absolute",fw.inputContainer.style.zIndex=1e5,Or.container.appendChild(fw.inputContainer),fw.inputContainer.setPos=function(e,t){fw.inputContainer.style.left=e+"px",fw.inputContainer.style.top=t+"px"},i.stage.on("resize",null,e._onStageResize),$r.window.qg.onWindowResize&&$r.window.qg.onWindowResize(function(e){$r.window.dispatchEvent&&$r.window.dispatchEvent("resize")}),jh._soundClass=Uu,jh._musicClass=Uu;var t=$r.systemInfo.model,n=$r.systemInfo.system;t&&-1!=t.indexOf("iPhone")&&(Or.onIPhone=!0,Or.onIOS=!0,Or.onIPad=!0,Or.onAndroid=!1),!n||-1==n.indexOf("Android")&&-1==n.indexOf("Adr")||(Or.onAndroid=!0,Or.onIPhone=!1,Or.onIOS=!1,Or.onIPad=!1)},e._onStageResize=function(){},e.wxinputFocus=function(e){var t=fw.inputElement.target;t&&!t.editable||($r.window.qg.showKeyboard({defaultValue:t.text,maxLength:t.maxChars,multiple:t.multiline,confirmHold:!0,confirmType:"done",success:function(e){},fail:function(e){}}),$r.window.qg.onKeyboardComplete(function(e){$r.window.qg.offKeyboardComplete();var i=e?e.value:"";t._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),t._restrictPattern.test(i)&&(i=i.replace(t._restrictPattern,""))),t.text=i,t.event("input"),laya.qg.mini.MiniInput.inputEnter(!0)}),$r.window.qg.onKeyboardConfirm(function(e){var i=e?e.value:"";t._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),t._restrictPattern.test(i)&&(i=i.replace(t._restrictPattern,""))),t.text=i,t.event("input"),laya.qg.mini.MiniInput.inputEnter(!0)}),$r.window.qg.onKeyboardInput(function(e){var i=e?e.value:"";return t.multiline||-1==i.indexOf("\n")?(t._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),t._restrictPattern.test(i)&&(i=i.replace(t._restrictPattern,""))),t.text=i,t.event("input"),void laya.qg.mini.MiniInput.inputEnter(!1)):void laya.qg.mini.MiniInput.inputEnter(!1)}))},e.inputEnter=function(t){t&&e.hideKeyboard(),fw.inputElement.target&&(fw.inputElement.target.focus=!1)},e.wxinputblur=function(){},e.hideKeyboard=function(){$r.window.qg.offKeyboardConfirm(),$r.window.qg.offKeyboardInput(),$r.window.qg.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})},e}(),Jr=function(){function e(){}return o(e,"laya.qg.mini.MiniFileMgr",null,"MiniFileMgr$5"),e.isLocalNativeFile=function(e){for(var t=0,i=$r.nativefiles.length;i>t;t++)if(-1!=e.indexOf($r.nativefiles[t]))return!0;return!1},e.getFileInfo=function(t){var i=t,n=e.filesListObj[i];return null==n?null:n},e.read=function(t,i,n,o,s,r){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r="");var a;a=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:a,encoding:i,success:function(e){null!=n&&n.runWith([0,e])},fail:function(t){t&&""!=o?e.downFiles(o,i,n,o,s,r):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0);var l=e.wxdown({url:t,success:function(l){200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,s,r,a):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l])},fail:function(e){null!=n&&n.runWith([1,e])}});l.onProgressUpdate(function(e){null!=n&&n.runWith([2,e.progress])})},e.readFile=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0),e.fs.readFile({filePath:t,encoding:i,success:function(r){-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?($r.autoCacheFile||s)&&e.copyFile(t,o,n,i,a):null!=n&&n.runWith([0,r])},fail:function(e){e&&null!=n&&n.runWith([1,e])}})},e.downOtherFiles=function(t,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===s&&(s=!0),e.wxdown({url:t,success:function(t){200===t.statusCode?($r.autoCacheFile||o)&&-1==n.indexOf("qlogo.cn")&&-1==n.indexOf(".php")?(null!=i&&i.runWith([0,t.tempFilePath]),e.copyFile(t.tempFilePath,n,null,"",s)):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(e){null!=i&&i.runWith([1,e])}})},e.downLoadFile=function(t,n,o,s){void 0===n&&(n=""),void 0===s&&(s="utf8"),$r.window.navigator.userAgent.indexOf("MiniGame")<0&&$r.window.navigator.userAgent.indexOf("OPPO")<0?i.loader.load(t,o):"image"==n||"sound"==n?e.downOtherFiles(t,o,t,!0,!1):e.downFiles(t,s,o,t,!0,n,!1)},e.copyFile=function(t,i,n,o,s){void 0===o&&(o=""),void 0===s&&(s=!0);var r=t.split("/"),a=r[r.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(a),c=52428800,u=4194304,d=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>$r.minClearSize&&($r.minClearSize=r.size),e.onClearCacheRes()),e.deleteFile(t,i,n,o,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>$r.minClearSize&&($r.minClearSize=r.size),e.onClearCacheRes()),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,a,!0,o,n,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}})},fail:function(e){null!=n&&n.runWith([1,e])}})},e.onClearCacheRes=function(){var t=$r.minClearSize,i=[];for(var n in e.filesListObj)"fileUsedSize"!=n&&i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,s=1,r=i.length;r>s;s++){var a=i[s];if(o>=t)break;o+=a.size,e.deleteFile("",a.readyUrl)}},e.sortOn=function(e,t,i){return void 0===i&&(i=0),16==i?e.sort(function(e,i){return e[t]-i[t]}):18==i?e.sort(function(e,i){return i[t]-e[t]}):e.sort(function(e,i){return e[t]-i[t]})},e.getFileNativePath=function(e){return laya.qg.mini.MiniFileMgr.fileNativeDir+"/"+e},e.deleteFile=function(t,i,n,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=0);var r=e.getFileInfo(i),a=e.getFileNativePath(r.md5);e.fs.unlink({filePath:a,success:function(r){var a=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(s){e.onSaveFile(i,t,a,o,n,s.size)},fail:function(e){null!=n&&n.runWith([1,e])}})}else e.onSaveFile(i,t,a,o,n,s)},fail:function(e){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)"fileUsedSize"!=i&&t.push(e.filesListObj[i]);for(var n=1,o=t.length;o>n;n++){var s=t[n];e.deleteFile("",s.readyUrl)}laya.qg.mini.MiniFileMgr.filesListObj&&laya.qg.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.qg.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.qg.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,s,r){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===r&&(r=0);var a=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[a]={md5:i,readyUrl:t,size:r,times:Or.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+r,e.writeFilesList(a,JSON.stringify(e.filesListObj),!0),null!=s&&s.runWith([0])}else if(e.filesListObj[a]){var l=parseInt(e.filesListObj[a].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-l,delete e.filesListObj[a],e.writeFilesList(a,JSON.stringify(e.filesListObj),!1),null!=s&&s.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(e){},fail:function(e){}}),!$r.isZiYu&&$r.isPosMsgYu&&$r.window.qg.postMessage&&$r.window.qg.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(e){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,t])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="utf8"),void 0===o&&(o="");var s,r=e.getFileNativePath(t);try{e.fs.readFile({filePath:r,encoding:i,success:function(e){s=e.data,null!=n&&n.runWith([0,{data:s}])},fail:function(){null!=n&&n.runWith([1])}})}catch(a){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=qg.env.USER_DATA_PATH+t},e.filesListObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=$r.window.qg.getFileSystemManager()},"wxdown",function(){return this.wxdown=$r.window.qg.downloadFile}]),e}(),$r=function(){function t(){}return o(t,"laya.qg.mini.QGMiniAdapter"),t.getJson=function(e){return JSON.parse(e)},t.init=function(n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!t._inited&&(t._inited=!0,t.window=e,t.window.hasOwnProperty("qg")&&!(t.window.navigator.userAgent.indexOf("OPPO")<0))){t.isZiYu=o,t.isPosMsgYu=n,t.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(s){}t.isZiYu||(qg||console.log("======qg null======================"),qg.env||console.log("======qg.env  null======================"),Jr.setNativeFileDir("/layaairGame"),Jr.existDir(Jr.fileNativeDir,h.create(t,t.onMkdirCallBack))),t.window.qg.getSystemInfo({success:function(e){t.systemInfo=e}}),t.window.focus=function(){},i._getUrlPath=function(){},i.getUrlPath=function(){},t.window.logtime=function(e){},t.window.alertTimeLog=function(e){},t.window.resetShareInfo=function(){},t.window.document.body.appendChild=function(){},t.EnvConfig.pixelRatioInt=0,a.getPixelRatio=t.pixelRatio,t._preCreateElement=Or.createElement,Or.createElement=t.createElement,a.createShaderCondition=t.createShaderCondition,Dr.parseXMLFromString=t.parseXMLFromString,fw._createInputElement=Zr._createInputElement,t.EnvConfig.load=Tu.prototype.load,Tu.prototype.load=Hu.prototype.load,Tu.prototype._loadImage=jr.prototype._loadImage,t.onReciveData(),nc.useRetinalCanvas=!0}},t.onReciveData=function(){laya.qg.mini.QGMiniAdapter.isZiYu&&t.window.qg.onMessage&&t.window.qg.onMessage(function(e){"opendatacontext"==e.isLoad?e.url&&(Jr.ziyuFileData[e.url]=e.atlasdata,Jr.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl):"openJsondatacontext"==e.isLoad?e.url&&(Jr.ziyuFileData[e.url]=e.atlasdata):"openJsondatacontextPic"==e.isLoad&&(Jr.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl)})},t.measureText=function(e){var i=t._measureText(e);return i||(i={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),i},t.getUrlEncode=function(e,t){return"arraybuffer"==t?"":"utf8"},t.downLoadFile=function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n="utf8");var o=Jr.getFileInfo(e);o?null!=i&&i.runWith([0]):Jr.downLoadFile(e,t,i,n)},t.remove=function(e,t){Jr.deleteFile("",e,t,"",0)},t.removeAll=function(){Jr.deleteAll()},t.hasNativeFile=function(e){return Jr.isLocalNativeFile(e)},t.getFileInfo=function(e){return Jr.getFileInfo(e)},t.getFileList=function(){return Jr.filesListObj},t.exitMiniProgram=function(){t.window.qg.exitMiniProgram()},t.onMkdirCallBack=function(e,t){e||(Jr.filesListObj=JSON.parse(t.data))},t.pixelRatio=function(){if(!t.EnvConfig.pixelRatioInt)try{return t.systemInfo.pixelRatio=t.window.devicePixelRatio,t.EnvConfig.pixelRatioInt=t.systemInfo.pixelRatio,t.systemInfo.pixelRatio}catch(e){}return t.EnvConfig.pixelRatioInt},t.createElement=function(e){if("canvas"==e){var i;return 1==t.idx?t.isZiYu?(i=t.window.document.createElement("canvas"),i.style={}):i=t.window.__canvas:i=t.window.document.createElement("canvas"),t.idx++,i}if("textarea"==e||"input"==e)return t.onCreateInput(e);if("div"==e){var n=t._preCreateElement(e);return n.contains=function(e){return null},n.removeChild=function(e){},n}return t._preCreateElement(e)},t.onCreateInput=function(e){var i=t._preCreateElement(e);return i.focus=Zr.wxinputFocus,i.blur=Zr.wxinputblur,i.style={},i.value=0,i.parentElement={},i.placeholder={},i.type={},i.setColor=function(e){},i.setType=function(e){},i.setFontFace=function(e){},i.addEventListener=function(e){},i.contains=function(e){return null},i.removeChild=function(e){},i},t.createShaderCondition=function(e){var t=this,i=function(){return t[e.replace("this.","")]};return i},t.sendAtlasToOpenDataContext=function(e){if(!laya.qg.mini.QGMiniAdapter.isZiYu){var i=Tu.getRes(Cs.formatURL(e));if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";i.meta.image.split(",");if(i.meta&&i.meta.image)for(var n=i.meta.image.split(","),o=e.indexOf("/")>=0?"/":"\\",s=e.lastIndexOf(o),r=s>=0?e.substr(0,s+1):"",a=0,l=n.length;l>a;a++)n[a]=r+n[a];else n=[e.replace(".json",".png")];for(a=0;a<n.length;a++){var h=n[a];t.postInfoToContext(e,h,i)}}},t.postInfoToContext=function(e,i,n){var o={frames:n.frames,meta:n.meta},s=i,r=Jr.getFileInfo(Cs.formatURL(i));if(r)var a=r.md5,l=Jr.getFileNativePath(a);else l=s;if(!l)throw"获取图集的磁盘url路径不存在！";t.window.qg.postMessage&&t.window.qg.postMessage({url:e,atlasdata:o,imgNativeUrl:l,imgReadyUrl:s,isLoad:"opendatacontext"})},t.sendSinglePicToOpenDataContext=function(e){var i=Cs.formatURL(e),n=Jr.getFileInfo(i);if(n){var o=n.md5,s=Jr.getFileNativePath(o);e=i}else s=e;if(!s)throw"获取图集的磁盘url路径不存在！";t.window.qg.postMessage&&t.window.qg.postMessage({url:e,imgNativeUrl:s,imgReadyUrl:e,isLoad:"openJsondatacontextPic"})},t.sendJsonDataToDataContext=function(e){if(!laya.qg.mini.QGMiniAdapter.isZiYu){var i=Tu.getRes(e);if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";t.window.qg.postMessage&&t.window.qg.postMessage({url:e,atlasdata:i,isLoad:"openJsondatacontext"})}},t.EnvConfig=null,t.window=null,t._preCreateElement=null,t._inited=!1,t.systemInfo={},t.isZiYu=!1,t.isPosMsgYu=!1,t.autoCacheFile=!0,t.minClearSize=5242880,t.subNativeFiles=null,t.subNativeheads=[],t.subMaps=[],t.AutoCacheDownFile=!1,t._measureText=null,t.parseXMLFromString=function(t){var i;t=t.replace(/>\s+</g,"><");try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(n){throw"需要引入xml解析库文件"}return i},t.idx=1,n(t,["nativefiles",function(){return this.nativefiles=["layaNativeDir","qgfile"]}]),t}(),ea=function(){function e(){}return o(e,"laya.system.System"),e.changeDefinition=function(e,t){i[e]=t;var n=e+"=classObj";i._runScript(n)},e.__init__=function(){Ns.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())},e}(),ta=function(){function e(){}o(e,"laya.vv.mini.MiniImage",null,"MiniImage$6");var t=e.prototype;return t._loadImage=function(t){var i=this;if(oa.isZiYu)return void e.onCreateImage(t,i,!0);var n=!1;if(na.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=na.loadPath)t=t.split(na.loadPath)[1];else{var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=t;""!=o&&(t=t.split(o)[1]),t||(t=s)}if(oa.subNativeFiles&&0==oa.subNativeheads.length)for(var r in oa.subNativeFiles){var a=oa.subNativeFiles[r];oa.subNativeheads=oa.subNativeheads.concat(a);for(var l=0;l<a.length;l++)oa.subMaps[a[l]]=r+"/"+a[l]}if(oa.subNativeFiles&&-1!=t.indexOf("/")){var c=t.split("/")[0]+"/";if(c&&-1!=oa.subNativeheads.indexOf(c)){var u=oa.subMaps[c];t=t.replace(c,u)}}}else n=!0,t=Cs.formatURL(t);na.getFileInfo(t)?e.onCreateImage(t,i,!n):-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?oa.isZiYu?e.onCreateImage(t,i,!0):na.downOtherFiles(encodeURI(t),new h(e,e.onDownImgCallBack,[t,i]),t):e.onCreateImage(t,i,!0)},e.onDownImgCallBack=function(t,i,n,o){void 0===o&&(o=""),n?i.onError(null):e.onCreateImage(t,i,!1,o)},e.onCreateImage=function(e,t,i,n){function o(){h.onload=null,h.onerror=null,delete t.imgCache[e]}void 0===i&&(i=!1),void 0===n&&(n="");var s;if(oa.autoCacheFile)if(i)if(oa.isZiYu){var r=Cs.formatURL(e);s=na.ziyuFileTextureData[r]?na.ziyuFileTextureData[r]:e}else s=e;else if(""!=n)s=n;else{var a=na.getFileInfo(e),l=a.md5;s=na.getFileNativePath(l)}else s=i?e:n;null==t.imgCache&&(t.imgCache={});var h,c=function(){o(),t.onLoaded(h)},u=function(){o(),t.event("error","Load image failed")};"nativeimage"==t._type?(h=new Or.window.Image,h.crossOrigin="",h.onload=c,h.onerror=u,h.src=s,t.imgCache[e]=h):new xw.create(s,{onload:c,onerror:u,onCreate:function(i){h=i,t.imgCache[e]=i}})},e}(),ia=function(){function e(){}return o(e,"laya.vv.mini.MiniInput",null,"MiniInput$6"),e._createInputElement=function(){fw._initInput(fw.area=Or.createElement("textarea")),fw._initInput(fw.input=Or.createElement("input")),fw.inputContainer=Or.createElement("div"),fw.inputContainer.style.position="absolute",fw.inputContainer.style.zIndex=1e5,Or.container.appendChild(fw.inputContainer),fw.inputContainer.setPos=function(e,t){fw.inputContainer.style.left=e+"px",fw.inputContainer.style.top=t+"px"},i.stage.on("resize",null,e._onStageResize),oa.window.qg.onWindowResize&&oa.window.qg.onWindowResize(function(e){oa.window.dispatchEvent&&oa.window.dispatchEvent("resize")}),jh._soundClass=Wu,jh._musicClass=Wu,Or.onAndroid=!0,Or.onIPhone=!1,Or.onIOS=!1,Or.onIPad=!1},e._onStageResize=function(){var e=i.stage._canvasTransform.identity();e.scale(Or.width/Ns.canvas.width/a.getPixelRatio(),Or.height/Ns.canvas.height/a.getPixelRatio())},e.wxinputFocus=function(e){var t=fw.inputElement.target;t&&!t.editable||(oa.window.qg.offKeyboardConfirm(),oa.window.qg.offKeyboardInput(),oa.window.qg.showKeyboard({defaultValue:t.text,maxLength:t.maxChars,multiple:t.multiline,confirmHold:!0,confirmType:"done",success:function(e){},fail:function(e){}}),oa.window.qg.onKeyboardConfirm(function(e){var i=e?e.value:"";t.text=i,t.event("input"),laya.vv.mini.MiniInput.inputEnter()}),oa.window.qg.onKeyboardInput(function(e){var i=e?e.value:"";return t.multiline||-1==i.indexOf("\n")?(t.text=i,void t.event("input")):void laya.vv.mini.MiniInput.inputEnter()}))},e.inputEnter=function(){fw.inputElement.target.focus=!1},e.wxinputblur=function(){e.hideKeyboard()},e.hideKeyboard=function(){oa.window.qg.offKeyboardConfirm(),oa.window.qg.offKeyboardInput(),oa.window.qg.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})},e}(),na=function(){function e(){}return o(e,"laya.vv.mini.MiniFileMgr",null,"MiniFileMgr$6"),e.isLocalNativeFile=function(e){for(var t=0,i=oa.nativefiles.length;i>t;t++)if(-1!=e.indexOf(oa.nativefiles[t]))return!0;return!1},e.getFileInfo=function(t){var i=t,n=e.filesListObj[i];return null==n?null:n},e.read=function(t,i,n,o,s,r){void 0===i&&(i="ascill"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r="");var a;a=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:a,encoding:i,success:function(e){e.data||(e.data=e.text),null!=n&&n.runWith([0,e])},fail:function(t){t&&""!=o?e.downFiles(o,i,n,o,s,r):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0);var l=e.wxdown({url:t,success:function(l){0==l.errCode&&(l.statusCode=200),200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,s,r,a):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l])},fail:function(e){null!=n&&n.runWith([1,e])}});l.onProgressUpdate(function(e){null!=n&&n.runWith([2,e.progress])})},e.readFile=function(t,i,n,o,s,r,a){void 0===i&&(i="ascill"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0),e.fs.readFile({filePath:t,encoding:i,success:function(r){-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?(oa.autoCacheFile||s)&&e.copyFile(t,o,n,i,a):(r.data||(r.data=r.text),null!=n&&n.runWith([0,r]))},fail:function(e){e&&null!=n&&n.runWith([1,e])}})},e.downOtherFiles=function(t,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===s&&(s=!0),e.wxdown({url:t,success:function(t){0==t.errCode&&(t.statusCode=200),200===t.statusCode?(oa.autoCacheFile||o)&&-1==n.indexOf(".php")?(null!=i&&i.runWith([0,t.tempFilePath]),e.copyFile(t.tempFilePath,n,null,"",s)):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(e){null!=i&&i.runWith([1,e])}})},e.downLoadFile=function(t,n,o,s){void 0===n&&(n=""),void 0===s&&(s="utf8"),oa.window.navigator.userAgent.indexOf("VVGame")<0?i.loader.load(t,o):"image"==n||"sound"==n?e.downOtherFiles(t,o,t,!0,!1):e.downFiles(t,s,o,t,!0,n,!1)},e.copyFile=function(t,i,n,o,s){void 0===o&&(o=""),void 0===s&&(s=!0);var r=t.split("/"),a=r[r.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(a),c=52428800,u=4194304,d=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(r){r.length&&(r.size=r.length),s&&d+u+r.size>=c&&(r.size>oa.minClearSize&&(oa.minClearSize=r.size),e.onClearCacheRes()),e.deleteFile(t,i,n,o,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(r){r.length&&(r.size=r.length),s&&d+u+r.size>=c&&(r.size>oa.minClearSize&&(oa.minClearSize=r.size),e.onClearCacheRes()),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,a,!0,o,n,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}})},fail:function(e){null!=n&&n.runWith([1,e])}})},e.onClearCacheRes=function(){var t=oa.minClearSize,i=[];for(var n in e.filesListObj)"fileUsedSize"!=n&&i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,s=1,r=i.length;r>s;s++){var a=i[s];if(o>=t)break;o+=a.size,e.deleteFile("",a.readyUrl)}},e.sortOn=function(e,t,i){return void 0===i&&(i=0),16==i?e.sort(function(e,i){return e[t]-i[t]}):18==i?e.sort(function(e,i){return i[t]-e[t]}):e.sort(function(e,i){return e[t]-i[t]})},e.getFileNativePath=function(e){return laya.vv.mini.MiniFileMgr.fileNativeDir+"/"+e},e.deleteFile=function(t,i,n,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=0);var r=e.getFileInfo(i),a=e.getFileNativePath(r.md5);e.fs.unlink({filePath:a,success:function(r){var a=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(s){e.onSaveFile(i,t,a,o,n,s.size)},fail:function(e){null!=n&&n.runWith([1,e])}})}else e.onSaveFile(i,t,a,o,n,s)},fail:function(e){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)"fileUsedSize"!=i&&t.push(e.filesListObj[i]);for(var n=1,o=t.length;o>n;n++){var s=t[n];e.deleteFile("",s.readyUrl)}laya.vv.mini.MiniFileMgr.filesListObj&&laya.vv.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.vv.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.vv.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,s,r){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===r&&(r=0);var a=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[a]={md5:i,readyUrl:t,size:r,times:Or.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+r,e.writeFilesList(a,JSON.stringify(e.filesListObj),!0),null!=s&&s.runWith([0])}else if(e.filesListObj[a]){var l=parseInt(e.filesListObj[a].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-l,delete e.filesListObj[a],e.writeFilesList(a,JSON.stringify(e.filesListObj),!1),null!=s&&s.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(e){},fail:function(e){}}),!oa.isZiYu&&oa.isPosMsgYu&&oa.window.qg.postMessage&&oa.window.qg.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(e){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t,n){if(300==n){var o={};o.errMsg="file already exists"}-1!=o.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,o])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="ascill"),void 0===o&&(o="");var s,r=e.getFileNativePath(t);try{s=e.fs.readFileSync(r,i),-1!=s.indexOf("No such file or directory")&&(s=JSON.stringify({})),null!=n&&n.runWith([0,{data:s}])}catch(a){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=oa.window.qg.env.USER_DATA_PATH+t},e.filesListObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=oa.window.qg.getFileSystemManager()},"wxdown",function(){return this.wxdown=oa.window.qg.download}]),e}(),oa=function(){function s(){}return o(s,"laya.vv.mini.VVMiniAdapter"),s.getJson=function(e){return JSON.parse(e)},s.init=function(t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),!s._inited&&(s._inited=!0,s.window=e,s.window.hasOwnProperty("qg")&&!(s.window.navigator.userAgent.indexOf("VVGame")<0))){s.isZiYu=n,s.isPosMsgYu=t,s.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(o){}laya.vv.mini.VVMiniAdapter.window.qg.env||(laya.vv.mini.VVMiniAdapter.window.qg.env={},laya.vv.mini.VVMiniAdapter.window.qg.env.USER_DATA_PATH="internal://files"),s.isZiYu||(na.setNativeFileDir("/layaairGame"),na.existDir(na.fileNativeDir,h.create(s,s.onMkdirCallBack))),s.systemInfo=s.window.qg.getSystemInfoSync(),s.window.focus=function(){},i._getUrlPath=function(){},i.getUrlPath=function(){},s.window.logtime=function(e){},s.window.alertTimeLog=function(e){},s.window.resetShareInfo=function(){},s.window.CanvasRenderingContext2D=function(){},s.window.CanvasRenderingContext2D.prototype=s.window.qg.createCanvas().getContext("2d").__proto__,s.window.document.body.appendChild=function(){},s.EnvConfig.pixelRatioInt=0,a.getPixelRatio=s.pixelRatio,s._preCreateElement=Or.createElement,Or.createElement=s.createElement,a.createShaderCondition=s.createShaderCondition,Dr.parseXMLFromString=s.parseXMLFromString,fw._createInputElement=ia._createInputElement,s.EnvConfig.load=Tu.prototype.load,Tu.prototype.load=zu.prototype.load,Tu.prototype._loadImage=ta.prototype._loadImage,s.onReciveData(),nc.useRetinalCanvas=!0,nc.CborderSize=0}},s.onReciveData=function(){laya.vv.mini.VVMiniAdapter.isZiYu&&s.window.qg.onMessage&&s.window.qg.onMessage(function(e){"opendatacontext"==e.isLoad?e.url&&(na.ziyuFileData[e.url]=e.atlasdata,na.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl):"openJsondatacontext"==e.isLoad?e.url&&(na.ziyuFileData[e.url]=e.atlasdata):"openJsondatacontextPic"==e.isLoad&&(na.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl)})},s.measureText=function(e){var t=s._measureText(e);return t||(t={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),t},s.getUrlEncode=function(e,t){return"arraybuffer"==t?"binary":"utf8"},s.downLoadFile=function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n="utf8");var o=na.getFileInfo(e);o?null!=i&&i.runWith([0]):na.downLoadFile(e,t,i,n)},s.remove=function(e,t){na.deleteFile("",e,t,"",0)},s.removeAll=function(){na.deleteAll()},s.hasNativeFile=function(e){return na.isLocalNativeFile(e)},s.getFileInfo=function(e){return na.getFileInfo(e)},s.getFileList=function(){return na.filesListObj},s.exitMiniProgram=function(){s.window.qg.exitMiniProgram()},s.onMkdirCallBack=function(e,t){e||(na.filesListObj=JSON.parse(t.data))},s.pixelRatio=function(){if(!s.EnvConfig.pixelRatioInt)try{return s.systemInfo.pixelRatio=s.window.devicePixelRatio,s.EnvConfig.pixelRatioInt=s.systemInfo.pixelRatio,s.systemInfo.pixelRatio}catch(e){}return s.EnvConfig.pixelRatioInt},s.createElement=function(e){if("canvas"==e){var i;return 1==s.idx?s.isZiYu?(i={},i.style={}):i=t.getElementById("canvas"):i=s.window.qg.createCanvas(),s.idx++,i}if("textarea"==e||"input"==e)return s.onCreateInput(e);if("div"==e){var n=s._preCreateElement(e);return n.contains=function(e){return null},n.removeChild=function(e){},n}return s._preCreateElement(e)},s.onCreateInput=function(e){var t=s._preCreateElement(e);return t.focus=ia.wxinputFocus,t.blur=ia.wxinputblur,t.style={},t.value=0,t.parentElement={},t.placeholder={},t.type={},t.setColor=function(e){},t.setType=function(e){},t.setFontFace=function(e){},t.addEventListener=function(e){},t.contains=function(e){return null},t.removeChild=function(e){},t},s.createShaderCondition=function(e){var t=this,i=function(){return t[e.replace("this.","")]};return i},s.sendAtlasToOpenDataContext=function(e){if(!laya.vv.mini.VVMiniAdapter.isZiYu){var t=Tu.getRes(Cs.formatURL(e));if(!t)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";t.meta.image.split(",");if(t.meta&&t.meta.image)for(var i=t.meta.image.split(","),n=e.indexOf("/")>=0?"/":"\\",o=e.lastIndexOf(n),r=o>=0?e.substr(0,o+1):"",a=0,l=i.length;l>a;a++)i[a]=r+i[a];else i=[e.replace(".json",".png")];for(a=0;a<i.length;a++){var h=i[a];s.postInfoToContext(e,h,t)}}},s.postInfoToContext=function(e,t,i){var n={frames:i.frames,meta:i.meta},o=t,r=na.getFileInfo(Cs.formatURL(t));if(r)var a=r.md5,l=na.getFileNativePath(a);else l=o;if(!l||!s.window.qg.postMessage)throw"获取图集的磁盘url路径不存在！";s.window.qg.postMessage({url:e,atlasdata:n,imgNativeUrl:l,imgReadyUrl:o,isLoad:"opendatacontext"})},s.sendSinglePicToOpenDataContext=function(e){var t=Cs.formatURL(e),i=na.getFileInfo(t);if(i){var n=i.md5,o=na.getFileNativePath(n);e=t}else o=e;if(!o||!s.window.qg.postMessage)throw"获取图集的磁盘url路径不存在！";s.window.qg.postMessage({url:e,imgNativeUrl:o,imgReadyUrl:e,isLoad:"openJsondatacontextPic"})},s.sendJsonDataToDataContext=function(e){if(!laya.vv.mini.VVMiniAdapter.isZiYu&&s.window.qg.postMessage){var t=Tu.getRes(e);if(!t)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";s.window.qg.postMessage({url:e,atlasdata:t,isLoad:"openJsondatacontext"})}},s.EnvConfig=null,s.window=null,s._preCreateElement=null,s._inited=!1,s.systemInfo=null,s.isZiYu=!1,s.isPosMsgYu=!1,s.autoCacheFile=!0,s.minClearSize=5242880,s.subNativeFiles=null,s.subNativeheads=[],s.subMaps=[],s.AutoCacheDownFile=!1,s._measureText=null,s.parseXMLFromString=function(t){var i;t=t.replace(/>\s+</g,"><");try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(n){throw"需要引入xml解析库文件"}return i},s.idx=1,n(s,["nativefiles",function(){return this.nativefiles=["layaNativeDir","files"]}]),s}(),sa=function(){function e(){this._tempVector30=new rl,
this._tempVector31=new rl,this._tempVector32=new rl,this._a=new rl,this._b=new rl,this._c=new rl,this._d=new rl}o(e,"laya.d3.core.glitter.SplineCurvePositionVelocity");var t=e.prototype;return t.Init=function(e,t,i,n){e.cloneTo(this._d),t.cloneTo(this._c),rl.scale(e,2,this._a),rl.scale(i,2,this._tempVector30),rl.subtract(this._a,this._tempVector30,this._a),rl.add(this._a,t,this._a),rl.add(this._a,n,this._a),rl.scale(i,3,this._b),rl.scale(e,3,this._tempVector30),rl.subtract(this._b,this._tempVector30,this._b),rl.subtract(this._b,n,this._b),rl.scale(t,2,this._tempVector30),rl.subtract(this._b,this._tempVector30,this._b)},t.Slerp=function(e,t){rl.scale(this._a,e*e*e,this._tempVector30),rl.scale(this._b,e*e,this._tempVector31),rl.scale(this._c,e,this._tempVector32),rl.add(this._tempVector30,this._tempVector31,t),rl.add(t,this._tempVector32,t),rl.add(t,this._d,t)},e}(),ra=function(){function e(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new gl,this._vb=IS.create(e._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=AS.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=CS.nameKey.getID("LINE"),this._shaderCompile=Id._preCompileShader[this._sharderNameID]}o(e,"laya.d3.core.PhasorSpriter3D");var t=e.prototype;return t.line=function(e,t,i,n){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e.x,e.y,e.z,t.x,t.y,t.z,t.w),this.addVertex(i.x,i.y,i.z,n.x,n.y,n.z,n.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},t.circle=function(e,t,i,n,o,s){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*t,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/t,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*e,Math.cos(this._tempNumver0)*e,0,i,n,o,s),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},t.plane=function(e,t,i,n,o,s,r,a,l){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=n/2,this._tempNumver1=o/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e-this._tempNumver0,t+this._tempNumver1,i,s,r,a,l),this.addVertex(e+this._tempNumver0,t+this._tempNumver1,i,s,r,a,l),this.addVertex(e-this._tempNumver0,t-this._tempNumver1,i,s,r,a,l),this.addVertex(e+this._tempNumver0,t-this._tempNumver1,i,s,r,a,l),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},t.box=function(e,t,i,n,o,s,r,a,l,h){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=n/2,this._tempNumver1=o/2,this._tempNumver2=s/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e-this._tempNumver0,t+this._tempNumver1,i+this._tempNumver2,r,a,l,h),this.addVertex(e+this._tempNumver0,t+this._tempNumver1,i+this._tempNumver2,r,a,l,h),this.addVertex(e-this._tempNumver0,t-this._tempNumver1,i+this._tempNumver2,r,a,l,h),this.addVertex(e+this._tempNumver0,t-this._tempNumver1,i+this._tempNumver2,r,a,l,h),this.addVertex(e+this._tempNumver0,t+this._tempNumver1,i-this._tempNumver2,r,a,l,h),this.addVertex(e-this._tempNumver0,t+this._tempNumver1,i-this._tempNumver2,r,a,l,h),this.addVertex(e+this._tempNumver0,t-this._tempNumver1,i-this._tempNumver2,r,a,l,h),this.addVertex(e-this._tempNumver0,t-this._tempNumver1,i-this._tempNumver2,r,a,l,h),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},t.cone=function(e,t,i,n,o,s,r){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*i+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*i>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/i,this.addVertexIndex(0,t,0,n,o,s,r,this._tempUint0),this.addVertexIndex(0,0,0,n,o,s,r,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<i;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(e*this._tempNumver2,0,e*this._tempNumver3,n,o,s,r,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==i-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(e*this._tempNumver2,0,e*this._tempNumver3,n,o,s,r,this._tempUint0+(this._tempInt0+i)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==i-1?this.addIndexes(this._tempUint1+i+2):this.addIndexes(this._tempUint1+this._tempInt0+i+1),this.addIndexes(this._tempUint1+this._tempInt0+i),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},t.boundingBoxLine=function(e,t,i,n,o,s,r,a,l,h){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e,o,s,r,a,l,h),this.addVertex(n,o,s,r,a,l,h),this.addVertex(e,t,s,r,a,l,h),this.addVertex(n,t,s,r,a,l,h),this.addVertex(n,o,i,r,a,l,h),this.addVertex(e,o,i,r,a,l,h),this.addVertex(n,t,i,r,a,l,h),this.addVertex(e,t,i,r,a,l,h),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},t.addVertex=function(e,t,i,n,o,s,r){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=e,this._vbData[this._posInVBData+1]=t,this._vbData[this._posInVBData+2]=i,this._vbData[this._posInVBData+3]=n,this._vbData[this._posInVBData+4]=o,this._vbData[this._posInVBData+5]=s,this._vbData[this._posInVBData+6]=r,this._posInVBData+=this._floatSizePerVer,this},t.addVertexIndex=function(e,t,i,n,o,s,r,a){return this._hasBegun||this.addVertexIndexException(),this._vbData[a]=e,this._vbData[a+1]=t,this._vbData[a+2]=i,this._vbData[a+3]=n,this._vbData[a+4]=o,this._vbData[a+5]=s,this._vbData[a+6]=r,a+=this._floatSizePerVer,a>this._posInVBData&&(this._posInVBData=a),this},t.addIndexes=function(e){var t=arguments;this._hasBegun||this.addVertexIndexException();for(var i=0;i<t.length;i++)this._ibData[this._posInIBData]=t[i],this._posInIBData++;return this},t.begin=function(e,t){return this._hasBegun&&this.beginException0(),1!==e&&4!==e&&this.beginException1(),this._primitiveType=e,this._camera=t,this._hasBegun=!0,this},t.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},t.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(e._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),Nr.drawCall++,ur.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},t.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},t.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},t.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},t.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},t.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},t.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(28,[new Jl(0,"vector3",0),new Jl(12,"vector4",1)])}]),e}(),aa=function(){function e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}o(e,"laya.d3.core.Layer");var t=e.prototype;return t._binarySearchIndex=function(){for(var t=0,i=e._collsionTestList.length-1,n=0;i>=t;){n=Math.floor((t+i)/2);var o=e._collsionTestList[n];if(o==this._number)return n;o>this._number?i=n-1:t=n+1}return t},t._addCollider=function(t){0===this._colliders.length&&e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),t._isRigidbody?(this._colliders.unshift(t),this._nonRigidbodyOffset++):this._colliders.push(t)},t._removeCollider=function(t){var i=this._colliders.indexOf(t);i<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(i,1),0===this._colliders.length&&e._collsionTestList.splice(e._collsionTestList.indexOf(this._number),1)},s(0,t,"visible",function(){return this._visible},function(t){this._visible=t,t?e._visibleLayers=e._visibleLayers|this.mask:e._visibleLayers=e._visibleLayers&~this.mask}),s(0,t,"mask",function(){return this._mask}),s(0,t,"number",function(){return this._number}),s(1,e,"visibleLayers",function(){return e._visibleLayers},function(t){e._visibleLayers=t;for(var i=0,n=e._layerList.length;n>i;i++){var o=e._layerList[i];o._visible=0!==(o._mask&e._visibleLayers)}}),e.__init__=function(){e._layerList.length=31;for(var t=0;31>t;t++){var i=new e;e._layerList[t]=i,0===t?(i.name="Default Layer",i.visible=!0):(i.name="Layer-"+t,i.visible=!1),i._number=t,i._mask=Math.pow(2,t)}e.currentCreationLayer=e._layerList[0]},e.getLayerByNumber=function(t){if(0>t||t>30)throw new Error("无法返回指定Layer，该number超出范围！");return e._layerList[t]},e.getLayerByName=function(t){for(var i=0;31>i;i++)if(e._layerList[i].name===t)return e._layerList[i];throw new Error("无法返回指定Layer,该name不存在")},e.isVisible=function(t){return 0!=(t&e._currentCameraCullingMask&e._visibleLayers)},e._layerList=[],e._visibleLayers=2147483647,e._collsionTestList=[],e._currentCameraCullingMask=2147483647,e.maxCount=31,e.currentCreationLayer=null,e}(),la=function(){function e(t){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new rl,this._curPosition=new rl,this._delVector3=new rl,this._lastFixedVertexPosition=new rl,this._pointAtoBVector3=new rl,this._pointA=new rl,this._pointB=new rl,this._owner=t,this._id=e.renderElementCount++,0==this._id?t._owner.transform.position.cloneTo(this._lastPosition):t._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new IS(fa.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new IS(fa.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}o(e,"laya.d3.core.trail.TrailRenderElement");var t=e.prototype;return i.imps(t,{"laya.d3.core.render.IRenderable":!0}),t._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},t._addTrailByFirstPosition=function(e,t){rl.subtract(t,e,this._delVector3),rl.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),rl.normalize(this._pointAtoBVector3,this._pointAtoBVector3),rl.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(e),e.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},t._addTrailByNextPosition=function(e){rl.subtract(e,this._lastFixedVertexPosition,this._delVector3),rl.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),rl.normalize(this._pointAtoBVector3,this._pointAtoBVector3),rl.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=rl.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=ja.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(e),e.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(e),this._virtualVerticesCount=2)},t._updateVerticesByPosition=function(e){this._pointe=e.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},t._updateVertexBuffer2=function(){var e=0,t=0,i=0,n=0;for(i=0,n=(this._verticesCount+this._virtualVerticesCount)/2;n>i;i++)t=0==this._owner.textureMode?(this._VerticesToTailLength[i]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[i],this._vertices2[e++]=1-t,this._vertices2[e++]=1-t;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},t._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},t._updateDisappear=function(){var e=0,t=0;for(e=this._curDisappearIndex,t=(this._verticesCount+this._virtualVerticesCount)/2;t>e;e++)this._owner._curtime-this._everyGroupVertexBirthTime[e]>=this._owner.time+ja.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},t._beforeRender=function(e){return this._camera=e.camera,null==this._camera?!1:(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),rl.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),this._verticesCount>0)?(this._updateVertexBuffer2(),this._updateDisappear(),!0):!1)},t._render=function(e){this._isDead||(ur.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),Nr.drawCall++,Nr.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},t._getVertexBuffer=function(e){return void 0===e&&(e=0),0===e?this._vertexBuffer1:1===e?this._vertexBuffer2:null},t._getVertexBuffers=function(){return this._vertexBuffers},t._getIndexBuffer=function(){return null},t.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},t._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},s(0,t,"triangleCount",function(){return 0}),s(0,t,"_vertexBufferCount",function(){return this._vertexBuffers.length}),e.renderElementCount=0,e}(),ha=(function(){function e(){}return o(e,"laya.d3.core.trail.module.GradientMode"),e.Blend=0,e.Fixed=1,e}(),function(){function e(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}o(e,"laya.d3.core.trail.module.TrailKeyFrame");var t=e.prototype;return t.cloneTo=function(e){e.time=this.time,e.inTangent=this.inTangent,e.outTangent=this.outTangent,e.value=this.value},e}()),ca=function(){function e(e,t,i,n){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1),this._r=e,this._g=t,this._b=i,this._a=n}o(e,"laya.d3.core.trail.module.Color",null,"Color$1");var t=e.prototype;return t.cloneTo=function(e){e._r=this._r,e._g=this._g,e._b=this._b,e._a=this._a},n(e,["RED",function(){return this.RED=new e(1,0,0,1)},"GREEN",function(){return this.GREEN=new e(0,1,0,1)},"BLUE",function(){return this.BLUE=new e(0,0,1,1)},"CYAN",function(){return this.CYAN=new e(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new e(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new e(1,0,1,1)},"GRAY",function(){return this.GRAY=new e(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new e(1,1,1,1)},"BLACK",function(){return this.BLACK=new e(0,0,0,1)}]),e}(),ua=function(){function e(e,t){this._alpha=NaN,this._time=NaN,void 0===e&&(e=0),void 0===t&&(t=0),this._alpha=e,this._time=t}o(e,"laya.d3.core.trail.module.GradientAlphaKey");var t=e.prototype;return t.cloneTo=function(e){e.alpha=this.alpha,e.time=this.time},s(0,t,"time",function(){return this._time},function(e){this._time=e}),s(0,t,"alpha",function(){return this._alpha},function(e){this._alpha=e}),e}(),da=(function(){function e(){}return o(e,"laya.d3.core.trail.module.TextureMode"),e.Stretch=0,e.Tile=1,e}(),function(){function e(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}o(e,"laya.d3.core.trail.module.Gradient");var t=e.prototype;return t.setKeys=function(e,t){this._colorKeys=e,this.index=0;for(var i,n=0;n<e.length;n++){i=e[n];var o=i.color;this._colorKeyData[this.index++]=o._r,this._colorKeyData[this.index++]=o._g,this._colorKeyData[this.index++]=o._b,this._colorKeyData[this.index++]=i.time}this._alphaKeys=t,this.index=0;for(var s,r=0;r<t.length;r++)s=t[r],this._alphaKeyData[this.index++]=s.alpha,this._alphaKeyData[this.index++]=s.time},t.cloneTo=function(e){var t=0,i=0,n=this.colorKeys,o=[];for(t=0,i=n.length;i>t;t++){var s=new pa;n[t].cloneTo(s),o.push(s)}var r=this.alphaKeys,a=[];for(t=0,i=r.length;i>t;t++){var l=new ua;r[t].cloneTo(l),a.push(l)}e.setKeys(o,a)},s(0,t,"alphaKeys",function(){return this._alphaKeys},function(e){this._alphaKeys=e,this.index=0;for(var t=0;t<e.length;t++){var i=e[t];this._alphaKeyData[this.index++]=i.alpha,this._alphaKeyData[this.index++]=i.time}}),s(0,t,"colorKeys",function(){return this._colorKeys},function(e){this._colorKeys=e,this.index=0;for(var t=0;t<e.length;t++){var i=e[t],n=i.color;this._colorKeyData[this.index++]=n._r,this._colorKeyData[this.index++]=n._g,this._colorKeyData[this.index++]=n._b,this._colorKeyData[this.index++]=i.time}}),s(0,t,"mode",function(){return this._mode},function(e){this._mode=e}),e}()),pa=function(){function e(e,t){this._color=null,this._time=NaN,void 0===t&&(t=0),this._color=e||new ca,this._time=t}o(e,"laya.d3.core.trail.module.GradientColorKey");var t=e.prototype;return t.cloneTo=function(e){this.color.cloneTo(e.color),e.time=this.time},s(0,t,"time",function(){return this._time},function(e){this._time=e}),s(0,t,"color",function(){return this._color},function(e){this._color=e}),e}(),fa=function(){function e(){}o(e,"laya.d3.core.trail.VertexTrail");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration1}),s(1,e,"vertexDeclaration2",function(){return e._vertexDeclaration2}),s(1,e,"vertexDeclaration1",function(){return e._vertexDeclaration1}),n(e,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new rh(32,[new Jl(0,"vector3",0),new Jl(12,"vector3",41),new Jl(24,"single",33),new Jl(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new rh(4,[new Jl(0,"single",38)])}]),e}(),_a=function(){function e(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++e._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new gl}o(e,"laya.d3.core.render.RenderElement");var t=e.prototype;return t.getDynamicBatchBakedVertexs=function(e){for(var t=4,i=this._renderObj._getVertexBuffer(e),n=i.getData().slice(),o=i.vertexDeclaration,s=o.getVertexElementByUsage(0).offset/t,r=o.getVertexElementByUsage(3).offset/t,a=this._sprite3D.transform,l=a.worldMatrix,h=a.rotation,c=o.vertexStride/t,u=0,d=n.length;d>u;u+=c){var p=u+s,f=u+r;Ya.transformVector3ArrayToVector3ArrayCoordinate(n,p,l,n,p),Ya.transformVector3ArrayByQuat(n,f,h,n,f)}return n},t.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},t._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},s(0,t,"renderObj",function(){return this._renderObj},function(e){this._renderObj!==e&&(this._renderObj=e)}),s(0,t,"id",function(){return this._id}),e._uniqueIDCounter=0,e}(),ma=function(){function e(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return o(e,"laya.d3.core.render.RenderState"),e.clientWidth=0,e.clientHeight=0,e}(),ga=function(){function e(t){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++e._uniqueIDCounter,this._needSort=!1,this._scene=t,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[]}o(e,"laya.d3.core.render.RenderQueue");var t=e.prototype;return t._sortOpaqueFunc=function(e,t){if(e._render&&t._render){var i=e._material.renderQueue-t._material.renderQueue;return 0===i?e._render._distanceForSort-t._render._distanceForSort:i}return 0},t._sortAlphaFunc=function(e,t){if(e._render&&t._render){var i=e._material.renderQueue-t._material.renderQueue;return 0===i?t._render._distanceForSort-e._render._distanceForSort:i}return 0},t._begainRenderElement=function(e,t,i){return!!t._beforeRender(e)},t._sortAlpha=function(t){e._cameraPosition=t,this._finalElements.sort(this._sortAlphaFunc)},t._sortOpaque=function(t){e._cameraPosition=t,this._finalElements.sort(this._sortOpaqueFunc)},t._preRender=function(e){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},t._render=function(e,t){for(var i,n,o,s,r,a,l=Nr.loopCount,h=this._scene,c=e.camera,u=(c.id,!1),d=0,p=this._finalElements.length;p>d;d++){var f,_,m,g=this._finalElements[d];if(null!=g._onPreRenderFunction&&g._onPreRenderFunction.call(g._sprite3D,e),0===g._type){if(e.owner=m=g._sprite3D,e.renderElement=g,m._preRenderUpdateComponents(e),f=g.renderObj,_=g._material,this._begainRenderElement(e,f,_)){if(i=f._getVertexBuffers(),n=f._getVertexBuffer(0),o=n.vertexDeclaration,s=e._shader=_._getShader(h._shaderDefineValue,o.shaderDefineValue,m._shaderDefineValue),u=s.bind()||l!==s._uploadLoopCount,i){if(s._uploadVertexBuffer!==i||u){for(var v=0;v<i.length;v++){var y=i[v];s.uploadAttributesX(y.vertexDeclaration.shaderValues.data,y)}s._uploadVertexBuffer=i}}else(s._uploadVertexBuffer!==n||u)&&(s.uploadAttributes(o.shaderValues.data,null),s._uploadVertexBuffer=n);(s._uploadScene!==h||u)&&(s.uploadSceneUniforms(h._shaderValues.data),s._uploadScene=h),(c!==s._uploadCamera||s._uploadSprite3D!==m||u)&&(s.uploadSpriteUniforms(m._shaderValues.data),s._uploadSprite3D=m),(c!==s._uploadCamera||u)&&(s.uploadCameraUniforms(c._shaderValues.data),s._uploadCamera=c),(s._uploadMaterial!==_||u)&&(_._upload(),s._uploadMaterial=_),r!==_?(_._setRenderStateBlendDepth(),_._setRenderStateFrontFace(t,m.transform),r=_,a=m):a!==m&&(_._setRenderStateFrontFace(t,m.transform),a=m),f._render(e),s._uploadLoopCount=l}m._postRenderUpdateComponents(e)}else if(2===g._type){g.renderObj;e.owner=m=g._sprite3D,e.renderElement=g,e._batchIndexStart=g._tempBatchIndexStart,e._batchIndexEnd=g._tempBatchIndexEnd,f=g.renderObj,_=g._material,this._begainRenderElement(e,f,_)&&(n=f._getVertexBuffer(0),o=n.vertexDeclaration,s=e._shader=_._getShader(h._shaderDefineValue,o.shaderDefineValue,m._shaderDefineValue),u=s.bind()||l!==s._uploadLoopCount,(s._uploadVertexBuffer!==n||u)&&(s.uploadAttributes(o.shaderValues.data,null),s._uploadVertexBuffer=n),(s._uploadScene!==h||u)&&(s.uploadSceneUniforms(h._shaderValues.data),s._uploadScene=h),(c!==s._uploadCamera||s._uploadSprite3D!==m||u)&&(s.uploadSpriteUniforms(m._shaderValues.data),s._uploadSprite3D=m),(c!==s._uploadCamera||u)&&(s.uploadCameraUniforms(c._shaderValues.data),s._uploadCamera=c),(s._uploadMaterial!==_||u)&&(_._upload(),s._uploadMaterial=_),r!==_?(_._setRenderStateBlendDepth(),_._setRenderStateFrontFace(t,m.transform),r=_,a=m):a!==m&&(_._setRenderStateFrontFace(t,m.transform),a=m),f._render(e),s._uploadLoopCount=l)}}},t._renderShadow=function(e,t){for(var i,n,o,s,r,a=Nr.loopCount,l=this._scene,h=e.camera,c=!1,u=0,d=this._finalElements.length;d>u;u++){var p,f,_,m=this._finalElements[u];0===m._type&&(e.owner=_=m._sprite3D,
t||_._projectionViewWorldUpdateCamera===h&&_._projectionViewWorldUpdateLoopCount===Nr.loopCount||(_._render._renderUpdate(e._projectionViewMatrix),_._projectionViewWorldUpdateLoopCount=Nr.loopCount,_._projectionViewWorldUpdateCamera=h),e.renderElement=m,_._preRenderUpdateComponents(e),p=m.renderObj,f=m._material,this._begainRenderElement(e,p,null)&&(i=p._getVertexBuffer(0),n=i.vertexDeclaration,o=e._shader=f._getShader(l._shaderDefineValue,n.shaderDefineValue,_._shaderDefineValue),c=o.bind()||a!==o._uploadLoopCount,(o._uploadVertexBuffer!==i||c)&&(o.uploadAttributes(n.shaderValues.data,null),o._uploadVertexBuffer=i),(h!==o._uploadCamera||o._uploadSprite3D!==_||c)&&(o.uploadSpriteUniforms(_._shaderValues.data),o._uploadSprite3D=_),(h!==o._uploadCamera||c)&&(o.uploadCameraUniforms(h._shaderValues.data),o._uploadCamera=h),(o._uploadMaterial!==f||c)&&(f._upload(),o._uploadMaterial=f),o._uploadRenderElement!==m||c,s!==f?(f._setRenderStateFrontFace(!1,_.transform),s=f,r=_):r!==_&&(f._setRenderStateFrontFace(!1,_.transform),r=_),p._render(e),o._uploadLoopCount=a),_._postRenderUpdateComponents(e))}},t._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},t._addRenderElement=function(e){this._renderElements.push(e),this._needSort=!0},t._addDynamicBatchElement=function(e){this._dynamicBatchCombineRenderElements.push(e)},s(0,t,"id",function(){return this._id}),e._uniqueIDCounter=0,e._cameraPosition=null,e}(),va=function(){function e(){}return o(e,"laya.d3.core.particleShuriKen.ShurikenParticleData"),e._getStartLifetimeFromGradient=function(e,t){for(var i=1,n=e.gradientCount;n>i;i++){var o=e.getKeyByIndex(i);if(o>=t){var s=e.getKeyByIndex(i-1),r=(t-s)/(o-s);return Ih.lerp(e.getValueByIndex(i-1),e.getValueByIndex(i),r)}}throw new Error("ShurikenParticleData: can't get value foam startLifeTimeGradient.")},e._randomInvertRoationArray=function(e,t,i,n,o){var s=NaN;n?(n.seed=o[6],s=n.getFloat(),o[6]=n.seed):s=Math.random(),i>s?(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2]):(t[0]=e[0],t[1]=e[1],t[2]=e[2])},e._randomInvertRoation=function(e,t,i,n){var o=NaN;return i?(i.seed=n[6],o=i.getFloat(),n[6]=i.seed):o=Math.random(),t>o&&(e=-e),e},e.create=function(t,i,n){var o=t.autoRandomSeed,s=t._rand,r=t._randomSeeds;switch(t.startColorType){case 0:var a=t.startColorConstant.elements;e.startColor[0]=a[0],e.startColor[1]=a[1],e.startColor[2]=a[2],e.startColor[3]=a[3];break;case 2:o?Ih.lerpVector4(t.startColorConstantMin.elements,t.startColorConstantMax.elements,Math.random(),e.startColor):(s.seed=r[3],Ih.lerpVector4(t.startColorConstantMin.elements,t.startColorConstantMax.elements,s.getFloat(),e.startColor),r[3]=s.seed)}var l=t.colorOverLifetime;if(l&&l.enbale){var h=l.color;switch(h.type){case 0:e.startColor[0]=e.startColor[0]*h.constant.x,e.startColor[1]=e.startColor[1]*h.constant.y,e.startColor[2]=e.startColor[2]*h.constant.z,e.startColor[3]=e.startColor[3]*h.constant.w;break;case 2:var c=NaN;o?c=Math.random():(s.seed=r[10],c=s.getFloat(),r[10]=s.seed);var u=h.constantMin,d=h.constantMax;e.startColor[0]=e.startColor[0]*Ih.lerp(u.x,d.x,c),e.startColor[1]=e.startColor[1]*Ih.lerp(u.y,d.y,c),e.startColor[2]=e.startColor[2]*Ih.lerp(u.z,d.z,c),e.startColor[3]=e.startColor[3]*Ih.lerp(u.w,d.w,c)}}var p=e.startSize;switch(t.startSizeType){case 0:if(t.threeDStartSize){var f=t.startSizeConstantSeparate;p[0]=f.x,p[1]=f.y,p[2]=f.z}else p[0]=p[1]=p[2]=t.startSizeConstant;break;case 2:if(t.threeDStartSize){var _=t.startSizeConstantMinSeparate,m=t.startSizeConstantMaxSeparate;o?(p[0]=Ih.lerp(_.x,m.x,Math.random()),p[1]=Ih.lerp(_.y,m.y,Math.random()),p[2]=Ih.lerp(_.z,m.z,Math.random())):(s.seed=r[4],p[0]=Ih.lerp(_.x,m.x,s.getFloat()),p[1]=Ih.lerp(_.y,m.y,s.getFloat()),p[2]=Ih.lerp(_.z,m.z,s.getFloat()),r[4]=s.seed)}else o?p[0]=p[1]=p[2]=Ih.lerp(t.startSizeConstantMin,t.startSizeConstantMax,Math.random()):(s.seed=r[4],p[0]=p[1]=p[2]=Ih.lerp(t.startSizeConstantMin,t.startSizeConstantMax,s.getFloat()),r[4]=s.seed)}var g=t.sizeOverLifetime;if(g&&g.enbale&&1===g.size.type){var v=g.size;if(v.separateAxes)o?(p[0]=p[0]*Ih.lerp(v.constantMinSeparate.x,v.constantMaxSeparate.x,Math.random()),p[1]=p[1]*Ih.lerp(v.constantMinSeparate.y,v.constantMaxSeparate.y,Math.random()),p[2]=p[2]*Ih.lerp(v.constantMinSeparate.z,v.constantMaxSeparate.z,Math.random())):(s.seed=r[11],p[0]=p[0]*Ih.lerp(v.constantMinSeparate.x,v.constantMaxSeparate.x,s.getFloat()),p[1]=p[1]*Ih.lerp(v.constantMinSeparate.y,v.constantMaxSeparate.y,s.getFloat()),p[2]=p[2]*Ih.lerp(v.constantMinSeparate.z,v.constantMaxSeparate.z,s.getFloat()),r[11]=s.seed);else{var y=NaN;o?y=Ih.lerp(v.constantMin,v.constantMax,Math.random()):(s.seed=r[11],y=Ih.lerp(v.constantMin,v.constantMax,s.getFloat()),r[11]=s.seed),p[0]=p[0]*y,p[1]=p[1]*y,p[2]=p[2]*y}}var b=i.renderMode;if(1!==b)switch(t.startRotationType){case 0:if(t.threeDStartRotation){var E=t.startRotationConstantSeparate,x=e._tempVector30.elements;e._randomInvertRoationArray(E.elements,x,t.randomizeRotationDirection,o?null:s,r),e.startRotation[0]=x[0],e.startRotation[1]=x[1],4!==b?e.startRotation[2]=-x[2]:e.startRotation[2]=x[2]}else e.startRotation[0]=e._randomInvertRoation(t.startRotationConstant,t.randomizeRotationDirection,o?null:s,r);break;case 2:if(t.threeDStartRotation){var S=t.startRotationConstantMinSeparate,w=t.startRotationConstantMaxSeparate,C=e._tempVector30.elements;o?(C[0]=Ih.lerp(S.x,w.x,Math.random()),C[1]=Ih.lerp(S.y,w.y,Math.random()),C[2]=Ih.lerp(S.z,w.z,Math.random())):(s.seed=r[5],C[0]=Ih.lerp(S.x,w.x,s.getFloat()),C[1]=Ih.lerp(S.y,w.y,s.getFloat()),C[2]=Ih.lerp(S.z,w.z,s.getFloat()),r[5]=s.seed),e._randomInvertRoationArray(C,C,t.randomizeRotationDirection,o?null:s,r),e.startRotation[0]=C[0],e.startRotation[1]=C[1],4!==b?e.startRotation[2]=-C[2]:e.startRotation[2]=C[2]}else o?e.startRotation[0]=e._randomInvertRoation(Ih.lerp(t.startRotationConstantMin,t.startRotationConstantMax,Math.random()),t.randomizeRotationDirection,o?null:s,r):(s.seed=r[5],e.startRotation[0]=e._randomInvertRoation(Ih.lerp(t.startRotationConstantMin,t.startRotationConstantMax,s.getFloat()),t.randomizeRotationDirection,o?null:s,r),r[5]=s.seed)}switch(t.startLifetimeType){case 0:e.startLifeTime=t.startLifetimeConstant;break;case 1:e.startLifeTime=e._getStartLifetimeFromGradient(t.startLifeTimeGradient,t.emissionTime);break;case 2:o?e.startLifeTime=Ih.lerp(t.startLifetimeConstantMin,t.startLifetimeConstantMax,Math.random()):(s.seed=r[7],e.startLifeTime=Ih.lerp(t.startLifetimeConstantMin,t.startLifetimeConstantMax,s.getFloat()),r[7]=s.seed);break;case 3:var T=t.emissionTime;o?e.startLifeTime=Ih.lerp(e._getStartLifetimeFromGradient(t.startLifeTimeGradientMin,T),e._getStartLifetimeFromGradient(t.startLifeTimeGradientMax,T),Math.random()):(s.seed=r[7],e.startLifeTime=Ih.lerp(e._getStartLifetimeFromGradient(t.startLifeTimeGradientMin,T),e._getStartLifetimeFromGradient(t.startLifeTimeGradientMax,T),s.getFloat()),r[7]=s.seed)}switch(t.startSpeedType){case 0:e.startSpeed=t.startSpeedConstant;break;case 2:o?e.startSpeed=Ih.lerp(t.startSpeedConstantMin,t.startSpeedConstantMax,Math.random()):(s.seed=r[8],e.startSpeed=Ih.lerp(t.startSpeedConstantMin,t.startSpeedConstantMax,s.getFloat()),r[8]=s.seed)}var I=t.textureSheetAnimation,A=I&&I.enable;if(A){var N=I.tiles,P=N.x,R=N.y,L=1/P,O=1/R,M=0,D=I.startFrame;switch(D.type){case 0:M=D.constant;break;case 1:o?M=Ih.lerp(D.constantMin,D.constantMax,Math.random()):(s.seed=r[14],M=Ih.lerp(D.constantMin,D.constantMax,s.getFloat()),r[14]=s.seed)}var k=I.frame;switch(k.type){case 0:M+=k.constant;break;case 2:o?M+=Ih.lerp(k.constantMin,k.constantMax,Math.random()):(s.seed=r[15],M+=Ih.lerp(k.constantMin,k.constantMax,s.getFloat()),r[15]=s.seed)}var B=0;switch(I.type){case 0:B=Math.floor(M/P);break;case 1:I.randomRow?o?B=Math.floor(Math.random()*R):(s.seed=r[13],B=Math.floor(s.getFloat()*R),r[13]=s.seed):B=I.rowIndex}var V=Math.floor(M%P);e.startUVInfo=e.startUVInfo,e.startUVInfo[0]=L,e.startUVInfo[1]=O,e.startUVInfo[2]=V*L,e.startUVInfo[3]=B*O}else e.startUVInfo=e.startUVInfo,e.startUVInfo[0]=1,e.startUVInfo[1]=1,e.startUVInfo[2]=0,e.startUVInfo[3]=0;switch(t.simulationSpace){case 0:var F=n.position.elements;e.simulationWorldPostion[0]=F[0],e.simulationWorldPostion[1]=F[1],e.simulationWorldPostion[2]=F[2];var G=n.rotation.elements;e.simulationWorldRotation[0]=G[0],e.simulationWorldRotation[1]=G[1],e.simulationWorldRotation[2]=G[2],e.simulationWorldRotation[3]=G[3];break;case 1:break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.")}},e.startLifeTime=NaN,e.startSpeed=NaN,n(e,["_tempVector30",function(){return this._tempVector30=new rl},"_tempQuaternion",function(){return this._tempQuaternion=new cl},"startColor",function(){return this.startColor=new Float32Array(4)},"startSize",function(){return this.startSize=new Float32Array(3)},"startRotation",function(){return this.startRotation=new Float32Array(3)},"startUVInfo",function(){return this.startUVInfo=new Float32Array(4)},"simulationWorldPostion",function(){return this.simulationWorldPostion=new Float32Array(3)},"simulationWorldRotation",function(){return this.simulationWorldRotation=new Float32Array(4)}]),e}(),ya=function(){function e(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}o(e,"laya.d3.core.particleShuriKen.module.FrameOverTime");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,t._constant=this._constant,this._overTime.cloneTo(t._overTime),t._constantMin=this._constantMin,t._constantMax=this._constantMax,this._overTimeMin.cloneTo(t._overTimeMin),this._overTimeMax.cloneTo(t._overTimeMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"frameOverTimeDataMax",function(){return this._overTimeMax}),s(0,t,"frameOverTimeDataMin",function(){return this._overTimeMin}),s(0,t,"type",function(){return this._type}),s(0,t,"constantMin",function(){return this._constantMin}),s(0,t,"frameOverTimeData",function(){return this._overTime}),s(0,t,"constant",function(){return this._constant}),s(0,t,"constantMax",function(){return this._constantMax}),e.createByConstant=function(t){var i=new e;return i._type=0,i._constant=t,i},e.createByOverTime=function(t){var i=new e;return i._type=1,i._overTime=t,i},e.createByRandomTwoConstant=function(t,i){var n=new e;return n._type=2,n._constantMin=t,n._constantMax=i,n},e.createByRandomTwoOverTime=function(t,i){var n=new e;return n._type=3,n._overTimeMin=t,n._overTimeMax=i,n},e}(),ba=function(){function e(e,t){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new ul(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=e,this._startFrame=t}o(e,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;this.tiles.cloneTo(t.tiles),t.type=this.type,t.randomRow=this.randomRow,this._frame.cloneTo(t._frame),this._startFrame.cloneTo(t._startFrame),t.cycles=this.cycles,t.enableUVChannels=this.enableUVChannels,t.enable=this.enable},t.clone=function(){var e;switch(this._frame.type){case 0:e=ya.createByConstant(this._frame.constant);break;case 1:e=ya.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:e=ya.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:e=ya.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}var t;switch(this._startFrame.type){case 0:t=Oa.createByConstant(this._startFrame.constant);break;case 1:t=Oa.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var i=new this.constructor(e,t);return this.tiles.cloneTo(i.tiles),i.type=this.type,i.randomRow=this.randomRow,i.cycles=this.cycles,i.enableUVChannels=this.enableUVChannels,i.enable=this.enable,i},s(0,t,"startFrame",function(){return this._startFrame}),s(0,t,"frame",function(){return this._frame}),e}(),Ea=function(){function e(){this.enable=!1,this.randomDirection=!1}o(e,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t._getShapeBoundBox=function(e){throw new Error("BaseShape: must override it.")},t._getSpeedBoundBox=function(e){throw new Error("BaseShape: must override it.")},t.generatePositionAndDirection=function(e,t,i,n){throw new Error("BaseShape: must override it.")},t._calculateProceduralBounds=function(e,t,i){this._getShapeBoundBox(e);var n=e.min,o=e.max;rl.multiply(n,t,n),rl.multiply(o,t,o);var s=new nl(new rl,new rl);this.randomDirection?(s.min=new rl(-1,-1,-1),s.max=new rl(1,1,1)):this._getSpeedBoundBox(s);var r=new nl(new rl,new rl),a=r.min,l=r.max;rl.scale(s.min,i.y,a),rl.scale(s.max,i.y,l),rl.add(e.min,a,a),rl.add(e.max,l,l),rl.min(e.min,a,e.min),rl.max(e.max,a,e.max);var h=new nl(new rl,new rl),c=h.min,u=h.max;rl.scale(s.min,i.x,c),rl.scale(s.max,i.x,u),rl.min(h.min,u,a),rl.max(h.min,u,l),rl.min(e.min,a,e.min),rl.max(e.max,a,e.max)},t.cloneTo=function(e){var t=e;t.enable=this.enable},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e}(),xa=function(){function e(){}return o(e,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),e._randomPointUnitArcCircle=function(e,t,i){var n=t.elements,o=NaN;o=i?i.getFloat()*e:Math.random()*e,n[0]=Math.cos(o),n[1]=Math.sin(o)},e._randomPointInsideUnitArcCircle=function(t,i,n){var o=i.elements;e._randomPointUnitArcCircle(t,i,n);var s=NaN;s=n?Math.pow(n.getFloat(),.5):Math.pow(Math.random(),.5),o[0]=o[0]*s,o[1]=o[1]*s},e._randomPointUnitCircle=function(e,t){var i=e.elements,n=NaN;n=t?t.getFloat()*Math.PI*2:Math.random()*Math.PI*2,i[0]=Math.cos(n),i[1]=Math.sin(n)},e._randomPointInsideUnitCircle=function(t,i){var n=t.elements;e._randomPointUnitCircle(t);var o=NaN;o=i?Math.pow(i.getFloat(),.5):Math.pow(Math.random(),.5),n[0]=n[0]*o,n[1]=n[1]*o},e._randomPointUnitSphere=function(e,t){var i=e.elements,n=NaN,o=NaN;t?(n=i[2]=2*t.getFloat()-1,o=t.getFloat()*Math.PI*2):(n=i[2]=2*Math.random()-1,o=Math.random()*Math.PI*2);var s=Math.sqrt(1-n*n);i[0]=s*Math.cos(o),i[1]=s*Math.sin(o)},e._randomPointInsideUnitSphere=function(t,i){var n=t.elements;e._randomPointUnitSphere(t);var o=NaN;o=i?Math.pow(i.getFloat(),1/3):Math.pow(Math.random(),1/3),n[0]=n[0]*o,n[1]=n[1]*o,n[2]=n[2]*o},e._randomPointInsideHalfUnitBox=function(e,t){var i=e.elements;t?(i[0]=t.getFloat()-.5,i[1]=t.getFloat()-.5,i[2]=t.getFloat()-.5):(i[0]=Math.random()-.5,i[1]=Math.random()-.5,i[2]=Math.random()-.5)},e}(),Sa=function(){function e(e,t,i){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=e,this._minCount=t,this._maxCount=i}o(e,"laya.d3.core.particleShuriKen.module.Burst");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._time=this._time,t._minCount=this._minCount,t._maxCount=this._maxCount},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"maxCount",function(){return this._maxCount}),s(0,t,"minCount",function(){return this._minCount}),s(0,t,"time",function(){return this._time}),e}(),wa=function(){function e(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}o(e,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,t._separateAxes=this._separateAxes,t._constant=this._constant,this._constantSeparate.cloneTo(t._constantSeparate),this._gradient.cloneTo(t._gradient),this._gradientX.cloneTo(t._gradientX),this._gradientY.cloneTo(t._gradientY),this._gradientZ.cloneTo(t._gradientZ),t._constantMin=this._constantMin,t._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(t._constantMinSeparate),this._constantMaxSeparate.cloneTo(t._constantMaxSeparate),this._gradientMin.cloneTo(t._gradientMin),this._gradientMax.cloneTo(t._gradientMax),this._gradientXMin.cloneTo(t._gradientXMin),this._gradientXMax.cloneTo(t._gradientXMax),this._gradientYMin.cloneTo(t._gradientYMin),this._gradientYMax.cloneTo(t._gradientYMax),this._gradientZMin.cloneTo(t._gradientZMin),this._gradientZMax.cloneTo(t._gradientZMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"gradientWMin",function(){return this._gradientWMin}),s(0,t,"gradientZMax",function(){return this._gradientZMax}),s(0,t,"gradientZMin",function(){return this._gradientZMin}),s(0,t,"gradientYMax",function(){return this._gradientYMax}),s(0,t,"gradientYMin",function(){return this._gradientYMin}),s(0,t,"gradientMax",function(){return this._gradientMax}),s(0,t,"gradientMin",function(){return this._gradientMin}),s(0,t,"constantMaxSeparate",function(){return this._constantMaxSeparate}),s(0,t,"constantMax",function(){return this._constantMax}),s(0,t,"gradientW",function(){return this._gradientW}),s(0,t,"gradientXMax",function(){return this._gradientXMax}),s(0,t,"constantMinSeparate",function(){return this._constantMinSeparate}),s(0,t,"gradientY",function(){return this._gradientY}),s(0,t,"gradientZ",function(){return this._gradientZ}),s(0,t,"gradientX",function(){return this._gradientX}),s(0,t,"constantSeparate",function(){return this._constantSeparate}),s(0,t,"constant",function(){return this._constant}),s(0,t,"gradientWMax",function(){return this._gradientWMax}),s(0,t,"gradient",function(){return this._gradient}),s(0,t,"separateAxes",function(){return this._separateAxes}),s(0,t,"constantMin",function(){return this._constantMin}),s(0,t,"gradientXMin",function(){return this._gradientXMin}),s(0,t,"type",function(){return this._type}),e.createByConstant=function(t){var i=new e;return i._type=0,i._separateAxes=!1,i._constant=t,i},e.createByConstantSeparate=function(t){var i=new e;return i._type=0,i._separateAxes=!0,i._constantSeparate=t,i},e.createByGradient=function(t){var i=new e;return i._type=1,i._separateAxes=!1,i._gradient=t,i},e.createByGradientSeparate=function(t,i,n,o){var s=new e;return s._type=1,s._separateAxes=!0,s._gradientX=t,s._gradientY=i,s._gradientZ=n,s._gradientW=o,s},e.createByRandomTwoConstant=function(t,i){var n=new e;return n._type=2,n._separateAxes=!1,n._constantMin=t,n._constantMax=i,n},e.createByRandomTwoConstantSeparate=function(t,i){var n=new e;return n._type=2,n._separateAxes=!0,n._constantMinSeparate=t,n._constantMaxSeparate=i,n},e.createByRandomTwoGradient=function(t,i){var n=new e;return n._type=3,n._separateAxes=!1,n._gradientMin=t,n._gradientMax=i,n},e.createByRandomTwoGradientSeparate=function(t,i,n,o,s,r,a,l){var h=new e;return h._type=3,h._separateAxes=!0,h._gradientXMin=t,h._gradientXMax=i,h._gradientYMin=n,h._gradientYMax=o,h._gradientZMin=s,h._gradientZMax=r,h._gradientWMin=a,h._gradientWMax=l,h},e}(),Ca=function(){function e(e){this._size=null,this.enbale=!1,this._size=e}o(e,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;this._size.cloneTo(t._size),t.enbale=this.enbale},t.clone=function(){var e;switch(this._size.type){case 0:e=this._size.separateAxes?La.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):La.createByGradient(this._size.gradient.clone());break;case 1:e=this._size.separateAxes?La.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):La.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:e=this._size.separateAxes?La.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):La.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var t=new this.constructor(e);return t.enbale=this.enbale,t},s(0,t,"size",function(){return this._size}),e}(),Ta=function(){function e(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}o(e,"laya.d3.core.particleShuriKen.module.Emission");var t=e.prototype;return i.imps(t,{"laya.resource.IDestroy":!0,"laya.d3.core.IClone":!0}),t._destroy=function(){this._bursts=null,this._destroyed=!0},t.getBurstsCount=function(){return this._bursts.length},t.getBurstByIndex=function(e){return this._bursts[e]},t.addBurst=function(e){var t=this._bursts.length;if(t>0)for(var i=0;t>i;i++)this._bursts[i].time>e.time&&this._bursts.splice(i,0,e);this._bursts.push(e)},t.removeBurst=function(e){var t=this._bursts.indexOf(e);-1!==t&&this._bursts.splice(t,1)},t.removeBurstByIndex=function(e){this._bursts.splice(e,1)},t.clearBurst=function(){this._bursts.length=0},t.cloneTo=function(e){var t=e,i=t._bursts;i.length=this._bursts.length;for(var n=0,o=this._bursts.length;o>n;n++){var s=i[n];s?this._bursts[n].cloneTo(s):i[n]=this._bursts[n].clone()}t._emissionRate=this._emissionRate,t.enbale=this.enbale},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"destroyed",function(){return this._destroyed}),s(0,t,"emissionRate",function(){return this._emissionRate},function(e){if(0>e)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=e}),e}(),Ia=function(){function e(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}o(e,"laya.d3.core.particleShuriKen.module.GradientDataColor");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.addAlpha=function(e,t){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==e&&(e=1,console.log("GradientDataColor warning:the forth key is  be force set to 1.")),this._alphaElements[this._alphaCurrentLength++]=e,this._alphaElements[this._alphaCurrentLength++]=t):console.log("GradientDataColor warning:data count must lessEqual than 4")},t.addRGB=function(e,t){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==e&&(e=1,console.log("GradientDataColor warning:the forth key is  be force set to 1.")),this._rgbElements[this._rgbCurrentLength++]=e,this._rgbElements[this._rgbCurrentLength++]=t.x,this._rgbElements[this._rgbCurrentLength++]=t.y,this._rgbElements[this._rgbCurrentLength++]=t.z):console.log("GradientDataColor warning:data count must lessEqual than 4")},t.cloneTo=function(e){var t=e,i=0,n=0;t._alphaCurrentLength=this._alphaCurrentLength;var o=t._alphaElements;for(o.length=this._alphaElements.length,i=0,n=this._alphaElements.length;n>i;i++)o[i]=this._alphaElements[i];t._rgbCurrentLength=this._rgbCurrentLength;var s=t._rgbElements;for(s.length=this._rgbElements.length,i=0,n=this._rgbElements.length;n>i;i++)s[i]=this._rgbElements[i]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"rgbGradientCount",function(){return this._rgbCurrentLength/4}),s(0,t,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),e}(),Aa=function(){function e(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}o(e,"laya.d3.core.particleShuriKen.module.GradientColor");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,this._constant.cloneTo(t._constant),this._constantMin.cloneTo(t._constantMin),this._constantMax.cloneTo(t._constantMax),this._gradient.cloneTo(t._gradient),this._gradientMin.cloneTo(t._gradientMin),this._gradientMax.cloneTo(t._gradientMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"gradientMax",function(){return this._gradientMax}),s(0,t,"gradientMin",function(){return this._gradientMin}),s(0,t,"constant",function(){return this._constant}),s(0,t,"gradient",function(){return this._gradient}),s(0,t,"type",function(){return this._type}),s(0,t,"constantMin",function(){return this._constantMin}),s(0,t,"constantMax",function(){return this._constantMax}),e.createByConstant=function(t){var i=new e;return i._type=0,i._constant=t,i},e.createByGradient=function(t){var i=new e;return i._type=1,i._gradient=t,i},e.createByRandomTwoConstant=function(t,i){var n=new e;return n._type=2,n._constantMin=t,n._constantMax=i,n},e.createByRandomTwoGradient=function(t,i){var n=new e;return n._type=3,n._gradientMin=t,n._gradientMax=i,n},e}(),Na=function(){function e(e){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=e}o(e,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;this._velocity.cloneTo(t._velocity),t.enbale=this.enbale,t.space=this.space},t.clone=function(){var e;switch(this._velocity.type){case 0:e=Da.createByConstant(this._velocity.constant.clone());break;case 1:e=Da.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:e=Da.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:e=Da.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var t=new this.constructor(e);return t.enbale=this.enbale,t.space=this.space,t},s(0,t,"velocity",function(){return this._velocity}),e}(),Pa=function(){function e(e){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=e}o(e,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;this._angularVelocity.cloneTo(t._angularVelocity),t.enbale=this.enbale},t.clone=function(){var e;switch(this._angularVelocity.type){case 0:e=this._angularVelocity.separateAxes?wa.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):wa.createByConstant(this._angularVelocity.constant);break;case 1:e=this._angularVelocity.separateAxes?wa.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):wa.createByGradient(this._angularVelocity.gradient.clone());break;case 2:e=this._angularVelocity.separateAxes?wa.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):wa.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:e=this._angularVelocity.separateAxes?wa.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):wa.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var t=new this.constructor(e);return t.enbale=this.enbale,t},s(0,t,"angularVelocity",function(){return this._angularVelocity}),e}(),Ra=function(){function e(e){this._color=null,this.enbale=!1,this._color=e}o(e,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var t=e.prototype;return t.cloneTo=function(e){var t=e;this._color.cloneTo(t._color),t.enbale=this.enbale},t.clone=function(){var e;switch(this._color.type){case 0:e=Aa.createByConstant(this._color.constant.clone());break;case 1:e=Aa.createByGradient(this._color.gradient.clone());break;case 2:e=Aa.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:e=Aa.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var t=new this.constructor(e);return t.enbale=this.enbale,t},s(0,t,"color",function(){return this._color}),e}(),La=function(){function e(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}o(e,"laya.d3.core.particleShuriKen.module.GradientSize");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.getMaxSizeInGradient=function(){var e=0,t=0,i=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(e=0,t=this._gradientX.gradientCount;t>e;e++)i=Math.max(i,this._gradientX.getValueByIndex(e));for(e=0,t=this._gradientY.gradientCount;t>e;e++)i=Math.max(i,this._gradientY.getValueByIndex(e))}else for(e=0,t=this._gradient.gradientCount;t>e;e++)i=Math.max(i,this._gradient.getValueByIndex(e));break;case 1:this._separateAxes?(i=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),i=Math.max(i,this._constantMinSeparate.y),i=Math.max(i,this._constantMaxSeparate.y)):i=Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(e=0,t=this._gradientXMin.gradientCount;t>e;e++)i=Math.max(i,this._gradientXMin.getValueByIndex(e));for(e=0,t=this._gradientXMax.gradientCount;t>e;e++)i=Math.max(i,this._gradientXMax.getValueByIndex(e));for(e=0,t=this._gradientYMin.gradientCount;t>e;e++)i=Math.max(i,this._gradientYMin.getValueByIndex(e));for(e=0,t=this._gradientZMax.gradientCount;t>e;e++)i=Math.max(i,this._gradientZMax.getValueByIndex(e))}else{for(e=0,t=this._gradientMin.gradientCount;t>e;e++)i=Math.max(i,this._gradientMin.getValueByIndex(e));for(e=0,t=this._gradientMax.gradientCount;t>e;e++)i=Math.max(i,this._gradientMax.getValueByIndex(e))}}return i},t.cloneTo=function(e){var t=e;t._type=this._type,t._separateAxes=this._separateAxes,this._gradient.cloneTo(t._gradient),this._gradientX.cloneTo(t._gradientX),this._gradientY.cloneTo(t._gradientY),this._gradientZ.cloneTo(t._gradientZ),t._constantMin=this._constantMin,t._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(t._constantMinSeparate),this._constantMaxSeparate.cloneTo(t._constantMaxSeparate),this._gradientMin.cloneTo(t._gradientMin),this._gradientMax.cloneTo(t._gradientMax),this._gradientXMin.cloneTo(t._gradientXMin),this._gradientXMax.cloneTo(t._gradientXMax),this._gradientYMin.cloneTo(t._gradientYMin),this._gradientYMax.cloneTo(t._gradientYMax),this._gradientZMin.cloneTo(t._gradientZMin),this._gradientZMax.cloneTo(t._gradientZMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"gradientZMax",function(){return this._gradientZMax}),s(0,t,"gradientZMin",function(){return this._gradientZMin}),s(0,t,"gradientYMax",function(){return this._gradientYMax}),s(0,t,"gradientYMin",function(){return this._gradientYMin}),s(0,t,"gradientMax",function(){return this._gradientMax}),s(0,t,"gradientXMax",function(){return this._gradientXMax}),s(0,t,"gradientY",function(){return this._gradientY}),s(0,t,"constantMinSeparate",function(){return this._constantMinSeparate}),s(0,t,"constantMax",function(){
return this._constantMax}),s(0,t,"constantMaxSeparate",function(){return this._constantMaxSeparate}),s(0,t,"gradientZ",function(){return this._gradientZ}),s(0,t,"gradientX",function(){return this._gradientX}),s(0,t,"gradientMin",function(){return this._gradientMin}),s(0,t,"gradient",function(){return this._gradient}),s(0,t,"separateAxes",function(){return this._separateAxes}),s(0,t,"constantMin",function(){return this._constantMin}),s(0,t,"gradientXMin",function(){return this._gradientXMin}),s(0,t,"type",function(){return this._type}),e.createByGradient=function(t){var i=new e;return i._type=0,i._separateAxes=!1,i._gradient=t,i},e.createByGradientSeparate=function(t,i,n){var o=new e;return o._type=0,o._separateAxes=!0,o._gradientX=t,o._gradientY=i,o._gradientZ=n,o},e.createByRandomTwoConstant=function(t,i){var n=new e;return n._type=1,n._separateAxes=!1,n._constantMin=t,n._constantMax=i,n},e.createByRandomTwoConstantSeparate=function(t,i){var n=new e;return n._type=1,n._separateAxes=!0,n._constantMinSeparate=t,n._constantMaxSeparate=i,n},e.createByRandomTwoGradient=function(t,i){var n=new e;return n._type=2,n._separateAxes=!1,n._gradientMin=t,n._gradientMax=i,n},e.createByRandomTwoGradientSeparate=function(t,i,n,o,s,r){var a=new e;return a._type=2,a._separateAxes=!0,a._gradientXMin=t,a._gradientXMax=i,a._gradientYMin=n,a._gradientYMax=o,a._gradientZMin=s,a._gradientZMax=r,a},e}(),Oa=function(){function e(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}o(e,"laya.d3.core.particleShuriKen.module.StartFrame");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,t._constant=this._constant,t._constantMin=this._constantMin,t._constantMax=this._constantMax},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"constantMin",function(){return this._constantMin}),s(0,t,"constant",function(){return this._constant}),s(0,t,"constantMax",function(){return this._constantMax}),s(0,t,"type",function(){return this._type}),e.createByConstant=function(t){var i=new e;return i._type=0,i._constant=t,i},e.createByRandomTwoConstant=function(t,i){var n=new e;return n._type=1,n._constantMin=t,n._constantMax=i,n},e}(),Ma=function(){function e(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}o(e,"laya.d3.core.particleShuriKen.module.GradientDataInt");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.add=function(e,t){this._currentLength<8?(6===this._currentLength&&1!==e&&(e=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e,this._elements[this._currentLength++]=t):console.log("Warning:data count must lessEqual than 4")},t.cloneTo=function(e){var t=e;t._currentLength=this._currentLength;var i=t._elements;i.length=this._elements.length;for(var n=0,o=this._elements.length;o>n;n++)i[n]=this._elements[n]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"gradientCount",function(){return this._currentLength/2}),e}(),Da=function(){function e(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}o(e,"laya.d3.core.particleShuriKen.module.GradientVelocity");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,this._constant.cloneTo(t._constant),this._gradientX.cloneTo(t._gradientX),this._gradientY.cloneTo(t._gradientY),this._gradientZ.cloneTo(t._gradientZ),this._constantMin.cloneTo(t._constantMin),this._constantMax.cloneTo(t._constantMax),this._gradientXMin.cloneTo(t._gradientXMin),this._gradientXMax.cloneTo(t._gradientXMax),this._gradientYMin.cloneTo(t._gradientYMin),this._gradientYMax.cloneTo(t._gradientYMax),this._gradientZMin.cloneTo(t._gradientZMin),this._gradientZMax.cloneTo(t._gradientZMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"gradientZMax",function(){return this._gradientZMax}),s(0,t,"gradientZMin",function(){return this._gradientZMin}),s(0,t,"gradientYMin",function(){return this._gradientYMin}),s(0,t,"gradientY",function(){return this._gradientY}),s(0,t,"gradientXMax",function(){return this._gradientXMax}),s(0,t,"constantMax",function(){return this._constantMax}),s(0,t,"gradientX",function(){return this._gradientX}),s(0,t,"gradientZ",function(){return this._gradientZ}),s(0,t,"type",function(){return this._type}),s(0,t,"gradientXMin",function(){return this._gradientXMin}),s(0,t,"gradientYMax",function(){return this._gradientYMax}),s(0,t,"constant",function(){return this._constant}),s(0,t,"constantMin",function(){return this._constantMin}),e.createByConstant=function(t){var i=new e;return i._type=0,i._constant=t,i},e.createByGradient=function(t,i,n){var o=new e;return o._type=1,o._gradientX=t,o._gradientY=i,o._gradientZ=n,o},e.createByRandomTwoConstant=function(t,i){var n=new e;return n._type=2,n._constantMin=t,n._constantMax=i,n},e.createByRandomTwoGradient=function(t,i,n,o,s,r){var a=new e;return a._type=3,a._gradientXMin=t,a._gradientXMax=i,a._gradientYMin=n,a._gradientYMax=o,a._gradientZMin=s,a._gradientZMax=r,a},e}(),ka=function(){function e(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}o(e,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.add=function(e,t){this._currentLength<8?(6===this._currentLength&&1!==e&&(e=1,console.log("GradientDataNumber warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e,this._elements[this._currentLength++]=t):console.log("GradientDataNumber warning:data count must lessEqual than 4")},t.getKeyByIndex=function(e){return this._elements[2*e]},t.getValueByIndex=function(e){return this._elements[2*e+1]},t.getAverageValue=function(){for(var e=0,t=0,i=this._currentLength-2;i>t;t+=2){var n=this._elements[t+1];n+=this._elements[t+3],n*=this._elements[t+2]-this._elements[t]}return e/2},t.cloneTo=function(e){var t=e;t._currentLength=this._currentLength;var i=t._elements;i.length=this._elements.length;for(var n=0,o=this._elements.length;o>n;n++)i[n]=this._elements[n]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"gradientCount",function(){return this._currentLength/2}),e}(),Ba=function(){function e(e,t){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new hl(new rl,0),this._corners=[new rl,new rl,new rl,new rl,new rl,new rl,new rl,new rl],this._boundingBoxCenter=new rl,this._children=r(8),this._objects=[],this._tempBoundBoxCorners=[new rl,new rl,new rl,new rl,new rl,new rl,new rl,new rl],this._scene=e,this._currentDepth=t}o(e,"laya.d3.core.scene.OctreeNode");var t=e.prototype;return i.imps(t,{"laya.d3.core.scene.ITreeNode":!0}),t.init=function(e,t){var i=new rl,n=new rl;rl.scale(t,-.5,i),rl.scale(t,.5,n),rl.add(i,e,i),rl.add(n,e,n),this.exactBox=new nl(i,n),this.relaxBox=new nl(i,n)},t.addTreeNode=function(e){1===al.boxContainsBox(this._relaxBox,e.boundingBox)?this.addNodeDown(e,0):this.addObject(e)},t.addChild=function(t){var i=this._children[t];if(null==i){i=new e(this._scene,this._currentDepth+1),this._children[t]=i,i._parent=this,rl.subtract(this._exactBox.max,this._exactBox.min,e.tempSize),rl.multiply(e.tempSize,e._octreeSplit[t],e.tempCenter),rl.add(this._exactBox.min,e.tempCenter,e.tempCenter),rl.scale(e.tempSize,.25,e.tempSize);var n=new rl,o=new rl;rl.subtract(e.tempCenter,e.tempSize,n),rl.add(e.tempCenter,e.tempSize,o),i.exactBox=new nl(n,o),rl.scale(e.tempSize,e.relax,e.tempSize);var s=new rl,r=new rl;rl.subtract(e.tempCenter,e.tempSize,s),rl.add(e.tempCenter,e.tempSize,r),i.relaxBox=new nl(s,r)}return i},t.addObject=function(e){e._treeNode=this,this._objects.push(e)},t.removeObject=function(e){if(e._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var t=this._objects.indexOf(e);return-1!==t?(this._objects.splice(t,1),!0):!1},t.clearObject=function(){this._objects.length=0},t.addNodeUp=function(e,t){this._parent&&1!==al.boxContainsBox(this._exactBox,e.boundingBox)?this._parent.addNodeUp(e,t-1):this.addNodeDown(e,t)},t.addNodeDown=function(e,t){if(t<this._scene.treeLevel){var i=this.inChildIndex(e.boundingBoxCenter),n=this.addChild(i);1===al.boxContainsBox(n._relaxBox,e.boundingBox)?n.addNodeDown(e,++t):this.addObject(e)}else this.addObject(e)},t.inChildIndex=function(e){var t=e.z<this._boundingBoxCenter.z?0:1,i=e.y<this._boundingBoxCenter.y?0:1,n=e.x<this._boundingBoxCenter.x?0:1;return 4*t+2*i+n},t.updateObject=function(e){1===al.boxContainsBox(this._relaxBox,e.boundingBox)?(this.removeObject(e),e._treeNode=null,this.addNodeDown(e,this._currentDepth)):this._parent&&(this.removeObject(e),e._treeNode=null,this._parent.addNodeUp(e,this._currentDepth-1))},t.cullingObjects=function(e,t,i,n,o){var s=0,r=0,a=0,l=0,h=this._scene._dynamicBatchManager;for(s=0,a=this._objects.length;a>s;s++){var c=this._objects[s];if(aa.isVisible(c._owner.layer.mask)&&c.enable){if(t&&(Nr.treeSpriteCollision+=1,0===e.containsBoundSphere(c.boundingSphere)))continue;c._renderUpdate(o),c._distanceForSort=rl.distance(c.boundingSphere.center,n)+c.sortingFudge;var u=c._renderElements;for(r=0,l=u.length;l>r;r++){var d=u[r],p=d._staticBatch;if(p&&p._material===d._material)p._addBatchRenderElement(d);else{var f=d.renderObj;f.triangleCount<10&&1===f._vertexBufferCount&&f._getIndexBuffer()&&d._material.renderQueue<2&&d._canDynamicBatch&&!c._owner.isStatic?h._addPrepareRenderElement(d):this._scene.getRenderQueue(d._material.renderQueue)._addRenderElement(d)}}}}for(s=0;8>s;s++){var _=this._children[s];if(null!=_){var m=t;if(t){var g=e.containsBoundBox(_._relaxBox);if(Nr.treeNodeCollision+=1,0===g)continue;m=2===g}_.cullingObjects(e,m,i,n,o)}}},t.cullingShadowObjects=function(e,t,i,n,o){var s=0,r=0,a=0,l=0;this._scene._dynamicBatchManager;for(s=0,a=this._objects.length;a>s;s++){var h=this._objects[s];if(h.castShadow&&aa.isVisible(h._owner.layer.mask)&&h.enable){if(i&&0===e[0].containsBoundSphere(h.boundingSphere))continue;for(var c=1,u=e.length;u>c;c++){var d=t[c-1];if(0!==e[c].containsBoundSphere(h.boundingSphere)){var p=h._renderElements;for(r=0,l=p.length;l>r;r++)d._addRenderElement(p[r])}}}}for(s=0;8>s;s++){var f=this._children[s];if(null!=f){var _=i;if(i){var m=e[0].containsBoundBox(f._relaxBox);if(0===m)continue;_=2===m}f.cullingShadowObjects(e,t,_,n,o)}}},t.cullingShadowObjectsOnePSSM=function(e,t,i,n,o,s){var r=t[0],a=0,l=0,h=0,c=0;for(a=0,h=this._objects.length;h>a;a++){var u=this._objects[a];if(u.castShadow&&aa.isVisible(u._owner.layer.mask)&&u.enable){if(n&&0===e.containsBoundSphere(u.boundingSphere))continue;u._renderUpdate(i);var d=u._renderElements;for(l=0,c=d.length;c>l;l++)r._addRenderElement(d[l])}}for(a=0;8>a;a++){var p=this._children[a];if(null!=p){var f=n;if(n){var _=e.containsBoundBox(p._relaxBox);if(0===_)continue;f=2===_}p.cullingShadowObjectsOnePSSM(e,t,i,f,o,s)}}},t.renderBoudingBox=function(e){this._renderBoudingBox(e);for(var t=0;8>t;++t){var i=this._children[t];i&&i.renderBoudingBox(e)}},t.buildAllChild=function(e){if(e<this._scene.treeLevel)for(var t=0;8>t;t++){var i=this.addChild(t);i.buildAllChild(e+1)}},t._renderBoudingBox=function(e){},s(0,t,"relaxBox",function(){return this._relaxBox},function(e){this._relaxBox=e,e.getCorners(this._corners),hl.createfromPoints(this._corners,this._boundingSphere)}),s(0,t,"exactBox",function(){return this._exactBox},function(e){this._exactBox=e,rl.add(e.min,e.max,this._boundingBoxCenter),rl.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),e.debugMode=!1,e.relax=1.15,e.CHILDNUM=8,n(e,["tempVector0",function(){return this.tempVector0=new rl},"tempSize",function(){return this.tempSize=new rl},"tempCenter",function(){return this.tempCenter=new rl},"_octreeSplit",function(){return this._octreeSplit=[new rl(.25,.25,.25),new rl(.75,.25,.25),new rl(.25,.75,.25),new rl(.75,.75,.25),new rl(.25,.25,.75),new rl(.75,.25,.75),new rl(.25,.75,.75),new rl(.75,.75,.75)]}]),e}(),Va=function(){function e(){this._currentPSSM=-1,this._numberOfPSSM=3,this._maxDistance=200,this._ratioOfDistance=1/this._numberOfPSSM,this._statesDirty=!0,this._lightCulling=null,this._renderTarget=null,this._lightVPMatrix=null,this._lightCameras=null,this._shadowQuenes=null,this._shadowMapTextureSize=1024,this._scene=null,this._PCFType=0,this._shaderValueLightVP=null,this._shaderValueVPs=null,this._spiltDistance=new Array(4),this._globalParallelLightDir=new rl(0,-1,0),this._boundingSphere=new Array(4),this._boundingBox=new Array(4),this._frustumPos=new Array(16),this._uniformDistance=new Array(4),this._logDistance=new Array(4),this._dimension=new Array(4),this._tempLookAt3=new rl,this._tempLookAt4=new el,this._tempValue=new el,this._tempPos=new rl,this._tempLightUp=new rl,this._tempMin=new el,this._tempMax=new el,this._tempMatrix44=new ol,this._splitFrustumCulling=new ll(ol.DEFAULT),this._tempScaleMatrix44=new ol,this._shadowPCFOffset=new ul(1/1024,1/1024),this._shaderValueDistance=new el;var e=0;for(e=0;e<this._spiltDistance.length;e++)this._spiltDistance[e]=0;for(e=0;e<this._dimension.length;e++)this._dimension[e]=new ul;for(e=0;e<this._frustumPos.length;e++)this._frustumPos[e]=new rl;for(e=0;e<this._boundingBox.length;e++)this._boundingBox[e]=new nl(new rl,new rl);for(e=0;e<this._boundingSphere.length;e++)this._boundingSphere[e]=new hl(new rl,0);ol.createScaling(new rl(.5,.5,1),this._tempScaleMatrix44),this._tempScaleMatrix44.elements[12]=.5,this._tempScaleMatrix44.elements[13]=.5}o(e,"laya.d3.shadowMap.ParallelSplitShadowMap");var t=e.prototype;return t.setInfo=function(e,t,i,n,o,s){o>3&&(this._numberOfPSSM=3),this._scene=e,this._maxDistance=t,this.PSSMNum=o,this._globalParallelLightDir=i,this._ratioOfDistance=1/this._numberOfPSSM;for(var r=0;r<this._spiltDistance.length;r++)this._spiltDistance[r]=0;this._shadowMapTextureSize=n,this._shadowPCFOffset.x=1/this._shadowMapTextureSize,this._shadowPCFOffset.y=1/this._shadowMapTextureSize,this.setPCFType(s),this._statesDirty=!0},t.setPCFType=function(e){switch(this._PCFType=e,this._PCFType){case 0:this._scene.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF_NO),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF1),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF2),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF3);break;case 1:this._scene.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF1),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF_NO),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF2),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF3);break;case 2:this._scene.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF2),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF_NO),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF1),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF3);break;case 3:this._scene.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF3),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF_NO),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF1),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF2)}},t.getPCFType=function(){return this._PCFType},t.setFarDistance=function(e){this._maxDistance!=e&&(this._maxDistance=e,this._statesDirty=!0)},t.getFarDistance=function(){return this._maxDistance},t._setGlobalParallelLightDir=function(e){this._globalParallelLightDir=e},t.getGlobalParallelLightDir=function(){return this._globalParallelLightDir},t.getCurrentPSSM=function(){return this._currentPSSM},t.getLightCamera=function(e){return this._lightCameras[e]},t._beginSampler=function(e,t){if(0>e||e>this._numberOfPSSM)throw new Error("ParallelSplitShadowMap: beginSample invalid index");this._currentPSSM=e,this._update(t)},t.endSampler=function(e){this._currentPSSM=-1},t._calcAllLightCameraInfo=function(e){if(1===this._numberOfPSSM)this._beginSampler(0,e),this.endSampler(e);else for(var t=0,i=this._numberOfPSSM+1;i>t;t++)this._beginSampler(t,e),this.endSampler(e)},t._recalculate=function(e,t,i){this._calcSplitDistance(e),this._calcBoundingBox(t,i),this._rebuildRenderInfo()},t._update=function(e){var t=e.nearPlane,i=e.fieldOfView,n=e.aspectRatio;(this._statesDirty||this.lastNearPlane!==t||this.lastFieldOfView!==i||this.lastAspectRatio!==n)&&(this._recalculate(t,i,n),this._uploadShaderValue(),this._statesDirty=!1,this.lastNearPlane=t,this.lastFieldOfView=i,this.lastAspectRatio=n),this._calcLightViewProject(e)},t._uploadShaderValue=function(){var e=this._scene;switch(this._numberOfPSSM){case 1:e.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM1),e.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM2),e.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM3);break;case 2:e.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM2),e.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM1),e.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM3);break;case 3:e.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM3),e.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM1),e.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM2)}var t=e._shaderValues;switch(t.setValue(15,this._shaderValueDistance.elements),t.setValue(16,this._shaderValueLightVP),t.setValue(17,this._shadowPCFOffset.elements),this._numberOfPSSM){case 3:t.setValue(18,this.getRenderTarget(1)),t.setValue(19,this.getRenderTarget(2)),t.setValue(20,this.getRenderTarget(3));break;case 2:t.setValue(18,this.getRenderTarget(1)),t.setValue(19,this.getRenderTarget(2));break;case 1:t.setValue(18,this.getRenderTarget(1))}},t._calcSplitDistance=function(e){var t=this._maxDistance,i=1/this._numberOfPSSM,n=0;for(n=0;n<=this._numberOfPSSM;n++)this._uniformDistance[n]=e+(t-e)*n*i;var o=t/e;for(n=0;n<=this._numberOfPSSM;n++){var s=Math.pow(o,n*i);this._logDistance[n]=e*s}for(n=0;n<=this._numberOfPSSM;n++)this._spiltDistance[n]=this._uniformDistance[n]*this._ratioOfDistance+this._logDistance[n]*(1-this._ratioOfDistance);this._shaderValueDistance.x=this._spiltDistance[1],this._shaderValueDistance.y=this._spiltDistance[2],this._shaderValueDistance.z=this._spiltDistance[3]},t._calcBoundingBox=function(e,t){var i=3.1415926*e/180,n=Math.tan(i/2),o=NaN,s=NaN,r=NaN,a=0;for(a=0;a<=this._numberOfPSSM;a++){r=this._spiltDistance[a],o=r*n,s=o*t;var l=this._frustumPos[4*a+0].elements;l[0]=-s,l[1]=-o,l[2]=-r,l=this._frustumPos[4*a+1].elements,l[0]=s,l[1]=-o,l[2]=-r,l=this._frustumPos[4*a+2].elements,l[0]=-s,l[1]=o,l[2]=-r,l=this._frustumPos[4*a+3].elements,l[0]=s,l[1]=o,l[2]=-r,l=this._dimension[a].elements,l[0]=s,l[1]=o}var h,c,u,d;for(a=1;a<=this._numberOfPSSM;a++)h=this._dimension[a].elements,c=this._boundingBox[a].min.elements,c[0]=-h[0],c[1]=-h[1],c[2]=-this._spiltDistance[a],u=this._boundingBox[a].max.elements,u[0]=h[0],u[1]=h[1],u[2]=-this._spiltDistance[a-1],d=this._boundingSphere[a].center.elements,d[0]=.5*(c[0]+u[0]),d[1]=.5*(c[1]+u[1]),d[2]=.5*(c[2]+u[2]),this._boundingSphere[a].radius=.5*Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)+Math.pow(u[2]-c[2],2));c=this._boundingBox[0].min.elements,h=this._dimension[this._numberOfPSSM].elements,c[0]=-h[0],c[1]=-h[1],c[2]=-this._spiltDistance[this._numberOfPSSM],u=this._boundingBox[0].max.elements,u[0]=h[0],u[1]=h[1],u[2]=-this._spiltDistance[0],d=this._boundingSphere[0].center.elements,d[0]=.5*(c[0]+u[0]),d[1]=.5*(c[1]+u[1]),d[2]=.5*(c[2]+u[2]),this._boundingSphere[0].radius=.5*Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)+Math.pow(u[2]-c[2],2))},t.calcSplitFrustum=function(e){this._currentPSSM>0?ol.createPerspective(3.1416*e.fieldOfView/180,e.aspectRatio,this._spiltDistance[this._currentPSSM-1],this._spiltDistance[this._currentPSSM],this._tempMatrix44):ol.createPerspective(3.1416*e.fieldOfView/180,e.aspectRatio,this._spiltDistance[0],this._spiltDistance[this._numberOfPSSM],this._tempMatrix44),ol.multiply(this._tempMatrix44,e.viewMatrix,this._tempMatrix44),this._splitFrustumCulling.matrix=this._tempMatrix44},t._rebuildRenderInfo=function(){var e=this._numberOfPSSM+1,t=0;if(null==this._renderTarget)for(this._renderTarget=r(e),this._renderTarget[0]=null,t=1;e>t;t++)this._renderTarget[t]=new YS(this._shadowMapTextureSize,this._shadowMapTextureSize,6408,5121,33189,!1,!1,9728,9728);else if(this._renderTarget.length!=e)for(this.disposeAllRenderTarget(),this._renderTarget.length=e,this._renderTarget[0]=null,t=1;e>t;t++)this._renderTarget[t]=new YS(this._shadowMapTextureSize,this._shadowMapTextureSize,6408,5121,33189,!1,!1,9728,9728);else for(t=1;e>t;t++)null!=this._renderTarget[t]&&this._renderTarget[t].width==this._shadowMapTextureSize&&this._renderTarget[t].height==this._shadowMapTextureSize||(null!=this._renderTarget[t]&&this._renderTarget[t].destroy(),this._renderTarget[t]=new YS(this._shadowMapTextureSize,this._shadowMapTextureSize,6408,5121,33189,!1,!1,9728,9728));if(null==this._lightCulling||this._lightCulling.length!=e)for(this._lightCulling?this._lightCulling.length=e:this._lightCulling=r(e),t=0;t<this._lightCulling.length;t++)this._lightCulling[t]=new ll(ol.DEFAULT);if(null==this._lightVPMatrix||this._lightVPMatrix.length!=e)for(this._lightVPMatrix?this._lightVPMatrix.length=e:this._lightVPMatrix=r(e),t=0;t<this._lightVPMatrix.length;t++)this._lightVPMatrix[t]=new ol;if(null==this._lightCameras||this._lightCameras.length!=e)for(this._lightCameras?this._lightCameras.length=e:this._lightCameras=r(e),t=0;t<this._lightCameras.length;t++)this._lightCameras[t]=new zw,this._lightCameras[t].name="lightCamera"+t;if(null==this._shadowQuenes||this._shadowQuenes.length!=this._numberOfPSSM)for(this._shadowQuenes?this._shadowQuenes.length=this._numberOfPSSM:this._shadowQuenes=r(this._numberOfPSSM),t=0;t<this._shadowQuenes.length;t++)this._shadowQuenes[t]=new ga(this._scene);if(null==this._shaderValueVPs||this._shaderValueVPs.length!=e)for(this._shaderValueVPs?this._shaderValueVPs.length=e:this._shaderValueVPs=r(e),this._shaderValueLightVP=new Float32Array(16*e),t=0;e>t;t++)this._shaderValueVPs[t]=new Float32Array(this._shaderValueLightVP.buffer,64*t)},t._calcLightViewProject=function(t){var i=this._boundingSphere[this._currentPSSM],n=t.transform.worldMatrix;i.radius;i.center.cloneTo(this._tempLookAt3),rl.transformV3ToV4(this._tempLookAt3,n,this._tempLookAt4);var o=this._tempLookAt3.elements,s=this._tempLookAt4.elements;o[0]=s[0],o[1]=s[1],o[2]=s[2];var r=this._tempLightUp.elements,a=t.forward.elements;r[0]=a[0],r[1]=1,r[2]=a[2],rl.normalize(this._tempLightUp,this._tempLightUp),rl.scale(this._globalParallelLightDir,4*i.radius,this._tempPos),rl.subtract(this._tempLookAt3,this._tempPos,this._tempPos);var l=this._lightCameras[this._currentPSSM];l.transform.position=this._tempPos,l.transform.lookAt(this._tempLookAt3,this._tempLightUp,!1);var h=this._tempMax.elements,c=this._tempMin.elements;h[0]=h[1]=h[2]=-1e5,h[3]=1,c[0]=c[1]=c[2]=1e5,c[3]=1,ol.multiply(l.viewMatrix,n,this._tempMatrix44);var u=this._tempValue.elements,d=[];d.length=8,this._boundingBox[this._currentPSSM].getCorners(d);for(var p=0;8>p;p++){var f=d[p].elements;u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=1,el.transformByM4x4(this._tempValue,this._tempMatrix44,this._tempValue),c[0]=u[0]<c[0]?u[0]:c[0],c[1]=u[1]<c[1]?u[1]:c[1],c[2]=u[2]<c[2]?u[2]:c[2],h[0]=u[0]>h[0]?u[0]:h[0],h[1]=u[1]>h[1]?u[1]:h[1],h[2]=u[2]>h[2]?u[2]:h[2]}el.add(this._tempMax,this._tempMin,this._tempValue),u[0]*=.5,u[1]*=.5,u[2]*=.5,u[3]=1,el.transformByM4x4(this._tempValue,l.transform.worldMatrix,this._tempValue);var _=Math.abs(-this._tempMax.z),m=_>this._maxDistance?_:this._maxDistance;rl.scale(this._globalParallelLightDir,m,this._tempPos);var g=this._tempPos.elements;g[0]=u[0]-g[0],g[1]=u[1]-g[1],g[2]=u[2]-g[2],l.transform.position=this._tempPos,l.transform.lookAt(this._tempLookAt3,this._tempLightUp,!1),ol.createOrthoOffCenterRH(c[0],h[0],c[1],h[1],1,m+.5*(h[2]-c[2]),l.projectionMatrix),l.projectionViewMatrix.cloneTo(this._lightVPMatrix[this._currentPSSM]),this._lightCulling[this._currentPSSM].matrix=this._lightVPMatrix[this._currentPSSM],e.multiplyMatrixOutFloat32Array(this._tempScaleMatrix44,this._lightVPMatrix[this._currentPSSM],this._shaderValueVPs[this._currentPSSM])},t.getLightFrustumCulling=function(e){return this._lightCulling[e]},t.getSplitFrustumCulling=function(){return this._splitFrustumCulling},t.getSplitDistance=function(e){return this._spiltDistance[e]},t.setShadowMapTextureSize=function(e){e!==this._shadowMapTextureSize&&(this._shadowMapTextureSize=e,this._shadowPCFOffset.x=1/this._shadowMapTextureSize,this._shadowPCFOffset.y=1/this._shadowMapTextureSize,this._statesDirty=!0)},t.getShadowMapTextureSize=function(){return this._shadowMapTextureSize},t.beginRenderTarget=function(e){this._renderTarget[e].start()},t.endRenderTarget=function(e){this._renderTarget[e].end()},t.getRenderTarget=function(e){return this._renderTarget[e]},t.disposeAllRenderTarget=function(){for(var e=0,t=this._numberOfPSSM+1;t>e;e++)this._renderTarget[e]&&(this._renderTarget[e].destroy(),this._renderTarget[e]=null)},s(0,t,"PSSMNum",function(){return this._numberOfPSSM},function(e){e=e>0?e:1,e=3>=e?e:3,this._numberOfPSSM!=e&&(this._numberOfPSSM=e,this._ratioOfDistance=1/this._numberOfPSSM,this._statesDirty=!0)}),e.multiplyMatrixOutFloat32Array=function(e,t,i){var n,o,s,r,a,l,h;for(o=e.elements,s=t.elements,n=0;4>n;n++)r=o[n],a=o[n+4],l=o[n+8],h=o[n+12],i[n]=r*s[0]+a*s[1]+l*s[2]+h*s[3],i[n+4]=r*s[4]+a*s[5]+l*s[6]+h*s[7],i[n+8]=r*s[8]+a*s[9]+l*s[10]+h*s[11],i[n+12]=r*s[12]+a*s[13]+l*s[14]+h*s[15]},e.SHADERDEFINE_RECEIVE_SHADOW=1,e.SHADERDEFINE_CAST_SHADOW=512,e.SHADERDEFINE_SHADOW_PSSM1=1024,e.SHADERDEFINE_SHADOW_PSSM2=2048,e.SHADERDEFINE_SHADOW_PSSM3=4096,e.SHADERDEFINE_SHADOW_PCF_NO=8192,e.SHADERDEFINE_SHADOW_PCF1=16384,e.SHADERDEFINE_SHADOW_PCF2=32768,e.SHADERDEFINE_SHADOW_PCF3=65536,e.MAX_PSSM_COUNT=3,e}(),Fa=function(){function e(){}return o(e,"laya.d3.animation.AnimationClipParser02"),e.READ_DATA=function(){e._DATA.offset=e._reader.getUint32(),e._DATA.size=e._reader.getUint32()},e.READ_BLOCK=function(){for(var t=e._BLOCK.count=e._reader.getUint16(),i=e._BLOCK.blockStarts=[],n=e._BLOCK.blockLengths=[],o=0;t>o;o++)i.push(e._reader.getUint32()),n.push(e._reader.getUint32())},e.READ_STRINGS=function(){var t=e._reader.getUint32(),i=e._reader.getUint16(),n=e._reader.pos;e._reader.pos=t+e._DATA.offset;for(var o=0;i>o;o++)e._strings[o]=e._reader.readUTFString();e._reader.pos=n},e.parse=function(t,i){e._animationClip=t,e._reader=i;i.__getBuffer();e.READ_DATA(),e.READ_BLOCK(),e.READ_STRINGS();for(var n=0,o=e._BLOCK.count;o>n;n++){var s=i.getUint16(),r=e._strings[s],a=e["READ_"+r];if(null==a)throw new Error("model file err,no this function:"+s+" "+r);a.call()}},e.READ_ANIMATIONS=function(){var t,i=0,n=0,o=e._reader,s=o.__getBuffer(),r=[],a=o.getUint8();for(r.length=a,i=0;a>i;i++)r[i]=o.getUint16();var l=[],h=o.getUint16();for(l.length=h,i=0;h>i;i++)l[i]=o.getFloat32();var c=e._animationClip;c.name=e._strings[o.getUint16()];var u=c._duration=o.getFloat32();c.islooping=!!o.getByte(),c._frameRate=o.getInt16();var d=o.getInt16(),p=c._nodes=new Array;p.length=d;var f=c._publicClipDatas=[];f.length=d;var _=c._nodesMap={},m=0,g=0;for(i=0;d>i;i++){t=p[i]=new Ga;var v=o.getUint16(),y=t.path=[];for(y.length=v,n=0;v>n;n++)y[n]=e._strings[o.getUint16()];var b=y.join("/"),E=_[b];E||(_[b]=E=[]),E.push(t);var x=o.getInt16();-1!==x&&(t.componentType=e._strings[x]);var S=Ha._propertyIndexDic[e._strings[o.getUint16()]];if(null==S)throw new Error("AnimationClipParser02:unknown property name.");var w=4>S,C=!w||w&&""===y[0];t._cacheProperty=C,C?m++:g++,t.propertyNameID=S;var T=r[o.getUint8()];t.keyFrameWidth=T/4;var I=t.keyFrames=[],A=I.length=o.getUint16(),N=null,P=NaN;for(n=0;A>n;n++){var R=I[n]=new za;P=R.startTime=l[o.getUint16()];var L=o.pos;R.inTangent=new Float32Array(s.slice(L,L+T)),o.pos+=T,L=o.pos,R.outTangent=new Float32Array(s.slice(L,L+T)),o.pos+=T,L=o.pos,R.data=new Float32Array(s.slice(L,L+T)),o.pos+=T,N&&(N.next=R,N.duration=P-N.startTime),N=R}R.next=null,R.duration=u-P}var O=o.getUint16();for(i=0;O>i;i++){var M=new Ua;M.time=o.getFloat32(),M.eventName=e._strings[o.getUint16()];var D,k=o.getUint16();for(k>0&&(M.params=D=[]),n=0;k>n;n++){var B=o.getByte();switch(B){case 0:D.push(!!o.getByte());break;case 1:D.push(o.getInt32());break;case 2:D.push(o.getFloat32());break;case 3:D.push(e._strings[o.getUint16()]);break;default:throw new Error("unknown type.")}}c.addEvent(M)}var V=c._nodeToCachePropertyMap=new Int32Array(d),F=c._cachePropertyMap=new Int32Array(m),G=c._unCachePropertyMap=new Int32Array(g);for(m=g=0,i=0;d>i;i++)t=p[i],t._cacheProperty?(V[i]=m,F[m++]=i):G[g++]=i},e._animationClip=null,e._reader=null,e._strings=[],n(e,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e}(),Ga=function(){function e(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return o(e,"laya.d3.animation.KeyframeNode"),e}(),Ha=function(){function e(){this._childs=[],this.transform=new Xu(this)}o(e,"laya.d3.animation.AnimationNode");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.addChild=function(e){e._parent=this,e.transform.setParent(this.transform),this._childs.push(e)},t.removeChild=function(e){var t=this._childs.indexOf(e);-1!==t&&this._childs.splice(t,1)},t.getChildByName=function(e){for(var t=0,i=this._childs.length;i>t;t++){var n=this._childs[t];if(n.name===e)return n}return null},t.getChildByIndex=function(e){return this._childs[e]},t.getChildCount=function(){return this._childs.length},t.cloneTo=function(e){var t=e;t.name=this.name;for(var i=0,n=this._childs.length;n>i;i++){var o=this._childs[i],s=o.clone();t.addChild(s);var r=o.transform,a=s.transform;a.setLocalPosition(r.getLocalPosition()),a.setLocalRotation(r.getLocalRotation()),a.setLocalScale(r.getLocalScale()),a._localRotationEuler=r._localRotationEuler,a._setWorldMatrixIgnoreUpdate(r.getWorldMatrix())}},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e.__init__=function(){e.registerAnimationNodeProperty("localPosition",e._getLocalPosition,e._setLocalPosition),e.registerAnimationNodeProperty("localRotation",e._getLocalRotation,e._setLocalRotation),e.registerAnimationNodeProperty("localScale",e._getLocalScale,e._setLocalScale),e.registerAnimationNodeProperty("localRotationEuler",e._getLocalRotationEuler,e._setLocalRotationEuler),e.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",e._getParticleRenderSharedMaterialTintColor,e._setParticleRenderSharedMaterialTintColor),e.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",e._getMeshRenderSharedMaterialTilingOffset,e._setMeshRenderSharedMaterialTilingOffset),e.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",e._getMeshRenderSharedMaterialAlbedo,e._setMeshRenderSharedMaterialAlbedo),e.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",e._getSkinnedMeshRenderSharedMaterialTilingOffset,e._setSkinnedMeshRenderSharedMaterialTilingOffset),
e.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",e._getSkinnedMeshRenderSharedMaterialAlbedo,e._setSkinnedMeshRenderSharedMaterialAlbedo),e.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",e._getMeshRenderSharedMaterialAlbedo,e._setMeshRenderSharedMaterialAlbedo),e.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",e._getSkinnedMeshRenderSharedMaterialAlbedo,e._setSkinnedMeshRenderSharedMaterialAlbedo),e.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",e._getMeshRenderSharedMaterialIntensity,e._setMeshRenderSharedMaterialIntensity),e.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",e._getMeshRenderSharedMaterialAlpha,e._setMeshRenderSharedMaterialAlpha),e.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",e._getMeshRenderSharedMaterialAlphaColor,e._setMeshRenderSharedMaterialAlphaColor),e.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",e._getMeshRenderSharedMaterialBaseColor,e._setMeshRenderSharedMaterialBaseColor),e.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",e._getMeshRenderSharedMaterialDissolve,e._setMeshRenderSharedMaterialDissolve),e.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",e._getMeshRenderSharedMaterialDissolveSpeed,e._setMeshRenderSharedMaterialDissolveSpeed),e.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",e._getMeshRenderSharedMaterialMMultiplier,e._setMeshRenderSharedMaterialMMultiplier),e.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",e._getMeshRenderSharedMaterialBaseScrollSpeedX,e._setMeshRenderSharedMaterialBaseScrollSpeedX),e.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",e._getMeshRenderSharedMaterialBaseScrollSpeedY,e._setMeshRenderSharedMaterialBaseScrollSpeedY),e.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",e._getMeshRenderSharedMaterialSecondScrollSpeedX,e._setMeshRenderSharedMaterialSecondScrollSpeedX),e.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",e._getMeshRenderSharedMaterialSecondScrollSpeedY,e._setMeshRenderSharedMaterialSecondScrollSpeedY),e.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",e._getMeshRenderSharedMaterialDetailTilingOffset,e._setMeshRenderSharedMaterialDetailTilingOffset),e.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",e._getMeshRenderSharedMaterialDissolveTilingOffset,e._setMeshRenderSharedMaterialDissolveTilingOffset),e.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",e._getMeshRenderSharedMaterialMaskTilingOffset,e._setMeshRenderSharedMaterialMaskTilingOffset)},e.registerAnimationNodeProperty=function(t,i,n){if(e._propertyIndexDic[t])throw new Error("AnimationNode: this propertyName has registered.");e._propertyIndexDic[t]=e._propertyIDCounter,e._propertyGetFuncs[e._propertyIDCounter]=i,e._propertySetFuncs[e._propertyIDCounter]=n,e._propertyIDCounter++},e._getLocalPosition=function(e,t){return e?e.transform.getLocalPosition():t._transform.localPosition.elements},e._setLocalPosition=function(e,t,i){if(e)e.transform.setLocalPosition(i);else{var n=t._transform,o=n.localPosition;o.elements=i,n.localPosition=o}},e._getLocalRotation=function(e,t){return e?e.transform.getLocalRotation():t._transform.localRotation.elements},e._setLocalRotation=function(e,t,i){if(e)e.transform.setLocalRotation(i);else{var n=t._transform,o=n.localRotation;o.elements=i,n.localRotation=o}},e._getLocalScale=function(e,t){return e?e.transform.getLocalScale():t._transform.localScale.elements},e._setLocalScale=function(e,t,i){if(e)e.transform.setLocalScale(i);else{var n=t._transform,o=n.localScale;o.elements=i,n.localScale=o}},e._getLocalRotationEuler=function(e,t){return e?e.transform.getLocalRotationEuler():t._transform.localRotationEuler.elements},e._setLocalRotationEuler=function(e,t,i){if(e)e.transform.setLocalRotationEuler(i);else{var n=t._transform,o=n.localRotationEuler;o.elements=i,n.localRotationEuler=o}},e._getMeshRenderSharedMaterialTilingOffset=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.tilingOffset.elements):null}return i=t.meshRender.sharedMaterial,i.tilingOffset.elements},e._setMeshRenderSharedMaterialTilingOffset=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.meshRender.material,o=n.tilingOffset,o.elements=i,n.tilingOffset=o)}else n=t.meshRender.material,o=n.tilingOffset,o.elements=i,n.tilingOffset=o},e._getMeshRenderSharedMaterialAlbedo=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.albedoColor.elements):null}return i=t.meshRender.sharedMaterial,i.albedoColor.elements},e._setMeshRenderSharedMaterialAlbedo=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.meshRender.material,o=n.albedoColor,o.elements=i,n.albedoColor=o)}else n=t.meshRender.material,o=n.albedoColor,o.elements=i,n.albedoColor=o},e._getSkinnedMeshRenderSharedMaterialTilingOffset=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.skinnedMeshRender.sharedMaterial,i.tilingOffset.elements):null}return i=t.skinnedMeshRender.sharedMaterial,i.tilingOffset.elements},e._setSkinnedMeshRenderSharedMaterialTilingOffset=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.skinnedMeshRender.material,o=n.tilingOffset,o.elements=i,n.tilingOffset=o)}else n=t.skinnedMeshRender.material,o=n.tilingOffset,o.elements=i,n.tilingOffset=o},e._getSkinnedMeshRenderSharedMaterialAlbedo=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.skinnedMeshRender.sharedMaterial,i.albedoColor.elements):null}return i=t.skinnedMeshRender.sharedMaterial,i.albedoColor.elements},e._setSkinnedMeshRenderSharedMaterialAlbedo=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.skinnedMeshRender.material,o=n.albedoColor,o.elements=i,n.albedoColor=o)}else n=t.skinnedMeshRender.material,o=n.albedoColor,o.elements=i,n.albedoColor=o},e._getParticleRenderSharedMaterialTintColor=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.particleRender.sharedMaterial,i.tintColor.elements):null}return i=t.particleRender.sharedMaterial,i.tintColor.elements},e._setParticleRenderSharedMaterialTintColor=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.particleRender.material,o=n.tintColor,o.elements=i,n.tintColor=o)}else n=t.particleRender.material,o=n.tintColor,o.elements=i,n.tintColor=o},e._getMeshRenderSharedMaterialAlphaColor=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.alphaColor.elements):null}return i=t.meshRender.sharedMaterial,i.alphaColor.elements},e._setMeshRenderSharedMaterialAlphaColor=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.meshRender.material,o=n.alphaColor,o.elements=i,n.alphaColor=o)}else n=t.meshRender.material,o=n.alphaColor,o.elements=i,n.alphaColor=o},e._getMeshRenderSharedMaterialBaseColor=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.baseColor.elements):null}return i=t.meshRender.sharedMaterial,i.baseColor.elements},e._setMeshRenderSharedMaterialBaseColor=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.meshRender.material,o=n.baseColor,o.elements=i,n.baseColor=o)}else n=t.meshRender.material,o=n.baseColor,o.elements=i,n.baseColor=o},e._getMeshRenderSharedMaterialDissolve=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.dissolve):0}return i=t.meshRender.sharedMaterial,i.dissolve},e._setMeshRenderSharedMaterialDissolve=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.dissolve=i[0])}else n=t.meshRender.material,n.dissolve=i[0]},e._getMeshRenderSharedMaterialDissolveSpeed=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.dissolveSpeed):0}return i=t.meshRender.sharedMaterial,i.dissolveSpeed},e._setMeshRenderSharedMaterialDissolveSpeed=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.dissolveSpeed=i[0])}else n=t.meshRender.material,n.dissolveSpeed=i[0]},e._getMeshRenderSharedMaterialMMultiplier=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.mMultiplier):0}return i=t.meshRender.sharedMaterial,i.mMultiplier},e._setMeshRenderSharedMaterialMMultiplier=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.mMultiplier=i[0])}else n=t.meshRender.material,n.mMultiplier=i[0]},e._getMeshRenderSharedMaterialBaseScrollSpeedX=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.baseScrollSpeedX):0}return i=t.meshRender.sharedMaterial,i.baseScrollSpeedX},e._setMeshRenderSharedMaterialBaseScrollSpeedX=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.baseScrollSpeedX=i[0])}else n=t.meshRender.material,n.baseScrollSpeedX=i[0]},e._getMeshRenderSharedMaterialBaseScrollSpeedY=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.baseScrollSpeedY):0}return i=t.meshRender.sharedMaterial,i.baseScrollSpeedY},e._setMeshRenderSharedMaterialBaseScrollSpeedY=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.baseScrollSpeedY=i[0])}else n=t.meshRender.material,n.baseScrollSpeedY=i[0]},e._getMeshRenderSharedMaterialSecondScrollSpeedX=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.secondScrollSpeedX):0}return i=t.meshRender.sharedMaterial,i.secondScrollSpeedX},e._setMeshRenderSharedMaterialSecondScrollSpeedX=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.secondScrollSpeedX=i[0])}else n=t.meshRender.material,n.secondScrollSpeedX=i[0]},e._getMeshRenderSharedMaterialSecondScrollSpeedY=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.secondScrollSpeedY):0}return i=t.meshRender.sharedMaterial,i.secondScrollSpeedY},e._setMeshRenderSharedMaterialSecondScrollSpeedY=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.secondScrollSpeedY=i[0])}else n=t.meshRender.material,n.secondScrollSpeedY=i[0]},e._getMeshRenderSharedMaterialAlpha=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.alpha):0}return i=t.meshRender.sharedMaterial,i.alpha},e._setMeshRenderSharedMaterialAlpha=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.alpha=i[0])}else n=t.meshRender.material,n.alpha=i[0]},e._getMeshRenderSharedMaterialIntensity=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.intensity):0}return i=t.meshRender.sharedMaterial,i.intensity},e._setMeshRenderSharedMaterialIntensity=function(e,t,i){var n;if(e){var o=e.transform._entity;o&&(n=o.owner.meshRender.material,n.intensity=i[0])}else n=t.meshRender.material,n.intensity=i[0]},e._getMeshRenderSharedMaterialDetailTilingOffset=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.detailTilingOffset.elements):null}return i=t.meshRender.sharedMaterial,i.detailTilingOffset.elements},e._setMeshRenderSharedMaterialDetailTilingOffset=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.meshRender.material,o=n.detailTilingOffset,o.elements=i,n.detailTilingOffset=o)}else n=t.meshRender.material,o=n.detailTilingOffset,o.elements=i,n.detailTilingOffset=o},e._getMeshRenderSharedMaterialDissolveTilingOffset=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.dissolveTilingOffset.elements):null}return i=t.meshRender.sharedMaterial,i.dissolveTilingOffset.elements},e._setMeshRenderSharedMaterialDissolveTilingOffset=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.meshRender.material,o=n.dissolveTilingOffset,o.elements=i,n.dissolveTilingOffset=o)}else n=t.meshRender.material,o=n.dissolveTilingOffset,o.elements=i,n.dissolveTilingOffset=o},e._getMeshRenderSharedMaterialMaskTilingOffset=function(e,t){var i;if(e){var n=e.transform._entity;return n?(i=n.owner.meshRender.sharedMaterial,i.maskTilingOffset.elements):null}return i=t.meshRender.sharedMaterial,i.maskTilingOffset.elements},e._setMeshRenderSharedMaterialMaskTilingOffset=function(e,t,i){var n,o;if(e){var s=e.transform._entity;s&&(n=s.owner.meshRender.material,o=n.maskTilingOffset,o.elements=i,n.maskTilingOffset=o)}else n=t.meshRender.material,o=n.maskTilingOffset,o.elements=i,n.maskTilingOffset=o},e._propertyIDCounter=0,e._propertyIndexDic={},e._propertySetFuncs=[],e._propertyGetFuncs=[],e}(),Ua=function(){function e(){this.time=NaN,this.eventName=null,this.params=null}return o(e,"laya.d3.animation.AnimationEvent"),e}(),za=function(){function e(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return o(e,"laya.d3.animation.Keyframe"),e}(),Wa=function(){function e(){}return o(e,"laya.d3.animation.AnimationClipParser01"),e.READ_DATA=function(){e._DATA.offset=e._reader.getUint32(),e._DATA.size=e._reader.getUint32()},e.READ_BLOCK=function(){for(var t=e._BLOCK.count=e._reader.getUint16(),i=e._BLOCK.blockStarts=[],n=e._BLOCK.blockLengths=[],o=0;t>o;o++)i.push(e._reader.getUint32()),n.push(e._reader.getUint32())},e.READ_STRINGS=function(){var t=e._reader.getUint32(),i=e._reader.getUint16(),n=e._reader.pos;e._reader.pos=t+e._DATA.offset;for(var o=0;i>o;o++)e._strings[o]=e._reader.readUTFString();e._reader.pos=n},e.parse=function(t,i){e._animationClip=t,e._reader=i;i.__getBuffer();e.READ_DATA(),e.READ_BLOCK(),e.READ_STRINGS();for(var n=0,o=e._BLOCK.count;o>n;n++){var s=i.getUint16(),r=e._strings[s],a=e["READ_"+r];if(null==a)throw new Error("model file err,no this function:"+s+" "+r);a.call()}},e.READ_ANIMATIONS=function(){var t,i=0,n=0,o=e._reader,s=o.__getBuffer(),r=[],a=o.getUint8();for(r.length=a,i=0;a>i;i++)r[i]=o.getUint16();var l=[],h=o.getUint16();for(l.length=h,i=0;h>i;i++)l[i]=o.getFloat32();var c=e._animationClip;c.name=e._strings[o.getUint16()];var u=c._duration=o.getFloat32();c.islooping=!!o.getByte(),c._frameRate=o.getInt16();var d=o.getInt16(),p=c._nodes=new Array;p.length=d;var f=c._publicClipDatas=[];f.length=d;var _=c._nodesMap={},m=0,g=0;for(i=0;d>i;i++){t=p[i]=new Ga;var v=o.getUint16(),y=t.path=[];for(y.length=v,n=0;v>n;n++)y[n]=e._strings[o.getUint16()];var b=y.join("/"),E=_[b];E||(_[b]=E=[]),E.push(t);var x=o.getInt16();-1!==x&&(t.componentType=e._strings[x]);var S=Ha._propertyIndexDic[e._strings[o.getUint16()]];if(null==S)throw new Error("AnimationClipParser01:unknown property name.");var w=4>S,C=!w||w&&""===y[0];t._cacheProperty=C,C?m++:g++,t.propertyNameID=S;var T=r[o.getUint8()];t.keyFrameWidth=T/4;var I=t.keyFrames=[],A=I.length=o.getUint16(),N=null,P=NaN;for(n=0;A>n;n++){var R=I[n]=new za;P=R.startTime=l[o.getUint16()];var L=o.pos;R.inTangent=new Float32Array(s.slice(L,L+T)),o.pos+=T,L=o.pos,R.outTangent=new Float32Array(s.slice(L,L+T)),o.pos+=T,L=o.pos,R.data=new Float32Array(s.slice(L,L+T)),o.pos+=T,N&&(N.next=R,N.duration=P-N.startTime),N=R}R.next=null,R.duration=u-P}var O=c._nodeToCachePropertyMap=new Int32Array(d),M=c._cachePropertyMap=new Int32Array(m),D=c._unCachePropertyMap=new Int32Array(g);for(m=g=0,i=0;d>i;i++)t=p[i],t._cacheProperty?(O[i]=m,M[m++]=i):D[g++]=i},e._animationClip=null,e._reader=null,e._strings=[],n(e,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e}(),Ya=function(){function e(){}return o(e,"laya.d3.utils.Utils3D"),e._rotationTransformScaleSkinAnimation=function(t,i,n,o,s,r,a,l,h,c,u,d){var p=e._tempArray16_0,f=e._tempArray16_1,_=e._tempArray16_2,m=o+o,g=s+s,v=r+r,y=o*m,b=s*m,E=s*g,x=r*m,S=r*g,w=r*v,C=a*m,T=a*g,I=a*v;p[15]=1,p[0]=1-E-w,p[1]=b+I,p[2]=x-T,p[4]=b-I,p[5]=1-y-w,p[6]=S+C,p[8]=x+T,p[9]=S-C,p[10]=1-y-E,f[15]=1,f[0]=l,f[5]=h,f[10]=c;var A,N,P,R,L;for(A=0;4>A;A++)N=p[A],P=p[A+4],R=p[A+8],L=p[A+12],_[A]=N,_[A+4]=P,_[A+8]=R,_[A+12]=N*t+P*i+R*n+L;for(A=0;4>A;A++)N=_[A],P=_[A+4],R=_[A+8],L=_[A+12],u[A+d]=N*f[0]+P*f[1]+R*f[2]+L*f[3],u[A+d+4]=N*f[4]+P*f[5]+R*f[6]+L*f[7],u[A+d+8]=N*f[8]+P*f[9]+R*f[10]+L*f[11],u[A+d+12]=N*f[12]+P*f[13]+R*f[14]+L*f[15]},e._createNodeByJson=function(t,i,n,o){if(!n)switch(i.type){case"Sprite3D":n=new mS;break;case"MeshSprite3D":n=new Hw;break;case"SkinnedMeshSprite3D":n=new Yw;break;case"ShuriKenParticle3D":n=new Ww;break;case"TrailSprite3D":n=new Uw;break;case"Terrain":n=new vw;break;case"Camera":n=new zw;break;case"DirectionLight":n=new Kw;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var s=i.props;if(s)for(var r in s)n[r]=s[r];var a=i.customProps;a&&(n instanceof laya.d3.core.Sprite3D?(n._parseBaseCustomProps(a),n._parseCustomProps(t,o,a,i),n._parseCustomComponent(t,o,i.components)):n._parseCustomProps(t,o,a,i));var l=i.child;if(l)for(var h=0,c=l.length;c>h;h++){var u=e._createNodeByJson(t,l[h],null,o);n.addChild(u)}return n},e._computeBoneAndAnimationDatasByBindPoseMatrxix=function(e,t,i,n,o,s){var r,a,l=0,h=0,c=e.length;for(r=0;c>r;l+=e[r].keyframeWidth,h+=16,r++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(t[l+0],t[l+1],t[l+2],t[l+3],t[l+4],t[l+5],t[l+6],t[l+7],t[l+8],t[l+9],n,h),0!=r&&(a=16*e[r].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(n,a,n,h,n,h));var u=i.length;for(r=0;u>r;r++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(n,16*s[r],i[r],o,16*r)},e._computeAnimationDatasByArrayAndMatrixFast=function(e,t,i,n){for(var o=0,s=e.length;s>o;o++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(t,16*n[o],e[o],i,16*o)},e._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(e,t,i,n,o){var s,r,a=0,l=0,h=e.length;for(s=0;h>s;a+=e[s].keyframeWidth,l+=16,s++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(t[a+7],t[a+8],t[a+9],t[a+3],t[a+4],t[a+5],t[a+6],t[a+0],t[a+1],t[a+2],n,l),0!=s&&(r=16*e[s].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(n,r,n,l,n,l));var c=i.length;for(s=0;c>s;s++){var u=16*s;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(n,u,i[s],o,u)}},e._computeAnimationDatasByArrayAndMatrixFastOld=function(e,t,i){for(var n=e.length,o=0;n>o;o++){var s=16*o;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(t,s,e[o],i,s)}},e._computeRootAnimationData=function(e,t,i){for(var n=0,o=0,s=0,r=e.length;r>n;o+=e[n].keyframeWidth,s+=16,n++)laya.d3.utils.Utils3D.createAffineTransformationArray(t[o+0],t[o+1],t[o+2],t[o+3],t[o+4],t[o+5],t[o+6],t[o+7],t[o+8],t[o+9],i,s)},e.transformVector3ArrayByQuat=function(e,t,i,n,o){var s=i.elements,r=e[t],a=e[t+1],l=e[t+2],h=s[0],c=s[1],u=s[2],d=s[3],p=d*r+c*l-u*a,f=d*a+u*r-h*l,_=d*l+h*a-c*r,m=-h*r-c*a-u*l;n[o]=p*d+m*-h+f*-u-_*-c,n[o+1]=f*d+m*-c+_*-h-p*-u,n[o+2]=_*d+m*-u+p*-c-f*-h},e.mulMatrixByArray=function(t,i,n,o,s,r){var a,l,h,c,u;if(s===n){for(n=e._tempArray16_3,a=0;16>a;++a)n[a]=s[r+a];o=0}for(a=0;4>a;a++)l=t[i+a],h=t[i+a+4],c=t[i+a+8],u=t[i+a+12],s[r+a]=l*n[o+0]+h*n[o+1]+c*n[o+2]+u*n[o+3],s[r+a+4]=l*n[o+4]+h*n[o+5]+c*n[o+6]+u*n[o+7],s[r+a+8]=l*n[o+8]+h*n[o+9]+c*n[o+10]+u*n[o+11],s[r+a+12]=l*n[o+12]+h*n[o+13]+c*n[o+14]+u*n[o+15]},e.mulMatrixByArrayFast=function(e,t,i,n,o,s){var r,a,l,h,c;for(r=0;4>r;r++)a=e[t+r],l=e[t+r+4],h=e[t+r+8],c=e[t+r+12],o[s+r]=a*i[n+0]+l*i[n+1]+h*i[n+2]+c*i[n+3],o[s+r+4]=a*i[n+4]+l*i[n+5]+h*i[n+6]+c*i[n+7],o[s+r+8]=a*i[n+8]+l*i[n+9]+h*i[n+10]+c*i[n+11],o[s+r+12]=a*i[n+12]+l*i[n+13]+h*i[n+14]+c*i[n+15]},e.mulMatrixByArrayAndMatrixFast=function(e,t,i,n,o){var s,r,a,l,h,c=i.elements,u=c[0],d=c[1],p=c[2],f=c[3],_=c[4],m=c[5],g=c[6],v=c[7],y=c[8],b=c[9],E=c[10],x=c[11],S=c[12],w=c[13],C=c[14],T=c[15],I=t,A=t+4,N=t+8,P=t+12,R=o,L=o+4,O=o+8,M=o+12;for(s=0;4>s;s++)r=e[I+s],a=e[A+s],l=e[N+s],h=e[P+s],n[R+s]=r*u+a*d+l*p+h*f,n[L+s]=r*_+a*m+l*g+h*v,n[O+s]=r*y+a*b+l*E+h*x,n[M+s]=r*S+a*w+l*C+h*T},e.createAffineTransformationArray=function(e,t,i,n,o,s,r,a,l,h,c,u){var d=n+n,p=o+o,f=s+s,_=n*d,m=n*p,g=n*f,v=o*p,y=o*f,b=s*f,E=r*d,x=r*p,S=r*f;c[u+0]=(1-(v+b))*a,c[u+1]=(m+S)*a,c[u+2]=(g-x)*a,c[u+3]=0,c[u+4]=(m-S)*l,c[u+5]=(1-(_+b))*l,c[u+6]=(y+E)*l,c[u+7]=0,c[u+8]=(g+x)*h,c[u+9]=(y-E)*h,c[u+10]=(1-(_+v))*h,c[u+11]=0,c[u+12]=e,c[u+13]=t,c[u+14]=i,c[u+15]=1},e.transformVector3ArrayToVector3ArrayCoordinate=function(t,i,n,o,s){var r=e._tempArray4_0,a=t[i+0],l=t[i+1],h=t[i+2],c=n.elements;r[0]=a*c[0]+l*c[4]+h*c[8]+c[12],r[1]=a*c[1]+l*c[5]+h*c[9]+c[13],r[2]=a*c[2]+l*c[6]+h*c[10]+c[14],r[3]=1/(a*c[3]+l*c[7]+h*c[11]+c[15]),o[s+0]=r[0]*r[3],o[s+1]=r[1]*r[3],o[s+2]=r[2]*r[3]},e.transformLightingMapTexcoordByUV0Array=function(e,t,i,n,o){var s=i.elements;n[o+0]=e[t+0]*s[0]+s[2],n[o+1]=(e[t+1]-1)*s[1]+s[3]},e.transformLightingMapTexcoordByUV1Array=function(e,t,i,n,o){var s=i.elements;n[o+0]=e[t+0]*s[0]+s[2],n[o+1]=1+e[t+1]*s[1]+s[3]},e.getURLVerion=function(e){var t=e.indexOf("?");return t>=0?e.substr(t):null},e._quaternionCreateFromYawPitchRollArray=function(e,t,i,n){var o=.5*i,s=.5*t,r=.5*e,a=Math.sin(o),l=Math.cos(o),h=Math.sin(s),c=Math.cos(s),u=Math.sin(r),d=Math.cos(r);n[0]=d*h*l+u*c*a,n[1]=u*c*l-d*h*a,n[2]=d*c*a-u*h*l,n[3]=d*c*l+u*h*a},e._createAffineTransformationArray=function(e,t,i,n){var o=t[0],s=t[1],r=t[2],a=t[3],l=o+o,h=s+s,c=r+r,u=o*l,d=o*h,p=o*c,f=s*h,_=s*c,m=r*c,g=a*l,v=a*h,y=a*c,b=i[0],E=i[1],x=i[2];n[0]=(1-(f+m))*b,n[1]=(d+y)*b,n[2]=(p-v)*b,n[3]=0,n[4]=(d-y)*E,n[5]=(1-(u+m))*E,n[6]=(_+g)*E,n[7]=0,n[8]=(p+v)*x,n[9]=(_-g)*x,n[10]=(1-(u+f))*x,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1},e._mulMatrixArray=function(e,t,i,n){var o,s,r,a,l,h=t.elements,c=h[0],u=h[1],d=h[2],p=h[3],f=h[4],_=h[5],m=h[6],g=h[7],v=h[8],y=h[9],b=h[10],E=h[11],x=h[12],S=h[13],w=h[14],C=h[15],T=n,I=n+4,A=n+8,N=n+12;for(o=0;4>o;o++)s=e[o],r=e[o+4],a=e[o+8],l=e[o+12],i[T+o]=s*c+r*u+a*d+l*p,i[I+o]=s*f+r*_+a*m+l*g,i[A+o]=s*v+r*y+a*b+l*E,i[N+o]=s*x+r*S+a*w+l*C},e.getYawPitchRoll=function(t,i){e.transformQuat(rl.ForwardRH,t,cl.TEMPVector31),e.transformQuat(rl.Up,t,cl.TEMPVector32);var n=cl.TEMPVector32.elements;e.angleTo(rl.ZERO,cl.TEMPVector31,cl.TEMPVector33);var o=cl.TEMPVector33.elements;o[0]==Math.PI/2?(o[1]=e.arcTanAngle(n[2],n[0]),o[2]=0):o[0]==-Math.PI/2?(o[1]=e.arcTanAngle(-n[2],-n[0]),o[2]=0):(ol.createRotationY(-o[1],cl.TEMPMatrix0),ol.createRotationX(-o[0],cl.TEMPMatrix1),rl.transformCoordinate(cl.TEMPVector32,cl.TEMPMatrix0,cl.TEMPVector32),rl.transformCoordinate(cl.TEMPVector32,cl.TEMPMatrix1,cl.TEMPVector32),o[2]=e.arcTanAngle(n[1],-n[0])),o[1]<=-Math.PI&&(o[1]=Math.PI),o[2]<=-Math.PI&&(o[2]=Math.PI),o[1]>=Math.PI&&o[2]>=Math.PI&&(o[1]=0,o[2]=0,o[0]=Math.PI-o[0]),i[0]=o[1],i[1]=o[0],i[2]=o[2]},e.arcTanAngle=function(e,t){return 0==e?1==t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):0>e?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0},e.angleTo=function(t,i,n){rl.subtract(i,t,cl.TEMPVector30),rl.normalize(cl.TEMPVector30,cl.TEMPVector30),n.elements[0]=Math.asin(cl.TEMPVector30.y),n.elements[1]=e.arcTanAngle(-cl.TEMPVector30.z,-cl.TEMPVector30.x)},e.transformQuat=function(e,t,i){var n=i.elements,o=e.elements,s=t,r=o[0],a=o[1],l=o[2],h=s[0],c=s[1],u=s[2],d=s[3],p=d*r+c*l-u*a,f=d*a+u*r-h*l,_=d*l+h*a-c*r,m=-h*r-c*a-u*l;n[0]=p*d+m*-h+f*-u-_*-c,n[1]=f*d+m*-c+_*-h-p*-u,n[2]=_*d+m*-u+p*-c-f*-h},e.quaterionNormalize=function(e,t){var i=e[0],n=e[1],o=e[2],s=e[3],r=i*i+n*n+o*o+s*s;r>0&&(r=1/Math.sqrt(r),t[0]=i*r,t[1]=n*r,t[2]=o*r,t[3]=s*r)},e.matrix4x4MultiplyFFF=function(e,t,i){var n,o,s,r,a;if(i===t)for(t=new Float32Array(16),n=0;16>n;++n)t[n]=i[n];for(n=0;4>n;n++)o=e[n],s=e[n+4],r=e[n+8],a=e[n+12],i[n]=o*t[0]+s*t[1]+r*t[2]+a*t[3],i[n+4]=o*t[4]+s*t[5]+r*t[6]+a*t[7],i[n+8]=o*t[8]+s*t[9]+r*t[10]+a*t[11],i[n+12]=o*t[12]+s*t[13]+r*t[14]+a*t[15]},e.matrix4x4MultiplyMFM=function(t,i,n){e.matrix4x4MultiplyFFF(t.elements,i,n.elements)},n(e,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new rl},"_tempVector3_1",function(){return this._tempVector3_1=new rl},"_tempVector3_2",function(){return this._tempVector3_2=new rl},"_tempVector3_3",function(){return this._tempVector3_3=new rl},"_tempVector3_4",function(){return this._tempVector3_4=new rl},"_tempVector3_5",function(){return this._tempVector3_5=new rl},"_tempVector3_6",function(){return this._tempVector3_6=new rl},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),e}(),qa=function(){function e(){}return o(e,"laya.d3.utils.Physics"),e.__init__=function(){var t=31;e._layerCollsionMatrix.length=t;for(var i=0;t>i;i++){var n=[],o=t-i;n.length=o;for(var s=0;o>s;s++)s===o-1?n[s]=!0:n[s]=!1;e._layerCollsionMatrix[i]=n}},e.setLayerCollision=function(t,i,n){e._layerCollsionMatrix[t.number][30-i.number]=n},e.getLayerCollision=function(t,i){return e._layerCollsionMatrix[t.number][30-i.number]},e.setColliderCollision=function(e,t,i){i?(delete e._ignoreCollisonMap[t.id],delete t._ignoreCollisonMap[e.id]):(e._ignoreCollisonMap[t.id]=t,t._ignoreCollisonMap[e.id]=e)},e.getIColliderCollision=function(e,t){return!!e._ignoreCollisonMap[t.id]},e.rayCast=function(t,i,n,o){void 0===n&&(n=1.79e308),void 0===o&&(o=0),e._outHitAllInfo.length=0;for(var s=aa.getLayerByNumber(o)._colliders,r=0,a=s.length;a>r;r++){var l=s[r];if(l.enable&&(l.raycast(t,e._outHitInfo,n),-1!==e._outHitInfo.distance&&e._outHitInfo.distance<=n)){var h=new Ka;e._outHitInfo.cloneTo(h),e._outHitAllInfo.push(h)}}if(0==e._outHitAllInfo.length)return i.sprite3D=null,void(i.distance=-1);for(var c=Number.MAX_VALUE,u=0,d=0;d<e._outHitAllInfo.length;d++)e._outHitAllInfo[d].distance<c&&(c=e._outHitAllInfo[d].distance,u=d);e._outHitAllInfo[u].cloneTo(i)},e.rayCastAll=function(t,i,n,o){void 0===n&&(n=1.79e308),void 0===o&&(o=0),i.length=0;for(var s=aa.getLayerByNumber(o)._colliders,r=0,a=s.length;a>r;r++){var l=s[r];if(l.enable&&(e._outHitInfo.distance=-1,e._outHitInfo.sprite3D=null,l.raycast(t,e._outHitInfo,n),-1!==e._outHitInfo.distance&&e._outHitInfo.distance<=n)){var h=new Ka;e._outHitInfo.cloneTo(h),i.push(h)}}},e._outHitAllInfo=[],e._layerCollsionMatrix=[],n(e,["_outHitInfo",function(){return this._outHitInfo=new Ka},"collisionManager",function(){return this.collisionManager=new ju},"gravity",function(){return this.gravity=new rl(0,-9.81,0)}]),e}(),Ka=function(){function e(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new rl,new rl,new rl],this.trianglePositions.length=3,this.triangleNormals=[new rl,new rl,new rl],this.triangleNormals.length=3,this.position=new rl}o(e,"laya.d3.utils.RaycastHit");var t=e.prototype;return t.cloneTo=function(e){e.distance=this.distance,this.trianglePositions[0].cloneTo(e.trianglePositions[0]),this.trianglePositions[1].cloneTo(e.trianglePositions[1]),this.trianglePositions[2].cloneTo(e.trianglePositions[2]),this.triangleNormals[0].cloneTo(e.triangleNormals[0]),this.triangleNormals[1].cloneTo(e.triangleNormals[1]),this.triangleNormals[2].cloneTo(e.triangleNormals[2]),this.position.cloneTo(e.position),e.sprite3D=this.sprite3D},e}(),Xa=function(){function e(){}return o(e,"laya.d3.utils.Picker"),e.calculateCursorRay=function(t,i,n,o,s,r){var a=t.elements[0],l=t.elements[1],h=e._tempVector30,c=h.elements;c[0]=a,c[1]=l,c[2]=i.minDepth;var u=e._tempVector31,d=u.elements;d[0]=a,d[1]=l,d[2]=i.maxDepth;var p=r.origin,f=e._tempVector32;i.unprojectFromWVP(h,n,o,s,p),i.unprojectFromWVP(u,n,o,s,f);var _=r.direction.elements;_[0]=f.x-p.x,_[1]=f.y-p.y,_[2]=f.z-p.z,rl.normalize(r.direction,r.direction)},e.rayIntersectsPositionsAndIndices=function(t,i,n,o,s){for(var r=n.vertexStride/4,a=n.getVertexElementByUsage(0).offset/4,l=Number.MAX_VALUE,h=-1,c=-1,u=-1,d=0;d<o.length;d+=3){var p=e._tempVector35,f=p.elements,_=o[d]*r,m=_+a;f[0]=i[m],f[1]=i[m+1],f[2]=i[m+2];var g=e._tempVector36,v=g.elements,y=o[d+1]*r,b=y+a;v[0]=i[b],v[1]=i[b+1],v[2]=i[b+2];var E=e._tempVector37,x=E.elements,S=o[d+2]*r,w=S+a;x[0]=i[w],x[1]=i[w+1],x[2]=i[w+2];var C=laya.d3.utils.Picker.rayIntersectsTriangle(t,p,g,E);!isNaN(C)&&l>C&&(l=C,h=_,c=y,u=S)}if(l!==Number.MAX_VALUE){s.distance=l,rl.scale(t.direction,l,s.position),rl.add(t.origin,s.position,s.position);var T=s.trianglePositions,I=T[0],A=T[1],N=T[2],P=I.elements,R=A.elements,L=N.elements,O=h+a;P[0]=i[O],P[1]=i[O+1],P[2]=i[O+2];var M=c+a;R[0]=i[M],R[1]=i[M+1],R[2]=i[M+2];var D=u+a;L[0]=i[D],L[1]=i[D+1],L[2]=i[D+2];var k=n.getVertexElementByUsage(3);if(k){var B=k.offset/4,V=s.triangleNormals,F=V[0],G=V[1],H=V[2],U=F.elements,z=G.elements,W=H.elements,Y=h+B;U[0]=i[Y],U[1]=i[Y+1],U[2]=i[Y+2];var q=c+B;z[0]=i[q],z[1]=i[q+1],z[2]=i[q+2];var K=u+B;W[0]=i[K],W[1]=i[K+1],W[2]=i[K+2]}return!0}return s.position.toDefault(),s.distance=Number.MAX_VALUE,s.trianglePositions[0].toDefault(),s.trianglePositions[1].toDefault(),s.trianglePositions[2].toDefault(),s.triangleNormals[0].toDefault(),s.triangleNormals[1].toDefault(),s.triangleNormals[2].toDefault(),!1},e.rayIntersectsTriangle=function(t,i,n,o){var s,r=e._tempVector30,a=e._tempVector31;rl.subtract(n,i,r),rl.subtract(o,i,a);var l=e._tempVector32;rl.cross(t.direction,a,l);var h;if(h=rl.dot(r,l),h>-Number.MIN_VALUE&&h<Number.MIN_VALUE)return s=Number.NaN;var c=1/h,u=e._tempVector33;rl.subtract(t.origin,i,u);var d;if(d=rl.dot(u,l),d*=c,0>d||d>1)return s=Number.NaN;var p=e._tempVector34;rl.cross(u,r,p);var f;if(f=rl.dot(t.direction,p),f*=c,0>f||d+f>1)return s=Number.NaN;var _;return _=rl.dot(a,p),_*=c,s=0>_?Number.NaN:_},n(e,["_tempVector30",function(){return this._tempVector30=new rl},"_tempVector31",function(){return this._tempVector31=new rl},"_tempVector32",function(){return this._tempVector32=new rl},"_tempVector33",function(){return this._tempVector33=new rl},"_tempVector34",function(){return this._tempVector34=new rl},"_tempVector35",function(){return this._tempVector35=new rl},"_tempVector36",function(){return this._tempVector36=new rl},"_tempVector37",function(){return this._tempVector37=new rl}]),e}(),Qa=function(){function e(e,t){this._width=0,this._height=0,this._width=e,this._height=t}o(e,"laya.d3.utils.Size");var t=e.prototype;return s(0,t,"height",function(){return-1===this._height?ma.clientHeight:this._height}),s(0,t,"width",function(){return-1===this._width?ma.clientWidth:this._width}),s(1,e,"fullScreen",function(){return new e(-1,-1)}),e}(),ja=function(){function e(){}return o(e,"laya.d3.math.MathUtils3D"),e.isZero=function(t){return Math.abs(t)<e.zeroTolerance},e.nearEqual=function(t,i){return!!e.isZero(t-i)},e.fastInvSqrt=function(t){return e.isZero(t)?t:1/Math.sqrt(t)},n(e,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=3.40282347e38},"MinValue",function(){return this.MinValue=-3.40282347e38}]),e}(),Za=function(){function e(e){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=e,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}o(e,"laya.d3.math.Rand");var t=e.prototype;return t.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^(this._temp[0]^this._temp[0]>>>8),
this.seeds[3]},t.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},t.getSignedFloat=function(){return 2*this.getFloat()-1},s(0,t,"seed",function(){return this.seeds[0]},function(e){this.seeds[0]=e,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),e.getFloatFromInt=function(e){return(8388607&e)*(1/8388607)},e.getByteFromInt=function(e){return(8388607&e)>>>15},e}(),Ja=function(){function e(){var e=this.elements=new Float32Array(9);e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}o(e,"laya.d3.math.Matrix3x3");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.determinant=function(){var e=this.elements,t=e[0],i=e[1],n=e[2],o=e[3],s=e[4],r=e[5],a=e[6],l=e[7],h=e[8];return t*(h*s-r*l)+i*(-h*o+r*a)+n*(l*o-s*a)},t.translate=function(e,t){var i=t.elements,n=this.elements,o=e.elements,s=n[0],r=n[1],a=n[2],l=n[3],h=n[4],c=n[5],u=n[6],d=n[7],p=n[8],f=o[0],_=o[1];i[0]=s,i[1]=r,i[2]=a,i[3]=l,i[4]=h,i[5]=c,i[6]=f*s+_*l+u,i[7]=f*r+_*h+d,i[8]=f*a+_*c+p},t.rotate=function(e,t){var i=t.elements,n=this.elements,o=n[0],s=n[1],r=n[2],a=n[3],l=n[4],h=n[5],c=n[6],u=n[7],d=n[8],p=Math.sin(e),f=Math.cos(e);i[0]=f*o+p*a,i[1]=f*s+p*l,i[2]=f*r+p*h,i[3]=f*a-p*o,i[4]=f*l-p*s,i[5]=f*h-p*r,i[6]=c,i[7]=u,i[8]=d},t.scale=function(e,t){var i=t.elements,n=this.elements,o=e.elements,s=o[0],r=o[1];i[0]=s*n[0],i[1]=s*n[1],i[2]=s*n[2],i[3]=r*n[3],i[4]=r*n[4],i[5]=r*n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8]},t.invert=function(e){var t=e.elements,i=this.elements,n=i[0],o=i[1],s=i[2],r=i[3],a=i[4],l=i[5],h=i[6],c=i[7],u=i[8],d=u*a-l*c,p=-u*r+l*h,f=c*r-a*h,_=n*d+o*p+s*f;_||(e=null),_=1/_,t[0]=d*_,t[1]=(-u*o+s*c)*_,t[2]=(l*o-s*a)*_,t[3]=p*_,t[4]=(u*n-s*h)*_,t[5]=(-l*n+s*r)*_,t[6]=f*_,t[7]=(-c*n+o*h)*_,t[8]=(a*n-o*r)*_},t.transpose=function(e){var t=e.elements,i=this.elements;if(e===this){var n=i[1],o=i[2],s=i[5];t[1]=i[3],t[2]=i[6],t[3]=n,t[5]=i[7],t[6]=o,t[7]=s}else t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8]},t.identity=function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1},t.cloneTo=function(e){var t,i,n;if(i=this.elements,n=e.elements,i!==n)for(t=0;9>t;++t)n[t]=i[t]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e.createFromTranslation=function(e,t){var i=(t.elements,e.elements);t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=i[0],t[7]=i[1],t[8]=1},e.createFromRotation=function(e,t){var i=t.elements,n=Math.sin(e),o=Math.cos(e);i[0]=o,i[1]=n,i[2]=0,i[3]=-n,i[4]=o,i[5]=0,i[6]=0,i[7]=0,i[8]=1},e.createFromScaling=function(e,t){var i=t.elements,n=e.elements;i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=n[1],i[5]=0,i[6]=0,i[7]=0,i[8]=1},e.createFromMatrix4x4=function(e,t){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10]},e.multiply=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements,r=o[0],a=o[1],l=o[2],h=o[3],c=o[4],u=o[5],d=o[6],p=o[7],f=o[8],_=s[0],m=s[1],g=s[2],v=s[3],y=s[4],b=s[5],E=s[6],x=s[7],S=s[8];n[0]=_*r+m*h+g*d,n[1]=_*a+m*c+g*p,n[2]=_*l+m*u+g*f,n[3]=v*r+y*h+b*d,n[4]=v*a+y*c+b*p,n[5]=v*l+y*u+b*f,n[6]=E*r+x*h+S*d,n[7]=E*a+x*c+S*p,n[8]=E*l+x*u+S*f},e.lookAt=function(t,i,n,o){rl.subtract(t,i,e._tempV30),rl.normalize(e._tempV30,e._tempV30),rl.cross(n,e._tempV30,e._tempV31),rl.normalize(e._tempV31,e._tempV31),rl.cross(e._tempV30,e._tempV31,e._tempV32);var s=e._tempV30.elements,r=e._tempV31.elements,a=e._tempV32.elements,l=o.elements;l[0]=r[0],l[3]=r[1],l[6]=r[2],l[1]=a[0],l[4]=a[1],l[7]=a[2],l[2]=s[0],l[5]=s[1],l[8]=s[2]},e.DEFAULT=new e,n(e,["_tempV30",function(){return this._tempV30=new rl},"_tempV31",function(){return this._tempV31=new rl},"_tempV32",function(){return this._tempV32=new rl}]),e}(),$a=function(){function e(e,t,i,n){this.minDepth=0,this.maxDepth=1,this.x=e,this.y=t,this.width=i,this.height=n}o(e,"laya.d3.math.Viewport");var t=e.prototype;return t.project=function(e,t,i){rl.transformV3ToV3(e,t,i);var n=e.elements,o=t.elements,s=i.elements,r=n[0]*o[3]+n[1]*o[7]+n[2]*o[11]+o[15];1!==r&&(s[0]=s[0]/r,s[1]=s[1]/r,s[2]=s[2]/r),s[0]=.5*(s[0]+1)*this.width+this.x,s[1]=.5*(-s[1]+1)*this.height+this.y,s[2]=s[2]*(this.maxDepth-this.minDepth)+this.minDepth},t.unprojectFromMat=function(e,t,i){var n=e.elements,o=t.elements,s=i.elements;s[0]=(n[0]-this.x)/this.width*2-1,s[1]=-((n[1]-this.y)/this.height*2-1);var r=(this.maxDepth-this.minDepth)/2;s[2]=(n[2]-this.minDepth-r)/r;var a=s[0]*o[3]+s[1]*o[7]+s[2]*o[11]+o[15];rl.transformV3ToV3(i,t,i),1!==a&&(s[0]=s[0]/a,s[1]=s[1]/a,s[2]=s[2]/a)},t.unprojectFromWVP=function(t,i,n,o,s){ol.multiply(i,n,e._tempMatrix4x4),o&&ol.multiply(e._tempMatrix4x4,o,e._tempMatrix4x4),e._tempMatrix4x4.invert(e._tempMatrix4x4),this.unprojectFromMat(t,e._tempMatrix4x4,s)},n(e,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new ol}]),e}(),el=function(){function e(e,t,i,n){this.elements=new Float32Array(4),void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=this.elements;o[0]=e,o[1]=t,o[2]=i,o[3]=n}o(e,"laya.d3.math.Vector4");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.fromArray=function(e,t){void 0===t&&(t=0),this.elements[0]=e[t+0],this.elements[1]=e[t+1],this.elements[2]=e[t+2],this.elements[3]=e[t+3]},t.cloneTo=function(e){var t=e,i=t.elements,n=this.elements;i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},s(0,t,"w",function(){return this.elements[3]},function(e){this.elements[3]=e}),s(0,t,"z",function(){return this.elements[2]},function(e){this.elements[2]=e}),s(0,t,"y",function(){return this.elements[1]},function(e){this.elements[1]=e}),s(0,t,"x",function(){return this.elements[0]},function(e){this.elements[0]=e}),e.lerp=function(e,t,i,n){var o=n.elements,s=e.elements,r=t.elements,a=s[0],l=s[1],h=s[2],c=s[3];o[0]=a+i*(r[0]-a),o[1]=l+i*(r[1]-l),o[2]=h+i*(r[2]-h),o[3]=c+i*(r[3]-c)},e.transformByM4x4=function(e,t,i){var n=e.elements,o=n[0],s=n[1],r=n[2],a=n[3],l=t.elements,h=i.elements;h[0]=o*l[0]+s*l[4]+r*l[8]+a*l[12],h[1]=o*l[1]+s*l[5]+r*l[9]+a*l[13],h[2]=o*l[2]+s*l[6]+r*l[10]+a*l[14],h[3]=o*l[3]+s*l[7]+r*l[11]+a*l[15]},e.equals=function(e,t){var i=e.elements,n=t.elements;return ja.nearEqual(Math.abs(i[0]),Math.abs(n[0]))&&ja.nearEqual(Math.abs(i[1]),Math.abs(n[1]))&&ja.nearEqual(Math.abs(i[2]),Math.abs(n[2]))&&ja.nearEqual(Math.abs(i[3]),Math.abs(n[3]))},e.normalize=function(e,t){var i=e.elements,n=t.elements,o=e.length();o>0&&(n[0]=i[0]*o,n[1]=i[1]*o,n[2]=i[2]*o,n[3]=i[3]*o)},e.add=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=o[0]+s[0],n[1]=o[1]+s[1],n[2]=o[2]+s[2],n[3]=o[3]+s[3]},e.subtract=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=o[0]-s[0],n[1]=o[1]-s[1],n[2]=o[2]-s[2],n[3]=o[3]-s[3]},e.multiply=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=o[0]*s[0],n[1]=o[1]*s[1],n[2]=o[2]*s[2],n[3]=o[3]*s[3]},e.scale=function(e,t,i){var n=i.elements,o=e.elements;n[0]=o[0]*t,n[1]=o[1]*t,n[2]=o[2]*t,n[3]=o[3]*t},e.Clamp=function(e,t,i,n){var o=e.elements,s=o[0],r=o[1],a=o[2],l=o[3],h=t.elements,c=h[0],u=h[1],d=h[2],p=h[3],f=i.elements,_=f[0],m=f[1],g=f[2],v=f[3],y=n.elements;s=s>_?_:s,s=c>s?c:s,r=r>m?m:r,r=u>r?u:r,a=a>g?g:a,a=d>a?d:a,l=l>v?v:l,l=p>l?p:l,y[0]=s,y[1]=r,y[2]=a,y[3]=l},e.distanceSquared=function(e,t){var i=e.elements,n=t.elements,o=i[0]-n[0],s=i[1]-n[1],r=i[2]-n[2],a=i[3]-n[3];return o*o+s*s+r*r+a*a},e.distance=function(e,t){var i=e.elements,n=t.elements,o=i[0]-n[0],s=i[1]-n[1],r=i[2]-n[2],a=i[3]-n[3];return Math.sqrt(o*o+s*s+r*r+a*a)},e.dot=function(e,t){var i=e.elements,n=t.elements,o=i[0]*n[0]+i[1]*n[1]+i[2]*n[2]+i[3]*n[3];return o},e.min=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=Math.min(o[0],s[0]),n[1]=Math.min(o[1],s[1]),n[2]=Math.min(o[2],s[2]),n[3]=Math.min(o[3],s[3])},e.max=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=Math.max(o[0],s[0]),n[1]=Math.max(o[1],s[1]),n[2]=Math.max(o[2],s[2]),n[3]=Math.max(o[3],s[3])},n(e,["ZERO",function(){return this.ZERO=new e},"ONE",function(){return this.ONE=new e(1,1,1,1)},"UnitX",function(){return this.UnitX=new e(1,0,0,0)},"UnitY",function(){return this.UnitY=new e(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new e(0,0,1,0)},"UnitW",function(){return this.UnitW=new e(0,0,0,1)}]),e}(),tl=(function(){function e(){}return o(e,"laya.d3.math.ContainmentType"),e.Disjoint=0,e.Contains=1,e.Intersects=2,e}(),function(){function e(e,t){this.extents=null,this.transformation=null,this.extents=e,this.transformation=t}o(e,"laya.d3.math.OrientedBoundBox");var t=e.prototype;return t.getCorners=function(t){var i=e._tempV30.elements,n=e._tempV31.elements,o=e._tempV32.elements,s=this.extents.elements;i[0]=s[0],i[1]=i[2]=0,n[1]=s[1],n[0]=n[2]=0,o[2]=s[2],o[0]=o[1]=0,rl.TransformNormal(e._tempV30,this.transformation,e._tempV30),rl.TransformNormal(e._tempV31,this.transformation,e._tempV31),rl.TransformNormal(e._tempV32,this.transformation,e._tempV32);var r=e._tempV33;this.transformation.getTranslationVector(r),t.length=8,rl.add(r,e._tempV30,e._tempV34),rl.add(e._tempV34,e._tempV31,e._tempV34),rl.add(e._tempV34,e._tempV32,t[0]),rl.add(r,e._tempV30,e._tempV34),rl.add(e._tempV34,e._tempV31,e._tempV34),rl.subtract(e._tempV34,e._tempV32,t[1]),rl.subtract(r,e._tempV30,e._tempV34),rl.add(e._tempV34,e._tempV31,e._tempV34),rl.subtract(e._tempV34,e._tempV32,t[2]),rl.subtract(r,e._tempV30,e._tempV34),rl.add(e._tempV34,e._tempV31,e._tempV34),rl.add(e._tempV34,e._tempV32,t[3]),rl.add(r,e._tempV30,e._tempV34),rl.subtract(e._tempV34,e._tempV31,e._tempV34),rl.add(e._tempV34,e._tempV32,t[4]),rl.add(r,e._tempV30,e._tempV34),rl.subtract(e._tempV34,e._tempV31,e._tempV34),rl.subtract(e._tempV34,e._tempV32,t[5]),rl.subtract(r,e._tempV30,e._tempV34),rl.subtract(e._tempV34,e._tempV31,e._tempV34),rl.subtract(e._tempV34,e._tempV32,t[6]),rl.subtract(r,e._tempV30,e._tempV34),rl.subtract(e._tempV34,e._tempV31,e._tempV34),rl.add(e._tempV34,e._tempV32,t[7])},t.transform=function(e){ol.multiply(this.transformation,e,this.transformation)},t.scale=function(e){rl.multiply(this.extents,e,this.extents)},t.translate=function(t){this.transformation.getTranslationVector(e._tempV30),rl.add(e._tempV30,t,e._tempV31),this.transformation.setTranslationVector(e._tempV31)},t.Size=function(e){rl.scale(this.extents,2,e)},t.getSize=function(t){var i=this.extents.elements;e._tempV30.x=i[0],e._tempV31.y=i[1],e._tempV32.z=i[2],rl.TransformNormal(e._tempV30,this.transformation,e._tempV30),rl.TransformNormal(e._tempV31,this.transformation,e._tempV31),rl.TransformNormal(e._tempV31,this.transformation,e._tempV32);var n=t.elements;n[0]=rl.scalarLength(e._tempV30),n[1]=rl.scalarLength(e._tempV31),n[2]=rl.scalarLength(e._tempV32)},t.getSizeSquared=function(t){var i=this.extents.elements;e._tempV30.x=i[0],e._tempV31.y=i[1],e._tempV32.z=i[2],rl.TransformNormal(e._tempV30,this.transformation,e._tempV30),rl.TransformNormal(e._tempV31,this.transformation,e._tempV31),rl.TransformNormal(e._tempV31,this.transformation,e._tempV32);var n=t.elements;n[0]=rl.scalarLengthSquared(e._tempV30),n[1]=rl.scalarLengthSquared(e._tempV31),n[2]=rl.scalarLengthSquared(e._tempV32)},t.getCenter=function(e){this.transformation.getTranslationVector(e)},t.containsPoint=function(t){var i=this.extents.elements,n=i[0],o=i[1],s=i[2];this.transformation.invert(e._tempM0),rl.transformCoordinate(t,e._tempM0,e._tempV30);var r=e._tempV30.elements,a=Math.abs(r[0]),l=Math.abs(r[1]),h=Math.abs(r[2]);return ja.nearEqual(a,n)&&ja.nearEqual(l,o)&&ja.nearEqual(h,s)?2:n>a&&o>l&&s>h?1:0},t.containsPoints=function(t){var i=this.extents.elements,n=i[0],o=i[1],s=i[2];this.transformation.invert(e._tempM0);for(var r=!0,a=!1,l=0;l<t.length;l++){rl.transformCoordinate(t[l],e._tempM0,e._tempV30);var h=e._tempV30.elements,c=Math.abs(h[0]),u=Math.abs(h[1]),d=Math.abs(h[2]);ja.nearEqual(c,n)&&ja.nearEqual(u,o)&&ja.nearEqual(d,s)&&(a=!0),n>c&&o>u&&s>d?a=!0:r=!1}return r?1:a?2:0},t.containsSphere=function(t,i){void 0===i&&(i=!1);var n=this.extents.elements,o=n[0],s=n[1],r=n[2],a=t.radius;this.transformation.invert(e._tempM0),rl.transformCoordinate(t.center,e._tempM0,e._tempV30);var l=NaN;i?l=a:(rl.scale(rl.UnitX,a,e._tempV31),rl.TransformNormal(e._tempV31,e._tempM0,e._tempV31),l=rl.scalarLength(e._tempV31)),rl.scale(this.extents,-1,e._tempV32),rl.Clamp(e._tempV30,e._tempV32,this.extents,e._tempV33);var h=rl.distanceSquared(e._tempV30,e._tempV33);if(h>l*l)return 0;var c=e._tempV30.elements,u=c[0],d=c[1],p=c[2],f=e._tempV32.elements,_=f[0],m=f[1],g=f[2];return u>=_+l&&o-l>=u&&o-_>l&&d>=m+l&&s-l>=d&&s-m>l&&p>=g+l&&r-l>=p&&r-g>l?1:2},t.containsOrientedBoundBox=function(t){var i=0,n=0;t.getCorners(e._corners);var o=this.containsPoints(e._corners);if(0!=o)return o;var s=this.extents.elements;t.extents.cloneTo(e._tempV35);var r=e._tempV35.elements;e._getRows(this.transformation,e._rows1),e._getRows(t.transformation,e._rows2);var a=NaN,l=NaN,h=NaN,c=NaN;for(i=0;4>i;i++)for(n=0;4>n;n++)3==i||3==n?(e._tempM0.setElementByRowColumn(i,n,0),e._tempM1.setElementByRowColumn(i,n,0)):(c=rl.dot(e._rows1[i],e._rows2[n]),e._tempM0.setElementByRowColumn(i,n,c),e._tempM1.setElementByRowColumn(i,n,Math.abs(c)));t.getCenter(e._tempV34),this.getCenter(e._tempV36),rl.subtract(e._tempV34,e._tempV36,e._tempV30);var u=e._tempV31.elements;u[0]=rl.dot(e._tempV30,e._rows1[0]),u[1]=rl.dot(e._tempV30,e._rows1[1]),u[2]=rl.dot(e._tempV30,e._rows1[2]);var d=e._tempV32.elements,p=e._tempV33.elements;for(i=0;3>i;i++)if(d[0]=e._tempM1.getElementByRowColumn(i,0),d[1]=e._tempM1.getElementByRowColumn(i,1),d[2]=e._tempM1.getElementByRowColumn(i,2),a=s[i],l=rl.dot(e._tempV35,e._tempV32),h=Math.abs(u[i]),h>a+l)return 0;for(n=0;3>n;n++)if(d[0]=e._tempM1.getElementByRowColumn(0,n),d[1]=e._tempM1.getElementByRowColumn(1,n),d[2]=e._tempM1.getElementByRowColumn(2,n),p[0]=e._tempM0.getElementByRowColumn(0,n),p[1]=e._tempM0.getElementByRowColumn(1,n),p[2]=e._tempM0.getElementByRowColumn(2,n),a=rl.dot(this.extents,e._tempV32),l=r[n],h=Math.abs(rl.dot(e._tempV31,e._tempV33)),h>a+l)return 0;for(i=0;3>i;i++)for(n=0;3>n;n++){var f=(i+1)%3,_=(i+2)%3,m=(n+1)%3,g=(n+2)%3;if(a=s[f]*e._tempM1.getElementByRowColumn(_,n)+s[_]*e._tempM1.getElementByRowColumn(f,n),l=r[m]*e._tempM1.getElementByRowColumn(i,g)+r[g]*e._tempM1.getElementByRowColumn(i,m),h=Math.abs(u[_]*e._tempM0.getElementByRowColumn(f,n)-u[f]*e._tempM0.getElementByRowColumn(_,n)),h>a+l)return 0}return 2},t.containsLine=function(t,i){e._corners[0]=t,e._corners[1]=i;var n=this.containsPoints(e._corners);if(0!=n)return n;var o=this.extents.elements,s=o[0],r=o[1],a=o[2];this.transformation.invert(e._tempM0),rl.transformCoordinate(t,e._tempM0,e._tempV30),rl.transformCoordinate(i,e._tempM0,e._tempV31),rl.add(e._tempV30,e._tempV31,e._tempV32),rl.scale(e._tempV32,.5,e._tempV32),rl.subtract(e._tempV30,e._tempV32,e._tempV33);var l=e._tempV33.elements,h=l[0],c=l[1],u=l[2],d=e._tempV34.elements,p=d[0]=Math.abs(l[0]),f=d[1]=Math.abs(l[1]),_=d[2]=Math.abs(l[2]),m=e._tempV32.elements,g=m[0],v=m[1],y=m[2];return Math.abs(g)>s+p?0:Math.abs(v)>r+f?0:Math.abs(y)>a+_?0:Math.abs(v*u-y*c)>r*_+a*f?0:Math.abs(g*u-y*h)>s*_+a*p?0:Math.abs(g*c-v*h)>s*f+r*p?0:2},t.containsBoundBox=function(t){var i=0,n=0,o=t.min,s=t.max;t.getCorners(e._corners);var r=this.containsPoints(e._corners);if(0!=r)return r;rl.subtract(s,o,e._tempV30),rl.scale(e._tempV30,.5,e._tempV30),rl.add(o,e._tempV30,e._tempV30),rl.subtract(s,e._tempV30,e._tempV31);var a=this.extents.elements,l=e._tempV31.elements;e._getRows(this.transformation,e._rows1),this.transformation.invert(e._tempM0);var h=NaN,c=NaN,u=NaN;for(i=0;3>i;i++)for(n=0;3>n;n++)e._tempM1.setElementByRowColumn(i,n,Math.abs(e._tempM0.getElementByRowColumn(i,n)));this.getCenter(e._tempV35),rl.subtract(e._tempV30,e._tempV35,e._tempV32);var d=e._tempV31.elements;d[0]=rl.dot(e._tempV32,e._rows1[0]),d[1]=rl.dot(e._tempV32,e._rows1[1]),d[2]=rl.dot(e._tempV32,e._rows1[2]);var p=e._tempV33.elements,f=e._tempV34.elements;for(i=0;3>i;i++)if(p[0]=e._tempM1.getElementByRowColumn(i,0),p[1]=e._tempM1.getElementByRowColumn(i,1),p[2]=e._tempM1.getElementByRowColumn(i,2),h=a[i],c=rl.dot(e._tempV31,e._tempV33),u=Math.abs(d[i]),u>h+c)return 0;for(n=0;3>n;n++)if(p[0]=e._tempM1.getElementByRowColumn(0,n),p[1]=e._tempM1.getElementByRowColumn(1,n),p[2]=e._tempM1.getElementByRowColumn(2,n),f[0]=e._tempM0.getElementByRowColumn(0,n),f[1]=e._tempM0.getElementByRowColumn(1,n),f[2]=e._tempM0.getElementByRowColumn(2,n),h=rl.dot(this.extents,e._tempV33),c=l[n],u=Math.abs(rl.dot(e._tempV31,e._tempV34)),u>h+c)return 0;for(i=0;3>i;i++)for(n=0;3>n;n++){var _=(i+1)%3,m=(i+2)%3,g=(n+1)%3,v=(n+2)%3;if(h=a[_]*e._tempM1.getElementByRowColumn(m,n)+a[m]*e._tempM1.getElementByRowColumn(_,n),c=l[g]*e._tempM1.getElementByRowColumn(i,v)+l[v]*e._tempM1.getElementByRowColumn(i,g),u=Math.abs(d[m]*e._tempM0.getElementByRowColumn(_,n)-d[_]*e._tempM0.getElementByRowColumn(m,n)),u>h+c)return 0}return 2},t.intersectsRay=function(t,i){rl.scale(this.extents,-1,e._tempV30),this.transformation.invert(e._tempM0),rl.TransformNormal(t.direction,e._tempM0,e._ray.direction),rl.transformCoordinate(t.origin,e._tempM0,e._ray.origin),e._boxBound1.min=e._tempV30,e._boxBound1.max=this.extents;var n=al.intersectsRayAndBoxRP(e._ray,e._boxBound1,i);return-1!==n&&rl.transformCoordinate(i,this.transformation,i),n},t._getLocalCorners=function(t){t.length=8;var i=this.extents.elements;e._tempV30.x=i[0],e._tempV31.y=i[1],e._tempV32.z=i[2],rl.add(e._tempV30,e._tempV31,e._tempV33),rl.add(e._tempV33,e._tempV32,t[0]),rl.add(e._tempV30,e._tempV31,e._tempV33),rl.subtract(e._tempV33,e._tempV32,t[1]),rl.subtract(e._tempV31,e._tempV30,e._tempV33),rl.subtract(e._tempV33,e._tempV30,t[2]),rl.subtract(e._tempV31,e._tempV30,e._tempV33),rl.add(e._tempV33,e._tempV32,t[3]),rl.subtract(e._tempV30,e._tempV31,e._tempV33),rl.add(e._tempV33,e._tempV32,t[4]),rl.subtract(e._tempV30,e._tempV31,e._tempV33),rl.subtract(e._tempV33,e._tempV32,t[5]),rl.scale(t[0],-1,t[6]),rl.subtract(e._tempV32,e._tempV30,e._tempV33),rl.subtract(e._tempV33,e._tempV31,t[7])},t.equals=function(e){return this.extents==e.extents&&this.transformation==e.transformation},t.cloneTo=function(e){var t=e;this.extents.cloneTo(t.extents),this.transformation.cloneTo(t.transformation)},e.createByBoundBox=function(t,i){var n=t.min,o=t.max;rl.subtract(o,n,e._tempV30),rl.scale(e._tempV30,.5,e._tempV30),rl.add(n,e._tempV30,e._tempV31),rl.subtract(o,e._tempV31,e._tempV32),ol.translation(e._tempV31,e._tempM0);var s=e._tempV32.clone(),r=e._tempM0.clone();i.extents=s,i.transformation=r},e.createByMinAndMaxVertex=function(t,i){rl.subtract(i,t,e._tempV30),rl.scale(e._tempV30,.5,e._tempV30),rl.add(t,e._tempV30,e._tempV31),rl.subtract(i,e._tempV31,e._tempV32),ol.translation(e._tempV31,e._tempM0);var n=new e(e._tempV32,e._tempM0);return n},e._getRows=function(e,t){t.length=3;var i=e.elements,n=t[0].elements;n[0]=i[0],n[1]=i[1],n[2]=i[2];var o=t[1].elements;o[0]=i[4],o[1]=i[5],o[2]=i[6];var s=t[2].elements;s[0]=i[8],s[1]=i[9],s[2]=i[10]},e.getObbtoObbMatrix4x4=function(t,i,n,o){var s=t.transformation,r=i.transformation;if(n){e._getRows(s,e._rows1),e._getRows(r,e._rows2);for(var a=0;3>a;a++)for(var l=0;3>l;l++)o.setElementByRowColumn(a,l,rl.dot(e._rows2[a],e._rows1[l]));i.getCenter(e._tempV30),t.getCenter(e._tempV31),rl.subtract(e._tempV30,e._tempV31,e._tempV32);var h=o.elements;h[12]=rl.dot(e._tempV32,e._rows1[0]),h[13]=rl.dot(e._tempV32,e._rows1[1]),h[14]=rl.dot(e._tempV32,e._rows1[2]),h[15]=1}else s.invert(e._tempM0),ol.multiply(r,e._tempM0,o)},e.merge=function(t,i,n){var o=t.extents,s=t.transformation;e.getObbtoObbMatrix4x4(t,i,n,e._tempM0),i._getLocalCorners(e._corners),rl.transformCoordinate(e._corners[0],e._tempM0,e._corners[0]),rl.transformCoordinate(e._corners[1],e._tempM0,e._corners[1]),rl.transformCoordinate(e._corners[2],e._tempM0,e._corners[2]),rl.transformCoordinate(e._corners[3],e._tempM0,e._corners[3]),rl.transformCoordinate(e._corners[4],e._tempM0,e._corners[4]),rl.transformCoordinate(e._corners[5],e._tempM0,e._corners[5]),rl.transformCoordinate(e._corners[6],e._tempM0,e._corners[6]),rl.transformCoordinate(e._corners[7],e._tempM0,e._corners[7]),rl.scale(o,-1,e._boxBound1.min),o.cloneTo(e._boxBound1.max),nl.createfromPoints(e._corners,e._boxBound2),nl.merge(e._boxBound2,e._boxBound1,e._boxBound3);var r=e._boxBound3.min,a=e._boxBound3.max;rl.subtract(a,r,e._tempV30),rl.scale(e._tempV30,.5,e._tempV30),rl.add(r,e._tempV30,e._tempV32),rl.subtract(a,e._tempV32,o),rl.transformCoordinate(e._tempV32,s,e._tempV33)},n(e,["_tempV30",function(){return this._tempV30=new rl},"_tempV31",function(){return this._tempV31=new rl},"_tempV32",function(){return this._tempV32=new rl},"_tempV33",function(){return this._tempV33=new rl},"_tempV34",function(){return this._tempV34=new rl},"_tempV35",function(){return this._tempV35=new rl},"_tempV36",function(){return this._tempV36=new rl},"_tempM0",function(){return this._tempM0=new ol},"_tempM1",function(){return this._tempM1=new ol},"_corners",function(){return this._corners=[new rl,new rl,new rl,new rl,new rl,new rl,new rl,new rl]},"_rows1",function(){return this._rows1=[new rl,new rl,new rl]},"_rows2",function(){return this._rows2=[new rl,new rl,new rl]},"_ray",function(){return this._ray=new sl(new rl,new rl)},"_boxBound1",function(){return this._boxBound1=new nl(new rl,new rl)},"_boxBound2",function(){return this._boxBound2=new nl(new rl,new rl)},"_boxBound3",function(){return this._boxBound3=new nl(new rl,new rl)}]),e}()),il=function(){function e(e,t){this.normal=null,this.distance=NaN,void 0===t&&(t=0),this.normal=e,this.distance=t}o(e,"laya.d3.math.Plane");var t=e.prototype;return t.normalize=function(){var e=this.normal.elements,t=e[0],i=e[1],n=e[2],o=1/Math.sqrt(t*t+i*i+n*n);e[0]=t*o,e[1]=i*o,e[2]=n*o,this.distance*=o},e.createPlaneBy3P=function(t,i,n){var o=t.elements,s=i.elements,r=n.elements,a=s[0]-o[0],l=s[1]-o[1],h=s[2]-o[2],c=r[0]-o[0],u=r[1]-o[1],d=r[2]-o[2],p=l*d-h*u,f=h*c-a*d,_=a*u-l*c,m=1/Math.sqrt(p*p+f*f+_*_),g=p*m,v=f*m,y=_*m,b=e._TEMPVec3.elements;b[0]=g,b[1]=v,b[2]=y;var E=-(g*o[0]+v*o[1]+y*o[2]),x=new e(e._TEMPVec3,E);return x},e.PlaneIntersectionType_Back=0,e.PlaneIntersectionType_Front=1,e.PlaneIntersectionType_Intersecting=2,n(e,["_TEMPVec3",function(){return this._TEMPVec3=new rl}]),e}(),nl=function(){function e(e,t){this.min=null,this.max=null,this.min=e,this.max=t}o(e,"laya.d3.math.BoundBox");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.getCorners=function(e){e.length=8;var t=this.min.elements,i=this.max.elements,n=t[0],o=t[1],s=t[2],r=i[0],a=i[1],l=i[2];e[0]=new rl(n,a,l),e[1]=new rl(r,a,l),e[2]=new rl(r,o,l),e[3]=new rl(n,o,l),e[4]=new rl(n,a,s),e[5]=new rl(r,a,s),e[6]=new rl(r,o,s),e[7]=new rl(n,o,s)},t.toDefault=function(){this.min.toDefault(),this.max.toDefault()},t.cloneTo=function(e){var t=e;this.min.cloneTo(t.min),this.max.cloneTo(t.max)},t.clone=function(){var e=new this.constructor(new rl,new rl);return this.cloneTo(e),e},e.createfromPoints=function(e,t){if(null==e)throw new Error("points");var i=t.min,n=t.max,o=i.elements;o[0]=Number.MAX_VALUE,o[1]=Number.MAX_VALUE,o[2]=Number.MAX_VALUE;var s=n.elements;s[0]=-Number.MAX_VALUE,s[1]=-Number.MAX_VALUE,s[2]=-Number.MAX_VALUE;for(var r=0,a=e.length;a>r;++r)rl.min(i,e[r],i),rl.max(n,e[r],n)},e.merge=function(e,t,i){rl.min(e.min,t.min,i.min),rl.max(e.max,t.max,i.max)},e}(),ol=function(){function e(e,t,i,n,o,s,r,a,l,h,c,u,d,p,f,_){void 0===e&&(e=1),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=1),void 0===r&&(r=0),void 0===a&&(a=0),void 0===l&&(l=0),void 0===h&&(h=0),void 0===c&&(c=1),void 0===u&&(u=0),void 0===d&&(d=0),void 0===p&&(p=0),void 0===f&&(f=0),void 0===_&&(_=1);var m=this.elements=new Float32Array(16);m[0]=e,m[1]=t,m[2]=i,m[3]=n,m[4]=o,m[5]=s,m[6]=r,m[7]=a,m[8]=l,m[9]=h,m[10]=c,m[11]=u,m[12]=d,m[13]=p,m[14]=f,m[15]=_}o(e,"laya.d3.math.Matrix4x4");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.getElementByRowColumn=function(e,t){if(0>e||e>3)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(0>t||t>3)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*e+t]},t.setElementByRowColumn=function(e,t,i){if(0>e||e>3)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(0>t||t>3)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*e+t]=i},t.equalsOtherMatrix=function(e){var t=this.elements,i=e.elements;return ja.nearEqual(t[0],i[0])&&ja.nearEqual(t[1],i[1])&&ja.nearEqual(t[2],i[2])&&ja.nearEqual(t[3],i[3])&&ja.nearEqual(t[4],i[4])&&ja.nearEqual(t[5],i[5])&&ja.nearEqual(t[6],i[6])&&ja.nearEqual(t[7],i[7])&&ja.nearEqual(t[8],i[8])&&ja.nearEqual(t[9],i[9])&&ja.nearEqual(t[10],i[10])&&ja.nearEqual(t[11],i[11])&&ja.nearEqual(t[12],i[12])&&ja.nearEqual(t[13],i[13])&&ja.nearEqual(t[14],i[14])&&ja.nearEqual(t[15],i[15])},t.decomposeTransRotScale=function(t,i,n){var o=e._tempMatrix4x4;return this.decomposeTransRotMatScale(t,o,n)?(cl.createFromMatrix4x4(o,i),!0):(i.identity(),!1)},t.decomposeTransRotMatScale=function(t,i,n){var o=this.elements,s=t.elements,r=i.elements,a=n.elements;s[0]=o[12],s[1]=o[13],s[2]=o[14];var l=o[0],h=o[1],c=o[2],u=o[4],d=o[5],p=o[6],f=o[8],_=o[9],m=o[10],g=a[0]=Math.sqrt(l*l+h*h+c*c),v=a[1]=Math.sqrt(u*u+d*d+p*p),y=a[2]=Math.sqrt(f*f+_*_+m*m);if(ja.isZero(g)||ja.isZero(v)||ja.isZero(y))return r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[11]=r[12]=r[13]=r[14]=0,r[0]=r[5]=r[10]=r[15]=1,!1;var b=e._tempVector0,E=b.elements;E[0]=f/y,E[1]=_/y,E[2]=m/y;var x=e._tempVector1,S=x.elements;S[0]=l/g,S[1]=h/g,S[2]=c/g;var w=e._tempVector2;rl.cross(b,x,w);var C=e._tempVector1;return rl.cross(w,b,C),r[3]=r[7]=r[11]=r[12]=r[13]=r[14]=0,r[15]=1,r[0]=C.x,r[1]=C.y,r[2]=C.z,r[4]=w.x,r[5]=w.y,r[6]=w.z,r[8]=b.x,r[9]=b.y,r[10]=b.z,r[0]*l+r[1]*h+r[2]*c<0&&(a[0]=-g),r[4]*u+r[5]*d+r[6]*p<0&&(a[1]=-v),r[8]*f+r[9]*_+r[10]*m<0&&(a[2]=-y),!0},t.decomposeYawPitchRoll=function(e){var t=e.elements,i=Math.asin(-this.elements[9]);t[1]=i;var n=Math.cos(i);n>ja.zeroTolerance?(t[2]=Math.atan2(this.elements[1],this.elements[5]),t[0]=Math.atan2(this.elements[8],this.elements[10])):(t[2]=Math.atan2(-this.elements[4],this.elements[0]),t[0]=0)},t.normalize=function(){var e=this.elements,t=e[0],i=e[1],n=e[2],o=Math.sqrt(t*t+i*i+n*n);return o?void(1!=o&&(o=1/o,e[0]=t*o,e[1]=i*o,e[2]=n*o)):(e[0]=0,e[1]=0,void(e[2]=0))},t.transpose=function(){var e,t;return e=this.elements,t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},t.invert=function(e){var t=this.elements,i=e.elements,n=t[0],o=t[1],s=t[2],r=t[3],a=t[4],l=t[5],h=t[6],c=t[7],u=t[8],d=t[9],p=t[10],f=t[11],_=t[12],m=t[13],g=t[14],v=t[15],y=n*l-o*a,b=n*h-s*a,E=n*c-r*a,x=o*h-s*l,S=o*c-r*l,w=s*c-r*h,C=u*m-d*_,T=u*g-p*_,I=u*v-f*_,A=d*g-p*m,N=d*v-f*m,P=p*v-f*g,R=y*P-b*N+E*A+x*I-S*T+w*C;0!==Math.abs(R)&&(R=1/R,i[0]=(l*P-h*N+c*A)*R,i[1]=(s*N-o*P-r*A)*R,i[2]=(m*w-g*S+v*x)*R,i[3]=(p*S-d*w-f*x)*R,i[4]=(h*I-a*P-c*T)*R,i[5]=(n*P-s*I+r*T)*R,i[6]=(g*E-_*w-v*b)*R,i[7]=(u*w-p*E+f*b)*R,i[8]=(a*N-l*I+c*C)*R,i[9]=(o*I-n*N-r*C)*R,i[10]=(_*S-m*E+v*y)*R,i[11]=(d*E-u*S-f*y)*R,i[12]=(l*T-a*A-h*C)*R,i[13]=(n*A-o*T+s*C)*R,i[14]=(m*b-_*x-g*y)*R,i[15]=(u*x-d*b+p*y)*R)},t.identity=function(){var e=this.elements;e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[8]=e[9]=e[11]=e[12]=e[13]=e[14]=0,e[0]=e[5]=e[10]=e[15]=1},t.cloneTo=function(e){var t,i,n;if(i=this.elements,n=e.elements,i!==n)for(t=0;16>t;++t)n[t]=i[t]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},t.getTranslationVector=function(e){var t=this.elements,i=e.elements;i[0]=t[12],i[1]=t[13],i[2]=t[14]},t.setTranslationVector=function(e){var t=this.elements,i=e.elements;t[12]=i[0],t[13]=i[1],t[14]=i[2]},t.getForward=function(e){var t=this.elements,i=e.elements;i[0]=-t[8],i[1]=-t[9],i[2]=-t[10]},t.setForward=function(e){var t=this.elements,i=e.elements;t[8]=-i[0],t[9]=-i[1],t[10]=-i[2]},e.createRotationX=function(e,t){var i=t.elements,n=Math.sin(e),o=Math.cos(e);i[1]=i[2]=i[3]=i[4]=i[7]=i[8]=i[11]=i[12]=i[13]=i[14]=0,i[0]=i[15]=1,i[5]=i[10]=o,i[6]=n,i[9]=-n},e.createRotationY=function(e,t){var i=t.elements,n=Math.sin(e),o=Math.cos(e);i[1]=i[3]=i[4]=i[6]=i[7]=i[9]=i[11]=i[12]=i[13]=i[14]=0,i[5]=i[15]=1,i[0]=i[10]=o,i[2]=-n,i[8]=n},e.createRotationZ=function(e,t){var i=t.elements,n=Math.sin(e),o=Math.cos(e);i[2]=i[3]=i[6]=i[7]=i[8]=i[9]=i[11]=i[12]=i[13]=i[14]=0,i[10]=i[15]=1,i[0]=i[5]=o,i[1]=n,i[4]=-n},e.createRotationYawPitchRoll=function(t,i,n,o){cl.createFromYawPitchRoll(t,i,n,e._tempQuaternion),e.createRotationQuaternion(e._tempQuaternion,o)},e.createRotationAxis=function(e,t,i){var n=e.elements,o=n[0],s=n[1],r=n[2],a=Math.cos(t),l=Math.sin(t),h=o*o,c=s*s,u=r*r,d=o*s,p=o*r,f=s*r,_=i.elements;_[3]=_[7]=_[11]=_[12]=_[13]=_[14]=0,_[15]=1,_[0]=h+a*(1-h),_[1]=d-a*d+l*r,_[2]=p-a*p-l*s,_[4]=d-a*d-l*r,_[5]=c+a*(1-c),_[6]=f-a*f+l*o,_[8]=p-a*p+l*s,_[9]=f-a*f-l*o,_[10]=u+a*(1-u)},e.createRotationQuaternion=function(e,t){var i=e.elements,n=t.elements,o=i[0],s=i[1],r=i[2],a=i[3],l=o*o,h=s*s,c=r*r,u=o*s,d=r*a,p=r*o,f=s*a,_=s*r,m=o*a;n[3]=n[7]=n[11]=n[12]=n[13]=n[14]=0,n[15]=1,n[0]=1-2*(h+c),n[1]=2*(u+d),n[2]=2*(p-f),n[4]=2*(u-d),n[5]=1-2*(c+l),n[6]=2*(_+m),n[8]=2*(p+f),n[9]=2*(_-m),n[10]=1-2*(h+l)},e.createTranslate=function(e,t){var i=e.elements,n=t.elements;n[4]=n[8]=n[1]=n[9]=n[2]=n[6]=n[3]=n[7]=n[11]=0,n[0]=n[5]=n[10]=n[15]=1,n[12]=i[0],n[13]=i[1],n[14]=i[2]},e.createScaling=function(e,t){var i=e.elements,n=t.elements;n[0]=i[0],n[5]=i[1],n[10]=i[2],n[1]=n[4]=n[8]=n[12]=n[9]=n[13]=n[2]=n[6]=n[14]=n[3]=n[7]=n[11]=0,n[15]=1},e.multiply=function(e,t,i){var n,o,s,r,a,l,h,c;if(o=i.elements,s=e.elements,r=t.elements,o===r)for(r=new Float32Array(16),n=0;16>n;++n)r[n]=o[n];for(n=0;4>n;n++)a=s[n],l=s[n+4],h=s[n+8],c=s[n+12],o[n]=a*r[0]+l*r[1]+h*r[2]+c*r[3],o[n+4]=a*r[4]+l*r[5]+h*r[6]+c*r[7],o[n+8]=a*r[8]+l*r[9]+h*r[10]+c*r[11],o[n+12]=a*r[12]+l*r[13]+h*r[14]+c*r[15]},e.createFromQuaternion=function(e,t){var i=t.elements,n=e.elements,o=n[0],s=n[1],r=n[2],a=n[3],l=o+o,h=s+s,c=r+r,u=o*l,d=s*l,p=s*h,f=r*l,_=r*h,m=r*c,g=a*l,v=a*h,y=a*c;i[0]=1-p-m,i[1]=d+y,i[2]=f-v,i[3]=0,i[4]=d-y,i[5]=1-u-m,i[6]=_+g,i[7]=0,i[8]=f+v,i[9]=_-g,i[10]=1-u-p,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1},e.createAffineTransformation=function(e,t,i,n){var o=e.elements,s=t.elements,r=i.elements,a=n.elements,l=s[0],h=s[1],c=s[2],u=s[3],d=l+l,p=h+h,f=c+c,_=l*d,m=l*p,g=l*f,v=h*p,y=h*f,b=c*f,E=u*d,x=u*p,S=u*f,w=r[0],C=r[1],T=r[2];a[0]=(1-(v+b))*w,a[1]=(m+S)*w,a[2]=(g-x)*w,a[3]=0,a[4]=(m-S)*C,a[5]=(1-(_+b))*C,a[6]=(y+E)*C,a[7]=0,a[8]=(g+x)*T,a[9]=(y-E)*T,a[10]=(1-(_+v))*T,a[11]=0,a[12]=o[0],a[13]=o[1],a[14]=o[2],a[15]=1},e.createLookAt=function(t,i,n,o){var s=o.elements,r=e._tempVector0,a=e._tempVector1,l=e._tempVector2;rl.subtract(t,i,l),rl.normalize(l,l),rl.cross(n,l,r),rl.normalize(r,r),rl.cross(l,r,a),o.identity(),s[0]=r.x,s[4]=r.y,s[8]=r.z,s[1]=a.x,s[5]=a.y,s[9]=a.z,s[2]=l.x,s[6]=l.y,s[10]=l.z,s[12]=-rl.dot(r,t),s[13]=-rl.dot(a,t),s[14]=-rl.dot(l,t)},e.createPerspective=function(e,t,i,n,o){var s=o.elements,r=1/Math.tan(e/2),a=1/(i-n);s[0]=r/t,s[5]=r,s[10]=(n+i)*a,s[11]=-1,s[14]=2*n*i*a,s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[12]=s[13]=s[15]=0},e.createOrthoOffCenterRH=function(e,t,i,n,o,s,r){var a=r.elements,l=1/(e-t),h=1/(i-n),c=1/(o-s);a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[11]=0,a[15]=1,a[0]=-2*l,a[5]=-2*h,a[10]=2*c,a[12]=(e+t)*l,a[13]=(n+i)*h,a[14]=(s+o)*c},e.translation=function(e,t){var i=e.elements,n=t.elements;n[0]=n[5]=n[10]=n[15]=1,n[12]=i[0],n[13]=i[1],n[14]=i[2]},n(e,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new e},"_tempVector0",function(){return this._tempVector0=new rl;
},"_tempVector1",function(){return this._tempVector1=new rl},"_tempVector2",function(){return this._tempVector2=new rl},"_tempQuaternion",function(){return this._tempQuaternion=new cl},"DEFAULT",function(){return this.DEFAULT=new e},"ZERO",function(){return this.ZERO=new e(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),e}(),sl=function(){function e(e,t){this.origin=null,this.direction=null,this.origin=e,this.direction=t}return o(e,"laya.d3.math.Ray"),e}(),rl=function(){function e(e,t,i){this.elements=new Float32Array(3),void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0);var n=this.elements;n[0]=e,n[1]=t,n[2]=i}o(e,"laya.d3.math.Vector3");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.fromArray=function(e,t){void 0===t&&(t=0),this.elements[0]=e[t+0],this.elements[1]=e[t+1],this.elements[2]=e[t+2]},t.cloneTo=function(e){var t=e,i=t.elements,n=this.elements;i[0]=n[0],i[1]=n[1],i[2]=n[2]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},t.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},s(0,t,"z",function(){return this.elements[2]},function(e){this.elements[2]=e}),s(0,t,"y",function(){return this.elements[1]},function(e){this.elements[1]=e}),s(0,t,"x",function(){return this.elements[0]},function(e){this.elements[0]=e}),e.distanceSquared=function(e,t){var i=e.elements,n=t.elements,o=i[0]-n[0],s=i[1]-n[1],r=i[2]-n[2];return o*o+s*s+r*r},e.distance=function(e,t){var i=e.elements,n=t.elements,o=i[0]-n[0],s=i[1]-n[1],r=i[2]-n[2];return Math.sqrt(o*o+s*s+r*r)},e.min=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=Math.min(o[0],s[0]),n[1]=Math.min(o[1],s[1]),n[2]=Math.min(o[2],s[2])},e.max=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=Math.max(o[0],s[0]),n[1]=Math.max(o[1],s[1]),n[2]=Math.max(o[2],s[2])},e.transformQuat=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements,r=o[0],a=o[1],l=o[2],h=s[0],c=s[1],u=s[2],d=s[3],p=d*r+c*l-u*a,f=d*a+u*r-h*l,_=d*l+h*a-c*r,m=-h*r-c*a-u*l;n[0]=p*d+m*-h+f*-u-_*-c,n[1]=f*d+m*-c+_*-h-p*-u,n[2]=_*d+m*-u+p*-c-f*-h},e.scalarLength=function(e){var t=e.elements,i=t[0],n=t[1],o=t[2];return Math.sqrt(i*i+n*n+o*o)},e.scalarLengthSquared=function(e){var t=e.elements,i=t[0],n=t[1],o=t[2];return i*i+n*n+o*o},e.normalize=function(e,t){var i=e.elements,n=t.elements,o=i[0],s=i[1],r=i[2],a=o*o+s*s+r*r;a>0&&(a=1/Math.sqrt(a),n[0]=i[0]*a,n[1]=i[1]*a,n[2]=i[2]*a)},e.multiply=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=o[0]*s[0],n[1]=o[1]*s[1],n[2]=o[2]*s[2]},e.scale=function(e,t,i){var n=i.elements,o=e.elements;n[0]=o[0]*t,n[1]=o[1]*t,n[2]=o[2]*t},e.lerp=function(e,t,i,n){var o=n.elements,s=e.elements,r=t.elements,a=s[0],l=s[1],h=s[2];o[0]=a+i*(r[0]-a),o[1]=l+i*(r[1]-l),o[2]=h+i*(r[2]-h)},e.transformV3ToV3=function(t,i,n){var o=e._tempVector4;e.transformV3ToV4(t,i,o);var s=o.elements,r=n.elements;r[0]=s[0],r[1]=s[1],r[2]=s[2]},e.transformV3ToV4=function(e,t,i){var n=e.elements,o=n[0],s=n[1],r=n[2],a=t.elements,l=i.elements;l[0]=o*a[0]+s*a[4]+r*a[8]+a[12],l[1]=o*a[1]+s*a[5]+r*a[9]+a[13],l[2]=o*a[2]+s*a[6]+r*a[10]+a[14],l[3]=o*a[3]+s*a[7]+r*a[11]+a[15]},e.TransformNormal=function(e,t,i){var n=e.elements,o=n[0],s=n[1],r=n[2],a=t.elements,l=i.elements;l[0]=o*a[0]+s*a[4]+r*a[8],l[1]=o*a[1]+s*a[5]+r*a[9],l[2]=o*a[2]+s*a[6]+r*a[10]},e.transformCoordinate=function(t,i,n){var o=e._tempVector4.elements,s=t.elements,r=s[0],a=s[1],l=s[2],h=i.elements;o[0]=r*h[0]+a*h[4]+l*h[8]+h[12],o[1]=r*h[1]+a*h[5]+l*h[9]+h[13],o[2]=r*h[2]+a*h[6]+l*h[10]+h[14],o[3]=1/(r*h[3]+a*h[7]+l*h[11]+h[15]);var c=n.elements;c[0]=o[0]*o[3],c[1]=o[1]*o[3],c[2]=o[2]*o[3]},e.Clamp=function(e,t,i,n){var o=e.elements,s=o[0],r=o[1],a=o[2],l=t.elements,h=l[0],c=l[1],u=l[2],d=i.elements,p=d[0],f=d[1],_=d[2],m=n.elements;s=s>p?p:s,s=h>s?h:s,r=r>f?f:r,r=c>r?c:r,a=a>_?_:a,a=u>a?u:a,m[0]=s,m[1]=r,m[2]=a},e.add=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=o[0]+s[0],n[1]=o[1]+s[1],n[2]=o[2]+s[2]},e.subtract=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=o[0]-s[0],n[1]=o[1]-s[1],n[2]=o[2]-s[2]},e.cross=function(e,t,i){var n=e.elements,o=t.elements,s=i.elements,r=n[0],a=n[1],l=n[2],h=o[0],c=o[1],u=o[2];s[0]=a*u-l*c,s[1]=l*h-r*u,s[2]=r*c-a*h},e.dot=function(e,t){var i=e.elements,n=t.elements,o=i[0]*n[0]+i[1]*n[1]+i[2]*n[2];return o},e.equals=function(e,t){var i=e.elements,n=t.elements;return ja.nearEqual(Math.abs(i[0]),Math.abs(n[0]))&&ja.nearEqual(Math.abs(i[1]),Math.abs(n[1]))&&ja.nearEqual(Math.abs(i[2]),Math.abs(n[2]))},e.ZERO=new e(0,0,0),e.ONE=new e(1,1,1),e.NegativeUnitX=new e(-1,0,0),e.UnitX=new e(1,0,0),e.UnitY=new e(0,1,0),e.UnitZ=new e(0,0,1),e.ForwardRH=new e(0,0,-1),e.ForwardLH=new e(0,0,1),e.Up=new e(0,1,0),e.NAN=new e(NaN,NaN,NaN),n(e,["_tempVector4",function(){return this._tempVector4=new el}]),e}(),al=function(){function e(){}return o(e,"laya.d3.math.Collision"),e.distancePlaneToPoint=function(e,t){var i=rl.dot(e.normal,t);return i-e.distance},e.distanceBoxToPoint=function(e,t){var i=e.min.elements,n=i[0],o=i[1],s=i[2],r=e.max.elements,a=r[0],l=r[1],h=r[2],c=t.elements,u=c[0],d=c[1],p=c[2],f=0;return n>u&&(f+=(n-u)*(n-u)),u>a&&(f+=(a-u)*(a-u)),o>d&&(f+=(o-d)*(o-d)),d>l&&(f+=(l-d)*(l-d)),s>p&&(f+=(s-p)*(s-p)),p>h&&(f+=(h-p)*(h-p)),Math.sqrt(f)},e.distanceBoxToBox=function(e,t){var i=e.min.elements,n=i[0],o=i[1],s=i[2],r=e.max.elements,a=r[0],l=r[1],h=r[2],c=t.min.elements,u=c[0],d=c[1],p=c[2],f=t.max.elements,_=f[0],m=f[1],g=f[2],v=0,y=NaN;return n>_?(y=n-_,v+=y*y):u>a&&(y=u-a,v+=y*y),o>m?(y=o-m,v+=y*y):d>l&&(y=d-l,v+=y*y),s>g?(y=s-g,v+=y*y):p>h&&(y=p-h,v+=y*y),Math.sqrt(v)},e.distanceSphereToPoint=function(e,t){var i=Math.sqrt(rl.distanceSquared(e.center,t));return i-=e.radius,Math.max(i,0)},e.distanceSphereToSphere=function(e,t){var i=Math.sqrt(rl.distanceSquared(e.center,t.center));return i-=e.radius+t.radius,Math.max(i,0)},e.intersectsRayAndTriangleRD=function(t,i,n,o,s){var r=t.origin,a=r.elements,l=a[0],h=a[1],c=a[2],u=t.direction,d=u.elements,p=d[0],f=d[1],_=d[2],m=i.elements,g=m[0],v=m[1],y=m[2],b=n.elements,E=b[0],x=b[1],S=b[2],w=o.elements,C=w[0],T=w[1],I=w[2],A=e._tempV30.elements,N=A[0],P=A[1],R=A[2];N=E-g,P=x-v,R=S-y;var L=e._tempV31.elements,O=L[0],M=L[1],D=L[2];O=C-g,M=T-v,D=I-y;var k=e._tempV32.elements,B=k[0],V=k[1],F=k[2];B=f*D-_*M,V=_*O-p*D,F=p*M-f*O;var G=N*B+P*V+R*F;if(ja.isZero(G))return s=0,!1;var H=1/G,U=e._tempV33.elements,z=U[0],W=U[1],Y=U[2];z=l-g,W=h-v,Y=c-y;var q=z*B+W*V+Y*F;if(q*=H,0>q||q>1)return s=0,!1;var K=e._tempV34.elements,X=K[0],Q=K[1],j=K[2];X=W*R-Y*P,Q=Y*N-z*R,j=z*P-W*N;var Z=p*X+f*Q+_*j;if(Z*=H,0>Z||q+Z>1)return s=0,!1;var J=O*X+M*Q+D*j;return J*=H,0>J?(s=0,!1):(s=J,!0)},e.intersectsRayAndTriangleRP=function(t,i,n,o,s){var r=NaN;return e.intersectsRayAndTriangleRD(t,i,n,o,r)?(rl.scale(t.direction,r,e._tempV30),rl.add(t.origin,e._tempV30,s),!0):(s=rl.ZERO,!1)},e.intersectsRayAndPoint=function(t,i){rl.subtract(t.origin,i,e._tempV30);var n=rl.dot(e._tempV30,t.direction),o=rl.dot(e._tempV30,e._tempV30)-ja.zeroTolerance;if(o>0&&n>0)return!1;var s=n*n-o;return!(0>s)},e.intersectsRayAndRay=function(t,i,n){var o=t.origin,s=o.elements,r=s[0],a=s[1],l=s[2],h=t.direction,c=h.elements,u=c[0],d=c[1],p=c[2],f=i.origin,_=f.elements,m=_[0],g=_[1],v=_[2],y=i.direction,b=y.elements,E=b[0],x=b[1],S=b[2];rl.cross(h,y,e._tempV30);var w=e._tempV30.elements,C=rl.scalarLengthSquared(e._tempV30);if(ja.isZero(C)&&ja.nearEqual(m,r)&&ja.nearEqual(g,a)&&ja.nearEqual(v,l))return rl.ZERO.cloneTo(n),!0;var T=m-r,I=g-a,A=v-l,N=E,P=x,R=S,L=w[0],O=w[1],M=w[2],D=T*P*M+I*R*L+A*N*O-T*R*O-I*N*M-A*P*L;N=u,P=d,R=p;var k=T*P*M+I*R*L+A*N*O-T*R*O-I*N*M-A*P*L,B=D/C,V=k/C;rl.scale(h,B,e._tempV30),rl.scale(y,V,e._tempV31),rl.add(o,e._tempV30,e._tempV32),rl.add(f,e._tempV31,e._tempV33);var F=e._tempV32.elements,G=e._tempV33.elements;return ja.nearEqual(G[0],F[0])&&ja.nearEqual(G[1],F[1])&&ja.nearEqual(G[2],F[2])?(e._tempV32.cloneTo(n),!0):(rl.ZERO.cloneTo(n),!1)},e.intersectsPlaneAndTriangle=function(t,i,n,o){var s=e.intersectsPlaneAndPoint(t,i),r=e.intersectsPlaneAndPoint(t,n),a=e.intersectsPlaneAndPoint(t,o);return s==il.PlaneIntersectionType_Front&&r==il.PlaneIntersectionType_Front&&a==il.PlaneIntersectionType_Front?il.PlaneIntersectionType_Front:s==il.PlaneIntersectionType_Back&&r==il.PlaneIntersectionType_Back&&a==il.PlaneIntersectionType_Back?il.PlaneIntersectionType_Back:il.PlaneIntersectionType_Intersecting},e.intersectsRayAndPlaneRD=function(e,t,i){var n=t.normal,o=rl.dot(n,e.direction);if(ja.isZero(o))return i=0,!1;var s=rl.dot(n,e.origin);return i=(-t.distance-s)/o,0>i?(i=0,!1):!0},e.intersectsRayAndPlaneRP=function(t,i,n){var o=NaN;return e.intersectsRayAndPlaneRD(t,i,o)?(rl.scale(t.direction,o,e._tempV30),rl.add(t.origin,e._tempV30,e._tempV31),n=e._tempV31,!0):(n=rl.ZERO,!1)},e.intersectsRayAndBoxRD=function(e,t){var i=e.origin.elements,n=i[0],o=i[1],s=i[2],r=e.direction.elements,a=r[0],l=r[1],h=r[2],c=t.min.elements,u=c[0],d=c[1],p=c[2],f=t.max.elements,_=f[0],m=f[1],g=f[2],v=0,y=ja.MaxValue;if(ja.isZero(a)){if(u>n||n>_)return-1}else{var b=1/a,E=(u-n)*b,x=(_-n)*b;if(E>x){var S=E;E=x,x=S}if(v=Math.max(E,v),y=Math.min(x,y),v>y)return-1}if(ja.isZero(l)){if(d>o||o>m)return-1}else{var w=1/l,C=(d-o)*w,T=(m-o)*w;if(C>T){var I=C;C=T,T=I}if(v=Math.max(C,v),y=Math.min(T,y),v>y)return-1}if(ja.isZero(h)){if(p>s||s>g)return-1}else{var A=1/h,N=(p-s)*A,P=(g-s)*A;if(N>P){var R=N;N=P,P=R}if(v=Math.max(N,v),y=Math.min(P,y),v>y)return-1}return v},e.intersectsRayAndBoxRP=function(t,i,n){var o=e.intersectsRayAndBoxRD(t,i);return-1===o?(rl.ZERO.cloneTo(n),o):(rl.scale(t.direction,o,e._tempV30),rl.add(t.origin,e._tempV30,e._tempV31),e._tempV31.cloneTo(n),o)},e.intersectsRayAndSphereRD=function(t,i){var n=i.radius;rl.subtract(t.origin,i.center,e._tempV30);var o=rl.dot(e._tempV30,t.direction),s=rl.dot(e._tempV30,e._tempV30)-n*n;if(s>0&&o>0)return-1;var r=o*o-s;if(0>r)return-1;var a=-o-Math.sqrt(r);return 0>a&&(a=0),a},e.intersectsRayAndSphereRP=function(t,i,n){var o=e.intersectsRayAndSphereRD(t,i);return-1===o?(rl.ZERO.cloneTo(n),o):(rl.scale(t.direction,o,e._tempV30),rl.add(t.origin,e._tempV30,e._tempV31),e._tempV31.cloneTo(n),o)},e.intersectsSphereAndTriangle=function(t,i,n,o){var s=t.center,r=t.radius;e.closestPointPointTriangle(s,i,n,o,e._tempV30),rl.subtract(e._tempV30,s,e._tempV31);var a=rl.dot(e._tempV31,e._tempV31);return r*r>=a},e.intersectsPlaneAndPoint=function(e,t){var i=rl.dot(e.normal,t)+e.distance;return i>0?il.PlaneIntersectionType_Front:0>i?il.PlaneIntersectionType_Back:il.PlaneIntersectionType_Intersecting},e.intersectsPlaneAndPlane=function(t,i){rl.cross(t.normal,i.normal,e._tempV30);var n=rl.dot(e._tempV30,e._tempV30);return!ja.isZero(n)},e.intersectsPlaneAndPlaneRL=function(t,i,n){var o=t.normal,s=i.normal;rl.cross(o,s,e._tempV34);var r=rl.dot(e._tempV34,e._tempV34);return ja.isZero(r)?!1:(rl.scale(s,t.distance,e._tempV30),rl.scale(o,i.distance,e._tempV31),rl.subtract(e._tempV30,e._tempV31,e._tempV32),rl.cross(e._tempV32,e._tempV34,e._tempV33),rl.normalize(e._tempV34,e._tempV34),n=new sl(e._tempV33,e._tempV34),!0)},e.intersectsPlaneAndBox=function(t,i){var n=t.distance,o=t.normal,s=o.elements,r=s[0],a=s[1],l=s[2],h=i.min.elements,c=h[0],u=h[1],d=h[2],p=i.max.elements,f=p[0],_=p[1],m=p[2];e._tempV30.elements[0]=r>0?c:f,e._tempV30.elements[1]=a>0?u:_,e._tempV30.elements[2]=l>0?d:m,e._tempV31.elements[0]=r>0?f:c,e._tempV31.elements[1]=a>0?_:u,e._tempV31.elements[2]=l>0?m:d;var g=rl.dot(o,e._tempV30);return g+n>0?il.PlaneIntersectionType_Front:(g=rl.dot(o,e._tempV31),0>g+n?il.PlaneIntersectionType_Back:il.PlaneIntersectionType_Intersecting)},e.intersectsPlaneAndSphere=function(e,t){var i=t.radius,n=rl.dot(e.normal,t.center)+e.distance;return n>i?il.PlaneIntersectionType_Front:-i>n?il.PlaneIntersectionType_Back:il.PlaneIntersectionType_Intersecting},e.intersectsBoxAndBox=function(e,t){var i=e.min.elements,n=e.max.elements,o=t.min.elements,s=t.max.elements;return i[0]>s[0]||o[0]>n[0]?!1:i[1]>s[1]||o[1]>n[1]?!1:!(i[2]>s[2]||o[2]>n[2])},e.intersectsBoxAndSphere=function(t,i){var n=i.center,o=i.radius;rl.Clamp(n,t.min,t.max,e._tempV30);var s=rl.distanceSquared(n,e._tempV30);return o*o>=s},e.intersectsSphereAndSphere=function(e,t){var i=e.radius+t.radius;return rl.distanceSquared(e.center,t.center)<=i*i},e.boxContainsPoint=function(e,t){var i=e.min.elements,n=e.max.elements,o=t.elements;return i[0]<=o[0]&&n[0]>=o[0]&&i[1]<=o[1]&&n[1]>=o[1]&&i[2]<=o[2]&&n[2]>=o[2]?1:0},e.boxContainsBox=function(e,t){var i=e.min.elements,n=i[0],o=i[1],s=i[2],r=e.max.elements,a=r[0],l=r[1],h=r[2],c=t.min.elements,u=c[0],d=c[1],p=c[2],f=t.max.elements,_=f[0],m=f[1],g=f[2];return u>a||n>_?0:d>l||o>m?0:p>h||s>g?0:u>=n&&_>=_&&d>=o&&l>=m&&p>=s&&h>=g?1:2},e.boxContainsSphere=function(t,i){var n=t.min,o=n.elements,s=o[0],r=o[1],a=o[2],l=t.max,h=l.elements,c=h[0],u=h[1],d=h[2],p=i.center,f=p.elements,_=f[0],m=f[1],g=f[2],v=i.radius;rl.Clamp(p,n,l,e._tempV30);var y=rl.distanceSquared(p,e._tempV30);return y>v*v?0:_>=s+v&&c-v>=_&&c-s>v&&m>=r+v&&u-v>=m&&u-r>v&&g>=a+v&&d-v>=g&&d-a>v?1:2},e.sphereContainsPoint=function(e,t){return rl.distanceSquared(t,e.center)<=e.radius*e.radius?1:0},e.sphereContainsTriangle=function(t,i,n,o){var s=e.sphereContainsPoint(t,i),r=e.sphereContainsPoint(t,n),a=e.sphereContainsPoint(t,o);return 1==s&&1==r&&1==a?1:e.intersectsSphereAndTriangle(t,i,n,o)?2:0},e.sphereContainsBox=function(t,i){var n=t.center,o=n.elements,s=o[0],r=o[1],a=o[2],l=t.radius,h=i.min,c=h.elements,u=c[0],d=c[1],p=c[2],f=i.max,_=f.elements,m=_[0],g=_[1],v=_[2],y=e._tempV30.elements,b=y[0],E=y[1],x=y[2];if(!e.intersectsBoxAndSphere(i,t))return 0;var S=l*l;return b=s-u,E=r-g,x=a-v,rl.scalarLengthSquared(e._tempV30)>S?2:(b=s-m,E=r-g,x=a-v,rl.scalarLengthSquared(e._tempV30)>S?2:(b=s-m,E=r-d,x=a-v,rl.scalarLengthSquared(e._tempV30)>S?2:(b=s-u,E=r-d,x=a-v,rl.scalarLengthSquared(e._tempV30)>S?2:(b=s-u,E=r-g,x=a-p,rl.scalarLengthSquared(e._tempV30)>S?2:(b=s-m,E=r-g,x=a-p,rl.scalarLengthSquared(e._tempV30)>S?2:(b=s-m,E=r-d,x=a-p,rl.scalarLengthSquared(e._tempV30)>S?2:(b=s-u,E=r-d,x=a-p,rl.scalarLengthSquared(e._tempV30)>S?2:1)))))))},e.sphereContainsSphere=function(e,t){var i=e.radius,n=t.radius,o=rl.distance(e.center,t.center);return o>i+n?0:o>i-n?2:1},e.closestPointPointTriangle=function(t,i,n,o,s){rl.subtract(n,i,e._tempV30),rl.subtract(o,i,e._tempV31),rl.subtract(t,i,e._tempV32),rl.subtract(t,n,e._tempV33),rl.subtract(t,o,e._tempV34);var r=rl.dot(e._tempV30,e._tempV32),a=rl.dot(e._tempV31,e._tempV32),l=rl.dot(e._tempV30,e._tempV33),h=rl.dot(e._tempV31,e._tempV33),c=rl.dot(e._tempV30,e._tempV34),u=rl.dot(e._tempV31,e._tempV34);if(0>=r&&0>=a)return void i.cloneTo(s);if(l>=0&&l>=h)return void n.cloneTo(s);var d=r*h-l*a;if(0>=d&&r>=0&&0>=l){var p=r/(r-l);return rl.scale(e._tempV30,p,s),void rl.add(i,s,s)}if(u>=0&&u>=c)return void o.cloneTo(s);var f=c*a-r*u;if(0>=f&&a>=0&&0>=u){var _=a/(a-u);return rl.scale(e._tempV31,_,s),void rl.add(i,s,s)}var m=l*u-c*h;if(0>=m&&h-l>=0&&c-u>=0){var g=(h-l)/(h-l+(c-u));return rl.subtract(o,n,s),rl.scale(s,g,s),void rl.add(n,s,s)}var v=1/(m+f+d),y=f*v,b=d*v;rl.scale(e._tempV30,y,e._tempV35),rl.scale(e._tempV31,b,e._tempV36),rl.add(e._tempV35,e._tempV36,s),rl.add(i,s,s)},e.closestPointPlanePoint=function(t,i,n){var o=t.normal,s=rl.dot(o,i)-t.distance;rl.scale(o,s,e._tempV30),rl.subtract(i,e._tempV30,n)},e.closestPointBoxPoint=function(t,i,n){rl.max(i,t.min,e._tempV30),rl.min(e._tempV30,t.max,n)},e.closestPointSpherePoint=function(e,t,i){var n=e.center;rl.subtract(t,n,i),rl.normalize(i,i),rl.scale(i,e.radius,i),rl.add(i,n,i)},e.closestPointSphereSphere=function(e,t,i){var n=e.center;rl.subtract(t.center,n,i),rl.normalize(i,i),rl.scale(i,e.radius,i),rl.add(i,n,i)},n(e,["_tempV30",function(){return this._tempV30=new rl},"_tempV31",function(){return this._tempV31=new rl},"_tempV32",function(){return this._tempV32=new rl},"_tempV33",function(){return this._tempV33=new rl},"_tempV34",function(){return this._tempV34=new rl},"_tempV35",function(){return this._tempV35=new rl},"_tempV36",function(){return this._tempV36=new rl}]),e}(),ll=function(){function e(t){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=t,this._near=new il(new rl),this._far=new il(new rl),this._left=new il(new rl),this._right=new il(new rl),this._top=new il(new rl),this._bottom=new il(new rl),e._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}o(e,"laya.d3.math.BoundFrustum");var t=e.prototype;return t.equalsBoundFrustum=function(e){return this._matrix.equalsOtherMatrix(e.matrix)},t.equalsObj=function(e){if(e instanceof laya.d3.math.BoundFrustum){var t=e;return this.equalsBoundFrustum(t)}return!1},t.getPlane=function(e){switch(e){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},t.getCorners=function(t){e._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(t[0]),e._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(t[1]),e._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(t[2]),e._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(t[3]),e._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(t[4]),e._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(t[5]),e._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(t[6]),e._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(t[7])},t.containsPoint=function(e){for(var t=il.PlaneIntersectionType_Front,i=il.PlaneIntersectionType_Front,n=0;6>n;n++){switch(n){case 0:i=al.intersectsPlaneAndPoint(this._near,e);break;case 1:i=al.intersectsPlaneAndPoint(this._far,e);break;case 2:i=al.intersectsPlaneAndPoint(this._left,e);break;case 3:i=al.intersectsPlaneAndPoint(this._right,e);break;case 4:i=al.intersectsPlaneAndPoint(this._top,e);break;case 5:i=al.intersectsPlaneAndPoint(this._bottom,e)}switch(i){case il.PlaneIntersectionType_Back:return 0;case il.PlaneIntersectionType_Intersecting:t=il.PlaneIntersectionType_Intersecting}}switch(t){case il.PlaneIntersectionType_Intersecting:return 2;default:return 1}},t.containsBoundBox=function(t){for(var i,n=e._tempV30,o=e._tempV31,s=1,r=0;6>r;r++){if(i=this.getPlane(r),this._getBoxToPlanePVertexNVertex(t,i.normal,n,o),al.intersectsPlaneAndPoint(i,n)===il.PlaneIntersectionType_Back)return 0;al.intersectsPlaneAndPoint(i,o)===il.PlaneIntersectionType_Back&&(s=2)}return s},t.containsBoundSphere=function(e){for(var t=il.PlaneIntersectionType_Front,i=il.PlaneIntersectionType_Front,n=0;6>n;n++){switch(n){case 0:i=al.intersectsPlaneAndSphere(this._near,e);break;case 1:i=al.intersectsPlaneAndSphere(this._far,e);break;case 2:i=al.intersectsPlaneAndSphere(this._left,e);break;case 3:i=al.intersectsPlaneAndSphere(this._right,e);break;case 4:i=al.intersectsPlaneAndSphere(this._top,e);break;case 5:i=al.intersectsPlaneAndSphere(this._bottom,e)}switch(i){case il.PlaneIntersectionType_Back:return 0;case il.PlaneIntersectionType_Intersecting:t=il.PlaneIntersectionType_Intersecting}}switch(t){case il.PlaneIntersectionType_Intersecting:return 2;default:return 1}},t._getBoxToPlanePVertexNVertex=function(e,t,i,n){var o=e.min,s=o.elements,r=e.max,a=r.elements,l=t.elements,h=l[0],c=l[1],u=l[2];o.cloneTo(i);var d=i.elements;h>=0&&(d[0]=a[0]),c>=0&&(d[1]=a[1]),u>=0&&(d[2]=a[2]),r.cloneTo(n);var p=n.elements;h>=0&&(p[0]=s[0]),c>=0&&(p[1]=s[1]),u>=0&&(p[2]=s[2])},s(0,t,"bottom",function(){return this._bottom}),s(0,t,"top",function(){return this._top}),s(0,t,"left",function(){return this._left}),s(0,t,"far",function(){return this._far}),s(0,t,"near",function(){return this._near}),s(0,t,"right",function(){return this._right}),s(0,t,"matrix",function(){return this._matrix},function(t){this._matrix=t,e._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),e._getPlanesFromMatrix=function(e,t,i,n,o,s,r){var a=e.elements,l=a[0],h=a[1],c=a[2],u=a[3],d=a[4],p=a[5],f=a[6],_=a[7],m=a[8],g=a[9],v=a[10],y=a[11],b=a[12],E=a[13],x=a[14],S=a[15],w=t.normal.elements;w[0]=u+c,w[1]=_+f,w[2]=y+v,t.distance=S+x,t.normalize();var C=i.normal.elements;C[0]=u-c,C[1]=_-f,C[2]=y-v,i.distance=S-x,i.normalize();var T=n.normal.elements;T[0]=u+l,T[1]=_+d,T[2]=y+m,n.distance=S+b,n.normalize();var I=o.normal.elements;I[0]=u-l,I[1]=_-d,I[2]=y-m,o.distance=S-b,o.normalize();var A=s.normal.elements;A[0]=u-h,A[1]=_-p,A[2]=y-g,s.distance=S-E,s.normalize();var N=r.normal.elements;N[0]=u+h,N[1]=_+p,N[2]=y+g,r.distance=S+E,r.normalize()},e._get3PlaneInterPoint=function(t,i,n){var o=t.normal,s=i.normal,r=n.normal;rl.cross(s,r,e._tempV30),rl.cross(r,o,e._tempV31),rl.cross(o,s,e._tempV32);var a=rl.dot(o,e._tempV30),l=rl.dot(s,e._tempV31),h=rl.dot(r,e._tempV32);rl.scale(e._tempV30,-t.distance/a,e._tempV33),rl.scale(e._tempV31,-i.distance/l,e._tempV34),rl.scale(e._tempV32,-n.distance/h,e._tempV35),rl.add(e._tempV33,e._tempV34,e._tempV36),rl.add(e._tempV35,e._tempV36,e._tempV37);var c=e._tempV37;return c},n(e,["_tempV30",function(){return this._tempV30=new rl},"_tempV31",function(){return this._tempV31=new rl},"_tempV32",function(){return this._tempV32=new rl},"_tempV33",function(){return this._tempV33=new rl},"_tempV34",function(){return this._tempV34=new rl},"_tempV35",function(){return this._tempV35=new rl},"_tempV36",function(){return this._tempV36=new rl},"_tempV37",function(){return this._tempV37=new rl}]),e}(),hl=function(){function e(e,t){this.center=null,this.radius=NaN,this.center=e,this.radius=t}o(e,"laya.d3.math.BoundSphere");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.toDefault=function(){this.center.toDefault(),this.radius=0},t.intersectsRayDistance=function(e){return al.intersectsRayAndSphereRD(e,this)},t.intersectsRayPoint=function(e,t){return al.intersectsRayAndSphereRP(e,this,t)},t.cloneTo=function(e){var t=e;this.center.cloneTo(t.center),t.radius=this.radius},t.clone=function(){var e=new this.constructor(new rl,new rl);return this.cloneTo(e),e},e.createFromSubPoints=function(t,i,n,o){if(null==t)throw new Error("points");if(0>i||i>=t.length)throw new Error("start"+i+"Must be in the range [0, "+(t.length-1)+"]");if(0>n||i+n>t.length)throw new Error("count"+n+"Must be in the range <= "+t.length+"}");var s=i+n,r=e._tempVector3;r.elements[0]=0,r.elements[1]=0,r.elements[2]=0;for(var a=i;s>a;++a)rl.add(t[a],r,r);var l=o.center;rl.scale(r,1/n,l);var h=0;for(a=i;s>a;++a){var c=rl.distanceSquared(l,t[a]);c>h&&(h=c)}o.radius=Math.sqrt(h)},e.createfromPoints=function(t,i){if(null==t)throw new Error("points");e.createFromSubPoints(t,0,t.length,i)},n(e,["_tempVector3",function(){return this._tempVector3=new rl}]),e}(),cl=function(){function e(e,t,i,n){this.elements=new Float32Array(4),void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),this.elements[0]=e,this.elements[1]=t,this.elements[2]=i,this.elements[3]=n}o(e,"laya.d3.math.Quaternion");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.scaling=function(e,t){var i=t.elements,n=this.elements;i[0]=n[0]*e,i[1]=n[1]*e,i[2]=n[2]*e,i[3]=n[3]*e},t.normalize=function(e){var t=e.elements,i=this.elements,n=i[0],o=i[1],s=i[2],r=i[3],a=n*n+o*o+s*s+r*r;a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=o*a,t[2]=s*a,t[3]=r*a)},t.length=function(){var e=this.elements,t=e[0],i=e[1],n=e[2],o=e[3];return Math.sqrt(t*t+i*i+n*n+o*o)},t.rotateX=function(e,t){var i=t.elements,n=this.elements;e*=.5;var o=n[0],s=n[1],r=n[2],a=n[3],l=Math.sin(e),h=Math.cos(e);i[0]=o*h+a*l,i[1]=s*h+r*l,i[2]=r*h-s*l,i[3]=a*h-o*l},t.rotateY=function(e,t){var i=t.elements,n=this.elements;e*=.5;var o=n[0],s=n[1],r=n[2],a=n[3],l=Math.sin(e),h=Math.cos(e);i[0]=o*h-r*l,i[1]=s*h+a*l,i[2]=r*h+o*l,i[3]=a*h-s*l},t.rotateZ=function(e,t){var i=t.elements,n=this.elements;e*=.5;var o=n[0],s=n[1],r=n[2],a=n[3],l=Math.sin(e),h=Math.cos(e);i[0]=o*h+s*l,i[1]=s*h-o*l,i[2]=r*h+a*l,i[3]=a*h-r*l},t.getYawPitchRoll=function(t){rl.transformQuat(rl.ForwardRH,this,e.TEMPVector31),rl.transformQuat(rl.Up,this,e.TEMPVector32);var i=e.TEMPVector32.elements;e.angleTo(rl.ZERO,e.TEMPVector31,e.TEMPVector33);var n=e.TEMPVector33.elements;n[0]==Math.PI/2?(n[1]=e.arcTanAngle(i[2],i[0]),n[2]=0):n[0]==-Math.PI/2?(n[1]=e.arcTanAngle(-i[2],-i[0]),n[2]=0):(ol.createRotationY(-n[1],e.TEMPMatrix0),ol.createRotationX(-n[0],e.TEMPMatrix1),rl.transformCoordinate(e.TEMPVector32,e.TEMPMatrix0,e.TEMPVector32),rl.transformCoordinate(e.TEMPVector32,e.TEMPMatrix1,e.TEMPVector32),n[2]=e.arcTanAngle(i[1],-i[0])),n[1]<=-Math.PI&&(n[1]=Math.PI),n[2]<=-Math.PI&&(n[2]=Math.PI),n[1]>=Math.PI&&n[2]>=Math.PI&&(n[1]=0,n[2]=0,n[0]=Math.PI-n[0]);var o=t.elements;o[0]=n[1],o[1]=n[0],o[2]=n[2]},t.invert=function(e){var t=e.elements,i=this.elements,n=i[0],o=i[1],s=i[2],r=i[3],a=n*n+o*o+s*s+r*r,l=a?1/a:0;t[0]=-n*l,t[1]=-o*l,t[2]=-s*l,t[3]=r*l},t.identity=function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=1},t.fromArray=function(e,t){void 0===t&&(t=0),this.elements[0]=e[t+0],this.elements[1]=e[t+1],this.elements[2]=e[t+2],this.elements[3]=e[t+3]},t.cloneTo=function(e){var t,i,n;if(i=this.elements,n=e.elements,i!==n)for(t=0;4>t;++t)n[t]=i[t]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},t.equals=function(e){var t=this.elements,i=e.elements;return ja.nearEqual(t[0],i[0])&&ja.nearEqual(t[1],i[1])&&ja.nearEqual(t[2],i[2])&&ja.nearEqual(t[3],i[3])},t.lengthSquared=function(){var e=this.elements[0],t=this.elements[1],i=this.elements[2],n=this.elements[3];return e*e+t*t+i*i+n*n},s(0,t,"w",function(){return this.elements[3]}),s(0,t,"z",function(){return this.elements[2]}),s(0,t,"y",function(){return this.elements[1]}),s(0,t,"x",function(){return this.elements[0]}),e.createFromYawPitchRoll=function(e,t,i,n){var o=.5*i,s=.5*t,r=.5*e,a=Math.sin(o),l=Math.cos(o),h=Math.sin(s),c=Math.cos(s),u=Math.sin(r),d=Math.cos(r),p=n.elements;p[0]=d*h*l+u*c*a,p[1]=u*c*l-d*h*a,p[2]=d*c*a-u*h*l,p[3]=d*c*l+u*h*a},e.multiply=function(e,t,i){var n=e.elements,o=t.elements,s=i.elements,r=n[0],a=n[1],l=n[2],h=n[3],c=o[0],u=o[1],d=o[2],p=o[3],f=a*d-l*u,_=l*c-r*d,m=r*u-a*c,g=r*c+a*u+l*d;s[0]=r*p+c*h+f,s[1]=a*p+u*h+_,s[2]=l*p+d*h+m,s[3]=h*p-g},e.arcTanAngle=function(e,t){return 0==e?1==t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):0>e?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0},e.angleTo=function(t,i,n){rl.subtract(i,t,e.TEMPVector30),rl.normalize(e.TEMPVector30,e.TEMPVector30),n.elements[0]=Math.asin(e.TEMPVector30.y),n.elements[1]=e.arcTanAngle(-e.TEMPVector30.z,-e.TEMPVector30.x)},e.createFromAxisAngle=function(e,t,i){var n=i.elements,o=e.elements;t=.5*t;var s=Math.sin(t);n[0]=s*o[0],n[1]=s*o[1],n[2]=s*o[2],n[3]=Math.cos(t)},e.createFromMatrix3x3=function(e,t){var i,n=t.elements,o=e.elements,s=o[0]+o[4]+o[8];if(s>0)i=Math.sqrt(s+1),n[3]=.5*i,i=.5/i,n[0]=(o[5]-o[7])*i,n[1]=(o[6]-o[2])*i,n[2]=(o[1]-o[3])*i;else{var r=0;o[4]>o[0]&&(r=1),o[8]>o[3*r+r]&&(r=2);var a=(r+1)%3,l=(r+2)%3;i=Math.sqrt(o[3*r+r]-o[3*a+a]-o[3*l+l]+1),n[r]=.5*i,i=.5/i,n[3]=(o[3*a+l]-o[3*l+a])*i,n[a]=(o[3*a+r]+o[3*r+a])*i,n[l]=(o[3*l+r]+o[3*r+l])*i}},e.createFromMatrix4x4=function(e,t){var i,n,o=e.elements,s=t.elements,r=o[0]+o[5]+o[10];r>0?(i=Math.sqrt(r+1),s[3]=.5*i,i=.5/i,s[0]=(o[6]-o[9])*i,s[1]=(o[8]-o[2])*i,s[2]=(o[1]-o[4])*i):o[0]>=o[5]&&o[0]>=o[10]?(i=Math.sqrt(1+o[0]-o[5]-o[10]),n=.5/i,s[0]=.5*i,s[1]=(o[1]+o[4])*n,s[2]=(o[2]+o[8])*n,s[3]=(o[6]-o[9])*n):o[5]>o[10]?(i=Math.sqrt(1+o[5]-o[0]-o[10]),n=.5/i,s[0]=(o[4]+o[1])*n,s[1]=.5*i,s[2]=(o[9]+o[6])*n,s[3]=(o[8]-o[2])*n):(i=Math.sqrt(1+o[10]-o[0]-o[5]),n=.5/i,s[0]=(o[8]+o[2])*n,s[1]=(o[9]+o[6])*n,s[2]=.5*i,s[3]=(o[1]-o[4])*n)},e.slerp=function(e,t,i,n){var o,s,r,a,l,h=e.elements,c=t.elements,u=n.elements,d=h[0],p=h[1],f=h[2],_=h[3],m=c[0],g=c[1],v=c[2],y=c[3];return s=d*m+p*g+f*v+_*y,0>s&&(s=-s,m=-m,g=-g,v=-v,y=-y),1-s>1e-6?(o=Math.acos(s),r=Math.sin(o),a=Math.sin((1-i)*o)/r,l=Math.sin(i*o)/r):(a=1-i,l=i),u[0]=a*d+l*m,u[1]=a*p+l*g,u[2]=a*f+l*v,u[3]=a*_+l*y,u},e.lerp=function(e,t,i,n){var o=n.elements,s=e.elements,r=t.elements,a=s[0],l=s[1],h=s[2],c=s[3];o[0]=a+i*(r[0]-a),o[1]=l+i*(r[1]-l),o[2]=h+i*(r[2]-h),o[3]=c+i*(r[3]-c)},e.add=function(e,t,i){var n=i.elements,o=e.elements,s=t.elements;n[0]=o[0]+s[0],n[1]=o[1]+s[1],n[2]=o[2]+s[2],n[3]=o[3]+s[3]},e.dot=function(e,t){var i=e.elements,n=t.elements;return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]+i[3]*n[3]},e.rotationLookAt=function(t,i,n){e.lookAt(rl.ZERO,t,i,n)},e.lookAt=function(t,i,n,o){Ja.lookAt(t,i,n,e._tempMatrix3x3),e.rotationMatrix(e._tempMatrix3x3,o)},e.invert=function(e,t){var i=e.elements,n=t.elements,o=e.lengthSquared();ja.isZero(o)||(o=1/o,n[0]=-i[0]*o,n[1]=-i[1]*o,n[2]=-i[2]*o,n[3]=i[3]*o)},e.rotationMatrix=function(e,t){var i=e.elements,n=i[0],o=i[1],s=i[2],r=i[3],a=i[4],l=i[5],h=i[6],c=i[7],u=i[8],d=t.elements,p=NaN,f=NaN,_=n+a+u;_>0?(p=Math.sqrt(_+1),d[3]=.5*p,p=.5/p,d[0]=(l-c)*p,d[1]=(h-s)*p,d[2]=(o-r)*p):n>=a&&n>=u?(p=Math.sqrt(1+n-a-u),f=.5/p,d[0]=.5*p,d[1]=(o+r)*f,d[2]=(s+h)*f,d[3]=(l-c)*f):a>u?(p=Math.sqrt(1+a-n-u),f=.5/p,d[0]=(r+o)*f,d[1]=.5*p,d[2]=(c+l)*f,d[3]=(h-s)*f):(p=Math.sqrt(1+u-n-a),f=.5/p,d[0]=(h+s)*f,d[1]=(c+l)*f,d[2]=.5*p,d[3]=(o-r)*f)},e.DEFAULT=new e,n(e,["TEMPVector30",function(){return this.TEMPVector30=new rl},"TEMPVector31",function(){return this.TEMPVector31=new rl},"TEMPVector32",function(){return this.TEMPVector32=new rl},"TEMPVector33",function(){return this.TEMPVector33=new rl},"TEMPMatrix0",function(){return this.TEMPMatrix0=new ol},"TEMPMatrix1",function(){return this.TEMPMatrix1=new ol},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new Ja},"NAN",function(){return this.NAN=new e(NaN,NaN,NaN,NaN)}]),e}(),ul=function(){function e(e,t){this.elements=new Float32Array(2),void 0===e&&(e=0),void 0===t&&(t=0);var i=this.elements;i[0]=e,i[1]=t}o(e,"laya.d3.math.Vector2");var t=e.prototype;return i.imps(t,{"laya.d3.core.IClone":!0}),t.fromArray=function(e,t){void 0===t&&(t=0),this.elements[0]=e[t+0],this.elements[1]=e[t+1]},t.cloneTo=function(e){var t=e,i=t.elements,n=this.elements;i[0]=n[0],i[1]=n[1]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,t,"y",function(){return this.elements[1]},function(e){this.elements[1]=e}),s(0,t,"x",function(){return this.elements[0]},function(e){this.elements[0]=e}),e.scale=function(e,t,i){var n=i.elements,o=e.elements;n[0]=o[0]*t,n[1]=o[1]*t},n(e,["ZERO",function(){return this.ZERO=new e(0,0)},"ONE",function(){return this.ONE=new e(1,1)}]),e}(),dl=function(){function e(){this.alphaMap=null,this.detailID=null,this.normalMap=null}return o(e,"laya.d3.terrain.unit.ChunkInfo"),e}(),pl=function(){function e(){this.ambientColor=null,this.diffuseColor=null,this.specularColor=null}return o(e,"laya.d3.terrain.unit.MaterialInfo"),e}(),fl=function(){function e(){this.diffuseTexture=null,this.normalTexture=null,this.scale=null,this.offset=null}return o(e,"laya.d3.terrain.unit.DetailTextureInfo"),e}(),_l=function(){function e(){this._boundingSphere=null,this._boundingBox=null,this._sizeOfY=null,this._currentLODLevel=0,this._lastDistanceToEye=NaN,this._originalBoundingSphere=null,this._originalBoundingBox=null,this._originalBoundingBoxCorners=null,this._bUseStrip=!1,this._gridSize=NaN,this._beginGridX=0,this._beginGridZ=0,this._LODError=null,e.__init__(),this._currentLODLevel=0}o(e,"laya.d3.terrain.TerrainLeaf");var t=e.prototype;return t.calcVertextNorml=function(t,i,n,o,s,r){var a=0,l=0;l=-1*e.getHeightFromTerrainHeightData(t-1,i-1,n,o,s),l+=-1*e.getHeightFromTerrainHeightData(t-1,i,n,o,s),l+=-1*e.getHeightFromTerrainHeightData(t-1,i+1,n,o,s),l+=1*e.getHeightFromTerrainHeightData(t+1,i-1,n,o,s),l+=1*e.getHeightFromTerrainHeightData(t+1,i,n,o,s),l+=1*e.getHeightFromTerrainHeightData(t+1,i+1,n,o,s),a=-1*e.getHeightFromTerrainHeightData(t-1,i-1,n,o,s),a+=-1*e.getHeightFromTerrainHeightData(t,i-1,n,o,s),a+=-1*e.getHeightFromTerrainHeightData(t+1,i-1,n,o,s),a+=1*e.getHeightFromTerrainHeightData(t-1,i+1,n,o,s),a+=1*e.getHeightFromTerrainHeightData(t,i+1,n,o,s),a+=1*e.getHeightFromTerrainHeightData(t+1,i+1,n,o,s),
r.x=-l,r.y=6,r.z=-a,rl.normalize(r,r)},t.calcVertextNormlUV=function(e,t,i,n,o){o.x=e/i,o.y=t/n,o.z=t/n},t.calcVertextBuffer=function(t,i,n,o,s,r,a,l,h,c,u,d){if(1==d&&!e.__ADAPT_MATRIX__){e.__ADAPT_MATRIX__=new ol;var p=new ol;ol.createRotationY(Math.PI,e.__ADAPT_MATRIX__),ol.createTranslate(new rl(0,0,(u-1)*s),p),ol.multiply(p,e.__ADAPT_MATRIX__,e.__ADAPT_MATRIX__),e.__ADAPT_MATRIX_INV__=new ol,e.__ADAPT_MATRIX__.invert(e.__ADAPT_MATRIX_INV__)}this._gridSize=s,this._beginGridX=t*e.CHUNK_GRID_NUM+n,this._beginGridZ=i*e.CHUNK_GRID_NUM+o;for(var f=a*l,_=2147483647,m=-2147483648,g=new rl,v=0,y=e.LEAF_GRID_NUM+1;y>v;v++)for(var b=0,E=e.LEAF_GRID_NUM+1;E>b;b++)e.__VECTOR3__.x=(this._beginGridX+b)*this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+v)*this._gridSize,e.__VECTOR3__.y=h[(this._beginGridZ+v)*c+(this._beginGridX+b)],_=e.__VECTOR3__.y<_?e.__VECTOR3__.y:_,m=e.__VECTOR3__.y>m?e.__VECTOR3__.y:m,e.__ADAPT_MATRIX__&&rl.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),r[f]=e.__VECTOR3__.x,f++,r[f]=e.__VECTOR3__.y,f++,r[f]=e.__VECTOR3__.z,f++,this.calcVertextNormlUV(this._beginGridX+b,this._beginGridZ+v,c,u,g),r[f]=g.x,f++,r[f]=g.y,f++,r[f]=g.z,f++,r[f]=(n+b)/e.CHUNK_GRID_NUM,f++,r[f]=(o+v)/e.CHUNK_GRID_NUM,f++,r[f]=this._beginGridX+b,f++,r[f]=this._beginGridZ+v,f++;this._sizeOfY=new ul(_-1,m+1),this.calcLODErrors(h,c,u),this.calcOriginalBoudingBoxAndSphere()},t.calcSkirtVertextBuffer=function(t,i,n,o,s,r,a,l,h,c,u){this._gridSize=s,this._beginGridX=t*e.CHUNK_GRID_NUM+n,this._beginGridZ=i*e.CHUNK_GRID_NUM+o;var d=a*l,p=0,f=0,_=e.LEAF_GRID_NUM+1,m=new rl,g=0,v=0;for(p=0;2>p;p++)for(f=0;_>f;f++)e.__VECTOR3__.x=(this._beginGridX+f)*this._gridSize,e.__VECTOR3__.y=1==p?h[this._beginGridZ*c+(this._beginGridX+f)]:-this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+0)*this._gridSize,e.__ADAPT_MATRIX__&&rl.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),r[d]=e.__VECTOR3__.x,d++,r[d]=e.__VECTOR3__.y,d++,r[d]=e.__VECTOR3__.z,d++,g=0==p?this._beginGridZ-1:this._beginGridZ,this.calcVertextNormlUV(this._beginGridX+f,g,c,u,m),r[d]=m.x,d++,r[d]=m.y,d++,r[d]=m.z,d++,r[d]=(n+f)/e.CHUNK_GRID_NUM,d++,r[d]=(o+0)/e.CHUNK_GRID_NUM,d++,r[d]=this._beginGridX+f,d++,r[d]=g,d++;for(p=0;2>p;p++)for(f=0;_>f;f++)e.__VECTOR3__.x=(this._beginGridX+f)*this._gridSize,e.__VECTOR3__.y=0==p?h[(this._beginGridZ+e.LEAF_GRID_NUM)*c+(this._beginGridX+f)]:-this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+e.LEAF_GRID_NUM)*this._gridSize,e.__ADAPT_MATRIX__&&rl.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),r[d]=e.__VECTOR3__.x,d++,r[d]=e.__VECTOR3__.y,d++,r[d]=e.__VECTOR3__.z,d++,g=0==p?this._beginGridZ+e.LEAF_GRID_NUM:this._beginGridZ+e.LEAF_GRID_NUM+1,this.calcVertextNormlUV(this._beginGridX+f,g,c,u,m),r[d]=m.x,d++,r[d]=m.y,d++,r[d]=m.z,d++,r[d]=(n+f)/e.CHUNK_GRID_NUM,d++,r[d]=(o+e.LEAF_GRID_NUM)/e.CHUNK_GRID_NUM,d++,r[d]=this._beginGridX+f,d++,r[d]=g,d++;for(p=0;2>p;p++)for(f=0;_>f;f++)e.__VECTOR3__.x=(this._beginGridX+0)*this._gridSize,e.__VECTOR3__.y=0==p?h[(this._beginGridZ+f)*c+(this._beginGridX+0)]:-this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+f)*this._gridSize,e.__ADAPT_MATRIX__&&rl.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),r[d]=e.__VECTOR3__.x,d++,r[d]=e.__VECTOR3__.y,d++,r[d]=e.__VECTOR3__.z,d++,v=0==p?this._beginGridX:this._beginGridX-1,this.calcVertextNormlUV(v,this._beginGridZ+f,c,u,m),r[d]=m.x,d++,r[d]=m.y,d++,r[d]=m.z,d++,r[d]=(n+0)/e.CHUNK_GRID_NUM,d++,r[d]=(o+f)/e.CHUNK_GRID_NUM,d++,r[d]=v,d++,r[d]=this._beginGridZ+f,d++;for(p=0;2>p;p++)for(f=0;_>f;f++)e.__VECTOR3__.x=(this._beginGridX+e.LEAF_GRID_NUM)*this._gridSize,e.__VECTOR3__.y=1==p?h[(this._beginGridZ+f)*c+(this._beginGridX+e.LEAF_GRID_NUM)]:-this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+f)*this._gridSize,e.__ADAPT_MATRIX__&&rl.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),r[d]=e.__VECTOR3__.x,d++,r[d]=e.__VECTOR3__.y,d++,r[d]=e.__VECTOR3__.z,d++,v=0==p?this._beginGridX+e.LEAF_GRID_NUM+1:this._beginGridX+e.LEAF_GRID_NUM,this.calcVertextNormlUV(v,this._beginGridZ+f,c,u,m),r[d]=m.x,d++,r[d]=m.y,d++,r[d]=m.z,d++,r[d]=(n+e.LEAF_GRID_NUM)/e.CHUNK_GRID_NUM,d++,r[d]=(o+f)/e.CHUNK_GRID_NUM,d++,r[d]=v,d++,r[d]=this._beginGridZ+f,d++},t.calcOriginalBoudingBoxAndSphere=function(){var t=new rl(this._beginGridX*this._gridSize,this._sizeOfY.x,this._beginGridZ*this._gridSize),i=new rl((this._beginGridX+e.LEAF_GRID_NUM)*this._gridSize,this._sizeOfY.y,(this._beginGridZ+e.LEAF_GRID_NUM)*this._gridSize);e.__ADAPT_MATRIX__&&(rl.transformV3ToV3(t,e.__ADAPT_MATRIX__,t),rl.transformV3ToV3(i,e.__ADAPT_MATRIX__,i)),this._originalBoundingBox=new nl(t,i);var n=new rl;rl.subtract(i,t,n),rl.scale(n,.5,n);var o=new rl;rl.add(t,n,o),this._originalBoundingSphere=new hl(o,rl.scalarLength(n)),this._originalBoundingBoxCorners=r(8,null),this._originalBoundingBox.getCorners(this._originalBoundingBoxCorners),this._boundingBox=new nl(new rl(-.5,-.5,-.5),new rl(.5,.5,.5)),this._boundingSphere=new hl(new rl(0,0,0),1)},t.calcLeafBoudingBox=function(e){for(var t=0;8>t;t++)rl.transformCoordinate(this._originalBoundingBoxCorners[t],e,qu._tempBoundBoxCorners[t]);nl.createfromPoints(qu._tempBoundBoxCorners,this._boundingBox)},t.calcLeafBoudingSphere=function(e,t){rl.transformCoordinate(this._originalBoundingSphere.center,e,this._boundingSphere.center),this._boundingSphere.radius=this._originalBoundingSphere.radius*t},t.calcLODErrors=function(t,i,n){this._LODError=new Float32Array(e._maxLODLevel+1);for(var o=1,s=0,r=e._maxLODLevel+1;r>s;s++){for(var a=0,l=0,h=e.LEAF_GRID_NUM;h>l;l+=o)for(var c=0,u=e.LEAF_GRID_NUM;u>c;c+=o)for(var d=t[(this._beginGridZ+l)*i+(this._beginGridX+c)],p=t[(this._beginGridZ+l)*i+(this._beginGridX+c)+o],f=t[(this._beginGridZ+l+o)*i+(this._beginGridX+c)],_=t[(this._beginGridZ+l+o)*i+(this._beginGridX+c)+o],m=0;o>m;m++)for(var g=m/o,v=0;o>v;v++){var y=v/o,b=t[(this._beginGridZ+l+m)*i+(this._beginGridX+c)+v],E=1>=y+g?d+(p-d)*y+(f-d)*g:_+(f-_)*(1-y)+(p-_)*(1-g),x=Math.abs(E-b);a=Math.max(a,x)}o*=2,this._LODError[s]=a}},t.determineLod=function(t,i,n,o){var s=rl.distance(t,this._boundingSphere.center),r=e._maxLODLevel;if(!o){if(this._lastDistanceToEye==s)return this._currentLODLevel;this._lastDistanceToEye>s&&(r=this._currentLODLevel)}for(var a=r;a>=1;a--)if(vw.LOD_DISTANCE_FACTOR*this._LODError[a]/s*i<n){this._currentLODLevel=a;break}return this._lastDistanceToEye=s,this._currentLODLevel},e.__init__=function(){if(!e._bInit){var t=e.CHUNK_GRID_NUM/e.LEAF_GRID_NUM*(e.CHUNK_GRID_NUM/e.LEAF_GRID_NUM);e._planeLODIndex=r(t);var i=0,n=0,o=0,s=0,a=0,l=0,h=null,c=null;for(i=0;t>i;i++)e._planeLODIndex[i]=new Array(e._maxLODLevel+1);for(i=0,s=e._maxLODLevel+1;s>i;i++)e._planeLODIndex[0][i]=e.calcPlaneLODIndex(i);for(i=1;t>i;i++)for(l=i*e.LEAF_PLANE_VERTEXT_COUNT,n=0,a=e._maxLODLevel+1;a>n;n++){for(h=e._planeLODIndex[0][n],c=new Uint16Array(h.length),o=0;o<h.length;o++)c[o]=h[o]+l;e._planeLODIndex[i][n]=c}for(e._skirtLODIndex=r(t),i=0;t>i;i++)e._skirtLODIndex[i]=new Array(e._maxLODLevel+1);for(i=0,s=e._maxLODLevel+1;s>i;i++)e._skirtLODIndex[0][i]=e.calcSkirtLODIndex(i);for(i=1;t>i;i++)for(l=i*e.LEAF_SKIRT_VERTEXT_COUNT,n=0,a=e._maxLODLevel+1;a>n;n++){for(h=e._skirtLODIndex[0][n],c=new Uint16Array(h.length),o=0;o<h.length;o++)c[o]=h[o]+l;e._skirtLODIndex[i][n]=c}e._bInit=!0}},e.getPlaneLODIndex=function(t,i){return e._planeLODIndex[t][i]},e.getSkirtLODIndex=function(t,i){return e._skirtLODIndex[t][i]},e.calcPlaneLODIndex=function(t){t>e._maxLODLevel&&(t=e._maxLODLevel);var i=e.LEAF_GRID_NUM+1,n=0,o=null,s=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/Math.pow(2,t);o=new Uint16Array(s*s*6);for(var r=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/s,a=0;a<e.LEAF_GRID_NUM;a+=r)for(var l=0;l<e.LEAF_GRID_NUM;l+=r)o[n]=(a+r)*i+l,n++,o[n]=a*i+l,n++,o[n]=a*i+l+r,n++,o[n]=a*i+l+r,n++,o[n]=(a+r)*i+l+r,n++,o[n]=(a+r)*i+l,n++;return o},e.calcSkirtLODIndex=function(t){t>e._maxLODLevel&&(t=e._maxLODLevel);var i=e.CHUNK_GRID_NUM/e.LEAF_GRID_NUM*(e.CHUNK_GRID_NUM/e.LEAF_GRID_NUM)*e.LEAF_PLANE_VERTEXT_COUNT,n=e.LEAF_GRID_NUM+1,o=0,s=null,r=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/Math.pow(2,t);s=new Uint16Array(4*r*6);for(var a=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/r,l=0;4>l;l++){for(var h=0;h<e.LEAF_GRID_NUM;h+=a)s[o]=i+n+h,o++,s[o]=i+h,o++,s[o]=i+h+a,o++,s[o]=i+h+a,o++,s[o]=i+n+h+a,o++,s[o]=i+n+h,o++;i+=2*n}return s},e.getHeightFromTerrainHeightData=function(e,t,i,n,o){return e=0>e?0:e,e=e>=n?n-1:e,t=0>t?0:t,t=t>=o?o-1:t,i[t*n+e]},e.CHUNK_GRID_NUM=64,e.LEAF_GRID_NUM=32,e.__ADAPT_MATRIX__=null,e.__ADAPT_MATRIX_INV__=null,e._planeLODIndex=null,e._skirtLODIndex=null,e._bInit=!1,n(e,["LEAF_PLANE_VERTEXT_COUNT",function(){return this.LEAF_PLANE_VERTEXT_COUNT=(e.LEAF_GRID_NUM+1)*(e.LEAF_GRID_NUM+1)},"LEAF_SKIRT_VERTEXT_COUNT",function(){return this.LEAF_SKIRT_VERTEXT_COUNT=2*(e.LEAF_GRID_NUM+1)*4},"LEAF_VERTEXT_COUNT",function(){return this.LEAF_VERTEXT_COUNT=e.LEAF_PLANE_VERTEXT_COUNT+e.LEAF_SKIRT_VERTEXT_COUNT},"LEAF_PLANE_MAX_INDEX_COUNT",function(){return this.LEAF_PLANE_MAX_INDEX_COUNT=e.LEAF_GRID_NUM*e.LEAF_GRID_NUM*6},"LEAF_SKIRT_MAX_INDEX_COUNT",function(){return this.LEAF_SKIRT_MAX_INDEX_COUNT=4*e.LEAF_GRID_NUM*6},"LEAF_MAX_INDEX_COUNT",function(){return this.LEAF_MAX_INDEX_COUNT=e.LEAF_PLANE_MAX_INDEX_COUNT+e.LEAF_SKIRT_MAX_INDEX_COUNT},"__VECTOR3__",function(){return this.__VECTOR3__=new rl},"_maxLODLevel",function(){return this._maxLODLevel=Math.log2(e.LEAF_GRID_NUM)}]),e}(),ml=function(){function e(e){this.defineCounter=0,this.defines=null,e?(this.defineCounter=e.defineCounter,this.defines=e.defines.slice()):(this.defineCounter=0,this.defines=[])}o(e,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1");var t=e.prototype;return t.registerDefine=function(e){var t=Math.pow(2,this.defineCounter++);return this.defines[t]=e,t},e}(),gl=function(){function e(){this._data=null,this._data=[]}o(e,"laya.d3.shader.ValusArray");var t=e.prototype;return t.setValue=function(e,t){this._data[e]=t},s(0,t,"data",function(){return this._data}),e}(),vl=function(){function e(){}return o(e,"laya.d3.shader.ShaderInit3D"),e.__init__=function(){Id._globalRegDefine("HIGHPRECISION",Id.SHADERDEFINE_HIGHPRECISION),Id._globalRegDefine("FOG",Id.SHADERDEFINE_FOG),Id._globalRegDefine("DIRECTIONLIGHT",Id.SHADERDEFINE_DIRECTIONLIGHT),Id._globalRegDefine("POINTLIGHT",Id.SHADERDEFINE_POINTLIGHT),Id._globalRegDefine("SPOTLIGHT",Id.SHADERDEFINE_SPOTLIGHT),Id._globalRegDefine("UV",Id.SHADERDEFINE_UV0),Id._globalRegDefine("COLOR",Id.SHADERDEFINE_COLOR),Id._globalRegDefine("UV1",Id.SHADERDEFINE_UV1),Id._globalRegDefine("CASTSHADOW",Va.SHADERDEFINE_CAST_SHADOW),Id._globalRegDefine("SHADOWMAP_PSSM1",Va.SHADERDEFINE_SHADOW_PSSM1),Id._globalRegDefine("SHADOWMAP_PSSM2",Va.SHADERDEFINE_SHADOW_PSSM2),Id._globalRegDefine("SHADOWMAP_PSSM3",Va.SHADERDEFINE_SHADOW_PSSM3),Id._globalRegDefine("SHADOWMAP_PCF_NO",Va.SHADERDEFINE_SHADOW_PCF_NO),Id._globalRegDefine("SHADOWMAP_PCF1",Va.SHADERDEFINE_SHADOW_PCF1),Id._globalRegDefine("SHADOWMAP_PCF2",Va.SHADERDEFINE_SHADOW_PCF2),Id._globalRegDefine("SHADOWMAP_PCF3",Va.SHADERDEFINE_SHADOW_PCF3),Id._globalRegDefine("DEPTHFOG",Id.SAHDERDEFINE_DEPTHFOG),CS.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n	vec3 normalT = 2.0*normalMapSample - 1.0;\n\n	// Build orthonormal basis.\n	vec3 N = normalize(unitNormal);\n	vec3 T = normalize(tangent- dot(tangent, N)*N);\n	vec3 B = cross(T, N);\n\n	mat3 TBN = mat3(T, B, N);\n\n	// Transform from tangent space to world space.\n	vec3 bumpedNormal = TBN*normalT;\n\n	return bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n	dif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n	amb=vec3(0.0);\n	spec=vec3(0.0);\n	vec3 lightVec=-normalize(dirLight.Direction);\n	\n	amb=matAmb*ambinentColor;\n	\n	float  diffuseFactor=dot(lightVec, normal);\n	\n	if(diffuseFactor>0.0)\n	{\n	   vec3 v = reflect(-lightVec, normal);\n	   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n	   \n	   dif = diffuseFactor * matDif * dirLight.Diffuse;\n	   spec = specFactor * matSpe.rgb;\n	}\n	\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n	dif=vec3(0.0);\n	amb=vec3(0.0);\n	spec=vec3(0.0);\n	vec3 lightVec = poiLight.Position - pos;\n		\n	float d = length(lightVec);\n	\n	if( d > poiLight.Range )\n		return;\n		\n	lightVec /= d; \n	\n	amb = matAmb*ambinentColor;	\n\n	float diffuseFactor = dot(lightVec, normal);\n\n	if( diffuseFactor > 0.0 )\n	{\n		vec3 v= reflect(-lightVec, normal);\n		float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n					\n		dif = diffuseFactor * matDif * poiLight.Diffuse;\n		spec = specFactor * matSpe.rgb;\n	}\n\n	float attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n	dif *= attenuate;\n	spec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n	amb = vec3(0.0);\n	dif =vec3(0.0);\n	spec= vec3(0.0);\n	vec3 lightVec = spoLight.Position - pos;\n		\n	float d = length(lightVec);\n	\n	if( d > spoLight.Range)\n		return;\n		\n	lightVec /= d; \n	\n	amb = matAmb*ambinentColor;	\n\n	float diffuseFactor = dot(lightVec, normal);\n\n	if(diffuseFactor > 0.0)\n	{\n		vec3 v= reflect(-lightVec, normal);\n		float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n					\n		dif = diffuseFactor * matDif * spoLight.Diffuse;\n		spec = specFactor * matSpe.rgb;\n	}\n	\n	float spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n	float attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n	amb *= spot;\n	dif *= attenuate;\n	spec*= attenuate;\n}\n\n"),CS.addInclude("Lighting.glsl","\nstruct DirectionLight\n{\n	vec3 Color;\n	vec3 Direction;\n};\n\nstruct PointLight\n{\n	vec3 Color;\n	vec3 Position;\n	float Range;\n};\n\nstruct SpotLight\n{\n	vec3 Color;\n	vec3 Position;\n	vec3 Direction;\n	float Spot;\n	float Range;\n};\n\n// U3D中使用衰减纹理,此函数模拟并非正确\n//float U3DAttenuation(in vec3 L,in float invLightRadius)\n//{\n//	float fRatio = clamp(length(L) * invLightRadius,0.0,1.0);\n//	fRatio *= fRatio;\n//	return 1.0 / (1.0 + 25.0 * fRatio)* clamp(4.0*(1.0 - fRatio),0.0,1.0); //fade to black as if 4 pixel texture\n//} \n\n// Same as Just Cause 2 and Crysis 2 (you can read GPU Pro 1 book for more information)\nfloat BasicAttenuation(in vec3 L,in float invLightRadius)\n{\n	vec3 distance = L * invLightRadius;\n	float attenuation = clamp(1.0 - dot(distance, distance),0.0,1.0); // Equals float attenuation = saturate(1.0f - dot(L, L) / (lightRadius *  lightRadius)); 	\n	return attenuation * attenuation;\n} \n\n// Inspired on http://fools.slindev.com/viewtopic.php?f=11&t=21&view=unread#unread	\nfloat NaturalAttenuation(in vec3 L,in float invLightRadius)\n{\n	float attenuationFactor = 30.0;\n	vec3 distance = L * invLightRadius;\n	float attenuation = dot(distance, distance); // Equals float attenuation = dot(L, L) / (lightRadius *  lightRadius);\n	attenuation = 1.0 / (attenuation * attenuationFactor + 1.0);\n	// Second we move down the function therewith it reaches zero at abscissa 1:\n	attenuationFactor = 1.0 / (attenuationFactor + 1.0); //attenuationFactor contains now the value we have to subtract\n	attenuation = max(attenuation - attenuationFactor, 0.0); // The max fixes a bug.\n	// Finally we expand the equation along the y-axis so that it starts with a function value of 1 again.\n	attenuation /= 1.0 - attenuationFactor;\n	return attenuation;\n} \n\nvoid LayaAirBlinnPhongLight (in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir,in vec3 lightColor, in vec3 lightVec,out vec3 diffuseColor,out vec3 specularColor)\n{\n    mediump vec3 h = normalize(viewDir-lightVec);\n    lowp float ln = max (0.0, dot (-lightVec,normal));\n    float nh = max (0.0, dot (h,normal));\n	diffuseColor=lightColor * ln;\n	specularColor=lightColor *specColor*pow (nh, specColorIntensity*128.0) * gloss;\n}\n\nvoid LayaAirBlinnPhongDiectionLight (in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in DirectionLight light,out vec3 diffuseColor,out vec3 specularColor)\n{\n	vec3 lightVec=normalize(light.Direction);\n	LayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,lightVec,diffuseColor,specularColor);\n}\n\nvoid LayaAirBlinnPhongPointLight (in vec3 pos,in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in PointLight light,out vec3 diffuseColor,out vec3 specularColor)\n{\n	vec3 lightVec =  pos-light.Position;\n	//if( length(lightVec) > light.Range )\n	//	return;\n	LayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,lightVec/length(lightVec),diffuseColor,specularColor);\n	float attenuate = BasicAttenuation(lightVec, 1.0/light.Range);\n	diffuseColor *= attenuate;\n	specularColor*= attenuate;\n}\n\nvoid LayaAirBlinnPhongSpotLight (in vec3 pos,in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in SpotLight light,out vec3 diffuseColor,out vec3 specularColor)\n{\n	vec3 lightVec =  pos-light.Position;\n	//if( length(lightVec) > light.Range )\n	//	return;\n	vec3 normalLightVec=lightVec/length(lightVec);\n	LayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,normalLightVec,diffuseColor,specularColor);\n	float spot = pow(max(dot(normalLightVec, normalize(light.Direction)), 0.0), light.Spot);\n	float attenuate = spot*BasicAttenuation(lightVec, 1.0/light.Range);\n	diffuseColor *= attenuate;\n	specularColor*= attenuate;\n}\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent,vec3 binormal)\n{\n	vec3 normalT =vec3(2.0*normalMapSample.x - 1.0,1.0-2.0*normalMapSample.y,2.0*normalMapSample.z - 1.0);\n	\n	// Build orthonormal basis.\n	vec3 N = normalize(unitNormal);\n	vec3 T = normalize(tangent);\n	vec3 B = normalize(binormal);\n	mat3 TBN = mat3(T, B, N);\n	\n	// Transform from tangent space to world space.\n	vec3 bumpedNormal = TBN*normalT;\n\n	return bumpedNormal;\n}\n\n\n"),CS.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2	  u_shadowPCFoffset;\nuniform vec3     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n	const vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n	const vec4 bitMask	= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n	vec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n	res -= res.xxyz * bitMask;\n	return res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n	const vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n	float depth = dot(rgbaDepth, bitShift);\n	return depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n	vec2 texelpos =texcoord / invsize;\n	vec2 lerps = fract( texelpos );\n	float sourcevals[4];\n	sourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n	sourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n	sourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n	sourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n	return mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec3 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n	float value = 1.0;\n	int nPSNum = int(posViewZ>pssmDistance.x);\n	nPSNum += int(posViewZ>pssmDistance.y);\n	nPSNum += int(posViewZ>pssmDistance.z);\n	//真SB,webgl不支持在PS中直接访问数组\n	mat4 lightVP;\n	if( nPSNum == 0 )\n	{\n		lightVP = lightShadowVP[1];\n	}\n	else if( nPSNum == 1 )\n	{\n		lightVP = lightShadowVP[2];\n	}\n	else if( nPSNum == 2 )\n	{\n		lightVP = lightShadowVP[3];\n	}\n	vec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n	//为了效率，在CPU计算/2.0 + 0.5\n	//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n	vec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n	float fMyZ = vText.z - zBias;\n	/*\n	bvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n	bool bInFrustum = all( bInFrustumVec );\n	bvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n	bool bFrustumTest = all( bFrustumTestVec );\n	if ( bFrustumTest ) \n	*/\n	if( fMyZ <= 1.0 )\n	{\n		float zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n		if ( nPSNum == 0 )\n		{\n			value =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,	fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,	fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,	fMyZ );\n			value = value/4.0;\n		} \n		else if( nPSNum == 1 )\n		{\n			value = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 2 )\n		{\n			vec4 color = texture2D( shadowMap3,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n#endif\n#ifdef SHADOWMAP_PCF2\n		if ( nPSNum == 0 )\n		{\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 1 )\n		{\n			value = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 2 )\n		{\n			vec4 color = texture2D( shadowMap3,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n		if ( nPSNum == 0 )\n		{\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 1 )\n		{\n			vec4 color = texture2D( shadowMap2,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n		else if( nPSNum == 2 )\n		{\n			vec4 color = texture2D( shadowMap3,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n		vec4 color;\n		if ( nPSNum == 0 )\n		{\n			color = texture2D( shadowMap1,vText.xy );\n		}\n		else if( nPSNum == 1 )\n		{\n			color = texture2D( shadowMap2,vText.xy );\n		}\n		else if( nPSNum == 2 )\n		{\n			color = texture2D( shadowMap3,vText.xy );\n		}\n		zdepth = unpackDepth(color);\n		value = float(fMyZ < zdepth);\n#endif\n	}\n	return value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec3 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n	float value = 1.0;\n	int nPSNum = int(posViewZ>pssmDistance.x);\n	nPSNum += int(posViewZ>pssmDistance.y);\n	//真SB,webgl不支持在PS中直接访问数组\n	mat4 lightVP;\n	if( nPSNum == 0 )\n	{\n		lightVP = lightShadowVP[1];\n	}\n	else if( nPSNum == 1 )\n	{\n		lightVP = lightShadowVP[2];\n	}\n	vec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n	//为了效率，在CPU计算/2.0 + 0.5\n	//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n	vec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n	float fMyZ = vText.z - zBias;\n	/*\n	bvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n	bool bInFrustum = all( bInFrustumVec );\n	bvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n	bool bFrustumTest = all( bFrustumTestVec );\n	if ( bFrustumTest ) \n	*/\n	if( fMyZ <= 1.0 )\n	{\n		float zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n		if ( nPSNum == 0 )\n		{\n			value =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,	fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,	fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,	fMyZ );\n			value = value/4.0;\n		}\n		else if( nPSNum == 1 )\n		{\n			value = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n		}\n#endif\n#ifdef SHADOWMAP_PCF2\n		if ( nPSNum == 0 )\n		{\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 1 )\n		{\n			value = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n		}\n#endif\n#ifdef SHADOWMAP_PCF1\n		if ( nPSNum == 0 )\n		{\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 1 )\n		{\n			vec4 color = texture2D( shadowMap2,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n		vec4 color;\n		if ( nPSNum == 0 )\n		{\n			color = texture2D( shadowMap1,vText.xy );\n		}\n		else if( nPSNum == 1 )\n		{\n			color = texture2D( shadowMap2,vText.xy );\n		}\n		zdepth = unpackDepth(color);\n		value = float(fMyZ < zdepth);\n#endif\n	}\n	return value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec3 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n	float value = 1.0;\n	if( posViewZ < pssmDistance.x )\n	{\n		vec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n		float fMyZ = vText.z - zBias;\n		/*\n		bvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n		bool bInFrustum = all( bInFrustumVec );\n		bvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n		bool bFrustumTest = all( bFrustumTestVec );\n		*/\n		if ( fMyZ <= 1.0 ) \n		{\n			float zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n			value =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n			value = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2		\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO		\n			vec4 color = texture2D( shadowMap1,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n#endif\n		}\n	}\n	return value;\n}"),CS.addInclude("WaveFunction.glsl","\nuniform vec2 u_WaveInfoD[20];\nuniform vec4 u_WaveInfo[20];\n\nuniform float TEXWAVE_UV_SCALE ;//= 20.0; //每texwidth像素代表的实际距离\n/**\n	这里的计算都是\n*/\n\n/**\n* 计算一个波形\n*  开始计算的时候都按照z向上，最后输出的时候，颠倒一下。\n* @param tm {float} 毫秒\n*/\nvoid calcGerstnerWave(float curtm, vec3 pos, float deep, vec2 uvpos, out vec3 opos, out vec3 B, out vec3 T, out vec3 N, out float foamS){\n	float tm = curtm/1000.;\n	opos = pos;\n	vec3 wpos=vec3(0.);		//累加的位置\n	N=vec3(0.,0.,0.);	//输出的法线初始化一下\n	T=vec3(0.,0.,0.);\n	B=vec3(0.,0.,0.);\n	vec2 cD ;//= D;\n	//float deepAtt = max(0.,min(deep,1.0));\n	//A*=deepAtt; //TODO\n	\n	for( int i=0; i<4; i++){\n		cD = u_WaveInfoD[i];//vec2(wi.winfo[0],wi.winfo[1]);// wi.vDir;\n		float Q = u_WaveInfo[i].x;//wi.QorK;\n		float A = u_WaveInfo[i].y;//wi.A;\n		float W = u_WaveInfo[i].z;//wi.omega;\n		float P = u_WaveInfo[i].w;//wi.phi;\n		float dop = dot(cD,uvpos);\n		float c = cos(dop*W - tm*P);//TODO 优化\n		float s = sin(dop*W - tm*P);\n		float AWs = A*W*s;\n		float AWc = A*W*c;\n		float _QxyAWs = -Q*cD.x*cD.y*AWs;\n		\n		wpos += vec3(Q*A*cD.x*c,\n					Q*A*cD.y*c,\n					A*s);\n		N += vec3(-cD.x*AWc,\n				-cD.y*AWc,\n				Q*AWs);//记得最后1-\n		T += vec3(_QxyAWs,\n				Q*cD.y*cD.y*AWs,//记得1-\n				cD.y*AWc\n			);\n		B += vec3(Q*cD.x*cD.x*AWs,//记得1-\n				_QxyAWs,\n				cD.x*AWc\n			);\n		//float v1 = exp(-tan((dop*W - tm*P)/2.+1.07));//除2，+pi/2 这样正好能对齐\n#ifdef USE_FOAM		\n		float v1 = 0.5-sin((dop*W - tm*P)/1.+2.0)/2.;\n		foamS += pow(v1,9.)/4.;\n#endif\n	}\n	T.y=1.-T.y; B.x=1.-B.x;N.z=1.-N.z;\n	opos += vec3(wpos.x,wpos.z*min(deep/10.,1.),wpos.y);\n	//y和z交换一下。现在根据uv计算的位置，所以直接交换yz就行。其他情况下有问题么\n	T.xyz=T.xzy;\n	B.xyz=B.xzy;\n	N.xyz=N.xzy;\n}\n\n\nvoid calcWave(float curtm, vec2 uv, out vec3 B, out vec3 T, out vec3 N){\n	float tm = curtm/1000.;\n	N=vec3(0.,0.,0.);	//输出的法线初始化一下\n	vec2 uvpos = uv*TEXWAVE_UV_SCALE; //TODO 这个范围是什么 就是1？\n	uvpos.y*=-1.;\n	vec2 cD;// = D;\n	const int NumWaves = 4;\n	float scale = 1./float(NumWaves);\n	for( int i=0; i<NumWaves; i++){\n		cD = u_WaveInfoD[i];//vec2(wi.winfo[0],wi.winfo[1]);// wi.vDir;\n		float k = 1.5;//u_WaveInfo[i].x;//wi.QorK; TODO  不知道为什么，这个取u_WaveInfo[i].x，在mi3w上就会闪。测试发现实际值也传过来了，就是1.5\n		float A = u_WaveInfo[i].y;//wi.A;\n		float W = u_WaveInfo[i].z;//wi.omega;\n		float P = u_WaveInfo[i].w;//wi.phi;\n		\n		float dop = dot(cD,uvpos);\n		float c = cos(dop*W - tm*P);//TODO 优化\n		float s = sin(dop*W - tm*P);\n		/*\n		float AWs = A*W*s;\n		float AWc = A*W*c;\n		float _QxyAWs = -Q*cD.x*cD.y*AWs;\n		\n		N += vec3(-cD.x*AWc,\n				-cD.y*AWc,\n				Q*AWs);//记得最后1-\n		*/\n		float kWAc = scale*c;//k*W*A*c;  为了提高精度，这里只保留sin，cos部分，实际使用的时候再乘回来。\n		//float kWAc = k*W*A*c;  \n		N += vec3(\n			-kWAc*cD.x*pow((s+1.)/2.,k-1.),\n			-kWAc*cD.y*pow((s+1.)/2.,k-1.),\n			1.\n		);\n	}\n	//N.z=1.-N.z;\n	//y和z交换一下。现在根据uv计算的位置，所以直接交换yz就行。其他情况下有问题么\n	N.xyz=N.xzy;\n}\n"),CS.addInclude("BRDF.glsl","vec4 LayaAirBRDF(in vec3 diffuseColor, in vec3 specularColor, in float oneMinusReflectivity, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 gi)\n{\n	float perceptualRoughness = SmoothnessToPerceptualRoughness(smoothness);\n	vec3 halfDir = SafeNormalize(viewDir - lightDir);\n	\n	float nv = abs(dot(normal, viewDir));\n	\n	float nl = clamp(dot(normal,   -lightDir),  0.0, 1.0);\n	float nh = clamp(dot(normal,     halfDir),  0.0, 1.0);\n	float lv = clamp(dot(lightDir,   viewDir),  0.0, 1.0);\n	float lh = clamp(dot(lightDir,  -halfDir),  0.0, 1.0);\n	\n	float diffuseTerm = DisneyDiffuse(nv, nl, lh, perceptualRoughness) * nl;\n	\n	float roughness = PerceptualRoughnessToRoughness(perceptualRoughness);\n	\n	//#if UNITY_BRDF_GGX\n	float V = SmithJointGGXVisibilityTerm(nl, nv, roughness);\n	float D = GGXTerm(nh, roughness);\n	\n	float specularTerm = V * D * PI;\n	\n	specularTerm = sqrt(max(0.0001, specularTerm));\n	specularTerm = max(0.0, specularTerm * nl);\n	\n	vec4 color;\n	color.rgb = diffuseColor * (gi + lightColor * diffuseTerm) + specularTerm * lightColor * FresnelTerm (specularColor, lh);\n	\n	color.a = 1.0;\n	return color;\n}"),CS.addInclude("PBRUtils.glsl","struct DirectionLight\n{\n	vec3 Color;\n	vec3 Direction;\n};\n\nvec3 UnpackScaleNormal(in vec2 uv0)\n{\n	#ifdef NORMALTEXTURE\n		vec3 normalT;\n		vec4 normalMapSample = texture2D(u_NormalTexture, uv0);\n		normalT.x = 2.0 * normalMapSample.x - 1.0;\n		normalT.y = 1.0 - 2.0 * normalMapSample.y;\n		normalT.xy *= u_normalScale;\n		normalT.z = sqrt(1.0 - clamp(dot(normalT.xy, normalT.xy), 0.0, 1.0));\n		\n		vec3 T = normalize(v_Tangent);\n		vec3 B = normalize(v_Binormal);\n		vec3 N = normalize(v_Normal);\n		mat3 TBN = mat3(T, B, N);\n		\n		vec3 bumpedNormal = TBN * normalize(normalT);\n		return bumpedNormal;\n	#else\n		return normalize(v_Normal);\n	#endif\n}\n\nvec4 DielectricSpecularColor = vec4(0.220916301, 0.220916301, 0.220916301, 1.0 - 0.220916301);\n\nfloat PI = 3.14159265359;\n\nvec3 FresnelTerm (in vec3 F0, in float cosA)\n{\n	return F0 + (vec3(1.0) - F0) * pow(1.0 - cosA, 5.0);\n}\n\nfloat PerceptualRoughnessToRoughness(in float perceptualRoughness)\n{\n	return perceptualRoughness * perceptualRoughness;\n}\n\nfloat PerceptualRoughnessToSpecularPower(in float perceptualRoughness)\n{\n	float m = PerceptualRoughnessToRoughness(perceptualRoughness);\n	float sq = max(0.0001, m * m);\n	float n = (2.0 / sq) - 2.0;\n	n = max(n, 0.0001);\n	return n;\n}\n\nfloat RoughnessToPerceptualRoughness(in float roughness)\n{\n	return sqrt(roughness);\n}\n\nfloat SmoothnessToRoughness(in float smoothness)\n{\n	return (1.0 - smoothness) * (1.0 - smoothness);\n}\n\nfloat SmoothnessToPerceptualRoughness(in float smoothness)\n{\n	return (1.0 - smoothness);\n}\n\nvec3 SafeNormalize(in vec3 inVec)\n{\n	float dp3 = max(0.001,dot(inVec,inVec));\n	return inVec * (1.0 / sqrt(dp3));\n}\n\nfloat DisneyDiffuse(in float NdotV, in float NdotL, in float LdotH, in float perceptualRoughness)\n{\n	float fd90 = 0.5 + 2.0 * LdotH * LdotH * perceptualRoughness;\n	float lightScatter	= (1.0 + (fd90 - 1.0) * pow(1.0 - NdotL,5.0));\n	float viewScatter	= (1.0 + (fd90 - 1.0) * pow(1.0 - NdotV,5.0));\n\n	return lightScatter * viewScatter;\n}\n\nfloat SmithJointGGXVisibilityTerm (float NdotL, float NdotV, float roughness)\n{\n	float a = roughness;\n	float lambdaV = NdotL * (NdotV * (1.0 - a) + a);\n	float lambdaL = NdotV * (NdotL * (1.0 - a) + a);\n\n	return 0.5 / (lambdaV + lambdaL + 0.00001);\n}\n\nfloat GGXTerm (float NdotH, float roughness)\n{\n	float a2 = roughness * roughness;\n	float d = (NdotH * a2 - NdotH) * NdotH + 1.0;\n	return 0.31830988618 * a2 / (d * d + 0.0000001);\n}\n\nfloat OneMinusReflectivityFromMetallic(in float metallic)\n{\n	float oneMinusDielectricSpec = DielectricSpecularColor.a;\n	return oneMinusDielectricSpec - metallic * oneMinusDielectricSpec;\n}\n\nfloat SpecularStrength(vec3 specular)\n{\n    //(SHADER_TARGET < 30)return specular.r; \n    return max (max (specular.r, specular.g), specular.b);\n}\n\nvec3 DiffuseAndSpecularFromMetallic(in vec3 diffuseColor, in float metallic, out vec3 specularColor, out float oneMinusReflectivity)\n{\n	specularColor = mix(DielectricSpecularColor.rgb, diffuseColor, metallic);\n	oneMinusReflectivity = OneMinusReflectivityFromMetallic(metallic);\n	return diffuseColor * oneMinusReflectivity;\n}\n\nvec3 EnergyConservationBetweenDiffuseAndSpecular(in vec3 diffuseColor, in vec3 specularColor, out float oneMinusReflectivity)\n{\n	oneMinusReflectivity = 1.0 - SpecularStrength(specularColor);\n	return diffuseColor * oneMinusReflectivity;\n}\n\nvec4 Occlusion(in vec2 uv0){\n	#ifdef OCCLUSIONTEXTURE\n		vec4 occlusionTextureColor = texture2D(u_OcclusionTexture, uv0);\n		float occ = occlusionTextureColor.g;\n		float oneMinusT = 1.0 - u_occlusionStrength;\n		float lerpOneTo = oneMinusT + occ * u_occlusionStrength;\n		return occlusionTextureColor * lerpOneTo;\n	#else\n		return vec4(1.0);\n	#endif\n}\n\nvec2 ParallaxOffset(in vec3 viewDir){\n	#ifdef PARALLAXTEXTURE\n		float h = texture2D(u_ParallaxTexture, v_Texcoord0).g;\n		h = h * u_parallaxScale - u_parallaxScale / 2.0;\n		vec3 v = viewDir;\n		v.z += 0.42;\n		vec2 offset = h * (v.xy / v.z);\n		return v_Texcoord0 + offset;\n	#else\n		return v_Texcoord0;\n	#endif\n}\n\n"),
CS.addInclude("PBRStandardLighting.glsl",'#include "PBRUtils.glsl"\n#include "BRDF.glsl"\n\nvec4 PBRStandardLight(in vec3 diffuseColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 gi)\n{\n	float oneMinusReflectivity;\n	vec3 specularColor;\n	diffuseColor = DiffuseAndSpecularFromMetallic (diffuseColor, metallic, specularColor, oneMinusReflectivity);\n	\n	vec4 color = LayaAirBRDF(diffuseColor, specularColor, oneMinusReflectivity, smoothness, normal, viewDir, lightDir, lightColor, gi);\n	return color;\n}\n\nvec4 PBRStandardDiectionLight (in vec3 diffuseColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in DirectionLight light, in vec3 gi)\n{\n	vec3 lightVec = normalize(light.Direction);\n	return PBRStandardLight(diffuseColor, metallic, smoothness, normal, viewDir, lightVec, light.Color, gi);\n}\n\nvec2 MetallicGloss(in float diffuseTextureAlpha, in vec2 uv0)\n{\n	vec2 mg;\n	\n	#ifdef METALLICGLOSSTEXTURE\n		vec4 metallicGlossTextureColor = texture2D(u_MetallicGlossTexture, uv0);\n		#ifdef SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA\n			mg.r = metallicGlossTextureColor.r;\n			mg.g = diffuseTextureAlpha;\n		#else\n		    mg = metallicGlossTextureColor.ra;\n		#endif\n		mg.g *= u_smoothnessScale;\n	#else\n		mg.r = u_metallic;\n		#ifdef SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA\n			mg.g = diffuseTextureAlpha * u_smoothnessScale;\n		#else\n			mg.g = u_smoothness;\n		#endif\n	#endif\n	\n	return mg;\n}\n\n'),CS.addInclude("PBRSpecularLighting.glsl",'#include "PBRUtils.glsl"\n#include "BRDF.glsl"\n\nvec4 PBRSpecularLight(in vec3 diffuseColor, in vec3 specularColor, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 gi)\n{\n	float oneMinusReflectivity;\n	diffuseColor = EnergyConservationBetweenDiffuseAndSpecular (diffuseColor, specularColor, oneMinusReflectivity);\n	\n	vec4 color = LayaAirBRDF(diffuseColor, specularColor, oneMinusReflectivity, smoothness, normal, viewDir, lightDir, lightColor, gi);\n	return color;\n}\n\nvec4 PBRSpecularDiectionLight (in vec3 diffuseColor, in vec3 specularColor, in float smoothness, in vec3 normal, in vec3 viewDir, in DirectionLight light, in vec3 gi)\n{\n	vec3 lightVec = normalize(light.Direction);\n	return PBRSpecularLight(diffuseColor, specularColor, smoothness, normal, viewDir, lightVec, light.Color, gi);\n}\n\nvec4 SpecularGloss(float diffuseTextureAlpha, in vec2 uv0)\n{\n    vec4 sg;\n	\n	#ifdef SPECULARTEXTURE\n		vec4 specularTextureColor = texture2D(u_SpecularTexture, uv0);\n		#ifdef SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA\n			sg.rgb = specularTextureColor.rgb;\n			sg.a = diffuseTextureAlpha;\n		#else\n			sg = specularTextureColor;\n		#endif\n		sg.a *= u_smoothnessScale;\n	#else\n		sg.rgb = u_SpecularColor.rgb;\n		#ifdef SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA\n			sg.a = diffuseTextureAlpha * u_smoothnessScale;\n		#else\n			sg.a = u_smoothness;\n		#endif\n	#endif\n	\n    return sg;\n}\n\n');var e,t,i={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},n={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_ReflectTexture:[5,1],u_AlphaTestValue:[0,1],u_DiffuseColor:[6,1],u_MaterialSpecular:[8,1],u_Shininess:[9,1],u_MaterialReflect:[10,1],u_TilingOffset:[11,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Color":[4,4],"u_DirectionLight.Direction":[3,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Color":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Color":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]},o=CS.nameKey.add("BLINNPHONG");e='attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\n	attribute vec2 a_Texcoord0;\n	varying vec2 v_Texcoord0;\n#endif\n\n#if defined(LIGHTMAP)&&defined(UV1)\n	attribute vec2 a_Texcoord1;\n#endif\n\n#ifdef LIGHTMAP\n	uniform vec4 u_LightmapScaleOffset;\n	varying vec2 v_LightMapUV;\n#endif\n\n#ifdef COLOR\n	attribute vec4 a_Color;\n	varying vec4 v_Color;\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n	attribute vec3 a_Normal;\n	varying vec3 v_Normal; \n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n	uniform vec3 u_CameraPos;\n	varying vec3 v_ViewDir; \n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\n	attribute vec4 a_Tangent0;\n	varying vec3 v_Tangent;\n	varying vec3 v_Binormal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n	uniform mat4 u_WorldMat;\n	varying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n	#ifdef BONE\n		mat4 skinTransform=mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position=skinTransform*a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n	 \n	//TODO没考虑UV动画呢\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		v_Texcoord0=a_Texcoord0;\n	#endif\n		v_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n	#ifdef BONE\n		mat4 skinTransform=mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position=skinTransform*a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n		mat3 worldMat;\n		#ifdef BONE\n			worldMat=mat3(u_WorldMat*skinTransform);\n		#else\n			worldMat=mat3(u_WorldMat);\n		#endif  \n		v_Normal=worldMat*a_Normal;//TODO:法线可以用"魔法"矩阵\n		#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n			v_Tangent=worldMat*a_Tangent0.xyz;\n			v_Binormal=cross(v_Normal,v_Tangent)*a_Tangent0.w;\n		#endif\n	#endif\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n		#ifdef BONE\n			v_PositionWorld=(u_WorldMat*position).xyz;\n		#else\n			v_PositionWorld=(u_WorldMat*a_Position).xyz;\n		#endif\n	#endif\n	\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n		v_ViewDir=u_CameraPos-v_PositionWorld;\n	#endif\n\n	#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n		v_Texcoord0=a_Texcoord0;\n		#ifdef TILINGOFFSET\n			v_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n			v_Texcoord0=vec2(v_Texcoord0.x,1.0+v_Texcoord0.y);\n		#endif\n	#endif\n\n	#ifdef LIGHTMAP\n		#ifdef SCALEOFFSETLIGHTINGMAPUV\n			#ifdef UV1\n				v_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n			#else\n				v_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n			#endif \n		#else\n			#ifdef UV1\n				v_LightMapUV=a_Texcoord1;\n			#else\n				v_LightMapUV=a_Texcoord0;\n			#endif \n		#endif \n	#endif\n\n	#ifdef COLOR\n		v_Color=a_Color;\n	#endif\n\n	#ifdef RECEIVESHADOW\n		v_posViewZ = gl_Position.w;\n		#ifdef SHADOWMAP_PSSM1 \n			v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n		#endif\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW\n		main_castShadow();\n	#else\n		main_normal();\n	#endif\n}',t='#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#include "Lighting.glsl";\n\nuniform vec4 u_DiffuseColor;\n\n#ifdef COLOR\n	varying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n	varying vec3 v_ViewDir; \n#endif\n\n#ifdef ALPHATEST\n	uniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\n	uniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\n	uniform samplerCube u_ReflectTexture;\n	uniform vec3 u_MaterialReflect;\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n	varying vec2 v_Texcoord0;\n#endif\n\n#ifdef LIGHTMAP\n	varying vec2 v_LightMapUV;\n	uniform sampler2D u_LightMap;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	uniform vec3 u_MaterialSpecular;\n	uniform float u_Shininess;\n	#ifdef SPECULARMAP \n		uniform sampler2D u_SpecularTexture;\n	#endif\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	#ifdef ADDTIVEFOG\n	#else\n		uniform vec3 u_FogColor;\n	#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n	varying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n	uniform sampler2D u_NormalTexture;\n	varying vec3 v_Tangent;\n	varying vec3 v_Binormal;\n#endif\n\n#ifdef DIRECTIONLIGHT\n	uniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n	uniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n	uniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n	varying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n		uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n		varying vec4 v_lightMVPPos;\n	#endif\n#endif\n\nvoid main_castShadow()\n{\n	//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n	gl_FragColor=packDepth(v_posViewZ);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n		if( alpha < u_AlphaTestValue )\n		{\n			discard;\n		}\n	#endif\n}\nvoid main_normal()\n{\n	vec4 mainColor=u_DiffuseColor;\n	#ifdef DIFFUSEMAP\n		vec4 difTexColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n		mainColor=mainColor*difTexColor;\n	#endif \n	#ifdef COLOR\n		mainColor=mainColor*v_Color;\n	#endif \n    \n	#ifdef ALPHATEST\n		if(mainColor.a<u_AlphaTestValue)\n			discard;\n	#endif\n  \n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n		vec3 normal;\n		#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n			vec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n			normal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent,v_Binormal));\n		#else\n			normal = normalize(v_Normal);\n		#endif\n	#endif\n	\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		vec3 viewDir= normalize(v_ViewDir);\n		vec3 diffuse = vec3(0.0);\n		vec3 specular= vec3(0.0);\n		vec3 dif,spe;\n		#ifdef SPECULARMAP\n			vec3 gloss=texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n		#else\n			#ifdef DIFFUSEMAP\n				vec3 gloss=vec3(difTexColor.a);\n			#else\n				vec3 gloss=vec3(1.0);\n			#endif\n		#endif\n	#endif\n\n	\n	#ifdef DIRECTIONLIGHT\n		LayaAirBlinnPhongDiectionLight(u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_DirectionLight,dif,spe);\n		diffuse+=dif;\n		specular+=spe;\n	#endif\n \n	#ifdef POINTLIGHT\n		LayaAirBlinnPhongPointLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_PointLight,dif,spe);\n		diffuse+=dif;\n		specular+=spe;\n	#endif\n\n	#ifdef SPOTLIGHT\n		LayaAirBlinnPhongSpotLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_SpotLight,dif,spe);\n		diffuse+=dif;\n		specular+=spe;\n	#endif\n\n	\n	vec3 finalDiffuse;\n	#ifdef LIGHTMAP\n		finalDiffuse=texture2D(u_LightMap, v_LightMapUV).rgb*2.0;\n		//float exponent = texture2D(u_LightMap, v_LightMapUV).a;\n		//finalDiffuse = texture2D(u_LightMap, v_LightMapUV).rgb;\n		//float ratio = pow(2.0, exponent * 255.0 - (128.0 + 8.0));\n		//finalDiffuse = finalDiffuse * 255.0 * ratio;	\n		//finalDiffuse = sqrt(finalDiffuse);\n	#else\n		finalDiffuse=vec3(0.0);\n	#endif\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		finalDiffuse+=diffuse;\n	#endif\n\n	#ifdef RECEIVESHADOW\n		float shadowValue = 1.0;\n		#ifdef SHADOWMAP_PSSM3\n			shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif\n		#ifdef SHADOWMAP_PSSM2\n			shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif \n		#ifdef SHADOWMAP_PSSM1\n			shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n		#endif\n		gl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse)*shadowValue,mainColor.a);\n	#else\n		gl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse),mainColor.a);\n	#endif\n	\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		#ifdef RECEIVESHADOW\n			gl_FragColor.rgb+=specular*shadowValue;\n		#else\n			gl_FragColor.rgb+=specular;\n		#endif\n	#endif\n\n\n	#ifdef REFLECTMAP\n		vec3 incident = -viewDir;\n		vec3 reflectionVector = reflect(incident,normal);\n		vec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n		gl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n	#endif\n	  \n	#ifdef FOG\n		float lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\n		#ifdef ADDTIVEFOG\n			gl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n		#else\n			gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n		#endif\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW		\n		main_castShadow();\n	#else\n	  main_normal();\n	#endif  \n}\n\n';var s=Id.add(o,e,t,i,n);kS.SHADERDEFINE_DIFFUSEMAP=s.registerMaterialDefine("DIFFUSEMAP"),kS.SHADERDEFINE_NORMALMAP=s.registerMaterialDefine("NORMALMAP"),kS.SHADERDEFINE_SPECULARMAP=s.registerMaterialDefine("SPECULARMAP"),kS.SHADERDEFINE_REFLECTMAP=s.registerMaterialDefine("REFLECTMAP"),kS.SHADERDEFINE_TILINGOFFSET=s.registerMaterialDefine("TILINGOFFSET"),kS.SHADERDEFINE_ADDTIVEFOG=s.registerMaterialDefine("ADDTIVEFOG"),i={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},n={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var r=CS.nameKey.add("SIMPLE");e="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n	mat4 skinTransform=mat4(0.0);\n	skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n	skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n	skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n	skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n	vec4 position=skinTransform*a_Position;\n	gl_Position = u_MvpMatrix * position;\n#else\n	gl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n	v_Texcoord0=a_Texcoord0;\n#endif\n	v_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n	mat4 skinTransform=mat4(0.0);\n	skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n	skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n	skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n	skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n	vec4 position=skinTransform*a_Position;\n	gl_Position = u_MvpMatrix * position;\n#else\n	gl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n	mat3 worldMat;\n	#ifdef BONE\n		worldMat=mat3(u_WorldMat*skinTransform);\n	#else\n		worldMat=mat3(u_WorldMat);\n	#endif  \n	v_Normal=worldMat*a_Normal;\n	#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n		v_Tangent0=worldMat*a_Tangent0;\n	#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n	#ifdef BONE\n		v_PositionWorld=(u_WorldMat*position).xyz;\n	#else\n		v_PositionWorld=(u_WorldMat*a_Position).xyz;\n	#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n	v_Texcoord0=a_Texcoord0;\n	#ifdef TILINGOFFSET\n		v_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n		v_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n	#endif\n	#ifdef UVTRANSFORM\n		v_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n	#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n	#ifdef SCALEOFFSETLIGHTINGMAPUV\n		#ifdef UV1\n			v_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n		#else\n			v_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n		#endif \n	#else\n		#ifdef UV1\n			v_LightMapUV=a_Texcoord1;\n		#else\n			v_LightMapUV=a_Texcoord0;\n		#endif \n	#endif \n#endif\n\n#ifdef COLOR\n	v_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n	v_posViewZ = gl_Position.w;\n	#ifdef SHADOWMAP_PSSM1 \n		v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n	#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n	main_castShadow();\n#else\n	main_normal();\n#endif\n}",t='#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	#ifdef ADDTIVEFOG\n	#else\n		uniform vec3 u_FogColor;\n	#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n	uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n	varying vec4 v_lightMVPPos;\n	#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n	//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n	gl_FragColor=packDepth(v_posViewZ);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n		if( alpha < u_AlphaTestValue )\n		{\n			discard;\n		}\n	#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n	gl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n	gl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n	vec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n	gl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n	gl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n	if(gl_FragColor.a-u_AlphaTestValue<0.0)\n		discard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n	vec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n		vec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n		normal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n	#else\n		normal = normalize(v_Normal);\n    #endif\n#endif\n	\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	vec3 diffuse = vec3(0.0);\n	vec3 ambient = vec3(0.0);\n	vec3 specular= vec3(0.0);\n	vec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n	vec3 toEye;\n	#ifdef FOG\n		toEye=u_CameraPos-v_PositionWorld;\n		float toEyeLength=length(toEye);\n		toEye/=toEyeLength;\n	#else\n		toEye=normalize(u_CameraPos-v_PositionWorld);\n	#endif\n#endif\n	\n#ifdef DIRECTIONLIGHT\n	computeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n	computePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n	ComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n	float shadowValue = 1.0;\n	#ifdef SHADOWMAP_PSSM3\n		shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif\n	#ifdef SHADOWMAP_PSSM2\n		shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif \n	#ifdef SHADOWMAP_PSSM1\n		shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n	#endif\n#endif\n\n#ifdef AMBIENTMAP\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n	#else\n		#if defined(RECEIVESHADOW)\n			gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n		#else\n			gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n		#endif\n	#endif\n#endif\n\n#ifdef LIGHTMAP\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n	#else\n		#if defined(RECEIVESHADOW)\n			gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n		#else\n			gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n		#endif\n	#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n		specular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n	#ifdef RECEIVESHADOW\n		gl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n	#else\n		gl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n	#endif\n#endif\n  \n#ifdef REFLECTMAP\n	vec3 incident = -toEye;\n	vec3 reflectionVector = reflect(incident,normal);\n	vec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n	gl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n	float lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n	#ifdef ADDTIVEFOG\n		gl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n	#else\n		gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n	#endif\n#endif\n#ifdef DEPTHFOG\n	float lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n	gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW		\n	main_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',s=Id.add(r,e,t,i,n),MS.SHADERDEFINE_DIFFUSEMAP=s.registerMaterialDefine("DIFFUSEMAP"),MS.SHADERDEFINE_NORMALMAP=s.registerMaterialDefine("NORMALMAP"),MS.SHADERDEFINE_SPECULARMAP=s.registerMaterialDefine("SPECULARMAP"),MS.SHADERDEFINE_EMISSIVEMAP=s.registerMaterialDefine("EMISSIVEMAP"),MS.SHADERDEFINE_AMBIENTMAP=s.registerMaterialDefine("AMBIENTMAP"),MS.SHADERDEFINE_REFLECTMAP=s.registerMaterialDefine("REFLECTMAP"),MS.SHADERDEFINE_UVTRANSFORM=s.registerMaterialDefine("UVTRANSFORM"),MS.SHADERDEFINE_TILINGOFFSET=s.registerMaterialDefine("TILINGOFFSET"),MS.SHADERDEFINE_ADDTIVEFOG=s.registerMaterialDefine("ADDTIVEFOG"),i={a_Position:0,a_Color:1},n={u_MvpMatrix:[1,2]};var a=CS.nameKey.add("LINE");e="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n\n\nvoid main()\n{\n  gl_Position = u_MvpMatrix * a_Position;\n  v_Color=a_Color;\n}",t="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\n\nvoid main()\n{\n  gl_FragColor=v_Color; \n}\n\n",Id.add(a,e,t,i,n),i={a_position:0,a_normal:3,tangent:5,binormal:4,uv:2,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},n={u_Bones:[0,0],u_lodRect:[9,3],irrad_mat_red:[10,3],irrad_mat_green:[11,3],irrad_mat_blue:[12,3],u_hdrexposure:[13,3],u_aoObjPos:[14,1],texBaseColor:[1,1],texNormal:[2,1],texPbrInfo:[3,1],texPrefilterdEnv:[8,3],texHSNoise:[15,1],texPrefilterDiff:[7,3],u_AlphaTestValue:[0,1],texBRDFLUT:[4,1],u_UVAniAge:[5,1],u_roughness:[6,1],u_metaless:[7,1],u_UVMatrix:[8,1],u_UVAge:[9,1],modelMatrix:[0,2],mvp:[1,2],cameraPosition:[0,3],u_View:[1,3],u_Project:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var l=CS.nameKey.add("PBR");e="\nuniform mat4 modelMatrix;\n//uniform mat4 modelViewMatrix;\n//uniform mat4 projectionMatrix;\nuniform mat4 u_View;\nuniform mat4 u_Project;\nuniform mat4 mvp;\n//uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\n#ifdef HAS_TANGENT\nattribute vec3 tangent;\nattribute vec3 binormal;\n#endif\nattribute vec2 uv;\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\nvarying vec3 vLightDir;\nvarying vec3 vViewDir;\n#ifdef HAS_TANGENT\nvarying vec3 vWorldTangent;\nvarying vec3 vWorldBinormal;\n#endif\n\n#ifdef RECEIVESHADOW\nvarying float v_posViewZ;\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\nvoid main() {\n#ifdef BONE\n	mat4 skinTransform=mat4(0.0);\n	skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n	skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n	skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n	skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n	gl_Position = mvp*skinTransform*vec4(a_position,1.);\n	mat4 modelMat = modelMatrix*skinTransform;\n#else\n	gl_Position = mvp*vec4(a_position,1.);\n	mat4 modelMat = modelMatrix;\n#endif	\n	vWorldPos = modelMat*vec4(a_position,1.);\n\n#ifdef CASTSHADOW \n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		vUv = uv;\n	#endif	\n#else\n    vUv = uv;\n	vWorldNorm = normalize((modelMat*vec4(a_normal,0.0)).xyz);\n	#ifdef HAS_TANGENT\n	vWorldTangent = normalize((modelMat*vec4(tangent,0.0)).xyz);\n	vWorldBinormal = normalize((modelMat*vec4(binormal,0.0)).xyz);\n	#endif\n    \n    vViewDir = (vWorldPos.xyz-cameraPosition);//这个不能normalize。否则无法线性差值了\n#ifdef RECEIVESHADOW\n	v_posViewZ = gl_Position.z;\n	#ifdef SHADOWMAP_PSSM1 \n		v_lightMVPPos = u_lightShadowVP[0] * vWorldPos;\n	#endif\n#endif	\n#endif\n}\n",
t='//#version 300 es\n\nprecision highp float;\nprecision lowp int;\n\nconst float PI = 3.14159265358979323846264;\nconst float _2PI = 6.2831853071796;\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\n#ifdef HAS_TANGENT\nvarying vec3 vWorldTangent;\nvarying vec3 vWorldBinormal;\n#endif\nvarying vec3 vViewDir;\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\n//\nuniform sampler2D texBaseColor;\nuniform sampler2D texNormal;\n//预计算的贴图\nuniform sampler2D texPrefilterdEnv;\nuniform sampler2D texBRDFLUT;\nuniform sampler2D texPrefilterDiff;\n#ifdef HAS_PBRINFO\nuniform sampler2D texPbrInfo;   //Ao, Roughness, Metallic\n#endif\nuniform float u_hdrexposure;\nuniform float u_AlphaTestValue;\n\nuniform float u_roughness;\nuniform float u_metaless;\nconst float maxlv = 7.;	//现在只支持512分辨率的环境贴图\nconst int nmaxlv = 9;//\n							\nuniform mat4 irrad_mat_red;\nuniform mat4 irrad_mat_green;\nuniform mat4 irrad_mat_blue;							\n\nvec3 speccontrib = vec3(0.);\n\nconst float _maxu8 = 255.0;\nconst float _maxu16 = 65535.0;\nconst float _shift8 = 256.0;    //平移的话是*256而不是255\nvec2 _RGBAToU16(const in vec4 rgba){\n    return vec2((rgba.r*_maxu8+rgba.g*_maxu8*_shift8)/_maxu16, (rgba.b*_maxu8+rgba.a*_maxu8*_shift8)/_maxu16);\n}\nvec3 _RGBEToRGB( const in vec4 rgba ){\n    float f = pow(2.0, rgba.w * 255.0 - (128.0 + 8.0));\n    return rgba.rgb * (255.0 * f);\n}\n\nfloat saturate(float v){\n    return min(max(v,0.),1.);\n}\n\nvec4 tex2dLod(sampler2D tex, float u, float v, float lod){\n	vec2 uv = vec2(u,v);\n	uv+=mod(gl_FragCoord.xy-vec2(0.5),2.0)*vec2(128.,0.);\n	return texture2D(tex,uv,lod-16.);\n}\n\n/*\n* 对一个全景图进行采样。假设x轴指向中心。\n*/\nvec4 texPanorama(sampler2D tex, const in vec3 dir){\n	float envu = atan(dir.z,dir.x)/_2PI+0.5; 	\n	float envv = acos(dir.y)/PI;//(1.0-dir.y)/2.0;\n	return texture2D(tex,vec2(envu,envv));\n}\n\nvec4 texPanoramaLod(sampler2D tex, const in vec3 dir, float lod){\n	float envu = atan(dir.z,dir.x)/_2PI+0.5; 	\n	float envv = acos(dir.y)/PI;//(1.0-dir.y)/2.0;\n	return tex2dLod(tex,envu,envv,lod);\n}\n\n/*\n    计算sh光照。\n    使用level=2，所以需要9个系数。\n    https://cseweb.ucsd.edu/~ravir/papers/envmap/envmap.pdf\n*/\nfloat environment_exposure = 1.0;\nvec3 diff_sh9(vec3 dir){\n	vec4 shDir = vec4(dir.x,-dir.z,dir.y,1.0);\n  return max(vec3(0.0), vec3(\n	dot(shDir, irrad_mat_red * shDir),\n	dot(shDir, irrad_mat_green * shDir),\n	dot(shDir, irrad_mat_blue * shDir)\n	)) * environment_exposure;	\n}\n\n#ifdef HAS_TANGENT\nvec3 applyNormalTex( vec3 norm, vec3 surf_norm ) {\n    vec3 mapN = norm * 2.0 - 1.0;\n    //mapN.xy = normalScale * mapN.xy;\n    mat3 tsn = mat3( vWorldTangent, vWorldBinormal, surf_norm );\n    return normalize( tsn * mapN );\n}\n#endif\n\nvec4 pbrlight(vec3 normal, float rough, float NoV, vec3 R){\n    vec4 basecolor = texture2D(texBaseColor,vUv);\n	basecolor.rgb = pow(basecolor.rgb,vec3(2.2));\n	float metaless = 1.0; 	\n	const float ismetalinfov = (128./255.);\n	if(basecolor.a>=ismetalinfov){//这时候表示金属度\n		metaless = (basecolor.a-ismetalinfov)*2.;\n		basecolor.a = 1.0;\n	}else{\n		metaless = 0.;\n		basecolor.a = basecolor.a*2.0;\n	}\n	#ifdef FIX_METALESS\n	metaless = u_metaless;\n	#endif\n	#ifdef HAS_PBRINFO	\n	vec4 pbrinfo = texture2D(texPbrInfo, vUv);\n	metaless = pbrinfo.b;\n	rough = pbrinfo.g;\n	#endif\n    const vec3 nonmetalF0 =vec3(0.02);\n    vec3 F0 =  mix(nonmetalF0, basecolor.rgb, metaless);\n	\n    vec4 PrefilteredColor = texPanoramaLod(texPrefilterdEnv, R, rough*maxlv);\n    PrefilteredColor.rgb = _RGBEToRGB(PrefilteredColor);\n    vec4 EnvBRDF = texture2D(texBRDFLUT,vec2(rough , NoV));//TODO lod\n    vec2 rg = _RGBAToU16(EnvBRDF);    \n    speccontrib = (F0* rg.x + saturate( 50.0 * PrefilteredColor.g ) * rg.y);\n	vec3 color_spec = PrefilteredColor.rgb*speccontrib;\n	\n	vec3 color_diff=diff_sh9(normal);\n	vec3 outc =  color_diff*mix(basecolor.rgb,vec3(0.),metaless)*(vec3(1.0)-speccontrib)+color_spec;\n	#ifdef HAS_PBRINFO\n	outc*=pbrinfo.r;\n	#endif\n	return vec4(outc, basecolor.a);\n}\n\nvec3 oldlight(vec4 normal, float NoV, vec3 R){\n    vec4 basecolor = texture2D(texBaseColor,vUv);\n	const vec3 lightdir=normalize(vec3(1.,1.,0.));\n	const vec3 spcecol = vec3(1.,0.8,0.8);\n	const vec3 amb = vec3(0.5);\n	vec3 diffv =  (vec3(saturate(dot(lightdir,normal.xyz)))+amb);\n	//vec3 spec = spcecol* pow(saturate(dot(R,lightdir)),(1.-pbrinfo.g)*5.);\n	return diffv*basecolor.rgb;//+spec;\n}\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\nvarying float v_posViewZ;\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n	uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n	varying vec4 v_lightMVPPos;\n	#endif\n#endif\n\nvoid main() {\n#ifdef CASTSHADOW\n	gl_FragColor=packDepth(gl_FragCoord.w);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(texBaseColor,vUv).w;\n		if( alpha < u_AlphaTestValue ){\n			discard;\n		}\n	#endif\n#else\n\n	#ifdef RECEIVESHADOW\n		float shadowValue = 1.0;\n		#ifdef SHADOWMAP_PSSM3\n			shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,vWorldPos.xyz,v_posViewZ,0.0001);\n		#endif\n		#ifdef SHADOWMAP_PSSM2\n			shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,vWorldPos.xyz,v_posViewZ,0.0001);\n		#endif \n		#ifdef SHADOWMAP_PSSM1\n			shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.0001);\n		#endif\n	#endif	\n	\n    vec3 normal =  normalize(vWorldNorm);\n	vec4 normtex = texture2D( texNormal, vUv );\n	#ifdef HAS_TANGENT	\n	normal = applyNormalTex(normtex.xyz, normal);\n	#endif\n    vec3 view   = -normalize(vViewDir);\n    float NoV = saturate(dot( view, normal ));\n    vec3 R = 2. * NoV * normal - view;\n	float roughness = normtex.a;\n	#ifdef FIX_ROUGHNESS\n	roughness = u_roughness;\n	#endif\n	\n	vec4 pbrl = pbrlight(normal,roughness,NoV,R)*u_hdrexposure;\n    gl_FragColor.rgb =  pow(pbrl.rgb,vec3(0.45455));\n	//gl_FragColor.rgb = oldlight(normtex,NoV,R);\n	#ifdef RECEIVESHADOW\n	gl_FragColor.rgb *= max(shadowValue,0.7);\n	#endif\n	\n    gl_FragColor.a = pbrl.a;\n\n#endif\n}\n',s=Id.add(l,e,t,i,n),DS.SHADERDEFINE_FIX_METALESS=s.registerMaterialDefine("FIX_METALESS"),DS.SHADERDEFINE_FIX_ROUGHNESS=s.registerMaterialDefine("FIX_ROUGHNESS"),DS.SHADERDEFINE_HAS_TANGENT=s.registerMaterialDefine("HAS_TANGENT"),DS.SHADERDEFINE_HAS_PBRINFO=s.registerMaterialDefine("HAS_PBRINFO"),DS.SHADERDEFINE_USE_GROUNDTRUTH=s.registerMaterialDefine("USE_GROUNDTRUTH"),DS.SHADERDEFINE_TEST_CLIPZ=s.registerMaterialDefine("CLIPZ"),i={a_Position:0,a_Normal:3,a_Tangent0:5,a_Texcoord0:2,a_BoneWeights:7,a_BoneIndices:6},n={u_Bones:[0,0],u_MvpMatrix:[1,2],u_WorldMat:[0,2],u_CameraPos:[0,3],u_AlphaTestValue:[0,1],u_DiffuseColor:[7,1],u_EmissionColor:[8,1],u_DiffuseTexture:[1,1],u_NormalTexture:[3,1],u_ParallaxTexture:[4,1],u_MetallicGlossTexture:[2,1],u_OcclusionTexture:[5,1],u_EmissionTexture:[6,1],u_metallic:[9,1],u_smoothness:[10,1],u_smoothnessScale:[11,1],u_occlusionStrength:[13,1],u_normalScale:[14,1],u_parallaxScale:[15,1],u_TilingOffset:[17,1],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Color":[4,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var h=CS.nameKey.add("PBRStandard");e="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec4 a_Tangent0;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\nuniform vec3 u_CameraPos;\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec3 v_PositionWorld;\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n	  varying vec4 v_lightMVPPos;\n	  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main_castShadow()\n{\n	#ifdef BONE\n		mat4 skinTransform=mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n	 \n	//TODO没考虑UV动画呢\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		v_Texcoord0 = a_Texcoord0;\n	#endif\n		v_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n	mat3 worldMat;\n	#ifdef BONE\n		mat4 skinTransform = mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n		worldMat=mat3(u_WorldMat*skinTransform);\n		v_PositionWorld = (u_WorldMat * position).xyz;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n		worldMat = mat3(u_WorldMat);\n		v_PositionWorld = (u_WorldMat * a_Position).xyz;\n	#endif\n	\n	v_Normal = worldMat * a_Normal;\n	v_Tangent = worldMat * a_Tangent0.xyz;\n	v_Binormal = cross(v_Normal, v_Tangent) * a_Tangent0.w;\n  \n	v_Texcoord0 = a_Texcoord0;\n	#ifdef TILINGOFFSET\n		v_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n	#endif\n		v_Texcoord0=vec2(v_Texcoord0.x,1.0 + v_Texcoord0.y);\n  \n	v_ViewDir = u_CameraPos - v_PositionWorld;\n  \n	#ifdef RECEIVESHADOW\n		v_posViewZ = gl_Position.w;\n		#ifdef SHADOWMAP_PSSM1 \n			v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n		#endif\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW\n		main_castShadow();\n	#else\n		main_normal();\n	#endif\n}",t='#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\n\nuniform vec3 u_AmbientColor;\nuniform vec4 u_DiffuseColor;\n\n#ifdef DIFFUSETEXTURE\n	uniform sampler2D u_DiffuseTexture;\n#endif\n#ifdef METALLICGLOSSTEXTURE\n	uniform sampler2D u_MetallicGlossTexture;\n#endif\n#ifdef NORMALTEXTURE\n	uniform sampler2D u_NormalTexture;\n	uniform float u_normalScale;\n#endif\n#ifdef PARALLAXTEXTURE\n	uniform sampler2D u_ParallaxTexture;\n	uniform float u_parallaxScale;\n#endif\n#ifdef OCCLUSIONTEXTURE\n	uniform sampler2D u_OcclusionTexture;\n	uniform float u_occlusionStrength;\n#endif\n#ifdef EMISSION\n	#ifdef EMISSIONTEXTURE\n		uniform sampler2D u_EmissionTexture;\n	#endif\n	uniform vec4 u_EmissionColor;\n#endif\n\nuniform float u_AlphaTestValue;\nuniform float u_metallic;\nuniform float u_smoothness;\nuniform float u_smoothnessScale;\n\n#include "PBRStandardLighting.glsl"\n#include "ShadowHelper.glsl"\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n		uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n		varying vec4 v_lightMVPPos;\n	#endif\n#endif\n\nuniform DirectionLight u_DirectionLight;\n\nvoid main_castShadow()\n{\n	gl_FragColor=packDepth(v_posViewZ);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n		if( alpha < u_AlphaTestValue )\n		{\n			discard;\n		}\n	#endif\n}\n\nvoid main_normal()\n{	\n	vec3 viewDir = normalize(v_ViewDir);\n	\n	vec2 uv0 = ParallaxOffset(viewDir);\n	\n	vec2 mg;\n	#ifdef DIFFUSETEXTURE\n		vec4 diffuseTextureColor = texture2D(u_DiffuseTexture, uv0);\n		vec4 diffuseColor = diffuseTextureColor * u_DiffuseColor;\n		mg = MetallicGloss(diffuseTextureColor.a, uv0);\n	#else\n		vec4 diffuseColor = u_DiffuseColor;\n		mg = MetallicGloss(1.0, uv0);\n	#endif\n	\n	#ifdef ALPHATEST\n		if(diffuseColor.a < u_AlphaTestValue)\n			discard;\n	#endif\n	\n	gl_FragColor = diffuseColor;\n	\n	vec3 normal = UnpackScaleNormal(uv0);\n  \n	vec3 gi =  u_AmbientColor * Occlusion(uv0).rgb;\n  \n	vec4 color = PBRStandardDiectionLight(diffuseColor.rgb, mg.r, mg.g, normal, viewDir, u_DirectionLight, gi);\n	\n	color.a = diffuseColor.a;\n	\n	#ifdef EMISSION\n		vec4 emissionColor = u_EmissionColor;\n		#ifdef EMISSIONTEXTURE\n			emissionColor *=  texture2D(u_EmissionTexture, uv0);\n		#endif\n		color.rgb += emissionColor.rgb;\n	#endif\n	\n	#ifdef RECEIVESHADOW\n		float shadowValue = 1.0;\n		#ifdef SHADOWMAP_PSSM3\n			shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif\n		#ifdef SHADOWMAP_PSSM2\n			shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif \n		#ifdef SHADOWMAP_PSSM1\n			shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n		#endif\n		gl_FragColor = vec4(color.rgb * shadowValue, color.a);\n	#else\n		gl_FragColor = color;\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW		\n		main_castShadow();\n	#else\n		main_normal();\n	#endif  \n}\n\n',s=Id.add(h,e,t,i,n),LS.SHADERDEFINE_DIFFUSETEXTURE=s.registerMaterialDefine("DIFFUSETEXTURE"),LS.SHADERDEFINE_METALLICGLOSSTEXTURE=s.registerMaterialDefine("METALLICGLOSSTEXTURE"),LS.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=s.registerMaterialDefine("SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA"),LS.SHADERDEFINE_NORMALTEXTURE=s.registerMaterialDefine("NORMALTEXTURE"),LS.SHADERDEFINE_PARALLAXTEXTURE=s.registerMaterialDefine("PARALLAXTEXTURE"),LS.SHADERDEFINE_OCCLUSIONTEXTURE=s.registerMaterialDefine("OCCLUSIONTEXTURE"),LS.SHADERDEFINE_EMISSION=s.registerMaterialDefine("EMISSION"),LS.SHADERDEFINE_EMISSIONTEXTURE=s.registerMaterialDefine("EMISSIONTEXTURE"),LS.SHADERDEFINE_TILINGOFFSET=s.registerMaterialDefine("TILINGOFFSET"),i={a_Position:0,a_Normal:3,a_Tangent0:5,a_Texcoord0:2,a_BoneWeights:7,a_BoneIndices:6},n={u_Bones:[0,0],u_MvpMatrix:[1,2],u_WorldMat:[0,2],u_CameraPos:[0,3],u_AlphaTestValue:[0,1],u_DiffuseColor:[7,1],u_SpecularColor:[8,1],u_EmissionColor:[9,1],u_DiffuseTexture:[1,1],u_NormalTexture:[3,1],u_ParallaxTexture:[4,1],u_SpecularTexture:[2,1],u_OcclusionTexture:[5,1],u_EmissionTexture:[6,1],u_smoothness:[10,1],u_smoothnessScale:[11,1],u_occlusionStrength:[13,1],u_normalScale:[14,1],u_parallaxScale:[15,1],u_TilingOffset:[17,1],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Color":[4,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var c=CS.nameKey.add("PBRSpecular");e="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec4 a_Tangent0;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\nuniform vec3 u_CameraPos;\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec3 v_PositionWorld;\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n	  varying vec4 v_lightMVPPos;\n	  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main_castShadow()\n{\n	#ifdef BONE\n		mat4 skinTransform=mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n	 \n	//TODO没考虑UV动画呢\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		v_Texcoord0 = a_Texcoord0;\n	#endif\n		v_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n	mat3 worldMat;\n	#ifdef BONE\n		mat4 skinTransform = mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n		worldMat=mat3(u_WorldMat*skinTransform);\n		v_PositionWorld = (u_WorldMat * position).xyz;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n		worldMat = mat3(u_WorldMat);\n		v_PositionWorld = (u_WorldMat * a_Position).xyz;\n	#endif\n	\n	v_Normal = worldMat * a_Normal;\n	v_Tangent = worldMat * a_Tangent0.xyz;\n	v_Binormal = cross(v_Normal, v_Tangent) * a_Tangent0.w;\n  \n	v_Texcoord0 = a_Texcoord0;\n	#ifdef TILINGOFFSET\n		v_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n	#endif\n		v_Texcoord0=vec2(v_Texcoord0.x,1.0 + v_Texcoord0.y);\n  \n	v_ViewDir = u_CameraPos - v_PositionWorld;\n  \n	#ifdef RECEIVESHADOW\n		v_posViewZ = gl_Position.w;\n		#ifdef SHADOWMAP_PSSM1 \n			v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n		#endif\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW\n		main_castShadow();\n	#else\n		main_normal();\n	#endif\n}",t='#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\n\nuniform vec3 u_AmbientColor;\nuniform vec4 u_DiffuseColor;\nuniform vec4 u_SpecularColor;\n\n#ifdef DIFFUSETEXTURE\n	uniform sampler2D u_DiffuseTexture;\n#endif\n#ifdef SPECULARTEXTURE\n	uniform sampler2D u_SpecularTexture;\n#endif\n#ifdef NORMALTEXTURE\n	uniform sampler2D u_NormalTexture;\n	uniform float u_normalScale;\n#endif\n#ifdef PARALLAXTEXTURE\n	uniform sampler2D u_ParallaxTexture;\n	uniform float u_parallaxScale;\n#endif\n#ifdef OCCLUSIONTEXTURE\n	uniform sampler2D u_OcclusionTexture;\n	uniform float u_occlusionStrength;\n#endif\n#ifdef EMISSION\n	#ifdef EMISSIONTEXTURE\n		uniform sampler2D u_EmissionTexture;\n	#endif\n	uniform vec4 u_EmissionColor;\n#endif\n\nuniform float u_AlphaTestValue;\nuniform float u_metallic;\nuniform float u_smoothness;\nuniform float u_smoothnessScale;\n\n#include "PBRSpecularLighting.glsl"\n#include "ShadowHelper.glsl"\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n		uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n		varying vec4 v_lightMVPPos;\n	#endif\n#endif\n\nuniform DirectionLight u_DirectionLight;\n\nvoid main_castShadow()\n{\n	gl_FragColor=packDepth(v_posViewZ);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n		if( alpha < u_AlphaTestValue )\n		{\n			discard;\n		}\n	#endif\n}\n\nvoid main_normal()\n{	\n	vec3 viewDir = normalize(v_ViewDir);\n	\n	vec2 uv0 = ParallaxOffset(viewDir);\n	\n	vec4 sg;\n	#ifdef DIFFUSETEXTURE\n		vec4 diffuseTextureColor = texture2D(u_DiffuseTexture, uv0);\n		vec4 diffuseColor = diffuseTextureColor * u_DiffuseColor;\n		sg = SpecularGloss(diffuseTextureColor.a, uv0);\n	#else\n		vec4 diffuseColor = u_DiffuseColor;\n		sg = SpecularGloss(1.0, uv0);\n	#endif\n	\n	#ifdef ALPHATEST\n		if(diffuseColor.a < u_AlphaTestValue)\n			discard;\n	#endif\n  \n	vec3 normal = UnpackScaleNormal(uv0);\n	\n	vec3 gi =  u_AmbientColor * Occlusion(uv0).rgb;\n	\n	//float a = (sg.r+sg.g+sg.b) / 3.0;\n  \n	vec4 color = PBRSpecularDiectionLight(diffuseColor.rgb, sg.rgb, sg.a, normal,viewDir, u_DirectionLight, gi);\n	\n	color.a = diffuseColor.a;\n	\n	#ifdef EMISSION\n		vec4 emissionColor = u_EmissionColor;\n		#ifdef EMISSIONTEXTURE\n			emissionColor *=  texture2D(u_EmissionTexture, uv0);\n		#endif\n		color.rgb += emissionColor.rgb;\n	#endif\n	\n	#ifdef RECEIVESHADOW\n		float shadowValue = 1.0;\n		#ifdef SHADOWMAP_PSSM3\n			shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif\n		#ifdef SHADOWMAP_PSSM2\n			shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif \n		#ifdef SHADOWMAP_PSSM1\n			shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n		#endif\n		gl_FragColor = vec4(color.rgb * shadowValue, color.a);\n	#else\n		gl_FragColor = color;\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW		\n		main_castShadow();\n	#else\n		main_normal();\n	#endif  \n}\n\n',s=Id.add(c,e,t,i,n),VS.SHADERDEFINE_DIFFUSETEXTURE=s.registerMaterialDefine("DIFFUSETEXTURE"),VS.SHADERDEFINE_SPECULARTEXTURE=s.registerMaterialDefine("SPECULARTEXTURE"),VS.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=s.registerMaterialDefine("SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA"),VS.SHADERDEFINE_NORMALTEXTURE=s.registerMaterialDefine("NORMALTEXTURE"),VS.SHADERDEFINE_PARALLAXTEXTURE=s.registerMaterialDefine("PARALLAXTEXTURE"),VS.SHADERDEFINE_OCCLUSIONTEXTURE=s.registerMaterialDefine("OCCLUSIONTEXTURE"),VS.SHADERDEFINE_EMISSION=s.registerMaterialDefine("EMISSION"),VS.SHADERDEFINE_EMISSIONTEXTURE=s.registerMaterialDefine("EMISSIONTEXTURE"),VS.SHADERDEFINE_TILINGOFFSET=s.registerMaterialDefine("TILINGOFFSET"),i={a_position:0,a_normal:3,uv:2},n={irrad_mat_red:[10,3],irrad_mat_green:[11,3],irrad_mat_blue:[12,3],u_hdrexposure:[13,3],texBaseColor:[1,1],texNormal:[2,1],texSky:[11,1],texUnderWater:[3,1],texPrefilterdEnv:[8,3],texPrefilterDiff:[7,3],texWaterDisp:[4,1],texWaveDetail:[9,1],texDeepColor:[10,1],texWaterInfo:[16,1],texFoam:[17,1],GEOWAVE_UV_SCALE:[18,1],modelMatrix:[0,2],mvp:[1,2],cameraPosition:[0,3],u_curTm:[8,1],u_scrsize:[15,1],u_WaveInfoD:[13,1],u_WaveInfo:[12,1],u_WaveMainDir:[14,1],u_DeepScale:[20,1],u_SeaColor:[19,1],u_View:[1,3],u_Project:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4]};var u=CS.nameKey.add("Water");e='\nuniform mat4 modelMatrix;\n//uniform mat4 modelViewMatrix;\n//uniform mat4 projectionMatrix;\nuniform mat4 u_View;\nuniform mat4 u_Project;\nuniform mat4 mvp;\n//uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\nuniform float u_curTm;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 uv;\n//uniform sampler2D texWaterDisp;\n#ifdef USE_VERTEX_DEEPINFO\n#else\nuniform sampler2D texWaterInfo;\nvarying vec4 vWaterInfo;\nuniform float u_DeepScale;//texWaterInfo.r*vDeepScale\n#endif\nuniform float u_WaveMainDir;	//主波方向\nuniform float GEOWAVE_UV_SCALE ;//= 100.0;\n\n\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\nvarying vec3 vWorldTan;\nvarying vec3 vWorldBin;\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\nvarying vec3 vLightDir;\nvarying vec3 vViewDir;\nvarying vec3 vDisp;\nvarying float fDeep;\nvarying mat2 matUVTrans;\nvarying float fFoam;\n\nconst float PI = 3.14159265358979323846264;\n\n#include "WaveFunction.glsl"\n\nvec2 getPosFromUV(vec2 uv){\n	return uv*50.;\n}\n\nvoid main() {\n	vec3 pos = a_position;\n    vUv = uv;\n	\n	//vDisp = texture2D(texWaterDisp,uv).rgb;\n	//vec3 disp = vDisp;\n	\n	//TODO 这里有个潜规则。\n	float tt = pos.y; pos.y=pos.z; pos.z=-tt;\n	\n	#ifdef USE_VERTEX_DEEPINFO\n	fDeep = -pos.y;\n	pos.y=0.0;\n	#else\n	vWaterInfo = texture2D(texWaterInfo,uv);\n	fDeep = vWaterInfo.r*u_DeepScale;\n	#endif\n	\n	\n	//计算波形\n	mat4 modelMat = modelMatrix;\n	vec3 opos, T,B,N;\n	float foams=0.;\n	vec2 uvpos = uv*GEOWAVE_UV_SCALE+vec2(modelMat[3][0],0.);//TODO 如果有旋转缩放怎么办\n	calcGerstnerWave(u_curTm, pos,fDeep, uvpos,opos,B,T,N,foams);\n	fFoam = foams;\n	gl_Position = mvp*vec4(opos,1.);\n	vWorldPos = modelMat*vec4(opos,1.);\n\n	vWorldNorm = normalize((modelMatrix*vec4(N,0.0)).xyz);\n	vWorldTan = normalize((modelMatrix*vec4(T,0.0)).xyz);\n	vWorldBin = normalize((modelMatrix*vec4(B,0.0)).xyz);\n    vViewDir = vWorldPos.xyz-cameraPosition; //这个不能取normalize，否则会引入非线性\n	\n	float s = sin(u_WaveMainDir);\n	float c = cos(u_WaveMainDir);\n	matUVTrans = mat2(c,-s,s,c);\n}\n',t="//#version 300 es\n\nprecision highp float;\nprecision lowp int;\n\nconst float PI = 3.14159265358979323846264;\nconst float _2PI = 6.2831853071796;\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\nvarying vec3 vWorldTan;\nvarying vec3 vWorldBin;\nvarying vec3 vViewDir;//入射。pos-cam\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\nvarying float fDeep;\nvarying mat2 matUVTrans;\n#ifdef USE_VERTEX_DEEPINFO\n#else\nvarying vec4 vWaterInfo;\n#endif\nmat3 matTBNOff;//\n\n//\nuniform sampler2D texBaseColor;\nuniform sampler2D texNormal;\n#ifdef CUBE_ENV\nuniform samplerCube texSky;\n#else\nuniform sampler2D texSky;\n#endif\nuniform sampler2D texUnderWater;\nuniform sampler2D texWaveDetail;\n//uniform sampler2D texDeepColor;\nuniform sampler2D texFoam;\nvarying float fFoam;\nuniform float u_curTm;\nuniform vec2 u_scrsize;\nuniform vec3 u_SeaColor;//\n\nconst int NumTexWaves=4;\nconst float Amp_over_L = 0.01;\n//const vec3 SEA_COLOR1 = vec3(0.0292,0.672,0.7467);//大洋\n//const vec3 SEA_COLOR2 = vec3(0,0.927,0.43);//近海\n\nconst float _maxu8 = 255.0;\nconst float _maxu16 = 65535.0;\nconst float _shift8 = 256.0;    //平移的话是*256而不是255\nvec2 _RGBAToU16(const in vec4 rgba){\n    return vec2((rgba.r*_maxu8+rgba.g*_maxu8*_shift8)/_maxu16, (rgba.b*_maxu8+rgba.a*_maxu8*_shift8)/_maxu16);\n}\nvec3 _RGBEToRGB( const in vec4 rgba ){\n    float f = pow(2.0, rgba.w * 255.0 - (128.0 + 8.0));\n    return rgba.rgb * (255.0 * f);\n}\n\nfloat saturate(float v){\n    return min(max(v,0.),1.);\n}\n\n/*\n	各种 ToneMap\n*/\n//Reinhard\nvec3 ReinhardToneMapping(vec3 color, float adapted_lum) {\n    const float MIDDLE_GREY = 1.;\n    color *= MIDDLE_GREY / adapted_lum;\n    return color / (1.0 + color);\n}\n\n//CE2\nvec3 CEToneMapping(vec3 color, float adapted_lum){\n    return 1. - exp(-adapted_lum * color);\n}\n\n//UC2\nvec3 F1(vec3 x){\n	const float A = 0.22;\n	const float B = 0.30;\n	const float C = 0.10;\n	const float D = 0.20;\n	const float E = 0.01;\n	const float F = 0.30;\n \n	return ((x * (A * x + C * B) + D * E) / (x * (A * x + B) + D * F)) - E / F;\n}\n\nvec3 Uncharted2ToneMapping(vec3 color, float adapted_lum){\n	const vec3 WHITE = vec3(11.2);\n	return F1(1.6 * adapted_lum * color) / F1(WHITE);\n}\n\n//ACES\nvec3 ACESToneMapping(vec3 color, float adapted_lum){\n	const float A = 2.51;\n	const float B = 0.03;\n	const float C = 2.43;\n	const float D = 0.59;\n	const float E = 0.14;\n\n	color *= adapted_lum;\n	return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\n\n/*\n* 对一个全景图进行采样。假设x轴指向中心。\n*/\nvec4 texPanorama(sampler2D tex, const in vec3 dir){\n	float envu = atan(dir.z,dir.x)/_2PI+0.5; 	\n	float envv = acos(dir.y)/PI;//(1.0-dir.y)/2.0;\n	return texture2D(tex,vec2(envu,envv));\n}\n\n/*\n	与位于0点的测试棒的相交测试交点\n	这个是瞎写的，只是为了测试\n*/\nbool hitClydiner(vec3 pos, vec3 dir, out vec3 hitpos, out vec3 hitnormal){\n	const float r = 0.5;\n	float a = dir.x*dir.x+dir.z*dir.z;\n	float b = 2.*dir.x*pos.x+2.*dir.z*pos.z;\n	float c = pos.x*pos.x+pos.z*pos.z-r*r;\n	float d = b*b-4.*a*c;\n	if(d>=0.0){\n		float t = (-b+sqrt(d))/2./a;\n		t =min(t, (-b-sqrt(d))/2./a);\n		hitpos = pos+dir*t;\n		return true;\n	}\n	/*\n	vec3 v1 = normalize(cross(dir,vec3(0.,1.,0.)));//公垂线\n	float dist = dot(pos,v1);//最短距离\n	if(abs(dist)<r){\n		return true;\n	}\n	*/\n	return false;\n}\n\n///* 根据散射公式来计算某个方向的颜色 *///\n//\nfloat phase_function(float costheta, float g, float g2){\n	return 1.5*( (1.0-g2) / (2.0+g2) ) * (1.0+costheta*costheta) / pow(1.0+g2-2.0*g*costheta, 1.5);	\n}\n\nconst float _density = .2;\nconst vec3 _vLightDir=vec3(0.,-1.,0.);//必须是规格化的\nconst int _SAMPLENUM = 20;\nconst float _K1 = 1.0;\nconst float _g = -0.93;\n//\nvec3 calcScatter(vec3 start, vec3 dir, vec3 end){\n	float len = length(end-start);\n	float costheta = dot(dir,_vLightDir);\n	float g2 = _g*_g;\n	float K = _K1*len*_density*phase_function(costheta,_g,g2);\n	//用分段的方式来积分\n	float dlen = len/float(_SAMPLENUM);//距离平分\n	float ddeep = (start.y-end.y)/float(_SAMPLENUM);//深度平分\n	float sum=0.;\n	for( int i=0; i<_SAMPLENUM; i++){\n		float fi = float(i);\n		float v1 = exp(-_density*(dlen+ddeep)*fi);//TODO 应该可以用分析法计算出来\n		sum += v1;\n	}\n	return vec3(K*sum);\n}\n///* 根据散射公式来计算某个方向的亮度  END *///\n\nconst float cDeep = -2.;	//假设水的深度\nvec3 getShuiDiColor(vec3 pos, vec3 dir, vec3 normal){\n	//一个无限大的水底，黑白格纹理。纹理长度为1米\n	float t = ( cDeep-pos.y )/dir.y;\n	if(t<0.) return vec3(1.,0.,0.);//TEST\n	bool bhit = false;\n	vec3 hitpos;\n	vec3 hitcolor;\n	vec3 hn;\n	if(hitClydiner(pos,dir,hitpos,hn) && hitpos.y>cDeep && hitpos.y<pos.y){\n		bhit=true;\n		hitcolor = vec3(.8,.8,.8);\n\n	}else\n	{\n		hitpos = pos+dir*t;\n		vec3 hp = floor(hitpos);\n		float a = mod((hp.x+hp.z),2.);\n		hitcolor = (a<.9)?vec3(0.,0.,0.):vec3(1.,1.,1.);\n		//hitcolor = texture2D(texUnderWater,hitpos.xz/10.).rgb;\n	}\n	\n	float l = length(hitpos-pos);\n	//return texture2D(texDeepColor,vec2(min(max(l/400.,0.),1.),0.5)).rgb;\n	//return SEA_COLOR1*calcScatter(pos,dir,hitpos);\n	float left = pow(0.8,l);//假设透过率为80%，则到达水底的时候的光强。\n	return mix(hitcolor,u_SeaColor,1.-left);\n}\n\n/*\n	view已经normalize了\n*/\nvec3 getRefractColor(vec3 view,vec3 normal){\n	vec3 T = refract(-view, normal, 0.7);\n	return getShuiDiColor(vWorldPos.xyz,T,normal); \n}\n\nvec4 calcWaterC(vec3 view, vec3 normal, float von, vec3 R, float rough){\n	/*\n	只有浪顶的法线向下，也就是波形形成了交叠的时候，才会这样，所以要通过参数控制避免出现这种情况，而不是在这里保护。\n	if(dot(R,vec3(0.,1.,0.))<0.){\n		R = -R;\n	}\n	*/\n	//vec3 refr = getRefractColor(-view,normal);\n#ifdef USE_REFR_TEX	\n	vec3 refr = texture2D(texUnderWater, gl_FragCoord.xy/u_scrsize+normal.xz/8.).rgb;\n#else\n	vec3 refr = u_SeaColor;\n#endif\n	float F0=0.02;\n	//菲涅尔，越大反射越强\n	float f =  F0+(1.0-F0)*exp2((-5.55473*von-6.98316)*von);\n	//float f = F0+(1.0-F0)*pow(1.-von,5.);\n	//能看到水底的程度。反射剩余的*水中的衰减\n	//float a = (1.-f)*(1.-deepk);\n#ifdef CUBE_ENV\n	vec4 reflc = textureCube(texSky,R);\n#else\n	vec4 reflc = texPanorama(texSky, R);\n#endif\n#ifdef HDR_ENV\n	vec3 refl = _RGBEToRGB(reflc)*f;\n#else\n	vec3 refl = reflc.rgb*f;\n#endif\n	//return vec4(refl*(1.-rough),1.);\n	\n	//vec3 refl = reflc.rgb*f;\n	vec3 final = mix(refr, u_SeaColor, min(fDeep/10.,1.))+refl*(max(0.,1.-rough));\n#ifdef HDR_ENV\n	final = ACESToneMapping(final,1.);//TODO 这个要uniform传入\n#endif\n	return vec4(final,f);\n}\n\nvoid main() {\n    vec3 normal =  normalize(vWorldNorm);\n	//如果uv=1为100米，希望每个细节纹理表示20米的小波形，则uv缩放是 100/20。细节纹理内部也要用这个值，即pos=uv*20\n	vec2 ruv = matUVTrans*vUv;\n	vec3 detailNorm = texture2D(texWaveDetail,fract(ruv*5.)).rgb*2.-vec3(1.);//TODO uv怎么算\n	float texNormScale = 2.*PI*float(NumTexWaves)*Amp_over_L*2.5;\n	detailNorm *= vec3(texNormScale,1.,texNormScale);\n	//旋转\n	//细节纹理来自rendertarget，因此需要颠倒z\n	\n	matTBNOff = mat3(matUVTrans[0][0],0.,matUVTrans[1][0],\n	0.,1.,0.,\n	matUVTrans[0][1],0.,matUVTrans[1][1]\n	);\n	\n	/*\n	matTBNOff = mat3(0.,0.,1.,\n	0.,1.,0.,\n	-1.,0.,0.\n	);\n	*/\n\n    mat3 tsn = mat3( vWorldBin, normal, vWorldTan);	\n    //normal = normalize(tsn * matTBNOff * detailNorm);\n	normal = normalize(tsn * detailNorm); //这个应该更正确。因为本身方向就是根据uv算的，如果是静态图片才需要转换。\n	//vec4 normtex = texture2D( texNormal, vUv );\n    vec3 view   = -normalize(vViewDir);//view 是指向camera的\n    float NoV = saturate(dot( view, normal ));\n    //vec3 R = 2. * NoV * normal - view;\n	\n#ifdef USE_FOAM	\n	vec4 foamc = (texture2D(texFoam,vUv*50.)+texture2D(texFoam,vUv*20.))/2.;\n	float nearcoast = 1.-min(fDeep/10.,1.);// 1.-vWaterInfo.r;\n	float foams = (nearcoast/4.+fFoam)*2.*nearcoast;\n#else\n	float foams =0.;\n#endif\n	\n	vec3 R = reflect(-view,normal);\n	vec4 wc = calcWaterC(view, normal,NoV,R, foams);\n\n	gl_FragColor.rgb = wc.rgb;//normalize(detailNorm).rrr;//((normal)+vec3(0.0))/1.;//normalize(normal).rgb;//texture2D(texWaveDetail,vUv).rgb;// fracColor * texture2D(texUnderWater, vUv*20.0).rgb;// vec3(1.0);//pbrl.rgb;\n    gl_FragColor.a = 1.0;//wc.a;\n#ifdef USE_FOAM\n	gl_FragColor.rgb = mix(gl_FragColor.rgb,vec3(1.),foamc.a*foams);\n	gl_FragColor.a = foamc.r;\n#endif\n	//if(mod(vUv.x*100.,1.0)<0.02 || mod(vUv.y*100.,1.0)<0.02) gl_FragColor.rgb=vec3(0.5,.5,.5);\n	//gl_FragColor.rgb = detailNorm;\n}\n",
s=Id.add(u,e,t,i,n),RS.SHADERDEFINE_CUBE_ENV=s.registerMaterialDefine("CUBE_ENV"),RS.SHADERDEFINE_HDR_ENV=s.registerMaterialDefine("HDR_ENV"),RS.SHADERDEFINE_SHOW_NORMAL=s.registerMaterialDefine("SHOW_NORMAL"),RS.SHADERDEFINE_USEVERTEXHEIGHT=s.registerMaterialDefine("USE_VERTEX_DEEPINFO"),RS.SHADERDEFINE_USE_FOAM=s.registerMaterialDefine("USE_FOAM"),RS.SHADERDEFINE_USE_REFRACT_TEX=s.registerMaterialDefine("USE_REFR_TEX"),i={a_CornerTextureCoordinate:17,a_MeshPosition:0,a_MeshColor:1,a_MeshTextureCoordinate:2,a_ShapePositionStartLifeTime:30,a_DirectionTime:32,a_StartColor:19,a_EndColor:23,a_StartSize:20,a_StartRotation0:22,a_StartSpeed:31,a_Random0:34,a_Random1:35,a_SimulationWorldPostion:36,a_SimulationWorldRotation:37},n={u_Tintcolor:[2,1],u_TilingOffset:[3,1],u_texture:[1,1],u_WorldPosition:[0,2],u_WorldRotation:[1,2],u_PositionScale:[4,2],u_SizeScale:[5,2],u_ScalingMode:[6,2],u_Gravity:[7,2],u_ThreeDStartRotation:[8,2],u_StretchedBillboardLengthScale:[9,2],u_StretchedBillboardSpeedScale:[10,2],u_SimulationSpace:[11,2],u_CurrentTime:[12,2],u_ColorOverLifeGradientAlphas:[22,2],u_ColorOverLifeGradientColors:[23,2],u_MaxColorOverLifeGradientAlphas:[24,2],u_MaxColorOverLifeGradientColors:[25,2],u_VOLVelocityConst:[13,2],u_VOLVelocityGradientX:[14,2],u_VOLVelocityGradientY:[15,2],u_VOLVelocityGradientZ:[16,2],u_VOLVelocityConstMax:[17,2],u_VOLVelocityGradientMaxX:[18,2],u_VOLVelocityGradientMaxY:[19,2],u_VOLVelocityGradientMaxZ:[20,2],u_VOLSpaceType:[21,2],u_SOLSizeGradient:[26,2],u_SOLSizeGradientX:[27,2],u_SOLSizeGradientY:[28,2],u_SOLSizeGradientZ:[29,2],u_SOLSizeGradientMax:[30,2],u_SOLSizeGradientMaxX:[31,2],u_SOLSizeGradientMaxY:[32,2],u_SOLSizeGradientMaxZ:[33,2],u_ROLAngularVelocityConst:[34,2],u_ROLAngularVelocityConstSeprarate:[35,2],u_ROLAngularVelocityGradient:[36,2],u_ROLAngularVelocityGradientX:[37,2],u_ROLAngularVelocityGradientY:[38,2],u_ROLAngularVelocityGradientZ:[39,2],u_ROLAngularVelocityGradientW:[40,2],u_ROLAngularVelocityConstMax:[41,2],u_ROLAngularVelocityConstMaxSeprarate:[42,2],u_ROLAngularVelocityGradientMax:[43,2],u_ROLAngularVelocityGradientMaxX:[44,2],u_ROLAngularVelocityGradientMaxY:[45,2],u_ROLAngularVelocityGradientMaxZ:[46,2],u_ROLAngularVelocityGradientMaxW:[47,2],u_TSACycles:[48,2],u_TSASubUVLength:[49,2],u_TSAGradientUVs:[50,2],u_TSAMaxGradientUVs:[51,2],u_CameraPosition:[0,3],u_CameraDirection:[5,3],u_CameraUp:[6,3],u_View:[1,3],u_Projection:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4]};var d=CS.nameKey.add("PARTICLESHURIKEN");e="#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n	attribute vec4 a_CornerTextureCoordinate;\n#endif\n#ifdef RENDERMODE_MESH\n	attribute vec3 a_MeshPosition;\n	attribute vec4 a_MeshColor;\n	attribute vec2 a_MeshTextureCoordinate;\n	varying vec4 v_MeshColor;\n#endif\n\nattribute vec4 a_ShapePositionStartLifeTime;\nattribute vec4 a_DirectionTime;\nattribute vec4 a_StartColor;\nattribute vec3 a_StartSize;\nattribute vec3 a_StartRotation0;\nattribute float a_StartSpeed;\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n  attribute vec4 a_Random0;\n#endif\n#if defined(TEXTURESHEETANIMATIONRANDOMCURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  attribute vec4 a_Random1;\n#endif\nattribute vec3 a_SimulationWorldPostion;\nattribute vec4 a_SimulationWorldRotation;\n\nvarying float v_Discard;\nvarying vec4 v_Color;\n#ifdef DIFFUSEMAP\n	varying vec2 v_TextureCoordinate;\n#endif\n\nuniform float u_CurrentTime;\nuniform vec3 u_Gravity;\n\nuniform vec3 u_WorldPosition;\nuniform vec4 u_WorldRotation;\nuniform bool u_ThreeDStartRotation;\nuniform int u_ScalingMode;\nuniform vec3 u_PositionScale;\nuniform vec3 u_SizeScale;\nuniform mat4 u_View;\nuniform mat4 u_Projection;\n\n#ifdef STRETCHEDBILLBOARD\n	uniform vec3 u_CameraPosition;\n#endif\nuniform vec3 u_CameraDirection;//TODO:只有几种广告牌模式需要用\nuniform vec3 u_CameraUp;\n\nuniform  float u_StretchedBillboardLengthScale;\nuniform  float u_StretchedBillboardSpeedScale;\nuniform int u_SimulationSpace;\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  uniform  int  u_VOLSpaceType;\n#endif\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)\n  uniform  vec3 u_VOLVelocityConst;\n#endif\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  uniform  vec2 u_VOLVelocityGradientX[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientY[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientZ[4];//x为key,y为速度\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n  uniform  vec3 u_VOLVelocityConstMax;\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n  uniform  vec2 u_VOLVelocityGradientMaxX[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientMaxY[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientMaxZ[4];//x为key,y为速度\n#endif\n\n#ifdef COLOROVERLIFETIME\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n#ifdef RANDOMCOLOROVERLIFETIME\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n  uniform  vec4 u_MaxColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_MaxColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n\n\n#if defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMERANDOMCURVES)\n  uniform  vec2 u_SOLSizeGradient[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVES\n  uniform  vec2 u_SOLSizeGradientMax[4];//x为key,y为尺寸\n#endif\n#if defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\n  uniform  vec2 u_SOLSizeGradientX[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientY[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientZ[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n  uniform  vec2 u_SOLSizeGradientMaxX[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientMaxY[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientMaxZ[4];//x为key,y为尺寸\n#endif\n\n\n#ifdef ROTATIONOVERLIFETIME\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\n    uniform  float u_ROLAngularVelocityConst;\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n    uniform  float u_ROLAngularVelocityConstMax;\n  #endif\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n    uniform  vec2 u_ROLAngularVelocityGradient[4];//x为key,y为旋转\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n    uniform  vec2 u_ROLAngularVelocityGradientMax[4];//x为key,y为旋转\n  #endif\n#endif\n#ifdef ROTATIONOVERLIFETIMESEPERATE\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\n    uniform  vec3 u_ROLAngularVelocityConstSeprarate;\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n    uniform  vec3 u_ROLAngularVelocityConstMaxSeprarate;\n  #endif\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n    uniform  vec2 u_ROLAngularVelocityGradientX[4];\n    uniform  vec2 u_ROLAngularVelocityGradientY[4];\n    uniform  vec2 u_ROLAngularVelocityGradientZ[4];\n	uniform  vec2 u_ROLAngularVelocityGradientW[4];\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n    uniform  vec2 u_ROLAngularVelocityGradientMaxX[4];\n    uniform  vec2 u_ROLAngularVelocityGradientMaxY[4];\n    uniform  vec2 u_ROLAngularVelocityGradientMaxZ[4];\n	uniform  vec2 u_ROLAngularVelocityGradientMaxW[4];\n  #endif\n#endif\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\n  uniform  float u_TSACycles;\n  uniform  vec2 u_TSASubUVLength;\n  uniform  vec2 u_TSAGradientUVs[4];//x为key,y为frame\n#endif\n#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n  uniform  vec2 u_TSAMaxGradientUVs[4];//x为key,y为frame\n#endif\n\n#ifdef FOG\n	varying vec3 v_PositionWorld;\n#endif\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvec3 rotationByEuler(in vec3 vector,in vec3 rot)\n{\n	float halfRoll = rot.z * 0.5;\n    float halfPitch = rot.x * 0.5;\n	float halfYaw = rot.y * 0.5;\n\n	float sinRoll = sin(halfRoll);\n	float cosRoll = cos(halfRoll);\n	float sinPitch = sin(halfPitch);\n	float cosPitch = cos(halfPitch);\n	float sinYaw = sin(halfYaw);\n	float cosYaw = cos(halfYaw);\n\n	float quaX = (cosYaw * sinPitch * cosRoll) + (sinYaw * cosPitch * sinRoll);\n	float quaY = (sinYaw * cosPitch * cosRoll) - (cosYaw * sinPitch * sinRoll);\n	float quaZ = (cosYaw * cosPitch * sinRoll) - (sinYaw * sinPitch * cosRoll);\n	float quaW = (cosYaw * cosPitch * cosRoll) + (sinYaw * sinPitch * sinRoll);\n	\n	//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n	//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n	//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n	\n	float x = quaX + quaX;\n    float y = quaY + quaY;\n    float z = quaZ + quaZ;\n    float wx = quaW * x;\n    float wy = quaW * y;\n    float wz = quaW * z;\n	float xx = quaX * x;\n    float xy = quaX * y;\n	float xz = quaX * z;\n    float yy = quaY * y;\n    float yz = quaY * z;\n    float zz = quaZ * z;\n\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n	\n}\n\n//假定axis已经归一化\nvec3 rotationByAxis(in vec3 vector,in vec3 axis, in float angle)\n{\n	float halfAngle = angle * 0.5;\n	float sin = sin(halfAngle);\n	\n	float quaX = axis.x * sin;\n	float quaY = axis.y * sin;\n	float quaZ = axis.z * sin;\n	float quaW = cos(halfAngle);\n	\n	//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n	//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n	//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n	\n	float x = quaX + quaX;\n    float y = quaY + quaY;\n    float z = quaZ + quaZ;\n    float wx = quaW * x;\n    float wy = quaW * y;\n    float wz = quaW * z;\n	float xx = quaX * x;\n    float xy = quaX * y;\n	float xz = quaX * z;\n    float yy = quaY * y;\n    float yz = quaY * z;\n    float zz = quaZ * z;\n\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n	\n}\n\nvec3 rotationByQuaternions(in vec3 v,in vec4 q) \n{\n	return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}\n\n \n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\nfloat getCurValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\n	float curValue;\n	for(int i=1;i<4;i++)\n	{\n		vec2 gradientNumber=gradientNumbers[i];\n		float key=gradientNumber.x;\n		if(key>=normalizedAge)\n		{\n			vec2 lastGradientNumber=gradientNumbers[i-1];\n			float lastKey=lastGradientNumber.x;\n			float age=(normalizedAge-lastKey)/(key-lastKey);\n			curValue=mix(lastGradientNumber.y,gradientNumber.y,age);\n			break;\n		}\n	}\n	return curValue;\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\nfloat getTotalValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\n	float totalValue=0.0;\n	for(int i=1;i<4;i++)\n	{\n		vec2 gradientNumber=gradientNumbers[i];\n		float key=gradientNumber.x;\n		vec2 lastGradientNumber=gradientNumbers[i-1];\n		float lastValue=lastGradientNumber.y;\n		\n		if(key>=normalizedAge){\n			float lastKey=lastGradientNumber.x;\n			float age=(normalizedAge-lastKey)/(key-lastKey);\n			totalValue+=(lastValue+mix(lastValue,gradientNumber.y,age))/2.0*a_ShapePositionStartLifeTime.w*(normalizedAge-lastKey);\n			break;\n		}\n		else{\n			totalValue+=(lastValue+gradientNumber.y)/2.0*a_ShapePositionStartLifeTime.w*(key-lastGradientNumber.x);\n		}\n	}\n	return totalValue;\n}\n#endif\n\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)\nvec4 getColorFromGradient(in vec2 gradientAlphas[4],in vec4 gradientColors[4],in float normalizedAge)\n{\n	vec4 overTimeColor;\n	for(int i=1;i<4;i++)\n	{\n		vec2 gradientAlpha=gradientAlphas[i];\n		float alphaKey=gradientAlpha.x;\n		if(alphaKey>=normalizedAge)\n		{\n			vec2 lastGradientAlpha=gradientAlphas[i-1];\n			float lastAlphaKey=lastGradientAlpha.x;\n			float age=(normalizedAge-lastAlphaKey)/(alphaKey-lastAlphaKey);\n			overTimeColor.a=mix(lastGradientAlpha.y,gradientAlpha.y,age);\n			break;\n		}\n	}\n	\n	for(int i=1;i<4;i++)\n	{\n		vec4 gradientColor=gradientColors[i];\n		float colorKey=gradientColor.x;\n		if(colorKey>=normalizedAge)\n		{\n			vec4 lastGradientColor=gradientColors[i-1];\n			float lastColorKey=lastGradientColor.x;\n			float age=(normalizedAge-lastColorKey)/(colorKey-lastColorKey);\n			overTimeColor.rgb=mix(gradientColors[i-1].yzw,gradientColor.yzw,age);\n			break;\n		}\n	}\n	return overTimeColor;\n}\n#endif\n\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\nfloat getFrameFromGradient(in vec2 gradientFrames[4],in float normalizedAge)\n{\n	float overTimeFrame;\n	for(int i=1;i<4;i++)\n	{\n		vec2 gradientFrame=gradientFrames[i];\n		float key=gradientFrame.x;\n		if(key>=normalizedAge)\n		{\n			vec2 lastGradientFrame=gradientFrames[i-1];\n			float lastKey=lastGradientFrame.x;\n			float age=(normalizedAge-lastKey)/(key-lastKey);\n			overTimeFrame=mix(lastGradientFrame.y,gradientFrame.y,age);\n			break;\n		}\n	}\n	return floor(overTimeFrame);\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\nvec3 computeParticleLifeVelocity(in float normalizedAge)\n{\n  vec3 outLifeVelocity;\n  #ifdef VELOCITYOVERLIFETIMECONSTANT\n	 outLifeVelocity=u_VOLVelocityConst; \n  #endif\n  #ifdef VELOCITYOVERLIFETIMECURVE\n     outLifeVelocity= vec3(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n  #endif\n  #ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n	 outLifeVelocity=mix(u_VOLVelocityConst,u_VOLVelocityConstMax,vec3(a_Random1.y,a_Random1.z,a_Random1.w)); \n  #endif\n  #ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n     outLifeVelocity=vec3(mix(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y),\n	                 mix(getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z),\n					 mix(getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n  #endif\n					\n  return outLifeVelocity;\n} \n#endif\n\nvec3 computeParticlePosition(in vec3 startVelocity, in vec3 lifeVelocity,in float age,in float normalizedAge,vec3 gravityVelocity,vec4 worldRotation)\n{\n   vec3 startPosition;\n   vec3 lifePosition;\n   #if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n	#ifdef VELOCITYOVERLIFETIMECONSTANT\n		  startPosition=startVelocity*age;\n		  lifePosition=lifeVelocity*age;\n	#endif\n	#ifdef VELOCITYOVERLIFETIMECURVE\n		  startPosition=startVelocity*age;\n		  lifePosition=vec3(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n	#endif\n	#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n		  startPosition=startVelocity*age;\n		  lifePosition=lifeVelocity*age;\n	#endif\n	#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n		  startPosition=startVelocity*age;\n		  lifePosition=vec3(mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y)\n	      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z)\n	      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n	#endif\n	\n	vec3 finalPosition;\n	if(u_VOLSpaceType==0){\n	  if(u_ScalingMode!=2)\n	   finalPosition =rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition),worldRotation);\n	  else\n	   finalPosition =rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition,worldRotation);\n	}\n	else{\n	  if(u_ScalingMode!=2)\n	    finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation)+lifePosition;\n	  else\n	    finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation)+lifePosition;\n	}\n  #else\n	 startPosition=startVelocity*age;\n	 vec3 finalPosition;\n	 if(u_ScalingMode!=2)\n	   finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation);\n	 else\n	   finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation);\n  #endif\n  \n  if(u_SimulationSpace==0)\n    finalPosition=finalPosition+a_SimulationWorldPostion;\n  else if(u_SimulationSpace==1) \n    finalPosition=finalPosition+u_WorldPosition;\n  \n  finalPosition+=0.5*gravityVelocity*age;\n \n  return  finalPosition;\n}\n\n\nvec4 computeParticleColor(in vec4 color,in float normalizedAge)\n{\n	#ifdef COLOROVERLIFETIME\n	  color*=getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge);\n	#endif\n	\n	#ifdef RANDOMCOLOROVERLIFETIME\n	  color*=mix(getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge),getColorFromGradient(u_MaxColorOverLifeGradientAlphas,u_MaxColorOverLifeGradientColors,normalizedAge),a_Random0.y);\n	#endif\n\n    return color;\n}\n\nvec2 computeParticleSizeBillbard(in vec2 size,in float normalizedAge)\n{\n	#ifdef SIZEOVERLIFETIMECURVE\n		size*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n	#endif\n	#ifdef SIZEOVERLIFETIMERANDOMCURVES\n	    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n	#endif\n	#ifdef SIZEOVERLIFETIMECURVESEPERATE\n		size*=vec2(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge));\n	#endif\n	#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n	    size*=vec2(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n	    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z));\n	#endif\n	return size;\n}\n\n#ifdef RENDERMODE_MESH\nvec3 computeParticleSizeMesh(in vec3 size,in float normalizedAge)\n{\n	#ifdef SIZEOVERLIFETIMECURVE\n		size*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n	#endif\n	#ifdef SIZEOVERLIFETIMERANDOMCURVES\n	    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n	#endif\n	#ifdef SIZEOVERLIFETIMECURVESEPERATE\n		size*=vec3(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge));\n	#endif\n	#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n	    size*=vec3(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n	    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z)\n		,mix(getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxZ,normalizedAge),a_Random0.z));\n	#endif\n	return size;\n}\n#endif\n\nfloat computeParticleRotationFloat(in float rotation,in float age,in float normalizedAge)\n{ \n	#ifdef ROTATIONOVERLIFETIME\n		#ifdef ROTATIONOVERLIFETIMECONSTANT\n			float ageRot=u_ROLAngularVelocityConst*age;\n	        rotation+=ageRot;\n		#endif\n		#ifdef ROTATIONOVERLIFETIMECURVE\n			rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n		#endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n			float ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n	        rotation+=ageRot;\n	    #endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n			rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n		#endif\n	#endif\n	#ifdef ROTATIONOVERLIFETIMESEPERATE\n		#ifdef ROTATIONOVERLIFETIMECONSTANT\n			float ageRot=u_ROLAngularVelocityConstSeprarate.z*age;\n	        rotation+=ageRot;\n		#endif\n		#ifdef ROTATIONOVERLIFETIMECURVE\n			rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge);\n		#endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n			float ageRot=mix(u_ROLAngularVelocityConstSeprarate.z,u_ROLAngularVelocityConstMaxSeprarate.z,a_Random0.w)*age;\n	        rotation+=ageRot;\n	    #endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n			rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n		#endif\n	#endif\n	return rotation;\n}\n\n\n#if defined(RENDERMODE_MESH)&&(defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE))\nvec3 computeParticleRotationVec3(in vec3 rotation,in float age,in float normalizedAge)\n{ \n	#ifdef ROTATIONOVERLIFETIME\n	#ifdef ROTATIONOVERLIFETIMECONSTANT\n			float ageRot=u_ROLAngularVelocityConst*age;\n	        rotation+=ageRot;\n		#endif\n		#ifdef ROTATIONOVERLIFETIMECURVE\n			rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n		#endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n			float ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n	        rotation+=ageRot;\n	    #endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n			rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n		#endif\n	#endif\n	#ifdef ROTATIONOVERLIFETIMESEPERATE\n	#ifdef ROTATIONOVERLIFETIMECONSTANT\n			vec3 ageRot=u_ROLAngularVelocityConstSeprarate*age;\n	        rotation+=ageRot;\n		#endif\n		#ifdef ROTATIONOVERLIFETIMECURVE\n			rotation+=vec3(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge));\n		#endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n			vec3 ageRot=mix(u_ROLAngularVelocityConstSeprarate,u_ROLAngularVelocityConstMaxSeprarate,a_Random0.w)*age;\n	        rotation+=ageRot;\n	    #endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n			rotation+=vec3(mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxX,normalizedAge),a_Random0.w)\n	        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxY,normalizedAge),a_Random0.w)\n	        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n		#endif\n	#endif\n	return rotation;\n}\n#endif\n\nvec2 computeParticleUV(in vec2 uv,in float normalizedAge)\n{ \n	#ifdef TEXTURESHEETANIMATIONCURVE\n		float cycleNormalizedAge=normalizedAge*u_TSACycles;\n		float frame=getFrameFromGradient(u_TSAGradientUVs,cycleNormalizedAge-floor(cycleNormalizedAge));\n		float totalULength=frame*u_TSASubUVLength.x;\n		float floorTotalULength=floor(totalULength);\n	    uv.x+=totalULength-floorTotalULength;\n		uv.y+=floorTotalULength*u_TSASubUVLength.y;\n    #endif\n	#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n		float cycleNormalizedAge=normalizedAge*u_TSACycles;\n		float uvNormalizedAge=cycleNormalizedAge-floor(cycleNormalizedAge);\n	    float frame=floor(mix(getFrameFromGradient(u_TSAGradientUVs,uvNormalizedAge),getFrameFromGradient(u_TSAMaxGradientUVs,uvNormalizedAge),a_Random1.x));\n		float totalULength=frame*u_TSASubUVLength.x;\n		float floorTotalULength=floor(totalULength);\n	    uv.x+=totalULength-floorTotalULength;\n		uv.y+=floorTotalULength*u_TSASubUVLength.y;\n    #endif\n	return uv;\n}\n\nvoid main()\n{\n	float age = u_CurrentTime - a_DirectionTime.w;\n	float normalizedAge = age/a_ShapePositionStartLifeTime.w;\n	vec3 lifeVelocity;\n	if(normalizedAge<1.0){ \n	vec3 startVelocity=a_DirectionTime.xyz*a_StartSpeed;\n	#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n		lifeVelocity= computeParticleLifeVelocity(normalizedAge);//计算粒子生命周期速度\n	#endif \n	vec3 gravityVelocity=u_Gravity*age;\n	\n	vec4 worldRotation;\n	if(u_SimulationSpace==0)\n		worldRotation=a_SimulationWorldRotation;\n	else\n		worldRotation=u_WorldRotation;\n	\n	vec3 center=computeParticlePosition(startVelocity, lifeVelocity, age, normalizedAge,gravityVelocity,worldRotation);//计算粒子位置\n   \n   \n   #ifdef SPHERHBILLBOARD\n		vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        vec3 cameraUpVector =normalize(u_CameraUp);//TODO:是否外面归一化\n        vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n        vec3 upVector = normalize(cross(sideVector,u_CameraDirection));\n	    corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n		#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n			if(u_ThreeDStartRotation){\n				vec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z,age,normalizedAge));\n				center += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,rotation);\n			}\n			else{\n				float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n				float c = cos(rot);\n				float s = sin(rot);\n				mat2 rotation= mat2(c, -s, s, c);\n				corner=rotation*corner;\n				center += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n			}\n		#else\n			if(u_ThreeDStartRotation){\n				center += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,a_StartRotation0);\n			}\n			else{\n				float c = cos(a_StartRotation0.x);\n				float s = sin(a_StartRotation0.x);\n				mat2 rotation= mat2(c, -s, s, c);\n				corner=rotation*corner;\n				center += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n			}\n		#endif\n   #endif\n   \n   #ifdef STRETCHEDBILLBOARD\n	vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n	vec3 velocity;\n	#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n	    if(u_VOLSpaceType==0)\n		  velocity=rotationByQuaternions(u_SizeScale*(startVelocity+lifeVelocity),worldRotation)+gravityVelocity;\n	    else\n		  velocity=rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+lifeVelocity+gravityVelocity;\n    #else\n	    velocity= rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+gravityVelocity;\n    #endif	\n		vec3 cameraUpVector = normalize(velocity);\n		vec3 direction = normalize(center-u_CameraPosition);\n        vec3 sideVector = normalize(cross(direction,normalize(velocity)));\n		\n		sideVector=u_SizeScale.xzy*sideVector;\n		cameraUpVector=length(vec3(u_SizeScale.x,0.0,0.0))*cameraUpVector;\n		\n	    vec2 size=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n		\n	    const mat2 rotaionZHalfPI=mat2(0.0, -1.0, 1.0, 0.0);\n	    corner=rotaionZHalfPI*corner;\n	    corner.y=corner.y-abs(corner.y);\n		\n	    float speed=length(velocity);//TODO:\n	    center +=sign(u_SizeScale.x)*(sign(u_StretchedBillboardLengthScale)*size.x*corner.x*sideVector+(speed*u_StretchedBillboardSpeedScale+size.y*u_StretchedBillboardLengthScale)*corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef HORIZONTALBILLBOARD\n		vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        const vec3 cameraUpVector=vec3(0.0,0.0,1.0);\n	    const vec3 sideVector = vec3(-1.0,0.0,0.0);\n		\n		float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n        float c = cos(rot);\n        float s = sin(rot);\n        mat2 rotation= mat2(c, -s, s, c);\n	    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n		corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n        center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef VERTICALBILLBOARD\n		vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        const vec3 cameraUpVector =vec3(0.0,1.0,0.0);\n        vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n		\n		float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n        float c = cos(rot);\n        float s = sin(rot);\n        mat2 rotation= mat2(c, -s, s, c);\n	    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n		corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n        center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef RENDERMODE_MESH\n	    vec3 size=computeParticleSizeMesh(a_StartSize,normalizedAge);\n		#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n			if(u_ThreeDStartRotation){\n				vec3 rotation=vec3(a_StartRotation0.xy,-computeParticleRotationFloat(a_StartRotation0.z, age,normalizedAge));\n				center+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,rotation),worldRotation);\n			}\n			else{\n				#ifdef ROTATIONOVERLIFETIME\n					float angle=computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n					if(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n						center+= (rotationByQuaternions(rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),angle),worldRotation));//已验证\n					}\n					else{\n						#ifdef SHAPE\n							center+= u_SizeScale.xzy*(rotationByQuaternions(rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),angle),worldRotation));\n						#else\n							if(u_SimulationSpace==0)\n								center+=rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle);//已验证\n							else if(u_SimulationSpace==1)\n								center+=rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle),worldRotation);//已验证\n						#endif\n					}\n				#endif\n				#ifdef ROTATIONOVERLIFETIMESEPERATE\n					//TODO:是否应合并if(u_ThreeDStartRotation)分支代码,待测试\n					vec3 angle=computeParticleRotationVec3(vec3(0.0,0.0,a_StartRotation0.z), age,normalizedAge);\n					center+= (rotationByQuaternions(rotationByEuler(u_SizeScale*a_MeshPosition*size,vec3(angle.x,angle.y,angle.z)),worldRotation));//已验证\n				#endif	\n			}\n		#else\n			if(u_ThreeDStartRotation){\n				center+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,a_StartRotation0),worldRotation);//已验证\n			}\n			else{\n				if(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n					if(u_SimulationSpace==0)\n						center+= rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x);\n					else if(u_SimulationSpace==1)\n						center+= (rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x),worldRotation));//已验证\n				}\n				else{\n					#ifdef SHAPE\n						if(u_SimulationSpace==0)\n							center+= u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x);\n						else if(u_SimulationSpace==1)\n							center+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x),worldRotation);	\n					#else\n						if(u_SimulationSpace==0)\n							center+= rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x);\n						else if(u_SimulationSpace==1)\n							center+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x),worldRotation);//已验证\n					#endif\n				}\n			}\n		#endif\n		v_MeshColor=a_MeshColor;\n   #endif\n   \n    gl_Position=u_Projection*u_View*vec4(center,1.0);\n    v_Color = computeParticleColor(a_StartColor, normalizedAge);\n	#ifdef DIFFUSEMAP\n		#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n			v_TextureCoordinate =computeParticleUV(a_CornerTextureCoordinate.zw, normalizedAge);\n		#endif\n		#ifdef RENDERMODE_MESH\n			v_TextureCoordinate =computeParticleUV(a_MeshTextureCoordinate, normalizedAge);\n		#endif\n		\n		#ifdef TILINGOFFSET\n			v_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y)*u_TilingOffset.xy+vec2(u_TilingOffset.z,-u_TilingOffset.w);//需要特殊处理\n			v_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y);//需要特殊处理\n		#endif\n	#endif\n    v_Discard=0.0;\n	  \n	#ifdef FOG\n		v_PositionWorld=center;\n	#endif\n   }\n   else\n	{\n		v_Discard=1.0;\n	}\n}\n\n",
t="#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\nvarying float v_Discard;\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\nuniform vec4 u_Tintcolor;\n\n#ifdef RENDERMODE_MESH\n	varying vec4 v_MeshColor;\n#endif\n\n#ifdef FOG\n	varying vec3 v_PositionWorld;\n	uniform vec3 u_CameraPosition;\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	#ifdef ADDTIVEFOG\n	#else\n		uniform vec3 u_FogColor;\n	#endif\n#endif\n\n\nvoid main()\n{	\n	#ifdef RENDERMODE_MESH\n		gl_FragColor=v_MeshColor;\n	#else\n		gl_FragColor=vec4(1.0);	\n	#endif\n		\n	#ifdef DIFFUSEMAP\n		if(v_Discard!=0.0)\n			discard;\n		#ifdef TINTCOLOR\n			gl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*u_Tintcolor*2.0*v_Color;\n		#else\n			gl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n		#endif\n	#else\n		#ifdef TINTCOLOR\n			gl_FragColor*=u_Tintcolor*2.0*v_Color;\n		#else\n			gl_FragColor*=v_Color;\n		#endif\n	#endif\n	\n	#ifdef FOG\n		vec3 toEye=u_CameraPosition-v_PositionWorld;\n		float toEyeLength=length(toEye);\n		toEye/=toEyeLength;\n		\n		float lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n		#ifdef ADDTIVEFOG\n			gl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n		#else\n			gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n		#endif\n	#endif\n}",s=Id.add(d,e,t,i,n),NS.SHADERDEFINE_DIFFUSEMAP=s.registerMaterialDefine("DIFFUSEMAP"),NS.SHADERDEFINE_TINTCOLOR=s.registerMaterialDefine("TINTCOLOR"),NS.SHADERDEFINE_ADDTIVEFOG=s.registerMaterialDefine("ADDTIVEFOG"),NS.SHADERDEFINE_TILINGOFFSET=s.registerMaterialDefine("TILINGOFFSET"),Ww.SHADERDEFINE_RENDERMODE_BILLBOARD=s.registerSpriteDefine("SPHERHBILLBOARD"),Ww.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=s.registerSpriteDefine("STRETCHEDBILLBOARD"),Ww.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=s.registerSpriteDefine("HORIZONTALBILLBOARD"),Ww.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=s.registerSpriteDefine("VERTICALBILLBOARD"),Ww.SHADERDEFINE_COLOROVERLIFETIME=s.registerSpriteDefine("COLOROVERLIFETIME"),Ww.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=s.registerSpriteDefine("RANDOMCOLOROVERLIFETIME"),Ww.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=s.registerSpriteDefine("VELOCITYOVERLIFETIMECONSTANT"),Ww.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=s.registerSpriteDefine("VELOCITYOVERLIFETIMECURVE"),Ww.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=s.registerSpriteDefine("VELOCITYOVERLIFETIMERANDOMCONSTANT"),Ww.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=s.registerSpriteDefine("VELOCITYOVERLIFETIMERANDOMCURVE"),Ww.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=s.registerSpriteDefine("TEXTURESHEETANIMATIONCURVE"),Ww.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=s.registerSpriteDefine("TEXTURESHEETANIMATIONRANDOMCURVE"),Ww.SHADERDEFINE_ROTATIONOVERLIFETIME=s.registerSpriteDefine("ROTATIONOVERLIFETIME"),Ww.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=s.registerSpriteDefine("ROTATIONOVERLIFETIMESEPERATE"),Ww.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=s.registerSpriteDefine("ROTATIONOVERLIFETIMECONSTANT"),Ww.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=s.registerSpriteDefine("ROTATIONOVERLIFETIMECURVE"),Ww.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=s.registerSpriteDefine("ROTATIONOVERLIFETIMERANDOMCONSTANTS"),Ww.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=s.registerSpriteDefine("ROTATIONOVERLIFETIMERANDOMCURVES"),Ww.SHADERDEFINE_SIZEOVERLIFETIMECURVE=s.registerSpriteDefine("SIZEOVERLIFETIMECURVE"),Ww.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=s.registerSpriteDefine("SIZEOVERLIFETIMECURVESEPERATE"),Ww.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=s.registerSpriteDefine("SIZEOVERLIFETIMERANDOMCURVES"),Ww.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=s.registerSpriteDefine("SIZEOVERLIFETIMERANDOMCURVESSEPERATE"),Ww.SHADERDEFINE_RENDERMODE_MESH=s.registerSpriteDefine("RENDERMODE_MESH"),Ww.SHADERDEFINE_SHAPE=s.registerSpriteDefine("SHAPE"),i={a_Position:0,a_Texcoord0:2,a_Time:33},n={u_Texture:[1,1],u_Albedo:[2,1],u_Color:[3,1],u_CurrentTime:[2,2],u_Duration:[3,2],u_MvpMatrix:[1,2]};var p=CS.nameKey.add("GLITTER");e="attribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\nattribute float a_Time;\n\nuniform mat4 u_MvpMatrix;\nuniform  float u_CurrentTime;\nuniform  vec4 u_Color;\nuniform float u_Duration;\n\nvarying vec2 v_Texcoord;\nvarying vec4 v_Color;\n\n\nvoid main()\n{\n  gl_Position = u_MvpMatrix * a_Position;\n  \n  float age = u_CurrentTime-a_Time;\n  float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   \n  v_Texcoord=a_Texcoord0;\n  \n  v_Color=u_Color;\n  v_Color.a*=1.0-normalizedAge;\n}\n",t="#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nuniform vec4 u_Albedo;\nuniform sampler2D u_Texture;\n\nvarying vec2 v_Texcoord;\nvarying vec4 v_Color;\n\n\nvoid main()\n{	\n  gl_FragColor=texture2D(u_Texture, v_Texcoord)*v_Color;\n  gl_FragColor=gl_FragColor*u_Albedo;\n}\n\n",s=Id.add(p,e,t,i,n),i={a_Position:0},n={u_Intensity:[1,1],u_AlphaBlending:[2,1],u_CubeTexture:[3,1],u_MvpMatrix:[4,3]};var f=CS.nameKey.add("SkyBox");e="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\nvarying vec3 v_Texcoord;\n\n\nvoid main()\n{\n  gl_Position = (u_MvpMatrix*a_Position).xyww;\n  v_Texcoord=a_Position.xyz;\n}\n",t="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_Intensity;\nuniform float u_AlphaBlending;\nuniform samplerCube u_CubeTexture;\n\nvarying vec3 v_Texcoord;\n\n\nvoid main()\n{	\n  gl_FragColor=vec4(textureCube(u_CubeTexture, v_Texcoord).rgb*u_Intensity,u_AlphaBlending);\n}\n\n",Id.add(f,e,t,i,n),i={a_Position:0,a_Texcoord0:2},n={u_Intensity:[1,1],u_AlphaBlending:[2,1],u_texture:[3,1],u_MvpMatrix:[4,3]};var _=CS.nameKey.add("SkyDome");e="attribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\nuniform mat4 u_MvpMatrix;\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{\n  gl_Position = (u_MvpMatrix*a_Position).xyww;\n  v_Texcoord = a_Texcoord0;\n}\n",t="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_Intensity;\nuniform float u_AlphaBlending;\nuniform sampler2D u_texture;\n\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{	\n  gl_FragColor=vec4(texture2D(u_texture, v_Texcoord).rgb*u_Intensity,u_AlphaBlending);\n}\n\n",Id.add(_,e,t,i,n),i={a_Position:0,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15},n={u_MvpMatrix:[1,2],u_WorldMat:[0,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_SplatAlphaTexture:[0,1],u_NormalTexture:[1,1],u_DiffuseTexture1:[2,1],u_DiffuseTexture2:[3,1],u_DiffuseTexture3:[4,1],u_DiffuseTexture4:[5,1],u_DiffuseScale1:[6,1],u_DiffuseScale2:[7,1],u_DiffuseScale3:[8,1],u_DiffuseScale4:[9,1],u_MaterialDiffuse:[11,1],u_MaterialAmbient:[10,1],u_MaterialSpecular:[12,1],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var m=CS.nameKey.add("Terrain");e="attribute vec4 a_Position;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n	attribute vec3 a_Normal;\n	varying vec3 v_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n	uniform mat4 u_WorldMat;\n	varying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef LIGHTMAP\n	uniform vec4 u_LightmapScaleOffset;\n	varying vec2 v_LightMapUV;\n#endif\n\nattribute vec2 a_Texcoord0;\nattribute vec2 a_Texcoord1;\nvarying vec2 v_Texcoord0;\nvarying vec2 v_Texcoord1;\nuniform mat4 u_MvpMatrix;\n\nvoid main()\n{\n	gl_Position = u_MvpMatrix * a_Position;\n	v_Texcoord0=a_Texcoord0;\n	v_Texcoord1=a_Texcoord1;\n	\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	v_Normal=a_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n	v_PositionWorld=(u_WorldMat*a_Position).xyz;\n#endif\n\n#ifdef LIGHTMAP\n	//这个地方使用a_Normal 并不是真的代表normal，其实凑巧法线图的uv正好是符合 light_Map的UV\n	v_LightMapUV=vec2(a_Normal.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,(a_Normal.y-1.0)*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n#endif\n\n#ifdef RECEIVESHADOW\n	v_posViewZ = gl_Position.w;\n	#ifdef SHADOWMAP_PSSM1\n		v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n	#endif\n#endif\n\n}",t='#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	uniform vec3 u_MaterialDiffuse;\n	uniform vec4 u_MaterialSpecular;\n	uniform vec3 u_CameraPos;\n	varying vec3 v_Normal;\n	varying vec3 v_PositionWorld;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n	uniform vec3 u_MaterialAmbient;\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	uniform vec3 u_FogColor;\n#endif\n\n\n#ifdef DIRECTIONLIGHT\n	uniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n	uniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n	uniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n	uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n	varying vec4 v_lightMVPPos;\n	#endif\n#endif\nvarying float v_posViewZ;\n\n\nuniform sampler2D u_SplatAlphaTexture;\nuniform sampler2D u_NormalTexture;\nuniform sampler2D u_DiffuseTexture1;\nuniform sampler2D u_DiffuseTexture2;\nuniform sampler2D u_DiffuseTexture3;\nuniform sampler2D u_DiffuseTexture4;\nuniform vec2 u_DiffuseScale1;\nuniform vec2 u_DiffuseScale2;\nuniform vec2 u_DiffuseScale3;\nuniform vec2 u_DiffuseScale4;\nvarying vec2 v_Texcoord0;\nvarying vec2 v_Texcoord1;\n\n#ifdef LIGHTMAP\n	uniform sampler2D u_LightMap;\n	varying vec2 v_LightMapUV;\n#endif\n\nvoid main()\n{\n#ifdef DETAIL_NUM1\n	vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n	vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n	gl_FragColor.xyz = color1.xyz;\n#endif\n#ifdef DETAIL_NUM2\n	vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n	vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n	vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n	gl_FragColor.xyz = color1.xyz * (1.0-splatAlpha.r) + color2.xyz * splatAlpha.r;\n#endif\n#ifdef DETAIL_NUM3\n	vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n	vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n	vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord1/u_DiffuseScale3);\n	vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n	gl_FragColor.xyz = color1.xyz * (1.0-(splatAlpha.r+splatAlpha.g)) + color2.xyz * splatAlpha.r + color3.xyz * splatAlpha.g;\n#endif\n#ifdef DETAIL_NUM4\n	vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n	vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n	vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord1/u_DiffuseScale3);\n	vec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord1/u_DiffuseScale4);\n	vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n	gl_FragColor.xyz = color1.xyz * (1.0-(splatAlpha.r+splatAlpha.g+splatAlpha.b))+ color2.xyz * splatAlpha.r + color3.xyz * splatAlpha.g + color4.xyz * splatAlpha.b;\n#endif\n	gl_FragColor.w = splatAlpha.a;\n		\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n    vec3 normal = texture2D(u_NormalTexture,v_Normal.xy).xyz;\n	normal = normal*2.0 - vec3(1.0);\n	vec3 diffuse = vec3(0.0);\n	vec3 ambient = vec3(0.0);\n	vec3 specular= vec3(0.0);\n	vec3 dif, amb, spe;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)\n	vec3 toEye;\n	#ifdef FOG\n		toEye=u_CameraPos-v_PositionWorld;\n		float toEyeLength=length(toEye);\n		toEye/=toEyeLength;\n	#else\n		toEye=normalize(u_CameraPos-v_PositionWorld);\n	#endif\n#endif\n\n#ifdef DIRECTIONLIGHT\n	computeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n	computePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n	ComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n	float shadowValue = 1.0;\n	#ifdef SHADOWMAP_PSSM3\n		shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif\n	#ifdef SHADOWMAP_PSSM2\n		shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif \n	#ifdef SHADOWMAP_PSSM1\n		shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n	#endif\n#endif\n\n#ifdef LIGHTMAP\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb);\n	#else\n		#if defined(RECEIVESHADOW)\n			gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n		#else\n			gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb);\n		#endif\n	#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	#ifdef RECEIVESHADOW\n		gl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular * shadowValue,gl_FragColor.a);\n	#else\n		gl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular, gl_FragColor.a);\n	#endif\n#endif\n\n#ifdef FOG\n	float lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n	gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\n';var g=Id.add(m,e,t,i,n);BS.SHADERDEFINE_DETAIL_NUM1=g.registerMaterialDefine("DETAIL_NUM1"),BS.SHADERDEFINE_DETAIL_NUM2=g.registerMaterialDefine("DETAIL_NUM2"),BS.SHADERDEFINE_DETAIL_NUM4=g.registerMaterialDefine("DETAIL_NUM4"),BS.SHADERDEFINE_DETAIL_NUM3=g.registerMaterialDefine("DETAIL_NUM3"),i={a_Position:0,a_Normal:3,a_Texcoord0:2},n={u_MvpMatrix:[1,2],u_WorldMat:[0,2],u_CameraPos:[0,3],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_SplatAlphaTexture:[0,1],u_DiffuseTexture1:[1,1],u_DiffuseTexture2:[2,1],u_DiffuseTexture3:[3,1],u_DiffuseTexture4:[4,1],u_DiffuseTexture5:[5,1],u_DiffuseScaleOffset1:[6,1],u_DiffuseScaleOffset2:[7,1],u_DiffuseScaleOffset3:[8,1],u_DiffuseScaleOffset4:[9,1],u_DiffuseScaleOffset5:[10,1],u_MaterialAlbedo:[14,1],u_MaterialDiffuse:[12,1],u_MaterialAmbient:[11,1],u_MaterialSpecular:[13,1],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var v=CS.nameKey.add("ExtendTerrain");e="attribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\n\nvarying vec2 v_Texcoord0;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n	attribute vec3 a_Normal;\n	varying vec3 v_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n	uniform mat4 u_WorldMat;\n	varying vec3 v_PositionWorld;\n#endif\n\n#ifdef LIGHTMAP\n	varying vec2 v_LightMapUV;\n	uniform vec4 u_LightmapScaleOffset;\n#endif\n\n#ifdef RECEIVESHADOW\n	varying float v_posViewZ;\n	#ifdef SHADOWMAP_PSSM1 \n		varying vec4 v_lightMVPPos;\n		uniform mat4 u_lightShadowVP[4];\n	#endif\n#endif\n\nvoid main()\n{\n	gl_Position = u_MvpMatrix * a_Position;\n  \n	v_Texcoord0 = a_Texcoord0;\n  \n	#ifdef LIGHTMAP\n		v_LightMapUV = vec2(a_Texcoord0.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,(a_Texcoord0.y-1.0)*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n	#endif\n  \n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		v_Normal = a_Normal;\n	#endif\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n		v_PositionWorld=(u_WorldMat*a_Position).xyz;\n	#endif\n\n	#ifdef RECEIVESHADOW\n		v_posViewZ = gl_Position.w;\n		#ifdef SHADOWMAP_PSSM1\n			v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n		#endif\n	#endif\n}",t='#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)\n	uniform vec3 u_MaterialDiffuse;\n	uniform vec4 u_MaterialSpecular;\n	uniform vec3 u_CameraPos;\n	varying vec3 v_Normal;\n	varying vec3 v_PositionWorld;\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	uniform vec3 u_FogColor;\n#endif\n\n\n#ifdef DIRECTIONLIGHT\n	uniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n	uniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n	uniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n	uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n	varying vec4 v_lightMVPPos;\n	#endif\n#endif\nvarying float v_posViewZ;\n\n\nuniform sampler2D u_SplatAlphaTexture;\n\nuniform sampler2D u_DiffuseTexture1;\nuniform sampler2D u_DiffuseTexture2;\nuniform sampler2D u_DiffuseTexture3;\nuniform sampler2D u_DiffuseTexture4;\nuniform sampler2D u_DiffuseTexture5;\n\nuniform vec4 u_DiffuseScaleOffset1;\nuniform vec4 u_DiffuseScaleOffset2;\nuniform vec4 u_DiffuseScaleOffset3;\nuniform vec4 u_DiffuseScaleOffset4;\nuniform vec4 u_DiffuseScaleOffset5;\n\nvarying vec2 v_Texcoord0;\n\nuniform vec3 u_MaterialAmbient;\nuniform vec4 u_MaterialAlbedo;\n\n#ifdef LIGHTMAP\n	uniform sampler2D u_LightMap;\n	varying vec2 v_LightMapUV;\n#endif\n\nvoid main()\n{\n	#ifdef ExtendTerrain_DETAIL_NUM1\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r;\n	#endif\n	#ifdef ExtendTerrain_DETAIL_NUM2\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r + color2.xyz * (1.0 - splatAlpha.r);\n	#endif\n	#ifdef ExtendTerrain_DETAIL_NUM3\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n		vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * (1.0 - splatAlpha.r - splatAlpha.g);\n	#endif\n	#ifdef ExtendTerrain_DETAIL_NUM4\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n		vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n		vec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord0 * u_DiffuseScaleOffset4.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * splatAlpha.b + color4.xyz * (1.0 - splatAlpha.r - splatAlpha.g - splatAlpha.b);\n	#endif\n	#ifdef ExtendTerrain_DETAIL_NUM5\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n		vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n		vec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord0 * u_DiffuseScaleOffset4.xy);\n		vec4 color5 = texture2D(u_DiffuseTexture5, v_Texcoord0 * u_DiffuseScaleOffset5.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * splatAlpha.b + color4.xyz * splatAlpha.a + color5.xyz * (1.0 - splatAlpha.r - splatAlpha.g - splatAlpha.b - splatAlpha.a);\n	#endif\n		gl_FragColor.w = splatAlpha.a;\n		\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n    vec3 normal = v_Normal;\n	vec3 diffuse = vec3(0.0);\n	vec3 ambient = vec3(0.0);\n	vec3 specular= vec3(0.0);\n	vec3 dif, amb, spe;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)\n	vec3 toEye;\n	#ifdef FOG\n		toEye=u_CameraPos-v_PositionWorld;\n		float toEyeLength=length(toEye);\n		toEye/=toEyeLength;\n	#else\n		toEye=normalize(u_CameraPos-v_PositionWorld);\n	#endif\n#endif\n\n#ifdef DIRECTIONLIGHT\n	computeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n	computePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n	ComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n	float shadowValue = 1.0;\n	#ifdef SHADOWMAP_PSSM3\n		shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif\n	#ifdef SHADOWMAP_PSSM2\n		shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif \n	#ifdef SHADOWMAP_PSSM1\n		shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n	#endif\n#endif\n\n#ifdef LIGHTMAP\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb);\n	#else\n		#if defined(RECEIVESHADOW)		\n			gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n			//vec3 tColor= u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue + mix(vec3(0.15,0.15,0.15),vec3(0.0),shadowValue);\n			//gl_FragColor.rgb*=tColor;\n		#else\n			gl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb);\n		#endif\n	#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_MaterialAlbedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	#ifdef RECEIVESHADOW\n		gl_FragColor = vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular * shadowValue,gl_FragColor.a);\n	#else\n		gl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular, gl_FragColor.a);\n	#endif\n#endif\n\n#ifdef FOG\n	float lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n	gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\n\n\n\n\n';var y=Id.add(v,e,t,i,n);y.addSpriteDefines(_w.shaderDefines),y.addMaterialDefines(PS.shaderDefines),i={a_Position:0,a_OffsetVector:41,a_Texcoord0X:38,a_Texcoord0Y:40,a_BirthTime:33},n={u_MvpMatrix:[1,2],u_VMatrix:[1,3],u_PMatrix:[2,3],u_TilingOffset:[3,1],u_MainTexture:[1,1],u_MainColor:[2,1],u_CurTime:[3,2],u_LifeTime:[4,2],u_WidthCurve:[5,2],u_WidthCurveKeyLength:[6,2],u_GradientColorkey:[7,2],u_GradientAlphakey:[8,2]};var b=CS.nameKey.add("Trail");e="attribute vec3 a_Position;\nattribute vec3 a_OffsetVector;\nattribute vec4 a_Color;\nattribute float a_Texcoord0X;\nattribute float a_Texcoord0Y;\nattribute float a_BirthTime;\n\nuniform mat4 u_VMatrix;\nuniform mat4 u_PMatrix;\n\nuniform vec4 u_TilingOffset;\n\nuniform float u_CurTime;\nuniform float u_LifeTime;\nuniform vec4 u_WidthCurve[10];\nuniform int u_WidthCurveKeyLength;\n\nuniform vec4 u_GradientColorkey[10];\nuniform vec2 u_GradientAlphakey[10];\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nfloat hermiteInterpolate(float t, float outTangent, float inTangent, float duration, float value1, float value2)\n{\n	float t2 = t * t;\n	float t3 = t2 * t;\n	float a = 2.0 * t3 - 3.0 * t2 + 1.0;\n	float b = t3 - 2.0 * t2 + t;\n	float c = t3 - t2;\n	float d = -2.0 * t3 + 3.0 * t2;\n	return a * value1 + b * outTangent * duration + c * inTangent * duration + d * value2;\n}\n\nfloat getCurWidth(in float normalizeTime)\n{\n	if(normalizeTime == 0.0){\n		return u_WidthCurve[0].w;\n	}\n	else if(normalizeTime >= 1.0){\n		return u_WidthCurve[u_WidthCurveKeyLength - 1].w;\n	}\n	else{\n		for(int i = 0; i < 10; i ++ )\n		{\n			if(normalizeTime == u_WidthCurve[i].x)\n			{\n				return u_WidthCurve[i].w;\n			}\n			\n			vec4 lastFrame = u_WidthCurve[i];\n			vec4 nextFrame = u_WidthCurve[i + 1];\n			if(normalizeTime > lastFrame.x && normalizeTime < nextFrame.x)\n			{\n				float duration = nextFrame.x - lastFrame.x;\n				float t = (normalizeTime - lastFrame.x) / duration;\n				float outTangent = lastFrame.z;\n				float inTangent = nextFrame.y;\n				float value1 = lastFrame.w;\n				float value2 = nextFrame.w;\n				return hermiteInterpolate(t, outTangent, inTangent, duration, value1, value2);\n			}\n		}	\n	}\n}	\n\nvec4 getColorFromGradientByBlend(in vec4 gradientColors[10], in vec2 gradientAlphas[10], in float normalizeTime)\n{\n	vec4 color;\n	for(int i = 1; i < 10; i++)\n	{\n		vec4 gradientColor = gradientColors[i];\n		float colorKey = gradientColor.w;\n		if(colorKey >= normalizeTime)\n		{\n			vec4 lastGradientColor = gradientColors[i-1];\n			float lastColorKey = lastGradientColor.w;\n			float age = (normalizeTime - lastColorKey) / (colorKey - lastColorKey);\n			color.rgb = mix(gradientColors[i-1].xyz, gradientColor.xyz, age);\n			break;\n		}\n	}\n	for(int i = 1; i < 10; i++)\n	{\n		vec2 gradientAlpha = gradientAlphas[i];\n		float alphaKey = gradientAlpha.y;\n		if(alphaKey >= normalizeTime)\n		{\n			vec2 lastGradientAlpha = gradientAlphas[i-1];\n			float lastAlphaKey = lastGradientAlpha.y;\n			float age = (normalizeTime - lastAlphaKey) / (alphaKey - lastAlphaKey);\n			color.a = mix(lastGradientAlpha.x, gradientAlpha.x, age);\n			break;\n		}\n	}\n	return color;\n}\n\nvec4 getColorFromGradientByFixed(in vec4 gradientColors[10], in vec2 gradientAlphas[10], in float normalizeTime)\n{\n	vec4 color;\n	for(int i = 1; i < 10; i++)\n	{\n		vec4 gradientColor = gradientColors[i];\n		if(gradientColor.w >= normalizeTime)\n		{\n			color.rgb = gradientColor.xyz;\n			break;\n		}\n	}\n	for(int i = 1; i < 10; i++)\n	{\n		vec2 gradientAlpha = gradientAlphas[i];\n		if(gradientAlpha.y >= normalizeTime)\n		{\n			color.a = gradientAlpha.x;\n			break;\n		}\n	}\n	return color;\n}\n\nvoid main()\n{\n	float normalizeTime = (u_CurTime - a_BirthTime) / u_LifeTime;\n	\n	gl_Position = u_PMatrix * u_VMatrix * vec4(a_Position + a_OffsetVector * getCurWidth(normalizeTime),1.0);\n	\n	#ifdef TILINGOFFSET\n		v_Texcoord0 = (vec2(a_Texcoord0X, a_Texcoord0Y) * u_TilingOffset.xy) + u_TilingOffset.zw;\n	#else\n		v_Texcoord0 = vec2(a_Texcoord0X, a_Texcoord0Y);\n	#endif\n	\n	#ifdef GRADIENTMODE_BLEND\n		v_Color = getColorFromGradientByBlend(u_GradientColorkey, u_GradientAlphakey, normalizeTime);\n	#else\n		v_Color = getColorFromGradientByFixed(u_GradientColorkey, u_GradientAlphakey, normalizeTime);\n	#endif\n}\n\n\n\n",t="#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nuniform sampler2D u_MainTexture;\nuniform vec4 u_MainColor;\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nvoid main()\n{	\n	vec4 color = 2.0 * u_MainColor * v_Color;\n	#ifdef DIFFUSETEXTURE\n		vec4 mainTextureColor = texture2D(u_MainTexture, v_Texcoord0);\n		color *= mainTextureColor;\n	#endif\n	gl_FragColor = color;\n}\n\n";var E=Id.add(b,e,t,i,n);TS.SHADERDEFINE_DIFFUSETEXTURE=E.registerMaterialDefine("DIFFUSETEXTURE"),TS.SHADERDEFINE_TILINGOFFSET=E.registerSpriteDefine("TILINGOFFSET"),Uw.SHADERDEFINE_GRADIENTMODE_BLEND=E.registerSpriteDefine("GRADIENTMODE_BLEND")},e}(),yl=(function(){function e(){this._alphaBlending=1,this._colorIntensity=1,this._shaderValue=new gl}o(e,"laya.d3.resource.models.Sky");var t=e.prototype;return t._setEnvironmentDiffuse=function(){this._environmentDiffuse.loaded?this.__ownerCamera._shaderValues.setValue(7,this._environmentDiffuse):this._environmentDiffuse.on("loaded",this,this._environmentDiffuseLoaded)},t._setEnvironmentSpecular=function(){if(this._environmentSpecular.loaded){var e=this._environmentSpecular.simLodInfo;e&&e instanceof Float32Array&&this.__ownerCamera._shaderValues.setValue(9,e),this.__ownerCamera._shaderValues.setValue(8,this._environmentSpecular)}else this._environmentSpecular.on("loaded",this,this._environmentSpecularLoaded)},t._environmentDiffuseLoaded=function(){this.__ownerCamera._shaderValues.setValue(7,this._environmentDiffuse)},t._environmentSpecularLoaded=function(){var e=this._environmentSpecular.simLodInfo;e&&e instanceof Float32Array&&this.__ownerCamera._shaderValues.setValue(9,e),this.__ownerCamera._shaderValues.setValue(8,this._environmentSpecular)},t._render=function(e){},t.destroy=function(){this.__ownerCamera=null},s(0,t,"envDiffuseSHRed",null,function(e){this.__ownerCamera._shaderValues.setValue(10,e)}),s(0,t,"envDiffuseSHBlue",null,function(e){this.__ownerCamera._shaderValues.setValue(12,e)}),s(0,t,"environmentDiffuse",function(){return this._environmentDiffuse},function(e){e.minFifter=9728,this._environmentDiffuse=e,this.__ownerCamera&&this._setEnvironmentDiffuse()}),s(0,t,"environmentSpecular",function(){return this._environmentSpecular},function(e){this._environmentSpecular=e,this.__ownerCamera&&this._setEnvironmentSpecular()}),s(0,t,"colorIntensity",function(){return this._colorIntensity},function(e){this._colorIntensity=e,this._colorIntensity<0&&(this._colorIntensity=0)}),s(0,t,"envDiffuseSHGreen",null,function(e){this.__ownerCamera._shaderValues.setValue(11,e)}),s(0,t,"alphaBlending",function(){return this._alphaBlending},function(e){this._alphaBlending=e,this._alphaBlending<0&&(this._alphaBlending=0),this._alphaBlending>1&&(this._alphaBlending=1);
}),s(0,t,"_ownerCamera",null,function(e){this.__ownerCamera=e,this._environmentDiffuse&&this._setEnvironmentDiffuse(),this._environmentSpecular&&this._setEnvironmentSpecular()}),e.MVPMATRIX=0,e.INTENSITY=1,e.ALPHABLENDING=2,e.DIFFUSETEXTURE=3,e}(),function(){function e(e){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=e,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}o(e,"laya.d3.resource.models.SubMesh");var t=e.prototype;return i.imps(t,{"laya.resource.IDispose":!0,"laya.d3.core.render.IRenderable":!0}),t._getVertexBuffer=function(e){return void 0===e&&(e=0),0===e?this._vertexBuffer:null},t._getIndexBuffer=function(){return this._indexBuffer},t._getStaticBatchBakedVertexs=function(t,i){var n,o,s=4,r=this._vertexBuffer,a=r.vertexDeclaration,l=a.getVertexElementByUsage(0).offset/s,h=a.getVertexElementByUsage(3).offset/s,c=i.meshRender.lightmapScaleOffset,u=0,d=0,p=0,f=0,_=0,m=0;if(c)if(o=a.getVertexElementByUsage(15))p=a.vertexStride/s,n=this._vertexCount>0?r.getData().slice(this._vertexStart*p,(this._vertexStart+this._vertexCount)*p):r.getData().slice(),f=o.offset/s;else{m=a.vertexStride/s,p=m+2,n=this._vertexCount?new Float32Array(this._vertexCount*(r.vertexDeclaration.vertexStride/s+2)):new Float32Array(r.vertexCount*(r.vertexDeclaration.vertexStride/s+2)),_=a.getVertexElementByUsage(2).offset/s,f=_+2;var g=r.getData();for(u=0,d=g.length/m;d>u;u++){var v=0;v=this._vertexCount>0?(this._vertexStart+u)*m:u*m;var y=u*p,b=0;for(b=0;f>b;b++)n[y+b]=g[v+b];for(b=f;m>b;b++)n[y+b+2]=g[v+b]}}else p=a.vertexStride/s,n=this._vertexCount?r.getData().slice(this._vertexStart*p,(this._vertexStart+this._vertexCount)*p):r.getData().slice();if(t){var E=t.worldMatrix,x=e._tempMatrix4x40;E.invert(x);var S=e._tempMatrix4x41,w=i.transform.worldMatrix;ol.multiply(x,w,S)}else S=i.transform.worldMatrix;var C=e._tempQuaternion0;for(S.decomposeTransRotScale(e._tempVector30,C,e._tempVector31),u=0,d=n.length/p;d>u;u++){var T=u*p+l,I=u*p+h;if(Ya.transformVector3ArrayToVector3ArrayCoordinate(n,T,S,n,T),Ya.transformVector3ArrayByQuat(n,I,C,n,I),c){var A=u*p+f;if(o)Ya.transformLightingMapTexcoordByUV1Array(n,A,c,n,A);else{var N=u*m+_;Ya.transformLightingMapTexcoordByUV0Array(g,N,c,n,A)}}}return n},t._getVertexBuffers=function(){return null},t._beforeRender=function(e){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},t._render=function(e){var t,i=0,n=e.renderElement;if(this._indexCount>1){var o=this._boneIndicesList.length;if(o>1){for(var s=0;o>s;s++)t=n._skinAnimationDatas||this._skinAnimationDatas,t&&(n._shaderValue.setValue(0,t[s]),e._shader.uploadRenderElementUniforms(n._shaderValue.data)),ur.mainContext.drawElements(4,this._subIndexBufferCount[s],5123,2*this._subIndexBufferStart[s]);Nr.drawCall+=o}else t=n._skinAnimationDatas||this._skinAnimationDatas,t&&(n._shaderValue.setValue(0,t[0]),e._shader.uploadRenderElementUniforms(n._shaderValue.data)),ur.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),Nr.drawCall++;i=this._indexCount}else i=this._indexBuffer.indexCount,t=n._skinAnimationDatas||this._skinAnimationDatas,t&&(n._shaderValue.setValue(0,t[0]),e._shader.uploadRenderElementUniforms(n._shaderValue.data)),ur.mainContext.drawElements(4,i,5123,0),Nr.drawCall++;Nr.trianglesFaces+=i/3},t.getIndices=function(){return this._indexCount>0?this._indices:this._indexBuffer.getData()},t.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},s(0,t,"triangleCount",function(){return this._indexBuffer.indexCount/3}),s(0,t,"_vertexBufferCount",function(){return 1}),n(e,["_tempVector30",function(){return this._tempVector30=new rl},"_tempVector31",function(){return this._tempVector31=new rl},"_tempQuaternion0",function(){return this._tempQuaternion0=new cl},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new ol},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new ol}]),e}()),El=function(){function e(e,t,i,n,o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate0=n,this._textureCoordinate1=o}o(e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(56,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector2",15)])}]),e}(),xl=function(){function e(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}o(e,"laya.d3.graphics.DynamicBatchManager");var t=e.prototype;return t.getDynamicBatch=function(e,t){var i,n=e.id.toString()+t;return this._dynamicBatches[n]?i=this._dynamicBatches[n]:this._dynamicBatches[n]=i=new ph(e),i},t._garbageCollection=function(){for(var e in this._dynamicBatches)0===this._dynamicBatches[e].combineRenderElementsCount&&delete this._dynamicBatches[e]},t._addPrepareRenderElement=function(e){this._prepareDynamicBatchCombineElements.push(e)},t._finishCombineDynamicBatch=function(t){this._prepareDynamicBatchCombineElements.sort(e._sortPrepareDynamicBatch);for(var i,n,o,s,r,a,l,h,c=-1,u=!0,d=0,p=-1,f=0,_=this._prepareDynamicBatchCombineElements.length;_>f;f++){r=this._prepareDynamicBatchCombineElements[f];var m=r.renderObj._getVertexBuffer(0).vertexDeclaration,g=n!==m;g&&(d=0,n=m);var v=d!==c;if(v&&(c=d),(g||v)&&(a=this.getDynamicBatch(m,d),i=null),u)if(a._addCombineRenderObjTest(r)){if(s=r._material,i!==s)l&&(t.getRenderQueue(h._material.renderQueue)._addRenderElement(h),l=null,h=null,p=-1),l=s,p=a.combineRenderElementsCount,h=r,i=s;else if(l){var y=h.renderObj,b=r.renderObj;y._getVertexBuffer().vertexCount+b._getVertexBuffer().vertexCount>ph.maxVertexCount||y._getIndexBuffer().indexCount+b._getIndexBuffer().indexCount>ph.maxIndexCount?(t.getRenderQueue(h._material.renderQueue)._addRenderElement(h),l=s,p=a.combineRenderElementsCount,h=r):(a._addCombineMaterial(l),a._addMaterialToRenderElementOffset(p),a._addCombineRenderObj(h),l=null,h=null,p=-1,a._addCombineRenderObj(r))}else a._addCombineRenderObj(r);u=!0}else l&&(t.getRenderQueue(h._material.renderQueue)._addRenderElement(h),l=null,h=null,p=-1),d++,u=!1;else o=this._prepareDynamicBatchCombineElements[f-1],a._addMaterialToRenderElementOffset(a.combineRenderElementsCount),i=o._material,a._addCombineMaterial(i),a._addCombineRenderObj(o),u=!0,s=r._material,i!==s?(l=s,p=a.combineRenderElementsCount,h=r):a._addCombineRenderObj(r),i=s}l&&(t.getRenderQueue(h._material.renderQueue)._addRenderElement(h),l=null,h=null,p=-1),this._prepareDynamicBatchCombineElements.length=0},t._clearRenderElements=function(){for(var e in this._dynamicBatches)this._dynamicBatches[e]._clearRenderElements()},t._addToRenderQueue=function(e,t,i,n){for(var o in this._dynamicBatches){var s=this._dynamicBatches[o];s.combineRenderElementsCount>0&&s._addToRenderQueue(e,t,i,n)}},t.dispose=function(){this._dynamicBatches=null},e._sortPrepareDynamicBatch=function(e,t){return e._mainSortID-t._mainSortID},e}(),Sl=function(){function e(e,t,i,n,o,s,r,a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate0=n,this._textureCoordinate1=o,this._tangent=s,this._blendIndex=r,this._blendWeight=a}o(e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(104,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector2",15),new Jl(56,"vector4",7),new Jl(72,"vector4",6),new Jl(88,"vector4",5)])}]),e}(),wl=function(){function e(e,t,i){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e,this._normal=t,this._textureCoordinate=i}o(e,"laya.d3.graphics.VertexPositionNormalTexture");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(32,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2)])}]),e}(),Cl=function(){function e(e,t,i,n,o,s){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._tangent=n,this._blendIndex=o,this._blendWeight=s}o(e,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(88,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector4",7),new Jl(56,"vector4",6),new Jl(72,"vector4",5)])}]),e}(),Tl=function(){function e(e,t,i,n,o){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=e,this._normal=t,this._textureCoordinate=i,this._blendIndex=n,this._blendWeight=o}o(e,"laya.d3.graphics.VertexPositionNormalTextureSkin");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(64,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector4",7),new Jl(48,"vector4",6)])}]),e}(),Il=function(){function e(e,t,i,n,o){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=e,this._normal=t,this._color=i,this._blendIndex=n,this._blendWeight=o}o(e,"laya.d3.graphics.VertexPositionNormalColorSkin");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(72,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector4",7),new Jl(56,"vector4",6)])}]),e}(),Al=function(){function e(e,t,i){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=e,this._manager=t,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=i}o(e,"laya.d3.graphics.StaticBatch");var t=e.prototype;return i.imps(t,{"laya.resource.IDispose":!0,"laya.d3.core.render.IRenderable":!0}),t._binarySearch=function(e){for(var t=0,i=this._batchRenderElements.length-1,n=0;i>=t;)n=Math.floor((t+i)/2),this._compareBatchRenderElement(this._batchRenderElements[n],e)?i=n-1:t=n+1;return t},t._compareBatchRenderElement=function(e,t){throw new Error("StaticBatch:must override this function.")},t._getVertexDecLightMap=function(e){return e===hh.vertexDeclaration?Vl.vertexDeclaration:e===Tl.vertexDeclaration?lh.vertexDeclaration:e===eh.vertexDeclaration?Rl.vertexDeclaration:e===sh.vertexDeclaration?null:e===Kl.vertexDeclaration?El.vertexDeclaration:e===Pl.vertexDeclaration?Ol.vertexDeclaration:e===wl.vertexDeclaration?Zl.vertexDeclaration:e===kl.vertexDeclaration?_h.vertexDeclaration:e===Tl.vertexDeclaration?lh.vertexDeclaration:e===th.vertexDeclaration?Bl.vertexDeclaration:e===sh.vertexDeclaration?null:e===Kl.vertexDeclaration?El.vertexDeclaration:e===Gl.vertexDeclaration?dh.vertexDeclaration:e===wl.vertexDeclaration?Zl.vertexDeclaration:e},t._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},t._addBatchRenderElement=function(e){this._batchRenderElements.splice(this._binarySearch(e),0,e)},t._updateToRenderQueue=function(e,t){this._combineRenderElementPoolIndex=0,this._getRenderElement(e.getRenderQueue(this._material.renderQueue)._renderElements,e,t)},t._getRenderElement=function(e,t,i){throw new Error("StaticBatch:must override this function.")},t._finishInit=function(){throw new Error("StaticBatch:must override this function.")},t._clearRenderElements=function(){this._batchRenderElements.length=0},t.dispose=function(){},t._getVertexBuffer=function(e){return void 0===e&&(e=0),null},t._getIndexBuffer=function(){return null},t._beforeRender=function(e){return!0},t._render=function(e){},t._getVertexBuffers=function(){return null},s(0,t,"triangleCount",function(){return 0}),s(0,t,"_vertexBufferCount",function(){return 1}),e.combine=function(e){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),ql.combine(e)},e.maxBatchVertexCount=65535,e}(),Nl=function(){function e(e){this._position=null,this._position=e}o(e,"laya.d3.graphics.VertexPosition");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(12,[new Jl(0,"vector3",0)])}]),e}(),Pl=function(){function e(e,t,i,n){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=e,this._normal=t,this._textureCoordinate=i,this._tangent=n}o(e,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(48,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector4",5)])}]),e}(),Rl=function(){function e(e,t,i,n,o,s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate0=n,this._textureCoordinate1=o,this._tangent=s}o(e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(72,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector2",15),new Jl(56,"vector4",5)])}]),e}(),Ll=function(){function e(e,t,i,n,o,s,r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate0=n,this._textureCoordinate1=o,this._blendIndex=s,this._blendWeight=r}o(e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(88,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector2",15),new Jl(56,"vector4",7),new Jl(72,"vector4",6)])}]),e}(),Ol=function(){function e(e,t,i,n,o){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=e,this._normal=t,this._textureCoordinate0=i,this._textureCoordinate1=n,this._tangent=o}o(e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(56,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector2",15),new Jl(40,"vector4",5)])}]),e}(),Ml=function(){function e(e,t,i,n){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._tangent=n}o(e,"laya.d3.graphics.VertexPositionNormalColorSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(56,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector4",5)])}]),e}(),Dl=function(){function e(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}o(e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),t.VertexPositionNormalColorTexture0SkinTangent=function(e,t,i,n,o,s,r,a){this._position=e,this._normal=t,this._color=i,this._textureCoordinate0=n,this._textureCoordinate1=o,this._tangent=s,this._blendIndex=r,this._blendWeight=a},s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(100,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector2",15),new Jl(56,"vector4",7),new Jl(72,"vector4",6),new Jl(88,"vector3",5)])}]),e}(),kl=function(){function e(e,t,i,n,o,s){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e,this._normal=t,this._textureCoordinate=i,this._tangent=n,this._blendIndex=o,this._blendWeight=s}o(e,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(76,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector4",7),new Jl(48,"vector4",6),new Jl(64,"vector3",5)])}]),e}(),Bl=(function(){function e(){}return o(e,"laya.d3.graphics.VertexElementFormat"),e.Single="single",e.Vector2="vector2",e.Vector3="vector3",e.Vector4="vector4",e.Color="color",e.Byte4="byte4",e.Short2="short2",e.Short4="short4",e.NormalizedShort2="normalizedshort2",e.NormalizedShort4="normalizedshort4",e.HalfVector2="halfvector2",e.HalfVector4="halfvector4",e}(),function(){function e(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}o(e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),t.VertexPositionNormalColorTexture0Tangent=function(e,t,i,n,o,s){this._position=e,this._normal=t,this._color=i,this._textureCoordinate0=n,this._textureCoordinate1=o,this._tangent=s},s(0,t,"tangent",function(){return this._tangent}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(68,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector2",15),new Jl(56,"vector3",5)])}]),e}()),Vl=function(){function e(e,t,i,n,o,s,r){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e,this._normal=t,this._textureCoordinate0=i,this._textureCoordinate1=n,this._tangent=o,this._blendIndex=s,this._blendWeight=r}o(e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(88,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector2",15),new Jl(40,"vector4",7),new Jl(56,"vector4",6),new Jl(72,"vector4",5)])}]),e}(),Fl=function(){function e(e,t,i,n,o,s,r,a,l,h,c,u,d,p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=e,this._positionStartLifeTime=t,this._velocity=i,this._startColor=n,this._startSize=o,this._startRotation0=s,this._startRotation1=r,this._startRotation2=a,this._startLifeTime=l,this._time=h,this._startSpeed=c,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=p}o(e,"laya.d3.graphics.VertexShurikenParticleBillboard");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"simulationWorldPostion",function(){return this._simulationWorldPostion}),s(0,t,"time",function(){return this._time}),s(0,t,"startLifeTime",function(){return this._startLifeTime}),s(0,t,"startRotation2",function(){return this._startRotation2}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"startRotation1",function(){return this._startRotation1}),s(0,t,"random0",function(){return this._randoms0}),s(0,t,"startRotation0",function(){return this._startRotation0}),s(0,t,"startSize",function(){return this._startSize}),s(0,t,"random1",function(){return this._randoms1}),s(0,t,"startColor",function(){return this._startColor}),s(0,t,"startSpeed",function(){return this._startSpeed}),s(0,t,"velocity",function(){return this._velocity}),s(0,t,"positionStartLifeTime",function(){return this._positionStartLifeTime}),s(0,t,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(152,[new Jl(0,"vector4",17),new Jl(16,"vector4",30),new Jl(32,"vector4",32),new Jl(48,"vector4",19),new Jl(64,"vector3",20),new Jl(76,"vector3",22),new Jl(88,"single",31),new Jl(92,"vector4",34),new Jl(108,"vector4",35),new Jl(124,"vector3",36),new Jl(136,"vector4",37)])}]),e}(),Gl=function(){function e(e,t,i,n){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=e,this._normal=t,this._textureCoordinate=i,this._tangent=n}o(e,"laya.d3.graphics.VertexPositionNormalTextureTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(44,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector3",5)])}]),e}(),Hl=function(){function e(e,t){this._position=null,this._normal=null,this._position=e,this._normal=t}o(e,"laya.d3.graphics.VertexPositionNormal");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(24,[new Jl(0,"vector3",0),new Jl(12,"vector3",3)])}]),e}(),Ul=function(){function e(e,t,i,n,o,s,r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate=n,this._tangent=o,this._blendIndex=s,this._blendWeight=r}o(e,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(96,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector4",7),new Jl(64,"vector4",6),new Jl(80,"vector4",5)])}]),e}(),zl=function(){function e(e,t,i,n){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._tangent=n}o(e,"laya.d3.graphics.VertexPositionNormalColorTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"color",function(){
return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(52,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector3",5)])}]),e}(),Wl=function(){function e(e,t,i,n,o,s){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._tangent=n,this._blendIndex=o,this._blendWeight=s}o(e,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(84,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector4",7),new Jl(56,"vector4",6),new Jl(72,"vector3",5)])}]),e}(),Yl=function(){function e(e,t,i,n){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=e,this._normal=t,this._textureCoord0=i,this._textureCoord1=n}o(e,"laya.d3.graphics.VertexPositionTerrain");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoord1",function(){return this._textureCoord1}),s(0,t,"textureCoord0",function(){return this._textureCoord0}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(40,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector2",15)])}]),e}(),ql=function(){function e(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}o(e,"laya.d3.graphics.StaticBatchManager");var t=e.prototype;return t._finishInit=function(){for(var e in this._staticBatches)this._staticBatches[e]._finishInit();this._initBatchRenderElements.length=0},t._initStaticBatchs=function(e){throw new Error("StaticBatchManager:must override this function.")},t._addInitBatchSprite=function(e){for(var t=e._render._renderElements,i=0,n=t.length;n>i;i++)this._initBatchRenderElements.push(t[i])},t._clearRenderElements=function(){for(var e in this._staticBatches)this._staticBatches[e]._clearRenderElements()},t._garbageCollection=function(e){var t=e._staticBatch,i=t._initBatchRenderElements,n=i.indexOf(e);i.splice(n,1),0===i.length&&(t.dispose(),delete this._staticBatches[t._key])},t._addToRenderQueue=function(e,t,i,n){for(var o in this._staticBatches){var s=this._staticBatches[o];s._batchRenderElements.length>0&&s._updateToRenderQueue(e,n)}},t.dispose=function(){this._staticBatches=null},e._addToStaticBatchQueue=function(t){t instanceof laya.d3.core.RenderableSprite3D&&t._addToInitStaticBatchManager();for(var i=0,n=t.numChildren;n>i;i++)e._addToStaticBatchQueue(t._childs[i])},e.combine=function(t,i){var n,o=0,s=0;if(i)for(o=0,s=i.length;s>o;o++){var r=i[o];r._addToInitStaticBatchManager()}else t&&e._addToStaticBatchQueue(t);for(o=0,s=e._staticBatchManagers.length;s>o;o++)n=e._staticBatchManagers[o],n._initStaticBatchs(t),n._finishInit()},e._staticBatchManagers=[],e}(),Kl=function(){function e(e,t,i,n){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate=n}o(e,"laya.d3.graphics.VertexPositionNormalColorTexture");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(48,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2)])}]),e}(),Xl=function(){function e(e,t,i){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=e,this._textureCoordinate0=t,this._time=i}o(e,"laya.d3.graphics.VertexGlitter");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"time",function(){return this._time}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate0}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(24,[new Jl(0,"vector3",0),new Jl(12,"vector2",2),new Jl(20,"single",33)])}]),e}(),Ql=function(){function e(e,t,i){this._position=null,this._normal=null,this._tangent=null,this._position=e,this._normal=t,this._tangent=i}o(e,"laya.d3.graphics.VertexPositionNormalSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(40,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",5)])}]),e}(),jl=function(){function e(){}return o(e,"laya.d3.graphics.FrustumCulling"),e.renderShadowObjectCulling=function(e,t,i,n,o){var s=0,r=0,a=0,l=0;for(s=0,a=i.length;a>s;s++){var h=i[s];h&&h._clearRenderElements()}var c,u,d,p=e._cullingRenders;if(o>1){for(s=0,a=e._cullingRendersLength;a>s;s++)if(c=p[s],c.castShadow&&aa.isVisible(c._owner.layer.mask)&&c.enable)for(var f=1,_=t.length;_>f;f++)if(u=i[f-1],0!==t[f].containsBoundSphere(c.boundingSphere))for(d=c._renderElements,r=0,l=d.length;l>r;r++)u._addRenderElement(d[r])}else for(s=0,a=e._cullingRendersLength;a>s;s++)if(c=p[s],c.castShadow&&aa.isVisible(c._owner.layer.mask)&&c.enable&&0!==t[0].containsBoundSphere(c.boundingSphere))for(c._renderUpdate(n),u=i[0],d=c._renderElements,r=0,l=d.length;l>r;r++)u._addRenderElement(d[r])},e.renderShadowObjectCullingOctree=function(e,t,i,n,o){for(var s=0,r=i.length;r>s;s++){var a=i[s];a&&a._clearRenderElements()}o>1?e.treeRoot.cullingShadowObjects(t,i,!0,0,e):e.treeRoot.cullingShadowObjectsOnePSSM(t[0],i,n,!0,0,e)},e.renderObjectCulling=function(e,t,i,n,o,s){var r=0,a=0,l=0,h=0,c=t._quenes,u=t._dynamicBatchManager,d=t._cullingRenders;for(r=0,a=c.length;a>r;r++){var p=c[r];p&&p._clearRenderElements()}var f=ql._staticBatchManagers;for(r=0,a=f.length;a>r;r++)f[r]._clearRenderElements();u._clearRenderElements();var _=i.transform.position;for(r=0,a=t._cullingRendersLength;a>r;r++){var m=d[r];if(aa.isVisible(m._owner.layer.mask)&&m.enable&&0!==e.containsBoundSphere(m.boundingSphere)&&m._renderUpdate(s)){m._distanceForSort=rl.distance(m.boundingSphere.center,_)+m.sortingFudge;var g=m._renderElements;for(l=0,h=g.length;h>l;l++){var v=g[l],y=v._staticBatch;if(y&&y._material===v._material)y._addBatchRenderElement(v);else{var b=v.renderObj;b.triangleCount<10&&1===b._vertexBufferCount&&b._getIndexBuffer()&&v._material.renderQueue<2&&v._canDynamicBatch&&!m._owner.isStatic?u._addPrepareRenderElement(v):t.getRenderQueue(v._material.renderQueue)._addRenderElement(v)}}}}for(r=0,a=f.length;a>r;r++)f[r]._addToRenderQueue(t,n,o,s);u._finishCombineDynamicBatch(t),u._addToRenderQueue(t,n,o,s)},e.renderObjectCullingOctree=function(e,t,i,n,o,s){var r=0,a=0,l=t._quenes,h=t._dynamicBatchManager;for(r=0,a=l.length;a>r;r++){var c=l[r];c&&c._clearRenderElements()}var u=ql._staticBatchManagers;for(r=0,a=u.length;a>r;r++)u[r]._clearRenderElements();for(h._clearRenderElements(),t._cullingRenders.length=0,t.treeRoot.cullingObjects(e,!0,0,i.transform.position,s),r=0,a=u.length;a>r;r++)u[r]._addToRenderQueue(t,n,o,s);h._finishCombineDynamicBatch(t),h._addToRenderQueue(t,n,o,s)},e.renderObjectCullingNoBoundFrustum=function(e,t,i,n,o){var s=0,r=0,a=0,l=0,h=e._quenes,c=e._dynamicBatchManager,u=e._cullingRenders;for(s=0,r=h.length;r>s;s++){var d=h[s];d&&d._clearRenderElements()}var p=ql._staticBatchManagers;for(s=0,r=p.length;r>s;s++)p[s]._clearRenderElements();c._clearRenderElements();var f=t.transform.position;for(s=0,r=e._cullingRendersLength;r>s;s++){var _=u[s];if(aa.isVisible(_._owner.layer.mask)&&_.enable){_._renderUpdate(o),_._distanceForSort=rl.distance(_.boundingSphere.center,f)+_.sortingFudge;var m=_._renderElements;for(a=0,l=m.length;l>a;a++){var g=m[a],v=g._staticBatch;if(v&&v._material===g._material)v._addBatchRenderElement(g);else{var y=g.renderObj;y.triangleCount<10&&1===y._vertexBufferCount&&y._getIndexBuffer()&&g._material.renderQueue<2&&g._canDynamicBatch&&!_._owner.isStatic?c._addPrepareRenderElement(g):e.getRenderQueue(g._material.renderQueue)._addRenderElement(g)}}}}for(s=0,r=p.length;r>s;s++)p[s]._addToRenderQueue(e,i,n,o);c._finishCombineDynamicBatch(e),c._addToRenderQueue(e,i,n,o)},e}(),Zl=function(){function e(e,t,i,n){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=e,this._normal=t,this._textureCoordinate0=i,this._textureCoordinate1=n}o(e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(40,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector2",15)])}]),e}(),Jl=function(){function e(e,t,i){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=e,this.elementFormat=t,this.elementUsage=i}return o(e,"laya.d3.graphics.VertexElement"),e}(),$l=function(){function e(e,t,i,n,o,s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate=n,this._blendIndex=o,this._blendWeight=s}o(e,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(80,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector4",7),new Jl(64,"vector4",6)])}]),e}(),eh=function(){function e(e,t,i,n,o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate=n,this._tangent=o}o(e,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(64,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector4",5)])}]),e}(),th=function(){function e(e,t,i,n,o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate=n,this._tangent=o}o(e,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(60,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector3",5)])}]),e}(),ih=function(){function e(e,t,i){this._position=null,this._normal=null,this._color=null,this._position=e,this._normal=t,this._color=i}o(e,"laya.d3.graphics.VertexPositionNormalColor");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(40,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1)])}]),e}(),nh=function(){function e(e,t,i,n,o,s,r,a,l,h,c,u,d,p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=e,this._positionStartLifeTime=t,this._velocity=i,this._startColor=n,this._startSize=o,this._startRotation0=s,this._startRotation1=r,this._startRotation2=a,this._startLifeTime=l,this._time=h,this._startSpeed=c,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=p}o(e,"laya.d3.graphics.VertexShurikenParticleMesh");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"simulationWorldPostion",function(){return this._simulationWorldPostion}),s(0,t,"time",function(){return this._time}),s(0,t,"startLifeTime",function(){return this._startLifeTime}),s(0,t,"startRotation2",function(){return this._startRotation2}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"startRotation1",function(){return this._startRotation1}),s(0,t,"random0",function(){return this._randoms0}),s(0,t,"startRotation0",function(){return this._startRotation0}),s(0,t,"startSize",function(){return this._startSize}),s(0,t,"velocity",function(){return this._velocity}),s(0,t,"startSpeed",function(){return this._startSpeed}),s(0,t,"position",function(){return this._positionStartLifeTime}),s(0,t,"random1",function(){return this._randoms1}),s(0,t,"startColor",function(){return this._startColor}),s(0,t,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(172,[new Jl(0,"vector3",0),new Jl(12,"vector4",1),new Jl(28,"vector2",2),new Jl(36,"vector4",30),new Jl(52,"vector4",32),new Jl(68,"vector4",19),new Jl(84,"vector3",20),new Jl(96,"vector3",22),new Jl(108,"single",31),new Jl(112,"vector4",34),new Jl(128,"vector4",35),new Jl(144,"vector3",36),new Jl(156,"vector4",37)])}]),e}(),oh=function(){function e(e,t){this._position=null,this._textureCoordinate0=null,this._position=e,this._textureCoordinate0=t}o(e,"laya.d3.graphics.VertexPositionTexture0");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(20,[new Jl(0,"vector3",0),new Jl(12,"vector2",2)])}]),e}(),sh=function(){function e(e,t,i){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e,this._normal=t,this._textureCoordinate=i}o(e,"laya.d3.graphics.VertexPositionNTBTexture");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(56,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector3",5),new Jl(36,"vector3",4),new Jl(48,"vector2",2)])}]),e}(),rh=function(){function e(t,i){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++e._uniqueIDCounter,this._id>e.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",e.maxVertexDeclaration);this._shaderValues=new gl,this._vertexElementsDic={},this._vertexStride=t,this._vertexElements=i;for(var n=0;n<i.length;n++){var o=i[n],s=o.elementUsage;this._vertexElementsDic[s]=o;var r=[e._getTypeSize(o.elementFormat)/4,5126,!1,this._vertexStride,o.offset];switch(this._shaderValues.setValue(s,r),s){case 1:this._addShaderDefine(Id.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(Id.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(Id.SHADERDEFINE_UV1)}}}o(e,"laya.d3.graphics.VertexDeclaration");var t=e.prototype;return t._addShaderDefine=function(e){this._shaderDefineValue|=e},t._removeShaderDefine=function(e){this._shaderDefineValue&=~e},t.getVertexElements=function(){return this._vertexElements.slice()},t.getVertexElementByUsage=function(e){return this._vertexElementsDic[e]},t.unBinding=function(){},s(0,t,"shaderValues",function(){return this._shaderValues}),s(0,t,"shaderDefineValue",function(){return this._shaderDefineValue}),s(0,t,"vertexStride",function(){return this._vertexStride}),s(0,t,"id",function(){return this._id}),e._getTypeSize=function(e){switch(e){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":return 4;case"byte4":return 4;case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},e.getVertexStride=function(t){for(var i=0,n=0;n<t.Length;n++){var o=t[n],s=o.offset+e._getTypeSize(o.elementFormat);s>i&&(i=s)}return i},e._maxVertexDeclarationBit=1e3,e._uniqueIDCounter=1,n(e,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),e}(),ah=function(){function e(e,t,i){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e,this._normal=t,this._textureCoordinate=i}o(e,"laya.d3.graphics.VertexPositionNTBTextureSkin");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(88,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector3",5),new Jl(36,"vector3",4),new Jl(48,"vector2",2),new Jl(56,"vector4",7),new Jl(72,"vector4",6)])}]),e}(),lh=function(){function e(e,t,i,n,o,s){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=e,this._normal=t,this._textureCoordinate0=i,this._textureCoordinate1=n,this._blendIndex=o,this._blendWeight=s}o(e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(72,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector2",15),new Jl(40,"vector4",7),new Jl(56,"vector4",6)])}]),e}(),hh=function(){function e(e,t,i,n,o,s){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e,this._normal=t,this._textureCoordinate=i,this._tangent=n,this._blendIndex=o,this._blendWeight=s}o(e,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(80,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector4",7),new Jl(48,"vector4",6),new Jl(64,"vector4",5)])}]),e}(),ch=function(){function e(e,t,i,n,o,s,r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e,this._normal=t,this._color=i,this._textureCoordinate=n,this._tangent=o,this._blendIndex=s,this._blendWeight=r}o(e,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"textureCoordinate",function(){return this._textureCoordinate}),s(0,t,"color",function(){return this._color}),s(0,t,"normal",function(){return this._normal}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(92,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector4",1),new Jl(40,"vector2",2),new Jl(48,"vector4",7),new Jl(64,"vector4",6),new Jl(80,"vector3",5)])}]),e}(),uh=function(){function e(e,t,i,n,o,s,r,a){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=e,this._normal=t,this._textureCoordinate0=n,this._textureCoordinate1=o,this._tangent=s,i=i,this._blendIndex=r,this._blendWeight=a}o(e,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(96,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector3",5),new Jl(36,"vector3",4),new Jl(48,"vector2",2),new Jl(56,"vector2",15),new Jl(64,"vector4",7),new Jl(80,"vector4",6)])}]),e}(),dh=(function(){function e(){}return o(e,"laya.d3.graphics.VertexElementUsage"),e.POSITION0=0,e.COLOR0=1,e.TEXTURECOORDINATE0=2,e.NORMAL0=3,e.BINORMAL0=4,e.TANGENT0=5,e.BLENDINDICES0=6,e.BLENDWEIGHT0=7,e.DEPTH0=8,e.FOG0=9,e.POINTSIZE0=10,e.SAMPLE0=11,e.TESSELLATEFACTOR0=12,e.COLOR1=13,e.NEXTTEXTURECOORDINATE0=14,e.TEXTURECOORDINATE1=15,e.NEXTTEXTURECOORDINATE1=16,e.CORNERTEXTURECOORDINATE0=17,e.VELOCITY0=18,e.STARTCOLOR0=19,e.STARTSIZE=20,e.AGEADDSCALE0=21,e.STARTROTATION=22,e.ENDCOLOR0=23,e.STARTLIFETIME=24,e.TIME0=33,e.SHAPEPOSITIONSTARTLIFETIME=30,e.DIRECTIONTIME=32,e.SIZEROTATION0=27,e.RADIUS0=28,e.RADIAN0=29,e.STARTSPEED=31,e.RANDOM0=34,e.RANDOM1=35,e.SIMULATIONWORLDPOSTION=36,e.SIMULATIONWORLDROTATION=37,e.TEXTURECOORDINATE0X=38,e.TEXTURECOORDINATE0X1=39,e.TEXTURECOORDINATE0Y=40,e.OFFSETVECTOR=41,e}(),function(){function e(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}o(e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),t.VertexPositionNormalTexture0Tangent=function(e,t,i,n,o){this._position=e,this._normal=t,this._textureCoordinate0=i,this._textureCoordinate1=n,this._tangent=o},s(0,t,"tangent",function(){return this._tangent}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(52,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector2",15),new Jl(40,"vector3",5)])}]),e}()),ph=function(){function e(e){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=e}o(e,"laya.d3.graphics.DynamicBatch");var t=e.prototype;return i.imps(t,{"laya.d3.core.render.IRenderable":!0}),t._getVertexBuffer=function(e){return void 0===e&&(e=0),0===e?this._vertexBuffer:null},t._getIndexBuffer=function(){return this._indexBuffer},t._getCombineRenderElementFromPool=function(e,t,i){var n=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return n||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=n=new _a,n._sprite3D=new Hw),n._sprite3D._render._renderUpdate(i),n},t._getRenderElement=function(t,i,n){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*e.maxVertexCount),this._indexDatas=new Uint16Array(e.maxIndexCount),this._vertexBuffer=IS.create(this._vertexDeclaration,e.maxVertexCount,35048),this._indexBuffer=AS.create("ushort",e.maxIndexCount,35048)),this._merageElements.length=0;for(var o=0,s=0,r=0,a=this._combineRenderElements.length;a>r;r++){var l=this._combineRenderElements[r],h=l.getDynamicBatchBakedVertexs(0),c=l.getBakedIndices(),u=l._sprite3D.transform._isFrontFaceInvert,d=o/(this._vertexDeclaration.vertexStride/4),p=s,f=p+c.length;l._tempBatchIndexStart=p,l._tempBatchIndexEnd=f,this._indexDatas.set(c,s);var _=0;if(u)for(_=p;f>_;_+=3){this._indexDatas[_]=d+this._indexDatas[_];var m=this._indexDatas[_+1],g=this._indexDatas[_+2];this._indexDatas[_+1]=d+g,this._indexDatas[_+2]=d+m}else for(_=p;f>_;_+=3)this._indexDatas[_]=d+this._indexDatas[_],this._indexDatas[_+1]=d+this._indexDatas[_+1],this._indexDatas[_+2]=d+this._indexDatas[_+2];s+=c.length,this._vertexDatas.set(h,o),o+=h.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),this._combineRenderElementPoolIndex=0,r=0,a=this._materials.length;a>r;r++){var v=this._getCombineRenderElementFromPool(t,i,n);v._type=2,v._staticBatch=null,v.renderObj=this;var y=this._combineRenderElements[this._materialToRenderElementsOffsets[r]]._tempBatchIndexStart,b=r+1===this._materialToRenderElementsOffsets.length?s:this._combineRenderElements[this._materialToRenderElementsOffsets[r+1]]._tempBatchIndexStart;v._tempBatchIndexStart=y,v._tempBatchIndexEnd=b,v._material=this._materials[r],this._merageElements.push(v)}},t._addCombineRenderObjTest=function(t){var i=t.renderObj,n=this._currentCombineIndexCount+i._getIndexBuffer().indexCount,o=this._currentCombineVertexCount+i._getVertexBuffer().vertexCount;return!(o>e.maxVertexCount||n>e.maxIndexCount)},t._addCombineRenderObj=function(e){var t=e.renderObj;this._combineRenderElements.push(e),this._currentCombineIndexCount=this._currentCombineIndexCount+t._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+t._getVertexBuffer().vertexCount},t._addCombineMaterial=function(e){this._materials.push(e)},t._addMaterialToRenderElementOffset=function(e){this._materialToRenderElementsOffsets.push(e)},t._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},t._addToRenderQueue=function(e,t,i,n){this._getRenderElement(t,i,n);for(var o=0,s=this._materials.length;s>o;o++)e.getRenderQueue(this._materials[o].renderQueue)._addDynamicBatchElement(this._merageElements[o])},t._beforeRender=function(e){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},t._render=function(e){var t=e._batchIndexEnd-e._batchIndexStart;ur.mainContext.drawElements(4,t,5123,2*e._batchIndexStart),Nr.drawCall++,Nr.trianglesFaces+=t/3},t._getVertexBuffers=function(){
return null},s(0,t,"triangleCount",function(){return this._indexBuffer.indexCount/3}),s(0,t,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),s(0,t,"_vertexBufferCount",function(){return 1}),e.maxVertexCount=2e4,e.maxIndexCount=4e4,e.maxCombineTriangleCount=10,e}(),fh=function(){function e(e,t,i){this._position=null,this._normal=null,this._tangent=null,this._position=e,this._normal=t,this._tangent=i}o(e,"laya.d3.graphics.VertexPositionNormalTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"tangent",function(){return this._tangent}),s(0,t,"normal",function(){return this._normal}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(36,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector3",5)])}]),e}(),_h=function(){function e(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}o(e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var t=e.prototype;return i.imps(t,{"laya.d3.graphics.IVertex":!0}),t.VertexPositionNormalTexture0SkinTangent=function(e,t,i,n,o,s,r){this._position=e,this._normal=t,this._textureCoordinate0=i,this._textureCoordinate1=n,this._tangent=o,this._blendIndex=s,this._blendWeight=r},s(0,t,"tangent",function(){return this._tangent}),s(0,t,"blendIndex",function(){return this._blendIndex}),s(0,t,"blendWeight",function(){return this._blendWeight}),s(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),s(0,t,"normal",function(){return this._normal}),s(0,t,"textureCoordinate1",function(){return this._textureCoordinate1}),s(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),s(0,t,"position",function(){return this._position}),s(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),n(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new rh(84,[new Jl(0,"vector3",0),new Jl(12,"vector3",3),new Jl(24,"vector2",2),new Jl(32,"vector2",15),new Jl(40,"vector4",7),new Jl(56,"vector4",6),new Jl(72,"vector3",5)])}]),e}(),mh=function(){function e(){}return o(e,"laya.d3.loaders.MeshReader"),e.read=function(t,i,n,o,s){var r=new Vr(t);r.pos=0;var a=r.readUTFString();switch(a){case"LAYAMODEL:01":case"LAYASKINANI:01":e._readVersion01(r,a,i,n,o,s);break;case"LAYAMODEL:02":gh.parse(r,a,i,n,o,s);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":vh.parse(r,a,i,o,s);break;default:throw new Error("MeshReader: unknown mesh version.")}i._setSubMeshes(o)},e._readVersion01=function(e,t,i,n,o,s){new yh(e,t,i,n,o,s)},e}(),gh=function(){function e(){}return o(e,"laya.d3.loaders.LoadModelV02"),e.parse=function(t,i,n,o,s,r){e._mesh=n,e._materials=o,e._subMeshes=s,e._materialMap=r,e._version=i,e._readData=t,e.READ_DATA(),e.READ_BLOCK(),e.READ_STRINGS();for(var a=0,l=e._BLOCK.count;l>a;a++){e._readData.pos=e._BLOCK.blockStarts[a];var h=e._readData.getUint16(),c=e._strings[h],u=e["READ_"+c];if(null==u)throw new Error("model file err,no this function:"+h+" "+c);u.call()}e._strings.length=0,e._readData=null,e._version=null,e._mesh=null,e._materials=null,e._subMeshes=null,e._materialMap=null},e._readString=function(){return e._strings[e._readData.getUint16()]},e.READ_DATA=function(){e._DATA.offset=e._readData.getUint32(),e._DATA.size=e._readData.getUint32()},e.READ_BLOCK=function(){for(var t=e._BLOCK.count=e._readData.getUint16(),i=e._BLOCK.blockStarts=[],n=e._BLOCK.blockLengths=[],o=0;t>o;o++)i.push(e._readData.getUint32()),n.push(e._readData.getUint32())},e.READ_STRINGS=function(){var t=e._readData.getUint32(),i=e._readData.getUint16(),n=e._readData.pos;e._readData.pos=t+e._DATA.offset;for(var o=0;i>o;o++)e._strings[o]=e._readData.readUTFString();e._readData.pos=n},e.READ_MATERIAL=function(){var t=(e._readString(),e._readString(),e._readString());return""!==t&&e._materials.push(Tu.getRes(e._materialMap[t])),!0},e.READ_MESH=function(){var t=(e._readString(),e._readData.__getBuffer()),i=0,n=0,o=e._readData.getInt16(),s=e._DATA.offset;for(i=0;o>i;i++){var r=s+e._readData.getUint32(),a=e._readData.getUint32(),l=new Float32Array(t.slice(r,r+a)),h=e._readString(),c=h.match(e._attrReg),u=e._getVertexDeclaration(c),d=IS.create(u,4*l.length/u.vertexStride,35044,!0);d.setData(l),e._mesh._vertexBuffers.push(d)}var p=s+e._readData.getUint32(),f=e._readData.getUint32(),_=new Uint16Array(t.slice(p,p+f)),m=AS.create("ushort",f/2,35044,!0);m.setData(_),e._mesh._indexBuffer=m;var g=e._mesh._boneNames=[],v=e._readData.getUint16();for(g.length=v,i=0;v>i;i++)g[i]=e._strings[e._readData.getUint16()];var y=e._readData.getUint32(),b=e._readData.getUint32(),E=(new Float32Array(t.slice(s+y,s+y+b)),e._readData.getUint32()),x=e._readData.getUint32(),S=new Float32Array(t.slice(s+E,s+E+x));for(e._mesh._inverseBindPoses=[],i=0,n=S.length;n>i;i+=16){var w=new ol(S[i+0],S[i+1],S[i+2],S[i+3],S[i+4],S[i+5],S[i+6],S[i+7],S[i+8],S[i+9],S[i+10],S[i+11],S[i+12],S[i+13],S[i+14],S[i+15]);e._mesh._inverseBindPoses.push(w)}return e._mesh._skinnedDatas=new Float32Array(16*S.length),!0},e.READ_SUBMESH=function(){var t=e._readData.__getBuffer(),i=new yl(e._mesh),n=e._readData.getInt16(),o=e._readData.getUint32(),s=e._readData.getUint32();i._vertexBuffer=e._mesh._vertexBuffers[n],i._vertexStart=o,i._vertexCount=s;var r=e._readData.getUint32(),a=e._readData.getUint32(),l=e._mesh._indexBuffer;i._indexBuffer=l,i._indexStart=r,i._indexCount=a,i._indices=new Uint16Array(l.getData().buffer,2*r,a);var h=e._DATA.offset,c=i._subIndexBufferStart,u=i._subIndexBufferCount,d=i._boneIndicesList,p=e._readData.getUint16();c.length=p,u.length=p,d.length=p;for(var f=0;p>f;f++){c[f]=e._readData.getUint32(),u[f]=e._readData.getUint32();var _=e._readData.getUint32(),m=e._readData.getUint32();i._boneIndicesList[f]=new Uint8Array(t.slice(h+_,h+_+m))}return e._subMeshes.push(i),!0},e._getVertexDeclaration=function(e){for(var t=!1,i=!1,n=!1,o=!1,s=!1,r=!1,a=!1,l=!1,h=!1,c=0;c<e.length;c++)switch(e[c]){case"POSITION":t=!0;break;case"NORMAL":i=!0;break;case"COLOR":n=!0;break;case"UV":o=!0;break;case"UV1":s=!0;break;case"BLENDWEIGHT":a=!0;break;case"BLENDINDICES":l=!0;break;case"TANGENT":r=!0;break;case"BINORMAL":h=!0}var u;return t&&i&&n&&o&&s&&a&&l&&r?u=Dl.vertexDeclaration:t&&i&&n&&o&&s&&a&&l?u=Ll.vertexDeclaration:t&&i&&o&&s&&a&&l&&r?u=_h.vertexDeclaration:t&&i&&o&&s&&a&&l?u=lh.vertexDeclaration:t&&i&&n&&o&&a&&l&&r?u=ch.vertexDeclaration:t&&i&&n&&o&&a&&l?u=$l.vertexDeclaration:t&&i&&o&&a&&l&&r?u=kl.vertexDeclaration:t&&i&&o&&a&&l?u=Tl.vertexDeclaration:t&&i&&n&&a&&l&&r?u=Wl.vertexDeclaration:t&&i&&n&&a&&l?u=Il.vertexDeclaration:t&&i&&n&&o&&s&&r?u=Bl.vertexDeclaration:t&&i&&n&&o&&s?u=El.vertexDeclaration:t&&i&&o&&s&&r?u=dh.vertexDeclaration:t&&i&&o&&s?u=Zl.vertexDeclaration:t&&i&&n&&o&&r?u=th.vertexDeclaration:t&&i&&o&&r&&h?u=sh.vertexDeclaration:t&&i&&n&&o?u=Kl.vertexDeclaration:t&&i&&o&&r?u=Gl.vertexDeclaration:t&&i&&o?u=wl.vertexDeclaration:t&&i&&n&&r?u=zl.vertexDeclaration:t&&i&&n&&(u=ih.vertexDeclaration),u},e._attrReg=new RegExp("(\\w+)|([:,;])","g"),e._strings=[],e._readData=null,e._version=null,e._mesh=null,e._materials=null,e._subMeshes=null,e._materialMap=null,n(e,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e}(),vh=function(){function e(){}return o(e,"laya.d3.loaders.LoadModelV03"),e.parse=function(t,i,n,o,s){e._mesh=n,e._subMeshes=o,e._materialMap=s,e._version=i,e._readData=t,e.READ_DATA(),e.READ_BLOCK(),e.READ_STRINGS();for(var r=0,a=e._BLOCK.count;a>r;r++){e._readData.pos=e._BLOCK.blockStarts[r];var l=e._readData.getUint16(),h=e._strings[l],c=e["READ_"+h];if(null==c)throw new Error("model file err,no this function:"+l+" "+h);c.call()}e._strings.length=0,e._readData=null,e._version=null,e._mesh=null,e._subMeshes=null,e._materialMap=null},e._readString=function(){return e._strings[e._readData.getUint16()]},e.READ_DATA=function(){e._DATA.offset=e._readData.getUint32(),e._DATA.size=e._readData.getUint32()},e.READ_BLOCK=function(){for(var t=e._BLOCK.count=e._readData.getUint16(),i=e._BLOCK.blockStarts=[],n=e._BLOCK.blockLengths=[],o=0;t>o;o++)i.push(e._readData.getUint32()),n.push(e._readData.getUint32())},e.READ_STRINGS=function(){var t=e._readData.getUint32(),i=e._readData.getUint16(),n=e._readData.pos;e._readData.pos=t+e._DATA.offset;for(var o=0;i>o;o++)e._strings[o]=e._readData.readUTFString();e._readData.pos=n},e.READ_MESH=function(){var t=(e._readString(),e._readData.__getBuffer()),i=0,n=0,o=e._readData.getInt16(),s=e._DATA.offset;for(i=0;o>i;i++){var r,a=s+e._readData.getUint32(),l=e._readData.getUint32(),h=new Float32Array(t.slice(a,a+l)),c=e._readString();switch(e._version){case"LAYAMODEL:03":r=e._vertexDeclarationMap_Discard[c];break;case"LAYAMODEL:0301":r=e._vertexDeclarationMap[c];break;default:throw new Error("LoadModelV03: unknown version.")}if(!r)throw new Error("LoadModelV03: unknown vertexDeclaration.");var u=IS.create(r,4*h.length/r.vertexStride,35044,!0);u.setData(h),e._mesh._vertexBuffers.push(u)}var d=s+e._readData.getUint32(),p=e._readData.getUint32(),f=new Uint16Array(t.slice(d,d+p)),_=AS.create("ushort",p/2,35044,!0);_.setData(f),e._mesh._indexBuffer=_;var m=e._mesh._boneNames=[],g=e._readData.getUint16();for(m.length=g,i=0;g>i;i++)m[i]=e._strings[e._readData.getUint16()];e._readData.pos+=8;var v=e._readData.getUint32(),y=e._readData.getUint32(),b=new Float32Array(t.slice(s+v,s+v+y));for(e._mesh._inverseBindPoses=[],i=0,n=b.length;n>i;i+=16){var E=new ol(b[i+0],b[i+1],b[i+2],b[i+3],b[i+4],b[i+5],b[i+6],b[i+7],b[i+8],b[i+9],b[i+10],b[i+11],b[i+12],b[i+13],b[i+14],b[i+15]);e._mesh._inverseBindPoses.push(E)}return e._mesh._skinnedDatas=new Float32Array(16*b.length),!0},e.READ_SUBMESH=function(){var t=e._readData.__getBuffer(),i=new yl(e._mesh),n=e._readData.getInt16(),o=e._readData.getUint32(),s=e._readData.getUint32();i._vertexBuffer=e._mesh._vertexBuffers[n],i._vertexStart=o,i._vertexCount=s;var r=e._readData.getUint32(),a=e._readData.getUint32(),l=e._mesh._indexBuffer;i._indexBuffer=l,i._indexStart=r,i._indexCount=a,i._indices=new Uint16Array(l.getData().buffer,2*r,a);var h=e._DATA.offset,c=i._subIndexBufferStart,u=i._subIndexBufferCount,d=i._boneIndicesList,p=e._readData.getUint16();c.length=p,u.length=p,d.length=p;for(var f=0;p>f;f++){c[f]=e._readData.getUint32(),u[f]=e._readData.getUint32();var _=e._readData.getUint32(),m=e._readData.getUint32();d[f]=new Uint8Array(t.slice(h+_,h+_+m))}return e._subMeshes.push(i),!0},e._strings=[],e._readData=null,e._version=null,e._mesh=null,e._subMeshes=null,e._materialMap=null,n(e,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":Dl.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":Ll.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":uh.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":_h.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":lh.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":ch.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":$l.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":kl.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":Tl.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":Wl.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":Il.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":Bl.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":El.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":dh.vertexDeclaration,"POSITION,NORMAL,UV,UV1":Zl.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":th.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":sh.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":Kl.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":Gl.vertexDeclaration,"POSITION,NORMAL,UV":wl.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":zl.vertexDeclaration,"POSITION,NORMAL,COLOR":ih.vertexDeclaration,"POSITION,NORMAL,TANGENT":fh.vertexDeclaration,"POSITION,NORMAL":Hl.vertexDeclaration,"POSITION,UV":oh.vertexDeclaration,POSITION:Nl.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":Sl.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":Ll.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":uh.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":Vl.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":lh.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":Ul.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":$l.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":hh.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":Tl.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":Cl.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":Il.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":Rl.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":El.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":Ol.vertexDeclaration,"POSITION,NORMAL,UV,UV1":Zl.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":eh.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":sh.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":Kl.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":Pl.vertexDeclaration,"POSITION,NORMAL,UV":wl.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":Ml.vertexDeclaration,"POSITION,NORMAL,COLOR":ih.vertexDeclaration,"POSITION,NORMAL,TANGENT":Ql.vertexDeclaration,"POSITION,NORMAL":Hl.vertexDeclaration,"POSITION,UV":oh.vertexDeclaration,POSITION:Nl.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e}(),yh=function(){function e(e,t,i,n,o,s){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=i,this._materials=n,this._subMeshes=o,this._materialMap=s,this._version=t,this._onLoaded(e)}o(e,"laya.d3.loaders.LoadModelV01");var t=e.prototype;return t._onLoaded=function(e){this._readData=e,this.READ_BLOCK();for(var t=0;t<this._BLOCK.count;t++){var i=this._readData.getUint16(),n=this._strings[i],o=this["READ_"+n];if(null==o)throw new Error("model file err,no this function:"+i+" "+n);if(!o.call(this))break}return this._mesh},t.onError=function(){},t._readString=function(){return this._strings[this._readData.getUint16()]},t.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},t.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},t.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var e=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var t=0;t<this._STRINGS.size;t++)this._strings[t]=this._readData.readUTFString();return this._readData.pos=e,!0},t.READ_MATERIAL=function(){var e=this._readData.getUint16(),t=(this._readString(),this._readString());return"null"!==t?this._materials[e]=Tu.getRes(this._materialMap[t]):this._materials[e]=new yx,!0},t.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var e=this._readData.__getBuffer(),t=0,i=0,n=this._readData.getUint32(),o=this._readData.getUint32(),s=(new Float32Array(e.slice(n+this._DATA.offset,n+this._DATA.offset+o)),this._readData.getUint32()),r=this._readData.getUint32(),a=new Float32Array(e.slice(s+this._DATA.offset,s+this._DATA.offset+r));for(this.mesh._inverseBindPoses=[],t=0,i=a.length;i>t;t+=16){var l=new ol(a[t+0],a[t+1],a[t+2],a[t+3],a[t+4],a[t+5],a[t+6],a[t+7],a[t+8],a[t+9],a[t+10],a[t+11],a[t+12],a[t+13],a[t+14],a[t+15]);this.mesh._inverseBindPoses.push(l)}break;default:throw new Error("LoadModel:unknown version.")}return!0},t.READ_SUBMESH=function(){var t=(this._readString(),this._readData.getUint8(),this._readString());this._shaderAttributes=t.match(e._attrReg);var i=this._readData.getUint32(),n=this._readData.getUint32(),o=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),s=this._readData.getUint32(),r=this._readData.getUint32(),a=this._readData.getUint32(),l=this._readData.__getBuffer(),h=new yl(this._mesh),c=this._getVertexDeclaration(),u=IS.create(c,s/c.vertexStride,35044,!0),d=o+this._DATA.offset,p=l.slice(d,d+s);u.setData(new Float32Array(p)),h._vertexBuffer=u;for(var f=u.vertexDeclaration.getVertexElements(),_=0;_<f.length;_++)h._bufferUsage[f[_].elementUsage]=u;var m=AS.create("ushort",n/2,35044,!0),g=i+this._DATA.offset,v=l.slice(g,g+n);m.setData(new Uint16Array(v)),h._indexBuffer=m;var y=l.slice(r+this._DATA.offset,r+this._DATA.offset+a);return h._boneIndicesList[0]=new Uint8Array(y),this._subMeshes.push(h),!0},t.READ_DATAAREA=function(){return!1},t._getVertexDeclaration=function(){for(var e=!1,t=!1,i=!1,n=!1,o=!1,s=!1,r=!1,a=!1,l=!1,h=0;h<this._shaderAttributes.length;h+=8)switch(this._shaderAttributes[h]){case"POSITION":e=!0;break;case"NORMAL":t=!0;break;case"COLOR":i=!0;break;case"UV":n=!0;break;case"UV1":o=!0;break;case"BLENDWEIGHT":r=!0;break;case"BLENDINDICES":a=!0;break;case"TANGENT":s=!0;break;case"BINORMAL":l=!0}var c;return e&&t&&i&&n&&o&&r&&a&&s?c=Dl.vertexDeclaration:e&&t&&i&&n&&o&&r&&a?c=Ll.vertexDeclaration:e&&t&&n&&o&&r&&a&&s?c=_h.vertexDeclaration:e&&t&&n&&o&&r&&a?c=lh.vertexDeclaration:e&&t&&i&&n&&r&&a&&s?c=ch.vertexDeclaration:e&&t&&i&&n&&r&&a?c=$l.vertexDeclaration:e&&t&&s&&l&&n&&r&&a?c=ah.vertexDeclaration:e&&t&&n&&r&&a&&s?c=kl.vertexDeclaration:e&&t&&n&&r&&a?c=Tl.vertexDeclaration:e&&t&&i&&r&&a&&s?c=Wl.vertexDeclaration:e&&t&&i&&r&&a?c=Il.vertexDeclaration:e&&t&&i&&n&&o&&s?c=Bl.vertexDeclaration:e&&t&&i&&n&&o?c=El.vertexDeclaration:e&&t&&n&&o&&s?c=dh.vertexDeclaration:e&&t&&n&&o?c=Zl.vertexDeclaration:e&&t&&i&&n&&s?c=th.vertexDeclaration:e&&t&&n&&s&&l?c=sh.vertexDeclaration:e&&t&&i&&n?c=Kl.vertexDeclaration:e&&t&&n&&s?c=Gl.vertexDeclaration:e&&t&&n?c=wl.vertexDeclaration:e&&t&&i&&s?c=zl.vertexDeclaration:e&&t&&i&&(c=ih.vertexDeclaration),c},s(0,t,"mesh",function(){return this._mesh}),e._attrReg=new RegExp("(\\w+)|([:,;])","g"),e}(),bh=function(){function e(){}o(e,"laya.bili.mini.MiniImage",null,"MiniImage$7");var t=e.prototype;return t._loadImage=function(t){var i=this;if(wh.isZiYu)return void e.onCreateImage(t,i,!0);var n=!1;if(xh.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=xh.loadPath)t=t.split(xh.loadPath)[1];else{var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=t;""!=o&&(t=t.split(o)[1]),t||(t=s)}if(wh.subNativeFiles&&0==wh.subNativeheads.length)for(var r in wh.subNativeFiles){var a=wh.subNativeFiles[r];wh.subNativeheads=wh.subNativeheads.concat(a);for(var l=0;l<a.length;l++)wh.subMaps[a[l]]=r+"/"+a[l]}if(wh.subNativeFiles&&-1!=t.indexOf("/")){var c=t.split("/")[0]+"/";if(c&&-1!=wh.subNativeheads.indexOf(c)){var u=wh.subMaps[c];t=t.replace(c,u)}}}else n=!0,t=Cs.formatURL(t);xh.getFileInfo(t)?e.onCreateImage(t,i,!n):-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?wh.isZiYu?e.onCreateImage(t,i,!0):xh.downOtherFiles(t,new h(e,e.onDownImgCallBack,[t,i]),t):e.onCreateImage(t,i,!0)},e.onDownImgCallBack=function(t,i,n,o){void 0===o&&(o=""),n?i.onError(null):e.onCreateImage(t,i,!1,o)},e.onCreateImage=function(e,t,i,n){function o(){h.onload=null,h.onerror=null,delete t.imgCache[e]}void 0===i&&(i=!1),void 0===n&&(n="");var s;if(wh.autoCacheFile)if(i)if(wh.isZiYu){var r=Cs.formatURL(e);s=xh.ziyuFileTextureData[r]?xh.ziyuFileTextureData[r]:e}else s=e;else if(""!=n)s=n;else{var a=xh.getFileInfo(e),l=a.md5;s=xh.getFileNativePath(l)}else s=i?e:n;null==t.imgCache&&(t.imgCache={});var h,c=function(){o(),delete xh.fakeObj[e],delete xh.filesListObj[e],t.onLoaded(h)},u=function(){o(),t.event("error","Load image failed")};"nativeimage"==t._type?(h=new Or.window.Image,h.crossOrigin="",h.onload=c,h.onerror=u,h.src=s,t.imgCache[e]=h):new xw.create(s,{onload:c,onerror:u,onCreate:function(i){h=i,t.imgCache[e]=i}})},e}(),Eh=function(){function t(){}return o(t,"laya.bili.mini.MiniInput",null,"MiniInput$7"),t._createInputElement=function(){fw._initInput(fw.area=Or.createElement("textarea")),fw._initInput(fw.input=Or.createElement("input")),fw.inputContainer=Or.createElement("div"),fw.inputContainer.style.position="absolute",fw.inputContainer.style.zIndex=1e5,Or.container.appendChild(fw.inputContainer),fw.inputContainer.setPos=function(e,t){fw.inputContainer.style.left=e+"px",fw.inputContainer.style.top=t+"px"},i.stage.on("resize",null,t._onStageResize),bl.onWindowResize&&bl.onWindowResize(function(t){e.dispatchEvent&&e.dispatchEvent("resize")}),jh._soundClass=Ju,jh._musicClass=Ju;var n=wh.systemInfo.model,o=wh.systemInfo.system;-1!=n.indexOf("iPhone")&&(Or.onIPhone=!0,Or.onIOS=!0,Or.onIPad=!0,Or.onAndroid=!1),-1==o.indexOf("Android")&&-1==o.indexOf("Adr")||(Or.onAndroid=!0,Or.onIPhone=!1,Or.onIOS=!1,Or.onIPad=!1)},t._onStageResize=function(){var e=i.stage._canvasTransform.identity();e.scale(Or.width/Ns.canvas.width/a.getPixelRatio(),Or.height/Ns.canvas.height/a.getPixelRatio())},t.wxinputFocus=function(e){var t=fw.inputElement.target;t&&!t.editable||(wh.window.bl.offKeyboardConfirm(),wh.window.bl.offKeyboardInput(),wh.window.bl.showKeyboard({defaultValue:t.text,maxLength:t.maxChars,multiple:t.multiline,confirmHold:!0,confirmType:"done",success:function(e){},fail:function(e){}}),wh.window.bl.onKeyboardConfirm(function(e){var i=e?e.value:"";t.text=i,t.event("input"),laya.bili.mini.MiniInput.inputEnter()}),wh.window.bl.onKeyboardInput(function(e){var i=e?e.value:"";return t.multiline||-1==i.indexOf("\n")?(t.text=i,void t.event("input")):void laya.bili.mini.MiniInput.inputEnter()}))},t.inputEnter=function(){fw.inputElement.target.focus=!1},t.wxinputblur=function(){t.hideKeyboard()},t.hideKeyboard=function(){wh.window.bl.offKeyboardConfirm(),wh.window.bl.offKeyboardInput(),wh.window.bl.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})},t}(),xh=function(){function e(){}return o(e,"laya.bili.mini.MiniFileMgr",null,"MiniFileMgr$7"),e.isLocalNativeFile=function(e){for(var t=0,i=wh.nativefiles.length;i>t;t++)if(-1!=e.indexOf(wh.nativefiles[t]))return!0;return!1},e.getFileInfo=function(t){var i=t,n=e.fakeObj[i];return null==n?null:n},e.read=function(t,i,n,o,s,r){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r="");var a;a=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:a,encoding:i,success:function(e){null!=n&&n.runWith([0,e])},fail:function(t){t&&""!=o?e.downFiles(o,i,n,o,s,r):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,s,r,a){void 0===i&&(i="ascii"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0);var l=e.wxdown({url:t,success:function(l){200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,s,r,a):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l])},fail:function(e){null!=n&&n.runWith([1,e])}});l.onProgressUpdate(function(e){null!=n&&n.runWith([2,e.progress])})},e.readFile=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0),e.fs.readFile({filePath:t,encoding:i,success:function(r){(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))&&(wh.autoCacheFile||s)?(null!=n&&n.runWith([0,r]),e.copyFile(t,o,null,i,a)):null!=n&&n.runWith([0,r])},fail:function(e){e&&null!=n&&n.runWith([1,e])}})},e.downOtherFiles=function(t,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===s&&(s=!0),e.wxdown({url:t,success:function(t){200===t.statusCode?(wh.autoCacheFile||o)&&-1==n.indexOf("wx.qlogo.cn")&&-1==n.indexOf(".php")?(null!=i&&i.runWith([0,t.tempFilePath]),e.copyFile(t.tempFilePath,n,null,"",s)):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(e){null!=i&&i.runWith([1,e])}})},e.downLoadFile=function(t,n,o,s){void 0===n&&(n=""),void 0===s&&(s="ascii"),wh.window.navigator.userAgent.indexOf("MiniGame")<0?i.loader.load(t,o):"image"==n||"sound"==n?e.downOtherFiles(t,o,t,!0,!1):e.downFiles(t,s,o,t,!0,n,!1)},e.copyFile=function(t,i,n,o,s){void 0===o&&(o=""),void 0===s&&(s=!0);var r=t.split("/"),a=r[r.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(a);e.fakeObj[i]={md5:a,readyUrl:i,size:0,times:Or.now(),encoding:o};var c=52428800,u=4194304,d=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>wh.minClearSize&&(wh.minClearSize=r.size),e.onClearCacheRes()),e.deleteFile(t,i,n,o,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>wh.minClearSize&&(wh.minClearSize=r.size),e.onClearCacheRes()),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,a,!0,o,n,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}})},fail:function(e){null!=n&&n.runWith([1,e])}})},e.onClearCacheRes=function(){var t=wh.minClearSize,i=[];for(var n in e.filesListObj)"fileUsedSize"!=n&&i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,s=1,r=i.length;r>s;s++){var a=i[s];if(o>=t)break;o+=a.size,e.deleteFile("",a.readyUrl)}},e.sortOn=function(e,t,i){return void 0===i&&(i=0),16==i?e.sort(function(e,i){return e[t]-i[t]}):18==i?e.sort(function(e,i){return i[t]-e[t]}):e.sort(function(e,i){return e[t]-i[t]})},e.getFileNativePath=function(e){return laya.bili.mini.MiniFileMgr.fileNativeDir+"/"+e},e.deleteFile=function(t,i,n,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=0);var r=e.getFileInfo(i),a=e.getFileNativePath(r.md5);e.fs.unlink({filePath:a,success:function(r){var a=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(s){e.onSaveFile(i,t,a,o,n,s.size)},fail:function(e){null!=n&&n.runWith([1,e])}})}else e.onSaveFile(i,t,a,o,n,s)},fail:function(e){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)"fileUsedSize"!=i&&t.push(e.filesListObj[i]);for(var n=1,o=t.length;o>n;n++){var s=t[n];e.deleteFile("",s.readyUrl)}laya.bili.mini.MiniFileMgr.filesListObj&&laya.bili.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.bili.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.bili.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,s,r){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===r&&(r=0);var a=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[a]={md5:i,readyUrl:t,size:r,times:Or.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+r,e.writeFilesList(a,JSON.stringify(e.filesListObj),!0),null!=s&&s.runWith([0])}else if(e.filesListObj[a]){var l=parseInt(e.filesListObj[a].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-l,e.filesListObj[a].md5==e.fakeObj[a].md5&&delete e.fakeObj[a],delete e.filesListObj[a],e.writeFilesList(a,JSON.stringify(e.filesListObj),!1),null!=s&&s.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(e){},fail:function(e){}}),!wh.isZiYu&&wh.isPosMsgYu&&wh.window.bl.postMessage&&wh.window.bl.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(e){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,t])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="utf8"),void 0===o&&(o="");var s,r=e.getFileNativePath(t);try{s=e.fs.readFileSync(r,i),null!=n&&n.runWith([0,{data:s}])}catch(a){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=wh.window.bl.env.USER_DATA_PATH+t},e.filesListObj={},e.fakeObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=wh.window.bl.getFileSystemManager()},"wxdown",function(){return this.wxdown=wh.window.bl.downloadFile}]),e}(),Sh=function(){function e(){}return o(e,"laya.bili.mini.MiniLocalStorage",null,"MiniLocalStorage$6"),e.__init__=function(){e.items=e},e.setItem=function(e,t){try{bl.setStorageSync(e,t)}catch(i){bl.setStorage({key:e,data:t})}},e.getItem=function(e){return bl.getStorageSync(e)},e.setJSON=function(t,i){e.setItem(t,i)},e.getJSON=function(t){return e.getItem(t)},e.removeItem=function(e){bl.removeStorageSync(e)},e.clear=function(){bl.clearStorageSync()},e.getStorageInfoSync=function(){try{var e=bl.getStorageInfoSync();return console.log(e.keys),console.log(e.currentSize),console.log(e.limitSize),e}catch(t){}return null},e.support=!0,e.items=null,e}(),wh=function(){function t(){}return o(t,"laya.bili.mini.BLMiniAdapter"),t.getJson=function(e){return JSON.parse(e)},t.init=function(n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!t._inited&&(t._inited=!0,t.window=e,t.window.hasOwnProperty("bl")&&!(t.window.navigator.userAgent.indexOf("MiniGame")<0))){t.isZiYu=o,t.isPosMsgYu=n,t.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(s){}if(t.isZiYu||(xh.setNativeFileDir("/layaairGame"),xh.existDir(xh.fileNativeDir,h.create(t,t.onMkdirCallBack))),t.systemInfo=t.window.bl.getSystemInfoSync(),"ios 10.1.1"===t.systemInfo.system.toLowerCase())try{laya.webgl.resource.WebGLCharImage.canUseCanvas=!1}catch(s){}t.window.focus=function(){},i._getUrlPath=function(){},i.getUrlPath=function(){},t.window.logtime=function(e){},t.window.alertTimeLog=function(e){},t.window.resetShareInfo=function(){},t.window.CanvasRenderingContext2D=function(){},Iu._urlEncode=function(e){for(var i="",n=e.length,o=0;n>o;o++){var s=e[o];if(t.IGNORE.test(s))i+=s;else try{i+=encodeURI(s)}catch(r){console.log("errorInfo",">>>"+s,null)}}return i},t.window.CanvasRenderingContext2D.prototype=t.window.bl.createCanvas().getContext("2d").__proto__,t.window.document.body.appendChild=function(){},t.EnvConfig.pixelRatioInt=0,a.getPixelRatio=t.pixelRatio,t._preCreateElement=Or.createElement,Or.createElement=t.createElement,a.createShaderCondition=t.createShaderCondition,Dr.parseXMLFromString=t.parseXMLFromString,fw._createInputElement=Eh._createInputElement,t.EnvConfig.load=Tu.prototype.load,Tu.prototype.load=Zu.prototype.load,Tu.prototype._loadImage=bh.prototype._loadImage,Ts._baseClass=Sh,Sh.__init__(),nc.useRetinalCanvas=!0,t.onReciveData()}},t.onReciveData=function(){laya.bili.mini.BLMiniAdapter.isZiYu&&t.window.bl.onMessage(function(e){"opendatacontext"==e.isLoad?e.url&&(xh.ziyuFileData[e.url]=e.atlasdata,xh.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl):"openJsondatacontext"==e.isLoad?e.url&&(xh.ziyuFileData[e.url]=e.atlasdata):"openJsondatacontextPic"==e.isLoad&&(xh.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl)})},t.measureText=function(e){var i=t._measureText(e);return i||(i={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),
i},t.getUrlEncode=function(e,t){return"arraybuffer"==t?"":"utf8"},t.downLoadFile=function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n="utf8");var o=xh.getFileInfo(e);o?null!=i&&i.runWith([0]):xh.downLoadFile(e,t,i,n)},t.remove=function(e,t){xh.deleteFile("",e,t,"",0)},t.removeAll=function(){xh.deleteAll()},t.hasNativeFile=function(e){return xh.isLocalNativeFile(e)},t.getFileInfo=function(e){return xh.getFileInfo(e)},t.getFileList=function(){return xh.filesListObj},t.exitMiniProgram=function(){t.window.bl.exitMiniProgram()},t.onMkdirCallBack=function(e,t){e||(xh.filesListObj=JSON.parse(t.data),xh.fakeObj=JSON.parse(t.data))},t.pixelRatio=function(){if(!t.EnvConfig.pixelRatioInt)try{return t.EnvConfig.pixelRatioInt=t.systemInfo.pixelRatio,t.systemInfo.pixelRatio}catch(e){}return t.EnvConfig.pixelRatioInt},t.createElement=function(e){if("canvas"==e){var i;return 1==t.idx?t.isZiYu?(i=t.window.sharedCanvas,i.style={}):i=t.window.canvas:i=t.window.document.createElement("canvas"),t.idx++,i}if("textarea"==e||"input"==e)return t.onCreateInput(e);if("div"==e){var n=t._preCreateElement(e);return n.contains=function(e){return null},n.removeChild=function(e){},n}return t._preCreateElement(e)},t.onCreateInput=function(e){var i=t._preCreateElement(e);return i.focus=Eh.wxinputFocus,i.blur=Eh.wxinputblur,i.style={},i.value=0,i.parentElement={},i.placeholder={},i.type={},i.setColor=function(e){},i.setType=function(e){},i.setFontFace=function(e){},i.addEventListener=function(e){},i.contains=function(e){return null},i.removeChild=function(e){},i},t.createShaderCondition=function(e){var t=this,i=function(){return t[e.replace("this.","")]};return i},t.sendAtlasToOpenDataContext=function(e){if(!laya.bili.mini.BLMiniAdapter.isZiYu){var i=Tu.getRes(Cs.formatURL(e));if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";i.meta.image.split(",");if(i.meta&&i.meta.image)for(var n=i.meta.image.split(","),o=e.indexOf("/")>=0?"/":"\\",s=e.lastIndexOf(o),r=s>=0?e.substr(0,s+1):"",a=0,l=n.length;l>a;a++)n[a]=r+n[a];else n=[e.replace(".json",".png")];for(a=0;a<n.length;a++){var h=n[a];t.postInfoToContext(e,h,i)}}},t.postInfoToContext=function(e,i,n){var o={frames:n.frames,meta:n.meta},s=i,r=xh.getFileInfo(Cs.formatURL(i));if(r)var a=r.md5,l=xh.getFileNativePath(a);else l=s;if(!l)throw"获取图集的磁盘url路径不存在！";t.window.bl.postMessage({url:e,atlasdata:o,imgNativeUrl:l,imgReadyUrl:s,isLoad:"opendatacontext"})},t.sendSinglePicToOpenDataContext=function(e){var i=Cs.formatURL(e),n=xh.getFileInfo(i);if(n){var o=n.md5,s=xh.getFileNativePath(o);e=i}else s=e;if(!s)throw"获取图集的磁盘url路径不存在！";t.window.bl.postMessage({url:e,imgNativeUrl:s,imgReadyUrl:e,isLoad:"openJsondatacontextPic"})},t.sendJsonDataToDataContext=function(e){if(!laya.bili.mini.BLMiniAdapter.isZiYu){var i=Tu.getRes(e);if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";t.window.bl.postMessage({url:e,atlasdata:i,isLoad:"openJsondatacontext"})}},t.EnvConfig=null,t.window=null,t._preCreateElement=null,t._inited=!1,t.systemInfo=null,t.isZiYu=!1,t.isPosMsgYu=!1,t.autoCacheFile=!0,t.minClearSize=5242880,t.subNativeFiles=null,t.subNativeheads=[],t.subMaps=[],t.AutoCacheDownFile=!1,t._measureText=null,t.parseXMLFromString=function(t){var i;t=t.replace(/>\s+</g,"><");try{i=(new e.Parser.DOMParser).parseFromString(t,"text/xml")}catch(n){throw"需要引入xml解析库文件"}return i},t.idx=1,n(t,["IGNORE",function(){return this.IGNORE=new RegExp("[-_.!~*'();/?:@&=+$,#%]|[0-9|A-Z|a-z]")},"nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),t}(),Ch=function(){function e(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=e,this.y=t,this.width=i,this.height=n}o(e,"laya.maths.Rectangle");var t=e.prototype;return t.setTo=function(e,t,i,n){return this.x=e,this.y=t,this.width=i,this.height=n,this},t.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},t.contains=function(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.right&&t>=this.y&&t<this.bottom},t.intersects=function(e){return!(e.x>this.x+this.width||e.x+e.width<this.x||e.y>this.y+this.height||e.y+e.height<this.y)},t.intersection=function(t,i){return this.intersects(t)?(i||(i=new e),i.x=Math.max(this.x,t.x),i.y=Math.max(this.y,t.y),i.width=Math.min(this.right,t.right)-i.x,i.height=Math.min(this.bottom,t.bottom)-i.y,i):null},t.union=function(t,i){return i||(i=new e),this.clone(i),t.width<=0||t.height<=0?i:(i.addPoint(t.x,t.y),i.addPoint(t.right,t.bottom),this)},t.clone=function(t){return t||(t=new e),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},t.equals=function(e){return!(!e||e.x!==this.x||e.y!==this.y||e.width!==this.width||e.height!==this.height)},t.addPoint=function(e,t){return this.x>e&&(this.width+=this.x-e,this.x=e),this.y>t&&(this.height+=this.y-t,this.y=t),this.width<e-this.x&&(this.width=e-this.x),this.height<t-this.y&&(this.height=t-this.y),this},t._getBoundPoints=function(){var t=e._temB;return t.length=0,0==this.width||0==this.height?t:(t.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),t)},t.isEmpty=function(){return this.width<=0||this.height<=0},s(0,t,"bottom",function(){return this.y+this.height}),s(0,t,"right",function(){return this.x+this.width}),e._getBoundPointS=function(t,i,n,o){var s=e._temA;return s.length=0,0==n||0==o?s:(s.push(t,i,t+n,i,t,i+o,t+n,i+o),s)},e._getWrapRec=function(t,i){if(!t||t.length<1)return i?i.setTo(0,0,0,0):e.TEMP.setTo(0,0,0,0);i=i?i:new e;var n,o,s,r,a,l=t.length,h=Ah.TEMP;for(o=r=99999,s=a=-o,n=0;l>n;n+=2)h.x=t[n],h.y=t[n+1],o=o<h.x?o:h.x,r=r<h.y?r:h.y,s=s>h.x?s:h.x,a=a>h.y?a:h.y;return i.setTo(o,r,s-o,a-r)},e.EMPTY=new e,e.TEMP=new e,e._temB=[],e._temA=[],e}(),Th=function(){function e(){}return o(e,"laya.maths.Arith"),e.formatR=function(e){return e>Math.PI&&(e-=2*Math.PI),e<-Math.PI&&(e+=2*Math.PI),e},e.isPOT=function(e,t){return e>0&&0===(e&e-1)&&t>0&&0===(t&t-1)},e.setMatToArray=function(e,t){e.a,e.b,e.c,e.d,e.tx+20,e.ty+20,1,t[0]=e.a,t[1]=e.b,t[4]=e.c,t[5]=e.d,t[12]=e.tx,t[13]=e.ty},e}(),Ih=function(){function e(){}return o(e,"laya.maths.MathUtil"),e.subtractVector3=function(e,t,i){i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2]},e.lerp=function(e,t,i){return e*(1-i)+t*i},e.scaleVector3=function(e,t,i){i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t},e.lerpVector3=function(e,t,i,n){var o=e[0],s=e[1],r=e[2];n[0]=o+i*(t[0]-o),n[1]=s+i*(t[1]-s),n[2]=r+i*(t[2]-r)},e.lerpVector4=function(e,t,i,n){var o=e[0],s=e[1],r=e[2],a=e[3];n[0]=o+i*(t[0]-o),n[1]=s+i*(t[1]-s),n[2]=r+i*(t[2]-r),n[3]=a+i*(t[3]-a)},e.slerpQuaternionArray=function(e,t,i,n,o,s,r){var a,l,h,c,u,d=e[t+0],p=e[t+1],f=e[t+2],_=e[t+3],m=i[n+0],g=i[n+1],v=i[n+2],y=i[n+3];return l=d*m+p*g+f*v+_*y,0>l&&(l=-l,m=-m,g=-g,v=-v,y=-y),1-l>1e-6?(a=Math.acos(l),h=Math.sin(a),c=Math.sin((1-o)*a)/h,u=Math.sin(o*a)/h):(c=1-o,u=o),s[r+0]=c*d+u*m,s[r+1]=c*p+u*g,s[r+2]=c*f+u*v,s[r+3]=c*_+u*y,s},e.getRotation=function(e,t,i,n){return Math.atan2(n-t,i-e)/Math.PI*180},e.sortBigFirst=function(e,t){return e==t?0:t>e?1:-1},e.sortSmallFirst=function(e,t){return e==t?0:t>e?-1:1},e.sortNumBigFirst=function(e,t){return parseFloat(t)-parseFloat(e)},e.sortNumSmallFirst=function(e,t){return parseFloat(e)-parseFloat(t)},e.sortByKey=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var o;return o=i?n?e.sortNumBigFirst:e.sortBigFirst:n?e.sortNumSmallFirst:e.sortSmallFirst,function(e,i){return o(e[t],i[t])}},e}(),Ah=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}o(e,"laya.maths.Point");var t=e.prototype;return t.setTo=function(e,t){return this.x=e,this.y=t,this},t.distance=function(e,t){return Math.sqrt((this.x-e)*(this.x-e)+(this.y-t)*(this.y-t))},t.toString=function(){return this.x+","+this.y},t.normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y);if(e>0){var t=1/e;this.x*=t,this.y*=t}},e.TEMP=new e,e.EMPTY=new e,e}(),Nh=function(){function e(){}return o(e,"laya.maths.GrahamScan"),e.multiply=function(e,t,i){return(e.x-i.x)*(t.y-i.y)-(t.x-i.x)*(e.y-i.y)},e.dis=function(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)},e._getPoints=function(t,i,n){for(void 0===i&&(i=!1),e._mPointList||(e._mPointList=[]);e._mPointList.length<t;)e._mPointList.push(new Ah);return n||(n=[]),n.length=0,i?e.getFrom(n,e._mPointList,t):e.getFromR(n,e._mPointList,t),n},e.getFrom=function(e,t,i){var n=0;for(n=0;i>n;n++)e.push(t[n]);return e},e.getFromR=function(e,t,i){var n=0;for(n=0;i>n;n++)e.push(t.pop());return e},e.pListToPointList=function(t,i){void 0===i&&(i=!1);var n=0,o=t.length/2,s=e._getPoints(o,i,e._tempPointList);for(n=0;o>n;n++)s[n].setTo(t[n+n],t[n+n+1]);return s},e.pointListToPlist=function(t){var i,n=0,o=t.length,s=e._temPList;for(s.length=0,n=0;o>n;n++)i=t[n],s.push(i.x,i.y);return s},e.scanPList=function(t){return Dr.copyArray(t,e.pointListToPlist(e.scan(e.pListToPointList(t,!0))))},e.scan=function(t){var i,n,o,s=0,r=0,a=0,l=t.length,h={};for(n=e._temArr,n.length=0,l=t.length,s=l-1;s>=0;s--)i=t[s],o=i.x+"_"+i.y,h.hasOwnProperty(o)||(h[o]=!0,n.push(i));for(l=n.length,Dr.copyArray(t,n),s=1;l>s;s++)(t[s].y<t[a].y||t[s].y==t[a].y&&t[s].x<t[a].x)&&(a=s);for(i=t[0],t[0]=t[a],t[a]=i,s=1;l-1>s;s++){for(a=s,r=s+1;l>r;r++)(e.multiply(t[r],t[a],t[0])>0||0==e.multiply(t[r],t[a],t[0])&&e.dis(t[0],t[r])<e.dis(t[0],t[a]))&&(a=r);i=t[s],t[s]=t[a],t[a]=i}if(n=e._temArr,n.length=0,t.length<3)return Dr.copyArray(n,t);for(n.push(t[0],t[1],t[2]),s=3;l>s;s++){for(;n.length>=2&&e.multiply(t[s],n[n.length-1],n[n.length-2])>=0;)n.pop();t[s]&&n.push(t[s])}return n},e._mPointList=null,e._tempPointList=[],e._temPList=[],e._temArr=[],e}(),Ph=function(){function e(e,t,i,n,o,s){this.inPool=!1,this.bTransform=!1,void 0===e&&(e=1),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===s&&(s=0),this.a=e,this.b=t,this.c=i,this.d=n,this.tx=o,this.ty=s,this._checkTransform()}o(e,"laya.maths.Matrix");var t=e.prototype;return t.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},t._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},t.setTranslate=function(e,t){return this.tx=e,this.ty=t,this},t.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.scale=function(e,t){this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this.bTransform=!0},t.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,o=this.c,s=this.tx;this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=o*t-this.d*i,this.d=o*i+this.d*t,this.tx=s*t-this.ty*i,this.ty=s*i+this.ty*t,this.bTransform=!0},t.skew=function(e,t){var i=Math.tan(e),n=Math.tan(t),o=this.a,s=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=i*o,this.d+=i*s,this},t.invertTransformPoint=function(e){var t=this.a,i=this.b,n=this.c,o=this.d,s=this.tx,r=t*o-i*n,a=o/r,l=-i/r,h=-n/r,c=t/r,u=(n*this.ty-o*s)/r,d=-(t*this.ty-i*s)/r;return e.setTo(a*e.x+h*e.y+u,l*e.x+c*e.y+d)},t.transformPoint=function(e){return e.setTo(this.a*e.x+this.c*e.y+this.tx,this.b*e.x+this.d*e.y+this.ty)},t.transformPointN=function(e){return e.setTo(this.a*e.x+this.c*e.y,this.b*e.x+this.d*e.y)},t.transformPointArray=function(e,t){for(var i=e.length,n=0;i>n;n+=2){var o=e[n],s=e[n+1];t[n]=this.a*o+this.c*s+this.tx,t[n+1]=this.b*o+this.d*s+this.ty}return t},t.transformPointArrayScale=function(e,t){for(var i=e.length,n=0;i>n;n+=2){var o=e[n],s=e[n+1];t[n]=this.a*o+this.c*s,t[n+1]=this.b*o+this.d*s}return t},t.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},t.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},t.invert=function(){var e=this.a,t=this.b,i=this.c,n=this.d,o=this.tx,s=e*n-t*i;return this.a=n/s,this.b=-t/s,this.c=-i/s,this.d=e/s,this.tx=(i*this.ty-n*o)/s,this.ty=-(e*this.ty-t*o)/s,this},t.setTo=function(e,t,i,n,o,s){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=o,this.ty=s,this},t.concat=function(e){var t=this.a,i=this.c,n=this.tx;return this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d,this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this},t.scaleEx=function(e,t){var i=this.a,n=this.b,o=this.c,s=this.d;0!==n||0!==o?(this.a=e*i,this.b=e*n,this.c=t*o,this.d=t*s):(this.a=e*i,this.b=0*s,this.c=0*i,this.d=t*s),this.bTransform=!0},t.rotateEx=function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,o=this.b,s=this.c,r=this.d;0!==o||0!==s?(this.a=t*n+i*s,this.b=t*o+i*r,this.c=-i*n+t*s,this.d=-i*o+t*r):(this.a=t*n,this.b=i*r,this.c=-i*n,this.d=t*r),this.bTransform=!0},t.clone=function(){var t=e.create();return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t.bTransform=this.bTransform,t},t.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e.bTransform=this.bTransform,e},t.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},t.destroy=function(){if(!this.inPool){var t=e._cache;this.inPool=!0,t._length||(t._length=0),t[t._length++]=this,this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},e.mul=function(e,t,i){var n=e.a,o=e.b,s=e.c,r=e.d,a=e.tx,l=e.ty,h=t.a,c=t.b,u=t.c,d=t.d,p=t.tx,f=t.ty;return 0!==c||0!==u?(i.a=n*h+o*u,i.b=n*c+o*d,i.c=s*h+r*u,i.d=s*c+r*d,i.tx=h*a+u*l+p,i.ty=c*a+d*l+f):(i.a=n*h,i.b=o*d,i.c=s*h,i.d=r*d,i.tx=h*a+p,i.ty=d*l+f),i},e.mul16=function(e,t,i){var n=e.a,o=e.b,s=e.c,r=e.d,a=e.tx,l=e.ty,h=t.a,c=t.b,u=t.c,d=t.d,p=t.tx,f=t.ty;return 0!==c||0!==u?(i[0]=n*h+o*u,i[1]=n*c+o*d,i[4]=s*h+r*u,i[5]=s*c+r*d,i[12]=h*a+u*l+p,i[13]=c*a+d*l+f):(i[0]=n*h,i[1]=o*d,i[4]=s*h,i[5]=r*d,i[12]=h*a+p,i[13]=d*l+f),i},e.mulPre=function(e,t,i,n,o,s,r,a){var l=e.a,h=e.b,c=e.c,u=e.d,d=e.tx,p=e.ty;return 0!==i||0!==n?(a.a=l*t+h*n,a.b=l*i+h*o,a.c=c*t+u*n,a.d=c*i+u*o,a.tx=t*d+n*p+s,a.ty=i*d+o*p+r):(a.a=l*t,a.b=h*o,a.c=c*t,a.d=u*o,a.tx=t*d+s,a.ty=o*p+r),a},e.mulPos=function(e,t,i,n,o,s,r,a){var l=e.a,h=e.b,c=e.c,u=e.d,d=e.tx,p=e.ty;return 0!==h||0!==c?(a.a=t*l+i*c,a.b=t*h+i*u,a.c=n*l+o*c,a.d=n*h+o*u,a.tx=l*s+c*r+d,a.ty=h*s+u*r+p):(a.a=t*l,a.b=i*u,a.c=n*l,a.d=o*u,a.tx=l*s+d,a.ty=u*r+p),a},e.preMul=function(e,t,i){var n=e.a,o=e.b,s=e.c,r=e.d,a=t.a,l=t.b,h=t.c,c=t.d,u=t.tx,d=t.ty;return i.a=a*n,i.b=i.c=0,i.d=c*r,i.tx=u*n+e.tx,i.ty=d*r+e.ty,0===l&&0===h&&0===o&&0===s||(i.a+=l*s,i.d+=h*o,i.b+=a*o+l*r,i.c+=h*n+c*s,i.tx+=d*s,i.ty+=u*o),i},e.preMulXY=function(e,t,i,n){var o=e.a,s=e.b,r=e.c,a=e.d;return n.a=o,n.b=s,n.c=r,n.d=a,n.tx=t*o+e.tx+i*r,n.ty=i*a+e.ty+t*s,n},e.create=function(){var t=e._cache,i=t._length?t[--t._length]:new e;return i.inPool=!1,i},e.EMPTY=new e,e.TEMP=new e,e._cache=[],e}(),Rh=function(){function e(){this._controlPoints=[new Ah,new Ah,new Ah],this._calFun=this.getPoint2}o(e,"laya.maths.Bezier");var t=e.prototype;return t._switchPoint=function(e,t){var i=this._controlPoints.shift();i.setTo(e,t),this._controlPoints.push(i)},t.getPoint2=function(e,t){var i=this._controlPoints[0],n=this._controlPoints[1],o=this._controlPoints[2],s=Math.pow(1-e,2)*i.x+2*e*(1-e)*n.x+Math.pow(e,2)*o.x,r=Math.pow(1-e,2)*i.y+2*e*(1-e)*n.y+Math.pow(e,2)*o.y;t.push(s,r)},t.getPoint3=function(e,t){var i=this._controlPoints[0],n=this._controlPoints[1],o=this._controlPoints[2],s=this._controlPoints[3],r=Math.pow(1-e,3)*i.x+3*n.x*e*(1-e)*(1-e)+3*o.x*e*e*(1-e)+s.x*Math.pow(e,3),a=Math.pow(1-e,3)*i.y+3*n.y*e*(1-e)*(1-e)+3*o.y*e*e*(1-e)+s.y*Math.pow(e,3);t.push(r,a)},t.insertPoints=function(e,t){var i=NaN;e=e>0?e:5;var n=NaN;for(n=1/e,i=0;1>=i;i+=n)this._calFun(i,t)},t.getBezierPoints=function(e,t,i){void 0===t&&(t=5),void 0===i&&(i=2);var n=0,o=0;if(o=e.length,2*(i+1)>o)return[];var s;switch(s=[],i){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=i;)this._controlPoints.push(new Ah);for(n=0;2*i>n;n+=2)this._switchPoint(e[n],e[n+1]);for(n=2*i;o>n;n+=2)this._switchPoint(e[n],e[n+1]),n/2%i==0&&this.insertPoints(t,s);return s},n(e,["I",function(){return this.I=new e}]),e}(),Lh=function(){function e(){this._cacheBoundsType=!1}o(e,"laya.display.GraphicsBounds");var t=e.prototype;return t.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},t.reset=function(){this._temp&&(this._temp.length=0)},t.getBounds=function(e){return void 0===e&&(e=!1),(!this._bounds||!this._temp||this._temp.length<1||e!=this._cacheBoundsType)&&(this._bounds=Ch._getWrapRec(this.getBoundPoints(e),this._bounds)),this._cacheBoundsType=e,this._bounds},t.getBoundPoints=function(e){return void 0===e&&(e=!1),(!this._temp||this._temp.length<1||e!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(e)),this._cacheBoundsType=e,this._rstBoundPoints=Dr.copyArray(this._rstBoundPoints,this._temp)},t._getCmdPoints=function(t){void 0===t&&(t=!1);var i,n=Ns._context,o=this._graphics.cmds;if(i=this._temp||(this._temp=[]),i.length=0,o||null==this._graphics._one||(e._tempCmds.length=0,e._tempCmds.push(this._graphics._one),o=e._tempCmds),!o)return i;var s;s=e._tempMatrixArrays,s.length=0;var r=e._initMatrix;r.identity();for(var a,l,h=e._tempMatrix,c=NaN,u=NaN,d=NaN,p=NaN,f=NaN,_=NaN,m=0,g=o.length;g>m;m++)if(a=o[m],a.callee)switch(a.callee){case n._save:case 7:s.push(r),r=r.clone();break;case n._restore:case 8:r=s.pop();break;case n._scale:case 5:h.identity(),h.translate(-a[2],-a[3]),h.scale(a[0],a[1]),h.translate(a[2],a[3]),this._switchMatrix(r,h);break;case n._rotate:case 3:h.identity(),h.translate(-a[1],-a[2]),h.rotate(a[0]),h.translate(a[1],a[2]),this._switchMatrix(r,h);break;case n._translate:case 6:h.identity(),h.translate(a[0],a[1]),this._switchMatrix(r,h);break;case n._transform:case 4:h.identity(),h.translate(-a[1],-a[2]),h.concat(a[0]),h.translate(a[1],a[2]),this._switchMatrix(r,h);break;case 16:case 24:e._addPointArrToRst(i,Ch._getBoundPointS(a[0],a[1],a[2],a[3]),r);break;case 17:r.copyTo(h),h.concat(a[4]),e._addPointArrToRst(i,Ch._getBoundPointS(a[0],a[1],a[2],a[3]),h);break;case n._drawTexture:l=a[0],t?a[3]&&a[4]?e._addPointArrToRst(i,Ch._getBoundPointS(a[1],a[2],a[3],a[4]),r):(l=a[0],e._addPointArrToRst(i,Ch._getBoundPointS(a[1],a[2],l.width,l.height),r)):(c=(a[3]||l.sourceWidth)/l.width,u=(a[4]||l.sourceHeight)/l.height,d=c*l.sourceWidth,p=u*l.sourceHeight,f=l.offsetX>0?l.offsetX:0,_=l.offsetY>0?l.offsetY:0,f*=c,_*=u,e._addPointArrToRst(i,Ch._getBoundPointS(a[1]-f,a[2]-_,d,p),r));break;case n._fillTexture:a[3]&&a[4]?e._addPointArrToRst(i,Ch._getBoundPointS(a[1],a[2],a[3],a[4]),r):(l=a[0],e._addPointArrToRst(i,Ch._getBoundPointS(a[1],a[2],l.width,l.height),r));break;case n._drawTextureWithTransform:var v;a[5]?(r.copyTo(h),h.concat(a[5]),v=h):v=r,t?a[3]&&a[4]?e._addPointArrToRst(i,Ch._getBoundPointS(a[1],a[2],a[3],a[4]),v):(l=a[0],e._addPointArrToRst(i,Ch._getBoundPointS(a[1],a[2],l.width,l.height),v)):(l=a[0],c=(a[3]||l.sourceWidth)/l.width,u=(a[4]||l.sourceHeight)/l.height,d=c*l.sourceWidth,p=u*l.sourceHeight,f=l.offsetX>0?l.offsetX:0,_=l.offsetY>0?l.offsetY:0,f*=c,_*=u,e._addPointArrToRst(i,Ch._getBoundPointS(a[1]-f,a[2]-_,d,p),v));break;case n._drawRect:case 13:e._addPointArrToRst(i,Ch._getBoundPointS(a[0],a[1],a[2],a[3]),r);break;case n._drawCircle:case n._fillCircle:case 14:e._addPointArrToRst(i,Ch._getBoundPointS(a[0]-a[2],a[1]-a[2],a[2]+a[2],a[2]+a[2]),r);break;case n._drawLine:case 20:e._tempPoints.length=0;var y=NaN;y=.5*a[5],a[0]==a[2]?e._tempPoints.push(a[0]+y,a[1],a[2]+y,a[3],a[0]-y,a[1],a[2]-y,a[3]):a[1]==a[3]?e._tempPoints.push(a[0],a[1]+y,a[2],a[3]+y,a[0],a[1]-y,a[2],a[3]-y):e._tempPoints.push(a[0],a[1],a[2],a[3]),e._addPointArrToRst(i,e._tempPoints,r);break;case n._drawCurves:case 22:e._addPointArrToRst(i,Rh.I.getBezierPoints(a[2]),r,a[0],a[1]);break;case n._drawPoly:case n._drawLines:case 18:e._addPointArrToRst(i,a[2],r,a[0],a[1]);break;case n._drawPath:case 19:e._addPointArrToRst(i,this._getPathPoints(a[2]),r,a[0],a[1]);break;case n._drawPie:case 15:e._addPointArrToRst(i,this._getPiePoints(a[0],a[1],a[2],a[3],a[4]),r)}return i.length>200?i=Dr.copyArray(i,Ch._getWrapRec(i)._getBoundPoints()):i.length>8&&(i=Nh.scanPList(i)),i},t._switchMatrix=function(e,t){t.concat(e),t.copyTo(e)},t._getPiePoints=function(t,i,n,o,s){var r=e._tempPoints;e._tempPoints.length=0,r.push(t,i);var a=(s-o)%(2*Math.PI),l=10,h=a/l,c=NaN,u=o;for(c=0;l>=c;c++)r.push(t+n*Math.cos(u),i+n*Math.sin(u)),u+=h;return r},t._getPathPoints=function(t){var i=0,n=0,o=e._tempPoints;o.length=0,n=t.length;var s;for(i=0;n>i;i++)s=t[i],s.length>1&&(o.push(s[1],s[2]),s.length>3&&o.push(s[3],s[4]));return o},e._addPointArrToRst=function(t,i,n,o,s){void 0===o&&(o=0),void 0===s&&(s=0);var r=0,a=0;for(a=i.length,r=0;a>r;r+=2)e._addPointToRst(t,i[r]+o,i[r+1]+s,n)},e._addPointToRst=function(e,t,i,n){var o=Ah.TEMP;o.setTo(t?t:0,i?i:0),n.transformPoint(o),e.push(o.x,o.y)},e._tempPoints=[],e._tempMatrixArrays=[],e._tempCmds=[],n(e,["_tempMatrix",function(){return this._tempMatrix=new Ph},"_initMatrix",function(){return this._initMatrix=new Ph}]),e}(),Oh=function(){function e(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return o(e,"laya.display.css.TransformInfo"),e}(),Mh=function(){function e(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this.direction="ltr",this._tf=e._TF_EMPTY}o(e,"laya.display.css.Style");var t=e.prototype;return t.getTransform=function(){return this._tf},t.setTransform=function(t){this._tf="none"!==t&&t?t:e._TF_EMPTY},t.setTranslateX=function(t){this._tf===e._TF_EMPTY&&(this._tf=new Oh),this._tf.translateX=t},t.setTranslateY=function(t){this._tf===e._TF_EMPTY&&(this._tf=new Oh),this._tf.translateY=t},t.setScaleX=function(t){this._tf===e._TF_EMPTY&&(this._tf=new Oh),this._tf.scaleX=t},t.setScale=function(t,i){this._tf===e._TF_EMPTY&&(this._tf=new Oh),this._tf.scaleX=t,this._tf.scaleY=i},t.setScaleY=function(t){this._tf===e._TF_EMPTY&&(this._tf=new Oh),this._tf.scaleY=t},t.setRotate=function(t){this._tf===e._TF_EMPTY&&(this._tf=new Oh),this._tf.rotate=t},t.setSkewX=function(t){this._tf===e._TF_EMPTY&&(this._tf=new Oh),this._tf.skewX=t},t.setSkewY=function(t){this._tf===e._TF_EMPTY&&(this._tf=new Oh),this._tf.skewY=t},t.destroy=function(){this.scrollRect=null},t.render=function(e,t,i,n){},t.getCSSStyle=function(){return kd.EMPTY},t._enableLayout=function(){return!1},s(0,t,"absolute",function(){return!0}),s(0,t,"block",function(){return 0!=(1&this._type)}),s(0,t,"scaleX",function(){return this._tf.scaleX},function(e){this.setScaleX(e)}),s(0,t,"skewY",function(){return this._tf.skewY},function(e){this.setSkewY(e)}),s(0,t,"skewX",function(){return this._tf.skewX},function(e){this.setSkewX(e)}),s(0,t,"rotate",function(){return this._tf.rotate},function(e){this.setRotate(e)}),s(0,t,"transform",function(){return this.getTransform()},function(e){this.setTransform(e)}),s(0,t,"scaleY",function(){return this._tf.scaleY},function(e){this.setScaleY(e)}),s(0,t,"paddingTop",function(){return 0}),s(0,t,"translateY",function(){return this._tf.translateY},function(e){this.setTranslateY(e)}),s(0,t,"translateX",function(){return this._tf.translateX},function(e){this.setTranslateX(e)}),s(0,t,"paddingLeft",function(){return 0}),e.__init__=function(){e._TF_EMPTY=new Oh,e.EMPTY=new e},e.EMPTY=null,e._TF_EMPTY=null,e}(),Dh=function(){function e(t){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=zr.create(e.defaultColor),this.family=e.defaultFamily,this.stroke=e._STROKE,this.size=e.defaultSize,t&&t!==e.EMPTY&&t.copyTo(this)}o(e,"laya.display.css.Font");var t=e.prototype;return t.set=function(e){this._text=null;for(var t=e.split(" "),i=0,n=t.length;n>i;i++){var o=t[i];switch(o){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}o.indexOf("px")>0&&(this.size=parseInt(o),this.family=t[i+1],i++)}},t.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},t.copyTo=function(t){t._type=this._type,t._text=this._text,t._weight=this._weight,t._color=this._color,t.family=this.family,t.stroke=this.stroke!=e._STROKE?this.stroke.slice():e._STROKE,t.indent=this.indent,t.size=this.size},s(0,t,"decoration",function(){return this._decoration?this._decoration.value:null},function(e){var t=e.split(" ");switch(this._decoration||(this._decoration={}),t[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=t[0]}t[1]&&(this._decoration.color=zr.create(t)),this._decoration.value=e}),s(0,t,"weight",function(){return""+this._weight},function(e){var t=0;switch(e){case"normal":break;case"bold":this.bold=!0,t=700;break;case"bolder":t=800;break;case"lighter":t=100;break;default:t=parseInt(e)}this._weight=t,this._text=null}),s(0,t,"color",function(){return this._color.strColor},function(e){this._color=zr.create(e)}),s(0,t,"bold",function(){return 0!==(2048&this._type)},function(e){e?this._type|=2048:this._type&=-2049}),s(0,t,"italic",function(){return 0!==(512&this._type)},function(e){e?this._type|=512:this._type&=-513}),s(0,t,"password",function(){return 0!==(1024&this._type)},function(e){e?this._type|=1024:this._type&=-1025}),e.__init__=function(){e.EMPTY=new e(null)},e.EMPTY=null,e.defaultColor="#000000",e.defaultSize=12,e.defaultFamily="Arial",e.defaultFont="12px Arial",e._STROKE=[0,"#000000"],e._ITALIC=512,e._PASSWORD=1024,e._BOLD=2048,e}(),kh=function(){function e(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}o(e,"laya.display.BitmapFont");var t=e.prototype;return t.loadFont=function(e,t){this._path=e,this._complete=t,i.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],h.create(this,this.onLoaded))},t.onLoaded=function(){this.parseFont(Tu.getRes(this._path),Tu.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},t.parseFont=function(e,t){if(null!=e&&null!=t){this._texture=t;var i=1,n=e.getElementsByTagName("info");if(!n[0].getAttributeNode)return this.parseFont2(e,t);this.fontSize=parseInt(n[0].getAttributeNode("size").nodeValue);var o=n[0].getAttributeNode("padding").nodeValue,s=o.split(",");this._padding=[parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3])];var r;r=e.getElementsByTagName("char");var a=0;for(a=0;a<r.length;a++){var l=r[a],h=parseInt(l.getAttributeNode("id").nodeValue),c=parseInt(l.getAttributeNode("xoffset").nodeValue)/i,u=parseInt(l.getAttributeNode("yoffset").nodeValue)/i,d=parseInt(l.getAttributeNode("xadvance").nodeValue)/i,p=new Ch;p.x=parseInt(l.getAttributeNode("x").nodeValue),p.y=parseInt(l.getAttributeNode("y").nodeValue),p.width=parseInt(l.getAttributeNode("width").nodeValue),p.height=parseInt(l.getAttributeNode("height").nodeValue);var f=Vu.create(t,p.x,p.y,p.width,p.height,c,u);this._maxWidth=Math.max(this._maxWidth,d+this.letterSpacing),this._fontCharDic[h]=f,this._fontWidthMap[h]=d}}},t.parseFont2=function(e,t){if(null!=e&&null!=t){this._texture=t;var i=1,n=e.getElementsByTagName("info");this.fontSize=parseInt(n[0].attributes.size.nodeValue);var o=n[0].attributes.padding.nodeValue,s=o.split(",");this._padding=[parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3])];var r=e.getElementsByTagName("char"),a=0;for(a=0;a<r.length;a++){var l=r[a].attributes,h=parseInt(l.id.nodeValue),c=parseInt(l.xoffset.nodeValue)/i,u=parseInt(l.yoffset.nodeValue)/i,d=parseInt(l.xadvance.nodeValue)/i,p=new Ch;p.x=parseInt(l.x.nodeValue),p.y=parseInt(l.y.nodeValue),p.width=parseInt(l.width.nodeValue),p.height=parseInt(l.height.nodeValue);var f=Vu.create(t,p.x,p.y,p.width,p.height,c,u);this._maxWidth=Math.max(this._maxWidth,d+this.letterSpacing),this._fontCharDic[h]=f,this._fontWidthMap[h]=d}}},t.getCharTexture=function(e){return this._fontCharDic[e.charCodeAt(0)]},t.destroy=function(){if(this._texture){for(var e in this._fontCharDic){var t=this._fontCharDic[e];t&&t.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},t.setSpaceWidth=function(e){this._spaceWidth=e},t.getCharWidth=function(e){var t=e.charCodeAt(0);return this._fontWidthMap[t]?this._fontWidthMap[t]+this.letterSpacing:" "==e?this._spaceWidth+this.letterSpacing:0},t.getTextWidth=function(e){for(var t=0,i=0,n=e.length;n>i;i++)t+=this.getCharWidth(e.charAt(i));return t},t.getMaxWidth=function(){return this._maxWidth},t.getMaxHeight=function(){return this.fontSize},t.drawText=function(e,t,i,n,o,s){var r,a=this.getTextWidth(e),l=0;"center"===o&&(l=(s-a)/2),"right"===o&&(l=s-a);for(var h=0,c=0,u=e.length;u>c;c++)r=this.getCharTexture(e.charAt(c)),r&&(t.graphics.drawTexture(r,i+h+l,n),h+=this.getCharWidth(e.charAt(c)))},e}(),Bh=function(){function e(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new ms}o(e,"laya.events.TouchManager");var t=e.prototype;return t._clearTempArrs=function(){e._oldArr.length=0,e._newArr.length=0,e._tEleArr.length=0},t.getTouchFromArr=function(e,t){var i=0,n=0;n=t.length;var o;for(i=0;n>i;i++)if(o=t[i],o.id==e)return o;return null},t.removeTouchFromArr=function(e,t){var i=0;for(i=t.length-1;i>=0;i--)t[i].id==e&&t.splice(i,1)},t.createTouchO=function(e,t){var i;return i=Hr.getItem("TouchData")||{},i.id=t,i.tar=e,i},t.onMouseDown=function(t,i,n){if(void 0===n&&(n=!1),this.enable){var o,s,r;o=this.getTouchFromArr(i,this.preOvers),r=this.getEles(t,null,e._tEleArr),o?o.tar=t:(s=this.createTouchO(t,i),this.preOvers.push(s)),Or.onMobile&&this.sendEvents(r,"mouseover");var a;a=n?this.preDowns:this.preRightDowns,o=this.getTouchFromArr(i,a),o?o.tar=t:(s=this.createTouchO(t,i),a.push(s)),this.sendEvents(r,n?"mousedown":"rightmousedown"),this._clearTempArrs()}},t.sendEvents=function(e,t){var i=0,n=0;n=e.length,this._event._stoped=!1;var o;o=e[0];var s;for(i=0;n>i;i++){if(s=e[i],s.destroyed)return;if(s.event(t,this._event.setTo(t,s,o)),this._event._stoped)break}},t.getEles=function(e,t,i){for(i?i.length=0:i=[];e&&e!=t;)i.push(e),e=e.parent;return i},t.checkMouseOutAndOverOfMove=function(t,i,n){if(void 0===n&&(n=0),i!=t){var o,s,r=0,a=0;if(i.contains(t))s=this.getEles(t,i,e._tEleArr),this.sendEvents(s,"mouseover");else if(t.contains(i))s=this.getEles(i,t,e._tEleArr),this.sendEvents(s,"mouseout");else{s=e._tEleArr,s.length=0;var l;l=this.getEles(i,null,e._oldArr);var h;h=this.getEles(t,null,e._newArr),a=l.length;var c=0;for(r=0;a>r;r++){if(o=l[r],c=h.indexOf(o),c>=0){h.splice(c,h.length-c);break}s.push(o)}s.length>0&&this.sendEvents(s,"mouseout"),h.length>0&&this.sendEvents(h,"mouseover")}}},t.onMouseMove=function(t,i){if(this.enable){var n;n=this.getTouchFromArr(i,this.preOvers);var o;n?(this.checkMouseOutAndOverOfMove(t,n.tar),n.tar=t,o=this.getEles(t,null,e._tEleArr)):(o=this.getEles(t,null,e._tEleArr),this.sendEvents(o,"mouseover"),this.preOvers.push(this.createTouchO(t,i))),this.sendEvents(o,"mousemove"),this._clearTempArrs()}},t.getLastOvers=function(){return e._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,e._tEleArr):(e._tEleArr.push(i.stage),e._tEleArr)},t.stageMouseOut=function(){var e;e=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(e,"mouseout")},t.onMouseUp=function(t,i,n){if(void 0===n&&(n=!1),this.enable){var o,s,r,a,l,h=0,c=0,u=Or.onMobile;s=this.getEles(t,null,e._tEleArr),this.sendEvents(s,n?"mouseup":"rightmouseup");var d;if(d=n?this.preDowns:this.preRightDowns,o=this.getTouchFromArr(i,d)){var p=!1,f=Or.now();if(p=f-this._lastClickTime<300,this._lastClickTime=f,t==o.tar)l=s;else for(r=this.getEles(o.tar,null,e._oldArr),l=e._newArr,l.length=0,c=r.length,h=0;c>h;h++)a=r[h],s.indexOf(a)>=0&&l.push(a);l.length>0&&this.sendEvents(l,n?"click":"rightclick"),
n&&p&&this.sendEvents(l,"doubleclick"),this.removeTouchFromArr(i,d),o.tar=null,Hr.recover("TouchData",o)}else;o=this.getTouchFromArr(i,this.preOvers),o&&u&&(l=this.getEles(o.tar,null,l),l&&l.length>0&&this.sendEvents(l,"mouseout"),this.removeTouchFromArr(i,this.preOvers),o.tar=null,Hr.recover("TouchData",o)),this._clearTempArrs()}},e._oldArr=[],e._newArr=[],e._tEleArr=[],n(e,["I",function(){return this.I=new e}]),e}(),Vh=function(){function e(){}return o(e,"laya.events.KeyBoardManager"),e.__init__=function(){e._addEvent("keydown"),e._addEvent("keypress"),e._addEvent("keyup")},e._addEvent=function(e){Or.document.addEventListener(e,function(t){laya.events.KeyBoardManager._dispatch(t,e)},!0)},e._dispatch=function(t,n){if(e.enabled){e._event._stoped=!1,e._event.nativeEvent=t,e._event.keyCode=t.keyCode||t.which||t.charCode,"keydown"===n?e._pressKeys[e._event.keyCode]=!0:"keyup"===n&&(e._pressKeys[e._event.keyCode]=null);for(var o=i.stage.focus&&null!=i.stage.focus.event&&i.stage.focus.displayedInStage?i.stage.focus:i.stage,s=o;s;)s.event(n,e._event.setTo(n,s,o)),s=s.parent}},e.hasKeyDown=function(t){return e._pressKeys[t]},e._pressKeys={},e.enabled=!0,n(e,["_event",function(){return this._event=new ms}]),e}(),Fh=function(){function e(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new ms,this._matrix=new Ph,this._point=new Ah,this._rect=new Ch,this._prePoint=new Ah,this._curTouchID=NaN}o(e,"laya.events.MouseManager");var t=e.prototype;return t.__init__=function(t,i){var n=this;this._stage=t;var o=this,s=this._eventList;i.oncontextmenu=function(t){return e.enabled?!1:void 0},i.addEventListener("mousedown",function(t){e.enabled&&(Or.onIE||t.preventDefault(),s.push(t),o.mouseDownTime=Or.now())}),i.addEventListener("mouseup",function(t){e.enabled&&(t.preventDefault(),s.push(t),o.mouseDownTime=-Or.now())},!0),i.addEventListener("mousemove",function(t){if(e.enabled){t.preventDefault();var i=Or.now();if(i-o._lastMoveTimer<10)return;o._lastMoveTimer=i,s.push(t)}},!0),i.addEventListener("mouseout",function(t){e.enabled&&s.push(t)}),i.addEventListener("mouseover",function(t){e.enabled&&s.push(t)}),i.addEventListener("touchstart",function(t){e.enabled&&(s.push(t),e._isFirstTouch||fw.isInputting||t.preventDefault(),o.mouseDownTime=Or.now())}),i.addEventListener("touchend",function(t){e.enabled?(e._isFirstTouch||fw.isInputting||t.preventDefault(),e._isFirstTouch=!1,s.push(t),o.mouseDownTime=-Or.now()):n._curTouchID=NaN},!0),i.addEventListener("touchmove",function(t){e.enabled&&(t.preventDefault(),s.push(t))},!0),i.addEventListener("touchcancel",function(t){e.enabled?(t.preventDefault(),s.push(t)):n._curTouchID=NaN},!0),i.addEventListener("mousewheel",function(t){e.enabled&&s.push(t)}),i.addEventListener("DOMMouseScroll",function(t){e.enabled&&s.push(t)})},t.initEvent=function(e,t){var i=this;i._event._stoped=!1,i._event.nativeEvent=t||e,i._target=null,this._point.setTo(e.pageX||e.clientX,e.pageY||e.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),i.mouseX=this._point.x,i.mouseY=this._point.y,i._event.touchId=e.identifier||0,this._tTouchID=i._event.touchId;var n;n=Bh.I._event,n._stoped=!1,n.nativeEvent=i._event.nativeEvent,n.touchId=i._event.touchId},t.checkMouseWheel=function(e){this._event.delta=e.wheelDelta?.025*e.wheelDelta:-e.detail;for(var t=Bh.I.getLastOvers(),i=0,n=t.length;n>i;i++){var o=t[i];o.event("mousewheel",this._event.setTo("mousewheel",o,this._target))}},t.onMouseMove=function(e){Bh.I.onMouseMove(e,this._tTouchID)},t.onMouseDown=function(e){if(fw.isInputting&&i.stage.focus&&i.stage.focus.focus&&!i.stage.focus.contains(this._target)){var t=i.stage.focus._tf||i.stage.focus,n=e._tf||e;n instanceof laya.display.Input&&n.multiline==t.multiline?t._focusOut():t.focus=!1}Bh.I.onMouseDown(e,this._tTouchID,this._isLeftMouse)},t.onMouseUp=function(e){Bh.I.onMouseUp(e,this._tTouchID,this._isLeftMouse)},t.check=function(e,t,i,n){this._point.setTo(t,i),e.fromParentPoint(this._point),t=this._point.x,i=this._point.y;var o=e.scrollRect;if(o&&(this._rect.setTo(o.x,o.y,o.width,o.height),!this._rect.contains(t,i)))return!1;if(!this.disableMouseEvent){if(e.hitTestPrior&&!e.mouseThrough&&!this.hitTest(e,t,i))return!1;for(var s=e._childs.length-1;s>-1;s--){var r=e._childs[s];if(!r.destroyed&&r.mouseEnabled&&r.visible&&this.check(r,t,i,n))return!0}}var a=!e.hitTestPrior||e.mouseThrough||this.disableMouseEvent?this.hitTest(e,t,i):!0;return a?(this._target=e,n.call(this,e)):n===this.onMouseUp&&e===this._stage&&(this._target=this._stage,n.call(this,this._target)),a},t.hitTest=function(e,t,i){var n=!1;if(e.scrollRect&&(t-=e.scrollRect.x,i-=e.scrollRect.y),e.hitArea instanceof laya.utils.HitArea)return e.hitArea.isHit(t,i);if(e.width>0&&e.height>0||e.mouseThrough||e.hitArea)if(e.mouseThrough)n=e.getGraphicBounds().contains(t,i);else{var o=this._rect;e.hitArea?o=e.hitArea:o.setTo(0,0,e.width,e.height),n=o.contains(t,i)}return n},t.runEvent=function(){var t=this._eventList.length;if(t){for(var i,n=this,o=0,s=0,r=0;t>o;){var a=this._eventList[o];switch("mousemove"!==a.type&&(this._prePoint.x=this._prePoint.y=-1e6),a.type){case"mousedown":this._touchIDs[0]=this._id++,e._isTouchRespond?e._isTouchRespond=!1:(n._isLeftMouse=0===a.button,n.initEvent(a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown));break;case"mouseup":n._isLeftMouse=0===a.button,n.initEvent(a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-a.clientX)+Math.abs(this._prePoint.y-a.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=a.clientX,this._prePoint.y=a.clientY,n.initEvent(a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseMove));break;case"touchstart":e._isTouchRespond=!0,n._isLeftMouse=!0;var l=a.changedTouches;for(s=0,r=l.length;r>s;s++)i=l[s],(e.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=i.identifier,this._id%200===0&&(this._touchIDs={}),this._touchIDs[i.identifier]=this._id++,n.initEvent(i,a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown));break;case"touchend":case"touchcancel":e._isTouchRespond=!0,n._isLeftMouse=!0;var h=a.changedTouches;for(s=0,r=h.length;r>s;s++)if(i=h[s],e.multiTouchEnabled||i.identifier==this._curTouchID){this._curTouchID=NaN,n.initEvent(i,a);var c=!1;c=n.check(n._stage,n.mouseX,n.mouseY,n.onMouseUp),c||n.onMouseUp(null)}break;case"touchmove":var u=a.changedTouches;for(s=0,r=u.length;r>s;s++)i=u[s],(e.multiTouchEnabled||i.identifier==this._curTouchID)&&(n.initEvent(i,a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":n.checkMouseWheel(a);break;case"mouseout":Bh.I.stageMouseOut();break;case"mouseover":n._stage.event("mouseover",n._event.setTo("mouseover",n._stage,n._stage))}o++}this._eventList.length=0}},e.enabled=!0,e.multiTouchEnabled=!0,e._isTouchRespond=!1,e._isFirstTouch=!0,n(e,["instance",function(){return this.instance=new e}]),e}(),Gh=function(){function e(t){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++e._uniqueIDCounter,this._name=t?t:"Content Manager",e._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,e._resourceManagers.push(this),this._resources=[]}o(e,"laya.resource.ResourceManager");var t=e.prototype;return i.imps(t,{"laya.resource.IDispose":!0}),t.getResourceByIndex=function(e){return this._resources[e]},t.getResourcesLength=function(){return this._resources.length},t.addResource=function(e){e.resourceManager&&e.resourceManager.removeResource(e);var t=this._resources.indexOf(e);return-1===t?(e._resourceManager=this,this._resources.push(e),this.addSize(e.memorySize),!0):!1},t.removeResource=function(e){var t=this._resources.indexOf(e);return-1!==t?(this._resources.splice(t,1),e._resourceManager=null,this._memorySize-=e.memorySize,!0):!1},t.unload=function(){for(var e=this._resources.slice(0,this._resources.length),t=0;t<e.length;t++){var i=e[t];i.destroy()}e.length=0},t.dispose=function(){if(this===e._systemResourceManager)throw new Error("systemResourceManager不能被释放！");e._resourceManagers.splice(e._resourceManagers.indexOf(this),1),e._isResourceManagersSorted=!1;for(var t=this._resources.slice(0,this._resources.length),i=0;i<t.length;i++){var n=t[i];n.resourceManager.removeResource(n),n.destroy()}t.length=0},t.addSize=function(e){e&&(this.autoRelease&&e>0&&this._memorySize+e>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=e)},t.garbageCollection=function(e){var t=this._resources;t=t.slice(),t.sort(function(e,t){if(!e||!t)throw new Error("a或b不能为空！");return e.released&&t.released?0:e.released?1:t.released?-1:e._lastUseFrameCount-t._lastUseFrameCount});for(var i=Nr.loopCount,n=0,o=t.length;o>n;n++){var s=t[n];if(!(i-s._lastUseFrameCount>1))return void(this._memorySize>=e&&(this._isOverflow=!0));if(s.releaseResource(),this._memorySize<e)return void(this._isOverflow=!1)}},s(0,t,"memorySize",function(){return this._memorySize}),s(0,t,"name",function(){return this._name},function(t){!t&&""===t||this._name===t||(this._name=t,e._isResourceManagersSorted=!1)}),s(0,t,"id",function(){return this._id}),s(1,e,"systemResourceManager",function(){return e._systemResourceManager}),e.__init__=function(){e.currentResourceManager=e.systemResourceManager},e.getLoadedResourceManagerByIndex=function(t){return e._resourceManagers[t]},e.getLoadedResourceManagersCount=function(){return e._resourceManagers.length},e.recreateContentManagers=function(t){void 0===t&&(t=!1);for(var i=e.currentResourceManager,n=0;n<e._resourceManagers.length;n++){e.currentResourceManager=e._resourceManagers[n];for(var o=0;o<e.currentResourceManager._resources.length;o++)e.currentResourceManager._resources[o].releaseResource(t),e.currentResourceManager._resources[o].activeResource(t)}e.currentResourceManager=i},e.releaseContentManagers=function(t){void 0===t&&(t=!1);for(var i=e.currentResourceManager,n=0;n<e._resourceManagers.length;n++){e.currentResourceManager=e._resourceManagers[n];for(var o=0;o<e.currentResourceManager._resources.length;o++){var s=e.currentResourceManager._resources[o];!s.released&&s.releaseResource(t)}}e.currentResourceManager=i},e._uniqueIDCounter=0,e._isResourceManagersSorted=!1,e._resourceManagers=[],n(e,["_systemResourceManager",function(){return this._systemResourceManager=new e("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=e._systemResourceManager}]),e}(),Hh=function(){function e(){}o(e,"laya.tt.mini.MiniImage",null,"MiniImage$8");var t=e.prototype;return t._loadImage=function(t){var i=this;if(Uh.isZiYu)return void e.onCreateImage(t,i,!0);var n=!1;if(Wh.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=Wh.loadPath)t=t.split(Wh.loadPath)[1];else{var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=t;""!=o&&(t=t.split(o)[1]),t||(t=s)}if(Uh.subNativeFiles&&0==Uh.subNativeheads.length)for(var r in Uh.subNativeFiles){var a=Uh.subNativeFiles[r];Uh.subNativeheads=Uh.subNativeheads.concat(a);for(var l=0;l<a.length;l++)Uh.subMaps[a[l]]=r+"/"+a[l]}if(Uh.subNativeFiles&&-1!=t.indexOf("/")){var c=t.split("/")[0]+"/";if(c&&-1!=Uh.subNativeheads.indexOf(c)){var u=Uh.subMaps[c];t=t.replace(c,u)}}}else n=!0,t=Cs.formatURL(t);Wh.getFileInfo(t)?e.onCreateImage(t,i,!n):-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?Uh.isZiYu?e.onCreateImage(t,i,!0):Wh.downOtherFiles(encodeURI(t),new h(e,e.onDownImgCallBack,[t,i]),t):e.onCreateImage(t,i,!0)},e.onDownImgCallBack=function(t,i,n,o){void 0===o&&(o=""),n?i.onError(null):e.onCreateImage(t,i,!1,o)},e.onCreateImage=function(e,t,i,n){function o(){h.onload=null,h.onerror=null,delete t.imgCache[e]}void 0===i&&(i=!1),void 0===n&&(n="");var s;if(Uh.autoCacheFile)if(i)if(Uh.isZiYu){var r=Cs.formatURL(e);s=Wh.ziyuFileTextureData[r]?Wh.ziyuFileTextureData[r]:e}else s=e;else if(""!=n)s=n;else{var a=Wh.getFileInfo(e),l=a.md5;s=Wh.getFileNativePath(l)}else s=i?e:n;null==t.imgCache&&(t.imgCache={});var h,c=function(){o(),t.onLoaded(h)},u=function(){o(),delete Wh.filesListObj[e],delete Wh.fakeObj[e],t.event("error","Load image failed")};"nativeimage"==t._type?(h=new Or.window.Image,h.crossOrigin="",h.onload=c,h.onerror=u,h.src=s,t.imgCache[e]=h):new xw.create(s,{onload:c,onerror:u,onCreate:function(i){h=i,t.imgCache[e]=i}})},e}(),Uh=function(){function t(){}return o(t,"laya.tt.mini.TTMiniAdapter"),t.getJson=function(e){return JSON.parse(e)},t.init=function(n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!t._inited&&(t._inited=!0,t.window=e,t.window.hasOwnProperty("tt")&&!(t.window.navigator.userAgent.indexOf("MiniGame")<0))){t.isZiYu=o,t.isPosMsgYu=n,t.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(s){}if(t.isZiYu||(Wh.setNativeFileDir("/layaairGame"),Wh.existDir(Wh.fileNativeDir,h.create(t,t.onMkdirCallBack))),t.systemInfo=t.window.tt.getSystemInfoSync(),"ios 10.1.1"===t.systemInfo.system.toLowerCase())try{laya.webgl.resource.WebGLCharImage.canUseCanvas=!1}catch(s){}t.window.focus=function(){},i._getUrlPath=function(){},i.getUrlPath=function(){},t.window.logtime=function(e){},t.window.alertTimeLog=function(e){},t.window.resetShareInfo=function(){},t.window.CanvasRenderingContext2D=function(){},t.window.CanvasRenderingContext2D.prototype=t.window.tt.createCanvas().getContext("2d").__proto__,t.window.document.body.appendChild=function(){},t.EnvConfig.pixelRatioInt=0,a.getPixelRatio=t.pixelRatio,t._preCreateElement=Or.createElement,Or.createElement=t.createElement,a.createShaderCondition=t.createShaderCondition,Dr.parseXMLFromString=t.parseXMLFromString,fw._createInputElement=zh._createInputElement,t.EnvConfig.load=Tu.prototype.load,Tu.prototype.load=$u.prototype.load,Tu.prototype._loadImage=Hh.prototype._loadImage,Ts._baseClass=Yh,Yh.__init__(),t.openCtx=t.window.tt.getOpenDataContext(),t.onReciveData(),nc.useRetinalCanvas=!0}},t.onReciveData=function(){laya.tt.mini.TTMiniAdapter.isZiYu&&t.window.tt.onMessage(function(e){"opendatacontext"==e.isLoad?e.url&&(Wh.ziyuFileData[e.url]=e.atlasdata,Wh.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl):"openJsondatacontext"==e.isLoad?e.url&&(Wh.ziyuFileData[e.url]=e.atlasdata):"openJsondatacontextPic"==e.isLoad&&(Wh.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl)})},t.measureText=function(e){var i=t._measureText(e);return i||(i={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),i},t.getUrlEncode=function(e,t){return"arraybuffer"==t?"":"utf8"},t.downLoadFile=function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n="utf8");var o=Wh.getFileInfo(e);o?null!=i&&i.runWith([0]):Wh.downLoadFile(e,t,i,n)},t.remove=function(e,t){Wh.deleteFile("",e,t,"",0)},t.removeAll=function(){Wh.deleteAll()},t.hasNativeFile=function(e){return Wh.isLocalNativeFile(e)},t.getFileInfo=function(e){return Wh.getFileInfo(e)},t.getFileList=function(){return Wh.filesListObj},t.exitMiniProgram=function(){t.window.tt.exitMiniProgram()},t.onMkdirCallBack=function(e,t){e||(Wh.filesListObj=JSON.parse(t.data),Wh.fakeObj=JSON.parse(t.data))},t.pixelRatio=function(){if(!t.EnvConfig.pixelRatioInt)try{return t.EnvConfig.pixelRatioInt=t.systemInfo.pixelRatio,t.systemInfo.pixelRatio}catch(e){}return t.EnvConfig.pixelRatioInt},t.createElement=function(e){if("canvas"==e){var i;return 1==t.idx?t.isZiYu?(i=t.window.sharedCanvas,i.style={}):i=t.window.canvas:i=t.window.tt.createCanvas(),t.idx++,i}if("textarea"==e||"input"==e)return t.onCreateInput(e);if("div"==e){var n=t._preCreateElement(e);return n.contains=function(e){return null},n.removeChild=function(e){},n}return t._preCreateElement(e)},t.onCreateInput=function(e){var i=t._preCreateElement(e);return i.focus=zh.inputFocus,i.blur=zh.inputblur,i.style={},i.value=0,i.parentElement={},i.placeholder={},i.type={},i.setColor=function(e){},i.setType=function(e){},i.setFontFace=function(e){},i.addEventListener=function(e){},i.contains=function(e){return null},i.removeChild=function(e){},i},t.createShaderCondition=function(e){var t=this,i=function(){return t[e.replace("this.","")]};return i},t.sendAtlasToOpenDataContext=function(e){if(!laya.tt.mini.TTMiniAdapter.isZiYu){var i=Tu.getRes(Cs.formatURL(e));if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";i.meta.image.split(",");if(i.meta&&i.meta.image)for(var n=i.meta.image.split(","),o=e.indexOf("/")>=0?"/":"\\",s=e.lastIndexOf(o),r=s>=0?e.substr(0,s+1):"",a=0,l=n.length;l>a;a++)n[a]=r+n[a];else n=[e.replace(".json",".png")];for(a=0;a<n.length;a++){var h=n[a];t.postInfoToContext(e,h,i)}}},t.postInfoToContext=function(e,i,n){var o={frames:n.frames,meta:n.meta},s=i,r=Wh.getFileInfo(Cs.formatURL(i));if(r)var a=r.md5,l=Wh.getFileNativePath(a);else l=s;if(!l)throw"获取图集的磁盘url路径不存在！";t.openCtx.postMessage({url:e,atlasdata:o,imgNativeUrl:l,imgReadyUrl:s,isLoad:"opendatacontext"})},t.sendSinglePicToOpenDataContext=function(e){var i=Cs.formatURL(e),n=Wh.getFileInfo(i);if(n){var o=n.md5,s=Wh.getFileNativePath(o);e=i}else s=e;if(!s)throw"获取图集的磁盘url路径不存在！";t.openCtx.postMessage({url:e,imgNativeUrl:s,imgReadyUrl:e,isLoad:"openJsondatacontextPic"})},t.sendJsonDataToDataContext=function(e){if(!laya.tt.mini.TTMiniAdapter.isZiYu){var i=Tu.getRes(e);if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";t.openCtx.postMessage({url:e,atlasdata:i,isLoad:"openJsondatacontext"})}},t.EnvConfig=null,t.window=null,t._preCreateElement=null,t._inited=!1,t.systemInfo=null,t.isZiYu=!1,t.isPosMsgYu=!1,t.autoCacheFile=!0,t.minClearSize=5242880,t.subNativeFiles=null,t.subNativeheads=[],t.subMaps=[],t.AutoCacheDownFile=!1,t.openCtx=null,t._measureText=null,t.parseXMLFromString=function(t){var i;t=t.replace(/>\s+</g,"><");try{i=(new e.Parser.DOMParser).parseFromString(t,"text/xml")}catch(n){throw"需要引入xml解析库文件"}return i},t.idx=1,n(t,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),t}(),zh=function(){function e(){}return o(e,"laya.tt.mini.MiniInput",null,"MiniInput$8"),e._createInputElement=function(){fw._initInput(fw.area=Or.createElement("textarea")),fw._initInput(fw.input=Or.createElement("input")),fw.inputContainer=Or.createElement("div"),fw.inputContainer.style.position="absolute",fw.inputContainer.style.zIndex=1e5,Or.container.appendChild(fw.inputContainer),fw.inputContainer.setPos=function(e,t){fw.inputContainer.style.left=e+"px",fw.inputContainer.style.top=t+"px"},i.stage.on("resize",null,e._onStageResize),Uh.window.tt.onWindowResize&&Uh.window.tt.onWindowResize(function(e){Uh.window.dispatchEvent&&Uh.window.dispatchEvent("resize")}),jh._soundClass=ed,jh._musicClass=ed;var t=Uh.systemInfo.model,n=Uh.systemInfo.system;-1!=t.indexOf("iPhone")&&(Or.onIPhone=!0,Or.onIOS=!0,Or.onIPad=!0,Or.onAndroid=!1),-1==n.indexOf("Android")&&-1==n.indexOf("Adr")||(Or.onAndroid=!0,Or.onIPhone=!1,Or.onIOS=!1,Or.onIPad=!1)},e._onStageResize=function(){var e=i.stage._canvasTransform.identity();e.scale(Or.width/Ns.canvas.width/a.getPixelRatio(),Or.height/Ns.canvas.height/a.getPixelRatio())},e.inputFocus=function(e){var t=fw.inputElement.target;t&&!t.editable||(Uh.window.tt.offKeyboardConfirm(),Uh.window.tt.offKeyboardInput(),Uh.window.tt.showKeyboard({defaultValue:t.text,maxLength:t.maxChars,multiple:t.multiline,confirmHold:!0,confirmType:"done",success:function(e){},fail:function(e){}}),Uh.window.tt.onKeyboardConfirm(function(e){var i=e?e.value:"";t.text=i,t.event("input"),laya.tt.mini.MiniInput.inputEnter()}),Uh.window.tt.onKeyboardInput(function(e){var i=e?e.value:"";return t.multiline||-1==i.indexOf("\n")?(t.text=i,void t.event("input")):void laya.tt.mini.MiniInput.inputEnter()}))},e.inputEnter=function(){fw.inputElement.target.focus=!1},e.inputblur=function(){e.hideKeyboard()},e.hideKeyboard=function(){Uh.window.tt.offKeyboardConfirm(),Uh.window.tt.offKeyboardInput(),Uh.window.tt.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})},e}(),Wh=function(){function e(){}return o(e,"laya.tt.mini.MiniFileMgr",null,"MiniFileMgr$8"),e.isLocalNativeFile=function(e){for(var t=0,i=Uh.nativefiles.length;i>t;t++)if(-1!=e.indexOf(Uh.nativefiles[t]))return!0;return!1},e.getFileInfo=function(t){var i=t,n=e.fakeObj[i];return null==n?null:n},e.read=function(t,i,n,o,s,r){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r="");var a;a=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:a,encoding:i,success:function(e){null!=n&&n.runWith([0,e])},fail:function(t){t&&""!=o?e.downFiles(encodeURI(o),i,n,o,s,r):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,s,r,a){void 0===i&&(i="ascii"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0);var l=e.wxdown({url:t,success:function(l){200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,s,r,a):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l])},fail:function(e){null!=n&&n.runWith([1,e])}});l.onProgressUpdate(function(e){null!=n&&n.runWith([2,e.progress])})},e.readFile=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0),e.fs.readFile({filePath:t,encoding:i,success:function(r){(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))&&(Uh.autoCacheFile||s)?(null!=n&&n.runWith([0,r]),e.copyFile(t,o,null,i,a)):null!=n&&n.runWith([0,r])},fail:function(t){t?null!=n&&n.runWith([1,t]):e.filesListObj[o]&&(e.filesListObj[o]==e.fakeObj[o]&&delete e.fakeObj[o],delete e.filesListObj[o])}})},e.downOtherFiles=function(t,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===s&&(s=!0),e.wxdown({url:t,success:function(t){200===t.statusCode?(Uh.autoCacheFile||o)&&-1==n.indexOf("wx.qlogo.cn")&&-1==n.indexOf(".php")?(null!=i&&i.runWith([0,t.tempFilePath]),e.copyFile(t.tempFilePath,n,null,"",s)):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(e){null!=i&&i.runWith([1,e])}})},e.downLoadFile=function(t,n,o,s){void 0===n&&(n=""),void 0===s&&(s="ascii"),Uh.window.navigator.userAgent.indexOf("MiniGame")<0?i.loader.load(t,o):"image"==n||"sound"==n?e.downOtherFiles(t,o,t,!0,!1):e.downFiles(t,s,o,t,!0,n,!1)},e.copyFile=function(t,i,n,o,s){void 0===o&&(o=""),void 0===s&&(s=!0);var r=t.split("/"),a=r[r.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(a);e.fakeObj[i]={md5:a,readyUrl:i,size:0,times:Or.now(),encoding:o};var c=52428800,u=4194304,d=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>Uh.minClearSize&&(Uh.minClearSize=r.size),e.onClearCacheRes()),e.deleteFile(t,i,n,o,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>Uh.minClearSize&&(Uh.minClearSize=r.size),e.onClearCacheRes()),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,a,!0,o,n,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}})},fail:function(e){null!=n&&n.runWith([1,e])}})},e.onClearCacheRes=function(){var t=Uh.minClearSize,i=[];for(var n in e.filesListObj)"fileUsedSize"!=n&&i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,s=1,r=i.length;r>s;s++){var a=i[s];if(o>=t)break;o+=a.size,e.deleteFile("",a.readyUrl)}},e.sortOn=function(e,t,i){return void 0===i&&(i=0),16==i?e.sort(function(e,i){return e[t]-i[t]}):18==i?e.sort(function(e,i){return i[t]-e[t]}):e.sort(function(e,i){return e[t]-i[t]})},e.getFileNativePath=function(e){return laya.tt.mini.MiniFileMgr.fileNativeDir+"/"+e},e.deleteFile=function(t,i,n,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=0);var r=e.getFileInfo(i),a=e.getFileNativePath(r.md5);e.fs.unlink({filePath:a,success:function(r){var a=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(s){e.onSaveFile(i,t,a,o,n,s.size)},fail:function(e){null!=n&&n.runWith([1,e])}})}else e.onSaveFile(i,t,a,o,n,s)},fail:function(e){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)t.push(e.filesListObj[i]);for(var n=1,o=t.length;o>n;n++){var s=t[n];e.deleteFile("",s.readyUrl)}laya.tt.mini.MiniFileMgr.filesListObj&&laya.tt.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.tt.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.tt.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,s,r){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===r&&(r=0);var a=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[a]={md5:i,readyUrl:t,size:r,times:Or.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+r,e.writeFilesList(a,JSON.stringify(e.filesListObj),!0),null!=s&&s.runWith([0])}else if(e.filesListObj[a]){var l=parseInt(e.filesListObj[a].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-l,e.fakeObj[a].md5==e.filesListObj[a].md5&&delete e.fakeObj[a],delete e.filesListObj[a],e.writeFilesList(a,JSON.stringify(e.filesListObj),!1),null!=s&&s.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(e){},fail:function(e){}}),!Uh.isZiYu&&Uh.isPosMsgYu&&Uh.window.tt.postMessage&&Uh.window.tt.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(e){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,t])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="utf8"),void 0===o&&(o="");var s,r=e.getFileNativePath(t);try{s=e.fs.readFileSync(r,i),null!=n&&n.runWith([0,{data:s}])}catch(a){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=Uh.window.tt.env.USER_DATA_PATH+t},e.filesListObj={},e.fakeObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=Uh.window.tt.getFileSystemManager()},"wxdown",function(){return this.wxdown=Uh.window.tt.downloadFile}]),e}(),Yh=function(){function e(){}return o(e,"laya.tt.mini.MiniLocalStorage",null,"MiniLocalStorage$7"),e.__init__=function(){e.items=e},e.setItem=function(e,t){try{Uh.window.tt.setStorageSync(e,t)}catch(i){Uh.window.tt.setStorage({key:e,data:t})}},e.getItem=function(e){return Uh.window.tt.getStorageSync(e)},e.setJSON=function(t,i){e.setItem(t,i)},e.getJSON=function(t){return e.getItem(t)},e.removeItem=function(e){Uh.window.tt.removeStorageSync(e)},e.clear=function(){Uh.window.tt.clearStorageSync()},e.getStorageInfoSync=function(){try{var e=Uh.window.tt.getStorageInfoSync();return console.log(e.keys),console.log(e.currentSize),console.log(e.limitSize),e}catch(t){}return null},e.support=!0,e.items=null,e}(),qh=function(){function e(){}return o(e,"laya.debug.tools.StringTool"),e.toUpCase=function(e){return e.toUpperCase()},e.toLowCase=function(e){return e.toLowerCase()},e.toUpHead=function(e){var t;return e.length<=1?e.toUpperCase():t=e.charAt(0).toUpperCase()+e.substr(1)},e.toLowHead=function(e){var t;return e.length<=1?e.toLowerCase():t=e.charAt(0).toLowerCase()+e.substr(1)},e.packageToFolderPath=function(e){var t;return t=e.replace(".","/")},e.insert=function(e,t,i){return e.substring(0,i)+t+e.substr(i)},e.insertAfter=function(t,i,n,o){void 0===o&&(o=!1);var s=0;return s=o?t.lastIndexOf(n):t.indexOf(n),s>=0?e.insert(t,i,s+n.length):t},e.insertBefore=function(t,i,n,o){void 0===o&&(o=!1);var s=0;return s=o?t.lastIndexOf(n):t.indexOf(n),s>=0?e.insert(t,i,s):t},e.insertParamToFun=function(t,i){var n;n=e.getParamArr(t);var o;return o=i.join(","),n.length>0&&(o=","+o),e.insertBefore(t,o,")",!0)},e.trim=function(t,i){i||(i=[" ","\r","\n","	",String.fromCharCode(65279)]);var n,o=0,s=0;for(n=t,s=i.length,o=0;s>o;o++)n=e.getReplace(n,i[o],"");return n},e.isEmpty=function(t){return t.length<1?!0:e.emptyStrDic.hasOwnProperty(t)},e.trimLeft=function(t){var i=0;i=0;var n=0;for(n=t.length;e.isEmpty(t.charAt(i))&&n>i;)i++;return n>i?t.substr(i):""},e.trimRight=function(t){var i=0;for(i=t.length-1;e.isEmpty(t.charAt(i))&&i>=0;)i--;var n;return n=t.substring(0,i),i>=0?t.substring(0,i+1):""},e.trimSide=function(t){var i;return i=e.trimLeft(t),i=e.trimRight(i)},e.isOkFileName=function(t){if(""==laya.debug.tools.StringTool.trimSide(t))return!1;var i=0,n=0;for(n=t.length,i=0;n>i;i++)if(e.specialChars[t.charAt(i)])return!1;return!0},e.trimButEmpty=function(t){return e.trim(t,["\r","\n","	"])},e.removeEmptyStr=function(t){var i=0;i=t.length-1;var n;for(i=i;i>=0;i--)n=t[i],n=laya.debug.tools.StringTool.trimSide(n),e.isEmpty(n)?t.splice(i,1):t[i]=n;return t},e.ifNoAddToTail=function(e,t){return e.indexOf(t)>=0?e:e+t},e.trimEmptyLine=function(t){var i,n,o=0;for(i=t.split("\n"),o=i.length-1;o>=0;o--)n=i[o],e.isEmptyLine(n)&&i.splice(o,1);return i.join("\n")},e.isEmptyLine=function(e){return e=laya.debug.tools.StringTool.trim(e),""==e},e.removeCommentLine=function(t){var i;i=[];var n,o,s=0;s=0;var r=0,a=0;for(r=t.length;r>s;){if(o=n=t[s],a=n.indexOf("/**"),a>=0)for(o=n.substring(0,a-1),e.addIfNotEmpty(i,o);r>s;){if(n=t[s],a=n.indexOf("*/"),a>=0){o=n.substring(a+2),e.addIfNotEmpty(i,o);break}s++}else n.indexOf("//")>=0?0==laya.debug.tools.StringTool.trim(n).indexOf("//")||e.addIfNotEmpty(i,o):e.addIfNotEmpty(i,o);s++}return i},e.addIfNotEmpty=function(t,i){if(i){var n;n=e.trim(i),""!=n&&t.push(i)}},e.trimExt=function(t,i){var n;n=e.trim(t);var o=0,s=0;for(s=i.length,o=0;s>o;o++)n=e.getReplace(n,i[o],"");return n},e.getBetween=function(e,t,i,n){if(void 0===n&&(n=!1),!e)return"";if(!t)return"";if(!i)return"";var o=0,s=0;if(o=e.indexOf(t),0>o)return"";if(n){if(s=e.lastIndexOf(i),o>s)return""}else s=e.indexOf(i,o+1);return 0>s?"":e.substring(o+t.length,s)},e.getSplitLine=function(e,t){return void 0===t&&(t=" "),e.split(t)},e.getLeft=function(e,t){var i=0;return i=e.indexOf(t),e.substr(0,i)},e.getRight=function(e,t){var i=0;return i=e.indexOf(t),e.substr(i+1)},e.delelteItem=function(e){for(;e.length>0&&""==e[0];)e.shift()},e.getWords=function(t){var i=e.getSplitLine(t);return e.delelteItem(i),i},e.getLinesI=function(e,t,i){var n=0,o=[];for(n=e;t>=n;n++)o.push(i[n]);return o},e.structfy=function(t,i,n){void 0===i&&(i=4),void 0===n&&(n=!0),n&&(t=laya.debug.tools.StringTool.trimEmptyLine(t));var o,s=0;s=0;var r;r=e.getEmptyStr(0),o=t.split("\n");var a,l=0,h=0;for(h=o.length,l=0;h>l;l++)a=o[l],a=laya.debug.tools.StringTool.trimLeft(a),a=laya.debug.tools.StringTool.trimRight(a),s+=e.getPariCount(a),a.indexOf("}")>=0&&(r=e.getEmptyStr(s*i)),a=r+a,o[l]=a,r=e.getEmptyStr(s*i);return o.join("\n")},e.getEmptyStr=function(t){if(!e.emptyDic.hasOwnProperty(t)){var i=0,n=0;n=t;var o;for(o="",i=0;n>i;i++)o+=" ";e.emptyDic[t]=o}return e.emptyDic[t]},e.getPariCount=function(e,t,i){void 0===t&&(t="{"),void 0===i&&(i="}");var n;n={},n[t]=1,n[i]=-1;var o,s=0,r=0;r=e.length;var a=0;for(a=0,s=0;r>s;s++)o=e.charAt(s),n.hasOwnProperty(o)&&(a+=n[o]);return a},e.readInt=function(e,t){void 0===t&&(t=0);var i=NaN;i=0;var n,o=0,s=!1;s=!1;var r=0;for(r=e.length,o=t;r>o;o++)if(n=e.charAt(o),Number(n)>0||"0"==n)i=10*i+Number(n),i>0&&(s=!0);else if(s)return i;return i},e.getReplace=function(e,t,i){if(!e)return"";var n;return n=e.replace(new RegExp(t,"g"),i)},e.getWordCount=function(e,t){var i=new RegExp(t,"g");return e.match(i).length},e.getResolvePath=function(t,i){if(e.isAbsPath(t))return t;var n;n="\\",i.indexOf("/")>=0&&(n="/"),i.charAt(i.length-1)==n&&(i=i.substr(0,i.length-1));var o;o=".."+n;var s;s="."+n;var r=0;r=e.getWordCount(t,o),
t=laya.debug.tools.StringTool.getReplace(t,o,""),t=laya.debug.tools.StringTool.getReplace(t,s,"");var a=0,l=0;l=r;for(a=0;l>a;a++)i=e.removeLastSign(t,n);return i+n+t},e.isAbsPath=function(e){return e.indexOf(":")>=0},e.removeLastSign=function(e,t){var i=0;return i=e.lastIndexOf(t),e=e.substring(0,i)},e.getParamArr=function(t){var i;return i=laya.debug.tools.StringTool.getBetween(t,"(",")",!0),e.trim(i).length<1?[]:i.split(",")},e.copyStr=function(e){return e.substring()},e.ArrayToString=function(t){var i;return i="[{items}]".replace(new RegExp("\\{items\\}","g"),e.getArrayItems(t))},e.getArrayItems=function(t){var i;if(t.length<1)return"";i=e.parseItem(t[0]);var n=0,o=0;for(o=t.length,n=1;o>n;n++)i+=","+e.parseItem(t[n]);return i},e.parseItem=function(e){var t;return t='"'+e+'"',""},e.initAlphaSign=function(){e.alphaSigns||(e.alphaSigns={},e.addSign("a","z",e.alphaSigns),e.addSign("A","Z",e.alphaSigns),e.addSign("0","9",e.alphaSigns))},e.addSign=function(e,t,i){var n=0,o=0,s=0;for(s=e.charCodeAt(0),o=t.charCodeAt(0),n=s;o>=n;n++)i[String.fromCharCode(n)]=!0,console.log("add :"+String.fromCharCode(n))},e.isPureAlphaNum=function(t){if(e.initAlphaSign(),!t)return!0;var i=0,n=0;for(n=t.length,i=0;n>i;i++)if(!e.alphaSigns[t.charAt(i)])return!1;return!0},e.emptyDic={},e.alphaSigns=null,n(e,["emptyStrDic",function(){return this.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0}},"specialChars",function(){return this.specialChars={"*":!0,"&":!0,"%":!0,"#":!0,"?":!0}}]),e}(),Kh=function(){function e(e,t){this.autoTrace=!0,this.sign="",this.obj=null,void 0===e&&(e=""),void 0===t&&(t=!0),this.sign=e,this.autoTrace=t}o(e,"laya.debug.tools.DifferTool");var t=e.prototype;return t.update=function(e,t){t&&console.log(t);var i=Qh.copyObj(e);this.obj||(this.obj={});var n;return n=Qh.differ(this.obj,i),this.obj=i,this.autoTrace&&(console.log(this.sign+" differ:"),Qh.traceDifferObj(n)),n},e.differ=function(t,i,n){e._differO[t]||(e._differO[t]=new e(t,!0));var o;return o=e._differO[t],o.update(i,n)},e._differO={},e}(),Xh=function(){function e(){}return o(e,"laya.debug.tools.MathTools"),e.sortBigFirst=function(e,t){return e==t?0:t>e?1:-1},e.sortSmallFirst=function(e,t){return e==t?0:t>e?-1:1},e.sortNumBigFirst=function(e,t){return parseFloat(t)-parseFloat(e)},e.sortNumSmallFirst=function(e,t){return parseFloat(e)-parseFloat(t)},e.sortByKey=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var o;return o=i?n?e.sortNumBigFirst:e.sortBigFirst:n?e.sortNumSmallFirst:e.sortSmallFirst,function(e,i){return o(e[t],i[t])}},e}(),Qh=function(){function e(){}return o(e,"laya.debug.tools.ObjectTools"),e.getFlatKey=function(t,i){return""==t?i:t+e.sign+i},e.flatObj=function(t,i,n){void 0===n&&(n=""),i=i?i:{};var o,s;for(o in t)"object"==typeof t[o]?e.flatObj(t[o],i,e.getFlatKey(n,o)):(s=t[o],i[e.getFlatKey(n,o)]=t[o]);return i},e.recoverObj=function(t){var i,n={};for(i in t)e.setKeyValue(n,i,t[i]);return n},e.differ=function(t,i){var n;t=e.flatObj(t),i=e.flatObj(i);var o={};for(n in t)i.hasOwnProperty(n)||(o[n]="被删除");for(n in i)i[n]!=t[n]&&(o[n]={pre:t[n],now:i[n]});return o},e.traceDifferObj=function(e){var t,i;for(t in e)"string"==typeof e[t]?console.log(t+":",e[t]):(i=e[t],console.log(t+":","now:",i.now,"pre:",i.pre))},e.setKeyValue=function(t,i,n){if(i.indexOf(e.sign)>=0){for(var o,s=i.split(e.sign);s.length>1;)if(o=s.shift(),t[o]||(t[o]={},console.log("addKeyObj:",o)),t=t[o],!t)return void console.log("wrong flatKey:",i);t[s.shift()]=n}else t[i]=n},e.clearObj=function(e){var t;for(t in e)delete e[t]},e.copyObjFast=function(e){var t;return t=laya.debug.tools.ObjectTools.getJsonString(e),laya.debug.tools.ObjectTools.getObj(t)},e.copyObj=function(t){if(t instanceof Array)return e.copyArr(t);var i,n={};for(i in t)null===t[i]||void 0===t[i]?n[i]=t[i]:t[i]instanceof Array?n[i]=e.copyArr(t[i]):"object"==typeof t[i]?n[i]=e.copyObj(t[i]):n[i]=t[i];return n},e.copyArr=function(t){var i;i=[];var n=0,o=0;for(o=t.length,n=0;o>n;n++)i.push(e.copyObj(t[n]));return i},e.concatArr=function(e,t){if(!t)return e;if(!e)return t;var i=0,n=t.length;for(i=0;n>i;i++)e.push(t[i]);return e},e.insertArrToArr=function(e,t,i){void 0===i&&(i=0),0>i&&(i=0),i>e.length&&(i=e.length);var n=(e.length,0),o=0;e.length+=t.length;var s=0;for(s=t.length,n=e.length-1;n>=i;n--)e[n]=e[n-s];for(o=t.length,n=0;o>n;n++)e[i+n]=t[n];return e},e.clearArr=function(e){return e?(e.length=0,e):e},e.removeFromArr=function(e,t){var i=0,n=0;for(n=e.length,i=0;n>i;i++)if(e[i]==t)return void e[i].splice(i,1)},e.setValueArr=function(t,i){return t||(t=[]),t.length=0,e.concatArr(t,i)},e.getFrom=function(e,t,i){var n=0;for(n=0;i>n;n++)e.push(t[n]);return e},e.getFromR=function(e,t,i){var n=0;for(n=0;i>n;n++)e.push(t.pop());return e},e.enableDisplayTree=function(e){for(;e;)e.mouseEnabled=!0,e=e.parent},e.getJsonString=function(e){var t;return t=JSON.stringify(e)},e.getObj=function(e){var t;return t=JSON.parse(e)},e.getKeyArr=function(e){var t,i;t=[];for(i in e)t.push(i);return t},e.getObjValues=function(e,t){var i,n=0,o=0;for(o=e.length,i=[],n=0;o>n;n++)i.push(e[n][t]);return i},e.hasKeys=function(e,t){var i=0,n=0;for(n=t.length,i=0;n>i;i++)if(!e.hasOwnProperty(t[i]))return!1;return!0},e.copyValueByArr=function(e,t,i){var n=0,o=i.length;for(n=0;o>n;n++)null!==t[i[n]]&&(e[i[n]]=t[i[n]])},e.getNoSameArr=function(e){var t,i=0,n=0;t=[];var o;for(n=e.length,i=0;n>i;i++)o=e[i],t.indexOf(o)<0&&t.push(o);return t},e.insertValue=function(e,t){var i;for(i in t)e[i]=t[i]},e.replaceValue=function(t,i){var n;for(n in t)i.hasOwnProperty(t[n])&&(t[n]=i[t[n]]),"object"==typeof t[n]&&e.replaceValue(t[n],i)},e.setKeyValues=function(e,t,i){var n=0,o=0;for(o=e.length,n=0;o>n;n++)e[n][t]=i},e.findItemPos=function(e,t,i){var n=0,o=0;for(o=e.length,n=0;o>n;n++)if(e[n][t]==i)return n;return-1},e.setObjValue=function(e,t,i){return e[t]=i,e},e.setAutoTypeValue=function(t,i,n){return t.hasOwnProperty(i)&&e.isNumber(t[i])?t[i]=parseFloat(n):t[i]=n,t},e.getAutoValue=function(e){var t=parseFloat(e);return"string"==typeof e&&t+""===qh.trimSide(e)?t:e},e.isNumber=function(e){return parseFloat(e)==e},e.isNaNS=function(e){return"NaN"==e.toString()},e.isNaN=function(e){return"number"==typeof e?!1:"string"!=typeof e||"NaN"==parseFloat(e).toString()||parseFloat(e)!=e},e.getStrTypedValue=function(t){return"false"==t?!1:"true"==t?!0:"null"==t?null:"undefined"==t?null:e.getAutoValue(t)},e.createKeyValueDic=function(e,t){var i;i={};var n=0,o=0;o=e.length;var s,r;for(n=0;o>n;n++)s=e[n],r=s[t],i[r]=s;return i},e.sign="_",e}(),jh=(function(){function e(){this.red=NaN,this.green=NaN,this.blue=NaN}return o(e,"laya.debug.tools.ColorTool"),e.toHexColor=function(e){return Dr.toHexColor(e)},e.getRGBByRGBStr=function(e){"#"==e.charAt(0)&&(e=e.substr(1));var t,i=parseInt(e,16);8==e.length;return t=[(16711680&i)>>16,(65280&i)>>8,255&i]},e.getColorBit=function(e){var t;return t=Math.floor(e).toString(16),t=t.length>1?t:"0"+t},e.getRGBStr=function(t){return"#"+e.getColorBit(t[0])+e.getColorBit(t[1])+e.getColorBit(t[2])},e.traseHSB=function(e){console.log("hsb:",e[0],e[1],e[2])},e.rgb2hsb=function(e,t,i){var n=[e,t,i];n.sort(Xh.sortNumSmallFirst);var o=n[2],s=n[0],r=o/255,a=0==o?0:(o-s)/o,l=0;return o==s?l=1:0==e&&0==t&&0==i||(o==e&&t>=i?l=60*(t-i)/(o-s)+0:o==e&&i>t?l=60*(t-i)/(o-s)+360:o==t?l=60*(i-e)/(o-s)+120:o==i&&(l=60*(e-t)/(o-s)+240)),[l,a,r]},e.hsb2rgb=function(e,t,i){var n=0,o=0,s=0,r=Math.floor(e/60%6),a=e/60-r,l=i*(1-t),h=i*(1-a*t),c=i*(1-(1-a)*t);switch(r){case 0:n=i,o=c,s=l;break;case 1:n=h,o=i,s=l;break;case 2:n=l,o=i,s=c;break;case 3:n=l,o=h,s=i;break;case 4:n=c,o=l,s=i;break;case 5:n=i,o=l,s=h}return[Math.floor(255*n),Math.floor(255*o),Math.floor(255*s)]},e}(),function(){function e(){}return o(e,"laya.debug.tools.exp.Observer",null,"Observer$1"),e.observe=function(e,t){Object.observe(e,t)},e.unobserve=function(e,t){Object.unobserve(e,t)},e.observeDiffer=function(t,i,n){void 0===n&&(n="obDiffer");var o=function(){Kh.differ(i,t,n)};e.observe(t,o)},e}(),function(){function e(){}return o(e,"laya.media.SoundManager"),s(1,e,"musicMuted",function(){return e._musicMuted},function(t){t!=e._musicMuted&&(t?(e._tMusic&&e._musicChannel&&!e._musicChannel.isStopped?Ns.isConchApp?e._musicChannel._audio&&(e._musicChannel._audio.muted=!0):e._musicChannel.pause():e._musicChannel=null,e._musicMuted=t):(e._musicMuted=t,e._tMusic&&e._musicChannel&&(Ns.isConchApp?e._musicChannel._audio&&(e._musicChannel._audio.muted=!1):e._musicChannel.resume())))}),s(1,e,"useAudioMusic",function(){return e._useAudioMusic},function(t){e._useAudioMusic=t,t?e._musicClass=td:e._musicClass=null}),s(1,e,"soundMuted",function(){return e._soundMuted},function(t){e._soundMuted=t}),s(1,e,"muted",function(){return e._muted},function(t){t!=e._muted&&(t&&e.stopAllSound(),e.musicMuted=t,e._muted=t)}),s(1,e,"autoStopMusic",function(){return e._autoStopMusic},function(t){i.stage.off("blur",null,e._stageOnBlur),i.stage.off("focus",null,e._stageOnFocus),i.stage.off("visibilitychange",null,e._visibilityChange),e._autoStopMusic=t,t&&(i.stage.on("blur",null,e._stageOnBlur),i.stage.on("focus",null,e._stageOnFocus),i.stage.on("visibilitychange",null,e._visibilityChange))}),e.addChannel=function(t){e._channels.indexOf(t)>=0||e._channels.push(t)},e.removeChannel=function(t){var i=0;for(i=e._channels.length-1;i>=0;i--)e._channels[i]==t&&e._channels.splice(i,1)},e.disposeSoundIfNotUsed=function(t){var i=0;for(i=e._channels.length-1;i>=0;i--)if(e._channels[i].url==t)return;e.destroySound(t)},e._visibilityChange=function(){i.stage.isVisibility?e._stageOnFocus():e._stageOnBlur()},e._stageOnBlur=function(){e._isActive=!1,e._musicChannel&&(e._musicChannel.isStopped||(e._blurPaused=!0,e._musicChannel.pause())),e.stopAllSound(),i.stage.once("mousedown",null,e._stageOnFocus)},e._recoverWebAudio=function(){nd.ctx&&"running"!=nd.ctx.state&&nd.ctx.resume&&nd.ctx.resume()},e._stageOnFocus=function(){e._isActive=!0,e._recoverWebAudio(),i.stage.off("mousedown",null,e._stageOnFocus),e._blurPaused&&e._musicChannel&&e._musicChannel.isStopped&&(e._blurPaused=!1,e._musicChannel.resume())},e.playSound=function(t,n,o,s,r){if(void 0===n&&(n=1),void 0===r&&(r=0),!e._isActive||!t)return null;if(e._muted)return null;if(e._recoverWebAudio(),t=Cs.formatURL(t),t==e._tMusic){if(e._musicMuted)return null}else{if(Ns.isConchApp){var a=Dr.getFileExtension(t);if("wav"!=a&&"ogg"!=a)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(e._soundMuted)return null}var l;Or.onMiniGame||Or.onAlipayMiniGame||Or.onBDMiniGame||Or.onVVMiniGame||Or.onKGMiniGame||Or.onQGMiniGame||Or.onTTMiniGame||Or.onHWMiniGame||Or.onTBMiniGame||(l=i.loader.getRes(t)),s||(s=e._soundClass),l||(l=new s,l.load(t),Or.onMiniGame||Or.onAlipayMiniGame||Or.onBDMiniGame||Or.onVVMiniGame||Or.onKGMiniGame||Or.onQGMiniGame||Or.onTTMiniGame||Or.onHWMiniGame||Or.onTBMiniGame||Tu.cacheRes(t,l));var h;return(h=l.play(r,n))?(h.url=t,h.volume=t==e._tMusic?e.musicVolume:e.soundVolume,h.completeHandler=o,h):null},e.destroySound=function(e){var t=i.loader.getRes(e);t&&(Tu.clearRes(e),t.dispose())},e.playMusic=function(t,i,n,o){return void 0===i&&(i=0),void 0===o&&(o=0),t=Cs.formatURL(t),e._tMusic=t,e._musicChannel&&e._musicChannel.stop(),e._musicChannel=e.playSound(t,i,n,e._musicClass,o)},e.stopSound=function(t){t=Cs.formatURL(t);var i,n=0;for(n=e._channels.length-1;n>=0;n--)i=e._channels[n],i.url==t&&i.stop()},e.stopAll=function(){e._tMusic=null;var t,i=0;for(i=e._channels.length-1;i>=0;i--)t=e._channels[i],t.stop()},e.stopAllSound=function(){var t,i=0;for(i=e._channels.length-1;i>=0;i--)t=e._channels[i],t.url!=e._tMusic&&t.stop()},e.stopMusic=function(){e._musicChannel&&e._musicChannel.stop(),e._tMusic=null},e.setSoundVolume=function(t,i){if(i)i=Cs.formatURL(i),e._setVolume(i,t);else{e.soundVolume=t;var n,o=0;for(o=e._channels.length-1;o>=0;o--)n=e._channels[o],n.url!=e._tMusic&&(n.volume=t)}},e.setMusicVolume=function(t){e.musicVolume=t,e._setVolume(e._tMusic,t)},e._setVolume=function(t,i){t=Cs.formatURL(t);var n,o=0;for(o=e._channels.length-1;o>=0;o--)n=e._channels[o],n.url==t&&(n.volume=i)},e.musicVolume=1,e.soundVolume=1,e.playbackRate=1,e._useAudioMusic=!0,e._muted=!1,e._soundMuted=!1,e._musicMuted=!1,e._tMusic=null,e._musicChannel=null,e._channels=[],e._autoStopMusic=!1,e._blurPaused=!1,e._isActive=!0,e._soundClass=null,e._musicClass=null,e.autoReleaseSound=!0,e}()),Zh=function(){function e(){}o(e,"laya.qq.mini.MiniImage",null,"MiniImage$11");var t=e.prototype;return t._loadImage=function(t){var i=this;if(tc.isZiYu)return void e.onCreateImage(t,i,!0);var n=!1;if($h.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=$h.loadPath)t=t.split($h.loadPath)[1];else{var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=t;""!=o&&(t=t.split(o)[1]),t||(t=s)}if(tc.subNativeFiles&&0==tc.subNativeheads.length)for(var r in tc.subNativeFiles){var a=tc.subNativeFiles[r];tc.subNativeheads=tc.subNativeheads.concat(a);for(var l=0;l<a.length;l++)tc.subMaps[a[l]]=r+"/"+a[l]}if(tc.subNativeFiles&&-1!=t.indexOf("/")){var c=t.split("/")[0]+"/";if(c&&-1!=tc.subNativeheads.indexOf(c)){var u=tc.subMaps[c];t=t.replace(c,u)}}}else n=!0,t=Cs.formatURL(t);$h.getFileInfo(t)?e.onCreateImage(t,i,!n):-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?tc.isZiYu?e.onCreateImage(t,i,!0):$h.downOtherFiles(encodeURI(t),new h(e,e.onDownImgCallBack,[t,i]),t):e.onCreateImage(t,i,!0)},e.onDownImgCallBack=function(t,i,n,o){void 0===o&&(o=""),n?i.onError(null):e.onCreateImage(t,i,!1,o)},e.onCreateImage=function(e,t,i,n){function o(){h.onload=null,h.onerror=null,delete t.imgCache[e]}void 0===i&&(i=!1),void 0===n&&(n="");var s;if(tc.autoCacheFile)if(i)if(tc.isZiYu){var r=Cs.formatURL(e);s=$h.ziyuFileTextureData[r]?$h.ziyuFileTextureData[r]:e}else s=e;else if(""!=n)s=n;else{var a=$h.getFileInfo(e),l=a.md5;s=$h.getFileNativePath(l)}else s=i?e:n;null==t.imgCache&&(t.imgCache={});var h,c=function(){o(),delete $h.fakeObj[e],delete $h.filesListObj[e],t.onLoaded(h)},u=function(){o(),t.event("error","Load image failed")};"nativeimage"==t._type?(h=new Or.window.Image,h.crossOrigin="",h.onload=c,h.onerror=u,h.src=s,t.imgCache[e]=h):new xw.create(s,{onload:c,onerror:u,onCreate:function(i){h=i,t.imgCache[e]=i}})},e}(),Jh=function(){function t(){}return o(t,"laya.qq.mini.MiniInput",null,"MiniInput$11"),t._createInputElement=function(){fw._initInput(fw.area=Or.createElement("textarea")),fw._initInput(fw.input=Or.createElement("input")),fw.inputContainer=Or.createElement("div"),fw.inputContainer.style.position="absolute",fw.inputContainer.style.zIndex=1e5,Or.container.appendChild(fw.inputContainer),fw.inputContainer.setPos=function(e,t){fw.inputContainer.style.left=e+"px",fw.inputContainer.style.top=t+"px"},i.stage.on("resize",null,t._onStageResize),qq.onWindowResize&&qq.onWindowResize(function(t){e.dispatchEvent&&e.dispatchEvent("resize")}),jh._soundClass=sd,jh._musicClass=sd;var n=tc.systemInfo.model,o=tc.systemInfo.system;-1!=n.indexOf("iPhone")&&(Or.onIPhone=!0,Or.onIOS=!0,Or.onIPad=!0,Or.onAndroid=!1),-1==o.indexOf("Android")&&-1==o.indexOf("Adr")||(Or.onAndroid=!0,Or.onIPhone=!1,Or.onIOS=!1,Or.onIPad=!1)},t._onStageResize=function(){var e=i.stage._canvasTransform.identity();e.scale(Or.width/Ns.canvas.width/a.getPixelRatio(),Or.height/Ns.canvas.height/a.getPixelRatio())},t.wxinputFocus=function(e){var t=fw.inputElement.target;t&&!t.editable||(tc.window.qq.offKeyboardConfirm(),tc.window.qq.offKeyboardInput(),tc.window.qq.showKeyboard({defaultValue:t.text,maxLength:t.maxChars,multiple:t.multiline,confirmHold:!0,confirmType:"done",success:function(e){},fail:function(e){}}),tc.window.qq.onKeyboardConfirm(function(e){var i=e?e.value:"";t.text=i,t.event("input"),laya.qq.mini.MiniInput.inputEnter()}),tc.window.qq.onKeyboardInput(function(e){var i=e?e.value:"";return t.multiline||-1==i.indexOf("\n")?(t.text=i,void t.event("input")):void laya.qq.mini.MiniInput.inputEnter()}))},t.inputEnter=function(){fw.inputElement.target.focus=!1},t.wxinputblur=function(){t.hideKeyboard()},t.hideKeyboard=function(){tc.window.qq.offKeyboardConfirm(),tc.window.qq.offKeyboardInput(),tc.window.qq.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})},t}(),$h=function(){function e(){}return o(e,"laya.qq.mini.MiniFileMgr",null,"MiniFileMgr$11"),e.isLocalNativeFile=function(e){for(var t=0,i=tc.nativefiles.length;i>t;t++)if(-1!=e.indexOf(tc.nativefiles[t]))return!0;return!1},e.getFileInfo=function(t){var i=t,n=e.fakeObj[i];return null==n?null:n},e.read=function(t,i,n,o,s,r){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r="");var a;a=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:a,encoding:i,success:function(e){null!=n&&n.runWith([0,e])},fail:function(t){t&&""!=o?e.downFiles(o,i,n,o,s,r):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,s,r,a){void 0===i&&(i="ascii"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0);var l=e.wxdown({url:t,success:function(l){200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,s,r,a):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l])},fail:function(e){null!=n&&n.runWith([1,e])}});l.onProgressUpdate(function(e){null!=n&&n.runWith([2,e.progress])})},e.readFile=function(t,i,n,o,s,r,a){void 0===i&&(i="utf8"),void 0===o&&(o=""),void 0===s&&(s=!1),void 0===r&&(r=""),void 0===a&&(a=!0),e.fs.readFile({filePath:t,encoding:i,success:function(r){(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))&&(tc.autoCacheFile||s)?(null!=n&&n.runWith([0,r]),e.copyFile(t,o,null,i,a)):null!=n&&n.runWith([0,r])},fail:function(e){e&&null!=n&&n.runWith([1,e])}})},e.downOtherFiles=function(t,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===s&&(s=!0),e.wxdown({url:t,success:function(t){200===t.statusCode?(tc.autoCacheFile||o)&&-1==n.indexOf("wx.qlogo.cn")&&-1==n.indexOf(".php")?(null!=i&&i.runWith([0,t.tempFilePath]),e.copyFile(t.tempFilePath,n,null,"",s)):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(e){null!=i&&i.runWith([1,e])}})},e.downLoadFile=function(t,n,o,s){void 0===n&&(n=""),void 0===s&&(s="ascii"),tc.window.navigator.userAgent.indexOf("MiniGame")<0?i.loader.load(t,o):"image"==n||"sound"==n?e.downOtherFiles(t,o,t,!0,!1):e.downFiles(t,s,o,t,!0,n,!1)},e.copyFile=function(t,i,n,o,s){void 0===o&&(o=""),void 0===s&&(s=!0);var r=t.split("/"),a=r[r.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(a);e.fakeObj[i]={md5:a,readyUrl:i,size:0,times:Or.now(),encoding:o};var c=52428800,u=4194304,d=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>tc.minClearSize&&(tc.minClearSize=r.size),e.onClearCacheRes()),e.deleteFile(t,i,n,o,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(r){s&&d+u+r.size>=c&&(r.size>tc.minClearSize&&(tc.minClearSize=r.size),e.onClearCacheRes()),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,a,!0,o,n,r.size)},fail:function(e){null!=n&&n.runWith([1,e])}})},fail:function(e){null!=n&&n.runWith([1,e])}})},e.onClearCacheRes=function(){var t=tc.minClearSize,i=[];for(var n in e.filesListObj)"fileUsedSize"!=n&&i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,s=1,r=i.length;r>s;s++){var a=i[s];if(o>=t)break;o+=a.size,e.deleteFile("",a.readyUrl)}},e.sortOn=function(e,t,i){return void 0===i&&(i=0),16==i?e.sort(function(e,i){return e[t]-i[t]}):18==i?e.sort(function(e,i){return i[t]-e[t]}):e.sort(function(e,i){return e[t]-i[t]})},e.getFileNativePath=function(e){return laya.qq.mini.MiniFileMgr.fileNativeDir+"/"+e},e.deleteFile=function(t,i,n,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=0);var r=e.getFileInfo(i);if(!r)return void e.onSaveFile(i,"",!1,o,n);var a=e.getFileNativePath(r.md5);e.fs.unlink({filePath:a,success:function(r){var a=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(s){e.onSaveFile(i,t,a,o,n,s.size)},fail:function(e){null!=n&&n.runWith([1,e])}})}else e.onSaveFile(i,t,a,o,n,s)},fail:function(e){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)"fileUsedSize"!=i&&t.push(e.filesListObj[i]);for(var n=1,o=t.length;o>n;n++){var s=t[n];e.deleteFile("",s.readyUrl)}laya.qq.mini.MiniFileMgr.filesListObj&&laya.qq.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.qq.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.qq.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,s,r){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===r&&(r=0);var a=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[a]={md5:i,readyUrl:t,size:r,times:Or.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+r,e.writeFilesList(a,JSON.stringify(e.filesListObj),!0),null!=s&&s.runWith([0])}else if(e.filesListObj[a]){var l=parseInt(e.filesListObj[a].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-l,e.fakeObj[a].md5==e.filesListObj[a].md5&&delete e.fakeObj[a],delete e.filesListObj[a],e.writeFilesList(a,JSON.stringify(e.filesListObj),!1),null!=s&&s.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(e){},fail:function(e){}}),!tc.isZiYu&&tc.isPosMsgYu&&tc.window.qq.postMessage&&tc.window.qq.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(e){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,t])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="utf8"),void 0===o&&(o="");var s,r=e.getFileNativePath(t);try{s=e.fs.readFileSync(r,i),null!=n&&n.runWith([0,{data:s}])}catch(a){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=tc.window.qq.env.USER_DATA_PATH+t},e.filesListObj={},e.fakeObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=tc.window.qq.getFileSystemManager()},"wxdown",function(){return this.wxdown=tc.window.qq.downloadFile}]),e}(),ec=function(){function e(){}return o(e,"laya.qq.mini.MiniLocalStorage",null,"MiniLocalStorage$10"),e.__init__=function(){e.items=e},e.setItem=function(e,t){try{qq.setStorageSync(e,t)}catch(i){qq.setStorage({key:e,data:t})}},e.getItem=function(e){return qq.getStorageSync(e)},e.setJSON=function(t,i){e.setItem(t,i)},e.getJSON=function(t){return e.getItem(t)},e.removeItem=function(e){qq.removeStorageSync(e)},e.clear=function(){qq.clearStorageSync()},e.getStorageInfoSync=function(){try{var e=qq.getStorageInfoSync();return console.log(e.keys),console.log(e.currentSize),console.log(e.limitSize),e}catch(t){}return null},e.support=!0,e.items=null,e}(),tc=function(){function t(){}return o(t,"laya.qq.mini.QQMiniAdapter"),t.getJson=function(e){return JSON.parse(e)},t.init=function(n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!t._inited&&(t._inited=!0,t.window=e,t.window.hasOwnProperty("qq")&&!(t.window.navigator.userAgent.indexOf("MiniGame")<0))){t.isZiYu=o,t.isPosMsgYu=n,t.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(s){}if(t.isZiYu||($h.setNativeFileDir("/layaairGame"),$h.existDir($h.fileNativeDir,h.create(t,t.onMkdirCallBack))),t.systemInfo=t.window.qq.getSystemInfoSync(),"ios 10.1.1"===t.systemInfo.system.toLowerCase())try{laya.webgl.resource.WebGLCharImage.canUseCanvas=!1}catch(s){}t.window.focus=function(){},i._getUrlPath=function(){},i.getUrlPath=function(){},t.window.logtime=function(e){},t.window.alertTimeLog=function(e){},t.window.resetShareInfo=function(){},t.window.CanvasRenderingContext2D=function(){},t.window.CanvasRenderingContext2D.prototype=t.window.qq.createCanvas().getContext("2d").__proto__,t.window.document.body.appendChild=function(){},t.EnvConfig.pixelRatioInt=0,a.getPixelRatio=t.pixelRatio,t._preCreateElement=Or.createElement,Or.createElement=t.createElement,a.createShaderCondition=t.createShaderCondition,Dr.parseXMLFromString=t.parseXMLFromString,fw._createInputElement=Jh._createInputElement,t.EnvConfig.load=Tu.prototype.load,Tu.prototype.load=od.prototype.load,Tu.prototype._loadImage=Zh.prototype._loadImage,Ts._baseClass=ec,ec.__init__(),t.onReciveData(),nc.useRetinalCanvas=!0}},t.onReciveData=function(){laya.qq.mini.QQMiniAdapter.isZiYu&&t.window.qq.onMessage(function(e){"opendatacontext"==e.isLoad?e.url&&($h.ziyuFileData[e.url]=e.atlasdata,$h.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl):"openJsondatacontext"==e.isLoad?e.url&&($h.ziyuFileData[e.url]=e.atlasdata):"openJsondatacontextPic"==e.isLoad&&($h.ziyuFileTextureData[e.imgReadyUrl]=e.imgNativeUrl)})},t.measureText=function(e){var i=t._measureText(e);return i||(i={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),i},t.getUrlEncode=function(e,t){return"arraybuffer"==t?"":"utf8"},t.downLoadFile=function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n="utf8");var o=$h.getFileInfo(e);o?null!=i&&i.runWith([0]):$h.downLoadFile(e,t,i,n)},t.remove=function(e,t){$h.deleteFile("",e,t,"",0)},t.removeAll=function(){$h.deleteAll()},t.hasNativeFile=function(e){return $h.isLocalNativeFile(e)},t.getFileInfo=function(e){return $h.getFileInfo(e)},t.getFileList=function(){return $h.filesListObj},t.exitMiniProgram=function(){t.window.qq.exitMiniProgram()},t.onMkdirCallBack=function(e,t){e||($h.filesListObj=JSON.parse(t.data),$h.fakeObj=JSON.parse(t.data))},t.pixelRatio=function(){if(!t.EnvConfig.pixelRatioInt)try{return t.EnvConfig.pixelRatioInt=t.systemInfo.pixelRatio,t.systemInfo.pixelRatio}catch(e){}return t.EnvConfig.pixelRatioInt},t.createElement=function(e){if("canvas"==e){var i;return 1==t.idx?t.isZiYu?(i=t.window.sharedCanvas,i.style={}):i=t.window.canvas:i=t.window.qq.createCanvas(),t.idx++,i}if("textarea"==e||"input"==e)return t.onCreateInput(e);if("div"==e){var n=t._preCreateElement(e);return n.contains=function(e){return null},n.removeChild=function(e){},n}return t._preCreateElement(e)},t.onCreateInput=function(e){var i=t._preCreateElement(e);return i.focus=Jh.wxinputFocus,i.blur=Jh.wxinputblur,i.style={},i.value=0,i.parentElement={},i.placeholder={},i.type={},i.setColor=function(e){},i.setType=function(e){},i.setFontFace=function(e){},i.addEventListener=function(e){},i.contains=function(e){return null},i.removeChild=function(e){},i},t.createShaderCondition=function(e){var t=this,i=function(){return t[e.replace("this.","")]};return i},t.sendAtlasToOpenDataContext=function(e){if(!laya.qq.mini.QQMiniAdapter.isZiYu){var i=Tu.getRes(Cs.formatURL(e));if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";i.meta.image.split(",");if(i.meta&&i.meta.image)for(var n=i.meta.image.split(","),o=e.indexOf("/")>=0?"/":"\\",s=e.lastIndexOf(o),r=s>=0?e.substr(0,s+1):"",a=0,l=n.length;l>a;a++)n[a]=r+n[a];else n=[e.replace(".json",".png")];for(a=0;a<n.length;a++){var h=n[a];t.postInfoToContext(e,h,i)}}},t.postInfoToContext=function(e,i,n){var o={frames:n.frames,meta:n.meta},s=i,r=$h.getFileInfo(Cs.formatURL(i));if(r)var a=r.md5,l=$h.getFileNativePath(a);else l=s;if(!l)throw"获取图集的磁盘url路径不存在！";t.window.qq.postMessage({url:e,atlasdata:o,imgNativeUrl:l,imgReadyUrl:s,isLoad:"opendatacontext"})},t.sendSinglePicToOpenDataContext=function(e){var i=Cs.formatURL(e),n=$h.getFileInfo(i);if(n){var o=n.md5,s=$h.getFileNativePath(o);e=i}else s=e;if(!s)throw"获取图集的磁盘url路径不存在！";t.window.qq.postMessage({url:e,imgNativeUrl:s,imgReadyUrl:e,isLoad:"openJsondatacontextPic"})},t.sendJsonDataToDataContext=function(e){if(!laya.qq.mini.QQMiniAdapter.isZiYu){var i=Tu.getRes(e);if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";t.window.qq.postMessage({url:e,atlasdata:i,isLoad:"openJsondatacontext"})}},t.EnvConfig=null,t.window=null,t._preCreateElement=null,t._inited=!1,t.systemInfo=null,t.isZiYu=!1,t.isPosMsgYu=!1,t.autoCacheFile=!0,t.minClearSize=5242880,t.subNativeFiles=null,t.subNativeheads=[],t.subMaps=[],t.AutoCacheDownFile=!1,t._measureText=null,t.parseXMLFromString=function(t){var i;t=t.replace(/>\s+</g,"><");try{i=(new e.Parser.DOMParser).parseFromString(t,"text/xml")}catch(n){throw"需要引入xml解析库文件"}return i},t.idx=1,n(t,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),t}(),ic=function(){function e(){}return o(e,"Laya3D"),e._cancelLoadByUrl=function(t){i.loader.cancelLoadByUrl(t),e._innerFirstLevelLoaderManager.cancelLoadByUrl(t),e._innerSecondLevelLoaderManager.cancelLoadByUrl(t),e._innerThirdLevelLoaderManager.cancelLoadByUrl(t),e._innerFourthLevelLoaderManager.cancelLoadByUrl(t)},e._changeWebGLSize=function(e,t){ur.onStageResize(e,t),ma.clientWidth=e,ma.clientHeight=t},e.__init__=function(){var t=Au.createMap;t.lh=[mS,"SPRITE3DHIERARCHY"],t.ls=[pS,"SPRITE3DHIERARCHY"],t.lm=[KS,"MESH"],t.lmat=[MS,"MATERIAL"],t.lpbr=[DS,"MATERIAL"],t.ltc=[XS,"TEXTURECUBE"],t.jpg=[zS,"nativeimage"],t.jpeg=[zS,"nativeimage"],t.png=[zS,"nativeimage"],t.pkm=[zS,"arraybuffer"],t.lsani=[ux,"arraybuffer"],t.lrani=[ux,"arraybuffer"],t.raw=[qS,"arraybuffer"],t.mipmaps=[qS,"arraybuffer"],t.thdata=[Cx,"arraybuffer"],t.lt=[Tx,"TERRAIN"],t.lani=[Sx,"arraybuffer"],t.lav=[Ex,"json"],t.ani=[ux,"arraybuffer"],Tu.parserMap.SPRITE3DHIERARCHY=e._loadHierarchy,Tu.parserMap.MESH=e._loadMesh,Tu.parserMap.MATERIAL=e._loadMaterial,Tu.parserMap.TEXTURECUBE=e._loadTextureCube,Tu.parserMap.TERRAIN=e._loadTerrain,e._innerFirstLevelLoaderManager.on("error",null,e._eventLoadManagerError),e._innerSecondLevelLoaderManager.on("error",null,e._eventLoadManagerError),e._innerThirdLevelLoaderManager.on("error",null,e._eventLoadManagerError),e._innerFourthLevelLoaderManager.on("error",null,e._eventLoadManagerError)},e.READ_BLOCK=function(){return e._readData.pos+=4,!0},e.READ_DATA=function(){return e._DATA.offset=e._readData.getUint32(),e._DATA.size=e._readData.getUint32(),!0},e.READ_STRINGS=function(){var t=[],i={offset:0,size:0};i.offset=e._readData.getUint16(),i.size=e._readData.getUint16();e._readData.pos;e._readData.pos=i.offset+e._DATA.offset;for(var n=0;n<i.size;n++){var o=e._readData.readUTFString();-1===o.lastIndexOf(".lmat")&&-1===o.lastIndexOf(".lpbr")||t.push(o)}return t},e.formatRelativePath=function(e,t){var i,n=t.charAt(0);if("."===n){for(var o=(e+t).split("/"),s=0,r=o.length;r>s;s++)if(".."==o[s]){var a=s-1;a>0&&".."!==o[a]&&(o.splice(a,2),s-=2)}i=o.join("/")}else i=e+t;return null!=Cs.customFormat&&(i=Cs.customFormat(i,null)),i},e._eventLoadManagerError=function(e){i.loader.event("error",e)},e._addHierarchyInnerUrls=function(t,i,n,o,s,r){var a=e.formatRelativePath(o,s);n&&(a+=n),t.push({url:a,clas:r}),i[s]=a},e._getSprite3DHierarchyInnerUrls=function(t,i,n,o,s,r,a){var l,h=0,c=0;switch(t.type){case"Scene":var u=t.customProps.lightmaps;for(h=0,c=u.length;c>h;h++){var d=u[h].replace(".exr",".png");e._addHierarchyInnerUrls(o,s,r,a,d,zS)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var p;if(t.instanceParams)p=t.instanceParams.loadPath,p&&e._addHierarchyInnerUrls(i,s,r,a,p,KS);else{l=t.customProps,p=l.meshPath,p&&e._addHierarchyInnerUrls(i,s,r,a,p,KS);var f=l.materials;if(f)for(h=0,c=f.length;c>h;h++){var _=f[h],m=_.type.split("."),g=Or.window;if(m.forEach(function(e){g=g[e]}),"function"!=typeof g)throw"_getSprite3DHierarchyInnerUrls 错误: "+_.type+" 不是类";e._addHierarchyInnerUrls(n,s,r,a,_.path,g)}}break;case"ShuriKenParticle3D":l=t.customProps;var v=l.meshPath;v&&e._addHierarchyInnerUrls(i,s,r,a,v,KS);var y=l.material;if(y)m=y.type.split("."),g=Or.window,m.forEach(function(e){g=g[e]}),e._addHierarchyInnerUrls(n,s,r,a,y.path,g);else{var b=l.materialPath;if(b)e._addHierarchyInnerUrls(n,s,r,a,b,NS);else{
var E=l.texturePath;E&&e._addHierarchyInnerUrls(o,s,r,a,E,zS)}}break;case"Terrain":e._addHierarchyInnerUrls(o,s,r,a,t.customProps.dataPath,Tx)}var x=t.components;for(var S in x){var w=x[S];switch(S){case"Animator":var C=w.avatarPath;if(C)e._addHierarchyInnerUrls(o,s,r,a,C,Ex);else{var T=w.avatar;T&&e._addHierarchyInnerUrls(o,s,r,a,T.path,Ex)}var I=w.clipPaths;for(h=0,c=I.length;c>h;h++)e._addHierarchyInnerUrls(o,s,r,a,I[h],Sx)}}var A=t.child;for(h=0,c=A.length;c>h;h++)e._getSprite3DHierarchyInnerUrls(A[h],i,n,o,s,r,a)},e._loadHierarchy=function(t){t.on("loaded",null,e._onHierarchylhLoaded,[t,t._class._getGroup()]),t.load(t.url,"json",!1,null,!0)},e._onHierarchylhLoaded=function(t,i,n){if(t._class.destroyed)t.endLoad();else{var o=t.url,s=Ya.getURLVerion(o),r=Cs.getPath(o),a=[],l=[],c=[],u={};e._getSprite3DHierarchyInnerUrls(n,a,l,c,u,s,r);var d=a.length+l.length+c.length,p=d+1,f=1/p;if(e._onProcessChange(t,0,f,1),c.length>0){var _=d/p,m=h.create(null,e._onProcessChange,[t,f,_],!1);e._innerFourthLevelLoaderManager.create(c,h.create(null,e._onHierarchyInnerForthLevResouLoaded,[t,i,m,n,u,a,l,f+_*c.length,_]),m,null,null,1,!0,i)}else e._onHierarchyInnerForthLevResouLoaded(t,i,null,n,u,a,l,f,_)}},e._onHierarchyInnerForthLevResouLoaded=function(t,i,n,o,s,r,a,l,c){if(t._class.destroyed)t.endLoad();else if(n&&n.recover(),a.length>0){var u=h.create(null,e._onProcessChange,[t,l,c],!1);e._innerSecondLevelLoaderManager.create(a,h.create(null,e._onHierarchyInnerSecondLevResouLoaded,[t,i,u,o,s,r,l+c*a.length,c]),n,null,null,1,!0,i)}else e._onHierarchyInnerSecondLevResouLoaded(t,i,null,o,s,r,l,c)},e._onHierarchyInnerSecondLevResouLoaded=function(t,i,n,o,s,r,a,l){if(t._class.destroyed)t.endLoad();else if(n&&n.recover(),r.length>0){var c=h.create(null,e._onProcessChange,[t,a,l],!1);e._innerFirstLevelLoaderManager.create(r,h.create(null,e._onHierarchyInnerFirstLevResouLoaded,[t,c,o,s]),n,null,null,1,!0,i)}else e._onHierarchyInnerFirstLevResouLoaded(t,null,o,s)},e._onHierarchyInnerFirstLevResouLoaded=function(e,t,i,n){t&&t.recover(),e.endLoad([i,n])},e._loadTerrain=function(t){t.on("loaded",null,e._onTerrainLtLoaded,[t,t._class._getGroup()]),t.load(t.url,"json",!1,null,!0)},e._onTerrainLtLoaded=function(t,i,n){if(t._class.destroyed)t.endLoad();else{var o,s,r=t.url,a=Ya.getURLVerion(r),l=Cs.getPath(r),c=[],u={},d=0,p=0,f=n.heightData;o=f.url,s=e.formatRelativePath(l,o),a&&(s+=a),u[o]=s,o=s;var _=n.detailTexture;for(d=0,p=_.length;p>d;d++)c.push({url:_[d].diffuse});var m=n.normalMap;for(d=0,p=m.length;p>d;d++)c.push({url:m[d]});var g=n.alphaMap;for(d=0,p=g.length;p>d;d++)c.push({url:g[d],params:[!1,!1,6408,!0]});for(d=0,p=c.length;p>d;d++){var v=c[d].url;s=e.formatRelativePath(l,v),a&&(s+=a),c[d].url=s,u[v]=s}var y=c.length,b=y+2,E=1/b;e._onProcessChange(t,0,E,1);var x={heightMapLoaded:!1,texturesLoaded:!1},S=h.create(null,e._onProcessChange,[t,E,E],!1);e._innerFourthLevelLoaderManager.create(o,h.create(null,e._onTerrainHeightMapLoaded,[t,S,n,u,x]),S,null,[f.numX,f.numZ,f.bitType,f.value],1,!0,i);var w=h.create(null,e._onProcessChange,[t,2*E,y/b],!1);e._innerFourthLevelLoaderManager.create(c,h.create(null,e._onTerrainTexturesLoaded,[t,w,n,u,x]),w,null,null,1,!0,i)}},e._onTerrainHeightMapLoaded=function(e,t,i,n,o){o.heightMapLoaded=!0,o.texturesLoaded&&(e.endLoad([i,n]),t.recover())},e._onTerrainTexturesLoaded=function(e,t,i,n,o){o.texturesLoaded=!0,o.heightMapLoaded&&(e.endLoad([i,n]),t.recover())},e._loadMesh=function(t){t.on("loaded",null,e._onMeshLmLoaded,[t,t._class._getGroup()]),t.load(t.url,"arraybuffer",!1,null,!0)},e._onMeshLmLoaded=function(t,i,n){if(t._class.destroyed)t.endLoad();else{var o,s,r=t.url,a=Ya.getURLVerion(r),l=Cs.getPath(r),c={},u=0,d=0,p=0;e._readData=new Vr(n),e._readData.pos=0;var f=e._readData.readUTFString();switch(f){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var _=e._readData.getUint32();e._readData.pos=e._readData.pos+4,p=e._readData.getUint16(),e._readData.pos=e._readData.pos+8*p;var m=e._readData.getUint32();for(p=e._readData.getUint16(),e._readData.pos=_+m,o=[],u=0;p>u;u++){var g=e._readData.readUTFString();-1!==g.lastIndexOf(".lmat")&&o.push(g)}break;default:for(e.READ_BLOCK(),u=0;2>u;u++){var v=e._readData.getUint16(),y=e._strings[v],b=e["READ_"+y];if(null==b)throw new Error("model file err,no this function:"+v+" "+y);1===u?o=b.call():b.call()}}for(u=0,d=o.length;d>u;u++){var E=o[u];s=e.formatRelativePath(l,E),a&&(s+=a),o[u]=s,c[E]=s}if(o.length>0){var x=1,S=x+1,w=1/S;e._onProcessChange(t,0,w,1);var C=h.create(null,e._onProcessChange,[t,w,x/S],!1);e._innerSecondLevelLoaderManager.create(o,h.create(null,e._onMeshMateialLoaded,[t,C,n,c]),C,null,null,1,!0,i)}else t.endLoad([n,c])}},e._onMeshMateialLoaded=function(e,t,i,n){e.endLoad([i,n]),t.recover()},e._getMaterialTexturePath=function(t,i,n){var o=t.length-4;return t.indexOf(".dds")!=o&&t.indexOf(".tga")!=o&&t.indexOf(".exr")!=o&&t.indexOf(".DDS")!=o&&t.indexOf(".TGA")!=o&&t.indexOf(".EXR")!=o||(t=t.substr(0,o)+".png"),t=e.formatRelativePath(n,t),i&&(t+=i),t},e._loadMaterial=function(t){t.on("loaded",null,e._onMaterilLmatLoaded,[t,t._class._getGroup()]),t.load(t.url,"json",!1,null,!0)},e._onMaterilLmatLoaded=function(t,i,n){if(t._class.destroyed)t.endLoad();else{var o,s=t.url,r=Ya.getURLVerion(s),a=Cs.getPath(s),l=[],c={},u=n.customProps,d=n.version;if(d)switch(d){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var p=n.props.textures,f=0,_=p.length;_>f;f++){var m=p[f],g=m.path;if(g){var v=g.length-4;g.indexOf(".exr")!=v&&g.indexOf(".EXR")!=v||(g=g.substr(0,v)+".png"),o=e.formatRelativePath(a,g),r&&(o+=r),l.push({url:o,params:m.params}),c[g]=o}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var y=u.diffuseTexture.texture2D;if(y&&(o=e._getMaterialTexturePath(y,r,a),l.push(o),c[y]=o),u.normalTexture){var b=u.normalTexture.texture2D;b&&(o=e._getMaterialTexturePath(b,r,a),l.push(o),c[b]=o)}if(u.specularTexture){var E=u.specularTexture.texture2D;E&&(o=e._getMaterialTexturePath(E,r,a),l.push(o),c[E]=o)}if(u.emissiveTexture){var x=u.emissiveTexture.texture2D;x&&(o=e._getMaterialTexturePath(x,r,a),l.push(o),c[x]=o)}if(u.ambientTexture){var S=u.ambientTexture.texture2D;S&&(o=e._getMaterialTexturePath(S,r,a),l.push(o),c[S]=o)}if(u.reflectTexture){var w=u.reflectTexture.texture2D;w&&(o=e._getMaterialTexturePath(w,r,a),l.push(o),c[w]=o)}}var C=l.length,T=C+1,I=1/T;if(e._onProcessChange(t,0,I,1),C>0){var A=h.create(null,e._onProcessChange,[t,I,C/T],!1);e._innerFourthLevelLoaderManager.create(l,h.create(null,e._onMateialTexturesLoaded,[t,A,n,c]),A,zS,null,1,!0,i)}else e._onMateialTexturesLoaded(t,null,n,null)}},e._onMateialTexturesLoaded=function(e,t,i,n){e.endLoad([i,n]),t&&t.recover()},e._loadTextureCube=function(t){t.on("loaded",null,e._onTextureCubeLtcLoaded,[t]),t.load(t.url,"json",!1,null,!0)},e._onTextureCubeLtcLoaded=function(t,i){if(t._class.destroyed)t.endLoad();else{var n=Cs.getPath(t.url),o=[e.formatRelativePath(n,i.px),e.formatRelativePath(n,i.nx),e.formatRelativePath(n,i.py),e.formatRelativePath(n,i.ny),e.formatRelativePath(n,i.pz),e.formatRelativePath(n,i.nz)],s=1/7;e._onProcessChange(t,0,s,1);var r=h.create(null,e._onProcessChange,[t,s,6/7],!1);e._innerFourthLevelLoaderManager.load(o,h.create(null,e._onTextureCubeImagesLoaded,[t,o,r]),r,"nativeimage")}},e._onTextureCubeImagesLoaded=function(e,t,i){var n=[];n.length=6;for(var o=0;6>o;o++){var s=t[o];n[o]=Tu.getRes(s),Tu.clearRes(s)}e.endLoad(n),i.recover()},e._onProcessChange=function(e,t,i,n){n=t+n*i,1>n&&e.event("progress",n)},e.init=function(t,n,o,s,r,l){if(void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===r&&(r=!0),void 0===l&&(l=!0),!e._isinit){if(e._isinit=!0,a.update3DLoop=function(){ju._triggerCollision()},a.cancelLoadByUrl=function(t){e._cancelLoadByUrl(t)},nc.isAntialias=o,nc.isAlpha=s,nc.premultipliedAlpha=r,nc.isStencil=l,!ur.enable())return void alert("Laya3D init error,must support webGL!");a.changeWebGLSize=e._changeWebGLSize,Ns.is3DMode=!0,i.init(t,n),aa.__init__(),qa.__init__(),PS.__init__(),vl.__init__(),Hw.__init__(),Ha.__init__(),e.__init__(),xr.maxTextureCount=2,(e.debugMode||Ba.debugMode)&&(e._debugPhasorSprite=new ra)}},e.HIERARCHY="SPRITE3DHIERARCHY",e.MESH="MESH",e.MATERIAL="MATERIAL",e.PBRMATERIAL="PBRMTL",e.TEXTURECUBE="TEXTURECUBE",e.TERRAIN="TERRAIN",e._readData=null,e._debugPhasorSprite=null,e.debugMode=!1,e._isinit=!1,n(e,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new Au},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new Au},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new Au},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new Au}]),e}(),nc=function(){function e(){}return o(e,"Config"),e.WebGLTextCacheCount=500,e.atlasEnable=!1,e.showCanvasMark=!1,e.animationInterval=50,e.isAntialias=!1,e.isAlpha=!1,e.premultipliedAlpha=!0,e.isStencil=!0,e.preserveDrawingBuffer=!1,e.useRetinalCanvas=!1,e.CborderSize=12,e}(),oc=function(e){function t(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,t.__super.call(this),this._childs=t.ARRAY_EMPTY,this._$P=t.PROP_EMPTY,this.timer=i.scaleTimer,this.conchModel=Ns.isConchNode?this.createConchModel():null}o(t,"laya.display.Node",e);var n=t.prototype;return n._setBit=function(e,t){if(1==e){var i=this._getBit(e);i!=t&&this._updateDisplayedInstage()}t?this._bits|=e:this._bits&=~e},n._getBit=function(e){return 0!=(this._bits&e)},n._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},n._setUpNoticeType=function(e){var t=this;for(t._setBit(e,!0),t=t.parent;t;){if(t._getBit(e))return;t._setBit(e,!0),t=t.parent}},n.on=function(e,t,i,n){return"display"!==e&&"undisplay"!==e||this._getBit(1)||this._setUpNoticeType(1),this._createListener(e,t,i,n,!1)},n.once=function(e,t,i,n){return"display"!==e&&"undisplay"!==e||this._getBit(1)||this._setUpNoticeType(1),this._createListener(e,t,i,n,!0)},n.createConchModel=function(){return null},n.destroy=function(e){void 0===e&&(e=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(e?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},n.destroyChildren=function(){if(this._childs)for(var e=this._childs.length-1;e>-1;e--)this._childs[e].destroy(!0)},n.addChild=function(e){if(!e||this.destroyed||e===this)return e;if(e.zOrder&&this._set$P("hasZorder",!0),e._parent===this){var i=this.getChildIndex(e);i!==this._childs.length-1&&(this._childs.splice(i,1),this._childs.push(e),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(e.conchModel,this._childs.length-1)),this._childChanged())}else e.parent&&e.parent.removeChild(e),this._childs===t.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e),this.conchModel&&this.conchModel.addChildAt(e.conchModel,this._childs.length-1),e.parent=this,this._childChanged();return e},n.addChildren=function(e){for(var t=arguments,i=0,n=t.length;n>i;)this.addChild(t[i++])},n.addChildAt=function(e,i){if(!e||this.destroyed||e===this)return e;if(e.zOrder&&this._set$P("hasZorder",!0),i>=0&&i<=this._childs.length){if(e._parent===this){var n=this.getChildIndex(e);this._childs.splice(n,1),this._childs.splice(i,0,e),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(e.conchModel,i)),this._childChanged()}else e.parent&&e.parent.removeChild(e),this._childs===t.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(i,0,e),this.conchModel&&this.conchModel.addChildAt(e.conchModel,i),e.parent=this;return e}throw new Error("appendChildAt:The index is out of bounds")},n.getChildIndex=function(e){return this._childs.indexOf(e)},n.getChildByName=function(e){var t=this._childs;if(t)for(var i=0,n=t.length;n>i;i++){var o=t[i];if(o.name===e)return o}return null},n._get$P=function(e){return this._$P[e]},n._set$P=function(e,i){return this.destroyed||(this._$P===t.PROP_EMPTY&&(this._$P={}),this._$P[e]=i),i},n.getChildAt=function(e){return this._childs[e]},n.setChildIndex=function(e,t){var i=this._childs;if(0>t||t>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(e);if(0>n)throw new Error("setChildIndex:node is must child of this object.");return i.splice(n,1),i.splice(t,0,e),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(e.conchModel,t)),this._childChanged(),e},n._childChanged=function(e){},n.removeChild=function(e){if(!this._childs)return e;var t=this._childs.indexOf(e);return this.removeChildAt(t)},n.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},n.removeChildByName=function(e){var t=this.getChildByName(e);return t&&this.removeChild(t),t},n.removeChildAt=function(e){var t=this.getChildAt(e);return t&&(this._childs.splice(e,1),this.conchModel&&this.conchModel.removeChild(t.conchModel),t.parent=null),t},n.removeChildren=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=2147483647),this._childs&&this._childs.length>0){var n=this._childs;if(0===e&&i>=r){var o=n;this._childs=t.ARRAY_EMPTY}else o=n.splice(e,i-e);for(var s=0,r=o.length;r>s;s++)o[s].parent=null,this.conchModel&&this.conchModel.removeChild(o[s].conchModel)}return this},n.replaceChild=function(e,t){var i=this._childs.indexOf(t);return i>-1?(this._childs.splice(i,1,e),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(e.conchModel,i)),t.parent=null,e.parent=this,e):null},n._updateDisplayedInstage=function(){var e;e=this;var t=i.stage;for(this._displayedInStage=!1;e;){if(e._getBit(1)){this._displayedInStage=e._displayedInStage;break}if(e==t||e._displayedInStage){this._displayedInStage=!0;break}e=e.parent}},n._setDisplay=function(e){this._displayedInStage!==e&&(this._displayedInStage=e,e?this.event("display"):this.event("undisplay"))},n._displayChild=function(e,t){var i=e._childs;if(i)for(var n=0,o=i.length;o>n;n++){var s=i[n];s._getBit(1)&&(s._childs.length>0?this._displayChild(s,t):s._setDisplay(t))}e._setDisplay(t)},n.contains=function(e){if(e===this)return!0;for(;e;){if(e.parent===this)return!0;e=e.parent}return!1},n.timerLoop=function(e,t,i,n,o,s){void 0===o&&(o=!0),void 0===s&&(s=!1),this.timer.loop(e,t,i,n,o,s)},n.timerOnce=function(e,t,i,n,o){void 0===o&&(o=!0),this.timer._create(!1,!1,e,t,i,n,o)},n.frameLoop=function(e,t,i,n,o){void 0===o&&(o=!0),this.timer._create(!0,!0,e,t,i,n,o)},n.frameOnce=function(e,t,i,n,o){void 0===o&&(o=!0),this.timer._create(!0,!1,e,t,i,n,o)},n.clearTimer=function(e,t){this.timer.clear(e,t)},s(0,n,"displayedInStage",function(){return this._getBit(1)?this._displayedInStage:(this._setUpNoticeType(1),this._displayedInStage)}),s(0,n,"parent",function(){return this._parent},function(e){this._parent!==e&&(e?(this._parent=e,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),e.displayedInStage&&this._displayChild(this,!0)),e._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=e))}),s(0,n,"numChildren",function(){return this._childs.length}),s(0,n,"destroyed",function(){return this._destroyed}),t.ARRAY_EMPTY=[],t.PROP_EMPTY={},t.NOTICE_DISPLAY=1,t.MOUSEENABLE=2,t}(l),sc=function(e){function t(e,i){this.proxyName=null,this.data=null,t.__super.call(this),this.proxyName=null!=e?e:t.NAME,null!=i&&this.setData(i)}o(t,"org.puremvc.as3.patterns.proxy.Proxy",e);var n=t.prototype;return i.imps(n,{"org.puremvc.as3.patterns.proxy.INotifier":!0,"org.puremvc.as3.patterns.proxy.IProxy":!0}),n.getProxyName=function(){return this.proxyName},n.setData=function(e){this.data=e},n.getData=function(){return this.data},n.onRegister=function(){},n.onRemove=function(){},t.NAME="Proxy",t}(m),rc=function(e){function t(){t.__super.call(this)}o(t,"org.puremvc.as3.patterns.command.SimpleCommand",e);var n=t.prototype;return i.imps(n,{"org.puremvc.as3.patterns.command.INotifier":!0,"org.puremvc.as3.patterns.command.ICommand":!0}),n.execute=function(e){},t}(m),ac=function(e){function t(){this.subCommands=null,t.__super.call(this),this.subCommands=[],this.initializeMacroCommand()}o(t,"org.puremvc.as3.patterns.command.MacroCommand",e);var n=t.prototype;return i.imps(n,{"org.puremvc.as3.patterns.command.INotifier":!0,"org.puremvc.as3.patterns.command.ICommand":!0}),n.initializeMacroCommand=function(){},n.addSubCommand=function(e){this.subCommands.push(e)},n.execute=function(e){for(;this.subCommands.length>0;){var t=this.subCommands.shift(),i=new t;i.execute(e)}},t}(m),lc=function(e){function t(e){this.mediatorName=null,this.viewComponent=null,t.__super.call(this),this.mediatorName=null!=e?e:"Mediator"}o(t,"org.puremvc.as3.patterns.mediator.Mediator",e);var n=t.prototype;return i.imps(n,{"org.puremvc.as3.patterns.mediator.INotifier":!0,"org.puremvc.as3.patterns.mediator.IMediator":!0}),n.getMediatorName=function(){return this.mediatorName},n.setViewComponent=function(e){this.viewComponent=e},n.getViewComponent=function(){return null==this.viewComponent&&this.initViewComponent(),this.viewComponent},n.isInitedView=function(){return null!=this.viewComponent},n.initViewComponent=function(){console.log("子类实现，初始化view")},n.listNotificationInterests=function(){return[]},n.handleNotification=function(e){},n.onRegister=function(){},n.onRemove=function(){},s(0,n,"viewInited",function(){return null!=this.viewComponent}),t.NAME="Mediator",t}(m),hc=function(e){function t(){t.__super.call(this,3)}o(t,"gamelogin.LoginRequest",e);var i=t.prototype;return i.sendHeartbeat=function(){this.send(0)},i.createPlayer=function(e){this.sendProto(2,"CreatePlayer",e)},i.bindSession=function(e){this.sendString(3,v.serialNum)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),cc=function(e){function t(){t.__super.call(this,40)}o(t,"modules.lode.LodeRequest",e);var i=t.prototype;return i.lodeInfo=function(){this.send(1)},i.lodeLogs=function(e){this.sendLong(2,e)},i.lodeOpen=function(e){this.sendLong(3,e)},i.lodeOthers=function(e,t,i){void 0===t&&(t=10),void 0===i&&(i=0),console.log("查看矿脉列表"+e+"---"+t+"---"+i+"---"),this.sendIntArr(4,[e,t,i])},i.lodeFight=function(e){this.sendLong(5,e)},i.lodeFightUseGold=function(e){this.sendLong(11,e)},i.lodeProtect=function(e){this.sendLong(6,e)},i.lodeByGold=function(){this.send(7)},i.lodeTakeAward=function(){this.send(8)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),uc=function(e){function t(e,i,n){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],this.IP_Reg=/^((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}$/,void 0===i&&(i=0),t.__super.call(this),this._byteClass=n?n:Vr,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,e&&i>0&&65535>i&&this.connect(e,i)}o(t,"laya.net.Socket",e);var i=t.prototype;return i.connect=function(e,t){var i;i=this.IP_Reg.test(e)?"ws://"+e+":"+t:"wss://"+e+":"+t,this.connectByUrl(i)},i.connectByUrl=function(e){var t=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new Or.window.WebSocket(e,this.protocols):this._socket=new Or.window.WebSocket(e),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(e){t._onOpen(e)},this._socket.onmessage=function(e){t._onMessage(e)},this._socket.onclose=function(e){t._onClose(e)},this._socket.onerror=function(e){t._onError(e)}},i.cleanSocket=function(){try{this._socket.close()}catch(e){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},i.close=function(){if(null!=this._socket)try{this._socket.close()}catch(e){}},i._onOpen=function(e){this._connected=!0,this.event("open",e)},i._onMessage=function(e){if(e&&e.data){var t=e.data;if(this.disableInput&&t)return void this.event("message",t);this._input.length>0&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var i=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,t&&("string"==typeof t?this._input.writeUTFBytes(t):this._input.writeArrayBuffer(t),this._addInputPosition=this._input.pos,this._input.pos=i),this.event("message",t)}},i._onClose=function(e){this._connected=!1,this.event("close",e)},i._onError=function(e){this.event("error",e)},i.send=function(e){this._socket.send(e)},i.flush=function(){if(this._output&&this._output.length>0){var e;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(t){e=t}this._output.endian=this.endian,this._output.clear(),e&&this.event("error",e)}},s(0,i,"endian",function(){return this._endian},function(e){this._endian=e,null!=this._input&&(this._input.endian=e),null!=this._output&&(this._output.endian=e)}),s(0,i,"connected",function(){return this._connected}),s(0,i,"output",function(){return this._output}),s(0,i,"input",function(){return this._input}),t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}(l),dc=function(e){function t(){t.__super.call(this,17)}o(t,"modules.forest.ForestRequest",e);var n=t.prototype;return n.query=function(){this.send(1),i.timer.once(18e5,this,this.query)},n.enter=function(e,t,i){this.sendIntArr(2,[e,t,i])},n.exit=function(){this.send(3)},n.moveStep=function(e){this.sendInt(4,e)},n.choseEvent=function(e){this.sendInt(5,e)},n.buyLife=function(e){this.sendInt(6,e)},n.usePropAddTime=function(e){this.sendLong(90,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),pc=function(e){function t(){t.__super.call(this,22)}o(t,"modules.marcket.MarketRequest",e);var i=t.prototype;return i.buy=function(e,t){this.sendIntArr(1,[e,t])},i.buyBook=function(e,t){this.sendIntArr(3,[e,t])},i.query=function(){this.send(2)},i.queryDaily=function(){this.send(8)},i.buyDaily=function(e){this.sendInt(9,e)},i.queryRebate=function(){this.send(10)},i.resetRebate=function(){this.send(12)},i.takeRebate=function(e){this.sendInt(11,e)},i.openEquipGhost=function(e){this.sendInt(4,e)},i.changeEquipGhostBox=function(e){this.sendInt(5,e)},i.awardEquipGhostBox=function(e){this.sendInt(6,e)},i.openEquipGhostAuto=function(e,t){this.sendIntArr(7,[e,t])},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),fc=function(e){function t(){t.__super.call(this,9)}o(t,"modules.marcket.VipRequest",e);var i=t.prototype;return i.queryVip=function(){this.send(1)},i.buyExpRate=function(){this.send(2)},i.buySilverRate=function(){this.send(3)},i.buyPropRate=function(){this.send(4)},i.buyGasRate=function(){this.send(10)},i.buyOfflineTime=function(){this.send(5)},i.buyArenaMineTime=function(){this.send(6)},i.buyArenaMineCount=function(){this.send(9)},i.buyStarFailReturn=function(){this.send(7)},i.buyPetFoodDropAdd=function(){this.send(8)},i.buyBossRate=function(){this.send(11)},i.buyOfflineOpenBox=function(e){this.sendInt(19,e)},i.getVipMonthAward=function(e){this.sendInt(60,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),_c=function(e){function t(){t.__super.call(this,39)}o(t,"modules.alca.AlcaRequest",e);var i=t.prototype;return i.query=function(){this.send(2)},i.queryEnemy=function(){this.send(3)},i.signup=function(){this.send(1)},i.lineup=function(e,t,i){this.sendProto(4,"LongIntGroup",{arr:[{i:t,L:e},{i:i,L:0}]})},i.lineoff=function(e){this.sendLong(5,e)},i.eatDrug=function(){this.send(6)},i.attack=function(e,t){this.sendIntArr(7,[e%100,t%100])},i.attackForce=function(e,t){this.sendIntArr(12,[e%100,t%100])},i.listVD=function(e){this.sendInt(8,e)},i.lookVD=function(e){this.sendString(9,e)},i.authorzeLineup=function(e){this.sendLong(10,e)},i.listAwardLogs=function(){this.send(11)},i.takeExtAward=function(){this.send(13)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),mc=function(e){function t(){t.__super.call(this,5)}o(t,"modules.fight.FightRequest",e);var i=t.prototype;return i.queryOfflineAwards=function(){this.send(1)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),gc=function(e){function t(){t.__super.call(this,24)}o(t,"modules.talisman.TalismanRequest",e);var i=t.prototype;return i.dress=function(e,t){this.sendProto(1,"LongInt",{L:e,i:t})},i.upgrade=function(e,t){var i,n=[{L:e,i:1}];for(var o in t)i=t[o],n.push({L:i.id,i:1});this.sendProto(2,"LongIntGroup",{arr:n})},i.upgradeByStone=function(e,t){var i,n=[{L:e,i:1}];for(var o in t.keys){i=t.keys[o];var s=t.get(i);n.push({L:i,i:s})}this.sendProto(3,"LongIntGroup",{arr:n})},i.rebuild=function(e,t,i){var n,o=[{L:e,i:1}];for(var s in t.keys){n=t.keys[s];var r=t.get(n);o.push({L:n,i:r})}var a;for(var l in i)a=i[l],o.push({L:0,i:a});this.sendProto(4,"LongIntGroup",{arr:o})},i.rebuildDelay=function(e,t,i){var n,o=[{L:e,i:1}];for(var s in t.keys){n=t.keys[s];var r=t.get(n);o.push({L:n,i:r})}var a;for(var l in i)a=i[l],o.push({L:0,i:a});this.sendProto(5,"LongIntGroup",{arr:o})},i.rebuildChose=function(e,t){this.sendProto(6,"LongInt",{L:e,i:t?0:1})},i.changeNature=function(e,t,i,n){var o=[{L:e,i:t},{L:i,i:n}];this.sendProto(7,"LongIntGroup",{arr:o})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),vc=function(e){function t(){t.__super.call(this,58)}o(t,"modules.vip.VipExtRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.takeAward=function(){this.send(2)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),yc=function(e){function t(){t.__super.call(this,33)}o(t,"modules.exchange.ExchangeRequest",e);var i=t.prototype;return i.querySalings=function(){this.send(1)},i.querySolds=function(){this.send(2)},i.putOn=function(e,t,i,n){this.sendProto(3,"LongIntGroup",{arr:[{i:t,L:e},{i:n,L:i}]})},i.pullOff=function(e){this.sendLong(4,e)},i.search=function(e,t,i){var n=[];n=n.concat(e.getSendArr()),n=n.concat(t,i),this.sendIntArr(5,n)},i.buy=function(e,t){this.sendProto(6,"LongInt",{i:t,L:e})},i.changeGolden=function(e){this.sendInt(10,e)},i.changeHandbook=function(e){this.sendInt(11,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),bc=function(e){function t(){t.__super.call(this,42)}o(t,"modules.record.RecordRequest",e);var i=t.prototype;return i.queryExpenseLog=function(){this.send(1)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Ec=function(e){function t(){t.__super.call(this,46)}o(t,"modules.activity7day.Activity7DayRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.takeAward=function(e){this.sendInt(2,e)},i.takeAwardEx=function(e){this.sendInt(3,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),xc=function(e){function t(){t.__super.call(this,4)}o(t,"modules.skill.SkillRequest",e);var i=t.prototype;return i.listSkills=function(){this.send(1)},i.learnSkill=function(e){this.sendInt(2,e)},i.changePosition=function(e){var t,i=[];for(var n in e)t=e[n],i.push(t.id);this.sendIntArr(3,i)},i.listPassives=function(){this.send(4)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Sc=function(e){function t(e){t.__super.call(this,101)}o(t,"modules.smithy.SmithyRequtest",e);var i=t.prototype;return i.exchangeGhost=function(e,t,i){var n=[{L:e,i:t},{L:0,i:i}];this.sendProto(0,"LongIntGroup",{arr:n})},i.mixProp=function(e,t){this.sendProto(1,"LongInt",{L:e,i:t})},i.mixPropFast=function(e,t,i){var n,o=[{L:t,i:e}];for(var s in i)n=i[s],o.push({L:n.id,i:n.count});this.sendProto(20,"LongIntGroup",{arr:o})},i.mixPropSP=function(e,t){this.sendProto(2,"LongLong",{a:e,b:t})},i.mixEquip=function(e,t){var i,n=[{L:0,i:e}];for(var o in t)i=t[o],n.push({L:i.id,i:1});this.sendProto(3,"LongIntGroup",{arr:n})},i.dianhuaEquip=function(e){this.sendLong(4,e)},i.identifyPropSp=function(e){this.sendLong(5,e)},i.buildEquipEx=function(e,t){var i=[{L:e,i:1},{L:t,i:10}];this.sendProto(6,"LongIntGroup",{arr:i})},i.enchantment=function(e,t){this.sendProto(7,"LongLong",{a:e,b:t})},i.rebuildEquipEx=function(e,t,i){var n,o=[{L:e,i:1}];for(var s in t.keys){n=t.keys[s];var r=t.get(n);o.push({L:n,i:r})}var a;for(var l in i)a=i[l],o.push({L:0,i:a});this.sendProto(8,"LongIntGroup",{arr:o})},i.rebuildEquipExDelay=function(e,t,i){var n,o=[{L:e,i:1}];for(var s in t.keys){n=t.keys[s];var r=t.get(n);o.push({L:n,i:r})}var a;for(var l in i)a=i[l],o.push({L:0,i:a});this.sendProto(11,"LongIntGroup",{arr:o})},i.rebuildChose=function(e,t){this.sendProto(12,"LongInt",{L:e,i:t?0:1})},i.upgradeGraphSimple=function(e,t){var i,n=[{L:e,i:1}];for(var o in t.keys){i=t.keys[o];var s=t.get(i);n.push({L:i,i:s})}this.sendProto(9,"LongIntGroup",{arr:n})},i.upgradeGraphByStone=function(e,t){var i,n=[{L:e,i:1}];for(var o in t.keys){i=t.keys[o];var s=t.get(i);n.push({L:i,i:s})}this.sendProto(10,"LongIntGroup",{arr:n})},i.chgExEquipNature=function(e){this.sendLong(21,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),wc=function(e){function t(){t.__super.call(this,1)}o(t,"modules.chat.ChatRequest",e);var i=t.prototype;return i.getToken=function(){this.send(5)},i.lookItem=function(e,t){this.sendProto(10,"LongInt",{i:e,L:t})},i.lookPet=function(e){this.sendProto(11,"LongInt",{i:8,L:e})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Cc=function(e){function t(){t.__super.call(this,63)}o(t,"modules.worldboss.WorldBossRequest",e);var i=t.prototype;return i.queryInfo=function(){this.send(1)},i.queryView=function(){this.send(2)},i.feed=function(e){var t,i=[];for(var n in e.values)t=e.values[n],i.push({L:t.id,i:t.countTmp});this.sendProto(3,"LongIntGroup",{arr:i})},i.feedTalisman=function(e){var t,i=[];for(var n in e.keys)t=e.keys[n],i.push({L:t.id,i:1});this.sendProto(10,"LongIntGroup",{arr:i})},i.chgOpen=function(e,t,i){this.sendIntArr(4,[e,t,i])},i.fightOnce=function(){this.send(5)},i.takeFeedAward=function(){this.send(6)},i.takeFightAward=function(){this.send(7)},i.takeFightAwardDelay=function(){this.send(11)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Tc=function(e){function t(){t.__super.call(this,21)}o(t,"modules.tower.TowerRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.signUp=function(){this.send(2)},i.enter=function(){this.send(3)},i.fight=function(){this.send(4)},i.buyLife=function(){this.send(5)},i.buyPoint=function(e){this.sendInt(8,e)},i.recover=function(e,t){var i=[{L:e,i:t}];this.sendProto(9,"LongIntGroup",{arr:i})},i.queryRank=function(){this.send(7)},i.exchange=function(e,t,i){this.sendIntArr(6,[e,t,i]);
},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Ic=function(e){function t(){t.__super.call(this,34)}o(t,"modules.activity.ActivityRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.sign=function(){this.send(2)},i.signTotal=function(e){this.sendInt(7,e)},i.takeAward=function(e){this.sendInt(3,e)},i.exchangeGuoqin=function(e){var t,i=[];for(var n in e)t=e[n],i.push({i:0,L:t.id});this.sendProto(4,"LongIntGroup",{arr:i})},i.takeAwardOfOncePay=function(){this.send(5)},i.openRedbox=function(){this.send(6)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Ac=function(e){function t(){this.context=null,t.__super.call(this)}o(t,"modules.fight.model.FightReport",e);var i=t.prototype;return i.recover=function(){Hr.recover("FightReport_CLZ",this)},i.update=function(t){e.prototype.update.call(this,t),this.context=null},i.getHtml=function(e,t,i){var n,o,s;if(null==e)return null;this.context=e;var r=0;if(e.fighterA.unitId.equals(this.unitidTo))e.fighterA.unitId.equals(Ng.userVO.unitId)?(o="<font color='#ffff00'>"+e.fighterB.getValue(1002)+"</font>",n="<font color='#00ff00'>你</font>"):(o="<font color='#00ff00'>你</font>",n="<font color='#ffff00'>"+e.fighterA.getValue(1002)+"</font>"),r=e.fighterB.getValue(7001),0==r&&(r=e.fighterB.getValue(1004));else{if(!e.fighterB.unitId.equals(this.unitidTo))return"<font color='#ffffff'>正在战斗中...</font>";e.fighterA.unitId.equals(Ng.userVO.unitId)?(o="<font color='#00ff00'>你</font>",n="<font color='#ffff00'>"+e.fighterB.getValue(1002)+"</font>"):(o="<font color='#ffff00'>"+e.fighterA.getValue(1002)+"</font>",n="<font color='#00ff00'>你</font>"),r=e.fighterA.getValue(7001),0==r&&(r=e.fighterA.getValue(1004))}return s="<font color='"+R.getColor(r)+"'>"+R.getName(r)+"系</font>",this.buildHtml(n,o,s,t,i)},s(0,i,"tmpSkillEffect",function(){return this.context&&this.context.EFFECT_TMP_SKILL_FLAG},function(e){this.context&&(this.context.EFFECT_TMP_SKILL_FLAG=e)}),t.buildOne=function(){return Hr.getItemByClass("FightReport_CLZ",t)},t._NAME="FightReport_CLZ",t}(Se),Nc=function(e){function t(){this.grpA=null,this.grpB=null,t.__super.call(this),this.grpA=new Ce,this.grpB=new Ce}o(t,"modules.fight.model.FightContextTeam",e);var i=t.prototype;return i.isRightDead=function(){return this.grpA.isDead()},i.isLeftDead=function(){return this.grpB.isDead()},t}(we),Pc=function(e){function t(){this.fighterA=null,this.fighterB=null,t.__super.call(this),this.fighterA=O.build(),this.fighterB=O.build()}o(t,"modules.fight.model.FightContext",e);var i=t.prototype;return i.isRightDead=function(){return this.fighterA.isDead()},i.isLeftDead=function(){return this.fighterB.isDead()},t}(we),Rc=function(e){function t(){t.__super.call(this,49)}o(t,"modules.activity.ActivityLotteryRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.draw=function(e){this.sendInt(2,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Lc=function(e){function t(){this.context=null,t.__super.call(this)}o(t,"modules.fight.model.FightReportTeam",e);var i=t.prototype;return i.recover=function(){Hr.recover("FightReportTeam_CLZ",this)},i.update=function(t){e.prototype.update.call(this,t),this.context=null},i.getHtml=function(e,t,i){var n,o,s;if(null==e)return null;this.context=e;var r,a,l,h;if(r=e.grpA.getFighter(this.unitidFrom.key),r?l="#00dc24":(r=e.grpB.getFighter(this.unitidFrom.key),l="#fffc00"),this.unitidFrom.key==this.unitidTo.key?(a=r,h=l):(a=e.grpB.getFighter(this.unitidTo.key),a?h="#fffc00":(a=e.grpA.getFighter(this.unitidTo.key),h="#00dc24")),!a||!r)return"<font color='#ffffff'>正在战斗中...</font>";var c=0;return n="<font color='"+h+"'>"+a.getValue(1002)+"</font>",o="<font color='"+l+"'>"+r.getValue(1002)+"</font>",c=r.getValue(7001),0==c&&(c=r.getValue(1004)),s="<font color='"+R.getColor(c)+"'>"+R.getName(c)+"系</font>",this.buildHtml(n,o,s,t,i)},s(0,i,"tmpSkillEffect",function(){return this.context&&this.context.EFFECT_TMP_SKILL_FLAG},function(e){this.context&&(this.context.EFFECT_TMP_SKILL_FLAG=e)}),t.buildOne=function(){return Hr.getItemByClass("FightReportTeam_CLZ",t)},t._NAME="FightReportTeam_CLZ",t}(Se),Oc=function(e){function t(){t.__super.call(this,51)}o(t,"modules.mail.MailRequest",e);var i=t.prototype;return i.list=function(){this.send(1)},i.queryDetail=function(e){this.sendInt(2,e)},i.read=function(e){this.sendInt(3,e)},i.del=function(e){this.sendInt(4,e)},i.readAll=function(){this.send(5)},i.delAll=function(){this.send(6)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Mc=function(e){function t(){t.__super.call(this,20)}o(t,"modules.shop.ShopRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.buy=function(e){this.sendInt(2,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Dc=function(e){function t(){t.__super.call(this,11)}o(t,"modules.bone.BoneRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.feed=function(e,t,i){var n,o=[{L:0,i:e}],s=0;for(var r in t.values){if(n=t.values[r],n.countTmp+s>i){o.push({L:n.id,i:i-s});break}o.push({L:n.id,i:n.countTmp}),s+=n.countTmp}this.sendProto(2,"LongIntGroup",{arr:o})},i.upgrade=function(){this.send(3)},i.drug=function(e,t){this.sendProto(4,"LongInt",{L:e,i:t})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),kc=function(e){function t(){t.__super.call(this,36)}o(t,"modules.alliance.AllianceRequest",e);var i=t.prototype;return i.queryPlayerAlliance=function(){this.send(0)},i.queryAlliance=function(e){this.sendLong(1,e)},i.create=function(e){this.sendString(2,e)},i.join=function(e){this.sendLong(3,e)},i.quit=function(){this.send(4)},i.disband=function(){this.send(911)},i.listAlliances=function(e,t){void 0===t&&(t=10),this.sendIntArr(5,[e,t])},i.queryAlcRank=function(){this.send(20)},i.lookMembers=function(e){this.sendLong(23,e)},i.queryAlcLogs=function(){this.send(22)},i.queryDonateLogs=function(){this.send(21)},i.listMembers=function(e,t){void 0===t&&(t=50),this.sendIntArr(6,[e,t])},i.listApplys=function(e,t){this.sendIntArr(7,[e,t])},i.dismisMember=function(e){this.sendLong(8,e)},i.changeValidState=function(e,t){this.sendIntArr(9,[e,t])},i.examinApply=function(e,t){this.sendProto(10,"LongInt",{L:e,i:t?1:0})},i.appointTitle=function(e,t){this.sendProto(11,"LongInt",{L:e,i:t})},i.abdicate=function(e){this.sendLong(12,e)},i.donateGolden=function(e){this.sendInt(13,e)},i.donateProp=function(e,t){this.sendProto(14,"LongInt",{L:e,i:t})},i.levelUpBuilding=function(e){this.sendInt(15,e)},i.learnBook=function(){this.send(16)},i.upgradeSkill=function(e){this.sendInt(17,e)},i.changeBuidingLock=function(e){this.sendInt(18,e?1:0)},i.changeNotice=function(e){this.sendString(19,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Bc=function(e){function t(){t.__super.call(this,37)}o(t,"modules.alliance.AlcTaskRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.trySteal=function(){this.send(2)},i.tryFinish=function(e){this.sendProto(3,"LongInt",{L:e,i:1})},i.fastFinish=function(){this.send(4)},i.drop=function(){this.send(5)},i.freshByGold=function(){this.send(6)},i.listLogs=function(){this.send(10)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Vc=function(e){function t(){t.__super.call(this,48)}o(t,"modules.activityinvest.ActivityInvestRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.buy=function(e){this.sendInt(2,e)},i.takeAward=function(e,t){this.sendIntArr(3,[e,t])},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Fc=function(e){function t(){t.__super.call(this,43)}o(t,"modules.pearl.PearlRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.openHole=function(e,t){var i=[{i:e,L:0}];i=i.concat(t),this.sendProto(2,"LongIntGroup",{arr:i})},i.active=function(e,t,i){var n=[{i:e,L:t},{i:i,L:0}];this.sendProto(5,"LongIntGroup",{arr:n})},i.feed=function(e,t){var i=[{i:e,L:0}];i=i.concat(t),this.sendProto(3,"LongIntGroup",{arr:i})},i.changeNature=function(e,t,i){var n=[{i:e,L:i},{i:t,L:0}];this.sendProto(4,"LongIntGroup",{arr:n})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Gc=function(e){function t(){t.__super.call(this,7)}o(t,"modules.dungeon.DungeonRequest",e);var i=t.prototype;return i.enterDungeon=function(e){this.sendInt(1,e)},i.lockFightBoss=function(){this.send(6)},i.queryDungeonSp=function(){this.send(3)},i.fightDungeonSp=function(){this.send(4)},i.resetDungeonSp=function(){this.send(7)},i.queryDungeonSpRank=function(){this.send(5)},i.fightOtherPlayer=function(e){e!=Ng.userVO.unitId.id&&this.sendLong(2,e)},i.subscribe=function(){this.send(8)},i.unsubscribe=function(){this.send(9)},i.queryLimitOpen=function(){this.send(10)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Hc=function(e){function t(){t.__super.call(this,10001)}o(t,"modules.pay.PayRequest",e);var i=t.prototype;return i.testPay=function(e){this.sendString(110,e)},i.jadePay=function(e){this.sendInt(111,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Uc=function(e){function t(){t.__super.call(this,54)}o(t,"modules.oldguy.OldguyRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.take=function(e){this.sendInt(2,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),zc=function(e){function t(){t.__super.call(this,55)}o(t,"modules.mystery.MysteryRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.enter=function(e){this.sendInt(2,e)},i.quit=function(){this.send(7)},i.applyQuit=function(e){this.sendInt(10,e?1:0)},i.move=function(e,t){this.sendIntArr(3,[e,t])},i.fightMonster=function(e,t){this.sendIntArr(4,[e,t])},i.fightPlayer=function(e){this.sendLong(5,e)},i.answer=function(e){this.sendInt(6,e)},i.fresh=function(){this.send(8)},i.startHang=function(e,t,i){this.sendProto(13,"LongIntGroup",{arr:[{i:e,L:t},{L:0,i:i}]})},i.stopHang=function(){this.send(12)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Wc=function(e){function t(){t.__super.call(this,38)}o(t,"modules.ladder.LadderRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.fight=function(e){this.sendLong(3,e)},i.listAround=function(){this.send(2)},i.takeAward=function(e){this.sendInt(4,e)},i.listTop10=function(){this.send(5)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Yc=function(e){function t(){t.__super.call(this,3)}o(t,"modules.user.UserRequest",e);var i=t.prototype;return i.selectWuxing=function(e){this.sendInt(10,e)},i.saveAdultState=function(e){this.sendInt(13,e)},i.bindPlatform=function(){this.sendString(9,X.PLATE_FORM+"_"+X.FID)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),qc=function(e){function t(){t.__super.call(this,61)}o(t,"modules.dungeondaily.DungeonDailyRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.fight=function(e){this.sendInt(2,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Kc=function(e){function t(){t.__super.call(this,29)}o(t,"modules.blood.BloodRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.openGrad=function(e,t){this.sendProto(2,"LongInt",{i:e,L:t})},i.upgradeLevel=function(e){this.sendInt(3,e)},i.upgradeLevelAuto=function(e){this.sendInt(9,e)},i.upgradeQuailty=function(e,t){var i,n=[{L:e,i:1}];for(var o in t)i=t[o],n.push({L:i.id,i:1});this.sendProto(4,"LongIntGroup",{arr:n})},i.upgradeQualityByStone=function(e,t){var i,n=[{L:e,i:1}];for(var o in t.keys){i=t.keys[o];var s=t.get(i);n.push({L:i,i:s})}this.sendProto(5,"LongIntGroup",{arr:n})},i.upgradeQuailty2Orange=function(e,t){var i,n=[{L:e,i:1}];for(var o in t.keys){i=t.keys[o];var s=t.get(i);n.push({L:i,i:s})}this.sendProto(10,"LongIntGroup",{arr:n})},i.upgradeOrangeAttrLevel=function(e,t){var i=[{L:e,i:1},{L:t,i:0}];this.sendProto(11,"LongIntGroup",{arr:i})},i.moveOrangeAttrLevel=function(e,t,i){var n=[{L:e},{L:t},{L:i}];this.sendProto(12,"LongIntGroup",{arr:n})},i.buildBlood=function(e){this.sendInt(6,e)},i.dressBlood=function(e,t){this.sendProto(7,"LongInt",{i:t,L:e})},i.takeOff=function(e){this.sendInt(8,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Xc=function(e){function t(){t.__super.call(this,19)}o(t,"modules.daily.InviteRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.bind=function(e){this.sendString(2,e)},i.getAward=function(e){this.sendInt(3,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Qc=function(e){function t(){t.__super.call(this,27)}o(t,"modules.daily.DailyRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.signIn=function(){this.send(2)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),jc=function(e){function t(){t.__super.call(this,18)}o(t,"modules.daily.ActiveRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.active=function(e){this.sendString(2,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Zc=function(e){function t(){t.__super.call(this,62)}o(t,"modules.surprise.SurpriseRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.chose=function(e,t,i){this.sendIntArr(2,[e,t,i])},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Jc=function(e){function t(){t.__super.call(this,59)}o(t,"modules.captcha.CaptchaRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.answer=function(e){this.sendString(2,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),$c=function(e){function t(){t.__super.call(this),this.unitId.type=0}o(t,"modules.user.model.data.UserVO",e);var i=t.prototype;return i.recover=function(){0!=this.unitId.id&&(this.unitId.clear(),Hr.recover("UserVO",this.clear()))},t.build=function(){return Hr.getItemByClass("UserVO",t)},t.NAME="UserVO",t}(O),eu=function(e){function t(){t.__super.call(this,28)}o(t,"modules.gift.GiftRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.getLimitAward=function(e){this.sendInt(2,e)},i.dropCurrentLimit=function(e){this.sendInt(4,e)},i.checkSpGift=function(e){this.sendInt(3,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),tu=function(e){function t(){t.__super.call(this,31)}o(t,"modules.gift.GiftFutureRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.award=function(e,t){this.sendIntArr(2,[e,t])},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),iu=function(e){function t(){t.__super.call(this,35)}o(t,"modules.handbook.HandbookRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.lightEquip=function(e,t){this.sendProto(2,"LongInt",{i:e,L:t})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),nu=function(e){function t(){t.__super.call(this,44)}o(t,"modules.alcm.AlcmRequest",e);var i=t.prototype;return i.list=function(e){this.sendLong(0,e)},i.donate=function(e,t){this.sendProto(1,"LongInt",{L:e,i:t})},i.lineOn=function(e,t,i){var n=[{L:e,i:0},{L:t,i:i}];this.sendProto(2,"LongIntGroup",{arr:n})},i.lineOff=function(e,t){var i=[{L:e,i:0},{L:t,i:0}];this.sendProto(3,"LongIntGroup",{arr:i})},i.takeAward=function(){this.send(4)},i.takeAwardByGold=function(){this.send(7)},i.logs=function(e){this.sendLong(5,e)},i.lookVD=function(e){this.sendString(6,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),ou=function(e){function t(){t.__super.call(this,53)}o(t,"modules.samsara.SamsaraRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.move=function(e,t){this.sendIntArr(2,[e,t])},i.fight=function(e,t){this.sendIntArr(3,[e,t])},i.dropChalleng=function(){this.send(5)},i.challeng=function(e){this.sendInt(4,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),su=function(e){function t(){t.__super.call(this,13)}o(t,"modules.star.StarRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.upgrade=function(e,t,i,n){var o=[{L:t,i:e},{L:i,i:n?1:0}];this.sendProto(2,"LongIntGroup",{arr:o})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),ru=function(e){function t(){t.__super.call(this,50)}o(t,"modules.activitypayweek.ActivityPayWeekRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.takeAward=function(e){this.sendInt(2,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),au=function(e){function t(){t.__super.call(this,41)}o(t,"modules.alcboss.AlcBossRequest",e);var i=t.prototype;return i.queryBoss=function(){this.send(1)},i.queryPalyerBoss=function(){this.send(0)},i.listRank=function(){this.send(2)},i.listLog=function(){this.send(3)},i.fight=function(){this.send(4)},i.authorize=function(e){this.sendLong(5,e)},i.resetBoss=function(){this.send(6)},i.bossRank=function(){this.send(7)},i.takeAward=function(){this.send(8)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),lu=function(e){function t(){t.__super.call(this,65)}o(t,"modules.petpvp.PetPvpRequest",e);var i=t.prototype;return i.queryInfo=function(){this.send(1)},i.queryRoom=function(){this.send(2)},i.fight=function(e){this.sendLong(3,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),hu=function(e){function t(){t.__super.call(this,16)}o(t,"modules.pet.PetShopRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.fresh=function(){this.send(2)},i.freshFree=function(){this.send(8)},i.freshUseFruit=function(e){this.sendLong(5,e)},i.freshUseFruitAuto=function(e,t){this.sendProto(9,"LongInt",{L:e,i:t})},i.freshAuto=function(e){this.sendInt(3,e)},i.takeOne=function(e){this.sendInt(4,e)},i.freshUseQuality=function(e){this.sendLong(6,e)},i.takeByProp=function(e){this.sendLong(7,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),cu=function(e){function t(){t.__super.call(this,15)}o(t,"modules.pet.PetRequest",e);var i=t.prototype;return i.listAll=function(){this.send(1)},i.queryAttributes=function(e){this.sendLong(2,e)},i.drop=function(e){this.sendLong(3,e)},i.fightOn=function(e){this.sendLong(4,e)},i.feed=function(e){this.sendLong(5,e)},i.feedQualityDrug=function(e){this.sendLong(12,e)},i.feedGrowDrug=function(e){this.sendLong(17,e)},i.feedNatureDrug=function(e){this.sendLong(19,e)},i.feedOrangeDrug=function(e,t){this.sendProto(14,"LongStr",{L:e,str:t})},i.queryDressGhost=function(e){this.sendLong(6,e)},i.dressGhost=function(e,t,i){this.sendProto(7,"LongIntGroup",{arr:[{i:0,L:e},{i:i,L:t}]})},i.takeOffGhost=function(e,t){this.sendProto(8,"LongInt",{i:t,L:e})},i.mixGhost=function(e){this.sendLong(9,e)},i.unMixGhostPiece=function(e){this.sendLong(11,e)},i.decomposeGhost=function(e){this.sendLong(10,e)},i.twoPetMixOne=function(e,t,i){this.sendProto(15,"LongIntGroup",{arr:[{i:i,L:e},{i:0,L:t}]})},i.makeOrangeGhost=function(e,t,i){var n,o=[{i:0,L:e},{i:1,L:t}];for(var s in i)n=i[s],o.push(n);this.sendProto(16,"LongIntGroup",{arr:o})},i.chgGhostNature=function(e,t,i,n){var o=[{i:0,L:e},{i:0,L:t},{L:i,i:n}];this.sendProto(18,"LongIntGroup",{arr:o})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),uu=function(e){function t(){t.__super.call(this,57)}o(t,"modules.pet.PetSkillRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.upgrade=function(e){this.sendInt(2,e)},i.dress=function(e,t,i){var n=[{L:e,i:t},{L:0,i:i}];this.sendProto(3,"LongIntGroup",{arr:n})},i.recover=function(e){this.sendInt(4,e)},i.openOnce=function(e){this.sendLong(10,e)},i.openTenTime=function(e,t){this.sendProto(11,"LongInt",{L:e,i:t})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),du=function(e){function t(){t.__super.call(this,64)}o(t,"modules.pet.PetEquipRequest",e);var i=t.prototype;return i.queryInfo=function(){this.send(1)},i.identify=function(e){this.sendLong(2,e)},i.dress=function(e,t){this.sendProto(3,"LongInt",{L:e,i:t})},i.feed=function(e){var t,i=[];for(var n in e.keys)t=e.keys[n],i.push({L:t.id,i:t.countTmp});this.sendProto(4,"LongIntGroup",{arr:i})},i.feedOne=function(e,t){var i=[{L:e,i:t}];this.sendProto(4,"LongIntGroup",{arr:i})},i.upgradeFeed=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=[{L:e,i:1},{L:t,i:1},{L:i,i:1}];this.sendProto(5,"LongIntGroup",{arr:n})},i.refine=function(e,t){var i=[{L:e,i:1},{L:t,i:1}];this.sendProto(6,"LongIntGroup",{arr:i})},i.refineAuto=function(e,t){var i=[{L:e,i:1},{L:t,i:1}];this.sendProto(7,"LongIntGroup",{arr:i})},i.upgradeStar=function(e,t,i,n){var o=[{L:t,i:e},{L:i,i:n?1:0}];this.sendProto(8,"LongIntGroup",{arr:o})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),pu=function(e){function t(){t.__super.call(this,32)}o(t,"modules.team.TeamRequest",e);var i=t.prototype;return i.queryPlayerTeam=function(){this.send(1)},i.listTeam=function(e,t,i){this.sendIntArr(2,[e,t,i])},i.queryMemberInfo=function(e){this.sendLong(3,e)},i.create=function(e,t,i){this.sendProto(4,"Team",{dungeonId:e,desc:t,autoStart:i})},i.join=function(e){this.sendInt(5,e)},i.joinWithPwd=function(e,t){this.sendProto(15,"Team",{dungeonId:e,desc:t})},i.joinNpc=function(e,t){this.sendIntArr(6,[e,t])},i.leave=function(){this.send(7)},i.kick=function(e){this.sendLong(8,e)},i.changeLeader=function(e){this.sendLong(9,e)},i.changePos=function(e){var t,i=[];for(var n in e.keys){t=e.keys[n];var o=e.get(t);i.push({i:t,L:o})}this.sendProto(10,"LongIntGroup",{arr:i})},i.fight=function(){this.send(11)},i.queryTeam=function(){this.send(12)},i.buyTime=function(){this.send(13)},i.listLogs=function(){this.send(14)},i.chgDungeon=function(e){this.sendInt(16,e)},i.usePropAddTime=function(e){this.sendLong(90,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),fu=function(e){function t(){t.__super.call(this,45)}o(t,"modules.alcshop.AlcshopRequest",e);var i=t.prototype;return i.buy=function(e,t){this.sendProto(1,"LongInt",{i:t,L:e})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),_u=function(e){function t(){t.__super.call(this,30)}o(t,"modules.task.DailyTaskRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.finish=function(e){this.sendInt(2,e)},i.award=function(e){this.sendInt(3,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),mu=function(e){function t(){t.__super.call(this,10)}o(t,"modules.task.TaskRequest",e);var i=t.prototype;return i.shareGame=function(){this.send(1)},i.shareGame4VIP=function(){this.send(5)},i.shareGameTT=function(){this.send(9)},i.guidSmithyEmptyProp=function(){this.send(2)},i.query=function(){this.send(3)},i.getAward=function(e){this.sendInt(4,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),gu=function(e){function t(){t.__super.call(this,52)}o(t,"modules.meridian.MeridianRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.upgrade=function(e,t){this.sendIntArr(2,[e,t])},i.upgradeSp=function(e,t,i,n,o){this.sendProto(3,"LongIntGroup",{arr:[{L:e,i:t},{L:i,i:n},{L:o,i:0}]})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),vu=function(e){function t(){t.__super.call(this,26)}o(t,"modules.paytotal.PayTotalRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.getAward=function(e){this.sendInt(2,e)},i.resetDoublePay=function(){this.sendInt(3,1)},i.resetRebate=function(){this.sendInt(3,2)},i.resetStone=function(){this.sendInt(3,3)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),yu=function(e){function t(){t.__super.call(this,12)}o(t,"modules.arena.ArenaRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.queryRoom=function(){this.send(2)},i.fightOtherPlayer=function(e){this.sendLong(3,e)},i.collectStone=function(){this.send(4)},i.queryGlobalInfo=function(){this.send(12)},i.globalFight=function(e){this.sendInt(6,e)},i.globalFightByGold=function(e){this.sendInt(11,e)},i.globalTakeAwards=function(e){this.sendInt(7,e)},i.queryGlobalLogs=function(e){this.sendInt(8,e)},i.queryGlobalLogMime=function(){this.send(9)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),bu=function(e){function t(){t.__super.call(this,100)}o(t,"modules.goods.controller.GoodsRequest",e);var i=t.prototype;return i.list=function(e){this.sendInt(1,e)},i.sell=function(e,t){this.sendProto(3,"LongInt",{L:e,i:t})},i.sellProps=function(e,t){this.sendProto(8,"LongInt",{L:e,i:t})},i.dress=function(e,t){this.sendProto(2,"LongInt",{L:e,i:t})},i.beginClockBox=function(e){this.sendLong(4,e)},i.speedClockBoxByKey=function(e,t){this.sendProto(9,"LongLong",{a:e,b:t})},i.speedClockBox=function(e){this.sendLong(5,e)},i.speedClockBoxByVideo=function(e){this.sendLong(11,e)},i.openBox=function(e){this.sendLong(6,e)},i.addBoxSize=function(){this.send(7)},i.breakEquip=function(e){this.sendLong(10,e)},i.changePlayerName=function(e,t){this.sendProto(12,"LongStr",{L:e,str:t})},i.changePlayerNature=function(e,t){this.sendProto(16,"LongInt",{L:e,i:t})},i.changePlayerNatureExt=function(e){this.sendInt(20,e)},i.takePlayerNatureExtAwd=function(){this.send(21)},i.openProp=function(e,t){this.sendProto(13,"LongInt",{L:e,i:t})},i.mixPetFood=function(e,t){var i,n=[{L:0,i:t}];for(var o in e.keys){i=e.keys[o];var s=e.get(i);n.push({i:s,L:i})}this.sendProto(14,"LongIntGroup",{arr:n})},i.breakPetFood=function(e,t){this.sendProto(15,"LongInt",{L:e,i:t})},i.chgGraphNature=function(e){this.sendLong(17,e)},i.rebuildCoatSpecial=function(e,t){var i;i=e==t?[{L:e,i:2}]:[{L:e,i:1},{L:t,i:1}],this.sendProto(18,"LongIntGroup",{arr:i})},i.breakPetGhostSoul=function(e,t){this.sendProto(19,"LongInt",{L:e,i:t})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Eu=function(e){function t(){t.__super.call(this,60)}o(t,"modules.guard.GuardRequest",e);var i=t.prototype;return i.query=function(e){this.sendInt(1,e?1:0)},i.fresh=function(e){this.sendInt(2,e)},i.catchFight=function(e){this.sendLong(3,e)},i.revoltFight=function(e){this.sendLong(4,e)},i.changePos=function(e){this.sendIntArr(5,e)},i.takDonate=function(){this.send(6)},i.abandon=function(e){this.sendLong(7,e)},i.addRobat=function(e,t){this.sendIntArr(8,[e,t])},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),xu=function(e){function t(){t.__super.call(this),this._$1__id=++t._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,t._idResourcesMap[this.id]=this,this._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,Gh.currentResourceManager&&Gh.currentResourceManager.addResource(this)}o(t,"laya.resource.Resource",e);var n=t.prototype;return i.imps(n,{"laya.resource.IDispose":!0,"laya.resource.ICreateResource":!0}),n._setUrl=function(e){if(this._url!==e){var i;this._url&&(i=t._urlResourcesMap[this._url],i.splice(i.indexOf(this),1),0===i.length&&delete t._urlResourcesMap[this._url]),e&&(i=t._urlResourcesMap[e],i||(t._urlResourcesMap[e]=i=[]),i.push(this)),this._url=e}},n._getGroup=function(){return this._group},n._setGroup=function(e){if(this._group!==e){var i;this._group&&(i=t._groupResourcesMap[this._group],i.splice(i.indexOf(this),1),0===i.length&&delete t._groupResourcesMap[this._group]),e&&(i=t._groupResourcesMap[e],i||(t._groupResourcesMap[e]=i=[]),i.push(this)),this._group=e}},n._addReference=function(){this._referenceCount++},n._removeReference=function(){this._referenceCount--},n._clearReference=function(){this._referenceCount=0},n._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},n.recreateResource=function(){this.completeCreate()},n.disposeResource=function(){},n.activeResource=function(e){void 0===e&&(e=!1),this._lastUseFrameCount=Nr.loopCount,!this._destroyed&&this.__loaded&&(this._released||e)&&this.recreateResource()},n.releaseResource=function(e){return void 0===e&&(e=!1),!e&&this.lock?!1:!this._released||e?(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0):!1},n.onAsynLoaded=function(e,t,i){throw new Error("Resource: must override this function!")},n.destroy=function(){if(!this._destroyed){null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete t._idResourcesMap[this.id];var e;this._url&&(e=t._urlResourcesMap[this._url],e&&(e.splice(e.indexOf(this),1),0===e.length&&delete t._urlResourcesMap[this.url]),Tu.clearRes(this._url),this.__loaded||a.cancelLoadByUrl(this._url)),this._group&&(e=t._groupResourcesMap[this._group],e.splice(e.indexOf(this),1),0===e.length&&delete t._groupResourcesMap[this.url])}},n.completeCreate=function(){this._released=!1,this.event("recovered",this)},n.dispose=function(){this.destroy()},s(0,n,"group",function(){return this._getGroup()},function(e){this._setGroup(e)}),s(0,n,"url",function(){return this._url}),s(0,n,"destroyed",function(){return this._destroyed}),s(0,n,"resourceManager",function(){return this._resourceManager}),s(0,n,"released",function(){
return this._released}),s(0,n,"referenceCount",function(){return this._referenceCount}),s(0,n,"loaded",function(){return this.__loaded}),s(0,n,"_loaded",null,function(e){this.__loaded=e}),s(0,n,"memorySize",function(){return this._memorySize},function(e){var t=e-this._memorySize;this._memorySize=e,this.resourceManager&&this.resourceManager.addSize(t)}),s(0,n,"id",function(){return this._$1__id}),t.getResourceByID=function(e){return t._idResourcesMap[e]},t.getResourceByURL=function(e,i){return void 0===i&&(i=0),t._urlResourcesMap[e][i]},t.getResourceCountByURL=function(e){return t._urlResourcesMap[e].length},t.destroyUnusedResources=function(e){var i;if(e){var n=t._groupResourcesMap[e];if(n)for(var o=n.slice(),s=0,r=o.length;r>s;s++)i=o[s],i.lock||0!==i._referenceCount||i.destroy()}else for(var a in t._idResourcesMap)i=t._idResourcesMap[a],i.lock||0!==i._referenceCount||i.destroy()},t._uniqueIDCounter=0,t._idResourcesMap={},t._urlResourcesMap={},t._groupResourcesMap={},t}(l),Su=function(e){function t(){t.__super.call(this,200)}o(t,"modules.setting.SettingRequest",e);var i=t.prototype;return i.query=function(){this.sendInt(1,1),this.sendInt(3,4)},i.update=function(e){this.sendString(2,e.getInfo())},i.updateSkill=function(e){this.sendString(4,e.getHangSkills())},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),wu=function(e){function t(){t.__super.call(this,25)}o(t,"modules.achieve.AchieveRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.getAward=function(e){this.sendInt(2,e)},i.dressTitle=function(e){this.sendInt(3,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Cu=function(e){function t(){t.__super.call(this,47)}o(t,"modules.activityweek.ActivityWeekRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.takeAward=function(e){this.sendInt(2,e)},i.takeAwardEx=function(e){this.sendInt(3,e)},i.fastChg=function(e){this.sendInt(4,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Tu=function(e){function t(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,t.__super.call(this)}o(t,"laya.net.Loader",e);var n=t.prototype;return n.load=function(e,i,n,o,s){if(void 0===n&&(n=!0),void 0===s&&(s=!1),this._url=e,0===e.indexOf("data:image")?this._type=i="image":(this._type=i||(i=this.getTypeFromUrl(e)),e=Cs.formatURL(e)),this._cache=n,this._data=null,!s&&t.loadedMap[e])return this._data=t.loadedMap[e],this.event("progress",1),void this.event("complete",this._data);if(o&&t.setGroup(e,o),null!=t.parserMap[i])return this._customParse=!0,void(t.parserMap[i]instanceof laya.utils.Handler?t.parserMap[i].runWith(this):t.parserMap[i].call(null,this));if("image"===i||"htmlimage"===i||"nativeimage"===i)return this._loadImage(e);if("sound"===i)return this._loadSound(e);if("ttf"===i)return this._loadTTF(e);var r;switch(i){case"atlas":case"plf":r="json";break;case"font":r="xml";break;case"pkm":r="arraybuffer";break;default:r=i}t.preLoadedMap[e]?this.onLoaded(t.preLoadedMap[e]):(Or.onVVMiniGame||Or.onHWMiniGame?this._http=new Iu:this._http||(this._http=new Iu),this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded),this._http.send(e,null,"get",r))},n.getTypeFromUrl=function(e){var i=Dr.getFileExtension(e);return i?t.typeMap[i]:(console.warn("Not recognize the resources suffix",e),"text")},n._loadTTF=function(e){e=Cs.formatURL(e);var t=new Is;t.complete=h.create(this,this.onLoaded),t.load(e)},n._loadImage=function(e){function i(){n.onload=null,n.onerror=null,delete t.imgCache[e]}e=Cs.formatURL(e);var n,o=this,s=function(){i(),o.onLoaded(n)},r=function(){i(),o.event("error","Load image failed")};"nativeimage"===this._type?(n=new Or.window.Image,n.crossOrigin="",n.onload=s,n.onerror=r,n.src=e,t.imgCache[e]=n):new xw.create(e,{onload:s,onerror:r,onCreate:function(i){n=i,t.imgCache[e]=i}})},n._loadSound=function(e){function t(){n(),s.onLoaded(o)}function i(){n(),o.dispose(),s.event("error","Load sound failed")}function n(){o.offAll()}var o=new jh._soundClass,s=this;o.on("complete",this,t),o.on("error",this,i),o.load(e)},n.onProgress=function(e){"atlas"===this._type?this.event("progress",.3*e):this.event("progress",e)},n.onError=function(e){this.event("error",e)},n.onLoaded=function(e){var i=this._type;if("plf"==i)this.parsePLFData(e),this.complete(e);else if("image"===i){var n=new Vu(e);n.url=this._url,this.complete(n)}else if("sound"===i||"htmlimage"===i||"nativeimage"===i)this.complete(e);else if("atlas"===i){if(!e.src&&!e._setContext){if(!this._data){if(this._data=e,e.meta&&e.meta.image)for(var o=e.meta.image.split(","),s=this._url.indexOf("/")>=0?"/":"\\",r=this._url.lastIndexOf(s),a=r>=0?this._url.substr(0,r+1):"",l=0,h=o.length;h>l;l++)o[l]=a+o[l];else o=[this._url.replace(".json",".png")];o.reverse(),e.toLoads=o,e.pics=[]}return this.event("progress",.3+1/o.length*.6),this._loadImage(Cs.formatURL(o.pop()))}if(this._data.pics.push(e),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var c=this._data.frames,u=this._url.split("?")[0],d=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:u.substring(0,u.lastIndexOf("."))+"/",p=this._data.pics,f=Cs.formatURL(this._url),_=t.atlasMap[f]||(t.atlasMap[f]=[]);_.dir=d;var m=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale){m=parseFloat(this._data.meta.scale);for(var g in c){var v=c[g],y=p[v.frame.idx?v.frame.idx:0],b=Cs.formatURL(d+g);y.scaleRate=m;var E;E=Vu.create(y,v.frame.x,v.frame.y,v.frame.w,v.frame.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.sourceSize.w,v.sourceSize.h),t.cacheRes(b,E),E.url=b,_.push(b)}}else for(g in c)v=c[g],y=p[v.frame.idx?v.frame.idx:0],b=Cs.formatURL(d+g),t.cacheRes(b,Vu.create(y,v.frame.x,v.frame.y,v.frame.w,v.frame.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.sourceSize.w,v.sourceSize.h)),t.loadedMap[b].url=b,_.push(b);delete this._data.pics,this.complete(this._data)}else if("font"==i){if(!e.src)return this._data=e,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var x=new kh;x.parseFont(this._data,e);var S=this._url.split(".fnt")[0].split("/"),w=S[S.length-1];fS.registerBitmapFont(w,x),this._data=x,this.complete(this._data)}else if("pkm"==i){var C=xw.create(e,this._url),T=new Vu(C);T.url=this._url,this.complete(T)}else this.complete(e)},n.parsePLFData=function(e){var i,n,o;for(i in e)switch(o=e[i],i){case"json":case"text":for(n in o)t.preLoadedMap[Cs.formatURL(n)]=o[n];break;default:for(n in o)t.preLoadedMap[Cs.formatURL(n)]=o[n]}},n.complete=function(e){this._data=e,this._customParse?this.event("loaded",e instanceof Array?[e]:e):(t._loaders.push(this),t._isWorking||t.checkNext())},n.endLoad=function(e){e&&(this._data=e),this._cache&&t.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},s(0,n,"data",function(){return this._data}),s(0,n,"cache",function(){return this._cache}),s(0,n,"type",function(){return this._type}),s(0,n,"url",function(){return this._url}),t.checkNext=function(){t._isWorking=!0;for(var e=Or.now(),n=e;t._startIndex<t._loaders.length;)if(n=Or.now(),t._loaders[t._startIndex].endLoad(),t._startIndex++,Or.now()-e>t.maxTimeOut)return console.warn("loader callback cost a long time:"+(Or.now()-e)+" url="+t._loaders[t._startIndex-1].url),void i.timer.frameOnce(1,null,t.checkNext);t._loaders.length=0,t._startIndex=0,t._isWorking=!1},t.clearRes=function(e,i){void 0===i&&(i=!1),e=Cs.formatURL(e);var n=t.getAtlas(e);if(n){for(var o=0,s=n.length;s>o;o++){var r=n[o],a=t.getRes(r);delete t.loadedMap[r],a&&a.destroy(i)}n.length=0,delete t.atlasMap[e],delete t.loadedMap[e]}else{var l=t.loadedMap[e];l&&(delete t.loadedMap[e],l instanceof laya.resource.Texture&&l.bitmap&&l.destroy(i))}},t.clearTextureRes=function(e){e=Cs.formatURL(e);var t=laya.net.Loader.getAtlas(e),i=t&&t.length>0?laya.net.Loader.getRes(t[0]):laya.net.Loader.getRes(e);i&&i.bitmap&&(Ns.isConchApp&&!Ns.isConchWebGL?i.bitmap.source.releaseTexture&&i.bitmap.source.releaseTexture():null==i.bitmap._atlaser&&i.bitmap.releaseResource(!0))},t.getRes=function(e){return t.loadedMap[Cs.formatURL(e)]},t.getAtlas=function(e){return t.atlasMap[Cs.formatURL(e)]},t.cacheRes=function(e,i){e=Cs.formatURL(e),null!=t.loadedMap[e]?console.warn("Resources already exist,is repeated loading:",e):t.loadedMap[e]=i},t.setGroup=function(e,i){t.groupMap[i]||(t.groupMap[i]=[]),t.groupMap[i].push(e)},t.clearResByGroup=function(e){if(t.groupMap[e]){var i=t.groupMap[e],n=0,o=i.length;for(n=0;o>n;n++)t.clearRes(i[n]);i.length=0}},t.TEXT="text",t.JSON="json",t.XML="xml",t.BUFFER="arraybuffer",t.IMAGE="image",t.SOUND="sound",t.ATLAS="atlas",t.FONT="font",t.TTF="ttf",t.PLF="plf",t.PKM="pkm",t.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf",ani:"json",sk:"arraybuffer"},t.parserMap={},t.groupMap={},t.maxTimeOut=100,t.loadedMap={},t.preLoadedMap={},t.atlasMap={},t._loaders=[],t._isWorking=!1,t._startIndex=0,t.imgCache={},t}(l),Iu=function(e){function t(){this._responseType=null,this._data=null,t.__super.call(this),this._http=new Or.window.XMLHttpRequest}o(t,"laya.net.HttpRequest",e);var i=t.prototype;return i.send=function(e,i,n,o,s){void 0===n&&(n="get"),void 0===o&&(o="text"),this._responseType=o,this._data=null,(Or.onQGMiniGame||Or.onVVMiniGame||Or.onQQMiniGame||Or.onBDMiniGame||Or.onBLMiniGame||Or.onAlipayMiniGame||Or.onHWMiniGame||Or.onTTMiniGame||Or.onTBMiniGame)&&(e=t._urlEncode(e));var r=this,a=this._http;if(a.open(n,e,!0),s)for(var l=0;l<s.length;l++)a.setRequestHeader(s[l++],s[l]);else Ns.isConchApp||(i&&"string"!=typeof i?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));var h="arraybuffer"!==o?"text":"arraybuffer";a.responseType=h,a.dataType&&(a.dataType=h),a.onerror=function(e){r._onError(e)},a.onabort=function(e){r._onAbort(e)},a.onprogress=function(e){r._onProgress(e)},a.onload=function(e){r._onLoad(e)},Or.onBLMiniGame&&Or.onAndroid&&!i&&(i={}),a.send(i)},i._onProgress=function(e){e&&e.lengthComputable&&this.event("progress",e.loaded/e.total)},i._onAbort=function(e){this.error("Request was aborted by user")},i._onError=function(e){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},i._onLoad=function(e){var t=this._http,i=void 0!==t.status?t.status:200;200===i||204===i||0===i?this.complete():this.error("["+t.status+"]"+t.statusText+":"+t.responseURL)},i.error=function(e){this.clear(),this.event("error",e)},i.complete=function(){this.clear();var e=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=Dr.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(t){e=!1,this.error(t.message)}e&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},i.clear=function(){var e=this._http;e.onerror=e.onabort=e.onprogress=e.onload=null},s(0,i,"data",function(){return this._data}),s(0,i,"http",function(){return this._http}),s(0,i,"url",function(){return this._http.responseURL}),n(t,["_urlEncode",function(){return this._urlEncode=encodeURI}]),t}(l),Au=function(e){function t(){this.retryNum=1,this.retryDelay=0,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},t.__super.call(this);for(var e=0;e<this._maxPriority;e++)this._resInfos[e]=[]}var s;o(t,"laya.net.LoaderManager",e);var r=t.prototype;return r.create=function(e,t,i,n,o,s,r,a){function l(e,i){p++,e.progress=1,p===d&&t&&t.run()}function c(e,t){e.progress=t;for(var i=0,n=0;d>n;n++){var o=u[n];i+=o.progress}var s=i/d;f.runWith(s)}if(void 0===s&&(s=1),void 0===r&&(r=!0),e instanceof Array){var u=e,d=u.length,p=0;if(i)var f=h.create(i.caller,i.method,i.args,!1);for(var _=0;d>_;_++){var m=u[_];"string"==typeof m&&(m=u[_]={url:m}),m.progress=0}for(_=0;d>_;_++){m=u[_];var g=i?h.create(null,c,[m],!1):null,v=i||t?h.create(null,l,[m]):null;this._create(m.url,v,g,m.clas||n,m.params||o,m.priority||s,r,m.group||a)}return!0}return this._create(e,t,i,n,o,s,r,a)},r._create=function(e,n,o,s,r,a,l,c){function u(t){p&&!p.destroyed&&t&&p.onAsynLoaded.call(p,e,t,r),n&&n.run(),i.loader.event(e)}void 0===a&&(a=1),void 0===l&&(l=!0);var d=Cs.formatURL(e),p=this.getRes(d);if(p)!p.hasOwnProperty("loaded")||p.loaded?(o&&o.runWith(1),n&&n.run()):n&&i.loader._createListener(e,n.caller,n.method,n.args,!0,!1);else{var f=Dr.getFileExtension(e),_=t.createMap[f];if(!_)throw new Error("LoaderManager:unknown file("+e+") extension with: "+f+".");s||(s=_[0]);var m=_[1];"atlas"==f?this.load(e,n,o,m,a,l):(s===Vu&&(m="htmlimage"),p=s?new s:null,p.hasOwnProperty("_loaded")&&(p._loaded=!1),p._setUrl(e),c&&p._setGroup(c),this._createLoad(p,e,h.create(null,u),o,m,a,!1,c,!0),l&&this.cacheRes(d,p))}return p},r.load=function(e,n,o,r,a,l,h,c){var u=this;if(void 0===a&&(a=1),void 0===l&&(l=!0),void 0===c&&(c=!1),null==e||""==e||" "==e)return this;if(e instanceof Array)return this._loadAssets(e,n,o,r,a,l,h);var d=Tu.getRes(e);if(null!=d)i.timer.frameOnce(1,null,function(){o&&o.runWith(1),n&&n.runWith(d),u._loaderCount||u.event("complete")});else{var p=t._resMap[e];p?(n&&p._createListener("complete",n.caller,n.method,n.args,!1,!1),o&&p._createListener("progress",o.caller,o.method,o.args,!1,!1)):(p=this._infoPool.length?this._infoPool.pop():new s,p.url=e,p.type=r,p.cache=l,p.group=h,p.ignoreCache=c,n&&p.on("complete",n.caller,n.method,n.args),o&&p.on("progress",o.caller,o.method,o.args),t._resMap[e]=p,a=a<this._maxPriority?a:this._maxPriority-1,this._resInfos[a].push(p),this._next())}return this},r._createLoad=function(e,n,o,r,a,l,h,c,u){var d=this;if(void 0===l&&(l=1),void 0===h&&(h=!0),void 0===u&&(u=!1),n instanceof Array)return this._loadAssets(n,o,r,a,l,h,c);var p=Tu.getRes(n);if(null!=p)i.timer.frameOnce(1,null,function(){r&&r.runWith(1),o&&o.runWith(p),d._loaderCount||d.event("complete")});else{var f=t._resMap[n];f?(o&&f._createListener("complete",o.caller,o.method,o.args,!1,!1),r&&f._createListener("progress",r.caller,r.method,r.args,!1,!1)):(f=this._infoPool.length?this._infoPool.pop():new s,f.url=n,f.clas=e,f.type=a,f.cache=h,f.group=c,f.ignoreCache=u,o&&f.on("complete",o.caller,o.method,o.args),r&&f.on("progress",r.caller,r.method,r.args),t._resMap[n]=f,l=l<this._maxPriority?l:this._maxPriority-1,this._resInfos[l].push(f),this._next())}return this},r._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var e=0;e<this._maxPriority;e++)for(var t=this._resInfos[e];t.length>0;){var i=t.shift();if(i)return this._doLoad(i)}this._loaderCount||this.event("complete")}},r._doLoad=function(e){function t(t){i.offAll(),i._data=null,i._customParse=!1,n._loaders.push(i),n._endLoad(e,t instanceof Array?[t]:t),n._loaderCount--,n._next()}this._loaderCount++;var i=this._loaders.length?this._loaders.pop():new Tu;i.on("complete",null,t),i.on("progress",null,function(t){e.event("progress",t)}),i.on("error",null,function(e){t(null)});var n=this;i._class=e.clas,i.load(e.url,e.type,e.cache,e.group,e.ignoreCache)},r._endLoad=function(e,n){var o=e.url;if(null==n){var s=this._failRes[o]||0;if(s<this.retryNum)return console.warn("[warn]Retry to load:",o),this._failRes[o]=s+1,void i.timer.once(this.retryDelay,this,this._addReTry,[e],!1);console.warn("[error]Failed to load:",o),this.event("error",o)}this._failRes[o]&&(this._failRes[o]=0),delete t._resMap[o],e.event("complete",n),e.offAll(),this._infoPool.push(e)},r._addReTry=function(e){this._resInfos[this._maxPriority-1].push(e),this._next()},r.clearRes=function(e,t){void 0===t&&(t=!1),Tu.clearRes(e,t)},r.getRes=function(e){return Tu.getRes(e)},r.cacheRes=function(e,t){Tu.cacheRes(e,t)},r.clearTextureRes=function(e){Tu.clearTextureRes(e)},r.setGroup=function(e,t){Tu.setGroup(e,t)},r.clearResByGroup=function(e){Tu.clearResByGroup(e)},r.clearUnLoaded=function(){for(var e=0;e<this._maxPriority;e++){for(var i=this._resInfos[e],n=i.length-1;n>-1;n--){var o=i[n];o&&(o.offAll(),this._infoPool.push(o))}i.length=0}this._loaderCount=0,t._resMap={}},r.cancelLoadByUrls=function(e){if(e)for(var t=0,i=e.length;i>t;t++)this.cancelLoadByUrl(e[t])},r.cancelLoadByUrl=function(e){for(var i=0;i<this._maxPriority;i++)for(var n=this._resInfos[i],o=n.length-1;o>-1;o--){var s=n[o];s&&s.url===e&&(n[o]=null,s.offAll(),this._infoPool.push(s))}t._resMap[e]&&delete t._resMap[e]},r._loadAssets=function(e,t,i,n,o,s,r){function a(e,i){u++,e.progress=1,i||(f=!1),u===c&&t&&t.runWith(f)}function l(e,t){if(null!=i){e.progress=t;for(var n=0,o=0;o<p.length;o++){var s=p[o];n+=s.size*s.progress}var r=n/d;i.runWith(r)}}void 0===o&&(o=1),void 0===s&&(s=!0);for(var c=e.length,u=0,d=0,p=[],f=!0,_=0;c>_;_++){var m=e[_];"string"==typeof m&&(m={url:m,type:n,size:1,priority:o}),m.size||(m.size=1),m.progress=0,d+=m.size,p.push(m);var g=i?h.create(null,l,[m],!1):null,v=t||i?h.create(null,a,[m]):null;this.load(m.url,v,g,m.type,m.priority||1,s,m.group||r)}return this},t.cacheRes=function(e,t){Tu.cacheRes(e,t)},t._resMap={},n(t,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),t.__init$=function(){s=function(e){function t(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,t.__super.call(this)}return o(t,"",e),t}(l)},t}(l),Nu=function(e){function t(){t.__super.call(this,66)}o(t,"modules.lottery.LotteryRequest",e);var i=t.prototype;return i.info=function(){this.send(1)},i.draw=function(e){this.sendInt(2,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Pu=function(e){function t(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.completeHandler=null,t.__super.call(this)}o(t,"laya.media.SoundChannel",e);var i=t.prototype;return i.play=function(){},i.stop=function(){this.completeHandler&&this.completeHandler.run()},i.pause=function(){},i.resume=function(){},i.__runComplete=function(e){e&&e.run()},s(0,i,"duration",function(){return 0}),s(0,i,"position",function(){return 0}),s(0,i,"volume",function(){return 1},function(e){}),t}(l),Ru=function(e){function t(){t.__super.call(this)}o(t,"laya.hw.mini.MiniLoader",e);var i=t.prototype;return i.load=function(e,i,n,o,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var r=this;if(r._url=e,0===e.indexOf("data:image")?r._type=i="image":r._type=i||(i=r.getTypeFromUrl(e)),r._cache=n,r._data=null,!s&&Tu.loadedMap[Cs.formatURL(e)])return r._data=Tu.loadedMap[Cs.formatURL(e)],this.event("progress",1),void this.event("complete",r._data);if(null!=Tu.parserMap[i])return r._customParse=!0,void(Tu.parserMap[i]instanceof laya.utils.Handler?Tu.parserMap[i].runWith(this):Tu.parserMap[i].call(null,this));var a=Ms.getUrlEncode(e,i),l=Dr.getFileExtension(e);if(-1!=t._fileTypeArr.indexOf(l)||"image"==i)Ms.EnvConfig.load.call(this,e,i,n,o,s);else{if(Ms.isZiYu&&!Os.ziyuFileData[e]&&(e=Cs.formatURL(e)),Ms.isZiYu&&Os.ziyuFileData[e]){var c=Os.ziyuFileData[e];return void r.onLoaded(c)}if(Os.getFileInfo(Cs.formatURL(e))){var u=Os.getFileInfo(Cs.formatURL(e));u.encoding=null==u.encoding?"utf8":u.encoding;var d=Os.getFileNativePath(u.md5);Os.readFile(d,u.encoding,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),Cs.formatURL(e))}else{if(Os.isLocalNativeFile(e)){if(Ms.subNativeFiles&&0==Ms.subNativeheads.length)for(var p in Ms.subNativeFiles){var f=Ms.subNativeFiles[p];Ms.subNativeheads=Ms.subNativeheads.concat(f);for(var _=0;_<f.length;_++)Ms.subMaps[f[_]]=p+"/"+f[_]}if(Ms.subNativeFiles&&-1!=e.indexOf("/")){var m=e.split("/")[0]+"/";if(m&&-1!=Ms.subNativeheads.indexOf(m)){var g=Ms.subMaps[m];e=e.replace(m,g)}}return void("sound"==i?r._loadSound(e):Os.read(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r])))}var v=e,y=Cs.formatURL(e);-1!=y.indexOf(Ms.window.hbs.env.USER_DATA_PATH)||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||Ms.AutoCacheDownFile?(u=Os.getFileInfo(e),u?(u.encoding=null==u.encoding?"utf8":u.encoding,Os.readFile(u.url,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e)):"image"==r.type||"htmlimage"==r.type?Ms.EnvConfig.load.call(r,e,i,n,o,s):(e=Cs.formatURL(e),"image"!=i&&(-1==e.indexOf("http://")&&-1==e.indexOf("https://")||Os.isLocalNativeFile(e))?Os.readFile(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e):Os.downFiles(encodeURI(e),a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e,!0))):"sound"==i?r._loadSound(e):Ms.EnvConfig.load.call(r,v,i,n,o,s)}}},i._loadSound=function(e){var i,n=this;if(Os.isLocalNativeFile(e)){var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=e;""==o||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(i=e.split(o)[1]),i||(i=s),laya.hw.mini.MiniLoader.onDownLoadCallBack(e,n,0)}else{var r=Cs.formatURL(e);!Os.isLocalNativeFile(e)&&-1==r.indexOf("http://")&&-1==r.indexOf("https://")||-1!=r.indexOf(Ms.window.hbs.env.USER_DATA_PATH)?laya.hw.mini.MiniLoader.onDownLoadCallBack(e,n,0):Os.downOtherFiles(encodeURI(r),h.create(t,laya.hw.mini.MiniLoader.onDownLoadCallBack,[r,n]),r)}},t.onDownLoadCallBack=function(e,t,i,n){if(i)t.event("error","Load sound failed");else{var o;if(Ms.autoCacheFile)if(n)o=n;else if(Os.isLocalNativeFile(e)){var s=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,r=e;""==s||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(o=e.split(s)[1]),o||(o=r)}else{var a=Os.getFileInfo(e);if(a&&a.md5){var l=a.md5;o=Os.getFileNativePath(l)}else o=e}e=o;var h=new jh._soundClass;h.load(encodeURI(e)),t.onLoaded(h)}},t.onReadNativeCallBack=function(e,t,i,n,o,s,r,a,l){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=0),a)1==a&&(console.log("-----------本地加载失败，尝试外网加载----url:"+t),Ms.EnvConfig.load.call(r,t,i,n,o,s));else{var h;h="json"==i||"atlas"==i?Ms.getJson(l.data):"xml"==i?Dr.parseXMLFromString(l.data):l.data,!Ms.isZiYu&&Ms.isPosMsgYu&&"arraybuffer"!=i&&Ms.window.hbs&&Ms.window.hbs.postMessage({url:t,data:h,isLoad:"filedata"}),r.onLoaded(h)}},n(t,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),t}(l),Lu=function(e){function t(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,t.__super.call(this)}o(t,"laya.hw.mini.MiniSound",e);var i=t.prototype;return i.load=function(e){if(Os.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=Os.loadPath)e=e.split(Os.loadPath)[1];else{var i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;""!=i&&(e=e.split(i)[1])}}else e=Cs.formatURL(e);if(this.url=e,this.readyUrl=e,t._audioCache[this.readyUrl])return void this.event("complete");if(Ms.autoCacheFile&&Os.getFileInfo(e))this.onDownLoadCallBack(e,0);else if(Ms.autoCacheFile)if(Os.isLocalNativeFile(e)){i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;var n=e;if(""!=i&&(e=e.split(i)[1]),e||(e=n),Ms.subNativeFiles&&0==Ms.subNativeheads.length)for(var o in Ms.subNativeFiles){var s=Ms.subNativeFiles[o];Ms.subNativeheads=Ms.subNativeheads.concat(s);for(var r=0;r<s.length;r++)Ms.subMaps[s[r]]=o+"/"+s[r]}if(Ms.subNativeFiles&&-1!=e.indexOf("/")){var a=e.split("/")[0]+"/";if(a&&-1!=Ms.subNativeheads.indexOf(a)){var l=Ms.subMaps[a];e=e.replace(a,l)}}this.onDownLoadCallBack(e,0)}else Os.downOtherFiles(encodeURI(e),h.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)},i.onDownLoadCallBack=function(e,i){if(i)this.event("error");else{var n;if(Ms.autoCacheFile){if(Os.isLocalNativeFile(e)){var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=e;""==o||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(n=e.split(o)[1]),n||(n=s)}else{var r=Os.getFileInfo(e);if(r&&r.md5){var a=r.md5;n=Os.getFileNativePath(a)}else n=encodeURI(e)}this._sound=t._createSound(),this._sound.src=this.url=n}else this._sound=t._createSound(),this._sound.src=encodeURI(e);this._sound.onCanplay(t.bindToThis(this.onCanPlay,this)),this._sound.onError(t.bindToThis(this.onError,this))}},i.onError=function(e){this.event("error"),this._sound.offError(null)},i.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay(null)},i.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(this.url==jh._tMusic?(t._musicAudio||(t._musicAudio=t._createSound()),n=t._musicAudio):n=t._audioCache[this.readyUrl]?t._audioCache[this.readyUrl]._sound:t._createSound(),Ms.autoCacheFile&&Os.getFileInfo(this.url)){var o=Os.getFileInfo(this.url),s=o.md5;n.src=this.url=Os.getFileNativePath(s)}else n.src=encodeURI(this.url);var r=new dx(n,this);return r.url=this.url,r.loops=i,r.loop=0===i,r.startTime=e,r.play(),jh.addChannel(r),r},i.dispose=function(){var e=t._audioCache[this.readyUrl];e&&(e.src="",e._sound&&(e._sound.destroy(),e._sound=null,e=null),delete t._audioCache[this.readyUrl]),this._sound&&(this._sound.destroy(),this._sound=null),this.url=this.readyUrl=null},s(0,i,"duration",function(){return this._sound.duration}),t._createSound=function(){return t._id++,Ms.window.hbs.createInnerAudioContext()},t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t._musicAudio=null,t._id=0,t._audioCache={},t}(l),Ou=function(e){function t(){t.__super.call(this,56)}o(t,"modules.demon.DemonRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.takeDaily=function(){this.send(2)},i.buildOne=function(e,t){this.sendProto(3,"LongInt",{L:e,i:t})},i.upgrade=function(e,t,i){var n,o=[{L:e,i:1},{L:i,i:0}];for(var s in t.keys){n=t.keys[s];var r=t.get(n);o.push({L:n,i:r})}this.sendProto(4,"LongIntGroup",{arr:o})},i.dress=function(e,t){this.sendProto(5,"LongInt",{L:e,i:t})},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Mu=function(e){function t(){t.__super.call(this)}o(t,"laya.mi.mini.MiniLoader",e,"MiniLoader$2");var i=t.prototype;return i.load=function(e,i,n,o,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var r=this;if(r._url=e,0===e.indexOf("data:image")?r._type=i="image":r._type=i||(i=r.getTypeFromUrl(e)),r._cache=n,r._data=null,!s&&Tu.loadedMap[Cs.formatURL(e)])return r._data=Tu.loadedMap[Cs.formatURL(e)],this.event("progress",1),void this.event("complete",r._data);if(null!=Tu.parserMap[i])return r._customParse=!0,void(Tu.parserMap[i]instanceof laya.utils.Handler?Tu.parserMap[i].runWith(this):Tu.parserMap[i].call(null,this));var a=ks.getUrlEncode(e,i),l=Dr.getFileExtension(e);if(-1!=t._fileTypeArr.indexOf(l)||"image"==i)ks.EnvConfig.load.call(this,e,i,n,o,s);else{if(ks.isZiYu&&!Vs.ziyuFileData[e]&&(e=Cs.formatURL(e)),ks.isZiYu&&Vs.ziyuFileData[e]){var c=Vs.ziyuFileData[e];return void r.onLoaded(c)}if(Vs.getFileInfo(Cs.formatURL(e))){var u=Vs.getFileInfo(Cs.formatURL(e));u.encoding=null==u.encoding?"utf8":u.encoding;var d=Vs.getFileNativePath(u.md5);Vs.readFile(d,u.encoding,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),Cs.formatURL(e))}else{if(Vs.isLocalNativeFile(e)){if(ks.subNativeFiles&&0==ks.subNativeheads.length)for(var p in ks.subNativeFiles){var f=ks.subNativeFiles[p];ks.subNativeheads=ks.subNativeheads.concat(f);for(var _=0;_<f.length;_++)ks.subMaps[f[_]]=p+"/"+f[_]}if(ks.subNativeFiles&&-1!=e.indexOf("/")){var m=e.split("/")[0]+"/";if(m&&-1!=ks.subNativeheads.indexOf(m)){var g=ks.subMaps[m];e=e.replace(m,g)}}return void Vs.read(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]))}var v=e,y=Cs.formatURL(e);-1!=y.indexOf(ks.window.qg.env.USER_DATA_PATH)||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||ks.AutoCacheDownFile?(u=Vs.getFileInfo(e),u?(u.encoding=null==u.encoding?"utf8":u.encoding,Vs.readFile(u.url,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e)):"image"==r.type||"htmlimage"==r.type?ks.EnvConfig.load.call(r,e,i,n,o,s):(e=Cs.formatURL(e),"image"!=i&&(-1==e.indexOf("http://")&&-1==e.indexOf("https://")||Vs.isLocalNativeFile(e))?Vs.readFile(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e):Vs.downFiles(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e,n))):ks.EnvConfig.load.call(r,v,i,n,o,s)}}},t.onReadNativeCallBack=function(e,t,i,n,o,s,r,a,l){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=0),a)1==a&&ks.EnvConfig.load.call(r,t,i,n,o,s);else{var h;h="json"==i||"atlas"==i?ks.getJson(l.data):"xml"==i?Dr.parseXMLFromString(l.data):l.data,!ks.isZiYu&&ks.isPosMsgYu&&"arraybuffer"!=i&&ks.window.kg.postMessage({url:t,data:h,isLoad:"filedata"}),r.onLoaded(h)}},n(t,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),t}(l),Du=function(e){function t(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,t.__super.call(this)}o(t,"laya.mi.mini.MiniSound",e,"MiniSound$2");var i=t.prototype;return i.load=function(e){if(Vs.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=Vs.loadPath)e=e.split(Vs.loadPath)[1];else{var i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;""!=i&&(e=e.split(i)[1])}}else e=Cs.formatURL(e);if(this.url=e,this.readyUrl=e,t._audioCache[this.readyUrl])return void this.event("complete");if(ks.autoCacheFile&&Vs.getFileInfo(e))this.onDownLoadCallBack(e,0);else if(ks.autoCacheFile)if(Vs.isLocalNativeFile(e)){i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;var n=e;if(""!=i&&(e=e.split(i)[1]),e||(e=n),ks.subNativeFiles&&0==ks.subNativeheads.length)for(var o in ks.subNativeFiles){var s=ks.subNativeFiles[o];ks.subNativeheads=ks.subNativeheads.concat(s);for(var r=0;r<s.length;r++)ks.subMaps[s[r]]=o+"/"+s[r]}if(ks.subNativeFiles&&-1!=e.indexOf("/")){var a=e.split("/")[0]+"/";if(a&&-1!=ks.subNativeheads.indexOf(a)){var l=ks.subMaps[a];e=e.replace(a,l)}}this.onDownLoadCallBack(e,0)}else Vs.downOtherFiles(e,h.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)},i.onDownLoadCallBack=function(e,i){if(i)this.event("error");else{var n;if(ks.autoCacheFile){var o=Vs.getFileInfo(e);if(o&&o.md5){var s=o.md5;n=Vs.getFileNativePath(s)}else n=e;this._sound=t._createSound(),this._sound.src=this.url=n}else this._sound=t._createSound(),this._sound.src=e;this._sound.oncanplay(t.bindToThis(this.onCanPlay,this)),this._sound.onerror(t.bindToThis(this.onError,this))}},i.onError=function(e){this.event("error"),this._sound.offerror&&this._sound.offerror(null)},i.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offcanplay&&this._sound.offcanplay(null)},i.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(this.url==jh._tMusic?(t._musicAudio||(t._musicAudio=t._createSound()),n=t._musicAudio):n=t._audioCache[this.readyUrl]?t._audioCache[this.readyUrl]._sound:t._createSound(),!n)return null;if(ks.autoCacheFile&&Vs.getFileInfo(this.url)){var o=Vs.getFileInfo(this.url),s=o.md5;n.src=this.url=Vs.getFileNativePath(s)}else n.src=this.url;var r=new fx(n,this);return r.url=this.url,r.loops=i,r.loop=0===i,r.startTime=e,r.play(),jh.addChannel(r),r},i.dispose=function(){var e=t._audioCache[this.readyUrl];e&&(e.src="",e._sound&&(e._sound.destroy&&e._sound.destroy(),e._sound=null,e=null),delete t._audioCache[this.readyUrl])},s(0,i,"duration",function(){return this._sound.duration}),t._createSound=function(){return t._id++,ks.window.qg.createInnerAudioContext()},t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t._musicAudio=null,t._id=0,t._audioCache={},t}(l),ku=function(e){function t(){t.__super.call(this,14)}o(t,"modules.look.LookRequest",e);var i=t.prototype;return i.lookInfo=function(e){this.sendLong(1,e)},i.lookEquips=function(e){this.sendLong(2,e)},i.lookStar=function(e){this.sendLong(3,e)},i.lookBone=function(e){this.sendLong(4,e)},i.lookPet=function(e){this.sendLong(5,e)},i.lookCulture=function(e){this.sendLong(6,e)},i.lookBlood=function(e){this.sendLong(7,e)},i.lookHandbook=function(e){this.sendLong(8,e);
},i.lookPearl=function(e){this.sendLong(9,e)},i.lookMeridian=function(e){this.sendLong(10,e)},i.lookPetEquip=function(e){this.sendLong(11,e)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Bu=function(e){function t(){t.__super.call(this,23)}o(t,"modules.culture.CultureRequest",e);var i=t.prototype;return i.query=function(){this.send(1)},i.upgrade=function(){this.send(2)},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance},net.ARequest._$SET_instance),t._instance=null,t}(u),Vu=function(t){function n(e,t){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,n.__super.call(this),e&&null!=e._addReference&&e._addReference(),this.setTo(e,t)}o(n,"laya.resource.Texture",t);var r=n.prototype;return r._setUrl=function(e){this.url=e},r.setTo=function(t,i){if(t instanceof e.HTMLElement){var o=GS.create("2D",t);this.bitmap=o}else this.bitmap=t;if(this.uv=i||n.DEF_UV,t){this._w=t.width,this._h=t.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=this._w>0;var s=this;if(this._loaded)a.addToAtlas&&a.addToAtlas(s);else{var r=t;r instanceof laya.resource.HTMLImage&&r.image&&r.image.addEventListener("load",function(e){a.addToAtlas&&a.addToAtlas(s)},!1)}}},r.active=function(){this.bitmap&&this.bitmap.activeResource()},r.destroy=function(e){if(void 0===e&&(e=!1),this.bitmap&&this.bitmap.referenceCount>0){var t=this.bitmap;e?(Ns.isConchApp&&t.source&&t.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,t.dispose(),t._clearReference()):(t._removeReference(),0==t.referenceCount&&(Ns.isConchApp&&t.source&&t.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,t.dispose())),this.url&&this===i.loader.getRes(this.url)&&i.loader.clearRes(this.url,e),this._loaded=!1}},r.load=function(e){var t=this;this._loaded=!1,e=Cs.customFormat(e);var i=this.bitmap||(this.bitmap=xw.create(e));i&&i._addReference();var n=this;i.onload=function(){i.onload=null,n._loaded=!0,t.sourceWidth=t._w=i.width,t.sourceHeight=t._h=i.height,n.event("loaded",this),a.addToAtlas&&a.addToAtlas(n)}},r.addTextureToAtlas=function(e){a.addTextureToAtlas(this)},r.getPixels=function(e,t,i,n){if(Ns.isConchApp){var o=this.bitmap;if(o.source&&o.source.getImageData){var s=o.source.getImageData(e,t,i,n),r=new Uint8Array(s);return Array.from(r)}return null}if(Ns.isWebGL)return a.getTexturePixels(this,e,t,i,n);Or.canvas.size(i,n),Or.canvas.clear(),Or.context.drawTexture(this,-e,-t,this.width,this.height,0,0);var l=Or.context.getImageData(0,0,i,n);return l.data},r.onAsynLoaded=function(e,t){t&&t._addReference(),this.setTo(t,this.uv)},s(0,r,"isLinearSampling",function(){return Ns.isWebGL?9728!=this.bitmap.minFifter:!0},function(e){!e&&Ns.isWebGL&&(e||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),s(0,r,"height",function(){return this._h?this._h:this.uv&&this.uv!==n.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(e){this._h=e,this.sourceHeight||(this.sourceHeight=e)}),s(0,r,"width",function(){return this._w?this._w:this.uv&&this.uv!==n.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(e){this._w=e,this.sourceWidth||(this.sourceWidth=e)}),s(0,r,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),s(0,r,"released",function(){return this.bitmap?this.bitmap.released:!0}),s(0,r,"repeat",function(){return Ns.isWebGL&&this.bitmap?this.bitmap.repeat:!0},function(e){e&&Ns.isWebGL&&this.bitmap&&(this.bitmap.repeat=e,e&&(this.bitmap.enableMerageInAtlas=!1))}),s(0,r,"loaded",function(){return this._loaded}),n.moveUV=function(e,t,i){for(var n=0;8>n;n+=2)i[n]+=e,i[n+1]+=t;return i},n.create=function(e,t,i,o,s,r,l,h,c){void 0===r&&(r=0),void 0===l&&(l=0),void 0===h&&(h=0),void 0===c&&(c=0);var u=e instanceof laya.resource.Texture,d=u?e.uv:n.DEF_UV,p=u?e.bitmap:e,f=a.isAtlas(p);if(f){var _=p._atlaser,m=e._atlasID;if(-1==m)throw new Error("create texture error");p=_._inAtlasTextureBitmapValue[m],d=_._inAtlasTextureOriUVValue[m]}var g=new n(p,null);p.width&&t+o>p.width&&(o=p.width-t),p.height&&i+s>p.height&&(s=p.height-i),g.width=o,g.height=s,g.offsetX=r,g.offsetY=l,g.sourceWidth=h||o,g.sourceHeight=c||s;var v=1/p.width,y=1/p.height;t*=v,i*=y,o*=v,s*=y;var b=g.uv[0],E=g.uv[1],x=g.uv[4],S=g.uv[5],w=x-b,C=S-E,T=n.moveUV(d[0],d[1],[t,i,t+o,i,t+o,i+s,t,i+s]);g.uv=[b+T[0]*w,E+T[1]*C,x-(1-T[2])*w,E+T[3]*C,x-(1-T[4])*w,S-(1-T[5])*C,b+T[6]*w,S-(1-T[7])*C],f&&g.addTextureToAtlas();var I=p.scaleRate;return I&&1!=I?(g.sourceWidth/=I,g.sourceHeight/=I,g.width/=I,g.height/=I,g.scaleRate=I,g.offsetX/=I,g.offsetY/=I):g.scaleRate=1,g},n.createFromTexture=function(e,t,i,o,s){var r=e.scaleRate;1!=r&&(t*=r,i*=r,o*=r,s*=r);var a=Ch.TEMP.setTo(t-e.offsetX,i-e.offsetY,o,s),l=a.intersection(n._rect1.setTo(0,0,e.width,e.height),n._rect2);if(!l)return null;var h=n.create(e,l.x,l.y,l.width,l.height,l.x-a.x,l.y-a.y,o,s);return h.bitmap._removeReference(),h},n.DEF_UV=[0,0,1,0,1,1,0,1],n.INV_UV=[0,1,1,1,1,0,0,0],n._rect1=new Ch,n._rect2=new Ch,n}(l),Fu=function(e){function t(){t.__super.call(this)}o(t,"laya.wx.mini.MiniLoader",e,"MiniLoader$4");var i=t.prototype;return i.load=function(e,i,n,o,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var r=this;if(r._url=e,0===e.indexOf("data:image")?r._type=i="image":r._type=i||(i=r.getTypeFromUrl(e)),r._cache=n,r._data=null,!s&&Tu.loadedMap[Cs.formatURL(e)])return r._data=Tu.loadedMap[Cs.formatURL(e)],this.event("progress",1),void this.event("complete",r._data);if(null!=Tu.parserMap[i])return r._customParse=!0,void(Tu.parserMap[i]instanceof laya.utils.Handler?Tu.parserMap[i].runWith(this):Tu.parserMap[i].call(null,this));var a=wr.getUrlEncode(e,i),l=Dr.getFileExtension(e);if(-1!=t._fileTypeArr.indexOf(l)||"image"==i)wr.EnvConfig.load.call(this,e,i,n,o,s);else{if(wr.isZiYu&&!Ir.ziyuFileData[e]&&(e=Cs.formatURL(e)),wr.isZiYu&&Ir.ziyuFileData[e]){var c=Ir.ziyuFileData[e];return void r.onLoaded(c)}if(Ir.getFileInfo(Cs.formatURL(e))){var u=Ir.getFileInfo(Cs.formatURL(e));u.encoding=null==u.encoding?"utf8":u.encoding;var d=Ir.getFileNativePath(u.md5);Ir.readFile(d,u.encoding,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),Cs.formatURL(e))}else{if(Ir.isLocalNativeFile(e)){if(wr.subNativeFiles&&0==wr.subNativeheads.length)for(var p in wr.subNativeFiles){var f=wr.subNativeFiles[p];wr.subNativeheads=wr.subNativeheads.concat(f);for(var _=0;_<f.length;_++)wr.subMaps[f[_]]=p+"/"+f[_]}if(wr.subNativeFiles&&-1!=e.indexOf("/")){var m=e.split("/")[0]+"/";if(m&&-1!=wr.subNativeheads.indexOf(m)){var g=wr.subMaps[m];e=e.replace(m,g)}}return void("sound"==i?r._loadSound(e):Ir.read(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r])))}var v=e,y=Cs.formatURL(e);-1!=y.indexOf(wr.window.wx.env.USER_DATA_PATH)||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||wr.AutoCacheDownFile?(u=Ir.getFileInfo(e),u?(u.encoding=null==u.encoding?"utf8":u.encoding,Ir.readFile(u.url,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e)):"image"==r.type||"htmlimage"==r.type?wr.EnvConfig.load.call(r,e,i,n,o,s):(e=Cs.formatURL(e),"image"!=i&&(-1==e.indexOf("http://")&&-1==e.indexOf("https://")||Ir.isLocalNativeFile(e))?Ir.readFile(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e):Ir.downFiles(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e,!0))):"sound"==i?r._loadSound(e):wr.EnvConfig.load.call(r,v,i,n,o,s)}}},i._loadSound=function(e){var i,n=this;if(Ir.isLocalNativeFile(e)){var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=e;""==o||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(i=e.split(o)[1]),i||(i=s),laya.wx.mini.MiniLoader.onDownLoadCallBack(e,n,0)}else{var r=Cs.formatURL(e);!Ir.isLocalNativeFile(e)&&-1==r.indexOf("http://")&&-1==r.indexOf("https://")||-1!=r.indexOf(wr.window.wx.env.USER_DATA_PATH)?laya.wx.mini.MiniLoader.onDownLoadCallBack(e,n,0):Ir.downOtherFiles(encodeURI(r),h.create(t,laya.wx.mini.MiniLoader.onDownLoadCallBack,[r,n]),r)}},t.onDownLoadCallBack=function(e,t,i,n){if(i)t.event("error","Load sound failed");else{var o;if(wr.autoCacheFile)if(n)o=n;else if(Ir.isLocalNativeFile(e)){var s=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,r=e;""==s||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(o=e.split(s)[1]),o||(o=r)}else{var a=Ir.getFileInfo(e);if(a&&a.md5){var l=a.md5;o=Ir.getFileNativePath(l)}else o=e}e=o;var h=new jh._soundClass;h.load(encodeURI(e)),t.onLoaded(h)}},t.onReadNativeCallBack=function(e,t,i,n,o,s,r,a,l){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=0),a)1==a&&(console.log("-----------本地加载失败，尝试外网加载----url:"+t),wr.EnvConfig.load.call(r,t,i,n,o,s));else{var h;h="json"==i||"atlas"==i?wr.getJson(l.data):"xml"==i?Dr.parseXMLFromString(l.data):l.data,!wr.isZiYu&&wr.isPosMsgYu&&"arraybuffer"!=i&&wr.window.wx&&wr.window.wx.postMessage({url:t,data:h,isLoad:"filedata"}),r.onLoaded(h)}},n(t,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),t}(l),Gu=function(e){function t(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,t.__super.call(this)}o(t,"laya.wx.mini.MiniSound",e,"MiniSound$4");var i=t.prototype;return i.load=function(e){if(Ir.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=Ir.loadPath)e=e.split(Ir.loadPath)[1];else{var i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;""!=i&&(e=e.split(i)[1])}}else e=Cs.formatURL(e);if(this.url=e,this.readyUrl=e,t._audioCache[this.readyUrl])return void this.event("complete");if(wr.autoCacheFile&&Ir.getFileInfo(e))this.onDownLoadCallBack(e,0);else if(wr.autoCacheFile)if(Ir.isLocalNativeFile(e)){i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;var n=e;if(""!=i&&(e=e.split(i)[1]),e||(e=n),wr.subNativeFiles&&0==wr.subNativeheads.length)for(var o in wr.subNativeFiles){var s=wr.subNativeFiles[o];wr.subNativeheads=wr.subNativeheads.concat(s);for(var r=0;r<s.length;r++)wr.subMaps[s[r]]=o+"/"+s[r]}if(wr.subNativeFiles&&-1!=e.indexOf("/")){var a=e.split("/")[0]+"/";if(a&&-1!=wr.subNativeheads.indexOf(a)){var l=wr.subMaps[a];e=e.replace(a,l)}}this.onDownLoadCallBack(e,0)}else Ir.downOtherFiles(encodeURI(e),h.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)},i.onDownLoadCallBack=function(e,i){if(i)this.event("error");else{var n;if(wr.autoCacheFile){if(Ir.isLocalNativeFile(e)){var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=e;""==o||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(n=e.split(o)[1]),n||(n=s)}else{var r=Ir.getFileInfo(e);if(r&&r.md5){var a=r.md5;n=Ir.getFileNativePath(a)}else n=encodeURI(e)}this._sound=t._createSound(),this._sound.src=this.url=n}else this._sound=t._createSound(),this._sound.src=encodeURI(e);this._sound.onCanplay(t.bindToThis(this.onCanPlay,this)),this._sound.onError(t.bindToThis(this.onError,this))}},i.onError=function(e){this.event("error"),this._sound.offError(null)},i.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay(null)},i.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(this.url==jh._tMusic?(t._musicAudio||(t._musicAudio=t._createSound()),n=t._musicAudio):n=t._audioCache[this.readyUrl]?t._audioCache[this.readyUrl]._sound:t._createSound(),wr.autoCacheFile&&Ir.getFileInfo(this.url)){var o=Ir.getFileInfo(this.url),s=o.md5;n.src=this.url=Ir.getFileNativePath(s)}else n.src=encodeURI(this.url);var r=new gx(n,this);return r.url=this.url,r.loops=i,r.loop=0===i,r.startTime=e,r.play(),jh.addChannel(r),r},i.dispose=function(){var e=t._audioCache[this.readyUrl];e&&(e.src="",e._sound&&(e._sound.destroy(),e._sound=null,e=null),delete t._audioCache[this.readyUrl]),this._sound&&(this._sound.destroy(),this._sound=null),this.url=this.readyUrl=null},s(0,i,"duration",function(){return this._sound.duration}),t._createSound=function(){return t._id++,wr.window.wx.createInnerAudioContext()},t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t._musicAudio=null,t._id=0,t._audioCache={},t}(l),Hu=function(e){function t(){t.__super.call(this)}o(t,"laya.qg.mini.MiniLoader",e,"MiniLoader$5");var i=t.prototype;return i.load=function(e,i,n,o,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var r=this;if(r._url=e,!e)return void r.onLoaded(null);if(e=Cs.customFormat(e),0===e.indexOf("data:image")?r._type=i="image":r._type=i||(i=r.getTypeFromUrl(r._url)),r._cache=n,r._data=null,!s&&Tu.loadedMap[Cs.formatURL(e)])return r._data=Tu.loadedMap[Cs.formatURL(e)],this.event("progress",1),void this.event("complete",r._data);if(null!=Tu.parserMap[i])return r._customParse=!0,void(Tu.parserMap[i]instanceof laya.utils.Handler?Tu.parserMap[i].runWith(this):Tu.parserMap[i].call(null,this));var a=$r.getUrlEncode(e,i),l=Dr.getFileExtension(e);if(-1!=t._fileTypeArr.indexOf(l)||"image"==i)$r.EnvConfig.load.call(this,e,i,n,o,s);else{if($r.isZiYu&&!Jr.ziyuFileData[e]&&(e=Cs.formatURL(e)),$r.isZiYu&&Jr.ziyuFileData[e]){var c=Jr.ziyuFileData[e];return void r.onLoaded(c)}if(Jr.getFileInfo(Cs.formatURL(e))){var u=Jr.getFileInfo(Cs.formatURL(e));u.encoding=null==u.encoding?"utf8":u.encoding;var d=Jr.getFileNativePath(u.md5);Jr.readFile(d,u.encoding,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),Cs.formatURL(e))}else{if(Jr.isLocalNativeFile(e)){if($r.subNativeFiles&&0==$r.subNativeheads.length)for(var p in $r.subNativeFiles){var f=$r.subNativeFiles[p];$r.subNativeheads=$r.subNativeheads.concat(f);for(var _=0;_<f.length;_++)$r.subMaps[f[_]]=p+"/"+f[_]}if($r.subNativeFiles&&-1!=e.indexOf("/")){var m=e.split("/")[0]+"/";if(m&&-1!=$r.subNativeheads.indexOf(m)){var g=$r.subMaps[m];e=e.replace(m,g)}}return void Jr.read(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]))}var v=e,y=Cs.formatURL(e);-1!=y.indexOf($r.window.qg.env.USER_DATA_PATH)||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||$r.AutoCacheDownFile?(u=Jr.getFileInfo(e),u?(u.encoding=null==u.encoding?"utf8":u.encoding,Jr.readFile(u.url,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e)):"image"==r.type||"htmlimage"==r.type?$r.EnvConfig.load.call(r,e,i,n,o,s):(e=Cs.formatURL(e),"image"!=i&&(-1==e.indexOf("http://")&&-1==e.indexOf("https://")||Jr.isLocalNativeFile(e))?Jr.readFile(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e):Jr.downFiles(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e,n))):$r.EnvConfig.load.call(r,v,i,n,o,s)}}},t.onReadNativeCallBack=function(e,t,i,n,o,s,r,a,l){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=0),a)1==a&&(console.log("-----------本地加载失败，尝试外网加载----"),$r.EnvConfig.load.call(r,t,i,n,o,s));else{var h;h="json"==i||"atlas"==i?$r.getJson(l.data):"xml"==i?Dr.parseXMLFromString(l.data):l.data,!$r.isZiYu&&$r.isPosMsgYu&&"arraybuffer"!=i&&$r.window.qg.postMessage&&$r.window.qg.postMessage({url:t,data:h,isLoad:"filedata"}),r.onLoaded(h)}},n(t,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),t}(l),Uu=function(e){function t(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,t.__super.call(this),this._sound=t._createSound()}o(t,"laya.qg.mini.MiniSound",e,"MiniSound$5");var i=t.prototype;return i.load=function(e){if(Jr.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=Jr.loadPath)e=e.split(Jr.loadPath)[1];else{var t=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;""!=t&&(e=e.split(t)[1])}}else e=Cs.formatURL(e);if(this.url=e,this.readyUrl=e,$r.autoCacheFile&&Jr.getFileInfo(e))this.onDownLoadCallBack(e,0);else if($r.autoCacheFile)if(Jr.isLocalNativeFile(e)){t=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;var i=e;if(""!=t&&(e=e.split(t)[1]),e||(e=i),$r.subNativeFiles&&0==$r.subNativeheads.length)for(var n in $r.subNativeFiles){var o=$r.subNativeFiles[n];$r.subNativeheads=$r.subNativeheads.concat(o);for(var s=0;s<o.length;s++)$r.subMaps[o[s]]=n+"/"+o[s]}if($r.subNativeFiles&&-1!=e.indexOf("/")){var r=e.split("/")[0]+"/";if(r&&-1!=$r.subNativeheads.indexOf(r)){var a=$r.subMaps[r];e=e.replace(r,a)}}this.onDownLoadCallBack(e,0)}else-1==e.indexOf("http://")&&-1==e.indexOf("https://")||-1!=e.indexOf($r.window.my.env.USER_DATA_PATH)?this.onDownLoadCallBack(e,0):Jr.downOtherFiles(e,h.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)},i.onDownLoadCallBack=function(e,t,i){if(void 0===i&&(i=""),t)this.event("error");else{var n;if($r.autoCacheFile){if(Jr.isLocalNativeFile(e)){var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=e;""==o||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(n=e.split(o)[1]),n||(n=s)}else{var r=Jr.getFileInfo(e);if(r&&r.md5){var a=r.md5;n=Jr.getFileNativePath(a)}else n=encodeURI(e)}this._sound.src=this.url=n}else this._sound.src=e}},i.play=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=0),!this.url)return null;var i=new vx(this);return i.url=this.url,i.loops=t,i.loop=0===t,i.startTime=e,i.play(),jh.addChannel(i),i},i.dispose=function(){this._sound&&(this._sound.destroy(),this._sound=null,this.readyUrl=this.url=null)},s(0,i,"duration",function(){return this._sound.duration}),t._createSound=function(){return t._audioCache.length?t._audioCache.pop():(t._id++,$r.window.qg.createInnerAudioContext())},t._id=0,t._audioCache=[],t}(l),zu=function(e){function t(){t.__super.call(this)}o(t,"laya.vv.mini.MiniLoader",e,"MiniLoader$6");var i=t.prototype;return i.load=function(e,i,n,o,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var r=this;if(r._url=e,0===e.indexOf("data:image")?r._type=i="image":r._type=i||(i=r.getTypeFromUrl(e)),r._cache=n,r._data=null,!s&&Tu.loadedMap[Cs.formatURL(e)])return r._data=Tu.loadedMap[Cs.formatURL(e)],this.event("progress",1),void this.event("complete",r._data);if(null!=Tu.parserMap[i])return r._customParse=!0,void(Tu.parserMap[i]instanceof laya.utils.Handler?Tu.parserMap[i].runWith(this):Tu.parserMap[i].call(null,this));var a=oa.getUrlEncode(e,i),l=Dr.getFileExtension(e);if(-1!=t._fileTypeArr.indexOf(l)||"image"==i)oa.EnvConfig.load.call(this,e,i,n,o,s);else{if(oa.isZiYu&&!na.ziyuFileData[e]&&(e=Cs.formatURL(e)),oa.isZiYu&&na.ziyuFileData[e]){var c=na.ziyuFileData[e];return void r.onLoaded(c)}if(na.getFileInfo(Cs.formatURL(e))){var u=na.getFileInfo(Cs.formatURL(e));u.encoding=null==u.encoding?"utf8":u.encoding;var d=na.getFileNativePath(u.md5);na.readFile(d,u.encoding,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),Cs.formatURL(e))}else{if(na.isLocalNativeFile(e)){if(oa.subNativeFiles&&0==oa.subNativeheads.length)for(var p in oa.subNativeFiles){var f=oa.subNativeFiles[p];oa.subNativeheads=oa.subNativeheads.concat(f);for(var _=0;_<f.length;_++)oa.subMaps[f[_]]=p+"/"+f[_]}if(oa.subNativeFiles&&-1!=e.indexOf("/")){var m=e.split("/")[0]+"/";if(m&&-1!=oa.subNativeheads.indexOf(m)){var g=oa.subMaps[m];e=e.replace(m,g)}}return void na.read(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]))}var v=e,y=Cs.formatURL(e);-1!=y.indexOf(oa.window.qg.env.USER_DATA_PATH)||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||oa.AutoCacheDownFile?(u=na.getFileInfo(e),u?(u.encoding=null==u.encoding?"utf8":u.encoding,na.readFile(u.url,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e)):"image"==r.type||"htmlimage"==r.type?oa.EnvConfig.load.call(r,e,i,n,o,s):(e=Cs.formatURL(e),"image"!=i&&(-1==e.indexOf("http://")&&-1==e.indexOf("https://")||na.isLocalNativeFile(e))?na.readFile(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e):na.downFiles(encodeURI(e),a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e,!0))):oa.EnvConfig.load.call(r,v,i,n,o,s)}}},t.onReadNativeCallBack=function(e,t,i,n,o,s,r,a,l){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=0),a)1==a&&(console.log("-----------本地加载失败，尝试外网加载----"),oa.EnvConfig.load.call(r,t,i,n,o,s));else{var h;h="json"==i||"atlas"==i?oa.getJson(l.data):"xml"==i?Dr.parseXMLFromString(l.data):l.data,!oa.isZiYu&&oa.isPosMsgYu&&"arraybuffer"!=i&&oa.window.qg.postMessage&&oa.window.qg.postMessage({url:t,data:h,isLoad:"filedata"}),r.onLoaded(h)}},n(t,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),t}(l),Wu=function(e){function t(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,t.__super.call(this)}o(t,"laya.vv.mini.MiniSound",e,"MiniSound$6");var n=t.prototype;return n.load=function(e){if(na.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=na.loadPath)e=e.split(na.loadPath)[1];else{var i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;""!=i&&(e=e.split(i)[1])}}else e=Cs.formatURL(e);if(this.url=e,this.readyUrl=e,t._audioCache[this.readyUrl])return void this.event("complete");if(oa.autoCacheFile&&na.getFileInfo(e))this.onDownLoadCallBack(e,0);else if(oa.autoCacheFile)if(na.isLocalNativeFile(e)){i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;var n=e;if(""!=i&&(e=e.split(i)[1]),e||(e=n),oa.subNativeFiles&&0==oa.subNativeheads.length)for(var o in oa.subNativeFiles){var s=oa.subNativeFiles[o];oa.subNativeheads=oa.subNativeheads.concat(s);for(var r=0;r<s.length;r++)oa.subMaps[s[r]]=o+"/"+s[r]}if(oa.subNativeFiles&&-1!=e.indexOf("/")){var a=e.split("/")[0]+"/";if(a&&-1!=oa.subNativeheads.indexOf(a)){var l=oa.subMaps[a];e=e.replace(a,l)}}this.onDownLoadCallBack(e,0)}else!na.isLocalNativeFile(e)&&-1==e.indexOf("http://")&&-1==e.indexOf("https://")||-1!=e.indexOf("http://usr/")?this.onDownLoadCallBack(e,0):na.downOtherFiles(encodeURI(e),h.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)},n.onDownLoadCallBack=function(e,n,o){if(n)this.event("error");else{var s;if(oa.autoCacheFile){if(o)s=o;else if(na.isLocalNativeFile(e)){var r=""!=Cs.rootPath?Cs.rootPath:Cs._basePath,a=e;""==r||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(s=e.split(r)[1]),s||(s=a)}else{var l=na.getFileInfo(e);if(l&&l.md5){var h=l.md5;s=na.getFileNativePath(h)}else s=e}this._sound=t._createSound(),this._sound.src=this.url=s}else this._sound=t._createSound(),this._sound.src=e;this._sound.onCanplay?(this._sound.onCanplay(t.bindToThis(this.onCanPlay,this)),this._sound.onError(t.bindToThis(this.onError,this))):(i.timer.clear(this,this.onCheckComplete),i.timer.frameLoop(2,this,this.onCheckComplete))}},n.onCheckComplete=function(){this._sound&&this._sound.duration>0&&this.onCanPlay(),i.timer.clear(this,this.onCheckComplete)},n.onError=function(e){try{console.log("-----1---------------minisound-----id:"+t._id),console.log(e)}catch(e){console.log("-----2---------------minisound-----id:"+t._id),console.log(e)}this.event("error"),this._sound.offError&&this._sound.offError(null)},n.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay&&this._sound.offCanplay(null)},n.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(this.url==jh._tMusic?(t._musicAudio||(t._musicAudio=t._createSound()),n=t._musicAudio):n=t._audioCache[this.readyUrl]?t._audioCache[this.readyUrl]._sound:t._createSound(),oa.autoCacheFile&&na.getFileInfo(this.url)){var o=na.getFileInfo(this.url),s=o.md5;n.src=this.url=na.getFileNativePath(s)}else n.src=this.url;var r=new bx(n,this);return r.url=this.url,r.loops=i,r.loop=0===i,r.startTime=e,r.play(),jh.addChannel(r),r},n.dispose=function(){var e=t._audioCache[this.readyUrl];e&&(e.src="",e._sound&&(e._sound.destroy(),e._sound=null,e=null),delete t._audioCache[this.readyUrl])},s(0,n,"duration",function(){return this._sound.duration}),t._createSound=function(){return t._id++,oa.window.qg.createInnerAudioContext()},t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t._musicAudio=null,t._id=0,t._audioCache={},t}(l),Yu=function(e){function t(){this._destroyed=!1,t.__super.call(this),this._destroyed=!1}o(t,"laya.d3.core.GeometryFilter",e);var n=t.prototype;return i.imps(n,{"laya.resource.IDestroy":!0}),n._destroy=function(){this.offAll(),this._destroyed=!0},s(0,n,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),s(0,n,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),s(0,n,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),s(0,n,"destroyed",function(){return this._destroyed}),s(0,n,"_isAsyncLoaded",function(){return!0}),t}(l),qu=function(e){function t(e){t.__super.call(this),this._id=++t._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new nl(new rl,new rl),this._boundingBoxCenter=new rl,this._boundingSphere=new hl(new rl,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=e,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}o(t,"laya.d3.core.render.BaseRender",e);var r=t.prototype;return i.imps(r,{"laya.resource.IDestroy":!0}),r._changeMaterialReference=function(e,t){e&&e._removeReference(),t._addReference()},r._getInstanceMaterial=function(e,t){var i=new e.constructor;return e.cloneTo(i),i.name=i.name+"(Instance)",this._materialsInstance[t]=!0,this._changeMaterialReference(this._materials[t],i),this._materials[t]=i,i},r._setShaderValuelightMap=function(e){this._setShaderValueTexture(3,e)},r._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},r._renderRenderableBoundBox=function(){var e=ic._debugPhasorSprite,i=this.boundingBox,n=t._tempBoundBoxCorners;i.getCorners(n),e.line(n[0],t._greenColor,n[1],t._greenColor),e.line(n[2],t._greenColor,n[3],t._greenColor),e.line(n[4],t._greenColor,n[5],t._greenColor),e.line(n[6],t._greenColor,n[7],t._greenColor),e.line(n[0],t._greenColor,n[3],t._greenColor),e.line(n[1],t._greenColor,n[2],t._greenColor),e.line(n[2],t._greenColor,n[6],t._greenColor),e.line(n[3],t._greenColor,n[7],t._greenColor),e.line(n[0],t._greenColor,n[4],t._greenColor),e.line(n[1],t._greenColor,n[5],t._greenColor),e.line(n[4],t._greenColor,n[7],t._greenColor),e.line(n[5],t._greenColor,n[6],t._greenColor)},r._calculateBoundingSphere=function(){throw"BaseRender: must override it."},r._calculateBoundingBox=function(){throw"BaseRender: must override it."},r._setShaderValueTexture=function(e,t){this._owner._shaderValues.setValue(e,t)},r._setShaderValueMatrix4x4=function(e,t){this._owner._shaderValues.setValue(e,t?t.elements:null)},r._setShaderValueColor=function(e,t){this._owner._shaderValues.setValue(e,t?t.elements:null)},r._setShaderValueBuffer=function(e,t){this._owner._shaderValues.setValue(e,t)},r._setShaderValueInt=function(e,t){this._owner._shaderValues.setValue(e,t)},r._setShaderValueBool=function(e,t){this._owner._shaderValues.setValue(e,t)},r._setShaderValueNumber=function(e,t){this._owner._shaderValues.setValue(e,t)},r._setShaderValueVector2=function(e,t){this._owner._shaderValues.setValue(e,t?t.elements:null)},r._addShaderDefine=function(e){this._owner._shaderDefineValue|=e},r._removeShaderDefine=function(e){this._owner._shaderDefineValue&=~e},r._renderUpdate=function(e){return!0},r._applyLightMapParams=function(){if(this._lightmapIndex>=0){var e=this._owner.scene;if(e){var t=e.getlightmaps(),i=t[this._lightmapIndex];i?(this._addShaderDefine(_w.SAHDERDEFINE_LIGHTMAP),i.loaded?this._setShaderValuelightMap(i):i.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(_w.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(_w.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(_w.SAHDERDEFINE_LIGHTMAP)},r._updateOctreeNode=function(){var e=this._treeNode;e&&this._octreeNodeNeedChange&&(e.updateObject(this),this._octreeNodeNeedChange=!1)},r._destroy=function(){this.offAll();var e=0,t=0;for(e=0,t=this._renderElements.length;t>e;e++)this._renderElements[e]._destroy();for(e=0,t=this._materials.length;t>e;e++)this._materials[e]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},s(0,r,"receiveShadow",function(){return this._receiveShadow},function(e){this._receiveShadow!==e&&(this._receiveShadow=e,e?this._addShaderDefine(Va.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(Va.SHADERDEFINE_RECEIVE_SHADOW))}),s(0,r,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),s(0,r,"sharedMaterials",function(){var e=this._materials.slice();return e},function(e){if(!e)throw new Error("MeshRender: shadredMaterials value can't be null.");var t=e.length;this._materialsInstance.length=t;for(var i=0;t>i;i++){var n=this._materials[i];n!==e[i]&&(this._materialsInstance[i]=!1,this._changeMaterialReference(n,e[i]),this.event("materialchanged",[this,i,e[i]]))}this._materials=e}),s(0,r,"id",function(){return this._id}),s(0,r,"lightmapIndex",function(){return this._lightmapIndex},function(e){this._lightmapIndex=e,this._applyLightMapParams()}),s(0,r,"enable",function(){return this._enable},function(e){this._enable=e,this.event("enablechanged",[this,e])}),s(0,r,"destroyed",function(){return this._destroyed}),s(0,r,"sharedMaterial",function(){return this._materials[0]},function(e){var t=this._materials[0];t!==e&&(this._materials[0]=e,this._materialsInstance[0]=!1,this._changeMaterialReference(t,e),this.event("materialchanged",[this,0,e]))}),s(0,r,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var e=this.boundingBox;rl.add(e.min,e.max,this._boundingBoxCenter),rl.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),s(0,r,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),s(0,r,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(e){this._lightmapScaleOffset=e,this._setShaderValueColor(2,e),this._addShaderDefine(_w.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),s(0,r,"material",function(){var e=this._materials[0];if(e&&!this._materialsInstance[0]){var t=this._getInstanceMaterial(e,0);this.event("materialchanged",[this,0,t])}return this._materials[0]},function(e){this.sharedMaterial=e}),s(0,r,"materials",function(){for(var e=0,t=this._materials.length;t>e;e++)if(!this._materialsInstance[e]){var i=this._getInstanceMaterial(this._materials[e],e);this.event("materialchanged",[this,e,i])}return this._materials.slice()},function(e){this.sharedMaterials=e}),t._uniqueIDCounter=0,n(t,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new rl,new rl,new rl,new rl,new rl,new rl,new rl,new rl]},"_greenColor",function(){return this._greenColor=new el(0,1,0,1)}]),t}(l),Ku=(function(e){function t(){this._rotation=0,this._matNeedUpdte=!1,t.__super.call(this),this._matrix=new ol,this._offset=new ul,this._tiling=new ul(1,1)}o(t,"laya.d3.core.TransformUV",e);var r=t.prototype;return i.imps(r,{"laya.d3.core.IClone":!0}),r._updateMatrix=function(){t._tempOffsetV3.elements[0]=this._offset.x,t._tempOffsetV3.elements[1]=this._offset.y,cl.createFromYawPitchRoll(0,0,this._rotation,t._tempRotationQua),t._tempTitlingV3.elements[0]=this._tiling.x,t._tempTitlingV3.elements[1]=this._tiling.y,ol.createAffineTransformation(t._tempOffsetV3,t._tempRotationQua,t._tempTitlingV3,this._matrix)},r.cloneTo=function(e){e._matrix=this._matrix.clone(),e._offset=this._offset.clone(),e._rotation=this._rotation,e._tiling=this._tiling.clone()},r.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,r,"tiling",function(){return this._tiling},function(e){this._tiling=e,this._matNeedUpdte=!0}),s(0,r,"rotation",function(){return this._rotation},function(e){this._rotation=e,this._matNeedUpdte=!0}),s(0,r,"offset",function(){return this._offset},function(e){this._offset=e,this._matNeedUpdte=!0}),s(0,r,"matrix",function(){
return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),n(t,["_tempOffsetV3",function(){return this._tempOffsetV3=new rl(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new cl},"_tempTitlingV3",function(){return this._tempTitlingV3=new rl(1,1,1)}]),t}(l),function(e){function t(e){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,t.__super.call(this),this._localPosition=new rl,this._localRotation=new cl(0,0,0,1),this._localScale=new rl(1,1,1),this._localRotationEuler=new rl,this._localMatrix=new ol,this._position=new rl,this._rotation=new cl(0,0,0,1),this._scale=new rl(1,1,1),this._worldMatrix=new ol,this._forward=new rl,this._up=new rl,this._right=new rl,this._owner=e,this._childs=[]}o(t,"laya.d3.core.Transform3D",e);var i=t.prototype;return i._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)ol.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var e=t._tempVector30;rl.multiply(this.pivot,this._localScale,e);var i=t._tempVector31;rl.subtract(e,this.pivot,i);var n=t._tempVector32,o=this.localRotation;rl.transformQuat(e,o,n),rl.subtract(n,e,n);var s=t._tempVector33;rl.subtract(this._localPosition,i,s),rl.subtract(s,n,s),ol.createAffineTransformation(s,o,this._localScale,this._localMatrix)}},i._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._childs.length;t>e;e++)this._childs[e]._onWorldPositionRotationTransform()}},i._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._childs.length;t>e;e++)this._childs[e]._onWorldPositionScaleTransform()}},i._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._childs.length;t>e;e++)this._childs[e]._onWorldPositionTransform()}},i._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._childs.length;t>e;e++)this._childs[e]._onWorldPositionRotationTransform()}},i._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._childs.length;t>e;e++)this._childs[e]._onWorldPositionScaleTransform()}},i._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._childs.length;t>e;e++)this._childs[e]._onWorldTransform()}},i.translate=function(e,i){void 0===i&&(i=!0),i?(ol.createFromQuaternion(this.localRotation,t._tempMatrix0),rl.transformCoordinate(e,t._tempMatrix0,t._tempVector30),rl.add(this.localPosition,t._tempVector30,this._localPosition),this.localPosition=this._localPosition):(rl.add(this.position,e,this._position),this.position=this._position)},i.rotate=function(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0);var o;n?o=e:(rl.scale(e,Math.PI/180,t._tempVector30),o=t._tempVector30),cl.createFromYawPitchRoll(o.y,o.x,o.z,t._tempQuaternion0),i?(cl.multiply(this._localRotation,t._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(cl.multiply(t._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},i.lookAt=function(e,t,i){void 0===i&&(i=!1);var n,o=e.elements;if(i){if(n=this._localPosition.elements,Math.abs(n[0]-o[0])<ja.zeroTolerance&&Math.abs(n[1]-o[1])<ja.zeroTolerance&&Math.abs(n[2]-o[2])<ja.zeroTolerance)return;cl.lookAt(this._localPosition,e,t,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var s=this.position;if(n=s.elements,Math.abs(n[0]-o[0])<ja.zeroTolerance&&Math.abs(n[1]-o[1])<ja.zeroTolerance&&Math.abs(n[2]-o[2])<ja.zeroTolerance)return;cl.lookAt(s,e,t,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},s(0,i,"up",function(){var e=this.worldMatrix.elements;return this._up.elements[0]=e[4],this._up.elements[1]=e[5],this._up.elements[2]=e[6],this._up}),s(0,i,"forward",function(){var e=this.worldMatrix.elements;return this._forward.elements[0]=-e[8],this._forward.elements[1]=-e[9],this._forward.elements[2]=-e[10],this._forward}),s(0,i,"dummy",function(){return this._dummy},function(e){this._dummy!==e&&(this._dummy&&(this._dummy._entity=null),e&&(e._entity=this),this._dummy=e)}),s(0,i,"parent",function(){return this._parent},function(e){if(this._parent!==e){if(this._parent){var t=this._parent._childs,i=t.indexOf(this);t.splice(i,1)}e&&(e._childs.push(this),e&&this._onWorldTransform()),this._parent=e}}),s(0,i,"rotationEuler",null,function(e){cl.createFromYawPitchRoll(e.y,e.x,e.z,this._rotation),this.rotation=this._rotation}),s(0,i,"scale",function(){return this._scaleUpdate?(null!==this._parent?rl.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1,this._scale):this._scale},function(e){if(null!==this._parent){var i=this._parent.scale.elements,n=t._tempVector30.elements;n[0]=1/i[0],n[1]=1/i[1],n[2]=1/i[2],rl.multiply(e,t._tempVector30,this._localScale)}else e.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=e,this._scaleUpdate=!1}),s(0,i,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?cl.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(e){null!=this._parent?(this._parent.rotation.invert(t._tempQuaternion0),cl.multiply(e,t._tempQuaternion0,this._localRotation)):e.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=e,this._rotationUpdate=!1}),s(0,i,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(t._tempVector30);var e=t._tempVector30.elements,i=this._localRotationEuler.elements;i[0]=e[1]*t._angleToRandin,i[1]=e[0]*t._angleToRandin,i[2]=e[2]*t._angleToRandin}return this._localRotationEuler},function(e){this._localRotationEuler=e,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),s(0,i,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?ol.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(e){null===this._parent?e.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),ol.multiply(this._localMatrix,e,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=e,this._worldUpdate=!1}),s(0,i,"position",function(){if(this._positionUpdate){if(null!=this._parent){var e=this._parent.position;rl.multiply(this._localPosition,this._parent.scale,t._tempVector30),rl.transformQuat(t._tempVector30,this._parent.rotation,t._tempVector30),rl.add(e,t._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(e){if(null!=this._parent){rl.subtract(e,this._parent.position,this._localPosition);var i=this._parent.scale.elements,n=i[0],o=i[1],s=i[2];if(1!==n||1!==o||1!==s){var r=t._tempVector30,a=r.elements;a[0]=1/n,a[1]=1/o,a[2]=1/s,rl.multiply(this._localPosition,r,this._localPosition)}var l=this._parent.rotation;l.invert(t._tempQuaternion0),rl.transformQuat(this._localPosition,t._tempQuaternion0,this._localPosition)}else e.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=e,this._positionUpdate=!1}),s(0,i,"localRotation",function(){if(this._localQuaternionUpdate){var e=this._localRotationEuler.elements;cl.createFromYawPitchRoll(e[1]/t._angleToRandin,e[0]/t._angleToRandin,e[2]/t._angleToRandin,this._localRotation)}return this._localRotation},function(e){this._localRotation=e,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),s(0,i,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(e){this._localMatrix=e,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),s(0,i,"right",function(){var e=this.worldMatrix.elements;return this._right.elements[0]=e[0],this._right.elements[1]=e[1],this._right.elements[2]=e[2],this._right}),s(0,i,"worldNeedUpdate",function(){return this._worldUpdate}),s(0,i,"localPosition",function(){return this._localPosition},function(e){this._localPosition=e,this._localUpdate=!0,this._onWorldPositionTransform()}),s(0,i,"owner",function(){return this._owner}),s(0,i,"localScale",function(){return this._localScale},function(e){this._localScale=e,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),s(0,i,"_isFrontFaceInvert",function(){var e=this.scale,t=e.x<0;return e.y<0&&(t=!t),e.z<0&&(t=!t),t}),n(t,["_tempVector30",function(){return this._tempVector30=new rl},"_tempVector31",function(){return this._tempVector31=new rl},"_tempVector32",function(){return this._tempVector32=new rl},"_tempVector33",function(){return this._tempVector33=new rl},"_tempQuaternion0",function(){return this._tempQuaternion0=new cl},"_tempMatrix0",function(){return this._tempMatrix0=new ol},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),t}(l)),Xu=function(e){function t(e){t.__super.call(this),this._owner=e,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}o(t,"laya.d3.animation.AnimationTransform3D",e);var i=t.prototype;return i._getlocalMatrix=function(){return this._localUpdate&&(Ya._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},i._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var e=0,t=this._childs.length;t>e;e++)this._childs[e]._onWorldTransform()}},i._setWorldMatrixAndUpdate=function(e){if(this._worldMatrix=e,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var t=this._getlocalMatrix(),i=0;16>i;++i)this._worldMatrix[i]=t[i];else Ya.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},i._setWorldMatrixNoUpdate=function(e){this._worldMatrix=e},i._setWorldMatrixIgnoreUpdate=function(e){this._worldMatrix=e,this._worldUpdate=!1},i.getLocalPosition=function(){return this._localPosition},i.setLocalPosition=function(e){if(this._parent)this._localPosition=e,this._localUpdate=!0,this._onWorldTransform();else{var t=this._entity.owner._transform,i=this._entity.localPosition,n=i.elements;n[0]=e[0],n[1]=e[1],n[2]=e[2],t.localPosition=i}},i.getLocalRotation=function(){if(this._localQuaternionUpdate){var e=this._localRotationEuler;Ya._quaternionCreateFromYawPitchRollArray(e[1]/t._angleToRandin,e[0]/t._angleToRandin,e[2]/t._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},i.setLocalRotation=function(e){if(this._parent)this._localRotation=e,Ya.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var t=this._entity.owner._transform,i=this._entity.localRotation,n=i.elements;n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],t.localRotation=i}},i.getLocalScale=function(){return this._localScale},i.setLocalScale=function(e){if(this._parent)this._localScale=e,this._localUpdate=!0,this._onWorldTransform();else{var t=this._entity.owner._transform,i=this._entity.localScale,n=i.elements;n[0]=e[0],n[1]=e[1],n[2]=e[2],t.localScale=i}},i.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){Ya.getYawPitchRoll(this._localRotation,t._tempVector3);var e=t._tempVector3,i=this._localRotationEuler;i[0]=e[1]*t._angleToRandin,i[1]=e[0]*t._angleToRandin,i[2]=e[2]*t._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},i.setLocalRotationEuler=function(e){if(this._parent)Ya._quaternionCreateFromYawPitchRollArray(e[1]/t._angleToRandin,e[0]/t._angleToRandin,e[2]/t._angleToRandin,this._localRotation),this._localRotationEuler=e,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var i=this._entity.owner._transform,n=this._entity.localRotationEuler,o=n.elements;o[0]=e[0],o[1]=e[1],o[2]=e[2],i.localRotationEuler=n}},i.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)Ya.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var e=this._getlocalMatrix(),t=0;16>t;++t)this._worldMatrix[t]=e[t];this._worldUpdate=!1}return this._worldMatrix},i.setParent=function(e){if(this._parent!==e){if(this._parent){var t=this._parent._childs,i=t.indexOf(this);t.splice(i,1)}e&&(e._childs.push(this),e&&this._onWorldTransform()),this._parent=e}},n(t,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),t}(l),Qu=function(e){function t(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,t.__super.call(this),this._destroyed=!1,this._id=t._uniqueIDCounter,t._uniqueIDCounter++}o(t,"laya.d3.component.Component3D",e);var n=t.prototype;return i.imps(n,{"laya.resource.IDestroy":!0,"laya.d3.core.render.IUpdate":!0}),n._initialize=function(e){this._owner=e,this._enable=!0,this.started=!1,this._load(e)},n._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},n._load=function(e){},n._start=function(e){},n._update=function(e){},n._lateUpdate=function(e){},n._preRenderUpdate=function(e){},n._postRenderUpdate=function(e){},n._unload=function(e){this.offAll()},n._cloneTo=function(e){},s(0,n,"destroyed",function(){return this._destroyed}),s(0,n,"isSingleton",function(){return t._isSingleton}),s(0,n,"enable",function(){return this._enable},function(e){this._enable!==e&&(this._enable=e,this.event("enablechanged",this._enable))}),s(0,n,"owner",function(){return this._owner}),s(0,n,"id",function(){return this._id}),t._isSingleton=!0,t._uniqueIDCounter=1,t}(l),ju=function(e){function t(){t.__super.call(this)}return o(t,"laya.d3.utils.CollisionManager",e),t._onTrigger=function(e,t,i,n,o){var s=0,r=0,a=e.id,l=t.id;if(!e._ignoreCollisonMap[l]){var h=qa.collisionManager,c=e._runtimeCollisonTestMap[l];if(null!=c)if(c)if(e._collisonTo(t))if(e._runtimeCollisonMap[l]){for(s=0,r=i.length;r>s;s++)i[s].onTriggerStay(t);for(s=0,r=n.length;r>s;s++)n[s].onTriggerStay(e);h.event("triggerstay",[e,t])}else{for(e._runtimeCollisonMap[l]=t,e._runtimeCollisonTestMap[l]=!1,t._runtimeCollisonMap[a]=e,o&&(t._runtimeCollisonTestMap[a]=!1),s=0,r=i.length;r>s;s++)i[s].onTriggerEnter(t);for(s=0,r=n.length;r>s;s++)n[s].onTriggerEnter(e);h.event("triggerenter",[e,t])}else{var u=e._runtimeCollisonMap;if(u[l]){for(delete u[l],delete e._runtimeCollisonTestMap[l],delete t._runtimeCollisonMap[a],o&&delete t._runtimeCollisonTestMap[a],s=0,r=i.length;r>s;s++)i[s].onTriggerExit(t);for(s=0,r=n.length;r>s;s++)n[s].onTriggerExit(e);h.event("triggerexit",[e,t])}}else{for(s=0,r=i.length;r>s;s++)i[s].onTriggerStay(t);for(s=0,r=n.length;r>s;s++)n[s].onTriggerStay(e);h.event("triggerstay",[e,t])}else if(e._collisonTo(t)){for(e._runtimeCollisonMap[l]=t,e._runtimeCollisonTestMap[l]=!1,t._runtimeCollisonMap[a]=e,o&&(t._runtimeCollisonTestMap[a]=!1),s=0,r=i.length;r>s;s++)i[s].onTriggerEnter(t);for(s=0,r=n.length;r>s;s++)n[s].onTriggerEnter(e);h.event("triggerenter",[e,t])}}},t._triggerCollision=function(){for(var e=aa._collsionTestList,i=e.length,n=qa._layerCollsionMatrix,o=0;i>o;o++)for(var s=e[o],r=aa.getLayerByNumber(s),a=r._colliders,l=r._nonRigidbodyOffset,h=i-1;h>=o;h--){var c=e[h],u=n[s][30-c];if(u){var d,p,f,_=0,m=0,g=0,v=0,y=aa.getLayerByNumber(c),b=y._colliders,E=y._nonRigidbodyOffset;if(r!==y){for(_=0;l>_;_++)if(d=a[_],d.enable){for(f=d.owner._scripts,g=0,v=E;v>g;g++)p=b[g],p.enable&&t._onTrigger(d,p,f,p.owner._scripts,!0);for(g=E,v=b.length;v>g;g++)p=b[g],p.enable&&t._onTrigger(d,p,f,p.owner._scripts,!1)}for(_=l,m=a.length;m>_;_++)if(d=a[_],d.enable)for(f=d.owner._scripts,g=0,v=y._nonRigidbodyOffset;v>g;g++)p=b[g],p.enable&&t._onTrigger(p,d,f,p.owner._scripts,!1)}else for(_=0;l>_;_++)if(d=a[_],d.enable){for(f=d.owner._scripts,g=_+1,v=l;v>g;g++)p=b[g],p.enable&&t._onTrigger(d,p,f,p.owner._scripts,!0);for(g=l,v=a.length;v>g;g++)p=b[g],p.enable&&t._onTrigger(d,p,f,p.owner._scripts,!1)}}}},t}(l),Zu=function(e){function t(){t.__super.call(this)}o(t,"laya.bili.mini.MiniLoader",e,"MiniLoader$7");var i=t.prototype;return i.load=function(e,i,n,o,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var r=this;if(r._url=e,0===e.indexOf("data:image")?r._type=i="image":r._type=i||(i=r.getTypeFromUrl(e)),r._cache=n,r._data=null,!s&&Tu.loadedMap[Cs.formatURL(e)])return r._data=Tu.loadedMap[Cs.formatURL(e)],this.event("progress",1),void this.event("complete",r._data);if(null!=Tu.parserMap[i])return r._customParse=!0,void(Tu.parserMap[i]instanceof laya.utils.Handler?Tu.parserMap[i].runWith(this):Tu.parserMap[i].call(null,this));var a=wh.getUrlEncode(e,i),l=Dr.getFileExtension(e);if(-1!=t._fileTypeArr.indexOf(l)||"image"==i)wh.EnvConfig.load.call(this,e,i,n,o,s);else{if(wh.isZiYu&&!xh.ziyuFileData[e]&&(e=Cs.formatURL(e)),wh.isZiYu&&xh.ziyuFileData[e]){var c=xh.ziyuFileData[e];return void r.onLoaded(c)}if(xh.getFileInfo(Cs.formatURL(e))){var u=xh.getFileInfo(Cs.formatURL(e));u.encoding=null==u.encoding?"utf8":u.encoding;var d=xh.getFileNativePath(u.md5);xh.readFile(d,u.encoding,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),Cs.formatURL(e))}else{if(xh.isLocalNativeFile(e)){if(wh.subNativeFiles&&0==wh.subNativeheads.length)for(var p in wh.subNativeFiles){var f=wh.subNativeFiles[p];wh.subNativeheads=wh.subNativeheads.concat(f);for(var _=0;_<f.length;_++)wh.subMaps[f[_]]=p+"/"+f[_]}if(wh.subNativeFiles&&-1!=e.indexOf("/")){var m=e.split("/")[0]+"/";if(m&&-1!=wh.subNativeheads.indexOf(m)){var g=wh.subMaps[m];e=e.replace(m,g)}}return void xh.read(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]))}var v=e,y=Cs.formatURL(e);-1!=y.indexOf(wh.window.bl.env.USER_DATA_PATH)||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||wh.AutoCacheDownFile?(u=xh.getFileInfo(e),u?(u.encoding=null==u.encoding?"utf8":u.encoding,xh.readFile(u.url,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e)):"image"==r.type||"htmlimage"==r.type?wh.EnvConfig.load.call(r,e,i,n,o,s):(e=Cs.formatURL(e),"image"!=i&&(-1==e.indexOf("http://")&&-1==e.indexOf("https://")||xh.isLocalNativeFile(e))?xh.readFile(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e):xh.downFiles(encodeURI(e),a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e,n))):wh.EnvConfig.load.call(r,v,i,n,o,s)}}},t.onReadNativeCallBack=function(e,t,i,n,o,s,r,a,l){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=0),a)1==a&&(console.log("-----------本地加载失败，尝试外网加载----"),wh.EnvConfig.load.call(r,t,i,n,o,s));else{var h;h="json"==i||"atlas"==i?wh.getJson(l.data):"xml"==i?Dr.parseXMLFromString(l.data):l.data,!wh.isZiYu&&wh.isPosMsgYu&&"arraybuffer"!=i&&wh.window.bl&&wh.window.bl.postMessage({url:t,data:h,isLoad:"filedata"}),r.onLoaded(h)}},n(t,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),t}(l),Ju=function(e){function t(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,t.__super.call(this)}o(t,"laya.bili.mini.MiniSound",e,"MiniSound$7");var i=t.prototype;return i.load=function(e){if(xh.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=xh.loadPath)e=e.split(xh.loadPath)[1];else{var i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;""!=i&&(e=e.split(i)[1])}}else e=Cs.formatURL(e);if(this.url=e,this.readyUrl=e,t._audioCache[this.readyUrl])return void this.event("complete");if(wh.autoCacheFile&&xh.getFileInfo(e))this.onDownLoadCallBack(e,0);else if(wh.autoCacheFile)if(xh.isLocalNativeFile(e)){i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;var n=e;if(""!=i&&(e=e.split(i)[1]),e||(e=n),wh.subNativeFiles&&0==wh.subNativeheads.length)for(var o in wh.subNativeFiles){var s=wh.subNativeFiles[o];wh.subNativeheads=wh.subNativeheads.concat(s);for(var r=0;r<s.length;r++)wh.subMaps[s[r]]=o+"/"+s[r]}if(wh.subNativeFiles&&-1!=e.indexOf("/")){var a=e.split("/")[0]+"/";if(a&&-1!=wh.subNativeheads.indexOf(a)){var l=wh.subMaps[a];e=e.replace(a,l)}}this.onDownLoadCallBack(e,0)}else xh.downOtherFiles(e,h.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)},i.onDownLoadCallBack=function(e,i){if(i)this.event("error");else{var n;if(wh.autoCacheFile){var o=xh.getFileInfo(e);if(o&&o.md5){var s=o.md5;n=xh.getFileNativePath(s)}else n=e;this._sound=t._createSound(),this._sound.src=this.url=n}else this._sound=t._createSound(),this._sound.src=e;this._sound.onCanplay(t.bindToThis(this.onCanPlay,this)),this._sound.onError(t.bindToThis(this.onError,this))}},i.onError=function(e){try{console.log("-----1---------------minisound-----id:"+t._id),console.log(e)}catch(e){console.log("-----2---------------minisound-----id:"+t._id),console.log(e)}this.event("error"),this._sound.offError(t.bindToThis(this.onError,this))},i.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay(t.bindToThis(this.onCanPlay,this))},i.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(this.url==jh._tMusic?(t._musicAudio||(t._musicAudio=t._createSound()),n=t._musicAudio):n=t._audioCache[this.readyUrl]?t._audioCache[this.readyUrl]._sound:t._createSound(),wh.autoCacheFile&&xh.getFileInfo(this.url)){var o=xh.getFileInfo(this.url),s=o.md5;n.src=this.url=xh.getFileNativePath(s)}else n.src=this.url;var r=new Nx(n,this);return r.url=this.url,r.loops=i,r.loop=0===i,r.startTime=e,r.play(),jh.addChannel(r),r},i.dispose=function(){var e=t._audioCache[this.readyUrl];e&&(e.src="",e._sound&&(e._sound.destroy(),e._sound=null,e=null),delete t._audioCache[this.readyUrl])},s(0,i,"duration",function(){return this._sound.duration}),t._createSound=function(){return t._id++,wh.window.bl.createInnerAudioContext()},t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t._musicAudio=null,t._id=0,t._audioCache={},t}(l),$u=function(e){function t(){t.__super.call(this)}o(t,"laya.tt.mini.MiniLoader",e,"MiniLoader$8");var i=t.prototype;return i.load=function(e,i,n,o,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var r=this;if(r._url=e,0===e.indexOf("data:image")?r._type=i="image":r._type=i||(i=r.getTypeFromUrl(e)),r._cache=n,r._data=null,!s&&Tu.loadedMap[Cs.formatURL(e)])return r._data=Tu.loadedMap[Cs.formatURL(e)],this.event("progress",1),void this.event("complete",r._data);if(null!=Tu.parserMap[i])return r._customParse=!0,void(Tu.parserMap[i]instanceof laya.utils.Handler?Tu.parserMap[i].runWith(this):Tu.parserMap[i].call(null,this));var a=Uh.getUrlEncode(e,i),l=Dr.getFileExtension(e);if(-1!=t._fileTypeArr.indexOf(l)||"image"==i)Uh.EnvConfig.load.call(this,e,i,n,o,s);else{if(Uh.isZiYu&&!Wh.ziyuFileData[e]&&(e=Cs.formatURL(e)),Uh.isZiYu&&Wh.ziyuFileData[e]){var c=Wh.ziyuFileData[e];return void r.onLoaded(c)}if(Wh.getFileInfo(Cs.formatURL(e))){var u=Wh.getFileInfo(Cs.formatURL(e));u.encoding=null==u.encoding?"utf8":u.encoding;var d=Wh.getFileNativePath(u.md5);Wh.readFile(d,u.encoding,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),Cs.formatURL(e))}else{if(Wh.isLocalNativeFile(e)){if(Uh.subNativeFiles&&0==Uh.subNativeheads.length)for(var p in Uh.subNativeFiles){var f=Uh.subNativeFiles[p];Uh.subNativeheads=Uh.subNativeheads.concat(f);for(var _=0;_<f.length;_++)Uh.subMaps[f[_]]=p+"/"+f[_]}if(Uh.subNativeFiles&&-1!=e.indexOf("/")){var m=e.split("/")[0]+"/";if(m&&-1!=Uh.subNativeheads.indexOf(m)){var g=Uh.subMaps[m];e=e.replace(m,g)}}return void("sound"==i?r._loadSound(e):Wh.read(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r])))}var v=e,y=Cs.formatURL(e);-1!=y.indexOf(Uh.window.tt.env.USER_DATA_PATH)||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||Uh.AutoCacheDownFile?(u=Wh.getFileInfo(e),u?(u.encoding=null==u.encoding?"utf8":u.encoding,Wh.readFile(u.url,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e)):"image"==r.type||"htmlimage"==r.type?Uh.EnvConfig.load.call(r,e,i,n,o,s):(e=Cs.formatURL(e),"image"!=i&&(-1==e.indexOf("http://")&&-1==e.indexOf("https://")||Wh.isLocalNativeFile(e))?Wh.readFile(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e):Wh.downFiles(encodeURI(e),a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e,!0))):"sound"==i?r._loadSound(e):Uh.EnvConfig.load.call(r,v,i,n,o,s)}}},i._loadSound=function(e){var i,n=this;if(Wh.isLocalNativeFile(e)){var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=e;""==o||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(i=e.split(o)[1]),i||(i=s),laya.tt.mini.MiniLoader.onDownLoadCallBack(e,n,0)}else{var r=Cs.formatURL(e);!Wh.isLocalNativeFile(e)&&-1==r.indexOf("http://")&&-1==r.indexOf("https://")||-1!=r.indexOf(Uh.window.tt.env.USER_DATA_PATH)?laya.tt.mini.MiniLoader.onDownLoadCallBack(e,n,0):Wh.downOtherFiles(encodeURI(r),h.create(t,laya.tt.mini.MiniLoader.onDownLoadCallBack,[r,n]),r)}},t.onDownLoadCallBack=function(e,t,i,n){if(i)t.event("error","Load sound failed");else{var o;if(Uh.autoCacheFile)if(n)o=n;else if(Wh.isLocalNativeFile(e)){var s=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,r=e;""==s||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(o=e.split(s)[1]),o||(o=r)}else{var a=Wh.getFileInfo(e);if(a&&a.md5){var l=a.md5;o=Wh.getFileNativePath(l)}else o=e}e=o;var h=new jh._soundClass;h.load(encodeURI(e)),t.onLoaded(h)}},t.onReadNativeCallBack=function(e,t,i,n,o,s,r,a,l){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=0),a)1==a&&(console.log("-----------本地加载失败，尝试外网加载----url:"+t),Uh.EnvConfig.load.call(r,t,i,n,o,s));else{var h;h="json"==i||"atlas"==i?Uh.getJson(l.data):"xml"==i?Dr.parseXMLFromString(l.data):l.data,!Uh.isZiYu&&Uh.isPosMsgYu&&"arraybuffer"!=i&&Uh.window.tt&&Uh.window.tt.postMessage({url:t,data:h,isLoad:"filedata"}),r.onLoaded(h)}},n(t,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),t}(l),ed=function(e){function t(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,t.__super.call(this)}o(t,"laya.tt.mini.MiniSound",e,"MiniSound$8");var i=t.prototype;return i.load=function(e){if(Wh.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=Wh.loadPath)e=e.split(Wh.loadPath)[1];else{var i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;""!=i&&(e=e.split(i)[1])}}else e=Cs.formatURL(e);if(this.url=e,this.readyUrl=e,t._audioCache[this.readyUrl])return void this.event("complete");if(Uh.autoCacheFile&&Wh.getFileInfo(e))this.onDownLoadCallBack(e,0);else if(Uh.autoCacheFile)if(Wh.isLocalNativeFile(e)){i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;var n=e;if(""!=i&&(e=e.split(i)[1]),e||(e=n),Uh.subNativeFiles&&0==Uh.subNativeheads.length)for(var o in Uh.subNativeFiles){var s=Uh.subNativeFiles[o];Uh.subNativeheads=Uh.subNativeheads.concat(s);for(var r=0;r<s.length;r++)Uh.subMaps[s[r]]=o+"/"+s[r]}if(Uh.subNativeFiles&&-1!=e.indexOf("/")){var a=e.split("/")[0]+"/";if(a&&-1!=Uh.subNativeheads.indexOf(a)){var l=Uh.subMaps[a];e=e.replace(a,l)}}this.onDownLoadCallBack(e,0)}else Wh.downOtherFiles(encodeURI(e),h.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)},i.onDownLoadCallBack=function(e,i){if(i)this.event("error");else{var n;if(Uh.autoCacheFile){if(Wh.isLocalNativeFile(e)){var o=""!=Cs.rootPath?Cs.rootPath:Cs.basePath,s=e;""==o||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(n=e.split(o)[1]),n||(n=s)}else{var r=Wh.getFileInfo(e);if(r&&r.md5){var a=r.md5;n=Wh.getFileNativePath(a)}else n=encodeURI(e)}this._sound=t._createSound(),this._sound.src=this.url=n}else this._sound=t._createSound(),this._sound.src=encodeURI(e);this._sound.onCanplay(t.bindToThis(this.onCanPlay,this)),this._sound.onError(t.bindToThis(this.onError,this))}},i.onError=function(e){this.event("error"),this._sound.offError(null)},i.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay(null)},i.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(this.url==jh._tMusic?(t._musicAudio||(t._musicAudio=t._createSound()),n=t._musicAudio):n=t._audioCache[this.readyUrl]?t._audioCache[this.readyUrl]._sound:t._createSound(),Uh.autoCacheFile&&Wh.getFileInfo(this.url)){var o=Wh.getFileInfo(this.url),s=o.md5;n.src=this.url=Wh.getFileNativePath(s)}else n.src=encodeURI(this.url);var r=new kx(n,this);return r.url=this.url,r.loops=i,r.loop=0===i,r.startTime=e,r.play(),jh.addChannel(r),r},i.dispose=function(){var e=t._audioCache[this.readyUrl];e&&(e.src="",e._sound&&(e._sound.destroy(),e._sound=null,e=null),delete t._audioCache[this.readyUrl]),this._sound&&(this._sound.destroy(),this._sound=null),this.url=this.readyUrl=null},s(0,i,"duration",function(){return this._sound.duration}),t._createSound=function(){return t._id++,Uh.window.tt.createInnerAudioContext()},t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t._musicAudio=null,t._id=0,t._audioCache={},t}(l),td=function(e){function t(){this.url=null,this.audio=null,this.loaded=!1,t.__super.call(this)}o(t,"laya.media.h5audio.AudioSound",e);var i=t.prototype;return i.dispose=function(){var e=t._audioCache[this.url];Hr.clearBySign("audio:"+this.url),e&&(Ns.isConchApp||(e.src=""),delete t._audioCache[this.url])},i.load=function(e){function i(){o(),r.loaded=!0,r.event("complete")}function n(){s.load=null,o(),r.event("error")}function o(){s.removeEventListener("canplaythrough",i),s.removeEventListener("error",n)}e=Cs.formatURL(e),this.url=e;var s;if(e==jh._tMusic?(t._initMusicAudio(),s=t._musicAudio,s.src!=e&&(delete t._audioCache[s.src],s=null)):s=t._audioCache[e],s&&s.readyState>=2)return void this.event("complete");s||(e==jh._tMusic?(t._initMusicAudio(),s=t._musicAudio):s=Or.createElement("audio"),t._audioCache[e]=s,s.src=e),s.addEventListener("canplaythrough",i),s.addEventListener("error",n);var r=this;this.audio=s,s.load?s.load():n()},i.play=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),!this.url)return null;var n;if(this.url==jh._tMusic?(n=t._musicAudio,""!=n.src&&n.src!=this.url&&(delete t._audioCache[n.src],t._audioCache[this.url]=n)):n=t._audioCache[this.url],!n)return null;var o;o=Hr.getItem("audio:"+this.url),Ns.isConchApp?o||(o=Or.createElement("audio"),o.src=this.url):this.url==jh._tMusic?(t._initMusicAudio(),o=t._musicAudio,o.src=this.url):o=o?o:n.cloneNode(!0);var s=new Wx(o);return s.url=this.url,s.loops=i,s.startTime=e,s.play(),jh.addChannel(s),s},s(0,i,"duration",function(){var e;return e=t._audioCache[this.url],e?e.duration:0}),t._initMusicAudio=function(){t._musicAudio||(t._musicAudio||(t._musicAudio=Or.createElement("audio")),Ns.isConchApp||Or.document.addEventListener("mousedown",t._makeMusicOK))},t._makeMusicOK=function(){
Or.document.removeEventListener("mousedown",t._makeMusicOK),t._musicAudio.src?t._musicAudio.play():(t._musicAudio.src="",t._musicAudio.load())},t._audioCache={},t._musicAudio=null,t}(l),id=function(e){function t(){t.__super.call(this)}o(t,"laya.media.Sound",e);var i=t.prototype;return i.load=function(e){},i.play=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),null},i.dispose=function(){},s(0,i,"duration",function(){return 0}),t}(l),nd=function(e){function t(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,t.__super.call(this)}o(t,"laya.media.webaudio.WebAudioSound",e);var i=t.prototype;return i.load=function(e){var i=this;if(e=Cs.formatURL(e),this.url=e,this.audioBuffer=t._dataCache[e],this.audioBuffer)return void this._loaded(this.audioBuffer);if(t.e.on("loaded:"+e,this,this._loaded),t.e.on("err:"+e,this,this._err),!t.__loadingSound[e]){t.__loadingSound[e]=!0;var n=new Or.window.XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){return i._disposed?void i._removeLoadEvents():(i.data=n.response,t.buffs.push({buffer:i.data,url:i.url}),void t.decode())},n.onerror=function(e){i._err()},n.send()}},i._err=function(){if(this._removeLoadEvents(),t.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var e,i=0,n=0;e=this.__toPlays,n=e.length;var o;for(i=0;n>i;i++)o=e[i],o[2]&&!o[2].isStopped&&o[2].event("error");this.__toPlays.length=0}},i._loaded=function(e){this._removeLoadEvents(),this._disposed||(this.audioBuffer=e,t._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"))},i._removeLoadEvents=function(){t.e.off("loaded:"+this.url,this,this._loaded),t.e.off("err:"+this.url,this,this._err)},i.__playAfterLoaded=function(){if(this.__toPlays){var e,t=0,i=0;e=this.__toPlays,i=e.length;var n;for(t=0;i>t;t++)n=e[t],n[2]&&!n[2].isStopped&&this.play(n[0],n[1],n[2]);this.__toPlays.length=0}},i.play=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),i=i?i:new Yx,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([e,t,i]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),i.url=this.url,i.loops=t,i.audioBuffer=this.audioBuffer,i.startTime=e,i.play(),jh.addChannel(i),i},i.dispose=function(){this._disposed=!0,delete t._dataCache[this.url],delete t.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},s(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),t.decode=function(){t.buffs.length<=0||t.isDecoding||(t.isDecoding=!0,t.tInfo=t.buffs.shift(),t.ctx.decodeAudioData(t.tInfo.buffer,t._done,t._fail))},t._done=function(e){t.e.event("loaded:"+t.tInfo.url,e),t.isDecoding=!1,t.decode()},t._fail=function(){t.e.event("err:"+t.tInfo.url,null),t.isDecoding=!1,t.decode()},t._playEmptySound=function(){if(null!=t.ctx){var e=t.ctx.createBufferSource();e.buffer=t._miniBuffer,e.connect(t.ctx.destination),e.start(0,0,0)}},t._unlock=function(){t._unlocked||(t._playEmptySound(),"running"==t.ctx.state&&(Or.document.removeEventListener("mousedown",t._unlock,!0),Or.document.removeEventListener("touchend",t._unlock,!0),Or.document.removeEventListener("touchstart",t._unlock,!0),t._unlocked=!0))},t.initWebAudio=function(){"running"!=t.ctx.state&&(t._unlock(),Or.document.addEventListener("mousedown",t._unlock,!0),Or.document.addEventListener("touchend",t._unlock,!0),Or.document.addEventListener("touchstart",t._unlock,!0))},t._dataCache={},t.buffs=[],t.isDecoding=!1,t._unlocked=!1,t.tInfo=null,t.__loadingSound={},n(t,["window",function(){return this.window=Or.window},"webAudioEnabled",function(){return this.webAudioEnabled=t.window.AudioContext||t.window.webkitAudioContext||t.window.mozAudioContext},"ctx",function(){return this.ctx=t.webAudioEnabled?new(t.window.AudioContext||t.window.webkitAudioContext||t.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=t.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new l}]),t}(l),od=function(e){function t(){t.__super.call(this)}o(t,"laya.qq.mini.MiniLoader",e,"MiniLoader$11");var i=t.prototype;return i.load=function(e,i,n,o,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var r=this;if(r._url=e,0===e.indexOf("data:image")?r._type=i="image":r._type=i||(i=r.getTypeFromUrl(e)),r._cache=n,r._data=null,!s&&Tu.loadedMap[Cs.formatURL(e)])return r._data=Tu.loadedMap[Cs.formatURL(e)],this.event("progress",1),void this.event("complete",r._data);if(null!=Tu.parserMap[i])return r._customParse=!0,void(Tu.parserMap[i]instanceof laya.utils.Handler?Tu.parserMap[i].runWith(this):Tu.parserMap[i].call(null,this));var a=tc.getUrlEncode(e,i),l=Dr.getFileExtension(e);if(-1!=t._fileTypeArr.indexOf(l)||"image"==i)tc.EnvConfig.load.call(this,e,i,n,o,s);else{if(tc.isZiYu&&!$h.ziyuFileData[e]&&(e=Cs.formatURL(e)),tc.isZiYu&&$h.ziyuFileData[e]){var c=$h.ziyuFileData[e];return void r.onLoaded(c)}if($h.getFileInfo(Cs.formatURL(e))){var u=$h.getFileInfo(Cs.formatURL(e));u.encoding=null==u.encoding?"utf8":u.encoding;var d=$h.getFileNativePath(u.md5);$h.readFile(d,u.encoding,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),Cs.formatURL(e))}else{if($h.isLocalNativeFile(e)){if(tc.subNativeFiles&&0==tc.subNativeheads.length)for(var p in tc.subNativeFiles){var f=tc.subNativeFiles[p];tc.subNativeheads=tc.subNativeheads.concat(f);for(var _=0;_<f.length;_++)tc.subMaps[f[_]]=p+"/"+f[_]}if(tc.subNativeFiles&&-1!=e.indexOf("/")){var m=e.split("/")[0]+"/";if(m&&-1!=tc.subNativeheads.indexOf(m)){var g=tc.subMaps[m];e=e.replace(m,g)}}return void $h.read(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]))}var v=e,y=Cs.formatURL(e);-1!=y.indexOf(tc.window.qq.env.USER_DATA_PATH)||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||tc.AutoCacheDownFile?(u=$h.getFileInfo(e),u?(u.encoding=null==u.encoding?"utf8":u.encoding,$h.readFile(u.url,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e)):"image"==r.type||"htmlimage"==r.type?tc.EnvConfig.load.call(r,e,i,n,o,s):(e=Cs.formatURL(e),"image"!=i&&(-1==e.indexOf("http://")&&-1==e.indexOf("https://")||$h.isLocalNativeFile(e))?$h.readFile(e,a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e):$h.downFiles(encodeURI(e),a,new h(t,t.onReadNativeCallBack,[a,e,i,n,o,s,r]),e,n))):tc.EnvConfig.load.call(r,v,i,n,o,s)}}},t.onReadNativeCallBack=function(e,t,i,n,o,s,r,a,l){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=0),a)1==a&&(console.log("-----------本地加载失败，尝试外网加载----"),tc.EnvConfig.load.call(r,t,i,n,o,s));else{var h;h="json"==i||"atlas"==i?tc.getJson(l.data):"xml"==i?Dr.parseXMLFromString(l.data):l.data,!tc.isZiYu&&tc.isPosMsgYu&&"arraybuffer"!=i&&tc.window.qq&&tc.window.qq.postMessage({url:t,data:h,isLoad:"filedata"}),r.onLoaded(h)}},n(t,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),t}(l),sd=function(e){function t(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,t.__super.call(this)}o(t,"laya.qq.mini.MiniSound",e,"MiniSound$11");var i=t.prototype;return i.load=function(e){if($h.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=$h.loadPath)e=e.split($h.loadPath)[1];else{var i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;""!=i&&(e=e.split(i)[1])}}else e=Cs.formatURL(e);if(this.url=e,this.readyUrl=e,t._audioCache[this.readyUrl])return void this.event("complete");if(tc.autoCacheFile&&$h.getFileInfo(e))this.onDownLoadCallBack(e,0);else if(tc.autoCacheFile)if($h.isLocalNativeFile(e)){i=""!=Cs.rootPath?Cs.rootPath:Cs.basePath;var n=e;if(""!=i&&(e=e.split(i)[1]),e||(e=n),tc.subNativeFiles&&0==tc.subNativeheads.length)for(var o in tc.subNativeFiles){var s=tc.subNativeFiles[o];tc.subNativeheads=tc.subNativeheads.concat(s);for(var r=0;r<s.length;r++)tc.subMaps[s[r]]=o+"/"+s[r]}if(tc.subNativeFiles&&-1!=e.indexOf("/")){var a=e.split("/")[0]+"/";if(a&&-1!=tc.subNativeheads.indexOf(a)){var l=tc.subMaps[a];e=e.replace(a,l)}}this.onDownLoadCallBack(e,0)}else $h.downOtherFiles(e,h.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)},i.onDownLoadCallBack=function(e,i){if(i)this.event("error");else{var n;if(tc.autoCacheFile){var o=$h.getFileInfo(e);if(o&&o.md5){var s=o.md5;n=$h.getFileNativePath(s)}else n=e;this._sound=t._createSound(),this._sound.src=this.url=n}else this._sound=t._createSound(),this._sound.src=e;this._sound.onCanplay(t.bindToThis(this.onCanPlay,this)),this._sound.onError(t.bindToThis(this.onError,this))}},i.onError=function(e){try{console.log("-----1---------------minisound-----id:"+t._id),console.log(e)}catch(e){console.log("-----2---------------minisound-----id:"+t._id),console.log(e)}this.event("error"),this._sound.offError(null)},i.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay(null)},i.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(this.url==jh._tMusic?(t._musicAudio||(t._musicAudio=t._createSound()),n=t._musicAudio):n=t._audioCache[this.readyUrl]?t._audioCache[this.readyUrl]._sound:t._createSound(),tc.autoCacheFile&&$h.getFileInfo(this.url)){var o=$h.getFileInfo(this.url),s=o.md5;n.src=this.url=$h.getFileNativePath(s)}else n.src=this.url;var r=new qx(n,this);return r.url=this.url,r.loops=i,r.loop=0===i,r.startTime=e,r.play(),jh.addChannel(r),r},i.dispose=function(){var e=t._audioCache[this.readyUrl];e&&(e.src="",e._sound&&(e._sound.destroy(),e._sound=null,e=null),delete t._audioCache[this.readyUrl])},s(0,i,"duration",function(){return this._sound.duration}),t._createSound=function(){return t._id++,tc.window.qq.createInnerAudioContext()},t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t._musicAudio=null,t._id=0,t._audioCache={},t}(l),rd=function(e){function t(e){this.equipConf=null,this.baseAttr=null,this.exAttr=null,this.spAttr=null,this.liveAttr=null,this.creatAttr=null,this.baseForStar=null,t.__super.call(this,e),this.equipConf=g.database.getData("equip",this.baseId)}o(t,"modules.goods.model.data.PackEquip",e);var n=t.prototype;return n.updateForOption=function(e){e.baseId>0&&this.baseId!=e.baseId&&(this.baseId=e.baseId),this.analyzeAttrs(e.attrs)},n.canCreatAttr=function(){return 8==this.equipConf.position||9==this.equipConf.position||10==this.equipConf.position?!1:this.quality>=4&&0==this.creatAttr.length},n.canEnchanment=function(){return 8==this.equipConf.position||9==this.equipConf.position||10==this.equipConf.position},n.canRebuild=function(){return 8==this.equipConf.position||9==this.equipConf.position||10==this.equipConf.position?this.quality>1:!1},n.analyzeAttrs=function(e){this.baseAttr=[],this.exAttr=[],this.spAttr=[],this.liveAttr=[],this.creatAttr=[],this.baseForStar=new uo;var t,i;for(var n in e)switch(i=e[n],i.id){case 0:this.baseAttr.push(i),this.baseForStar.set(i.key,i.value);break;case 1:this.exAttr.push(i),t=this.baseForStar.get(i.key),t&&this.baseForStar.set(i.key,t+i.value);break;case 2:this.spAttr.push(i),t=this.baseForStar.get(i.key),t&&this.baseForStar.set(i.key,t+i.value);break;case 3:this.liveAttr.push(i),t=this.baseForStar.get(i.key),t&&this.baseForStar.set(i.key,t+i.value);break;case 4:this.creatAttr.push(i),t=this.baseForStar.get(i.key),t&&this.baseForStar.set(i.key,t+i.value);break;default:console.log("error EquipAttrIdType:",i.id)}},n.updateDhAttribute=function(e){if(!(null!=this.creatAttr&&this.creatAttr.length>0)){this.creatAttr=[];var t;for(var i in e)if(t=e[i],4==t.id){this.creatAttr.push(t);var n=this.baseForStar.get(t.key);n&&this.baseForStar.set(t.key,n+t.value)}}},s(0,n,"iconPath",function(){return"img/equip/"+this.equipConf.icon+".png"}),s(0,n,"baseId",e.prototype._$get_baseId,function(e){i.superSet(Mn,this,"baseId",e),this.equipConf=g.database.getData("equip",this.baseId)}),t}(Mn),ad=function(e){function t(e){this.talismanConf=null,this.baseAttr=null,this.creatAttr=null,t.__super.call(this,e),this.talismanConf=g.database.getData("talisman",this.baseId)}o(t,"modules.goods.model.data.PackTalisman",e);var i=t.prototype;return i.analyzeAttrs=function(e){this.baseAttr=[],this.creatAttr=[];var t;for(var i in e)switch(t=e[i],t.id){case 0:this.baseAttr.push(t);break;case 4:this.creatAttr.push(t);break;default:console.log("error TalismanAttrIdType:",t.id)}},i.updateForOption=function(e){this.quality=e.quality,this.analyzeAttrs(e.attrs),this.baseId!=e.baseId&&(this.baseId=e.baseId,this.talismanConf=g.database.getData("talisman",this.baseId))},i.getPrice=function(){return t.getPriceBy(this.quality)},t.getPriceBy=function(e){switch(e){case 1:return 3e4;case 2:return 6e4;case 3:return 9e4;case 4:return 12e4;case 5:return 15e4}return 0},t}(Mn),ld=function(e){function t(e){this.propConf=null,this.operLock=!1,this.baseAttr=null,this._$1_expiration=null,this._serverExpirateTime=null,this.countTmp=0,t.__super.call(this,e),this._initConfig()}o(t,"modules.goods.model.data.PackProp",e);var n=t.prototype;return n._initConfig=function(){this.propConf=g.database.getData("props",this.baseId),null==this.propConf&&(console.log("初始道具，未找到配置，baseId:"+this.baseId),null==t.NONE_CFG&&(t.NONE_CFG=new ko,t.NONE_CFG.type=-1),this.propConf=t.NONE_CFG)},n.updateBaseIdAndQuality=function(e,t){this.baseId=e,this.quality=t},n.analyzeAttrs=function(e){this.baseAttr=e},n.resetCountTmp=function(){return this.countTmp=this.count,this},s(0,n,"iconPath",function(){return t.getIconPath(this.propConf)}),s(0,n,"serverExpirateTime",function(){return this._serverExpirateTime}),s(0,n,"isPassTime",function(){return null!=this.serverExpirateTime&&i.timer.currTimer/1e3>=this.serverExpirateTime.getTime()}),s(0,n,"isIdentify",function(){return 2==this.propConf.propType?this.baseAttr.length>0:18==this.propConf.propType?this.baseAttr.length>0:!1}),s(0,n,"expirateTime",function(){return this._$1_expiration},function(e){this._serverExpirateTime=e,this._$1_expiration=e}),s(0,n,"needIdentify",function(){return 2==this.propConf.propType&&this.propConf.level>35?!this.isIdentify:18==this.propConf.propType?!this.isIdentify:!1}),s(0,n,"baseId",e.prototype._$get_baseId,function(e){i.superSet(Mn,this,"baseId",e),this._initConfig()}),t.getIconPath=function(e){return"img/articles/"+e.icon+".png"},t.NONE_CFG=null,t}(Mn),hd=function(e){function t(e){this.pos=0,this.prefix=0,this.nature=0,this.extAttr=null,this.countTmp=0,t.__super.call(this,e),this.pos=vo["int"](this.baseId/1e4),this.prefix=vo["int"](this.baseId%1e4/100),this.nature=this.baseId%10}o(t,"modules.goods.model.data.PackPetEquip",e);var i=t.prototype;return i.analyzeAttrs=function(e){this.extAttr=e},i.updateForIdentify=function(e){this.quality=e.quality,this.analyzeAttrs(e.attrs)},i.resetCountTmp=function(){return this.countTmp=this.count,this},s(0,i,"baseCfg",function(){return g.database.getData("petequipbase",this.pos)}),s(0,i,"extCfg",function(){return g.database.getData("petequipext",this.prefix)}),s(0,i,"isIdentify",function(){return this.quality<=1?!0:null!=this.extAttr&&this.extAttr.length>0}),t}(Mn),cd=function(e){function t(e){this._demonConf=null,t.__super.call(this,e)}o(t,"modules.goods.model.data.PackDemon",e);var n=t.prototype;return n.analyzeAttrs=function(e){},s(0,n,"demonConf",function(){return null==this._demonConf&&(this._demonConf=g.database.getData("demon",this.baseId)),this._demonConf}),s(0,n,"baseId",e.prototype._$get_baseId,function(e){i.superSet(Mn,this,"baseId",e),this._demonConf=null}),t}(Mn),ud=function(e){function t(e){t.__super.call(this),e||(e=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var i=0,n=0,o=0;20>o;o++)o%5!=4?this._mat[i++]=e[o]:this._alpha[n++]=e[o];this._action=a.createFilterAction(32),this._action.data=this}o(t,"laya.filters.ColorFilter",e);var n=t.prototype;return i.imps(n,{"laya.filters.IFilter":!0}),n.callNative=function(e){e._$P.cf=this;e.conchModel&&e.conchModel.setFilterMatrix&&e.conchModel.setFilterMatrix(this._mat,this._alpha)},s(0,n,"action",function(){return this._action}),s(0,n,"type",function(){return 32}),t}(cs),dd=function(e){function t(){this.data=null,t.__super.call(this)}o(t,"laya.filters.webgl.ColorFilterActionGL",e);var n=t.prototype;return i.imps(n,{"laya.filters.IFilterActionGL":!0}),n.setValue=function(e){e.colorMat=this.data._mat,e.colorAlpha=this.data._alpha},n.apply3d=function(e,t,i,n,o){var s=e.getValue("bounds"),r=wd.create(1,0);r.setFilters([this.data]);var a=Ph.TEMP;a.identity(),i.ctx.drawTarget(e,0,0,s.width,s.height,a,"src",r)},t}(us),pd=function(e){function t(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,t.__super.call(this)}o(t,"laya.ui.AutoBitmap",e);var n=t.prototype;return n.destroy=function(){e.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},n._setChanged=function(){this._isChanged||(this._isChanged=!0,i.timer.callLater(this,this.changeSource))},n.changeSource=function(){this._isChanged=!1;var e=this._source;if(e&&e.bitmap){var i=this.width,n=this.height,o=this._sizeGrid,s=e.sourceWidth,r=e.sourceHeight;if(!o||s===i&&r===n)this.clear(),this.drawTexture(e,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,i,n);else{e.$_GID||(e.$_GID=Dr.getGID());var a=e.$_GID+"."+i+"."+n+"."+o.join(".");if(Dr.isOKCmdList(Gr.I.get(a)))return void(this.cmds=Gr.I.get(a));this.clear();var l=o[0],h=o[1],c=o[2],u=o[3],d=o[4],p=!1;if(i==s&&(u=h=0),n==r&&(l=c=0),u+h>i){var f=i;p=!0,i=u+h,this.save(),this.clipRect(0,0,f,n)}u&&l&&this.drawTexture(t.getTexture(e,0,0,u,l),0,0,u,l),h&&l&&this.drawTexture(t.getTexture(e,s-h,0,h,l),i-h,0,h,l),u&&c&&this.drawTexture(t.getTexture(e,0,r-c,u,c),0,n-c,u,c),h&&c&&this.drawTexture(t.getTexture(e,s-h,r-c,h,c),i-h,n-c,h,c),l&&this.drawBitmap(d,t.getTexture(e,u,0,s-u-h,l),u,0,i-u-h,l),c&&this.drawBitmap(d,t.getTexture(e,u,r-c,s-u-h,c),u,n-c,i-u-h,c),u&&this.drawBitmap(d,t.getTexture(e,0,l,u,r-l-c),0,l,u,n-l-c),h&&this.drawBitmap(d,t.getTexture(e,s-h,l,h,r-l-c),i-h,l,h,n-l-c),this.drawBitmap(d,t.getTexture(e,u,l,s-u-h,r-l-c),u,l,i-u-h,n-l-c),p&&this.restore(),this.autoCacheCmd&&!Ns.isConchApp&&Gr.I.set(a,this.cmds)}this._repaint()}},n.drawBitmap=function(e,t,i,n,o,s){void 0===o&&(o=0),void 0===s&&(s=0),.1>o||.1>s||(!e||t.width==o&&t.height==s?this.drawTexture(t,i,n,o,s):this.fillTexture(t,i,n,o,s))},n.clear=function(t){void 0===t&&(t=!0),e.prototype.clear.call(this,!1)},s(0,n,"source",function(){return this._source},function(e){e?(this._source=e,this._setChanged()):(this._source=null,this.clear())}),s(0,n,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(e){this._height!=e&&(this._height=e,this._setChanged())}),s(0,n,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(e){this._width!=e&&(this._width=e,this._setChanged())}),s(0,n,"sizeGrid",function(){return this._sizeGrid},function(e){this._sizeGrid=e,this._setChanged()}),t.getTexture=function(e,t,i,n,o){0>=n&&(n=1),0>=o&&(o=1),e.$_GID||(e.$_GID=Dr.getGID());var s=e.$_GID+"."+t+"."+i+"."+n+"."+o,r=Gr.I.get(s);return r&&r.source||(r=Vu.createFromTexture(e,t,i,n,o),Gr.I.set(s,r)),r},t}(_s),fd=(function(e){function t(){t.__super.call(this)}return o(t,"laya.ui.UIEvent",e),t.SHOW_TIP="showtip",t.HIDE_TIP="hidetip",t}(ms),function(e){function t(){t.__super.call(this),this.mesh=new bs}o(t,"laya.ani.bone.canvasmesh.SkinMeshCanvas",e);var i=t.prototype;return i.init2=function(e,t,i,n,o){this.transform&&(this.transform=null);var s;i?s=i:(s=[],s.push(0,1,3,3,1,2)),this.mesh.texture=e,this.mesh.indexes=s,this.mesh.vertices=n,this.mesh.uvs=o},i.render=function(e,i,n){this.mesh.texture&&(this.transform?(this.transform.translate(i,n),this.renderToContext(e),this.transform.translate(-i,-n)):(this.transform=t._tempMatrix,this.transform.identity(),this.transform.translate(i,n),this.renderToContext(e),this.transform.translate(-i,-n),this.transform=null))},n(t,["_tempMatrix",function(){return this._tempMatrix=new Ph}]),t}(ys)),_d=function(e){function t(){t.__super.call(this)}o(t,"laya.webgl.display.GraphicsGL",e);var i=t.prototype;return i.setShader=function(e){this._saveToCmd(Ns.context._setShader,[e])},i.setIBVB=function(e,t,i,n,o,s){this._saveToCmd(Ns.context._setIBVB,[e,t,i,n,o,s])},i.drawParticle=function(e,t,i){var n=a.createParticleTemplate2D(i);n.x=e,n.y=t,this._saveToCmd(Ns.context._drawParticle,[n])},t}(_s),md=function(e){function t(e,i){t.__super.call(this,e,i)}o(t,"laya.webgl.utils.RenderSprite3D",e);var i=t.prototype;return i.onCreate=function(e){switch(e){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},i._mask=function(e,i,n,o){var s,r,a=this._next,l=e.mask;if(l){i.ctx.save();var h=i.ctx.globalCompositeOperation,c=new Ch;if(c.copyFrom(l.getBounds()),c.width=Math.round(c.width),c.height=Math.round(c.height),c.x=Math.round(c.x),c.y=Math.round(c.y),c.width>0&&c.height>0){var u=e._style._tf,d=qs.create();d.addValue("bounds",c),s=Gs.create([d,i],laya.webgl.utils.RenderSprite3D.tmpTarget),i.addRenderObject(s),l.render(i,-c.x,-c.y),s=Gs.create([d],laya.webgl.utils.RenderSprite3D.endTmpTarget),i.addRenderObject(s),i.ctx.save(),i.clipRect(n-u.translateX+c.x,o-u.translateY+c.y,c.width,c.height),a._fun.call(a,e,i,n,o),i.ctx.restore(),r=zs.create(6),h=i.ctx.globalCompositeOperation,r.blendMode="mask",i.addRenderObject(r),Ph.TEMP.identity();var p=wd.create(1,0),f=Vu.INV_UV,_=c.width,m=c.height,g=32;(c.width<g||c.height<g)&&(f=t.tempUV,f[0]=0,f[1]=0,f[2]=c.width>=32?1:c.width/g,f[3]=0,f[4]=c.width>=32?1:c.width/g,f[5]=c.height>=32?1:c.height/g,f[6]=0,f[7]=c.height>=32?1:c.height/g,c.width=c.width>=32?c.width:g,c.height=c.height>=32?c.height:g,f[1]*=-1,f[3]*=-1,f[5]*=-1,f[7]*=-1,f[1]+=1,f[3]+=1,f[5]+=1,f[7]+=1),i.ctx.drawTarget(d,n+c.x-u.translateX,o+c.y-u.translateY,_,m,Ph.TEMP,"tmpTarget",p,f,6),s=Gs.create([d],laya.webgl.utils.RenderSprite3D.recycleTarget),i.addRenderObject(s),r=zs.create(6),r.blendMode=h,i.addRenderObject(r)}i.ctx.restore()}else a._fun.call(a,e,i,n,o)},i._blend=function(e,t,i,n){var o=e._style,s=this._next;o.blendMode?(t.ctx.save(),t.ctx.globalCompositeOperation=o.blendMode,s._fun.call(s,e,t,i,n),t.ctx.restore()):s._fun.call(s,e,t,i,n)},i._transform=function(e,t,i,n){var o=e.transform,s=this._next;if(o&&s!=As.NORENDER){var r=t.ctx;e._style;o.tx=i,o.ty=n;var a=r._getTransformMatrix(),l=a.clone();Ph.mul(o,a,a),a._checkTransform(),o.tx=o.ty=0,s._fun.call(s,e,t,0,0),l.copyTo(a),l.destroy()}else s._fun.call(s,e,t,i,n)},t.tmpTarget=function(e,t){var i=e.getValue("bounds"),n=xx.create(i.width,i.height);n.start(),n.clear(0,0,0,0),e.addValue("tmpTarget",n)},t.endTmpTarget=function(e){var t=e.getValue("tmpTarget");t.end()},t.recycleTarget=function(e){var t=e.getValue("tmpTarget");t.recycle(),e.recycle()},n(t,["tempUV",function(){return this.tempUV=new Array(8)}]),t}(As),gd=function(e){function t(e){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===e&&(e=1e4),t.__super.call(this,e)}o(t,"laya.webgl.submit.SubmitTexture",e);var i=t.prototype;return i.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.shaderValue.release(),this._preIsSameTextureShader=!1,this._vb=null,this._texs.length=0,this._vbPos.length=0,this._isSameTexture=!0},i.addTexture=function(e,t){this._texsID[this._texs.length]=e._uvID,this._texs.push(e),this._vbPos.push(t)},i.checkTexture=function(){if(this._texs.length<1)return void(this._isSameTexture=!0);var e=this.shaderValue.textureHost,t=e.bitmap;if(null!==t)for(var i=this._vb.getFloat32Array(),n=0,o=this._texs.length;o>n;n++){var s=this._texs[n];s.active();var r=s.uv;if(this._texsID[n]!==s._uvID){this._texsID[n]=s._uvID;var a=this._vbPos[n];i[a+2]=r[0],i[a+3]=r[1],i[a+6]=r[2],i[a+7]=r[3],i[a+10]=r[4],i[a+11]=r[5],i[a+14]=r[6],i[a+15]=r[7],this._vb.setNeedUpload()}s.bitmap!==t&&(this._isSameTexture=!1)}},i.renderSubmit=function(){if(0===this._numEle)return t._shaderSet=!1,1;var e=this.shaderValue.textureHost;if(e){var i=e.source;if(!e.bitmap||!i)return t._shaderSet=!1,1;this.shaderValue.texture=i}this._vb.bind_upload(this._ib);var n=ur.mainContext;if(nr.activeBlendFunction!==this._blendFn&&(n.enable(3042),this._blendFn(n),nr.activeBlendFunction=this._blendFn),Nr.drawCall++,Nr.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&_x.activeShader&&t._shaderSet?_x.activeShader.uploadTexture2D(this.shaderValue.texture):this.shaderValue.upload(),t._shaderSet=!0,this._texs.length>1&&!this._isSameTexture)for(var o=e.bitmap,s=0,r=_x.activeShader,a=0,l=this._texs.length;l>a;a++){var h=this._texs[a];h.bitmap===o&&a+1!==l||(r.uploadTexture2D(h.source),n.drawElements(4,6*(a-s+1),5123,this._startIdx+6*s*Zs.BYTES_PIDX),o=h.bitmap,s=a)}else n.drawElements(4,this._numEle,5123,this._startIdx);return 1},t.create=function(e,i,n,o,s){var r=t._cache._length?t._cache[--t._cache._length]:new t;null==n&&(n=r._selfVb||(r._selfVb=yw.create(-1)),n.clear(),o=0),r._ib=i,r._vb=n,r._startIdx=o*Zs.BYTES_PIDX,r._numEle=0;var a=e._nBlendType;r._blendFn=e._targets?nr.targetFns[a]:nr.fns[a],r.shaderValue=s,r.shaderValue.setValue(e._shader2D);var l=e._shader2D.filters;return l&&r.shaderValue.setFilters(l),r},t._cache=(t._cache=[],t._cache._length=0,t._cache),t._shaderSet=!0,t}(Ys),vd=function(e){function t(){this._matrix=new Ph,this._matrix4=Zs.defaultMatrix4.concat(),t.__super.call(this,1e4),this.shaderValue=new wd(0,0)}o(t,"laya.webgl.submit.SubmitCanvas",e);var i=t.prototype;return i.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var e=Js.worldAlpha,t=Js.worldMatrix4,i=Js.worldMatrix,n=Js.worldFilters,o=Js.worldShaderDefines,s=this.shaderValue,r=this._matrix,a=this._matrix4,l=Ph.TEMP;return Ph.mul(r,i,l),a[0]=l.a,a[1]=l.b,a[4]=l.c,a[5]=l.d,a[12]=l.tx,a[13]=l.ty,Js.worldMatrix=l.clone(),Js.worldMatrix4=a,Js.worldAlpha=Js.worldAlpha*s.alpha,s.filters&&s.filters.length&&(Js.worldFilters=s.filters,Js.worldShaderDefines=s.defines),this._ctx_src.flush(),Js.worldAlpha=e,Js.worldMatrix4=t,Js.worldMatrix.destroy(),Js.worldMatrix=i,Js.worldFilters=n,Js.worldShaderDefines=o,1},i.releaseRender=function(){var e=t._cache;this._ctx_src=null,e[e._length++]=this},i.getRenderType=function(){return 10003},t.create=function(e,i,n){var o=t._cache._length?t._cache[--t._cache._length]:new t;o._ctx_src=e;var s=o.shaderValue;return s.alpha=i,s.defines.setValue(0),n&&n.length&&s.setFilters(n),o},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(Ys),yd=function(e){function t(e,i,n,o,s){this._points=[];for(var r=NaN,a=NaN,l=-1,h=-1,c=n.length/2-1,u=0;c>u;u++)r=n[2*u],a=n[2*u+1],(Math.abs(l-r)>.01||Math.abs(h-a)>.01)&&this._points.push(r,a),l=r,h=a;r=n[2*c],a=n[2*c+1],l=this._points[0],h=this._points[1],(Math.abs(l-r)>.01||Math.abs(h-a)>.01)&&this._points.push(r,a),t.__super.call(this,e,i,0,0,this._points.length/2,0,o,s)}o(t,"laya.webgl.shapes.LoopLine",e);var i=t.prototype;return i.getData=function(e,t,i){if(this.borderWidth>0){for(var n=this.color,o=(n>>16&255)/255,s=(n>>8&255)/255,r=(255&n)/255,a=[],l=0,h=0,c=[],u=Math.floor(this._points.length/2),d=0;u>d;d++)l=this._points[2*d],h=this._points[2*d+1],a.push(this.x+l,this.y+h,o,s,r);this.createLoopLine(a,c,this.borderWidth,i+a.length/5),e.append(new Uint16Array(c)),t.append(new Float32Array(a))}},i.createLoopLine=function(e,t,i,n,o,s){var r=(e.length/5,e.concat()),a=o?o:e,l=this.borderColor,h=(l>>16&255)/255,c=(l>>8&255)/255,u=(255&l)/255,d=[r[0],r[1]],p=[r[r.length-5],r[r.length-4]],f=p[0]+.5*(d[0]-p[0]),_=p[1]+.5*(d[1]-p[1]);r.unshift(f,_,0,0,0),r.push(f,_,0,0,0);var m,g,v,y,b,E,x,S,w,C,T,I,A,N,P,R,L,O,M,D,k,B=r.length/5,V=n,F=i/2;v=r[0],y=r[1],b=r[5],E=r[6],w=-(y-E),C=v-b,k=Math.sqrt(w*w+C*C),w=w/k*F,C=C/k*F,a.push(v-w,y-C,h,c,u,v+w,y+C,h,c,u);for(var G=1;B-1>G;G++)v=r[5*(G-1)],y=r[5*(G-1)+1],b=r[5*G],E=r[5*G+1],x=r[5*(G+1)],S=r[5*(G+1)+1],w=-(y-E),C=v-b,k=Math.sqrt(w*w+C*C),w=w/k*F,C=C/k*F,T=-(E-S),I=b-x,k=Math.sqrt(T*T+I*I),T=T/k*F,I=I/k*F,A=-C+y-(-C+E),N=-w+b-(-w+v),P=(-w+v)*(-C+E)-(-w+b)*(-C+y),R=-I+S-(-I+E),L=-T+b-(-T+x),O=(-T+x)*(-I+E)-(-T+b)*(-I+S),M=A*L-R*N,Math.abs(M)<.1?(M+=10.1,a.push(b-w,E-C,h,c,u,b+w,E+C,h,c,u)):(m=(N*O-L*P)/M,g=(R*P-A*O)/M,D=(m-b)*(m-b)+(g-E)+(g-E),a.push(m,g,h,c,u,b-(m-b),E-(g-E),h,c,u));s&&(t=s);var H=this.edges+1;for(G=1;H>G;G++)t.push(V+2*(G-1),V+2*(G-1)+1,V+2*G+1,V+2*G+1,V+2*G,V+2*(G-1));return t.push(V+2*(G-1),V+2*(G-1)+1,V+1,V+1,V,V+2*(G-1)),a},t}(Ks),bd=(function(e){function t(e,i,n,o,s,r,a){t.__super.call(this,e,i,n,o,40,s,r,a)}return o(t,"laya.webgl.shapes.Ellipse",e),t}(Ks),function(e){function t(e,i,n,o,s){this._points=[],this.rebuild(n),t.__super.call(this,e,i,0,0,0,s,o,s,0)}o(t,"laya.webgl.shapes.Line",e);var i=t.prototype;return i.rebuild=function(e){var t=e.length,i=this._points.length;t!=i&&(this.mUint16Array=new Uint16Array(6*(t/2-1)),this.mFloat32Array=new Float32Array(5*t)),this._points.length=0;for(var n=NaN,o=NaN,s=-1,r=-1,a=e.length/2,l=0;a>l;l++)n=e[2*l],o=e[2*l+1],(Math.abs(s-n)>.01||Math.abs(r-o)>.01)&&this._points.push(n,o),s=n,r=o},i.getData=function(e,t,i){var n=[],o=[];this.borderWidth>0&&this.createLine2(this._points,n,this.borderWidth,i,o,this._points.length/2),this.mUint16Array.set(n,0),this.mFloat32Array.set(o,0),e.append(this.mUint16Array),t.append(this.mFloat32Array)},t}(Ks)),Ed=function(e){function t(e,i,n,o,s,r){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=Ph.create(),this._points=n.slice(0,n.length),t.__super.call(this,e,i,0,0,this._points.length/2,o,s,r)}o(t,"laya.webgl.shapes.Polygon",e);var i=t.prototype;return i.rebuild=function(e){this._repaint||(this._points.length=0,this._points=this._points.concat(e))},i.setMatrix=function(e){e.copyTo(this._mat)},i.needUpdate=function(e){return this._repaint=this._mat.a==e.a&&this._mat.b==e.b&&this._mat.c==e.c&&this._mat.d==e.d&&this._mat.tx==e.tx&&this._mat.ty==e.ty,!this._repaint},i.getData=function(e,t,i){var n,o=0,s=this._points,r=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=i){for(this._start=i,n=[],r=this.earcutTriangles.length,o=0;r>o;o++)n.push(this.earcutTriangles[o]+i);this.mUint16Array=new Uint16Array(n)}}else{this._start=i,n=[];var a=[],l=[],h=this.color,c=(h>>16&255)/255,u=(h>>8&255)/255,d=(255&h)/255;for(r=Math.floor(s.length/2),o=0;r>o;o++)a.push(this.x+s[2*o],this.y+s[2*o+1],c,u,d),l.push(this.x+s[2*o],this.y+s[2*o+1]);for(this.earcutTriangles=Xs.earcut(l,null,2),r=this.earcutTriangles.length,o=0;r>o;o++)n.push(this.earcutTriangles[o]+i);this.mUint16Array=new Uint16Array(n),this.mFloat32Array=new Float32Array(a)}e.append(this.mUint16Array),t.append(this.mFloat32Array)},t}(Ks),xd=function(e){function t(){t.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}o(t,"laya.webgl.utils.MeshTexture",e);var i=t.prototype;return i.addData=function(e,i,n,o,s,r){for(var a=e.length/2,l=this._vb.needSize(a*t.const_stride),h=l>>2,c=this._vb.getFloat32Array(),u=0,d=0;a>d;d++){var p=e[u],f=e[u+1],_=p*o.a+f*o.c+o.tx,m=p*o.b+f*o.d+o.ty;c[h++]=_,c[h++]=m,c[h++]=i[u],c[h++]=i[u+1],u+=2}this._vb.setNeedUpload();var g=this.vertNum;if(g>0){var v=n.length;v>t.tmpIdx.length&&(t.tmpIdx=new Uint16Array(v));for(var y=0;v>y;y++)t.tmpIdx[y]=n[y]+g;this._ib.appendU16Array(t.tmpIdx,n.length)}else this._ib.append(n);this._ib.setNeedUpload(),this.vertNum+=a,this.indexNum+=n.length},i.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},i.destroy=function(){this._ib.destroy(),this._vb.destroy()},t.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new t},t.const_stride=16,t._POOL=[],n(t,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),t}($s),Sd=function(e){function t(e){this._x=0,this._y=0,this._id=++t._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,
this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,t.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=t.MAXCLIPRECT,this.mOutPoint,this._canvas=e,t._contextcount++,Ns.isFlash?(this._ib=bw.create(35044),er.fillIBQuadrangle(this._ib,16)):this._ib=bw.QuadrangleIB,this.clear()}var r;o(t,"laya.webgl.canvas.WebGLContext2D",e);var a=t.prototype;return a.setIsMainContext=function(){this._isMain=!0},a.clearBG=function(e,t,i,n){var o=ur.mainContext;o.clearColor(e,t,i,n),o.clear(16384)},a._getSubmits=function(){return this._submits},a._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var e=0,t=this._submits._length;t>e;e++)this._submits[e].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},a.destroy=function(){--t._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas=null,this._ib&&this._ib!=bw.QuadrangleIB&&this._ib.releaseResource()},a.clear=function(){this._submits||(this._other=r.DEFAULT,this._curMat=Ph.create(),this._vb=yw.create(-1),this._submits=[],this._save=[lr.Create(this)],this._save.length=10,this._shader2D=new pr,this._triangleMesh=xd.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=r.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=t.MAXCLIPRECT,this._curSubmit=Ys.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=tr.DEFAULT;for(var e=0,i=this._submits._length;i>e;e++)this._submits[e].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},a.size=function(e,t){if(this._width!=e||this._height!=t)if(0==e||0==t){0!=this._vb._byteLength&&(this._width=e,this._height=t,this._vb.clear(),this._vb.upload());for(var i=0,n=this._submits._length;n>i;i++)this._submits[i].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=e,this._height=t,this._targets&&this._targets.size(e,t),this._canvas.memorySize-=this._canvas.memorySize;0===e&&0===t&&this._releaseMem()},a._getTransformMatrix=function(){return this._curMat},a.translate=function(e,t){0===e&&0===t||(hr.save(this),this._curMat.bTransform&&(rr.save(this),this._curMat.transformPointN(Ah.TEMP.setTo(e,t)),e=Ah.TEMP.x,t=Ah.TEMP.y),this._x+=e,this._y+=t)},a.save=function(){this._save[this._save._length++]=lr.Create(this)},a.restore=function(){var e=this._save._length;if(!(1>e))for(var t=e-1;t>=0;t--){var i=this._save[t];if(i.restore(this),i.isSaveMark())return void(this._save._length=t)}},a._fillText=function(e,t,i,n,o,s,r,a,l,h){void 0===h&&(h=0);var c=this._shader2D,u=this._curSubmit.shaderValue,d=o?gr.create(o):this._other.font;if(xr.enabled)c.ALPHA!==u.ALPHA&&(c.glTexture=null),yr.drawText(this,e,t,this._curMat,d,l||this._other.textAlign,s,r,a,i,n,h);else{var p=(this._shader2D.defines.getValue(),s?zr.create(s)._color:c.colorAdd);c.ALPHA===u.ALPHA&&p===c.colorAdd&&u.colorAdd===c.colorAdd||(c.glTexture=null,c.colorAdd=p),yr.drawText(this,e,t,this._curMat,d,l||this._other.textAlign,s,r,a,i,n,h)}},a.fillWords=function(e,t,i,n,o,s){this._fillText(null,e,t,i,n,o,null,-1,null,s)},a.fillBorderWords=function(e,t,i,n,o,s,r){this._fillBorderText(null,e,t,i,n,o,s,r,null)},a.fillText=function(e,t,i,n,o,s){this._fillText(e,null,t,i,n,o,null,-1,s)},a.strokeText=function(e,t,i,n,o,s,r){this._fillText(e,null,t,i,n,null,o,s||1,r)},a.fillBorderText=function(e,t,i,n,o,s,r,a){this._fillBorderText(e,null,t,i,n,o,s,r,a)},a._fillBorderText=function(e,i,n,o,s,r,a,l,h){if(!xr.enabled)return this._fillText(e,i,n,o,s,null,a,l||1,h),void this._fillText(e,i,n,o,s,r,null,-1,h);var c=this._shader2D,u=this._curSubmit.shaderValue;c.ALPHA!==u.ALPHA&&(c.glTexture=null);var d=s?(t._fontTemp.setFont(s),t._fontTemp):this._other.font;yr.drawText(this,e,i,this._curMat,d,h||this._other.textAlign,r,a,l||1,n,o,0)},a.fillRect=function(e,t,i,n,o){var s=this._vb;if(er.fillRectImgVb(s,this._clipRect,e,t,i,n,Vu.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var r=this._shader2D.fillStyle;o&&(this._shader2D.fillStyle=tr.create(o));var a=this._shader2D,l=this._curSubmit.shaderValue;if(a.fillStyle!==l.fillStyle||a.ALPHA!==l.ALPHA){a.glTexture=null;var h=this._curSubmit=Ys.createSubmit(this,this._ib,s,(s._byteLength-64)/32*3,wd.create(2,0));h.shaderValue.color=a.fillStyle._color._color,h.shaderValue.ALPHA=a.ALPHA,this._submits[this._submits._length++]=h}this._curSubmit._numEle+=6,this._shader2D.fillStyle=r}},a.fillTexture=function(e,t,n,o,s,r,a,l){if(!(e.loaded&&e.bitmap&&e.source))return void(this.sprite&&i.timer.callLater(this,this._repaintSprite));var h=this._vb,c=e.bitmap.width,u=e.bitmap.height,d=e.uv,p=a.x%e.width,f=a.y%e.height;if(c!=l.w||u!=l.h){if(!l.w&&!l.h)switch(l.oy=l.ox=0,r){case"repeat":l.width=o,l.height=s;break;case"repeat-x":l.width=o,0>f?e.height+f>s?l.height=s:l.height=e.height+f:(l.oy=f,e.height+f>s?l.height=s-f:l.height=e.height);break;case"repeat-y":0>p?e.width+p>o?l.width=o:l.width=e.width+p:(l.ox=p,e.width+p>o?l.width=o-p:l.width=e.width),l.height=s;break;case"no-repeat":0>p?e.width+p>o?l.width=o:l.width=e.width+p:(l.ox=p,e.width+p>o?l.width=o-p:l.width=e.width),0>f?e.height+f>s?l.height=s:l.height=e.height+f:(l.oy=f,e.height+f>s?l.height=s-f:l.height=e.height);break;default:l.width=o,l.height=s}l.w=c,l.h=u,l.uv=[0,0,l.width/c,0,l.width/c,l.height/u,0,l.height/u]}if(t+=l.ox,n+=l.oy,p-=l.ox,f-=l.oy,er.fillRectImgVb(h,this._clipRect,t,n,l.width,l.height,l.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var _=gd.create(this,this._ib,h,(h._byteLength-64)/32*3,wd.create(256,0));this._submits[this._submits._length++]=_;var m=_.shaderValue;m.textureHost=e;var g=d[0]*c,v=d[1]*u,y=(d[2]-d[0])*c,b=(d[5]-d[3])*u,E=-p/c,x=-f/u;m.u_TexRange[0]=g/c,m.u_TexRange[1]=y/c,m.u_TexRange[2]=v/u,m.u_TexRange[3]=b/u,m.u_offset[0]=E,m.u_offset[1]=x,xr.enabled&&!this._isMain&&_.addTexture(e,(h._byteLength>>2)-16),this._curSubmit=_,_._renderType=10017,_._numEle+=6}},a.setShader=function(e){ar.save(this,1048576,this._shader2D,!0),this._shader2D.shader=e},a.setFilters=function(e){ar.save(this,2097152,this._shader2D,!0),this._shader2D.filters=e,this._curSubmit=Ys.RENDERBASE,this._renderKey=0,this._drawCount++},a.drawTexture=function(e,t,i,n,o,s,r){this._drawTextureM(e,t,i,n,o,s,r,null,1)},a.addTextureVb=function(e,t,i){var n=this._curSubmit._vb||this._vb,o=n._byteLength>>2;n.byteLength=o+16<<2;for(var s=n.getFloat32Array(),r=0;16>r;r+=4)s[o++]=e[r]+t,s[o++]=e[r+1]+i,s[o++]=e[r+2],s[o++]=e[r+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),n._upload=!0},a.willDrawTexture=function(e,t){if(!(e.loaded&&e.bitmap&&e.source))return this.sprite&&i.timer.callLater(this,this._repaintSprite),0;var n=e.bitmap,o=n.id+this._shader2D.ALPHA*t+10016;if(o==this._renderKey)return o;var s=this._shader2D,r=s.ALPHA,a=this._curSubmit.shaderValue;s.ALPHA*=t,this._renderKey=o,this._drawCount++,s.glTexture=n;var l=this._vb,h=null,c=l._byteLength/32*3;return h=gd.create(this,this._ib,l,c,wd.create(1,0)),this._submits[this._submits._length++]=h,h.shaderValue.textureHost=e,h._renderType=10016,h._preIsSameTextureShader=10016===this._curSubmit._renderType&&s.ALPHA===a.ALPHA,this._curSubmit=h,s.ALPHA=r,o},a.drawTextures=function(e,n,o,s){if(!(e.loaded&&e.bitmap&&e.source))return void(this.sprite&&i.timer.callLater(this,this._repaintSprite));var r=this._clipRect;if(this._clipRect=t.MAXCLIPRECT,!this._drawTextureM(e,n[0],n[1],e.width,e.height,o,s,null,1))return void alert("drawTextures err");if(this._clipRect=r,Nr.drawCall++,!(n.length<4)){for(var a=this._curSubmit._vb||this._vb,l=this._curMat.a,h=this._curMat.d,c=2,u=n.length;u>c;c+=2)er.copyPreImgVb(a,(n[c]-n[c-2])*l,(n[c+1]-n[c-1])*h),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}},a._drawTextureM=function(e,t,n,o,s,r,a,l,h){if(!e.loaded||!e.source)return this.sprite&&i.timer.callLater(this,this._repaintSprite),!1;var c=this._curSubmit._vb||this._vb,u=e.bitmap;t+=r,n+=a,this._drawCount++;var d=u.id+this._shader2D.ALPHA*h+10016;if(d!=this._renderKey){this._renderKey=d;var p=this._curSubmit.shaderValue,f=this._shader2D,_=f.ALPHA;f.ALPHA*=h,f.glTexture=u;var m=this._vb,g=null,v=m._byteLength/32*3;g=gd.create(this,this._ib,m,v,wd.create(1,0)),this._submits[this._submits._length++]=g,g.shaderValue.textureHost=e,g._renderType=10016,g._preIsSameTextureShader=10016===this._curSubmit._renderType&&f.ALPHA===p.ALPHA,this._curSubmit=g,c=this._curSubmit._vb||this._vb,f.ALPHA=_}return er.fillRectImgVb(c,this._clipRect,t,n,o||e.width,s||e.height,e.uv,l||this._curMat,this._x,this._y,0,0)?(xr.enabled&&!this._isMain&&this._curSubmit.addTexture(e,(c._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0):!1},a._repaintSprite=function(){this.sprite&&this.sprite.repaint()},a._drawText=function(e,t,i,n,o,s,r,a,l,h){var c=e.bitmap;this._drawCount++;var u=c.id+this._shader2D.ALPHA+10016;if(u!=this._renderKey){this._renderKey=u;var d=this._curSubmit.shaderValue,p=this._shader2D;p.glTexture=c;var f=this._vb,_=null,m=f._byteLength/32*3;_=xr.enabled?gd.create(this,this._ib,f,m,wd.create(1,0)):gd.create(this,this._ib,f,m,$S.create()),_._preIsSameTextureShader=10016===this._curSubmit._renderType&&p.ALPHA===d.ALPHA,this._submits[this._submits._length++]=_,_.shaderValue.textureHost=e,_._renderType=10016,this._curSubmit=_}e.active();var g=this._curSubmit._vb||this._vb;er.fillRectImgVb(g,this._clipRect,t+r,i+a,n||e.width,o||e.height,e.uv,s||this._curMat,this._x,this._y,l,h,!0)&&(xr.enabled&&!this._isMain&&this._curSubmit.addTexture(e,(g._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},a.drawTextureWithTransform=function(e,i,n,o,s,r,a,l,h){if(!r)return void this._drawTextureM(e,i,n,o,s,a,l,null,h);var c=this._curMat,u=this._x,d=this._y;(0!==a||0!==l)&&(this._x=a*c.a+l*c.c,this._y=l*c.d+a*c.b),r&&c.bTransform?(Ph.mul(r,c,t._tmpMatrix),r=t._tmpMatrix,r._checkTransform()):(this._x+=c.tx,this._y+=c.ty),this._drawTextureM(e,i,n,o,s,0,0,r,h),this._x=u,this._y=d},a.fillQuadrangle=function(e,t,i,n,o){var s=this._curSubmit,r=this._vb,a=this._shader2D,l=s.shaderValue;if(this._renderKey=0,e.bitmap){var h=e.bitmap;a.glTexture==h&&a.ALPHA===l.ALPHA||(a.glTexture=h,s=this._curSubmit=Ys.createSubmit(this,this._ib,r,r._byteLength/32*3,wd.create(1,0)),s.shaderValue.glTexture=h,this._submits[this._submits._length++]=s),er.fillQuadrangleImgVb(r,t,i,n,e.uv,o||this._curMat,this._x,this._y)}else s.shaderValue.fillStyle&&s.shaderValue.fillStyle.equal(e)&&a.ALPHA===l.ALPHA||(a.glTexture=null,s=this._curSubmit=Ys.createSubmit(this,this._ib,r,r._byteLength/32*3,wd.create(2,0)),s.shaderValue.defines.add(2),s.shaderValue.fillStyle=tr.create(e),this._submits[this._submits._length++]=s),er.fillQuadrangleImgVb(r,t,i,n,Vu.DEF_UV,o||this._curMat,this._x,this._y);s._numEle+=6},a.drawTexture2=function(e,i,n,o,s,r,a,l){if(0!=r){var h=this._curMat;if(this._x=e*h.a+i*h.c,this._y=i*h.d+e*h.b,s&&(h.bTransform||s.bTransform?(Ph.mul(s,h,t._tmpMatrix),s=t._tmpMatrix):(this._x+=s.tx+h.tx,this._y+=s.ty+h.ty,s=Ph.EMPTY)),1!==r||a){var c=this._shader2D.ALPHA,u=this._nBlendType;this._shader2D.ALPHA=r,a&&(this._nBlendType=nr.TOINT(a)),this._drawTextureM(l[0],l[1]-n,l[2]-o,l[3],l[4],0,0,s,1),this._shader2D.ALPHA=c,this._nBlendType=u}else this._drawTextureM(l[0],l[1]-n,l[2]-o,l[3],l[4],0,0,s,1);this._x=this._y=0}},a.drawCanvas=function(e,t,i,n,o){var s=e.context;if(this._renderKey=0,s._targets)this._submits[this._submits._length++]=vd.create(s,0,null),this._curSubmit=Ys.RENDERBASE,s._targets.drawTo(this,t,i,n,o);else{var r=this._submits[this._submits._length++]=vd.create(s,this._shader2D.ALPHA,this._shader2D.filters),a=n/e.width,l=o/e.height,h=r._matrix;this._curMat.copyTo(h),1!=a&&1!=l&&h.scale(a,l);var c=h.tx,u=h.ty;h.tx=h.ty=0,h.transformPoint(Ah.TEMP.setTo(t,i)),h.translate(Ah.TEMP.x+c,Ah.TEMP.y+u),this._curSubmit=Ys.RENDERBASE}nc.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=s._targets?"yellow":"green",this.strokeRect(t-1,i-1,n+2,o+2,1),this.strokeRect(t,i,n,o,1),this.restore())},a.drawTarget=function(e,t,i,n,o,s,r,a,l,h){void 0===h&&(h=-1);var c=this._vb;if(er.fillRectImgVb(c,this._clipRect,t,i,n,o,l||Vu.DEF_UV,s||this._curMat,this._x,this._y,0,0)){this._renderKey=0;var u=this._shader2D;u.glTexture=null;var d=(this._curSubmit.shaderValue,this._curSubmit=Ws.create(this,this._ib,c,(c._byteLength-64)/32*3,a,r));-1==h?d.blendType=this._nBlendType:d.blendType=h,d.scope=e,this._submits[this._submits._length++]=d,this._curSubmit._numEle+=6}},a.mixRGBandAlpha=function(e){return this._mixRGBandAlpha(e,this._shader2D.ALPHA)},a._mixRGBandAlpha=function(e,t){var i=(4278190080&e)>>>24;return 0!=i?i*=t:i=255*t,16777215&e|i<<24},a.drawTriangles=function(e,n,o,s,r,a,l,h,c,u){if(!e.loaded||!e.source)return this.sprite&&i.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;var d=(e.bitmap,this._mixRGBandAlpha(4294967295,h)),p=(s.length/2,a.length);this._renderKey=-1;var f=this._curSubmit=gd.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,wd.create(1,0));return f.shaderValue.textureHost=e,f._renderType=10016,this._submits[this._submits._length++]=f,l?(t._tmpMatrix.a=l.a,t._tmpMatrix.b=l.b,t._tmpMatrix.c=l.c,t._tmpMatrix.d=l.d,t._tmpMatrix.tx=l.tx+n,t._tmpMatrix.ty=l.ty+o,Ph.mul(t._tmpMatrix,this._curMat,t._tmpMatrix)):(t._tmpMatrix.a=this._curMat.a,t._tmpMatrix.b=this._curMat.b,t._tmpMatrix.c=this._curMat.c,t._tmpMatrix.d=this._curMat.d,t._tmpMatrix.tx=this._curMat.tx+n,t._tmpMatrix.ty=this._curMat.ty+o),this._triangleMesh.addData(s,r,a,t._tmpMatrix,d,this),this._curSubmit._numEle+=p,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},a.transform=function(e,t,i,n,o,s){rr.save(this),Ph.mul(Ph.TEMP.setTo(e,t,i,n,o,s),this._curMat,this._curMat),this._curMat._checkTransform()},a.setTransformByMatrix=function(e){e.copyTo(this._curMat)},a.transformByMatrix=function(e){rr.save(this),Ph.mul(e,this._curMat,this._curMat),this._curMat._checkTransform()},a.rotate=function(e){rr.save(this),this._curMat.rotateEx(e)},a.scale=function(e,t){rr.save(this),this._curMat.scaleEx(e,t)},a.clipRect=function(e,t,i,n){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var o=zs.create(4);this.addRenderObject(o);var s=this._vb,r=s._byteLength>>2;if(er.fillRectImgVb(s,null,e,t,i,n,Vu.DEF_UV,this._curMat,this._x,this._y,0,0)){var a=this._shader2D;a.glTexture=null;var l=this._curSubmit=Ys.createSubmit(this,this._ib,s,(s._byteLength-64)/32*3,wd.create(2,0));l.shaderValue.ALPHA=1,this._submits[this._submits._length++]=l,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var h=zs.create(5);this.addRenderObject(h);var c=s.getFloat32Array(),u=Math.min(Math.min(Math.min(c[r+0],c[r+4]),c[r+8]),c[r+12]),d=Math.max(Math.max(Math.max(c[r+0],c[r+4]),c[r+8]),c[r+12]),p=Math.min(Math.min(Math.min(c[r+1],c[r+5]),c[r+9]),c[r+13]),f=Math.max(Math.max(Math.max(c[r+1],c[r+5]),c[r+9]),c[r+13]);sr.save(this,h,e,t,i,n,u,p,d-u,f-p),this._curSubmit=Ys.RENDERBASE}else{i*=this._curMat.a,n*=this._curMat.d;var _=Ah.TEMP;this._curMat.transformPoint(_.setTo(e,t)),0>i&&(_.x=_.x+i,i=-i),0>n&&(_.y=_.y+n,n=-n),this._renderKey=0;var m=this._curSubmit=Us.create(this);this._submits[this._submits._length++]=m,m.submitIndex=this._submits._length,m.submitLength=9999999,or.save(this,m);var g=this._clipRect,v=g.x,y=g.y,b=_.x+i,E=_.y+n;v<_.x&&(g.x=_.x),y<_.y&&(g.y=_.y),g.width=Math.min(b,v+g.width)-g.x,g.height=Math.min(E,y+g.height)-g.y,this._shader2D.glTexture=null,m.clipRect.copyFrom(g),this._curSubmit=Ys.RENDERBASE}},a.setIBVB=function(e,t,i,n,o,s,r,a,l,h,c){if(void 0===l&&(l=0),void 0===h&&(h=0),void 0===c&&(c=0),null===i){if(Ns.isFlash){var u=n;u._selfIB||(u._selfIB=bw.create(35044)),u._selfIB.clear(),i=u._selfIB}else i=this._ib;er.expandIBQuadrangle(i,n._byteLength/(4*n.vertexStride*4))}if(!a||!r)throw Error("setIBVB must input:shader shaderValues");var d=Hs.create(this,n,i,o,r,a,l,h,c);s||(s=Ph.EMPTY),s.translate(e,t),Ph.mul(s,this._curMat,d._mat),s.translate(-e,-t),this._submits[this._submits._length++]=d,this._curSubmit=Ys.RENDERBASE,this._renderKey=0},a.addRenderObject=function(e){this._submits[this._submits._length++]=e},a.fillTrangles=function(e,t,i,n,o){var s=this._curSubmit,r=this._vb,a=this._shader2D,l=s.shaderValue,h=n.length>>4,c=e.bitmap;this._renderKey=0,a.glTexture==c&&a.ALPHA===l.ALPHA||(s=this._curSubmit=Ys.createSubmit(this,this._ib,r,r._byteLength/32*3,wd.create(1,0)),s.shaderValue.textureHost=e,this._submits[this._submits._length++]=s),er.fillTranglesVB(r,t,i,n,o||this._curMat,this._x,this._y),s._numEle+=6*h},a.submitElement=function(e,t){var i=this._submits;for(0>t&&(t=i._length);t>e;)e+=i[e].renderSubmit()},a.finish=function(){ur.mainContext.finish()},a.flush=function(){var e=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(e>this._ib.bufferLength/12&&er.expandIBQuadrangle(this._ib,e),!this._isMain&&xr.enabled&&xr._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=xr._atlasRestore;for(var t=this._submits,i=0,n=t._length;n>i;i++){var o=t[i];10016===o.getRenderType()&&o.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),mr.instance&&mr.getInstance().reset();var s=0;for(i=0,s=this.meshlist.length;s>i;i++){var r=this.meshlist[i];r.canReuse?r.releaseMesh():r.destroy()}return this.meshlist.length=0,this._curSubmit=Ys.RENDERBASE,this._renderKey=0,this._triangleMesh=xd.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},a.setPathId=function(e){if(this.mId=e,-1!=this.mId){this.mHaveKey=!1;var t=Wr.getInstance();t.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,t.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},a.movePath=function(e,t){var i=e,n=t;e=this._curMat.a*i+this._curMat.c*n+this._curMat.tx,t=this._curMat.b*i+this._curMat.d*n+this._curMat.ty,this.mX+=e,this.mY+=t},a.beginPath=function(){var e=this._getPath();e.tempArray.length=0,e.closePath=!1,this.mX=0,this.mY=0},a.closePath=function(){this._path.closePath=!0},a.fill=function(e){void 0===e&&(e=!1);var t=this._getPath();this.drawPoly(0,0,t.tempArray,this.fillStyle._color.numColor,0,0,e)},a.stroke=function(){var e=this._getPath();if(this.lineWidth>0){if(-1==this.mId)e.drawLine(0,0,e.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var t=Wr.getInstance().shapeLineDic[this.mId];t.rebuild(e.tempArray),e.setGeomtry(t)}else Wr.getInstance().addLine(this.mId,e.drawLine(0,0,e.tempArray,this.lineWidth,this.strokeStyle._color.numColor));e.update();var i=[this.mX,this.mY],n=Ys.createShape(this,e.ib,e.vb,e.count,e.offset,wd.create(4,0));n.shaderValue.ALPHA=this._shader2D.ALPHA,n.shaderValue.u_pos=i,n.shaderValue.u_mmat2=Js.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=n,this._renderKey=-1}},a.line=function(e,t,i,n,o,s){var r=this._curSubmit,a=this._vb;if(er.fillLineVb(a,this._clipRect,e,t,i,n,o,s)){this._renderKey=0;var l=this._shader2D,h=r.shaderValue;l.strokeStyle===h.strokeStyle&&l.ALPHA===h.ALPHA||(l.glTexture=null,r=this._curSubmit=Ys.createSubmit(this,this._ib,a,(a._byteLength-64)/32*3,wd.create(2,0)),r.shaderValue.strokeStyle=l.strokeStyle,r.shaderValue.mainID=2,r.shaderValue.ALPHA=l.ALPHA,this._submits[this._submits._length++]=r),r._numEle+=6}},a.moveTo=function(e,t,i){void 0===i&&(i=!0);var n=this._getPath();if(i){var o=e,s=t;e=this._curMat.a*o+this._curMat.c*s,t=this._curMat.b*o+this._curMat.d*s}n.addPoint(e,t)},a.lineTo=function(e,t,i){void 0===i&&(i=!0);var n=this._getPath();if(i){var o=e,s=t;e=this._curMat.a*o+this._curMat.c*s,t=this._curMat.b*o+this._curMat.d*s}n.addPoint(e,t)},a.drawCurves=function(e,t,i){this.setPathId(-1),this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var n=i[2];e+=i[0],t+=i[1],this.movePath(e,t),this.moveTo(n[0],n[1]);for(var o=2,s=n.length;s>o;)this.quadraticCurveTo(n[o++],n[o++],n[o++],n[o++]);this.stroke()},a.arcTo=function(e,i,n,o,s){if(-1==this.mId||!this.mHaveKey){var r=0,a=0,l=0,h=this._getPath();this._curMat.copyTo(t._tmpMatrix),t._tmpMatrix.tx=t._tmpMatrix.ty=0,t._tempPoint.setTo(h.getEndPointX(),h.getEndPointY()),t._tmpMatrix.invertTransformPoint(t._tempPoint);var c=t._tempPoint.x-e,u=t._tempPoint.y-i,d=Math.sqrt(c*c+u*u);if(!(1e-6>=d)){var p=c/d,f=u/d,_=n-e,m=o-i,g=_*_+m*m,v=Math.sqrt(g);if(!(1e-6>=v)){var y=_/v,b=m/v,E=p+y,x=f+b,S=Math.sqrt(E*E+x*x);if(!(1e-6>=S)){var w=E/S,C=x/S,T=Math.acos(w*p+C*f),I=Math.PI/2-T;d=s/Math.tan(I);var A=d*p+e,N=d*f+i,P=Math.sqrt(d*d+s*s),R=e+w*P,L=i+C*P,O=p*b-f*y,M=0,D=0,k=0;if(O>=0){M=2*I;var B=M/t.SEGNUM;D=Math.sin(B),k=Math.cos(B)}else M=2*-I,B=M/t.SEGNUM,D=Math.sin(B),k=Math.cos(B);a=this._curMat.a*A+this._curMat.c*N,l=this._curMat.b*A+this._curMat.d*N,a==this._path.getEndPointX()&&l==this._path.getEndPointY()||h.addPoint(a,l);var V=A-R,F=N-L;for(r=0;r<t.SEGNUM;r++){var G=V*k+F*D,H=-V*D+F*k;a=G+R,l=H+L,e=this._curMat.a*a+this._curMat.c*l,i=this._curMat.b*a+this._curMat.d*l,a=e,l=i,a==this._path.getEndPointX()&&l==this._path.getEndPointY()||h.addPoint(a,l),V=G,F=H}}}}}},a.arc=function(e,t,i,n,o,s,r){if(void 0===s&&(s=!1),void 0===r&&(r=!0),-1!=this.mId){var a=Wr.getInstance().shapeDic[this.mId];if(a&&this.mHaveKey&&!a.needUpdate(this._curMat))return;e=0,t=0}var l=0,h=0,c=0,u=0,d=0,p=0,f=0,_=0,m=0,g=0,v=0;if(h=o-n,s)if(Math.abs(h)>=2*Math.PI)h=2*-Math.PI;else for(;h>0;)h-=2*Math.PI;else if(Math.abs(h)>=2*Math.PI)h=2*Math.PI;else for(;0>h;)h+=2*Math.PI;g=101>i?Math.max(10,h*i/5):201>i?Math.max(10,h*i/20):Math.max(10,h*i/40),c=h/g/2,u=Math.abs(4/3*(1-Math.cos(c))/Math.sin(c)),s&&(u=-u),v=0;var y=this._getPath(),b=NaN,E=NaN;for(m=0;g>=m;m++)l=n+h*(m/g),d=Math.cos(l),p=Math.sin(l),f=e+d*i,_=t+p*i,r&&(b=f,E=_,f=this._curMat.a*b+this._curMat.c*E,_=this._curMat.b*b+this._curMat.d*E),f==this._path.getEndPointX()&&_==this._path.getEndPointY()||y.addPoint(f,_);d=Math.cos(o),p=Math.sin(o),f=e+d*i,_=t+p*i,r&&(b=f,E=_,f=this._curMat.a*b+this._curMat.c*E,_=this._curMat.b*b+this._curMat.d*E),f==this._path.getEndPointX()&&_==this._path.getEndPointY()||y.addPoint(f,_)},a.quadraticCurveTo=function(e,t,i,n){var o=Rh.I,s=i,r=n;i=this._curMat.a*s+this._curMat.c*r,n=this._curMat.b*s+this._curMat.d*r,s=e,r=t,e=this._curMat.a*s+this._curMat.c*r,t=this._curMat.b*s+this._curMat.d*r;for(var a=o.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),e,t,i,n],30,2),l=0,h=a.length/2;h>l;l++)this.lineTo(a[2*l],a[2*l+1],!1);this.lineTo(i,n,!1)},a.rect=function(e,t,i,n){this._other=this._other.make(),this._other.path||(this._other.path=new ir),this._other.path.rect(e,t,i,n)},a.strokeRect=function(e,t,i,n,o){var s=.5*o;this.line(e-s,t,e+i+s,t,o,this._curMat),this.line(e+i,t,e+i,t+n,o,this._curMat),this.line(e,t,e,t+n,o,this._curMat),this.line(e-s,t+n,e+i+s,t+n,o,this._curMat)},a.clip=function(){},a.drawPoly=function(e,t,i,n,o,s,r){void 0===r&&(r=!1),this._renderKey=0,this._shader2D.glTexture=null;var a=this._getPath();if(-1==this.mId)a.polygon(e,t,i,n,o?o:1,s);else if(this.mHaveKey){var l=Wr.getInstance().shapeDic[this.mId];l.setMatrix(this._curMat),l.rebuild(a.tempArray),a.setGeomtry(l)}else{var h=a.polygon(e,t,i,n,o?o:1,s);Wr.getInstance().addShape(this.mId,h),h.setMatrix(this._curMat)}a.update();var c,u=[this.mX,this.mY];if(c=Ys.createShape(this,a.ib,a.vb,a.count,a.offset,wd.create(4,0)),c.shaderValue.ALPHA=this._shader2D.ALPHA,c.shaderValue.u_pos=u,c.shaderValue.u_mmat2=Js.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c,o>0){if(this.mHaveLineKey){var d=Wr.getInstance().shapeLineDic[this.mId];d.rebuild(a.tempArray),a.setGeomtry(d)}else Wr.getInstance().addShape(this.mId,a.drawLine(e,t,i,o,s));a.update(),c=Ys.createShape(this,a.ib,a.vb,a.count,a.offset,wd.create(4,0)),c.shaderValue.ALPHA=this._shader2D.ALPHA,c.shaderValue.u_mmat2=Js.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c}},a.drawParticle=function(e,t,i){i.x=e,i.y=t,this._submits[this._submits._length++]=i},a._getPath=function(){return this._path||(this._path=new ir)},s(0,a,"globalCompositeOperation",function(){return nr.NAMES[this._nBlendType]},function(e){var t=nr.TOINT[e];null==t||this._nBlendType===t||(ar.save(this,65536,this,!0),this._curSubmit=Ys.RENDERBASE,this._renderKey=0,this._nBlendType=t)}),s(0,a,"textAlign",function(){return this._other.textAlign},function(e){this._other.textAlign===e||(this._other=this._other.make(),ar.save(this,32768,this._other,!1),this._other.textAlign=e)}),s(0,a,"globalAlpha",function(){return this._shader2D.ALPHA},function(e){e=Math.floor(1e3*e)/1e3,e!=this._shader2D.ALPHA&&(ar.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=e)}),s(0,a,"strokeStyle",function(){return this._shader2D.strokeStyle},function(e){this._shader2D.strokeStyle.equal(e)||(ar.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=tr.create(e))}),s(0,a,"textBaseline",function(){return this._other.textBaseline},function(e){this._other.textBaseline===e||(this._other=this._other.make(),ar.save(this,16384,this._other,!1),this._other.textBaseline=e)}),s(0,a,"font",null,function(e){e!=this._other.font.toString()&&(this._other=this._other.make(),ar.save(this,8,this._other,!1),this._other.font===gr.EMPTY?this._other.font=new gr(e):this._other.font.setFont(e))}),s(0,a,"lineWidth",function(){return this._other.lineWidth},function(e){this._other.lineWidth===e||(this._other=this._other.make(),ar.save(this,256,this._other,!1),this._other.lineWidth=e)}),s(0,a,"fillStyle",function(){return this._shader2D.fillStyle},function(e){this._shader2D.fillStyle.equal(e)||(ar.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=tr.create(e))}),s(0,a,"asBitmap",null,function(e){if(e){if(this._targets||(this._targets=new Sr),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),t.__init__=function(){r.DEFAULT=new r},t._tempPoint=new Ah,t._SUBMITVBSIZE=32e3,t._MAXSIZE=99999999,t._RECTVBSIZE=16,t.MAXCLIPRECT=new Ch(0,0,99999999,99999999),t._COUNT=0,t._tmpMatrix=new Ph,t.SEGNUM=32,t._contextcount=0,n(t,["_fontTemp",function(){return this._fontTemp=new gr},"_drawStyleTemp",function(){return this._drawStyleTemp=new tr(null)}]),t.__init$=function(){r=function(){function e(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=gr.EMPTY}o(e,"");var t=e.prototype;return t.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=gr.EMPTY},t.make=function(){return this===e.DEFAULT?new e:this},e.DEFAULT=null,e}()},t}(cr),wd=function(e){function t(e,i){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,t.__super.call(this),this.defines=new Cd,this.position=t._POSITION,this.mainID=e,this.subID=i,this.textureHost=null,this.texture=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=e|i,this._inClassCache=t._cache[this._cacheID],e>0&&!this._inClassCache&&(this._inClassCache=t._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}o(t,"laya.webgl.shader.d2.value.Value2D",e);var i=t.prototype;return i.setValue=function(e){},i.refresh=function(){var e=this.size;return e[0]=Js.width,e[1]=Js.height,this.alpha=this.ALPHA*Js.worldAlpha,this.mmat=Js.worldMatrix4,this},i._ShaderWithCompile=function(){return vS.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Ew.create)},i._withWorldShaderDefines=function(){var e=Js.worldShaderDefines,t=vS.sharders[this.mainID|this.defines._value|e.getValue()];if(!t){var i,n,o={};i=this.defines.toNameDic();for(n in i)o[n]="";i=e.toNameDic();for(n in i)o[n]="";t=vS.withCompile2D(0,this.mainID,o,this.mainID|this.defines._value|e.getValue(),Ew.create)}var s=Js.worldFilters;if(!s)return t;for(var r,a=s.length,l=0;a>l;l++)(r=s[l])&&r.action.setValue(this);return t},i.upload=function(){var e=Js;this.alpha=this.ALPHA*e.worldAlpha,Js.worldMatrix4!==Js.TEMPMAT4_ARRAY&&this.defines.add(128),ur.shaderHighPrecision&&this.defines.add(1024);var t,i=e.worldShaderDefines?this._withWorldShaderDefines():vS.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=e.width,this.size[1]=e.height,this.mmat=e.worldMatrix4,_x.activeShader!==i?(i._shaderValueWidth!==e.width||i._shaderValueHeight!==e.height?(i._shaderValueWidth=e.width,i._shaderValueHeight=e.height):t=i._params2dQuick2||i._make2dQuick2(),i.upload(this,t)):(i._shaderValueWidth!==e.width||i._shaderValueHeight!==e.height?(i._shaderValueWidth=e.width,i._shaderValueHeight=e.height):t=i._params2dQuick1||i._make2dQuick1(),i.upload(this,t))},i.setFilters=function(e){if(this.filters=e,e)for(var t,i=e.length,n=0;i>n;n++)t=e[n],t&&(this.defines.add(t.type),t.action.setValue(this))},i.clear=function(){this.defines.setValue(this.subID)},i.release=function(){this._inClassCache[this._inClassCache._length++]=this,this.fillStyle=null,this.strokeStyle=null,this.clear()},t._initone=function(e,i){t._typeClass[e]=i,t._cache[e]=[],t._cache[e]._length=0},t.__init__=function(){t._POSITION=[2,5126,!1,4*Zs.BYTES_PE,0],t._TEXCOORD=[2,5126,!1,4*Zs.BYTES_PE,2*Zs.BYTES_PE],t._initone(2,Qx),t._initone(4,Xx),t._initone(256,jx),t._initone(512,Zx),t._initone(1,Kx),t._initone(65,$S),t._initone(9,Kx)},t.create=function(e,i){var n=t._cache[e|i];return n._length?n[--n._length]:new t._typeClass[e|i](i)},t._POSITION=null,t._TEXCOORD=null,t._cache=[],t._typeClass=[],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t}(fr),Cd=function(e){function t(){t.__super.call(this,t.__name2int,t.__int2name,t.__int2nameMap)}return o(t,"laya.webgl.shader.d2.ShaderDefines2D",e),t.__init__=function(){t.reg("TEXTURE2D",1),t.reg("COLOR2D",2),t.reg("PRIMITIVE",4),t.reg("GLOW_FILTER",8),t.reg("BLUR_FILTER",16),t.reg("COLOR_FILTER",32),t.reg("COLOR_ADD",64),t.reg("WORLDMAT",128),t.reg("FILLTEXTURE",256),t.reg("FSHIGHPRECISION",1024)},t.reg=function(e,i){dr._reg(e,i,t.__name2int,t.__int2name)},t.toText=function(e,t,i){return dr._toText(e,t,i)},t.toInt=function(e){return dr._toInt(e,t.__name2int)},t.TEXTURE2D=1,t.COLOR2D=2,t.PRIMITIVE=4,t.FILTERGLOW=8,t.FILTERBLUR=16,t.FILTERCOLOR=32,t.COLORADD=64,t.WORLDMAT=128,t.FILLTEXTURE=256,t.SKINMESH=512,t.SHADERDEFINE_FSHIGHPRECISION=1024,t.__name2int={},t.__int2name=[],t.__int2nameMap=[],t}(dr),Td=function(e){function t(e,i,n,o,s){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,t.__super.call(this,e,i,s),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new yS,this._atlasCanvas._atlaser=this,this._atlasCanvas.width=n,this._atlasCanvas.height=o,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}o(t,"laya.webgl.atlas.Atlaser",e);var i=t.prototype;return i.computeUVinAtlasTexture=function(e,t,i,n){var o=xr.atlasTextureWidth,s=xr.atlasTextureHeight,r=i/o,a=n/s,l=(i+e.bitmap.width)/o,h=(n+e.bitmap.height)/s,c=e.bitmap.width/o,u=e.bitmap.height/s;
e.uv=[r+t[0]*c,a+t[1]*u,l-(1-t[2])*c,a+t[3]*u,l-(1-t[4])*c,h-(1-t[5])*u,r+t[6]*c,h-(1-t[7])*u]},i.findBitmapIsExist=function(e){if(e instanceof laya.webgl.resource.WebGLImage){var t=e,i=t.url,n=this._InAtlasWebGLImagesKey[i?i:t.id];if(n)return n.offsetInfoID}return-1},i.addToAtlasTexture=function(e,t,i){if(e instanceof laya.webgl.resource.WebGLImage){var n=e,o=n.url;this._InAtlasWebGLImagesKey[o?o:n.id]={bitmap:e,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([t,i])}this._atlasCanvas.texSubImage2D(t,i,e.atlasImgData||e.atlasSource),e.clearAtlasSource()},i.addToAtlas=function(e,t,i){e._atlasID=this._inAtlasTextureKey.length;var n=e.uv.slice(),o=e.bitmap;this._inAtlasTextureKey.push(e),this._inAtlasTextureOriUVValue.push(n),this._inAtlasTextureBitmapValue.push(o),this.computeUVinAtlasTexture(e,n,t,i),e.bitmap=this._atlasCanvas},i.clear=function(){for(var e=0,t=this._inAtlasTextureKey.length;t>e;e++)this._inAtlasTextureKey[e].bitmap=this._inAtlasTextureBitmapValue[e],this._inAtlasTextureKey[e].uv=this._inAtlasTextureOriUVValue[e],this._inAtlasTextureKey[e]._atlasID=-1,this._inAtlasTextureKey[e].bitmap.lock=!1,this._inAtlasTextureKey[e].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},i.dispose=function(){this.clear(),this._atlasCanvas.destroy()},s(0,i,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),s(0,i,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),s(0,i,"texture",function(){return this._atlasCanvas}),t}(br),Id=function(e){function t(e,i,n,o,s,r){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=e,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[Va.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[_w.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[_w.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[Yw.SHADERDEFINE_BONE]="BONE",this._materialInt2name[yx.SHADERDEFINE_ALPHATEST]="ALPHATEST";var a={};t.__super.call(this,e,i,n,null,a),this._attributeMap=o;var l;for(l in s){var h=s[l];switch(h[1]){case 0:this._renderElementUniformMap[l]=h[0];break;case 1:this._materialUniformMap[l]=h[0];break;case 2:this._spriteUniformMap[l]=h[0];break;case 3:this._cameraUniformMap[l]=h[0];break;case 4:this._sceneUniformMap[l]=h[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}o(t,"laya.d3.shader.ShaderCompile3D",e);var i=t.prototype;return i._definesToNameDic=function(e,t){for(var i={},n=1,o=0;32>o&&(n=1<<o,!(n>e));o++)if(e&n){var s=t[n];s&&(i[s]="")}return i},i.withCompile=function(e,i,n){var o,s,r;if(s=this.sharders[e])if(r=s[i]){if(o=r[n])return o}else r=s[i]=[];else s=this.sharders[e]=[],r=s[i]=[];var a,l=this._definesToNameDic(e,t._globalInt2name),h=this._definesToNameDic(i,this._spriteInt2name),c=this._definesToNameDic(n,this._materialInt2name);if(laya.d3.shader.ShaderCompile3D.debugMode){var u="";for(a in l)u+=a+" ";var d="";for(a in h)d+=a+" ";var p="";for(a in c)p+=a+" ";console.log("ShaderCompile3DDebugMode---(Name:"+CS.nameKey.getName(this._name)+" PublicDefine:"+e+" SpriteDefine:"+i+" MaterialDefine:"+n+" PublicDefineGroup:"+u+" SpriteDefineGroup:"+d+"MaterialDefineGroup: "+p+")---ShaderCompile3DDebugMode")}var f={},_="";if(l)for(a in l)_+="#define "+a+"\n",f[a]=!0;if(h)for(a in h)_+="#define "+a+"\n",f[a]=!0;if(c)for(a in c)_+="#define "+a+"\n",f[a]=!0;var m=this._VS.toscript(f,[]),g=this._PS.toscript(f,[]);return o=CS.create(_+m.join("\n"),_+g.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap),r[n]=o,o},i.precompileShaderWithShaderDefine=function(e,t,i){this.withCompile(e,t,i)},i.addMaterialDefines=function(e){var t=e.defines;for(var i in t){var n=t[i],o=parseInt(i);this._materialInt2name[o]=n,this._materialName2Int[n]=o}},i.addSpriteDefines=function(e){var t=e.defines;for(var i in t){var n=t[i],o=parseInt(i);this._spriteInt2name[o]=n,this._spriteName2Int[n]=o}},i.getMaterialDefineByName=function(e){return this._materialName2Int[e]},i.registerMaterialDefine=function(e){var t=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[t]=e,this._materialName2Int[e]=t,t},i.registerSpriteDefine=function(e){var t=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[t]=e,this._spriteName2Int[e]=t,t},t._globalRegDefine=function(e,i){t._globalInt2name[i]=e},t.add=function(e,i,n,o,s){return laya.d3.shader.ShaderCompile3D._preCompileShader[e]=new t(e,i,n,o,s,js.includes)},t.get=function(e){return laya.d3.shader.ShaderCompile3D._preCompileShader[CS.nameKey.getID(e)]},t._preCompileShader={},t._globalInt2name=[],t.debugMode=!1,t.SHADERDEFINE_HIGHPRECISION=1,t.SHADERDEFINE_FOG=4,t.SHADERDEFINE_DIRECTIONLIGHT=8,t.SHADERDEFINE_POINTLIGHT=16,t.SHADERDEFINE_SPOTLIGHT=32,t.SHADERDEFINE_UV0=64,t.SHADERDEFINE_COLOR=128,t.SHADERDEFINE_UV1=256,t.SAHDERDEFINE_DEPTHFOG=131072,t}(js),Ad=function(e){function t(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,t.__super.call(this)}return o(t,"laya.d3.core.render.SubMeshRenderElement",e),t}(_a),Nd=function(e){function t(){this.radius=NaN,this.emitFromShell=!1,t.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}o(t,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",e);var i=t.prototype;return i._getShapeBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=t[2]=-this.radius;var i=e.max.elements;i[0]=i[1]=this.radius,i[2]=0},i._getSpeedBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=-1,t[2]=0;var i=e.max.elements;i[0]=i[1]=i[2]=1},i.generatePositionAndDirection=function(e,t,i,n){var o=e.elements;i?(i.seed=n[16],this.emitFromShell?xa._randomPointUnitSphere(e,i):xa._randomPointInsideUnitSphere(e,i),n[16]=i.seed):this.emitFromShell?xa._randomPointUnitSphere(e):xa._randomPointInsideUnitSphere(e),rl.scale(e,this.radius,e);var s=o[2];0>s&&(o[2]=-1*s),this.randomDirection?i?(i.seed=n[17],xa._randomPointUnitSphere(t,i),n[17]=i.seed):xa._randomPointUnitSphere(t):e.cloneTo(t)},i.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var i=t;i.radius=this.radius,i.emitFromShell=this.emitFromShell,i.randomDirection=this.randomDirection},t}(Ea),Pd=function(e){function t(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,t.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}o(t,"laya.d3.core.particleShuriKen.module.shape.CircleShape",e);var i=t.prototype;return i._getShapeBoundBox=function(e){var t=e.min.elements;t[0]=t[2]=-this.radius,t[1]=0;var i=e.max.elements;i[0]=i[2]=this.radius,i[1]=0},i._getSpeedBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=-1,t[2]=0;var i=e.max.elements;i[0]=i[1]=1,i[2]=0},i.generatePositionAndDirection=function(e,i,n,o){var s=e.elements,r=t._tempPositionPoint.elements;n?(n.seed=o[16],this.emitFromEdge?xa._randomPointUnitArcCircle(this.arc,t._tempPositionPoint,n):xa._randomPointInsideUnitArcCircle(this.arc,t._tempPositionPoint,n),o[16]=n.seed):this.emitFromEdge?xa._randomPointUnitArcCircle(this.arc,t._tempPositionPoint):xa._randomPointInsideUnitArcCircle(this.arc,t._tempPositionPoint),s[0]=-r[0],s[1]=r[1],s[2]=0,rl.scale(e,this.radius,e),this.randomDirection?n?(n.seed=o[17],xa._randomPointUnitSphere(i,n),o[17]=n.seed):xa._randomPointUnitSphere(i):e.cloneTo(i)},i.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var i=t;i.radius=this.radius,i.arc=this.arc,i.emitFromEdge=this.emitFromEdge,i.randomDirection=this.randomDirection},n(t,["_tempPositionPoint",function(){return this._tempPositionPoint=new ul}]),t}(Ea),Rd=function(e){function t(){this.x=NaN,this.y=NaN,this.z=NaN,t.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}o(t,"laya.d3.core.particleShuriKen.module.shape.BoxShape",e);var i=t.prototype;return i._getShapeBoundBox=function(e){var t=e.min.elements;t[0]=.5*-this.x,t[1]=.5*-this.y,t[2]=.5*-this.z;var i=e.max.elements;i[0]=.5*this.x,i[1]=.5*this.y,i[2]=.5*this.z},i._getSpeedBoundBox=function(e){var t=e.min.elements;t[0]=0,t[1]=0,t[2]=0;var i=e.max.elements;i[0]=0,i[1]=1,i[2]=0},i.generatePositionAndDirection=function(e,t,i,n){var o=e.elements,s=t.elements;i?(i.seed=n[16],xa._randomPointInsideHalfUnitBox(e,i),n[16]=i.seed):xa._randomPointInsideHalfUnitBox(e),o[0]=this.x*o[0],o[1]=this.y*o[1],o[2]=this.z*o[2],this.randomDirection?i?(i.seed=n[17],xa._randomPointUnitSphere(t,i),n[17]=i.seed):xa._randomPointUnitSphere(t):(s[0]=0,s[1]=0,s[2]=1)},i.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var i=t;i.x=this.x,i.y=this.y,i.z=this.z,i.randomDirection=this.randomDirection},t}(Ea),Ld=function(e){function t(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,t.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}o(t,"laya.d3.core.particleShuriKen.module.shape.ConeShape",e);var i=t.prototype;return i._getShapeBoundBox=function(e){var t=this.radius+this.length*Math.sin(this.angle),i=this.length*Math.cos(this.angle),n=e.min.elements;n[0]=n[1]=-t,n[2]=0;var o=e.max.elements;o[0]=o[1]=t,o[2]=i},i._getSpeedBoundBox=function(e){var t=Math.sin(this.angle),i=e.min.elements;i[0]=i[1]=-t,i[2]=0;var n=e.max.elements;n[0]=i[1]=t,n[2]=1},i.generatePositionAndDirection=function(e,i,n,o){var s,r=e.elements,a=i.elements,l=t._tempPositionPoint.elements,h=NaN,c=NaN,u=Math.cos(this.angle),d=Math.sin(this.angle);switch(this.emitType){case 0:n?(n.seed=o[16],xa._randomPointInsideUnitCircle(t._tempPositionPoint,n),o[16]=n.seed):xa._randomPointInsideUnitCircle(t._tempPositionPoint),h=l[0],c=l[1],r[0]=h*this.radius,r[1]=c*this.radius,r[2]=0,this.randomDirection?(n?(n.seed=o[17],xa._randomPointInsideUnitCircle(t._tempDirectionPoint,n),o[17]=n.seed):xa._randomPointInsideUnitCircle(t._tempDirectionPoint),s=t._tempDirectionPoint.elements,a[0]=s[0]*d,a[1]=s[1]*d):(a[0]=h*d,a[1]=c*d),a[2]=u;break;case 1:n?(n.seed=o[16],xa._randomPointUnitCircle(t._tempPositionPoint,n),o[16]=n.seed):xa._randomPointUnitCircle(t._tempPositionPoint),h=l[0],c=l[1],r[0]=h*this.radius,r[1]=c*this.radius,r[2]=0,this.randomDirection?(n?(n.seed=o[17],xa._randomPointInsideUnitCircle(t._tempDirectionPoint,n),o[17]=n.seed):xa._randomPointInsideUnitCircle(t._tempDirectionPoint),s=t._tempDirectionPoint.elements,a[0]=s[0]*d,a[1]=s[1]*d):(a[0]=h*d,a[1]=c*d),a[2]=u;break;case 2:n?(n.seed=o[16],xa._randomPointInsideUnitCircle(t._tempPositionPoint,n)):xa._randomPointInsideUnitCircle(t._tempPositionPoint),h=l[0],c=l[1],r[0]=h*this.radius,r[1]=c*this.radius,r[2]=0,a[0]=h*d,a[1]=c*d,a[2]=u,rl.normalize(i,i),n?(rl.scale(i,this.length*n.getFloat(),i),o[16]=n.seed):rl.scale(i,this.length*Math.random(),i),rl.add(e,i,e),this.randomDirection&&(n?(n.seed=o[17],xa._randomPointUnitSphere(i,n),o[17]=n.seed):xa._randomPointUnitSphere(i));break;case 3:n?(n.seed=o[16],xa._randomPointUnitCircle(t._tempPositionPoint,n)):xa._randomPointUnitCircle(t._tempPositionPoint),h=l[0],c=l[1],r[0]=h*this.radius,r[1]=c*this.radius,r[2]=0,a[0]=h*d,a[1]=c*d,a[2]=u,rl.normalize(i,i),n?(rl.scale(i,this.length*n.getFloat(),i),o[16]=n.seed):rl.scale(i,this.length*Math.random(),i),rl.add(e,i,e),this.randomDirection&&(n?(n.seed=o[17],xa._randomPointUnitSphere(i,n),o[17]=n.seed):xa._randomPointUnitSphere(i));break;default:throw new Error("ConeShape:emitType is invalid.")}},i.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var i=t;i.angle=this.angle,i.radius=this.radius,i.length=this.length,i.emitType=this.emitType,i.randomDirection=this.randomDirection},n(t,["_tempPositionPoint",function(){return this._tempPositionPoint=new ul},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new ul}]),t}(Ea),Od=function(e){function t(){this.radius=NaN,this.emitFromShell=!1,t.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}o(t,"laya.d3.core.particleShuriKen.module.shape.SphereShape",e);var i=t.prototype;return i._getShapeBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=t[2]=-this.radius;var i=e.max.elements;i[0]=i[1]=i[2]=this.radius},i._getSpeedBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=t[2]=-1;var i=e.max.elements;i[0]=i[1]=i[2]=1},i.generatePositionAndDirection=function(e,t,i,n){i?(i.seed=n[16],this.emitFromShell?xa._randomPointUnitSphere(e,i):xa._randomPointInsideUnitSphere(e,i),n[16]=i.seed):this.emitFromShell?xa._randomPointUnitSphere(e):xa._randomPointInsideUnitSphere(e),rl.scale(e,this.radius,e),this.randomDirection?i?(i.seed=n[17],xa._randomPointUnitSphere(t,i),n[17]=i.seed):xa._randomPointUnitSphere(t):e.cloneTo(t)},i.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var i=t;i.radius=this.radius,i.emitFromShell=this.emitFromShell,i.randomDirection=this.randomDirection},t}(Ea),Md=function(e){function t(e,i,n,o,s){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,t.__super.call(this,e,i,n),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=o,this._material=s}o(t,"laya.d3.graphics.SubMeshStaticBatch",e);var i=t.prototype;return i._compareBatchRenderElement=function(e,t){return e._batchIndexStart>t._batchIndexStart},i._addCombineBatchRenderObjTest=function(e){var t=0,i=e.renderObj._vertexCount;return t=i>0?this._currentCombineVertexCount+i:this._currentCombineVertexCount+e.renderObj._getVertexBuffer().vertexCount,!(t>65535)},i._addCombineBatchRenderObj=function(e){var t=e.renderObj,i=t._vertexCount;this._initBatchRenderElements.push(e),e._staticBatch=this,i>0?(this._currentCombineIndexCount+=t._indexCount,this._currentCombineVertexCount+=i):(this._currentCombineIndexCount=this._currentCombineIndexCount+t._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+t._getVertexBuffer().vertexCount),this._needFinishCombine=!0},i._deleteCombineBatchRenderObj=function(e){var t=e.renderObj,i=this._initBatchRenderElements.indexOf(e);if(-1!==i){this._initBatchRenderElements.splice(i,1),e._staticBatch=null;var n=t._vertexCount;n>0?(this._currentCombineIndexCount=this._currentCombineIndexCount-t._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-n):(this._currentCombineIndexCount=this._currentCombineIndexCount-t._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-t._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},i._finishInit=function(){if(this._needFinishCombine){var e=0,t=0;this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex>=0?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var i=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),n=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=IS.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=AS.create("ushort",this._currentCombineIndexCount,35044);for(var o=0,s=this._initBatchRenderElements.length;s>o;o++){var r=this._initBatchRenderElements[o],a=r.renderObj,l=a._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,r._sprite3D),h=a.getIndices(),c=r._sprite3D.transform._isFrontFaceInvert,u=e/(this._vertexDeclaration.vertexStride/4)-a._vertexStart,d=t,p=d+h.length;r._batchIndexStart=d,r._batchIndexEnd=p,n.set(h,t);var f=0;if(c)for(f=d;p>f;f+=3){n[f]=u+n[f];var _=n[f+1],m=n[f+2];n[f+1]=u+m,n[f+2]=u+_}else for(f=d;p>f;f+=3)n[f]=u+n[f],n[f+1]=u+n[f+1],n[f+2]=u+n[f+2];t+=h.length,i.set(l,e),e+=l.length}this._vertexBuffer.setData(i),this._indexBuffer.setData(n),this._needFinishCombine=!1}},i._getCombineRenderElementFromPool=function(){var e=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return e||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new Ad)},i._getRenderElement=function(e,t,i){for(var n,o,s=this._batchRenderElements.length,r=!0,a=0;s>a;a++){o=this._batchRenderElements[a];var l,h=o._sprite3D._render;0!==a&&(n=this._batchRenderElements[a-1],l=n._sprite3D._render,r=l.lightmapIndex!==h.lightmapIndex||l.receiveShadow!==h.receiveShadow||n._batchIndexEnd!==o._batchIndexStart);var c;if(r){c=this._getCombineRenderElementFromPool(),c.renderObj=this,c._material=this._material,c._batchIndexStart=o._batchIndexStart,c._batchIndexEnd=o._batchIndexEnd;var u=h.lightmapIndex,d=u+1,p=this._batchOwnerIndices[d];p||(p=this._batchOwnerIndices[d]=[]);var f,_=p[o._render.receiveShadow?1:0];void 0===_?(p[h.receiveShadow?1:0]=this._batchOwners.length,f=new Hw(null,"StaticBatchMeshSprite3D"),f._scene=t,f._transform=this._rootOwner?this._rootOwner._transform:null,f._render.lightmapIndex=u,f._render.receiveShadow=o._render.receiveShadow,this._batchOwners.push(f)):f=this._batchOwners[_],f._render._renderUpdate(i),c._sprite3D=f,e.push(c)}else c._batchIndexEnd=o._batchIndexEnd}},i._beforeRender=function(e){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},i._render=function(e){var t=e.renderElement,i=t._batchIndexStart,n=t._batchIndexEnd-i;ur.mainContext.drawElements(4,n,5123,2*i),Nr.drawCall++,Nr.trianglesFaces+=n/3},i.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},i._getVertexBuffer=function(e){return void 0===e&&(e=0),this._vertexBuffer},t}(Al),Dd=function(e){function t(){t.__super.call(this)}o(t,"laya.d3.graphics.MeshSprite3DStaticBatchManager",e);var i=t.prototype;return i._getStaticBatch=function(e,t,i,n){var o,s;return s=e?e.id.toString()+i.id.toString()+t.id.toString()+n.toString():i.id.toString()+t.id.toString()+n.toString(),this._staticBatches[s]?o=this._staticBatches[s]:this._staticBatches[s]=o=new Md(s,this,e,t,i),o},i._initStaticBatchs=function(e){this._initBatchRenderElements.sort(t._sortPrepareStaticBatch);for(var i,n,o,s=!1,r=0,a=0,l=this._initBatchRenderElements.length;l>a;a++){var h=this._initBatchRenderElements[a],c=h.renderObj._getVertexBuffer(0);h._sprite3D;if(n===c.vertexDeclaration&&i===h._material){var u;if(s)o._addCombineBatchRenderObjTest(h)?(u=h._staticBatch,u!==o&&(u&&u._deleteCombineBatchRenderObj(h),o._addCombineBatchRenderObj(h))):(s=!1,r++);else{var d=this._initBatchRenderElements[a-1],p=d.renderObj,f=h.renderObj;p._getVertexBuffer().vertexCount+f._getVertexBuffer().vertexCount>65535?s=!1:(o=this._getStaticBatch(e,n,i,r),u=d._staticBatch,u!==o&&(u&&u._deleteCombineBatchRenderObj(d),o._addCombineBatchRenderObj(d)),u=h._staticBatch,u!==o&&(u&&u._deleteCombineBatchRenderObj(h),o._addCombineBatchRenderObj(h)),s=!0)}}else s=!1,r=0;i=h._material,n=c.vertexDeclaration}},t._sortPrepareStaticBatch=function(e,t){var i=e._render,n=t._render,o=i.lightmapIndex-n.lightmapIndex;if(0===o){var s=i.receiveShadow-n.receiveShadow;if(0===s){var r=e._mainSortID-t._mainSortID;return 0===r?e.renderObj.triangleCount-t.renderObj.triangleCount:r}return s}return o},t}(ql),kd=function(e){function t(e){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,t.__super.call(this),this._padding=t._PADDING,this._spacing=t._SPACING,this._aligns=t._ALIGNS,this._font=Dh.EMPTY,this._ower=e}o(t,"laya.display.css.CSSStyle",e);var i=t.prototype;return i.destroy=function(){this._ower=null,this._font=null,this._rect=null},i.inherit=function(e){this._font=e._font,this._spacing=e._spacing===t._SPACING?t._SPACING:e._spacing.slice(),this.lineHeight=e.lineHeight},i._widthAuto=function(){return 0!==(262144&this._type)},i.widthed=function(e){return 0!=(8&this._type)},i._calculation=function(e,t){function i(e,t,i){return e*i[0]+t*i[1]+i[2]}function n(e){var t=s.width,n=o.width;r.width&&(o.width=i(t,n,r.width)),r.height&&(o.height=i(t,n,r.height)),r.left&&(o.x=i(t,n,r.left)),r.top&&(o.y=i(t,n,r.top))}if(t.indexOf("%")<0)return!1;var o=this._ower,s=o.parent,r=this._rect;null===r&&(s._getCSSStyle()._type|=524288,s.on("resize",this,n),this._rect=r={input:{}});var a=t.split(" ");return a[0]=parseFloat(a[0])/100,1==a.length?a[1]=a[2]=0:(a[1]=parseFloat(a[1])/100,a[2]=parseFloat(a[2])),r[e]=a,r.input[e]=t,n(e),!0},i.heighted=function(e){return 0!=(8192&this._type)},i.size=function(e,t){var i=this._ower,n=!1;-1!==e&&e!=this._ower.width&&(this._type|=8,this._ower.width=e,n=!0),-1!==t&&t!=this._ower.height&&(this._type|=8192,this._ower.height=t,n=!0),n&&(i._layoutLater(),524288&this._type&&i.event("resize",this))},i._getAlign=function(){return this._aligns[0]},i._getValign=function(){return this._aligns[1]},i._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},i._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new Dh(this._font))},i.render=function(e,t,i,n){var o=e.width,s=e.height;i-=e.pivotX,n-=e.pivotY,this._bgground&&null!=this._bgground.color&&t.ctx.fillRect(i,n,o,s,this._bgground.color),this._border&&this._border.color&&t.drawRect(i,n,o,s,this._border.color.strColor,this._border.size)},i.getCSSStyle=function(){return this},i.cssText=function(e){this.attrs(t.parseOneCSS(e,";"))},i.attrs=function(e){if(e)for(var t=0,i=e.length;i>t;t++){var n=e[t];this[n[0]]=n[1]}},i.setTransform=function(e){"none"===e?this._tf=Mh._TF_EMPTY:this.attrs(t.parseOneCSS(e,","))},i.translate=function(e,t){this._tf===Mh._TF_EMPTY&&(this._tf=new Oh),this._tf.translateX=e,this._tf.translateY=t},i.scale=function(e,t){this._tf===Mh._TF_EMPTY&&(this._tf=new Oh),this._tf.scaleX=e,this._tf.scaleY=t},i._enableLayout=function(){return 0===(2&this._type)&&0===(4&this._type)},s(0,i,"_rotate",null,function(e){this._ower.rotation=e}),s(0,i,"_translate",null,function(e){this.translate(e[0],e[1])}),s(0,i,"display",null,function(e){switch(e){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),s(0,i,"paddingLeft",function(){return this.padding[3]}),s(0,i,"background",null,function(e){return e?(this._bgground||(this._bgground={}),this._bgground.color=e,this._ower.conchModel&&this._ower.conchModel.bgColor(e),this._type|=16384,void(this._ower._renderType|=256)):void(this._bgground=null)}),s(0,i,"border",function(){return this._border?this._border.value:""},function(e){if("none"==e)return void(this._border=null);this._border||(this._border={}),this._border.value=e;var t=e.split(" ");if(this._border.color=zr.create(t[t.length-1]),1==t.length)return this._border.size=1,void(this._border.type="solid");var i=0;t[0].indexOf("px")>0?(this._border.size=parseInt(t[0]),i++):this._border.size=1,this._border.type=t[i],this._ower._renderType|=256}),s(0,i,"absolute",function(){return 0!==(4&this._type)}),s(0,i,"strokeColor",function(){return this._font.stroke[1]},function(e){this._createFont().stroke===Dh._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=e}),s(0,i,"stroke",function(){return this._font.stroke[0]},function(e){this._createFont().stroke===Dh._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=e}),s(0,i,"color",function(){return this._font.color},function(e){this._createFont().color=e}),s(0,i,"textDecoration",function(){return this._font.decoration},function(e){this._createFont().decoration=e}),s(0,i,"fontWeight",function(){return this._font.weight},function(e){this._createFont().weight=e}),s(0,i,"weight",null,function(e){this._createFont().weight=e}),s(0,i,"fontFamily",function(){return this._font.family},function(e){this._createFont().family=e}),s(0,i,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(e){return e?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==e?null:zr.create(e),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),void(this._ower._renderType|=256)):void(this._border=null)}),s(0,i,"valign",function(){return t._valigndef[this._aligns[1]]},function(e){this._aligns===t._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=t._valigndef[e]}),s(0,i,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(e){"nowrap"===e&&(this._type|=131072),"none"===e&&(this._type&=-131073)}),s(0,i,"letterSpacing",function(){return this._spacing[0]},function(e){"string"==typeof e&&(e=parseInt(e+"")),this._spacing===t._SPACING&&(this._spacing=[0,0]),this._spacing[0]=e}),s(0,i,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(e){"none"===e?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=e),this._ower.conchModel&&this._ower.conchModel.bgColor(e),this._ower._renderType|=256}),s(0,i,"leading",function(){return this._spacing[1]},function(e){"string"==typeof e&&(e=parseInt(e+"")),this._spacing===t._SPACING&&(this._spacing=[0,0]),this._spacing[1]=e}),s(0,i,"font",function(){return this._font.toString()},function(e){this._createFont().set(e)}),s(0,i,"password",function(){return this._font.password},function(e){this._createFont().password=e}),s(0,i,"padding",function(){return this._padding},function(e){this._padding=e}),s(0,i,"bold",function(){return this._font.bold},function(e){this._createFont().bold=e}),s(0,i,"paddingTop",function(){return this.padding[0]}),s(0,i,"height",null,function(e){if(this._type|=8192,"string"==typeof e){if(this._calculation("height",e))return;e=parseInt(e)}this.size(-1,e)}),s(0,i,"wordWrap",function(){return 0===(131072&this._type)},function(e){e?this._type&=-131073:this._type|=131072}),s(0,i,"lineElement",function(){return 0!=(65536&this._type)},function(e){e?this._type|=65536:this._type&=-65537}),s(0,i,"italic",function(){return this._font.italic},function(e){this._createFont().italic=e}),s(0,i,"_scale",null,function(e){this._ower.scale(e[0],e[1])}),s(0,i,"top",null,function(e){var t=this._ower;if("string"==typeof e){if("middle"===e?e="50% -50% 0":"bottom"===e&&(e="100% -100% 0"),this._calculation("top",e))return;e=parseInt(e)}t.y=e}),s(0,i,"left",null,function(e){var t=this._ower;if("string"==typeof e){if("center"===e?e="50% -50% 0":"right"===e&&(e="100% -100% 0"),this._calculation("left",e))return;e=parseInt(e)}t.x=e}),s(0,i,"block",e.prototype._$get_block,function(e){e?this._type|=1:this._type&=-2}),s(0,i,"position",function(){return 4&this._type?"absolute":""},function(e){"absolute"==e?this._type|=4:this._type&=-5}),s(0,i,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(e){this.lineElement=!1,"right"===e?this._type|=32768:this._type&=-32769}),s(0,i,"fontSize",function(){return this._font.size},function(e){this._createFont().size=e}),s(0,i,"align",function(){return t._aligndef[this._aligns[0]]},function(e){this._aligns===t._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=t._aligndef[e]}),s(0,i,"width",null,function(e){if(this._type|=8,"string"==typeof e){var t=e.indexOf("auto");if(t>=0&&(this._type|=262144,e=e.substr(0,t)),this._calculation("width",e))return;e=parseInt(e)}this.size(e,-1)}),t.parseOneCSS=function(e,i){for(var n,o=[],s=e.split(i),r=0,a=s.length;a>r;r++){var l=s[r],h=l.indexOf(":"),c=l.substr(0,h).replace(/^\s+|\s+$/g,"");if(0!=c.length){var u=l.substr(h+1).replace(/^\s+|\s+$/g,""),d=[c,u];switch(c){case"italic":case"bold":d[1]="true"==u;break;case"line-height":d[0]="lineHeight",d[1]=parseInt(u);break;case"font-size":d[0]="fontSize",d[1]=parseInt(u);break;case"padding":n=u.split(" "),n.length>1||(n[1]=n[2]=n[3]=n[0]),d[1]=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];break;case"rotate":d[0]="_rotate",d[1]=parseFloat(u);break;case"scale":n=u.split(" "),d[0]="_scale",d[1]=[parseFloat(n[0]),parseFloat(n[1])];break;case"translate":n=u.split(" "),d[0]="_translate",d[1]=[parseInt(n[0]),parseInt(n[1])];break;default:(d[0]=t._CSSTOVALUE[c])||(d[0]=c)}o.push(d)}}return o},t.parseCSS=function(e,i){for(var n;null!=(n=t._parseCSSRegExp.exec(e));)t.styleSheets[n[1]]=t.parseOneCSS(n[2],";")},t.EMPTY=new t(null),t._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor","float":"cssFloat"},t._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),t._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},t._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},t.styleSheets={},t.ALIGN_CENTER=1,t.ALIGN_RIGHT=2,t.VALIGN_MIDDLE=1,t.VALIGN_BOTTOM=2,t._CSS_BLOCK=1,t._DISPLAY_NONE=2,t._ABSOLUTE=4,t._WIDTH_SET=8,t._PADDING=[0,0,0,0],t._RECT=[-1,-1,-1,-1],t._SPACING=[0,0],t._ALIGNS=[0,0,0],t.ADDLAYOUTED=512,t._NEWFONT=4096,t._HEIGHT_SET=8192,t._BACKGROUND_SET=16384,t._FLOAT_RIGHT=32768,t._LINE_ELEMENT=65536,t._NOWARP=131072,t._WIDTHAUTO=262144,t._LISTERRESZIE=524288,t}(Mh),Bd=function(t){function r(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,r.__super.call(this),this._style=Mh.EMPTY}o(r,"laya.display.Sprite",t);var l=r.prototype;return i.imps(l,{"laya.display.ILayout":!0}),l.createConchModel=function(){return new ConchNode},l.destroy=function(e){void 0===e&&(e=!0),this._releaseMem(),t.prototype.destroy.call(this,e),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},l.updateZOrder=function(){Dr.updateOrder(this._childs)&&this.repaint()},l.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},l.setBounds=function(e){this._set$P("uBounds",e)},l.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new Ch),Ch._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},l.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new Ch),Ch._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},l._boundPointsToParent=function(e){void 0===e&&(e=!1);var t=0,i=0;this._style&&(t=this._style._tf.translateX,i=this._style._tf.translateY,e=e||0!==this._style._tf.rotate,this._style.scrollRect&&(t+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var n=this._getBoundPointsM(e);if(!n||n.length<1)return n;if(8!=n.length&&(n=e?Nh.scanPList(n):Ch._getWrapRec(n,Ch.TEMP)._getBoundPoints()),!this.transform)return Dr.transPointList(n,this._x-t,this._y-i),n;var o=Ah.TEMP,s=0,r=n.length;for(s=0;r>s;s+=2)o.x=n[s],o.y=n[s+1],this.toParentPoint(o),n[s]=o.x,n[s+1]=o.y;return n},l.getGraphicBounds=function(e){return void 0===e&&(e=!1),this._graphics?this._graphics.getBounds(e):Ch.TEMP.setTo(0,0,0,0)},l._getBoundPointsM=function(e){if(void 0===e&&(e=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),
this.scrollRect){var t=Dr.clearArray(this._$P.temBM),i=Ch.TEMP;return i.copyFrom(this.scrollRect),Dr.concatArray(t,i._getBoundPoints()),t}var n,o,s,r=this._graphics?this._graphics.getBoundPoints():Dr.clearArray(this._$P.temBM);s=this._childs;for(var a=0,l=s.length;l>a;a++)n=s[a],n instanceof laya.display.Sprite&&1==n.visible&&(o=n._boundPointsToParent(e),o&&(r=r?Dr.concatArray(r,o):o));return r},l.getStyle=function(){return this._style===Mh.EMPTY&&(this._style=new Mh),this._style},l.setStyle=function(e){this._style=e},l._adjustTransform=function(){this._tfChanged=!1;var e,t=this._style,i=t._tf,n=i.scaleX,o=i.scaleY;if(i.rotate||1!==n||1!==o||i.skewX||i.skewY){e=this._transform||(this._transform=Ph.create()),e.bTransform=!0;var s=.0174532922222222*(i.rotate-i.skewX),r=.0174532922222222*(i.rotate+i.skewY),a=Math.cos(r),l=Math.sin(r),h=Math.sin(s),c=Math.cos(s);return e.a=n*a,e.b=n*l,e.c=-o*h,e.d=o*c,e.tx=e.ty=0,e}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,e},l.pos=function(e,t,i){if(void 0===i&&(i=!1),this._x!==e||this._y!==t){if(this.destroyed)return this;if(i){this._x=e,this._y=t,this.conchModel&&this.conchModel.pos(this._x,this._y);var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=e,this.y=t}return this},l.pivot=function(e,t){return this.pivotX=e,this.pivotY=t,this},l.size=function(e,t){return this.width=e,this.height=t,this},l.scale=function(e,t,i){void 0===i&&(i=!1);var n=this.getStyle(),o=n._tf;if(o.scaleX!=e||o.scaleY!=t){if(this.destroyed)return this;if(i){n.setScale(e,t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e,t),this._renderType|=4;var s=this._parent;s&&0===s._repaint&&(s._repaint=1,s.parentRepaint())}else this.scaleX=e,this.scaleY=t}return this},l.skew=function(e,t){return this.skewX=e,this.skewY=t,this},l.render=function(e,t,i){Nr.spriteCount++,As.renders[this._renderType]._fun(this,e,t+this._x,i+this._y),this._repaint=0},l.drawToCanvas=function(e,t,i,n){if(Ns.isConchNode){var o=GS.create("2D"),s=new Ps(e,t,o);return s.ctx.setCanvasType(1),this.conchModel.drawToCanvas(o.source,i,n),o}return a.drawToCanvas(this,this._renderType,e,t,i,n)},l.customRender=function(e,t,i){this._renderType|=1024},l._applyFilters=function(){if(!Ns.isWebGL){var e;if(e=this._$P.filters,e&&!(e.length<1))for(var t=0,i=e.length;i>t;t++)e[t].action.apply(this._$P.cacheCanvas)}},l._isHaveGlowFilter=function(){var e=0,t=0;if(this.filters)for(e=0;e<this.filters.length;e++)if(8==this.filters[e].type)return!0;for(e=0,t=this._childs.length;t>e;e++)if(this._childs[e]._isHaveGlowFilter())return!0;return!1},l.localToGlobal=function(e,t){void 0===t&&(t=!1),t===!0&&(e=new Ah(e.x,e.y));for(var n=this;n&&n!=i.stage;)e=n.toParentPoint(e),n=n.parent;return e},l.globalToLocal=function(e,t){void 0===t&&(t=!1),t&&(e=new Ah(e.x,e.y));for(var n=this,o=[];n&&n!=i.stage;)o.push(n),n=n.parent;for(var s=o.length-1;s>=0;)n=o[s],e=n.fromParentPoint(e),s--;return e},l.toParentPoint=function(e){if(!e)return e;e.x-=this.pivotX,e.y-=this.pivotY,this.transform&&this._transform.transformPoint(e),e.x+=this._x,e.y+=this._y;var t=this._style.scrollRect;return t&&(e.x-=t.x,e.y-=t.y),e},l.fromParentPoint=function(e){if(!e)return e;e.x-=this._x,e.y-=this._y;var t=this._style.scrollRect;return t&&(e.x+=t.x,e.y+=t.y),this.transform&&this._transform.invertTransformPoint(e),e.x+=this.pivotX,e.y+=this.pivotY,e},l.on=function(e,i,n,o){return 1!==this._mouseEnableState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,n,o,!1)):t.prototype.on.call(this,e,i,n,o)},l.once=function(e,i,n,o){return 1!==this._mouseEnableState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,n,o,!0)):t.prototype.once.call(this,e,i,n,o)},l._$2__onDisplay=function(){if(1!==this._mouseEnableState){var e=this;for(e=e.parent;e&&1!==e._mouseEnableState&&!e._getBit(2);)e.mouseEnabled=!0,e._setBit(2,!0),e=e.parent}},l.loadImage=function(e,t,i,n,o,s){function r(e){a.destroyed||(a.size(t+(n||e.width),i+(o||e.height)),a.repaint(),s&&s.runWith(e))}var a=this;return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.graphics.loadImage(e,t,i,n,o,r),this},l.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},l._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},l._childChanged=function(e){this._childs.length?this._renderType|=2048:this._renderType&=-2049,e&&this._get$P("hasZorder")&&i.timer.callLater(this,this.updateZOrder),this.repaint()},l.parentRepaint=function(){var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint())},l.startDrag=function(e,t,i,n,o,s,r){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=300),void 0===s&&(s=!1),void 0===r&&(r=.92),this._$P.dragging||this._set$P("dragging",new Pr),this._$P.dragging.start(this,e,t,i,n,o,s,r)},l.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},l._releaseMem=function(){if(this._$P){var e=this._$P.cacheCanvas;e&&e.ctx&&(Hr.recover("RenderContext",e.ctx),e.ctx.canvas.size(0,0),e.ctx=null);var t=this._$P._filterCache;t&&(t.destroy(),t.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},l._setDisplay=function(e){e||this._releaseMem(),t.prototype._setDisplay.call(this,e)},l.hitTestPoint=function(e,t){var i=this.globalToLocal(Ah.TEMP.setTo(e,t));e=i.x,t=i.y;var n=this._$P.hitArea?this._$P.hitArea:this._width>0&&this._height>0?Ch.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds();return n.contains(e,t)},l.getMousePoint=function(){return this.globalToLocal(Ah.TEMP.setTo(i.stage.mouseX,i.stage.mouseY))},l._getWords=function(){return null},l._addChildsToLayout=function(e){var t=this._getWords();if(null==t&&0==this._childs.length)return!1;if(t)for(var i=0,n=t.length;n>i;i++)e.push(t[i]);return this._childs.forEach(function(t,i,n){t._style._enableLayout()&&t._addToLayout(e)}),!0},l._addToLayout=function(e){this._style.absolute||(this._style.block?e.push(this):this._addChildsToLayout(e)&&(this.x=this.y=0))},l._isChar=function(){return!1},l._getCSSStyle=function(){return this._style.getCSSStyle()},l._setAttributes=function(e,t){switch(e){case"x":this.x=parseFloat(t);break;case"y":this.y=parseFloat(t);break;case"width":this.width=parseFloat(t);break;case"height":this.height=parseFloat(t);break;default:this[e]=t}},l._layoutLater=function(){this.parent&&this.parent._layoutLater()},s(0,l,"texture",function(){return this._texture},function(e){this._texture!=e&&(this._texture=e,this.graphics.cleanByTexture(e,0,0))}),s(0,l,"mouseY",function(){return this.getMousePoint().y}),s(0,l,"globalScaleX",function(){for(var e=1,t=this;t&&t!==i.stage;)e*=t.scaleX,t=t.parent;return e}),s(0,l,"mouseEnabled",function(){return this._mouseEnableState>1},function(e){this._mouseEnableState=e?2:1}),s(0,l,"mask",function(){return this._$P._mask},function(e){e&&this.mask&&this.mask._$P.maskParent||(e?(this.cacheAs="bitmap",this._set$P("_mask",e),e._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",e),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(e?e.conchModel:null),this._renderType|=64,this.parentRepaint())}),s(0,l,"hitArea",function(){return this._$P.hitArea},function(e){this._set$P("hitArea",e)}),s(0,l,"graphics",function(){return this._graphics||(this.graphics=a.createGraphics())},function(e){this._graphics&&(this._graphics._sp=null),this._graphics=e,e?(this._renderType&=-2,this._renderType|=512,e._sp=this,this.conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(r.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),s(0,l,"filters",function(){return this._$P.filters},function(e){e&&0===e.length&&(e=null),this._$P.filters!=e&&(this._set$P("filters",e?e.slice():null),Ns.isConchApp&&(this.conchModel&&(r.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),Ns.isWebGL&&(e&&e.length?this._renderType|=32:this._renderType&=-33),e&&e.length>0?(this._getBit(1)||this._setUpNoticeType(1),Ns.isWebGL&&1==e.length&&e[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(Ns.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),s(0,l,"globalScaleY",function(){for(var e=1,t=this;t&&t!==i.stage;)e*=t.scaleY,t=t.parent;return e}),s(0,l,"alpha",function(){return this._style.alpha},function(e){this._style&&this._style.alpha!==e&&(e=0>e?0:e>1?1:e,this.getStyle().alpha=e,this.conchModel&&this.conchModel.alpha(e),1!==e?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),s(0,l,"scaleX",function(){return this._style._tf.scaleX},function(e){var t=this.getStyle();if(t._tf.scaleX!==e){t.setScaleX(e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e,t._tf.scaleY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),s(0,l,"skewY",function(){return this._style._tf.skewY},function(e){var t=this.getStyle();if(t._tf.skewY!==e){t.setSkewY(e),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(t._tf.skewX,e),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),s(0,l,"visible",function(){return this._style.visible},function(e){this._style&&this._style.visible!==e&&(this.getStyle().visible=e,this.conchModel&&this.conchModel.visible(e),this.parentRepaint())}),s(0,l,"pivotY",function(){return this._style._tf.translateY},function(e){this.getStyle().setTranslateY(e),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,e),this.repaint()}),s(0,l,"y",function(){return this._y},function(e){if(this._y!==e){if(this.destroyed)return;this._y=e,this.conchModel&&this.conchModel.pos(this._x,e);var t=this._parent;t&&0===t._repaint&&(t._repaint=1,t.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),s(0,l,"pivotX",function(){return this._style._tf.translateX},function(e){this.getStyle().setTranslateX(e),this.conchModel&&this.conchModel.pivot(e,this._style._tf.translateY),this.repaint()}),s(0,l,"skewX",function(){return this._style._tf.skewX},function(e){var t=this.getStyle();if(t._tf.skewX!==e){t.setSkewX(e),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e,t._tf.skewY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),s(0,l,"scrollRect",function(){return this._style.scrollRect},function(e){this.getStyle().scrollRect=e,this.repaint(),e?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(e.x,e.y,e.width,e.height)):(this._renderType&=-129,this.conchModel&&(r.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),s(0,l,"rotation",function(){return this._style._tf.rotate},function(e){var t=this.getStyle();if(t._tf.rotate!==e){t.setRotate(e),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(e),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),s(0,l,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(e){this._tfChanged=!1,this._transform=e,e&&(this._x=e.tx,this._y=e.ty,e.tx=e.ty=0,this.conchModel&&this.conchModel.transform(e.a,e.b,e.c,e.d,this._x,this._y)),e?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),s(0,l,"scaleY",function(){return this._style._tf.scaleY},function(e){var t=this.getStyle();if(t._tf.scaleY!==e){t.setScaleY(e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t._tf.scaleX,e),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),s(0,l,"mouseX",function(){return this.getMousePoint().x}),s(0,l,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(e){this._width!==e&&(this._width=e,this.conchModel&&this.conchModel.size(e,this._height),this.repaint())}),s(0,l,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(e){var t=this._$P.cacheCanvas;if(e!==(t?t.type:"none")){if("none"!==e)this._getBit(1)||this._setUpNoticeType(1),t||(t=this._set$P("cacheCanvas",Hr.getItemByClass("cacheCanvas",Object))),t.type=e,t.reCache=!0,this._renderType|=16,"bitmap"==e&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(t){var i=t;i&&i.ctx&&(Hr.recover("RenderContext",i.ctx),i.ctx.canvas.size(0,0),i.ctx=null),Hr.recover("cacheCanvas",t)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),s(0,l,"staticCache",function(){return this._$P.staticCache},function(e){this._set$P("staticCache",e),e||this.reCache()}),s(0,l,"zOrder",function(){return this._zOrder},function(e){this._zOrder!=e&&(this._zOrder=e,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(e),this._parent&&(e&&this._parent._set$P("hasZorder",!0),i.timer.callLater(this._parent,this.updateZOrder)))}),s(0,l,"stage",function(){return i.stage}),s(0,l,"parent",t.prototype._$get_parent,function(e){i.superSet(oc,this,"parent",e),e&&this._getBit(2)&&this._$2__onDisplay()}),s(0,l,"customRenderEnable",null,function(e){if(e&&(this._renderType|=1024,Ns.isConchNode)){r.CustomList.push(this);var t=new GS("2d");t._setContext(new CanvasRenderingContext2D),this.customContext=new Ps(0,0,t),t.context.setCanvasType&&t.context.setCanvasType(2),this.conchModel.custom(t.context)}}),s(0,l,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(e){this._height!==e&&(this._height=e,this.conchModel&&this.conchModel.size(this._width,e),this.repaint())}),s(0,l,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(e){this.cacheAs=e?this._$P.hasFilter?"none":"normal":"none"}),s(0,l,"x",function(){return this._x},function(e){if(this._x!==e){if(this.destroyed)return;this._x=e,this.conchModel&&this.conchModel.pos(e,this._y);var t=this._parent;t&&0===t._repaint&&(t._repaint=1,t.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),s(0,l,"blendMode",function(){return this._style.blendMode},function(e){this.getStyle().blendMode=e,this.conchModel&&this.conchModel.blendMode(e),e&&"source-over"!=e?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),s(0,l,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(e){this._optimizeScrollRect!=e&&(this._optimizeScrollRect=e,this.conchModel&&this.conchModel.optimizeScrollRect(e))}),r.fromImage=function(e){return(new r).loadImage(e)},r.CustomList=[],n(r,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=e.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),r}(oc),Vd=function(e){function t(){this._socket=null,this._lastSendTimestamp=NaN,this._tryConnectTimes=0,this._loginCk=NaN,this.sendPool=[],this._poolOpen=!1,t.__super.call(this,"SocketProxy")}o(t,"net.SocketProxy",e);var n=t.prototype;return n.onRegister=function(){try{this._socket=new cx(v.socketIP,v.socketPort)}catch(e){}this._tryConnectTimes=0},n.reconect=function(){if(!i.stage.isVisibility)return void console.log("pass reconect because stage not visible.");if(this.sendPool.length=0,this._socket){if(as.debug(this,"reconect","websocket reconect"),this._socket.connected||0!=this._socket.state)return void this._socket.reconect(v.socketIP,v.socketPort)}else try{this._socket=new cx(v.socketIP,v.socketPort),this._tryConnectTimes+=1}catch(e){console.log("reconect erro",e),this._socket=null}},n.sendLogin=function(){this._tryConnectTimes=0;var e=new no;if(v.isDebug){var t={};e.module=3,e.cmd=1,t.userName=v.account,t.serverId=v.serverId,e.value=v.protoCodec.getRequestEncoder().encode("LoginDebug",t)}else if(v.loginDataSp){e.module=3,e.cmd=4;var n=new Vr,o=v.serverId+"|"+v.loginDataSp.id+"_"+v.loginDataSp.pwd;n.writeUTFBytes(o),e.value=n.buffer}else e.module=3,e.cmd=50,e.value=v.protoCodec.getRequestEncoder().encode("LoginPlatform",v.loginData);this.send(e),this._loginCk=0,this.onLoginClock(),i.timer.loop(1e3,this,this.onLoginClock)},n.onLoginClock=function(){this._loginCk+=.1,this._loginCk>=1?(this.clearLoginClock(),this.sendNotification("POP_ALERT_OFFLINE","网络连接已超时，请检查网络后重试。")):this.sendNotification("trace_load_press",{name:"发送登录请求",percent:this._loginCk})},n.clearLoginClock=function(){i.timer.clear(this,this.onLoginClock)},n.send=function(e){return this.isConnecting()?void(this._poolOpen?this._isfirst(e)?this.sendPool.push(e):this.sendPool.unshift(e):this.send_real(e,!1)):void(i.stage.isVisibility&&(x.getInstance().sendNotification("prompted_info_show",{info:"正在尝试重新连接网络..."}),as.error(this,"send","网络已断不再发请")))},n._isfirst=function(e){switch(e.module){case 10:case 7:case 12:case 17:case 40:case 21:case 32:case 38:case 26:case 53:case 55:case 59:case 60:case 61:case 63:case 64:case 66:return!0}return!1},n.openPool=function(e){this._poolOpen=e,this._poolOpen&&(this.sendPool.length=0,i.timer.frameLoop(6,this,this.onSendPool))},n.onSendPool=function(){if(this.sendPool.length>0){var e=this.sendPool.pop();this.send_real(e,!0)}else this._poolOpen||i.timer.clear(this,this.onSendPool)},n.send_real=function(e,t){return this.isConnecting()?(t||this.facade.sendNotification("SYS_MESSAGE_SEND_CMD",e),this._socket.sendPacket(e),void(this._lastSendTimestamp=g.clock.currentTime)):void(i.stage.isVisibility&&as.error(this,"send","网络已断不再发请"))},n.resetTryConnectTimes=function(){this._tryConnectTimes=0},n.isConnecting=function(){return null!=this._socket&&this._socket.connected},n.desconnect=function(){this._socket&&this._socket.close()},s(0,n,"lastReceiveTimestamp",function(){return null!=this._socket?this._socket.lastReceiveTimestamp:0}),s(0,n,"tryConnectTimes",function(){return this._tryConnectTimes}),s(0,n,"lastSendTimestamp",function(){return this._lastSendTimestamp},function(e){this._lastSendTimestamp=e}),t.NAME="SocketProxy",t}(sc),Fd=function(e){function t(){t.__super.call(this)}o(t,"net.command.SocketResponseErrorCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();switch(t.type){case"response_code_no_results":this.onResponseCodeNoResults(t);break;case"response_code_resolve_error":this.onResponseCodeResolveError(t);break;case"response_code_no_right":this.onResponseCodeNoRight(t);break;case"response_code_auth_code_error":this.onResponseCodeAuthCodeError(t);break;case"response_code_error":this.onResponseCodeError(t)}},i.onResponseCodeAuthCodeError=function(e){as.error(this,"onResponseCodeAuthCodeError",e.protocol+"_"+e.type)},i.onResponseCodeError=function(e){as.error(this,"onResponseCodeError",e.protocol+"_"+e.type)},i.onResponseCodeNoResults=function(e){as.error(this,"onResponseCodeNoResults",e.protocol+"_"+e.type)},i.onResponseCodeNoRight=function(e){as.error(this,"onResponseCodeNoRight",e.protocol+"_"+e.type)},i.onResponseCodeResolveError=function(e){as.error(this,"onResponseCodeResolveError",e.protocol+"_"+e.type)},t}(rc),Gd=function(e){function t(){t.__super.call(this)}o(t,"net.command.SocketCloseCommand",e);var i=t.prototype;return i.execute=function(e){as.info(this,"onClose","网络连接断开")},t}(rc),Hd=function(e){function t(){t.__super.call(this)}o(t,"net.command.SocketErroCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();as.info(this,"execute","socket连接.erro..."+JSON.stringify(t))},t}(rc),Ud=function(e){function t(){t.__super.call(this)}o(t,"net.command.SocketConnectCommand",e);var i=t.prototype;return i.execute=function(e){this.sendNotification("trace_load_info","socket已连接"),this.facade.hasCommand(C.USER_ACCOUNT_LOGIN)||(this.facade.registerCommand(C.USER_ACCOUNT_LOGIN,jd),this.facade.registerCommand(C.USER_ACCOUNT_LOGIN_SP,jd),this.facade.registerCommand(C.USER_ACCOUNT_LOGIN_PLATFORM,jd));var t=this.facade.retrieveProxy("SocketProxy");as.debug(this,"execute","发送登录请求"),t.sendLogin()},t}(rc),zd=function(e){function t(){t.__super.call(this)}o(t,"core.controller.EnterGameCommand",e);var i=t.prototype;return i.execute=function(e){},t}(rc),Wd=function(e){function t(){t.__super.call(this)}o(t,"core.controller.boostraps.BootstrapViews",e);var i=t.prototype;return i.execute=function(e){this.facade.registerMediator(new sp),this.facade.registerMediator(new Wp),this.facade.registerMediator(new Nv),this.facade.registerMediator(new AE),this.facade.registerMediator(new sg),this.facade.registerMediator(new Gb),this.facade.registerMediator(new tE),this.facade.registerMediator(new nE),this.facade.registerMediator(new __),this.facade.registerMediator(new Zm),this.facade.registerMediator(new $m),this.facade.registerMediator(new oy),this.facade.registerMediator(new hf),this.facade.registerMediator(new Lf),this.facade.registerMediator(new jg),this.facade.registerMediator(new lx),this.facade.registerMediator(new Mp),this.facade.registerMediator(new fE),this.facade.registerMediator(new Ep),this.facade.registerMediator(new Nb),this.facade.registerMediator(new cp),"none"!=v.INDULGE_TYPE&&this.facade.registerMediator(new SE),this.facade.registerMediator(new xv),this.facade.registerMediator(new X_),v.enableChat()&&this.facade.registerMediator(new C_),this.facade.registerMediator(new cg),this.facade.registerMediator(new yp),this.facade.registerMediator(new Kf),this.facade.registerMediator(new Ym),this.facade.registerMediator(new e_),this.facade.registerMediator(new kE),this.facade.registerMediator(new Gm),this.facade.registerMediator(new Fb),this.facade.registerMediator(new Av),(v.OPEN_PAYMENT||X.openJade())&&(this.facade.registerMediator(new Ev),this.facade.registerMediator(new sy)),this.facade.registerMediator(new nm),Kt.enable()&&this.facade.registerMediator(new pg),this.facade.registerMediator(new Zv),this.facade.registerMediator(new Eg),this.facade.registerMediator(new Sg),this.facade.registerMediator(new xg),this.facade.registerMediator(new XE),this.facade.registerMediator(new Jm),this.facade.registerMediator(new gv),this.facade.registerMediator(new yE),this.facade.registerMediator(new Yg),this.facade.registerMediator(new pv),this.facade.registerMediator(new L_),this.facade.registerMediator(new sb),this.facade.registerMediator(new by),this.facade.registerMediator(new FE)},t}(rc),Yd=function(e){function t(){t.__super.call(this)}o(t,"core.controller.boostraps.BootstrapCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand("binding_new_session_success",zd)},t}(rc),qd=function(e){function t(){t.__super.call(this)}o(t,"core.controller.boostraps.BootstrapModels",e);var i=t.prototype;return i.execute=function(e){this.facade.registerProxy(new jf),this.facade.registerProxy(new Xm),this.facade.registerProxy(new Mb),this.facade.registerProxy(new om),this.facade.registerProxy(new ky),this.facade.registerProxy(new Yv),this.facade.registerProxy(new JE),this.facade.registerProxy(new mE),this.facade.registerProxy(new j_),this.facade.registerProxy(new ax),this.facade.registerProxy(new ef),this.facade.registerProxy(new nf),this.facade.registerProxy(new tf),this.facade.registerProxy(new lS),this.facade.registerProxy(new rS),this.facade.registerProxy(new aS),this.facade.registerProxy(new hE),this.facade.registerProxy(new Pp),this.facade.registerProxy(new _p),this.facade.registerProxy(new Xg),this.facade.registerProxy(new yb),this.facade.registerProxy(new A_),this.facade.registerProxy(new fp),this.facade.registerProxy(new Eb),this.facade.registerProxy(new EE),this.facade.registerProxy(new bv),this.facade.registerProxy(new zg),this.facade.registerProxy(new ob),this.facade.registerProxy(new Ff),this.facade.registerProxy(new B_),this.facade.registerProxy(new Tv),this.facade.registerProxy(new Sm),this.facade.registerProxy(new vg),this.facade.registerProxy(new zp),this.facade.registerProxy(new pp),this.facade.registerProxy(new iy),this.facade.registerProxy(new Om),this.facade.registerProxy(new Dv),this.facade.registerProxy(new zf),this.facade.registerProxy(new TE),this.facade.registerProxy(new Am),this.facade.registerProxy(new Ab),this.facade.registerProxy(new yv),(v.OPEN_PAYMENT||X.openJade())&&(this.facade.registerProxy(new dv),this.facade.registerProxy(new Qv)),this.facade.registerProxy(new K_),this.facade.registerProxy(new Cb),Kt.enable()&&this.facade.registerProxy(new ng),this.facade.registerProxy(new Fv),this.facade.registerProxy(new lg),this.facade.registerProxy(new VE),this.facade.registerProxy(new Nf),this.facade.registerProxy(new av),this.facade.registerProxy(new pE),this.facade.registerProxy(new Og),this.facade.registerProxy(new sv),this.facade.registerProxy(new w_),this.facade.registerProxy(new Dy),this.facade.registerProxy(new cy),this.facade.registerProxy(new RE)},t}(rc),Kd=function(e){function t(){t.__super.call(this)}o(t,"core.controller.StartupCommand",e);var i=t.prototype;return i.initializeMacroCommand=function(){this.addSubCommand(Yd),this.addSubCommand(qd),this.addSubCommand(Wd),this.addSubCommand(wg),this.addSubCommand(qf),this.addSubCommand(Wm),this.addSubCommand(Yp),this.addSubCommand(Vb),this.addSubCommand(Hb),this.addSubCommand(Zf),this.addSubCommand(Rp),this.addSubCommand(xp),this.addSubCommand(mb),this.addSubCommand($_),this.addSubCommand(Kv),this.addSubCommand(GE),this.addSubCommand(_E),this.addSubCommand(_y),this.addSubCommand(vp),this.addSubCommand(Kg),this.addSubCommand(Z_),this.addSubCommand(T_),this.addSubCommand(rx),this.addSubCommand(yf),this.addSubCommand(bE),this.addSubCommand(Tb),this.addSubCommand(fv),this.addSubCommand(Dg),this.addSubCommand(nb),this.addSubCommand(Gf),this.addSubCommand(D_),this.addSubCommand(Sv),this.addSubCommand(am),this.addSubCommand(Op),this.addSubCommand(ny),this.addSubCommand(a_),this.addSubCommand(tg),this.addSubCommand(fg),this.addSubCommand(up),this.addSubCommand(Hf),this.addSubCommand(Lm),this.addSubCommand(Pv),this.addSubCommand(cb),this.addSubCommand(Wf),this.addSubCommand(wE),this.addSubCommand(Nm),this.addSubCommand(jv),this.addSubCommand(W_),this.addSubCommand(Sb),Kt.enable()&&this.addSubCommand(ig),this.addSubCommand(Vv),this.addSubCommand(dg),this.addSubCommand(ME),this.addSubCommand(Af),this.addSubCommand(uv),this.addSubCommand(uE),this.addSubCommand(Rg),this.addSubCommand(nv),this.addSubCommand(S_),this.addSubCommand(ry),this.addSubCommand(NE)},t}(ac),Xd=function(e){function t(){t.__super.call(this)}o(t,"gamelogin.controller.commands.CreateUserCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("LoginVO",t.value),n=this.facade.retrieveProxy("UserProxy"),o=n.login(i.id,i.serialNum);this.sendNotification("create_role_succed"),Ng.userVO.setValue(1002,i.name),k.reportData("create",o),op.onInitLevel(v.playerId),op.miniRegisterStep(16)}else this.sendNotification("create_role_field",t.status)},t}(rc),Qd=function(e){function t(){t.__super.call(this)}o(t,"gamelogin.controller.commands.HeartBeatCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decodeLong(t.value);g.clock.syncServerTime(i.toNumber(!1))}},t}(rc),jd=function(e){function t(){t.__super.call(this),this.reloadHandler=new h(this,this.reLoaded)}o(t,"gamelogin.controller.commands.UserLoginCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){as.debug(this,"execute","收到登录数据，载入主程序");var i=v.protoCodec.getResponseDecoder().decode("LoginVO",t.value);v.serialNum=i.serialNum;var n=this.facade.retrieveProxy("UserProxy");n.login(i.id,i.serialNum);this.sendNotification("load_game_main")}else t.status==ri.ACCOUNT_NOT_FOUND?this.sendNotification("load_game_role"):(this.sendNotification("trace_load_info","登录游戏异常："+t.status),v.isLoginSp?this.sendNotification("POP_ALERT_INFO",{info:"登录游戏失败,请确认帐号口令是否有误.",handler:this.reloadHandler}):this.sendNotification("POP_ALERT_INFO",{info:"登录游戏失败,请稍后再试.",handler:this.reloadHandler}));var o=this.facade.retrieveProxy("SocketProxy");o.clearLoginClock()},i.reLoaded=function(){v.isLoginSp?Or.window.location.reload(!0):X.gameReload(!0)},t}(rc),Zd=function(e){function t(){t.__super.call(this)}o(t,"gamelogin.controller.commands.LoginInitBaseCommand",e);var i=t.prototype;return i.execute=function(e){if(this.facade.hasProxy("SocketProxy")){var t=this.facade.retrieveProxy("SocketProxy");t.reconect()}else this.facade.registerCommand(C.USER_HEART_BEAT,Qd),this.facade.registerCommand("RESPONSE_ERROR",Fd),this.facade.registerCommand("socket_OPEN",Ud),this.facade.registerCommand("socket_CLOSE",Gd),this.facade.registerCommand("socket_ERROR",Hd),this.facade.registerProxy(new Vd),this.facade.registerProxy(new Ng)},t.INIT_LOGIN_COMMAND="INIT_LOGIN_COMMAND",t}(rc),Jd=function(e){function t(){this._visitorBindPage=null,this.sending=!1,this.sendUrl=null,this._loginData=null,this.emailReg=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,this.phoneReg=/^1[3|4|5|6|7|8|9]\d{9}$/,this.phoneForeignReg=/^\+\d+$/,this._lastEmail=null,this._lastPwd=null,this.roleId=0,this.timeSms=0,this.reloadHandler=new h(this,this.reLoaded),t.__super.call(this,t.NAME)}o(t,"gamelogin.view.LoginRegMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new sN),this.view.itemBar.selectHandler=new h(this,this.onBar),this.view.errorInfo.text="",this.view.on("mouseup",this,this.onMouseUp),this._visitorBindPage=new HN,this._visitorBindPage.on("mouseup",this,this.onVisitorPage),this.view.cbAgree.clickHandler=new h(this,this.onAgreeCheck);var e=Ts.getItem("_agree_check"),t=Ts.getItem("session_key");lo.isNull(e)||lo.isNull(t)?this.view.cbAgree.selected=!1:this.view.cbAgree.selected=!0},n.onAgreeCheck=function(){this.view.cbAgree.selected?Ts.setItem("_agree_check","true"):Ts.removeItem("_agree_check")},n.alertNetErro=function(){this.sendNotification("POP_CONFIRM_INFO",{info:"长时间未链接，请删除一些不常用的或非官方出的app，再重新尝试。"})},n.sendRequest=function(e,n,o){if(void 0===o&&(o="post"),this.sending)return this.sendNotification("prompted_info_show",{info:"正在等待请求返回"}),!1;i.timer.once(1e4,this,this.alertNetErro);var s=this;if(this.view.errorInfo.text="",this.sendUrl=e,T.IS_ON_MINI)B.getHttp(e,n,null,function(e){s.onHttp(e)},function(e){s.onHttpErr(null)});else if(Q.isLaya())t.sendNavite(e,n);else{var r="";for(var a in n){var l=n[a];r=r+a+"="+l+"&"}var h=new Iu;h.on("complete",this,this.onHttp),h.on("error",this,this.onHttpErr),h.send(e,r,o,"json"),this.sending=!0}return!0},n.listNotificationInterests=function(){return["OPEN_LOGIN_REG_PAGE","OPEN_VISITOR_BINDING_PAGE"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_LOGIN_REG_PAGE":"p01"==X.FID&&(this.view.cbAgree.selected=!1);var t=Ts.getItem("login_email");null!=t&&""!=t&&(this.view.login_email.text=t);var i=Ts.getItem("_pwd_key");lo.isNull(i)||""==i||(this.view.login_pwd.text=i);var n=Ts.getItem("session_key");if(lo.isNull(n))if(1==X._TEMP_LOSE_LOGIN){var o=new FN;o.closeHandler=new h(this,this.onTempClose),o.showInfo("<br><br><font color='#FFFFFF'>由于游戏火爆，导致人数猛增，服务器承载已达上限，我们正在筹备新服，请稍作等待。</font><br><font color='#FFFFFF'>如有疑问，请加QQ群：11604013，了解最新动态及领取群专属礼包</font>",0)}else this.view.itemBar.selectedIndex=0,this.showOrHide(!0);else this.sendRequest(X.LOGIN_API_PLATFORM_ME_RELOAD,{
skey:n});break;case"OPEN_VISITOR_BINDING_PAGE":X.IS_VISITOR&&this._visitorBindPage.popup()}},n.onTempClose=function(){v.gameMain.reLoaded()},n.showOrHide=function(e){e?i.stage.addChild(this.view):this.view.removeSelf()},n.onHttp=function(e){switch(this.sending=!1,this.sendUrl){case X.LOGIN_API_PLATFORM_ME_REG_SMS:case X.LOGIN_API_PLATFORM_ME_REG:0==e.code?this.loginSuccess(e.data):(this.sendNotification("prompted_info_show",{info:"注册帐号失败："+e.msg}),this.view.errorInfo.text=e.msg);break;case X.LOGIN_API_PLATFORM_ME_LOGIN_PHONE:case X.LOGIN_API_PLATFORM_ME_LOGIN:case X.LOGIN_API_PLATFORM_ME_VISITOR_REG:case X.LOGIN_API_PLATFORM_ME_VISITOR_LOGIN:0==e.code?this.loginSuccess(e.data):(this.sendNotification("prompted_info_show",{info:"登录失败："+e.msg}),this.view.errorInfo.text=e.msg);break;case X.LOGIN_API_PLATFORM_ME_VISITOR_BIND:0==e.code?(this._visitorBindPage.close(),X.IS_VISITOR=!1,Ts.setItem("session_key",e.data.sk),this.sendNotification("VISITOR_BIND_CHG"),this.sendNotification("prompted_info_show",{info:"绑定帐号成功"})):(this.sendNotification("prompted_info_show",{info:"绑定帐号失败"}),this._visitorBindPage.errorInfo.text=e.msg);break;case X.LOGIN_API_PLATFORM_ME_RELOAD:0==e.code?this.loginSuccess(e.data):(this.view.itemBar.selectedIndex=0,this.showOrHide(!0));break;case X.LOGIN_API_PLATFORM_ME_REG_SEND_MAIL:0==e.code?this.sendNotification("prompted_info_show",{info:"验证码已发送到您的邮箱"}):(this.sendNotification("prompted_info_show",{info:"验证码获取失败："+e.msg}),this.view.errorInfo.text=e.msg);break;case X.LOGIN_API_PLATFORM_ME_REG_SEND_SMS:0==e.code?this.sendNotification("prompted_info_show",{info:"验证码已发送到您的手机"}):(this.sendNotification("prompted_info_show",{info:"验证码获取失败："+e.msg}),this.view.errorInfo.text=e.msg);break;case X.LOGIN_API_PLATFORM_ME_REBACK:case X.LOGIN_API_PLATFORM_ME_REBACK_SMS:0==e.code?this.loginSuccess(e.data):(this.sendNotification("prompted_info_show",{info:"找回失败："+e.msg}),this.view.errorInfo.text=e.msg)}i.timer.clear(this,this.alertNetErro)},n.loginSuccess=function(e){this._loginData=e,this._loginData.visitor&&Ts.setItem("visitor_account",this._loginData.openid),X.IS_VISITOR=this._loginData.visitor,X.initApiUrl(),this.realLogin()},n.realLogin=function(){this.sendNotification("prompted_info_show",{info:"登录成功，正在进入游戏"}),op.miniRegisterStep(10),T.gameLoginPlatform(this._loginData),this.view.removeSelf()},n.onHttpErr=function(e){this.sending=!1,this.sendNotification("prompted_info_show",{info:"服务器升级维护中，预计1小时"}),this.sendUrl==X.LOGIN_API_PLATFORM_ME_RELOAD&&Ts.removeItem("session_key"),this.sendNotification("POP_ALERT_INFO",{info:"服务器升级维护中，预计1小时",handler:this.reloadHandler}),i.timer.clear(this,this.alertNetErro)},n.reLoaded=function(){X.gameReload(!0)},n.onBar=function(e){var t=this.view.regPage.getChildByName("btnSubmit"),i=this.view.regPage.getChildByName("lbPwd");switch(e){case 0:var n=Ts.getItem("visitor_account");lo.isNull(n)||""==n||"taptap"==X.FID?this.view.firstPage.visible=!1:this.view.firstPage.visible=!0,this.view.loginPage.visible=!0,this.view.regPage.visible=!1;break;case 1:if("SHIHAO"==X.PLATE_FORM||"TT199"==X.PLATE_FORM)return this.view.itemBar.selectedIndex=0,void this.sendNotification("prompted_info_show",{info:"当前服务器暂停注册"});this.view.firstPage.visible=!1,this.view.loginPage.visible=!1,this.view.regPage.visible=!0,i.text="密  码",t.label="注    册";break;case 2:this.view.firstPage.visible=!1,this.view.loginPage.visible=!1,this.view.regPage.visible=!0,i.text="新密码",t.label="找    回"}},n.onMouseUp=function(e){var t,i,n,o=this;switch(e.target.name){case"btnSubmit":if(0==this._checkAgree())return;if(t=this.view.reg_email.text,i=this.view.reg_pwd.text,n=this.view.reg_emailcode.text,null==i||""==i)return void this.sendNotification("prompted_info_show",{info:"密码不能为空，请确认后再试"});if(i.length<6)return void this.sendNotification("prompted_info_show",{info:"密码最少需要6位字符，请确认后再试"});if(null==n||""==n)return void this.sendNotification("prompted_info_show",{info:"密码不能为空，请确认后再试"});if(!t)return void this.sendNotification("prompted_info_show",{info:"帐号格式错误"});if(Ts.setItem("login_email",t),Ts.setItem("_pwd_key",i),!v.IS_GLOBAL_VERSION&&this.phoneReg.test(t)||this.phoneForeignReg.test(t))t=this.dealNum(t),1==this.view.itemBar.selectedIndex?this.sendRequest(X.LOGIN_API_PLATFORM_ME_REG_SMS,{phone:t,password:i,smscode:n,ch:X.FID}):this.sendRequest(X.LOGIN_API_PLATFORM_ME_REBACK_SMS,{phone:t,password:i,smscode:n});else{if(!this.emailReg.test(t))return void this.sendNotification("prompted_info_show",{info:"帐号格式错误，请确填写正确手机号码或邮件地址"});1==this.view.itemBar.selectedIndex?this.sendRequest(X.LOGIN_API_PLATFORM_ME_REG,{email:t,password:i,emailcode:n,ch:X.FID}):this.sendRequest(X.LOGIN_API_PLATFORM_ME_REBACK,{email:t,password:i,emailcode:n})}this._lastEmail=t,this._lastPwd=i;break;case"btnCode":if(0==this._checkAgree())return;if(t=this.view.reg_email.text){if(!v.IS_GLOBAL_VERSION&&this.phoneReg.test(t)||this.phoneForeignReg.test(t))t=this.dealNum(t),1==this.view.itemBar.selectedIndex?this.sendRequest(X.LOGIN_API_PLATFORM_ME_REG_SEND_SMS,{phone:t,flag:"reg"}):this.sendRequest(X.LOGIN_API_PLATFORM_ME_REG_SEND_SMS,{phone:t});else{if(!this.emailReg.test(t))return void this.sendNotification("prompted_info_show",{info:"帐号格式错误，请确填写正确手机号码或邮件地址"});1==this.view.itemBar.selectedIndex?this.sendRequest(X.LOGIN_API_PLATFORM_ME_REG_SEND_MAIL,{email:t,flag:"reg"}):this.sendRequest(X.LOGIN_API_PLATFORM_ME_REG_SEND_MAIL,{email:t})}this.beginClockSms()}else this.sendNotification("prompted_info_show",{info:"帐号格式错误"});break;case"btnLogin":if(0==this._checkAgree())return;if(t=this.view.login_email.text,i=this.view.login_pwd.text,null==i||""==i)return void this.sendNotification("prompted_info_show",{info:"密码不能为空，请确认后再试"});if(i.length<6)return void this.sendNotification("prompted_info_show",{info:"密码最少需要6位字符，请确认后再试"});if(!t)return void this.sendNotification("prompted_info_show",{info:"帐号格式错误，请确填写正确手机号码"});Ts.setItem("login_email",t),Ts.setItem("_pwd_key",i),this.sendLogin(t,i),this._lastEmail=t,this._lastPwd=i;break;case"btnVisitor":if(0==this._checkAgree())return;this.sendNotification("POP_CONFIRM_INFO",{sureLb:"立即绑定",cancelLb:"游客登录",info:"<br><font color='#e70626'>游客登录（试玩推荐），若更换设备或删除游戏将无法找回角色信息，无法保证您的帐户安全！</font><br><font color='#fffc00'>游客身份登录，进入游戏后可在设置页面进行绑定</font>",handler:h.create(this,function(e){if(e){var t=Ts.getItem("visitor_account");lo.isNull(t)||""==t?(o.sendNotification("prompted_info_show",{info:"未检测到游客帐号，您可以直接注册帐号。"}),o.view.itemBar.selectedIndex=1):o.sendNotification("OPEN_VISITOR_BINDING_PAGE")}else o.onVisitor()})});break;case"btnAccount":this.view.firstPage.visible=!1,this.view.loginPage.visible=!0;break;case"txAgree1":this.sendNotification("OPEN_AGREEMENT_PAGE","data/Agreement1.txt");break;case"txAgree2":this.sendNotification("OPEN_AGREEMENT_PAGE","data/Agreement2.txt")}},n._checkAgree=function(){return this.view.cbAgree.selected?!0:(this.sendNotification("prompted_info_show",{info:"请先勾选并同意相关协议"}),!1)},n.onVisitor=function(){var e=Ts.getItem("visitor_account");lo.isNull(e)||""==e?this.sendVisitReg():this.sendVisitLogin(e)},n.onVisitorPage=function(e){var t;switch(e.target.name){case"btnSubmit":t=this._visitorBindPage.phone.text;var i=this._visitorBindPage.password.text,n=this._visitorBindPage.smscode.text;if(null==i||""==i)return void this.sendNotification("prompted_info_show",{info:"密码不能为空，请确认后再试"});if(i.length<6)return void this.sendNotification("prompted_info_show",{info:"密码最少需要6位字符，请确认后再试"});if(null==n||""==n)return void this.sendNotification("prompted_info_show",{info:"密码不能为空，请确认后再试"});if(!t)return void this.sendNotification("prompted_info_show",{info:"帐号格式错误，请确填写正确手机号码"});if(!(!v.IS_GLOBAL_VERSION&&this.phoneReg.test(t)||this.phoneForeignReg.test(t)||this.emailReg.test(t)))return void this.sendNotification("prompted_info_show",{info:"帐号格式错误，请确填写正确手机号码或邮箱"});t=this.dealNum(t),this.sendVisitBind(v.account,i,t,n),Ts.setItem("login_email",t),Ts.setItem("_pwd_key",i),this._lastEmail=t,this._lastPwd=i;break;case"btnCode":if(t=this._visitorBindPage.phone.text){if(!v.IS_GLOBAL_VERSION&&this.phoneReg.test(t)||this.phoneForeignReg.test(t))t=this.dealNum(t),this.sendRequest(X.LOGIN_API_PLATFORM_ME_REG_SEND_SMS,{phone:t});else{if(!this.emailReg.test(t))return void this.sendNotification("prompted_info_show",{info:"帐号格式错误，请确填写正确手机号"});this.sendRequest(X.LOGIN_API_PLATFORM_ME_REG_SEND_MAIL,{email:t})}this.beginClockSms()}else this.sendNotification("prompted_info_show",{info:"帐号格式错误，请确填写正确手机号"})}},n.sendLogin=function(e,t){!v.IS_GLOBAL_VERSION&&this.phoneReg.test(e)||this.phoneForeignReg.test(e)?(e=this.dealNum(e),this.sendRequest(X.LOGIN_API_PLATFORM_ME_LOGIN_PHONE,{phone:e,password:t,roleId:this.roleId})):this.emailReg.test(e)&&this.sendRequest(X.LOGIN_API_PLATFORM_ME_LOGIN,{email:e,password:t,roleId:this.roleId})},n.sendVisitReg=function(){this.sendRequest(X.LOGIN_API_PLATFORM_ME_VISITOR_REG,{ch:X.FID})},n.sendVisitLogin=function(e){this.sendRequest(X.LOGIN_API_PLATFORM_ME_VISITOR_LOGIN,{account:e})},n.sendVisitBind=function(e,t,i,n){var o=Ts.getItem("session_key");this.sendRequest(X.LOGIN_API_PLATFORM_ME_VISITOR_BIND,{account:e,phone:i,password:t,smscode:n,skey:o})},n.dealNum=function(e){return e.replace("+","%2B")},n.beginClockSms=function(){this.view.btnCode.mouseEnabled=!1,this._visitorBindPage.btnCode.mouseEnabled=!1,this.timeSms=120,i.timer.loop(1e3,this,this.msmClock)},n.msmClock=function(){this.view.btnCode.text.changeText(this.timeSms+"秒"),this._visitorBindPage.btnCode.label=this.view.btnCode.label,this.timeSms-=1,this.timeSms<=0&&(this.view.btnCode.label="获取",this._visitorBindPage.btnCode.label=this.view.btnCode.label,this.view.btnCode.mouseEnabled=!0,this._visitorBindPage.btnCode.mouseEnabled=!0,i.timer.clear(this,this.msmClock))},s(0,n,"visitorBindPage",function(){return this.getViewComponent(),this._visitorBindPage}),s(0,n,"view",function(){return this.getViewComponent()}),t.sendNavite=function(e,t){Q.httpDoPost(e,JSON.stringify(t),"gamelogin.view.LoginRegMediator.httpSucceed","gamelogin.view.LoginRegMediator.httpError")},t.httpSucceed=function(e,t,i){var n;"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i);var o=x.getInstance().retrieveMediator(gamelogin.view.LoginRegMediator.NAME);o.sendUrl=t,o.onHttp(n)},t.httpError=function(e,t,i){var n=x.getInstance().retrieveMediator(gamelogin.view.LoginRegMediator.NAME);n.sendUrl=t,n.onHttpErr("")},t.NAME="LoginRegMediator",t.ACCOUNT_KEY="login_email",t.PWD_KEY="_pwd_key",t.AGREE_CHECK="_agree_check",t}(lc),$d=function(e){function t(){this._nameData=null,this.infos=null,this.nameSpr=null,this._lastRecieve=0,t.__super.call(this,t.NAME)}o(t,"gamelogin.view.CreateUserMediator",e);var r=t.prototype;return r.initViewComponent=function(){op.miniRegisterStep(15),this.setViewComponent(new rN),v.progressShow.visible=!1,i.stage.addChild(this.mainView),this.mainView.nameTxt.mouseEnabled=v.modifyName,this.mainView.rollBtn.on("mouseup",this,this.onMouseUp),this.mainView.creatBtn.on("mouseup",this,this.onMouseUp),this.mainView.nameTxt.on("blur",this,this.onTextChanged),0==v.modifyName?null==G.userName||""==G.userName?this.mainView.nameTxt.text=this.getName():this.mainView.nameTxt.text=this.normatName(G.userName):this._nameData&&(this.mainView.nameTxt.text=this.getName()),this.mainView.on("changed",this,this.onHeadChange),this.mainView.btnBack.clickHandler=new h(this,this.onBack)},r.onBack=function(){Ts.removeItem("_sever_selectd"),this.facade.removeMediator(t.NAME),X.logout(!0)},r.normatName=function(e){return e.length>=6&&(e=e.slice(0,5)),e},r.onHeadChange=function(){this._nameData},r.onRegister=function(){this.facade.registerCommand(C.USER_CREATE_CHARACTER,Xd,!0),i.loader.load(v.getDataFileUrl("namewords"),h.create(this,this.onCompleteNames),null,"json",1,!1)},r.onCompleteNames=function(e){this._nameData=new Array,this._nameData[0]=e.xing,this._nameData[1]=e.nan,this._nameData[2]=e.nv,this.mainView&&(this.mainView.nameTxt.text=this.getName())},r.onTextChanged=function(){var e=this.mainView.nameTxt,t=e.text;t=t.replace(/\s*$/g,""),t=t.replace(/^\s*/g,""),e.text=t;var i=this.getCharLength(e.text);4>i||i>16?this.showPrompt("长度二到四个中文"):mo.isLegalWord(e.text)?this.mainView.txt_error.text="":this.showPrompt("角色名有不合法字符")},r.getCharLength=function(e){var t=new Vr;return t.writeUTFBytes(e),t.length},r.showPrompt=function(e){this.mainView.txt_error.text=e?e:""},r.listNotificationInterests=function(){return["create_role_field","create_role_succed"]},r.handleNotification=function(e){switch(e.getName()){case"create_role_field":this.setHaveRole(vo["int"](e.getBody()));break;case"create_role_succed":this.facade.removeMediator(t.NAME)}},r.setHaveRole=function(e){this.showPrompt(ri.getLoginErrorInfo(e))},r.onMouseUp=function(e){switch(e.target){case this.mainView.creatBtn:var t=this.mainView.nameTxt.text;if(t){var i=this.getCharLength(t);if(i>=4&&16>=i){if(!this.isPassFilter(t)){this.showPrompt("有不合法字符，无法创建");break}if(this.hasBadWord(t)){this.showPrompt("角色名不可用，无法创建");break}this.sendCreateNet()}else this.showPrompt("长度二到四个中文")}else this.showPrompt("角色名不能为空");break;case this.mainView.rollBtn:this.mainView.nameTxt.text=this.getName(),mo.isLegalWord(this.mainView.nameTxt.text)&&(this.mainView.txt_error.text="")}},r.getNameBySex=function(e){if(null==this._nameData)return"御剑飞行";var t=1.6,i=(parseInt(t),this._nameData[0]),n=i.length*Math.random(),o=parseInt(n),s=i[o];return 0==e?i=this._nameData[2]:1==e&&(i=this._nameData[1]),n=Math.random()*i.length,o=parseInt(n),s+=i[o]},r.getName=function(){return this.getNameBySex(this.mainView.selectSex)},r.sendCreateNet=function(){var e={};if(e.isDebug=v.isDebug,e.playerName=this.mainView.nameTxt.text,e.job=this.mainView.selectJob,e.sex=this.mainView.selectSex,e.head=this.mainView.selectHead,e.password="",e.pf=X.PLATE_FORM,e.fid=X.FID,v.isDebug){var t={};t.userName=v.account,t.serverId=v.serverId,e.login=t}else e.login=v.loginData;hc.instance.createPlayer(e);var i=this.facade.retrieveProxy("SocketProxy");null!=i&&(0==this._lastRecieve?this._lastRecieve=i.lastReceiveTimestamp:this._lastRecieve<=i.lastReceiveTimestamp?console.log("网络不稳定，或已断线，稍后重试"):this._lastRecieve=i.lastReceiveTimestamp)},r.isPassFilter=function(e){var t=!0;if(e=e.replace(/\s*$/g,""),e=e.replace(/^\s*/g,""),e.length>=4&&e.length<=12){var i;if(t){var n;for(n in mo.ILLEGAL_WORDS)if(i=mo.ILLEGAL_WORDS[n],-1!=e.indexOf(i)){t=!1;break}}}return t},r.hasBadWord=function(e){return t.myPattern.test(e)},r.onRemove=function(){this.mainView.rollBtn.off("mouseup",this,this.onMouseUp),this.mainView.creatBtn.off("mouseup",this,this.onMouseUp),this.mainView.nameTxt.off("change",this.mainView,null),this.mainView.stage.off("resize",this.mainView,null),this.mainView.off("changed",this,this.onHeadChange),this.mainView.removeSelf(),this._nameData=null,this.setViewComponent(null),this.facade.removeCommand(C.USER_CREATE_CHARACTER)},s(0,r,"mainView",function(){return this.getViewComponent()}),t.NAME="CreateUser",n(t,["myPattern",function(){return this.myPattern=/成人|色妹/}]),t}(lc),ep=function(e){function t(){this._lbPlayerId=null,this._lbPws=null,this.sending=!1,this.sendUrl=null,this._serverList=null,this.reloadHandler=new h(this,this.reLoaded),t.__super.call(this,t.NAME)}o(t,"gamelogin.view.LoginSPMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new sN),this.view.itemBar.visible=!1,this.view.loginPage.visible=!1,this.view.regPage.visible=!1,this.view.firstPage.visible=!1,this.view.cbAgree.mouseEnabled=!1,this.view.cbAgree.selected=!0,this.view.loginSP.visible=!0,this.view.errorInfo.text="",this.view.loginSP.getChildByName("btnLogin").clickHandler=new h(this,this.onLogin),this._lbPlayerId=this.view.loginSP.getChildByName("playerId"),this._lbPws=this.view.loginSP.getChildByName("password")},n.sendRequest=function(e,t,i){if(void 0===i&&(i="post"),this.sending)return this.sendNotification("prompted_info_show",{info:"正在等待请求返回"}),!1;this.view.errorInfo.text="",this.sendUrl=e;var n="";for(var o in t){var s=t[o];n=n+o+"="+s+"&"}var r=new Iu;return r.on("complete",this,this.onHttp),r.on("error",this,this.onHttpErr),r.send(e,n,i,"json"),this.sending=!0,!0},n.listNotificationInterests=function(){return["OPEN_LOGIN_REG_PAGE","USER_INIT"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_LOGIN_REG_PAGE":this.showPage();break;case"USER_INIT":this.showOrHide(!1)}},n.showPage=function(){if(null==this._serverList)this.sendRequest(X.LOGIN_API_SERVER_LIST,{cid:X.PLATE_FORM});else{var e=Ts.getItem("sp_login_email"),t=!0;null!=e&&""!=e?this.lbPlayerId.text=e:t=!1;var i=Ts.getItem("sp_pwd_key");lo.isNull(i)||""==i?t=!1:this.lbPws.text=i,this.showOrHide(!0)}},n.onTempClose=function(){v.gameMain.reLoaded()},n.showOrHide=function(e){e?i.stage.addChild(this.view):this.view.removeSelf()},n.onHttp=function(e){switch(this.sending=!1,this.sendUrl){case X.LOGIN_API_SERVER_LIST:this._serverList=new uo;var t;for(var i in e){t=e[i];var n,o=t.br.split("|");for(var s in o){n=o[s];var r=n.split("_"),a=vo["int"](r[0]);this._serverList.set(a,t)}}this.showPage()}},n.onHttpErr=function(e){this.sending=!1,this.sendNotification("POP_ALERT_INFO",{info:"请求分区信息失败,请稍后再试",handler:this.reloadHandler})},n.reLoaded=function(){X.gameReload(!0)},n.onLogin=function(){var e=this.lbPlayerId.text,t=this.lbPws.text;if(null==e||""==e)return void this.sendNotification("prompted_info_show",{info:"角色编号不能为空，请确认后再试"});if(null==t||""==t)return void this.sendNotification("prompted_info_show",{info:"口令码不能为空，请确认后再试"});var i=e.split("-");if(i.length<2)return void this.sendNotification("prompted_info_show",{info:"角色编号有误，请确认后再试"});i.length>=3&&(v.account=i[2]);var n=vo["int"](i[0]),o=this._serverList.get(n);return null==o?void this.sendNotification("prompted_info_show",{info:"角色编号有误或分区异常，请确认后再试"}):(Ts.setItem("sp_login_email",e),Ts.setItem("sp_pwd_key",t),v.socketIP=o.ip,v.socketPort=o.port,v.loginDataSp={id:i[1],pwd:t},v.serverId=n,X.LOGIN_API_PLATFORM_NOTICE=o.apiNotice,void v.gameMain.queryNotice())},s(0,n,"lbPws",function(){return this.getViewComponent(),this._lbPws}),s(0,n,"lbPlayerId",function(){return this.getViewComponent(),this._lbPlayerId}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="LoginSPMediator",t.ACCOUNT_KEY="sp_login_email",t.PWD_KEY="sp_pwd_key",t}(lc),tp=function(e){function t(){t.__super.call(this,t.NAME)}o(t,"gamelogin.view.AgreementMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new JA),M.drawBlackBg(this.view,!0)},n.listNotificationInterests=function(){return["OPEN_AGREEMENT_PAGE"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_AGREEMENT_PAGE":i.loader.load(e.getBody(),h.create(this,this.onAgreeLoad),null,"text",1,!1)}},n.onAgreeLoad=function(e){this.view.txtInfo.text=e,this.view.txtInfo.height=this.view.txtInfo.textField.textHeight,this.view.pl.scrollTo(),this.view.popup()},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="AgreementMediator",t}(lc),ip=function(e){function t(){this._fileName=null,this.simpleView=null,this._tryTime=0,this._lastQueryAwardTime=NaN,t.__super.call(this,"LoadingMediator")}o(t,"gamelogin.view.LoadingMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new lN),this.mainView.name="loadingPage",this.mainView.refresh.clickHandler=new h(this,this.onFresh)},n.start=function(){this._tryTime=0,i.stage.addChild(this.mainView),this.traceModelStep("引导载入完成，尝试建立网络连接"),this.simpleView=new aN,v.IS_GLOBAL_VERSION?this.showFreshBt():(this.mainView.addChild(this.simpleView),this.mainView.refresh.visible=!1,i.timer.once(2e3,this,this.showFreshBt)),i.timer.loop(5e3,this,this._sendHeartBeat),this.facade.registerCommand("INIT_LOGIN_COMMAND",Zd),this.facade.sendNotification("INIT_LOGIN_COMMAND"),this.facade.removeCommand("INIT_LOGIN_COMMAND"),g.instance.prepMVC(),i.stage.on("visibilitychange",this,this._sendHeartBeat)},n.stop=function(){i.timer.clear(this,this.showFreshBt),i.timer.clear(this,this._sendHeartBeat),i.stage.off("visibilitychange",this,this._sendHeartBeat),i.timer.clear(this,this.doSendHeartBeat),this._tryTime=0},n._sendHeartBeat=function(){i.timer.callLater(this,this.doSendHeartBeat)},n.doSendHeartBeat=function(){var e=this.facade.retrieveMediator("ServerListMediatory");if(!(e&&e.mainView&&e.mainView.isPopup)){var t=this.facade.retrieveProxy("SocketProxy");if(null!=t){var n=g.clock.currentTime,o=t.lastSendTimestamp,s=n-o;if(0==t.isConnecting()){if(X.BE_KICKED_OFF)return void X.gameReload(!1);if(!i.stage.isVisibility)return t.lastSendTimestamp=n,void(this._tryTime=0);if(this._tryTime>4)this.sendNotification("POP_ALERT_OFFLINE","网络连接超时，刷新重试");else{this._tryTime+=1;var r=!1;if(this.mainView&&this.mainView.parent)r=!0;else{var a=this.facade.retrieveMediator("HomeMediator");a&&a.view&&(a.view.offlineLb.visible=!0,a.view.icoHead.alpha=.3);var l=this.facade.retrieveMediator($d.NAME);l&&l.mainView&&(r=!0);var h=this.facade.retrieveMediator("SelectWuxingMediator");h&&h.view&&(r=!0)}r&&this.sendNotification("prompted_info_show",{info:"服务器连接失败,正在重试...",updateTime:3e3}),X.gameReload(!1)}}else this._tryTime=0,s>=3e4&&hc.instance.sendHeartbeat(),s=n-t.lastReceiveTimestamp,s>6e4&&(t.desconnect(),this.sendNotification("prompted_info_show",{info:"服务器连接失败,正在重试.",updateTime:3e3}))}}},n.showFreshBt=function(){this.simpleView.removeSelf(),this.mainView.refresh.visible=!0},n.onFresh=function(){var e=this;this.sendNotification("POP_CONFIRM_INFO",{info:"网络延时或载入时间过长，点击确认刷新重试。",handler:h.create(this,function(t){t&&(e.mainView.refresh.visible=!1,X.gameReload(!0))})})},n.listNotificationInterests=function(){return["trace_load_info","trace_load_press","load_game_main","load_game_role","create_role_succed","USER_INIT","binding_new_session_success"]},n.handleNotification=function(e){switch(e.getName()){case"trace_load_info":this.traceModelStep(e.getBody());break;case"trace_load_press":var t=e.getBody();this.traceModelPress(t.name,t.percent);break;case"load_game_main":this.traceModelStep("载入游戏主程序"),this.goToGameMain();break;case"create_role_succed":this.traceModelStep("引导完成，进入游戏主程序"),this.goToGameMain();break;case"load_game_role":this.traceModelStep("载入游戏主程序，显示建角页"),this.facade.hasMediator($d.NAME)||this.facade.registerMediator(new $d);break;case"binding_new_session_success":if(null!=this.mainView&&this.mainView.parent)this.traceModelStep("绑定会话成功，正在进入游戏"),this.sendNotification("CLOSE_ALL_DIALOG"),this.requestOfflineAward();else if(g.clock.currentTime-this._lastQueryAwardTime>3e5)this.requestOfflineAward();else{var i=Ng.userVO.getValue(19002);0!=i&&Gc.instance.enterDungeon(i)}var n=this.facade.retrieveMediator("HomeMediator");n&&n.view&&(n.view.offlineLb.visible=!1,n.view.icoHead.alpha=1);break;case"USER_INIT":this.mainView.removeSelf()}},n.requestOfflineAward=function(){var e=this;i.timer.once(1e3,this,function(){mc.instance.queryOfflineAwards(),e._lastQueryAwardTime=g.clock.currentTime})},n.traceModelStep=function(e){this.mainView&&this.mainView.showModelStep(e)},n.traceModelPress=function(e,t){this.mainView&&this.mainView.showProgress(e,t)},n.goToGameMain=function(){this.showFreshBt(),g.instance.startUp()},n.onProgress=function(e){this.mainView&&this.mainView.showProgress("加载登录界面",e)},s(0,n,"mainView",function(){return this.getViewComponent()}),t.NAME="LoadingMediator",t}(lc),np=function(e){function t(){t.__super.call(this,t.NAME)}o(t,"gamelogin.view.MiniLoginMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new WN),this.view.on("mouseup",this,this.onMouseUp),this.view.btCanel.clickHandler=new h(this,this.onAgreeCanel),this.view.btSure.clickHandler=new h(this,this.onAgreeSure),this.view.cbAgree.clickHandler=new h(this,this.onAgreeCheck);var e=Ts.getItem("mini_agree_check");this.view.cbAgree.selected=!lo.isNull(e),Or.onQQMiniGame||Or.onQGMiniGame||Or.onKGMiniGame?(console.log("agree + "+e),lo.isNull(e)||!e?this.view.AgreeUI.visible=!0:this.view.AgreeUI.visible=!1):this.view.AgreeUI.visible=!1},i.onAgreeCheck=function(){this.view.cbAgree.selected?Ts.setItem("mini_agree_check","true"):Ts.removeItem("mini_agree_check")},i._checkAgree=function(){return this.view.cbAgree.selected?!0:(this.sendNotification("prompted_info_show",{info:"请先勾选并同意相关协议"}),!1)},i.onAgreeCanel=function(){op.exitMiniProgram()},i.onAgreeSure=function(){this.view.AgreeUI.visible=!1,Ts.setItem("mini_agree_check","true")},i.listNotificationInterests=function(){return["OPEN_MINI_LOGIN_REG_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_MINI_LOGIN_REG_PAGE":Or.onQQMiniGame||Or.onMiniGame||Or.onHWMiniGame||Or.onVVMiniGame||Or.onQGMiniGame||Or.onKGMiniGame?this.view.popup():op.beginLogin()}},i.onMouseUp=function(e){switch(e.target.name){case"btnLogin":if((Or.onQQMiniGame||Or.onMiniGame||Or.onHWMiniGame||Or.onVVMiniGame||Or.onQGMiniGame||Or.onKGMiniGame)&&0==this._checkAgree())return;this.view.close(),op.beginLogin();break;case"txAgree1":this.sendNotification("OPEN_AGREEMENT_PAGE","data/Agreement1.txt");break;case"txAgree2":this.sendNotification("OPEN_AGREEMENT_PAGE","data/Agreement2.txt")}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="MiniLoginMediator",t.MINI_AGREE_CHECK="mini_agree_check",t}(lc),op=function(e){function t(){t.__super.call(this)}return o(t,"link.denglu.mini.getMiniGame",e),t.isOnMiniIos=function(){return T.IS_ON_MINI&&Or.onIOS},t.initMini=function(){"wx"==T.IS_ON_ISQD?(console.log("初始化微信"),wr.init()):"qq"==T.IS_ON_ISQD?(console.log("初始化QQ"),tc.init()):"tt"==T.IS_ON_ISQD?(console.log("初始化今日头条"),Uh.init()):"xmmini"==T.IS_ON_ISQD?(console.log("初始化小米mini"),ks.init()):"hwmini"==T.IS_ON_ISQD?(console.log("初始化华为mini"),Ms.init()):"vivomini"==T.IS_ON_ISQD?(console.log("初始化VIVOmini"),oa.init()):"oppomini"==T.IS_ON_ISQD&&(console.log("初始化OPPOmini"),$r.init()),t.initApi(),t.initCommonApi(),t.updatePackage()},t.initApi=function(){t.platformName=T.IS_ON_ISQD,"qq"==t.platformName?(t.isp_Data=q,t.isMini=!0):"wx"==t.platformName?(t.isp_Data=W,t.isMini=!0):"tt"==t.platformName?(t.isp_Data=K,t.isMini=!0):"xmmini"==t.platformName?(t.isp_Data=z,t.isMini=!0):"hwmini"==t.platformName?(t.isp_Data=H,t.isMini=!0):"vivomini"==t.platformName?(t.isp_Data=U,t.isMini=!0):"oppomini"==t.platformName&&(t.isp_Data=Y,t.isMini=!0),null!=t.isp_Data&&(t.isp_Data.init&&t.isp_Data.init(),console.log("mini："+t.isp_Data.miniGame_name))},t.initCommonApi=function(){if(t.isp_Data.getLaunchOptionsSync){var e=t.isp_Data.getLaunchOptionsSync();console.log("getLaunchOptionsSync:"+JSON.stringify(e)),e.query.mycode&&(G.mycode=e.query.mycode);var i=Ts.getItem(link.denglu.mini.getMiniGame.mini_user_ad_params);console.log("out_ad_params="+e.query.ad_params),!e.query.ad_params||null!=i&&""!=i||(console.log("ad_params="+e.query.ad_params),Ts.setItem(link.denglu.mini.getMiniGame.mini_user_ad_params,e.query.ad_params)),t.isp_Data.showShareMenu&&t.isp_Data.showShareMenu({withShareTicket:!0})}t.isp_Data.onShareAppMessage&&t.isp_Data.onShareAppMessage(function(){var e="",t=x.getInstance().retrieveProxy("DailyProxy");return t&&t.invite&&(e="mycode="+t.invite.mycode),console.log("系统转发分享data:"+e),{title:F.shareMessage[0],imageUrl:F.shareMessage[1],query:e,success:function(e){console.log("分享成功")}}})},t.updatePackage=function(){if(Or.onHWMiniGame,(Or.onMiniGame||Or.onTTMiniGame||Or.onQQMiniGame||Or.onVVMiniGame||Or.onQGMiniGame||Or.onKGMiniGame)&&t.isp_Data.getUpdateManager){var e=t.isp_Data.getUpdateManager();e.onCheckForUpdate(function(e){console.log(e.hasUpdate)}),e.onUpdateReady(function(){t.isp_Data.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){})}},t.beginLogin=function(){t.initPlatform(),t.startLogin()},t.checkSession=function(e,i){(Or.onHWMiniGame||Or.onVVMiniGame||Or.onQGMiniGame||Or.onKGMiniGame)&&e(),(Or.onMiniGame||Or.onTTMiniGame||Or.onQQMiniGame)&&t.isp_Data.checkSession({success:function(){console.log("小程序 session 未过期"),e()},fail:function(){console.log("小程序 session 已过期，需要重新登录"),t.isp_Data.login({success:function(i){console.log("小程序 登录成功",i);var n=t.miniUrl,o={code:i.code};B.getHttp(n,o,null,function(t){console.log("小程序角色登录数据：",t);var i=t;if(0==t.errocode){var n=JSON.stringify(i);Ts.setItem(link.denglu.mini.getMiniGame.mini_user_data,n),console.log("小程序注册openid",i),G.openId=i.openid,v.account=i.openid,Ts.setItem(link.denglu.mini.getMiniGame.mini_user_openid,G.openId),Ts.setItem(link.denglu.mini.getMiniGame.mini_user_session_key,G.session_key),e()}},function(e){Error("小程序链接异常")})},fail:function(e){i(),console.log("小程序 登录失败",e)}})}})},t.initPlatform=function(){t.isp_Data.getSystemInfo({success:function(e){G.screenWidth=e.screenWidth,G.screenHeight=e.screenHeight,G.windowWidth=e.windowWidth,G.windowHeight=e.windowHeight,G.statusBarHeight=e.statusBarHeight,console.log("获取微信设备信息:"),console.log(JSON.stringify(e))}}),t.isp_Data.initSpecialApi()},t.startLogin=function(){(Or.onHWMiniGame||Or.onVVMiniGame||Or.onQGMiniGame||Or.onKGMiniGame)&&t.isp_Data.gamelogin(),(Or.onMiniGame||Or.onTTMiniGame||Or.onQQMiniGame)&&t.isp_Data.login({success:function(e){console.log("login登录："),console.log(e),e.code?t.sendOpedId({code:e.code}):(t.startLogin(),console.error("小程序Login：登录失败!",e.errMsg))},fail:function(e){console.error("小程序login接口调用失败:",e)}})},t.sendOpedId=function(e){console.log(t.miniUrl),console.log(JSON.stringify(e)),B.getHttp(t.miniUrl,e,null,function(e){console.log("小程序角色登录数据：",JSON.stringify(e));var i=e;if(0==i.errocode){var n=JSON.stringify(i);Ts.setItem(link.denglu.mini.getMiniGame.mini_user_data,n),console.log("小程序注册openid",i.openid),G.openId=i.openid,G.session_key=i.sk,Or.onMiniGame&&(console.log("阿拉丁上报openId",G.openId),t.isp_Data.eventSetOpenid(G.openId)),t.miniRegisterStep(10),Ts.setItem(link.denglu.mini.getMiniGame.mini_user_openid,G.openId),Ts.setItem(link.denglu.mini.getMiniGame.mini_user_session_key,G.session_key),T.gameLoginPlatform(i)}},function(e){Error("小程序链接异常")})},t.payment=function(e){t.isp_Data.payment(e)},t.onServicer=function(){return Or.onIOS,""},t.createRewardedVideoAd=function(e,i){Or.onMiniGame||Or.onTTMiniGame||Or.onQQMiniGame||Or.onHWMiniGame||Or.onQGMiniGame||Or.onVVMiniGame||Or.onKGMiniGame?t.isp_Data.createRewardedVideoAd(e,i):x.getInstance().sendNotification("prompted_info_show",{info:"暂不支持"})},t.shareAppMessage=function(){if(Or.onMiniGame||Or.onTTMiniGame||Or.onQQMiniGame){var e="",i=x.getInstance().retrieveProxy("DailyProxy");i&&i.invite&&(e="mycode="+i.invite.mycode),console.log("主动调起分享data:"+e),t.isp_Data.shareAppMessage({title:F.shareMessage[0],imageUrl:F.shareMessage[1],query:e,success:function(e){console.log("分享成功")}})}},t.exitMiniProgram=function(){(Or.onMiniGame||Or.onTTMiniGame||Or.onQQMiniGame||Or.onQGMiniGame||Or.onKGMiniGame)&&t.isp_Data.exitMiniProgram({}),(Or.onHWMiniGame||Or.onVVMiniGame)&&t.isp_Data.exitMiniProgram()},t.openCustomerServiceConversation=function(e,t){},t.aldSendEvent=function(e,t){void 0===t&&(t=!1),V.aldSendEvent(e,t)},t.onInitLevel=function(e){V.onInitLevel(e)},t.onSetLevel=function(e,t){V.onSetLevel(e,t)},t.onPaySuccess=function(e,t,i){V.onPaySuccess(e,t,i)},t.miniRegisterStep=function(e){v.isNewUsre&&(T.IS_ON_MINI?V.miniRegisterStep(e):Q.isLaya()&&Q.regStep(e.toString(),V.getStepMessage(e)))},t.userInfoData={},t.userInfoButton=null,t.isp_Data=null,t.platformName=null,t.isMini=!1,t.miniUrl="",t.onVideoShow=!1,t.mini_user_openid="mini_user_openid",t.mini_user_data="mini_user_data",t.mini_user_session_key="mini_user_session_key",t.mini_user_mycode="mini_user_mycode",t.mini_user_ad_params="mini_user_ad_params",t.mini_user_isnew="mini_user_isnew",t}(rc),sp=function(e){function t(){this._waitMatchArr=null,t.__super.call(this,"MaskMediator"),this._waitMatchArr=[]}o(t,"common.view.mediator.MaskMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new tS),this.view.hide(),i.stage.addChild(this.view),this.view.on("mousedown",this,this.delayCheck)},n.onErroClick=function(e){this.view.hide(),i.timer.clear(this,this.delayMask),this.sendNotification("socket_ERROR",this._waitMatchArr)},n.listNotificationInterests=function(){
return["socket_OPEN","socket_RECONECT","SYS_MESSAGE_SEND_CMD","SYS_MESSAGE_RECEIVE_CMD","SYS_HTTP_SEND","SYS_HTTP_RECEIVE","POP_ALERT_OFFLINE"]},n.handleNotification=function(e){var t=this.facade.retrieveMediator("LoadingMediator");if(!(t&&t.mainView&&t.mainView.parent)){var n=this.facade.retrieveMediator("ServerListMediatory");if(!(n&&n.mainView&&n.mainView.isPopup)){var o=this.facade.retrieveProxy("SocketProxy");if(null!=o){var s=null;switch(e.getName()){case"socket_OPEN":this._clear();break;case"socket_RECONECT":this._clear(),this.view.erroInfo("网络正在重连。。");break;case"SYS_HTTP_SEND":case"SYS_MESSAGE_SEND_CMD":if(s=this.getProtocal(e),null==s)return;this._waitMatchArr.push(s),this.view.visible||(this.view.alertInfo(""),i.timer.once(1e3,this,this.delayCheck),i.timer.once(6e3,this,this.delayMask));break;case"SYS_HTTP_RECEIVE":case"SYS_MESSAGE_RECEIVE_CMD":if(s=this.getProtocal(e),null==s)return;for(var r=0;r<this._waitMatchArr.length;r++)this._waitMatchArr[r]==s&&this._waitMatchArr.splice(r,1);0==this._waitMatchArr.length&&(this._clear(),this.sendNotification("REQ_TIME_OUT",null));break;case"POP_ALERT_OFFLINE":this._clear()}}}}},n._clear=function(){this._waitMatchArr.length=0,this.view.hide(),i.timer.clear(this,this.delayCheck),i.timer.clear(this,this.delayMask)},n.getProtocal=function(e){switch(e.getName()){case"SYS_HTTP_SEND":case"SYS_HTTP_RECEIVE":return this.getProtocalHttp(e);case"SYS_MESSAGE_SEND_CMD":case"SYS_MESSAGE_RECEIVE_CMD":return this.getProtocalSocket(e)}return null},n.getProtocalSocket=function(e){if(this._isOffLine())return this.view.erroInfo("网络已断开，请检查您的网络。。"),null;var t=e.getBody();if(!t)return null;var i=t.module+"_"+t.cmd;return this.facade.hasCommand(i)&&this.facade.isSyncReqCmd(i)?i:null},n.getProtocalHttp=function(e){var t=e.getBody(),i=t.module+"_"+t.cmd;return i},n.delayCheck=function(){this._waitMatchArr.length>0&&this.view.alertInfo("正在请求数据")},n._isOffLine=function(){var e=this.facade.retrieveProxy("SocketProxy");return null==e||!e.isConnecting()||!Q.isNetWork()},n.delayMask=function(){return this._isOffLine()?void this.view.erroInfo("网络已断开，请检查您的网络。"):void this.showErro()},n.showErro=function(){var e=this.facade.retrieveMediator("ServerListMediatory");if(!(e&&e.mainView.isPopup||0==this._waitMatchArr.length)){var t="数据请求超时，请检查您的网络。（"+this._waitMatchArr.join(",")+")";this.view.erroInfo(t),this._waitMatchArr.length=0}},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="MaskMediator",t}(lc),rp=function(e){function t(){this._confirmNum=null,this._confirmUseVi=null,t.__super.call(this,"ConfirmMediator")}o(t,"common.view.mediator.ConfirmMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new YN),this._confirmNum=new RN,this._confirmUseVi=new PN},i.listNotificationInterests=function(){return["POP_CONFIRM_INFO","POP_USE_CONFIRM_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"POP_CONFIRM_INFO":this._confirm(e);break;case"POP_USE_CONFIRM_INFO":this._confirmUse(e)}},i._confirm=function(e){var t="",i=null,n=e.getBody();if("close"==n)return void this.mainView.close();if(n.sureLb?this.mainView.sure.label=n.sureLb:this.mainView.sure.label="确认",n.cancelLb?this.mainView.cancel.label=n.cancelLb:this.mainView.cancel.label="取消","num"==e.getType())this.confirmNum.showNum(n.maxNum,n.handler);else{switch(e.getType()){case"duble":this.mainView.doubleCfm.selected=!1,this.mainView.doubleCfm.label=n["double"]?n["double"]:"再次确认",this.mainView.doubleCfm.visible=!0,this.mainView.inputCfm.visible=!1,this.mainView.isDoubleExt=!1;break;case"doubleExt":this.mainView.doubleCfm.selected=!1,this.mainView.doubleCfm.label=n["double"]?n["double"]:"再次确认",this.mainView.doubleCfm.visible=!0,this.mainView.inputCfm.visible=!1,this.mainView.isDoubleExt=!0;break;case"dubleinput":this.mainView.doubleCfm.visible=!1,this.mainView.inputCfm.visible=!0,this.mainView.inputCfm.text="",this.mainView.inputCfm.prompt=n["double"]?n["double"]:"操作不可逆请输入 ‘确认’";break;default:this.mainView.doubleCfm.visible=!1,this.mainView.inputCfm.visible=!1}t=n.info,i=n.handler,n.align?this.mainView.info.style.align=n.align:this.mainView.info.style.align="center",n.title?this.mainView.title.text=n.title:this.mainView.title.text="",this.mainView.showInfo(t,i)}var o=e.getBody().vo;o&&(o instanceof modules.goods.model.data.PackEquip?this.confirmNum.showEquip(o):o instanceof modules.goods.model.data.PackProp&&this.confirmNum.showProp(o))},i._confirmUse=function(e){var t=e.getBody(),i=!1;switch(e.getType()){case"break":this.confirmUseVi.lbTitle.text="分解物品",this.confirmUseVi.lbNum.text="分解数量：",i=!1;break;case"use":default:this.confirmUseVi.lbTitle.text="使用物品",this.confirmUseVi.lbNum.text="使用数量：",i=!0}this.confirmUseVi.showProp(t.vo,t.handler,i)},s(0,i,"confirmNum",function(){return this.getViewComponent(),this._confirmNum}),s(0,i,"confirmUseVi",function(){return this.getViewComponent(),this._confirmUseVi}),s(0,i,"mainView",function(){return this.getViewComponent()}),t.NAME="ConfirmMediator",t}(lc),ap=function(e){function t(){this._commonView=null,this._limitLogin=!1,this._alertCopyView=null,t.__super.call(this,"AlertMediator")}o(t,"common.view.mediator.AlertMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new VN),this._commonView=new VN,T.IS_ON_MINI||v.IS_THIRD_PT||(this._alertCopyView=new BN)},i.listNotificationInterests=function(){return["RESPONSE_ERROR","socket_CLOSE","socket_ERROR","REQ_TIME_OUT","POP_ALERT_INFO","POP_ALERT_COPY","POP_ALERT_OFFLINE","CLOSE_ALL_DIALOG"]},i.handleNotification=function(e){var t="",i=null;switch(e.getName()){case"CLOSE_ALL_DIALOG":return Qw.closeAll(),void(this._limitLogin&&this.mainView.popup());case"POP_ALERT_OFFLINE":if(this._limitLogin)return void this.mainView.popup();T.IS_ON_MINI?(t="您已离线,确认重新连接服务器.",i=h.create(this,this.onClick)):(t=e.getBody(),i=h.create(this,this.onClick));break;case"REQ_TIME_OUT":return this._limitLogin?void this.mainView.popup():void(e.getBody()?this.sendNotification("prompted_info_show",{info:"网络请求超时："+e.getBody()}):this.mainView&&this.mainView.isPopup&&null==this.mainView.closeHandler&&this.mainView.close());case"RESPONSE_ERROR":t=Q.isLaya()?"您已离线，确认重新连接服务器。":"string"==typeof e.getBody()?e.getBody():JSON.stringify(e.getBody()),i=h.create(this,this.onClick);break;case"socket_CLOSE":case"socket_ERROR":return;case"POP_ALERT_INFO":if(this._limitLogin)return void this.mainView.popup();var n=e.getBody();if(t=n.info,this.mainView.isPopup&&"timelimit"!=e.getType()&&!n.handler&&null!=this.mainView.closeHandler)return;if("common"==e.getType())return this.commonView.showInfo(t,i),void this.commonView.popup();n.align?this.mainView.txtInfo.style.align=n.align:this.mainView.txtInfo.style.align="center",n.title?this.mainView.title.text=n.title:this.mainView.title.text="提示","timelimit"==e.getType()?(this._limitLogin=!0,i=h.create(this,this.onClick)):i=n.handler?n.handler:null;break;case"POP_ALERT_COPY":if(Q.isLayaAndIos()&&""==Q.versionCode)return void this.sendNotification("prompted_info_show",{info:"当前版本不支持，请下载最新的版本"});if(null==this.alertCopyView)return;return void(null==e.getBody()?this.alertCopyView.close():this.alertCopyView.popCopyInfo(e.getBody().info,e.getBody().title))}this.mainView.showInfo(t,i),this.mainView.popup()},i.onClick=function(){T.IS_ON_MINI||Q.isLaya()?this._limitLogin?(Ts.removeItem("_sever_selectd"),X.logout(!0)):X.gameReload(!1):v.isLoginSp?Or.window.location.reload(!0):X.gameReload(!1),this._limitLogin=!1},s(0,i,"commonView",function(){return this.getViewComponent(),this._commonView}),s(0,i,"alertCopyView",function(){return this.getViewComponent(),this._alertCopyView}),s(0,i,"mainView",function(){return this.getViewComponent()}),t.NAME="AlertMediator",t}(lc),lp=function(e){function t(){this.promptArr=[],this.prompting=!1,t.__super.call(this,"PropmtMediator")}o(t,"common.view.mediator.PropmtMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new $x),this.player.x=i.stage.width/2,this.player.y=i.stage.height/2,this.player.zOrder=2e4,this.player.mouseEnabled=!1,this.player.mouseThrough=!0,i.stage.addChild(this.player)},n.startPlayPromp=function(){this.player.on("complete",this,this.playNextPrompt),this.playNextPrompt()},n.playNextPrompt=function(e){this.promptArr.length<=0?(this.prompting=!1,this.player.off("complete",this,this.playNextPrompt)):(this.prompting=!0,this.player.prompt(this.promptArr.shift()))},n.listNotificationInterests=function(){return["prompted_info_show"]},n.handleNotification=function(e){switch(e.getName()){case"prompted_info_show":this.promptArr.push(e.getBody()),this.prompting||this.startPlayPromp()}},s(0,n,"player",function(){return this.getViewComponent()}),t.NAME="PropmtMediator",t}(lc),hp=function(e){function t(){this._moreVersion=null,this._versionReadme=null,this._cid=null,this.id2sv=new uo,this.reloadHandler=new h(this,this.reLoaded),t.__super.call(this,"ServerListMediatory")}o(t,"common.view.mediator.ServerListMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new eP),this.mainView.serverList.mouseEnabled=!0,this.mainView.serverList.mouseHandler=new h(this,this.onClick),T.IS_ON_MINI||v.IS_THIRD_PT?this.mainView.btnLogout.visible=!1:this.mainView.btnLogout.clickHandler=new h(this,this.onLogout);var e=Ts.getItem("_check_selectd");"true"==e?this.mainView.checkStore.selected=!0:lo.isNull(e)||""==e?Or.onVVMiniGame||Or.onHWMiniGame||Or.onQGMiniGame||Or.onKGMiniGame||(Ts.setItem("_check_selectd","true"),this.mainView.checkStore.selected=!0):this.mainView.checkStore.selected=!1,this.mainView.checkStore.clickHandler=new h(this,this.onStore),this.mainView.tabVersion.selectedIndex=-1,this.mainView.tabVersion.visible=!1,this.mainView.readme.visible=!1,this.mainView.lastplays.mouseEnabled=!0,this.mainView.lastplays.mouseHandler=new h(this,this.onClickLast),this.mainView.newone.mouseEnabled=!0,this.mainView.newone.on("click",this,this.onNewOne)},i.onNewOne=function(e){var t=this.mainView.newone.dataSource;this.enter(t)},i.listNotificationInterests=function(){return["POP_SERVER_LIST","HIDE_SERVER_LIST"]},i.handleNotification=function(e){switch(e.getName()){case"POP_SERVER_LIST":this.showServerListCheck();break;case"HIDE_SERVER_LIST":this.mainView&&this.mainView.isPopup&&this.mainView.close()}},i.showServerListCheck=function(){if(this.isKeepSelect()){var e=Ts.getItem("_sever_selectd");if(null!=e&&""!=e){var t=e.split("_");if(t.length>=5){var i=t[0],n=vo["int"](t[1]),o=vo["int"](t[2]),s=t[3],r=t[4];return void this.enterAndNotice(i,n,o,r,s)}}}null!=v.MULTY_VERSION_SERVER_LIST&&v.MULTY_VERSION_SERVER_LIST.length>1?this.showMore(v.MULTY_VERSION_SERVER_LIST):this.showOne(X.PLATE_FORM),this.mainView.popup()},i.enterAndNotice=function(e,t,i,n,o){v.socketIP=e,v.socketPort=t,v.loginData.serverId=i,v.serverId=i,v.serverName=n,X.LOGIN_API_PLATFORM_NOTICE=o,v.gameMain.queryNotice();var s=v.socketIP+"_"+v.socketPort+"_"+v.loginData.serverId+"_"+X.LOGIN_API_PLATFORM_NOTICE+"_"+v.serverName;Ts.setItem("_sever_selectd",s),Ts.setItem("_platform_fid",X.PLATE_FORM+"_"+X.FID)},i.showOne=function(e){this.mainView.tabVersion.visible=!1,this._showVersion(e)},i.showMore=function(e){if(null!=e&&(e instanceof Array||e.length<=0)){this._moreVersion=e;var t,i=[];for(var n in e)t=e[n],i.push(t.name);this.mainView.tabVersion.labels=i.join(","),this.mainView.tabVersion.visible=!0,null==this.mainView.tabVersion.selectHandler&&(this.mainView.tabVersion.selectHandler=new h(this,this.selectVersion),this.mainView.readme.clickHandler=new h(this,this.openVersionReadme));var o=0,s=Ts.getItem("_check_more_vs_selectd");if(null!=s&&""!=s)o=vo["int"](s);else{var r=Ts.getItem("_platform_fid");o=lo.isNull(r)?v.MULTY_VERSION_SERVER_LIST_DEFALUT_INDEX:0}this.mainView.tabVersion.selectedIndex=o}},i.selectVersion=function(e){var t=this._moreVersion[e];X.PLATE_FORM=t.pf,X.FID=t.fid,Ts.setItem("_check_more_vs_selectd",""+e),this.mainView.readme.visible=1==e,this._showVersion(t.pf)},i.openVersionReadme=function(){null==this._versionReadme&&(this._versionReadme=new $A),this._versionReadme.popup()},i._showVersion=function(e){op.miniRegisterStep(11);var t=Ts.getItem("KEY_LAST_PLAYS_SERVERID_"+v.account);null==t&&this.sendRequestLastPlays(v.account,X.API_ROOT_EXT+"/server/qas",""),this.sendRequest(e),this.mainView.serverList.dataSource=[],this.mainView.lastLoading.visible=!0,this.mainView.lastplays.dataSource=[],this.mainView.newone.visible=!1},i.sendRequest=function(e){this.id2sv.clear(),this._cid=e;var i=this;if(T.IS_ON_MINI)B.getHttp(X.LOGIN_API_SERVER_LIST,{cid:e},this,function(e){i.onHttp(e)},function(e){i.onHttpErr(null)});else{if(Q.isLaya()){var n={cid:e};return void t.sendNavite(X.LOGIN_API_SERVER_LIST,n)}var o=new Iu;o.on("complete",this,this.onHttp),o.on("error",this,this.onHttpErr),o.send(X.LOGIN_API_SERVER_LIST+"?cid="+e,null,"get","json")}},i.onHttp=function(e){var t,i=[],n=[],o=null;for(var s in e){t=e[s];var r,a=t.br.split("|");for(var l in a){r=a[l];var h=r.split("_"),c=vo["int"](h[0]),u=h[1],d=h[2],p="";h.length>=3&&(p=h[3]);var f={grp:t,id:c,name:u,state:d,desc:p};n.push(f),i.unshift(f),this.id2sv.set(h[0],f),"new"==d&&(o=f)}}this.mainView.receiveBranch(n);var _=null==o?i[0]:o;this.mainView.newone.dataSource=_,eP.renderServer(this.mainView.newone,_),this.mainView.newone.visible=!0,this.freshLast()},i.freshLast=function(){if(!(this.id2sv.keys.length<=0)){this.mainView.lastLoading.visible=!1;var e=Ts.getItem("KEY_LAST_PLAYS_SERVERID_"+v.account);if(null!=e){var t=[];if(""!=e)for(var i=e.split("_"),n=i.length-1;n>=0;n--){var o=i[n],s=this.id2sv.get(o);if(s&&(t.push(s),t.length>=2))break}if(this.mainView.lastplays.dataSource=t,""==e&&this.id2sv.values.length>0){var r,a=null;for(var l in this.id2sv.values)if(r=this.id2sv.values[l],"new"==r.state){a=r;break}null!=a&&this.enter(a)}}}},i.sendRequestLastPlays=function(e,i,n){var o=this;if(T.IS_ON_MINI)B.getHttp(i,{account:e,info:n},this,function(e){o.onHttpAccount(e)},function(e){console.log("onHttpError:",e),o.onHttpErr(null)});else{if(Q.isLaya()){var s={account:e,info:n};return void t.sendNavite(i,s)}var r=new Iu;r.on("complete",this,this.onHttpAccount),r.on("error",this,this.onHttpErr),r.send(i+"?account="+e+"&info="+n,null,"get","json")}},i.onHttpAccount=function(e){var t=e.seting;Ts.setItem("KEY_LAST_PLAYS_SERVERID_"+v.account,t),this.freshLast()},i.reLoaded=function(){X.gameReload(!0)},i.onHttpErr=function(e){this.sendNotification("POP_ALERT_INFO",{info:"服务器升级维护中，预计1小时",handler:this.reloadHandler})},i.enter=function(e){var t=this;op.miniRegisterStep(12);var i=null,n=Ts.getItem("KEY_LAST_PLAYS_SERVERID_"+v.account);null!=n&&""!=n&&(i=n.split("_"));var o=e.id+"";switch(e.state){case"open":break;case"new":break;case"full":if(null!=i&&-1!=i.indexOf(o))break;return void this.sendNotification("POP_CONFIRM_INFO",{info:"所选服已爆满，您可以选择其他服",handler:h.create(this,function(e){t.sendRequest(t._cid)})});case"close":var s="服务器未开启";return""!=e.desc&&(s="服务器将于"+e.desc),void this.sendNotification("POP_CONFIRM_INFO",{info:s,handler:h.create(this,function(e){t.sendRequest(t._cid)})});default:return}var r=e.grp.ip,a=e.grp.port,l=e.id,c=e.grp.apiNotice,u=e.name;if(this.enterAndNotice(r,a,l,u,c),null!=n)if(""!=n){var d=i.indexOf(o);if(-1!=d){if(d==i.length-1)return;i.splice(d,1),i.push(o)}else i.push(o),i.length>10&&i.shift();var p=i.join("_");Ts.setItem("KEY_LAST_PLAYS_SERVERID_"+v.account,p),this.sendRequestLastPlays(v.account,X.API_ROOT_EXT+"/server/sas",p)}else Ts.setItem("KEY_LAST_PLAYS_SERVERID_"+v.account,o),this.sendRequestLastPlays(v.account,X.API_ROOT_EXT+"/server/sas",o);else Ts.setItem("KEY_LAST_PLAYS_SERVERID_"+v.account,o)},i.onClickLast=function(e,t){if("click"==e.type){var i=this.mainView.lastplays.getCell(t).dataSource;this.enter(i)}},i.onClick=function(e,t){if("click"==e.type){var i=this.mainView.serverList.getCell(t).dataSource;this.enter(i)}},i.onStore=function(){this.mainView.checkStore.selected?Ts.setItem("_check_selectd","true"):Ts.setItem("_check_selectd","false")},i.isKeepSelect=function(){var e=Ts.getItem("_check_selectd");return"true"==e},i.onLogout=function(){var e=Ts.getItem("session_key");if(!lo.isNull(e)){if(Ts.removeItem("session_key"),Q.isLaya()){var i={skey:e};return void t.sendNavite(X.LOGIN_API_PLATFORM_ME_LOGOUT,i)}var n=new Iu;n.on("complete",this,this.onHttpLogOut),n.send(X.LOGIN_API_PLATFORM_ME_LOGOUT,"skey="+e,"post","json")}},i.onHttpLogOut=function(e){Ts.removeItem("_sever_selectd"),X.logout(!0),this.mainView.close(),X.beginLogin()},s(0,i,"mainView",function(){return this.getViewComponent()}),t.sendNavite=function(e,t){Q.httpDoPost(e,JSON.stringify(t),"common.view.mediator.ServerListMediator.httpSucceed","common.view.mediator.ServerListMediator.httpError")},t.httpSucceed=function(e,t,i){var n;"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i);var o=x.getInstance().retrieveMediator("ServerListMediatory");t==X.LOGIN_API_SERVER_LIST?o.onHttp(n):t==X.LOGIN_API_PLATFORM_ME_LOGOUT?o.onHttpLogOut(n):t==X.API_ROOT_EXT+"/server/sas"?o.onHttpAccount(n):t==X.API_ROOT_EXT+"/server/qas"&&o.onHttpAccount(n)},t.httpError=function(e,t,i){var n=x.getInstance().retrieveMediator("ServerListMediatory");t==X.LOGIN_API_SERVER_LIST&&n.onHttpErr("")},t.NAME="ServerListMediatory",t.KEY_MORE_VS_SELECTED="_check_more_vs_selectd",t.KEY_LAST_PLAYS_SERVERID="KEY_LAST_PLAYS_SERVERID_",t.KEY_CHECK_SELECTED="_check_selectd",t.__init$=function(){new B},t}(lc),cp=function(e){function t(){t.__super.call(this,"FunNoticeMediator")}o(t,"common.view.mediator.FunNoticeMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new NN)},i.listNotificationInterests=function(){return["POP_FUN_NOTICE"]},i.handleNotification=function(e){switch(e.getName()){case"POP_FUN_NOTICE":this.view.popNotice(e.getBody(),e.getType())}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FunNoticeMediator",t}(lc),up=function(e){function t(){t.__super.call(this)}o(t,"modules.lode.controller.LodePrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(j.LODE_INFO,dp),this.facade.registerCommand(j.LODE_LOGS,dp,!0),this.facade.registerCommand(j.LODE_OPEN,dp,!0),this.facade.registerCommand(j.LODE_OTHERS,dp,!0),this.facade.registerCommand(j.LODE_FIGHT,dp,!0),this.facade.registerCommand(j.LODE_FIGHT_USE_GOLD,dp,!0),this.facade.registerCommand(j.LODE_PROTECT,dp,!0),this.facade.registerCommand(j.LODE_PROTECT_BY_GOLD,dp,!0),this.facade.registerCommand(j.LODE_TAKE_AWARD,dp,!0),this.facade.registerCommand(j.LODE_FIGHT_OTHER,dp,!0),this.facade.registerCommand(j.LODE_PUSH_MINE_LOG,dp)},t}(rc),dp=function(e){function t(){t.__super.call(this)}o(t,"modules.lode.controller.commands.LodeCommand",e);var i=t.prototype;return i.execute=function(e){var t,i=(this.facade.retrieveProxy("LodeProxy"),e.getBody());switch(e.getName()){case j.LODE_INFO:i.success&&(t=v.protoCodec.getResponseDecoder().decode("PlayerMine",i.value),this.facade.sendNotification("SHOW_LODE_MYSELFT_INNFO",t));break;case j.LODE_LOGS:if(i.success){t=v.protoCodec.getResponseDecoder().decode("MineLogList",i.value);var n=null;if(t.logs){n=[];var o;for(var s in t.logs)o=t.logs[s],n.push(o)}this.facade.sendNotification("SHOW_LODE_LOGS",n)}break;case j.LODE_OPEN:i.success&&(t=v.protoCodec.getResponseDecoder().decode("PlayerMine",i.value),this.facade.sendNotification("SHOW_LODE_MYSELFT_INNFO",t));break;case j.LODE_OTHERS:i.success&&(t=v.protoCodec.getResponseDecoder().decode("PlayerMineList",i.value),this.facade.sendNotification("SHOW_LODE_OTHERS_INNFO",t));break;case j.LODE_FIGHT:case j.LODE_FIGHT_USE_GOLD:i.success?(t=v.protoCodec.getResponseDecoder().decode("PlayerMine",i.value),this.facade.sendNotification("SHOW_LODE_MYSELFT_INNFO",t),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,10)):-10001==i.status?this.sendNotification("prompted_info_show",{info:"前方阵法金光大盛，无法前往"}):-10002==i.status?(this.sendNotification("prompted_info_show",{info:"他已经空空如也了，放过他吧"}),this.sendNotification("SHOW_LODE_PAGE")):-10003==i.status?this.sendNotification("prompted_info_show",{info:"大人休息一下 ，明天再来"}):-10004==i.status?this.sendNotification("prompted_info_show",{info:"正在遭遇攻击，您缓缓"}):-10005==i.status?this.sendNotification("prompted_info_show",{info:"采集完毕，已经返程"}):this.sendNotification("prompted_info_show",{info:"抢夺失败：code"+i.status});break;case j.LODE_PROTECT:i.success?(t=v.protoCodec.getResponseDecoder().decode("PlayerMine",i.value),this.facade.sendNotification("SHOW_LODE_MYSELFT_INNFO",t)):-56==i.status&&this.sendNotification("prompted_info_show",{info:"保护时间已达到上限"});break;case j.LODE_PROTECT_BY_GOLD:i.success?(t=v.protoCodec.getResponseDecoder().decode("PlayerMine",i.value),this.facade.sendNotification("SHOW_LODE_MYSELFT_INNFO",t)):-15==i.status&&this.sendNotification("prompted_info_show",{info:"元宝不足，无法开启保护"});break;case j.LODE_TAKE_AWARD:i.success&&(t=v.protoCodec.getResponseDecoder().decode("PlayerMine",i.value),this.facade.sendNotification("SHOW_LODE_MYSELFT_INNFO",t),this.facade.sendNotification("SHOW_LODE_AWARD_SUCCESS"));break;case j.LODE_FIGHT_OTHER:i.success&&(t=v.protoCodec.getResponseDecoder().decode("PlayerMine",i.value),this.facade.sendNotification("SHOW_LODE_OTHERS_UPDATA",t));break;case j.LODE_PUSH_MINE_LOG:i.success&&(t=v.protoCodec.getResponseDecoder().decode("MineLog",i.value),this.facade.sendNotification("SHOW_LODE_PUSH_LOG",t))}},t}(rc),pp=function(e){function t(){t.__super.call(this,"LodeProxy")}return o(t,"modules.lode.model.LodeProxy",e),t.NAME="LodeProxy",t}(sc),fp=function(e){function t(){t.__super.call(this,"GuideProxy",new $)}o(t,"modules.guide.proxy.GuideProxy",e);var i=t.prototype;return i.receive=function(e){return this.vo.update(e),this.vo},i.needGuiding=function(e){return!1},s(0,i,"vo",function(){return this.data}),t.NAME="GuideProxy",t}(sc),_p=function(e){function t(){t.__super.call(this,"ForestProxy",new ne)}o(t,"modules.forest.model.ForestProxy",e);var i=t.prototype;return i.clear=function(){this.vo.clear()},i.receive=function(e){return this.vo.update(e),this.vo},i.receiveEvent=function(e){var t=this.vo.getLastEvent();return t&&!t.acting?t.update(e):(t=new ie(e),this.vo.events.push(t)),t},s(0,i,"vo",function(){return this.data}),t.NAME="ForestProxy",t}(sc),mp=function(e){function t(){t.__super.call(this)}o(t,"modules.forest.controller.commands.ForestEventCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n,o=v.protoCodec.getResponseDecoder().decode("ForestEvent",t.value),s=this.facade.retrieveProxy("ForestProxy");switch(t.cmd){case 4:i=s.receiveEvent(o),n="moving";break;case 5:i=s.receiveEvent(o),n="chosed";break;case 101:i=s.receiveEvent(o),n="push";break;default:return void as.error(this,"ForestEventCommand","not cmd:"+t.cmd)}this.sendNotification("RECEIVE_FOREST_EVENT",i,n)}else 4==t.cmd&&this.sendNotification("FOREST_MOVE_ERR")},t}(rc),gp=function(e){function t(){t.__super.call(this)}o(t,"modules.forest.controller.commands.ForestCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n,o=v.protoCodec.getResponseDecoder().decode("PlayerForest",t.value),s=this.facade.retrieveProxy("ForestProxy");switch(t.cmd){case 1:i=s.receive(o),n="query";break;case 2:s.clear(),i=s.receive(o),n="enter";break;case 3:i=s.receive(o),n="exit";break;case 100:i=s.receive(o),n="push",i.monsterKilled>=4&&this.sendNotification("CHECK_6RMB_SPGIFT");break;case 6:i=s.receive(o),n="buyLife";break;case 90:i=s.receive(o),n="push",this.sendNotification("prompted_info_show",{info:"森林探索次数增加1次。"});break;default:return void as.error(this,"ForestCommand","not cmd:"+t.cmd)}this.sendNotification("RECEIVE_FOREST_INFO",i,n)}else if(2==t.cmd){if(xi.isCaptchaErro(t.status))return void this.sendNotification("CAPTCHA_ALERT_FORBIDEN",t.status);-15==t.status?this.sendNotification("prompted_info_show",{info:"购买失败，元宝不足。"}):this.sendNotification("prompted_info_show",{info:"今日购买次数已达上限。"})}else 6==t.cmd&&(-15==t.status?this.sendNotification("prompted_info_show",{info:"操作失败，元宝不足。"}):this.sendNotification("prompted_info_show",{info:"今日购买次数已达上限。"}))},t}(rc),vp=function(e){function t(){t.__super.call(this)}o(t,"modules.forest.controller.ForestPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(ee.FOREST_QUERY,gp),this.facade.registerCommand(ee.FOREST_ENTER,gp,!0),this.facade.registerCommand(ee.FOREST_EXIT,gp,!0),this.facade.registerCommand(ee.FOREST_BUY_LIFE,gp,!0),this.facade.registerCommand(ee.FOREST_ADD_BY_PROP,gp,!0),this.facade.registerCommand(ee.FOREST_MOVE_STEP,mp,!0),this.facade.registerCommand(ee.FOREST_CHOSE_EVENT,mp,!0),this.facade.registerCommand(ee.FOREST_PUSH_FOREST,gp),this.facade.registerCommand(ee.FOREST_PUSH_EVENT,mp)},t}(rc),yp=function(e){function t(){this.ohterArr=[],this.playerMine=null,this.awardRes="",this.requestIndex=0,this.isExecute=!1,this.pageNum=1,this.isBotton=!1,this._otherSet=new go,t.__super.call(this,"LodeMediator")}o(t,"modules.lode.view.LodeMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new qN),this.view.txtEmptyInfo.visible=!1,this.view.lodeYesView.mouseEnabled=!0,this.view.lodeYesView.on("click",this,this.onClick),this.view.lodeNoView.mouseEnabled=!0,this.view.lodeNoView.on("click",this,this.onClick),this.view.logView.mouseEnabled=!0,this.view.logView.on("click",this,this.onClick),this.view.btnLog.on("click",this,this.onLogClick),this.view.btnExplain.on("click",this,this.onExplainClick),this.view.checkFlter.on("click",this,this.onCheckClick),this.view.changeHandler=new h(this,this.onScrollChangeItem),this.view.infoView.visible=!1,this.view.infoView.on("click",this,this.onClick),this.view.listLode.mouseHandler=new h(this,this.onListLodeClick),this.view.listLode.renderHandler=new h(this,this.onListLodeRender),this.view.txtReports.on("link",this,this.onLink)},n.listNotificationInterests=function(){return["SHOW_LODE_PAGE","SHOW_LODE_MYSELFT_INNFO","SHOW_LODE_OTHERS_INNFO","SHOW_LODE_OTHERS_UPDATA","SHOW_LODE_LOGS","SHOW_LODE_AWARD_SUCCESS","SHOW_LODE_PUSH_LOG","CLOSE_LODE_PAGE","ZERO_CLOCK_TRIGER"]},n.handleNotification=function(e){switch(e.getName()){case"ZERO_CLOCK_TRIGER":Ng.userVO.getValue(1006)>=25&&cc.instance.lodeInfo();break;case"SHOW_LODE_PAGE":return Ng.userVO.getValue(1006)<25?void this.sendNotification("prompted_info_show",{info:"25级开启地灵矿脉系统"}):(cc.instance.lodeInfo(),this.refreshOhters(),this.view.popup(),void i.timer.loop(1e3,this,this.updataPage));case"CLOSE_LODE_PAGE":i.timer.clear(this,this.updataPage);break;case"SHOW_LODE_MYSELFT_INNFO":this.playerMine=e.getBody(),this.updataLodeYesView(),this.updataLodeNoView();break;case"SHOW_LODE_OTHERS_INNFO":var t=e.getBody(),n=null;if(t.list){n=[];var o;for(var s in t.list)o=t.list[s],o.type<=0||this._otherSet.contain(o.playerId)||(this._otherSet.add(o.playerId),n.push(o))}n.length>0?this.ohterArr=this.ohterArr.concat(n):t.pager.pageNum>1&&t.pager.pageNum>=t.pager.totalPage&&(this.isBotton=!0,this.sendNotification("prompted_info_show",{info:"无法找到更多矿脉"})),this.view.listLode.dataSource=this.ohterArr,0==this.ohterArr.length?this.view.txtEmptyInfo.visible=!0:this.view.txtEmptyInfo.visible=!1,this.isExecute=!1;break;case"SHOW_LODE_LOGS":var r=e.getBody();this.showLogsView(r);break;case"SHOW_LODE_AWARD_SUCCESS":this.sendNotification("prompted_info_show",{info:"领取奖励："+this.awardRes});break;case"SHOW_LODE_OTHERS_UPDATA":for(var a=e.getBody(),l=0;l<this.ohterArr.length;l++){var h=this.ohterArr[l];if(a.playerId==h.playerId){0==a.type?(this.ohterArr.splice(l,1),this._otherSet.remove(a.playerId)):this.ohterArr[l]=a;break}}this.view.listLode.refresh();break;case"SHOW_LODE_PUSH_LOG":var c=e.getBody();this.sendNotification("prompted_info_show",{info:c.nameA+"来到您的矿场，不知道做了些什么"}),co.showOrHide(this.view.btnLog,!0,-5);break;default:return}},n.updataPage=function(){this.updataLodeYesView(),10==this.requestIndex&&(this.requestIndex=0,cc.instance.lodeInfo()),this.requestIndex++},n.showLogsView=function(e){for(var t=0;t<e.length;t++){var i=e[t],n=i.playerA==v.playerId?"<font color='#e70626'>你</font>":"<span style='color:#f19e21;' href='"+i.playerA+","+i.nameA+"'>"+i.nameA+"</span>",o=i.playerB==v.playerId?"<font color='#e70626'>你</font>":"<span style='color:#f19e21;' href='"+i.playerB+","+i.nameB+"'>"+i.nameB+"</span>",s=ro.parseSimple(ro.newDate(i.actTime))+"&nbsp;&nbsp;",r=i.awards.split("|"),a=i.awardsLoser.split("|"),l="",h="",c="";i.playerA==v.playerId?c="获得":i.playerB==v.playerId&&r.length>0&&(c="失去");var u;for(var d in r){u=r[d];var p=u.split("_");if(3==p.length){var f=vo["int"](p[0]),_=vo["int"](p[1]),m=vo["int"](p[2]);switch(f){case 2:l+=m+"铜币 ";break;case 3:l+=m+"元宝 ";break;case 0:var y=g.database.getData("props",_);y&&(l+="<font color='"+N.getColor(y.quality)+"'>【"+y.name+"】</font>*"+m+" ")}}}""==l&&(c="抢了个寂寞");var b="";if(i.playerB==v.playerId){var d;for(d in a)if(u=a[d],p=u.split("_"),3==p.length)switch(f=vo["int"](p[0]),_=vo["int"](p[1]),m=vo["int"](p[2]),m>0&&(b="保住"),f){case 2:h+=m+"铜币 ";break;case 3:h+=m+"元宝 ";break;case 0:y=g.database.getData("props",_),y&&(h+="<font color='"+N.getColor(y.quality)+"'>【"+y.name+"】</font>*"+m+" ")}}-1==i.type&&this.view.txtReports.appendHTML("<br>"+s+n+"&nbsp;进攻了&nbsp;"+o+"&nbsp;挑战失败，无功而返。"),0==i.type&&this.view.txtReports.appendHTML("<br>"+s+n+"&nbsp;开启了一个&nbsp;<font color='"+this.lodeTypeColor(i.mineType)+"'>【"+this.lodeTypeString(i.mineType)+"】</font>"),1==i.type&&(i.playerA==v.playerId?this.view.txtReports.appendHTML("<br>"+s+n+"&nbsp;进攻了&nbsp;"+o+"&nbsp;挑战成功，"+c+l+"(直接进入背包)，该矿脉产出时间减少20分钟，并获得1小时保护"):this.view.txtReports.appendHTML("<br>"+s+n+"&nbsp;攻击了&nbsp;"+o+"&nbsp;防守失败，损失了产出时间20分钟，对方获得系统奖励。")),2==i.type&&this.view.txtReports.appendHTML("<br>"+s+n+"&nbsp;进攻了&nbsp;"+o+"&nbsp;挑战成功，"+c+l+b+h+"(直接进入背包)，并占领了矿脉"),3==i.type&&this.view.txtReports.appendHTML("<br>"+s+"采集领取"+l)}},n.onExplainClick=function(e){this.view.infoView.visible?this.view.infoView.visible=!1:this.view.infoView.visible=!0},n.onLogClick=function(e){co.showOrHide(this.view.btnLog,!1),this.view.txtReports.innerHTML="",this.view.txtReports.height=0,this.view.logView.visible=!0,this.view.lodeView.visible=!1,cc.instance.lodeLogs(v.playerId)},n.onClick=function(e){switch(console.log("LodeMediator:"+e.target.name),e.target.name){case"btnNow":this.view.infoView.visible=!1;break;case"btnKeep":if(this.playerMine&&this.playerMine.protectTime>=this.playerMine.endTime)return void this.sendNotification("prompted_info_show",{info:"当前矿脉已在保护中"});var t=this.facade.retrieveProxy("GoodsProxy"),i=t.queryProp(500011);if(null!=i&&i.count>0)return void this.sendNotification("POP_CONFIRM_INFO",{info:"确认消耗1个<font color='"+N.getColor(i.quality)+"'>【"+i.propConf.name+"】</font>开启1小时保护矿脉?",handler:h.create(this,function(e){e&&cc.instance.lodeProtect(i.id)})});var n=Z.LODE_PROTECT_PROP_PRICE,o=this.facade.retrieveProxy("PayTotalPropxy");if(o&&o.info&&o.info.isMarcket90percent()&&(n=vo["int"](90*n/100)),Ng.userVO.getValue(1010)<n)return void this.sendNotification("prompted_info_show",{info:"你的元宝不足"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认花费"+n+"元宝开启1小时保护矿脉?",handler:h.create(this,function(e){e&&cc.instance.lodeByGold()})});break;case"btnExploit":t=this.facade.retrieveProxy("GoodsProxy"),i=t.queryProp(500010),null!=i&&i.count>0?cc.instance.lodeOpen(i.id):this.sendNotification("prompted_info_show",{info:"您没有矿脉地图，在魂兽森林中获取",updateTime:3e3});break;case"btnBack":this.view.logView.visible=!1,this.view.lodeView.visible=!0;break;case"btnSure":var s=this.view.lodeYesView.getChildByName("txtProduct");this.awardRes=this.backHtmlToText(s),cc.instance.lodeTakeAward()}},n.backHtmlToText=function(e){for(var t,i,n=0,o=e.numChildren;o>n;n++)i=e.getChildAt(n),i&&(t=i.innerTEXT);return t},n.onCheckClick=function(e){this.view.checkFlter.selected?Z.IS_FLTER=1:Z.IS_FLTER=0,this.refreshOhters()},n.updataLodeYesView=function(){if(null!=this.playerMine)if(0==this.playerMine.type)this.view.lodeYesView.visible=!1,this.view.lodeNoView.visible=!0;else{this.view.lodeYesView.visible=!0,this.view.lodeNoView.visible=!1;
var e=this.view.lodeYesView.getChildByName("boxKeepProp"),t=this.view.lodeYesView.getChildByName("btnKeep"),i=this.view.lodeYesView.getChildByName("btnSure");this.playerMine.endTime-g.clock.currentTime<0?(e.visible=!1,t.visible=!1,i.visible=!0):(this.playerMine&&this.playerMine.protectTime>=this.playerMine.endTime?(e.visible=!1,t.visible=!1):(e.visible=!0,t.visible=!0),i.visible=!1),this.updataInfo(this.view.lodeYesView,this.playerMine,!0)}},n.updataLodeNoView=function(){var e=this.view.lodeNoView.getChildByName("txtPropA"),t=this.view.lodeNoView.getChildByName("txtPropB"),i=this.facade.retrieveProxy("GoodsProxy"),n=i.queryProp(500010),o=g.database.getData("props",500010);e.text="无",null!=n?e.text=o.name+"*"+n.count.toString():e.text=o.name+"*0",t.text="无",n=i.queryProp(500011),o=g.database.getData("props",500011),null!=n?t.text=o.name+"*"+n.count.toString():t.text=o.name+"*0"},n.onListLodeClick=function(e,t){if("click"===e.type){var i=this.view.listLode.dataSource[t];switch(e.target.name){case"txtName":break;case"btnLog":this.view.txtReports.innerHTML="",this.view.txtReports.height=0,this.view.logView.visible=!0,this.view.lodeView.visible=!1,cc.instance.lodeLogs(i.playerId);break;case"btnAttack":if(this.playerMine){var n="";this.playerMine.attack<5?""!=n?this.sendNotification("POP_CONFIRM_INFO",{info:n,handler:h.create(this,function(e){e&&cc.instance.lodeFight(i.playerId)})}):cc.instance.lodeFight(i.playerId):Ng.userVO.getValue(1010)<30?this.sendNotification("prompted_info_show",{info:"今日抢夺次数已用完，继续抢夺需要30元宝"}):this.sendNotification("POP_CONFIRM_INFO",{info:"今日抢夺次数已用完，确认花费30元宝继续抢夺吗？\n"+n,handler:h.create(this,function(e){e&&cc.instance.lodeFightUseGold(i.playerId)})})}}}},n.onListLodeRender=function(e,t){var i=this.view.listLode.dataSource[t];this.updataInfo(e,i)},n.updataInfo=function(e,t,i){if(void 0===i&&(i=!1),!i){var n=e.getChildByName("txtName"),o=e.getChildByName("iconNature"),s=e.getChildByName("txtLevel"),r=e.getChildByName("txtAlc");n.text="神秘人",o.index=t.nature-1,o.x=n.x+n.width,s.text="LV"+t.level,s.x=o.x+o.width,r.text="",r.x=s.x+s.width,e.getChildByName("btnLog").visible=!1}var a=e.getChildByName("title");i?a.text="你占领的"+this.lodeTypeString(t.type):a.text=this.lodeTypeString(t.type);var l=e.getChildByName("txtTime"),h=e.getChildByName("txtProduct");h.style.fontSize=24,h.style.color="#ffffff";var c=e.getChildByName("txtAwarded");c.style.fontSize=24,c.style.color="#ffffff";var u=e.getChildByName("txtKeepTime"),d=e.getChildByName("txtAttackCount");a.color=this.lodeTypeColor(t.type),t.endTime-g.clock.currentTime>0?l.text=this.lodeEndTimeString(t.endTime-g.clock.currentTime):l.text="采集结束请领取奖励",t.protectTime-g.clock.currentTime>0?u.text=this.lodeEndTimeString(t.protectTime-g.clock.currentTime)+" (保护中)":u.text="未开启保护",t.type<4?(h.x=240,c.x=240,0==t.productA?h.innerHTML="<font color='#e70626'>采集不足10分钟</font>":h.innerHTML=this.lodeTypePropString(t.productA,t.type),c.innerHTML=this.lodeTypePropString(t.awardedA,t.type)):(h.x=200,c.x=200,0==t.productA&&0==t.productB?h.innerHTML="<font color='#e70626'>采集不足10分钟</font>":h.innerHTML=this.lodeTypePropString(t.productA,t.type)+"&nbsp;"+this.lodeTypePropString(t.productB,t.type,!1),c.innerHTML=this.lodeTypePropString(t.awardedA,t.type)+"&nbsp;"+this.lodeTypePropString(t.awardedB,t.type,!1)),d.text=t.beAttack+"/2"},n.onScrollChangeItem=function(e){if(!this.isExecute)switch(e){case 0:this.refreshOhters(),this.sendNotification("prompted_info_show",{info:"正在刷新寻找矿脉"});break;case 1:this.isBotton||(this.isExecute=!0,this.pageNum=this.pageNum+1,cc.instance.lodeOthers(this.pageNum,10,Z.IS_FLTER))}},n.refreshOhters=function(){this.view.listLode.dataSource=[],this.isExecute=!0,this.isBotton=!1,this.pageNum=1,this.ohterArr=[],this._otherSet.clear(),cc.instance.lodeOthers(this.pageNum,10,Z.IS_FLTER)},n.lodeTypeString=function(e){return 1==e?"铜币矿脉":2==e?"灵石矿脉":3==e?"元宝矿脉":4==e?"天籁石矿脉":""},n.lodeTypeColor=function(e){return 1==e?"#00dc24":2==e?"#fffc00":3==e?"#e70626":4==e?"#c527ff":"#ffffff"},n.lodeTypePropString=function(e,t,i){return void 0===i&&(i=!0),0==e?"":1==t?"<font color='"+this.lodeTypeColor(t)+"'>"+e+"铜币</font>":2==t?"<font color='"+this.lodeTypeColor(t)+"'>"+e+"灵石</font>":3==t?"<font color='"+this.lodeTypeColor(t)+"'>"+e+"元宝</font>":4==t?i?"<font color='#e70626'>天籁石碎片*"+e+"</font>":" <font color='#c527ff'>天籁石碎片*"+e+"</font>":""},n.lodeEndTimeString=function(e){e=vo["int"](e/1e3);var t=Math.floor(e/60/60),i=Math.floor(e/60%60),n=Math.floor(e%60);return t>0?t+"小时"+i+"分钟":i>0?i+"分钟"+n+"秒":n+"秒"},n.onLink=function(e){var t=e.split(",");this.sendNotification("SHOW_LOOK_PAGE",{playerId:vo["int"](t[0]),name:t[1],nature:0,level:0})},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="LodeMediator",t}(lc),bp=function(e){function t(){t.__super.call(this,"LodeHomeMediator")}o(t,"modules.lode.view.LodeHomeMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.spcailDungeon.getChildByName("lodeHead")),this.view.on("mouseup",this,this.onLodeHomeClick)},i.reset=function(){var e=this.facade.retrieveMediator("HomeMediator");if(e){var t=e.view.spcailDungeon.getChildByName("lodeHead"),i=t.getChildByName("txLevel");Ng.userVO.getValue(1006)<25?(i.text="25级开启",i.color="#e70626"):(i.text="努力加载中…",i.color="#ffffff");var n=this.view.getChildByName("currentState"),o=this.view.getChildByName("todayCount"),s=this.view.getChildByName("mapCount");n.text="",o.text="",s.text=""}},i.listNotificationInterests=function(){return["SHOW_LODE_MYSELFT_INNFO","SHOW_LODE_PUSH_LOG","FRESH_GOODS_PACK","USER_INIT"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_LODE_MYSELFT_INNFO":var t=e.getBody();this.updataLodeView(t),t.type>0&&t.endTime-g.clock.currentTime<0&&co.showOrHide(this.view.getChildByName("btnEnter"),!0,-5);break;case"SHOW_LODE_PUSH_LOG":co.showOrHide(this.view.getChildByName("btnEnter"),!0,-5);break;case"USER_INIT":this.reset();break;case"FRESH_GOODS_PACK":this.freshMapProps()}},i.onLodeHomeClick=function(e){this.sendNotification("SHOW_LODE_PAGE"),co.showOrHide(this.view.getChildByName("btnEnter"),!1)},i.updataLodeView=function(e){var t=this.view.getChildByName("txLevel");t.text="";var i=this.view.getChildByName("currentState"),n=this.view.getChildByName("todayCount");this.view.getChildByName("mapCount");0==e.type?i.text="当前状态：未占领":i.text="当前状态：已占领",n.text="今日夺掠次数："+e.attack+"/5",e.attack>=5?n.color="#e70626":n.color="#00dc24",this.freshMapProps()},i.freshMapProps=function(){var e=this.view.getChildByName("mapCount"),t=this.facade.retrieveProxy("GoodsProxy"),i=t.queryProp(500010);null!=i?e.text="剩余地图："+i.count.toString():e.text="剩余地图：0"},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="LodeHomeMediator",t}(lc),Ep=function(e){function t(){this._payTotalInfo=null,this._giftLimit=!1,this._signToday=!1,this._paytotal=null,this._paytotalRed=!1,this._rebateRed=!1,this._tempGloabLog=null,this._vipExtAward=!1,this._vipMonthAward=!1,this._checkWelfareAd=!1,this._checkWelfarePayWeek=!1,this._checkDemonDaily=!1,this._achieveFinish=!1,this._newPlayerFirstEnterGame=0,this._taskFinish=!1,this._taskFinishReal=!1,this._taskVo=null,this._taskDailyFinish=!1,this.forestReady=!1,this.dungeonSpReady=!1,this.dungeonDailyReady=!1,this.guardReady=!1,this._boxReady=!1,this._hasAlc=!1,this._hasAlcaKey="_hasAlcaKey",this._alcaTs=0,this._hasAlcm=!1,this.redpoints=[],t.__super.call(this,"GuideMediator")}o(t,"modules.guide.view.GuideMediator",e);var n=t.prototype;return n.initView=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view.barModel;0==v.OPEN_PAYMENT&&(t.labels="装备副本,特殊副本,境界副本,礼包,福利活动",T.IS_ON_MINI&&(1==Or.onIOS&&(t.labels="装备副本,特殊副本,境界副本,礼包,福利活动"),1==Or.onAndroid&&(t.labels="装备副本,特殊副本,境界副本,礼包,充值活动")))},n.onRegister=function(){v.OPEN_GUIDE_TASK&&this.facade.registerMediator(new Sp)},n.listNotificationInterests=function(){return["RECEIVE_GUIDE_INFO","USER_INIT","USER_LEVEL_CHANGE","CLEAR_CACHE_DATA","INIT_VIP_INFO","CHANGE_VIP_INFO","GUIDE_PET_SHOP_FREE","RECEIVE_TASK_INFO","RECEIVE_ACHIEVE_INFO","SHOW_TASK_PAGE","RECEIVE_TASK_DAILY_INFO","BAGPACK_HAS_BOX_READY","DUNGEON_SP_HAS_READY","FOREST_HAS_READY","RECEIVE_TOWER_INFO","RECIVE_PAY_TOTAL_INFO","RECIEVE_ARENA_GLOBAL_LOGS_MINE","SHOW_GLOBAL_ARENA_PAGE","USER_INDULGE_CHANGE","RECEIVE_SIGN_INFO","RECIVE_LIMIT_GIFT_INFO","GUIDE_HOME_BAR_CLICK","GUIDE_REBATE_STATE_CHG","RECIVE_APPLY_SIZE","RECEIVE_ACTIVITY_INFO","RECEIVE_ACTIVITY_LOTTERY_INFO","ACTIVIT_7_DAY_INFO","ACTIVIT_WEEK_INFO","ACTIVIT_INVEST_INFO","RECEIVE_PLAYER_LADDER","BOX_WELFARE_RED","ACTIVIT_PAY_WEEK_INFO","RECEIVE_DEMON_MARKET_INFO","USER_ALLIANCE_CHANGE","RECIVE_ALLIANCE","RECIVE_ALLIANCE_TASK","RECIVE_PLAYER_ALLIANCE","RECIVE_ALLIANCE_ARENA","RECIEVE_PLAYER_ALC_BOSS","OPEN_ALCA_PAGE","RECEIVE_VIP_EXT","RECEIVE_GUARD_INFO","RECEIVE_DUNGEON_DAILY_INFO"]},n.handleNotification=function(e){switch(e.getName()){case"RECEIVE_GUIDE_INFO":this.freshGuide();break;case"CLEAR_CACHE_DATA":this.guardReady=!1,this.dungeonDailyReady=!1,this._vipExtAward=!1,this._vipMonthAward=!1,this._checkWelfareAd=!1,this._checkWelfarePayWeek=!1,this._checkDemonDaily=!1,this._showVipRedpoint(),this.checkWelfare(),this.hasForestReady(!1),this.hasDungeonSpReady(!1),this._showOrHideGlobalArena(!1),Eb.isNewGuy=!1;break;case"USER_INIT":this.initView(),this.checkAdult();var t=Ng.userVO.getValue(7011);if(t>0){i.timer.loop(2e4,this,this.checkAlliance),kc.instance.queryAlliance(t),kc.instance.queryPlayerAlliance(),_c.instance.query(),Bc.instance.query(),au.instance.queryPalyerBoss();var n=Ts.getItem(this._hasAlcaKey),o=vo["int"](n);this._alcaTs=Math.abs(o)}else this.checkAlliance();case"USER_LEVEL_CHANGE":this.checkStrong(),this.checkBoxRed(),this.freshGuide();var s=Ng.userVO.getValue(1006);5==s&&(this._freshDailySign_limitgift(),this.hasBoxReady(this._boxReady)),15==s&&this.checkTaskAchieve();break;case"USER_INDULGE_CHANGE":this.checkAdult();break;case"BAGPACK_HAS_BOX_READY":this.hasBoxReady(e.getBody());break;case"DUNGEON_SP_HAS_READY":this.hasDungeonSpReady(e.getBody());break;case"FOREST_HAS_READY":this.hasForestReady(e.getBody());break;case"RECEIVE_TASK_INFO":this.checkTaskFinish(e.getBody()),this.checkStrong();break;case"RECEIVE_TASK_DAILY_INFO":this.checkDailyTaskFinish(e.getBody());break;case"RECEIVE_ACHIEVE_INFO":this.checkAchieveFinish(e.getBody());break;case"SHOW_TASK_PAGE":this._newPlayerFirstEnterGame>0&&this.checkTaskFinish(this._taskVo);break;case"INIT_VIP_INFO":case"CHANGE_VIP_INFO":this.checkMonthVipAward(e.getBody()),this.checkWelfareAd();break;case"BOX_WELFARE_RED":this.checkWelfareAd();break;case"ACTIVIT_PAY_WEEK_INFO":this.checkWelfarePayWeek();break;case"RECEIVE_DEMON_MARKET_INFO":this.checkDemonDaily();break;case"GUIDE_PET_SHOP_FREE":this.petShopFree(e.getBody());break;case"RECEIVE_TOWER_INFO":this.checkTower(e.getBody());break;case"RECIEVE_ARENA_GLOBAL_LOGS_MINE":this.checkGlobalLog(e.getBody());break;case"SHOW_GLOBAL_ARENA_PAGE":this._showOrHideGlobalArena(!1);break;case"RECIVE_PAY_TOTAL_INFO":this.checkPayTotal(e.getBody()),this.checkWelfare();break;case"GUIDE_REBATE_STATE_CHG":this.checkRebate();break;case"RECEIVE_SIGN_INFO":this.freshDailySign(e.getBody());break;case"RECIVE_LIMIT_GIFT_INFO":this.freshGift(e.getBody());break;case"GUIDE_HOME_BAR_CLICK":3==e.getBody()&&(this._giftLimit=!1,this._freshDailySign_limitgift());break;case"RECEIVE_ACTIVITY_INFO":case"RECEIVE_ACTIVITY_LOTTERY_INFO":case"ACTIVIT_7_DAY_INFO":case"ACTIVIT_WEEK_INFO":case"ACTIVIT_INVEST_INFO":this.sendNotification("UPDATA_HOME_LIST_ACT");break;case"RECIVE_APPLY_SIZE":this.freshAlcApplys(e.getBody());break;case"RECEIVE_PLAYER_LADDER":this.chechLandder(e.getBody());break;case"USER_ALLIANCE_CHANGE":Ng.userVO.getValue(7011)>0&&(i.timer.loop(2e4,this,this.checkAlliance),kc.instance.queryPlayerAlliance(),_c.instance.query(),Bc.instance.query());case"RECIVE_ALLIANCE":case"RECIVE_ALLIANCE_TASK":case"RECIVE_PLAYER_ALLIANCE":case"RECIVE_ALLIANCE_ARENA":case"RECIEVE_PLAYER_ALC_BOSS":this.checkAlliance();break;case"OPEN_ALCA_PAGE":Ts.setItem(this._hasAlcaKey,"-"+Ts.getItem(this._hasAlcaKey)),this.checkAlliance();break;case"RECEIVE_VIP_EXT":this.checkVipExtAward(e.getBody());break;case"RECEIVE_GUARD_INFO":this.checkGuard(e.getBody());break;case"RECEIVE_DUNGEON_DAILY_INFO":this.checkDungeonDaily()}},n.freshAlcApplys=function(e){var t=this.facade.retrieveMediator("AlcMemberMediator");if(null!=t){var i=t.view.btnApplys;co.showOrHide(i,e>0)}},n.freshGift=function(e){null!=e&&e.isActing?this._giftLimit=!0:this._giftLimit=!1,this._freshDailySign_limitgift()},n.freshDailySign=function(e){this._signToday=!e.isSignToday(),this._freshDailySign_limitgift()},n._freshDailySign_limitgift=function(){var e,t=this.facade.retrieveMediator("HomeMediator"),i=t.view.barModel;e=i.getChildAt(3);var n=this._giftLimit||this._signToday;Ng.userVO.getValue(1006)<5&&(n=!1),co.showOrHide(e,n)},n.checkStrong=function(){if(!T.IS_ON_MINI&&"IOS"!=X.PLATE_FORM){var e=this.facade.retrieveMediator("HeadBarMediator");if(Ng.userVO.getValue(1006)>5&&!Eb.isNewGuy){var t=Ts.getItem("_BTN_STRONG");e.view.btnStrong.visible="close"!=t,e.view.btnStrong.visible&&null==e.view.btnStrong.clickHandler&&(e.view.btnStrong.clickHandler=new h(this,this.onStrong))}else e.view.btnStrong.visible=!1}},n.checkBoxRed=function(){var e=this.facade.retrieveProxy("GoodsProxy");e.checkBoxRedPoint()},n.onStrong=function(){var e=this.facade.retrieveMediator("HeadBarMediator");this.sendNotification("POP_CONFIRM_INFO",{sureLb:"取消置顶",cancelLb:"继续显示",info:"取消【我要变强】置顶显示后，游戏主界面不再显示该按钮<br>您可以在设置功能中重新查看。",handler:h.create(this,function(t){if(t)try{Ts.setItem("_BTN_STRONG","close"),e.view.btnStrong.visible=!1,e.view.btnStrong.clickHandler=null}catch(i){}})}),this.sendNotification("SHOW_HELP_STRONG_PAGE")},n.checkAdult=function(){"none"==v.INDULGE_TYPE},n.checkPayTotal=function(e){if(null!=e){this._paytotal=e;var t,i=!1,n=this.facade.retrieveProxy("PayTotalPropxy");for(var o in n.getData()){if(t=n.getData()[o],e.totalRmb<t.rmb)break;if(e.isFinish(t.rmb)&&!e.isAwarded(t.rmb)){i=!0;break}}this._paytotalRed=i,n.redPoint=i}else this._paytotalRed=!1,n.redPoint=!1;this.facade.sendNotification("UPDATA_HOME_LIST_ACT")},n.checkRebate=function(){var e=this.facade.retrieveProxy("RebateProxy");null!=e&&(this._rebateRed=e.redPoint,this.facade.sendNotification("UPDATA_HOME_LIST_ACT"))},n.checkTower=function(e){var t=!1;Ng.userVO.getValue(1006)>=35&&(it.isSignUpTime()?1!=e.state&&(t=!0):it.isRaceTime()&&(0==e.state||(1==e.state?t=!0:e.floor>10||e.isFail()||(t=!0))));var i=this.facade.retrieveMediator("HomeMediator"),n=i.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("towertHead").getChildByName("btnEnter");co.showOrHide(n,t)},n.chechLandder=function(e){var t=this.facade.retrieveMediator("HomeMediator"),i=t.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("ladderHead").getChildByName("btnEnter");co.showOrHide(i,e.showRedPoint())},n.checkGlobalLog=function(e){if(!(null==e||e.id<=0||null!=this._tempGloabLog&&this._tempGloabLog.id>=e.id)){this._tempGloabLog=e;var t=!1,i=Ng.userVO.unitId.id;this._tempGloabLog=e,this._tempGloabLog.playerA==i?2==this._tempGloabLog.type&&this._tempGloabLog.playerB<0&&(t=!0):2!=this._tempGloabLog.type&&this._tempGloabLog.playerB==i&&(t=!0),this._showOrHideGlobalArena(t)}},n._showOrHideGlobalArena=function(e){var t=this.facade.retrieveMediator("HomeMediator"),i=t.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("arenaHead").getChildByName("btnEnter");co.showOrHide(i,e)},n.petShopFree=function(e){var t=this.facade.retrieveMediator("HomeMediator"),i=t.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("forestHead").getChildByName("btnPetshop");co.showOrHide(i,e)},n.checkVipExtAward=function(e){this._vipExtAward=!1,e&&e.isEffecting&&!e.isSigned&&(this._vipExtAward=!0),this._showVipRedpoint(),this.checkDungeonDaily()},n.checkMonthVipAward=function(e){this._vipMonthAward=!1,e.vipMontAdd>0&&(e.goldenVip.isEffecting&&(!e.goldenVip.isSigned||e.goldenVip.awardTemp>0)&&(this._vipMonthAward=!0),e.diamondVip.isEffecting&&(!e.diamondVip.isSigned||e.diamondVip.awardTemp>0)&&(this._vipMonthAward=!0)),this._showVipRedpoint()},n._showVipRedpoint=function(){for(var e,t=this.facade.retrieveMediator("HomeMediator"),i=t.view.moduleItems,n=this.facade.retrieveMediator("MarcketMediator"),o=0;o<n.view.tabBar.numChildren;o++)e=n.view.tabBar.getChildAt(o),"月卡"==e.label&&(co.showOrHide(e,this._vipMonthAward||this._vipExtAward,0,0,"vip"),e=i.getChildByName("btnMacket"),co.showOrHide(e,this._vipMonthAward||this._vipExtAward,0,0,"vip"))},n.checkWelfareAd=function(){if(this._checkWelfareAd=!1,Eb.isNewGuy);else if(Ng.userVO.getValue(1006)<5);else{var e=Ng.userVO.getValue(1013),t=10-e%1e3;if(ro.isTodayTs(e)||(t=10),0>=t);else{var i=Ts.getItem("FULI_SPEED"+v.playerId);null!=i&&""!=i||(this._checkWelfareAd=!0)}var n=this.facade.retrieveProxy("MarketProxy");T.IS_ON_MINI||(v.IS_THIRD_PT?"m4399"==X.FLAVOR||n&&n.vipInfo&&!n.vipInfo.isMVIP&&(this._checkWelfareAd=!1):n&&n.vipInfo&&!n.vipInfo.isMVIP&&(this._checkWelfareAd=!1))}this.checkWelfare()},n.checkWelfarePayWeek=function(){this._checkWelfarePayWeek=!1;var e=this.facade.retrieveProxy("ActivityPayWeekProxy");if(e&&e.payweekdata){this._checkWelfarePayWeek=e.hasAward();var t=this.facade.retrieveMediator("MarcketMediator"),i=t.view.boxWelfare.getChildByName("boxWeek").getChildByName("btnWeekSure");co.showOrHide(i,this._checkWelfarePayWeek)}this.checkWelfare()},n.checkDemonDaily=function(){this._checkDemonDaily=!1;var e=this.facade.retrieveProxy("DemonProxy");if(e&&e.info){this._checkDemonDaily=e.info.gotToday<e.info.maxToday;var t=this.facade.retrieveMediator("DemonMediator"),i=t.view.getChildByName("demonAward");co.showOrHide(i,this._checkDemonDaily)}this.checkWelfare()},n.checkWelfare=function(){var e,t=this.facade.retrieveMediator("HomeMediator"),i=t.view.moduleItems,n=this.facade.retrieveMediator("MarcketMediator"),o=n.view.tabBarArr.indexOf("福利");o>-1&&(e=n.view.tabBar.getChildAt(o),co.showOrHide(e,this._checkWelfareAd||this._checkWelfarePayWeek||this._checkDemonDaily,0,0,"welfare"),e=i.getChildByName("btnMacket"),co.showOrHide(e,this._checkWelfareAd||this._checkWelfarePayWeek||this._checkDemonDaily,0,0,"welfare"))},n.checkAchieveFinish=function(e){this._achieveFinish=e.hasAward,this._taskVo&&this._taskVo.lastTask&&this._taskVo.lastTask.id<8&&(this._achieveFinish=!1);var t=this.facade.retrieveMediator("TaskMediator").view.bar.getChildAt(1);co.showOrHide(t,this._achieveFinish),this.checkTaskAchieve()},n.checkTaskFinish=function(e){this._taskVo=e,this._taskFinishReal=e.lastTask&&1==e.lastState,this._taskFinish=this._taskFinishReal,1==e.version&&(e.lastTask&&0==e.lastState&&1==e.lastTask.id&&(this._newPlayerFirstEnterGame+=1,1==this._newPlayerFirstEnterGame?this._taskFinish=!0:(this._newPlayerFirstEnterGame=0,i.timer.once(1e4,this,this._delayTask))),1!=this._newPlayerFirstEnterGame&&this._taskFinishReal&&e.lastTask&&e.lastTask.id<=6&&this.sendNotification("prompted_info_show",{info:"恭喜完成任务，快去领取奖励吧"}));var t=this.facade.retrieveMediator("TaskMediator").view.bar.getChildAt(0);co.showOrHide(t,this._taskFinish),this.checkTaskAchieve()},n._delayTask=function(){this.checkTaskFinish(this._taskVo)},n.checkDailyTaskFinish=function(e){this._taskDailyFinish=!1,e&&(this._taskDailyFinish=e.hasFinish());var t=this._taskDailyFinish;Ng.userVO.getValue(1006)<15&&(t=!1);var i=this.facade.retrieveMediator("TaskMediator").view.bar.getChildAt(0);co.showOrHide(i,t),this.checkTaskAchieve()},n.checkTaskAchieve=function(){var e=this._taskDailyFinish;Ng.userVO.getValue(1006)<15&&(e=!1);var t=this.facade.retrieveMediator("HomeMediator");co.showOrHide(t.view.btnAchieve,this._taskFinish||this._achieveFinish||e);var i=this.facade.retrieveMediator("FightMediator"),n=i.view.getChildByName("close");co.showOrHide(n,this._taskFinishReal||this._achieveFinish||e)},n.freshSpDungeonBar=function(){var e,t=this.facade.retrieveMediator("HomeMediator"),i=t.view.barModel;e=i.getChildAt(1),co.showOrHide(e,this.forestReady||this.dungeonSpReady||this.dungeonDailyReady||this.guardReady)},n.hasForestReady=function(e){this.forestReady=e;var t=this.facade.retrieveMediator("HomeMediator"),i=t.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("forestHead").getChildByName("btnEnter");co.showOrHide(i,e),this.freshSpDungeonBar()},n.hasDungeonSpReady=function(e){this.dungeonSpReady=e;var t=this.facade.retrieveMediator("HomeMediator"),i=t.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("spHead").getChildByName("btnReset");co.showOrHide(i,e),this.freshSpDungeonBar()},n.checkDungeonDaily=function(){var e=this.facade.retrieveProxy("PlayerDungeonDailyProxy");this.dungeonDailyReady=e&&e.canFight()&&e.hasFreeTime();var t=this.facade.retrieveMediator("HomeMediator"),i=t.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("dungeonDailyHead").getChildByName("btnEnter");co.showOrHide(i,this.dungeonDailyReady),this.freshSpDungeonBar()},n.checkGuard=function(e){var t=0;e&&(e.guardA&&(t+=e.guardA),e.guardB&&(t+=e.guardB)),this.guardReady=t>0;var i=this.facade.retrieveMediator("HomeMediator"),n=i.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("dungeonDailyHead").getChildByName("btnGuard");co.showOrHide(n,this.guardReady),this.freshSpDungeonBar()},n.hasBoxReady=function(e){this._boxReady=e;var t,i=this.facade.retrieveMediator("HomeMediator"),n=i.view.moduleItems;t=n.getChildByName("btnPackage"),Ng.userVO.getValue(1006)<5&&(e=!1),co.showOrHide(t,e);var o=this.facade.retrieveMediator("BagpackMediator");o.clearRedPoint(),t=o.getTabBarCell("宝箱"),null!=t&&co.showOrHide(t,e)},n.checkAlliance=function(){this._checkAlc(),this._checkAlca(),this._checkAlcm();var e,t=this.facade.retrieveMediator("HomeMediator"),i=t.view.moduleItems,n=this.facade.retrieveMediator("RolegroupMediator"),o=n.view.btnBar,s=Ts.getItem(this._hasAlcaKey),r=vo["int"](s),a=r>0;this._hasAlc||a||this._hasAlcm?(e=i.getChildByName("btnRolegroup"),co.showOrHide(e,!0),e=o.getChildAt(2),co.showOrHide(e,!0)):(e=i.getChildByName("btnRolegroup"),co.showOrHide(e,!1),e=o.getChildAt(2),co.showOrHide(e,!1))},n._checkAlc=function(){this._hasAlc=!1;var e,t=this.facade.retrieveProxy("AllianceProxy"),i=t.playerAlliance,n=Ng.userVO.getValue(7011),o=this.facade.retrieveMediator("AllianceMediator");if(0>=n||!i||!i.inited())return e=o.view.buildings.getCell(2),void co.showOrHide(e,!1,0);e=o.view.buildings.getCell(2),this._hasAlc=!i.isDonateToday(),co.showOrHide(e,this._hasAlc,-5);var s=Ng.userVO.getValue(1006);e=o.view.buildings.getCell(4);var r=t.task;if(r&&r.finishCount<5&&s>=15?(this._hasAlc=!0,co.showOrHide(e,!0,-5)):co.showOrHide(e,!1,-5),e=o.view.buildings.getCell(6),s>=25&&t.alliance&&t.alliance.allianceLevel>=2){var a=this.facade.retrieveProxy("AlcBossProxy");a&&a.playerBoss&&a.playerBoss.fightTime<1?(this._hasAlc=!0,co.showOrHide(e,!0,-5)):co.showOrHide(e,!1,-5)}else co.showOrHide(e,!1,-5)},n._checkAlca=function(){this._alcaTs=0;var e,t=this.facade.retrieveMediator("AllianceMediator");e=t.view.buildings.getCell(5);var i=ro.newDate(Ng.userVO.getValue(19004)),n=ro.dateDiff(ro.newDate(g.clock.currentTime),i);if(7>n)return this._alcaTs=0,Ts.setItem(this._hasAlcaKey,""+this._alcaTs),void co.showOrHide(e,!1,-5);null!=Ts.getItem(this._hasAlcaKey)&&(this._alcaTs=vo["int"](Ts.getItem(this._hasAlcaKey)),this._alcaTs<0&&(this._alcaTs=-this._alcaTs));var o=!1,s=this.facade.retrieveProxy("AlcaProxy"),r=s.selfAlca,a=Ng.userVO.getValue(7011);if(0>=a||!r||!r.inited())return this._alcaTs=0,Ts.setItem(this._hasAlcaKey,""+this._alcaTs),void co.showOrHide(e,!1,-5);if(-1==r.enemyId&&!be.isSignUpTime())return this._alcaTs=0,Ts.setItem(this._hasAlcaKey,""+this._alcaTs),void co.showOrHide(e,!1,-5);be.isSignUpTime()?1!=this._alcaTs&&(o=r.signDate<=0,this._alcaTs=1):r.signDate<=0?this._alcaTs=2:be.waitLineup()?this._alcaTs=3:be.isLineUpTime()?4!=this._alcaTs&&(o=r.enemyId>0&&r.signDate>0,this._alcaTs=4):be.waitFight()?this._alcaTs=5:be.isFightTime()?6!=this._alcaTs&&(o=r.enemyId>0&&r.signDate>0,this._alcaTs=6):be.fightOver()?7!=this._alcaTs&&(o=!0,this._alcaTs=7):this._alcaTs=0,o&&Ts.setItem(this._hasAlcaKey,""+this._alcaTs);var l=Ts.getItem(this._hasAlcaKey),h=vo["int"](l);co.showOrHide(e,h>0,-5)},n._checkAlcm=function(){this._hasAlcm=!1;var e=this.facade.retrieveProxy("AllianceProxy"),t=e.playerAlliance,i=Ng.userVO.getValue(7011);if(!(0>=i)&&t&&t.inited()){this._hasAlcm=t.mineAward>0;var n=this.facade.retrieveMediator("AllianceMediator"),o=n.view.buildings.getCell(7);co.showOrHide(o,this._hasAlcm,-5)}},n.freshGuide=function(){var e,t=this.facade.retrieveProxy("GuideProxy");for(var i in this.redpoints)e=this.redpoints[i],e.removeSelf(),Hr.recover("red_point_name",e);this.redpoints.length=0;var n,o,s=!1,r=this.facade.retrieveMediator("RolegroupMediator"),a=r.view.btnBar,l=t.needGuiding(1);l&&(s=!0,n=a.getChildAt(1),o=n.getChildByName("red_point_name"),o||(o=co.getOneRedPoint(),this.redpoints.push(o),o.pos(n.width-10,-10),n.addChild(o))),l=t.needGuiding(2),l&&(s=!0,n=a.getChildAt(3),o=n.getChildByName("red_point_name"),o||(o=co.getOneRedPoint(),this.redpoints.push(o),o.pos(n.width-10,-10),n.addChild(o)));var h=this.facade.retrieveMediator("HomeMediator"),c=h.view.moduleItems;s&&(n=c.getChildByName("btnRolegroup"),o=n.getChildByName("red_point_name"),o||(o=co.getOneRedPoint(),this.redpoints.push(o),o.pos(n.width-10,-10),n.addChild(o)))},t.NAME="GuideMediator",t}(lc),xp=function(e){function t(){t.__super.call(this)}o(t,"modules.marcket.controller.MarketPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(oe.MARKET_QUERY,Tp),this.facade.registerCommand(oe.MARKET_BUY,Tp,!0),this.facade.registerCommand(oe.MARKET_BUY_BOOK,Tp,!0),this.facade.registerCommand(oe.MARKET_OPEN_EQUIP_GHOST,Tp,!0),this.facade.registerCommand(oe.MARKET_CHG_EQUIP_GHOST,Tp,!0),this.facade.registerCommand(oe.MARKET_AWARD_EQUIP_GHOST,Tp,!0),this.facade.registerCommand(oe.MARKET_OPEN_EQUIP_GHOST_AUTO,Tp,!0),this.facade.registerCommand(oe.MARKET_QUERY_DAILY,Ap),this.facade.registerCommand(oe.MARKET_BUY_DAILY,Ap,!0),this.facade.registerCommand(oe.MARKET_QUERY_REBATE,Np),this.facade.registerCommand(oe.MARKET_TAKE_REBATE,Np,!0),this.facade.registerCommand(oe.MARKET_RESET_REBATE,Np,!0)},t}(rc),Sp=function(e){function t(){this.flashBt=null,this.bubbleBt=null,this.flashSkin="create/clip_select.png",this.guideStep=0,this.waiting=0,this.guideSteps=[{panel:"cmd",index:0,task:1,state:0,title:"道友，选择合适的关卡，开始新的旅途！"},{panel:"cmd",index:1,task:1,state:0,title:"消灭关卡内的蜘蛛，可获得装备材料赶紧去吧！"},{panel:"cmd",index:2,task:1,state:0,title:"挑战首领，可获得高品质材料。"},{panel:"cmd",index:3,task:1,state:1,title:"你太厉害了，咱们回村锻造装备去。"},{panel:"cmd",index:4,task:1,state:1,title:"有新的任务完成了，去领取奖励吧！"},{panel:"cmd",index:5,task:1,state:1,title:"完成任务，可自动接下一个任务。"},{panel:"cmd",index:6,task:2,state:0,title:"磨刀不误砍柴功，去做把武器吧！"},{panel:"cmd",index:7,task:2,state:0,title:"打开锻造界面。"},{panel:"cmd",index:8,task:2,state:0,title:"锻造武器需要放入6个武器材料。"},{panel:"cmd",index:9,task:2,state:0,title:"锻造的装备会生成一条随机属性。"},{panel:"cmd",index:10,task:2,state:1,title:"有新的任务完成了，去领取奖励吧！"},{panel:"cmd",index:11,task:3,state:1,title:"我们将材料品质提升一下。"},{panel:"cmd",index:12,task:3,state:0,title:"打开背包。"},{panel:"cmd",index:13,task:3,state:0,title:"将白色材料升至蓝色材料。"},{panel:"cmd",index:14,task:3,state:0,title:"提升材料品质，锻造的装备会更强哦。"},{panel:"cmd",index:15,task:3,state:1,title:"有新的任务完成了，去领取奖励吧！"},{panel:"cmd",index:16,task:3,state:1,title:"完成任务，接到新的任务啦。"},{panel:"cmd",index:17,task:4,state:0,title:"去做一个蓝色品质以上的装备吧！"},{panel:"cmd",index:18,task:4,state:0,title:"锻造鞋子需要放入3个防具材料。"},{panel:"cmd",index:19,task:4,state:0,title:"锻造的装备品质与放入材料品质相关。"},{panel:"cmd",index:20,task:4,state:1,title:"查看任务教程"},{panel:"cmd",index:21,task:5,state:0,title:"恭喜你到达2级，我们可以穿装备啦！"},{panel:"cmd",index:22,task:5,state:0,title:"去挑选需要的装备吧！"},{panel:"cmd",index:23,task:5,state:0,title:"把刚才锻造出来的装备穿上吧!"},{panel:"cmd",index:24,task:5,state:0,title:"哇您到达5级了，我们去做套装吧。"},{panel:"cmd",index:25,task:5,state:0,title:"去看看如何激活套装"},{panel:"cmd",index:26,task:5,state:0,title:"嗯，制作头盔，衣服，鞋子，并且装备上我们就可以激活套装啦，好简单!"},{panel:"cmd",index:27,task:5,state:0,title:"通过击杀首领或材料合成，可获得高品质材料，锻造的装备会更高级"},{panel:"cmd",index:28,task:5,state:1,title:"查看任务教程"},{panel:"cmd",index:29,task:6,state:0,title:"哇！您到5级了，我们可以学习技能了"},{panel:"cmd",index:30,task:6,state:0,title:"打开技能栏"},{panel:"cmd",index:31,task:6,state:0,title:"每5级可以学习新技能或升级技能哦"},{panel:"cmd",index:32,task:6,state:1,title:"查看任务教程"},{panel:"cmd",index:33,task:7,state:0,title:"当身上有富余的材料时，我们可以升级灵根"},{panel:"cmd",index:34,task:7,state:0,title:"打开灵根界面"},{panel:"cmd",index:35,task:7,state:0,title:"升级灵根需要消耗高级品质材料"},{panel:"cmd",index:36,task:7,state:0,title:"选一个材料放入吧"},{panel:"cmd",index:37,task:7,state:0,title:"点击确定"},{panel:"cmd",index:38,task:7,state:0,title:"升级后可以增加战力哦"},{panel:"cmd",index:39,task:7,state:1,title:"查看任务教程"},{panel:"cmd",index:40,task:8,state:0,title:"您的实力更强了，我们换个地方去历练！"},{panel:"cmd",index:41,task:8,state:0,title:"进入更高级的副本"},{panel:"cmd",index:42,task:8,state:0,title:"我们选择一个副本进行战斗吧"},{panel:"cmd",index:43,task:8,state:1,title:"查看任务教程"},{panel:"cmd",index:44,task:9,state:0,title:"五行宫里可以获得大量经验、铜币、宝石碎片"},{panel:"cmd",index:45,task:9,state:0,title:"里面的怪物难度非常高，需要一定实力才能击败"},{panel:"cmd",index:46,task:9,state:1,title:"查看任务教程"},{panel:"cmd",index:47,task:11,state:0,title:"哇，您竟然制作出了高级装备，我们去看看"},{panel:"cmd",index:48,task:11,state:0,title:"点化后可获得属性增幅，只有黄色品质以上装备才有哦"},{panel:"cmd",index:49,task:11,state:1,title:"查看任务教程"},{panel:"cmd",index:50,task:13,state:0,title:"您身上的灵石可以强化装备"},{panel:"cmd",index:51,task:13,state:0,title:"强化等级会保留，有灵石就强化吧"},{panel:"cmd",index:52,task:13,state:1,title:"查看任务教程"},{panel:"cmd",index:53,task:14,state:0,title:"您有足够的元宝时，可购买永久加成"},{panel:"cmd",index:54,task:14,state:0,title:"这是永久加成哦，建议优先购买经验和掉落"},{panel:"cmd",index:55,task:14,state:1,title:"查看任务教程"},{panel:"cmd",index:56,task:15,state:0,title:"灵宠乐园里住着许多灵宠，灵宠大幅增加战力，让我们去看看吧"},{panel:"cmd",index:57,task:15,state:0,title:"进入看看吧，出现的灵宠品质纯看运气哦"},{panel:"cmd",index:58,task:15,state:0,title:"品质越高的宠物，加成的战力越多哦"},{panel:"cmd",index:59,task:15,state:0,title:"让灵宠出战吧"},{panel:"cmd",index:60,task:15,state:0,title:"打开灵宠界面"},{panel:"cmd",index:61,task:15,state:0,title:"协战后宠物的属性会加到人物身上哦"},{panel:"cmd",index:62,task:15,state:1,title:"查看任务教程"},{panel:"cmd",index:63,task:16,state:0,title:"我们进森林探险吧"},{panel:"cmd",index:64,task:16,state:0,title:"森林产出的物资可以培养灵宠"}],this._task=null,this._lockCurrentStep=-1,t.__super.call(this,"GuideTaskManager")}o(t,"modules.guide.GuideTaskManager",e);var s=t.prototype;return s.listNotificationInterests=function(){return["RECEIVE_TASK_INFO","CLEAR_CACHE_DATA","USER_LEVEL_CHANGE","USER_CURRENCY_CHANGE","FRESH_GOODS_PACK","RECEIVE_FOREST_INFO"]},s.handleNotification=function(e){switch(e.getName()){case"RECEIVE_TASK_INFO":this._freshTask(e.getBody());break;case"CLEAR_CACHE_DATA":this.guideStep=0,null!=this.flashBt&&(this.flashBt.removeSelf(),this.bubbleBt.removeSelf(),i.timer.clear(this,this.updateShow)),this._task=null;break;case"USER_LEVEL_CHANGE":this._task&&this._task.lastTask&&(6!=this._task.lastTask.id&&7!=this._task.lastTask.id&&8!=this._task.lastTask.id||this._freshTask(this._task));break;case"USER_CURRENCY_CHANGE":this._task&&this._task.lastTask&&16==this._task.lastTask.id&&this._freshTask(this._task);break;case"FRESH_GOODS_PACK":var t=e.getBody();this._task&&this._task.lastTask&&(6==this._task.lastTask.id||8==this._task.lastTask.id||16==this._task.lastTask.id?t.contain(0)&&this._freshTask(this._task):12==this._task.lastTask.id&&t.contain(2)&&this._freshTask(this._task));break;case"RECEIVE_FOREST_INFO":this._task&&this._task.lastTask&&16==this._task.lastTask.id&&this._freshTask(this._task)}},s._freshTask=function(e){this._task=e;var t=this.updateTask(this._task);3==this.guideStep&&(this.waiting=-6e4),t&&(this.init(),i.timer.loop(500,this,this.updateShow))},s.init=function(){null==this.flashBt&&(this.flashBt=new aw,this.flashBt=new aw(this.flashSkin,15,1),
this.flashBt.sizeGrid="8,18,6,16",this.flashBt.autoPlay=!0,this.flashBt.interval=100,this.bubbleBt=new ww)},s.updateShow=function(){if(this.flashBt.removeSelf(),this.bubbleBt.removeSelf(),this.guideStep>=this.guideSteps.length&&this.guideStep!=t.GUID_FIGHT_BOSS.index)i.timer.clear(this,this.updateShow);else{var e,n,o,s,r,a,l,h,c,u,d,p,f,_,m=this.guideSteps[this.guideStep],g=null,v=null,y=0,b=!1;switch(this.guideStep){case t.GUID_FIGHT_BOSS.index:m=t.GUID_FIGHT_BOSS,o=this.facade.retrieveMediator("FightMediator");var E=o.view.btnBoss.label;o.view.isPopup?(e=o.view.btnBoss,v=o.view,-1!=E.indexOf("(0)")?(b=!0,t.GUID_FIGHT_BOSS.title="升级后可恢复挑战次数，关卡战斗可获得升级所需经验，也可回去研究制作5级蜘蛛蓝色套装，等到5级就可以装备了；另外离线也是会有收益的哦"):t.GUID_FIGHT_BOSS.title="挑战首领可快速提升等级，快速获得经验，获得更高品质材料"):-1==E.indexOf("(0)")&&(n=this.facade.retrieveMediator("HomeMediator"),e=n.view.boxHangdungeon,v=n.view,t.GUID_FIGHT_BOSS.title=t.GUID_FIGHT_BOSS.title0);break;case 0:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.listDungeon.getCell(0),v=n.view;break;case 1:n=this.facade.retrieveMediator("HomeMediator"),_=n.view.selectDungeon.getChildByName("items"),e=_.getCell(0),v=n.view;break;case 2:o=this.facade.retrieveMediator("FightMediator"),e=o.view.btnBoss,v=o.view;break;case 3:if(o=this.facade.retrieveMediator("FightMediator"),!o.view.isPopup)return void(this.guideStep+=1);if(this.waiting<0){this.waiting+=500;break}e=o.view.getChildByName("close"),v=o.view;break;case 4:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 5:s=this.facade.retrieveMediator("TaskMediator"),e=s.view.task.getChildByName("btnTask"),v=s.view;break;case 6:if(s=this.facade.retrieveMediator("TaskMediator"),!s.view.isPopup)return void(this.guideStep+=1);e=s.view.getChildByName("close"),v=s.view;break;case 7:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnSmithy"),v=n.view;break;case 8:if(r=this.facade.retrieveMediator("SmithyMediator"),g=r.view,g.isPopup)for(y=0;y<r.view.propsList.array.length;y++)if(null==r.view.propsList.array[y]){e=r.view.propsList.getCell(y),v=r.view;break}r=this.facade.retrieveMediator("SmithyMediator"),g=r.selectPropsPop,g.isPopup&&(e=r.selectPropsPop.props.getCell(0),v=r.selectPropsPop);break;case 9:r=this.facade.retrieveMediator("SmithyMediator"),e=r.view.submit,v=r.view;break;case 10:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 11:s=this.facade.retrieveMediator("TaskMediator"),e=s.view.task.getChildByName("btnTask"),v=s.view;break;case 12:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnPackage"),v=n.view;break;case 13:if(a=this.facade.retrieveMediator("BagpackMediator"),!a.view.isPopup)return void(this.guideStep-=1);this.checkMixPropNum(a.view.propsList,0)?e=a.view.propsList.getCell(0).getChildByName("mixCommon"):this.checkMixPropNum(a.view.propsList,1)?e=a.view.propsList.getCell(1).getChildByName("mixCommon"):this.checkMixPropNum(a.view.propsList,2)&&(e=a.view.propsList.getCell(2).getChildByName("mixCommon")),v=a.view;break;case 14:if(a=this.facade.retrieveMediator("BagpackMediator"),!a.smityPropCommPop.isPopup)return void(this.guideStep-=1);e=a.smityPropCommPop.submitSimple,v=a.smityPropCommPop;break;case 15:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 16:s=this.facade.retrieveMediator("TaskMediator"),e=s.view.task.getChildByName("btnTask");break;case 17:r=this.facade.retrieveMediator("SmithyMediator"),r.view.positionBar.selectedIndex=3,n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnSmithy"),v=n.view;break;case 18:if(r=this.facade.retrieveMediator("SmithyMediator"),g=r.view,g.isPopup)for(y=0;y<r.view.propsList.array.length;y++)if(null==r.view.propsList.array[y]){e=r.view.propsList.getCell(y),v=r.view;break}r=this.facade.retrieveMediator("SmithyMediator"),g=r.selectPropsPop,g.isPopup&&(this.checkMixPropNumForShoe(r.selectPropsPop.props,0)?e=r.selectPropsPop.props.getCell(0):this.checkMixPropNumForShoe(r.selectPropsPop.props,1)&&(e=r.selectPropsPop.props.getCell(1)),v=r.selectPropsPop);break;case 19:r=this.facade.retrieveMediator("SmithyMediator"),e=r.view.submit,v=r.view;break;case 20:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 21:if(o=this.facade.retrieveMediator("FightMediator"),o.view.isPopup){e=o.view.getChildByName("close"),v=o.view,this._lockCurrentStep=21;break}this._lockCurrentStep=-1,n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnEquip"),v=n.view;break;case 22:l=this.facade.retrieveMediator("EquipMediator"),e=l.view.equips.getCell(1).getChildByName("changeBtn"),v=l.view;break;case 23:l=this.facade.retrieveMediator("EquipMediator"),l.equipDressChangeView&&(e=l.equipDressChangeView.canUsedEqups.getCell(0).getChildByName("btnChange"),v=l.equipDressChangeView);break;case 24:if(o=this.facade.retrieveMediator("FightMediator"),!o.view.isPopup)return void(this.guideStep+=1);e=o.view.getChildByName("close"),v=o.view;break;case 25:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 26:if(this.waiting<0){this.waiting+=500;break}if(s=this.facade.retrieveMediator("TaskMediator"),!s.view.isPopup)return void(this.guideStep+=1);e=s.view.getChildByName("close"),v=s.view;break;case 27:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnSmithy"),v=n.view;break;case 28:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 29:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnRolegroup"),v=n.view;break;case 30:h=this.facade.retrieveMediator("RolegroupMediator"),e=h.view.btnBar.getChildAt(1),v=h.view;break;case 31:c=this.facade.retrieveMediator("SkillMediator"),e=c.view.skillList.getCell(0).getChildByName("learnBtn"),v=c.view;break;case 32:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 33:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnRolegroup"),v=n.view;break;case 34:h=this.facade.retrieveMediator("RolegroupMediator"),e=h.view.btnBar.getChildAt(2),v=h.view;break;case 35:u=this.facade.retrieveMediator("BoneMediator"),e=u.view.listProps.getCell(0).getChildByName("putIn"),v=u.view;break;case 36:u=this.facade.retrieveMediator("BoneMediator"),e=u.feedPop.list.getCell(0).getChildByName("checkBox"),v=u.feedPop;break;case 37:u=this.facade.retrieveMediator("BoneMediator"),e=u.feedPop.submit,v=u.feedPop;break;case 38:u=this.facade.retrieveMediator("BoneMediator"),e=u.view.submit,v=u.view;break;case 39:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 40:n=this.facade.retrieveMediator("HomeMediator"),0!=n.view.barModel.selectedIndex?(e=n.view.barModel.getChildAt(0),v=n.view):this.guideStep++;break;case 41:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.listDungeon.getCell(1),v=n.view;break;case 42:n=this.facade.retrieveMediator("HomeMediator"),_=n.view.selectDungeon.getChildByName("items"),e=_.getCell(0),v=n.view;break;case 43:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 44:n=this.facade.retrieveMediator("HomeMediator"),1!=n.view.barModel.selectedIndex?(e=n.view.barModel.getChildAt(1),v=n.view):this.guideStep++;break;case 45:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("spHead").getChildByName("btnEnter"),v=n.view;break;case 46:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 47:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnEquip"),v=n.view;break;case 48:l=this.facade.retrieveMediator("EquipMediator");var x;for(var S in l.view.equips.cells){x=l.view.equips.cells[S];var w=x.getChildByName("dhBtn");if(w&&w.visible){e=w;break}y++}v=l.view;break;case 49:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 50:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnEquip"),v=n.view;break;case 51:l=this.facade.retrieveMediator("EquipMediator");var C;for(var T in l.view.equips.cells){C=l.view.equips.cells[T];var I=C.getChildByName("starBtn");if(I&&I.visible){e=I;break}}v=l.view;break;case 52:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 53:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnMacket"),v=n.view;break;case 54:d=this.facade.retrieveMediator("MarcketMediator"),e=d.view.vipList.getCell(0).getChildByName("btnBuy"),v=d.view;break;case 55:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 56:n=this.facade.retrieveMediator("HomeMediator"),1!=n.view.barModel.selectedIndex?(e=n.view.barModel.getChildAt(1),v=n.view):this.guideStep++;break;case 57:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("forestHead").getChildByName("btnPetshop"),v=n.view;break;case 58:f=this.facade.retrieveMediator("PetShopMediator"),e=f.view.pets.getCell(0).getChildByName("takeBtn"),v=f.view;break;case 59:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.moduleItems.getChildByName("btnRolegroup"),v=n.view;break;case 60:h=this.facade.retrieveMediator("RolegroupMediator"),e=h.view.btnBar.getChildAt(3),v=h.view;break;case 61:p=this.facade.retrieveMediator("PetMediator"),e=p.view.btnFightOn,v=p.view;break;case 62:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.btnAchieve,v=n.view;break;case 63:n=this.facade.retrieveMediator("HomeMediator"),1!=n.view.barModel.selectedIndex?(e=n.view.barModel.getChildAt(1),v=n.view):this.guideStep++;break;case 64:n=this.facade.retrieveMediator("HomeMediator"),e=n.view.spcailDungeonPl.getChildByName("spcailDungeon").getChildByName("forestHead").getChildByName("btnEnter"),v=n.view}if(null!=e&&null!=e.stage){if(lo.isNull(e))return;this.flashBt.x=e.x,this.flashBt.y=e.y,this.flashBt.width=e.width,this.flashBt.height=e.height,this.guideStep!=t.GUID_FIGHT_BOSS.index&&e.once("mousedown",this,this.nextStep),b?this.bubbleBt.show(e,m.title,v,!1):(e.parent.addChild(this.flashBt),this.bubbleBt.show(e,m.title,v))}}},s.checkMixPropNum=function(e,t){if(null==e.getCell(t))return!1;var i=e.getCell(t).getChildByName("prop").getChildByName("count").text;return"1个"!=i&&"2个"!=i},s.checkMixPropNumForShoe=function(e,t){var i=e.getCell(t).getChildByName("name");return"#ffffff"!=i.color},s.updateTask=function(e){if(!e||!e.lastTask)return!1;if(e.lastTask.id>this.guideSteps[this.guideSteps.length-1].task)return!1;if(this.guideStep>=this.guideSteps.length&&100!=this.guideStep&&this.guideStep!=t.GUID_FIGHT_BOSS.index)return!1;(this.guideStep<0||100==this.guideStep||this.guideStep==t.GUID_FIGHT_BOSS.index)&&(this.guideStep=0);var i=this.guideSteps[this.guideStep];if(e.lastTask.id!=i.task||e.lastState!=i.state){for(var n=!1,o=this.guideStep;o<this.guideSteps.length;o++)if(i=this.guideSteps[o],e.lastTask.id==i.task&&e.lastState==i.state){if(0==this.guideStep&&o==this.guideSteps.length)return!1;this.guideStep=o,n=!0;break}if(!n)return this.guideStep=100,!1;if(0==i.state){var s,r,a=Ng.userVO.getValue(1006),l=this.facade.retrieveProxy("GoodsProxy"),h=null;switch(i.task){case 6:if(a>=2){if(h=l.getDressedEquipByType(1),null==h){s=l.listItems(0);var c;for(c in s)if(r=s[c],!(null==r||r.count<=0)&&r instanceof modules.goods.model.data.PackEquip&&1==r.equipConf.position)return!0}a>=5?this.guideStep=24:(this.guideStep=t.GUID_FIGHT_BOSS.index,t.GUID_FIGHT_BOSS.title0="进入副本战斗可快速升级，升级后开启更多的功能，5级后可装备蜘蛛套装")}else this.guideStep=t.GUID_FIGHT_BOSS.index,t.GUID_FIGHT_BOSS.title0="进入副本战斗升级至2级，2级后可装备武器";break;case 7:a>=5||(this.guideStep=-1);break;case 8:if(a>=5){s=l.listItems(0);var c;for(c in s)if(r=s[c],!(null==r||r.count<=0)&&r instanceof modules.goods.model.data.PackProp){var u=r.propConf;if(r.quality>=4&&(1==u.propType||2==u.propType))return!0}this.guideStep=-1}else this.guideStep=-1;break;case 9:break;case 14:break;case 12:s=l.listItems(2);var d;for(d in s)if(h=s[d],!(null==h||h.count<=0)&&h.canCreatAttr())return!0;this.guideStep=-1;break;case 16:s=l.listItems(0);var c;for(c in s)if(r=s[c],!(null==r||r.count<2e3)&&500001==r.baseId)return!0;this.guideStep=-1;break;case 17:if(Ng.userVO.getValue(1010)>=25)return!0;this.guideStep=-1;break;case 19:if(a>=25)return!0;this.guideStep=-1;break;case 20:var p=this.facade.retrieveProxy("ForestProxy");if(p&&p.vo&&0==p.vo.currentId&&p.vo.canEnterTimes>0)return!0;this.guideStep=-1}}return this.guideStep>=0}return!0},s.nextStep=function(){var e=this;if(!(this.guideStep<0)){if(8==this.guideStep||18==this.guideStep)for(var n=this.facade.retrieveMediator("SmithyMediator"),o=n.selectPropsPop,s=0;s<n.view.propsList.array.length;s++)if(null==n.view.propsList.array[s]){var r=n.view.propsList.array.length-1;return r==s&&o.isPopup&&this.guideStep++,void this.updateShow()}if(42==this.guideStep)return void(this.guideStep=100);if(27==this.guideStep)return void(this.guideStep=100);if(this.guideStep==this.guideSteps.length-1)return void(this.guideStep=100);if(this._lockCurrentStep>-1)this.guideStep=this._lockCurrentStep;else if(this.guideStep<this.guideSteps.length-1){var a=this.guideSteps[this.guideStep],l=this.guideSteps[this.guideStep+1];a.task==l.task&&a.state==l.state&&this.guideStep++}return 3==this.guideStep&&(this.waiting=-6e4),26==this.guideStep&&(this.waiting=-6e3),24==this.guideStep?(this.guideStep=t.GUID_FIGHT_BOSS.index,void i.timer.once(3e3,this,function(){e._freshTask(e._task)})):void 0}},s.killedBoss=function(){3==this.guideStep&&(this.waiting=0,this.updateShow())},t.NAME="GuideTaskManager",n(t,["GUID_FIGHT_BOSS",function(){return this.GUID_FIGHT_BOSS={panel:"cmd",index:119,task:5,state:0,title:"",title0:""}}]),t}(lc),wp=function(e){function t(){t.__super.call(this)}o(t,"modules.marcket.controller.commands.ChangeVipCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 19:this.sendNotification("prompted_info_show",{info:"开通成功。"});break;case 101:this.changeVipInfo(t);break;default:this.changeVipInfo(t),this.sendNotification("prompted_info_show",{info:"功能购买成功。"})}},i.changeVipInfo=function(e){var t=v.protoCodec.getResponseDecoder().decodeIntArr(e.value),i=this.facade.retrieveProxy("MarketProxy"),n=i.receiveVipInfo(t);this.sendNotification("CHANGE_VIP_INFO",n)},t}(rc),Cp=function(e){function t(){t.__super.call(this)}o(t,"modules.marcket.controller.commands.VipMonthAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("prompted_info_show",{info:"成功领取"+n.gold+"元宝"})}},t}(rc),Tp=function(e){function t(){t.__super.call(this)}o(t,"modules.marcket.controller.commands.MarketCommand",e);var i=t.prototype;return i.execute=function(e){var t,i,n=e.getBody();if(n.success)switch(n.cmd){case 1:case 3:t=v.protoCodec.getResponseDecoder().decode("FightAwards",n.value);var o=Te.value(t);this.sendNotification("prompted_info_show",{info:"购买成功。"}),this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"商城获得物品",awards:o,desc:""});break;case 2:i=this.receiveInfo(n),this.sendNotification("RECIEVE_PLAYER_MARKET",i);break;case 4:i=this.receiveInfo(n),this.sendNotification("RECIEVE_PLAYER_MARKET",i),this.sendNotification("OPEN_EQUIP_GHOST",i,"open");break;case 5:this.sendNotification("prompted_info_show",{info:"成功更换熔灵五行。"}),i=this.receiveInfo(n),this.sendNotification("RECIEVE_PLAYER_MARKET",i),this.sendNotification("OPEN_EQUIP_GHOST",i,"change");break;case 6:this.sendNotification("prompted_info_show",{info:"熔灵获取成功。"}),i=this.receiveInfo(n),this.sendNotification("RECIEVE_PLAYER_MARKET",i);break;case 7:i=this.receiveInfo(n),this.sendNotification("RECIEVE_PLAYER_MARKET",i),this.sendNotification("OPEN_EQUIP_GHOST",i,"auto")}else switch(n.status){case-24:this.sendNotification("prompted_info_show",{info:"超过购买次数上限，请明天再试。"})}},i.receiveInfo=function(e){var t=v.protoCodec.getResponseDecoder().decode("PlayerMarket",e.value),i=this.facade.retrieveProxy("MarketProxy"),n=i.recievePlayerMarket(t);return n},t}(rc),Ip=function(e){function t(){t.__super.call(this)}o(t,"modules.marcket.controller.commands.VipQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeIntArr(t.value),n=this.facade.retrieveProxy("MarketProxy"),o=n.receiveVipInfo(i);this.sendNotification("INIT_VIP_INFO",o)}},t}(rc),Ap=function(e){function t(){t.__super.call(this)}o(t,"modules.marcket.controller.commands.MarketDailyCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=null;switch(t.cmd){case 8:i=v.protoCodec.getResponseDecoder().decode("MarketDaily",t.value);var n=this.facade.retrieveProxy("MarketProxy");n.playerMarketDaily=i,this.sendNotification("RECIEVE_PLAYER_MARKET_DAILY",i);break;case 9:i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value);var o=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"每日礼包",awards:o,desc:""})}}else switch(t.status){case-21:this.sendNotification("prompted_info_show",{info:"礼包已刷新，稍后再试。"});break;case-37:this.sendNotification("prompted_info_show",{info:"今日礼包已购买，明天再来吧。"})}},t}(rc),Np=function(e){function t(){t.__super.call(this)}o(t,"modules.marcket.controller.commands.MarketRebateCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("MarketRebate",t.value),n=this.facade.retrieveProxy("RebateProxy");if(null==n)return;switch(n.setRebateData(i),t.cmd){case 10:this.facade.sendNotification("QUERY_REBATE",i);break;case 11:this.sendNotification("prompted_info_show",{info:"返利元宝成功领取"}),this.facade.sendNotification("TAKE_REBATE",i);break;case 12:this.sendNotification("prompted_info_show",{info:"返利活动重置成功"}),this.facade.sendNotification("QUERY_REBATE",i)}}else-12==t.status&&this.sendNotification("prompted_info_show",{info:"领取条件未满足，请确认后再试"})},t}(rc),Pp=function(e){function t(){this._vipInfo=null,this._vipFunList=null,this._tmpLimit100=!1,this._lastOrderPayTs=0,this._lastOrderId=0,this._playerMarket=new he,this.playerMarketDaily=new ae,t.__super.call(this,"MarketProxy")}o(t,"modules.marcket.model.MarketProxy",e);var i=t.prototype;return i.recievePlayerMarket=function(e){return this._playerMarket.update(e),this._playerMarket},i.checkMonthVip=function(){if(null!=this._vipInfo){var e=!1;if(this._vipInfo.vipMontAdd>0){var t=this._vipInfo.goldenVip.liveDay,i=this._vipInfo.diamondVip.liveDay;this._vipInfo.goldenVip.checkDate(),this._vipInfo.diamondVip.checkDate(),0==this._vipInfo.vipMontAdd?e=!0:t==this._vipInfo.goldenVip.liveDay&&i==this._vipInfo.diamondVip.liveDay||(e=!0)}if(this._vipInfo.jadeCard.isEffecting){var n=this._vipInfo.jadeCard.liveDay;this._vipInfo.jadeCard.checkDate(),0==this._vipInfo.jadeCard.isEffecting?e=!0:n!=this._vipInfo.jadeCard.liveDay&&(e=!0)}e&&fc.instance.queryVip()}},i.receiveVipInfo=function(e){return null==this._vipInfo?this._vipInfo=new ce(e):this._vipInfo.update(e),this.freshVipList(Ng.userVO.getValue(1006)),this._vipInfo},i.checkVipListWhenLevelUp=function(e){return null==this._vipFunList||25==e||30==e||35==e||40==e?(this.freshVipList(e),!0):!1},i.freshVipList=function(e){return this._vipInfo?(this._vipFunList=[{type:5,add:500,current:this._vipInfo.expRate,costGold:de.queryCostGold(this._vipInfo.expRate)},{type:2,add:500,current:this._vipInfo.silverRate,costGold:de.queryCostGold(this._vipInfo.silverRate)},{type:0,add:500,current:this._vipInfo.propsRate,costGold:de.queryCostGold(this._vipInfo.propsRate)},{type:1001,add:1800,current:this._vipInfo.offlineTime,costGold:de.queryCostGoldForOffline(this._vipInfo.offlineTime)}],e>=20&&this._vipFunList.push({type:1007,add:500,current:this._vipInfo.bossRate,costGold:de.queryCostGold(this._vipInfo.bossRate)}),e>=25&&this._vipFunList.push({type:1004,add:1e3,current:this._vipInfo.petFoodRate,costGold:de.queryCostGold(this._vipInfo.petFoodRate/2)}),e>=30&&(this._vipFunList.push({type:1002,add:1800,current:this._vipInfo.arenaMineTime,costGold:de.queryCostGoldForArenaMine(this._vipInfo.arenaMineTime)}),this._vipFunList.push({type:1005,add:1,current:this._vipInfo.arenaMineCount,costGold:de.queryCostGoldForArenaMineCount(this._vipInfo.arenaMineCount)})),e>=35&&this._vipFunList.push({type:1006,add:500,current:this._vipInfo.gasRate,costGold:de.queryCostGold(this._vipInfo.gasRate)}),e>=40&&this._vipFunList.push({type:1003,add:300,current:this._vipInfo.starFailReturn,costGold:de.queryCostGoldForStarFailReturn(this._vipInfo.starFailReturn)}),this._vipFunList):null},i.payment=function(e){var t=this;if(this._lastOrderId==e&&this._lastOrderPayTs>0&&g.clock.currentTime-this._lastOrderPayTs<=5e3)return void this.sendNotification("prompted_info_show",{info:"操作频繁，请稍后再试"});this._lastOrderId=e,this._lastOrderPayTs=g.clock.currentTime;var i=!1,n=Ng.userVO.getValue(1019);if(X.openJade()&&(i=!qt.isJadeItem(e),v.IS_GLOBAL_VERSION||e==Ni.FUTURE_GIFT2.payId&&v.OPEN_PAYMENT&&(i=n>=3)),v.OPEN_TEST_PAY&&!i)return void Hc.instance.testPay(""+e);if(X.IS_VISITOR)return void this.sendNotification("POP_CONFIRM_INFO",{info:"您的帐户还未绑定，为了您的帐户安全请先进行绑定",sureLb:"前往绑定",handler:h.create(this,function(e){e&&t.sendNotification("OPEN_VISITOR_BINDING_PAGE")})});if(this._tmpLimit100=!1,"none"!=v.INDULGE_TYPE){var o=Ng.userVO.getValue(1017);if(-1==o)return void this.sendNotification("POP_ALERT_INFO",{info:"实名认证审核中，请稍后再试。"});if(-2==o||0==o)return void this.sendNotification("OPEN_ADULT_IDENTIFY");if(16>o)return void this.sendNotification("POP_ALERT_INFO",{info:"根据相关规定，未成年用户禁止充值，感谢配合。"});if(18>o){var s=this.facade.retrieveProxy("PayTotalPropxy");if(null!=s&&s.info.monthRmb>=400)return void this.sendNotification("POP_ALERT_INFO",{info:"大于16岁小于18岁月累计不得充值高于400，单笔不得超过100。"});this._tmpLimit100=!0}}if(i){var r=qt.getOne(e);if(null==r)return void console.log("not find payitem:"+e);if(!(n<r.rmb&&r.canJump()))return void this.sendNotification("SHOW_PAYMENT_USE_JADE",r);this.sendNotification("POP_ALERT_INFO",{info:"您的仙玉不足，正在请求支付..."})}if(!v.OPEN_PAYMENT)return void this.sendNotification("POP_ALERT_INFO",{info:"当前客户端不支持，您可以联系客服。"});if(v.OPEN_TEST_PAY)return void Hc.instance.testPay(""+e);if(T.IS_ON_MINI){if(T.IS_ON_MINI){var a=this;op.checkSession(function(){var t=X.PAYMENT_API_ORDER,i={openid:G.openId,session_key:G.session_key,uid:Ng.userVO.unitId.id,pid:e,sid:v.serverId};console.log("小游戏HTTP支付：",t,i),x.getInstance().sendNotification("SYS_HTTP_SEND",{module:10001,cmd:1}),x.getInstance().sendNotification("prompted_info_show",{info:"正在请求支付，请稍后...",updateTime:2e3}),B.getHttp(t,i,null,function(e){a.onHttp(e)},function(e){a.onHttpErr(e)})},function(){})}}else{var l=new Iu;l.on("complete",this,this.onHttp),l.on("error",this,this.onHttpErr);var c="openid="+v.account+"&uid="+Ng.userVO.unitId.id+"&pid="+e+"&pf="+X.PLATE_FORM+"&sid="+v.serverId;l.send(X.PAYMENT_API_ORDER,c,"post","json"),x.getInstance().sendNotification("SYS_HTTP_SEND",{module:10001,cmd:1}),x.getInstance().sendNotification("prompted_info_show",{info:"正在请求支付，请稍后...",updateTime:2e3})}},i.onHttp=function(e){if(this.delayPaymentMask(),this._tmpLimit100){var t=vo["int"](e.data.buy);if(t>100)return void this.sendNotification("POP_ALERT_INFO",{info:"大于16岁小于18岁月累计不得充值高于400，单笔不得超过100。"})}0==e.code?X.payment(e.data):x.getInstance().sendNotification("POP_ALERT_INFO",{info:"充值下单失败，请联系管理员"})},i.delayPaymentMask=function(){x.getInstance().sendNotification("SYS_HTTP_RECEIVE",{module:10001,cmd:1})},i.onHttpErr=function(e){this.delayPaymentMask(),x.getInstance().sendNotification("POP_ALERT_INFO",{info:"充值下单失败："+e})},i.isDoublePayVisble=function(e){if(10>e)return 0;var t=!1,i=!1,n=this.facade.retrieveProxy("ActivityPropxy");null!=n&&n.tempActivitySet.showTime()&&(n.tempActivitySet.isOpen(17)&&(t=!0),n.tempActivitySet.isOpen(20)&&(i=!0));var o=!1,s=!1,r=Ng.userVO.getValue(1021)+"";if(r){var a,l,h=r.indexOf(",");-1!=h?(a=r.substring(0,h),l=r.substring(h+1)):(a=r,l="");var c=a.split("|");-1!=c.indexOf(""+e)&&(o=!0),c=l.split("|"),-1!=c.indexOf(""+e)&&(s=!0)}if(o&&s)return 0;var u=this.facade.retrieveProxy("PayTotalPropxy"),d=u.info?u.info.payDoubleGoldMaxRmb():0;if((t||i)&&!s&&(e>=10&&648>=e||t&&d>=e))return 3;if(o)return 0;var p=this.facade.retrieveProxy("DungeonProxy");return p.getDungeonLimitOpen()&&p.getDungeonLimitOpen().openLimit&&d>=e?2:e>=10&&648>=e?1:0},s(0,i,"vipFunList",function(){return this._vipFunList}),s(0,i,"vipInfo",function(){return this._vipInfo}),t.NAME="MarketProxy",t}(sc),Rp=function(e){function t(){t.__super.call(this)}o(t,"modules.marcket.controller.VipPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(se.VIP_QUERY,Ip),this.facade.registerCommand(se.VIP_BUY_EXP_RATE,wp,!0),this.facade.registerCommand(se.VIP_BUY_SILVER_RATE,wp,!0),this.facade.registerCommand(se.VIP_BUY_PROP_RATE,wp,!0),this.facade.registerCommand(se.VIP_BUY_OFFLINE_TIME,wp,!0),this.facade.registerCommand(se.VIP_BUY_ARENA_MINE_TIME,wp,!0),this.facade.registerCommand(se.VIP_BUY_STAR_FAIL_RETURN,wp,!0),this.facade.registerCommand(se.VIP_BUY_PET_FOOD_DROP_ADD,wp,!0),this.facade.registerCommand(se.VIP_BUY_ARENA_MINE_COUNT,wp,!0),this.facade.registerCommand(se.VIP_BUY_GAS_RATE,wp,!0),this.facade.registerCommand(se.VIP_BUY_BOSS_RATE,wp,!0),this.facade.registerCommand(se.VIP_BUY_OFFLINE_OPEN_BOX,wp,!0),this.facade.registerCommand(se.VIP_GET_VIP_MONTH_AWARD,Cp,!0),this.facade.registerCommand(se.VIP_PUSH_VIP_CHANGE,wp)},t}(rc),Lp=function(e){function t(){this._selectPop=null,this._btnPetShop=null,this._btnEnter=null,this._paytotal=null,this._info=null,this.selectTempIndex=-1,t.__super.call(this,"ForestMediator")}o(t,"modules.forest.view.ForestMediator",e);var n=t.prototype;return n.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.spcailDungeon.getChildByName("forestHead")),this.view.on("mouseup",this,this.onClick),this._selectPop=new LN,this._selectPop.items.mouseEnabled=!0,this._selectPop.items.mouseHandler=new h(this,this.onSelect),this.selectPop.tabDiff.selectHandler=new h(this,this.onDiffSelect),this.reset()},n.reset=function(){if(null!=this._selectPop){this._selectPop.tabBar.labels="一阶",this._selectPop.tabBar.selectedIndex=-1,this._btnEnter=this.view.getChildByName("btnEnter"),this._btnEnter.visible=!1,this._btnPetShop=this.view.getChildByName("btnPetshop"),this._btnPetShop.visible=!1;var e=this.view.getChildByName("enterTips");e.text="温馨提示：每5小时增加一次进入次数，3次为上限",e.color="#00dc24"}},n.onRegister=function(){this.facade.registerMediator(new lm)},n.listNotificationInterests=function(){return["USER_INIT","CLEAR_CACHE_DATA","RECEIVE_FOREST_INFO","RECIVE_PAY_TOTAL_INFO"]},n.handleNotification=function(e){switch(e.getName()){case"USER_INIT":this.getViewComponent();var t=this.view.getChildByName("times");Ng.userVO.getValue(1006)<20?(t.text="20级开启",t.color="#e70626"):(t.text="努力加载中…",t.color="#ffffff");break;case"CLEAR_CACHE_DATA":this.reset(),this._info=null,this._paytotal=null;break;case"RECEIVE_FOREST_INFO":this.show(e.getBody());break;case"RECIVE_PAY_TOTAL_INFO":if(this._paytotal=e.getBody(),this._paytotal.isRecoverArenaFightCDShort()){var i=this.view.getChildByName("enterTips");i.text="温馨提示：每4小时增加一次进入次数，3次为上限",i.color="#c527ff"}}},n.show=function(e){this._info=e;var t;t=this.view.getChildByName("lbFighting"),0!=e.currentId?t.visible=!0:t.visible=!1,t=this.view.getChildByName("times"),t.text="今日剩余进入次数："+e.canEnterTimes,t.color="#ffffff",this.btnPetShop.visible=!0,0!=e.currentId||e.canEnterTimes>0?this.sendNotification("FOREST_HAS_READY",!0):this.sendNotification("FOREST_HAS_READY",!1),this.btnEnter.visible=!0,this.freshTab(e)},n.freshTab=function(e){var t=e.lastEnterId;e.maxPassGradDiff>0||e.maxPassGradNormal>=8?this.selectPop.tabDiff.visible=!0:(this.selectPop.tabDiff.visible=!1,this.selectPop.tabDiff.selectedIndex=0),t>1e3&&this.selectPop.tabDiff.visible?(this.selectPop.tabBar.labels=te.getGradeLabels(e.maxPassGradDiff),this.selectPop.tabDiff.selectedIndex=1):(this.selectPop.tabBar.labels=te.getGradeLabels(e.maxPassGradNormal),this.selectPop.tabDiff.selectedIndex=0),t>1e3&&(t-=1e3);var i=t-1;0>i?i=0:i>7&&(i=7),this.selectPop.tabBar.selectedIndex=-1,this.selectPop.tabBar.selectedIndex=i},n.onClick=function(e){return"btnPetshop"==e.target.name?void this.sendNotification("SHOW_PET_SHOP_PAGE",!0):void(null!=this._info&&(op.aldSendEvent("进入兽魂森林"),0!=this._info.currentId?this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,3):this.selectPop.popup()))},n.onDiffSelect=function(e){if(null!=this._info){var t=0;switch(e){case 0:this.selectPop.tabBar.labels=te.getGradeLabels(this._info.maxPassGradNormal),t=this._info.maxPassGradNormal;break;case 1:this.selectPop.tabBar.labels=te.getGradeLabels(this._info.maxPassGradDiff),this.selectPop.tabBar.selectedIndex>this._info.maxPassGradDiff&&(t=this._info.maxPassGradDiff)}this.selectPop.tabBar.selectedIndex=-1,this.selectPop.tabBar.selectedIndex=t}},n.onSelect=function(e,t){if("click"==e.type){var n=this.selectPop.tabBar.selectedIndex+1,o=t+1;if(this.selectTempIndex==t)this._enterGrad(this.selectPop.tabBar.selectedIndex+1,t+1);else{this.selectTempIndex=t,this.selectPop.items.getCell(t).addChild(this.selectPop.btnEnter);var s=this.facade.retrieveProxy("ForestProxy"),r=1==this.selectPop.tabDiff.selectedIndex?1:0;s.vo&&s.vo.isPassed(r,n,o)?this.selectPop.btnEnter.label="扫荡":this.selectPop.btnEnter.label="进入",this.selectPop.btnEnter.visible=!0,i.timer.once(3e3,this,this.onSelectTimeout)}}},n.onSelectTimeout=function(){this.selectTempIndex=-1,this.selectPop.btnEnter.visible=!1},n._enterGrad=function(e,t){if(!(1>e||e>8||1>t||t>5)){var i=1==this.selectPop.tabDiff.selectedIndex?1:0;if(this._info.canEnterTimes<=0){var n=2;if(this._paytotal&&(n+=this._paytotal.forestBuyTimeAdd()),this._info.buyTimes>=n&&ro.isTodayTs(this._info.firstBuyDate))return void this.sendNotification("prompted_info_show",{info:"今日购买次数已达上限。"});var o=Ng.userVO.getValue(1010);if(100>o)return void this.sendNotification("prompted_info_show",{info:"您的元宝不足，提前进入需要花费200元宝"});this.sendNotification("POP_CONFIRM_INFO",{info:"是否花费100元宝进入森林？",handler:h.create(this,function(n){n&&(dc.instance.enter(e,t,i),k.goldenCost("进入森林",1,100))})})}else dc.instance.enter(e,t,i);this.selectPop.close()}},s(0,n,"btnPetShop",function(){return this.getViewComponent(),this._btnPetShop}),s(0,n,"selectPop",function(){return this.getViewComponent(),this._selectPop}),s(0,n,"btnEnter",function(){return this.getViewComponent(),this._btnEnter}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="ForestMediator",t}(lc),Op=function(e){function t(){t.__super.call(this)}o(t,"modules.alca.controller.AlcaPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(me.ALCA_SIGNUP,Gp,!0),this.facade.registerCommand(me.ALCA_QUERY_SELF,Gp),this.facade.registerCommand(me.ALCA_QUERY_ENEMY,Bp),this.facade.registerCommand(me.ALCA_LINE_UP,Dp,!0),this.facade.registerCommand(me.ALCA_LINE_OFF,Dp,!0),this.facade.registerCommand(me.ALCA_EAT_DRUG,Gp,!0),this.facade.registerCommand(me.ALCA_ATTACK,Gp,!0),this.facade.registerCommand(me.ALCA_ATTACK_FORCE,Gp,!0),this.facade.registerCommand(me.ALCA_LIST_VD_LOGS,Vp,!0),this.facade.registerCommand(me.ALCA_LOOK_VD,Fp,!0),this.facade.registerCommand(me.ALCA_AUTHORIZE_LINEUP,Gp,!0),this.facade.registerCommand(me.ALCA_LIST_AWARD_LOG,kp,!0),this.facade.registerCommand(me.ALCA_TAKE_EXT_AWARD,Hp,!0),this.facade.registerCommand(me.ALCA_PUSH_FIGHT_OVER,Gp),this.facade.registerCommand(me.ALCA_PUSH_ARENA_CHG,Gp),this.facade.registerCommand(me.ALCA_PUSH_GAME_END,Gp)},t}(rc),Mp=function(e){function t(){this._playerMarket=null,this.isCickAd=!1,this._buyPropMoreView=null,this._buyBookMoreView=null,this._mothCardBuyMorePop=null,this._equipGhostSelect=null,
this._equipGhostAuto=null,this._paytotal=null,this.dungeonLastPassId=0,this.dungeonSpInfo=null,this.leveFresh=!1,this._vipTmp=null,t.__super.call(this,"MarcketMediator")}o(t,"modules.marcket.view.MarcketMediator",e);var i=t.prototype;return i.initViewComponent=function(){if(this.setViewComponent(new oP),this._buyPropMoreView=new kN,this._buyBookMoreView=new DN,this._equipGhostSelect=new lP,this._equipGhostSelect.on("click",this,this.onEquipGhostSelectClick),this._equipGhostAuto=new hP,this._equipGhostAuto.on("click",this,this.onEquipGhostAutoClick),Q.isLayaAndIos()&&(this.view.jadeList.height=this.view.iosAlert.y-this.view.jadeList.y-30,this.view.goldList.height=this.view.iosAlert.y-this.view.goldList.y-30),this.view.vipList.mouseEnabled=!0,this.view.vipList.mouseHandler=new h(this,this.onMouseVip),this.view.stoneList.mouseEnabled=!0,this.view.stoneList.mouseHandler=new h(this,this.onMouseStone),this.view.stoneList.renderHandler=new h(this,this.onStoneRender),this.view.monthVipList.mouseEnabled=!0,this.view.monthVipList.mouseHandler=new h(this,this.onMonthVip),this._mothCardBuyMorePop=new ON,this._mothCardBuyMorePop.list.mouseEnabled=!0,this._mothCardBuyMorePop.list.mouseHandler=new h(this,this.onMonthCardClick),this.view.vipExtCardCell.mouseEnabled=!0,this.view.vipExtCardCell.on("click",this,this.onVipExtCard),this.view.goldList.mouseEnabled=!0,this.view.goldList.mouseHandler=new h(this,this.onPayment),this.view.hotStoneList.mouseEnabled=!0,this.view.hotStoneList.mouseHandler=new h(this,this.onMouseHotStone),this.view.hotStoneList.renderHandler=new h(this,this.onHotStoneRender),this.view.bookList.mouseEnabled=!0,this.view.bookList.mouseHandler=new h(this,this.onBookClick),this.view.equipGhost.mouseEnabled=!0,this.view.equipGhost.mouseHandler=new h(this,this.onEquipGhostClick),this.view.equipGhost.renderHandler=new h(this,this.onEquipGhostRender),this.view.boxWelfare.mouseEnabled=!0,this.view.boxWelfare.on("click",this,this.onBoxWelfareClick),this.view.boxDaily.on("click",this,this.onDaily),X.openJade()&&!qt.canJumpPay(648)){var e=this.view.boxDaily.getChildByName("pearl").getChildByName("contentPearl"),t=e.getChildByName("btnPayPearl0");t.label=t.label.replace("元","仙玉"),t=e.getChildByName("btnPayPearl1"),t.label=t.label.replace("元","仙玉"),t=e.getChildByName("btnPayPearl2"),t.label=t.label.replace("元","仙玉")}this.view.tabBar.selectHandler=new h(this,this.onTabBar),T.IS_ON_MINI&&this.upGoldList(),this.upJadeList(),this.view.btnExchange.visible=!1,this.view.btnRecord.clickHandler=new h(this,this.onRecord)},i.onJadeRender=function(e,t){var i=e.dataSource,n=qt.getOne(i);if(null==n)return void(e.visible=!1);e.visible=!0;var o=e.getChildByName("jade");o.text=(n.value?n.value:n.rmb)+"仙玉",o=e.getChildByName("money"),v.IS_GLOBAL_VERSION?o.text=n.usd+"$":o.text=n.rmb+"元"},i.onJadeClick=function(e,t){if("click"==e.type&&"btnBuy"==e.target.name){var i=this.view.jadeList.getCell(t).dataSource,n=this.facade.retrieveProxy("MarketProxy");n.payment(i)}},i.onRegister=function(){},i.onExchange=function(){this.sendNotification("OPEN_EXCHANGE_VIEW")},i.onRecord=function(){this.sendNotification("OPEN_RECORD_VIEW")},i.onMonthMore=function(){var e=this.facade.retrieveProxy("MarketProxy");e&&e.vipInfo&&(this.mothCardBuyMorePop.updateVipInfo(e.vipInfo),this.mothCardBuyMorePop.popup())},i.onMonthCardClick=function(e,t){if("click"==e.type&&"btnBuy"==e.target.name){var i=this.mothCardBuyMorePop.list.getCell(t),n=i.dataSource,o=n.id-1;switch(t){case 0:o=104;break;case 1:o=105;break;case 2:o=106;break;case 3:o=107;break;default:return}var s=this.facade.retrieveProxy("MarketProxy");s.payment(o)}},i.onPayment=function(e,t){if("click"==e.type&&this.view.goldList.dataSource)if("btnBuy"==e.target.name){var i=this.view.goldList.dataSource[t],n=this.facade.retrieveProxy("MarketProxy");n.payment(i.id)}else"txtJade"==e.target.name&&this.sendNotification("SHOW_PAYMENT_ADD_JADE")},i.onJadeCard=function(e){if("btnBuy"==e.target.name){var t=this.facade.retrieveProxy("MarketProxy");if(t.vipInfo&&t.vipInfo.isDubleMVIP)return void this.sendNotification("prompted_info_show",{info:"您已激活双月卡，无需激活商会卡。"});if(Ng.userVO.getValue(1006)<35)return void this.sendNotification("prompted_info_show",{info:"交易系统35级开启，无需激活商会卡。"});var i=e.target.parent,n=i.dataSource;n&&t.payment(n.paymentId)}},i.onMonthVip=function(e,t){if("click"==e.type){var i=this.view.monthVipList.getCell(t).dataSource;if(null==i)return;switch(e.target.name){case"ntc":this.sendNotification("POP_FUN_NOTICE",100);break;case"btnBuy":var n=this.facade.retrieveProxy("MarketProxy");n.payment(i.paymentId);break;case"btnAward":fc.instance.getVipMonthAward(i.type),100==i.type?op.aldSendEvent("黄金月卡领取"):101==i.type&&op.aldSendEvent("至尊月卡领取");break;case"btnBuyMonthMore":this.onMonthMore()}}},i.listNotificationInterests=function(){return["RECIEVE_PLAYER_MARKET","OPEN_MARCKET_VIEW","OPEN_MARCKET_FAST_BUY","INIT_VIP_INFO","CHANGE_VIP_INFO","OPEN_EQUIP_GHOST","RECIEVE_PLAYER_MARKET_DAILY","USER_INIT","USER_LEVEL_CHANGE","USER_DOUBLE_PAY_TIME_CHG","RECEIVE_DUNGEON_SP_INFO","ZERO_CLOCK_TRIGER","RECIVE_PAY_TOTAL_INFO","RECEIVE_ACTIVITY_INFO","AD_COMPLETE","AD_COLSE","BOX_WELFARE_UPDATE","RECEIVE_DUNGEON_LIMIT_INFO","RECEIVE_VIP_EXT"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("MarketProxy");switch(e.getName()){case"RECIEVE_PLAYER_MARKET":this._playerMarket=e.getBody(),this.leveFresh=!0,this.freshForLevel();break;case"OPEN_MARCKET_VIEW":if(e.getBody()){var i=e.getBody();if(X.openJade()&&"充值"==i&&(i="仙玉",this.view.isPopup&&this.view.mVip.parent))return;var n=this.view.tabBarArr.indexOf(i);n>-1&&(this.view.tabBar.selectedIndex=n)}this.view.popup(),-1==this.view.tabBar.selectedIndex&&(this.view.tabBar.selectedIndex=0),this.view.mVip.visible&&t.checkMonthVip(),this.view.hotStoneList.visible&&this._playerMarket&&this._playerMarket.needFresh()&&pc.instance.query(),this.sendNotification("BOX_WELFARE_RED"),this.boxWelfareUpdate();break;case"OPEN_MARCKET_FAST_BUY":var o=g.database.getData("marketprops",e.getBody());this._buyHotStone(o);break;case"INIT_VIP_INFO":case"CHANGE_VIP_INFO":this.view.vipList.dataSource=t.vipFunList,this.onTabBar(this.view.tabBar.selectedIndex),this.view.freshMVIP(e.getBody()),this.mothCardBuyMorePop.updateVipInfo(e.getBody());break;case"USER_INIT":this.view.tabBar.selectedIndex=-1,this.freshVipExt(null),pc.instance.query();case"USER_LEVEL_CHANGE":this.leveFresh=!0,this.freshForLevel(),this.queryDaily(),5==Ng.userVO.getValue(1006)&&(this.view.freshPaytotalAddFun(null),this.sendNotification("BOX_WELFARE_RED"));break;case"RECEIVE_DUNGEON_SP_INFO":this.dungeonSpInfo=e.getBody(),this.dungeonLastPassId<this.dungeonSpInfo.passedId&&(this.dungeonLastPassId=this.dungeonSpInfo.passedId,this.leveFresh=!0),this.freshForLevel();break;case"RECEIVE_DUNGEON_LIMIT_INFO":this.leveFresh=!0,this.freshForLevel();break;case"RECIVE_PAY_TOTAL_INFO":this.freshPaymentList(e.getBody()),this.leveFresh=!0,this.freshForLevel();break;case"USER_DOUBLE_PAY_TIME_CHG":case"RECEIVE_ACTIVITY_INFO":(v.OPEN_PAYMENT||X.openJade())&&this.upGoldList();break;case"ZERO_CLOCK_TRIGER":this.leveFresh=!0,this.freshForLevel(),this.queryDaily(),Ng.userVO.getValue(1006)>=40&&vc.instance.query();break;case"OPEN_EQUIP_GHOST":if(this._playerMarket&&this._playerMarket.equipGhostId>0){var s="恭喜您获得";if("open"==e.getType())s="开启熔灵宝箱";else if("change"==e.getType())s="更换熔灵五行";else if("auto"==e.getType()){s="自动开启熔灵宝箱，共"+this._playerMarket.autoTime+"次";var r=0,a=this._playerMarket.equipGhostId;if(a>0){var l=g.database.getData("props",a);null!=l&&(r=re.getAutoEquipGhostPrice(l.level))}k.goldenCost("自动开启熔灵宝箱",this._playerMarket.autoTime,r)}this.equipGhostSelect.popInfo(this._playerMarket,s)}break;case"RECIEVE_PLAYER_MARKET_DAILY":this.freshDaily(e.getBody());break;case"AD_COMPLETE":if("fuli"==e.getBody()){var h=g.clock.currentTime+3e4;Ts.setItem("FULI_SPEED"+v.playerId,h.toString()),this.isCickAd=!1,this.sendNotification("BOX_WELFARE_RED"),this.view.addListenerWelfareTimer()}break;case"AD_COLSE":this.isCickAd=!1;break;case"BOX_WELFARE_UPDATE":this.boxWelfareUpdate();case"ACTIVIT_PAY_WEEK_INFO":break;case"RECEIVE_VIP_EXT":this.freshVipExt(e.getBody())}},i.freshVipExt=function(e){if(null==e)return void(this.view.vipExtCardCell.visible=!1);if(Q.isLayaAndIos()&&!X.openJade())return void(this.view.vipExtCardCell.visible=!1);var t=this.view.vipExtCardCell.getChildByName("name"),i=this.view.vipExtCardCell.getChildByName("costRmb"),n=(this.view.vipExtCardCell.getChildByName("desc"),this.view.vipExtCardCell.getChildByName("btnBuy")),o=this.view.vipExtCardCell.getChildByName("btnAward");i.text="仅售：198"+(X.openJade()&&!qt.getOne(108).canJump()?"仙玉":"元"),e.isEffecting?(t.text="钻石月卡（"+e.liveDay+"天）",t.color="#e70626",o.visible=!e.isSigned,n.label="提前续费",e.isSigned&&(i.text="今日已领取")):(t.text="钻石月卡（30天）未激活",t.color="#b0bcb0",o.visible=!1,n.label="立刻激活"),this.view.vipExtCardCell.visible=!0},i.onVipExtCard=function(e){switch(e.target.name){case"btnBuy":if(Ng.userVO.getValue(1006)<40)return void this.sendNotification("prompted_info_show",{info:"角色等级不足40"});var t=this.facade.retrieveProxy("MarketProxy");t.payment(108);break;case"btnAward":var i=this.facade.retrieveProxy("VipExtProxy");if(!i.vipExt.isEffecting)return void this.sendNotification("prompted_info_show",{info:"月卡已过期"});if(i.vipExt.isSigned)return void this.sendNotification("prompted_info_show",{info:"奖励已领取过了，请明天再来。"});vc.instance.takeAward()}},i.boxWelfareUpdate=function(){var e=Ng.userVO.getValue(1013),t=10-e%1e3;ro.isTodayTs(e)||(t=10),0==t&&this.sendNotification("BOX_WELFARE_RED");var i=this.view.boxWelfare.getChildByName("boxAd").getChildByName("count");i.text=t.toString()},i.freshDaily=function(e){this.view.showDaily(e,this.dungeonSpInfo),this.view.showDailyPearl(e)},i.queryDaily=function(){Ng.userVO.getValue(1006)>=45&&pc.instance.queryDaily()},i.freshPaymentList=function(e){this._paytotal=e,(v.OPEN_PAYMENT||X.openJade())&&(this.upGoldList(),this.upJadeList()),this._paytotal.isMarcket90percent()&&this.view.stoneList.refresh(),this.view.freshPaytotalAddFun(e),this.onTabBar(this.view.tabBar.selectedIndex)},i.upJadeList=function(){if(X.openJade()){this.view.jadeList.renderHandler=new h(this,this.onJadeRender),this.view.jadeList.mouseEnabled=!0,this.view.jadeList.mouseHandler=new h(this,this.onJadeClick);var e;v.IS_GLOBAL_VERSION?e=[30006,30018,30030,30068,30098,30128,30168,30198,30328,30648]:(e=[10006,10030,10098,10328,10648],qt.canJumpPay(11298)&&(e.push(11298),this._paytotal&&this._paytotal.totalRmb>=1298&&e.push(13999),this._paytotal&&this._paytotal.totalRmb>=9888&&e.push(18888))),this.view.jadeList.dataSource=e}},i.upGoldList=function(){var e;T.IS_ON_MINI||Q.isLayaAndIos()?(e=[{id:1,gold:60,money:6},{id:2,gold:309,money:30},{id:3,gold:1029,money:98},{id:4,gold:2119,money:198},{id:5,gold:7128,money:648}],X.openJade()&&(e.push({id:6,gold:14668,money:1298}),this._paytotal&&this._paytotal.totalRmb>=1298&&e.push({id:7,gold:46789,money:3999}),this._paytotal&&this._paytotal.totalRmb>=9888&&e.push({id:8,gold:106656,money:8888}))):(e=[{id:1,gold:60,money:6},{id:2,gold:309,money:30},{id:3,gold:1029,money:98},{id:4,gold:2119,money:198},{id:5,gold:7128,money:648},{id:6,gold:14668,money:1298}],this._paytotal&&this._paytotal.totalRmb>=1298&&e.push({id:7,gold:46789,money:3999}),this._paytotal&&this._paytotal.totalRmb>=9888&&e.push({id:8,gold:106656,money:8888})),this.view.goldList.dataSource=e},i.onTabBar=function(e){var t=this.view.tabBarArr[e];lo.isNull(t)||this.onTabBarName(t)},i.onTabBarName=function(e){if(this.view.vipList.removeSelf(),this.view.stoneList.removeSelf(),this.view.goldList.removeSelf(),this.view.mVip.removeSelf(),this.view.hotStoneList.removeSelf(),this.view.bookshop.removeSelf(),this.view.equipGhost.removeSelf(),this.view.boxWelfare.removeSelf(),this.view.boxDaily.removeSelf(),this.view.jadeList.removeSelf(),this.view.iosAlert.visible=!1,this.view.vipList.dataSource)switch(e){case"功能":this.view.addChild(this.view.vipList);break;case"月卡":this.view.addChild(this.view.mVip);var t=this.facade.retrieveProxy("MarketProxy");t.checkMonthVip();break;case"珍宝":this.view.addChild(this.view.stoneList),this.freshForLevel();break;case"仙玉":case"充值":this.view.iosAlert.visible=Q.isLayaAndIos(),X.openJade()?this.view.addChild(this.view.jadeList):this.view.addChild(this.view.goldList);break;case"元宝":this.view.iosAlert.visible=Q.isLayaAndIos(),this.view.addChild(this.view.goldList);break;case"特惠":this._paytotal&&this._paytotal.totalRmb>0?this.view.addChild(this.view.hotStoneList):(this.sendNotification("prompted_info_show",{info:"充值任意金额即可打开"}),this.sendNotification("OPEN_MARCKET_VIEW","充值"),this.sendNotification("OPEN_FUTURE_GIFT_PAGE"));break;case"器灵":Ng.userVO.getValue(1006)<40?(this.view.tabBar.selectedIndex=0,this.sendNotification("prompted_info_show",{info:"40级开启器灵商店"})):this.view.addChild(this.view.bookshop);break;case"宝箱":Ng.userVO.getValue(1006)<40?(this.view.tabBar.selectedIndex=0,this.sendNotification("prompted_info_show",{info:"40级开启"})):(this._playerMarket&&this._playerMarket.equipGhostId>0&&this.equipGhostSelect.popInfo(this._playerMarket,"开启熔灵宝箱获得"),this.view.addChild(this.view.equipGhost));break;case"福利":Ng.userVO.getValue(1006)<5?(this.view.tabBar.selectedIndex=0,this.sendNotification("prompted_info_show",{info:"5级开放"})):this.view.addChild(this.view.boxWelfare);break;case"每日":Ng.userVO.getValue(1006)<45?(this.sendNotification("prompted_info_show",{info:"45级开放"}),this.sendNotification("OPEN_MARCKET_VIEW","功能")):(this.view.addChild(this.view.boxDaily),this.view.iosAlert.visible=Q.isLayaAndIos())}},i.freshForLevel=function(){var e=Ng.userVO.getValue(1006),t=this.facade.retrieveProxy("MarketProxy");if(t.checkVipListWhenLevelUp(e)&&(this.view.vipList.dataSource=t.vipFunList),this.leveFresh&&this.dungeonSpInfo&&this._playerMarket&&this._paytotal){var i,n=[],o=[];for(var s in g.database.marketProps)if(i=g.database.marketProps[s],!(e<i.lvMin)){if(14==i.id){var r=this.facade.retrieveProxy("DungeonProxy");if(null==r.getDungeonLimitOpen()||r.getDungeonLimitOpen().openLimit)continue}else{if(20==i.id){ht.isActiveTime()&&n.push(i);continue}if(26==i.id){var a=Ng.userVO.getValue(19001),l=ro.dateDiffByMs(g.clock.currentTime,a,!0);if(18>l)continue;n.unshift(i);continue}}i.id<100?n.push(i):i.id<106?this._paytotal.totalRmb>0&&o.push(i):ht.isActiveTime()&&o.push(i)}if(this.view.stoneList.dataSource=n,this.view.hotStoneList.dataSource=o,40>e?this.view.equipGhost.removeSelf():this.view.equipGhost.dataSource=re.EQUIP_GHOST_BOXS,e>=40){this.view.bookList.dataSource=this._playerMarket.getBooks();var h=this.view.bookshop.getChildByName("lbNum"),c=this._paytotal.bookShopMaxBuyNum()-this._playerMarket.getBookBuyed();0>=c?(h.text="0 (周末重置)",h.color="#e70626"):(h.text=c+"",h.color="#00dc24")}this.leveFresh=!1}},i._getCostGold=function(e){var t=e.golden;if(-12==e.propId){var i=-1;switch(this._playerMarket&&(i=this._playerMarket.getBuyedTime(e.id)),i){case 0:t=50;break;case 1:t=80;break;case 2:t=120;break;case 3:t=150;break;case 4:t=200;break;default:t=200}}return t},i.onStoneRender=function(e,t){if(this.view.stoneList.dataSource){var i=e.getChildByName("name"),n=e.getChildByName("desc"),o=e.getChildByName("btnBuy"),s=e.getChildByName("costGold"),r=e.getChildByName("costGoldOld");op.isOnMiniIos()&&(o.label="获取"),n.text="";var a=this.view.stoneList.dataSource[t],l=1,h=this._getCostGold(a);switch(a.propId){case-1:var c=Ng.userVO.getValue(1006);i.text=3300*c+" 铜币",i.color="#ffffff",n.text="等级越高购买所获得的铜币越多";break;case-12:i.text="3小时3倍收益(经验、灵气、灵宠装备)",i.color="#c527ff",n.text="3倍收益 +3小时，购买后直接生效";break;case 500001:if(!this.dungeonSpInfo)return;var u=In.queryCountPerM(this.dungeonSpInfo.passedId);l=6*u*60,n.text="五行宫通关层数越高，购买所获得的灵石将越多";default:var d=g.database.getData("props",a.propId);d?(1==l?i.text=d.name+" 1个":i.text=d.name+" "+l+"个",i.color=N.getColor(d.quality),""==n.text&&(n.text=d.desc)):i.text="未知物品id:"+a.propId}r.text="原价"+h,r.visible=!1,this._paytotal&&this._paytotal.isMarcket90percent()?(h=vo["int"](9*h/10),s.color="#c527ff"):s.color="#f4b922",ht.isMarketPercent()?(h=vo["int"](88*h/100),s.text=h+"元宝",r.visible=!0):s.text=h+"元宝",a.limitTime>0&&this._playerMarket&&this._playerMarket.getBuyedTime(a.id)>=a.limitTime?(e.alpha=.6,s.text="今日已达上限",s.color="#e70626"):e.alpha=1}},i.onMouseVip=function(e,t){var i=this;if("click"==e.type){var n=this.view.vipList.dataSource[t];if("btnBuy"==e.target.name){var o=Ng.userVO.getValue(1010),s=n.costGold;if(s>o)return void this.sendNotification("prompted_info_show",{info:"购买需要"+s+"元宝"});this._vipTmp=n,this.sendNotification("POP_CONFIRM_INFO",{info:"购买需要<font color='#fffc00'>"+s+"元宝</font>，是否确认？",handler:h.create(this,function(e){if(e&&i._vipTmp){switch(i._vipTmp.type){case 5:fc.instance.buyExpRate();break;case 2:fc.instance.buySilverRate();break;case 0:fc.instance.buyPropRate();break;case 1006:fc.instance.buyGasRate();break;case 1001:fc.instance.buyOfflineTime();break;case 1002:fc.instance.buyArenaMineTime();break;case 1005:fc.instance.buyArenaMineCount();break;case 1003:fc.instance.buyStarFailReturn();break;case 1004:fc.instance.buyPetFoodDropAdd();break;case 1007:fc.instance.buyBossRate();break;default:return}k.goldenCost("商场功能"+i._vipTmp.type,1,s)}})})}else if("ntc"==e.target.name)switch(n.type){case 0:this.sendNotification("POP_ALERT_INFO",{info:"掉落概率根据阶段性升级节奏、怪物高级等级会递减，功能概率是在基础掉率上做加成。"},"common");break;case 1007:this.sendNotification("POP_ALERT_INFO",{info:"增加boss概率在原有基础上做该加成，高级材料boss爆率高，紫色材料只有boss会有概率掉落。"},"common")}}},i.onMouseStone=function(e,t){if("click"==e.type&&"btnBuy"==e.target.name){var i=this.view.stoneList.dataSource[t];this._buyHotStone(i)}},i._buyHotStone=function(e){if(null!=e){var t=Ng.userVO.getValue(1010),i=e.limitTime;if(this._paytotal&&500001==e.propId&&(i+=this._paytotal.marketStoneBuyTimeAdd()),e.limitTime>0&&this._playerMarket&&this._playerMarket.getBuyedTime(e.id)>=i)return void this.sendNotification("prompted_info_show",{info:"超过每日购买次数上限，请明天再试。"});var n=this._getCostGold(e);if(this._paytotal&&this._paytotal.isMarcket90percent()&&(n=vo["int"](9*n/10)),ht.isMarketPercent()&&(n=vo["int"](88*n/100)),n>t)return void this.sendNotification("prompted_info_show",{info:"购买需要"+n+"元宝"});var o=1;switch(e.propId){case-1:case-12:break;case 500001:default:var s=g.database.getData("props",e.propId);if(s){var r=this._paytotal&&this._paytotal.isMarcket90percent(),a=e.golden;if(r&&(a=vo["int"](90*a/100)),ht.isMarketPercent()&&(a=vo["int"](88*a/100)),500001==e.propId){if(!this.dungeonSpInfo)return;var l=In.queryCountPerM(this.dungeonSpInfo.passedId);o=6*l*60,this.buyPropMoreView.popPropsStone(e,s,a,o)}else this.buyPropMoreView.popProps(e,s,a);return}}this.sendNotification("POP_CONFIRM_INFO",{info:"购买需要<font color='#fffc00'>"+n+"元宝</font>，是否确认？",handler:h.create(this,function(t){t&&(pc.instance.buy(e.id,1),k.goldenCost("商城购买"+e.id,1,n))})})}},i.onHotStoneRender=function(e,t){if(this.view.hotStoneList.dataSource){var i=e.getChildByName("name"),n=e.getChildByName("info"),o=e.getChildByName("costGold");if(n.style.color="#ffffff",n.style.align="center",n.style.fontSize=26,n.style.leading=10,this.dungeonSpInfo){var s=In.queryCountPerM(this.dungeonSpInfo.passedId),r=this.view.hotStoneList.dataSource[t],a=e.getChildByName("buyed"),l=e.getChildByName("btnBuy");r.limitTime>0?this._playerMarket&&this._playerMarket.getBuyedTime(r.id)>=r.limitTime?a.visible=!0:this._playerMarket&&this._playerMarket.getBuyedTime(-r.id)>=r.limitTime?a.visible=!0:a.visible=!1:a.visible=!1,l.visible=!a.visible;var h,c=0,u=0,d=0,p=0,f=1;Ng.userVO.getValue(1006);switch(r.propId){case-2:return f=10*s*60,c=6e3,c>f&&(f=c),i.text="灵石礼包，每日可购买1次",h=g.database.getData("props",500001),n.innerHTML="<font color='"+N.getColor(h.quality)+"'>【"+h.name+"】</font>"+f+"个",void(o.text="仅需6"+(X.openJade()&&!qt.canJumpPay(6)?"仙玉":"元"));case-3:d=1e5,p=125006,c=4e3;break;case-4:d=3e5,p=145006,c=1e4;break;case-5:d=6e5,p=165006,c=3e4;break;case-6:d=15e5,p=185008,c=12e4;break;case-7:p=200002,f=3;break;case-8:p=200002,f=5;break;case-9:p=200003,f=3;break;case-10:p=200003,f=5;break;case-11:return i.text="折扣礼包，每日可购买1次",n.innerHTML="<font color='#fffc00'>120元宝</font>",void(o.text="仅需6"+(X.openJade()?"仙玉":"元"));default:return}u=r.golden,i.text="折扣礼包，每日限购1次";var _;c>0?(f=2*s*60,c>f&&(f=c),h=g.database.getData("props",p),_="<font color='"+N.getColor(h.quality)+"'>【"+h.name+"】</font>1个<br>",h=g.database.getData("props",500001),_=_+"<font color='"+N.getColor(h.quality)+"'>【"+h.name+"】</font>"+f+"个<br>"):(h=g.database.getData("props",p),_="<font color='"+N.getColor(h.quality)+"'>【"+h.name+"】</font>"+f+"个<br>"),d>0&&(_=_+d+"铜币"),n.innerHTML=_,o.text="仅需"+u+(X.openJade()&&!qt.canJumpPay(u)?"仙玉":"元")}}},i.onMouseHotStone=function(e,t){if("click"==e.type&&"btnBuy"==e.target.name){var i=this.view.hotStoneList.dataSource[t];if(i.limitTime>0&&this._playerMarket&&this._playerMarket.getBuyedTime(i.id)>=i.limitTime)return void this.sendNotification("prompted_info_show",{info:"超过每日购买次数上限，请明天再试。"});var n=0;switch(i.propId){case-2:n=500;break;case-3:n=501;break;case-4:n=502;break;case-5:n=503;break;case-6:n=504;break;case-7:n=505;break;case-8:n=506;break;case-9:n=507;break;case-10:n=508;case-11:n=402;break;default:return}var o=this.facade.retrieveProxy("MarketProxy");o.payment(n)}},i.onBookClick=function(e,t){if("click"==e.type&&this._playerMarket&&this._paytotal){var i=this._paytotal.bookShopMaxBuyNum()-this._playerMarket.getBookBuyed();if(0>=i)return void this.sendNotification("prompted_info_show",{info:"可购数量0,周末重置可购买数量。"});var n=this.view.bookList.getCell(t).dataSource;if(n){var o=g.database.getData("props",n),s=re.queryBookGoldenPrice(o);this.buyBookMoreView.popProps(o,s,i)}}},i.onEquipGhostClick=function(e,t){if("click"==e.type){if(this._playerMarket&&this._playerMarket.equipGhostId>0)return void this.equipGhostSelect.popInfo(this._playerMarket,"领取熔灵宝箱物品");var i=re.EQUIP_GHOST_BOXS[t],n=Ng.userVO.getValue(1010);switch(e.target.name){case"btnBuy":if(!(n>=i.gold))return void this.sendNotification("prompted_info_show",{info:"元宝不足。"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='#fffc00'>"+i.gold+"元宝</font>，开启熔灵宝箱吗？",handler:h.create(this,function(e){e&&(pc.instance.openEquipGhost(i.id),k.goldenCost("开启熔灵宝箱"+i.id,1,i.gold))})});break;case"btnAuto":var o=30*i.gold;if(!(n>=o))return void this.sendNotification("prompted_info_show",{info:"元宝需要达到保底次数。"});this.equipGhostAuto.popInfo(i);break;case"btnNtc":this.sendNotification("POP_FUN_NOTICE",14);break;case"btnNtc1":this.sendNotification("SHOW_HELP_PAGE",2)}}},i.onEquipGhostRender=function(e,t){var i=e.dataSource;if(i){var n=e.getChildByName("name");n.text=i.name+"(剩余"+(100-this._playerMarket.purpleFialed)+"次必出紫色)",n.color="#c527ff",n=e.getChildByName("desc");var o=Ng.userVO.getValue(1006);if(o<i.level?(n.text="开启等级"+i.level,e.visible=!1):(n.text=i.desc,e.visible=!0),n=e.getChildByName("costGold"),n.text=i.gold+"元宝",T.IS_ON_MINI){var s=e.getChildByName("btnNtc1");s.visible=!1}}},i.onEquipGhostSelectClick=function(e){switch(e.target.name){case"btnSure":pc.instance.awardEquipGhostBox(this._playerMarket.equipGhostId),this.equipGhostSelect.close();break;case"btnChg":var t=50+50*this._playerMarket.equipGhostTimes;t>200&&(t=200);var i=Ng.userVO.getValue(1010);t>i?this.sendNotification("prompted_info_show",{info:"元宝不足。"}):this.sendNotification("POP_CONFIRM_INFO",{info:"更换需要<font color='#fffc00'>"+t+"元宝</font>，是否确认？",handler:h.create(this,function(e){e&&(pc.instance.changeEquipGhostBox(t),k.goldenCost("更换熔灵宝箱",1,t))})});break;case"btnAward":pc.instance.awardEquipGhostBox(this._playerMarket.equipGhostId),this.equipGhostSelect.close()}},i.onEquipGhostAutoClick=function(e){var t=this;switch(e.target.name){case"btnSure":var i=this.equipGhostAuto.aimQ.selectedIndex,n=0;if(1==i)i=5,n=30*this.equipGhostAuto.d.gold;else{if(2!=i)return void this.sendNotification("prompted_info_show",{info:"请选择品质。"});i=6,n=100*this.equipGhostAuto.d.gold}var o=Ng.userVO.getValue(1010);o>=n?(this.sendNotification("POP_CONFIRM_INFO",{info:"您将自动开启宝箱获取<font color='"+N.getColor(i)+"'>"+N.getName(i)+"色品质熔灵</font>，可能花费巨大元宝，但不会超过保底次数，是否继续？",handler:h.create(this,function(e){e&&pc.instance.openEquipGhostAuto(t.equipGhostAuto.d.id,i)})}),this.equipGhostAuto.close()):this.sendNotification("prompted_info_show",{info:"元宝不足保底次数。"})}},i.onBoxWelfareClick=function(e){var t=this;switch(e.target.name){case"btnWelfare":console.log("onBoxWelfareClick");var i=Ts.getItem("FULI_SPEED"+v.playerId);if(null!=i&&""!=i)return void this.sendNotification("prompted_info_show",{info:"福利广告冷却中"});var n=this.facade.retrieveProxy("MarketProxy");if(n&&n.vipInfo&&n.vipInfo.isMVIP)return void mu.instance.shareGame4VIP();if(T.IS_ON_MINI);else{if(Or.onIOS)return void this.sendNotification("prompted_info_show",{info:"iOS设备暂时不支持广告内容，等后续更新"});if(""==v.version_app)return void this.sendNotification("prompted_info_show",{info:"请下载最新版本开启看广告免费领福利"})}var o=Ng.userVO.getValue(1013),s=10-o%1e3;if(ro.isTodayTs(o)||(s=10),0>=s)return void this.sendNotification("prompted_info_show",{info:"今日次数已用完,请明天再来"});if(T.IS_ON_MINI)op.createRewardedVideoAd(function(){mu.instance.shareGame(),t.sendNotification("AD_COMPLETE","fuli")},function(){t.sendNotification("prompted_info_show",{info:"未观看完视频"})});else if(v.IS_THIRD_PT)if("m4399"==X.FLAVOR){if(Or.onAndroid&&!this.isCickAd)return Q.showAd(v.playerId+"|fuli"),void(this.isCickAd=!0);this.sendNotification("prompted_info_show",{info:"广告正在加载中，请等待"})}else this.sendNotification("prompted_info_show",{info:"看广告领奖励暂未开放"});else{if(v.IS_THIRD_PT&&n&&!n.vipInfo.isMVIP)return void this.sendNotification("prompted_info_show",{info:"看广告领奖励功能调整中，待完成后开放"});if(Or.onAndroid&&!this.isCickAd)return Q.showAd(v.playerId+"|fuli"),void(this.isCickAd=!0);this.sendNotification("prompted_info_show",{info:"广告正在加载中，请等待"})}break;case"btnWeekSure":this.sendNotification("SHOW_ACTIVIT_PAY_WEEK_PAGE")}},i.onDaily=function(e){var t=this;if(null!=this.view._pmd){var i=g.database.getData("marketdaily",this.view._pmd.item);if(null!=i)switch(e.target.name){case"btnBuy":if(i.gold<=0)return;if(Ng.userVO.getValue(1010)<i.gold)return void this.sendNotification("prompted_info_show",{info:"您的元宝不足。"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认花费<font color='#fffc00'>"+i.gold+"元宝</font>购买每日礼包吗？",handler:h.create(this,function(e){e&&pc.instance.buyDaily(t.view._pmd.item)})});break;case"btnPay":var n=this.facade.retrieveProxy("MarketProxy");n.payment(700+this.view._pmd.item);break;case"btnPayPearl0":n=this.facade.retrieveProxy("MarketProxy"),n.payment(707);break;case"btnPayPearl1":n=this.facade.retrieveProxy("MarketProxy"),n.payment(708);break;case"btnPayPearl2":n=this.facade.retrieveProxy("MarketProxy"),n.payment(709)}}},s(0,i,"equipGhostAuto",function(){return this.getViewComponent(),this._equipGhostAuto}),s(0,i,"buyPropMoreView",function(){return this.getViewComponent(),this._buyPropMoreView}),s(0,i,"equipGhostSelect",function(){return this.getViewComponent(),this._equipGhostSelect}),s(0,i,"view",function(){return this.getViewComponent()}),s(0,i,"mothCardBuyMorePop",function(){return this.getViewComponent(),this._mothCardBuyMorePop}),s(0,i,"buyBookMoreView",function(){return this.getViewComponent(),this._buyBookMoreView}),t.NAME="MarcketMediator",t}(lc),Dp=function(e){function t(){t.__super.call(this)}o(t,"modules.alca.controller.commands.AlcaTeamCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=this.facade.retrieveProxy("AlcaProxy"),n=v.protoCodec.getResponseDecoder().decode("AlcArena",t.value),o=i.receiveTeamChg(n);switch(t.cmd){case 4:break;case 5:}this.sendNotification("RECIVE_ALCA_TEAM_CHG",o)}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),kp=function(e){function t(){t.__super.call(this)}o(t,"modules.alca.controller.commands.AlcaAwardLogCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AlcaAwardLogs",t.value),n=null;if(i.logs){n=[];var o;for(var s in i.logs)o=i.logs[s],n.push(new ve(o))}this.sendNotification("RECEIVE_ALCA_AWARD_LOGS",n)}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),Bp=function(e){function t(){t.__super.call(this)}o(t,"modules.alca.controller.commands.AlcaQueryEnemyCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=this.facade.retrieveProxy("AlcaProxy"),n=v.protoCodec.getResponseDecoder().decode("AlcArena",t.value);i.receiveEnemyInfo(n),this.sendNotification("RECIVE_ALCA_ENEMY",i.enemyAlca)}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),Vp=function(e){function t(){t.__super.call(this)}o(t,"modules.alca.controller.commands.AlcaListVDCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AlcaVideoLogs",t.value),n=null;if(i.logs){n=[];var o;for(var s in i.logs)o=i.logs[s],n.push(new ge(o))}this.sendNotification("RECEIVE_ALCA_VIDEO_LOGS",n)}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),Fp=function(e){function t(){t.__super.call(this)}o(t,"modules.alca.controller.commands.AlcaLookVDCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AlcaVideo",t.value);this.sendNotification("RECEIVE_ALCA_VIDEO_DETAIL",i)}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),Gp=function(e){function t(){t.__super.call(this)}o(t,"modules.alca.controller.commands.AlcaInfoCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=this.facade.retrieveProxy("AlcaProxy"),n=v.protoCodec.getResponseDecoder().decode("AlcArena",t.value);switch(i.receiveSelfInfo(n),t.cmd){case 1:this.sendNotification("prompted_info_show",{info:"报名成功"});break;case 2:break;case 6:break;case 7:case 12:this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,9);break;case 10:this.sendNotification("prompted_info_show",{info:"宗门战布阵授权已变更"});break;case 100:break;case 101:break;case 102:n.award>0?this.sendNotification("prompted_info_show",{info:"宗门战奖励已结算，比赛获胜，宗门资源+"+n.award}):this.sendNotification("prompted_info_show",{info:"宗门战奖励已结算，比赛失败，宗门资源+"+-n.award})}this.sendNotification("RECIVE_ALLIANCE_ARENA",i.selfAlca,2==t.cmd?"init":null)}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),Hp=function(e){function t(){t.__super.call(this)}o(t,"modules.alca.controller.commands.AlcaTakeExtAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"宗门战额外奖励",awards:n,desc:""})}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),Up=function(e){function t(){this.actlist=[],this.tabRedPoint=!1,this.tmpRedManager=new J,t.__super.call(this,"ActivityListHomeMediator")}o(t,"modules.home.view.ActivityListHomeMediator",e);var n=t.prototype;return n.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.listacthome),this.view.scrollBar.hide=!0,this.view.renderHandler=new h(this,this.onRender),this.view.mouseEnabled=!0,this.view.mouseHandler=new h(this,this.onMouse)},n.listNotificationInterests=function(){return["UPDATA_HOME_LIST_ACT"]},n.handleNotification=function(e){switch(e.getName()){case"UPDATA_HOME_LIST_ACT":i.timer.callLater(this,this.updataList)}},n.updataList=function(){this.actlist=[],this.tabRedPoint=!1;var e;"taptap"==X.FLAVOR&&g.clock.currentTime>1654012801e3&&g.clock.currentTime<1656604799e3&&(e=new pe,e.title="TapTap 「签到礼包」 领取",e.actTime="活动时间：2022.6.1--2022.6.30",e.type=7,e.hasAward=this.tmpRedManager.needRed(4),this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e));var t=this.facade.retrieveProxy("ActivityPropxy");if(t&&null!=t.playerActivity&&t.tempActivitySet.showTime()){
t.playerActivity;e=new pe,e.title=t.tempActivitySet.getName(),e.actTime=t.getActEndTime(),e.type=6,e.hasAward=this.tmpRedManager.needRed(0)||t.hasAward(),this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e)}var i=this.facade.retrieveProxy("LotteryProxy");i&&i.info&&i.isOpen()&&(e=new pe,e.title="大转盘",e.actTime=i.getActEndTime(),e.type=9,e.hasAward=i.hasTime(),this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e));var n=this.facade.retrieveProxy("Activity7DayPropxy");n&&null!=n.day7data&&n.isActiving()&&(e=new pe,e.title="7天乐",e.actTime=n.getActEndTime(),e.type=3,e.hasAward=this.tmpRedManager.needRed(1)||n.hasAward(),this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e));var o=this.facade.retrieveProxy("ActivityWeekPropxy");if(o&&null!=o.weekdata&&o.isActiving()){var s=o.getActTypeObj();e=new pe,e.title=s.title,e.actTime=o.getActEndTime(),e.type=4,e.hasAward=this.tmpRedManager.needRed(2)||o.hasAward()||o.isLocTypeChg(),this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e)}var r=this.facade.retrieveProxy("ActivityInvestPropxy");r&&null!=r.investdata&&r.isActiving()&&(e=new pe,e.title="限时元宝投资活动",e.actTime=r.getActEndTime(),e.type=5,e.hasAward=this.tmpRedManager.needRed(3)||r.hasAward(),this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e));var a=this.facade.retrieveProxy("PayTotalPropxy");if(v.OPEN_PAYMENT||X.openJade()){var l=this.facade.retrieveProxy("RebateProxy");l&&null!=l.rebateData&&(l.isActiving()?(e=new pe,e.title="灵珠返利活动",e.actTime=l.getActEndTime(),e.type=2,e.hasAward=l.redPoint,this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e)):a&&a.info&&a.info.isAwarded(4288)&&(e=new pe,e.title="灵珠返利活动",e.actTime="开启倒计时："+l.nextOpenDayNum+"天",e.isOpen=!1,e.type=2,e.hasAward=!1,e.forceOpen=a.info.canResetRebate()?1:-1,this.actlist.push(e)));var h=this.facade.retrieveProxy("GiftFutureProxy");h&&null!=h.info&&h.isActiving()&&(e=new pe,e.title="等级投资活动",e.actTime="活动时间：无时限",e.type=1,e.hasAward=h.redPoint,this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e)),t&&(t.isOpenBuyStoneAct()?(e=new pe,e.title="仙品天籁石特惠",e.actTime="活动剩余：最后一天(23点59分结束)",e.type=8,e.hasAward=this.tmpRedManager.needRed(0),this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e)):a&&a.info&&a.info.isAwarded(9888)&&(e=new pe,e.title="仙品天籁石特惠",e.actTime="开启倒计时："+t.nextOpenBuyStoneActDay()+"天",e.isOpen=!1,e.type=8,e.hasAward=!1,e.forceOpen=a.info.canResetStone()?1:-1,this.actlist.push(e)))}a&&null!=a.info&&(e=new pe,e.title=v.OPEN_PAYMENT?"累计充值返利活动":"累计积分返利活动",e.actTime="活动时间：无时限",e.type=0,e.hasAward=a.redPoint,this.tabRedPoint=this.tabRedPoint||e.hasAward,this.actlist.push(e)),this.checkHomeListAct(),this.view.dataSource=this.actlist},n.checkHomeListAct=function(){var e,t=this.facade.retrieveMediator("HomeMediator"),i=t.view.barModel;e=i.getChildAt(4),co.showOrHide(e,this.tabRedPoint)},n.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("title"),o=e.getChildByName("lbActTime"),s=e.getChildByName("btnSure"),r=e.getChildByName("btnReset");n.text=i.title,o.text=i.actTime,o.color=i.isOpen?"#fffc00":"#e70626",r.visible=1==i.forceOpen,co.showOrHide(s,i.hasAward)},n.onMouse=function(e,t){if("click"===e.type){var i=this.view.dataSource[t];if("btnSure"==e.target.name)switch(i.type){case 0:this.sendNotification("SHOW_PAY_TOTAL_PAGE");break;case 1:this.sendNotification("OPEN_FUTURE_GIFT_PAGE");break;case 2:this.sendNotification("SHOW_REBATE_PAGE");break;case 3:this.sendNotification("SHOW_ACTIVIT_7_DAY_PAGE"),this.tmpRedManager.clicked(1),this.updataList();break;case 4:this.sendNotification("SHOW_ACTIVIT_WEEK_PAGE"),this.tmpRedManager.clicked(2),this.updataList();break;case 5:this.sendNotification("SHOW_ACTIVIT_INVEST_PAGE"),this.tmpRedManager.clicked(3),this.updataList();break;case 6:this.sendNotification("SHOW_ACTIVITY_PAGE"),this.tmpRedManager.clicked(0),this.updataList();break;case 7:var n="https://www.taptap.com/events/game-sign/6283420c";Q.isLaya()?Q.openWebview(n):nwei_sdk.popHelp(n),this.tmpRedManager.clicked(4);break;case 8:this.sendNotification("SHOW_ACTIVITY_LIMIT_PAGE"),this.tmpRedManager.clicked(0),this.updataList();break;case 9:this.sendNotification("OPEN_LOTTERY_PAGE")}else if("btnReset"==e.target.name)switch(i.type){case 2:this.sendNotification("POP_CONFIRM_INFO",{info:"您有每月一次重置特权<br>确认<font color='#fffc00'>重置并开启【灵珠返利活动】</font>吗？",handler:h.create(this,function(e,t){e&&vu.instance.resetRebate()})});break;case 8:this.sendNotification("POP_CONFIRM_INFO",{info:"您有每月一次重置特权<br>确认<font color='#fffc00'>重置并开启【仙品天籁石特惠】</font>吗？",handler:h.create(this,function(e,t){e&&vu.instance.resetStone()})});break;default:return}}},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="ActivityListHomeMediator",t}(lc),zp=function(e){function t(){this._enemyAlca=null,t.__super.call(this,"AlcaProxy",new ye),this._enemyAlca=new ye}o(t,"modules.alca.model.AlcaProxy",e);var i=t.prototype;return i.receiveSelfInfo=function(e){return this.selfAlca.update(e),this.selfAlca},i.receiveTeamChg=function(e){return this.selfAlca.update(e),this.selfAlca},i.receiveEnemyInfo=function(e){return this._enemyAlca.update(e),this._enemyAlca},s(0,i,"enemyAlca",function(){return this._enemyAlca}),s(0,i,"selfAlca",function(){return this.data}),t.NAME="AlcaProxy",t}(sc),Wp=function(e){function t(){this._game_ready=!1,this.dailyMediator=null,this._oldHeroLv=0,this.inited=!1,this.dungeonRender=null,this.cultureRender=null,t.__super.call(this,"HomeMediator")}o(t,"modules.home.view.HomeMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new fN),T.IS_ON_MINI&&(op.onVideoShow=!0,Or.onIOS&&(this.view.moduleItems.getChildByName("btnMacket").label="功能")),i.timer.loop(6e4,this,this.onClock),this.view.barModel.selectedIndex=-1,this.view.barModel.mouseEnabled=!1,this.view.moduleItems.mouseEnabled=!1,this.view.dungeon.removeSelf(),this.view.listCulture.removeSelf(),this.view.spcailDungeonPl.removeSelf(),this.view.listVisitPl.removeSelf(),this.view.listacthome.removeSelf(),this.view.paytotal_wx_kf.removeSelf(),this.view.selectDungeon.cacheAs="normal",this.view.spcailDungeonPl.cacheAs="normal",this.view.listVisitPl.cacheAs="normal",Qw.manager.on("open",this,this.onDialogChg),Qw.manager.on("close",this,this.onDialogChg)},n.onDialogChg=function(){0!=Ng.userVO.getValue(1004)&&0!=Ng.userVO.unitId.id&&(this.view.visible=0==Qw.manager.numChildren&&this._game_ready,this.view.visible?(i.stage.addChildAt(this.view,0),this.sendNotification("SHOW_HIDE_HEAD_BAR",!0)):this.view.removeSelf())},n.onClock=function(){var e=Ng.userVO.getValue(1006);1==this.view.barModel.selectedIndex&&(e>=1&&Gc.instance.queryDungeonSp(),e>=1&&yu.instance.query(),e>=40&&pu.instance.queryPlayerTeam())},n.onQQgroup=function(){T.IS_ON_MINI?op.openCustomerServiceConversation("在线客服",{essionFrom:"入群礼品卡",showMessageCard:!1,sendMessageTitle:"入群礼品卡",success:function(){},full:function(){}}):this.sendNotification("POP_ALERT_COPY",{title:"QQ群号已复制到剪切板",info:X.QQ_GROUP})},n.onRegister=function(){this.facade.registerMediator(new Ov),this.facade.registerMediator(new rg),this.facade.registerMediator(new Ub),this.facade.registerMediator(new bp),this.facade.registerMediator(new Lp),this.facade.registerMediator(new U_),this.facade.registerMediator(new Up),this.facade.registerMediator(new Iv),this.facade.registerMediator(new db(this.view)),this.dailyMediator=new cv,this.facade.registerMediator(this.dailyMediator),this.facade.registerMediator(new Wb),this.facade.registerMediator(new Pg),this.dailyMediator.txtQQgroup.mouseEnabled=!0,this.dailyMediator.txtQQgroup.on("mousedown",this,this.onQQgroup)},n.listNotificationInterests=function(){return["binding_new_session_success","USER_INIT","USER_LEVEL_CHANGE","USER_EXP_CHANGE","USER_HANGDUNGEON_CHANGE","USER_NATURE_CHANGE","USER_DRESSED_TITLE_CHANGE","USER_NAME_CHANGE","USER_MAX_PASSDUNGEON_CHG","USER_TRIBLE_END_TIME_CHG","CLEAR_CACHE_DATA","CHANGE_NATURE_RESULT","SHOW_HOME_PAGE","RECEIVE_TASK_INFO","RECEIVE_DUNGEON_EXP_AVERAGE","RECEIVE_DUNGEON_LIMIT_INFO"]},n.handleNotification=function(e){var t=0;switch(e.getName()){case"binding_new_session_success":this.init();break;case"USER_INIT":t=Ng.userVO.getValue(1006),this.dungeonRender.scrollToDungeonId(null),this.cultureRender.scrollToDungeonId(),hE.requestInit(),fc.instance.queryVip(),t>=40&&vc.instance.query(),t>=1&&Gc.instance.queryDungeonSp(),Gc.instance.queryLimitOpen(),t>=25&&cc.instance.lodeInfo(),t>=20&&(dc.instance.query(),hu.instance.query()),t>=35&&Tc.instance.query(),t>=32&&yu.instance.queryGlobalLogMime(),t>=30&&Wc.instance.query(),t>=40&&pu.instance.queryPlayerTeam(),this.checkLevelFunOpen(t),(v.SHOW_INVIT_PANEL||T.IS_ON_MINI)&&Xc.instance.query(),this.freshForTitle(),Qc.instance.query(),eu.instance.checkSpGift(202),t>=15&&eu.instance.query(),30>t&&eu.instance.checkSpGift(201),this.view.barModel.selectedIndex=0,t>=5&&xc.instance.listPassives(),this.sendNotification("BOX_WELFARE_RED"),t>=45&&pc.instance.queryRebate(),this.view.show(Ng.userVO),this._game_ready=!0,this.onDialogChg();break;case"CHANGE_NATURE_RESULT":t=Ng.userVO.getValue(1006),t>=5&&xc.instance.listPassives();break;case"USER_DRESSED_TITLE_CHANGE":this.freshForTitle();break;case"USER_EXP_CHANGE":Ng.userVO&&this.view.freshExp(Ng.userVO);break;case"USER_LEVEL_CHANGE":if(null==Ng.userVO||0==this.inited)return;this.view.freshExp(Ng.userVO),this.view.freshLevel(Ng.userVO),this.view.listDungeon.refresh(),t=Ng.userVO.getValue(1006),40==t&&vc.instance.query(),t>=20&&dc.instance.query(),t>=25&&cc.instance.lodeInfo(),t>=35&&Tc.instance.query(),30==t&&this.cultureRender&&this.cultureRender.scrollToDungeonId(),t>=40&&pu.instance.queryPlayerTeam(),t>=30&&Wc.instance.query(),32==t&&yu.instance.queryGlobalInfo(),t>=45&&pc.instance.queryRebate(),this.checkLevelFunOpen(t),t>=15&&eu.instance.query();break;case"USER_HANGDUNGEON_CHANGE":Ng.userVO&&this.view.freshHangDungeon(Ng.userVO),this.dungeonRender&&(this.refreshDungeonEquip(),this.cultureRender.scrollToDungeonId());break;case"USER_NATURE_CHANGE":Ng.userVO&&this.view.changeNature(Ng.userVO);break;case"SHOW_HOME_PAGE":e.getBody()?this.onDialogChg():this.view.removeSelf(),this.init(),e.getBody()&&(this.view.show(Ng.userVO),0==Ng.userVO.getValue(1007)&&op.miniRegisterStep(21));break;case"RECEIVE_DUNGEON_EXP_AVERAGE":this.view.freshHangDungeonExpAvg(e.getBody());break;case"USER_TRIBLE_END_TIME_CHG":this.view.freshHangDungeonExpAvg(0);break;case"USER_NAME_CHANGE":this.view.chgName(Ng.userVO);break;case"USER_MAX_PASSDUNGEON_CHG":this.dungeonRender&&(this.refreshDungeonEquip(),this.cultureRender.scrollToDungeonId());break;case"RECEIVE_TASK_INFO":e.getBody();this.refreshDungeonEquip();break;case"RECEIVE_DUNGEON_LIMIT_INFO":this.refreshDungeonEquip(),this.view.barModel.mouseEnabled=!0,this.view.moduleItems.mouseEnabled=!0,t=Ng.userVO.getValue(1006),this.checkLevelFunOpen(t);break;case"CLEAR_CACHE_DATA":this._game_ready=!1,this.view.visible=!1,this.view.barModel.mouseEnabled=!1,this.view.moduleItems.mouseEnabled=!1,this.view.removeSelf();var i=this.facade.retrieveProxy("DungeonProxy");i.clear()}},n.refreshDungeonEquip=function(){if(this.dungeonRender){var e=this.facade.retrieveProxy("DungeonProxy");this.dungeonRender.scrollToDungeonId(e.getDungeonLimitOpen())}},n.freshForTitle=function(){var e=Ng.userVO.getValue(7006);if(e>0){var t=g.database.getData("achieve",e);t&&(this.view.achieveTitle.text=t.name,this.view.achieveTitle.color=N.getColor(t.quailty))}else this.view.achieveTitle.color="#ffffff",this.view.achieveTitle.text=""},n.checkLevelFunOpen=function(e){var t=this.view.spcailDungeon.getChildByName("forestHead"),i=this.view.spcailDungeon.getChildByName("lodeHead"),n=this.view.spcailDungeon.getChildByName("ladderHead"),o=this.view.spcailDungeon.getChildByName("towertHead"),s=this.view.spcailDungeon.getChildByName("samsaraHead"),r=this.view.spcailDungeon.getChildByName("mysteryHead"),a=this.view.spcailDungeon.getChildByName("teamHead"),l=this.view.spcailDungeon.getChildByName("arenaHead"),h=this.view.spcailDungeon.getChildByName("worldbossHead"),c=this.view.spcailDungeon.getChildByName("dungeonDailyHead");20>e?(t.visible=!0,i.visible=!1,n.visible=!1,l.visible=!1,o.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,h.visible=!1,c.visible=!1,this.view.spcailDungeon.height=i.x):25>e?(t.visible=!0,i.visible=!0,n.visible=!1,l.visible=!1,o.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,h.visible=!1,c.visible=!1,this.view.spcailDungeon.height=n.y):30>e?(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!1,o.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,h.visible=!1,c.visible=!1,this.view.spcailDungeon.height=o.y):32>e?(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!0,o.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,h.visible=!1,c.visible=!1,this.view.spcailDungeon.height=s.y):35>e?(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!0,o.visible=!0,s.visible=!1,r.visible=!1,a.visible=!1,h.visible=!1,c.visible=!1,this.view.spcailDungeon.height=s.y):38>e?(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!0,o.visible=!0,s.visible=!0,r.visible=!1,a.visible=!1,h.visible=!1,c.visible=!1,this.view.spcailDungeon.height=r.y):39>e?(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!0,o.visible=!0,s.visible=!0,r.visible=!0,a.visible=!1,h.visible=!1,c.visible=!1,this.view.spcailDungeon.height=a.y):40>e?(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!0,o.visible=!0,s.visible=!0,r.visible=!0,a.visible=!0,h.visible=!1,c.visible=!1,this.view.spcailDungeon.height=c.y):45>e?(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!0,o.visible=!0,s.visible=!0,r.visible=!0,a.visible=!0,h.visible=!0,c.visible=!1,this.view.spcailDungeon.height=c.y+c.height):55>e?(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!0,o.visible=!0,s.visible=!0,r.visible=!0,a.visible=!0,h.visible=!0,c.visible=!0,this.view.spcailDungeon.height=c.y+c.height):(t.visible=!0,i.visible=!0,n.visible=!0,l.visible=!0,o.visible=!0,s.visible=!0,r.visible=!0,a.visible=!0,h.visible=!0,c.visible=!0,this.view.spcailDungeon.height=c.y+c.height),0==$e._OPEN_WORLD_BOSS_FUN&&h.visible&&(h.visible=!1,c.y=h.y,this.view.spcailDungeon.height=c.y+c.height),c.visible&&v.LIMIT_DUNGEON_OPEN_VERSION&&(c.visible=!1,this.view.spcailDungeon.height=c.y),this.view.spcailDungeonPl.refresh(),0==this._oldHeroLv&&(this._oldHeroLv=e),this._oldHeroLv<e&&25==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【地灵矿脉】</font>"}):this._oldHeroLv<e&&20==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【兽魂森林】</font>"}):this._oldHeroLv<e&&30==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【竞技场】</font>"}):this._oldHeroLv<e&&32==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【擂台争霸】</font>"}):this._oldHeroLv<e&&35==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【试练之塔】</font>"}):this._oldHeroLv<e&&38==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【轮回之地】</font>"}):this._oldHeroLv<e&&39==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【伏魔秘境】</font>"}):this._oldHeroLv<e&&40==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【组队副本】</font>"}):this._oldHeroLv<e&&45==e?this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【世界boss】</font>"}):this._oldHeroLv<e&&55==e&&this.sendNotification("POP_ALERT_INFO",{info:"开启<font color='#21db21'>【每日副本】</font>"}),this._oldHeroLv=e},n.init=function(){0==this.inited&&(this.inited=!0,this.view.barModel.selectHandler=new h(this,this.onModelBar),this.dungeonRender=new _e(this.view.dungeon,this.view.listDungeon,this.view.selectDungeon,this.view.hangingDot),this.cultureRender=new fe(this.view.listCulture,this.view.hangingDot),this.view.icoHead.on("mousedown",this,this.onModuleClick),this.view.moduleItems.on("mousedown",this,this.onModuleClick),this.view.btnAchieve.clickHandler=new h(this,this.onAchieveClick),this.view.paytotal_wx_kf.on("click",this,function(){op.openCustomerServiceConversation("在线客服",{essionFrom:"累计充值",showMessageCard:!1,sendMessageTitle:"累计充值",success:function(){},full:function(){}})}),this.view.spcailDungeon.getChildByName("arenaHead").on("mouseup",this,this.arenaGlobal),this.view.spcailDungeon.getChildByName("ladderHead").on("mouseup",this,this.ladderClick))},n.arenaGlobal=function(e){this.sendNotification("SHOW_GLOBAL_ARENA_PAGE")},n.ladderClick=function(e){this.sendNotification("OPEN_LADDER_VIEW")},n.onAchieveClick=function(){this.sendNotification("SHOW_TASK_PAGE")},n.onModuleClick=function(e){switch(e.target.name){case"icoHead":this.sendNotification("ROLE_VIEW");break;case"btnEquip":this.sendNotification("OPEN_EQUIP_VIEW");break;case"btnPackage":this.sendNotification("OPEN_BAGPACK_VIEW");break;case"btnSmithy":this.sendNotification("OPEN_SMITHY_VIEW");break;case"btnMacket":this.sendNotification("OPEN_MARCKET_VIEW");break;case"btnRolegroup":this.sendNotification("OPEN_ROLEGROUP_VIEW");break;case"btnSetting":this.sendNotification("OPEN_SETTING_VIEW")}},n.onModelBar=function(e){var t=Ng.userVO.getValue(1006);switch(this.view.dungeon.removeSelf(),this.view.listCulture.removeSelf(),this.view.spcailDungeonPl.removeSelf(),this.view.listVisitPl.removeSelf(),this.view.listacthome.removeSelf(),this.view.paytotal_wx_kf.removeSelf(),e){case 0:this.view.addChild(this.view.dungeon);break;case 1:t>=1&&Gc.instance.queryDungeonSp(),t>=1&&yu.instance.query(),this.view.addChild(this.view.spcailDungeonPl);break;case 2:this.view.addChild(this.view.listCulture),op.aldSendEvent("前往练气");break;case 3:this.view.addChild(this.view.listVisitPl);break;case 4:this.view.addChild(this.view.listacthome)}this.sendNotification("GUIDE_HOME_BAR_CLICK",e),this.sendNotification("CHAT_PANEL_SHOW","close")},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="HomeMediator",t.SP_DUNGEON_LIMIT_LEVEL=1,t}(lc),Yp=function(e){function t(){t.__super.call(this)}o(t,"modules.fight.controller.FightPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(xe.FIGHT_OFFLINE_AWARD,Qp,!0),this.facade.registerCommand(xe.FIGHT_PUSH_AWARDS,Jp),this.facade.registerCommand(xe.FIGHT_PUSH_START_CONTEXT,Kp),this.facade.registerCommand(xe.FIGHT_PUSH_REPORTS,qp),this.facade.registerCommand(xe.FIGHT_PUSH_START_CONTEXT_TEAM,$p),this.facade.registerCommand(xe.FIGHT_PUSH_DUNGEON_EXP_AVERAGE,Xp)},t}(rc),qp=function(e){function t(){t.__super.call(this)}o(t,"modules.fight.controller.commands.FightReportCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i,n,o,s=v.protoCodec.getResponseDecoder().decode("FightReportGroup",t.value);switch(s.type){case 0:i=this.facade.retrieveProxy("FightProxy"),o=i.receiveFightReports(s),this.sendNotification("RECEIVE_FIGHT_REPORTS",o);break;case 6:n=this.facade.retrieveProxy("FightTeamProxy"),o=n.receiveFightReports(s),this.sendNotification("RECEIVE_FIGHT_REPORTS_OTHER",o,s.type);break;case 9:n=this.facade.retrieveProxy("FightAlcaProxy"),o=n.receiveFightReports(s),this.sendNotification("RECEIVE_FIGHT_REPORTS_OTHER",o,s.type);break;case 18:n=this.facade.retrieveProxy("FightDungeonDailyProxy"),o=n.receiveFightReports(s),this.sendNotification("RECEIVE_FIGHT_REPORTS_OTHER",o,s.type);break;default:var r=this.facade.retrieveProxy("FightOtherProxy");o=r.receiveFightReports(s,s.type),this.sendNotification("RECEIVE_FIGHT_REPORTS_OTHER",o,s.type)}}},t}(rc),Kp=function(e){function t(){t.__super.call(this)}o(t,"modules.fight.controller.commands.FightStratCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i,n,o=v.protoCodec.getResponseDecoder().decode("FightContext",t.value);switch(o.type){case 0:i=this.facade.retrieveProxy("FightProxy"),n=i.initFightContext(o),this.sendNotification("RECEIVE_FIGHT_CONTEXT",n);break;default:var s=this.facade.retrieveProxy("FightOtherProxy");n=s.initFightContext(o,o.type),this.sendNotification("RECEIVE_FIGHT_CONTEXT_OTHER",n,o.type)}}},t}(rc),Xp=function(e){function t(){t.__super.call(this)}o(t,"modules.fight.controller.commands.FightExpAverageCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decodeLong(t.value).toNumber(!1);this.sendNotification("RECEIVE_DUNGEON_EXP_AVERAGE",i)}},t}(rc),Qp=function(e){function t(){t.__super.call(this)}o(t,"modules.fight.controller.commands.OfflineAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=(this.facade.retrieveProxy("FightProxy"),Te.value(i));this.sendNotification("RECEIVE_OFFLINE_AWARDS",n)}else{var o;if(-10==t.status){var s=Ng.userVO.getValue(1017);0==s||-2==s?(this.sendNotification("prompted_info_show",{info:"当前实名信息：未认证<br>据《关于防止未成年人沉迷网络游戏的通知》规定：请实名认证后再进行游戏。"}),this.sendNotification("OPEN_ADULT_IDENTIFY",!0)):-1==s?this.sendNotification("POP_ALERT_INFO",{info:"防沉迷限制，实名认证审核中，请稍后再试。"},"timelimit"):this.sendNotification("POP_ALERT_INFO",{info:"当前实名信息：未成年<br>根据《关于防止未成年人沉迷网络游戏的通知》规定：玩家可在周五、周六、周日的20时至21时游戏1小时。"},"timelimit")}else-8==t.status&&(o="<br>当前实名认证信息：未成年<br>根据国家《关于防止未成年人沉迷网络游戏的通知》规定:<br>&nbsp;&nbsp;1、未成年人（未满18周岁）玩家可在周五、周六、周日的20时至21时游戏1小时。<br>&nbsp;&nbsp;当前时段限制游戏。<br>",this.sendNotification("POP_ALERT_INFO",{info:o,title:"实名认证提示",align:"left"},"timelimit"),Ts.removeItem("session_key"),Ts.removeItem("_sever_selectd"),Ts.setItem("_check_selectd","false"))}},t}(rc),jp=function(e){function t(){this._selectPop=null,this._voSelf=null,this._voEnemy=null,this._hasPower=!1,this._roudElite=0,this._beginFightTime=0,this._endFightTime=0,this.memberRender=new h(this,this.onMemeberRender),t.__super.call(this,"AlcaFightMediator")}o(t,"modules.alca.view.AlcaFightMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new ZN),this._selectPop=new JN,this._selectPop.groupE.renderHandler=new h(this,this.onRenderEn4Select),this._selectPop.groupE.mouseEnabled=!0,this._selectPop.groupE.mouseHandler=new h(this,this.onAttackClick),this.view.eliteM.dataSource=100,this.view.groupM.dataSource=be.GROUP_SIMPLE,this.view.eliteM.on("click",this,this.onClickTeam),this.view.eliteE.dataSource=100,this.view.groupE.dataSource=be.GROUP_SIMPLE_BACKWORD,this.view.groupM.renderHandler=new h(this,this.onRenderMe),this.view.groupE.renderHandler=new h(this,this.onRenderEn),this.view.groupM.mouseEnabled=!0,this.view.groupM.mouseHandler=new h(this,this.onClickTeam),this.view.groupE.mouseEnabled=!0,this.view.groupE.mouseHandler=new h(this,this.onClickTeam),this.view.btnNtc.clickHandler=new h(this,this.onNtc),this.view.eliteM.visible=!1,this.view.groupM.visible=!1,this.view.eliteE.visible=!1,this.view.groupE.visible=!1,this.view.eliteLb.text="",this.view.eliteClock.text="",this.view.closeHandler=new h(this,this.onClosePg),this.view.grpSelf.x=this.view.grpEnemy.x,this.view.bar.selectHandler=new h(this,this.onBar),this.onBar(0)},n.onBar=function(e){switch(e){case 0:this.view.grpSelf.visible=!0,this.view.grpEnemy.visible=!1;break;case 1:this.view.grpSelf.visible=!1,this.view.grpEnemy.visible=!0}},n.onClosePg=function(){this.sendNotification("SHOW_HIDE_HEAD_BAR",!0,"alca")},n.listNotificationInterests=function(){return["OPEN_ALCA_FIGHT_PAGE","RECIVE_ALLIANCE_ARENA","RECIVE_ALCA_ENEMY","RECIVE_ALC_MEMBER_LIST","RECIVE_ALC_LOOK_MEMEBERS","CLEAR_CACHE_DATA"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_ALCA_FIGHT_PAGE":0==this.view.isPopup&&(this.view.popup(),i.timer.loop(1e3,this,this.onClock),this.sendNotification("SHOW_HIDE_HEAD_BAR",!1,"alca"));break;case"RECIVE_ALLIANCE_ARENA":this._voSelf=e.getBody(),this.freshTitle(),this.view.scoreM.text="我方积分"+this._voSelf.score,this.onRenderMe(this.view.eliteM,0),this.view.groupM.refresh();break;case"RECIVE_ALCA_ENEMY":this._voEnemy=e.getBody(),this.freshTitle(),this.view.scoreE.text="敌方积分"+this._voEnemy.score,this.onRenderEn(this.view.eliteE,0),this.view.groupE.refresh();break;case"RECIVE_ALC_MEMBER_LIST":this.view.eliteM.visible=!0,this.view.groupM.visible=!0,this.onRenderMe(this.view.eliteM,0),this.view.groupM.refresh();break;case"RECIVE_ALC_LOOK_MEMEBERS":this.view.eliteE.visible=!0,this.view.groupE.visible=!0,this.onRenderEn(this.view.eliteE,0),this.view.groupE.refresh();break;case"CLEAR_CACHE_DATA":this._roudElite=0,this._beginFightTime=0,this._endFightTime=0,i.timer.clear(this,this.onClock)}},n.freshTitle=function(){null!=this._voSelf&&0!=this._voSelf.inited()&&null!=this._voEnemy&&0!=this._voEnemy.inited()&&(this.view.txtTitle.text="《"+this._voEnemy.enemyName+"》 对战 《"+this._voSelf.enemyName+"》")},n.onMemeberRender=function(e,t){var i,n=e.dataSource,o=e.getChildByName("nature");n&&n.playerId>0?(i=e.getChildByName("name"),i.text=n.name,Ng.userVO.unitId.id==n.playerId?i.color="#00dc24":i.color="#0084ff",o.index=n.nature-1,o.x=i.x+i.width,i=e.getChildByName("level"),i.text=n.level+"级",i.x=o.x+o.width):(i=e.getChildByName("name"),i.text="未上阵",i.color="#b0bcb0",o.index=-1,i=e.getChildByName("level"),i.text="",i.x=o.x+o.width)},n.onClickTeam=function(e,t){if("click"==e.type){var i=e.target.parent,n=i.dataSource;switch(e.target.name){case"btnVideo":this.sendNotification("OPEN_ALCA_VIDEO_PAGE",n);break;case"btnAttack":this._popSelect(n);break;case"btnAttackFast":var o=this._voSelf.getTeamId(Ng.userVO.unitId.id);o>0&&this._attack(o,n)}}},n._popSelect=function(e){this.selectPop.teamM.dataSource=e,this.onRenderMe(this.selectPop.teamM,0),this.selectPop.groupE.dataSource=be.GROUP_DEFENSE,this.selectPop.popup()},n._renderSimple=function(e,t,i){if(i){var n=e.getChildByName("btnAttack"),o=e.getChildByName("btnAttackFast");o&&(o.visible=!1),n&&(n.label="出击");var s=e.getChildByName("tName");s.text=i.teamName,s.color=be.getTeamColor(i.teamId);var r=!1;s=e.getChildByName("tStat");var a=0;if(100==i.teamId)switch(a=t.eliteState){case 3:s.text="一比一",s.color="#fffc00";break;case-1:s.text="败一",s.color="#fffc00";break;case-2:s.text="失败",s.color="#e70626",r=!0;break;case 1:s.text="胜一",s.color="#fffc00";break;case 2:s.text="获胜",s.color="#00dc24";break;default:s.text=""}else if(a=t.getTime(i.teamId),i.teamId<300)a>0?(s.text="胜利",s.color="#00dc24",n&&(n.visible=!1)):-1==a?(s.text="败一",s.color="#fffc00",n&&(n.visible=!0)):-2==a?(s.text="失败",s.color="#e70626",n&&(n.visible=!1),r=!0):(s.text="",n&&(n.visible=!0)),i.teamId!=t.getTeamId(Ng.userVO.unitId.id)&&n&&(this._hasPower?n.label="强攻":n.visible=!1);else if(a>0?(s.text="守"+a,s.color="#00dc24"):0>a?(s.text="失败",s.color="#e70626",r=!0):s.text="",n&&(n.visible=!1),!r&&o&&this._voSelf){var l=this._voSelf.getTeamId(Ng.userVO.unitId.id);l>=200&&300>l&&(l=this._voSelf.getTime(l),-2==l||l>0||(o.visible=!0))}s=e.getChildByName("tDrug");var h,c=0;for(var u in i.mids)h=i.mids[u],h>0&&(c+=t.hasDrug(h));s.text="鼓舞+"+c,0>=c?(s.text="未鼓舞",s.color="#b0bcb0"):c>=15?s.color="#c527ff":s.color="#fffc00";var d=e.getChildByName("member");null==d.renderHandler&&(d.renderHandler=this.memberRender),d.dataSource=i.members,d.gray=r}},n.onRenderMe=function(e,t){var i=this.facade.retrieveProxy("AlcaProxy");if(i&&i.selfAlca&&i.selfAlca.inited()){if(this._hasPower=!1,i.selfAlca.authorizeLine==Ng.userVO.unitId.id)this._hasPower=!0;else{var n=i.selfAlca.getMemeberInfo(Ng.userVO.unitId.id);n&&n.title==Et.MASTER.ordinal&&(this._hasPower=!0)}var o=i.selfAlca,s=e.dataSource,r=o.getDetail(s);this._renderSimple(e,o,r)}},n.onRenderEn=function(e,t){var i=this.facade.retrieveProxy("AlcaProxy");if(i){var n=i.enemyAlca,o=e.dataSource,s=n.getDetail(o);this._renderSimple(e,n,s)}},n.onRenderEn4Select=function(e,t){var i=this.facade.retrieveProxy("AlcaProxy");if(i){var n=i.enemyAlca,o=e.dataSource,s=n.getDetail(o);this._renderSimple(e,n,s);var r=e.getChildByName("btnAttack");if(s&&r){var a=n.getTime(o);0>a?r.visible=!1:r.visible=!0}}},n.onAttackClick=function(e,t){if("click"==e.type&&"btnAttack"==e.target.name){var i=this.selectPop.teamM.dataSource,n=this.selectPop.groupE.getCell(t).dataSource;this._voSelf&&i!=this._voSelf.getTeamId(Ng.userVO.unitId.id)?this._hasPower?this._attackForce(i,n):this.sendNotification("prompted_info_show",{info:"没有强攻权限"}):this._attack(i,n),this.selectPop.close()}},n._attack=function(e,t){this.sendNotification("POP_CONFIRM_INFO",{info:"每组只有两次尝试进攻的机会，确认进攻?",handler:h.create(this,function(i){i&&_c.instance.attack(e,t)})})},n._attackForce=function(e,t){return be.canForceAttack()?void this.sendNotification("POP_CONFIRM_INFO",{info:"每组只有两次尝试进攻的机会，确认进攻?",handler:h.create(this,function(i){i&&_c.instance.attackForce(e,t)})}):void this.sendNotification("prompted_info_show",{info:"周末13点后才可进行强攻"})},n.onNtc=function(){this.sendNotification("POP_FUN_NOTICE",13,"fight")},n.onClock=function(){if(this.view.isPopup){var e=this.facade.retrieveProxy("AlcaProxy");if(e&&e.selfAlca.inited()){this._endFightTime<=0&&(this._endFightTime=be.getFightEndTs());var t=e.selfAlca.eliteState;this.view.eliteLb.changeText("精英组下轮"),0==t?(1!=this._roudElite&&(this._roudElite=1,this._beginFightTime=be.getEliteBeginTs(this._roudElite)),this.view.eliteClock.changeText(ro.clockBackTime(this._beginFightTime))):3==t?(3!=this._roudElite&&(this._roudElite=3,this._beginFightTime=be.getEliteBeginTs(this._roudElite)),this.view.eliteClock.changeText(ro.clockBackTime(this._beginFightTime))):-1==t||1==t?(2!=this._roudElite&&(this._roudElite=2,this._beginFightTime=be.getEliteBeginTs(this._roudElite)),this.view.eliteClock.changeText(ro.clockBackTime(this._beginFightTime))):(this.view.eliteLb.changeText("结束倒计时"),this.view.eliteClock.changeText(ro.clockBackTime(this._endFightTime)),"00:00:01"==this.view.eliteClock.text&&this.view.eliteClock.changeText("已结束(15点30分结算奖励)"))}}},s(0,n,"selectPop",function(){return this.getViewComponent(),this._selectPop}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="AlcaFightMediator",t}(lc),Zp=function(e){function t(){this._selectView=null,this._hasPower=!1,this._state=0,this._beginFightTime=0,this._endLineTime=0,this.memberMouse=new h(this,this.onMouse),this.memberRender=new h(this,this.onMemeberRender),t.__super.call(this,"AlcaLineupMediator")}o(t,"modules.alca.view.AlcaLineupMediator",e);var r=t.prototype;return r.initViewComponent=function(){this.setViewComponent(new XN),this.view.tbSide.selectHandler=new h(this,this.freshInfo),this.view.groupElite.dataSource=100,this.view.groups.dataSource=be.GROUP_SIMPLE,this.view.groups.renderHandler=new h(this,this.onGroupRender),i.timer.loop(1e3,this,this.onClock),this._selectView=new KN,this._selectView.list.mouseEnabled=!0,this._selectView.list.mouseHandler=new h(this,this.onSelect),this.view.btnDrug.clickHandler=new h(this,this.onDrug),this.view.btnNtc.clickHandler=new h(this,this.onNtc)},r.listNotificationInterests=function(){return["OPEN_ALCA_LINEUP_PAGE","RECIVE_ALLIANCE_ARENA","RECIVE_ALCA_ENEMY","RECIVE_ALCA_TEAM_CHG","RECIVE_ALC_MEMBER_LIST","RECIVE_ALC_LOOK_MEMEBERS","CLEAR_CACHE_DATA"]},r.handleNotification=function(e){switch(e.getName()){case"OPEN_ALCA_LINEUP_PAGE":0==this.view.isPopup&&(this.view.popup(),1==this.view.tbSide.selectedIndex&&_c.instance.queryEnemy(),this.freshInfo(this.view.tbSide.selectedIndex));break;case"RECIVE_ALCA_TEAM_CHG":case"RECIVE_ALC_MEMBER_LIST":case"RECIVE_ALLIANCE_ARENA":this.view.isPopup&&0==this.view.tbSide.selectedIndex&&this.freshInfo(0);break;case"RECIVE_ALC_LOOK_MEMEBERS":if(this.selectView.isPopup){var t=this.facade.retrieveProxy("AlcaProxy");t&&t.selfAlca||this.selectView.showMembers(t.selfAlca,this.selectView._teamId,this._selectView._pos)}break;case"RECIVE_ALCA_ENEMY":this.view.isPopup&&1==this.view.tbSide.selectedIndex&&this.freshInfo(1),this.freshTitle();break;case"CLEAR_CACHE_DATA":this._state=0,this._beginFightTime=0,this._endLineTime=0}},r.freshTitle=function(){var e=this.facade.retrieveProxy("AlcaProxy");if(e){if(null==e.selfAlca||0==e.selfAlca.inited()||null==e.enemyAlca||0==e.enemyAlca.inited())return;this.view.txtTitle.text="《"+e.enemyAlca.enemyName+"》 对战 《"+e.selfAlca.enemyName+"》"}else this.view.txtTitle.text=""},r.freshInfo=function(e){
void 0===e&&(e=0);var i=this.facade.retrieveProxy("AlcaProxy");if(i&&i.selfAlca&&i.selfAlca.inited()){if(this._hasPower=!1,i.selfAlca.authorizeLine==Ng.userVO.unitId.id)this._hasPower=!0;else{var n=i.selfAlca.getMemeberInfo(Ng.userVO.unitId.id);n&&n.title==Et.MASTER.ordinal&&(this._hasPower=!0)}this.onGroupRender(this.view.groupElite,0),this.view.groups.refresh();var o=i.selfAlca.hasDrug(Ng.userVO.unitId.id);o>0?this.view.myDrug.text="我的鼓舞："+o+"级（四维属性+"+o+"%）":this.view.myDrug.text="我的鼓舞：0级",this.view.myDrug.color=N.getColor(o+1),this.view.btnDrug.visible=o<t.DRUG_COST_GOLD.length}},r.onGroupRender=function(e,t){var i=this.facade.retrieveProxy("AlcaProxy");if(i){var n=null,o=e.dataSource,s=e.getChildByName("tDrug");switch(this.view.tbSide.selectedIndex){case 0:n=i.selfAlca,s.visible=!0;break;case 1:n=i.enemyAlca,s.visible=!1}var r=n.getDetail(o);if(r){var a=e.getChildByName("tName");a.text=r.teamName,a.color=be.getTeamColor(o);var l=e.getChildByName("tMember");if(l.renderHandler=this.memberRender,l.dataSource=r.members,l.mouseHandler=this.memberMouse,s.visible){var h,c=0;for(var u in r.mids)h=r.mids[u],h>0&&(c+=n.hasDrug(h));s.text="鼓舞+"+c,0>=c?(s.text="未鼓舞",s.color="#b0bcb0"):c>=15?s.color="#c527ff":s.color="#fffc00"}e.visible=!0}else e.visible=!1}},r.onMemeberRender=function(e,t){var i,n=be.isLineUpTime(),o=e.dataSource,s=e.getChildByName("nature"),r=e.getChildByName("btnJoin");o&&o.playerId>0?(i=e.getChildByName("name"),0==this.view.tbSide.selectedIndex?(i.text=o.name,Ng.userVO.unitId.id==o.playerId?i.color="#00dc24":i.color="#0084ff"):(n?i.text="***":i.text=o.name,i.color="#e70626"),s.index=o.nature-1,s.x=i.x+i.width,i=e.getChildByName("level"),i.text=o.level+"级",i.x=s.x+s.width,r.label="下阵",i.visible=!n||0==this.view.tbSide.selectedIndex):(i=e.getChildByName("name"),i.text="未上阵",i.color="#b0bcb0",s.index=-1,i=e.getChildByName("level"),i.text="",i.x=s.x+s.width,r.label="上阵"),n&&0==this.view.tbSide.selectedIndex?r.visible=this._hasPower:r.visible=!1},r.onMouse=function(e,t){if("click"==e.type&&"btnJoin"==e.target.name){var i=e.target.parent,n=i.dataSource;if(n&&n.playerId>0)_c.instance.lineoff(n.playerId);else{var o=this.facade.retrieveProxy("AlcaProxy");if(!o)return;var s=e.target.parent.parent.parent.parent;this.selectView.popup(),this.selectView.showMembers(o.selfAlca,s.dataSource,t)}}},r.onSelect=function(e,t){if("click"==e.type&&"btnJoin"==e.target.name){var i=this.selectView.list.getCell(t).dataSource;i&&(_c.instance.lineup(i.playerId,this.selectView._teamId,this.selectView._pos),this.selectView.close())}},r.onDrug=function(){var e=this.facade.retrieveProxy("AlcaProxy");if(e){var i=e.selfAlca.hasDrug(Ng.userVO.unitId.id);if(!(0>i||i>=t.DRUG_COST_GOLD.length)){var n=0,o=0,s=t.DRUG_COST_GOLD[i];if(0>s){if(n=-s,Ng.userVO.getValue(1009)<n)return void this.sendNotification("prompted_info_show",{info:"鼓舞失败，您的铜币不足"+n});this.sendNotification("POP_CONFIRM_INFO",{info:"确认花费"+n+"铜币,鼓舞士气吗?",handler:h.create(this,function(e){e&&_c.instance.eatDrug()})})}else{if(o=s,Ng.userVO.getValue(1010)<o)return void this.sendNotification("prompted_info_show",{info:"鼓舞失败，您的元宝不足"+o});this.sendNotification("POP_CONFIRM_INFO",{info:"确认花费"+o+"元宝,鼓舞士气吗?",handler:h.create(this,function(e){e&&(_c.instance.eatDrug(),k.goldenCost("鼓舞士气",1,o))})})}}}},r.onClock=function(){this.view.isPopup&&(this._endLineTime<=0&&(this._endLineTime=be.getLineupEndTs()),this._beginFightTime<=0&&(this._beginFightTime=be.getFightBeginTs()),g.clock.currentTime<this._endLineTime?(1!=this._state&&(this._state=1,this.freshInfo(this.view.tbSide.selectedIndex)),this.view.lbClock.changeText("布阵截止倒计时："),this.view.bClock.changeText(ro.clockBackTime(this._endLineTime))):(2!=this._state&&(this._state=2,this.freshInfo(this.view.tbSide.selectedIndex)),this.view.btnDrug.visible=!1,this.view.lbClock.changeText("开战倒计时："),this.view.bClock.changeText(ro.clockBackTime(this._beginFightTime)),"00:00:01"==this.view.bClock.text&&this.view.close()))},r.onNtc=function(){this.sendNotification("POP_FUN_NOTICE",13,"lineup")},s(0,r,"selectView",function(){return this.getViewComponent(),this._selectView}),s(0,r,"view",function(){return this.getViewComponent()}),t.NAME="AlcaLineupMediator",n(t,["DRUG_COST_GOLD",function(){return this.DRUG_COST_GOLD=[-1e5,10,10,15,20]}]),t}(lc),Jp=function(e){function t(){t.__super.call(this)}o(t,"modules.fight.controller.commands.FightAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=n=Te.value(i);switch(i.type){case 0:this.sendNotification("RECEIVE_FIGHT_AWARDS",n);break;case 6:this.sendNotification("RECEIVE_FIGHT_AWARDS_OTHER",n,i.type),this.dealMemberTimes();break;case 11:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"采集成功",awards:n,desc:""});break;case 12:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"每日礼包",awards:n,desc:""});break;case 14:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"领取宗门宝箱",awards:n,desc:""});break;case 8:Wc.instance.listAround(),this.sendNotification("RECEIVE_FIGHT_AWARDS_OTHER",n,i.type);break;default:this.sendNotification("RECEIVE_FIGHT_AWARDS_OTHER",n,i.type)}}},i.dealMemberTimes=function(){var e=this.facade.retrieveProxy("TeamProxy");e.reduceMembertimes(),this.sendNotification("RECEIVE_TEAM_MEMBER_INFO")},t}(rc),$p=function(e){function t(){t.__super.call(this)}o(t,"modules.fight.controller.commands.FightStartTeamCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i,n,o=v.protoCodec.getResponseDecoder().decode("FightContextTeam",t.value);switch(o.type){case 6:i=this.facade.retrieveProxy("FightTeamProxy"),n=i.initFightContext(o),this.sendNotification("RECEIVE_FIGHT_CONTEXT_OTHER",n,o.type);break;case 9:i=this.facade.retrieveProxy("FightAlcaProxy"),n=i.initFightContext(o),this.sendNotification("RECEIVE_FIGHT_CONTEXT_OTHER",n,o.type);break;case 18:i=this.facade.retrieveProxy("FightDungeonDailyProxy"),n=i.initFightContext(o),this.sendNotification("RECEIVE_FIGHT_CONTEXT_OTHER",n,o.type);break;default:console.log("team_fight_not_proxy")}}},t}(rc),ef=function(e){function t(){this.hangContext=null,t.__super.call(this,"FightProxy"),this.hangContext=new Pc}o(t,"modules.fight.model.FightProxy",e);var i=t.prototype;return i.initFightContext=function(e){this.hangContext.fightingTime=e.fightingTime;var t=e.active;return this.hangContext.fighterA.setTo(t.id.id,t.id.type),this.hangContext.fighterA.update(t.attributes.keys,t.attributes.values),t=e.target,t&&(this.hangContext.fighterB.setTo(t.id.id,t.id.type),this.hangContext.fighterB.update(t.attributes.keys,t.attributes.values)),this.hangContext},i.receiveFightReports=function(e){this.hangContext.fightingTime=e.fightingTime;var t,i=[];for(var n in e.list){t=e.list[n];var o=Ac.buildOne();o.update(t),i.push(o)}return i},t.NAME="FightProxy",t}(sc),tf=function(e){function t(){t.__super.call(this,"FightTeamProxy",new Nc)}o(t,"modules.fight.model.FightTeamProxy",e);var i=t.prototype;return i.initFightContext=function(e){return this.context.fightingTime=e.fightingTime,this.context.grpA.updateAnimal(e.actives),this.context.grpB.updateAnimal(e.targets),this.context},i.receiveFightReports=function(e){this.context.fightingTime=e.fightingTime;var t,i=[];for(var n in e.list){t=e.list[n];var o=Lc.buildOne();o.update(t),i.push(o)}return i},s(0,i,"context",function(){return this.data}),t.NAME="FightTeamProxy",t}(sc),nf=function(e){function t(){this.contextDic=null,t.__super.call(this,"FightOtherProxy"),this.contextDic=new uo}o(t,"modules.fight.model.FightOtherProxy",e);var i=t.prototype;return i.initFightContext=function(e,t){var i=this.getContext(t);i.fightingTime=e.fightingTime;var n=e.active;return i.fighterA.setTo(n.id.id,n.id.type),i.fighterA.update(n.attributes.keys,n.attributes.values),n=e.target,n&&(i.fighterB.setTo(n.id.id,n.id.type),i.fighterB.update(n.attributes.keys,n.attributes.values)),i},i.receiveFightReports=function(e,t){var i=this.getContext(t);i.fightingTime=e.fightingTime;var n,o=[];for(var s in e.list){n=e.list[s];var r=Ac.buildOne();r.update(n),o.push(r)}return o},i.getContext=function(e){var t=this.contextDic.get(e);return null==t&&(t=new Pc,this.contextDic.set(e,t)),t},t.NAME="FightOtherProxy",t}(sc),of=function(e){function t(){t.__super.call(this,"AlcaVideoMediator")}o(t,"modules.alca.view.AlcaVideoMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new $N),this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onClick)},i.listNotificationInterests=function(){return["OPEN_ALCA_VIDEO_PAGE","RECEIVE_ALCA_VIDEO_LOGS","RECEIVE_ALCA_VIDEO_DETAIL"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALCA_VIDEO_PAGE":var t=e.getBody();this.view.team.text=be.getTeamName(t),this.view.team.color=be.getTeamColor(t),this.view.popup(),this.view.lbEmpty.visible=!1,this.view.list.visible=!1,_c.instance.listVD(t);break;case"RECEIVE_ALCA_VIDEO_LOGS":null==e.getBody()||0==e.getBody().length?(this.view.lbEmpty.visible=!0,this.view.list.visible=!1):(this.view.lbEmpty.visible=!1,this.view.list.visible=!0,this.view.list.dataSource=e.getBody());break;case"RECEIVE_ALCA_VIDEO_DETAIL":}},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("ts");n.text=ro.parseSimple(i.date),n=e.getChildByName("info"),i.getInfo(n)},i.onClick=function(e,t){if("click"==e.type&&"btnPlay"==e.target.name){var i=this.view.list.getCell(t).dataSource;_c.instance.lookVD(i.videoId)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcaVideoMediator",t}(lc),sf=function(e){function t(){this._lineupAutorSelect=null,this._awardLogsPop=null,this._init=!1,this._lastTimeStamp=0,this._clockState="",t.__super.call(this,"AlcaMediator")}o(t,"modules.alca.view.AlcaMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new jN),this._lineupAutorSelect=new tP,this._lineupAutorSelect.list.mouseEnabled=!0,this._lineupAutorSelect.list.mouseHandler=new h(this,this.onAutorize),this._lineupAutorSelect.btnClear.clickHandler=new h(this,this.onAutorClear),this._awardLogsPop=new QN,this.view.txtAuthorizer.visible=!1,this.view.btnAuthorize.visible=!1,this.view.btnSign.clickHandler=new h(this,this.onClick),this.view.btnSign.visible=!1,this.view.on("click",this,this.onTest),this.view.btnNtc.clickHandler=new h(this,this.onNtc),i.timer.loop(3e4,this,this.onClock)},n.onAutorClear=function(){_c.instance.authorzeLineup(0),this.lineupAutorSelect.close()},n.onAutorize=function(e,t){if("click"==e.type&&"btnJoin"==e.target.name){var i=this.lineupAutorSelect.list.getCell(t).dataSource;i&&_c.instance.authorzeLineup(i.playerId),this.lineupAutorSelect.close()}},n.onTest=function(e){switch(e.target.name){case"btnLastLogs":_c.instance.listAwardLogs();break;case"btnAuthorize":var t=this.facade.retrieveProxy("AlcaProxy"),i=t.selfAlca;this.lineupAutorSelect.showMembers(i),this.lineupAutorSelect.popup();break;case"btnTakeExt":_c.instance.takeExtAward()}},n.onRegister=function(){this.facade.registerMediator(new Zp),this.facade.registerMediator(new jp),this.facade.registerMediator(new of)},n.listNotificationInterests=function(){return["OPEN_ALCA_PAGE","RECIVE_ALLIANCE_ARENA","RECEIVE_ALCA_AWARD_LOGS","RECIVE_PLAYER_ALLIANCE","RECIVE_ALC_MEMBER_LIST","RECIVE_ALC_LOOK_MEMEBERS","CLEAR_CACHE_DATA"]},n.handleNotification=function(e){var t=this.facade.retrieveProxy("AlcaProxy"),i=t.selfAlca;switch(e.getName()){case"CLEAR_CACHE_DATA":this._lastTimeStamp=0,this._init=!1,t.selfAlca.clear(),t.enemyAlca.clear();break;case"OPEN_ALCA_PAGE":var n=ro.newDate(Ng.userVO.getValue(19004)),o=ro.dateDiff(ro.newDate(g.clock.currentTime),n);if(7>o)return void this.sendNotification("prompted_info_show",{info:"宗门战开服7天后开启"});this._clockState="",this._init||(this._init=!0,kc.instance.listMembers(1),_c.instance.query()),i&&i.inited()?(this.freshData(i),this.freshAutorLine(i),this.freshExtAward(i)):(this.view.lbInfo.text="",this.view.btnSign.visible=!1,this.view.btnTakeExt.visible=!1,this.view.lbExt.visible=!1,this.view.isPopup||this.view.popup());break;case"RECIVE_ALLIANCE_ARENA":"init"==e.getType()&&i.enemyId>0&&(_c.instance.queryEnemy(),kc.instance.lookMembers(i.enemyId)),this.view.isPopup&&(this.freshData(i),this.freshAutorLine(i),this.freshExtAward(i));break;case"RECIVE_ALC_MEMBER_LIST":i.receiveMembers(e.getBody()),this.freshAutorLine(i);break;case"RECIVE_ALC_LOOK_MEMEBERS":t.enemyAlca.receiveMembers(e.getBody());break;case"RECEIVE_ALCA_AWARD_LOGS":this.awardLogsPop.popLogs(e.getBody());break;case"RECIVE_PLAYER_ALLIANCE":this.freshExtAward(i)}},n.freshExtAward=function(e){if(e&&e.inited()){var t=this.facade.retrieveProxy("AllianceProxy");if(e.lastAwardTime<=0)return this.view.btnTakeExt.visible=!1,void(this.view.lbExt.visible=!1);var i="特殊奖励：【密阁之钥】";e.lastAwardTime%10==1?(i+="5个(胜）",this.view.lbExt.color="#00dc24"):(i+="2个(败）",this.view.lbExt.color="#e70626"),this.view.lbExt.text=i,this.view.lbExt.visible=!0,e.lastAwardTime>t.playerAlliance.extAwardTime?e.lastAwardTime<t.playerAlliance.joinTime?(this.view.btnTakeExt.label="本次奖励不可领",this.view.btnTakeExt.labelColors="#b0bcb0",this.view.btnTakeExt.mouseEnabled=!1):(this.view.btnTakeExt.label="领取特殊奖励",this.view.btnTakeExt.labelColors="#00dc24",this.view.btnTakeExt.mouseEnabled=!0):(this.view.btnTakeExt.label="特殊奖励已领取",this.view.btnTakeExt.labelColors="#b0bcb0",this.view.btnTakeExt.mouseEnabled=!1),this.view.btnTakeExt.visible=!0}},n.freshAutorLine=function(e){if(!e||!e.inited())return this.view.txtAuthorizer.visible=!1,void(this.view.btnAuthorize.visible=!1);var t=e.getMemeberInfo(Ng.userVO.unitId.id);t&&t.title==Et.MASTER.ordinal?(e.authorizeLine>0?(t=e.getMemeberInfo(e.authorizeLine),t?this.view.txtAuthorizer.text="布阵授权："+t.name:this.view.txtAuthorizer.text="布阵授权："+e.authorizeLine,this.view.txtAuthorizer.color="#0084ff"):(this.view.txtAuthorizer.text="布阵授权：无",this.view.txtAuthorizer.color="#ffffff"),this.view.txtAuthorizer.visible=!0,this.view.btnAuthorize.visible=!0):(this.view.txtAuthorizer.visible=!1,this.view.btnAuthorize.visible=!1)},n.freshData=function(e){return e&&e.inited()?-1!=e.enemyId||be.isSignUpTime()?void(be.isSignUpTime()?(this.view.showSignup(e.signDate>0),this._lastTimeStamp=1):e.signDate<=0?(2!=this._lastTimeStamp&&_c.instance.query(),this._lastTimeStamp=2,be.fightOver()&&e.signDate<0?g.clock.currentTime+e.signDate>432e5?this.view.showSignOuttime():this.view.showFightOver(e):this.view.showSignOuttime()):be.waitLineup()?(this._lastTimeStamp=3,this.view.showSignup(e.signDate>0)):be.isLineUpTime()?(4!=this._lastTimeStamp&&_c.instance.query(),this._lastTimeStamp=4,e.enemyId<=0?this.view.showRollEmpty():(this.view.showLineup(),"OPEN_ALCA_LINEUP_PAGE"!=this._clockState&&(this._clockState="OPEN_ALCA_LINEUP_PAGE",this.sendNotification("OPEN_ALCA_LINEUP_PAGE")))):be.waitFight()?(this._lastTimeStamp=5,this.view.showWaitFight()):be.isFightTime()?(this._lastTimeStamp=6,e.enemyId<=0?this.view.showRollEmpty():(this.view.showFighting(),"OPEN_ALCA_FIGHT_PAGE"!=this._clockState&&(this._clockState="OPEN_ALCA_FIGHT_PAGE",this.sendNotification("OPEN_ALCA_FIGHT_PAGE")))):be.fightOver()?(this._lastTimeStamp=7,e.enemyId<=0?this.view.showRollEmpty():this.view.showFightOver(e)):(this._lastTimeStamp=0,console.log("宗门战日期异常.."))):void this.view.showGameDelay():void 0},n.onClock=function(){if(this.view.isPopup){var e=this.facade.retrieveProxy("AlcaProxy"),t=e.selfAlca;this.freshData(t)}},n.onClick=function(){be.isSignUpTime()?_c.instance.signup():be.isLineUpTime()||be.waitFight()?this.sendNotification("OPEN_ALCA_LINEUP_PAGE"):(be.isFightTime()||be.fightOver())&&this.sendNotification("OPEN_ALCA_FIGHT_PAGE")},n.onNtc=function(){this.sendNotification("POP_FUN_NOTICE",13,"sign")},s(0,n,"awardLogsPop",function(){return this.getViewComponent(),this._awardLogsPop}),s(0,n,"lineupAutorSelect",function(){return this.getViewComponent(),this._lineupAutorSelect}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="AlcaMediator",t}(lc),rf=function(e){function t(){this.context=null,this._fightingAwardsPop=null,t.__super.call(this,"FightTeamMediator")}o(t,"modules.fight.view.FightTeamMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new rP),this._fightingAwardsPop=new _P,this.view.btnAward.clickHandler=new h(this,this.onAwards)},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(6==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":var t=e.getBody();this.view.txtName.text=t.name,this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear(),this.context=e.getBody(),this.view.initFightStart(this.context),this.checkTargetDead();break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody()),this.checkTargetDead();break;case"RECEIVE_FIGHT_AWARDS_OTHER":e.getBody();this.view.receiveFightAwards(e.getBody()),this.fightingAwardsPop.receiveFightAwards(e.getBody())}},i.checkTargetDead=function(){},i.onAwards=function(){this.fightingAwardsPop.popup()},s(0,i,"fightingAwardsPop",function(){return this.getViewComponent(),this._fightingAwardsPop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightTeamMediator",t}(lc),af=function(e){function t(){this.context=null,this._fightingEnd=0,t.__super.call(this,"FightArenaMediator")}o(t,"modules.fight.view.FightArenaMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="擂台挑战",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(5==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear(),this.context=e.getBody(),this.context.fighterA.hpPages=1,this.context.fighterB.hpPages=1,this.view.initFightStart(this.context);break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody()),this.context&&this.context.fighterA.isDead()?(this.sendNotification("FIGHT_ARENA_GLOBAL_FAIL"),this._fightingEnd=0):this._fightingEnd=g.clock.currentTime+1e4;break;case"RECEIVE_FIGHT_AWARDS_OTHER":var t=e.getBody();this.view.receiveFightAwards(t),yu.instance.queryGlobalInfo(),this._fightingEnd=g.clock.currentTime+3e3}},i.isFighting=function(){return this._fightingEnd>g.clock.currentTime},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightArenaMediator",t}(lc),lf=function(e){function t(){t.__super.call(this,"FightAllianceMediator")}o(t,"modules.fight.view.FightAllianceMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(3)),this.view.txtName.text="任务战斗",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(7==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear();var t=e.getBody();t.fighterA.hpPages=1,t.fighterB.hpPages=1,this.view.initFightStart(t);break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody());break;case"RECEIVE_FIGHT_AWARDS_OTHER":var i=e.getBody();i.gold>0?this.view.appendReport("<font color='#00ff00'>获得资源+"+i.gold+"&nbsp;贡献+"+i.gold+"</font>",!0,!0):this.view.appendReport("<font color='#00ff00'>获得贡献+"+-i.gold+"</font>",!0,!0),this.view.receiveFightAwards(i)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightAllianceMediator",t}(lc),hf=function(e){function t(){this._fightingAwardsPop=null,this.t=0,this.globalBossInfo=null,this.vip=null,this.timespan=new ao(0),t.__super.call(this,"FightMediator")}o(t,"modules.fight.view.FightMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN),this._fightingAwardsPop=new _P,this.view.btnAward.clickHandler=new h(this,this.onAwards),this.view.btnBoss.visible=!0,this.view.btnBoss.clickHandler=new h(this,this.onFightBoss),this.view.petAttack.on("click",this,this.onPetAttack),this.view.closeHandler=new h(this,this.onClose)},i.onRegister=function(){this.facade.registerMediator(new _f),this.facade.registerMediator(new wf),this.facade.registerMediator(new ff),this.facade.registerMediator(new Tf),this.facade.registerMediator(new af),this.facade.registerMediator(new rf),this.facade.registerMediator(new lf),this.facade.registerMediator(new xf),this.facade.registerMediator(new Cf),this.facade.registerMediator(new If),this.facade.registerMediator(new bf),this.facade.registerMediator(new cf),this.facade.registerMediator(new pf),this.facade.registerMediator(new Ef),this.facade.registerMediator(new Sf),this.facade.registerMediator(new uf),this.facade.registerMediator(new df)},i.listNotificationInterests=function(){return["RECEIVE_FIGHT_CONTEXT","RECEIVE_FIGHT_REPORTS","RECEIVE_FIGHT_AWARDS","RECEIVE_OFFLINE_AWARDS","USER_LEVEL_CHANGE","SHOW_FIGHT_HANG_PAGE","USER_INIT","USER_LOCK_FIGHT_BOSS_TIME","RECEIVE_GLOBAL_BOSS_FRESH","INIT_VIP_INFO","RECEIVE_PET_PVP_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"RECEIVE_FIGHT_CONTEXT":var t=e.getBody();this.t>=3?(this.t=1,this.view.clear()):this.t+=1,this.view.initFightStart(t),this.freshTribleTime();break;case"RECEIVE_FIGHT_REPORTS":try{this.view.receiveFightReports(e.getBody())}catch(i){as.error(this,"receiveFightReports",i)}break;case"SHOW_FIGHT_HANG_PAGE":var n=g.database.getData("dungeon",e.getBody());if(n){if(n.id>100){var o=g.database.getData("petequipext",n.id%100);this.view.txtName.text=n.name+"副本（神圣"+(o?o.sacred:0)+"级）",this.view.petDrop.visible=!0,this.view.petAttack.visible=!0,this.freshPetDungonRate()}else this.view.txtName.text=n.name+"副本",this.view.petDrop.visible=!1,this.view.petAttack.visible=!1;n.id<0?this.view.dungeonNotice.visible=!0:this.view.dungeonNotice.visible=!1}else this.view.txtName.text="";Gc.instance.subscribe(),this.view.popup();break;case"RECEIVE_FIGHT_AWARDS":this.t=3,this.view.receiveFightAwards(e.getBody()),this.fightingAwardsPop.receiveFightAwards(e.getBody());break;case"RECEIVE_OFFLINE_AWARDS":this.fightingAwardsPop.receiveOfflineAwards(e.getBody());break;case"USER_LEVEL_CHANGE":this.view.levelUP();break;case"USER_INIT":case"USER_LOCK_FIGHT_BOSS_TIME":this.t=0;var s=Ng.userVO.getValue(19003);this.view.btnBoss.label="挑战BOSS("+s+")",5==s?co.showOrHide(this.view.btnBoss,!0):co.showOrHide(this.view.btnBoss,!1);break;case"RECEIVE_GLOBAL_BOSS_FRESH":this.globalBossInfo=e.getBody(),this.freshGlobalBossInfo();break;case"INIT_VIP_INFO":this.vip=e.getBody(),this.freshGlobalBossInfo();break;case"RECEIVE_PET_PVP_INFO":this.freshPetDungonRate()}},i.freshTribleTime=function(){var e=Ng.userVO.getValue(7022)-g.clock.currentTime;if(e>0){var t="3倍收益剩余：";e>=ro.T_1D?t=t+vo["int"](e/ro.T_1D)+"天":e>=ro.T_1H?t=t+vo.toFixedNum(e/ro.T_1H)+"小时":e>=ro.T_1M?t=t+vo["int"](e/ro.T_1M)+"分钟":t+="1分钟",this.view.lbTrible.text=t,this.view.lbTrible.visible=!0}else this.view.lbTrible.visible=!1},i.onClose=function(){Gc.instance.unsubscribe()},i.onPetAttack=function(){this.sendNotification("OPEN_PET_PVP_PAGE")},i.freshPetDungonRate=function(){var e=this.facade.retrieveProxy("PetPvpProxy");e&&e.info?(this.view.petDrop.text="寻宝概率："+e.getDropRateShow(),this.view.petAttack.text="主动挑战"):(this.view.petDrop.text="",this.view.petAttack.text="")},i.freshGlobalBossInfo=function(){if(null!=this.globalBossInfo){var e=1e3*this.globalBossInfo[1]-g.clock.currentTime;1e3>e&&(e=1e3);var t=Math.floor(e/6e4),i=Math.floor(e%6e4/1e3),n="";t>0?(10>t&&(n="0"),n=n+t+":"):n="00:",i>0?(10>i&&(n+="0"),n=n+i+""):n+="00",n=1e3>=e?"  每10分钟刷新一次":"  剩余刷新时间："+n;var o="境界Boss数量："+this.globalBossInfo[0]+n;if(this.vip&&this.vip.exGasRateTime){var s=1e3*this.vip.exGasRateTime-g.clock.currentTime;s>0&&(this.timespan.update(s),o+="  双倍灵气时间："+this.timespan.formatStringFullHour)}this.view.dungeonNotice.text=o}},i.onAwards=function(){this.fightingAwardsPop.popup()},i.onFightBoss=function(){var e=Ng.userVO.getValue(19003);1>e?this.sendNotification("prompted_info_show",{info:"每2小时恢复一次次数,最多可攒5次。"}):Gc.instance.lockFightBoss()},s(0,i,"fightingAwardsPop",function(){return this.getViewComponent(),this._fightingAwardsPop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightMediator",t}(lc),cf=function(e){function t(){this.fightingHangPage=null,this.c=null,t.__super.call(this,"FightAlcBossMediator"),this.fightingHangPage=new GN(1),this.fightingHangPage.txtName.text="宗门BOSS",this.fightingHangPage.btnAward.visible=!1,this.fightingHangPage.btnBoss.visible=!1}o(t,"modules.fight.view.FightAlcBossMediator",e);var i=t.prototype;return i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(13==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.fightingHangPage.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.fightingHangPage.clear(),this.c=e.getBody(),this.c.fighterA.hpPages=1,this.c.fighterB.hpPages=3,this.fightingHangPage.initFightStart(this.c),this.fightingHangPage.fighterCellB.name.color="#e70626";break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.fightingHangPage.receiveFightReports(e.getBody());break;case"RECEIVE_FIGHT_AWARDS_OTHER":var t=e.getBody();t.gold>0&&this.fightingHangPage.appendReport("<font color='#00ff00'>获得元宝+"+t.gold+"</font>",!0),this.c&&this.c.fighterB.isDead()&&this.fightingHangPage.appendReport("<font color='#00ff00'>击杀凶兽宗门奖励和伤害排名奖励结算后自动发放</font>",!0),this.fightingHangPage.receiveFightAwards(t)}},t.NAME="FightAlcBossMediator",t}(lc),uf=function(e){function t(){this.context=null,this._fightingAwardsPop=null,t.__super.call(this,"FightDungeonDailyMediator")}o(t,"modules.fight.view.FightDungeonDailyMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new rP),this._fightingAwardsPop=new _P,this.view.btnAward.clickHandler=new h(this,this.onAwards),this.view.txtName.text=""},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(18==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear(),this.context=e.getBody(),this.view.initFightStart(this.context),this.checkTargetDead();break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody()),this.checkTargetDead();break;case"RECEIVE_FIGHT_AWARDS_OTHER":e.getBody();this.view.receiveFightAwards(e.getBody()),this.fightingAwardsPop.receiveFightAwards(e.getBody())}},i.checkTargetDead=function(){},i.onAwards=function(){this.fightingAwardsPop.popup()},s(0,i,"fightingAwardsPop",function(){return this.getViewComponent(),this._fightingAwardsPop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightDungeonDailyMediator",t}(lc),df=function(e){function t(){t.__super.call(this,"FightPetPvpMediator")}o(t,"modules.fight.view.FightPetPvpMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="寻宝挑战",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1},n.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},n.handleNotification=function(e){if(19==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear();var t=e.getBody();if(t.fighterA.hpPages=1,t.fighterB.hpPages=1,this.view.initFightStart(t),!this.view.isPopup){var n=this.facade.retrieveMediator("FightMediator");n&&n.view.isPopup&&this.view.popup()}break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody());break;case"RECEIVE_FIGHT_AWARDS_OTHER":var o=e.getBody();if(0!=o.gold){var s=o.gold/100+"";s=vo.toFixed(s),o.gold>0&&(s="+"+s),this.view.appendReport("<font color='#00ff00'>寻宝概率"+s+"</font>",!0,!0)}i.timer.once(1e3,this,this.refresh)}},n.refresh=function(){lu.instance.queryRoom()},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="FightPetPvpMediator",t}(lc),pf=function(e){function t(){t.__super.call(this,"FightSamsaraMediator")}o(t,"modules.fight.view.FightSamsaraMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="轮回之地",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(15==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":"close"==e.getBody()?this.view.close():this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear();var t=e.getBody();t.fighterA.hpPages=1,t.fighterB.hpPages=1,this.view.initFightStart(t);break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody());break;case"RECEIVE_FIGHT_AWARDS_OTHER":var i=e.getBody();if(i.gold>0){var n="击杀恶灵：";switch(i.gold){case 1:n+="攻击+3%";break;case 2:n+="生命+5%";break;case 3:n+="法力+5%";break;case 4:n+="攻击速度+3%";break;case 5:n+="防御+3%"}n+="(本次闯关期间)",this.view.appendReport("<font color='#0084ff'>"+n+"</font>",!0,!0),this.sendNotification("prompted_info_show",{info:n})}this.view.receiveFightAwards(i)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightSamsaraMediator",t}(lc),ff=function(e){function t(){this.c=null,t.__super.call(this,"FightPlayerMediator")}o(t,"modules.fight.view.FightPlayerMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="切磋技艺",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1,this.view.btnBoss.label="分享战果",this.view.btnBoss.clickHandler=new h(this,this.onShare)},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(2==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.view.btnBoss.visible=!1,this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear(),this.c=e.getBody(),this.c.fighterA.hpPages=1,this.c.fighterB.hpPages=1,this.view.initFightStart(this.c);break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody()),(this.c.fighterA.isDead()||this.c.fighterB.isDead())&&(this.view.btnBoss.visible=v.enableChat()&&!v.limitChat);break;case"RECEIVE_FIGHT_AWARDS_OTHER":var t=e.getBody();this.view.receiveFightAwards(t)}},i.onShare=function(){this.c&&(this.c.fighterA.isDead()||this.c.fighterB.isDead())&&this.sendNotification("CHAT_INPUT_ITEM",this.c)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightPlayerMediator",t}(lc),_f=function(e){function t(){this._fightingAwardsPop=null,this.currentGuild=null,t.__super.call(this,"FightSpMediator")}o(t,"modules.fight.view.FightSpMediator",e);var r=t.prototype;return r.initViewComponent=function(){this.setViewComponent(new GN(1)),this._fightingAwardsPop=new UL,this.view.btnAward.clickHandler=new h(this,this.onAwards),this.fightingAwardsPop.nextBtn.clickHandler=new h(this,this.onNext),this.view.btnBoss.visible=!1},r.listNotificationInterests=function(){return["RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER","SHOW_FIGHT_PAGE_OTHER","RECEIVE_DUNGEON_SP_INFO"]},r.handleNotification=function(e){var t=this.facade.retrieveProxy("DungeonProxy"),n=t.dungeonSpInfo;
switch(e.getName()){case"RECEIVE_FIGHT_CONTEXT_OTHER":if(null==n||1!=e.getType())return;this.currentGuild=n.getRoundShow()+"",this.view.clear();var o=e.getBody();o.fighterA.hpPages=1,o.fighterB.hpPages=1,this.view.initFightStart(o),this.fightingAwardsPop.nextBtn.visible=!1;break;case"RECEIVE_FIGHT_REPORTS_OTHER":if(1!=e.getType())return;this.view.receiveFightReports(e.getBody());break;case"RECEIVE_FIGHT_AWARDS_OTHER":if(1!=e.getType())return;var s,r=e.getBody();-1==r.gold?(s=this.buildPropHtml(r),this.sendNotification("POP_CONFIRM_INFO",{info:"由于您超高的战斗力，弱小的守卫甘拜下风<br>自愿奉上<font color='#fffc00'>"+r.silver+"</font>铜币,<font color='#00dc24'>"+r.exp+"</font>经验<br>"+s,handler:null}),this.fightingAwardsPop.appendHtml("<br><font color='#0000ff'>快速通关奖励：</font>"),this.view.receiveFightAwards(r),this.fightingAwardsPop.receiveFightAwards(r)):-2==r.gold?(this.fightingAwardsPop.clear(),this.fightingAwardsPop.appendHtml("<br><font color='#e70626'>五行宫挑战结束，累计奖励：</font>"),this.fightingAwardsPop.receiveFightAwards(r),this.fightingAwardsPop.nextBtn.visible=!1):(this.fightingAwardsPop.appendHtml("<br><br><font color='#00ff00'>挑战关卡"+this.currentGuild+"胜利</font>"),this.fightingAwardsPop.nextBtn.visible=!0,this.view.receiveFightAwards(r),this.fightingAwardsPop.receiveFightAwards(r),i.timer.once(2e3,this,this.onNext));break;case"SHOW_FIGHT_PAGE_OTHER":if(1!=e.getType())return;1==e.getBody()?this.view.close():this.view.popup(),op.aldSendEvent("挑战五行宫");break;case"RECEIVE_DUNGEON_SP_INFO":n?this.view.txtName.text="挑战关卡"+n.getRoundShow():this.view.txtName.text="关卡信息未载入"}},r.buildPropHtml=function(e){var t=e.getItemsHtmlSimple();return t},r.onAwards=function(){this.fightingAwardsPop.popup()},r.onNext=function(){var e=this.facade.retrieveProxy("DungeonProxy"),t=e.dungeonSpInfo;null!=t&&(t.fighting||Gc.instance.fightDungeonSp(),this.fightingAwardsPop.close())},s(0,r,"fightingAwardsPop",function(){return this.getViewComponent(),this._fightingAwardsPop}),s(0,r,"view",function(){return this.getViewComponent()}),t.NAME="FightSpMediator",n(t,["ROUND_NATURE",function(){return this.ROUND_NATURE=[[2,1,3,5,4],[5,2,3,4,1],[4,1,2,3,5],[1,2,4,5,3],[3,1,4,5,2]]}]),t}(lc),mf=function(e){function t(){t.__super.call(this)}o(t,"modules.talisman.controller.commands.DressTalismanCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemSimpleGroup",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.updateItemsSimple(i.items);o.size>0&&this.sendNotification("FRESH_GOODS_PACK",o)}else-35==t.status?this.sendNotification("prompted_info_show",{info:"请重新挑战一次境界副本"}):this.sendNotification("prompted_info_show",{info:"您的境界不足，暂时无法佩戴"}),console.log("talisman dress get.. error:"+t.status)},t}(rc),gf=function(e){function t(){t.__super.call(this)}o(t,"modules.talisman.controller.commands.RebuildTalismanCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemGoods",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.getItemById(i.id,6);switch(o.updateForOption(i),t.cmd){case 4:this.sendNotification("POP_TALISMAN_OPTION_SUCCESS",o,Pe.TALISMAN_REBUILD);break;case 5:this.sendNotification("POP_TALISMAN_OPTION_SUCCESS",o,Pe.TALISMAN_REBUILD_DELAY);break;case 6:this.sendNotification("POP_TALISMAN_OPTION_SUCCESS",o,Pe.TALISMAN_REBUILD_CHOSE);break;case 7:this.sendNotification("POP_TALISMAN_OPTION_SUCCESS",o,7)}var s=new go;s.add(o.backpack),this.sendNotification("FRESH_GOODS_PACK",s)}else console.log("rebuild talisman get.. error:"+t.status)},t}(rc),vf=function(e){function t(){t.__super.call(this)}o(t,"modules.talisman.controller.commands.UpgradeTalismanCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemGoods",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.getItemById(i.id,6);o.updateForOption(i),this.sendNotification("POP_TALISMAN_OPTION_SUCCESS",o,Pe.TALISMAN_UPGRADE);var s=new go;s.add(o.backpack),this.sendNotification("FRESH_GOODS_PACK",s)}else console.log("update talisman get.. error:"+t.status)},t}(rc),yf=function(e){function t(){t.__super.call(this)}o(t,"modules.talisman.controller.TalismanPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Pe.TALISMAN_DRESS,mf,!0),this.facade.registerCommand(Pe.TALISMAN_UPGRADE,vf,!0),this.facade.registerCommand(Pe.TALISMAN_UPGRADE_BY_STONE,vf,!0),this.facade.registerCommand(Pe.TALISMAN_REBUILD,gf,!0),this.facade.registerCommand(Pe.TALISMAN_REBUILD_DELAY,gf,!0),this.facade.registerCommand(Pe.TALISMAN_REBUILD_CHOSE,gf,!0),this.facade.registerCommand(Pe.TALISMAN_CHANGE_NATURE,gf,!0)},t}(rc),bf=function(e){function t(){t.__super.call(this,"FightMineMediator")}o(t,"modules.fight.view.FightMineMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="灵脉战斗",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(10==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear();var t=e.getBody();t.fighterA.hpPages=1,t.fighterB.hpPages=1,this.view.initFightStart(t);break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody());break;case"RECEIVE_FIGHT_AWARDS_OTHER":var i=e.getBody();i.gold>0&&this.view.appendReport("<font color='#00ff00'>获得元宝+"+i.gold+"</font>",!0,!0),this.view.receiveFightAwards(i)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightMineMediator",t}(lc),Ef=function(e){function t(){t.__super.call(this,"FightMysteryMediator")}o(t,"modules.fight.view.FightMysteryMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="伏魔秘境",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(16==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":"close"==e.getBody()?this.view.close():this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear();var t=e.getBody();t.fighterA.hpPages=1,t.fighterB.hpPages=1,this.view.initFightStart(t);break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody());var i=this.view.getPvpWinner();null!=i&&(i.equals(Ng.userVO.unitId)?(this.view.appendReport("<font color='#fffc00'>，对手已被打回出生点</font>",!1,!0),this.sendNotification("prompted_info_show",{info:"伏魔秘境战斗胜利，对手被打回出生点",updateTime:2e3})):(this.view.appendReport("<font color='#e70626'>，您被打回出生点</font>",!1,!0),this.sendNotification("prompted_info_show",{info:"伏魔秘境战斗失败，您被打回出生点",updateTime:2e3})));break;case"RECEIVE_FIGHT_AWARDS_OTHER":var n=e.getBody();this.view.receiveFightAwards(n)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightMysteryMediator",t}(lc),xf=function(e){function t(){t.__super.call(this,"FightLadderMediator")}o(t,"modules.fight.view.FightLadderMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="竞技场战斗",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(8==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear();var t=e.getBody();t.fighterA.hpPages=1,t.fighterB.hpPages=1,this.view.initFightStart(t);break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody());break;case"RECEIVE_FIGHT_AWARDS_OTHER":var i=e.getBody();i.gold>0&&this.view.appendReport("<font color='#00ff00'>获得威望+"+i.gold+"</font>",!0,!0),this.view.receiveFightAwards(i)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightLadderMediator",t}(lc),Sf=function(e){function t(){t.__super.call(this,"FightGuardMediator")}o(t,"modules.fight.view.FightGuardMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="护卫",this.view.btnAward.visible=!1,this.view.btnBoss.visible=!1},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(17==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":e.getBody()&&(this.view.txtName.text=e.getBody()),this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear();var t=e.getBody();t.fighterA.hpPages=1,t.fighterB.hpPages=1,this.view.initFightStart(t);break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody());break;case"RECEIVE_FIGHT_AWARDS_OTHER":var i,n=e.getBody();n.gold>0?n.exp>0?(i="抓捕护卫成功",this.view.appendReport("<font color='#00dc24'>"+i+"</font>",!0,!0),this.sendNotification("prompted_info_show",{info:i})):(i="抓捕护卫失败",this.view.appendReport("<font color='#e70626'>"+i+"</font>",!0,!0),this.sendNotification("prompted_info_show",{info:i})):n.exp>0?(i="反抗家主成功",this.view.appendReport("<font color='#00dc24'>"+i+"</font>",!0,!0),this.sendNotification("prompted_info_show",{info:i})):(i="反抗家主失败",this.view.appendReport("<font color='#e70626'>"+i+"</font>",!0,!0),this.sendNotification("prompted_info_show",{info:i}))}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightGuardMediator",t}(lc),wf=function(e){function t(){this._fightingAwardsPop=null,this._forestSearchView=null,this._lightBG=null,this.info=null,this.context=null,this.vipInfo=null,this._type=null,this._eventLast=null,this.lightEndHandler=new h(this,this.onLightEnd),t.__super.call(this,"FightForestMediator")}o(t,"modules.fight.view.FightForestMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new GN(2)),this._fightingAwardsPop=new _P,this.view.btnAward.clickHandler=new h(this,this.onAwards),this.view.btnBoss.clickHandler=new h(this,this.onContinue),this.view.getChildByName("close").visible=!1,this._forestSearchView=new oN,this.view.addChild(this._forestSearchView),this._forestSearchView.on("mouseup",this,this.onSearch),this._lightBG=new Bd,this._lightBG.name="lightBG",this._lightBG.width=v.browerWidth,this._lightBG.height=v.browerHeight,this._lightBG.graphics.drawRect(0,0,this._lightBG.width,this._lightBG.height,"#000000"),this.view.addChild(this._lightBG),this.reset()},n.reset=function(){this.view.btnBoss.visible=!1,this.view.btnBoss.label="继续探索",this.view.clearReport.visible=!1,this.view.btnAward.visible=!1,this._lightBG.visible=!1},n.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER","RECEIVE_FOREST_INFO","RECEIVE_FOREST_EVENT","FOREST_MOVE_ERR","INIT_VIP_INFO","CLEAR_CACHE_DATA"]},n.handleNotification=function(e){switch(e.getName()){case"INIT_VIP_INFO":this.vipInfo=e.getBody(),this.info&&this.freshInfo();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":if(3!=e.getType())return;this.view.clear(),this.context=e.getBody(),this.view.initFightStart(this.context);break;case"RECEIVE_FIGHT_REPORTS_OTHER":if(3!=e.getType())return;this.view.receiveFightReports(e.getBody()),this.context&&this.context.fighterA.isDead()&&(this.context.fighterB.setValue(1100,0),this.info.buyLife<=0&&this.sendNotification("POP_CONFIRM_INFO",{info:"战斗失败，是否花费30元宝复活。",handler:h.create(this,function(e){dc.instance.buyLife(e)})}));break;case"RECEIVE_FIGHT_AWARDS_OTHER":if(3!=e.getType())return;var t=e.getBody();this.view.receiveFightAwards(t),this.fightingAwardsPop.receiveFightAwards(t),this.forestSearchView.receiveFightAwards(t);break;case"SHOW_FIGHT_PAGE_OTHER":if(3!=e.getType())return;this.fightingAwardsPop.clear(),this.view.popup(),this._eventLast?this.dealEvent(this._eventLast):this.checkFast(),this.checkDead();break;case"RECEIVE_FOREST_INFO":this.info=e.getBody(),this._type=e.getType(),this.vipInfo&&this.freshInfo();break;case"RECEIVE_FOREST_EVENT":var i=e.getBody();this.dealEvent(i);break;case"FOREST_MOVE_ERR":this.alertDead(),this.checkFast();break;case"CLEAR_CACHE_DATA":this._eventLast=null,this.vipInfo=null,this.info=null,this.reset()}},n.freshInfo=function(){if(0==this.info.currentId)"exit"==this._type||"push"==this._type?this.forestSearchView.showRecoard("本次探索已结束。<br>"):"buyLife"==this._type?this.forestSearchView.showRecoard("放弃复活，本次探索已结束。<br>"):this.forestSearchView.showRecoard("本次探索已结束。<br>"),this.view.btnBoss.visible=!1,this.view.panelReports.visible=!1,this.view.btnAward.visible=!1,this.forestSearchView.showDir(!1),this.forestSearchView.visible=!0,i.timer.clear(this,this._moveStep);else{if(this.view.btnBoss.label="继续探索",this.forestSearchView.visible?this.view.btnBoss.visible=!1:(this.view.btnBoss.visible=!0,this.info&&this.info.isCurrentFast(this.vipInfo)&&(this.view.btnBoss.visible=!1,this.onContinue())),"query"==this._type){if(this.view.fighterCellA.visible(!0),-1==this.view.fighterCellA.nature.index){this.view.fighterCellA.name.text=Ng.userVO.getValue(1002);var e=Ng.userVO.getValue(1027);this.view.fighterCellA.name.color=N.getColor(e),this.view.fighterCellA.nature.index=Ng.userVO.getValue(1004)-1,this.view.fighterCellA.level.text="Lv."+Ng.userVO.getValue(1006)}this.forestSearchView.clearEvents();for(var t=0;t<this.info.events.length-1;t++)this.forestSearchView.receiveEvent(this.info.events[t]);this.info.getLastEvent()?this.dealEvent(this.info.getLastEvent()):this.checkFast()}else"push"==this._type||("enter"==this._type?(this.forestSearchView.clearEvents(),this.forestSearchView.showRecoard("进入森林，开始探索。<br>"),this.vipInfo&&this.vipInfo.vipMontAdd<=0&&this.info.isPassed(this.info.diff,this.info.currentId,this.info.nature)&&this.forestSearchView.showRecoard("<font color='red'>使用森林扫荡,需要激活任意月卡</font><br>"),this.fightingAwardsPop.clear(),this.view.popup(),this.checkFast()):"buyLife"==this._type&&(this.forestSearchView.showRecoard("您已复活成功。<br>"),this.onContinue()));this.view.txtName.text=te.getForestName(this.info),this.info.diff>0?this.view.txtName.color="#e70626":this.view.txtName.color="#ffffff",this.forestSearchView.setFast(this.info.isCurrentFast(this.vipInfo))}this.forestSearchView.showSearchPress(this.info)},n.checkDead=function(){if(this.context&&this.context.fighterA.isDead()&&this.info&&this.info.currentId>0){var e=this.info.getLastEvent();if(null==e||e&&1==e.type&&-1!=e.message.indexOf("您已被怪物打败"))return this.alertDead(),!0}return!1},n.alertDead=function(){null!=this.info&&(-1==this.info.buyLife?this.sendNotification("POP_CONFIRM_INFO",{info:"战斗失败，是否花费30元宝复活。",handler:h.create(this,function(e){dc.instance.buyLife(e)})}):this.context&&this.context.fighterA&&this.context.fighterA.unitId.id==Ng.userVO.unitId.id&&this.context.fighterA.isDead()?(dc.instance.exit(),this.view.close()):this.forestSearchView.visible=!0)},n.onContinue=function(){0==this.info.currentId?this.view.close():(this.view.panelReports.visible=!1,this.view.btnBoss.visible=!1,this.view.btnAward.visible=!1,this.forestSearchView.visible=!0)},n.dealEvent=function(e){var t=this;if(0==this.view.isPopup)return void(this._eventLast=e);switch(this._eventLast=null,e.type){case 0:this.forestSearchView.receiveEvent(e);break;case 1:e.acting?(this.view.panelReports.visible=!0,this.view.btnBoss.visible=!1,this.view.btnAward.visible=!0,this.forestSearchView.visible=!1):this.view.isPopup?this.info&&this.info.isCurrentFast(this.vipInfo)?this.view.btnBoss.visible=!1:this.info.currentId>0&&(this.view.btnBoss.visible=!0,this.forestSearchView.visible=!1):this.view.btnBoss.visible=!1,this.forestSearchView.receiveEvent(e),this.checkFast();break;case 2:this.forestSearchView.receiveEvent(e),this.checkFast();break;case 3:if(e.acting){if(this.view.panelReports.visible=!1,this.forestSearchView.receiveEvent(e),1014==e.eventId&&Ng.userVO.getValue(1010)<10){this.forestSearchView.showRecoard("囊中羞涩<br>"),this.brightBg(),dc.instance.choseEvent(0);break}this.popChose(e)}else this.forestSearchView.receiveEvent(e),this.checkFast();break;case 4:this.forestSearchView.receiveEvent(e),this.sendNotification("POP_CONFIRM_INFO",{info:e.message,handler:h.create(this,function(e){e?(t.sendNotification("SHOW_PET_SHOP_PAGE",!0),t.checkFastDelay()):t.checkFast()})});break;case 5:this.forestSearchView.receiveEvent(e),this.sendNotification("POP_CONFIRM_INFO",{info:e.message,handler:h.create(this,function(e){e?(t.sendNotification("SHOW_SHOP_PAGE"),t.checkFastDelay()):t.checkFast()})})}},n.onAwards=function(){this.fightingAwardsPop.popup()},n.checkFastDelay=function(){0!=this.view.isPopup&&this.info&&this.info.isCurrentFast(this.vipInfo)&&i.timer.loop(300,this,this._checkFastDelayTmp)},n._checkFastDelayTmp=function(){var e=this.facade.retrieveMediator("PetShopMediator").view.isPopup;e||(e=this.facade.retrieveMediator("ShopMediator").view.isPopup,e||(i.timer.clear(this,this._checkFastDelayTmp),this._moveStep()))},n.checkFast=function(){0!=this.view.isPopup&&this.info&&this.info.isCurrentFast(this.vipInfo)&&i.timer.once(1e3,this,this._moveStep)},n.onSearch=function(e){switch(e.target.name){case"btnW":case"btnE":case"btnS":case"btnN":this._moveStep()}},n._moveStep=function(){var e=this.checkDead();if(!e){if(this.info&&this.info.getLastEvent()&&this.info.getLastEvent().acting&&3==this.info.getLastEvent().type)return void this.popChose(this.info.getLastEvent());dc.instance.moveStep(4),this.brightBg()}},n.popChose=function(e){var t=this,i="确认",n="取消";switch(e.eventId){case 1015:i="救治",n="加害";break;case 1016:i="卖了",n="放了";break;case 1017:i="已经放了",n="被我卖了"}this.sendNotification("POP_CONFIRM_INFO",{sureLb:i,cancelLb:n,info:e.message,handler:h.create(this,function(e){t.brightBg(),dc.instance.choseEvent(e)})})},n.brightBg=function(){this.lightBG.visible=!0,this.lightBG.alpha=1,Lr.to(this.lightBG,{alpha:0},1e3,null,this.lightEndHandler)},n.onLightEnd=function(){this.lightBG.visible=!1},s(0,n,"lightBG",function(){return this.getViewComponent(),this._lightBG}),s(0,n,"forestSearchView",function(){return this.getViewComponent(),this._forestSearchView}),s(0,n,"fightingAwardsPop",function(){return this.getViewComponent(),this._fightingAwardsPop}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="FightForestMediator",t}(lc),Cf=function(e){function t(){this.context=null,this._fightingAwardsPop=null,t.__super.call(this,"FightAlcaMediator")}o(t,"modules.fight.view.FightAlcaMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new rP),this._fightingAwardsPop=new _P,this.view.btnAward.clickHandler=new h(this,this.onAwards),this.view.txtName.text="宗门战"},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER"]},i.handleNotification=function(e){if(9==e.getType())switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.clear(),this.context=e.getBody(),this.view.initFightStart(this.context),this.checkTargetDead();var t=this.facade.retrieveMediator("AlcaMediator");t&&t.view.isPopup&&this.view.popup();break;case"RECEIVE_FIGHT_REPORTS_OTHER":this.view.receiveFightReports(e.getBody()),this.checkTargetDead();break;case"RECEIVE_FIGHT_AWARDS_OTHER":e.getBody();this.view.receiveFightAwards(e.getBody()),this.fightingAwardsPop.receiveFightAwards(e.getBody())}},i.checkTargetDead=function(){},i.onAwards=function(){this.fightingAwardsPop.popup()},s(0,i,"fightingAwardsPop",function(){return this.getViewComponent(),this._fightingAwardsPop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightAlcaMediator",t}(lc),Tf=function(e){function t(){this._towerSearchView=null,this._lightBG=null,this.context=null,this.towerInfo=null,this._init=!1,this.lightEndHandler=new h(this,this.onLightEnd),t.__super.call(this,"FightTowerMediator")}o(t,"modules.fight.view.FightTowerMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GN(1)),this.view.txtName.text="试练之塔",this.view.btnBoss.label="继续",this.view.btnBoss.clickHandler=new h(this,this.onContinue),this.view.btnBoss.visible=!1,this.view.clearReport.visible=!1,this.view.btnAward.visible=!1,this.view.panelReports.visible=!1,this.view.getChildByName("close").visible=!1,this._towerSearchView=new gN,this.view.addChild(this._towerSearchView),this._towerSearchView.on("mouseup",this,this.onSearch),this._lightBG=new Bd,this._lightBG.name="lightBG",this._lightBG.width=v.browerWidth,this._lightBG.height=v.browerHeight,this._lightBG.graphics.drawRect(0,0,this._lightBG.width,this._lightBG.height,"#000000"),this._lightBG.visible=!1,this.view.addChild(this._lightBG)},i.listNotificationInterests=function(){return["SHOW_FIGHT_PAGE_OTHER","RECEIVE_FIGHT_CONTEXT_OTHER","RECEIVE_FIGHT_REPORTS_OTHER","RECEIVE_FIGHT_AWARDS_OTHER","RECEIVE_TOWER_INFO","CLEAR_CACHE_DATA"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_FIGHT_PAGE_OTHER":if(4!=e.getType())return;this.view.fighterCellA.name.visible&&0!=this._init||(this.view.fighterCellA.visible(!0),this.view.fighterCellA.showFighter(Ng.userVO,!0),this.towerInfo.isFail()&&this.view.fighterCellA.showEmptyHP(!1),this._init=!0),this.checkFightNext(),this.view.popup();break;case"RECEIVE_FIGHT_CONTEXT_OTHER":if(4!=e.getType())return;this.view.clear(),this.context=e.getBody(),this.view.initFightStart(this.context),this.checkTargetDead();break;case"RECEIVE_FIGHT_REPORTS_OTHER":if(4!=e.getType())return;this.view.receiveFightReports(e.getBody()),this.context&&this.context.fighterA.isDead()&&this.sendNotification("POP_CONFIRM_INFO",{info:"挑战失败，是否花费30元宝复活。",handler:h.create(this,function(e){e&&Tc.instance.buyLife()})}),this.checkTargetDead();break;case"RECEIVE_FIGHT_AWARDS_OTHER":if(4!=e.getType())return;var t=e.getBody();this.view.appendReport("<font color='#0000ff'>获得威望 +"+t.gold+"</font>",!0,!0);var i=this.facade.retrieveProxy("MarketProxy"),n=i.vipInfo;n&&n.isMVIP&&this.checkFightNext();break;case"RECEIVE_TOWER_INFO":this.towerInfo=e.getBody(),this.towerInfo.floor>10?(this.towerSearchView.searchPress.text="当前层数：您已通关全部10层",this.towerSearchView.btnFight.visible=!1):(this.towerSearchView.searchPress.text="当前层数："+this.towerInfo.floor+"/10",this.towerSearchView.btnFight.visible=!0),this.towerSearchView.coinTemp.text="获得威望："+it.countTempCoin(this.towerInfo.floor),this.towerInfo.isFail()?(this.view.fighterCellA.showEmptyHP(!1),this.towerSearchView.btnFight.label="复活"):(this.view.fighterCellA.showEmptyHP(!0),this.towerSearchView.btnFight.label="前进");break;case"CLEAR_CACHE_DATA":this._init=!1}},i.checkFightNext=function(){this.towerInfo&&!this.towerInfo.isFail()&&it.isRaceTime()&&this.towerInfo.floor<=10&&this.fight()},i.checkTargetDead=function(){!this.context||this.context.fighterA.isDead()||this.context.fighterB.isDead()?(this.view.btnBoss.visible=!0,this.view.panelReports.visible=!0,this.towerSearchView.visible=!1):(this.view.btnBoss.visible=!0,this.view.panelReports.visible=!0,this.towerSearchView.visible=!1)},i.onContinue=function(){this.view.panelReports.visible=!1,this.towerSearchView.visible=!0,this.view.btnBoss.visible=!1},i.onSearch=function(e){switch(e.target.name){case"btnFight":this.fight()}},i.fight=function(){this.towerInfo&&(this.towerInfo.isFail()?this.sendNotification("POP_CONFIRM_INFO",{info:"挑战失败，是否花费30元宝复活。",handler:h.create(this,function(e){e&&Tc.instance.buyLife()})}):it.isRaceTime()?(Tc.instance.fight(),this.brightBg()):this.sendNotification("prompted_info_show","挑战时间已结束，请明天再来。"))},i.brightBg=function(){this.lightBG.visible=!0,this.lightBG.alpha=1,Lr.to(this.lightBG,{alpha:0},1e3,null,this.lightEndHandler)},i.onLightEnd=function(){this.lightBG.visible=!1},s(0,i,"lightBG",function(){return this.getViewComponent(),this._lightBG}),s(0,i,"towerSearchView",function(){return this.getViewComponent(),this._towerSearchView}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="FightTowerMediator",t}(lc),If=function(e){function t(){this.context=null,this.reports=null,t.__super.call(this,"FightVideoMediator")}o(t,"modules.fight.view.FightVideoMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new rP),this.view.btnAward.visible=!1,this.view.txtName.text="战斗录像",this.view.closeHandler=new h(this,this.onStop)},n.listNotificationInterests=function(){return["RECEIVE_ALCA_VIDEO_DETAIL","RECEIVE_ALCM_VIDEO_DETAIL"]},n.handleNotification=function(e){switch(e.getName()){case"RECEIVE_ALCA_VIDEO_DETAIL":case"RECEIVE_ALCM_VIDEO_DETAIL":var t=e.getBody(),n=this.facade.retrieveProxy("FightVideoProxy"),o=n.initFightContext(t.head);this.view.clear(),this.view.initFightStart(o),this.reports=t.reportGroups,i.timer.loop(100,this,this.onClock),this.view.popup()}},n.onClock=function(){if(null==this.reports||0==this.reports.length)return void i.timer.clear(this,this.onClock);var e=this.facade.retrieveProxy("FightVideoProxy");e.context.fightingTime+=100;var t=this.reports[0];if(e.context.fightingTime>=t.fightingTime){var n=this.reports.shift(),o=e.receiveFightReports(n);this.view.receiveFightReports(o)}},n.onStop=function(){this.reports=null,i.timer.clear(this,this.onClock)},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="FightVideoMediator",t}(lc),Af=function(e){function t(){t.__super.call(this)}o(t,"modules.vip.conroller.VipExtPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Le.VIP_EXT_QUERY,Rf),this.facade.registerCommand(Le.VIP_EXT_TAKE_AWARD,Pf,!0)},t}(rc),Nf=function(e){function t(){t.__super.call(this,"VipExtProxy",new Oe)}o(t,"modules.vip.model.VipExtProxy",e);var i=t.prototype;return i.receiveVipExt=function(e){return this.vipExt.update(e),this.vipExt},s(0,i,"vipExt",function(){return this.data}),t.NAME="VipExtProxy",t}(sc),Pf=function(e){function t(){t.__super.call(this)}o(t,"modules.vip.conroller.commands.VipExtAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"领取每日奖励",awards:n,desc:""})}},t}(rc),Rf=function(e){function t(){t.__super.call(this)}o(t,"modules.vip.conroller.commands.VipExtQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerVipExt",t.value),n=this.facade.retrieveProxy("VipExtProxy"),o=n.receiveVipExt(i);this.sendNotification("RECEIVE_VIP_EXT",o)}},t}(rc),Lf=function(e){function t(){this._upgradeView=null,this._rebuildView=null,this._talismanChoseView=null,this._talismanChgNature=null,this._popSuccess=null,this.noticeHandler=null,this._success=null,this.onRebuildSuccessClose=new h(this,function(){var e=this;e.showRebuildPage(e._success)}),t.__super.call(this,"TalismanMediator")}o(t,"modules.talisman.view.TalismanMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this;this.setViewComponent(new zN),this._upgradeView=new mP,this._rebuildView=new aP,this._talismanChoseView=new yP,this._talismanChgNature=new UN,this._popSuccess=new bP,this.noticeHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",4)}),this._upgradeView.ntc.clickHandler=this.noticeHandler,this._rebuildView.ntc.clickHandler=this.noticeHandler,this._talismanChgNature.list.mouseEnabled=!0,this._talismanChgNature.list.mouseHandler=new h(this,this.onChgNatrue)},i.onChgNatrue=function(e,t){var i=this;if("click"==e.type&&"btnChg"==e.target.name){var n,o=this.facade.retrieveProxy("GoodsProxy"),s=o.listItems(0),r=null;for(var a in s)if(n=s[a],!(null==n||n.count<=0)&&n instanceof modules.goods.model.data.PackProp){var l=n;if(500023==l.baseId){r=l;break}}var c=this.talismanChgNature.aimTalisman.dataSource,u=Re.getChgNatureNeed(c);if(null==r||r.count<u)return this.sendNotification("prompted_info_show",{info:"需要"+u+"个重铸神铁，可在商城中购买。"}),void this.sendNotification("OPEN_MARCKET_FAST_BUY",24);var d=this.talismanChgNature.list.getCell(t).dataSource;this.sendNotification("POP_CONFIRM_INFO",{info:"确定使用"+u+"个【重铸神铁】，重铸法宝吗？",handler:h.create(this,function(e){e&&(i.talismanChgNature.close(),gc.instance.changeNature(c.id,d,r.id,u))})})}},i.checkNeedChoseAttr=function(e){return e.creatAttr.length>0?(this.sendNotification("prompted_info_show",{info:"洗炼属性未完成选择，请先选择是否替换属性"}),this.talismanChoseView.showTalisman(e),!0):!1},i.listNotificationInterests=function(){return["OPEN_DRESS_TALISMAN_CHANGE","OPEN_UPGRADE_TALISMAN_VIEW","OPEN_REBUILD_TALISMAN_VIEW","OPEN_REBUILD_CHOSE_VIEW","OPEN_CHG_NATURE_VIEW","POP_TALISMAN_OPTION_SUCCESS"]},i.handleNotification=function(e){var t;switch(e.getName()){case"OPEN_DRESS_TALISMAN_CHANGE":this.showDressPage(e.getBody());break;case"OPEN_UPGRADE_TALISMAN_VIEW":if(t=e.getBody(),this.checkNeedChoseAttr(t))return;this.showUpgradPage(t);break;case"OPEN_REBUILD_TALISMAN_VIEW":if(t=e.getBody(),this.checkNeedChoseAttr(t))return;this.showRebuildPage(t);break;case"OPEN_REBUILD_CHOSE_VIEW":this.talismanChoseView.showTalisman(e.getBody());break;case"OPEN_CHG_NATURE_VIEW":if(t=e.getBody(),this.checkNeedChoseAttr(t))return;this.talismanChgNature.showTalisman(t);break;case"POP_TALISMAN_OPTION_SUCCESS":switch(Ln.renderTalisman(this.popSuccess.talisman,e.getBody()),e.getType()){case Pe.TALISMAN_UPGRADE:case Pe.TALISMAN_UPGRADE_BY_STONE:this.popSuccess.title.text="升品成功",this.popSuccess.closeHandler=null;break;case Pe.TALISMAN_REBUILD:this.popSuccess.title.text="洗炼成功",this._success=e.getBody(),this.popSuccess.closeHandler=this.onRebuildSuccessClose;break;case Pe.TALISMAN_REBUILD_DELAY:return this.sendNotification("prompted_info_show",{info:"完成洗炼,请选择是否替换属性"}),void this.talismanChoseView.showTalisman(e.getBody());case Pe.TALISMAN_REBUILD_CHOSE:this.popSuccess.title.text="洗炼结束",this._success=e.getBody(),this.popSuccess.closeHandler=this.onRebuildSuccessClose;break;case 7:this.popSuccess.title.text="重铸成功",this.popSuccess.closeHandler=null}this.popSuccess.popup()}},i.showRebuildPage=function(e){var t,i=this.facade.retrieveProxy("GoodsProxy"),n=i.listItems(0),o=[];for(var s in n)if(t=n[s],!(null==t||t.count<=0)&&t instanceof modules.goods.model.data.PackProp){var r=t;3==r.propConf.propType&&r.propConf.quality>=e.quality&&r.propConf.level>=e.talismanConf.level&&o.push(r)}o.sort(this.compareFunctionStone),this.rebuildView.popSelect(e,o)},i.showUpgradPage=function(e){if(e.quality>=6)return void this.sendNotification("prompted_info_show",{info:"当前法宝已是最高品质"});var t,i=this.facade.retrieveProxy("GoodsProxy"),n=i.listItems(0),o=[],s=[];for(var r in n)if(t=n[r],!(null==t||t.count<=0)){if(t instanceof modules.goods.model.data.PackTalisman){var a=t;t.id!=e.id&&a.talismanConf.grad==e.talismanConf.grad&&a.quality==e.quality&&o.push(t)}if(t instanceof modules.goods.model.data.PackProp){var l=t;3==l.propConf.propType&&l.propConf.quality>e.quality&&l.propConf.level>=e.talismanConf.level&&s.push(l)}}s.sort(this.compareFunctionStone),o.sort(this.compareFunctionBad),this.upgradeView.popSelect(e,o,s)},i.compareFunctionStone=function(e,t){return e.baseId-t.baseId},i.showDressPage=function(e){var t,i=0;e instanceof modules.goods.model.data.PackTalisman?(t=e,i=t.talismanConf.grad):i=e;var n,o=this.facade.retrieveProxy("GoodsProxy"),s=o.listItems(0),r=[];for(var a in s)if(n=s[a],!(null==n||n.count<=0)&&n instanceof modules.goods.model.data.PackTalisman){var l=n;l.talismanConf.grad==i&&l.talismanConf.nature>0&&r.push(n)}r.sort(this.compareFunctionBetter),this.view.popSelect(t,r,i)},i.compareFunctionBetter=function(e,t){return e.quality>t.quality?-1:e.quality<t.quality?1:t.talismanConf.id-e.talismanConf.id;
},i.compareFunctionBad=function(e,t){return e.quality<t.quality?-1:e.quality>t.quality?1:t.talismanConf.id-e.talismanConf.id},s(0,i,"popSuccess",function(){return this.getViewComponent(),this._popSuccess}),s(0,i,"talismanChgNature",function(){return this.getViewComponent(),this._talismanChgNature}),s(0,i,"talismanChoseView",function(){return this.getViewComponent(),this._talismanChoseView}),s(0,i,"upgradeView",function(){return this.getViewComponent(),this._upgradeView}),s(0,i,"rebuildView",function(){return this.getViewComponent(),this._rebuildView}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="TalismanMediator",t}(lc),Of=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.controller.commands.ExchangeGoldenCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeInt(t.value),n=i/10*15;this.sendNotification("prompted_info_show",{info:"花费仙玉:"+n+",获得元宝:"+i})}},t}(rc),Mf=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.controller.commands.ExchangeSearchCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ExchangeItemPager",t.value),n=this.facade.retrieveProxy("ExchangeProxy"),o=n.receiveSearchReslut(i);this.sendNotification("RECIVE_EXCH_SEARCH_RESULT",o)}},t}(rc),Df=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.controller.commands.ExchangeBuyCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ExchangeItem",t.value),n=new Be(i);this.sendNotification("RECIVE_EXCH_BUY_RESULT",n),this.sendNotification("prompted_info_show",{info:"购买成功,物品已放入您的背包中."})}else switch(t.cmd){case-26:this.sendNotification("prompted_info_show",{info:"购买失败,物品等级超过角色5级."});break;case-70:this.sendNotification("prompted_info_show",{info:"购买失败,您的仙玉不足."});break;default:this.sendNotification("RECIVE_EXCH_BUY_RESULT",null),this.sendNotification("prompted_info_show",{info:"购买失败,该物品已被售出或下架."})}},t}(rc),kf=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.controller.commands.ExchangeOnOffCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ExchangeItem",t.value),n=this.facade.retrieveProxy("ExchangeProxy"),o=n.playerBooth.updateItem(i);switch(this.sendNotification("RECIVE_EXCH_PLAYER_ITEM",o),t.cmd){case 3:this.sendNotification("prompted_info_show",{info:"上架成功"});break;case 4:this.sendNotification("prompted_info_show",{info:"下架成功,物品已回收至您的背包"})}}else switch(t.cmd){case 3:this.sendNotification("prompted_info_show",{info:"上架失败"});break;case 4:this.sendNotification("prompted_info_show",{info:"下架失败,物品已出售或上架时间过短"})}},t}(rc),Bf=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.controller.commands.ExchangeQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ExchangeItemPager",t.value),n=this.facade.retrieveProxy("ExchangeProxy"),o=n.receive(i.list,1==t.cmd);this.sendNotification("RECIVE_EXCH_PLAYER_BOOTH",o)}},t}(rc),Vf=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.controller.commands.ExchangeBookCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"仙玉兑换",awards:n,desc:""})}},t}(rc),Ff=function(e){function t(){this._searchPager=new ke,t.__super.call(this,"ExchangeProxy"),this.data=new Ve}o(t,"modules.exchange.model.ExchangeProxy",e);var i=t.prototype;return i.receive=function(e,t){return this.playerBooth.update(e,t),this.playerBooth},i.receiveSearchReslut=function(e){return this._searchPager.update(e),this._searchPager},i.clear=function(){this.playerBooth.salings.length=0,this.playerBooth.solds.length=0,this._searchPager.pager.recoards=null,this._searchPager.pager.pageNumber=1},s(0,i,"playerBooth",function(){return this.data}),t.NAME="ExchangeProxy",t}(sc),Gf=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.controller.ExchangePrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Me.EXHANGE_QUERY_SALING,Bf),this.facade.registerCommand(Me.EXHANGE_QUERY_SOLD,Bf),this.facade.registerCommand(Me.EXHANGE_PUT_ON,kf,!0),this.facade.registerCommand(Me.EXHANGE_PULL_OFF,kf,!0),this.facade.registerCommand(Me.EXHANGE_SEARCH,Mf,!0),this.facade.registerCommand(Me.EXHANGE_BUY,Df,!0),this.facade.registerCommand(Me.EXHANGE_CHANGE_GOLDEN,Of,!0),this.facade.registerCommand(Me.EXHANGE_CHANGE_HANDBOOK,Vf,!0)},t}(rc),Hf=function(e){function t(){t.__super.call(this)}o(t,"modules.record.controller.RecordPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Fe.RECORD_LAST_EXPENSE,Uf,!0)},t}(rc),Uf=function(e){function t(){t.__super.call(this)}o(t,"modules.record.controller.commands.RecordCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){for(var i=v.protoCodec.getResponseDecoder().decode("PlayerExpenseList",t.value),n=[],o=0;o<i.list.length;o++)n.push(new Ge(i.list[o]));this.sendNotification("RECEIVE_RECORD_EXPENSE",n)}},t}(rc),zf=(function(e){function t(){this.freshAble=!1,this._buyConfirmPop=null,this._booth=null,this._searchPage=null,this.isExecute=!1,this.searchResult=null,t.__super.call(this),this.searchCnd=new De,this.selectPropsPop=new iP}o(t,"modules.exchange.view.ExchangeMediator",e);var i=t.prototype;return i.listNotificationInterests=function(){return["OPEN_EXCHANGE_VIEW","RECIVE_EXCH_PLAYER_BOOTH","RECIVE_EXCH_PLAYER_ITEM","RECIVE_EXCH_SEARCH_RESULT","RECIVE_EXCH_BUY_RESULT","USER_INIT","USER_CURRENCY_CHANGE","CLEAR_CACHE_DATA"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_EXCHANGE_VIEW":Ng.userVO.getValue(1006)<35?this.sendNotification("prompted_info_show",{info:"35级开启跨服交易系统"}):(this.requestData(),this.view.popup(),this.view.freshJade());break;case"RECIVE_EXCH_PLAYER_BOOTH":this.freshBooth(e.getBody());break;case"RECIVE_EXCH_PLAYER_ITEM":this.freshBooth(this._booth),this.requestData();break;case"RECIVE_EXCH_SEARCH_RESULT":this.freshSearch(e.getBody());break;case"RECIVE_EXCH_BUY_RESULT":null!=this._searchPage&&(this._searchPage.pager.pageNumber=1),this.requestData();break;case"USER_CURRENCY_CHANGE":"jade"==e.getType()&&this.view.freshJade();break;case"CLEAR_CACHE_DATA":var t=this.facade.retrieveProxy("ExchangeProxy");t.clear()}},i.onNtc=function(){this.sendNotification("POP_FUN_NOTICE",11)},i.freshBooth=function(e){switch(this._booth=e,this.view.typeBar.selectedIndex){case 1:this.showSalingItems(e.salings);break;case 2:this.showSoldItems(e.solds)}},i.freshSearch=function(e){this._searchPage=e,1==this.searchCnd.type?this.view.listContainer.itemRender=uN:this.view.listContainer.itemRender=dN,this.view.listContainer.dataSource=e.pager.recoards,this.isExecute=!1},i.onTypeSelect=function(e){switch(this.view.logPanel.visible=!1,this.view.addPanel.visible=!1,this.view.buyBox.visible=!1,this.view.jadePanel.visible=!1,e){case 0:this.view.buyBox.visible=!0;break;case 1:this.view.addPanel.visible=!0;break;case 2:this.view.logPanel.visible=!0;break;case 3:this.view.jadePanel.visible=!0}null!=this._searchPage&&(this._searchPage.pager.pageNumber=1),this.requestData()},i.requestData=function(){switch(this.view.typeBar.selectedIndex){case 0:(null==this._searchPage||this._searchPage.pager.pageNumber<=1)&&yc.instance.search(this.searchCnd,1,20);break;case 1:yc.instance.querySalings();break;case 2:yc.instance.querySolds()}},i.onGoodsFilter=function(e){this.searchCnd.setGoodsFilter(e),4==e?(this.view.kindFilter.visible=!0,this.view.qualityFilter.visible=!1,this.view.kindFilter.selectedIndex=0,this.view.lbLv.visible=!0,this.view.inputLv.visible=!0,this.onLevelFilter(!1)):(this.view.kindFilter.visible=!0,this.view.qualityFilter.visible=!0,this.view.lbLv.visible=!1,this.view.inputLv.visible=!1,this._changeQuality(this.view.qualityFilter.selectedIndex)),1==e?(this.view.natureFilter.visible=!1,this.view.natureFilter.selectedIndex=0):this.view.natureFilter.visible=!0,this.requestData()},i.onLevelFilter=function(e){void 0===e&&(e=!0);var t=vo["int"](this.view.inputLv.text);isNaN(t)||0>=t?t=0:5>t?t=5:t-=t%5,this.searchCnd.quality=t,e&&this.requestData()},i.onNatureFilter=function(e){this.searchCnd.nature=1>e?-1:e,this.requestData()},i.onKindFilter=function(e){this.searchCnd.keywd=e,this.requestData()},i.onQualityFilter=function(e){this._changeQuality(e),this.requestData()},i._changeQuality=function(e){switch(e){case 1:this.searchCnd.quality=3;break;case 2:this.searchCnd.quality=4;break;case 3:this.searchCnd.quality=5;break;case 4:this.searchCnd.quality=6;break;case 0:default:this.searchCnd.quality=0}},i.onBuySelect=function(e,t){if("click"==e.type&&"btnBuy"==e.target.name){var i=this.view.listContainer.getCell(t).dataSource;if(i.playerId==Ng.userVO.unitId.id)return void yc.instance.pullOff(i.id);i.level>Ng.userVO.getValue(1006)+5?this.sendNotification("prompted_info_show",{info:"您的等级低于物品5级,不可购买."}):this._buyConfirmPop.popVo(i)}},i.buySure=function(){if(this._buyConfirmPop._item){if(this._buyConfirmPop._aimCount<1||this._buyConfirmPop._aimCount>1e5)return void this.sendNotification("prompted_info_show",{info:"请输入正确的购买数量"});var e=Ng.userVO.getValue(1019),t=this._buyConfirmPop._aimCount*this._buyConfirmPop._item.price;t>e?this.sendNotification("prompted_info_show",{info:"购买需要仙玉:"+t}):(yc.instance.buy(this._buyConfirmPop._item.id,this._buyConfirmPop._aimCount),this._buyConfirmPop.close())}},i.updateBuyItem=function(e,t){var i=e.dataSource;if(1==i.type&&e instanceof modules.exchange.view.componets.ExchangeEquipCellView)null!=e.dataSource?(Ln.renderExchangeItem(e,i),e.visible=!0):e.visible=!1;else{if(!(0==i.type&&e instanceof modules.exchange.view.componets.ExchangePropCellView))return void(e.visible=!1);null!=e.dataSource?(Ln.renderExchangeItem(e,i),e.visible=!0):e.visible=!1}e.showPrice(i.price),i.playerId==Ng.userVO.unitId.id?e.btnTake.label="下架":e.btnTake.label="购买"},i.onScrollChangeItem=function(e){if(!this.isExecute)switch(e){case 0:this._searchPage.pager.recoards.length=0,this.isExecute=!0,yc.instance.search(this.searchCnd,1,20);break;case 1:this._searchPage&&this._searchPage.pager.pageNumber<this._searchPage.pager.totalPage&&(this.isExecute=!0,yc.instance.search(this.searchCnd,this._searchPage.pager.pageNumber+1,20))}},i.showSoldItems=function(e){this.view.freshLogs(e)},i.showSalingItems=function(e){for(;this.view.addPanel.numChildren>0;)this.view.addPanel.removeChildAt(0);var t;if(0==e.length)t=new pN,t.on("click",this,this.mouseHandler,[null]),this.view.addPanel.addChild(t);else{var i,n=0;for(var o in e){if(i=e[o],1==i.type)t=new uN,Ln.renderExchangeItem(t,i);else{if(0!=i.type)continue;t=new dN,Ln.renderExchangeItem(t,i)}var s=t.getChildByName("lbNotice");i.isShowTime?(s.color="#00dc24",s.text="正在展示出售"):(s.color="#fffc00",s.text="等待系统自动分配上架"),t.showPrice(i.price),t.btnTake.label="下架",t.on("click",this,this.mouseHandler,[i]),t.y=n,n=n+t.height+10,this.view.addPanel.addChild(t)}e.length<10&&(t=new pN,t.on("click",this,this.mouseHandler,[null]),t.y=n,n=n+t.height+10,this.view.addPanel.addChild(t))}},i.mouseHandler=function(e,t){if("click"==t.type&&"addBtn"==t.target.name)if(null==e){var i=this.facade.retrieveProxy("MarketProxy");if(!(i.vipInfo.vipMontAdd>0||i.vipInfo.jadeCard.isEffecting))return void this.sendNotification("prompted_info_show",{info:"上架需要激活任意月卡"});var n=this.facade.retrieveProxy("GoodsProxy"),o=n.listItems(0);this.selectPropsPop.popPops(o)}else yc.instance.pullOff(e.id)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="ExchangeMediator",t.OPEN_LEVE=35,t.pageSize=20,t}(lc),function(e){function t(){this.leftDay=0,this.nowDay=0,this.effectFinishNum=0,this.day7Dict=new uo,t.__super.call(this,"Activity7DayPropxy")}o(t,"modules.activity7day.model.Activity7DayPropxy",e);var i=t.prototype;return i.setData=function(t){if(e.prototype.setData.call(this,t),this.day7Dict.clear(),this.effectFinishNum=0,this.leftDay=0,this.nowDay=10,null!=t){var i=new Date(this.day7data.begin);i.setHours(0),i.setSeconds(0),i.setMilliseconds(0),g.clock.fixTimeZoneOffset(i),this.day7data.begin=i.getTime();var n=this.day7data.begin+864e6-g.clock.currentTime;this.leftDay=vo["int"](n/864e5),this.nowDay=10-this.leftDay;for(var o=this.day7data.activing.split("|"),s=0;s<o.length;s++){var r=o[s].split("_");this.day7Dict.set(vo["int"](r[0]),vo["int"](r[1]))}for(var a=1;7>=a&&a<=this.nowDay;a++)-1!=this.day7data.finishedIds.indexOf(a)&&(this.effectFinishNum+=1)}},i.isActiving=function(){if(null==this.data)return!1;var e=this.day7data.begin+864e6-g.clock.currentTime;return!(0>=e)},i.getActEndTime=function(){var e="活动剩余：";return this.leftDay>0?e=e+this.leftDay+"天":e+="最后一天(23点59分结束)",e},i.hasAward=function(){if(null==this.data)return!1;var e=this.day7data.begin+864e6-g.clock.currentTime;if(0>=e)return!1;var t=vo["int"](e/864e5),i=0;for(i=1;7>=i&&10-t>=i;i++){if(this.day7data.finishedIds.indexOf(i)>=0&&-1==this.day7data.awardedIds.indexOf(i))return!0;if((3==i||5==i||7==i)&&this.effectFinishNum>=i&&-1==this.day7data.awardsExts.indexOf(i))return!0}return!1},s(0,i,"day7data",function(){return this.data}),t.NAME="Activity7DayPropxy",t.EFFECT_DAY=10,t}(sc)),Wf=function(e){function t(){t.__super.call(this)}o(t,"modules.activity7day.controller.Activity7DayPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(He.ACTIVITY_7DAY_QUERY,Yf),this.facade.registerCommand(He.ACTIVITY_7DAY_TAKE_AWARD,Yf,!0),this.facade.registerCommand(He.ACTIVITY_7DAY_TAKE_AWARD_EX,Yf,!0)},t}(rc),Yf=function(e){function t(){t.__super.call(this)}o(t,"modules.activity7day.controller.commands.Activity7DayCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 1:var i=v.protoCodec.getResponseDecoder().decode("Activity7Day",t.value),n=this.facade.retrieveProxy("Activity7DayPropxy");n.setData(i),this.sendNotification("ACTIVIT_7_DAY_INFO");break;case 2:case 3:var o=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),s=Te.value(o);s.isEmpty?this.sendNotification("prompted_info_show",{info:"奖励领取成功"}):this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"领取奖励成功",awards:s,desc:""})}else 1==t.cmd&&this.sendNotification("ACTIVIT_7_DAY_INFO")},t}(rc),qf=function(e){function t(){t.__super.call(this)}o(t,"modules.skill.controller.SkillPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Ue.SKILL_LIST,Qf,!0),this.facade.registerCommand(Ue.SKILL_CHANGE_POSITION,Xf,!0),this.facade.registerCommand(Ue.SKILL_LEARN,Xf,!0),this.facade.registerCommand(Ue.SKILL_LIST_PASSIVE,Qf,!0),this.facade.registerCommand(Ue.PUSH_LEARN_PASSIVE,Xf)},t}(rc),Kf=function(e){function t(){t.__super.call(this,"RecordMediator")}o(t,"modules.record.view.RecordMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new sP),this.view.logs.visible=!1,this.view.lbEmpty.visible=!0},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","OPEN_RECORD_VIEW","RECEIVE_RECORD_EXPENSE"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this.view.logs.visible=!1,this.view.lbEmpty.visible=!0;break;case"OPEN_RECORD_VIEW":bc.instance.queryExpenseLog(),this.view.popup();break;case"RECEIVE_RECORD_EXPENSE":var t=e.getBody();t&&t.length>0?(this.view.logs.dataSource=t,this.view.logs.visible=!0,this.view.lbEmpty.visible=!1):(this.view.logs.visible=!1,this.view.lbEmpty.visible=!0)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="RecordMediator",t}(lc),Xf=function(e){function t(){t.__super.call(this)}o(t,"modules.skill.controller.commands.SkillLearnCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n=v.protoCodec.getResponseDecoder().decode("Skill",t.value),o=this.facade.retrieveProxy("SkillProxy");switch(t.cmd){case 2:i=o.levelUp(n.id,n.level),this.sendNotification("SKILL_DATA_LEVEL",i);break;case 101:i=o.levelUpPassive(n.id,n.level),this.sendNotification("SKILL_PASSIVE_LEVEL_UP",i)}}},t}(rc),Qf=function(e){function t(){t.__super.call(this)}o(t,"modules.skill.controller.commands.SkillListCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("SkillList",t.value),n=this.facade.retrieveProxy("SkillProxy");switch(t.cmd){case 1:var o=n.receiveSkills(i.skills);this.sendNotification("SKILL_DATA_INIT",o);break;case 4:var s=n.receivePassiveSkill(i.skills);this.sendNotification("SKILL_PASSIVE_INIT",s)}}},t}(rc),jf=function(e){function t(){this._pasiveSkills=new uo,t.__super.call(this,"SkillProxy",new Array)}o(t,"modules.skill.model.SkillProxy",e);var i=t.prototype;return i.receiveSkills=function(e){this.skills.length=0;var t;for(var i in e)t=e[i],this.skills.push(new We(t));return this.skills},i.levelUp=function(e,t){var i;for(var n in this.skills)if(i=this.skills[n],i.id==e)return i.level=t,i;return null},i.receivePassiveSkill=function(e){this._pasiveSkills.clear();var t;for(var i in e){t=e[i];var n=new We(t);this._pasiveSkills.set(n.id,n)}return this._pasiveSkills},i.getPassiveSkills=function(){return this._pasiveSkills},i.levelUpPassive=function(e,t){var i=this._pasiveSkills.get(e);return i?i.level=t:(i=new We({id:e,level:t}),this._pasiveSkills.set(e,i)),i},i.clear=function(){this.skills.length=0,this._pasiveSkills.clear()},s(0,i,"skills",function(){return this.data}),t.NAME="SkillProxy",t}(sc),Zf=function(e){function t(){t.__super.call(this)}o(t,"modules.smithy.controller.SmithyPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Ye.SMITHY_EXCHANGE_GHOST,o_,!0),this.facade.registerCommand(Ye.SMITHY_HECHENG_COMMON,i_,!0),this.facade.registerCommand(Ye.SMITHY_HECHENG_COMMON_FAST,i_,!0),this.facade.registerCommand(Ye.SMITHY_HECHENG_SPECIAL,i_,!0),this.facade.registerCommand(Ye.SMITHY_EQUIP,t_,!0),this.facade.registerCommand(Ye.SMITHY_EQUIP_DH,n_,!0),this.facade.registerCommand(Ye.SMITHY_IDENTIFY_SP_PROP,s_,!0),this.facade.registerCommand(Ye.SMITHY_BUILD_EQUIP_EX,$f,!0),this.facade.registerCommand(Ye.SMITHY_ENCHANTMENT,$f,!0),this.facade.registerCommand(Ye.SMITHY_REBUILD_EQUIP_EX,$f,!0),this.facade.registerCommand(Ye.SMITHY_REBUILD_EQUIP_EX_DELAY,$f,!0),this.facade.registerCommand(Ye.SMITHY_REBUILD_CHOSE,$f,!0),this.facade.registerCommand(Ye.SMITHY_UPGRADE_GRAPH_SIMPLE,Jf,!0),this.facade.registerCommand(Ye.SMITHY_UPGRADE_GRAPH_STONE,Jf,!0),this.facade.registerCommand(Ye.SMITHY_CHG_EX_EQUIP_NATURE,$f,!0)},t}(rc),Jf=function(e){function t(){t.__super.call(this)}o(t,"modules.smithy.controller.commands.UpgradeGraphCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success?this.sendNotification("prompted_info_show",{info:"图纸升品成功"}):console.log("update talisman get.. error:"+t.status)},t}(rc),$f=function(e){function t(){t.__super.call(this)}o(t,"modules.smithy.controller.commands.SmithyEquipExCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n=v.protoCodec.getResponseDecoder().decode("ItemGoods",t.value);this.facade.retrieveProxy("GoodsProxy");switch(t.cmd){case 6:i=new rd(n),this.sendNotification("SMITHY_SUCCESS",i);break;case 7:i=this.optionEquip(n),this.sendNotification("POP_EQUIP_OPTION_SUCCESS",i,Ye.SMITHY_ENCHANTMENT);break;case 8:i=this.optionEquip(n),this.sendNotification("POP_EQUIP_OPTION_SUCCESS",i,Ye.SMITHY_REBUILD_EQUIP_EX);break;case 11:i=this.optionEquip(n),this.sendNotification("POP_EQUIP_OPTION_SUCCESS",i,Ye.SMITHY_REBUILD_EQUIP_EX_DELAY);break;case 12:i=this.optionEquip(n),this.sendNotification("POP_EQUIP_OPTION_SUCCESS",i,Ye.SMITHY_REBUILD_CHOSE);break;case 21:i=this.optionEquip(n),this.sendNotification("POP_EQUIP_OPTION_SUCCESS",i,Ye.SMITHY_CHG_EX_EQUIP_NATURE)}}},i.optionEquip=function(e){var t=this.facade.retrieveProxy("GoodsProxy"),i=t.getItemById(e.id,1);i.updateForOption(e);var n=new go;return n.add(i.backpack),this.sendNotification("FRESH_GOODS_PACK",n),i},t}(rc),e_=function(e){function t(){this._inited=!1,t.__super.call(this,"Activity7DayMediator")}o(t,"modules.activity7day.view.Activity7DayMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new dP)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","USER_INIT","ZERO_CLOCK_TRIGER","SHOW_ACTIVIT_7_DAY_PAGE","ACTIVIT_7_DAY_INFO","RECEIVE_DUNGEON_LIMIT_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this._inited=!1;var t=this.facade.retrieveProxy("Activity7DayPropxy");t.setData(null);break;case"ZERO_CLOCK_TRIGER":case"USER_INIT":Ec.instance.query();break;case"SHOW_ACTIVIT_7_DAY_PAGE":this.vi.popup(),this.freshInfo();break;case"ACTIVIT_7_DAY_INFO":case"RECEIVE_DUNGEON_LIMIT_INFO":this.freshInfo()}},i.freshInfo=function(){var e=this.facade.retrieveProxy("Activity7DayPropxy");if(null!=e.day7data&&this.vi){var t=this.facade.retrieveProxy("DungeonProxy");t&&t.getDungeonLimitOpen()&&this.vi.showInfo(t.getDungeonLimitOpen().openLimit)}},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="Activity7DayMediator",t}(lc),t_=function(e){function t(){t.__super.call(this)}o(t,"modules.smithy.controller.commands.SmithyEquipCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemGoods",t.value),n=new rd(i);this.sendNotification("SMITHY_SUCCESS",n)}},t}(rc),i_=function(e){function t(){t.__super.call(this)}o(t,"modules.smithy.controller.commands.SmithyPropCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeIntArr(t.value);this.sendNotification("SMITHY_SUCCESS",i,"props")}},t}(rc),n_=function(e){function t(){t.__super.call(this)}o(t,"modules.smithy.controller.commands.DhEquipCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemGoods",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.getItemById(i.id,1);o.updateDhAttribute(i.attrs),this.sendNotification("prompted_info_show",{info:"装备点化成功^^。"})}},t}(rc),o_=function(e){function t(){t.__super.call(this)}o(t,"modules.smithy.controller.commands.ExchangeGhostCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success&&this.sendNotification("prompted_info_show",{info:"兑换材料成功^^。"})},t}(rc),s_=function(e){function t(){t.__super.call(this)}o(t,"modules.smithy.controller.commands.IdentifyPropSpCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemGoods",t.value),n=new ld(i);this.sendNotification("SMITHY_SUCCESS",n,"ident")}},t}(rc),r_=function(e){function t(){this.init=!1,this._needFresh=!1,this._passiveSkills=null,t.__super.call(this,"SkillMediator")}o(t,"modules.skill.view.SkillMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new vN)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","CHANGE_NATURE_RESULT","SKILL_DATA_INIT","SKILL_DATA_LEVEL","USER_LEVEL_CHANGE","USER_CURRENCY_CHANGE","SKILL_PASSIVE_INIT","SKILL_PASSIVE_LEVEL_UP"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":var t=this.facade.retrieveMediator("SkillProxy");t&&t.clear(),this.view.showPassives(null);case"CHANGE_NATURE_RESULT":this.init=!1;break;case"SKILL_DATA_INIT":this.view.skillList.visible=!0,this.view.showSkills(e.getBody());break;case"SKILL_PASSIVE_INIT":this._passiveSkills=e.getBody(),this.view.showPassives(this._passiveSkills),this._needFresh=!0,this.fresh();break;case"SKILL_DATA_LEVEL":case"USER_LEVEL_CHANGE":case"USER_CURRENCY_CHANGE":case"SKILL_PASSIVE_LEVEL_UP":this._needFresh=!0,this.fresh()}},i.onShow=function(){0==this.init&&(this.init=!0,xc.instance.listSkills()),this.view.skillList.dataSource?this.view.skillList.visible=!0:this.view.skillList.visible=!1,this.fresh()},i.fresh=function(){this._needFresh&&this.view.visible&&(this.view.skillList.refresh(),this._needFresh=!1)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="SkillMediator",t}(lc),a_=function(e){function t(){t.__super.call(this)}o(t,"modules.chat.controller.ChatPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Ke.CHAT_GAME_TOKEN,h_),this.facade.registerCommand(Ke.CHAT_GAME_PUSH,d_),this.facade.registerCommand(Ke.CHAT_GAME_PUSH_PROMPT,d_),this.facade.registerCommand(Ke.CHAT_LOOK_ITEM,p_,!0),this.facade.registerCommand(Ke.CHAT_LOOK_PET,p_,!0),this.facade.registerCommand(Ke.CHAT_CHECK_TOKEN,f_),this.facade.registerCommand(Ke.CHAT_UPDATE_TOKEN,f_),this.facade.registerCommand(Ke.CHAT_SEND,u_,!0),this.facade.registerCommand(Ke.CHAT_REPORT,l_,!0),this.facade.registerCommand(Ke.CHAT_NOT_CARE,c_,!0),this.facade.registerCommand(Ke.CHAT_PUSH,d_)},t}(rc),l_=function(e){function t(){t.__super.call(this)}o(t,"modules.chat.controller.commands.ChatReportCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)this.sendNotification("prompted_info_show",{info:"举报成功，举报信息已上传"});else switch(t.status){case-9:this.sendNotification("prompted_info_show",{info:"您已被系统封禁"});break;case-11:this.sendNotification("prompted_info_show",{info:"您的举报有点频繁，休息下再试"});break;default:this.sendNotification("prompted_info_show",{info:"举报失败"})}},t}(rc),h_=function(e){function t(){t.__super.call(this)}o(t,"modules.chat.controller.commands.ChatTokenCommand",e);var i=t.prototype;return i.execute=function(e){console.log("收到聊天token..");var t=e.getBody();if(t.success){var i=t.value,n=i.getUint8Array(i.pos,i.bytesAvailable),o=this.facade.retrieveProxy("ChatProxy");o&&o.updateToken(n)}},t}(rc),c_=function(e){function t(){t.__super.call(this)}o(t,"modules.chat.controller.commands.ChatNocareCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)this.sendNotification("prompted_info_show",{info:"拉黑成功，不再接收对方聊天信息"});else switch(t.status){case-9:this.sendNotification("prompted_info_show",{info:"您已被系统封禁"});break;case-11:this.sendNotification("prompted_info_show",{info:"您的操作有点频繁，休息下再试"});break;default:this.sendNotification("prompted_info_show",{info:"拉黑失败"})}},t}(rc),u_=function(e){function t(){t.__super.call(this)}o(t,"modules.chat.controller.commands.ChatSendCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success);else switch(t.status){case-3:this.sendNotification("CHAT_DONT_SEND_NUMBER");break;case-9:this.sendNotification("prompted_info_show",{info:"您已被系统禁言"});break;case-10:this.sendNotification("prompted_info_show",{info:"对方无法收到您的信息"});break;case-11:this.sendNotification("prompted_info_show",{info:"您的速度太快，休息下再试"});break;default:this.sendNotification("prompted_info_show",{info:"对方未在线，请稍后再试"})}},t}(rc),d_=function(e){function t(){t.__super.call(this)}o(t,"modules.chat.controller.commands.ChatPushCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 101:this.dealPush(t);break;case 100:this.dealPushGame(t);break;case 200:this.dealPushGamePrompt(t)}},i.dealPushGamePrompt=function(e){var t=v.protoCodec.getResponseDecoder().decode("ChatInfo",e.value);t&&this.filterPass(t.info)||this.sendNotification("prompted_info_show",{info:t.info,updateTime:3e3})},i.dealPushGame=function(e){var t=v.protoCodec.getResponseDecoder().decode("ChatInfo",e.value);t&&this.filterPass(t.info)||this.sendNotification("SHOW_CHAT_MARQUEE",t)},i.dealPush=function(e){var t=v.protoCodec.getResponseDecoder().decode("ChatRespose",e.value);t&&this.filterPass(t.msg)||this.sendNotification("RECEIVE_CHAT_PUSH",t)},i.filterPass=function(e){return null==e?!0:-1!=e.indexOf("世界首领【")&&Ng.userVO.getValue(1006)<45},t}(rc),p_=function(e){function t(){t.__super.call(this)}o(t,"modules.chat.controller.commands.ChatLookCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 10:this.dealItem(t);break;case 11:this.dealPet(t)}},i.dealPet=function(e){var t=v.protoCodec.getResponseDecoder().decode("LookPet",e.value),i=new on(t.pet);i.updateAttributes(t.attr.attributes),this.sendNotification("CHAT_LOOK_ITEM",i)},i.dealItem=function(e){var t=v.protoCodec.getResponseDecoder().decode("ItemGoods",e.value);switch(t.goodsType){case 0:var i=new ld(t);this.sendNotification("CHAT_LOOK_ITEM",i);break;case 1:var n=new rd(t);this.sendNotification("CHAT_LOOK_ITEM",n);break;case 6:var o=new ad(t);this.sendNotification("CHAT_LOOK_ITEM",o)}},t}(rc),f_=function(e){function t(){t.__super.call(this)}o(t,"modules.chat.controller.commands.ChatCheckTokenCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody(),i=this.facade.retrieveProxy("ChatProxy");console.log("收到验证聊天token..结果：",t.success),t.success?(i.checked(1),this.sendNotification("TOKEN_CHECKED"),i.getLastMsg()):i.checked(-2)},t}(rc),__=function(e){function t(){this.freshAble=!1,this.upgradeView=null,this._smithySuccessPop=null,this._smithyEquipConfirm=null,this.gridIndex=0,this.hasMetas=!1,this.hasMetaSp=!1,this.propsMetas=null,this.propsPool=[],this._pos=-1,this._aimEquipBase=null,this.selectPropsPop=new cP(new h(this,this.onPropPopSelect)),t.__super.call(this,"SmithyMediator")}o(t,"modules.smithy.view.SmithyMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this;this.setViewComponent(new vP),this.upgradeView=new OP,this.view.positionBar.selectHandler=new h(this,this.onPosition),this.view.positionBar.selectedIndex=0,this.view.propsList.renderHandler=new h(this,this.onPropsRender),this.view.propsList.mouseEnabled=!0,this.view.propsList.mouseHandler=new h(this,this.onMouseProp),this.view.submit.on("mousedown",this,this.onSubmit),this._smithySuccessPop=new uP,this._smithyEquipConfirm=new pP,this._smithyEquipConfirm.sureBtn.clickHandler=new h(this,this.onConfirmSmithy),this.view.ntc.clickHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",2)})},i.listNotificationInterests=function(){return["OPEN_SMITHY_VIEW","OPEN_UPGRADE_GRAPH_VIEW","SMITHY_SUCCESS","FRESH_GOODS_PACK"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_SMITHY_VIEW":this.view.popup(),0==this.hasMetas&&0==this.propsPool.length?this.onPosition(this.view.positionBar.selectedIndex):this.freshAble&&(this.onPosition(this.view.positionBar.selectedIndex),this.freshAble=!0);break;case"OPEN_UPGRADE_GRAPH_VIEW":this.showUpgradPage(e.getBody());break;case"FRESH_GOODS_PACK":var t=e.getBody();t.contain(0)&&(0==this.hasMetas&&0==this.propsPool.length&&(this.onPosition(this.view.positionBar.selectedIndex),this.selectPropsPop.isPopup&&this.selectPropsPop.props.dataSource!=this.propsPool&&this.selectPropsPop.popPops(this.propsPool,!0)),this.freshAble=!0);break;case"SMITHY_SUCCESS":if("props"==e.getType()){var i=e.getBody();this.smithySuccessPop.showProp(i[0],i[1]),i.length>2&&(this.smithySuccessPop.title.text=i[2])}else"ident"==e.getType()?this.smithySuccessPop.showPropIdentify(e.getBody()):"rebuild"==e.getType()?this.smithySuccessPop.showPropRebuild(e.getBody()):(this.onPosition(this.view.positionBar.selectedIndex),this.freshAble=!0,Eb.isNewGuy?this.smithySuccessPop.showEquip(e.getBody(),!0):this.smithySuccessPop.showEquip(e.getBody()))}},i.onPropsRender=function(e,t){if(this.view.propsList.dataSource){var i=this.view.propsList.dataSource[t],n=e.getChildByName("prop"),o=e.getChildByName("putinMate");i?(Ln.renderProps(n,i),Ln.changeCountShow(n,1),n.visible=!0,o.visible=!1):(n.visible=!1,o.visible=!0,o.getChildByName("lightR").visible=Eb.lastId<=13)}},i.onMouseProp=function(e,t){if("click"==e.type){this.gridIndex=t;var i=this.propsMetas[this.gridIndex],n=!this.hasMetaSp;i&&2==i.propConf.propType&&(n=!0),
this.selectPropsPop.popPops(this.propsPool,n)}},i.onPropPopSelect=function(e){this._onPropPopSelect(e)},i.getEmptyNum=function(){var e,t=0;for(var i in this.propsMetas)e=this.propsMetas[i],e||(t+=1);return t},i.autoPutin=function(e){for(var t=0;t<this.propsMetas.length;t++)null==this.propsMetas[t]&&(this.gridIndex=t,this._onPropPopSelect(e))},i._onPropPopSelect=function(e){if(this.propsPool&&e){var t=this.propsPool.indexOf(e);if(-1==t)return;e.countTmp--,e.countTmp<=0&&(this.propsPool.splice(t,1),this.selectPropsPop.props.refresh()),this.selectPropsPop.close();var i=this.propsMetas[this.gridIndex];if(i){i.countTmp++;var n,o=!1;for(var s in this.propsPool)if(n=this.propsPool[s],n&&n.id==i.id){o=!0;break}o||this.propsPool.push(i),2==i.propConf.propType&&(this.hasMetaSp=!1),this.selectPropsPop.props.refresh()}this.propsMetas[this.gridIndex]=e,this.hasMetas=!0,2==e.propConf.propType&&(this.hasMetaSp=!0),this.onPropsRender(this.view.propsList.getCell(this.gridIndex),this.gridIndex);var r,a=0;for(var l in this.propsMetas)r=this.propsMetas[l],r&&(a+=r.propConf.silverPrice);this.view.costSilver.text=""+a,this.view.silverIcon.visible=!0}},i.onPosition=function(e){this._pos=e+1,this.view.costSilver.text="",this.view.silverIcon.visible=!1;var t=0,i=0;switch(e){case 0:t=6,i=1;break;case 1:t=5,i=2;break;case 2:t=4,i=2;break;case 3:t=3,i=2;break;case 4:t=3,i=2;break;case 5:t=4,i=3;break;case 6:t=4,i=3}this.propsMetas=[],this.hasMetas=!1,this.hasMetaSp=!1;for(var n=0;t>n;n++)this.propsMetas.push(null);this.view.propsList.dataSource=this.propsMetas,this.propsPool=[];var o,s=this.facade.retrieveProxy("GoodsProxy"),r=s.listItems(0);for(var a in r)if(o=r[a],!(null==o||o.count<=0)&&0==o.goodsType){var l=o;if(null==l.propConf)continue;if(2!=l.propConf.propType&&1!=l.propConf.propType)continue;if(Eb.isNewGuy&&1==l.propConf.quality)continue;l.propConf.position==i&&this.propsPool.push(l.resetCountTmp())}this.propsPool.sort(this.compareFunctionProp)},i.compareFunctionProp=function(e,t){var i=e.propConf.id,n=t.propConf.id,o=Math.floor(i/1e6),s=Math.floor(n/1e6);return o==s?i>n?1:n>i?-1:0:(o=i%1e6,s=n%1e6,o>s?1:s>o?-1:i>n?1:n>i?-1:0)},i.onSubmit=function(e){op.aldSendEvent("锻造装备");var t,i=!1,n=new uo,o=0,s=0,r=0,a=0;for(var l in this.propsMetas){if(t=this.propsMetas[l],null==t)return void this.sendNotification("prompted_info_show",{info:"需要将所有材料格子都放入材料才可锻造"});if(2==t.propConf.propType){if(i)return void this.sendNotification("prompted_info_show",{info:"只能有一个特殊材料"});i=!0}var h=t.propConf.type,c=n.get(h);null==c&&(c=0),c+=1,n.set(h,c),o+=t.quality,c>=a&&(a=c,s=h,r=t.baseId)}if(a<=Math.floor(this.propsMetas.length/2))return void this.sendNotification("prompted_info_show",{info:"同系同等级材料数量需要超过一半才可锻造。"});if(o=Math.floor(o/this.propsMetas.length),this._aimEquipBase=g.database.getEquipForMix(s,this._pos,o),null==this._aimEquipBase)return void this.sendNotification("prompted_info_show",{info:"找不到主材料对应的目标装备。"});var u=vo["int"](this.view.costSilver.text);return Ng.userVO.getValue(1009)>u?void this.smithyEquipConfirm.pop(this._aimEquipBase):void this.sendNotification("prompted_info_show",{info:"铜币不足无法锻造。"})},i.onConfirmSmithy=function(){this.smithyEquipConfirm.close();var e=vo["int"](this.view.costSilver.text);return Ng.userVO.getValue(1009)>e?void Sc.instance.mixEquip(this._aimEquipBase.id,this.propsMetas):void this.sendNotification("prompted_info_show",{info:"铜币不足无法锻造。"})},i.showUpgradPage=function(e){if(e.quality>=6)return void this.sendNotification("prompted_info_show",{info:"当前图纸已是最高品质"});var t,i=this.facade.retrieveProxy("GoodsProxy"),n=i.listItems(0),o=[],s=[];for(var r in n)if(t=n[r],!(null==t||t.count<=0)&&t instanceof modules.goods.model.data.PackProp){var a=t;if(17==a.propConf.propType&&a.propConf.level==e.propConf.level&&t.quality==e.quality){if(a.id==e.id){a.count<=1||(a.countTmp=a.count-1,o.push(a));continue}o.push(a.resetCountTmp())}else 3==a.propConf.propType&&a.propConf.quality>e.quality&&a.propConf.level>=e.propConf.level&&s.push(a)}s.sort(this.compareFunctionStone),o.sort(this.compareFunctionBad),this.upgradeView.popSelect(e,o,s)},i.compareFunctionStone=function(e,t){return e.baseId-t.baseId},i.compareFunctionBad=function(e,t){return e.quality<t.quality?-1:e.quality>t.quality?1:t.baseId-e.baseId},s(0,i,"smithySuccessPop",function(){return this.getViewComponent(),this._smithySuccessPop}),s(0,i,"smithyEquipConfirm",function(){return this.getViewComponent(),this._smithyEquipConfirm}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="SmithyMediator",t}(lc),m_=function(e){function t(){this._token=null,this._socket=null,this._tryConnectTimes=0,this._tokenChecked=0,this._delay=0,t.__super.call(this,"ChatProxy")}o(t,"modules.chat.model.ChatProxy",e);var n=t.prototype;return n.setToken=function(e){this._token=e},n.onRegister=function(){try{if(""==v.socketIPChat)return;this.sendNotification("CHAT_SERVER_TRY_CONNECT"),this._socket=new ym(v.socketIPChat,v.socketPortChat),this._socket.on("open",this,this.onOpen),this._socket.on("close",this,this.onClose),this._socket.on("error",this,this.onError)}catch(e){}this._tryConnectTimes=0},n.close=function(){i.timer.clear(this,this.heartBit),this._socket&&(as.debug(this,"reconect","websocket reconect"),this._socket.close()),this.clearSocket()},n.reconect=function(){if(!i.stage.isVisibility)return void console.log("聊天 pass reconect because stage not visible.");if(this._socket){if(0==this._socket.state)return void console.log("聊天 pass reconect because state creating.");as.debug(this,"reconect","websocket reconect"),this._socket.connected&&this._socket.close(),this.clearSocket()}try{if(""==v.socketIPChat)return;this.sendNotification("CHAT_SERVER_TRY_CONNECT"),this._socket=new ym(v.socketIPChat,v.socketPortChat),this._socket.on("open",this,this.onOpen),this._socket.on("close",this,this.onClose),this._socket.on("error",this,this.onError),this._tryConnectTimes+=1}catch(e){console.log("聊天 reconect erro",e)}},n.clearSocket=function(){this._socket&&(this._socket.offAll("open"),this._socket.offAll("close"),this._socket.offAll("error"),this._socket=null),this._tryConnectTimes=0,this._tokenChecked=0},n.onOpen=function(){console.log("聊天websocket连接，onOpen"),this.sendNotification("CHAT_SERVER_CONNECTED"),this._token&&this.updateToken(this._token),i.timer.loop(5e3,this,this.heartBit)},n.onClose=function(){console.log("聊天websocket断开，onClose"),this.clearSocket(),this.sendNotification("CHAT_SERVER_CLOSE")},n.onError=function(){console.log("聊天websocket异常，onError"),this.clearSocket(),this.sendNotification("CHAT_SERVER_CLOSE")},n.updateToken=function(e){if(this._token=e,this._socket&&this._socket.connected){var t=new no;if(t.module=1,0==this._tokenChecked||-2==this._tokenChecked)t.cmd=6,this._tokenChecked=-1,console.log("请求验证聊天token..",t.cmd);else{if(1!=this._tokenChecked)return void console.log("聊天ws等待确认状态");t.cmd=7,console.log("请求更新聊天token..",t.cmd)}t.value=this._token,this._socket.sendPacket(t)}},n.checked=function(e){this._tokenChecked=e},n.sendMsg=function(e,t,i){if(1!=!this._tokenChecked&&this._socket&&this._socket.connected){var n=new no;n.module=1,n.cmd=1;var o={ch:e,msg:i};null!=t&&""!=t&&(o.target=t),n.value=v.protoCodec.getRequestEncoder().encode("ChatRequest",o),this._socket.sendPacket(n)}},n.report=function(e,t,i){if(1!=!this._tokenChecked&&this._socket&&this._socket.connected){var n=new no;n.module=1,n.cmd=8;var o={ch:t,target:e,msg:i};n.value=v.protoCodec.getRequestEncoder().encode("ChatRequest",o),this._socket.sendPacket(n)}},n.notCare=function(e){if(1!=!this._tokenChecked&&this._socket&&this._socket.connected){var t=new no;t.module=1,t.cmd=9;var i=new Vr;i.endian="bigEndian";var n=c.fromNumber(e);i.writeUint32(n.getHight()),i.writeUint32(n.getLow()),t.value=i.buffer,this._socket.sendPacket(t)}},n.getLastMsg=function(){if(1!=!this._tokenChecked&&this._socket&&this._socket.connected){var e=new no;e.module=1,e.cmd=30,e.value=null,this._socket.sendPacket(e)}},n.heartBit=function(){if(this._delay+=5e3,this._socket&&this._socket.connected){if(this._delay%1e4==0){var e=new no;e.module=1,e.cmd=0,this._socket.sendPacket(e)}}else null==this._socket&&this.reconect()},t.NAME="ChatProxy",t}(sc),g_=function(e){function t(){t.__super.call(this)}o(t,"modules.worldboss.controller.commands.WorldBossPushCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("WorldBoss",t.value),n=this.facade.retrieveProxy("WorldBossProxy");if(n.boss&&n.boss.id==i.id){switch(n.receiveBoss(i),t.cmd){case 8:this.sendNotification("prompted_info_show",{info:"世界首领开启时间更新"});break;case 9:Cc.instance.queryInfo()}this.sendNotification("RECEIVE_WORLD_BOSS_BASE")}}},t}(rc),v_=function(e){function t(){t.__super.call(this)}o(t,"modules.worldboss.controller.commands.WorldBossViewCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("WorldBossView",t.value),n=this.facade.retrieveProxy("WorldBossProxy"),o=n.receiveBossView(i);this.sendNotification("RECEIVE_WORLD_BOSS_VIEW",o);var s=n.receiveBoss(i.boss);this.sendNotification("RECEIVE_WORLD_BOSS_BASE",s)}},t}(rc),y_=function(e){function t(){t.__super.call(this)}o(t,"modules.worldboss.controller.commands.WorldBossPlayerCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerWorldBoss",t.value),n=this.facade.retrieveProxy("WorldBossProxy"),o=n.receivePlayerInfo(i);this.sendNotification("RECEIVE_WORLD_BOSS_PLAYER",o)}},t}(rc),b_=function(e){function t(){t.__super.call(this)}o(t,"modules.worldboss.controller.commands.WorldBossBaseCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("WorldBoss",t.value),n=this.facade.retrieveProxy("WorldBossProxy"),o=n.receiveBoss(i);switch(this.sendNotification("RECEIVE_WORLD_BOSS_BASE",o),t.cmd){case 3:case 10:this.sendNotification("prompted_info_show",{info:"喂养成功"}),Cc.instance.queryView();break;case 4:break;case 5:}}else 4==t.cmd&&(Cc.instance.queryView(),Cc.instance.queryInfo()),this.sendNotification("prompted_info_show",{info:"操作失败"})},t}(rc),E_=function(e){function t(){t.__super.call(this)}o(t,"modules.worldboss.controller.commands.WorldBossFightCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("WorldBossDamageWrap",t.value),n=this.facade.retrieveProxy("WorldBossProxy"),o=n.receiveDamageWrap(i);this.sendNotification("RECEIVE_WORLD_BOSS_DAMAGE",o)}else this.sendNotification("RECEIVE_WORLD_BOSS_FIGHT_ERRO",t.status)},t}(rc),x_=function(e){function t(){t.__super.call(this)}o(t,"modules.worldboss.controller.commands.WorldBossAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);switch(t.cmd){case 6:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"喂食排行奖励",awards:n,desc:""});break;case 7:case 11:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"伤害排行奖励",awards:n,desc:""})}}},t}(rc),S_=function(e){function t(){t.__super.call(this)}o(t,"modules.worldboss.controller.WorldBossPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(je.WORLD_BOSS_QUERY_INFO,y_),this.facade.registerCommand(je.WORLD_BOSS_QUERY_VIEW,v_),this.facade.registerCommand(je.WORLD_BOSS_FEED,b_,!0),this.facade.registerCommand(je.WORLD_BOSS_FEED_TALISMAN,b_,!0),this.facade.registerCommand(je.WORLD_BOSS_CHG_OPEN,b_,!0),this.facade.registerCommand(je.WORLD_BOSS_FIGHT_ONCE,E_,!0),this.facade.registerCommand(je.WORLD_BOSS_AWARD_FEED,x_,!0),this.facade.registerCommand(je.WORLD_BOSS_AWARD_FIGHT,x_,!0),this.facade.registerCommand(je.WORLD_BOSS_AWARD_FIGHT_DELAY,x_,!0),this.facade.registerCommand(je.WORLD_BOSS_PUSH_CHG_OPEN,g_),this.facade.registerCommand(je.WORLD_BOSS_PUSH_KILLED,g_)},t}(rc),w_=function(e){function t(){this._boss=null,this._bossView=null,this._bossDamageWrap=null,t.__super.call(this,"WorldBossProxy")}o(t,"modules.worldboss.model.WorldBossProxy",e);var n=t.prototype;return n.receivePlayerInfo=function(e){return this.data=e,this.playerInfo},n.receiveBoss=function(e){return this.boss.update(e),this._boss},n.receiveBossView=function(e){return this._bossView=new Ze(e),this.boss.update(e.boss),this._bossView},n.receiveDamageWrap=function(e){return this._bossDamageWrap=e,this._bossDamageWrap.self&&this.playerInfo&&(this.playerInfo.fightCd=this._bossDamageWrap.self.fightCd),this._bossDamageWrap},n.checkFeedNo1Sync=function(){null!=this.playerInfo&&null!=this.bossView&&(this.bossView&&1==this.bossView.selfFeed.rank||1==this.playerInfo.feedRank)&&this.bossView.selfFeed.rank!=this.playerInfo.feedRank&&i.timer.once(3e3,this,this.onFeedNo1NotSync)},n.onFeedNo1NotSync=function(){Cc.instance.queryView(),Cc.instance.queryInfo()},n.clear=function(){i.timer.clear(this,this.onFeedNo1NotSync),this.data=null,this._boss=null,this._bossView=null},s(0,n,"isFeedNo1",function(){return this.playerInfo&&1==this.playerInfo.feedRank}),s(0,n,"playerInfo",function(){return this.data}),s(0,n,"isFighting",function(){return null!=this.boss&&this.boss.openDate>0&&g.clock.currentTime>=this.boss.openDate&&this.boss.killTime<=0}),s(0,n,"bossDamageWrap",function(){return this._bossDamageWrap}),s(0,n,"bossView",function(){return this._bossView}),s(0,n,"boss",function(){return null==this._boss&&(this._boss=new Je),this._boss}),t.NAME="WorldBossProxy",t}(sc),C_=function(e){function t(){this._chatBtn=null,this._homeView=null,this._lastPlayerId=NaN,this._sendCh=0,this._lastPrivateTarget=null,this._lastEditMsg=null,this._inputItems=new uo,t.__super.call(this,"ChatMediator")}o(t,"modules.chat.view.ChatMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new mN),this.vi.y=338;var e=this.facade.retrieveMediator("HomeMediator");this._homeView=e.view,this._chatBtn=this._homeView.btn_chat,this._chatBtn.clickHandler=new h(this,this.onChat);var t=this._homeView.chatLast;this.vi.chatLastLine.mouseEnabled=!0,t.addChild(this.vi.chatLastLine);var i=new Bd;i.graphics.drawRect(0,0,t.width,t.height,"#f00"),this.vi.chatLastLine.mask=i,this.vi.chatLastLine.on("click",this,this.onLastChat),this.vi.tabCh.selectHandler=new h(this,this.onChanel),v.limitChat?(this.vi.lbCh.visible=!1,this.vi.tabCh.visible=!1,this.vi.tabCh.selectedIndex=5,this.vi.inputMsg.visible=!1,this.vi.getChildByName("bg1").visible=!1):(this.vi.lbCh.visible=!0,this.vi.tabCh.visible=!0,this.vi.tabCh.selectedIndex=1,this.vi.inputMsg.visible=!0),this.vi.inputMsg.on("blur",this,this.onInputChg),this.vi.btn_send.visible=!1,this.vi.btn_send.on("click",this,this.onSendMsg),this.vi.chatPanel.on("chatLink",this,this.onChatLink),this.vi.itemTips.x=(this.vi.width-this.vi.itemTips.width)/2,this.vi.petTips.x=(this.vi.width-this.vi.petTips.width)/2,this.vi.itemTips.visible=!1,this.vi.petTips.visible=!1,this.vi.playerMenu.visible=!1,this.vi.playerMenu.on("click",this,this.onTips),this.vi.report.visible=!1,this.vi.report.on("click",this,this.onReport),this.vi.itemTips.on("click",this,this.onTips),this.vi.petTips.on("click",this,this.onTips)},n.listNotificationInterests=function(){return["USER_INIT","binding_new_session_success","CLEAR_CACHE_DATA","CHAT_PANEL_SHOW","CHAT_INPUT_ITEM","RECEIVE_CHAT_PUSH","CHAT_DONT_SEND_NUMBER","USER_ALLIANCE_CHANGE","USER_TEAM_CHANGE","CHANGE_VIP_INFO","CHAT_SERVER_CLOSE","CHAT_SERVER_TRY_CONNECT","CHAT_SERVER_CONNECTED","TOKEN_CHECKED","CHAT_LOOK_ITEM","CHAT_LOOK_PET"]},n.handleNotification=function(e){var t=null;switch(e.getName()){case"USER_INIT":this._lastPlayerId>0&&Ng.userVO.unitId.id!=this._lastPlayerId&&this.vi.clear(),this._lastPlayerId=Ng.userVO.unitId.id;break;case"binding_new_session_success":console.log("建立聊天"),this.facade.hasProxy("ChatProxy")?(t=this.facade.retrieveProxy("ChatProxy"),t.reconect()):this.facade.registerProxy(new m_),wc.instance.getToken();break;case"CLEAR_CACHE_DATA":console.log("断开聊天"),this.vi.closeChat(),t=this.facade.retrieveProxy("ChatProxy"),t&&(t.setToken(null),t.close());break;case"CHAT_SERVER_CLOSE":this.vi.addSysMsg("聊天服务已断开，正在尝试重连"),this.vi.btn_send.visible=!1,this.vi.inputMsg.editable=!1;break;case"CHAT_SERVER_TRY_CONNECT":this.vi.addSysMsg("正在建立聊天服务"),this.vi.btn_send.visible=!1,this.vi.inputMsg.editable=!1;break;case"CHAT_SERVER_CONNECTED":this.vi.addSysMsg("正在初始聊天服务"),this.vi.btn_send.visible=!1,this.vi.inputMsg.editable=!1;break;case"TOKEN_CHECKED":this.vi.clear(),v.limitChat?(this.vi.addSysMsg("消息已初始",!0),this.vi.btn_send.visible=!1,this.vi.inputMsg.editable=!1):(v.IS_GLOBAL_VERSION?this.vi.addSysMsg("为维护游戏环境，请注意文明聊天，在聊天中不得出现违规信息，若发现将直接禁言或封号处理。",!0):this.vi.addSysMsg("为维护游戏环境，请注意文明聊天，在聊天中不得出现违规信息，若发现将直接禁言或封号处理，情节严重的将转送至相关部门。",!0),this.vi.btn_send.visible=!0,this.vi.inputMsg.editable=!0);break;case"CHAT_PANEL_SHOW":this.onChat("close"==e.getBody());break;case"CHAT_INPUT_ITEM":this.inputItem(e.getBody());break;case"RECEIVE_CHAT_PUSH":this.vi.parent||this.vi.initMsgs||co.showOrHide(this.chatBtn,!0,-5),this.vi.msgReceive(e.getBody());break;case"CHAT_DONT_SEND_NUMBER":var i=new Qe;i.uid=0,i.ch=this._sendCh,i.msg="***",this.vi.msgReceive(i);break;case"USER_ALLIANCE_CHANGE":case"USER_TEAM_CHANGE":case"CHANGE_VIP_INFO":this.vi.btn_send.visible&&wc.instance.getToken();break;case"CHAT_LOOK_ITEM":case"CHAT_LOOK_PET":var n=e.getBody(),o=this.vi.itemTips.getChildByName("prop"),s=this.vi.itemTips.getChildByName("equip"),r=this.vi.itemTips.getChildByName("talisman");n instanceof modules.goods.model.data.PackProp?(Ln.renderProps(o,n),this.vi.itemTips.visible=!0,o.visible=!0,s.visible=!1,r.visible=!1):n instanceof modules.goods.model.data.PackEquip?(Ln.renderEquip(s,n),this.vi.itemTips.visible=!0,o.visible=!1,s.visible=!0,r.visible=!1):n instanceof modules.goods.model.data.PackTalisman?(Ln.renderTalisman(r,n),this.vi.itemTips.visible=!0,o.visible=!1,s.visible=!1,r.visible=!0):n instanceof modules.pet.model.PlayerPet&&(this.showPetInfo(this.vi.petTips,n),this.vi.petTips.visible=!0)}},n.showPetInfo=function(e,t){var i=e.getChildByName("nameTxt"),n=e.getChildByName("nature"),o=e.getChildByName("level"),s=e.getChildByName("quality"),r=e.getChildByName("attributes"),a=e.getChildByName("desc");if(t){i.text=t.getRealName(),i.color=N.getColor(t.getRealQuality()),n.index=t.petCfg.nature-1,n.x=i.x+i.width,o=e.getChildByName("level"),o.text=t.level+"",s=e.getChildByName("quality");var l=t.qualityLevel+t.getQrangeQualityLeveLAdd()+"";t.qualityLevel>=t.petCfg.maxQuality?(l+="（满）",s.color="#c527ff"):s.color="#00dc24",t.addQuality&&(l=l+" + "+t.addQuality),s.text=l;var h,c=[];for(var u in t.attributes.keys){h=t.attributes.keys[u];var d=t.attributes.get(h);if(d){var p=I.getValueStr(h,d);c.push({key:I.getName(h),value:p})}}r.dataSource=c,r.visible=!0,a=e.getChildByName("desc"),a.text=t.petCfg.desc,a.color=N.getColor(t.getRealQuality())}},n.onReport=function(e){switch(e.target.name){case"close":e.target.parent.visible=!1;break;case"submit":var t=this.vi.getReportCb();if(0>=t)return void this.sendNotification("prompted_info_show",{info:"请您勾选举报原因"});var i=this.vi.getReportInfo(),n=this.vi._lookPlayer,o=this.facade.retrieveProxy("ChatProxy"),s="确认举报玩家：<font color='red'>"+n[2]+"</font>";this.sendNotification("POP_CONFIRM_INFO",{info:s,handler:h.create(this,function(e){e&&o.report(n[1],t,i)})}),e.target.parent.visible=!1}},n.onTips=function(e){var t=this.vi._lookPlayer;switch(e.target.name){case"close":e.target.parent.visible=!1;break;case"btnView":this.sendNotification("SHOW_LOOK_PAGE",{playerId:t[1],name:t[2],nature:0,level:0}),this.vi.playerMenu.visible=!1;break;case"btnChat":this.vi.inputMsg.text="/"+t[2]+" ",this._lastPrivateTarget=t[2],this.vi.tabCh.selectedIndex=4,this.vi.inputMsg.focus=!0,this.vi.playerMenu.visible=!1;break;case"btnReport":this.vi.reportPlayer(),this.vi.playerMenu.visible=!1;break;case"btnNocare":var i=this.facade.retrieveProxy("ChatProxy"),n="<br>确认拉黑玩家：<font color='red'>"+t[2]+"</font><br>提示：主动聊私即可解除拉黑";this.sendNotification("POP_CONFIRM_INFO",{info:n,handler:h.create(this,function(e){e&&i.notCare(vo["int"](t[1]))})}),this.vi.playerMenu.visible=!1}},n.inputItem=function(e){if(null!=e){if(this._inputItems.keys.length>=3)return void this.sendNotification("prompted_info_show",{info:"聊天内容最多引用三个物品"});this.sendNotification("prompted_info_show",{info:"物品已引用至聊天中"});var t;if(e instanceof modules.goods.model.data.PackProp){var i=e;t=i.propConf.name}else if(e instanceof modules.goods.model.data.PackEquip){var n=e;t=n.equipConf.name}else if(e instanceof modules.goods.model.data.PackTalisman){var o=e;t=o.talismanConf.name}else if(e instanceof modules.pet.model.PlayerPet)t=e.getRealName();else{if(!(e instanceof modules.fight.model.FightContext))return;t=this._dealFight(e)}for(var s=t,r=this._inputItems.get(t),a=1;null!=r;)t=s+a++,r=this._inputItems.get(t);this._inputItems.set(t,e),t="["+t+"]",this.vi.inputMsg.text+=t}},n._dealFight=function(e){var t=" 挑战 "+e.fighterB.getValue(1002)+" ";return t+=e.fighterA.isDead()?"失败":"获胜"},n.onLastChat=function(e){this.onChat()},n.onChat=function(e){void 0===e&&(e=!1),this.homeView.contains(this.vi)?this.vi.removeSelf():e||(this.homeView.addChild(this.vi),this.vi.reChatLinePos(),co.showOrHide(this.chatBtn,!1))},n.onChanel=function(e){if(0==this.vi.btn_send.visible&&0!=e&&!v.limitChat)return this.vi.tabCh.selectedIndex=0,this.vi.lbCh.text=Xe.CHANELS_ARR[1].name,this.vi.lbCh.color=Xe.CHANELS_ARR[1].color,void this.sendNotification("prompted_info_show",{info:"聊天服务正在初始，请稍后"});var t=this.vi.tabCh.getChildAt(e);switch(t&&co.showOrHide(t,!1),e){case 0:case 5:this.vi.reChatLinePos(e);break;case 1:this.vi.lbCh.text=Xe.CHANELS_ARR[e].name,this.vi.lbCh.color=Xe.CHANELS_ARR[e].color,this._sendCh=e,this.vi.reChatLinePos(this._sendCh);break;case 2:Ng.userVO.getValue(7011)<=0?(this.sendNotification("prompted_info_show",{info:"您未加入宗门"}),this.vi.tabCh.selectedIndex=1):(this.vi.lbCh.text=Xe.CHANELS_ARR[e].name,this.vi.lbCh.color=Xe.CHANELS_ARR[e].color,this._sendCh=e,this.vi.reChatLinePos(this._sendCh));break;case 3:Ng.userVO.getValue(7007)<=0?(this.sendNotification("prompted_info_show",{info:"您未加入队伍"}),this.vi.tabCh.selectedIndex=1):(this.vi.lbCh.text=Xe.CHANELS_ARR[e].name,this.vi.lbCh.color=Xe.CHANELS_ARR[e].color,this._sendCh=e,this.vi.reChatLinePos(this._sendCh));break;case 4:this.vi.lbCh.text=Xe.CHANELS_ARR[e].name,this.vi.lbCh.color=Xe.CHANELS_ARR[e].color,this._sendCh=e,this.vi.reChatLinePos(this._sendCh)}if(this._lastEditMsg){var i=this._lastEditMsg.indexOf(" ");-1!=i&&(this._lastEditMsg=this._lastEditMsg.substring(i+1))}else this._lastEditMsg="";4==this._sendCh?(this._lastPrivateTarget&&(this.vi.inputMsg.text="/"+this._lastPrivateTarget+" "+this._lastEditMsg),this.vi.inputMsg.prompt="/角色名 私聊内容"):(this.vi.inputMsg.text=""+this._lastEditMsg,this.vi.inputMsg.prompt="请输入发送内容")},n._canUsePrivteCh=function(){if(Ng.userVO.getValue(1006)<25){var e=this.facade.retrieveProxy("MarketProxy");if(e&&e.vipInfo.vipMontAdd<=0)return!1}return!0},n.onInputChg=function(){if(""==this.vi.inputMsg.text)return void this._inputItems.clear();if(this._lastEditMsg=this.vi.inputMsg.text,this._lastEditMsg){var e=this._lastEditMsg.indexOf(" ");-1!=e&&(this._lastEditMsg=this._lastEditMsg.substring(e+1))}else this._lastEditMsg=""},n.onSendMsg=function(){if(""!=this.vi.inputMsg.text){var e=this.vi.inputMsg.text,t=this.facade.retrieveProxy("ChatProxy"),i=!1;if(0==this.vi.tabCh.selectedIndex){var n=e.indexOf("/");0==n&&e.indexOf(" ")>=2&&(this.trySendPrivateMsg(),i=!0)}if(!i){switch(this._sendCh){case 0:return;case 1:if(Ng.userVO.getValue(1006)<25){var o=this.facade.retrieveProxy("MarketProxy");if(null==o||o.vipInfo.vipMontAdd<=0)return void this.sendNotification("prompted_info_show",{info:"为维护游戏环境，避免广告流、小号流刷屏，故决定只有等级达到25级或激活任意月卡才可使用该世界聊天功能，感谢配合。"})}if(e=this.wrapSendItemInfo(e),null==e)break;t.sendMsg(this._sendCh,null,e);break;case 2:if(Ng.userVO.getValue(7011)<=0)return;if(e=this.wrapSendItemInfo(e),null==e)break;t.sendMsg(this._sendCh,null,e);break;case 3:if(Ng.userVO.getValue(7007)<=0)return;if(e=this.wrapSendItemInfo(e),null==e)break;t.sendMsg(this._sendCh,null,e);break;case 4:if(!this._canUsePrivteCh())return void this.sendNotification("prompted_info_show",{info:"发送私聊需角色25级或开启月卡"});if(!this.trySendPrivateMsg())return;break;case 5:return void this.sendNotification("prompted_info_show",{info:"系统频道，不可发言"})}if(null==e)return void this.sendNotification("prompted_info_show",{info:"聊天内容格式有误，请确认后再试。"})}4==this._sendCh&&this._lastPrivateTarget?this.vi.inputMsg.text="/"+this._lastPrivateTarget+" ":this.vi.inputMsg.text="",this._lastEditMsg="",this._inputItems.clear(),this._onCdSend(6e3)}},n._onCdSend=function(e){e-=1e3,e>0?(this.vi.btn_send.mouseEnabled=!1,this.vi.btn_send.text.changeText(e/1e3+"秒"),i.timer.once(1e3,this,this._onCdSend,[e])):(this.vi.btn_send.mouseEnabled=!0,this.vi.btn_send.text.changeText("发送"))},n.trySendPrivateMsg=function(){var e=this.vi.inputMsg.text,t=e.indexOf("/");if(0!=t)return this.sendNotification("prompted_info_show",{info:"私聊信息格式有误，请输入 /角色名 信息"}),!1;if(t=e.indexOf(" "),2>=t)return this.sendNotification("prompted_info_show",{info:"私聊信息格式有误，请输入 /角色名 信息"}),!1;if(this._lastPrivateTarget=e.substring(1,t),t>e.length-1)return this.sendNotification("prompted_info_show",{info:"聊天信息不可为空"}),!1;if(e=e.substring(t+1),e=this.wrapSendItemInfo(e),null==e)return this.sendNotification("prompted_info_show",{info:"聊天内容格式有误，请确认后再试。"}),!1;var i=this.facade.retrieveProxy("ChatProxy");return i.sendMsg(4,this._lastPrivateTarget,e),!0},n.wrapSendItemInfo=function(e){var t="",i=e.indexOf("["),n=-1,o=0;if(-1!=i){for(;-1!=i;){o+=1;var s=e.substring(n+1,i);if(t+=s,n=e.indexOf("]",i),-1==n)return null;o-=1;var r,a=e.substring(i+1,n),l=this._inputItems.get(a),h=0,c=0,u=0,d=0;if(null!=l){if(l instanceof modules.goods.model.data.PackProp){var p=l;h=p.goodsType,c=p.id,u=p.baseId,r=p.propConf.name,d=p.quality}else if(l instanceof modules.goods.model.data.PackEquip){var f=l;h=f.goodsType,c=f.id,u=f.baseId,r=f.equipConf.name,d=f.quality}else if(l instanceof modules.goods.model.data.PackTalisman){var _=l;h=_.goodsType,c=_.id,u=_.baseId,r=_.talismanConf.name,d=_.quality}else if(l instanceof modules.pet.model.PlayerPet){var m=l;h=8,c=m.id,u=m.baseId,r=m.getRealName(),d=m.getRealQuality()}else if(l instanceof modules.fight.model.FightContext){var g=l;h=9,c=g.fighterB.unitId.id,r=g.fighterB.getValue(1002),d=g.fighterA.isDead()?0:1}a="["+h+","+c+","+u+","+r+","+d+"]"}t+=a,i=e.indexOf("[",n),-1==i&&n<e.length-1&&(t+=e.substring(n+1))}if(0!=o)return null}else t=e;return t},n.onChatLink=function(e,t){if(e&&""!=e){var i=e.split(",");switch(i[0]){case"usr":if(i[1]==new String(Ng.userVO.unitId.id))return void this.sendNotification("ROLE_VIEW");v.limitChat?this.sendNotification("SHOW_LOOK_PAGE",{playerId:i[1],name:i[2],nature:0,level:0}):this.vi.showPlayerMenu(i,t);break;case"itm":var n=vo["int"](i[1]);switch(n){case 8:wc.instance.lookPet(vo["int"](i[2]));break;case 0:case 1:case 6:wc.instance.lookItem(n,vo["int"](i[2]))}}}},s(0,n,"homeView",function(){return this.getViewComponent(),this._homeView}),s(0,n,"chatBtn",function(){return this.getViewComponent(),this._chatBtn}),s(0,n,"vi",function(){return this.getViewComponent()}),t.NAME="ChatMediator",t}(lc),T_=function(e){function t(){t.__super.call(this)}o(t,"modules.tower.controller.TowerPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(et.TOWER_QUERY,N_),this.facade.registerCommand(et.TOWER_SIGN_UP,N_,!0),this.facade.registerCommand(et.TOWER_ENTER,N_,!0),this.facade.registerCommand(et.TOWER_FIGHT,N_,!0),this.facade.registerCommand(et.TOWER_BUY_LIFE,N_,!0),this.facade.registerCommand(et.TOWER_EXCHANGE,N_,!0),this.facade.registerCommand(et.TOWER_BUY_POINT,N_,!0),this.facade.registerCommand(et.TOWER_RECOVER_PROPS,N_,!0),this.facade.registerCommand(et.TOWER_QUERY_RANK,I_,!0),this.facade.registerCommand(et.TOWER_PUSH_TOWER,N_)},t}(rc),I_=function(e){function t(){t.__super.call(this)}o(t,"modules.tower.controller.commands.TowerRankCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("DungeonSpRankList",t.value),n=this.facade.retrieveProxy("TowerProxy"),o=n.receiveDungeonSpRank(i);this.sendNotification("RECEIVE_TOWER_RANK",o)}},t}(rc),A_=function(e){function t(){this.dungeonSpRankList=null,t.__super.call(this,"TowerProxy",new nt)}o(t,"modules.tower.model.TowerProxy",e);var i=t.prototype;return i.receive=function(e){return this.vo.update(e),this.vo},i.receiveDungeonSpRank=function(e){return null==this.dungeonSpRankList?this.dungeonSpRankList=new zt(e):this.dungeonSpRankList.update(e),this.dungeonSpRankList},s(0,i,"vo",function(){return this.data}),t.NAME="TowerProxy",t}(sc),N_=function(e){function t(){t.__super.call(this)}o(t,"modules.tower.controller.commands.TowerCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerTower",t.value),n=this.facade.retrieveProxy("TowerProxy"),o=n.receive(i);switch(t.cmd){case 1:break;case 2:this.sendNotification("POP_ALERT_INFO",{info:"<br><br>报名成功，请于<font color='#21db21'>17:00~22:00</font> 进入挑战。"});break;case 3:break;case 4:break;case 5:break;case 100:break;case 6:fc.instance.queryVip(),this.sendNotification("prompted_info_show",{info:"兑换成功"});break;case 8:case 9:this.sendNotification("prompted_info_show",{info:"威望兑换成功"})}this.sendNotification("RECEIVE_TOWER_INFO",o)}},t}(rc),P_=function(e){function t(){this._moveTween=null,this._fightCdLast=-1,t.__super.call(this,"WorldBossHomeMediator")}o(t,"modules.worldboss.view.WorldBossHomeMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new wP),this.view.btnRank.clickHandler=new h(this,this.onRank),this.view.btnClose.clickHandler=new h(this,this.onCloseBtn),this.view.ntc.clickHandler=new h(this,this.onNtc)},n.listNotificationInterests=function(){return["OPEN_WORLD_BOSS_HOME","RECEIVE_WORLD_BOSS_DAMAGE","RECEIVE_WORLD_BOSS_BASE","RECEIVE_WORLD_BOSS_FIGHT_ERRO","USER_INIT"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_WORLD_BOSS_HOME":var t=this.showInfo();t&&"hide"!=e.getBody()&&this.view.popup();break;case"RECEIVE_WORLD_BOSS_DAMAGE":this.showDamage();break;case"RECEIVE_WORLD_BOSS_BASE":this.checkDead();break;case"RECEIVE_WORLD_BOSS_FIGHT_ERRO":var n=e.getBody();-37==n?i.timer.once(1e3,this,this._delayRequestFight):(this.sendNotification("prompted_info_show",{info:"请求战斗..."+n}),this.showInfo());break;case"USER_INIT":this._fightCdLast=-1,this.view.isPopup&&(this.view.close(),this.sendNotification("POP_ALERT_INFO",{info:"请误长时间脱离战场，否则进攻将中断。",handler:h.create(this,this.showInfo)}))}},n.checkDead=function(){var e=this.facade.retrieveProxy("WorldBossProxy");(this.view.isPopup||null!=this.view.lastDamag)&&e.boss&&e.boss.id>0&&e.boss.isKilled()&&(Lr.clearTween(this.view.head),this.view.clear(),this.view.close(),this.sendNotification("POP_ALERT_INFO",{info:"世界首领挑战已结束",handler:h.create(this,this.onKilled)}))},n.onKilled=function(){this.sendNotification("OPEN_WORLD_BOSS_RANK")},n.showDamage=function(){var e=this.facade.retrieveProxy("WorldBossProxy");e.bossDamageWrap&&(this.view.popDamage(-e.bossDamageWrap.self.damage),this._resetBorn(e.playerInfo),e.boss.isKilled()||this.view.showOtherPlayer(e.bossDamageWrap.lastDamage)),this.view.showBoss(e.boss)},n.showInfo=function(){var e=this.facade.retrieveProxy("WorldBossProxy");return e.boss&&e.boss.id>0&&e.boss.isOpen()&&!e.boss.isKilled()?e.playerInfo&&e.playerInfo.feed<1e3?(this.sendNotification("prompted_info_show",{info:"您的喂养值不足1000无法参与战斗"}),!1):(this.view.showBoss(e.boss),this._resetBorn(e.playerInfo),!0):(e.boss&&e.boss.id>0&&Lr.clearTween(this.view.head),!1)},n._resetBorn=function(e){if(null==this._moveTween&&null!=e){var t=e.fightCd-g.clock.currentTime+300;300>t&&(t=300);var i=vo["int"](t/1e3);this.view.showHead(Ng.userVO);
var n=this.view.hp.y+i*this.view.head.height;this.view.head.pos(3*this.view.head.width,n),this._moveTween=Lr.to(this.view.head,{y:this.view.hp.y+40},t,null,h.create(this,this.onMoveEnd))}},n.onMoveEnd=function(){Lr.clearTween(this.view.head),this._moveTween=null,Lr.to(this.view.head,{y:this.view.hp.y+10},2e3);var e=this.facade.retrieveProxy("WorldBossProxy");if(e.boss&&e.boss.id>0&&e.boss.isOpen()&&!e.boss.isKilled()){if(e.playerInfo){if(i.timer.once(3e3,this,this.showInfo),this._fightCdLast==e.playerInfo.fightCd)return this._fightCdLast=-1,void this.sendNotification("prompted_info_show",{info:"战斗请求超时，请确认您的网络。"});this._fightCdLast=e.playerInfo.fightCd,Cc.instance.fightOnce()}}else(null==e.boss||e.boss.id<=0)&&this.view.close()},n._delayRequestFight=function(){Cc.instance.fightOnce()},n.onCloseBtn=function(){this.view.close()},n.onRank=function(){this.sendNotification("OPEN_WORLD_BOSS_RANK")},n.onNtc=function(){this.sendNotification("POP_FUN_NOTICE",22)},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="WorldBossHomeMediator",t}(lc),R_=function(e){function t(){t.__super.call(this,"WorldBossFeedMediator")}o(t,"modules.worldboss.view.WorldBossFeedMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new SP),this.view.submit.clickHandler=new h(this,this.onSubmit)},i.listNotificationInterests=function(){return["OPEN_WORLD_BOSS_FEED"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_WORLD_BOSS_FEED":this.openFeed()}},i.openFeed=function(){var e=this.facade.retrieveProxy("WorldBossProxy");if(e.boss){if(!e.boss.canFeed())return void this.sendNotification("prompted_info_show",{info:"当前不可喂养"});var t,i=[],n=[],o=this.facade.retrieveProxy("GoodsProxy"),s=o.listItems(0);for(var r in s)if(t=s[r],!(null==t||t.count<=0))if(0==t.goodsType){var a=t;if(1!=a.propConf.propType&&2!=a.propConf.propType)continue;i.push(a.resetCountTmp())}else 6==t.goodsType&&n.push(t);i.sort(this.compareFunctionProp),n.sort(this.compareFunctionTalisman),this.view.showProps(i,n)}},i.compareFunctionProp=function(e,t){return e.propConf.level>t.propConf.level?1:e.propConf.level<t.propConf.level?-1:e.propConf.quality-t.propConf.quality},i.compareFunctionTalisman=function(e,t){return e.talismanConf.level>t.talismanConf.level?1:e.talismanConf.level<t.talismanConf.level?-1:e.quality-t.quality},i.compareFunctionPropUse=function(e,t){return e.quality>t.quality?-1:e.quality<t.quality?1:t.propConf.level-e.propConf.level},i.compareFunctionTalismanUse=function(e,t){return e.quality>t.quality?-1:e.quality<t.quality?1:t.talismanConf.level-e.talismanConf.level},i.onSubmit=function(){var e,t,i=this,n=[],o=0;if(this.view.props.visible)if(this.view.selectedProps.keys.length){var s=[];s=s.concat(this.view.selectedProps.values),s.sort(this.compareFunctionPropUse);var r;for(var a in s)r=s[a],o+=$e.queryPrice(r)*r.countTmp,n.length<20&&(t="<font color='"+N.getColor(r.quality)+"'>【"+r.propConf.name+"】*"+r.countTmp+" </font>",n.push(t)),20==n.length&&n.push("……");e=n.join("、"),e="确定消耗材料："+e+"用于喂养？<br><font color='#e70626'>(可增加喂养度："+o+")</font>",this.sendNotification("POP_CONFIRM_INFO",{info:e,handler:h.create(this,function(e){e&&(Cc.instance.feed(i.view.selectedProps),i.view.close())})},"duble")}else this.sendNotification("prompted_info_show",{info:"请选择材料"});else if(this.view.selectedTalismans.size>0){var l=[];l=l.concat(this.view.selectedTalismans.keys),l.sort(this.compareFunctionTalismanUse);var c;for(var u in l)c=l[u],o+=$e.queryPriceOfTalisman(c),n.length<20&&(t="<font color='"+N.getColor(c.quality)+"'>【"+c.talismanConf.name+"】 </font>",n.push(t)),20==n.length&&n.push("……");e=n.join("、"),e="确定消耗法宝："+e+"用于喂养？<br><font color='#e70626'>(可增加喂养度："+o+")</font>",this.sendNotification("POP_CONFIRM_INFO",{info:e,handler:h.create(this,function(e){e&&(Cc.instance.feedTalisman(i.view.selectedTalismans),i.view.close())})},"duble")}else this.sendNotification("prompted_info_show",{info:"请选择法宝"})},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="WorldBossFeedMediator",t}(lc),L_=function(e){function t(){this.worldbossHead=null,t.__super.call(this,"WorldBossMediator")}o(t,"modules.worldboss.view.WorldBossMediator",e);var n=t.prototype;return n.onRegister=function(){this.facade.registerMediator(new P_),this.facade.registerMediator(new R_),this.facade.registerMediator(new O_),this.facade.registerMediator(new M_)},n.listNotificationInterests=function(){return["RECEIVE_WORLD_BOSS_BASE","RECEIVE_WORLD_BOSS_PLAYER","RECEIVE_WORLD_BOSS_VIEW","USER_INIT","USER_LEVEL_CHANGE","ZERO_CLOCK_TRIGER"]},n.handleNotification=function(e){switch(e.getName()){case"RECEIVE_WORLD_BOSS_BASE":case"RECEIVE_WORLD_BOSS_PLAYER":this.freshHead();break;case"RECEIVE_WORLD_BOSS_VIEW":this.freshHead();break;case"USER_INIT":this.initInfo(!0);break;case"USER_LEVEL_CHANGE":case"ZERO_CLOCK_TRIGER":this.initInfo(!1)}},n.initInfo=function(e){if(e){var t=this.facade.retrieveProxy("WorldBossProxy");t.clear()}this.freshHead(),Ng.userVO.getValue(1006)>=45&&$e._OPEN_WORLD_BOSS_FUN&&(Cc.instance.queryInfo(),Cc.instance.queryView())},n.freshHead=function(){if(null==this.worldbossHead){var e=this.facade.retrieveMediator("HomeMediator");if(null==e||null==e.view||null==e.view.spcailDungeon)return;if(this.worldbossHead=e.view.spcailDungeon.getChildByName("worldbossHead"),null==this.worldbossHead)return;this.worldbossHead.on("click",this,this.onHead)}var t=this.worldbossHead.getChildByName("lbFighting"),n=this.worldbossHead.getChildByName("lbName"),o=this.worldbossHead.getChildByName("txLevel"),s=this.worldbossHead.getChildByName("lbExp"),r=this.worldbossHead.getChildByName("lbTime"),a=this.worldbossHead.getChildByName("btnFeed"),l=this.worldbossHead.getChildByName("btnRank"),h=this.worldbossHead.getChildByName("btnEnter");if(h.visible=!1,Ng.userVO.getValue(1006)<45)o.text="45级开启",n.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,l.visible=!1,h.visible=!1,t.visible=!1;else{var c=this.facade.retrieveProxy("WorldBossProxy");if(c&&c.boss&&c.boss.id>0){if(o.text="",n.text="首领境界："+Re.getClutureName(c.boss.culture),n.color=Re.getCultureColor(c.boss.culture),n.visible=!0,c.boss.isFull()?(s.text="喂养度已满",s.color="#00dc24"):(s.text="喂养度："+(c.boss.exp+c.boss.expExt)+"/1000000",s.color="#fffc00"),s.visible=!0,c.boss.isKilled())r.text="挑战已结束（周一重置）",r.color="#c527ff",r.visible=!0;else if(c.boss.isFull())if(c.boss.isOpen())r.text="挑战进行中",r.color="#00dc24",r.visible=!0,this.sendNotification("OPEN_WORLD_BOSS_HOME","hide");else{var u=ro.newDate(c.boss.openDate),d=u.getHours(),p=u.getMinutes(),f=u.getDay(),_=ro.getWeekName(f),m=ro.getWeek();c.boss.openDate-g.clock.currentTime>1728e5?6==m||0==m?(_="下"+_,r.color="#e70626"):r.color="#fffc00":f==m?(_="今天",r.color="#00dc24",i.timer.once(c.boss.openDate-g.clock.currentTime,this,this.freshHead)):r.color="#fffc00",r.text="开启时间："+_+(10>d?"0":"")+d+"点"+(10>p?"0":"")+p+"分",r.visible=!0,c.isFeedNo1&&(h.label="设定",h.visible=!0)}else{var v=ro.getWeek();if(4==v||5==v){var y=$e.checkPoorExpNeedMin(c.boss);y>0?(r.visible=!0,r.text="预计再增加"+y+"喂养度\n周六即可开启世界首领",r.color="#fffc00"):r.visible=!1}else r.visible=!1}a.visible=c.boss.canFeed(),l.visible=!0,c.isFighting&&(h.label="进入",h.visible=!0),t.visible=c.isFighting}else o.text="载入数据中...",n.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,l.visible=!1,h.visible=!1,t.visible=!1}},n.onHead=function(e){switch(e.target.name){case"btnEnter":var t=this.facade.retrieveProxy("WorldBossProxy");t.boss.id>0&&(t.isFighting?this.sendNotification("OPEN_WORLD_BOSS_HOME"):this.sendNotification("OPEN_WORLD_BOSS_CHG"));break;case"btnFeed":this.sendNotification("OPEN_WORLD_BOSS_FEED");break;case"btnRank":this.sendNotification("OPEN_WORLD_BOSS_RANK")}},t.NAME="WorldBossMediator",t}(lc),O_=function(e){function t(){t.__super.call(this,"WorldBossChgMediator")}o(t,"modules.worldboss.view.WorldBossChgMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new xP),this.view.btnSure.clickHandler=new h(this,this.onSure)},i.listNotificationInterests=function(){return["OPEN_WORLD_BOSS_CHG"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_WORLD_BOSS_CHG":this.showPage()}},i.showPage=function(){if(!$e.isInSetingTime())return void this.sendNotification("prompted_info_show",{info:"当前时段不可更改（周一00:00至周五18:00）"});var e=this.facade.retrieveProxy("WorldBossProxy");if(!(e.boss.id<=0))return e.boss.isFull()?g.clock.currentTime-e.boss.setTime<$e.SETTING_BOSS_CD?void this.sendNotification("prompted_info_show",{info:"设定时间冷却中，最少隔10分钟"}):void(e.bossView&&e.bossView.selfFeed&&1==e.bossView.selfFeed.rank?this.view.showInfo(e.boss):this.sendNotification("prompted_info_show",{info:"喂养排名第1可设置开启时间"})):void this.sendNotification("prompted_info_show",{info:"当前喂养未满，不可设置"})},i.onSure=function(){var e,t=0;switch(this.view.cbWeek.selectedIndex){case 1:t=6;break;case 2:t=0;break;default:return void this.sendNotification("prompted_info_show",{info:"请选择周几"})}e=ro.getWeekName(t),t=ro.getWeek2java(t);var i=vo["int"](this.view.lbHour.text);if(isNaN(i)||11>i||i>22)return void this.sendNotification("prompted_info_show",{info:"请选设定时"});var n=vo["int"](this.view.lbMin.text);return isNaN(n)||0>n||n>59?void this.sendNotification("prompted_info_show",{info:"请选设定分"}):(e=e+" "+this.view.lbHour.text+":"+this.view.lbMin.text,this.sendNotification("POP_CONFIRM_INFO",{info:"确定设定开启时间<font color='#e70626'> "+e+" </font>吗？<br>（再次更改需间隔10分钟）",handler:h.create(this,function(e){e&&Cc.instance.chgOpen(t,i,n)})}),void this.view.close())},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="WorldBossChgMediator",t}(lc),M_=function(e){function t(){t.__super.call(this,"WorldBossRankMediator")}o(t,"modules.worldboss.view.WorldBossRankMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new CP),this.view.on("click",this,this.onClick),this.view.tab.selectHandler=new h(this,this.onTab)},n.listNotificationInterests=function(){return["OPEN_WORLD_BOSS_RANK","RECEIVE_WORLD_BOSS_VIEW","RECEIVE_WORLD_BOSS_PLAYER"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_WORLD_BOSS_RANK":Cc.instance.queryView(),i.timer.loop(3e4,this,this.onClock),this.view.popup();break;case"RECEIVE_WORLD_BOSS_VIEW":case"RECEIVE_WORLD_BOSS_PLAYER":this.freshInfo()}},n.onClock=function(){this.view.isPopup?Cc.instance.queryView():i.timer.clear(this,this.onClock)},n.freshInfo=function(){var e=this.facade.retrieveProxy("WorldBossProxy");e.bossView?(this.view.showInfo(e.boss,e.bossView,e.playerInfo),this.onTab(this.view.tab.selectedIndex),e.checkFeedNo1Sync()):(this.view.listFeed.visible=!1,this.view.listFight.visible=!1,this.view.btnFeed.visible=!1,this.view.btnAward.visible=!1)},n.onTab=function(e){var t=this.facade.retrieveProxy("WorldBossProxy"),i=t.playerInfo;if(!(null==i||t.boss.id<=0))switch(e){case 0:this.view.listFeed.visible=!0,this.view.listFight.visible=!1,t.boss.isOpen()?i.awardFeed>0?(this.view.btnAward.visible=!1,this.view.lbTaked.visible=!0,this.view.lbTaked.text="喂养奖励已领取",this.view.lbTaked.color="#00dc24"):(this.view.btnAward.visible=i.feedRank>0,this.view.lbTaked.visible=!0,this.view.lbTaked.text="喂养奖励："+$e.queryFeedAwardStr(i.feedRank,t.boss.feedPerson,i.feed),this.view.lbTaked.color="#e70626"):0==i.awardDamage&&0!=i.lastAwardIndex?(this.view.btnFeed.visible=!1,this.view.btnAward.visible=!0,this.view.lbTaked.visible=!0,this.view.lbTaked.text="上期奖励："+$e.getFightAward(i.lastAwardIndex),this.view.lbTaked.color="#fffc00"):(this.view.btnAward.visible=!1,this.view.lbTaked.visible=!1);break;case 1:this.view.listFeed.visible=!1,this.view.listFight.visible=!0,t.boss.isOpen()?i.feed<1e3?(this.view.btnAward.visible=!1,this.view.lbTaked.visible=!1,this.view.lbTaked.text="喂养不足1000",this.view.lbTaked.color="#e70626"):i.awardDamage>0?(this.view.btnAward.visible=!1,this.view.lbTaked.visible=!0,this.view.lbTaked.text="伤害奖励已领取",this.view.lbTaked.color="#00dc24"):t.boss.isKilled()?(this.view.btnAward.visible=!0,this.view.lbTaked.visible=!0,this.view.lbTaked.text="伤害奖励："+$e.queryFightAwardStr(i.damageRank,t.boss.fightPerson,i.damage),this.view.lbTaked.color="#e70626"):(this.view.btnAward.visible=!1,this.view.lbTaked.visible=!1):(this.view.btnAward.visible=!1,this.view.lbTaked.visible=!1)}},n.onClick=function(e){switch(e.target){case this.view.btnFeed:this.sendNotification("OPEN_WORLD_BOSS_FEED");break;case this.view.btnAward:this._takeAward();break;case this.view.btnNtc:this.sendNotification("POP_FUN_NOTICE",22)}},n._takeAward=function(){var e=this.facade.retrieveProxy("WorldBossProxy");if(e.boss&&e.boss.id>0)if(e.boss.isOpen())1==this.view.tab.selectedIndex?e.playerInfo.awardDamage>0?this.sendNotification("prompted_info_show",{info:"奖励已领取过了"}):e.boss.killTime<=0?this.sendNotification("prompted_info_show",{info:"打败首领后方可领取"}):Cc.instance.takeFightAward():e.playerInfo.awardFeed>0?this.sendNotification("prompted_info_show",{info:"奖励已领取过了"}):Cc.instance.takeFeedAward();else{var t=e.playerInfo;t&&0==t.awardDamage&&0!=t.lastAwardIndex?Cc.instance.takeFightAwardDelay():this.sendNotification("prompted_info_show",{info:"当前暂不可领取"})}},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="WorldBossRankMediator",t}(lc),D_=function(e){function t(){t.__super.call(this)}o(t,"modules.activity.controller.ActivityPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(st.ACTIVITY_QUERY,k_),this.facade.registerCommand(st.ACTIVITY_SIGN,F_,!0),this.facade.registerCommand(st.ACTIVITY_SIGN_TOTAL,F_,!0),this.facade.registerCommand(st.ACTIVITY_TAKE_AWARD,F_,!0),this.facade.registerCommand(st.ACTIVITY_EXCHANGE_GUOQIN,F_,!0),this.facade.registerCommand(st.ACTIVITY_TAKE_AWARD_ONCE_PAY,F_,!0),this.facade.registerCommand(st.ACTIVITY_OPEN_RED_BOX,F_,!0),this.facade.registerCommand(ot.ACTIVITY_LOTTERY_QUERY,V_,!0),this.facade.registerCommand(ot.ACTIVITY_LOTTERY_DRAW,V_,!0)},t}(rc),k_=function(e){function t(){t.__super.call(this)}o(t,"modules.activity.controller.commands.ActivityCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerActivity",t.value),n=this.facade.retrieveProxy("ActivityPropxy"),o=n.receive(i);this.sendNotification("RECEIVE_ACTIVITY_INFO",o)}},t}(rc),B_=function(e){function t(){this.playerLottery=null,this._tempActivitySet=null,t.__super.call(this,"ActivityPropxy"),this._tempActivitySet=new lt(null)}o(t,"modules.activity.model.ActivityPropxy",e);var i=t.prototype;return i.receive=function(e){return null==this.data?this.data=new at(e):this.playerActivity.update(e),lo.isNull(e.tempActs)?this._tempActivitySet.update(null):this._tempActivitySet.update(e.tempActs),this.playerActivity},i.hasAward=function(){if(!this._tempActivitySet.inTime())return!1;if(this.isLocTimeChg())return!0;var e;for(var t in this._tempActivitySet.getOpenTypes())switch(e=this._tempActivitySet.getOpenTypes()[t]){case 7:break;case 9:break;case 10:break;case 11:case 16:break;case 13:if(!ro.isTodayTs(this.playerActivity.redboxTime)||100==this.playerActivity.oncePayGold)return!0;break;case 14:if(null!=this.playerLottery){var i=this.playerLottery.awards.length+1,n=rt.getDrawNeedGold(i);if(n>-1&&this.playerLottery.rmb>=n)return!0}break;case 15:}return!1},i.getActEndTime=function(){if(!this._tempActivitySet.showTime())return"活动未开启";if(!this._tempActivitySet.inTime())return"开始时间："+this._tempActivitySet.getBeginDate();var e=this._tempActivitySet.getEndTimestamp()-g.clock.currentTime,t=vo["int"](e/864e5),i="活动剩余：";return t>0?i=i+t+"天":i+="最后一天(23点59分结束)",i},i.isLocTimeChg=function(){if(null==this._tempActivitySet||!this._tempActivitySet.inTime())return!1;var e=Ts.getItem("_KEY_LAST_ACT_TIME");return null==e||!ro.isTodayTs(vo["int"](e))},i.updateLocTime=function(){null!=this._tempActivitySet&&Ts.setItem("_KEY_LAST_ACT_TIME",String(g.clock.currentTime))},i.isOpenBuyStoneAct=function(){if(this.playerActivity&&this.playerActivity.forceOpenStone>g.clock.currentTime)return!0;var e=ro.newDate(Ng.userVO.getValue(19004)),t=ro.dateDiff(ro.newDate(g.clock.currentTime),e);return t>=20&&t%20==0},i.nextOpenBuyStoneActDay=function(){var e=ro.newDate(Ng.userVO.getValue(19004)),t=ro.dateDiff(ro.newDate(g.clock.currentTime),e);return t>=20&&t%20==0?0:20>t?20-t-1:20-t%20-1},s(0,i,"playerActivity",function(){return this.data}),s(0,i,"tempActivitySet",function(){return this._tempActivitySet}),t.NAME="ActivityPropxy",t._KEY_LAST_ACT_TIME="_KEY_LAST_ACT_TIME",n(t,["DAYLY_SIGN",function(){return this.DAYLY_SIGN=[{d:1,type:3,id:0,count:20},{d:2,type:0,id:500003,count:5},{d:3,type:0,id:200002,count:3},{d:4,type:0,id:200003,count:3},{d:5,type:3,id:0,count:50},{d:6,type:0,id:185007,count:1},{d:7,type:0,id:185008,count:1}]},"DAYLY_SIGN_TOTAL",function(){return this.DAYLY_SIGN_TOTAL=[{d:1,awd:[3,0,188]},{d:2,awd:[0,500001,2888,0,500003,3]},{d:3,awd:[0,200002,1,11,0,888]},{d:4,awd:[2,0,88e4,0,500021,8]},{d:5,awd:[0,191001,8,13,0,66]},{d:6,awd:[0,200003,1,0,165005,1]},{d:7,awd:[0,165006,1,0,500002,1,0,500008,1]}]},"GOLD_LIST",function(){return this.GOLD_LIST=[{aim:500,count:50,box:1},{aim:2e3,count:150,box:3},{aim:5e3,count:300,box:6},{aim:1e4,count:500,box:10},{aim:2e4,count:1e3,box:20},{aim:5e4,count:6e3,box:120},{aim:1e5,count:1e4,box:200},{aim:5e5,count:5e4,box:1}]}]),t}(sc),V_=function(e){function t(){t.__super.call(this)}o(t,"modules.activity.controller.commands.ActivityLotteryCommand",e);var i=t.prototype;return i.execute=function(e){var t,i=e.getBody();if(1==i.cmd){var n=this.facade.retrieveProxy("ActivityPropxy");i.success?(t=v.protoCodec.getResponseDecoder().decode("PlayerLottery",i.value),n.playerLottery=t,this.sendNotification("RECEIVE_ACTIVITY_LOTTERY_INFO",t)):(n.playerLottery=null,this.sendNotification("RECEIVE_ACTIVITY_LOTTERY_INFO",null))}else{t=v.protoCodec.getResponseDecoder().decode("FightAwards",i.value);var o=Te.value(t);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"抽奖获得",awards:o,desc:""})}},t}(rc),F_=function(e){function t(){t.__super.call(this)}o(t,"modules.activity.controller.commands.ActivityOptCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);switch(t.cmd){case 2:case 7:case 3:case 5:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"领取奖励成功",awards:n,desc:""});break;case 6:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"开启红包获得",awards:n,desc:""})}}},t}(rc),G_=function(e){function t(){this._p=null,t.__super.call(this,"TowerShopRecoverMediator")}o(t,"modules.tower.view.TowerShopRecoverMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new BP),this.view.btnSure.clickHandler=new h(this,this.onSure),this.view.count.on("blur",this,this.onCount)},i.listNotificationInterests=function(){return["SHOW_TOWER_SHOP_RECOVER_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_TOWER_SHOP_RECOVER_PAGE":Ng.userVO.getValue(1006)<35?this.sendNotification("prompted_info_show",{info:"兑换威望35级开启。"}):(this.showPage(e.getBody()),this.view.popup())}},i.showPage=function(e){return this._p=null,e.count<=0||8!=e.propConf.propType?void this.sendNotification("prompted_info_show",{info:"此道具不能换取威望"}):(this._p=e,500002==e.baseId?(this.view.desc.text="1护灵符=25威望",this.view.lbUse.text="兑换物品数量："):(this.view.desc.text="1组灵石(2000个)=1威望",this.view.lbUse.text="兑换物品组数："),this.view.has.text="持有物品数量："+this._p.count+"个",void(this.view.count.text="0"))},i.onSure=function(){var e,t=this,i=vo["int"](this.view.count.text);if(500002==this._p.baseId){if(0>=i||i>this._p.count)return void this.sendNotification("prompted_info_show",{info:"兑换数量有误,请确认后再试"});e="确认使用<font color='#e70626'>【护灵符】"+i+"个</font>,换取<font color='#fffc00'>威望"+25*i+"</font>点吗?"}else{if(0>=i||2e3*i>this._p.count)return void this.sendNotification("prompted_info_show",{info:"兑换组数有误,请确认后再试"});if(1>i)return void this.sendNotification("prompted_info_show",{info:"兑换数量有误,灵石最少需要1组(2000个)"});e="确认使用<font color='#00dc24'>【灵石】"+2e3*i+"个</font>,换取<font color='#fffc00'>威望"+i+"</font>点吗?",i=2e3*i}this.sendNotification("POP_CONFIRM_INFO",{info:e,handler:h.create(this,function(e){e&&(Tc.instance.recover(t._p.id,i),t.view.close())})})},i.onCount=function(e){var t=vo["int"](this.view.count.text);t>this._p.count&&(this.view.count.text=""+this._p.count,t=this._p.count),500002==this._p.baseId||t>2e3&&(this.view.count.text=""+2e3*vo["int"](t/2e3))},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="TowerShopRecoverMediator",t}(lc),H_=function(e){function t(){this.initRequest=!1,t.__super.call(this,"TowerRankMediator")}o(t,"modules.tower.view.TowerRankMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new EP),this.view.list.dataSource=[],this.view.btnFresh.clickHandler=new h(this,this.onFresh),this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onMouse)},i.listNotificationInterests=function(){return["OPEN_TOWER_RANK_PAGE","RECEIVE_TOWER_RANK"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_TOWER_RANK_PAGE":0==this.initRequest&&(this.initRequest=!0,this.onFresh()),this.view.popup();break;case"RECEIVE_TOWER_RANK":this.view.list.dataSource=e.getBody().list}},i.onFresh=function(){Tc.instance.queryRank()},i.onRender=function(e,t){if(this.view.list.dataSource){var i,n=this.view.list.dataSource[t];switch(i=e.getChildByName("rank"),i.text=""+(t+1),t){case 0:i.color="#c527ff";break;case 1:i.color="#e70626";break;case 2:i.color="#fffc00";break;default:i.color="#ffffff"}i=e.getChildByName("name"),i.text=n.name;var o=e.getChildByName("btnView");n.playerId==Ng.userVO.unitId.id?(i.color="#00dc24",o.visible=!1):(i.color="#fffc00",o.visible=!0);var s=e.getChildByName("nature");s.index=n.nature-1;var r=i.x+i.width;s.x=r,i=e.getChildByName("level"),i.text=n.level+"级",r=s.x+s.width,i.x=r,i=e.getChildByName("maxNum"),n.maxNum>10?i.text="通关":i.text=n.maxNum}},i.onMouse=function(e,t){if("click"==e.type&&"btnView"==e.target.name&&this.view.list.dataSource){var i=this.view.list.dataSource[t];this.sendNotification("SHOW_LOOK_PAGE",i)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="TowerRankMediator",t}(lc),U_=function(e){function t(){this._info=null,t.__super.call(this,"TowerMediator")}o(t,"modules.tower.view.TowerMediator",e);var n=t.prototype;return n.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.spcailDungeon.getChildByName("towertHead")),this.init(),this.view.on("mouseup",this,this.onClick),i.timer.loop(6e4,this,this.onClock)},n.init=function(){this.getViewComponent();var e=this.view.getChildByName("txLevel");e.text="35级开启";var t=this.view.getChildByName("btnEnter");t.visible=!1;var i=this.view.getChildByName("lbFighting");i.visible=!1},n.onClock=function(){this._info&&this.show(this._info)},n.onRegister=function(){this.facade.registerMediator(new z_),this.facade.registerMediator(new H_)},n.listNotificationInterests=function(){return["USER_INIT","RECEIVE_TOWER_INFO"]},n.handleNotification=function(e){switch(e.getName()){case"USER_INIT":this._info=null,this.init();var t=this.view.getChildByName("txLevel");Ng.userVO.getValue(1006)<35?(t.text="35级开启",t.color="#e70626"):(t.text="努力加载中…",t.color="#ffffff");break;case"RECEIVE_TOWER_INFO":this.show(e.getBody())}},n.show=function(e){var t=this.view.getChildByName("btnEnter");this._info=e;var i,n=this.view.getChildByName("lbFighting");if(n.visible=!1,i=this.view.getChildByName("txLevel"),Ng.userVO.getValue(1006)<35)return void(i.text="35级开启");if(it.isSignUpTime())1!=e.state?(i.text="点击报名",i.color="#00dc24",t.visible=!1):(i.text="已报名，等待开启",i.color="#fffc00",t.visible=!1),i=this.view.getChildByName("lbSignTime"),i.color="#00dc24",i=this.view.getChildByName("lbRaceTime"),i.color="#ffffff";else if(it.isRaceTime()){if(0==this._info.state)return i.text="今日未报名",i.color="#e70626",void(t.visible=!1);if(1==this._info.state)return i.text="点击进入",i.color="#00dc24",void(t.visible=!0);this._info.floor>10?(i.text="今日已通关",i.color="#00dc24",t.visible=!1):this._info.isFail()?(i.text="挑战失败",i.color="#fffc00",t.visible=!0):(i.text="挑战进行中",n.visible=!0,i.color="#00dc24",t.visible=!0),i=this.view.getChildByName("lbSignTime"),i.color="#ffffff",i=this.view.getChildByName("lbRaceTime"),i.color="#00dc24"}else i.text="即将开启",i.color="#fffc00",i=this.view.getChildByName("lbSignTime"),i.color="#ffffff",i=this.view.getChildByName("lbRaceTime"),i.color="#ffffff"},n.onClick=function(e){return"btnRank"==e.target.name?void this.sendNotification("OPEN_TOWER_RANK_PAGE"):"btnExchange"==e.target.name?void this.sendNotification("SHOW_TOWER_SHOP_PAGE"):void(null!=this._info&&(it.isSignUpTime()?1!=this._info.state?(Tc.instance.signUp(),op.aldSendEvent("点击报名")):this.sendNotification("prompted_info_show",{info:"您已报名，开启时即可进入。"}):it.isRaceTime()&&(1==this._info.state?(Tc.instance.enter(),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,4)):2==this._info.state?this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,4):this.sendNotification("prompted_info_show",{info:"今天您没有报名，暂进不能进入。"}))))},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="TowerMediator",t}(lc),z_=function(e){function t(){this._towerShopPop=null,this._info=null,t.__super.call(this,"TowerShopMediator")}o(t,"modules.tower.view.TowerShopMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this;this.setViewComponent(new MP),this._towerShopPop=new TP,this._towerShopPop.on("mouseup",this,this.onMouseUp),this.view.items.renderHandler=new h(this,this.onRender),this.view.items.mouseEnabled=!0,this.view.items.mouseHandler=new h(this,this.onMouse),this.view.ntc.clickHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",3)}),this.view.ntcRate.clickHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",9)})},i.onRegister=function(){this.facade.registerMediator(new G_)},i.listNotificationInterests=function(){return["USER_INIT","USER_LEVEL_CHANGE","SHOW_TOWER_SHOP_PAGE","RECEIVE_TOWER_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":this.view.items.dataSource=t.IDS;break;case"USER_LEVEL_CHANGE":this.view.items.refresh();break;case"SHOW_TOWER_SHOP_PAGE":Ng.userVO.getValue(1006)<35?this.sendNotification("prompted_info_show",{info:"威望商店35级开启。"}):this.view.popup();break;case"RECEIVE_TOWER_INFO":this._info=e.getBody(),this.view.myCoin.text=""+this._info.coin}},i.onRender=function(e,i){var n=Ng.userVO.getValue(1006),o=e.getChildByName("name"),s=e.getChildByName("costCoin"),r=e.getChildByName("desc"),a=e.getChildByName("btnExc");switch(a.visible=!0,o.color="#ffffff",t.IDS[i]){case 0:o.text="凝灵丹",o.color="#00dc24",s.text="威望：20/个",r.text="    在境界副本中灵气基础加成100%，持续6小时，购买后直接生效。(离线时需要大于离线时间才会生效)";break;case 1:o.text="40级套装材料",o.color="#0084ff",s.text="威望：武器8  防具4  饰品6",r.text="    兑换特殊套装材料最低品质蓝色，有概率出红色和紫色品质。";break;case 2:o.text="60级套装材料",o.color="#0084ff",s.text="威望：武器40  防具20  饰品30",r.text="    兑换特殊套装材料最低品质蓝色，有概率出红色和紫色品质。";break;case 3:o.text="80级套装材料",o.color="#0084ff",s.text="威望：武器80  防具40  饰品60",r.text="    兑换特殊套装材料最低品质蓝色，有概率出红色和紫色品质。";break;case 4:o.text=3e3*n+" 铜币",s.text="威望：20/组",r.text="    等级越高可换得的铜币越多";break;case 5:o.text="魔核*"+3*n,s.text="威望：15/组",r.text="    等级越高可换得的魔核越多";break;case 6:o.text="天籁石碎片",o.color="#e70626",s.text="威望：20/个",r.text="    收集碎片可合成仙品天籁石";break;case 7:o.text="天籁石碎片",o.color="#c527ff",s.text="威望：60/个",r.text="    收集碎片可合成仙品天籁石";break;case 8:o.text="灵宠仙粮",o.color="#e70626",s.text="威望：160/个",r.text="    使用后永久提升灵宠1点资质，但不会突破上限";break;case 9:o.text="兽血皿",o.color="#e70626",s.text="威望：280/个",r.text="    用于开启血脉";break;case 10:o.text="完整血脉",o.color="#e70626",s.text="威望：150/个",r.text="    兑换后随机获得一个血脉";break;case 11:o.text="威望兑换",o.color="#fffc00",s.text="1威望：3元宝",r.text="    激活至尊月卡，即可使用元宝兑换威望";break;case 12:o.text="灵珠碎片",o.color="#e70626",s.text="威望：3/个",r.text="    灵珠碎片可用于激活或升级灵珠";break;case 13:o.text="女娲石",o.color="#c527ff",s.text="威望：998/个",r.text="    女娲石可用于更换灵珠五行";break;case 14:o.text="回收道具得威望",o.color="#e70626",s.text="威望：护灵符=25,灵石2千个=1,55级红特=1,55级紫材料=3",r.text="    指定道具可回收换取威望";break;case 15:o.text="100级套装材料",o.color="#0084ff",s.text="武器200  防具100  饰品150",r.text="    兑换特殊套装材料最低品质蓝色，有概率出红色和紫色品质。"}},i.onMouse=function(e,i){if("click"==e.type&&"btnExc"==e.target.name){var n=this.view.items.getCell(i),o=n.getChildByName("name"),s=n.getChildByName("costCoin"),r=Ng.userVO.getValue(1004),a=t.IDS[i];switch(a){case 0:this.towerShopPop.popItem(a,o,s.text);break;case 1:case 2:case 3:case 15:this.towerShopPop.popItemNature(a,o,s.text,r);break;case 4:this.towerShopPop.popItem(a,o,s.text);break;case 5:this.towerShopPop.popItem(a,o,s.text);break;case 6:this.towerShopPop.popItem(a,o,s.text);break;case 7:this.towerShopPop.popItem(a,o,s.text);break;case 8:this.towerShopPop.popItem(a,o,s.text);break;case 9:this.towerShopPop.popItem(a,o,s.text);break;case 10:this.towerShopPop.popItem(a,o,s.text);break;case 11:this.towerShopPop.popBuyPoint(a);break;case 12:this.towerShopPop.popItem(a,o,s.text);break;case 13:this.towerShopPop.popItem(a,o,s.text)}}},i.onMouseUp=function(e){if(null!=this._info){var t=0,i=0,n=0,o=0;if("btnSure"==e.target.name)switch(this.towerShopPop.itemId){case 0:if(n=this.towerShopPop.count,o=20*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(0,0,n),this.towerShopPop.close();break;case 1:case 2:case 3:case 15:if(n=this.towerShopPop.count,i=this.towerShopPop.position.selectedIndex+1,1==this.towerShopPop.itemId)switch(i){case 1:o=8*n;break;case 2:o=4*n;break;case 3:o=6*n}else if(2==this.towerShopPop.itemId)switch(i){case 1:o=40*n;break;case 2:o=20*n;break;case 3:o=30*n}else if(3==this.towerShopPop.itemId)switch(i){case 1:o=80*n;break;case 2:o=40*n;break;case 3:o=60*n}else switch(i){case 1:o=200*n;break;case 2:o=100*n;break;case 3:o=150*n}if(this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});t=this.towerShopPop.nature.selectedIndex+1,Tc.instance.exchange(this.towerShopPop.itemId,100*t+i,n),this.towerShopPop.close();break;case 4:if(n=this.towerShopPop.count,o=20*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(4,0,n),this.towerShopPop.close();break;case 5:if(n=this.towerShopPop.count,o=15*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(5,0,n),this.towerShopPop.close();break;case 6:if(n=this.towerShopPop.count,o=20*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(6,0,n),this.towerShopPop.close();break;case 7:if(n=this.towerShopPop.count,o=60*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(7,0,n),this.towerShopPop.close();break;case 8:if(n=this.towerShopPop.count,o=160*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(8,0,n),this.towerShopPop.close();break;case 9:if(n=this.towerShopPop.count,o=280*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(9,0,n),this.towerShopPop.close();break;case 10:if(n=this.towerShopPop.count,o=150*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(10,0,n),this.towerShopPop.close();break;case 11:n=this.towerShopPop.count;var s=3*n,r=this.facade.retrieveProxy("MarketProxy");if(!r.vipInfo||!r.vipInfo.diamondVip.isEffecting)return void this.sendNotification("prompted_info_show",{info:"兑换需要激活至尊月卡"});if(!(Ng.userVO.getValue(1010)>=s))return void this.sendNotification("prompted_info_show",{info:"您的元宝不足,兑换需要元宝"+s});this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='#fffc00'>"+s+"元宝</font>，兑换<font color='#fffc00'>"+n+"</font>威望吗",
handler:h.create(this,function(e){e&&(Tc.instance.buyPoint(n),k.goldenCost("元宝换威望",1,s))})}),this.towerShopPop.close();break;case 12:if(n=this.towerShopPop.count,o=3*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(11,0,n),this.towerShopPop.close();break;case 13:if(n=this.towerShopPop.count,o=998*n,this._info.coin<o)return void this.sendNotification("prompted_info_show",{info:"您的威望不足，可通过试练之塔获得"});Tc.instance.exchange(12,0,n),this.towerShopPop.close()}}},s(0,i,"towerShopPop",function(){return this.getViewComponent(),this._towerShopPop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="TowerShopMediator",n(t,["IDS",function(){return this.IDS=[0,1,2,3,15,4,6,7,8,9,10,11,12,13]}]),t}(lc),W_=function(e){function t(){t.__super.call(this)}o(t,"modules.mail.controller.MailPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(ct.MAIL_LIST_SUMMARY,q_),this.facade.registerCommand(ct.MAIL_QUERY_DETAIL,Y_,!0),this.facade.registerCommand(ct.MAIL_READ,q_,!0),this.facade.registerCommand(ct.MAIL_READ_ALL,q_,!0),this.facade.registerCommand(ct.MAIL_DEL,q_,!0),this.facade.registerCommand(ct.MAIL_DEL_ALL,q_,!0),this.facade.registerCommand(ct.MAIL_PUSH_SUMMARY,q_)},t}(rc),Y_=function(e){function t(){t.__super.call(this)}o(t,"modules.mail.controller.commands.MailDetailCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("MailDetail",t.value);i=new ut(i),this.sendNotification("RECEIVE_MAIL_DETAIL",i)}},t}(rc),q_=function(e){function t(){t.__super.call(this)}o(t,"modules.mail.controller.commands.MailSummaryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 1:this._list(t);break;case 100:this._chg(t);break;case 3:case 5:var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);n.isEmpty||this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"邮件奖励领取成功",awards:n,desc:""}),this.sendNotification("prompted_info_show",{info:"邮件奖励领取成功"});break;case 4:this.sendNotification("prompted_info_show",{info:"邮件删除成功"}),this._chg(t);break;case 6:this.sendNotification("prompted_info_show",{info:"邮件删除成功"})}},i._list=function(e){var t=v.protoCodec.getResponseDecoder().decode("MailSummaryList",e.value),i=this.facade.retrieveProxy("MailProxy"),n=i.receiveList(t.arr);this.sendNotification("RECEIVE_MAIL_LIST",n)},i._chg=function(e){var t=v.protoCodec.getResponseDecoder().decode("MailSummary",e.value),i=this.facade.retrieveProxy("MailProxy"),n=i.receiveOne(t);this.sendNotification("RECEIVE_MAIL_LIST",n)},t}(rc),K_=function(e){function t(){t.__super.call(this,"MailProxy")}o(t,"modules.mail.model.MailProxy",e);var i=t.prototype;return i.receiveList=function(e){return this.data=e,this.mailSummarys},i.receiveOne=function(e){if(this.mailSummarys){var t=0;for(t=0;t<this.mailSummarys.length;t++){var i=this.mailSummarys[t];if(i.id==e.id)return 2==e.state?(i.state=2,this.mailSummarys.splice(t,1)):this.mailSummarys[t]=e,this.mailSummarys}2!=e.state&&this.mailSummarys.push(e)}return this.mailSummarys},i.getSummary=function(e){var t;for(var i in this.mailSummarys)if(t=this.mailSummarys[i],t.id==e)return t;return null},i.hasNotRead=function(){var e;for(var t in this.mailSummarys)if(e=this.mailSummarys[t],0==e.state)return!0;return!1},i.hasReaded=function(){var e;for(var t in this.mailSummarys)if(e=this.mailSummarys[t],1==e.state)return!0;return!1},s(0,i,"mailSummarys",function(){return this.data}),t.NAME="MailProxy",t}(sc),X_=function(e){function t(){this._inited=!1,this._lbGuoQin=[null,null,null,null],this._RBase=0,this._lotter=null,t.__super.call(this,"ActivityMediator")}o(t,"modules.activity.view.ActivityMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new IP),this.vi.act1.removeSelf(),this.vi.act2.removeSelf(),this.vi.act3.removeSelf(),this.vi.act4.removeSelf(),this.vi.act5.removeSelf(),this.vi.act6.removeSelf(),this.vi.act7.removeSelf(),this.vi.act8.removeSelf(),this.vi.act9.removeSelf(),this.vi.act10.removeSelf(),this.vi.act11.removeSelf(),this.vi.act12.removeSelf(),this.vi.act13.removeSelf(),this.vi.act14.removeSelf(),this.vi.act15.removeSelf(),this.vi.act16.removeSelf(),this.vi.act17.removeSelf(),this.vi.act20.removeSelf(),this.vi.act100.removeSelf();var e=this.vi.act7.getChildByName("btnExchange");e.clickHandler=new h(this,this.onExchange),this.vi.act9.on("click",this,this.onOncePayGold);var t=this.vi.act10.getChildByName("goldenList");t.renderHandler=new h(this,this.onGoldRender),t.dataSource=B_.GOLD_LIST,t.mouseEnabled=!0,t.mouseHandler=new h(this,this.onGoldLis);var i=this.vi.act11.getChildByName("dailySign");i.renderHandler=new h(this,this.onSignRender),i.scrollBar.hide=!0,i.dataSource=B_.DAYLY_SIGN,i.mouseEnabled=!0,i.mouseHandler=new h(this,this.onSignLis),this.vi.act13.on("click",this,this.onRedBox);var n=this.vi.act14.getChildByName("awards");n.renderHandler=new h(this,this.onRenderLottery),n.dataSource=rt.RATES,this.vi.act14.on("click",this,this.onLottery),this.vi.act15.on("click",this,this.onClickPayStone);var o=this.vi.act16.getChildByName("dailySign");o.renderHandler=new h(this,this.onSignTotalRender),o.scrollBar.hide=!0,o.dataSource=B_.DAYLY_SIGN_TOTAL,o.mouseEnabled=!0,o.mouseHandler=new h(this,this.onSignTotalLis)},n.onLottery=function(e){if("btnAward"==e.target.name){var t=this.facade.retrieveProxy("ActivityPropxy");t&&t.playerLottery&&Rc.instance.draw(t.playerLottery.awards.length)}},n.onClickPayStone=function(e){var t=this.facade.retrieveProxy("ActivityPropxy");if(null==t||!t.tempActivitySet.inTime())return void this.sendNotification("prompted_info_show",{info:"活动未开启"});var i;switch(e.target.name){case"btnPayStone0":i=this.facade.retrieveProxy("MarketProxy"),i.payment(720);break;case"btnPayStone1":i=this.facade.retrieveProxy("MarketProxy"),i.payment(721);break;case"btnPayStone2":i=this.facade.retrieveProxy("MarketProxy"),i.payment(722)}},n.onOncePayGold=function(e){"btnAward"==e.target.name&&Ic.instance.takeAwardOfOncePay()},n.onRedBox=function(e){"btnAward"==e.target.name&&Ic.instance.openRedbox()},n.onRegister=function(){this.facade.registerMediator(new Q_)},n.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","ZERO_CLOCK_TRIGER","USER_INIT","SHOW_ACTIVITY_PAGE","RECEIVE_ACTIVITY_INFO","RECEIVE_ACTIVITY_LOTTERY_INFO","RECIVE_PAY_TOTAL_INFO","FRESH_GOODS_PACK"]},n.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this._inited=!1,this._lotter=null;break;case"ZERO_CLOCK_TRIGER":i.timer.once(1e4,this,function(){Ic.instance.query()});case"USER_INIT":this._lotter=null,Ic.instance.query(),this._inited=!0;break;case"SHOW_ACTIVITY_PAGE":this.freshGuoqin(),this.vi.popup();var t=this.facade.retrieveProxy("ActivityPropxy");t.isLocTimeChg()&&t.updateLocTime();break;case"RECEIVE_ACTIVITY_INFO":this.fresh(e.getBody());break;case"FRESH_GOODS_PACK":if(this.vi.isPopup){var n=e.getBody();n.contain(0)&&this.freshGuoqin()}break;case"RECEIVE_ACTIVITY_LOTTERY_INFO":this.checkLottery(e.getBody());break;case"RECIVE_PAY_TOTAL_INFO":this.vi.act17&&this.freshDoubleAct(this.vi.act17)}},n.fresh=function(e){var t=this.facade.retrieveProxy("ActivityPropxy");if(null==t||!t.tempActivitySet.showTime())return void(this.vi.panelList.visible=!1);t.tempActivitySet.isOpen(14)&&Rc.instance.query(),this.vi.panelList.removeChildren(),this.vi.title.text=t.tempActivitySet.getName(),this.vi.lbBegin.text="活动开始："+t.tempActivitySet.getBeginDate(),this.vi.lbEnd.text="活动结束："+t.tempActivitySet.getEndDate(),this.vi.lbEnd.color="#fffc00",t.tempActivitySet.inTime()?this.vi.lbBegin.color="#00dc24":this.vi.lbBegin.color="#e70626";var i,n=0,o=0;for(var s in t.tempActivitySet.getOpenTypes()){i=t.tempActivitySet.getOpenTypes()[s];var r=null;switch(i){case 1:r=this.vi.act1;break;case 2:r=this.vi.act2;break;case 3:r=this.vi.act3;break;case 4:r=this.vi.act4;break;case 5:r=this.vi.act5;break;case 6:r=this.vi.act6;break;case 7:r=this.vi.act7;break;case 8:r=this.vi.act8;break;case 9:r=this.checkOncePay(e);break;case 10:r=this.vi.act10;var a=r.getChildByName("goldenList");a.refresh();break;case 11:r=this.vi.act11;var l=r.getChildByName("dailySign");l.refresh(),l.scrollTo(e.getSignDayIndex(t.tempActivitySet));break;case 16:r=this.vi.act16;var h=r.getChildByName("dailySign");h.refresh(),h.scrollTo(e.signeds.size);break;case 12:r=this.vi.act12;break;case 13:r=this.checkRedBox(e);break;case 14:r=this.checkLottery(this._lotter);break;case 15:r=this.checkPaySkyStone(e);break;case 17:v.OPEN_PAYMENT&&(r=this.vi.act17,this.freshDoubleAct(r));break;case 20:v.OPEN_PAYMENT&&(r=this.vi.act20);break;case 19:r=this.vi.act19;break;default:i>=1e3&&(r=this.getTherOnlyShow(i,t.tempActivitySet.getOtherInfo()))}if(null!=r){n+=1,r.pos(0,o),o=o+r.height+20;var c=r.getChildByName("lbNo");c.text="活动"+so.getChineseNum(n),this.vi.panelList.addChild(r)}}n>0&&this.vi.panelList.refresh()},n.freshDoubleAct=function(e){var t=e.getChildByName("info"),i=this.facade.retrieveProxy("PayTotalPropxy"),n=0;i&&i.info&&(n=i.info.totalRmb);var o="（仅活动期间有效，";o+=n>=188888?"机不可失）":n>=88888?"累充到188888开启8888双倍）":n>=36888?"累充到88888开启3999双倍）":n>=9888?"累充到36888开启1298双倍）":"648以上需要累充条件）",t.text=o},n.checkRedBox=function(e){var t=this.facade.retrieveProxy("ActivityPropxy"),i=this.vi.act13,n=i.getChildByName("lbBuyed"),o=i.getChildByName("btnAward");return t.tempActivitySet.inTime()?(ro.isTodayTs(e.redboxTime)?(n.text="今日已领取",n.color="#00dc24",n.visible=!0,o.visible=!1):(n.text="可领取",n.color="#e70626",n.visible=!1,o.visible=!0),i):(n.text="活动未开启",n.color="#fffc00",n.visible=!0,o.visible=!1,i)},n.checkOncePay=function(e){if(!v.OPEN_PAYMENT)return null;var t=this.facade.retrieveProxy("ActivityPropxy"),i=this.vi.act9,n=i.getChildByName("lbBuyed"),o=i.getChildByName("btnAward");return t.tempActivitySet.inTime()?(0==e.oncePayGold?(n.text="未达成",n.color="#e70626",o.visible=!1):100==e.oncePayGold?(n.text="",o.visible=!0):-100==e.oncePayGold&&(ro.isTodayTs(e.oncePayTime)?(n.text="今日已领取",n.color="#00dc24",o.visible=!1):(n.text="未达成",n.color="#e70626",o.visible=!1)),i):(n.text="活动未开启",n.color="#e70626",o.visible=!1,i)},n.checkPaySkyStone=function(e){if(!v.OPEN_PAYMENT&&!X.openJade())return null;var t=this.vi.act15,i=t.getChildByName("contentStone"),n=i.getChildByName("txtStone2"),o=i.getChildByName("btnPayStone0"),s=i.getChildByName("btnPayStone1"),r=i.getChildByName("btnPayStone2");X.openJade()?qt.getOne(722).canJump()||(o.label=o.label.replace("元","仙玉"),s.label=s.label.replace("元","仙玉"),r.label=r.label.replace("元","仙玉")):(T.IS_ON_MINI||Q.isLayaAndIos())&&(n.visible=!1,r.visible=!1);var a=t.getChildByName("lbBuyed");return ro.isTodayTs(e.buyTimeStone)?(i.visible=!1,a.visible=!0):(i.visible=!0,a.visible=!1),t},n.getTherOnlyShow=function(e,t){var i=this.vi.act100,n=i.getChildByName("info");return n.text=t,i},n.onGoldRender=function(e,t){var i,n=e.dataSource;if(n){var o=this.facade.retrieveProxy("ActivityPropxy"),s=o.playerActivity,r=e.getChildByName("btnAward"),a=e.getChildByName("btnAward2");if(5e5==n.aim)if(i=e.getChildByName("info"),i.color="#FFA500",i.text="需要：消耗"+n.aim+"元宝  \n奖励："+n.count+"元宝 和 橙宠进阶丹*"+n.box,i=e.getChildByName("lbAim"),s)switch(s.getGoldState(n.aim)){case 0:i.text=s.goldenTotal+"/"+n.aim,r.visible=!1,a.visible=!1;break;case 1:i.text="",r.label="领取奖励",r.visible=!0,a.visible=!1;break;case 2:i.text="已领取奖励",i.color="#fffc00",r.visible=!1,a.visible=!1;break;case 3:i.text="已领取奖励",i.color="#00dc24",r.visible=!1,a.visible=!1;break;default:i.text="过期",r.visible=!1,a.visible=!1}else i.text="",r.visible=!1;else if(i=e.getChildByName("info"),i.color="#ffffff",i.text="需要：消耗"+n.aim+"元宝  \n奖励："+n.count+"元宝 或 器灵宝箱*"+n.box,i=e.getChildByName("lbAim"),s)switch(s.getGoldState(n.aim)){case 0:i.text=s.goldenTotal+"/"+n.aim,r.visible=!1,a.visible=!1;break;case 1:i.text="",r.label="领取元宝",r.visible=!0,a.visible=!0;break;case 2:i.text="已领取元宝",i.color="#fffc00",r.visible=!1,a.visible=!1;break;case 3:i.text="已领取宝箱",i.color="#00dc24",r.visible=!1,a.visible=!1;break;default:i.text="过期",r.visible=!1,a.visible=!1}else i.text="",r.visible=!1}},n.onGoldLis=function(e,t){if("click"==e.type){var i=this.vi.act10.getChildByName("goldenList"),n=i.getCell(t).dataSource;n&&("btnAward"==e.target.name?5e5==n.aim?Ic.instance.takeAward(n.aim):this.sendNotification("POP_CONFIRM_INFO",{info:"奖励元宝或宝箱只能二选一,确认选择元宝吗",handler:h.create(this,function(e){e&&Ic.instance.takeAward(n.aim)})}):"btnAward2"==e.target.name&&this.sendNotification("POP_CONFIRM_INFO",{info:"奖励元宝或宝箱只能二选一,确认选择器灵宝箱",handler:h.create(this,function(e){e&&Ic.instance.takeAward(-n.aim)})}))}},n.freshGuoqin=function(){var e=this.facade.retrieveProxy("ActivityPropxy");if(e.tempActivitySet.inTime()&&e.tempActivitySet.isOpen(7)){var t=this.facade.retrieveProxy("GoodsProxy"),i=t.listItems(0),n=this.vi.act7.getChildByName("lbGuo"),o=this.vi.act7.getChildByName("lbQin"),s=this.vi.act7.getChildByName("lbKuai"),r=this.vi.act7.getChildByName("lbLe");n.text="『国』0个",n.color="#e70626",o.text="『庆』0个",o.color="#e70626",s.text="『快』0个",s.color="#e70626",r.text="『乐』0个",r.color="#e70626",this._lbGuoQin=[null,null,null,null];var a;for(var l in i)a=i[l],null==a||a.count<=0||0==a.goodsType&&(500013==a.baseId?(n.text="『国』"+a.count+"个",n.color="#00dc24",this._lbGuoQin[0]=a):500014==a.baseId?(o.text="『庆』"+a.count+"个",o.color="#00dc24",this._lbGuoQin[1]=a):500015==a.baseId?(s.text="『快』"+a.count+"个",s.color="#00dc24",this._lbGuoQin[2]=a):500016==a.baseId&&(r.text="『乐』"+a.count+"个",r.color="#00dc24",this._lbGuoQin[3]=a))}},n.onExchange=function(){return this.freshGuoqin(),null==this._lbGuoQin[0]||null==this._lbGuoQin[1]||null==this._lbGuoQin[2]||null==this._lbGuoQin[3]?void this.sendNotification("prompted_info_show",{info:"需要集齐四个字方可兑换"}):void Ic.instance.exchangeGuoqin(this._lbGuoQin)},n.onSignLis=function(e,t){if("click"==e.type&&"btnAward"==e.target.name){var i=this.vi.act11.getChildByName("dailySign"),n=i.getCell(t).dataSource;n&&Ic.instance.sign()}},n.onSignTotalLis=function(e,t){if("click"==e.type&&"btnAward"==e.target.name){var i=this.vi.act16.getChildByName("dailySign"),n=i.getCell(t).dataSource;n&&Ic.instance.signTotal(n.d)}},n.onSignRender=function(e,t){var i,n=e.dataSource;if(n){switch(i=e.getChildByName("day"),i.text="第"+n.d+"天",i=e.getChildByName("awards"),n.type){case 0:var o=g.database.getData("props",n.id);i.color=N.getColor(o.quality),i.text=o.name+"x"+n.count;break;case 2:i.color="#00dc24",i.text="铜币"+n.count/1e4+"万";break;case 3:i.color="#fffc00",i.text="元宝"+n.count}i=e.getChildByName("lbState");var s=e.getChildByName("btnAward"),r=this.facade.retrieveProxy("ActivityPropxy");if(r.playerActivity)switch(r.playerActivity.getSignDayState(n.d,r.tempActivitySet)){case 0:i.text="待领取",s.visible=!1;break;case 1:i.text="",s.visible=!0;break;case 2:i.text="已领取",s.visible=!1;break;case 3:i.text="过期",s.visible=!1}else i.text="",s.visible=!1}},n.onSignTotalRender=function(e,t){var i,n=e.dataSource;if(n){i=e.getChildByName("day"),i.text="第"+n.d+"天";for(var o=0,s=0,r=0,a=0;3>a;a++)if(0==a?(o=n.awd[0],s=n.awd[1],r=n.awd[2],i=e.getChildByName("awards"),i.visible=!0):1==a?(i=e.getChildByName("awards1"),n.awd.length>=6?(o=n.awd[3],s=n.awd[4],r=n.awd[5],i.visible=!0):i.visible=!1):(i=e.getChildByName("awards2"),n.awd.length>=9?(o=n.awd[6],s=n.awd[7],r=n.awd[8],i.visible=!0):i.visible=!1),i.visible)switch(o){case 0:var l=g.database.getData("props",s);i.color=N.getColor(l.quality),i.text=l.name+"x"+r;break;case 2:i.color="#00dc24",i.text="铜币"+r/1e4+"万";break;case 3:i.color="#fffc00",i.text="元宝"+r;break;case 11:i.color="#00dc24",i.text="真元"+r;break;case 13:i.color="#00dc24",i.text="威望"+r}i=e.getChildByName("lbState");var h=e.getChildByName("btnAward"),c=this.facade.retrieveProxy("ActivityPropxy");if(c.playerActivity)if(c.playerActivity.signeds.contain(n.d))i.text="已领取",i.color="#00dc24",h.visible=!1;else if(n.d==c.playerActivity.signeds.size+1){var u=c.playerActivity.lastSignTime;null!=u&&ro.isToday(u)?(i.text="待领取",i.color="#0084ff",h.visible=!1):(i.text="",h.visible=!0)}else i.text="待领取",i.color="#0084ff",h.visible=!1;else i.text="",h.visible=!1}},n.onRenderLottery=function(e,t){var i=e.dataSource,n=e.getChildByName("rate"),o=e.getChildByName("info"),s=e.getChildByName("state");if(o.text=i.info,o.color=i.col,this._lotter&&-1!=this._lotter.awards.indexOf(i.id))n.text="-",s.color="#00dc24",s.text="已获得";else{var r=100*i.r/this._RBase+"";r=vo.toFixed(r),n.text=r+"%",s.color="#e70626",s.text="待抽取"}},n.checkLottery=function(e){this._lotter=e,this._RBase=0;var t;for(var i in rt.RATES)t=rt.RATES[i],null!=e&&-1!=e.awards.indexOf(t.id)||(this._RBase+=t.r);var n=this.vi.act14,o=n.getChildByName("awards");o.refresh();var s=n.getChildByName("btnAward"),r=n.getChildByName("lbTimes"),a=this.facade.retrieveProxy("ActivityPropxy");if(null!=e&&a.tempActivitySet.lotteryOpen()){var l=e.awards.length+1,h=rt.getDrawNeedGold(l);h>-1&&e.rmb>=h?(r.text=0==h?"当前可免费抽奖一次":"当前可抽奖",r.color="#00dc24",s.visible=!0):h>0?(0==v.OPEN_PAYMENT?r.text="春节期活动间，累计获得"+(h-e.rmb)+"福利积分即可再抽一次":r.text="春节期活动间，累计再充值"+(h-e.rmb)+"元即可再抽一次",r.color="#e70626",s.visible=!1):-1==h&&(r.text="奖励已全部获得",r.color="#00dc24",s.visible=!1)}else r.text="正月初五开启抽奖",r.color="#fffc00",s.visible=!1;return n},s(0,n,"vi",function(){return this.getViewComponent()}),t.NAME="ActivityMediator",t}(lc),Q_=function(e){function t(){t.__super.call(this,"ActivityLimitMediator")}o(t,"modules.activity.view.ActivityLimitMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new AP),this.vi.act1.on("click",this,this.onClickPayStone)},i.listNotificationInterests=function(){return["ZERO_CLOCK_TRIGER","SHOW_ACTIVITY_LIMIT_PAGE","RECEIVE_ACTIVITY_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"ZERO_CLOCK_TRIGER":break;case"SHOW_ACTIVITY_LIMIT_PAGE":this.vi.popup();break;case"RECEIVE_ACTIVITY_INFO":this.checkPaySkyStone(e.getBody())}},i.checkPaySkyStone=function(e){if(v.OPEN_PAYMENT||X.openJade()){this.vi.lbBuyed.visible=!1,this.vi.btnPayStone0.visible=!1,this.vi.btnPayStone1.visible=!1,this.vi.btnPayStone2.visible=!1,X.openJade()&&(this.vi.btnPayStone0.label=this.vi.btnPayStone0.label.replace("元","仙玉"),this.vi.btnPayStone1.label=this.vi.btnPayStone1.label.replace("元","仙玉"),this.vi.btnPayStone2.label=this.vi.btnPayStone2.label.replace("元","仙玉"));var t=this.facade.retrieveProxy("ActivityPropxy");t.isOpenBuyStoneAct()?ro.isTodayTs(t.playerActivity.buyTimeStone)?(this.vi.lbBuyed.text="今日已购买",this.vi.lbBuyed.color="#00dc24",this.vi.lbBuyed.visible=!0):(this.vi.btnPayStone0.visible=!0,this.vi.btnPayStone1.visible=!0,X.openJade()||!T.IS_ON_MINI&&!Q.isLayaAndIos()?this.vi.btnPayStone2.visible=!0:this.vi.txtStone2.visible=!1):this.vi.close()}},i.onClickPayStone=function(e){var t;switch(e.target.name){case"btnPayStone0":t=this.facade.retrieveProxy("MarketProxy"),t.payment(720);break;case"btnPayStone1":t=this.facade.retrieveProxy("MarketProxy"),t.payment(721);break;case"btnPayStone2":t=this.facade.retrieveProxy("MarketProxy"),t.payment(722)}},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="ActivityLimitMediator",t}(lc),j_=function(e){function t(){this.itemDic=new uo,t.__super.call(this,"ShopProxy")}o(t,"modules.shop.model.ShopProxy",e);var i=t.prototype;return i.receive=function(e){this.itemDic.clear();for(var t=e.split("|"),i=0;i<t.length;i++){var n,o=t[i].split("_"),s=0;4==o.length?(s=vo["int"](o[0]),n=new pt(vo["int"](o[1]),vo["int"](o[2]),vo["int"](o[3])),this.itemDic.set(s,n)):2==o.length&&(s=vo["int"](o[0]),this.itemDic.set(s,null))}return this.itemDic},t.NAME="ShopProxy",t}(sc),Z_=function(e){function t(){t.__super.call(this)}o(t,"modules.shop.controller.ShopPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(dt.SHOP_QUERY,J_,!0),this.facade.registerCommand(dt.SHOP_BUY,J_,!0)},t}(rc),J_=function(e){function t(){t.__super.call(this)}o(t,"modules.shop.controller.commands.PropsShopCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeString(t.value),n=this.facade.retrieveProxy("ShopProxy"),o=n.receive(i);switch(this.sendNotification("RECEIVE_SHOP_INFO",o),t.cmd){case 1:break;case 2:this.sendNotification("prompted_info_show",{info:"购买成功"})}}},t}(rc),$_=function(e){function t(){t.__super.call(this)}o(t,"modules.bone.controller.BonePrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(ft.BONE_QUERY,sm,!0),this.facade.registerCommand(ft.BONE_FEED,im,!0),this.facade.registerCommand(ft.BONE_UPGRADE,em,!0),this.facade.registerCommand(ft.BONE_DRUG,tm,!0)},t}(rc),em=function(e){function t(){t.__super.call(this)}o(t,"modules.bone.controller.commands.BoneUpgradeCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("BoneInfo",t.value),n=this.facade.retrieveProxy("BoneProxy"),o=n.playerBone,s=o.nextAttrsAdd.keys[0];o.nextAttrsAdd.get(s);o=n.receive(i),this.sendNotification("RECEIVE_BONE_INFO",o),this.sendNotification("prompted_info_show",{info:"灵根提升成功"})}},t}(rc),tm=function(e){function t(){t.__super.call(this)}o(t,"modules.bone.controller.commands.BoneDrugCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("BoneInfo",t.value),n=this.facade.retrieveProxy("BoneProxy"),o=n.playerBone;o.variation=i.variation,this.sendNotification("RECEIVE_BONE_INFO",o),this.sendNotification("prompted_info_show",{info:"灵根变异成功"})}},t}(rc),im=function(e){function t(){t.__super.call(this)}o(t,"modules.bone.controller.commands.BoneFeedCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("BoneInfo",t.value),n=this.facade.retrieveProxy("BoneProxy"),o=n.receive(i);this.sendNotification("RECEIVE_BONE_INFO",o)}},t}(rc),nm=function(e){function t(){this.btnTopMail=null,t.__super.call(this,"MailMediator")}o(t,"modules.mail.view.MailMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new RP),this.view.list.scrollBar.hide=!0,this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onClick),this.view.bar.selectHandler=new h(this,this.onBar);var e=this.facade.retrieveMediator("SettingMediator");this.btnTopMail=e.view.btnMail,this.btnTopMail.clickHandler=new h(this,this.onTopBtn),this.view.btnDelAll.clickHandler=new h(this,this.onDelAll),this.view.btnReadAll.clickHandler=new h(this,this.onReadAll)},i.onDelAll=function(){var e=this.facade.retrieveProxy("MailProxy");e&&e.hasReaded()?Oc.instance.delAll():this.sendNotification("prompted_info_show",{info:"暂无已读邮件"})},i.onReadAll=function(){var e=this.facade.retrieveProxy("MailProxy");e&&e.hasNotRead()?Oc.instance.readAll():this.sendNotification("prompted_info_show",{info:"暂无未读邮件"})},i.onTopBtn=function(){this.view.popup()},i.onRegister=function(){this.facade.registerMediator(new rm)},i.listNotificationInterests=function(){return["USER_INIT","ZERO_CLOCK_TRIGER","RECEIVE_MAIL_LIST"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("MailProxy");switch(e.getName()){case"USER_INIT":t.receiveList(null),this.view.bar.selectedIndex=0,this.view.list.visible=!1,this.view.lbEmpty.visible=!1,Oc.instance.list();break;case"ZERO_CLOCK_TRIGER":Oc.instance.list();break;case"RECEIVE_MAIL_LIST":this.onBar(this.view.bar.selectedIndex);var i=this.facade.retrieveMediator("HomeMediator"),n=i.view.moduleItems,o=n.getChildByName("btnSetting"),s=t.hasNotRead();co.showOrHide(o,s),co.showOrHide(this.btnTopMail,s)}},i.onRender=function(e,t){var i=e.dataSource;if(i){var n=e.getChildByName("info");switch(n.style.fontSize=24,n.style.leading=6,n.style.color="#ffffff",n.innerHTML=i.title,i.state){case 0:e.alpha=1;break;case 1:e.alpha=.5;break;case 2:default:e.alpha=.3}var o=e.getChildByName("effect"),s=i.endtime-g.clock.currentTime;s=vo["int"](s/864e5),s>0?o.text=s+"天后过期":o.text="23点59分过期",o=e.getChildByName("sendtime");var r=g.clock.currentTime-i.sendtime,a=vo["int"](r/864e5);a>0?o.text=a+"天前":(a=vo["int"](r/36e5),a>0?o.text=a+"小时前":(a=vo["int"](r/6e4),a>0?o.text=a+"分钟前":o.text=a+"刚刚"))}},i.onClick=function(e,t){if("click"==e.type){var i=this.view.list.getCell(t).dataSource;i&&Oc.instance.queryDetail(i.id)}},i.onBar=function(e){var t=this.facade.retrieveProxy("MailProxy"),i=null;if(0==e)i=t.mailSummarys;else{i=[];var n;for(var o in t.mailSummarys)n=t.mailSummarys[o],0==n.state&&i.push(n)}null==i||0==i.length?(this.view.list.visible=!1,this.view.lbEmpty.visible=!0):(this.view.list.dataSource=i,this.view.list.visible=!0,this.view.lbEmpty.visible=!1)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="MailMediator",t}(lc),om=function(e){function t(){t.__super.call(this,"BoneProxy")}o(t,"modules.bone.model.BoneProxy",e);var i=t.prototype;return i.receive=function(e){null==this.data&&(this.data=new _t);var t=Ng.userVO.getValue(1004);return this.playerBone.update(e,t),this.playerBone},s(0,i,"playerBone",function(){return this.data}),t.NAME="BoneProxy",t}(sc),sm=function(e){function t(){t.__super.call(this)}o(t,"modules.bone.controller.commands.BoneQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("BoneInfo",t.value),n=this.facade.retrieveProxy("BoneProxy"),o=n.receive(i);this.sendNotification("RECEIVE_BONE_INFO",o)}},t}(rc),rm=function(e){function t(){this._mail=null,t.__super.call(this,"MailDetailMediator")}o(t,"modules.mail.view.MailDetailMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new LP);var e=this.view.title;e.style.fontSize=24,e.style.leading=6,e.style.color="#ffffff",e=this.view.content,e.style.fontSize=24,e.style.leading=6,e.style.color="#ffffff",e=this.view.awards,e.style.fontSize=24,e.style.leading=6,e.style.color="#ffffff",this.view.btnSure.clickHandler=new h(this,this.onSure)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","RECEIVE_MAIL_DETAIL","RECEIVE_MAIL_LIST"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this.view.close();break;case"RECEIVE_MAIL_DETAIL":this.showMail(e.getBody());break;case"RECEIVE_MAIL_LIST":this.view.isPopup&&this._mail&&this.showMail(this._mail)}},i.showMail=function(e){this._mail=e,this.view.title.innerHTML=e.title,this.view.content.innerHTML=e.content,this.view.awards.innerHTML=e.awardHtml;var t=this.facade.retrieveProxy("MailProxy"),i=2,n=t.getSummary(e.id);switch(null!=n&&(i=n.state),i){case 0:this.view.btnSure.label="领取附件",this.view.btnSure.visible=!0;break;case 1:this.view.btnSure.label="删除邮件",this.view.btnSure.visible=!0;break;case 2:default:return this.view.btnSure.visible=!1,void this.view.close()}this.view.popup()},i.onSure=function(){"领取附件"==this.view.btnSure.label?Oc.instance.read(this._mail.id):Oc.instance.del(this._mail.id)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="MailDetailMediator",t}(lc),am=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.AlliancePrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(bt.ALLIANCE_QUERY_PLAYER_ALLIANCE,vm),this.facade.registerCommand(bt.ALLIANCE_QUERY_ALLIANCE,_m),this.facade.registerCommand(bt.ALLIANCE_CREATE,_m,!0),this.facade.registerCommand(bt.ALLIANCE_JOIN,_m,!0),this.facade.registerCommand(bt.ALLIANCE_QUERY_RANK,Em,!0),this.facade.registerCommand(bt.ALLIANCE_QUERY_DONATE_LOGS,um,!0),this.facade.registerCommand(bt.ALLIANCE_QUERY_ALLIANCE_LOGS,um,!0),this.facade.registerCommand(bt.ALLIANCE_LOOK_MEMBERS,mm,!0),this.facade.registerCommand(bt.ALLIANCE_QUIT,vm,!0),this.facade.registerCommand(bt.ALLIANCE_DISBAND,vm,!0),this.facade.registerCommand(bt.ALLIANCE_LIST,Em,!0),this.facade.registerCommand(bt.ALLIANCE_LIST_MEMBERS,cm,!0),this.facade.registerCommand(bt.ALLIANCE_DISMIS_MEMBER,cm,!0),this.facade.registerCommand(bt.ALLIANCE_APPOINT_TITLE,cm,!0),this.facade.registerCommand(bt.ALLIANCE_LIST_APPLYS,pm,!0),this.facade.registerCommand(bt.ALLIANCE_EXAMINE_APPLY,pm,!0),this.facade.registerCommand(bt.ALLIANCE_CHG_VALID_STATE,_m,!0),this.facade.registerCommand(bt.ALLIANCE_ABDICATE,cm,!0),this.facade.registerCommand(bt.ALLIANCE_DONATE_GOLDEN,dm,!0),this.facade.registerCommand(bt.ALLIANCE_DONATE_PROP,dm,!0),this.facade.registerCommand(bt.ALLIANCE_LEVE_UP,_m,!0),this.facade.registerCommand(bt.ALLIANCE_UPGRADE_SKILL,vm,!0),this.facade.registerCommand(bt.ALLIANCE_LEARN_BOOK,vm,!0),this.facade.registerCommand(bt.ALLIANCE_CHG_NOTICE,fm,!0),this.facade.registerCommand(yt.ALC_TASK_QUERY,hm,!0),this.facade.registerCommand(yt.ALC_TASK_TRY_STEAL,hm,!0),this.facade.registerCommand(yt.ALC_TASK_TYR_FINISH,hm,!0),this.facade.registerCommand(yt.ALC_TASK_FAST_FINISH,hm,!0),this.facade.registerCommand(yt.ALC_TASK_DROP,hm,!0),this.facade.registerCommand(yt.ALC_TASK_FRESH_BY_GOLD,hm,!0),this.facade.registerCommand(yt.ALC_TASK_LIST_LOGS,gm,!0),this.facade.registerCommand(bt.ALLIANCE_PUSH_DISMISS_MEMBER,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_JOIN_MEMBER,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_QUIT,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_VALID_STATE,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_ABDICATE,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_BUILDING_LEVEL,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_APOINT_TITLE,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_DONATE_CHG_RES,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_PUSH_DISBAND,bm),this.facade.registerCommand(bt.ALLIANCE_PUSH_APPLY_SIZE,pm)},t}(rc),lm=function(e){function t(){t.__super.call(this,"ShopMediator")}o(t,"modules.shop.view.ShopMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new FP)},i.listNotificationInterests=function(){return["SHOW_SHOP_PAGE","RECEIVE_SHOP_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_SHOP_PAGE":this.view.popup(),Mc.instance.query();break;case"RECEIVE_SHOP_INFO":this.view.fresh(e.getBody())}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="ShopMediator",t}(lc),hm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.AllianceTaskCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AlcTask",t.value),n=this.facade.retrieveProxy("AllianceProxy"),o=n.receiveTask(i),s=Tt.getTaskAward(o.lastQuality);switch(this.sendNotification("RECIVE_ALLIANCE_TASK",o),t.cmd){case 1:break;case 3:case 4:this.sendNotification("prompted_info_show",{info:"完成宗门任务,资源+"+s+"、贡献+"+s,updateTime:2e3});break;case 2:this.sendNotification("prompted_info_show",{info:"未被发现,完成宗门任务,资源+"+s+"、贡献+"+s,updateTime:2e3});break;case 6:this.sendNotification("prompted_info_show",{info:"宗门任务已刷新",updateTime:2e3})}}else-44==t.status&&(this.sendNotification("prompted_info_show",{info:"被对方宗门的人发现,开始战斗",updateTime:2e3}),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,7))},t}(rc),cm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.MemberOptCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 6:var i=v.protoCodec.getResponseDecoder().decode("MemberAlcListPager",t.value),n=this.facade.retrieveProxy("AllianceProxy"),o=n.receiveMemberList(i);this.sendNotification("RECIVE_ALC_MEMBER_LIST",o);break;case 8:break;case 11:break;case 12:}else-10019==t.status?12==t.cmd?this.sendNotification("prompted_info_show",{info:"让位失败，宗主在位不足7日"}):this.sendNotification("prompted_info_show",{info:"成员任职后7日内不可降职"}):this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),um=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.AllianceLogCommand",e);var i=t.prototype;return i.execute=function(e){
var t=e.getBody();if(t.success){var i,n=[],o=0;switch(t.cmd){case 21:for(i=v.protoCodec.getResponseDecoder().decode("AlcDaonateLogs",t.value),o=0;o<i.list.length;o++)n.unshift(new Nt(i.list[o]));this.sendNotification("RECIVE_ALLIANCE_LOGS",n);break;case 22:for(i=v.protoCodec.getResponseDecoder().decode("AlcLogs",t.value),o=0;o<i.list.length;o++)n.unshift(i.list[o]);this.sendNotification("RECIVE_ALLIANCE_DONATE_LOGS",n)}}},t}(rc),dm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.DonateCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("DonateOfAlc",t.value),n=new Nt(i);switch(t.cmd){case 13:break;case 14:}var o="进贡成功获得:贡献+"+n.donate;n.resource&&(o=o+",资源+"+n.resource),this.sendNotification("prompted_info_show",{info:o});var s=this.facade.retrieveProxy("AllianceProxy");s.playerAlliance&&(s.playerAlliance.donate+=n.donate,13==t.cmd&&(s.playerAlliance.lastDonateDate=n.date),this.sendNotification("RECIVE_PLAYER_ALLIANCE",s.playerAlliance))}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),pm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.ApplyCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();switch(t.cmd){case 7:this.list(t);break;case 10:this.eaxamine(t);break;case 109:this.applySize(t)}0==t.success&&(t.status==vt.HAS_ALLIANCE_YET&&10==t.cmd?this.sendNotification("prompted_info_show",{info:"对方已加入别的宗门"}):this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)}))},i.list=function(e){if(e.success){var t=v.protoCodec.getResponseDecoder().decode("ApplyAlcListPager",e.value),i=this.facade.retrieveProxy("AllianceProxy"),n=i.receiveApplyList(t);this.sendNotification("RECIVE_ALC_APPLY_LIST",n)}},i.eaxamine=function(e){e.success,kc.instance.listApplys(1,40)},i.applySize=function(e){var t=v.protoCodec.getResponseDecoder().decodeInt(e.value);this.sendNotification("RECIVE_APPLY_SIZE",t)},t}(rc),fm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.AllianceNoticeCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)this.sendNotification("prompted_info_show",{info:"宗门公告已更新"});else switch(t.status){case-10021:this.sendNotification("prompted_info_show",{info:"宗门公告内容最多100个字"});break;case-1001:this.sendNotification("prompted_info_show",{info:"宗门公告内容含有非法字符"})}},t}(rc),_m=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.AllianceCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=null;switch(t.cmd){case 2:i=this.dealVo(t),this.sendNotification("prompted_info_show",{info:"创建宗门成功"}),Ng.userVO.setValue(7011,i.allianceId),Ng.userVO.setValue(7012,i.name),Ng.userVO.setValue(7013,i.allianceLevel),Ng.userVO.setValue(7014,i.booksLevel),kc.instance.queryPlayerAlliance(),nu.instance.list(i.allianceId),this.sendNotification("RECIVE_ALLIANCE",i);break;case 1:i=this.dealVo(t),this.sendNotification("RECIVE_ALLIANCE",i);break;case 3:i=this.dealVo(t),this.sendNotification("RECIVE_ALLIANCE",i);break;case 9:this.sendNotification("prompted_info_show",{info:"宗门申请设置成功"});break;case 15:this.sendNotification("prompted_info_show",{info:"升级成功"}),i=this.dealVo(t),this.sendNotification("RECIVE_ALLIANCE",i)}}else switch(t.cmd){case 2:this.sendNotification("prompted_info_show",{info:"创建宗门失败,请确认宗门名格式是否有误"});break;default:this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})}},i.dealVo=function(e){var t=v.protoCodec.getResponseDecoder().decode("Alliance",e.value),i=this.facade.retrieveProxy("AllianceProxy"),n=i.receiveAlliance(t);if(n.allianceId){var o=Ng.userVO.getValue(7012)!=n.name;Ng.userVO.setValue(7011,n.allianceId),Ng.userVO.setValue(7012,n.name),Ng.userVO.setValue(7013,n.allianceLevel),Ng.userVO.setValue(7014,n.booksLevel),o&&this.sendNotification("USER_ALLIANCE_CHANGE")}return n},t}(rc),mm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.LookMembersCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("MemberAlcListPager",t.value),n=this.facade.retrieveProxy("AllianceProxy"),o=n.receiveMemberLookList(i);this.sendNotification("RECIVE_ALC_LOOK_MEMEBERS",o)}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},t}(rc),gm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.AllianceTaskLogCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AlcTaskLogs",t.value),n=[],o=0;for(o=0;o<i.list.length;o++)n.unshift(i.list[o]);this.sendNotification("RECIVE_ALLIANCE_TASK_LOGS",n)}else this.sendNotification("RECIVE_ALLIANCE_TASK_LOGS",null)},t}(rc),vm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.PlayerAllianceCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 0:this.receivePlayerAlliance(t);break;case 17:this.sendNotification("prompted_info_show",{info:"宗门技能升级成功"});break;case 16:this.receivePlayerAlliance(t),this.sendNotification("prompted_info_show",{info:"功法升级成功"});break;case 4:break;case 911:}else this.sendNotification("prompted_info_show",{info:vt.getInfo(t.status)})},i.receivePlayerAlliance=function(e){var t=v.protoCodec.getResponseDecoder().decode("PlayerAlliance",e.value),i=this.facade.retrieveProxy("AllianceProxy"),n=i.receivePlayerAlliance(t);this.sendNotification("RECIVE_PLAYER_ALLIANCE",n)},t}(rc),ym=function(e){function t(e,i){this._host=null,this._port=0,this._lastReceiveTimestamp=NaN,this._silence=!1,this._state=0,t.__super.call(this,e,i),this._host=e,this._port=i}o(t,"modules.chat.model.ChatSocket",e);var i=t.prototype;return i.writeByte=function(e,t){e.writeByte(t)},i.readByte=function(e){return e.readByte()},i.writeShort=function(e,t){e.writeInt16(t)},i.readShort=function(e){return e.getInt16()},i.writeInt=function(e,t){e.writeInt32(t)},i.readInt=function(e){return e.getInt32()},i.writeBytes=function(e,t){e.writeArrayBuffer(t)},i._onOpen=function(t){e.prototype._onOpen.call(this,t),this._state=200,as.debug(this,"_onOpen","---chat_ws 连接建立:"+this._silence+"-"+JSON.stringify(t)+this._host+this._port)},i._onClose=function(t){e.prototype._onClose.call(this,t),this._state=400,as.debug(this,"_onClose","---chat_ws 连接关闭:"+this._silence+"-"+JSON.stringify(t)+this._host+this._port)},i._onError=function(t){e.prototype._onError.call(this,t),this._state=404,as.debug(this,"_onError","---chat_ws 连接错误:"+this._silence+"-"+JSON.stringify(t)+this._host+this._port)},i.close=function(){e.prototype.close.call(this),this._state=400,as.debug(this,"_onError","----chat_ws 连接关闭1")},i.closeSilence=function(){this._silence=!0,this.cleanSocket()},i.sendPacket=function(e){this.connected&&(this.writeShort(this.output,e.module),this.writeShort(this.output,e.cmd),e.value&&this.writeBytes(this.output,e.value),this.flush())},i._onMessage=function(e){var t=new Vr;t.endian="bigEndian",t.writeArrayBuffer(e.data),t.pos=0;var i=this.readShort(t),n=this.readShort(t),o=this.readInt(t);switch(o){case 0:t.bytesAvailable>0?this.dispatch(i,n,o,t):this.dispatch(i,n,o);break;case 1:case 2:case 3:case 4:case to.RESPONSE_CODE_ERROR:this.dispatch(i,n,o);break;default:t.bytesAvailable>0?this.dispatch(i,n,o,t):this.dispatch(i,n,o)}},i.dispatch=function(e,t,i,n){var o=new no;o.module=e,o.cmd=t,o.status=i,o.value=n;var s=e+"_"+t;x.getInstance().sendNotification("SYS_MESSAGE_RECEIVE_CMD",o),x.getInstance().sendNotification(s,o),this._lastReceiveTimestamp=g.clock.currentTime},s(0,i,"lastReceiveTimestamp",function(){return this._lastReceiveTimestamp}),s(0,i,"state",function(){return this._state}),t.STATE_CREATING=0,t.STATE_OPEN=200,t.STATE_CLOSE=400,t.STATE_ERROR=404,t}(uc),bm=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.AlliancePushCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody(),i=this.facade.retrieveProxy("AllianceProxy"),n=v.protoCodec.getResponseDecoder().decode("AlcOption",t.value),o=Ct.getIns().update(n);switch(t.cmd){case 101:i.alliance&&(i.alliance.member=o.value,this.sendNotification("PUSH_ALC_ALLIANCE_CHANGED",i.alliance)),i.playerAlliance&&o.targetId==Ng.userVO.unitId.id&&(i.playerAlliance.title=o.value2,this.sendNotification("RECIVE_PLAYER_ALLIANCE",i.playerAlliance)),this.sendNotification("prompted_info_show",{info:"有新的成员加入宗门"}),this.sendNotification("PUSH_ALC_MEMBER_CHANGED");break;case 100:case 102:i.alliance&&(i.alliance.member=o.value,i.alliance.resource=o.value2,this.sendNotification("PUSH_ALC_ALLIANCE_CHANGED",i.alliance)),this.sendNotification("prompted_info_show",{info:"有成员退出宗门"}),this.sendNotification("PUSH_ALC_MEMBER_CHANGED");break;case 103:var s=o.value,r=o.value2;i.alliance&&(i.alliance.vilidState=1==s,i.alliance.limitLv=r,this.sendNotification("PUSH_ALC_ALLIANCE_CHANGED",i.alliance));break;case 104:i.alliance&&(i.alliance.masterId=o.targetId),this.sendNotification("prompted_info_show",{info:"宗门宗主变动"}),this.sendNotification("PUSH_ALC_MEMBER_CHANGED");break;case 105:var a=o.targetId,l=o.value,h=o.value2;switch(a){case 0:i.alliance&&(i.alliance.allianceLevel=l,i.alliance.resource=h),Ng.userVO.setValue(7013,l),this.sendNotification("prompted_info_show",{info:"宗门等级提升至"+l+"级"});break;case 1:i.alliance&&(i.alliance.booksLevel=l,i.alliance.resource=h),Ng.userVO.setValue(7014,l),this.sendNotification("prompted_info_show",{info:"功法阁等级提升至"+l+"级"});break;case 4:i.alliance&&(i.alliance.taskLevel=l,i.alliance.resource=h);break;case 5:this.sendNotification("prompted_info_show",{info:"宗门矿场等级提升至"+l+"级"}),l%5==0&&(kc.instance.queryAlliance(i.alliance.allianceId),nu.instance.list(i.alliance.allianceId))}i.alliance&&this.sendNotification("PUSH_ALC_ALLIANCE_CHANGED",i.alliance);break;case 106:this.sendNotification("prompted_info_show",{info:"宗门职位变动"}),i.playerAlliance&&o.targetId==Ng.userVO.unitId.id&&(i.playerAlliance.title=o.value,this.sendNotification("RECIVE_PLAYER_ALLIANCE",i.playerAlliance)),this.sendNotification("PUSH_ALC_MEMBER_CHANGED");break;case 107:i.alliance&&(i.alliance.resource=o.value,this.sendNotification("PUSH_ALC_ALLIANCE_CHANGED",i.alliance));break;case 108:this.sendNotification("prompted_info_show",{info:"宗门已解散"}),o.optionId!=Ng.userVO.unitId.id&&kc.instance.quit()}},t}(rc),Em=function(e){function t(){t.__super.call(this)}o(t,"modules.alliance.controller.commands.ListAllianceCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AllianceListPager",t.value),n=this.facade.retrieveProxy("AllianceProxy"),o=n.receiveAllianceList(i);switch(t.cmd){case 5:o.pager.recoards.sort(this.compareFunction),this.sendNotification("RECIVE_ALLIANCE_LIST",o);break;case 20:this.sendNotification("RECIVE_ALLIANCE_RANK_LIST",o)}}},i.compareFunction=function(e,t){return e.allianceLevel>t.allianceLevel?-1:e.allianceLevel<t.allianceLevel?1:e.members-t.members},t}(rc),xm=function(e){function t(){this._requested=!1,this.feedPop=new NP,t.__super.call(this,"BoneMediator")}o(t,"modules.bone.view.BoneMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new bN),this.view.submit.clickHandler=new h(this,this.onUpgrade),this.view.btnSp.clickHandler=new h(this,this.onSp),this.view.listProps.mouseEnabled=!0,this.view.listProps.mouseHandler=new h(this,this.onPropList)},i.listNotificationInterests=function(){return["RECEIVE_BONE_INFO","SHOW_BONE_PAGE","USER_CURRENCY_CHANGE","CLEAR_CACHE_DATA","CHANGE_NATURE_RESULT"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":case"CHANGE_NATURE_RESULT":this._requested=!1;break;case"RECEIVE_BONE_INFO":this.view.showInfo(e.getBody());break;case"USER_CURRENCY_CHANGE":this.view.visible&&this.view.freshSilver();break;case"SHOW_BONE_PAGE":var t=this.facade.retrieveProxy("BoneProxy"),i=t.playerBone;if(i&&i.variation>0)return;e.getBody()instanceof modules.goods.model.data.PackProp&&Dc.instance.drug(e.getBody().id,1)}},i.onShow=function(){0==this._requested&&(Dc.instance.query(),this._requested=!0),this.view.freshSilver()},i.onUpgrade=function(){var e=this.facade.retrieveProxy("BoneProxy"),t=e.playerBone;if(t){if(!t.nextSilver)return void this.sendNotification("prompted_info_show",{info:"已是最高级灵根。"});for(var i=0;i<t.nextFoodArr.length;i++){var n=t.nextFoodArr[i],o=0;switch(i){case 0:o=t.propOneNum;break;case 1:o=t.propTwoNum;break;case 2:o=t.propThreeNum}if(n.count>o)return void this.sendNotification("prompted_info_show",{info:"提升条件未达成。"})}var s=Ng.userVO.getValue(1009);if(s<t.nextSilver)return void this.sendNotification("prompted_info_show",{info:"铜币不足。"});Dc.instance.upgrade(),op.aldSendEvent("灵根升级")}},i.onPropList=function(e,t){if("click"==e.type&&"putIn"==e.target.name){var i=this.view.listProps.dataSource[t],n=this.facade.retrieveProxy("BoneProxy"),o=n.playerBone,s=0;switch(t){case 0:s=o.propOneNum;break;case 1:s=o.propTwoNum;break;case 2:s=o.propThreeNum}var r,a=Ng.userVO.getValue(1004),l=[],h=this.facade.retrieveProxy("GoodsProxy"),c=h.listItems(0);for(var u in c)if(r=c[u],!(null==r||r.count<=0)&&0==r.goodsType){var d=r;if(i.matchNature&&d.propConf.nature!=a)continue;if(i.level>d.propConf.level)continue;switch(i.quality){case 3:if(d.propConf.quality<3||1!=d.propConf.propType&&2!=d.propConf.propType)continue;break;case 4:if(d.propConf.quality<4||1!=d.propConf.propType&&2!=d.propConf.propType)continue;break;case 5:if(d.propConf.quality<5||1!=d.propConf.propType&&2!=d.propConf.propType)continue;break;case 9:if(d.propConf.quality<5||2!=d.propConf.propType)continue;break;case 6:if(d.propConf.quality<6||1!=d.propConf.propType&&2!=d.propConf.propType)continue;break;case 10:if(d.propConf.quality<6||2!=d.propConf.propType)continue;break;default:continue}l.push(d.resetCountTmp())}l.sort(this.compareFunctionProp);var p="需要";switch(i.quality){case 3:p+="材料、绿色、";break;case 4:p+="材料、黄色、";break;case 5:p+="材料、红色、";break;case 9:p+="特殊材料、红色、";break;case 6:p+="材料、紫色、";break;case 10:p+="特殊材料、紫色"}i.level?p=p+i.level+"级以上":p+="任意等级",p=i.matchNature?p+"、"+R.getName(a)+"("+s+"/"+i.count+")":p+"("+s+"/"+i.count+")",this.feedPop.title.text=p,this.feedPop.popPops(t,l,i.count-s)}},i.compareFunctionProp=function(e,t){return e.propConf.level>t.propConf.level?1:e.propConf.level<t.propConf.level?-1:e.propConf.quality-t.propConf.quality},i.onSp=function(){var e=this.facade.retrieveProxy("BoneProxy"),t=e.playerBone;if(t){if(t.variation>=10)return void this.sendNotification("prompted_info_show",{info:"当前已是最高等级。"});var i=mt.needSpDrug(t.variation+1);if(-1==i)return void this.sendNotification("prompted_info_show",{info:"变异等级有误。"+t.variation});var n,o=this.facade.retrieveProxy("GoodsProxy"),s=o.listItems(0),r=null;for(var a in s)if(n=s[a],!(null==n||n.count<=0)&&0==n.goodsType&&191002==n.baseId){r=n;break}return null==r||r.count<i?void this.sendNotification("prompted_info_show",{info:"变异需要"+i+"个【灵根变异丹】"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用"+i+"个<font color='#e70626'>【灵根变异丹】</font>变异灵根吗？",handler:h.create(this,function(e){e&&Dc.instance.drug(r.id,t.variation+1)})})}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="BoneMediator",t}(lc),Sm=function(e){function t(){this._alliance=null,this._applyPager=null,this._alliancePager=null,this._memberPager=null,this._memberLookPager=null,this._task=null,this._memeberInfo=new uo,t.__super.call(this,"AllianceProxy",new Ot)}o(t,"modules.alliance.model.AllianceProxy",e);var i=t.prototype;return i.receivePlayerAlliance=function(e){return this.playerAlliance.update(e),this.playerAlliance},i.receiveAlliance=function(e){return null==this._alliance?this._alliance=new Pt(e):this._alliance.update(e),this._alliance},i.receiveApplyList=function(e){return null==this._applyPager&&(this._applyPager=new wt),this._applyPager.update(e),this._applyPager},i.receiveAllianceList=function(e){return null==this._alliancePager&&(this._alliancePager=new xt),this._alliancePager.update(e),this._alliancePager},i.receiveMemberList=function(e){null==this._memberPager&&(this._memberPager=new St),this._memeberInfo.clear(),this._memberPager.update(e);var t;for(var i in this._memberPager.pager.recoards)t=this._memberPager.pager.recoards[i],this._memeberInfo.set(t.playerId,t);return this._memberPager},i.getMemeberInfo=function(e){return this._memeberInfo.get(e)},i.receiveMemberLookList=function(e){return null==this._memberLookPager&&(this._memberLookPager=new St),this._memberLookPager.update(e),this._memberLookPager},i.receiveTask=function(e){return null==this._task?this._task=new Tt(e):this._task.update(e),this._task},s(0,i,"alliance",function(){return this._alliance}),s(0,i,"memberPager",function(){return this._memberPager}),s(0,i,"task",function(){return this._task}),s(0,i,"memberLookPager",function(){return this._memberLookPager}),s(0,i,"alliancePager",function(){return this._alliancePager}),s(0,i,"applyPager",function(){return this._applyPager}),s(0,i,"playerAlliance",function(){return this.data}),t.NAME="AllianceProxy",t}(sc),wm=function(e){function t(){this._apointTitlePop=null,this._confirmDisband=null,t.__super.call(this,"AlcMemberMediator")}o(t,"modules.alliance.view.AlcMemberMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new YP),this.view.ntc.clickHandler=new h(this,this.onNtc),this.view.btnSave.clickHandler=new h(this,this.onSaveVilidState),this.view.btnApplys.clickHandler=new h(this,this.onApply),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onMember),this.view.tbRank.selectHandler=new h(this,this.onRank),this._apointTitlePop=new jP,this._apointTitlePop.btnSure.clickHandler=new h(this,this.onApointTitle),this._confirmDisband=new XP,this._confirmDisband.btnSure.clickHandler=new h(this,this.onDisband)},i.listNotificationInterests=function(){return["OPEN_ALC_MEMBER","RECIVE_PLAYER_ALLIANCE","RECIVE_ALLIANCE","RECIVE_ALC_MEMBER_LIST","PUSH_ALC_MEMBER_CHANGED","USER_ALLIANCE_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_MEMBER":kc.instance.listMembers(1),this.view.popup(),this.freshInfo();break;case"RECIVE_ALLIANCE":case"RECIVE_PLAYER_ALLIANCE":if(!this.view.isPopup)break;this.freshInfo();break;case"RECIVE_ALC_MEMBER_LIST":this.onRank(this.view.tbRank.selectedIndex);break;case"PUSH_ALC_MEMBER_CHANGED":if(!this.view.isPopup)break;kc.instance.listMembers(1);break;case"USER_ALLIANCE_CHANGE":var t=Ng.userVO.getValue(7011);0>=t&&this.view.isPopup&&this.view.close()}},i.freshInfo=function(){var e=this.facade.retrieveProxy("AllianceProxy"),t=e.alliance,i=e.playerAlliance;t&&i&&this.view.showInfo(i,t)},i.onNtc=function(){this.sendNotification("POP_FUN_NOTICE",12)},i.onApply=function(){this.sendNotification("OPEN_ALC_APPLY")},i.onSaveVilidState=function(){var e=vo["int"](this.view.lvMin.text);if(5>e)return void this.sendNotification("prompted_info_show",{info:"等级限制不能低于5级"});var t=this.view.cbState.selected,i=this.facade.retrieveProxy("AllianceProxy"),n=i.alliance;n&&(e!=n.limitLv||t!=n.vilidState?kc.instance.changeValidState(t?1:0,e):this.sendNotification("prompted_info_show",{info:"设置成功"}))},i.showMembers=function(e){this.view.isPopup&&this.view.showMembers(e)},i.onMember=function(e,t){if("click"==e.type){var i=this.view.list.getCell(t).dataSource;if(null==i)return;var n=this.facade.retrieveProxy("AllianceProxy"),o=i.playerId==Ng.userVO.unitId.id;switch(e.target.name){case"btnKick":if(o)i.title==Et.MASTER.ordinal?this.confirmDisband.popInfo(n.alliance):this.sendNotification("POP_CONFIRM_INFO",{info:"确认退出宗门吗？<br><font color='#ff0000'>主动退宗，将扣除您最近5日为宗门贡献的资源</font><br>退出宗门后，您的贡献、宗门技能将保留",handler:h.create(this,function(e){e&&kc.instance.quit()})},"duble");else{var s=!1;if(!i.online){var r=ro.newDate(g.clock.currentTime),a=ro.newDate(i.lastOnline),l=ro.dateDiff(r,a);l>3&&(s=!0)}var c="<br>确认要踢除成员<font color='#00dc24'>【"+i.name+"】</font>";!s&&i.resource>0?(c+="<br>踢出该成员<font color='#e70626'>宗门将扣除其贡献的"+i.resource+"资源</font>，是否继续？",this.sendNotification("POP_CONFIRM_INFO",{info:c,handler:h.create(this,function(e){e&&kc.instance.dismisMember(i.playerId)})},"duble")):(c+="吗？",this.sendNotification("POP_CONFIRM_INFO",{info:c,handler:h.create(this,function(e){e&&kc.instance.dismisMember(i.playerId)})}))}break;case"btnTitle":var u=n.playerAlliance;u&&this.apointTitlePop.popInfo(u,i);break;default:o||this.sendNotification("SHOW_LOOK_PAGE",{playerId:i.playerId,name:i.name,nature:i.nature,level:i.level})}}},i.onApointTitle=function(){var e=this.apointTitlePop.member,t=this.apointTitlePop.aimTitleEnum;if(t==Et.MASTER){if("让位"!=this.apointTitlePop.doubleSure.text)return void this.sendNotification("prompted_info_show",{info:"确认请输入 ‘让位’"});kc.instance.abdicate(e.playerId)}else t==Et.DEPUTYMASTER?this.sendNotification("POP_CONFIRM_INFO",{info:"<br><br><font color='#fffc00'>副宗主有踢人权限，请谨慎操作，是否确认?</font>",handler:h.create(this,function(i){i&&kc.instance.appointTitle(e.playerId,t.ordinal)})}):kc.instance.appointTitle(e.playerId,t.ordinal);this.apointTitlePop.close()},i.onDisband=function(){return"解散"!=this.confirmDisband.doubleSure.text?void this.sendNotification("prompted_info_show",{info:"确认请输入 ‘解散’"}):(kc.instance.disband(),void this.confirmDisband.close())},i.onRank=function(e){var t=this.facade.retrieveProxy("AllianceProxy"),i=t.memberPager;i&&i.pager.recoards&&(0==e?i.pager.recoards.sort(i.compareFunction):i.pager.recoards.sort(i.compareFunctionToday),this.showMembers(i)),0==e?this.view.titleDonate.text="历史贡献":this.view.titleDonate.text="今日资源"},s(0,i,"confirmDisband",function(){return this.getViewComponent(),this._confirmDisband}),s(0,i,"apointTitlePop",function(){return this.getViewComponent(),this._apointTitlePop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcMemberMediator",t}(lc),Cm=function(e){function t(){this._passiveSkills=null,t.__super.call(this,"AlcSkillMediator")}o(t,"modules.alliance.view.AlcSkillMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new KP),this.view.btnLevelup.clickHandler=new h(this,this.onLevelUp),this.view.skills.mouseEnabled=!0,this.view.skills.mouseHandler=new h(this,this.onSkill),this.view.skills.dataSource=[]},i.listNotificationInterests=function(){return["OPEN_ALC_SKILLS","RECIVE_PLAYER_ALLIANCE","SKILL_PASSIVE_INIT","USER_ALLIANCE_CHANGE","SKILL_PASSIVE_LEVEL_UP"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_SKILLS":this.view.showInfo(e.getBody()),this.view.popup(),this._passiveSkills?this.view.showSkills(this._passiveSkills,Ng.userVO.getValue(1004)):xc.instance.listPassives();break;case"RECIVE_PLAYER_ALLIANCE":this.view.isPopup&&(this.view.showInfo(e.getBody()),this._passiveSkills&&this.view.showSkills(this._passiveSkills,Ng.userVO.getValue(1004)));break;case"USER_ALLIANCE_CHANGE":var t=Ng.userVO.getValue(7011);0>=t&&this.view.isPopup&&this.view.close();break;case"SKILL_PASSIVE_INIT":this._passiveSkills=e.getBody(),this.view.isPopup&&this.view.showSkills(this._passiveSkills,Ng.userVO.getValue(1004));break;case"SKILL_PASSIVE_LEVEL_UP":this._passiveSkills&&this.view.isPopup&&this.view.showSkills(this._passiveSkills,Ng.userVO.getValue(1004))}},i.onLevelUp=function(){var e=this.facade.retrieveProxy("AllianceProxy"),t=e.playerAlliance,i=e.alliance,n=t.skillLevel,o=g.database.getData("allianceskill",n+1);return null==o?void this.sendNotification("prompted_info_show",{info:"功法等级已满"}):o.needHouseLv>i.booksLevel?void this.sendNotification("prompted_info_show",{info:"升级需要宗门功法阁等级"+o.needHouseLv}):o.needHeroLv>Ng.userVO.getValue(1006)?void this.sendNotification("prompted_info_show",{info:"升级需要角色等级"+o.needHeroLv}):o.needDonate>t.donate?void this.sendNotification("prompted_info_show",{info:"升级需要宗门贡献"+o.needDonate}):void kc.instance.learnBook()},i.onSkill=function(e,t){if("click"==e.type&&"learnBtn"==e.target.name){var i=this.facade.retrieveProxy("SkillProxy"),n=this.view.skills.getCell(t).dataSource,o=1e6+n,s=i.getPassiveSkills(),r=s.get(o);if(r){var a=g.database.getData("allianceskill",r.level+1);if(null==a)return void this.sendNotification("prompted_info_show",{info:"技能等级已满"});if(r.level>=Ng.userVO.getValue(1006))return void this.sendNotification("prompted_info_show",{info:"技能等级不能超过角色等级"});var l=Ng.userVO.getValue(1009);if(a.needSilver>l)return void this.sendNotification("prompted_info_show",{info:"升级需要铜币"+a.needSilver});kc.instance.upgradeSkill(o)}}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcSkillMediator",t}(lc),Tm=function(e){function t(){t.__super.call(this,"AlcNoticeMediator")}o(t,"modules.alliance.view.AlcNoticeMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new WP),this.view.btnCancel.clickHandler=new h(this,this.onCancel),this.view.btnSure.clickHandler=new h(this,this.onSure)},i.listNotificationInterests=function(){return["OPEN_ALC_NOTICE","RECIVE_ALLIANCE","USER_ALLIANCE_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"RECIVE_ALLIANCE":if(!this.view.isPopup)break;case"OPEN_ALC_NOTICE":var t=this.facade.retrieveProxy("AllianceProxy");t.alliance&&this.view.showInfo(t.alliance);break;case"USER_ALLIANCE_CHANGE":var i=Ng.userVO.getValue(7011);0>=i&&this.view.isPopup&&this.view.close()}},i.onCancel=function(){var e=this,t=this.facade.retrieveProxy("AllianceProxy");return t.alliance&&null!=t.alliance&&t.alliance.masterId==Ng.userVO.unitId.id&&this.view.txtNotice.text!=t.alliance.notice?void this.sendNotification("POP_CONFIRM_INFO",{info:"确认关闭并放弃修改吗?",handler:h.create(this,function(t){t&&e.view.close()})}):void this.view.close()},i.onSure=function(){var e=this.facade.retrieveProxy("AllianceProxy");if(e.alliance&&null!=e.alliance&&e.alliance.masterId==Ng.userVO.unitId.id){if(this.view.txtNotice.text!=e.alliance.notice)return void kc.instance.changeNotice(this.view.txtNotice.text);this.sendNotification("prompted_info_show",{info:"宗门公告修改成功"})}this.view.close()},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcNoticeMediator",t}(lc),Im=function(e){function t(){this._confirmDonate=null,t.__super.call(this,"AlcBuildingMediator")}o(t,"modules.alliance.view.AlcBuildingMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new $P),this.view.btnUp.clickHandler=new h(this,this.onLevelUp),this.view.btnDonate.clickHandler=new h(this,this.onDonate),this.view.btnBookUp.clickHandler=new h(this,this.onBookUp),this.view.btnTaskUp.clickHandler=new h(this,this.onTaskUp),this._confirmDonate=new qP,this._confirmDonate.sure.clickHandler=new h(this,this.onDonateSure),this.view.lockBuiding.clickHandler=new h(this,this.onBuildingLock)},i.listNotificationInterests=function(){return["OPEN_ALC_BUILDING","RECIVE_ALLIANCE","PUSH_ALC_ALLIANCE_CHANGED","USER_ALLIANCE_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_BUILDING":this.view.showInfo(e.getBody());break;case"RECIVE_ALLIANCE":case"PUSH_ALC_ALLIANCE_CHANGED":this.view.freshInfo(e.getBody());break;case"USER_ALLIANCE_CHANGE":var t=Ng.userVO.getValue(7011);0>=t&&this.view.isPopup&&this.view.close()}},i.onLevelUp=function(){var e=this.facade.retrieveProxy("AllianceProxy"),t=e.alliance;if(null!=t){var i=g.database.getData("alliance",t.allianceLevel+1);if(i)if(t.resource<i.needSrc)this.sendNotification("prompted_info_show",{info:"宗门资源不足"});else{if(t.buildingLock&&t.masterId!=Ng.userVO.unitId.id)return void this.sendNotification("prompted_info_show",{info:"宗主有令,官员不可升级宗门建筑"});var n=Et.canLevelUp(e.playerAlliance.title);n?kc.instance.levelUpBuilding(0):this.sendNotification("prompted_info_show",{info:"您的权限不足"})}}},i.onDonate=function(){var e=this.facade.retrieveProxy("GoodsProxy"),t=e.findOnePropByType(19);if(t){var i=this.facade.retrieveProxy("AllianceProxy");this.confirmDonate.showProp(t,i.playerAlliance)}else this.sendNotification("prompted_info_show",{info:"您的背包中没有可贡献的物品"})},i.onDonateSure=function(){var e=vo["int"](this.confirmDonate.num.text);isNaN(e)||e>this.confirmDonate.prop.count||(kc.instance.donateProp(this.confirmDonate.prop.id,e),this.confirmDonate.close())},i.onBookUp=function(){var e=this.facade.retrieveProxy("AllianceProxy"),t=e.alliance;if(null!=t){var i=g.database.getData("alliance",t.booksLevel+1);if(i)if(t.resource<i.needSrc4Book)this.sendNotification("prompted_info_show",{info:"宗门资源不足"});else{if(t.buildingLock&&t.masterId!=Ng.userVO.unitId.id)return void this.sendNotification("prompted_info_show",{info:"宗主有令,官员不可升级宗门建筑"});var n=Et.canLevelUp(e.playerAlliance.title);n?kc.instance.levelUpBuilding(1):this.sendNotification("prompted_info_show",{info:"您的权限不足"})}}},i.onTaskUp=function(){var e=this.facade.retrieveProxy("AllianceProxy"),t=e.alliance;if(null!=t){var i=g.database.getData("alliance",t.taskLevel+1);if(i)if(t.resource<i.needSrc4Task)this.sendNotification("prompted_info_show",{info:"宗门资源不足"});else{if(t.buildingLock&&t.masterId!=Ng.userVO.unitId.id)return void this.sendNotification("prompted_info_show",{info:"宗主有令,官员不可升级宗门建筑"});var n=Et.canLevelUp(e.playerAlliance.title);n?kc.instance.levelUpBuilding(4):this.sendNotification("prompted_info_show",{info:"您的权限不足"})}}},i.onBuildingLock=function(){var e=this.facade.retrieveProxy("AllianceProxy"),t=e.alliance;null!=t&&(t.masterId==Ng.userVO.unitId.id?kc.instance.changeBuidingLock(this.view.lockBuiding.selected):this.sendNotification("prompted_info_show",{info:"您的权限不足"}))},s(0,i,"confirmDonate",function(){return this.getViewComponent(),this._confirmDonate}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcBuildingMediator",t}(lc),Am=function(e){function t(){this.leftDay=0,this.nowDay=0,this.indexArr=[],this.scoreDict=new uo,t.__super.call(this,"ActivityInvestPropxy")}o(t,"modules.activityinvest.model.ActivityInvestPropxy",e);var i=t.prototype;return i.setData=function(t){if(e.prototype.setData.call(this,t),this.leftDay=0,this.nowDay=7,null!=t){var i=this.investdata.begin+6048e5-g.clock.currentTime;this.leftDay=vo["int"](i/864e5),this.nowDay=7-this.leftDay;for(var n=this.investdata.activing.split("|"),o=0;o<n.length;o++){var s=n[o].split("_")[0],r=n[o].split("_")[1];this.scoreDict.set(s,r)}}else this.scoreDict.clear()},i.getDataIndex=function(e){return this.indexArr[e]},i.getActEndTime=function(){var e="活动剩余：";return this.leftDay>0&&3!=this.investdata.buyedIds.length?e=e+this.leftDay+"天":e+=this.investdata.buyedIds.length>0?"无时限":"最后一天(23点59分结束)",e},i.getTabLabel=function(){if(null==this.data)return"";this.indexArr=[];for(var e=this.investdata.begin+6048e5-g.clock.currentTime,t=g.database.getJsonObj("activityInvest"),i=[],n=0;n<t.length;n++)e>0?(i.push(t[n].title),this.indexArr.push(n)):this.investdata.buyedIds.indexOf(n)>-1&&(this.isAwardAll(n)||(i.push(t[n].title),this.indexArr.push(n)));return i.join(",")},i.isActiving=function(){if(null==this.data)return!1;if(g.clock.currentTime<this.investdata.begin)return!1;var e=this.investdata.begin+6048e5-g.clock.currentTime;return e>0?!0:this.investdata.buyedIds.length>0?!(this.investdata.awardedIds.length>=10*this.investdata.buyedIds.length):!1},i.isAwardAll=function(e){for(var t=0;10>t;t++)if(-1==this.investdata.awardedIds.indexOf(1e3*e+t))return!1;return!0},i.hasAward=function(){if(null==this.data)return!1;if(g.clock.currentTime<this.investdata.begin)return!1;for(var e=g.database.getJsonObj("activityInvest"),t=0;t<e.length;t++)for(var i=null==this.scoreDict.get(t)?0:this.scoreDict.get(t),n=e[t].data,o=0;o<n.length;o++){var s=n[o];if(-1==this.investdata.awardedIds.indexOf(s.id)&&i>=s.score)return!0}return!1},s(0,i,"investdata",function(){return this.data}),t.NAME="ActivityInvestPropxy",t.EFFECT_DAY=7,t}(sc),Nm=function(e){function t(){t.__super.call(this)}o(t,"modules.activityinvest.controller.ActivityInvestPrepCommand",e);var i=t.prototype;return i.execute=function(e){
this.facade.registerCommand(Mt.ACTIVITY_INVEST_QUERY,Pm),this.facade.registerCommand(Mt.ACTIVITY_INVEST_BUY,Pm,!0),this.facade.registerCommand(Mt.ACTIVITY_INVEST_TAKE_AWARD,Pm,!0)},t}(rc),Pm=function(e){function t(){t.__super.call(this)}o(t,"modules.activityinvest.controller.commands.ActivityInvestCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 1:this.update(t);break;case 2:this.update(t),this.sendNotification("prompted_info_show",{info:"投资成功"});break;case 3:this.showAward(t,"领取成功")}else 1==t.cmd&&this.sendNotification("ACTIVIT_INVEST_INFO")},i.update=function(e){var t=v.protoCodec.getResponseDecoder().decode("PlayerInvest",e.value),i=this.facade.retrieveProxy("ActivityInvestPropxy");i.setData(t),this.sendNotification("ACTIVIT_INVEST_INFO")},i.showAward=function(e,t){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",e.value),n=Te.value(i);n.isEmpty?this.sendNotification("prompted_info_show",{info:t}):this.sendNotification("POP_COMMON_AWARDS_INFO",{title:t,awards:n,desc:""})},t}(rc),Rm=function(e){function t(){this._selectPop=null,this._logsPop=null,this._task=null,t.__super.call(this,"AlcTaskMediator")}o(t,"modules.alliance.view.AlcTaskMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new HP),this.view.btnDrop.clickHandler=new h(this,this.onDrop),this.view.btnFast.clickHandler=new h(this,this.onFast),this.view.btnFinish.clickHandler=new h(this,this.onFinish),this.view.btnLogs.clickHandler=new h(this,this.onLogs),this.view.btnFresh.clickHandler=new h(this,this.onFresh),this._selectPop=new QP,this._selectPop.talismans.mouseEnabled=!0,this._selectPop.talismans.mouseHandler=new h(this,this.onSelectTalisman),this._selectPop.props.mouseEnabled=!0,this._selectPop.props.mouseHandler=new h(this,this.onSelectProps),this._selectPop.equips.mouseEnabled=!0,this._selectPop.equips.mouseHandler=new h(this,this.onSelectEquips),this._logsPop=new zP},i.listNotificationInterests=function(){return["OPEN_ALC_TASK","RECIVE_ALLIANCE_TASK","RECIVE_ALLIANCE_TASK_LOGS","USER_ALLIANCE_CHANGE","RECIVE_ALLIANCE","PUSH_ALC_ALLIANCE_CHANGED"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_TASK":Ng.userVO.getValue(1006)<15?this.sendNotification("prompted_info_show",{info:"宗门任务，角色15级后开启"}):(Bc.instance.query(),this.view.popup());break;case"USER_ALLIANCE_CHANGE":var t=Ng.userVO.getValue(7011);0>=t&&this.view.isPopup&&this.view.close();break;case"RECIVE_ALLIANCE_TASK":this._task=e.getBody(),this.view.showInfo(this._task);break;case"RECIVE_ALLIANCE_TASK_LOGS":this.logsPop.showLogs(e.getBody());break;case"RECIVE_ALLIANCE":case"PUSH_ALC_ALLIANCE_CHANGED":this.view.showLevel(e.getBody())}},i.onDrop=function(){null!=this._task&&this.sendNotification("POP_CONFIRM_INFO",{info:"确认放弃当前任务吗?",handler:h.create(this,function(e){e&&Bc.instance.drop()})})},i.onFast=function(){return null!=this._task?Ng.userVO.getValue(1010)<30?void this.sendNotification("prompted_info_show",{info:"您的元宝不足30"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"确认花费30元宝,快速完成当前任务吗?",handler:h.create(this,function(e){e&&(Bc.instance.fastFinish(),k.goldenCost("快速宗门任务",1,30))})}):void 0},i.onFresh=function(){return null!=this._task?Ng.userVO.getValue(1010)<5?void this.sendNotification("prompted_info_show",{info:"您的元宝不足5"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"确认花费5元宝,刷新当前任务吗?",handler:h.create(this,function(e){e&&(Bc.instance.freshByGold(),k.goldenCost("刷新宗门任务",1,5))})}):void 0},i.onLogs=function(){Bc.instance.listLogs()},i.onFinish=function(){if(null!=this._task)switch(this._task.type){case 0:Bc.instance.trySteal();break;case 1:this._popSelect(6);break;case 2:this._popSelect(0,2,5);break;case 9:this._popSelect(0,-1,4);break;case 10:this._popSelect(0,1,0,this._task.extValue,10);break;case 11:this._popSelect(0,2,0,this._task.extValue);break;case 12:this._popSelect(1,0,0);break;case 3:this._popSelect(0,17);break;case 4:this._popSelect(0,18);break;case 5:this._popSelect(0,22);break;case 6:this._popSelect(0,14);break;case 7:var e=3e3*Ng.userVO.getValue(1006);if(Ng.userVO.getValue(1009)<e)return void this.sendNotification("prompted_info_show",{info:"您的铜币不足"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认交纳"+e+"铜币,完成当前任务吗?",handler:h.create(this,function(e){e&&Bc.instance.tryFinish(0)})});break;case 8:this.sendNotification("SHOW_PET_PAGE")}},i._popSelect=function(e,t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1);var s,r,a=this.facade.retrieveProxy("GoodsProxy"),l=a.listItems(0),h=[];for(var c in l)if(r=l[c],!(null==r||r.count<=0||i>0&&r.quality<i||r.goodsType!=e||r.count<o)){if(t>0){if(s=r,s.propConf.propType!=t)continue}else if(-1==t&&(s=r,1!=s.propConf.propType&&2!=s.propConf.propType))continue;n>0&&(s=r,s.propConf.nature!=n)||h.push(r)}if(h.length<=0)return void this.sendNotification("prompted_info_show",{info:"未找到任务需要的物品"});var u=this.facade.retrieveMediator("BagpackMediator");6==e?(h.sort(u.compareFunctionTalisman),this.selectPop.showTalismans(h)):0==e?(h.sort(u.compareFunctionProp),this.selectPop.showProps(h)):1==e&&(h.sort(u.compareFunctionEquip),this.selectPop.showEqups(h))},i.onSelectEquips=function(e,t){var i=this;if("click"==e.type&&"btnOk"==e.target.name){var n=this.selectPop.equips.getCell(t),o=n.getChildByName("ckDouble");if(0==o.selected)return void this.sendNotification("prompted_info_show",{info:"本任务白色品质装备也可以完成\n确认使用请先勾选确认上交"});var s=n.dataSource;s&&(s.quality>1?this.sendNotification("POP_CONFIRM_INFO",{info:"本任务白色品质装备也可以完成<br>确认使用<font color='"+N.getColor(s.quality)+"'>"+s.equipConf.name+"</font>,完成当前任务吗?",handler:h.create(this,function(e){e&&(Bc.instance.tryFinish(s.id),i.selectPop.close())})}):(Bc.instance.tryFinish(s.id),this.selectPop.close()))}},i.onSelectTalisman=function(e,t){var i=this;if("click"==e.type&&"btnOk"==e.target.name){var n=this.selectPop.talismans.getCell(t),o=n.getChildByName("ckDouble");if(0==o.selected)return void this.sendNotification("prompted_info_show",{info:"本任务白色品质法宝也可以完成\n确认使用请先勾选确认上交"});var s=n.dataSource;s&&(s.quality>1?this.sendNotification("POP_CONFIRM_INFO",{info:"本任务白色品质法宝也可以完成<br>确认使用<font color='"+N.getColor(s.quality)+"'>"+s.talismanConf.name+"</font>,完成当前任务吗?",handler:h.create(this,function(e){e&&(Bc.instance.tryFinish(s.id),i.selectPop.close())})}):(Bc.instance.tryFinish(s.id),this.selectPop.close()))}},i.onSelectProps=function(e,t){var i=this;if("click"==e.type&&"btnOk"==e.target.name){var n,o=this.selectPop.props.getCell(t),s=this.selectPop.props.getCell(t).dataSource;if(s){var r=o.getChildByName("ckDouble");if(0==r.selected){switch(this._task.type){case 9:n="本任务黄色品质任意材料可完成\n确认使用请先勾选确认上交";break;case 10:n="本任务一组(10个)任意品质材可完成\n确认使用请先勾选确认上交";break;case 11:n="本任务绿色以上对应五行特殊材料可完成\n确认使用请先勾选确认上交";break;default:n=2==s.propConf.propType?"本任务红色品质特殊材料也可以完成\n确认使用请先勾选确认上交":"本任务白色品质物品也可以完成\n确认使用请先勾选确认上交"}return void this.sendNotification("prompted_info_show",{info:n})}if(s.quality>1){if(2==s.propConf.propType)n=s.quality>5?"本任务<font color='#e70626'>红色品质</font>特殊材料也可以完成<br>确认使用<font color='"+N.getColor(s.quality)+"'>"+s.propConf.name+"</font>,完成当前任务吗?":"确认使用<font color='"+N.getColor(s.quality)+"'>"+s.propConf.name+"</font>,完成当前任务吗?";else{switch(this._task.type){case 9:n="本任务黄色品质任意材料可完成";break;case 10:n="本任务一组(10个)任意品质材可完成";break;case 11:n="本任务绿色以上对应五行特殊材料可完成";break;default:n="本任务白色品质物品也可以完成"}n=n+"<br>确认使用<font color='"+N.getColor(s.quality)+"'>"+s.propConf.name+"</font>,完成当前任务吗?"}this.sendNotification("POP_CONFIRM_INFO",{info:n,handler:h.create(this,function(e){e&&(Bc.instance.tryFinish(s.id),i.selectPop.close())})})}else Bc.instance.tryFinish(s.id),this.selectPop.close()}}},s(0,i,"logsPop",function(){return this.getViewComponent(),this._logsPop}),s(0,i,"selectPop",function(){return this.getViewComponent(),this._selectPop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcTaskMediator",t}(lc),Lm=function(e){function t(){t.__super.call(this)}o(t,"modules.pearl.controller.PearlPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Dt.PEARL_QUERY,Dm),this.facade.registerCommand(Dt.PEARL_OPEN_HOLE,Dm,!0),this.facade.registerCommand(Dt.PEARL_ACTIVE_PEARL,Dm,!0),this.facade.registerCommand(Dt.PEARL_FEED_PEARL,Dm,!0),this.facade.registerCommand(Dt.PEARL_CHG_NATURE,Dm,!0)},t}(rc),Om=function(e){function t(){t.__super.call(this,"PearlProxy",new Bt)}o(t,"modules.pearl.model.PearlProxy",e);var i=t.prototype;return s(0,i,"pearl",function(){return this.data}),t.NAME="PearlProxy",t}(sc),Mm=function(e){function t(){this._beforAllianceId=0,this._requested=!1,t.__super.call(this,"AllianceMediator")}o(t,"modules.alliance.view.AllianceMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new yN),this.view.listAlc.mouseEnabled=!0,this.view.listAlc.mouseHandler=new h(this,this.onAlcClick),this.view.buildings.mouseEnabled=!0,this.view.buildings.dataSource=[{title:"成  员"},{title:"大  厅"},{title:"进  贡"},{title:"功法阁"},{title:"任务堂"},{title:"宗门战"},{title:"宗门BOSS"},{title:"宗门矿场"},{title:"商  店"}],this.view.buildings.mouseHandler=new h(this,this.onBuilding),this.view.btCreate.clickHandler=new h(this,this.onCreate),this.view.btnRank.clickHandler=new h(this,this.onRank),this.view.btnLog.clickHandler=new h(this,this.onLogs),this.view.btnNotice.clickHandler=new h(this,this.onNotice)},i.onRegister=function(){this.facade.registerMediator(new Fm),this.facade.registerMediator(new Im),this.facade.registerMediator(new Vm),this.facade.registerMediator(new wm),this.facade.registerMediator(new Bm),this.facade.registerMediator(new km),this.facade.registerMediator(new Cm),this.facade.registerMediator(new Rm),this.facade.registerMediator(new Tm),this.facade.registerMediator(new sf),this.facade.registerMediator(new dy),this.facade.registerMediator(new Hv),this.facade.registerMediator(new xb)},i.listNotificationInterests=function(){return["RECIVE_ALLIANCE","PUSH_ALC_ALLIANCE_CHANGED","RECIVE_ALLIANCE_LIST","USER_ALLIANCE_CHANGE","USER_INIT","CLEAR_CACHE_DATA"]},i.handleNotification=function(e){var t=NaN;switch(e.getName()){case"RECIVE_ALLIANCE":case"PUSH_ALC_ALLIANCE_CHANGED":this._beforAllianceId=e.getBody().allianceId,this.view.showHome(e.getBody());break;case"RECIVE_ALLIANCE_LIST":this.view.showGate(e.getBody());break;case"USER_ALLIANCE_CHANGE":t=Ng.userVO.getValue(7011),0==t?(this.sendNotification("prompted_info_show",{info:"您已离开宗门"}),this._requested=!1,this.onShow()):this._beforAllianceId!=t&&(this.sendNotification("prompted_info_show",{info:"您已成功加入宗门"}),this._requested=!1,this.onShow()),this._beforAllianceId=t;break;case"USER_INIT":t=Ng.userVO.getValue(7011),0>t&&(this.sendNotification("prompted_info_show",{info:"宗门已解散"}),kc.instance.quit());break;case"CLEAR_CACHE_DATA":this._requested=!1}},i.onBuilding=function(e,t){if("click"==e.type){var i=this.facade.retrieveProxy("AllianceProxy"),n=i.alliance;switch(t){case 0:this.sendNotification("OPEN_ALC_MEMBER");break;case 1:this.sendNotification("OPEN_ALC_BUILDING",n);break;case 2:this.sendNotification("OPEN_ALC_DONATE",i.playerAlliance);break;case 3:this.sendNotification("OPEN_ALC_SKILLS",i.playerAlliance);break;case 4:this.sendNotification("OPEN_ALC_TASK",i.playerAlliance);break;case 5:this.sendNotification("OPEN_ALCA_PAGE",i.playerAlliance);break;case 6:this.sendNotification("OPEN_ALC_BOSS_PAGE");break;case 7:this.sendNotification("OPEN_ALCM_PAGE");break;case 8:this.sendNotification("OPEN_ALC_SHOP_PAGE")}}},i.onAlcClick=function(e,t){if("click"==e.type){var i=this.view.listAlc.getCell(t),n=i.dataSource;if(!n)return;switch(e.target.name){case"btnJoin":var o=g.database.getData("alliance",n.allianceLevel);if(n.members>=o.memberMax)return void this.facade.sendNotification("prompted_info_show",{info:"成员已满,稍后再试"});kc.instance.join(n.allianceId)}}},i.onShow=function(){if(0==this._requested){kc.instance.queryPlayerAlliance();var e=Ng.userVO.getValue(7011);e>0?(kc.instance.queryAlliance(e),this.view.showHome()):(kc.instance.listAlliances(1),this.view.showGate()),this._requested=!0}},i.onCreate=function(){var e=this.view.ctName.text;if(null==e||""==e)return void this.sendNotification("prompted_info_show",{info:"请输入正确的宗门名字"});var t=Ng.userVO.getValue(7011);if(0==t){if(!T.IS_ON_MINI&&"none"!=v.INDULGE_TYPE&&Ng.userVO.getValue(1017)<=0)return void this.sendNotification("prompted_info_show",{info:"创建宗门请先进行实名认证"});if(Ng.userVO.getValue(1006)<30){var i=this.facade.retrieveProxy("MarketProxy");if(null==i||i.vipInfo.vipMontAdd<=0)return void this.sendNotification("prompted_info_show",{info:"等级达到30级或开启任意月卡才可创建宗门。"})}var n=Ng.userVO.getValue(1010);350>n?this.sendNotification("prompted_info_show",{info:"建宗门失败,您的元宝不足"}):(kc.instance.create(e),k.goldenCost("创建宗门",1,350))}},i.onRank=function(){this.sendNotification("OPEN_ALC_RANK")},i.onLogs=function(){this.sendNotification("OPEN_ALC_LOGS","alc")},i.onNotice=function(){this.sendNotification("OPEN_ALC_NOTICE")},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AllianceMediator",t}(lc),Dm=function(e){function t(){t.__super.call(this)}o(t,"modules.pearl.controller.commands.PearlCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerPearl",t.value),n=this.facade.retrieveProxy("PearlProxy");switch(n.pearl.update(i),this.sendNotification("RECEIVE_PLAYER_PEARL",n.pearl),t.cmd){case 1:break;case 2:this.sendNotification("prompted_info_show",{info:"炼器等级已提升"});break;case 5:this.sendNotification("prompted_info_show",{info:"灵珠激活成功"});break;case 4:this.sendNotification("prompted_info_show",{info:"灵珠更换成功"});break;case 3:this.sendNotification("prompted_info_show",{info:"灵珠提升成功"})}}else this.sendNotification("prompted_info_show",{info:"灵珠操作异常:"+t.status})},t}(rc),km=function(e){function t(){t.__super.call(this,"AlcLogMediator")}o(t,"modules.alliance.view.AlcLogMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new UP)},i.listNotificationInterests=function(){return["OPEN_ALC_LOGS","RECIVE_ALLIANCE_LOGS","RECIVE_ALLIANCE_DONATE_LOGS"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_LOGS":"donate"==e.getBody()?(kc.instance.queryDonateLogs(),this.view.dName.text="最近进贡"):(kc.instance.queryAlcLogs(),this.view.dName.text="最近消息"),this.view.popup();break;case"RECIVE_ALLIANCE_LOGS":case"RECIVE_ALLIANCE_DONATE_LOGS":this.view.isPopup&&(this.view.logs.dataSource=e.getBody(),null==this.view.logs.dataSource||0==this.view.logs.dataSource.length?this.view.lbEmpty.visible=!0:this.view.lbEmpty.visible=!1)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcLogMediator",t}(lc),Bm=function(e){function t(){t.__super.call(this,"AlcRankMediator")}o(t,"modules.alliance.view.AlcRankMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new ZP)},i.listNotificationInterests=function(){return["OPEN_ALC_RANK","RECIVE_ALLIANCE_RANK_LIST"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_RANK":kc.instance.queryAlcRank(),this.view.popup();break;case"RECIVE_ALLIANCE_RANK_LIST":this.view.isPopup&&this.view.showInf(e.getBody())}},i.onClick=function(e,t){if("click"==e.type){var i=this.view.list.getCell(t).dataSource;if(null==i)return;i.allianceId==Ng.userVO.getValue(7011)?this.sendNotification("OPEN_ALC_MEMBER"):this.sendNotification("OPEN_ALC_LOOK_MEMBER",i)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcRankMediator",t}(lc),Vm=function(e){function t(){t.__super.call(this,"AlcDonateMediator")}o(t,"modules.alliance.view.AlcDonateMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new VP),this.view.btnFree.on("click",this,this.onClick),this.view.btn100.on("click",this,this.onClick),this.view.btn300.on("click",this,this.onClick),this.view.btnHis.clickHandler=new h(this,this.onHistory)},i.listNotificationInterests=function(){return["OPEN_ALC_DONATE","RECIVE_PLAYER_ALLIANCE","USER_ALLIANCE_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_DONATE":this.view.showInfo(e.getBody());break;case"RECIVE_PLAYER_ALLIANCE":this.view.isPopup&&this.view.freshInfo(e.getBody());break;case"USER_ALLIANCE_CHANGE":var t=Ng.userVO.getValue(7011);0>=t&&this.view.isPopup&&this.view.close()}},i.onClick=function(e){var t,i=0;switch(e.target){case this.view.btnFree:i=0,t="#00dc24";break;case this.view.btn100:i=100,t="#e70626";break;case this.view.btn300:i=300,t="#c527ff";break;default:return}var n=this.facade.retrieveProxy("AllianceProxy");if(n.playerAlliance&&n.playerAlliance.isDonateToday())return void this.sendNotification("prompted_info_show",{info:"您今天已进贡过了,请明天再试"});if(i>Ng.userVO.getValue(1010))return void this.sendNotification("prompted_info_show",{info:"您的元宝不足,请确认后再试"});if(i>0&&Ng.userVO.getValue(1006)<20)return void this.sendNotification("prompted_info_show",{info:"角色20级后才可以用元宝进贡"});var o=e.target,s="每天只能进贡一次,确认选择<font color='"+t+"'>"+o.label+"</font>";this.sendNotification("POP_CONFIRM_INFO",{info:s,handler:h.create(this,function(e){e&&(kc.instance.donateGolden(i),k.goldenCost("宗门贡献"+i,1,i))})})},i.onHistory=function(){this.sendNotification("OPEN_ALC_LOGS","donate")},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcDonateMediator",t}(lc),Fm=function(e){function t(){t.__super.call(this,"AlcApplyMediator")}o(t,"modules.alliance.view.AlcApplyMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new JP),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onApply)},i.listNotificationInterests=function(){return["OPEN_ALC_APPLY","RECIVE_ALC_APPLY_LIST","USER_ALLIANCE_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_APPLY":kc.instance.listApplys(1,40),this.view.list.visible=!1,this.view.popup();break;case"RECIVE_ALC_APPLY_LIST":var t=e.getBody();this.view.list.dataSource=t.pager.recoards,this.view.list.visible=!0,t.pager.recoards.length?this.view.lbEmpty.visible=!1:this.view.lbEmpty.visible=!0;break;case"USER_ALLIANCE_CHANGE":var i=Ng.userVO.getValue(7011);0>=i&&this.view.isPopup&&this.view.close()}},i.onApply=function(e,t){if("click"==e.type){var i=this.view.list.getCell(t).dataSource;switch(e.target.name){case"btnAgree":kc.instance.examinApply(i.playerId,!0);break;case"btnIgnor":kc.instance.examinApply(i.playerId,!1);break;default:this.sendNotification("SHOW_LOOK_PAGE",{playerId:i.playerId,name:i.name,nature:i.nature,level:i.level})}}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcApplyMediator",t}(lc),Gm=function(e){function t(){this._inited=!1,t.__super.call(this,"ActivityInvestkMediator")}o(t,"modules.activityinvest.view.ActivityInvestkMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GP)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","USER_INIT","ZERO_CLOCK_TRIGER","SHOW_ACTIVIT_INVEST_PAGE","ACTIVIT_INVEST_INFO"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("ActivityInvestPropxy");switch(e.getName()){case"CLEAR_CACHE_DATA":this._inited=!1,t.setData(null);break;case"ZERO_CLOCK_TRIGER":case"USER_INIT":Vc.instance.query();break;case"SHOW_ACTIVIT_INVEST_PAGE":this.vi.popup();var i=this.vi;i.freshTab();break;case"ACTIVIT_INVEST_INFO":null!=t.investdata&&this.vi&&(i=this.vi,i.freshTab())}},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="ActivityInvestkMediator",t}(lc),Hm=function(e){function t(){this._p=null,this._aimNature=0,t.__super.call(this,"PearlChgMediator")}o(t,"modules.pearl.view.PearlChgMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new oR),this.view.selectPop.x=this.view.x,this.view.selectPop.visible=!1,this.view.pearls.renderHandler=new h(this,this.onRender),this.view.pearls.mouseEnabled=!0,this.view.pearls.mouseHandler=new h(this,this.onSelectPearl),this.view.btnSelect.clickHandler=new h(this,this.onSelect),this.view.selected.on("click",this,this.onSelect),this.view.btnBuy.clickHandler=new h(this,this.onBuy),this.view.btnChange.clickHandler=new h(this,this.onSure)},i.listNotificationInterests=function(){return["OPEN_PEARL_CHANGE_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_PEARL_CHANGE_PAGE":this.showPage(e.getBody())}},i.showPage=function(e){var t=this.facade.retrieveProxy("PearlProxy"),i=t.pearl;return null==i||0==i.isInit()?void this.sendNotification("prompted_info_show",{info:"灵珠信息未初始"}):(this._p=i.getPearl(e),null==this._p||this._p.level<1?void this.sendNotification("prompted_info_show",{info:"灵珠未开启"}):(this._aimNature=0,Ln.renderPearl(this.view.dressed,this._p),Ln.renderPearlEmpty(this.view.selected,this._p.pos),this.view.btnSelect.visible=!0,this.view.selectPop.visible=!1,this._p.chg>=1?this.view.lbCost.text="消耗道具：女娲石1个":this.view.lbCost.text="消耗道具：无",void this.view.popup()))},i.onBuy=function(){this.sendNotification("SHOW_TOWER_SHOP_PAGE")},i.onRender=function(e,t){var i=e.dataSource;this._p.nature==i?e.alpha=.5:e.alpha=1;var n=e.getChildByName("pearl");Ln.renderPearl(n,this._p,i)},i.onSelectPearl=function(e,t){if("click"==e.type){var i=this.view.pearls.getCell(t).dataSource;if(this._p.nature==i)return;Ln.renderPearl(this.view.selected,this._p,i),this.view.selectPop.visible=!1,this.view.btnSelect.visible=!1,this._aimNature=i}},i.onSelect=function(e){var t;switch(this._p.nature){case 1:t=[2,3,4,5];break;case 2:t=[1,3,4,5];break;case 3:t=[1,2,4,5];break;case 4:t=[1,2,3,5];break;case 5:t=[1,2,3,4]}this.view.pearls.dataSource=t,this.view.selectPop.visible=!0,this.view.btnSelect.visible=!1},i.onSure=function(){var e=this;if(this._aimNature<=0)return void this.sendNotification("prompted_info_show",{info:"请选择要更换的灵珠"});if(this._p.chg<=0)this.sendNotification("POP_CONFIRM_INFO",{info:"第一次更换无需使用道具，是否确认？",handler:h.create(this,function(t){t&&(Fc.instance.changeNature(e._p.pos,e._aimNature,0),e.view.close())})});else{var t=this.facade.retrieveProxy("GoodsProxy"),i=t.findOnePropByBaseId(500017);if(null==i)return void this.sendNotification("prompted_info_show",{info:"道具不足,需要女娲石1个"});this.sendNotification("POP_CONFIRM_INFO",{info:"更换需使用<font color='red'>女娲石</font>1个，是否确认？",handler:h.create(this,function(t){t&&(Fc.instance.changeNature(e._p.pos,e._aimNature,i.id),e.view.close())})})}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PearlChgMediator",t}(lc),Um=function(e){function t(){this._p=null,this._hasPearl=0,this._hasPearlArr=null,t.__super.call(this,"PearlLevelUpMediator")}o(t,"modules.pearl.view.PearlLevelUpMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new iR),this.view.btnBuy.clickHandler=new h(this,this.onBuy),this.view.btnLevelUp.clickHandler=new h(this,this.onSure)},i.listNotificationInterests=function(){return["OPEN_PEARL_LEVELUP_PAGE","RECEIVE_TOWER_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_PEARL_LEVELUP_PAGE":var t=this.showPage(e.getBody());t&&this.view.popup();break;case"RECEIVE_TOWER_INFO":this.view.isPopup&&this._p&&this.showPage(this._p.pos)}},i.showPage=function(e){var t=this.facade.retrieveProxy("PearlProxy"),i=t.pearl;if(null==i||0==i.isInit())return this.sendNotification("prompted_info_show",{info:"灵珠信息未初始"}),!1;if(this._p=i.getPearl(e),null==this._p||this._p.level<1)return this.sendNotification("prompted_info_show",{info:"灵珠未激活"}),!1;this._hasPearl=0,this._hasPearlArr=[],Ln.renderPearl(this.view.oldPearl,this._p),Ln.renderPearl(this.view.newPearl,this._p,this._p.nature,this._p.level+1);var n,o=Vt.levelUpNeedPearl(this._p.level,this._p.pos),s=this.facade.retrieveProxy("GoodsProxy"),r=s.listItems(0);for(var a in r)if(n=r[a],!(null==n||n.count<=0)&&n instanceof modules.goods.model.data.PackProp){var l=n;24==l.propConf.propType&&(this._hasPearl+=l.count,this._hasPearlArr.push(l))}return this.view.needFood.text="消耗【灵珠碎片】："+o+"个",this.view.hasFood.text="持有【灵珠碎片】："+this._hasPearl+"个",this._hasPearl>=o?this.view.needFood.color="#00dc24":this.view.needFood.color="#e70626",!0},i.onBuy=function(){this.sendNotification("SHOW_TOWER_SHOP_PAGE")},i.onSure=function(){var e=this,t=Vt.levelUpNeedPearl(this._p.level,this._p.pos);return this._hasPearl<t?void this.sendNotification("prompted_info_show",{info:"需要【灵珠碎片】"+t+"个"}):this._p.level>=this._p.holeLv?void this.sendNotification("prompted_info_show",{info:"请先升提炼器等级"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"提升等级需消耗<font color='red'>【灵珠碎片】</font>"+t+"个，是否确认？",handler:h.create(this,function(i){if(i){var n,o=[],s=0;for(var r in e._hasPearlArr){if(n=e._hasPearlArr[r],!(s+n.count<t)){o.push({L:n.id,i:t-s});break}o.push({L:n.id,i:n.count}),s+=n.count}Fc.instance.feed(e._p.pos,o),e.view.close()}})})},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PearlLevelUpMediator",t}(lc),zm=function(e){function t(){this._p=null,this._propsFind=null,t.__super.call(this,"PearlActiveMediator")}o(t,"modules.pearl.view.PearlActiveMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new tR),this.view.pearls.renderHandler=new h(this,this.onRender),this.view.pearls.mouseEnabled=!0,this.view.pearls.mouseHandler=new h(this,this.onSelectPearl)},i.listNotificationInterests=function(){return["OPEN_PEARL_ACTIVE_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_PEARL_ACTIVE_PAGE":this.showPage(e.getBody())}},i.showPage=function(e){var t=this.facade.retrieveProxy("PearlProxy"),i=t.pearl;if(null==i||0==i.isInit())return void this.sendNotification("prompted_info_show",{info:"灵珠信息未初始"});if(this._p=i.getPearl(e),null==this._p||this._p.level>=1)return void this.sendNotification("prompted_info_show",{info:"灵珠数据有误"});var n=this.facade.retrieveProxy("GoodsProxy");this._propsFind=n.findOnePropByType(24);var o=Vt.levelUpNeedPearl(0,e),s=0;null==this._propsFind||this._propsFind.count<o?this._propsFind=null:s=this._propsFind.count,this.view.pearls.dataSource?this.view.pearls.refresh():this.view.pearls.dataSource=[1,2,3,4,5],this.view.popup()},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("prop");Ln.renderPearSimple(n,this._p,i,1);var o=n.getChildByName("count");o.text="";var s=Vt.levelUpNeedPearl(0,this._p.pos),r=this._propsFind?this._propsFind.count:0;o=e.getChildByName("need"),o.text="需要灵珠碎片"+s+"/"+r,r>=s?o.color="#00dc24":o.color="#e70626"},i.onSelectPearl=function(e,t){var i=this;if("click"==e.type&&"btnSelect"==e.target.name){var n=Vt.levelUpNeedPearl(0,this._p.pos);if(null==this._propsFind||this._propsFind.count<n)return void this.sendNotification("prompted_info_show",{info:"灵珠碎片不足"});var o=this.view.pearls.getCell(t).dataSource;this.sendNotification("POP_CONFIRM_INFO",{info:"确认兑换选择的灵珠？",handler:h.create(this,function(e){e&&(Fc.instance.active(i._p.pos,i._propsFind.id,o),i.view.close())})})}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PearlActiveMediator",t}(lc),Wm=function(e){function t(){t.__super.call(this)}o(t,"modules.dungeon.controller.DungeonPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Gt.DUNGEON_QUERY_DUNGEON_SP,Qm),this.facade.registerCommand(Gt.DUNGEON_FIGHT_DUNGEON_SP,Qm,!0),this.facade.registerCommand(Gt.DUNGEON_RESET_DUNGEON_SP,Qm,!0),this.facade.registerCommand(Gt.DUNGEON_QUERY_DUNGEON_SP_RANK,qm),this.facade.registerCommand(Gt.DUNGEON_LOCK_FIGHT_BOSS,jm,!0),this.facade.registerCommand(Gt.DUNGEON_QUERY_DUNGEON_LIMIT,Km)},t}(rc),Ym=function(e){function t(){this.dresseds=null,this._inited=!1,this._redSkyStone=null,this._purpleSkyStone=null,t.__super.call(this,"PearlMediator"),this.dresseds=[];for(var e=0;10>e;e++)this.dresseds.push(e)}o(t,"modules.pearl.view.PearlMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this;this.setViewComponent(new nR),this.view.pearls.renderHandler=new h(this,this.onRender),this.view.pearls.mouseEnabled=!0,this.view.pearls.mouseHandler=new h(this,this.onMouse),this.view.pearls.removeSelf(),this.view.btnNtc.clickHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",16)})},i.onRegister=function(){this.facade.registerMediator(new zm),this.facade.registerMediator(new Hm),this.facade.registerMediator(new Um)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","OPEN_PEARL_DRESS_PAGE","RECEIVE_PLAYER_PEARL","RECEIVE_STAR_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":var t=this.facade.retrieveProxy("PearlProxy");t&&t.pearl&&t.pearl.clear(),this._inited=!1,this.viewInited&&this.view.pearls.removeSelf();break;case"OPEN_PEARL_DRESS_PAGE":if(Ng.userVO.getValue(1006)<45)return void this.sendNotification("prompted_info_show",{info:"45级开启灵珠系统"});0==this._inited&&(this._inited=!0,su.instance.query(),Fc.instance.query()),this.freshView(),this.view.popup(),this.view.addChild(e.getBody());break;case"RECEIVE_STAR_INFO":case"RECEIVE_PLAYER_PEARL":this.viewInited&&this.view.isPopup&&this.freshView()}},i.freshView=function(){var e=this.facade.retrieveProxy("PearlProxy"),t=e.pearl;if(null!=t&&0!=t.isInit()){this._redSkyStone=null,this._purpleSkyStone=null;var i,n=this.facade.retrieveProxy("GoodsProxy"),o=n.listItems(0);for(var s in o)if(i=o[s],!(null==i||i.count<=0)&&i instanceof modules.goods.model.data.PackProp){var r=i;if(3==r.propConf.propType&&(5==r.propConf.quality&&r.propConf.level>=99?this._redSkyStone=r:6==r.propConf.quality&&r.propConf.level>=99&&(this._purpleSkyStone=r),this._purpleSkyStone&&this._redSkyStone))break}this.view.pearls.dataSource?this.view.pearls.refresh():this.view.pearls.dataSource=this.dresseds,this.view.addChild(this.view.pearls)}},i.onRender=function(e,t){var i=this.facade.retrieveProxy("PearlProxy"),n=i.pearl;if(null==n||0==n.isInit())return void(e.visible=!1);e.visible=!0;var o=e.getChildByName("pearl"),s=e.getChildByName("feedBtn"),r=e.getChildByName("changeBtn"),a=e.getChildByName("holeBtn"),l=e.dataSource;if(0==l){var h=n.getSuitLevel();Ln.renderPearlSuit(o,h),s.visible=!1,r.visible=!1,a.visible=!1,this._showHoleInfo(e,0,null)}else{var c=n.getPearl(l);null==c||c.holeLv<=0?(Ln.renderPearlEmpty(o,l),s.visible=!1,r.visible=!1,a.visible=null==c||c.holeLv<10):(c.level<=0?(Ln.renderPearlEmpty(o,l),s.visible=!1,r.label="兑换灵珠"):(Ln.renderPearl(o,c),s.visible=c.level<10,r.label="更换灵珠"),r.visible=!0,a.visible=null==c||c.holeLv<10),this._showHoleInfo(e,l,c)}},i._showHoleInfo=function(e,t,i){var n=-1,o=e.getChildByName("holeLv"),s=e.getChildByName("lbNeeds"),r=e.getChildByName("starNeed"),a=e.getChildByName("redNeed"),l=e.getChildByName("purpleNeed"),h=0;if(t>0){o.visible=!0,i&&i.holeLv>0?(h=i.holeLv,o.text="炼器"+i.holeLv+"级",o.color=N.getColor(Vt.getQuality(i.holeLv))):(o.text="炼器0级",o.color="#b0bcb0");var c=this.facade.retrieveProxy("StarProxy");if(c&&c.playerStar&&(n=c.playerStar.getStar(t)),h>=10)s.visible=!1,r.visible=!1,a.visible=!1,l.visible=!1;else if(0>n)s.visible=!1,r.visible=!1,a.visible=!1,l.visible=!1;else{s.visible=!0,r.visible=!0;var u=2*(h+1);r.text="部位强化等级"+u+"/"+n,u>n?r.color="#e70626":r.color="#00dc24";var d=Vt.openHoleNeedStone(h);if(null==d||d.length<2)a.visible=!1,l.visible=!1;else{var p=this._redSkyStone?this._redSkyStone.count:0;if(d[0]>0?(a.text="仙品天籁石"+d[0]+"/"+p,a.visible=!0):a.visible=!1,d[1]>0){var f=this._purpleSkyStone?this._purpleSkyStone.count:0;l.text="仙品天籁石"+d[1]+"/"+f,l.visible=!0}else l.visible=!1}}}else o.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,l.visible=!1},i.onMouse=function(e,t){var i=this;if("click"==e.type){var n=this.view.pearls.getCell(t).dataSource;switch(e.target.name){case"feedBtn":this.sendNotification("OPEN_PEARL_LEVELUP_PAGE",n);break;case"changeBtn":"兑换灵珠"==e.target.label?this.sendNotification("OPEN_PEARL_ACTIVE_PAGE",n):this.sendNotification("OPEN_PEARL_CHANGE_PAGE",n);break;case"holeBtn":var o=this.facade.retrieveProxy("PearlProxy"),s=o.pearl;if(null==s||0==s.isInit())return void this.sendNotification("prompted_info_show",{info:"灵珠数据未初始"});var r=s.getPearl(n),a=r?r.holeLv:0,l=Vt.openHoleNeedStone(a);if(null==l||l.length<2)return;
if(l[0]>0&&(null==this._redSkyStone||this._redSkyStone.count<l[0]))return void this.sendNotification("prompted_info_show",{info:"红色仙品天籁石不足"});if(l[1]>0&&(null==this._purpleSkyStone||this._purpleSkyStone.count<l[1]))return void this.sendNotification("prompted_info_show",{info:"紫色仙品天籁石不足"});var c=2*(a+1),u=0,d=this.facade.retrieveProxy("StarProxy");if(d&&d.playerStar&&(u=d.playerStar.getStar(n)),c>u)return void this.sendNotification("prompted_info_show",{info:"部位强化等级不足"});if(l[0]<=0)return void Fc.instance.openHole(n,[]);var p="<font color='#e70626'>仙品天籁石"+l[0]+"个</font>";l[1]>0&&(p+=",<font color='#c527ff'>仙品天籁石"+l[1]+"个</font>"),this.sendNotification("POP_CONFIRM_INFO",{info:"炼器需消耗"+p+"，是否确认？",handler:h.create(this,function(e){if(e){var t=[{i:l[0],L:i._redSkyStone.id}];l[1]>0&&t.push({i:l[1],L:i._purpleSkyStone.id}),Fc.instance.openHole(n,t)}})})}}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PearlMediator",t}(lc),qm=function(e){function t(){t.__super.call(this)}o(t,"modules.dungeon.controller.commands.QueryDungeonSpRankCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("DungeonSpRankList",t.value),n=this.facade.retrieveProxy("DungeonProxy"),o=n.receiveDungeonSpRank(i);this.sendNotification("RECEIVE_DUNGEON_SP_RANK",o)}},t}(rc),Km=function(e){function t(){t.__super.call(this)}o(t,"modules.dungeon.controller.commands.DungeonLimitCommand",e);var i=t.prototype;return i.execute=function(e){var t,i=e.getBody(),n=this.facade.retrieveProxy("DungeonProxy");if(0==i.status){var o=v.protoCodec.getResponseDecoder().decode("DungeonLimitOpen",i.value);t=n.receiveDungeonLimitOpen(o),v.LIMIT_DUNGEON_OPEN_VERSION=t.openLimit,this.sendNotification("RECEIVE_DUNGEON_LIMIT_INFO",t)}else-56==i.status&&(t=n.receiveDungeonLimitOpen(null),v.LIMIT_DUNGEON_OPEN_VERSION=t.openLimit,this.sendNotification("RECEIVE_DUNGEON_LIMIT_INFO",t))},t}(rc),Xm=function(e){function t(){this.dungeonSpRankList=null,this.dungeonLimitOpen=null,t.__super.call(this,"DungeonProxy",null)}o(t,"modules.dungeon.model.DungeonProxy",e);var i=t.prototype;return i.receiveDungeonSpInfo=function(e){var t=this.dungeonSpInfo;return null==t?(t=new Wt(e),this.setData(t)):t.update(e),t},i.receiveDungeonSpRank=function(e){return null==this.dungeonSpRankList?this.dungeonSpRankList=new zt(e):this.dungeonSpRankList.update(e),this.dungeonSpRankList},i.receiveDungeonLimitOpen=function(e){return null==this.dungeonLimitOpen&&(this.dungeonLimitOpen=new Ut),this.dungeonLimitOpen.update(e),this.dungeonLimitOpen},i.getDungeonLimitOpen=function(){return this.dungeonLimitOpen},i.clear=function(){this.data=null,this.dungeonLimitOpen=null,this.dungeonSpRankList=null},s(0,i,"dungeonSpInfo",function(){return this.data}),t.NAME="DungeonProxy",t}(sc),Qm=function(e){function t(){t.__super.call(this)}o(t,"modules.dungeon.controller.commands.QueryDungeonSpCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("DungeonSpInfo",t.value),n=this.facade.retrieveProxy("DungeonProxy"),o=n.receiveDungeonSpInfo(i);this.sendNotification("RECEIVE_DUNGEON_SP_INFO",o),7==t.cmd&&this.sendNotification("CHECK_6RMB_SPGIFT")}else if(xi.isCaptchaErro(t.status))return this.sendNotification("SHOW_FIGHT_PAGE_OTHER",!0,1),void this.sendNotification("CAPTCHA_ALERT_FORBIDEN",t.status)},t}(rc),jm=function(e){function t(){t.__super.call(this)}o(t,"modules.dungeon.controller.commands.LockFightBossCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();0==t.status?this.sendNotification("prompted_info_show",{info:"请求成功，下回合挑战BOSS"}):this.sendNotification("prompted_info_show",{info:"下回合挑战BOSS"})},t}(rc),Zm=function(e){function t(){this.freshAble=!1,this.dressedEquips=null,this.inited=!1,this.playerStar=null,this.equipDressChangeView=null,this.suit=null,this.suitQuality=0,t.__super.call(this,"EquipMediator"),this.dressedEquips=[];for(var e=0;9>e;e++)this.dressedEquips.push(null)}o(t,"modules.equip.view.EquipMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this;this.setViewComponent(new rR),this.view.equips.renderHandler=new h(this,this.onEquipRender),this.view.equips.mouseEnabled=!0,this.view.equips.mouseHandler=new h(this,this.onMouseEquip),this.view.equips.scrollBar.hide=!0,this.view.equips.removeSelf(),this.view.ntc.clickHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",5)}),this.view.tab.selectHandler=new h(this,this.onTab)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","OPEN_EQUIP_VIEW","FRESH_GOODS_PACK","RECEIVE_STAR_INFO","USER_CURRENCY_CHANGE"]},i.onTab=function(e){switch(e){case 0:this.sendNotification("CLOSE_ALL_DIALOG"),this.showDrees();break;case 1:if(Ng.userVO.getValue(1006)<39)return this.sendNotification("prompted_info_show",{info:"39级开启伏魔装备系统"}),void(this.view.tab.selectedIndex=0);this.sendNotification("CLOSE_ALL_DIALOG"),this.sendNotification("OPEN_DEMON_DRESS_PAGE",this.view.tab);break;case 2:if(Ng.userVO.getValue(1006)<45)return this.sendNotification("prompted_info_show",{info:"45级开启灵珠系统"}),void(this.view.tab.selectedIndex=0);this.sendNotification("CLOSE_ALL_DIALOG"),this.sendNotification("OPEN_PEARL_DRESS_PAGE",this.view.tab)}},i.showDrees=function(){this.view.popup(),this.view.addChild(this.view.tab),this.fresh(),0==this.inited&&(this.inited=!0,su.instance.query())},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this.inited=!1,this.view.tab.selectedIndex=0,this.view.equips.removeSelf();break;case"OPEN_EQUIP_VIEW":this.view.tab.selectedIndex>=0?this.onTab(this.view.tab.selectedIndex):this.view.tab.selectedIndex=0;break;case"FRESH_GOODS_PACK":var t=e.getBody();t.contain(2)&&(this.freshAble=!0),this.fresh();break;case"RECEIVE_STAR_INFO":this.playerStar=e.getBody(),this.view.equips.dataSource&&this.view.equips.refresh();break;case"USER_CURRENCY_CHANGE":this.freshAble=!0,this.fresh()}},i.onEquipRender=function(e,t){if(this.view.equips.dataSource){var i=e.getChildByName("chat");i.visible=!1;var n=e.getChildByName("dhBtn"),o=e.getChildByName("starBtn"),s=e.getChildByName("changeBtn"),r=e.getChildByName("rbBtn");if(0==t)n.visible=!1,o.visible=!1,s.visible=!1,r.visible=!1,Ln.renderEquipSuit(e.getChildByName("equip"),this.suit,this.suitQuality);else{s.visible=!0,o.visible=!0;var a=this.view.equips.dataSource[t];if(a){v.enableChat()&&!v.limitChat&&i&&(i.visible=!0);var l=0;this.playerStar&&(l=this.playerStar.getStar(a.equipConf.position)),Ln.renderEquip(e.getChildByName("equip"),a,l),a.canCreatAttr()?(n.visible=!0,n.label="点化"):a.canEnchanment()?(n.visible=!0,n.label="熔灵"):n.visible=!1,s.label="更换",r.visible=a.canRebuild()}else Ln.renderEquipEmptyGrid(e.getChildByName("equip"),t),n.visible=!1,o.visible=!1,s.label="装备",r.visible=!1}}},i.onMouseEquip=function(e,t){if("click"==e.type){var i=this.view.equips.dataSource[t];switch(e.target.name){case"chat":this.sendNotification("CHAT_INPUT_ITEM",i);break;case"dhBtn":if(i.canCreatAttr()){var n=kn.getDhCostSilver(i.equipConf.level),o=this.facade.retrieveProxy("UserProxy").vo;if(o.getValue(1009)<n)return void this.sendNotification("prompted_info_show",{info:"需要"+n+"铜币，铜币不足无法点化。"});x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"点化需要"+n+"铜币，是否继续？",handler:h.create(this,function(e){e&&Sc.instance.dianhuaEquip(i.id)})})}else i.canEnchanment()&&this.sendNotification("OPEN_ENCHANTMENT_EQUIP_VIEW",i);break;case"starBtn":this.sendNotification("OPEN_STAR_VIEW",i);break;case"changeBtn":null==this.equipDressChangeView&&(this.equipDressChangeView=new mR(new h(this,this.onEquipPopSelect)));var s,r=t,a=this.facade.retrieveProxy("GoodsProxy"),l=a.listItems(0),c=[];for(var u in l)s=l[u],null==s||s.count<=0||s instanceof modules.goods.model.data.PackEquip&&s.equipConf.position==r&&c.push(s);c.sort(this.compareFunctionEquip),this.equipDressChangeView.popSelect(i,c,r);break;case"rbBtn":this.sendNotification("OPEN_REBUILD_EQUIP_VIEW",i)}}},i.compareFunctionEquip=function(e,t){return e.equipConf.id>t.equipConf.id?-1:e.equipConf.id<t.equipConf.id?1:0},i.onEquipPopSelect=function(e){if(e){var t=this.facade.retrieveProxy("UserProxy").vo,i=t.getValue(1006),n=t.getValue(1004);if(i<e.equipConf.level)return void this.sendNotification("prompted_info_show",{info:"级别不足，无法装备。"});if(0!=e.equipConf.needNature&&n!=e.equipConf.needNature)return void this.sendNotification("prompted_info_show",{info:"五行限制，无法装备。"});bu.instance.dress(e.id,e.equipConf.position-1),this.equipDressChangeView.close()}},i.fresh=function(){if(this.freshAble&&this.view.isPopup){for(var e=this.facade.retrieveProxy("GoodsProxy"),t=e.listItems(2),i=0;10>i;i++)this.dressedEquips[i]=null;var n,o=0,s=0,r=0;for(var a in t)n=t[a],n instanceof modules.goods.model.data.PackEquip&&(this.dressedEquips[n.equipConf.position]=n,n.equipConf.suitId&&(o!=n.equipConf.suitId?(s=1,o=n.equipConf.suitId,r=n.quality):(s++,r+=n.quality)));o&&3==s?(this.suit=g.database.getData("equipsuit",o),this.suitQuality=Math.floor(r/s)):(this.suit=null,this.suitQuality=0),this.view.equips.dataSource?this.view.equips.refresh():this.view.equips.dataSource=this.dressedEquips,this.freshAble=!1,this.view.addChild(this.view.equips)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="EquipMediator",t}(lc),Jm=function(e){function t(){this.equips=[],this.props=[],t.__super.call(this,"EquipPreviewMediator")}o(t,"modules.equip.view.EquipPreviewMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new gR),this.view.equips.renderHandler=new h(this,this.onRenderEquip),this.view.props.renderHandler=new h(this,this.onRenderProp),this.view.nature.selectHandler=new h(this,this.onNature),this.view.bar.selectHandler=new h(this,this.onBar)},n.listNotificationInterests=function(){return["OPEN_EQUIP_PREVIEW"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_EQUIP_PREVIEW":this.feshLevel(e.getBody(),e.getType()),this.view.popup()}},n.feshLevel=function(e,t){var n=0,o=1e8,s=0,r=1e8;null==t?(this.view.title.text=e+"级装备预览",this.view.title.color="#00dc24",100==e&&(n=60961,s=61001131)):(this.view.title.text="【"+t.text+"副本】掉落预览",this.view.title.color=t.color,100==e&&(o=60957,r=2595536)),this.equips.length=0;var a,l=g.database.getDict("equip");for(var h in l.values)a=l.values[h],a.level==e&&6==a.quality&&a.position<=7&&a.id>=n&&a.id<=o&&this.equips.push(a);5>=e?(this.view.nature.selectedIndex=0,this.view.nature.visible=!1,this.view.lbNatrue.visible=!1):(this.view.nature.visible=!0,this.view.lbNatrue.visible=!0),this.props.length=0,l=g.database.getDict("props");var c;for(var u in l.values)c=l.values[u],c.level==e&&6==c.quality&&2==c.propType&&c.id>=s&&c.id<=r&&this.props.push(c);i.timer.callLater(this,this._fresh)},n.onRenderEquip=function(e,t){var i=e.getChildByName("equip");Ln.renderEquipByCfg(i,e.dataSource,!1)},n.onRenderProp=function(e,t){var i=e.getChildByName("prop");Ln.renderPropsByCfg(i,e.dataSource,0,!1)},n._fresh=function(){if(null!=this.equips){var e,t=this.view.nature.selectedIndex;if(0==this.view.bar.selectedIndex){if(0>=t)e=this.equips;else{e=[];var i;for(var n in this.equips)i=this.equips[n],i.nature==t&&e.push(i)}this.view.equips.dataSource=e,this.view.props.visible=!1,this.view.equips.visible=!0,this.view.ntc.text="小贴示：蓝色属性打造时仅随机获得一条"}else{if(0>=t)e=this.props;else{e=[];var o;for(var s in this.props)o=this.props[s],o.nature==t&&e.push(o)}this.view.props.dataSource=e,this.view.equips.visible=!1,this.view.props.visible=!0,this.view.ntc.text="小贴示：特殊材料在打造时放入可获得对应特殊属性"}}},n.onNature=function(e){i.timer.callLater(this,this._fresh)},n.onBar=function(e){i.timer.callLater(this,this._fresh)},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="EquipPreviewMediator",t}(lc),$m=function(e){function t(){this._enchantmentView=null,this._equipChoseView=null,this._popSuccess=null,this._equip=null,this._success=null,this.onRebuildSuccessClose=new h(this,function(){var e=this;e.showRebuildPage(e._success)}),t.__super.call(this,"EquipExMediator")}o(t,"modules.equip.view.EquipExMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new uR),this._enchantmentView=new kP,this._equipChoseView=new PP,this._popSuccess=new DP,this._enchantmentView.btnNtc.clickHandler=new h(this,this.onNtcEnchant),this.view.ntc.clickHandler=new h(this,this.onNtc),T.IS_ON_MINI&&(this._enchantmentView.btnNtc.visible=!1)},i.onNtcEnchant=function(){this.sendNotification("SHOW_HELP_PAGE",2)},i.onNtc=function(){this.sendNotification("POP_FUN_NOTICE",10,this._equip)},i.listNotificationInterests=function(){return["OPEN_REBUILD_EQUIP_VIEW","OPEN_ENCHANTMENT_EQUIP_VIEW","POP_EQUIP_OPTION_SUCCESS"]},i.handleNotification=function(e){var t;switch(e.getName()){case"OPEN_REBUILD_EQUIP_VIEW":t=e.getBody(),t.creatAttr.length>0?this.equipChoseView.showEquip(t):this.showRebuildPage(t);break;case"OPEN_ENCHANTMENT_EQUIP_VIEW":t=e.getBody(),this.showEnchantmentPage(t);break;case"POP_EQUIP_OPTION_SUCCESS":switch(t=e.getBody(),Ln.renderEquip(this.popSuccess.equip,t),e.getType()){case Ye.SMITHY_BUILD_EQUIP_EX:this.popSuccess.title.text="制做成功",this.popSuccess.closeHandler=null;break;case Ye.SMITHY_ENCHANTMENT:this.popSuccess.title.text="熔灵成功",this.popSuccess.closeHandler=null;break;case Ye.SMITHY_REBUILD_EQUIP_EX:this.popSuccess.title.text="洗炼成功",this._success=t,this.popSuccess.closeHandler=this.onRebuildSuccessClose;break;case Ye.SMITHY_REBUILD_EQUIP_EX_DELAY:return this.sendNotification("prompted_info_show",{info:"完成洗炼,请选择是否替换属性"}),void this.equipChoseView.showEquip(t);case Ye.SMITHY_REBUILD_CHOSE:this.popSuccess.title.text="洗炼结束",this._success=t,this.popSuccess.closeHandler=this.onRebuildSuccessClose;break;case Ye.SMITHY_CHG_EX_EQUIP_NATURE:this.popSuccess.title.text="更换五行成功",this.popSuccess.closeHandler=null}this.popSuccess.popup()}},i.showEnchantmentPage=function(e){this._equip=e;var t=this.facade.retrieveProxy("GoodsProxy"),i=t.listItems(0),n=g.database.getData("props",e.equipConf.mainPropsType);if(null!=n){var o,s=[];for(var r in i)if(o=i[r],!(null==o||o.count<=0)&&o instanceof modules.goods.model.data.PackProp){var a=o;18==a.propConf.propType&&a.propConf.type==n.type&&s.push(a)}this.enchantmentView.popSelect(e,s)}},i.showRebuildPage=function(e){this._equip=e;var t,i=this.facade.retrieveProxy("GoodsProxy"),n=i.listItems(0),o=[];for(var s in n)if(t=n[s],!(null==t||t.count<=0)&&t instanceof modules.goods.model.data.PackProp){var r=t;3==r.propConf.propType&&r.propConf.quality>=e.quality&&r.propConf.level>=50&&r.propConf.level>=e.equipConf.level&&o.push(r)}o.sort(this.compareFunctionStone),this.view.popSelect(e,o)},i.compareFunctionStone=function(e,t){return e.baseId-t.baseId},s(0,i,"popSuccess",function(){return this.getViewComponent(),this._popSuccess}),s(0,i,"equipChoseView",function(){return this.getViewComponent(),this._equipChoseView}),s(0,i,"enchantmentView",function(){return this.getViewComponent(),this._enchantmentView}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="EquipExMediator",t}(lc),eg=function(e){function t(){t.__super.call(this)}o(t,"modules.pay.controller.PayCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 111:this.sendNotification("prompted_info_show",{info:"购买成功"});break;case 110:this.sendNotification("prompted_info_show",{info:"充值成功"})}else this.sendNotification("prompted_info_show",{info:"充值失败"})},t}(rc),tg=function(e){function t(){t.__super.call(this)}o(t,"modules.pay.controller.PayPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Yt.PAY_TEST_PAY,eg,!0),this.facade.registerCommand(Yt.PAY_JADE_PAY,eg,!0)},t}(rc),ig=function(e){function t(){t.__super.call(this)}o(t,"modules.oldguy.controller.OldGuyPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Xt.OLDGUY_INFO,og,!0),this.facade.registerCommand(Xt.OLDGUY_TAKE,og,!0)},t}(rc),ng=function(e){function t(){t.__super.call(this,"OldGuyProxy")}o(t,"modules.oldguy.model.OldGuyProxy",e);var i=t.prototype;return s(0,i,"vo",function(){return this.data},function(e){this.data=e}),t.NAME="OldGuyProxy",t}(sc),og=function(e){function t(){t.__super.call(this)}o(t,"modules.oldguy.controller.commands.OldGuyCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("OldPlayerWF",t.value),n=this.facade.retrieveProxy("OldGuyProxy");n.vo=i,this.sendNotification("OLD_GUY_INFO",i),2==t.cmd&&(1==n.vo.awardIndex?this.sendNotification("prompted_info_show",{info:"领取奖励成功，获得元宝："+n.vo.totalRmb+"； 累充档位 + "+n.vo.totalRmb}):this.sendNotification("prompted_info_show",{info:"领取奖励成功，获得元宝："+n.vo.totalRmb}))}},t}(rc),sg=function(e){function t(){this.initRequest=!1,this.heroLv=0,this.heroNature=0,this._list=null,t.__super.call(this,"DungeonSpRankMediator")}o(t,"modules.dungeon.view.DungeonSpRankMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new MN),this.view.list.dataSource=[],this.view.btnFresh.clickHandler=new h(this,this.onFresh),this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onMouse),this.view.natureBar.selectHandler=new h(this,this.onNatureBar)},i.listNotificationInterests=function(){return["USER_INIT","USER_LEVEL_CHANGE","CHANGE_NATURE_RESULT","OPEN_DUNGEON_SP_RANK_PAGE","RECEIVE_DUNGEON_SP_RANK"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":this.initRequest=!1,this.heroNature=Ng.userVO.getValue(1004),this.heroLv=Ng.userVO.getValue(1006),this.view.natureBar.selectedIndex=this.heroNature-1,this.freshList();break;case"USER_LEVEL_CHANGE":this.heroLv=Ng.userVO.getValue(1006);break;case"OPEN_DUNGEON_SP_RANK_PAGE":if(this.heroLv<25)return void this.sendNotification("prompted_info_show",{info:"到达25级可查看排行榜"});0==this.initRequest&&(this.initRequest=!0,this.onFresh()),this.heroNature&&(this.view.natureBar.selectedIndex=this.heroNature-1),this.view.popup();break;case"CHANGE_NATURE_RESULT":this.heroNature=Ng.userVO.getValue(1004),this.onFresh();break;case"RECEIVE_DUNGEON_SP_RANK":this._list=e.getBody().list,this.freshList()}},i.onFresh=function(){Gc.instance.queryDungeonSpRank()},i.onNatureBar=function(e){this.freshList()},i.freshList=function(){if(null!=this._list){var e,t=[];for(var i in this._list)e=this._list[i],e.nature==this.view.natureBar.selectedIndex+1&&e.maxNum>0&&t.push(e);this.view.list.dataSource=t}},i.onRender=function(e,t){if(this.view.list.dataSource){var i,n=this.view.list.dataSource[t];switch(i=e.getChildByName("rank"),i.text=""+(t+1),t){case 0:i.color="#c527ff";break;case 1:i.color="#e70626";break;case 2:i.color="#fffc00";break;default:i.color="#ffffff"}i=e.getChildByName("name"),i.text=n.name;var o=e.getChildByName("btnView");n.playerId==Ng.userVO.unitId.id?(i.color="#00dc24",o.visible=!1):(i.color="#fffc00",o.visible=!0);var s=e.getChildByName("nature");s.index=n.nature-1;var r=i.x+i.width;s.x=r,i=e.getChildByName("level"),i.text=n.level+"级",r=s.x+s.width,i.x=r,i=e.getChildByName("maxNum"),i.text=n.maxNum}},i.onMouse=function(e,t){if("click"==e.type&&"btnView"==e.target.name&&this.view.list.dataSource){var i=this.view.list.dataSource[t];this.sendNotification("SHOW_LOOK_PAGE",i)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="DungeonSpRankMediator",t}(lc),rg=function(e){function t(){t.__super.call(this,"DungeonSpMediator")}o(t,"modules.dungeon.view.DungeonSpMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.spcailDungeon.getChildByName("spHead"));var i=this.view.getChildByName("nextClearTime");i.text="--",this.view.on("mouseup",this,this.onSpDungeonClick)},i.listNotificationInterests=function(){return["RECEIVE_DUNGEON_SP_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"RECEIVE_DUNGEON_SP_INFO":this.freshSpDungeonInfo(e.getBody())}},i.freshSpDungeonInfo=function(e){if(null!=e){var t=this.view.getChildByName("lbFighting");t.visible=e.fighting,t=this.view.getChildByName("currentLv"),t.text=e.getRoundShow()+"",t=this.view.getChildByName("passedLv"),t.text=e.passedId+"",t=this.view.getChildByName("nextClearTime");var i=this.view.getChildByName("btnReset");if(e.failTime<0)ro.isTodayTs(e.lastEnterTime)?(t.text="每天0点后可重置",t.visible=!0,this.sendNotification("DUNGEON_SP_HAS_READY",!1)):(t.text="当前可免费重置一次",t.visible=!0,this.sendNotification("DUNGEON_SP_HAS_READY",!0)),i.visible=!0;else{t.visible=!0,t.text="挑战失败后可重置五行宫",i.visible=!1;var n=Ng.userVO.getValue(1006);10>n?this.sendNotification("DUNGEON_SP_HAS_READY",!1):this.sendNotification("DUNGEON_SP_HAS_READY",!1)}}},i.onSpDungeonClick=function(e){var t=this,i=this.facade.retrieveProxy("DungeonProxy"),n=i.dungeonSpInfo;switch(e.target.name){case"btnRank":this.sendNotification("OPEN_DUNGEON_SP_RANK_PAGE");break;case"btnReset":var o=-n.failTime;if(o>0){if(Ng.userVO.getValue(1006)<15)return void this.sendNotification("POP_ALERT_INFO",{info:"需要等级：15，层数越高重置越有优势哦。"});if(ro.isTodayTs(n.lastEnterTime)){var s=this.facade.retrieveProxy("PayTotalPropxy"),r=s.info,a=4;if(r&&(a+=r.spDungeonBuyTimeAdd()),o>=a)return void this.sendNotification("prompted_info_show",{info:"重置次数已达上限。"});var l=50;switch(o){case 1:l=50;break;case 2:l=100;break;case 3:l=200;break;default:l=100*(o-1),(l>500||200>l)&&(l=500)}var c=Ng.userVO.getValue(1010);if(l>c)return void this.sendNotification("prompted_info_show",{info:"需要消耗"+l+"元宝，或等待免费重置时间。"});this.sendNotification("POP_CONFIRM_INFO",{info:"是否消耗<font color='#fffc00'>"+l+"元宝</font>重置关卡？",handler:h.create(this,function(e){e&&(Gc.instance.resetDungeonSp(),t.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,1),k.goldenCost("重置关卡",1,l))})})}else Gc.instance.resetDungeonSp(),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,1)}break;default:if(null==n)return;n.fighting||Gc.instance.fightDungeonSp(),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,1)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="DungeonSpMediator",t}(lc),ag=function(e){function t(){t.__super.call(this)}o(t,"modules.mystery.controller.commands.MysteryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("Mestery",t.value),n=this.facade.retrieveProxy("MysteryProxy"),o=n.receiveMystery(i);this.sendNotification("RECEIVE_MYSTERY_MAP",o,2==t.cmd?"enter":"push")}else{var s=Qt.getInfo(t.status);this.sendNotification("prompted_info_show",{info:s})}},t}(rc),lg=function(e){function t(){this._mysteryMap=null,t.__super.call(this,"MysteryProxy",new Jt),this._mysteryMap=new Zt}o(t,"modules.mystery.model.MysteryProxy",e);var i=t.prototype;return i.receivePlayerInfo=function(e){return this.playerInfo.update(e),this.playerInfo},i.receiveMystery=function(e){return this._mysteryMap.update(e),this._mysteryMap},i.clear=function(){this._mysteryMap.clear(),this.playerInfo.clear()},s(0,i,"mysteryMap",function(){return this._mysteryMap}),s(0,i,"playerInfo",function(){return this.data}),t.NAME="MysteryProxy",t}(sc),hg=function(e){function t(){t.__super.call(this)}o(t,"modules.mystery.controller.commands.MysteryHangCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i;switch(t.cmd){case 13:i=v.protoCodec.getResponseDecoder().decode("PlayerMestery",t.value);var n=this.facade.retrieveProxy("MysteryProxy"),o=n.receivePlayerInfo(i);this.sendNotification("RECEIVE_PLAYER_MYSTERY",o),this.sendNotification("OPEN_MYSTERY_GATE_VIEW","close"),this.sendNotification("prompted_info_show",{info:"秘境挂机开始"});break;case 12:i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value);var s=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"秘境挂机",awards:s,desc:"<br><font color='#0084ff'></font>"})}}else{var r=Qt.getInfo(t.status);this.sendNotification("prompted_info_show",{info:r})}},t}(rc),cg=function(e){function t(){this._orderData=null,this._orderType=null,t.__super.call(this,"PaymentMediator")}o(t,"modules.pay.view.PaymentMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new eR),this.vi.on("click",this,this.onClick)},i.listNotificationInterests=function(){return["SHOW_PAYMENT_SELECT","SHOW_PAYMENT_ADD_JADE","SHOW_PAYMENT_USE_JADE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PAYMENT_SELECT":if(v.IS_GLOBAL_VERSION)return this._orderType="PAYPAL",this._orderData=e.getBody(),nwei_sdk.orderPayPal(this._orderData,X.FID),this.vi.popPaying(),void this.vi.popup();this._orderType=null,this._orderData=e.getBody(),this.vi.popSelect("3999"==this._orderData.buy||"8888"==this._orderData.buy),this.vi.popup();break;case"SHOW_PAYMENT_ADD_JADE":this.openJadeAdd();break;case"SHOW_PAYMENT_USE_JADE":var t=e.getBody();if(!t)return;if(t.rmb>Ng.userVO.getValue(1019))v.OPEN_PAYMENT?(this.sendNotification("prompted_info_show",{info:"您的仙玉不足。"}),this.openJadeAdd()):this.sendNotification("prompted_info_show",{info:"您的仙玉不足。"});else{var i=t.name;if(t.id>=2&&t.id<=8){var n=this.facade.retrieveProxy("MarketProxy"),o=n.isDoublePayVisble(t.rmb);o>0&&(i=20*t.rmb+"元宝")}this.sendNotification("POP_CONFIRM_INFO",{info:"确认消耗<font color='#fffc00'>"+t.rmb+"仙玉</font>，获得<font color='#00dc24'>"+i+"</font>？",handler:h.create(this,function(e){e&&Hc.instance.jadePay(t.id)})})}}},i.openJadeAdd=function(){v.OPEN_PAYMENT&&this.sendNotification("OPEN_MARCKET_VIEW","充值")},i.onClick=function(e){switch(e.target.name){case"btnFrame":nwei_sdk.hideFrame(),this.vi.btnFrame.visible=!1,this.vi.close();break;case"paying":this._queryOrder(),this.vi.close();break;case"btnWX":this._orderType="WX",nwei_sdk.orderWX(this._orderData,X.FID),this.vi.popPaying();break;case"btnALI":this._orderType="ALI",nwei_sdk.orderALI(this._orderData,X.FID),this.vi.popPaying()}},i._queryOrder=function(){if(this._orderData){var e,t=this._orderData.game_id;switch(this._orderType){case"ALI":e=X.PAYMENT_API_JUMP+"/queryOrderALI?tradeNo="+t;break;case"WX":e=X.PAYMENT_API_JUMP+"/queryOrderWX?tradeNo="+t;break;case"PAYPAL":e=X.PAYMENT_API_JUMP+"/extpaypal/queryOrder?tradeNo="+t;break;default:return}if(T.IS_ON_MINI);else{var i=new Iu;i.on("complete",this,this.onHttp),i.on("error",this,this.onHttpErr),i.send(e,null,"get","json")}}},i.onHttp=function(e){if("SUCCESS"==e.code)this.sendNotification("prompted_info_show",{info:"支付成功，已确认。"});else switch(k.cancelOrder(),e.message){case"USERPAYING":case"ACCEPT":this.sendNotification("prompted_info_show",{info:"正在核实订单状态，不要重复发起支付"});break;case"NOTPAY":this.sendNotification("prompted_info_show",{info:"订单支付失败，未付款"});break;default:this.sendNotification("prompted_info_show",{info:"订单支付失败，code:"+e.message})}},i.onHttpErr=function(e){this.sendNotification("prompted_info_show",{info:"支付订单查询失败"})},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="PaymentMediator",t}(lc),ug=function(e){function t(){t.__super.call(this)}o(t,"modules.mystery.controller.commands.PlayerMysteryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerMestery",t.value),n=this.facade.retrieveProxy("MysteryProxy"),o=n.receivePlayerInfo(i);switch(this.sendNotification("RECEIVE_PLAYER_MYSTERY",o),t.cmd){case 4:case 5:this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,16);break;case 6:0==o.questionCd?this.sendNotification("prompted_info_show",{info:"回答正确，获得【腐蚀之精】*"+o.question}):-1==o.questionCd?this.sendNotification("prompted_info_show",{info:"很遗憾，您的答案有误"}):-2==o.questionCd&&this.sendNotification("prompted_info_show",{info:"很遗憾，人机验证超时"});break;case 10:o.applyquit>0?(this.sendNotification("prompted_info_show",{info:"切换秘境请求成功"}),this.sendNotification("OPEN_MYSTERY_MAP_VIEW","close")):(this.sendNotification("prompted_info_show",{info:"切换秘境已取消"}),this.sendNotification("OPEN_MYSTERY_MAP_VIEW"));break;case 7:0==o.grade&&(this.sendNotification("OPEN_MYSTERY_MAP_VIEW","close"),this.sendNotification("prompted_info_show",{info:"秘境到期，已关闭"}))}}else{var s=Qt.getInfo(t.status);this.sendNotification("prompted_info_show",{info:s}),t.status==Qt.DEAD_GUY&&zc.instance.quit()}},t}(rc),dg=function(e){function t(){t.__super.call(this)}o(t,"modules.mystery.controller.MysteryPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(jt.MYSTERY_ENTER,ag),this.facade.registerCommand(jt.MYSTERY_PUSH_MAP,ag),this.facade.registerCommand(jt.MYSTERY_INFO,ug),this.facade.registerCommand(jt.MYSTERY_MOVE,ug,!0),this.facade.registerCommand(jt.MYSTERY_FIGHT_MONSTER,ug,!0),this.facade.registerCommand(jt.MYSTERY_FIGHT_PLAYER,ug,!0),this.facade.registerCommand(jt.MYSTERY_ANSWER,ug,!0),this.facade.registerCommand(jt.MYSTERY_QUIT,ug,!0),this.facade.registerCommand(jt.MYSTERY_APPLY_QUIT,ug,!0),this.facade.registerCommand(jt.MYSTERY_PUSH_MESTERY,ug),this.facade.registerCommand(jt.MYSTERY_START_HANG,hg,!0),this.facade.registerCommand(jt.MYSTERY_STOP_HANG,hg,!0)},t}(rc),pg=function(e){function t(){t.__super.call(this,"OldGuyMediatior")}o(t,"modules.oldguy.view.OldGuyMediatior",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new aR),this.view.btnTake.clickHandler=new h(this,this.onTake),this.getHomeBtn().clickHandler=new h(this,this.onPage)},i.getHomeBtn=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view.listVisit.getChildByName("actCode");return t.getChildByName("btnOldguy")},i.listNotificationInterests=function(){return["USER_INIT","ZERO_CLOCK_TRIGER","OLD_GUY_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":case"ZERO_CLOCK_TRIGER":this.view.close(),this.getHomeBtn().visible=!1;var t=Ng.userVO.getValue(1016);0==t.indexOf("wf_")&&1==v.serverId&&Uc.instance.query();break;case"OLD_GUY_INFO":var i=e.getBody();i&&i.totalRmb>0&&i.awardIndex<12?(this.getHomeBtn().visible=!0,this.freshView(i)):(this.getHomeBtn().visible=!1,this.view.close())}},i.freshView=function(e){if(this.view.totalpay.text="总计充值："+e.totalRmb+"元",this.view.price.text="每次可领："+e.totalRmb+"元宝",e.awardIndex>0?this.view.awarded.text="已领取：第"+Kt.DAY_STEP[e.awardIndex-1]+"天":this.view.awarded.text="已领取：无",e.awardIndex<12){var t=Kt.DAY_STEP[e.awardIndex];this.view.wait.text="待领取：第"+t+"天";var i=g.clock.todayZero,n=Ng.userVO.getValue(19001),o=ro.dateDiff(i,ro.newDate(n))+1;t>o?(this.view.wait.color="#e70626",this.view.btnTake.mouseEnabled=!1,this.view.btnTake.label=t-o+"日后领取"):(this.view.wait.color="#00dc24",this.view.btnTake.mouseEnabled=!0,this.view.btnTake.label="领取")}else this.view.wait.text="待领取：无"},i.onTake=function(){var e=this.facade.retrieveProxy("OldGuyProxy");e&&e.vo&&e.vo.totalRmb>0&&e.vo.awardIndex<12&&Uc.instance.take(e.vo.awardIndex+1)},i.onPage=function(){this.view.popup()},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="OldGuyMediatior",t}(lc),fg=function(e){function t(){t.__super.call(this)}o(t,"modules.ladder.controller.LadderPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(ei.LADDER_QUERY,_g),this.facade.registerCommand(ei.LADDER_LIST_RANK,bg,!0),this.facade.registerCommand(ei.LADDER_FIGHT,gg,!0),this.facade.registerCommand(ei.LADDER_TAKE_AWARD,mg,!0),this.facade.registerCommand(ei.LADDER_LIST_TOP10,yg,!0)},t}(rc),_g=function(e){function t(){t.__super.call(this)}o(t,"modules.ladder.controller.commands.LadderQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerLadder",t.value),n=this.facade.retrieveProxy("LadderProxy"),o=n.receive(i);this.sendNotification("RECEIVE_PLAYER_LADDER",o)}},t}(rc),mg=function(e){function t(){t.__super.call(this)}o(t,"modules.ladder.controller.commands.LadderAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);
this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"竞技场排行奖励",awards:n,desc:""})}},t}(rc),gg=function(e){function t(){t.__super.call(this)}o(t,"modules.ladder.controller.commands.LadderFightCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerLadder",t.value),n=this.facade.retrieveProxy("LadderProxy"),o=n.receive(i);this.sendNotification("RECEIVE_PLAYER_LADDER",o),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,8)}else switch(t.status){case-44:this.sendNotification("prompted_info_show",{info:"战斗中，稍后再试"}),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,8);break;case-37:this.sendNotification("prompted_info_show",{info:"目标战斗中，稍后再试"});break;default:xi.isCaptchaErro(t.status)&&this.sendNotification("CAPTCHA_ALERT_FORBIDEN",t.status)}},t}(rc),vg=function(e){function t(){this.ladderAround=null,t.__super.call(this,"LadderProxy",new ii)}o(t,"modules.ladder.model.LadderProxy",e);var i=t.prototype;return i.receive=function(e){return this.vo.update(e),this.vo},i.recieveAround=function(e){return null==this.ladderAround&&(this.ladderAround=new ti),this.ladderAround.update(e),this.ladderAround},s(0,i,"vo",function(){return this.data}),t.NAME="LadderProxy",t}(sc),yg=function(e){function t(){t.__super.call(this)}o(t,"modules.ladder.controller.commands.LadderTop10Command",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("LadderAround",t.value);this.sendNotification("RECEIVE_LADDER_TOP10",i.players)}},t}(rc),bg=function(e){function t(){t.__super.call(this)}o(t,"modules.ladder.controller.commands.LadderListCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("LadderAround",t.value),n=this.facade.retrieveProxy("LadderProxy"),o=n.recieveAround(i);this.sendNotification("RECEIVE_AROUND_LADDER",o)}},t}(rc),Eg=function(e){function t(){this.mysteryHead=null,this._pearl=null,this.afterDay=0,t.__super.call(this,"MysteryGateMediator")}o(t,"modules.mystery.view.MysteryGateMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new lR),this.view.listGate.renderHandler=new h(this,this.onRender),this.view.listGate.mouseEnabled=!0,this.view.listGate.mouseHandler=new h(this,this.onClick),this.view.listGate.dataSource=$t.GATE_GRADES},i.checkAfterDay=function(){var e=Ng.userVO.getValue(19004);this.afterDay=ro.dateDiffByMs(g.clock.currentTime,e),this.view.listGate.refresh()},i.onRender=function(e,t){var i,n,o,s=e.dataSource,r=0;switch(s){case 1:i="1-2级",n="无",o="#ffffff";break;case 2:i="1-4级",n="协战红宠",o="#0084ff";break;case 3:i="2-6级",n="激活灵珠5级套装",o="#00dc24",r=5;break;case 4:i="3-8级",n="激活灵珠7级套装",o="#fffc00",r=7;break;case 5:i="5-12级",n="激活灵珠9级套装",o="#e70626",r=9;break;default:i="??",n="??",o="#ffffff"}var a=e.getChildByName("title");a.text="秘境"+s+"层",a.color=o,a=e.getChildByName("drop"),a.text="掉落装备："+i,a=e.getChildByName("cnd"),a.text="进入条件："+n;var l=$t.getOpenTime(s);this.afterDay>l?e.visible=!0:null!=this._pearl&&this._pearl.getSuitLevel()>=r?e.visible=!0:e.visible=!1},i.onClick=function(e,t){if("click"==e.type){var i=this.view.listGate.getCell(t).dataSource;switch(e.target.name){case"btnEnter":var n=this.facade.retrieveProxy("MysteryProxy");if(n&&n.playerInfo.todayBossTime>=50)return void this.sendNotification("POP_ALERT_INFO",{info:"今日伏魔已达上限，请明日再来"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认进入秘境第"+i+"层?",handler:h.create(this,function(e){e&&zc.instance.enter(i)})});break;case"btnHang":this.sendNotification("OPEN_MYSTERY_HANG_VIEW",i)}}},i.freshHead=function(e){if(null==this.mysteryHead){var t=this.facade.retrieveMediator("HomeMediator");if(null==t||null==t.view||null==t.view.spcailDungeon)return;if(this.mysteryHead=t.view.spcailDungeon.getChildByName("mysteryHead"),null==this.mysteryHead)return;this.mysteryHead.on("click",this,this.onHead)}this.mysteryHead.getChildByName("lbFighting").visible=e&&e.grade>0&&0==e.applyquit;var i=this.mysteryHead.getChildByName("title"),n=this.mysteryHead.getChildByName("txLevel"),o=this.mysteryHead.getChildByName("btnEnter");o.visible=!1;var s=this.mysteryHead.getChildByName("btnCancel"),r=this.mysteryHead.getChildByName("txClock");s.visible=!1,r.visible=!1,Ng.userVO.getValue(1006)<39?(n.text="39级开启",i.color="#e70626",i.text=""):(n.text="",null==e?(i.text="载入数据中...",i.color="#ffffff"):e.hangBegin>0?(i.text="伏魔秘境第"+e.hangGrade+"层",i.color=N.getColor(e.hangGrade),s.visible=!0,r.visible=!0,s.label="结束挂机"):e.grade>0?(i.text="伏魔秘境第"+e.grade+"层",i.color=N.getColor(e.grade),e.applyquit>0?(s.visible=!0,r.visible=!0,s.label="取消切换"):o.visible=!0):0==e.grade&&(i.text="未进入伏魔秘境",i.color="#fffc00",o.visible=!0))},i.listNotificationInterests=function(){return["USER_INIT","CLEAR_CACHE_DATA","USER_LEVEL_CHANGE","ZERO_CLOCK_TRIGER","OPEN_MYSTERY_GATE_VIEW","RECEIVE_PLAYER_MYSTERY","RECEIVE_MYSTERY_MAP","RECEIVE_PLAYER_PEARL"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("MysteryProxy"),i=Ng.userVO.getValue(1006);switch(e.getName()){case"CLEAR_CACHE_DATA":t.clear(),this._pearl=null;break;case"USER_INIT":this.freshHead(null),i>=39&&zc.instance.query(),this.checkAfterDay();break;case"USER_LEVEL_CHANGE":0==t.playerInfo.grade&&i>=39&&zc.instance.query();break;case"RECEIVE_PLAYER_MYSTERY":this.freshHead(e.getBody());break;case"ZERO_CLOCK_TRIGER":i>=39&&zc.instance.query(),this.checkAfterDay();break;case"RECEIVE_MYSTERY_MAP":"enter"==e.getType()&&this.view.close();break;case"OPEN_MYSTERY_GATE_VIEW":"close"==e.getBody()?this.view.close():this._openGate();break;case"RECEIVE_PLAYER_PEARL":this._pearl=e.getBody(),this.checkAfterDay()}},i._openGate=function(){var e=this.facade.retrieveProxy("MysteryProxy"),t=e.playerInfo;if(t.grade>0)e.mysteryMap.grade<=0&&zc.instance.enter(t.grade),this.sendNotification("OPEN_MYSTERY_MAP_VIEW"),t.fighting&&this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,16);else{var i=t.forbiden-g.clock.currentTime;i>0?(i=vo["int"](i/6e4),1>i&&(i=1),this.sendNotification("prompted_info_show",{info:"当前禁入秘境，请"+i+"分钟后再试"})):(null==this._pearl&&Ng.userVO.getValue(1006)>=45&&Fc.instance.query(),this.view.popup())}},i.onHead=function(e){switch(e.target.name){case"btnEnter":this._openGate();break;case"btnCancel":var t=this.facade.retrieveProxy("MysteryProxy"),i=t.playerInfo;i.hangBegin>0?g.clock.currentTime-i.hangBegin>=$t.getHangTimeMax(i.hangAimHour)?zc.instance.stopHang():this.sendNotification("POP_CONFIRM_INFO",{info:"挂机时间未结束，是否确认取消挂机?<br>取消挂机后，将停止挂机，元宝或道具不予返还，奖励按已挂机时间计算。",handler:h.create(this,function(e){e&&zc.instance.stopHang()})}):i.applyquit>0&&this.sendNotification("POP_CONFIRM_INFO",{info:"确认取消切换秘境吗?",handler:h.create(this,function(e){e&&zc.instance.applyQuit(!0)})})}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="MysteryGateMediator",t}(lc),xg=function(e){function t(){this._grad=0,t.__super.call(this,"MysteryHangmediator")}o(t,"modules.mystery.view.MysteryHangmediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new cR),this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onMouse),this.view.list.dataSource=$t.HANG_HOUR_SELECTABLE},i.listNotificationInterests=function(){return["OPEN_MYSTERY_HANG_VIEW","RECEIVE_PLAYER_MYSTERY"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_MYSTERY_HANG_VIEW":this.showSelect(e.getBody());break;case"RECEIVE_PLAYER_MYSTERY":this.showInfo(e.getBody())}},i.showSelect=function(e){this._grad=e,this.view.aimGrad.text="秘境"+e+"层",this.view.aimGrad.color=N.getColor(e),this.view.popup();var t=this.facade.retrieveProxy("MysteryProxy");this.showInfo(t.playerInfo)},i.showInfo=function(e){if(this.view.isPopup){var t=5-e.hangToday;this.view.hasTime.text="今日剩余挂机次数："+t,t>0?this.view.hasTime.color="#00dc24":this.view.hasTime.color="#e70626"}},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("title");n.text="挂机"+i.hour+"小时",n.color=N.getColor(t+1),n=e.getChildByName("drop"),n.text="可打怪"+i.num+"个"},i.onMouse=function(e,t){var i=this;if("click"==e.type&&"btnEnter"==e.target.name){this.view.close();var n=this.facade.retrieveProxy("MysteryProxy"),o=n.playerInfo;if(null==o)return;if(o.hangToday>5)return void this.sendNotification("prompted_info_show",{info:"今日挂机次数已满，请明日再来"});var s=this.facade.retrieveProxy("GoodsProxy");if(!s.packInited)return void this.sendNotification("prompted_info_show",{info:"背包数据未初始，请稍候再试"});var r=s.findOnePropByBaseId(500022),a=this.view.list.getCell(t).dataSource;if(null!=r)this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用一个【傀儡护卫】挂机"+a.hour+"小时吗？<br>在此期间将获得其对应层数的等级装备和腐蚀之精，挂机期间无法手动操作伏魔副本。",handler:h.create(this,function(e){e&&zc.instance.startHang(i._grad,r.id,a.hour)})});else{if(Ng.userVO.getValue(1010)<50)return void this.sendNotification("prompted_info_show",{info:"挂机需要50元宝"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认消耗50元宝秘境挂机"+a.hour+"小时吗？<br>在此期间将获得其对应层数的等级装备和腐蚀之精，挂机期间无法手动操作伏魔副本。",handler:h.create(this,function(e){e&&zc.instance.startHang(i._grad,0,a.hour)})})}}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="MysteryHangmediator",t}(lc),Sg=function(e){function t(){this._bornClock=[],this._delayCount=0,this._headStrs=["ui/head/m1.png","ui/head/m2.png","ui/head/w1.png","ui/head/w2.png"],this._offsetX=0,this._offsetY=0,this._lastMapStr=null,this.autoMoveAim=new Ah,t.__super.call(this,"MysteryMapMediator")}o(t,"modules.mystery.view.MysteryMapMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new hR),this.view.anwser.x=this.view.map.x,this.cleanView();for(var e=[],t=0;t<this.view.map.repeatY;t++)for(var i=0;i<this.view.map.repeatX;i++)e.push({tx:i,ty:t});this.view.map.dataSource=e,this.view.map.renderHandler=new h(this,this.onMapRender),this.view.cArrow.mouseEnabled=!1,this.view.map.mouseEnabled=!0,this.view.map.mouseHandler=new h(this,this.onMapClick),this.view.btnEquip.clickHandler=new h(this,this.onEquip),this.view.btnQuit.clickHandler=new h(this,this.onQuitApply)},n.onEquip=function(){this.sendNotification("OPEN_DEMON_DRESS_PAGE")},n.onQuitApply=function(){this.sendNotification("POP_CONFIRM_INFO",{info:"确认离开当前秘境吗?<br>请求切换后，3分钟后退出当前秘境。",handler:h.create(this,function(e){e&&zc.instance.applyQuit(!1)})})},n.onClock=function(){var e,t,i=this.facade.retrieveProxy("MysteryProxy"),n=i.playerInfo;if(n&&n.hangBegin>0&&(e=this.facade.retrieveMediator("MysteryGateMediator"),e&&e.mysteryHead)){t=e.mysteryHead.getChildByName("txClock");var o=g.clock.currentTime-n.hangBegin,s=(e.mysteryHead.getChildByName("btnCancel"),$t.getHangTimeMax(n.hangAimHour));o>=s?(t.text="挂机"+n.hangAimHour+"小时已结束",e.mysteryHead.label="挂机奖励"):(ao.me.update(s-o),t.text="挂机倒计时："+ao.me.formatStringFullHour,e.mysteryHead.label="取消挂机")}var r=i.mysteryMap;if(r&&0!=r.grade&&0!=i.playerInfo.grade){var a=0;if(r.isOverTime())"正在关闭"!=this.view.clock2.text?(this.view.clock2.text="正在关闭",this._delayCount=0,zc.instance.quit()):(this._delayCount+=1,this._delayCount%10==0&&(this._delayCount=0,zc.instance.quit()));else{if(i.playerInfo.applyquit>0&&(e=this.facade.retrieveMediator("MysteryGateMediator"),e&&e.mysteryHead&&(t=e.mysteryHead.getChildByName("txClock"),a=i.playerInfo.applyquit+$t.APPLY_QUIT_WAIT-g.clock.currentTime,0>a?"切换中"!=t.text&&(t.text="切换中",zc.instance.quit()):(ao.me.update(a),t.text="切换倒计时："+ao.me.formatStringFullHour))),!this.view.isPopup)return;r.hasMonster>=5?this.view.clock1.text="已全部刷新":(a=r.checkTime-g.clock.currentTime+1e3,0>a?"刷新中"!=this.view.clock1.text?(this.view.clock1.text="刷新中",zc.instance.fresh()):(a=vo["int"](-a/1e3),a>=10&&a%10==0&&zc.instance.fresh()):(ao.me.update(a),this.view.clock1.text=ao.me.formatStringFullHour));var l;for(var h in this._bornClock)l=this._bornClock[h],l.text=this.view.clock1.text;a=r.overTime-g.clock.currentTime,1e3>a?this.view.clock2.text="即将结束":(ao.me.update(a),this.view.clock2.text=ao.me.formatStringFullHour)}if(this.view.anwser.visible){a=n.questionCd-g.clock.currentTime,0>a&&(a=0,zc.instance.answer(0),this.view.anwser.visible=!1),ao.me.update(a);var c=this.view.answerPop.getChildByName("clock3");c.text=ao.me.formatStringFullHour}}},n.cleanView=function(){this.view.lbTitle.text="",this.view.lbHas.text="",this.view.lbKilled.text="",this.view.map.visible=!1,this.view.btnDown.visible=!1,this.view.btnUp.visible=!1,this.view.btnLeft.visible=!1,this.view.btnRight.visible=!1,this.view.anwser.visible=!1,this._bornClock.length=0},n.listNotificationInterests=function(){return["USER_INIT","CLEAR_CACHE_DATA","OPEN_MYSTERY_MAP_VIEW","RECEIVE_PLAYER_MYSTERY","RECEIVE_MYSTERY_MAP","RECEIVE_FIGHT_CONTEXT_OTHER"]},n.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":i.timer.clear(this,this.onClock);break;case"USER_INIT":this.view.map.visible=!1,this.view.anwser.visible=!1,this.view.close(),i.timer.loop(1e3,this,this.onClock);break;case"OPEN_MYSTERY_MAP_VIEW":"close"==e.getBody()?this.view.close():this.view.popup();break;case"RECEIVE_MYSTERY_MAP":"enter"==e.getType()&&this.view.popup();case"RECEIVE_PLAYER_MYSTERY":i.timer.callLater(this,this.fresh);break;case"RECEIVE_FIGHT_CONTEXT_OTHER":this.view.isPopup&&16==e.getType()&&(this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,16),this.offAutoMove())}},n.fresh=function(){var e=this.facade.retrieveProxy("MysteryProxy");e.playerInfo.grade<=0?(this.view.clock1.text="",this.view.clock2.text="",this.view.close()):e.playerInfo.grade>0&&e.playerInfo.grade==e.mysteryMap.grade&&this.freshPlayer(e.mysteryMap,e.playerInfo)},n.onMapRender=function(e,t,i){void 0===i&&(i=!1);var n=e.dataSource;if(n){var o=this.facade.retrieveProxy("MysteryProxy"),s=o.mysteryMap;if(s&&0!=s.grade){var r=o.playerInfo;if(r&&0!=r.grade){var a=n.ty-this._offsetY,l=n.tx-this._offsetX,h=e.getChildByName("bg");if(0==l||17==l||0==a||31==a?h.alpha=.3:h.alpha=1,i||l==r.x&&a==r.y){this.view.showHead(r);return e.addChild(this.view.head),void this.view.cArrow.pos(this.view.map.x+e.x+e.width/2,this.view.map.y+e.y+e.height/2)}var c=s.getP(l,a);if(9==c){var u=this.view.getEmptyMontain();e.addChild(u)}else if(0==c);else if(c>0&&6>c){var d=this.view.getEmptyMonster();e.addChild(d);var p=this.view.getEmptyNature();p.index=c-1,e.addChild(p)}else if(8==c);else if(7==c);else if(10==c){var f=this.view.getBornMonster();e.addChild(f);var _=f.getChildByName("clock");_.text=this.view.clock1.text,this._bornClock.push(_)}else if(-c!=Ng.userVO.unitId.id){var m=this.view.getEmptyPlayer();m.skin=this._headStrs[-c%4],e.addChild(m)}}}}},n.freshPlayer=function(e,t){if(this.view.lbNtc.text="(击杀掉落伏魔装备"+$t.getDropLevel(e.grade)+"级)",this.view.lbTitle.text="伏魔秘境第"+t.grade+"层",this.view.lbTitle.color=N.getColor(t.grade),this.view.lbHas.text="剩余魔物："+e.hasMonster+"只",this.view.lbKilled.text="今日已击杀魔物："+t.todayBossTime+"/50只",this.view.head.getChildByName("fight").visible=t.fighting,t.questionCd>0){var i=this.view.answerPop.getChildByName("questionImg"),n=this.view.answerPop.getChildByName("question");if(n.text=t.question,n.scaleX=.9,i.visible=!0,n.visible=!0,0==this.view.anwser.visible){var o=new eS(i.width,i.height);o.drawOval(2,n.color),o.drawLine(1,n.color),o.randLetter(),o.alpha=.5,i.removeChildren(),i.addChild(o),this.view.map.visible=!1,this.view.cArrow.visible=!1,this.view.anwser.visible=!0,this.view.randomAnswerPos(),this.view.answerPop.on("click",this,this.onAnwser),this.offAutoMove()}}else this.view.map.visible=!0,this.view.cArrow.visible=!0,this.view.anwser.visible=!1,this.view.answerPop.off("click",this,this.onAnwser);this.onClock();var s=this.view.map.repeatX>>1,r=this.view.map.repeatY>>1,a=s-1-t.x,l=r-1-t.y;if(a>0)a=0;else if(0>a){var h=this.view.map.repeatX-18;h>a&&(a=h)}if(l>0)l=0;else if(0>l){var c=this.view.map.repeatY-32;c>l&&(l=c)}if(this._lastMapStr!=e.mapStr||a!=this._offsetX||l!=this._offsetY)this._lastMapStr=e.mapStr,this._offsetX=a,this._offsetY=l,this.view.clearMap(),this.view.map.refresh();else{var u=(t.y+this._offsetY)*this.view.map.repeatX+t.x+this._offsetX,d=this.view.map.getCell(u);this.onMapRender(d,u,!0)}this.view.btnDown.visible=!0,this.view.btnUp.visible=!0,this.view.btnLeft.visible=!0,this.view.btnRight.visible=!0;var p=0;t.x>0?(p=e.getP(t.x-1,t.y),9==p?this.view.btnLeft.visible=!1:0!=p?this.view.btnLeft.alpha=0:this.view.btnLeft.alpha=1):this.view.btnLeft.visible=!1,t.x<17?(p=e.getP(t.x+1,t.y),9==p?this.view.btnRight.visible=!1:0!=p?this.view.btnRight.alpha=0:this.view.btnRight.alpha=1):this.view.btnRight.visible=!1,t.y>0?(p=e.getP(t.x,t.y-1),9==p?this.view.btnUp.visible=!1:0!=p?this.view.btnUp.alpha=0:this.view.btnUp.alpha=1):this.view.btnUp.visible=!1,t.y<31?(p=e.getP(t.x,t.y+1),9==p?this.view.btnDown.visible=!1:0!=p?this.view.btnDown.alpha=0:this.view.btnDown.alpha=1):this.view.btnDown.visible=!1},n.onAnwser=function(e){if("btnSure"==e.target.name){var t=this.view.answerPop.getChildByName("anwser"),i=t.text;if(null==i||""==i)return void this.sendNotification("prompted_info_show",{info:"答案不可为空"});var n=vo["int"](i);if(isNaN(n))return void this.sendNotification("prompted_info_show",{info:"请输入正确格式的数字"});zc.instance.answer(n),t.text=""}},n.onMapClick=function(e,t){var n,o=this;if("click"==e.type){if(n=this.view.map.getCell(t).dataSource,!n)return;var s=this.facade.retrieveProxy("MysteryProxy"),r=s.mysteryMap;if(!r||0==r.grade)return;var a=s.playerInfo;if(!a||0==a.grade)return;if(a.fighting)return void this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,16);var l=n.ty-this._offsetY,h=n.tx-this._offsetX;if(h==a.x&&l==a.y)return;var c=r.getP(h,l);if(0>c)this.fightPlayer(-c);else{if(1!=this.view.cArrow.alpha)return;if(a.x==h&&1==Math.abs(a.y-l)||a.y==l&&1==Math.abs(a.x-h)){if(9==c||10==c)return;if(c>0&&6>c)zc.instance.fightMonster(h,l);else if(0>c)this.fightPlayer(-c);else{if(0!=c)return void console.log("samsara move erro point2:"+h,",",l);zc.instance.move(h,l)}this.view.cArrow.alpha=.5,i.timer.once(800,this,function(){o.view.cArrow.alpha=1})}}}else{var u=this.view.map.getCell(t);if("mousedown"==e.type){if(n=u.dataSource,!n)return;this.autoMoveAim.x=n.tx,this.autoMoveAim.y=n.ty,this.autoMove(),i.timer.loop(900,this,this.autoMove),u.addChild(this.view.autoAimBg)}else"mouseup"==e.type&&this.offAutoMove()}},n.offAutoMove=function(){i.timer.clear(this,this.autoMove),this.view.autoAimBg.removeSelf()},n.autoMove=function(){var e=this;if(1==this.view.cArrow.alpha){var t=this.facade.retrieveProxy("MysteryProxy"),n=t.mysteryMap;if(n&&0!=n.grade){var o=t.playerInfo;if(o&&0!=o.grade){var s=this.autoMoveAim.x-this._offsetX-o.x,r=this.autoMoveAim.y-this._offsetY-o.y,a=Math.abs(s),l=Math.abs(r);if(0>a&&(a=0),0>l&&(l=0),0>=a&&0>=l)return void i.timer.clear(this,this.autoMove);if(o.fighting)return void i.timer.clear(this,this.autoMove);var h=0,c=0,u=0;a>l&&a>0?(h=o.x+(s>0?1:-1),c=o.y,u=n.getP(h,c),0!=u&&l>0&&(h=o.x,c=o.y+(r>0?1:-1))):l>0&&(h=o.x,c=o.y+(r>0?1:-1),u=n.getP(h,c),0!=u&&a>0&&(h=o.x+(s>0?1:-1),c=o.y)),u=n.getP(h,c),0==u&&(zc.instance.move(h,c),this.view.cArrow.alpha=.5,i.timer.once(800,this,function(){e.view.cArrow.alpha=1}))}}}},n.fightPlayer=function(e){this.sendNotification("POP_CONFIRM_INFO",{info:"是否确认攻击，战败方将被打回出生点?",handler:h.create(this,function(t){t&&zc.instance.fightPlayer(e)})})},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="MysteryMapMediator",t}(lc),wg=function(e){function t(){t.__super.call(this)}o(t,"modules.user.controller.UserPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(oi.USER_BINDING_NEW_SESSION,Ag,!0),this.facade.registerCommand(oi.USER_CHANGE_NATURE,Tg,!0),this.facade.registerCommand(oi.USER_PUSH_NOTICE_2_KICK,Ig),this.facade.registerCommand(oi.USER_PUSH_NOTICE_2_KICK_NO_REPEAT,Ig),this.facade.registerCommand(oi.USER_PUSH_PLAYER_ATTRIBUTE,Cg)},t}(rc),Cg=function(e){function t(){t.__super.call(this)}o(t,"modules.user.controller.commands.HeroAttributeCommand",e);var i=t.prototype;return i.execute=function(e){var i=e.getBody(),n=v.protoCodec.getResponseDecoder().decode("ParamKeyValue",i.value),o=n.keys,s=n.values;t.dic_chg.clear();var r=null,a=Ng.userVO.getValue(1006),l=this.facade.retrieveProxy("UserProxy");if(1==o.length)switch(o[0]){case 1009:case 1010:case 1007:r=l.update(o,s);break;default:console.log("----:"+o[0])}null==r&&(r=l.updateWrapChg(o,s,t.dic_chg));var h=!1;if(-1!=o.indexOf(1006)?(this.sendNotification("USER_LEVEL_CHANGE"),k.reportData("levelup",Ng.userVO),h=!0):(-1==o.indexOf(1007)&&-1==o.indexOf(1008)||(this.sendNotification("USER_EXP_CHANGE"),h=!0),-1==o.indexOf(1100)&&-1==o.indexOf(1101)||(this.sendNotification("USER_HP_MP_FRESH"),h=!0)),-1==o.indexOf(1009)&&-1==o.indexOf(1010)||(this.sendNotification("USER_CURRENCY_CHANGE"),h=!0),-1!=o.indexOf(1019)&&(this.sendNotification("USER_CURRENCY_CHANGE",null,"jade"),h=!0),-1!=o.indexOf(19002)&&(this.sendNotification("USER_HANGDUNGEON_CHANGE"),h=!0),-1!=o.indexOf(1004)&&(this.sendNotification("USER_NATURE_CHANGE"),h=!0),-1!=o.indexOf(1012)&&(this.sendNotification("USER_BOX_SIZE_CHANGE"),h=!0),-1!=o.indexOf(1013)&&(this.sendNotification("USER_LAST_SHARE_TIME_CHANGE"),h=!0),-1==o.indexOf(7002)&&-1==o.indexOf(7004)||(this.sendNotification("USER_VIP_ARENA_MINE_TIME_CHANGE"),h=!0),-1!=o.indexOf(7003)&&(this.sendNotification("USER_VIP_STAR_FAIL_RETURN"),h=!0),-1!=o.indexOf(19003)&&(this.sendNotification("USER_LOCK_FIGHT_BOSS_TIME"),h=!0),-1!=o.indexOf(7006)&&(this.sendNotification("USER_DRESSED_TITLE_CHANGE"),h=!0),-1!=o.indexOf(1017)&&(this.sendNotification("USER_INDULGE_CHANGE"),h=!0),-1!=o.indexOf(7007)&&this.sendNotification("USER_TEAM_CHANGE"),-1==o.indexOf(7010)&&-1==o.indexOf(7009)||(this.sendNotification("USER_LOOK_VIDEO_CARD_CHANGE"),h=!0),-1!=o.indexOf(7011)){var c=this.facade.retrieveProxy("AllianceProxy");c&&c.playerAlliance&&(c.playerAlliance.allianceId=r.getValue(7011),c.playerAlliance.skillLevel=r.getValue(7014)),this.sendNotification("USER_ALLIANCE_CHANGE"),h=!0}if(-1!=o.indexOf(1002)&&this.sendNotification("USER_NAME_CHANGE",r),-1!=o.indexOf(1021)&&(this.sendNotification("USER_DOUBLE_PAY_TIME_CHG",r),h=!0),-1!=o.indexOf(1023)&&(this.sendNotification("USER_PET_FOOD_CHANGE",r),h=!0),-1!=o.indexOf(7020)&&(this.sendNotification("USER_MAX_PASSDUNGEON_CHG",r),h=!0),-1!=o.indexOf(7021)&&(this.sendNotification("USER_OFFLINE_OPEN_BOX_CHG",r),h=!0),-1!=o.indexOf(7022)&&(this.sendNotification("USER_TRIBLE_END_TIME_CHG",r),h=!0),0==h&&this.sendNotification("USER_OTHER_ATTRIBUTE_CHANGE",r),t.dic_chg.keys.length>0){if(-1!=o.indexOf(1004))return;var u="";-1!=o.indexOf(1006)&&a<Ng.userVO.getValue(1006)&&(u="恭喜您角色升级\n");var d;for(var p in t.dic_chg.keys){d=t.dic_chg.keys[p];var f=t.dic_chg.get(d);0!=f&&(u+=I.getName(d),u+=I.getValueStr(d,f,!0),u+="\n")}this.sendNotification("prompted_info_show",{info:u})}},n(t,["dic_chg",function(){return this.dic_chg=new uo}]),t}(rc),Tg=function(e){function t(){t.__super.call(this)}o(t,"modules.user.controller.commands.ChangeNatureCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success&&(op.miniRegisterStep(20),this.sendNotification("SHOW_HOME_PAGE",!0),T.IS_ON_MINI&&null!=G.mycode&&""!=G.mycode&&Xc.instance.bind(G.mycode))},t}(rc),Ig=function(e){function t(){t.__super.call(this)}o(t,"modules.user.controller.commands.BeKickCommond",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(Ts.removeItem("_sever_selectd"),X.BE_KICKED_OFF=!0,t.cmd){case 100:this.sendNotification("prompted_info_show",{info:"您已离线,正在断开连接..."}),X.gameReload(!0);break;case 101:this.sendNotification("prompted_info_show",{info:"您的角色已在其他地方登录,正在断开连接..."})}},t}(rc),Ag=function(e){function t(){t.__super.call(this)}o(t,"modules.user.controller.commands.BindingNewSessionCommand",e);var n=t.prototype;return n.execute=function(e){var t=this,n=e.getBody();if(0==n.status){var o=v.protoCodec.getResponseDecoder().decode("BindSession",n.value);g.clock.syncServerTime(o.timestamp);var s=this.facade.retrieveProxy("UserProxy"),r=o.playerAtt,a=s.receive(r.keys,r.values);if(null==v.account&&(v.account=a.getValue(1016)),0!=Ng.gameRunningTime&&Ng.gameRunningTime<a.getValue(1024))return Ng.gameRunningTime=a.getValue(1024),void this.sendNotification("POP_ALERT_INFO",{info:"版本已更新，即将重新载入游戏"},"timelimit");Ng.gameRunningTime=a.getValue(1024),0==a.getValue(1004)&&(this.facade.hasMediator("SelectWuxingMediator")||this.facade.registerMediator(new Vg),this.sendNotification("SELECT_WUXING_VIEW"),this.sendNotification("SHOW_HOME_PAGE",!1)),i.timer.once(100,this,function(){var e=t.facade.retrieveProxy("SocketProxy");e.openPool(!0),t.sendNotification("USER_INIT",a),e.openPool(!1)}),this.sendNotification("binding_new_session_success"),op.onSetLevel(a.getValue(1006),a.unitId.id),Yc.instance.bindPlatform(),D.instance.onLogin(),k.reportData("login",Ng.userVO)}else if(-10==n.status)"SELF"==X.PLATE_FORM||"IOS"==X.PLATE_FORM||"P01"==X.PLATE_FORM?this.sendNotification("RESPONSE_ERROR","<font color='#e70626'>您的帐号当前禁止登录</font><br>如有疑问，联系客服QQ号：153530013"):this.sendNotification("RESPONSE_ERROR","<font color='#e70626'>帐号禁止登录,请联系管理员</font>");else{var l=ri.getLoginErrorInfo(n.status);this.sendNotification("RESPONSE_ERROR","登录异常:"+l+",请联系管理员"),as.debug(this,"execute",l)}},t}(rc),Ng=function(e){function t(){t.__super.call(this,"UserProxy"),t._userVO=new $c,this.setData(t._userVO)}o(t,"modules.user.model.UserProxy",e);var i=t.prototype;return i.reset=function(){t._userVO.clear()},i.login=function(e,i){return v.playerId=e,v.serialNum=i,t._userVO.unitId.id=e,this.vo},i.receive=function(e,t){return this.reset(),this.update(e,t),this.vo},i.update=function(e,t){for(var i=0;i<e.length;i++){var n=e[i],o=t[i];this.vo.setValue(e[i],o),1106==n&&this.vo.setValue(1100,o),1107==n&&this.vo.setValue(1101,o),si.updateAndCheck(this.vo,n,o)}return this.vo},i.updateWrapChg=function(e,t,i){for(var n=0;n<e.length;n++){var o=e[n],s=t[n],r=this.vo.getValue(o);this.vo.setValue(e[n],s),1106==o&&this.vo.setValue(1100,s),1107==o&&this.vo.setValue(1101,s),si.updateAndCheck(this.vo,o,s);var a=this.vo.getValue(o);a!=r&&-1!=I.ROLE_ATTRIBUTE_SHOW.indexOf(o)&&i.set(o,a-r)}return this.vo},s(0,i,"vo",function(){return this.data}),s(1,t,"userVO",function(){return t._userVO},org.puremvc.as3.patterns.proxy.Proxy._$SET_userVO),t.NAME="UserProxy",t._userVO=null,t.gameRunningTime=0,t}(sc),Pg=function(e){function t(){this._top10=null,this._logView=null,this._btnEnter=null,t.__super.call(this,"LadderMediator")}o(t,"modules.ladder.view.LadderMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new fR),this.reset(),this.view.ranks.renderHandler=new h(this,this.onRender),this.view.ranks.mouseEnabled=!0,this.view.ranks.mouseHandler=new h(this,this.onClick),this._top10=new dR,this._top10.ranks.renderHandler=new h(this,this.onRender),this._top10.ranks.mouseEnabled=!0,this._top10.ranks.mouseHandler=new h(this,this.onClickTop),this.view.on("click",this,this.onClickPage),this._logView=new pR},i.reset=function(){var e=this.facade.retrieveMediator("HomeMediator");if(e){var t=e.view.spcailDungeon.getChildByName("ladderHead"),i=t.getChildByName("times");Ng.userVO.getValue(1006)<30?(i.text="30级开启",i.color="#e70626"):(i.text="努力加载中…",i.color="#ffffff"),this._btnEnter=t.getChildByName("btnEnter"),this._btnEnter.visible=!1}},i.listNotificationInterests=function(){return["OPEN_LADDER_VIEW","RECEIVE_PLAYER_LADDER","RECEIVE_AROUND_LADDER","RECEIVE_LADDER_TOP10","USER_INIT","ZERO_CLOCK_TRIGER"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":this.getViewComponent(),this.reset();break;case"OPEN_LADDER_VIEW":if(0==this.btnEnter.visible)return;this.view.popup(),this.onFresh();break;case"RECEIVE_PLAYER_LADDER":this.showInfo(e.getBody());break;case"RECEIVE_AROUND_LADDER":this.showAround(e.getBody());break;case"RECEIVE_LADDER_TOP10":this.showTop10(e.getBody());break;case"ZERO_CLOCK_TRIGER":Ng.userVO.getValue(1006)>=30&&Wc.instance.query()}},i.showTop10=function(e){this.top10.ranks.dataSource=e,this.view.isPopup&&this.top10.popup()},i.onFresh=function(){this.view.isPopup&&Wc.instance.listAround()},i.showAround=function(e){this.view.ranks.dataSource=e.players,this.logView.logs.dataSource=e.logs,this.logView.lbEmpty.visible=e.logs.length<=0},i.showInfo=function(e){var t=Ng.userVO.getValue(1006);if(30>t)return void this.reset();this.btnEnter&&(this.btnEnter.visible=!0),e.fightTimes<=0?(this.view.timesLeft.text=e.fightTimes+"(零点重置）",this.view.timesLeft.color="#fffc00"):(this.view.timesLeft.text=e.fightTimes+"",this.view.timesLeft.color="#00dc24");var i=Math.abs(e.rankTmp);e.rankTmp>0?this.view.lbRankAwd.text="排名可获得奖励(第"+i+"名)":this.view.lbRankAwd.text="排名可获得奖励",e.rankTmp<=0&&(i=e.rank);var n=0,o=0,s=0;if(0>=i?(n=0,o=0,s=0):1==i?(n=vo["int"](t*t*2e4/9),o=15,s=50):5>=i?(n=vo["int"](t*t*2e3*9/9),o=12,s=45):10>=i?(n=vo["int"](t*t*2e3*8/9),o=10,s=40):30>=i?(n=vo["int"](t*t*2e3*7/9),o=8,s=35):100>=i?(n=vo["int"](t*t*2e3*6/9),o=6,s=30):200>=i?(n=vo["int"](t*t*2e3*5/9),o=4,s=25):500>=i?(n=vo["int"](t*t*2e3*4/9),o=3,s=20):1e3>=i?(n=vo["int"](t*t*2e3*3/9),o=2,s=15):(n=vo["int"](t*t*2e3*2/9),o=1,s=10),0>=n?(this.view.txtSilver.text="",this.view.txtAward1.text="",this.view.txtAward2.text=""):(this.view.txtSilver.text=n+"铜币",this.view.txtAward1.text="天籁石碎片*"+s,this.view.txtAward2.text="天籁石碎片*"+o),e.rankTmp<=0){var r=ro.newDate(),a=!1;ro.isToday(r)&&r.getHours()>=22&&r.getMinutes()>0&&(a=!0),a?(this.view.btnAward.visible=!1,this.view.lbAwarded.visible=!0):(this.view.lbRankAwd.text="22点计算排名可获得奖励",this.view.btnAward.visible=!1,this.view.lbAwarded.visible=!1)}else this.view.btnAward.visible=!0,this.view.lbAwarded.visible=!1;var l=this.facade.retrieveMediator("HomeMediator");if(l){var h=l.view.spcailDungeon.getChildByName("ladderHead"),c=h.getChildByName("times");c.text="今日剩余挑战次数："+e.fightTimes,e.fightTimes>0?c.color="#00dc24":c.color="#fffc00"}},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("rank");switch(n.text=i.rank+"",i.rank){case 1:n.color="#c527ff";break;case 2:n.color="#e70626";break;case 3:n.color="#fffc00";break;default:n.color="#ffffff"}n=e.getChildByName("name"),n.text=i.name;var o=e.getChildByName("btnFight");Ng.userVO.unitId.id==i.playerId?(n.color="#00dc24",o&&(o.visible=!1)):i.playerId>0?(n.color="#f19e21",o&&(o.visible=!0)):(n.color="#0084ff",o&&(o.visible=!0));var s=n.x+n.width,r=e.getChildByName("nature");r.index=i.nature-1,r.x=s,s+=r.width,n=e.getChildByName("level"),n.text=i.level+"级",n.x=s,s+=n.width,n=e.getChildByName("alcName"),n&&(n.x=s,i.alcLv>0?(n.text="【"+i.alcName+"】"+i.alcLv+"级",n.color=Lt.getAlcColor(i.alcLv)):n.text="")},i.onClickTop=function(e,t){var i=this.top10.ranks.getCell(t).dataSource;this._onClickTmp(i,e)},i.onClick=function(e,t){var i=this.view.ranks.getCell(t).dataSource;this._onClickTmp(i,e)},i._onClickTmp=function(e,t){var i=this;if("click"===t.type&&e)if(null!=t.target&&"btnFight"==t.target.name){if(ni.isRankTime())return void this.sendNotification("prompted_info_show",{info:"正在计算排名和奖励，请稍后再试。"});var n=this.facade.retrieveProxy("LadderProxy");if(null==n.vo)return;n.vo.fightTimes<=0?20<=Ng.userVO.getValue(1010)?this.sendNotification("POP_CONFIRM_INFO",{info:"今日次数已用完，<font color='#e70626'>挑战需要20元宝 </font>，是否确定",handler:h.create(this,function(t){t&&(Wc.instance.fight(e.playerId),i.top10.close(),k.goldenCost("挑战竞技场",1,20))})}):this.sendNotification("prompted_info_show",{info:"今日次数已用完，挑战需要20元宝。"}):(Wc.instance.fight(e.playerId),this.top10.close())}else e.playerId==Ng.userVO.unitId.id?this.sendNotification("ROLE_VIEW"):e.playerId>0&&this.sendNotification("SHOW_LOOK_PAGE",{playerId:e.playerId,name:e.name,nature:e.nature,level:e.level})},i.onClickPage=function(e){switch(e.target.name){case"btnLog":this.logView.popup();break;case"btnFresh":Wc.instance.listAround();break;case"btnTop10":Wc.instance.listTop10();break;case"btnAward":if(ni.isRankTime())return void this.sendNotification("prompted_info_show",{info:"正在计算排名和奖励，请稍后再试。"});var t=this.facade.retrieveProxy("LadderProxy");t.vo&&Wc.instance.takeAward(t.vo.rankTmp);break;
case"btnShop":this.sendNotification("SHOW_TOWER_SHOP_PAGE")}},s(0,i,"top10",function(){return this.getViewComponent(),this._top10}),s(0,i,"logView",function(){return this.getViewComponent(),this._logView}),s(0,i,"btnEnter",function(){return this.getViewComponent(),this._btnEnter}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="LadderMediator",t}(lc),Rg=function(e){function t(){t.__super.call(this)}o(t,"modules.dungeondaily.controller.DungeonDailyPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(ai.DUNGEON_DAILY_QUERY,Lg),this.facade.registerCommand(ai.DUNGEON_DAILY_FIGHT,Lg,!0)},t}(rc),Lg=function(e){function t(){t.__super.call(this)}o(t,"modules.dungeondaily.controller.commands.DungeonDailyCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 2:this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,18);case 1:var i=this.facade.retrieveProxy("PlayerDungeonDailyProxy"),n=v.protoCodec.getResponseDecoder().decode("PlayerDungeonDaily",t.value),o=i.receive(n);this.sendNotification("RECEIVE_DUNGEON_DAILY_INFO",o)}},t}(rc),Og=function(e){function t(){t.__super.call(this,"PlayerDungeonDailyProxy")}o(t,"modules.dungeondaily.model.PlayerDungeonDailyProxy",e);var i=t.prototype;return i.receive=function(e){return this.data=e,this.data},i.canFight=function(){return this.info&&this.info.winTimes<this.winMax()},i.hasFreeTime=function(){return this.info&&this.info.fightTimes<this.tryMax()},i.winMax=function(){var e=this.facade.retrieveProxy("VipExtProxy");return e.vipExt&&e.vipExt.isEffecting?2:1},i.tryMax=function(){var e=this.facade.retrieveProxy("VipExtProxy");return e.vipExt&&e.vipExt.isEffecting?10:5},s(0,i,"info",function(){return this.data}),t.NAME="PlayerDungeonDailyProxy",t}(sc),Mg=function(e){function t(){this._userVO=null,this.freshAble=!1,this._confirmChgNature=null,t.__super.call(this,"RoleMediator")}o(t,"modules.user.view.RoleMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this;this.setViewComponent(new EN),this.view.ntc.clickHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",1)}),this.view.chgNature.clickHandler=new h(this,this.onChangeNature),this._confirmChgNature=new yR,this._confirmChgNature.btnSure.clickHandler=new h(this,this.onSureChgNature)},i.listNotificationInterests=function(){return["USER_INIT","USER_OTHER_ATTRIBUTE_CHANGE","USER_HP_MP_FRESH","USER_CURRENCY_CHANGE","USER_EXP_CHANGE","USER_LEVEL_CHANGE","USER_NATURE_CHANGE","USER_NAME_CHANGE","USER_ALLIANCE_CHANGE","PUSH_ALC_ALLIANCE_CHANGED","FRESH_GOODS_PACK"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":case"USER_OTHER_ATTRIBUTE_CHANGE":case"USER_NAME_CHANGE":this.view.showInfo(e.getBody());break;case"USER_EXP_CHANGE":this.view.freshExp();break;case"USER_LEVEL_CHANGE":this.view.freshLevel();break;case"USER_CURRENCY_CHANGE":this.view.freshCurrency();break;case"FRESH_GOODS_PACK":var t=e.getBody();t.contain(2)&&(this.freshAble=!0),this.fresh();break;case"USER_NATURE_CHANGE":this.view.changeNature(Ng.userVO);break;case"USER_ALLIANCE_CHANGE":case"PUSH_ALC_ALLIANCE_CHANGED":this.view.changeAlliance(Ng.userVO)}},i.fresh=function(){this.freshAble&&this.view.visible&&(this.view.freshAttribute(),this.freshAble=!1)},i.onChangeNature=function(){var e=Ng.userVO.getValue(1026);if(e%1e3>100&&bu.instance.takePlayerNatureExtAwd(),e%10>0)this.confirmChgNature.popInfo(Ng.userVO,null);else{var t=this.facade.retrieveProxy("GoodsProxy"),i=t.findOnePropByBaseId(500008);this.confirmChgNature.popInfo(Ng.userVO,i)}},i.onSureChgNature=function(){var e=this.confirmChgNature.aimNature.selectedIndex;if(0>=e)return void this.sendNotification("prompted_info_show",{info:"请选择要转换的五行"});var t=Ng.userVO.getValue(1004);if(t==e)return void this.sendNotification("prompted_info_show",{info:"选择转换的五行不能与现有五行相同"});if(this.confirmChgNature.doubleSure.text!="转成"+R.getName(e))return void this.sendNotification("prompted_info_show",{info:this.confirmChgNature.doubleSure.prompt});var i=Ng.userVO.getValue(1026);if(i%10>0)return this.soureChg(0,e,!0),void this.confirmChgNature.close();var n=Ng.userVO.getValue(1006),o=Ng.userVO.getValue(1022);if(0==o&&50>=n){var s=g.clock.todayZero,r=Ng.userVO.getValue(19001),a=ro.dateDiff(s,ro.newDate(r));if(30>=a)return this.soureChg(0,e,!1),void this.confirmChgNature.close()}return this.confirmChgNature.drug?(this.soureChg(this.confirmChgNature.drug.id,e,!1),void this.confirmChgNature.close()):void this.sendNotification("prompted_info_show",{info:"需要消耗的物品不足"})},i.soureChg=function(e,t,i){var n=this;this.sendNotification("POP_CONFIRM_INFO",{info:"再次确认您要转换五行为<font color='"+R.getColor(t)+"'>"+R.getName(t)+"</font>吗？",handler:h.create(this,function(o){o&&(i?bu.instance.changePlayerNatureExt(t):bu.instance.changePlayerNature(e,t),n.confirmChgNature.close())})})},s(0,i,"confirmChgNature",function(){return this.getViewComponent(),this._confirmChgNature}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="RoleMediator",t}(lc),Dg=function(e){function t(){t.__super.call(this)}o(t,"modules.blood.controller.BloodPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(li.BLOOD_QUERY,Bg),this.facade.registerCommand(li.BLOOD_OPEN_GRAD,Hg,!0),this.facade.registerCommand(li.BLOOD_BUILD_BLOOD,kg,!0),this.facade.registerCommand(li.BLOOD_UPGRADE_LEVEL,Ug,!0),this.facade.registerCommand(li.BLOOD_UPGRADE_LEVEL_AUTO,Ug,!0),this.facade.registerCommand(li.BLOOD_UPGRADE_QUALITY,Gg,!0),this.facade.registerCommand(li.BLOOD_UPGRADE_QUALITY_BY_STONE,Gg,!0),this.facade.registerCommand(li.BLOOD_UPGRADE_QUALITY_ORANGE,Gg,!0),this.facade.registerCommand(li.BLOOD_UPGRADE_ORANGE_ATTR_LEVEL,Gg,!0),this.facade.registerCommand(li.BLOOD_MOVE_ORANGE_ATTR_LEVEL,Gg,!0),this.facade.registerCommand(li.BLOOD_DRESS,Wg,!0),this.facade.registerCommand(li.BLOOD_TAKE_OFF,Wg,!0),this.facade.registerCommand(li.BLOOD_PUSH_PIECES,Fg)},t}(rc),kg=function(e){function t(){t.__super.call(this)}o(t,"modules.blood.controller.controller.BloodBuildCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerBlood",t.value),n=this.facade.retrieveProxy("BloodProxy"),o=n.receive(i);this.sendNotification("RECEIVE_BLOOD_INFO",o)}},t}(rc),Bg=function(e){function t(){t.__super.call(this)}o(t,"modules.blood.controller.controller.BloodQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerBlood",t.value),n=this.facade.retrieveProxy("BloodProxy"),o=n.receive(i);this.sendNotification("RECEIVE_BLOOD_INFO",o)}},t}(rc),Vg=function(e){function t(){t.__super.call(this,"SelectWuxingMediator")}o(t,"modules.user.view.SelectWuxingMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new xN)},n.listNotificationInterests=function(){return["SELECT_WUXING_VIEW","SHOW_HOME_PAGE"]},n.handleNotification=function(e){switch(e.getName()){case"SELECT_WUXING_VIEW":this.view.parent||(i.stage.addChild(this.view),this.view.onLoop(),op.miniRegisterStep(19));break;case"SHOW_HOME_PAGE":e.getBody()&&(this.view.removeSelf(),this.view.offLoop())}},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="SelectWuxingMediator",t}(lc),Fg=function(e){function t(){t.__super.call(this)}o(t,"modules.blood.controller.controller.BloodPushPiecesCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeLong(t.value).toNumber(!1),n=this.facade.retrieveProxy("BloodProxy"),o=n.playerBlood;if(!o)return;var s=i-o.bloodPiece;o.bloodPiece=i,this.sendNotification("RECEIVE_BLOOD_PIECE_CHANGE",o),s>0&&this.sendNotification("prompted_info_show",{info:"获得"+s+"远古血脉"})}},t}(rc),Gg=function(e){function t(){t.__super.call(this)}o(t,"modules.blood.controller.controller.BloodUpgradeQualityCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemGoods",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.getItemById(i.id,0);if(o){switch(o.updateBaseIdAndQuality(i.baseId,i.quality),t.cmd){case 10:this.sendNotification("prompted_info_show",{info:"进阶成功，血脉进阶为真龙血脉"});break;case 11:this.sendNotification("prompted_info_show",{info:"培养成功，真龙血脉属性提升"});break;case 12:this.sendNotification("prompted_info_show",{info:"重铸成功，真龙血脉属性等级变更"});break;default:this.sendNotification("prompted_info_show",{info:"升品成功，血脉品质提升"})}2==o.backpack&&this.sendNotification("UPGRADE_BLOOD_Q_SUCCESS")}}},t}(rc),Hg=function(e){function t(){t.__super.call(this)}o(t,"modules.blood.controller.controller.BloodOpenCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerBlood",t.value),n=this.facade.retrieveProxy("BloodProxy"),o=n.receive(i);this.sendNotification("RECEIVE_BLOOD_INFO",o)}},t}(rc),Ug=function(e){function t(){t.__super.call(this)}o(t,"modules.blood.controller.controller.BloodLevelUpCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n,o=this.facade.retrieveProxy("BloodProxy");switch(t.cmd){case 3:i=v.protoCodec.getResponseDecoder().decode("PlayerBlood",t.value),n=o.receive(i);break;case 9:i=v.protoCodec.getResponseDecoder().decode("BloodAutoLevelUpVO",t.value),n=o.receive(i.blood),this.sendNotification("prompted_info_show",{info:"一键熔炼结束，总共熔炼"+Math.abs(i.count)+"次"})}this.sendNotification("RECEIVE_BLOOD_INFO",n)}},t}(rc),zg=function(e){function t(){t.__super.call(this,"BloodProxy")}o(t,"modules.blood.model.BloodProxy",e);var i=t.prototype;return i.receive=function(e){return null==this.data&&(this.data=new ci),this.playerBlood.update(e),this.playerBlood},s(0,i,"playerBlood",function(){return this.data}),t.NAME="BloodProxy",t}(sc),Wg=function(e){function t(){t.__super.call(this)}o(t,"modules.blood.controller.controller.BloodDressCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerBlood",t.value),n=this.facade.retrieveProxy("BloodProxy"),o=n.receive(i);this.sendNotification("RECEIVE_BLOOD_INFO",o)}},t}(rc),Yg=function(e){function t(){this.dungeonHead=null,t.__super.call(this,"DungeonDailyMediator")}o(t,"modules.dungeondaily.view.DungeonDailyMediator",e);var i=t.prototype;return i.listNotificationInterests=function(){return["USER_INIT","USER_LEVEL_CHANGE","RECEIVE_DUNGEON_DAILY_INFO","RECEIVE_VIP_EXT","RECEIVE_DUNGEON_LIMIT_INFO","ZERO_CLOCK_TRIGER"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("PlayerDungeonDailyProxy"),i=Ng.userVO.getValue(1006);switch(e.getName()){case"USER_INIT":t.setData(null),this.freshHead(null);break;case"RECEIVE_DUNGEON_LIMIT_INFO":v.LIMIT_DUNGEON_OPEN_VERSION||qc.instance.query();break;case"RECEIVE_DUNGEON_DAILY_INFO":this.freshHead(e.getBody());break;case"ZERO_CLOCK_TRIGER":case"USER_LEVEL_CHANGE":i>=55&&qc.instance.query();break;case"RECEIVE_VIP_EXT":this.freshHead(t.info)}},i.freshHead=function(e){if(null==this.dungeonHead){var t=this.facade.retrieveMediator("HomeMediator");if(null==t||null==t.view||null==t.view.spcailDungeon)return;if(this.dungeonHead=t.view.spcailDungeon.getChildByName("dungeonDailyHead"),null==this.dungeonHead)return;this.dungeonHead.on("click",this,this.onHead)}this.dungeonHead.getChildByName("lbFighting").visible=e&&e.fighting;var i=this.dungeonHead.getChildByName("lbRaceTime"),n=this.dungeonHead.getChildByName("lbTryTime"),o=this.dungeonHead.getChildByName("txLevel"),s=this.dungeonHead.getChildByName("btnEnter");if(s.visible=e,Ng.userVO.getValue(1006)<55)o.text="55级开启",o.color="#e70626",s.visible=!1,i.text="",n.text="";else{o.text="";var r=this.facade.retrieveProxy("PlayerDungeonDailyProxy");if(e){var a=r.winMax();i.text="今日可获取奖励次数："+e.winTimes+"/"+a,e.winTimes>=a?i.color="#ffffff":i.color="#00dc24",a=r.tryMax(),n.text="可免费尝试挑战次数："+e.fightTimes+"/"+a,e.fightTimes>=a?n.color="#ffffff":n.color="#00dc24",s.visible=!0}else i.text="载入数据中...",n.text="",s.visible=!1}var l=this.dungeonHead.getChildByName("btnGuard");l.visible=Ng.userVO.getValue(1006)>=55},i.onHead=function(e){var t=this.facade.retrieveProxy("PlayerDungeonDailyProxy"),i=t.info;switch(e.target.name){case"btnEnter":if(i.fighting)this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,18);else if(t.canFight())if(t.hasFreeTime())qc.instance.fight(0);else{if(Ng.userVO.getValue(1010)<10)return void this.sendNotification("prompted_info_show",{info:"今日免费尝试次数已用完，挑战需要10元宝。"});this.sendNotification("POP_CONFIRM_INFO",{info:"今日免费尝试次数已用完，确认使用<font color='#fffc00'>10元宝</font>挑战吗？",handler:h.create(this,function(e,t){e&&qc.instance.fight(10)})})}else this.sendNotification("prompted_info_show",{info:"今日奖励已领取完，请明天再试。"});break;case"btnGuard":this.sendNotification("OPEN_GUARD_PAGE")}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="DungeonDailyMediator",t}(lc),Kg=function(e){function t(){t.__super.call(this)}o(t,"modules.daily.controller.DailyPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(ui.ACTIVE_QUERY,$g),this.facade.registerCommand(ui.ACTIVE_ACTIVE,$g,!0),this.facade.registerCommand(pi.INVITE_QUERY,Qg),this.facade.registerCommand(pi.INVITE_BIND,Qg,!0),this.facade.registerCommand(pi.INVITE_GET_AWARD,Qg,!0),this.facade.registerCommand(di.DAILY_QUERY,Zg),this.facade.registerCommand(di.DAILY_SIGN_IN,Zg,!0)},t}(rc),Xg=function(e){function t(){this.invite=null,this.active=null,this.signIn=null,t.__super.call(this,"DailyProxy")}o(t,"modules.daily.model.DailyProxy",e);var i=t.prototype;return i.receiveActive=function(e){return this.active?this.active.update(e):this.active=new gi(e),null},i.receiveInvite=function(e){return this.invite?this.invite.update(e):this.invite=new fi(e),this.invite},i.receiveSignIn=function(e){return this.signIn?this.signIn.update(e):this.signIn=new _i(e),this.signIn},t.NAME="DailyProxy",t}(sc),Qg=function(e){function t(){t.__super.call(this)}o(t,"modules.daily.controller.commands.InviteCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerInvite",t.value),n=this.facade.retrieveProxy("DailyProxy"),o=n.receiveInvite(i);this.sendNotification("RECEIVE_INVITE_INFO",o),2==t.cmd?this.sendNotification("prompted_info_show",{info:"绑定成功。"}):3==t.cmd&&this.sendNotification("prompted_info_show",{info:"奖励领取成功。"})}else switch(t.status){case-24:this.sendNotification("prompted_info_show",{info:"绑定失败，您已绑定过邀请人了。"});break;case-23:this.sendNotification("prompted_info_show",{info:"绑定失败，邀请人不能是您自己。"});break;case-56:this.sendNotification("POP_ALERT_INFO",{info:"<br><br>绑定失败，邀请码有误或被邀请人比您建号晚。"});break;default:this.sendNotification("prompted_info_show",{info:"邀请码有误，请确认后重试。"})}},t}(rc),jg=function(e){function t(){this._inited=!1,this._blood=null,this._hero=null,t.__super.call(this,"BloodMediator")}o(t,"modules.blood.view.BloodMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new sR),this.view.dressed.mouseEnabled=!0,this.view.dressed.mouseHandler=new h(this,this.onMouse),this.view.btnExchange.clickHandler=new h(this,this.onExchange),this.view.btnTower.clickHandler=new h(this,this.onTower),this.view.bloodPieces.text="",this.view.dressed.dataSource=[]},i.onRegister=function(){this.facade.registerMediator(new Jg),this.facade.registerMediator(new tv),this.facade.registerMediator(new iv),this.facade.registerMediator(new ev)},i.listNotificationInterests=function(){return["USER_INIT","USER_LEVEL_CHANGE","CLEAR_CACHE_DATA","SHOW_BLOOD_PAGE","RECEIVE_BLOOD_INFO","UPGRADE_BLOOD_Q_SUCCESS","RECEIVE_BLOOD_PIECE_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this._blood=null,this._inited=!1;break;case"SHOW_BLOOD_PAGE":0==this._inited&&(this._inited=!0,Kc.instance.query()),this.view.popup();break;case"USER_INIT":case"USER_LEVEL_CHANGE":this._hero=Ng.userVO,this.checkFresh();break;case"RECEIVE_BLOOD_INFO":this._blood=e.getBody(),this.checkFresh();break;case"UPGRADE_BLOOD_Q_SUCCESS":this.checkFresh();break;case"RECEIVE_BLOOD_PIECE_CHANGE":this.checkFresh()}},i.checkFresh=function(){this._hero&&this._blood&&this.view.fresh(this._blood,this._hero)},i.onMouse=function(e,t){if("click"==e.type){var i=this.facade.retrieveProxy("GoodsProxy"),n=this.view.dressed.getCell(t).dataSource;if(null==n){var o=hi.getOpenLevel(t);if(o>Ng.userVO.getValue(1006))return void this.sendNotification("prompted_info_show",{info:"开启需要人物等级达到"+o});var s=i.findOnePropByBaseId(4e4),r=hi.openGradNeedPropsNum(t);if(null==s||s.count<r)return this.sendNotification("prompted_info_show",{info:"开启需要【兽血皿】x"+r}),void this.sendNotification("SHOW_TOWER_SHOP_PAGE");Kc.instance.openGrad(t,s.id)}switch(e.target.name){case"chat":var a=n.id,l=i.getItemById(a,0);this.sendNotification("CHAT_INPUT_ITEM",l);break;case"btnQuality":this.sendNotification("SHOW_BLOOD_UPQUALITY_PAGE",n.id);break;case"btnLevel":this.sendNotification("SHOW_BLOOD_UPLEVEL_PAGE",n);break;case"btnDress":this.sendNotification("SHOW_BLOOD_DRESS_CHANGE",n);break;case"btnRebuild":var h=i.getItemById(n.id,0);this.sendNotification("SHOW_ORANGE_LEVEL_MOVE",h)}}},i.onExchange=function(){if(this._blood){var e=vo["int"](this._blood.bloodPiece/50);if(0>=e)return void this.sendNotification("prompted_info_show",{info:"兑换一个完整血脉最少需要50个远古血脉"});var t=vo["int"](this.view.aimNum.text);(0>t||t>e)&&(t=1),Kc.instance.buildBlood(t)}},i.onTower=function(){this.sendNotification("SHOW_TOWER_SHOP_PAGE")},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="BloodMediator",t}(lc),Zg=function(e){function t(){t.__super.call(this)}o(t,"modules.daily.controller.commands.DailyCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerSign",t.value),n=this.facade.retrieveProxy("DailyProxy"),o=n.receiveSignIn(i);this.sendNotification("RECEIVE_SIGN_INFO",o),2==t.cmd&&(this.sendNotification("prompted_info_show",{info:"签到成功，获得签到奖励"}),this.sendNotification("CHECK_6RMB_SPGIFT"),op.aldSendEvent("完成签到"),this.checkVIP())}},i.checkVIP=function(){var e=this,t=this.facade.retrieveProxy("MarketProxy");t&&t.vipInfo&&(t.vipInfo.goldenVip.liveDay<=3&&t.vipInfo.goldenVip.liveDay>0||t.vipInfo.diamondVip.liveDay<=3&&t.vipInfo.diamondVip.liveDay>0)&&this.sendNotification("POP_CONFIRM_INFO",{info:"您有月卡期限即将到期，是否向往续费？",handler:h.create(this,function(t){t&&e.sendNotification("OPEN_MARCKET_VIEW","月卡")})})},t}(rc),Jg=function(e){function t(){this.dressed=null,t.__super.call(this,"BloodUpQualityMediator")}o(t,"modules.blood.view.BloodUpQualityMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new NR)},i.listNotificationInterests=function(){return["SHOW_BLOOD_UPQUALITY_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_BLOOD_UPQUALITY_PAGE":this.show(e.getBody())}},i.compareFunctionBad=function(e,t){return e.quality<t.quality?-1:e.quality>t.quality?1:t.baseId-e.baseId},i.show=function(e){var t=this.facade.retrieveProxy("GoodsProxy");this.dressed=e;var i=t.getItemById(this.dressed,0);if(i){if(i.quality>6)return void this._updateOrangeAttr(i);if(6==i.quality)return void this._update2Orange(i);var n,o=t.listItems(0),s=[],r=[];for(var a in o)if(n=o[a],!(null==n||n.count<=0)&&n instanceof modules.goods.model.data.PackProp){var l=n;if(3==l.propConf.propType)l.propConf.quality>i.quality&&l.propConf.level>=50&&r.push(l);else if(14==l.propConf.propType&&l.propConf.quality==i.quality){if(l.id==e)continue;if(l.baseId<41001||l.baseId>45006)continue;s.push(l.resetCountTmp())}}r.sort(this.compareFunctionStone),s.sort(this.compareFunctionBad),this.view.popSelect(i,s,r),this.view.popup()}},i.compareFunctionStone=function(e,t){return e.baseId-t.baseId},i._update2Orange=function(e){var t,i=this.facade.retrieveProxy("GoodsProxy"),n=null,o=null,s=null,r=i.listItems(0);for(var a in r)if(t=r[a],!(null==t||t.count<=0)&&t instanceof modules.goods.model.data.PackProp){var l=t;switch(l.baseId){case 185008:n=l;break;case 185007:o=l;break;case 40001:s=l}}if(null==s||s.count<100||null==o||o.count<30||null==n||n.count<10)return void this.sendNotification("prompted_info_show",{info:"升品需要：10个紫色仙品天籁石、30个红色仙品天籁石、100个真龙血脉"});var c=new uo;c.set(n.id,10),c.set(o.id,30),c.set(s.id,100),this.sendNotification("POP_CONFIRM_INFO",{info:"确定消耗：<font color='#c527ff'>紫色仙品天籁石*10</font>、<font color='#e70626'>红色仙品天籁石*30、真龙血脉*100</font> 进阶血脉吗？",handler:h.create(this,function(t){t&&Kc.instance.upgradeQuailty2Orange(e.id,c)})},"duble")},i._updateOrangeAttr=function(e){var t=e.baseAttr[0],i=t.value,n=g.database.getData("bloodupgrade",i+1);if(null==n)return void this.sendNotification("prompted_info_show",{info:"已是最高等级"});var o,s=this.facade.retrieveProxy("GoodsProxy"),r=null,a=s.listItems(0);for(var l in a)if(o=a[l],!(null==o||o.count<=0)&&o instanceof modules.goods.model.data.PackProp){var c=o;switch(c.baseId){case 40001:r=c}}if(null==r||r.count<n.orangeCost)return void this.sendNotification("prompted_info_show",{info:"培养需要："+n.orangeCost+"个真龙血脉"});var u=hi.getUpgradeOrangeAttCostSilver(i);return Ng.userVO.getValue(1009)<u?void this.sendNotification("prompted_info_show",{info:"培养需要："+n.orangeCost+"个真龙血脉，铜币"+lo.transform(u)}):void this.sendNotification("POP_CONFIRM_INFO",{info:"确定消耗：<font color='#e70626'>真龙血脉*"+n.orangeCost+"</font>，铜币"+lo.transform(u)+"培养血脉吗？",handler:h.create(this,function(t){t&&Kc.instance.upgradeOrangeAttrLevel(e.id,r.id)})})},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="BloodUpQualityMediator",t}(lc),$g=function(e){function t(){t.__super.call(this)}o(t,"modules.daily.controller.commands.ActiveCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){if(2==t.cmd)if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"激活成功",awards:n,desc:""}),op.aldSendEvent("成功激活")}else as.debug(this,"EquipBreakCommand","failue:"+t.status)}else switch(t.status){case-12:this.sendNotification("prompted_info_show",{info:"您的等级不足，暂时不可使用"});break;case-21:this.sendNotification("prompted_info_show",{info:"激活码不存在，或已被使用了"});break;case-24:this.sendNotification("prompted_info_show",{info:"同类激活码，您已激活过了。"});break;case-15:this.sendNotification("prompted_info_show",{info:"该奖励已经全部领取完了。"});break;case-35:this.sendNotification("prompted_info_show",{info:"此激活码，您本月已使用过了。"});break;case-37:this.sendNotification("prompted_info_show",{info:"同类激活码，您今日已使用过了。"});break;default:this.sendNotification("prompted_info_show",{info:"激活码有误，请确认后重试。"})}},t}(rc),ev=function(e){function t(){this.bloodSelectPop=null,this._bloodTo=null,this._bloodFrom=null,this.material=null,this.iron=null,t.__super.call(this,"BloodMoveOrangeMediator")}o(t,"modules.blood.view.BloodMoveOrangeMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new xR),this.bloodSelectPop=new bR,this.bloodSelectPop.bloodList.renderHandler=new h(this,this.onbloodRender),this.bloodSelectPop.bloodList.mouseEnabled=!0,this.bloodSelectPop.bloodList.mouseHandler=new h(this,this.onPropPopSelect),this.view.btnPutin.clickHandler=new h(this,this.onPutin),this.view.btnSure.clickHandler=new h(this,this.onSure),this.view.bloodFrom.mouseEnabled=!0,this.view.bloodFrom.on("click",this,this.onPutin)},i.listNotificationInterests=function(){return["SHOW_ORANGE_LEVEL_MOVE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_ORANGE_LEVEL_MOVE":this.showInfo(e.getBody()),this.view.popup()}},i.showInfo=function(e){this._bloodTo=e,this.view.bloodFrom.visible=!1,this.view.btnPutin.visible=!0,this.view.bloodAfter.visible=!1,Ln.renderBlood(this.view.bloodTo,this._bloodTo);var t=this.facade.retrieveProxy("GoodsProxy"),i=t.listItems(0);this.material=[],this.iron=null,this._bloodFrom=null;var n;for(var o in i)if(n=i[o],!(null==n||n.count<=0)&&n instanceof modules.goods.model.data.PackProp){var s=n;if(500023==s.baseId)this.iron=s;else if(14==s.propConf.propType&&s.quality>6){if(s.id==this._bloodTo.id)continue;s.baseAttr[0].value<=this._bloodTo.baseAttr[0].value?this.material.push(s):this.material.unshift(s)}}null==this.iron||this.iron.count<1?this.view.lbIron.color="#e70626":this.view.lbIron.color="#c527ff"},i.onPutin=function(){null==this.material||this.material.length<=0?this.sendNotification("prompted_info_show",{info:"暂无可使用的橙色血脉"}):this.bloodSelectPop.popPops(this.material)},i.onbloodRender=function(e,t){if(this.bloodSelectPop.bloodList.dataSource){var i=this.bloodSelectPop.bloodList.dataSource[t],n=e;Ln.renderBloodSimple(n,i),i.baseAttr[0].value<=this._bloodTo.baseAttr[0].value?e.alpha=.5:e.alpha=1}},i.onPropPopSelect=function(e,t){if("click"==e.type&&this.material&&this.material[t]){var i=this.material[t];if(i.baseAttr[0].value<=this._bloodTo.baseAttr[0].value)return void this.sendNotification("prompted_info_show",{info:"来源血脉培养等级，不能低于目标血脉培养等级"});this._bloodFrom=i,Ln.renderBlood(this.view.bloodFrom,i),this.view.bloodFrom.visible=!0,Ln.renderBlood(this.view.bloodAfter,this._bloodTo);var n=this.view.bloodAfter.getChildByName("attribute3");if(n){var o=i.baseAttr[0];n.text=hi.getOrangeAttr(this._bloodTo,o.value)}this.view.bloodAfter.visible=!0,this.view.btnPutin.visible=!1,this.bloodSelectPop.close()}},i.onSure=function(){var e=this;return null==this._bloodFrom?void this.sendNotification("prompted_info_show",{info:"请选择来源血脉"}):null==this.iron||this.iron.count<1?void this.sendNotification("prompted_info_show",{info:"需要消耗一个重铸神铁"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"确定消耗：<font color='#c527ff'>重铸神铁1个</font>，重铸目标血脉吗？",handler:h.create(this,function(t){t&&(Kc.instance.moveOrangeAttrLevel(e._bloodFrom.id,e._bloodTo.id,e.iron.id),e.view.close())})},"duble")},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="BloodMoveOrangeMediator",t}(lc),tv=function(e){function t(){this.index=null,this._d=null,t.__super.call(this,"BloodUpLevelMediator")}o(t,"modules.blood.view.BloodUpLevelMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new SR),this.view.btmSure.clickHandler=new h(this,this.onClick),this.view.btnAuto.clickHandler=new h(this,this.onAuto)},i.checkLevelEnd=function(e){if(e>=100)return this.sendNotification("prompted_info_show",{info:"您的熔炼等级已达上限"}),!0;var t=Ng.userVO.getValue(1006);return e>=t?(this.sendNotification("prompted_info_show",{info:"您的熔炼等级已达上限，提升人物等级可继续熔炼"}),!0):!1},i.onAuto=function(){var e=this;if(!this.checkLevelEnd(this._d.lv)){var t=g.database.getData("bloodupgrade",this._d.lv+1);this.view.costSilver.text=t.silver;var i=Ng.userVO.getValue(1009);return i<t.silver?void this.sendNotification("prompted_info_show",{info:"熔炼需要铜币："+t.silver}):void this.sendNotification("POP_CONFIRM_INFO",{info:"一键熔炼，直到熔炼成功，或则铜币不足才会停止熔炼。<br>确认开始？",handler:h.create(this,function(t){t&&Kc.instance.upgradeLevelAuto(e._d.index)})})}},i.onClick=function(){if(!this.checkLevelEnd(this._d.lv)){var e=g.database.getData("bloodupgrade",this._d.lv+1);this.view.costSilver.text=e.silver;var t=Ng.userVO.getValue(1009);return t<e.silver?void this.sendNotification("prompted_info_show",{info:"熔炼需要铜币："+e.silver}):void Kc.instance.upgradeLevel(this._d.index)}},i.listNotificationInterests=function(){return["SHOW_BLOOD_UPLEVEL_PAGE","RECEIVE_BLOOD_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_BLOOD_UPLEVEL_PAGE":this.show(e.getBody());break;case"RECEIVE_BLOOD_INFO":if(this.view.isPopup){var t=e.getBody(),i=t.bloodArr[this.index];0==i.rt?this.sendNotification("prompted_info_show",{info:"熔炼成功，血脉等级 + 1"}):this.sendNotification("prompted_info_show",{info:"熔炼失败，幸运值 + 1"}),this.show(i)}}},i.show=function(e){var t=this.facade.retrieveProxy("GoodsProxy");this._d=e,this.index=this._d.index;var i=this._d.id,n=t.getItemById(i,0);Ln.renderBlood(this.view.bloodNow,n,this._d.lv),Ln.renderBlood(this.view.bloodAfter,n,this._d.lv+1);var o=g.database.getData("bloodupgrade",this._d.lv+1);if(null!=o){this.view.costSilver.text=o.silver;var s=Ng.userVO.getValue(1009);s<o.silver?this.view.costSilver.color="#e70626":this.view.costSilver.color="#ffffff",this.view.rateNow.text=this._d.rt,this.view.popup()}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="BloodUpLevelMediator",t}(lc),iv=function(e){function t(){this.index=null,t.__super.call(this,"BloodDressChangeMediator")}o(t,"modules.blood.view.BloodDressChangeMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new ER),this.view.canUsedBloods.dataSource=[],this.view.canUsedBloods.scrollBar.hide=!0,this.view.canUsedBloods.renderHandler=new h(this,this.onRender),this.view.canUsedBloods.mouseEnabled=!0,this.view.canUsedBloods.mouseHandler=new h(this,this.onClick)},i.onClick=function(e,t){if("click"==e.type){var i=this.view.canUsedBloods.getCell(t).dataSource;i&&Kc.instance.dressBlood(i.id,this.index),this.view.close()}},i.listNotificationInterests=function(){return["SHOW_BLOOD_DRESS_CHANGE","RECEIVE_BLOOD_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_BLOOD_DRESS_CHANGE":var t=this.facade.retrieveProxy("BloodProxy");this.show(e.getBody(),t.playerBlood);break;case"RECEIVE_BLOOD_INFO":if(this.view.isPopup){var i=e.getBody();this.show(i.bloodArr[this.index],i)}}},i.show=function(e,t){var i=this.facade.retrieveProxy("GoodsProxy");this.index=e.index;var n,o=e.id;o>0?(n=i.getItemById(o,0),Ln.renderBloodSimple(this.view.dressedBlood,n),this.view.dressedBlood.visible=!0):this.view.dressedBlood.visible=!1;var s,r=i.listItems(0),a=[];for(var l in r)if(s=r[l],!(null==s||s.count<=0)&&s instanceof modules.goods.model.data.PackProp){var h=s;if(14==h.propConf.propType){if(n&&h.propConf.nature==n.propConf.nature){a.push(h);continue}t.NATURE_HAS.contain(h.propConf.nature)||a.push(h)}}a.sort(this.compareFunctionBad),this.view.canUsedBloods.dataSource=a,this.view.emptTxt.visible=0==a.length,this.view.popup()},i.onRender=function(e,t){Ln.renderBloodSimple(e,e.dataSource)},i.compareFunctionBad=function(e,t){return e.quality>t.quality?-1:e.quality<t.quality?1:t.baseId-e.baseId},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="BloodDressChangeMediator",t}(lc),nv=function(e){function t(){t.__super.call(this)}o(t,"modules.surprise.controller.SurprisePrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(vi.SURPRISE_GIFT_QUERY,rv),this.facade.registerCommand(vi.SURPRISE_GIFT_CHOSE,rv,!0),this.facade.registerCommand(vi.SURPRISE_GIFT_PUSH_GIVE,rv),this.facade.registerCommand(vi.SURPRISE_GIFT_AWARD,ov,!0)},t}(rc),ov=function(e){function t(){t.__super.call(this)}o(t,"modules.surprise.controller.commands.SurpriseAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"惊喜礼包获得",awards:n,desc:""})}},t}(rc),sv=function(e){function t(){t.__super.call(this,"SurpriseProxy")}o(t,"modules.surprise.model.SurpriseProxy",e);var i=t.prototype;return i.receive=function(e){return null==this.data?this.data=new bi(e):this.playerSurprise.update(e),this.playerSurprise},i.isEnable=function(){return null==this.data?!1:0==this.isOpenPay()?!1:this.playerSurprise.expiration>g.clock.currentTime&&this.playerSurprise.gift>0&&3!=this.playerSurprise.state},i.isOpenPay=function(){return!!v.OPEN_PAYMENT},i.getItem1=function(){if(null==this.data)return null;if(this.playerSurprise.item1<=0)return null;var e=g.database.getData("surprisegift",this.playerSurprise.item1),t=this.getSItem(e);return t},i.getItem2=function(){if(null==this.data)return null;if(this.playerSurprise.item2<=0)return null;var e=g.database.getData("surprisegift",this.playerSurprise.item2),t=this.getSItem(e);return t},i.getSItem=function(e){
var t=g.database.getData("props",e.propId),i=new yi(e,t,this.playerSurprise.rmb);return i},i.listItems=function(e){var t,i=[],n=g.database.getDict("surprisegift").values,o=Ng.userVO.getValue(1006),s=this.getRmb(e);for(var r in n)if(t=n[r],o>=t.minLv&&o<=t.maxLv){var a=t.getNum(s);if(0!=a){var l=this.getSItem(t);l.rmb=s,0>a?i.unshift(l):i.push(l)}}return i},i.getRmb=function(e){if(null==this.data)return 0;if(0>e||e>2)return 0;switch(this.playerSurprise.gift){case 1:return t.SMALL_RMB_LIST[e];case 2:return t.BIG_RMB_LIST[e]}return 0},i.getPayId=function(){return 2==this.playerSurprise.state?2e4+this.playerSurprise.rmb:-1},s(0,i,"playerSurprise",function(){return this.data}),t.NAME="SurpriseProxy",n(t,["SMALL_RMB_LIST",function(){return this.SMALL_RMB_LIST=[6,30,98]},"BIG_RMB_LIST",function(){return this.BIG_RMB_LIST=[198,328,648]}]),t}(sc),rv=function(e){function t(){t.__super.call(this)}o(t,"modules.surprise.controller.commands.SurpriseCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerSurprise",t.value),n=this.facade.retrieveProxy("SurpriseProxy"),o=n.receive(i);this.sendNotification("RECEIVE_SURPRISE_INFO",o),4==t.cmd?n.isOpenPay()&&this.sendNotification("prompted_info_show",{info:"获得一个惊喜礼包"}):2==t.cmd&&this.sendNotification("RECEIVE_SURPRISE_CHOSE",o)}},t}(rc),av=function(e){function t(){t.__super.call(this,"CaptchaProxy",new Si)}o(t,"modules.captcha.model.CaptchaProxy",e);var i=t.prototype;return i.receive=function(e){return this.vo.update(e),this.vo},s(0,i,"vo",function(){return this.data}),t.NAME="CaptchaProxy",t}(sc),lv=function(e){function t(){t.__super.call(this)}o(t,"modules.captcha.controller.commands.CaptchaCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerCaptcha",t.value),n=this.facade.retrieveProxy("CaptchaProxy"),o=n.receive(i);this.sendNotification("RECEIVE_CAPTCHA_INFO",o)}},t}(rc),hv=function(e){function t(){t.__super.call(this)}o(t,"modules.captcha.controller.commands.CaptchaAnswerCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){v.protoCodec.getResponseDecoder().decode("FightAwards",t.value);this.sendNotification("prompted_info_show",{info:"验证正确"})}else this.sendNotification("prompted_info_show",{info:"验证错误，超时或连错3次相关功能将禁用2小时"})},t}(rc),cv=function(e){function t(){this._txtQQgroup=null,this._inputActive=null,this._btnActive=null,this._shareUrl=null,this._codeCopy=null,this._btnBind=null,this._inputInvite=null,this._signDayList=null,this._actCodeHead=null,this._invitCodeHead=null,this._invitMiniCodeHead=null,this._signInHead=null,this._signInfo=null,this._selectedItem=null,this._vipInfo=null,this.info=null,this.qrcode=null,this.qrImg=null,this._shareUrlStr=null,t.__super.call(this,"DailyMediator")}o(t,"modules.daily.view.DailyMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.listVisit),this._actCodeHead=this.view.getChildByName("actCode"),this._actCodeHead.visible=v.giftOpen,this._invitCodeHead=this.view.getChildByName("invitCode"),this._invitMiniCodeHead=this.view.getChildByName("invitMiniCode"),this._invitMiniCodeHead.x=this._invitCodeHead.x,this._signInHead=this.view.getChildByName("dailySign"),this._inputActive=this.actCodeHead.getChildByName("inputActive"),this._btnActive=this.actCodeHead.getChildByName("btnActive"),this._inputActive.text="",this._shareUrl=this.invitCodeHead.getChildByName("shareUrl"),this._shareUrl.text="",this._codeCopy=this.invitCodeHead.getChildByName("codeCopy"),this._btnBind=this.invitCodeHead.getChildByName("btnBind"),this._inputInvite=this.invitCodeHead.getChildByName("inputInvite"),this._inputInvite.text="",this._txtQQgroup=this.actCodeHead.getChildByName("qqGroup"),T.IS_ON_MINI?(this._txtQQgroup.text=op.onServicer(),this._invitMiniCodeHead.visible=!1):(v.IS_THIRD_PT&&(this._txtQQgroup.text=X.QQ_GROUP),Q.isLayaAndIos()?this._txtQQgroup.text="加入玩家群："+X.QQ_GROUP+"获得最新游戏信息":this._txtQQgroup.text="加入QQ群："+X.QQ_GROUP+"获得最新游戏信息",this._invitMiniCodeHead.visible=!1,Q.checkOpen()&&(this._actCodeHead.visible=!1)),this.view.on("mousedown",this,this.onClick),this._invitCodeHead.visible=!1,this._signDayList=this.signInHead.getChildByName("dayList"),this._signDayList.renderHandler=new h(this,this.onSignRender),this._signDayList.mouseEnabled=!0,this._signDayList.mouseHandler=new h(this,this.onSignItem)},i.listNotificationInterests=function(){return["RECEIVE_ACTIVE_INFO","RECEIVE_INVITE_INFO","RECEIVE_SIGN_INFO","INIT_VIP_INFO","CHANGE_VIP_INFO","USER_INDULGE_CHANGE","ZERO_CLOCK_TRIGER","CLEAR_CACHE_DATA"]},i.handleNotification=function(e){switch(e.getName()){case"RECEIVE_ACTIVE_INFO":break;case"RECEIVE_INVITE_INFO":T.IS_ON_MINI?this.showInviteMini(e.getBody()):this.showInvite(e.getBody());break;case"RECEIVE_SIGN_INFO":this.showSignIn(e.getBody());break;case"INIT_VIP_INFO":case"CHANGE_VIP_INFO":this._vipInfo=e.getBody(),this.freshSignGold();break;case"USER_INDULGE_CHANGE":if(this.info){if("fan"==X.FID)this.invitCodeHead.visible=!1;else{var t=Ng.userVO.getValue(1017);t>0&&(this.invitCodeHead.visible=!0)}this.sendNotification("DISPLAYE_GIFT_PANLE")}break;case"ZERO_CLOCK_TRIGER":Qc.instance.query();break;case"CLEAR_CACHE_DATA":this.qrImg&&(this.qrImg.skin=""),this._shareUrlStr=null,this.invitCodeHead.visible=!1,this.info=null}},i.showSignIn=function(e){this._signInfo=e;var t=0;t=e.totalDay<30?1:30*Math.floor(e.totalDay/30);for(var i=[],n=0,o=0;31>o;o++)t==e.getTodayNum()&&(n=o),i.push(t++);this.signDayList.dataSource=i;var s=this.signInHead.getChildByName("lbSigned");this._signInfo.isSignToday()?(s.text="【今日已签到】",s.color="#b0bcb0"):(s.text="【今日未签到】",s.color="#00dc24"),s=this.signInHead.getChildByName("totalDay"),s.text=""+e.totalDay;var r=this.signInHead.getChildByName("btnSign");r.clickHandler=new h(this,this.onSignClick),r=this.signInHead.getChildByName("btnNotice"),r.clickHandler=new h(this,this.onNoticeClick),this.selectItem(n)},i.onSignRender=function(e,t){if(this.signDayList.dataSource&&this._signInfo){var i=this.signDayList.dataSource[t],n=e.getChildByName("item"),o=e.getChildByName("star");n.label=i+"天",i<this._signInfo.getTodayNum()?n.alpha=.5:i==this._signInfo.getTodayNum()?n.alpha=this._signInfo.isSignToday()?.5:1:n.alpha=1,o.visible=mi.isSpecailDay(i)}},i.onSignItem=function(e,t){"click"==e.type&&this.selectItem(t)},i.freshSignGold=function(){var e=10,t=this.signInHead.getChildByName("gold"),i=this.signInHead.getChildByName("vipTip");this._vipInfo&&this._vipInfo.vipMontAdd>0?(t.text=e+10+"元宝",t.color="#c527ff",i.visible=!1):(t.text=e+"元宝",t.color="#fffc00",i.visible=!0)},i.selectItem=function(e){var t=this.signDayList.dataSource[e];this._selectedItem&&(this._selectedItem.selected=!1),this._selectedItem=this.signDayList.getCell(e).getChildByName("item"),this._selectedItem.selected=!0,this.freshSignGold();var i=mi.getSpecailItem(t),n=this.signInHead.getChildByName("props"),o=this.signInHead.getChildByName("desc");if(i){if(-1==i.i)n.text=i.c+"威望",n.color="#00dc24",o.text="";else{var s=g.database.getData("props",i.i);t>=365&&t%365==0?n.text="【"+s.name+"】 x "+i.c+"、激活周年称号":n.text="【"+s.name+"】 x "+i.c,n.color=N.getColor(s.quality),o.text=s.desc}n.visible=!0,o.visible=!0}else n.visible=!1,o.visible=!1;var r=this.signInHead.getChildByName("btnSign");t==this._signInfo.getTodayNum()?r.visible=!this._signInfo.isSignToday():r.visible=!1},i.onSignClick=function(){Qc.instance.signIn()},i.onNoticeClick=function(){this.sendNotification("SHOW_PLAY_NOTICE")},i.showInvite=function(e){if(this.info=e,"fan"==X.FID)return void(this.invitCodeHead.visible=!1);var t=Ng.userVO.getValue(1017);0>=t?this.invitCodeHead.visible=!1:this.invitCodeHead.visible=!0;var i="  我正在玩《无尽洪荒》文字挂机修仙游戏，五行为职业，山海神兽为装备："+X.INVITE_SHARE_URL+"?masterCode="+e.mycode+"&fid="+X.FID+"&pf="+X.PLATE_FORM;this.shareUrl.text=i,this.codeCopy.clickHandler=new h(this,this.onCopyCode);var n;n=this.invitCodeHead.getChildByName("lbChildNum"),n.text="一级推广玩家数量："+e.childCount,n=this.invitCodeHead.getChildByName("lbChildAward"),n.text="已贡献"+vo["int"](e.childRmb/100)+"元宝",n=this.invitCodeHead.getChildByName("lbGrandNum"),n.text="二级推广玩家数量："+e.grandchildCount,n=this.invitCodeHead.getChildByName("lbGrandAward"),n.text="已贡献"+vo["int"](5*e.grandchildRmb/1e3)+"元宝",n=this.invitCodeHead.getChildByName("lbSumary"),n.text="累计元宝奖励："+e.rmbShare/10+"，已领取元宝奖励："+e.rmbShareAward/10+"，可领取元宝奖励："+(e.rmbShare-e.rmbShareAward)/10;var o=this.invitCodeHead.getChildByName("btnGetAward");e.hasAward()?o.label="领取":o.label="刷新",this.qrImg=this.invitCodeHead.getChildByName("shareCode"),this.createQR(X.INVITE_SHARE_URL+"?masterCode="+e.mycode+"&fid="+X.FID+"&pf="+X.PLATE_FORM)},i.showInviteMini=function(e){this.info=e;var t;t=this.invitMiniCodeHead.getChildByName("lbChildNum"),t.text="一级推广玩家数量："+e.childCount,t=this.invitMiniCodeHead.getChildByName("lbChildAward"),t.text="已贡献"+vo["int"](e.childRmb/100)+"元宝",t=this.invitMiniCodeHead.getChildByName("lbGrandNum"),t.text="二级推广玩家数量："+e.grandchildCount,t=this.invitMiniCodeHead.getChildByName("lbGrandAward"),t.text="已贡献"+vo["int"](5*e.grandchildRmb/1e3)+"元宝",t=this.invitMiniCodeHead.getChildByName("lbSumary"),t.text="累计元宝奖励："+e.rmbShare/10+"，已领取元宝奖励："+e.rmbShareAward/10+"，可领取元宝奖励："+(e.rmbShare-e.rmbShareAward)/10;var i=this.invitMiniCodeHead.getChildByName("btnGetAward");e.hasAward()?i.label="领取":i.label="刷新";var n=this.invitMiniCodeHead.getChildByName("lbChildInfo");v.OPEN_PAYMENT||(n.text=n.text.split("充值").join("积分"))},i.createQR=function(e){if(this._shareUrlStr!=e){this._shareUrlStr=e;var t=new QRCode(-1,QRErrorCorrectLevel.H);t.addData(e),t.make();for(var i=0;i<t.moduleCount;i++)for(var n=0;n<t.moduleCount;n++){var o=t.isDark(i,n);if(o){var s=180/t.moduleCount;this.qrImg.graphics.drawRect(n*s,i*s,s,s,"#ffffff")}}}},i.onClick=function(e){var t=this;switch(e.target.name){case"btnActive":var i=this.inputActive.text;null==i||i.length<1?this.sendNotification("prompted_info_show",{info:"激活码有误，请确认后再试。"}):jc.instance.active(i);break;case"btnBind":var n=this.inputInvite.text;null==n||n.length<4?this.sendNotification("prompted_info_show",{info:"邀请码有误，请确认后再试。"}):this.sendNotification("POP_CONFIRM_INFO",{info:"邀请人只能绑定一次，是否确认？",handler:h.create(this,function(e){e&&Xc.instance.bind(n)})});break;case"btnGetAward":this.info.hasAward()?this.sendNotification("POP_CONFIRM_INFO",{info:"若同一帐号下的有多个角色，只能选择一个角色领取<br>是否确认？",handler:h.create(this,function(e){e&&Xc.instance.getAward(t.info.rmbShare-t.info.rmbShareAward)})}):(Xc.instance.query(),this.sendNotification("prompted_info_show",{info:"暂时没有奖励可领取。"}));break;case"btnShare":op.shareAppMessage()}},i.onCopyCode=function(){this.sendNotification("POP_ALERT_COPY",{title:"成功复制邀分享链接",info:this.shareUrl.text})},s(0,i,"view",function(){return this.getViewComponent()}),s(0,i,"btnActive",function(){return this.getViewComponent(),this._btnActive}),s(0,i,"invitCodeHead",function(){return this.getViewComponent(),this._invitCodeHead}),s(0,i,"actCodeHead",function(){return this.getViewComponent(),this._actCodeHead}),s(0,i,"btnBind",function(){return this.getViewComponent(),this._btnBind}),s(0,i,"signInHead",function(){return this.getViewComponent(),this._signInHead}),s(0,i,"codeCopy",function(){return this.getViewComponent(),this._codeCopy}),s(0,i,"inputActive",function(){return this.getViewComponent(),this._inputActive}),s(0,i,"signDayList",function(){return this.getViewComponent(),this._signDayList}),s(0,i,"invitMiniCodeHead",function(){return this.getViewComponent(),this._invitMiniCodeHead}),s(0,i,"shareUrl",function(){return this.getViewComponent(),this._shareUrl}),s(0,i,"txtQQgroup",function(){return this.getViewComponent(),this._txtQQgroup}),s(0,i,"inputInvite",function(){return this.getViewComponent(),this._inputInvite}),t.NAME="DailyMediator",t}(lc),uv=function(e){function t(){t.__super.call(this)}o(t,"modules.captcha.controller.CaptchaPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Ei.CAPTCHA_QUERY,lv,!0),this.facade.registerCommand(Ei.CAPTCHA_ANSWER,hv,!0)},t}(rc),dv=function(e){function t(){this.leftDay=0,this.endDate=null,this.nextOpenDayNum=0,this._marketRebate=null,this.isShow=!1,this._rebateRedPointFlag=0,this.redPoint=!1,t.__super.call(this,"RebateProxy")}o(t,"modules.rebate.model.RebateProxy",e);var i=t.prototype;return i.setRebateData=function(e){if(this._marketRebate=e,this.leftDay=0,this.nextOpenDayNum=0,this.endDate=null,null!=this._marketRebate){var t=ro.newDate(g.clock.currentTime),i=null,n=0;this._marketRebate.extOpenEnd>g.clock.currentTime&&(i=ro.newDate(this._marketRebate.extOpenEnd),n=ro.dateDiff(i,t));var o=null,s=0;t.getDate()>=this._marketRebate.startDay&&t.getDate()<=this._marketRebate.endDay&&(s=this._marketRebate.endDay-t.getDate(),o=t,o.setDate(this._marketRebate.endDay),o.setHours(23),o.setMinutes(59),o.setSeconds(59)),null!=i&&null!=o?i.getTime()>o.getTime()?(this.endDate=i,this.leftDay=n):(this.endDate=o,this.leftDay=s):null!=i?(this.endDate=i,this.leftDay=n):null!=o&&(this.endDate=o,this.leftDay=s)}var r=ro.newDate(g.clock.currentTime),a=r.getDate();if(10>a)this.nextOpenDayNum=10-a;else{var l=ro.newDate(g.clock.currentTime);l.setDate(10),l.setMonth(r.getMonth()+1),this.nextOpenDayNum=ro.dateDiff(l,r)}},i.isRebateOpen=function(){if(this._marketRebate.extOpenEnd>g.clock.currentTime)return!0;var e=ro.newDate(g.clock.currentTime);return e.getDate()>=this._marketRebate.startDay&&e.getDate()<=this._marketRebate.endDay},i.isActiving=function(){return this.isShow},i.hasAward=function(){return this.getMinAwardGolden()>0},i.getMinAwardGolden=function(){return this._marketRebate.rebateGotMax4Pearl<500&&this._marketRebate.goldCostTotal4Pearl>=500?500:this._marketRebate.rebateGotMax4Pearl<5e3&&this._marketRebate.goldCostTotal4Pearl>=5e3?5e3:this._marketRebate.rebateGotMax4Pearl<2e4&&this._marketRebate.goldCostTotal4Pearl>=2e4?2e4:this._marketRebate.rebateGotMax4Pearl<4e4&&this._marketRebate.goldCostTotal4Pearl>=4e4?4e4:this._marketRebate.rebateGotMax4Pearl<1e5&&this._marketRebate.goldCostTotal4Pearl>=1e5?1e5:this._marketRebate.rebateGotMax4Pearl<2e5&&this._marketRebate.goldCostTotal4Pearl>=2e5?2e5:this._marketRebate.rebateGotMax4Pearl<4e5&&this._marketRebate.goldCostTotal4Pearl>=4e5?4e5:this._marketRebate.rebateGotMax4Pearl<8e5&&this._marketRebate.goldCostTotal4Pearl>=8e5?8e5:this._marketRebate.rebateGotMax4Pearl<16e5&&this._marketRebate.goldCostTotal4Pearl>=16e5?16e5:0},i.getContent1=function(){return 0==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>500元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>100元宝</font>":500==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>5000元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>1000元宝</font>":5e3==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>20000元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>4000元宝</font>":2e4==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>40000元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>8000元宝</font>":4e4==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>100000元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>20000元宝</font>":1e5==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>200000元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>40000元宝</font>":2e5==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>400000元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>80000元宝</font>":4e5==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>800000元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>160000元宝</font>":8e5==this._marketRebate.rebateGotMax4Pearl?"满&nbsp;<font color='#f4eb13'>1600000元宝</font>&nbsp;返还&nbsp;<font color='#0cd41c'>400000元宝</font>":16e5==this._marketRebate.rebateGotMax4Pearl?"<font color='#f4eb13'>全部领取完成</font>":""},i.getGoldAim=function(){var e=0;return 0==this._marketRebate.rebateGotMax4Pearl?e=500:500==this._marketRebate.rebateGotMax4Pearl?e=5e3:5e3==this._marketRebate.rebateGotMax4Pearl?e=2e4:2e4==this._marketRebate.rebateGotMax4Pearl?e=4e4:4e4==this._marketRebate.rebateGotMax4Pearl?e=1e5:1e5==this._marketRebate.rebateGotMax4Pearl?e=2e5:2e5==this._marketRebate.rebateGotMax4Pearl?e=4e5:4e5==this._marketRebate.rebateGotMax4Pearl?e=8e5:8e5==this._marketRebate.rebateGotMax4Pearl?e=16e5:16e5==this._marketRebate.rebateGotMax4Pearl&&(e=-1),e},i.getContent2=function(){var e=this.getGoldAim();return-1==e?"":"当前进度&nbsp;<font color='#f4eb13'>"+this._marketRebate.goldCostTotal4Pearl+"</font>&nbsp;/&nbsp;<font color='#0cd41c'>"+e+"</font>&nbsp;元宝"},i.getNeedTotalPay=function(e){switch(e){case 500:return 520;case 5e3:return 4288;case 2e4:return 18888;case 4e4:return 36888;case 1e5:return 58888;case 2e5:return 88888;case 4e5:return 128888;case 8e5:return 188888;case 16e5:return 268888;default:return 0}},i.getActEndTime=function(){var e="活动剩余：";return this.leftDay>0?e=e+this.leftDay+"天":e+="最后一天(23点59分结束)",e},i.freshRebate=function(){this.isShow=!1;var e=this.facade.retrieveProxy("PayTotalPropxy");if(null!=e){var t=e.info;Ng.userVO.getValue(1006)<45?this.redPoint=!1:(this.redPoint=!1,(v.OPEN_PAYMENT||X.openJade())&&null!=this.rebateData&&t&&t.totalRmb>=520&&(this.isRebateOpen()&&(this.isShow=!0,0==this._rebateRedPointFlag&&(this.redPoint=!0)),this.hasAward()&&(this.isShow=!0,this.redPoint=!0))),this.sendNotification("GUIDE_REBATE_STATE_CHG",this.redPoint)}},s(0,i,"rebateData",function(){return this._marketRebate}),t.NAME="RebateProxy",t}(sc),pv=function(e){function t(){this.selectIndex1=-1,this.selectIndex2=-1,t.__super.call(this,"SurpriseMediator")}o(t,"modules.surprise.view.SurpriseMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new wR),this.view.tabRmb.selectHandler=new h(this,this.onRmbTb),this.view.item1.on("click",this,this.onItemSelected),this.view.item2.on("click",this,this.onItemSelected),this.view.items.mouseEnabled=!0,this.view.items.mouseHandler=new h(this,this.onItems),this.view.items.renderHandler=new h(this,this.onRender),this.view.btnSure.clickHandler=new h(this,this.onSure)},n.listNotificationInterests=function(){return["OPEN_SURPRISE_VIEW","RECEIVE_SURPRISE_INFO","RECEIVE_SURPRISE_CHOSE","USER_INIT"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_SURPRISE_VIEW":this.showGift();break;case"RECEIVE_SURPRISE_INFO":this.fresh();break;case"RECEIVE_SURPRISE_CHOSE":this.choseSucc();break;case"USER_INIT":this.selectIndex1=-1,this.selectIndex2=-1;var t=this.facade.retrieveProxy("SurpriseProxy");t.setData(null),this.fresh(),Ng.userVO.getValue(1006)>=15&&Zc.instance.query()}},n.choseSucc=function(){this.view.close();var e=this.facade.retrieveProxy("SurpriseProxy");if(e.playerSurprise&&e.isEnable()){var t=e.getPayId(),i=this.facade.retrieveProxy("MarketProxy");i.payment(t)}},n.showGift=function(){var e=this.facade.retrieveProxy("SurpriseProxy");if(e.playerSurprise&&e.isEnable()){var t=e.playerSurprise;if(2==t.gift?this.view.lbTitle.text="惊喜礼包（大）":this.view.lbTitle.text="惊喜礼包（小）",1==t.state){var i=X.openJade();switch(t.gift){case 1:i?this.view.tabRmb.labels="6仙玉,30仙玉,98仙玉":this.view.tabRmb.labels="6元,30元,98元";break;case 2:i?this.view.tabRmb.labels="198仙玉,328仙玉,648仙玉":this.view.tabRmb.labels="198元,328元,648元";break;default:return}this.view.item1.mouseEnabled=!0,this.view.item2.mouseEnabled=!0,this.view.items.visible=!0,0!=this.view.tabRmb.selectedIndex?this.view.tabRmb.selectedIndex=0:this.onRmbTb(0),this.view.lbWaitPay.visible=!1}else{if(2!=t.state)return;this.view.tabRmb.labels=t.rmb+"元",this.view.tabRmb.selectedIndex=0,this.view.item1.mouseEnabled=!1,this.view.item2.mouseEnabled=!1,this.view.showItem1(e.getItem1(),!0),this.view.showItem2(e.getItem2(),!0),this.view.items.visible=!1,this.view.lbWaitPay.visible=!0}this.view.popup(),this.onClock()}},n.fresh=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view.btnSurprise;t.visible=!1;var n=this.facade.retrieveProxy("SurpriseProxy");n.playerSurprise&&(t.visible=n.isEnable(),0==t.visible?this.view.close():null==t.clickHandler&&(t.clickHandler=new h(this,this.onOpenBtn),i.timer.loop(1e3,this,this.onClock)))},n.onClock=function(){if(this.view.isPopup){var e=this.facade.retrieveProxy("SurpriseProxy");if(!e.playerSurprise)return;var t=e.playerSurprise.expiration-g.clock.currentTime;0>t?this.fresh():(ao.me.update(t),this.view.clock.text="倒计时"+ao.me.formatStringFullHour)}},n.onOpenBtn=function(){this.sendNotification("OPEN_SURPRISE_VIEW")},n.onRmbTb=function(e){this.selectIndex1=-1,this.view.showItem1(null),this.selectIndex2=-1,this.view.showItem2(null);var t=this.facade.retrieveProxy("SurpriseProxy");t.playerSurprise&&(this.view.items.dataSource=t.listItems(e))},n.onItemSelected=function(e){e.target==this.view.item1?this.selectIndex1>=0&&(this.selectIndex1=-1,this.view.showItem1(null),this.view.items.refresh()):e.target==this.view.item2&&this.selectIndex2>=0&&(this.selectIndex2=-1,this.view.showItem2(null),this.view.items.refresh())},n.selectLimit=function(){var e;return this.selectIndex1>=0&&(e=this.view.items.dataSource[this.selectIndex1],e.isLimit())?!0:!!(this.selectIndex2>=0&&(e=this.view.items.dataSource[this.selectIndex2],e.isLimit()))},n.onItems=function(e,t){if("click"==e.type){var i=this.view.items.getCell(t);if(i.alpha<1)return;var n=this.view.items.dataSource[t];this.selectIndex1<0?(this.selectIndex1=t,this.view.showItem1(n),this.view.items.refresh()):this.selectIndex2<0&&(this.selectIndex2=t,this.view.showItem2(n),this.view.items.refresh())}},n.onRender=function(e,t){var i=this.view.items.dataSource[t];return wR.renderInfo(e,i,!0),this.selectIndex1>=0&&this.selectIndex2>=0?void(e.alpha=.5):i.isLimit()&&this.selectLimit()?void(e.alpha=.5):void(e.alpha=1)},n.onSure=function(){var e=this.facade.retrieveProxy("SurpriseProxy");if(e.playerSurprise&&e.isEnable()){var t=e.playerSurprise;if(1==t.state){if(this.selectIndex1<0||this.selectIndex2<0)return void this.sendNotification("prompted_info_show",{info:"请选择需要的物品"});var i=this.view.items.dataSource[this.selectIndex1],n=this.view.items.dataSource[this.selectIndex2],o=e.getRmb(this.view.tabRmb.selectedIndex);this.sendNotification("POP_CONFIRM_INFO",{info:"提交后选定商品后不可更改，是否确认?",handler:h.create(this,function(e){e&&Zc.instance.chose(o,i.id,n.id)})})}else{if(2!=t.state)return;if(t.rmb<=0)return void this.sendNotification("prompted_info_show",{info:"购买异常请联系客服"});if(!v.OPEN_PAYMENT&&!X.openJade())return void this.sendNotification("POP_ALERT_INFO",{info:"当前客户端不支持，您可以联系客服。"});this.choseSucc()}}},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="SurpriseMediator",t}(lc),fv=function(e){function t(){t.__super.call(this)}o(t,"modules.gift.controller.GiftPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Ti.GIFT_QUERY,mv),this.facade.registerCommand(Ti.GIFT_CHECK_SP_GIFT,mv,!0),this.facade.registerCommand(Ti.GIFT_DORP_CURRENT_LIMIT,mv,!0),this.facade.registerCommand(Ti.GIFT_LIMIT_AWARD,vv,!0),this.facade.registerCommand(Ci.GIFT_FUTURE_QUERY,_v),this.facade.registerCommand(Ci.GIFT_FUTURE_AWARD,vv,!0)},t}(rc),_v=function(e){function t(){t.__super.call(this)}o(t,"modules.gift.controller.commands.GiftFutureCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=this.facade.retrieveProxy("GiftFutureProxy"),n=v.protoCodec.getResponseDecoder().decodeString(t.value),o=i.receive(n);this.sendNotification("RECIVE_FUTURE_GIFT_INFO",o)}},t}(rc),mv=function(e){function t(){t.__super.call(this)}o(t,"modules.gift.controller.commands.GiftCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=this.facade.retrieveProxy("GiftProxy");switch(t.cmd){case 1:case 4:var n=v.protoCodec.getResponseDecoder().decode("PlayerGift",t.value),o=i.receive(n);this.sendNotification("RECIVE_LIMIT_GIFT_INFO",o);break;case 3:var s=v.protoCodec.getResponseDecoder().decodeIntArr(t.value);i.info.setSpItems(s[0],s[1]),this.sendNotification("RECIVE_SP_GIFT_INFO",i.info)}}},t}(rc),gv=function(e){function t(){this._vo=null,t.__super.call(this,"CaptchaMediator")}o(t,"modules.captcha.view.CaptchaMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new TR),this.view.btnSure.clickHandler=new h(this,this.onSure),this.view.closeHandler=new h(this,this.onClosePg),this.view.lbErro.mouseEnabled=!0,this.view.lbErro.on("click",this,this.onFresh)},n.listNotificationInterests=function(){return["RECEIVE_CAPTCHA_INFO","CAPTCHA_ALERT_FORBIDEN","USER_INIT"]},n.handleNotification=function(e){switch(e.getName()){case"USER_INIT":Jc.instance.query();break;case"RECEIVE_CAPTCHA_INFO":this.showInfo(e.getBody());break;case"CAPTCHA_ALERT_FORBIDEN":e.getBody()==xi.CAPTCHA_FORBIDEN?this.sendNotification("prompted_info_show",{info:"操作频繁，休息几小时后再来"}):(this.sendNotification("prompted_info_show",{info:"操作频繁，请先进行系统人机验证"}),this._vo&&this.showInfo(this._vo))}},n.showInfo=function(e){return this._vo=e,e.isForbiden()?(this.view.close(),void i.timer.clear(this,this.onClock)):e.isVering()?(this.view.anwser.text="",this.onFresh(),i.timer.loop(1e3,this,this.onClock),this.onClock(),this.view.btnClose.visible=!1,this.view.popup(),void this.sendNotification("SHOW_HIDE_HEAD_BAR",!1,"capcha")):(this.view.close(),void i.timer.clear(this,this.onClock))},n.onLoad=function(e){lo.isNull(e)?this.view.lbErro.visible=!0:this.view.question.skin=e.url},n.onFresh=function(){this.view.lbErro.visible=!1,this.view.question.dataSource=null,i.loader.load(this._vo.img,h.create(this,this.onLoad),null,"image",1,!1)},n.onClock=function(){var e=this._vo.veringEndTime-g.clock.currentTime;return 0>e?(Jc.instance.answer("outtime"),this.view.lbClock.text="答题超时",void(this.view.btnClose.visible=!0)):(ao.me.update(e),void(this.view.lbClock.text=ao.me.formatStringFullHour))},n.onClosePg=function(){this.sendNotification("SHOW_HIDE_HEAD_BAR",!0,"capcha")},n.onSure=function(){var e=this.view.anwser.text;""!=e&&Jc.instance.answer(e)},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="CaptchaMediator",t}(lc),vv=function(e){function t(){t.__super.call(this)}o(t,"modules.gift.controller.commands.GiftAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"获得物品",awards:n,desc:""})}},t}(rc),yv=function(e){function t(){this.redPoint=!1,this.isShow=!1,t.__super.call(this,"GiftFutureProxy",new Ii)}o(t,"modules.gift.model.GiftFutureProxy",e);var i=t.prototype;return i.receive=function(e){var t=e.split(",");return 2==t.length&&this.info.update(t[0],t[1]),this.info},i.setShow=function(e){this.isShow=e},i.isActiving=function(){return this.isShow},s(0,i,"info",function(){return this.data}),t.NAME="GiftFutureProxy",t}(sc),bv=function(e){function t(){t.__super.call(this,"GiftProxy",new Ai)}o(t,"modules.gift.model.GiftProxy",e);var i=t.prototype;return i.receive=function(e){return this.info.update(e),this.info},s(0,i,"info",function(){return this.data}),t.NAME="GiftProxy",t}(sc),Ev=function(e){function t(){t.__super.call(this,"RebateMediator")}o(t,"modules.rebate.view.RebateMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new _R),this.view.rebatePearlView.btnReceive.clickHandler=new h(this,this.takeRebate),this.view.rebatePearlView.btnReset.clickHandler=new h(this,this.onReset)},i.listNotificationInterests=function(){return["SHOW_REBATE_PAGE","QUERY_REBATE","TAKE_REBATE","UPDATA_REBATE","RECIVE_PAY_TOTAL_INFO"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("RebateProxy");if(null!=t)switch(e.getName()){case"SHOW_REBATE_PAGE":0==t._rebateRedPointFlag&&(t._rebateRedPointFlag=1,t.freshRebate()),null!=t.rebateData&&this.view.popup();break;case"USER_INIT":t._rebateRedPointFlag=0;break;case"UPDATA_REBATE":t.freshRebate();break;case"QUERY_REBATE":t.freshRebate();case"TAKE_REBATE":case"RECIVE_PAY_TOTAL_INFO":null!=t.rebateData&&this.updatView()}},i.updatView=function(){this.view.updataView(),this.checkPaytotal();var e=this.facade.retrieveProxy("RebateProxy"),t=0;null!=e&&e.rebateData&&(t=e.rebateData.extRestTime),t>0?(this.view.rebatePearlView.btnReset.visible=!0,this.view.rebatePearlView.lbReset.visible=!0,this.view.rebatePearlView.lbReset.text="可重置"+t+"次"):(this.view.rebatePearlView.btnReset.visible=!1,this.view.rebatePearlView.lbReset.visible=!1)},i.checkPaytotal=function(){var e=this.facade.retrieveProxy("RebateProxy");if(null!=e){var t=e.getGoldAim();if(0>=t)return this.view.rebatePearlView.txtContent.text="当前"+this.needName+"档位可享受在接下去48小时内，商城珍宝处购买灵珠碎片参与满减活动",void(this.view.rebatePearlView.txtContent.color="#00dc24");var i=this.facade.retrieveProxy("PayTotalPropxy");if(i.info){var n=e.getNeedTotalPay(t);i.info.totalRmb<n?(this.view.rebatePearlView.txtContent.text="当前"+this.needName+"达到"+n+"可享受在接下去48小时内，商城珍宝处购买灵珠碎片参与满减活动",this.view.rebatePearlView.txtContent.color="#e70626",this.view.rebatePearlView.htmlContent2.appendHTML("<font color='#e70626'>（当前"+this.needName+"未满足）</font>")):(this.view.rebatePearlView.txtContent.text="当前"+this.needName+"已达到"+n+"可享受在接下去48小时内，商城珍宝处购买灵珠碎片参与满减活动",this.view.rebatePearlView.txtContent.color="#00dc24"),n>=268888?this.view.rebatePearlView.htmlContent2.appendHTML("<font color='#fffc00'>（额外条件：灵珠套装9级）</font>"):n>=128888&&this.view.rebatePearlView.htmlContent2.appendHTML("<font color='#fffc00'>（额外条件：灵珠套装8级）</font>")}else this.view.rebatePearlView.txtContent.text="当前"+this.needName+"档位可享受在接下去48小时内，商城珍宝处购买灵珠碎片参与满减活动",this.view.rebatePearlView.txtContent.color="#ffffff"}},i.takeRebate=function(){var e=this.facade.retrieveProxy("RebateProxy");if(null!=e){var t=e.getMinAwardGolden();if(0>=t)return void this.sendNotification("prompted_info_show",{info:"没有返利可领取"});var i=this.facade.retrieveProxy("PayTotalPropxy");if(i.info){var n=e.getNeedTotalPay(t);if(i.info.totalRmb<n)return void this.sendNotification("prompted_info_show",{info:"需要"+this.needName+"达到"+n+"才可领取"})}pc.instance.takeRebate(t)}},i.onReset=function(){var e=this.facade.retrieveProxy("RebateProxy");null!=e&&e.rebateData&&e.rebateData.extRestTime>0&&this.sendNotification("POP_CONFIRM_INFO",{info:"确认重置当前进度吗?",handler:h.create(this,function(e){e&&pc.instance.resetRebate()})},"duble")},s(0,i,"needName",function(){return v.OPEN_PAYMENT?"累充":"累计积分"}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="RebateMediator",t}(lc),xv=function(e){function t(){this._sending=!1,t.__super.call(this,"PlayNoticeMediator")}o(t,"modules.notice.view.PlayNoticeMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new AR),this.vi.bars.selectedIndex=-1,this.vi.bars.selectHandler=new h(this,this.onBar)},i.listNotificationInterests=function(){return["SHOW_PLAY_NOTICE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PLAY_NOTICE":this.vi.bars.selectedIndex=0,this.vi.popup()}},i.onBar=function(e){this.onFresh()},i.onFresh=function(){switch(this.vi.bars.selectedIndex){case 0:"p01"==X.FID?this.queryNotice("PLAYNOTICE_p01"):this.queryNotice("PLAYNOTICE");break;case 1:this.queryNotice("PLAYBOOK")}},i.queryNotice=function(e){if(this._sending)return void this.sendNotification("prompted_info_show",{info:"正在请求刷新,请稍后"});this.vi.bars.mouseEnabled=!1,this._sending=!0;var t=this;if(T.IS_ON_MINI)B.getHttp(X.LOGIN_API_PLATFORM_NOTICE,{pid:e},null,function(e){t.onHttp(e)},function(e){t.onHttpErr(null)});else{var i=new Iu;i.on("complete",this,this.onHttp),i.on("error",this,this.onHttpErr),i.send(X.LOGIN_API_PLATFORM_NOTICE+"?pid="+e,null,"get","json")}},i.onHttp=function(e){this._sending=!1,this.vi.bars.mouseEnabled=!0,this.vi.showHtml(e.info)},i.onHttpErr=function(e){this._sending=!1,this.vi.bars.mouseEnabled=!0,this.vi.showHtml("网络请求超时,请稍后再试")},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="PlayNoticeMediator",t._PID_NOTICE="PLAYNOTICE",t._PID_BOOKS="PLAYBOOK",
t}(lc),Sv=function(e){function t(){t.__super.call(this)}o(t,"modules.handbook.controller.HandbookPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Pi.HANDBOOK_QUERY,wv),this.facade.registerCommand(Pi.HANDBOOK_LIGHT_EQUIP,Cv,!0)},t}(rc),wv=function(e){function t(){t.__super.call(this)}o(t,"modules.handbook.controller.commands.HandbookQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("HandbookBattle",t.value),n=this.facade.retrieveProxy("HandbookProxy"),o=n.receive(i);this.sendNotification("RECEIVE_HANDBOOK_BATTLE",o)}},t}(rc),Cv=function(e){function t(){t.__super.call(this)}o(t,"modules.handbook.controller.commands.HandbookCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("Handbook",t.value),n=this.facade.retrieveProxy("HandbookProxy");n.receiveDetail(i);switch(this.sendNotification("RECEIVE_PLAYER_HANDBOOK",n.vo),t.cmd){case 2:this.sendNotification("prompted_info_show",{info:"成功激活部件"})}}},t}(rc),Tv=function(e){function t(){t.__super.call(this,"HandbookProxy",new Oi)}o(t,"modules.handbook.model.HandbookProxy",e);var i=t.prototype;return i.receive=function(e){return this.vo.update(e),this.vo},i.receiveDetail=function(e){var t=e.level,i=this.vo.getBook(t);return null==i?(i=new Ri(e),this.vo.setBook(t,i)):i.update(e),i},i.getDetail=function(e){var t=this.vo.getBook(e);return t},s(0,i,"vo",function(){return this.data}),t.NAME="HandbookProxy",t}(sc),Iv=function(e){function t(){this._limitGift=null,this._actCodeHead=null,this._invitCodeHead=null,this._invitMiniCodeHead=null,this._signInHead=null,this._limitGiftClock=null,this._btnDrop=null,this._gift=null,this.timespan=new ao(0),t.__super.call(this,"GiftMediator")}o(t,"modules.gift.view.GiftMediator",e);var n=t.prototype;return n.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.listVisit),this._limitGift=this.view.getChildByName("limitGift"),this._actCodeHead=this.view.getChildByName("actCode"),this._invitCodeHead=this.view.getChildByName("invitCode"),this._invitMiniCodeHead=this.view.getChildByName("invitMiniCode"),this._signInHead=this.view.getChildByName("dailySign"),this._limitGiftClock=this._limitGift.getChildByName("clock"),this._limitGiftClock.changeText("");var i=this._limitGift.getChildByName("btnBuy");i.clickHandler=new h(this,this.onBuy),this._btnDrop=this._limitGift.getChildByName("btnDrop"),this._btnDrop.clickHandler=new h(this,this.onDrop),this.hideOrGift(!1)},n.hideOrGift=function(e){this.getViewComponent(),this._limitGift.visible=e,this._signInHead.y=e?this._limitGift.y+this._limitGift.height+10:this._limitGift.y,this._actCodeHead.y=this._signInHead.y+this._signInHead.height+10,this._invitCodeHead.visible?(this._invitCodeHead.y=this._actCodeHead.y+this._actCodeHead.height+10,this.view.height=this._invitCodeHead.y+this._invitCodeHead.height):this._invitMiniCodeHead.visible?(this._invitMiniCodeHead.y=this._actCodeHead.y+this._actCodeHead.height+10,this.view.height=this._invitMiniCodeHead.y+this._invitMiniCodeHead.height):this.view.height=this._actCodeHead.y+this._actCodeHead.height},n.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","RECIVE_LIMIT_GIFT_INFO","RECIVE_SP_GIFT_INFO","CHECK_6RMB_SPGIFT","DISPLAYE_GIFT_PANLE","USER_LEVEL_CHANGE"]},n.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":i.timer.clear(this,this.onGiftClock),Ts.removeItem("_6RMB_POP_DATE"),this._gift&&this._gift.clear(),this.hideOrGift(!1);break;case"RECIVE_LIMIT_GIFT_INFO":case"RECIVE_SP_GIFT_INFO":this.fresh(e.getBody());break;case"CHECK_6RMB_SPGIFT":break;case"USER_LEVEL_CHANGE":case"DISPLAYE_GIFT_PANLE":this._gift&&this.fresh(this._gift)}},n.fresh=function(e){if(this._gift=e,this.btnDrop.visible=!1,null!=e&&e.isActing&&v.OPEN_PAYMENT){this.hideOrGift(!0);var t=this.limitGift.getChildByName("oldPrice");t.changeText("原价 "+e.cfg.priceOld+(X.openJade()&&!qt.canJumpPay(e.cfg.priceNow)?"仙玉":"元")),t=this.limitGift.getChildByName("nowPrice"),t.changeText("现价 "+e.cfg.priceNow+(X.openJade()&&!qt.canJumpPay(e.cfg.priceNow)?"仙玉":"元"));var n=this.limitGift.getChildByName("info");n.style.fontSize=24,n.style.bold=!0,n.style.color="#ffffff",n.style.align="center",n.innerHTML=e.cfg.info;var o=this.limitGift.getChildByName("btnBuy");e.isWaitingAward?(i.timer.clear(this,this.onGiftClock),this.limitGiftClock.changeText(""),o.text.changeText("领取"),eu.instance.getLimitAward(this._gift.limitId)):(i.timer.loop(1e3,this,this.onGiftClock),o.text.changeText("购买")),t=this.limitGift.getChildByName("tips"),t.changeText("小贴士：倒计时结束后，礼包会自动消失哦");var s=g.database.getData("giftlimit",this._gift.limitId+1);s&&s.openLevel()<=Ng.userVO.getValue(1006)&&(this.btnDrop.visible=!0)}else v.OPEN_PAYMENT?this._showSpGift(e):(this.hideOrGift(!1),i.timer.clear(this,this.onGiftClock))},n._showSpGift=function(e){var t=e.getSpItems(201),n=Ng.userVO.getValue(1006);if(t&&30>n){this.hideOrGift(!0);var o=this.limitGift.getChildByName("oldPrice");o.changeText(""),o=this.limitGift.getChildByName("nowPrice"),o.changeText("仅需30"+(X.openJade()&&!qt.canJumpPay(30)?"仙玉":"元"));var s=this.limitGift.getChildByName("info");s.style.fontSize=24,s.style.bold=!0,s.style.color="#ffffff",s.style.align="center",s.innerHTML="<font color='#e70626'>直升至30级，并赠送本职业红色装备一套</font>";var r=this.limitGift.getChildByName("btnBuy");i.timer.clear(this,this.onGiftClock),r.text.changeText("购买"),o=this.limitGift.getChildByName("tips"),o.changeText("小贴士：提升等级至30级，一套红色装备。")}else this.hideOrGift(!1),i.timer.clear(this,this.onGiftClock)},n.onGiftClock=function(){if(this._gift){var e=this._gift.limitEndTime-g.clock.currentTime;e>0?(this.timespan.update(e),this.limitGiftClock.changeText("倒计时 "+this.timespan.formatStringFullHour)):(i.timer.clear(this,this.onGiftClock),eu.instance.query())}},n.onBuy=function(){if(this._gift)if(this._gift.isWaitingAward)eu.instance.getLimitAward(this._gift.limitId);else{var e=this.facade.retrieveProxy("MarketProxy");if(this._gift.isActing)e.payment(this._gift.payItemId);else{var t=this._gift.getSpItems(201);t&&e.payment(401)}}},n.onDrop=function(){var e=this;this._gift&&this.sendNotification("POP_CONFIRM_INFO",{sureLb:"确认放弃",info:"放弃后该礼包将永久消失，并会出现新的礼包，是否确认？<br><font color='#e70626'>确认后该礼包将永久消失。</font>",handler:h.create(this,function(t){t&&eu.instance.dropCurrentLimit(e._gift.limitId)})})},s(0,n,"limitGiftClock",function(){return this.getViewComponent(),this._limitGiftClock}),s(0,n,"btnDrop",function(){return this.getViewComponent(),this._btnDrop}),s(0,n,"limitGift",function(){return this.getViewComponent(),this._limitGift}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="GiftMediator",t}(lc),Av=function(e){function t(){this.vo=null,t.__super.call(this,"GiftFutureMediator")}o(t,"modules.gift.view.GiftFutureMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new vR)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","USER_INIT","USER_LEVEL_CHANGE","OPEN_FUTURE_GIFT_PAGE","RECIVE_FUTURE_GIFT_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this.updateVO(null);break;case"USER_INIT":tu.instance.query();break;case"OPEN_FUTURE_GIFT_PAGE":this.vo&&this.vi.popup();break;case"USER_LEVEL_CHANGE":this.vo&&this.updateVO(this.vo);break;case"RECIVE_FUTURE_GIFT_INFO":this.updateVO(e.getBody())}},i.updateVO=function(e){if(!T.IS_ON_MINI||!Or.onIOS||X.openJade()||null==e||e.isBuyed(Ni.FUTURE_GIFT2.id)||e.isBuyed(Ni.FUTURE_GIFT18.id)||e.isBuyed(Ni.FUTURE_GIFT30.id)){var t=this.facade.retrieveMediator("HomeMediator"),i=t.view.btn2Yuan;if(null==i.clickHandler&&(i.clickHandler=new h(this,this.onClick)),this.vo=e,null==e)return void this.vi.close();var n=Ng.userVO.getValue(1006);if(n<Ni.FUTURE_GIFT2.level)i.visible=!1;else{var o=this.checkGift(n,Ni.FUTURE_GIFT2,i);o||(o=this.checkGift(n,Ni.FUTURE_GIFT18,i)),o||(o=this.checkGift(n,Ni.FUTURE_GIFT30,i)),o||(o=Ni.FUTURE_GIFT30)}this.vi.showGift(e,o),this.sendNotification("FRESH_HEAD_BAR")}},i.onClick=function(){if(this.vo){this.vi.popup();var e=this.facade.retrieveMediator("HomeMediator"),t=e.view.btn2Yuan,i=t.getChildByName("red"),n=t.getChildByName("lightR");i.visible=!1,n.visible=!1}},i.checkGift=function(e,t,i){var n=i.getChildByName("red"),o=i.getChildByName("lightR"),s=this.facade.retrieveProxy("GiftFutureProxy"),r=!1,a=t.id;if(this.vo.isBuyed(a)){var l,h=this.vo.getLastAwarded(a),c=g.database.getData("giftfuture",a),u=!1,d=!1;for(var p in c.awardsDic.keys)if(l=c.awardsDic.keys[p],h>=l);else{if(e>=l){u=!0;break}d=!0}o.visible=!1,n.visible=u,i.visible=u,s.redPoint=u,s.setShow(u||d),r=u||d}else o.visible=!0,n.visible=!0,i.visible=t==Ni.FUTURE_GIFT2,s.setShow(!0),r=!0;return i.label=t.name,this.sendNotification("UPDATA_HOME_LIST_ACT"),r?t:null},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="GiftFutureMediator",t}(lc),Nv=function(e){function t(){this.roleM=null,this.skillM=null,this.meridianM=null,this.boneM=null,this.petM=null,this.cultureM=null,this.bookM=null,this.allianceM=null,this.petSkM=null,t.__super.call(this,"RolegroupMediator")}o(t,"modules.rolegroup.view.RolegroupMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new tL),this.roleM.view.mouseThrough=!0,this.skillM.view.mouseThrough=!0,this.meridianM.view.mouseThrough=!0,this.boneM.view.mouseThrough=!0,this.petM.view.mouseThrough=!0,this.cultureM.view.mouseThrough=!0,this.bookM.view.mouseThrough=!0,this.allianceM.view.mouseThrough=!0,this.petSkM.view.mouseThrough=!0,this.view.btnBar.labels="人物,灵根,宗门,技能,经脉,图鉴,灵宠,境界",this.view.btnBar.selectHandler=new h(this,this.onSelect),this.view.tabSec.selectHandler=new h(this,this.onSecTab)},i.onRegister=function(){this.roleM=new Mg,this.skillM=new r_,this.meridianM=new Db,this.boneM=new xm,this.petM=new rb,this.cultureM=new hx,this.bookM=new Bv,this.allianceM=new Mm,this.petSkM=new lb,this.facade.registerMediator(this.roleM),this.facade.registerMediator(this.skillM),this.facade.registerMediator(this.meridianM),this.facade.registerMediator(this.boneM),this.facade.registerMediator(this.petM),this.facade.registerMediator(this.cultureM),this.facade.registerMediator(this.bookM),this.facade.registerMediator(this.allianceM),this.facade.registerMediator(this.petSkM)},i.listNotificationInterests=function(){return["USER_INIT","CLEAR_CACHE_DATA","OPEN_ROLEGROUP_VIEW","ROLE_VIEW","SHOW_PET_PAGE","OPEN_SKILL_VIEW","OPEN_MERIDIAN","SHOW_BONE_PAGE","OPEN_HANDBOOK_VIEW","OPEN_ALLIANCE_VIEW","OPEN_PET_SKILL_BOOK"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":break;case"CLEAR_CACHE_DATA":this.view.btnBar.selectedIndex=-1;break;case"OPEN_ROLEGROUP_VIEW":this.view.popup(),this.view.btnBar.selectedIndex<0&&(this.view.btnBar.selectedIndex=0);break;case"ROLE_VIEW":this.view.btnBar.selectedIndex=0,this.view.popup();break;case"OPEN_SKILL_VIEW":this.view.btnBar.selectedIndex=3,this.view.popup();break;case"OPEN_MERIDIAN":this.view.btnBar.selectedIndex=4,this.view.popup();break;case"SHOW_BONE_PAGE":this.view.btnBar.selectedIndex=1,this.view.popup();break;case"SHOW_PET_PAGE":this.view.btnBar.selectedIndex=6,this.view.popup();break;case"OPEN_HANDBOOK_VIEW":this.view.tabSec.selectedIndex=0,this.view.btnBar.selectedIndex=5,this.view.popup();break;case"OPEN_ALLIANCE_VIEW":this.view.btnBar.selectedIndex=2,this.view.popup();break;case"OPEN_PET_SKILL_BOOK":this.view.tabSec.selectedIndex=1,this.view.btnBar.selectedIndex=5,this.view.popup()}},i.onSecTab=function(e){this.onSelect(this.view.btnBar.selectedIndex)},i.onSelect=function(e){switch(this.roleM.view.removeSelf(),this.skillM.view.removeSelf(),this.meridianM.view.removeSelf(),this.boneM.view.removeSelf(),this.petM.view.removeSelf(),this.cultureM.view.removeSelf(),this.bookM.view.removeSelf(),this.allianceM.view.removeSelf(),this.petSkM.view.removeSelf(),this.view.txtEmptyInfo.visible=!1,this.view.tabSec.visible=!1,e){case 0:this.view.addChild(this.roleM.view),this.roleM.fresh();break;case 3:this.view.addChild(this.skillM.view),this.skillM.onShow();break;case 4:Ng.userVO.getValue(1006)<7?(this.sendNotification("prompted_info_show",{info:"7级开启经脉"}),this.view.txtEmptyInfo.visible=!0,this.view.txtEmptyInfo.text="7级开启经脉。"):(this.view.addChild(this.meridianM.view),this.meridianM.onShow());break;case 1:this.view.addChild(this.boneM.view),this.boneM.onShow();break;case 2:Ng.userVO.getValue(1006)<5?(this.sendNotification("prompted_info_show",{info:"5级开启宗门"}),this.view.txtEmptyInfo.visible=!0,this.view.txtEmptyInfo.text="5级开启宗门。"):(this.view.addChild(this.allianceM.view),this.allianceM.onShow());break;case 5:this.view.tabSec.visible=!0,0==this.view.tabSec.selectedIndex?Ng.userVO.getValue(1006)<15?(this.sendNotification("prompted_info_show",{info:"15级开启装备图鉴"}),this.view.txtEmptyInfo.visible=!0,this.view.txtEmptyInfo.text="15级开启装备图鉴。"):(this.view.addChild(this.bookM.view),this.bookM.onShow()):Ng.userVO.getValue(1006)<50?(this.sendNotification("prompted_info_show",{info:"50级开启灵宠技能图鉴"}),this.view.txtEmptyInfo.visible=!0,this.view.txtEmptyInfo.text="50级开启灵宠技能图鉴。"):(this.view.addChild(this.petSkM.view),this.petSkM.onShow());break;case 6:Ng.userVO.getValue(1006)<20?(this.sendNotification("prompted_info_show",{info:"20级可捕捉灵宠"}),this.view.txtEmptyInfo.visible=!0,this.view.txtEmptyInfo.text="20级后可在兽魂森林的灵宠乐园里捕捉。"):(this.view.addChild(this.petM.view),this.petM.onShow());break;case 7:Ng.userVO.getValue(1006)<35?(this.sendNotification("prompted_info_show",{info:"35级开启境界"}),this.view.txtEmptyInfo.visible=!0,this.view.txtEmptyInfo.text="35级开启境界。"):(this.view.addChild(this.cultureM.view),this.cultureM.onShow())}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="RolegroupMediator",t.INDEX_ROLE=0,t.INDEX_BONE=1,t.INDEX_ALLIANCE=2,t.INDEX_SKILL=3,t.INDEX_MERIDIAN=4,t.INDEX_BOOK=5,t.INDEX_PET=6,t.INDEX_CULTURE=7,t}(lc),Pv=function(e){function t(){t.__super.call(this)}o(t,"modules.alcm.controller.AlcmPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Mi.ALCM_LIST,Lv),this.facade.registerCommand(Mi.ALCM_PUSH_CHG,Lv),this.facade.registerCommand(Mi.ALCM_DONATE,kv,!0),this.facade.registerCommand(Mi.ALCM_LINE_ON,kv,!0),this.facade.registerCommand(Mi.ALCM_LINE_OFF,kv,!0),this.facade.registerCommand(Mi.ALCM_TAKE_AWARD,kv,!0),this.facade.registerCommand(Mi.ALCM_TAKE_AWARD_GOLD,kv,!0),this.facade.registerCommand(Mi.ALCM_LOGS,Rv,!0),this.facade.registerCommand(Mi.ALCM_VIDEO,Mv,!0)},t}(rc),Rv=function(e){function t(){t.__super.call(this)}o(t,"modules.alcm.controller.commands.AlcmLogCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AllianceMineLogList",t.value);this.sendNotification("RECEIVE_ALCM_LOGS",i.list)}else this.sendNotification("RECEIVE_ALCM_LOGS",null)},t}(rc),Lv=function(e){function t(){t.__super.call(this)}o(t,"modules.alcm.controller.commands.AlcmInfoCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n=this.facade.retrieveProxy("AlcmProxy");switch(t.cmd){case 0:i=v.protoCodec.getResponseDecoder().decode("AllianceMineList",t.value);var o=n.receiveList(i.list);this.sendNotification("RECEIVE_ALCM_LIST",o);break;case 101:i=v.protoCodec.getResponseDecoder().decode("AllianceMine",t.value);var s=n.change(i);this.sendNotification("RECEIVE_ALCM_CHG",s)}}},t}(rc),Ov=function(e){function t(){t.__super.call(this,"HeadBarMediator")}o(t,"modules.head.view.HeadBarMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new SN),(T.IS_ON_MINI||"IOS"==X.PLATE_FORM)&&(this.view.btnStrong.visible=!1),this.view.taskbar.on("click",this,this.onTask),this.view.txtSilver.on("click",this,this.onCurrency),this.view.txtGold.on("click",this,this.onCurrency),X.openJade()?(this.view.icjade.visible=!0,this.view.txtJade.on("click",this,this.onCurrency),this.view.txtJade.visible=!0):(this.view.icjade.visible=!1,this.view.txtJade.visible=!1)},n.onRegister=function(){this.showHide(!1)},n.listNotificationInterests=function(){return["USER_INIT","USER_CURRENCY_CHANGE","CLEAR_CACHE_DATA","SHOW_HOME_PAGE","SELECT_WUXING_VIEW","RECEIVE_SETTING_INFO","SETTING_SUCCESS","SHOW_HIDE_HEAD_BAR","FRESH_HEAD_BAR","SHOW_TASK_PAGE","CLOSE_TASK_PAGE","RECEIVE_TASK_INFO","SHOW_CHAT_MARQUEE"]},n.handleNotification=function(e){switch(e.getName()){case"RECEIVE_SETTING_INFO":case"SETTING_SUCCESS":this.settingFresh();break;case"USER_INIT":Su.instance.query(),0!=Ng.userVO.getValue(1004)&&(this.showHide(!0),this.desplay()),this.checkLoceTime();case"USER_CURRENCY_CHANGE":Ng.userVO&&this.view.fresh(Ng.userVO);break;case"SHOW_HOME_PAGE":this.showHide(e.getBody()),this.desplay();break;case"SELECT_WUXING_VIEW":case"CLEAR_CACHE_DATA":this.showHide(!1);break;case"SHOW_TASK_PAGE":this.view.showTask(null);break;case"CLOSE_TASK_PAGE":case"RECEIVE_TASK_INFO":var t=this.facade.retrieveMediator("TaskMediator");if(t&&t.view.isPopup)return void this.view.showTask(null);var i=this.facade.retrieveProxy("TaskPropxy");i.vo&&i.vo.lastTask&&""!=i.vo.lastTask.title?1==i.vo.lastState?this.view.showTask(i.vo.lastTask.title,!0):this.view.showTask(i.vo.lastTask.title):this.view.showTask(null);break;case"SHOW_HIDE_HEAD_BAR":this.showHide(e.getBody()),this.desplay();break;case"FRESH_HEAD_BAR":this.desplay();break;case"SHOW_CHAT_MARQUEE":e.getBody()&&cN.send(e.getBody())}},n.showHide=function(e){e?i.stage.addChild(this.view):this.view.removeSelf()},n.desplay=function(){},n.settingFresh=function(){var e=this.facade.retrieveProxy("SettingProxy");e&&e.vo&&this.view.changeTaskShowSet(e.vo.tasktopshow)},n.onTask=function(e){if("btnTask"==e.target.name){var t=this.facade.retrieveProxy("TaskPropxy");if(t.vo&&t.vo.lastTask&&1==t.vo.lastState){mu.instance.getAward(t.vo.lastTask.id);var i=this.facade.retrieveMediator("SmithyMediator");i&&i.smithySuccessPop&&i.smithySuccessPop.isPopup||this.sendNotification("CLOSE_ALL_DIALOG")}}this.sendNotification("SHOW_TASK_PAGE")},n.onCurrency=function(e){e.target==this.view.txtSilver?this.sendNotification("ROLE_VIEW"):e.target==this.view.txtGold?X.openJade()?this.sendNotification("OPEN_MARCKET_VIEW","元宝"):this.sendNotification("OPEN_MARCKET_VIEW","充值"):e.target==this.view.txtJade&&this.sendNotification("SHOW_PAYMENT_ADD_JADE")},n.checkLoceTime=function(){var e=g.clock.isTimeSyn();e?(this.view.lbDate.visible=!1,i.timer.clear(this,this.onClock)):(this.view.lbDate.visible=!0,i.timer.loop(1e3,this,this.onClock))},n.onClock=function(){this.view.lbDate.text=ro.parseSystem(ro.newDate(g.clock.currentTime))},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="HeadBarMediator",t}(lc),Mv=function(e){function t(){t.__super.call(this)}o(t,"modules.alcm.controller.commands.AlcmVideoCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AlcaVideo",t.value);this.sendNotification("RECEIVE_ALCM_VIDEO_DETAIL",i)}else this.sendNotification("prompted_info_show",{info:"录像已过期"})},t}(rc),Dv=function(e){function t(){this._mines=null,this._member2team=null,t.__super.call(this,"AlcmProxy"),this._mines=[],this._member2team=new uo}o(t,"modules.alcm.model.AlcmProxy",e);var i=t.prototype;return i.receiveList=function(e){this._mines.length=0,this._member2team.clear();for(var t=0;4>t;t++)this._mines[t]=null;var i;for(var n in e){i=e[n];var o=new ki(i);this._mines[o.index]=o;var s;for(var r in o.mids)s=o.mids[r],s>0&&this._member2team.set(s,o.index)}return this._mines},i.change=function(e){var t=e.index,i=this._mines[t],n=NaN;if(null==i)i=new ki(e),this._mines[t]=i;else{var o;for(o in i.mids)n=i.mids[o],this._member2team.set(n,-1);i.update(e)}var o;for(o in i.mids)n=i.mids[o],this._member2team.set(n,i.index);return i},i.queryTeam=function(e){var t=this._member2team.get(e);return null==t?-1:t},s(0,i,"mines",function(){return this._mines}),t.NAME="AlcmProxy",t}(sc),kv=function(e){function t(){t.__super.call(this)}o(t,"modules.alcm.controller.commands.AlcmOptionCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n=this.facade.retrieveProxy("AlcmProxy");switch(t.cmd){case 2:case 3:i=v.protoCodec.getResponseDecoder().decode("AllianceMine",t.value);var o=n.change(i);this.sendNotification("RECEIVE_ALCM_CHG",o);break;case 4:case 7:this.sendNotification("prompted_info_show",{info:"领取宗门宝箱成功"}),this.updatePlayerAlc(t);break;case 1:this.sendNotification("prompted_info_show",{info:"捐献物品成功"}),this.updateAlliance(t)}}},i.updatePlayerAlc=function(e){var t=v.protoCodec.getResponseDecoder().decode("PlayerAlliance",e.value),i=this.facade.retrieveProxy("AllianceProxy"),n=i.receivePlayerAlliance(t);this.sendNotification("RECIVE_PLAYER_ALLIANCE",n)},i.updateAlliance=function(e){var t=v.protoCodec.getResponseDecoder().decode("Alliance",e.value),i=this.facade.retrieveProxy("AllianceProxy"),n=i.receiveAlliance(t);this.sendNotification("RECIVE_ALLIANCE",n,"alcm")},t}(rc),Bv=function(e){function t(){this._lightEquipSelect=null,this._requested=!1,this._choseData=null,this._mousePosHandler=new h(this,this.onMousePos),t.__super.call(this,"HandbookMediator")}o(t,"modules.handbook.view.HandbookMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new wN(this._mousePosHandler)),this._lightEquipSelect=new DR,this._lightEquipSelect.equips.mouseEnabled=!0,this._lightEquipSelect.equips.mouseHandler=new h(this,this.onEquipSelect)},i.listNotificationInterests=function(){return["RECEIVE_HANDBOOK_BATTLE","RECEIVE_PLAYER_HANDBOOK","CLEAR_CACHE_DATA","USER_LEVEL_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this._requested=!1;var t=this.facade.retrieveProxy("HandbookProxy");t&&t.vo&&t.vo.clear();break;case"RECEIVE_HANDBOOK_BATTLE":case"RECEIVE_PLAYER_HANDBOOK":this.view.showInfo(e.getBody());break;case"USER_LEVEL_CHANGE":var i=Ng.userVO.getValue(1006);i>=25&&i%5==0&&iu.instance.query()}},i.onShow=function(){0==this._requested&&(iu.instance.query(),this._requested=!0)},i.onMousePos=function(e,t){if("click"==e.type){var i=e.target;if(this._choseData=i.dataSource,this._choseData.q>=6)return;var n,o=[],s=this.facade.retrieveProxy("GoodsProxy"),r=s.listItems(0);for(var a in r)if(n=r[a],!(null==n||n.count<=0)&&1==n.goodsType){var l=n;l.equipConf.level==Math.abs(this._choseData.lv)&&l.equipConf.position==this._choseData.p&&(null==this._choseData.q||this._choseData.q<5?l.equipConf.quality>=5&&o.push(n):5==this._choseData.q&&6==l.equipConf.quality&&o.push(n))}this.lightEquipSelect.popEquips(o)}},i.onEquipSelect=function(e,t){var i=this;"click"==e.type&&"btnUse"==e.target.name&&this._choseData&&this.sendNotification("POP_CONFIRM_INFO",{info:"将装备放入图鉴，放入后<font color='#e70626'>该装备会消失</font>，是否继续？",handler:h.create(this,function(e){if(e){var n=i.lightEquipSelect.equips.getCell(t).dataSource;iu.instance.lightEquip(i._choseData.lv,n.id),i.lightEquipSelect.close()}})})},s(0,i,"lightEquipSelect",function(){return this.getViewComponent(),this._lightEquipSelect}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="HandbookMediator",t}(lc),Vv=function(e){function t(){t.__super.call(this)}o(t,"modules.samsara.controller.SamsaraPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Bi.MERIDIAN_INFO,Gv),this.facade.registerCommand(Bi.MERIDIAN_MOVE,Gv,!0),this.facade.registerCommand(Bi.MERIDIAN_FIGHT,Gv,!0),this.facade.registerCommand(Bi.MERIDIAN_CHALLENGE,Gv,!0),this.facade.registerCommand(Bi.MERIDIAN_DROP_CHALLENGE,Gv,!0)},t}(rc),Fv=function(e){function t(){t.__super.call(this,"SamsaraProxy",new Fi)}o(t,"modules.samsara.model.SamsaraProxy",e);var i=t.prototype;return i.receive=function(e){return this.vo.update(e),this.vo},s(0,i,"vo",function(){return this.data}),t.NAME="SamsaraProxy",t}(sc),Gv=function(e){function t(){t.__super.call(this)}o(t,"modules.samsara.controller.commands.SamsaraCommand",e);var i=t.prototype;return i.execute=function(e){var t=this,i=e.getBody();if(i.success){var n=v.protoCodec.getResponseDecoder().decode("PlayerSamsara",i.value),o=this.facade.retrieveProxy("SamsaraProxy"),s=o.vo.baseId,r=o.vo.hp,a=o.vo.mp,l=o.receive(n);switch(this.sendNotification("RECEIVE_SAMSARA",l),i.cmd){case 3:this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,15);break;case 2:var c=l.hp-r,u=l.mp-a;c>0||u>0?this.sendNotification("prompted_info_show",{info:"你的生命值和法力值恢复了35%"}):0>c&&this.sendNotification("prompted_info_show",{info:"你踩到了陷阱，血量损失"+-c});break;case 1:if(s>0&&l.baseId>=s+1){var d="闯关成功，获得奖励：<br>",p=Vi.queryAwards(s,l.baseId-1);if(p.props.keys.length>0){var f=p.props.keys[0],_=p.props.get(f),m=g.database.getData("props",f);d+="<font color='"+N.getColor(m.quality)+"'>【"+m.name+"】*"+_+"</font>",p.props.keys.length>1&&(f=p.props.keys[1],_=p.props.get(f),m=g.database.getData("props",f),d+="<font color='"+N.getColor(m.quality)+"'>【"+m.name+"】*"+_+"</font>"),d+="<br><font color='#00dc24'>攻击+"+p.attack+"、防御+"+p.defense+"、生命+"+p.hp+"、法力+"+p.mp+"</font><br>"}d+="<font color='#0084ff'>真元："+p.gas+"</font><br>",this.sendNotification("SHOW_FIGHT_PAGE_OTHER","close",15),this.sendNotification("POP_CONFIRM_INFO",{info:d,sureLb:"继  续",cancelLb:"退  出",handler:h.create(this,function(e){e?l.baseId>96&&(t.sendNotification("OPEN_SAMSARA","close"),t.sendNotification("prompted_info_show",{info:"后续层级暂未开启"})):t.sendNotification("OPEN_SAMSARA","close")})})}break;case 4:this.sendNotification("prompted_info_show",{info:"开始跨级挑战"});break;case 5:this.sendNotification("prompted_info_show",{info:"放弃跨级挑战，轮回本已重置"})}}},t}(rc),Hv=function(e){function t(){this._init=!1,this._alcId=0,this._hasPower=!1,this.memberMouse=new h(this,this.onMouseMember),this.memberRender=new h(this,this.onMemeberRender),t.__super.call(this,"AlcmMediator")}o(t,"modules.alcm.view.AlcmMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this;this.setViewComponent(new MR),this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onMouseTeam),this.view.btnDonate.clickHandler=new h(this,this.onDonate),this.view.btnGetBox.clickHandler=new h(this,this.onAward),this.view.btnGetBoxGold.clickHandler=new h(this,this.onAward,[!0]),this.view.btnNtc.clickHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",17)})},i.onRegister=function(){this.facade.registerMediator(new Xv),this.facade.registerMediator(new Uv),this.facade.registerMediator(new zv)},i.listNotificationInterests=function(){return["OPEN_ALCM_PAGE","RECIVE_ALLIANCE","RECIVE_PLAYER_ALLIANCE","RECEIVE_ALCM_LIST","RECEIVE_ALCM_CHG","USER_ALLIANCE_CHANGE","CLEAR_CACHE_DATA"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALCM_PAGE":var t=Ng.userVO.getValue(7011);if(0>=t)return void this.sendNotification("prompted_info_show",{info:"未加入宗门"});(this._alcId<=0||this._alcId!=t)&&(this._init=!1),this._init||(this._init=!0,this.view.list.visible=!1,this._alcId=Ng.userVO.getValue(7011),kc.instance.listMembers(1),nu.instance.list(this._alcId)),this.view.popup(),this.freshAlc(),this.freshAward();break;case"RECIVE_ALLIANCE":this.view.isPopup&&this.freshAlc();break;case"USER_ALLIANCE_CHANGE":0==Ng.userVO.getValue(7011)&&(this._init=!1,this._hasPower=!1,this.view.close());break;case"RECIVE_PLAYER_ALLIANCE":this.view.isPopup&&this.freshAward();break;case"RECEIVE_ALCM_LIST":case"RECEIVE_ALCM_CHG":this.freshMines();break;case"CLEAR_CACHE_DATA":this._init=!1,this._hasPower=!1}},i.freshAlc=function(){var e=this.facade.retrieveProxy("AllianceProxy");if(e&&e.alliance){this.view.lbLevel.text="矿场等级："+e.alliance.mineLevel;var t=g.database.getData("alliancemine",e.alliance.mineLevel+1);t?this.view.lbExp.text=e.alliance.mineExp+"/"+t.needExp:this.view.lbExp.text=e.alliance.mineExp+"/--",e.alliance.mineLevel>=20?(this.view.lbNeedAlc.text="（等级已满）",this.view.lbNeedAlc.color="#c527ff"):(this.view.lbNeedAlc.text="（升级需要宗门"+(e.alliance.mineLevel+1)+"级）",e.alliance.mineLevel>=e.alliance.allianceLevel?this.view.lbNeedAlc.color="#e70626":this.view.lbNeedAlc.color="#00dc24"),this.view.lbMax.color="#fffc00";var i=Di.getBoxMaxPerDay(e.alliance.allianceLevel);this.view.lbMax.text="每队最多可获得宗门宝箱"+i+"个（出战队员额外奖励3个）",e.alliance.masterId==Ng.userVO.unitId.id?this._hasPower=!0:this._hasPower=!1}},i.freshAward=function(){var e=this.facade.retrieveProxy("AllianceProxy");if(e&&e.playerAlliance.inited()){var t=e.playerAlliance.mineAward-e.playerAlliance.mineAwardToday,i="我的宗门宝箱：";t>0&&(i+=t),e.playerAlliance.mineAwardToday>0&&(i=i+"+"+e.playerAlliance.mineAwardToday+"(今日)"),this.view.lbBox.text=i,this.view.btnGetBox.visible=e.playerAlliance.mineAward>0,this.view.btnGetBoxGold.visible=e.playerAlliance.mineAwardToday>0}else this.view.lbBox.text="",this.view.btnGetBox.visible=!1,this.view.btnGetBoxGold.visible=!1},i.freshMines=function(){var e=this.facade.retrieveProxy("AlcmProxy");this.view.list.dataSource=e.mines,this.view.list.visible=!0},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("tName");n.text="采集"+(t+1)+"队";var o=e.getChildByName("lbNotOpen"),s=e.getChildByName("lbIron"),r=e.getChildByName("lbFighted"),a=e.getChildByName("lbtips"),l=e.getChildByName("btnLog"),h=e.getChildByName("tMember");if(null==i){n.visible=!1,o.visible=!0;var c=t>0?5*t:1;o.text="矿场等级达到"+c+"级开启",s.visible=!1,r.visible=!1,a.visible=!1,l.visible=!1,h.visible=!1}else n.visible=!0,o.visible=!1,s.visible=!0,r.visible=!0,a.visible=!0,l.visible=!0,h.visible=!0,s.text="采集铁矿："+i.iron,r.text="主动进攻："+i.wintime+"胜/"+i.losetime+"败",h.renderHandler=this.memberRender,h.mouseEnabled=!0,h.mouseHandler=this.memberMouse,h.dataSource=i.mids},i.onMouseTeam=function(e,t){if("click"==e.type&&"btnLog"==e.target.name){var i=this.view.list.getCell(t).dataSource;this.sendNotification("OPEN_ALCM_LOGS_PAGE",i)}},i.onMouseMember=function(e,t){if("click"==e.type&&"btnJoin"==e.target.name){var i=e.target.parent,n=i.dataSource,o=e.target.parent.parent.parent.parent;if(o=o.dataSource,o.wintime>0&&!Di.chgTeamFreeTime())return void this.sendNotification("prompted_info_show",{info:"队伍获胜奖励未结算，当前无法下阵"});n>0?nu.instance.lineOff(o.id,n):this.sendNotification("OPEN_ALCM_LINEUP_PAGE",{mine:o,index:t})}},i.onMemeberRender=function(e,t){var i,n=e.dataSource,o=e.getChildByName("nature"),s=e.getChildByName("btnJoin");if(n>0){var r=this.facade.retrieveProxy("AllianceProxy"),a=r.getMemeberInfo(n);a?(i=e.getChildByName("name"),i.text=a.name,Ng.userVO.unitId.id==a.playerId?i.color="#00dc24":i.color="#0084ff",o.index=a.nature-1,o.x=i.x+i.width,i=e.getChildByName("level"),i.text=a.level+"级",i.x=o.x+o.width,s.label="下阵"):(i=e.getChildByName("name"),i.text="未上阵",i.color="#b0bcb0",o.index=-1,i=e.getChildByName("level"),i.text="",i.x=o.x+o.width,s.label="上阵")}else i=e.getChildByName("name"),i.text="未上阵",i.color="#b0bcb0",o.index=-1,i=e.getChildByName("level"),i.text="",i.x=o.x+o.width,s.label="上阵";s.visible=this._hasPower},i.onDonate=function(){this.sendNotification("OPEN_ALCM_DONATE_PAGE")},i.onAward=function(e){void 0===e&&(e=!1);var t=this.facade.retrieveProxy("AllianceProxy");if(t&&t.playerAlliance.inited())if(t.playerAlliance.mineAward>0)if(e){if(t.playerAlliance.mineAwardToday<=0)return void this.sendNotification("prompted_info_show",{info:"暂无今日奖励可领取"});if(Ng.userVO.getValue(1010)<100)return void this.sendNotification("prompted_info_show",{info:"双倍领取需要花费100元宝"});var i=t.playerAlliance.mineAward-t.playerAlliance.mineAwardToday,n="确认花费100元宝,领取宝箱";n=i>0?n+(i+2*t.playerAlliance.mineAwardToday)+"个("+i+"+"+t.playerAlliance.mineAwardToday+"*2)":n+2*t.playerAlliance.mineAwardToday+"个("+t.playerAlliance.mineAwardToday+"*2)",this.sendNotification("POP_CONFIRM_INFO",{info:n,handler:h.create(this,function(e){e&&nu.instance.takeAwardByGold()})})}else nu.instance.takeAward();else this.sendNotification("prompted_info_show",{info:"暂无奖励可领取，每日20点结算矿场奖励"})},s(0,i,"view",function(){return this.getViewComponent();
}),t.NAME="AlcmMediator",t}(lc),Uv=function(e){function t(){this._mine=null,this._index=0,t.__super.call(this,"AlcmLineupMediator")}o(t,"modules.alcm.view.AlcmLineupMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new LR),this.view.list.renderHandler=new h(this,this.onRender),this.view.tbFilter.selectHandler=new h(this,this.onFilter),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onSelect)},i.listNotificationInterests=function(){return["OPEN_ALCM_LINEUP_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALCM_LINEUP_PAGE":var t=e.getBody();this._mine=t.mine,this._index=t.index,this.onFilter(this.view.tbFilter.selectedIndex),this.view.popup()}},i.onFilter=function(e){var t=this.facade.retrieveProxy("AllianceProxy");if(t&&t.memberPager){var i=t.memberPager.pager.recoards;if(1==e)this.view.list.dataSource=i;else{var n,o=this.facade.retrieveProxy("AlcmProxy"),s=[];for(var r in i)n=i[r],o.queryTeam(n.playerId)<0&&s.push(n);this.view.list.dataSource=s}}},i.onRender=function(e,t){var i=e.dataSource;if(null!=i){var n=this.facade.retrieveProxy("AlcmProxy"),o=e.getChildByName("name");o.text=i.name,Ng.userVO.unitId.id==i.playerId?o.color="#00dc24":o.color="#0084ff";var s=e.getChildByName("nature");s.index=i.nature-1,s.x=o.x+o.width,o=e.getChildByName("level"),o.text=i.level+"级",o.x=s.x+s.width;var r=e.getChildByName("btnJoin"),a=n.queryTeam(i.playerId);o=e.getChildByName("state"),0>a?(o.text="未上阵",o.color="#b0bcb0",r.label="上阵"):(o.text="采集"+(a+1)+"队",o.color="#00dc24",r.label="换位")}},i.onSelect=function(e,t){if("click"==e.type&&"btnJoin"==e.target.name){if(this._mine.wintime>0&&!Di.chgTeamFreeTime())return void this.sendNotification("prompted_info_show",{info:"队伍获胜奖励未结算，当前无法换阵"});var i=this.view.list.getCell(t).dataSource;i&&(nu.instance.lineOn(this._mine.id,i.playerId,this._index),this.view.close())}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcmLineupMediator",t}(lc),zv=function(e){function t(){this._mine=null,t.__super.call(this,"AlcmVideoMediator")}o(t,"modules.alcm.view.AlcmVideoMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new RR),this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onClick)},i.listNotificationInterests=function(){return["OPEN_ALCM_LOGS_PAGE","RECEIVE_ALCM_LOGS"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALCM_LOGS_PAGE":this._mine=e.getBody(),this.view.list.visible=!1,this.view.lbEmpty.visible=!1,nu.instance.logs(this._mine.id),this.view.team.text="采集"+(this._mine.index+1)+"队",this.view.popup();break;case"RECEIVE_ALCM_LOGS":this.showLogs(e.getBody())}},i.showLogs=function(e){null==e||0==e.length?(this.view.list.visible=!1,this.view.lbEmpty.visible=!0):(this.view.list.dataSource=e,this.view.list.visible=!0,this.view.lbEmpty.visible=!1)},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("log");n.style.fontSize=24,n.style.leading=6,n.style.color="#ffffff";var o=e.getChildByName("btnPlay"),s=ro.parseSimple(ro.newDate(i.time))+"<br>";1==i.type?(this._mine.id==i.mineIdA?i.mineIdB<0?s+=i.value>0?"&nbsp;&nbsp;发现一个被怪物守护的资源宝箱，打败获得了<font color='#e70626'>"+i.value+"</font>铁矿":"&nbsp;&nbsp;队伍实力不足，未能击败妖兽，无法获得宝箱":(s+="&nbsp;&nbsp;攻打宗门<font color='#e70626'>【"+i.nameB+"】</font>的<font color='#0084ff'>采集"+(i.indexB+1)+"队</font>",s+=i.value>0?"<font color='#00dc24'>胜利</font>，获得铁矿"+i.value:"<font color='#e70626'>失败</font>，损失铁矿"+-i.value):(s+="&nbsp;&nbsp;阻击宗门<font color='#e70626'>【"+i.nameA+"】</font>的<font color='#0084ff'>采集"+(i.indexA+1)+"队</font>",s+=i.value>0?"<font color='#e70626'>失败</font>，损失铁矿"+i.value:"<font color='#00dc24'>胜利</font>，获得铁矿"+-i.value),o.visible=!0):2==i.type&&(s+="&nbsp;&nbsp;<font color='#0084ff'>探索过程中，寻得一宝箱，真是福缘不浅啊！～</font>",o.visible=!1),n.innerHTML=s},i.onClick=function(e,t){if("click"==e.type&&"btnPlay"==e.target.name){var i=this.view.list.getCell(t).dataSource;nu.instance.lookVD(i.videoId)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcmVideoMediator",t}(lc),Wv=function(e){function t(){t.__super.call(this)}o(t,"modules.star.controller.commands.StarQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeString(t.value),n=this.facade.retrieveProxy("StarProxy"),o=n.recieve(i);this.sendNotification("RECEIVE_STAR_INFO",o)}},t}(rc),Yv=function(e){function t(){t.__super.call(this,"StarProxy")}o(t,"modules.star.model.StarProxy",e);var i=t.prototype;return i.recieve=function(e){return null==this.data?this.data=new Hi(e):this.playerStar.update(e),this.playerStar},s(0,i,"playerStar",function(){return this.data}),t.NAME="StarProxy",t}(sc),qv=function(e){function t(){t.__super.call(this)}o(t,"modules.star.controller.commands.StarUpgradeCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeString(t.value),n=this.facade.retrieveProxy("StarProxy"),o=n.recieve(i);this.sendNotification("RECEIVE_STAR_INFO",o)}else this.sendNotification("prompted_info_show",{info:"强化异常："+t.status})},t}(rc),Kv=function(e){function t(){t.__super.call(this)}o(t,"modules.star.controller.StarPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Gi.STAR_QUERY,Wv,!0),this.facade.registerCommand(Gi.STAR_UPGRADE,qv,!0)},t}(rc),Xv=function(e){function t(){this._selectedP=null,t.__super.call(this,"AlcmDonateMediator")}o(t,"modules.alcm.view.AlcmDonateMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new OR),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onMouse),this.view.list.renderHandler=new h(this,this.onRender);var e=this.view.confirm.getChildByName("inputNum");e.on("blur",this,this.onBlur),this.view.confirm.on("click",this,this.onConfirm);var t=new h(this,this.onFilter);this.view.typeFilter.selectHandler=t,this.view.natureFilter.selectHandler=t,this.view.qualityFilter.selectHandler=t},i.listNotificationInterests=function(){return["OPEN_ALCM_DONATE_PAGE","RECIVE_ALLIANCE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALCM_DONATE_PAGE":this.freshProps(),this.view.list.visible=!0,this.view.confirm.visible=!1,this.view.popup();break;case"RECIVE_ALLIANCE":"alcm"==e.getType()&&this.freshProps()}},i.onBlur=function(e){var t=this.view.confirm.getChildByName("inputNum"),i=vo["int"](t.text);0>=i?(i=1,t.text="1"):i>this._selectedP.count&&(i=this._selectedP.count,t.text=this._selectedP.count+"");var n=Di.queryExpPrice(this._selectedP.propConf),o=Di.queryDonatePrice(this._selectedP.propConf),s=this.view.confirm.getChildByName("lbExp");s.text=n*i+"",s=this.view.confirm.getChildByName("lbDonate"),s.text=o*i+""},i.onConfirm=function(e){switch(e.target.name){case"btnSure":var t=this.view.confirm.getChildByName("inputNum"),i=vo["int"](t.text);nu.instance.donate(this._selectedP.id,i);break;case"btnCancel":break;default:return}this.view.confirm.visible=!1,this.view.list.visible=!0},i.popConfirm=function(){var e=this.view.confirm.getChildByName("props");Ln.renderProps(e,this._selectedP);var t=this.view.confirm.getChildByName("inputNum");t.text="1",this.onBlur()},i.onMouse=function(e,t){"click"==e.type&&"btnDonate"==e.target.name&&(this._selectedP=this.view.list.getCell(t).dataSource,this.popConfirm(),this.view.confirm.visible=!0,this.view.list.visible=!1)},i.onFilter=function(e){void 0===e&&(e=-1);var t=this.view.typeFilter.selectedIndex;2==t?(this.view.natureFilter.visible=!1,this.view.lbNature.visible=!1):(this.view.natureFilter.visible=!0,this.view.lbNature.visible=!0),this.freshProps()},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("props");Ln.renderProps(n,i);var o=Di.queryExpPrice(i.propConf),s=Di.queryDonatePrice(i.propConf),r=e.getChildByName("lbPrice");r.text="每个：矿场经验+"+o+"，贡献+"+s},i.freshProps=function(e){void 0===e&&(e=-1);var t=[],i=[],n=[],o=this.view.typeFilter.selectedIndex,s=this.view.qualityFilter.selectedIndex,r=this.view.natureFilter.selectedIndex;1==s?s=5:2==s&&(s=6),this.view.natureFilter.visible||(r=0);var a,l,h=this.facade.retrieveProxy("GoodsProxy"),c=h.listItems(0);for(var u in c)if(l=c[u],!(null==l||l.count<=0||l.quality<5||s>0&&l.quality!=s||0!=l.goodsType)){if(a=l,r>0&&a.propConf.nature!=r)continue;if(1==a.propConf.propType||2==a.propConf.propType){if(2==o)continue;if(a.propConf.level<40)continue;a.quality>=6?i.push(a):2==a.propConf.propType&&t.push(a)}else if(3==a.propConf.propType){if(1==o)continue;n.push(a)}}t=t.concat(i),t.sort(this.compareFunctionProp),n.sort(this.compareFunctionProp),t=t.concat(n),this.view.list.dataSource=t,t.length<=0?this.view.emptTxt.visible=!0:this.view.emptTxt.visible=!1},i.compareFunctionProp=function(e,t){var i=e.propConf.id,n=t.propConf.id,o=Math.floor(i/1e6),s=Math.floor(n/1e6);return o==s?i>n?1:n>i?-1:t.count-e.count:(o=i%1e6,s=n%1e6,o>s?1:s>o?-1:i>n?1:n>i?-1:0)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcmDonateMediator",t}(lc),Qv=function(e){function t(){this.leftDay=0,this.nowDay=0,this.minIdCanAward=-1,this.maxIdAwarded=-1,this.todayAwarded=!1,t.__super.call(this,"ActivityPayWeekProxy")}o(t,"modules.activitypayweek.model.ActivityPayWeekProxy",e);var i=t.prototype;return i.setData=function(t){e.prototype.setData.call(this,t),t?this.todayAwarded=ro.isTodayTs(this.payweekdata.actTime):this.todayAwarded=!1},i.getActTypeObj=function(){return g.database.getJsonObj("activityPayWeek")},i.hasAward=function(){return null==this.data?!1:-1==this.payweekdata.awardId?!1:0==this.payweekdata.awardId?!0:this.payweekdata.awardId>0&&this.payweekdata.awardId<7?!this.todayAwarded:!1},s(0,i,"payweekdata",function(){return this.data}),t.NAME="ActivityPayWeekProxy",t}(sc),jv=function(e){function t(){t.__super.call(this)}o(t,"modules.activitypayweek.controller.ActivityPayWeekPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(zi.ACTIVITY_PAY_WEEK_QUERY,Jv),this.facade.registerCommand(zi.ACTIVITY_PAY_WEEK_BUY,Jv,!0)},t}(rc),Zv=function(e){function t(){this.samsaraHead=null,this._awdsView=null,this._challengView=null,this._lastMapStr=null,this._offsetX=0,this._offsetY=0,this._vo,t.__super.call(this,"SamsaraMediator")}o(t,"modules.samsara.view.SamsaraMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new jR),this._awdsView=new $R,this._challengView=new ZR,this.cleanView();for(var e=[],t=0;t<this.view.map.repeatY;t++)for(var i=0;i<this.view.map.repeatX;i++)e.push({tx:i,ty:t});this.view.map.dataSource=e,this.view.map.renderHandler=new h(this,this.onMapRender),this.view.btnUp.parent.on("mouseup",this,this.onArrow),this.view.btnDrop.clickHandler=new h(this,this.onDrop),this._challengView.btnSure.clickHandler=new h(this,this.onChalleng,[!0]),this._challengView.btnDrop.clickHandler=new h(this,this.onChalleng,[!1])},n.cleanView=function(){this.view.lbTitle.text="",this.view.lbBuf.text="",this.view.lbHas.text="",this.view.awdGas.text="",this.view.awdProp.text="",this.view.awdAttr.text="",this.view.totalAttr.text="",this.view.map.visible=!1,this.view.btnDown.visible=!1,this.view.btnUp.visible=!1,this.view.btnLeft.visible=!1,this.view.btnRight.visible=!1},n.freshHead=function(e){if(null==this.samsaraHead){var t=this.facade.retrieveMediator("HomeMediator");if(null==t||null==t.view||null==t.view.spcailDungeon)return;if(this.samsaraHead=t.view.spcailDungeon.getChildByName("samsaraHead"),null==this.samsaraHead)return;this.samsaraHead.on("click",this,this.onHead)}this.samsaraHead.getChildByName("lbFighting").visible=e&&e.fighting,this.samsaraHead.getChildByName("btnEnter").visible=e&&e.baseId>0;var i=this.samsaraHead.getChildByName("title"),n=this.samsaraHead.getChildByName("txLevel"),o=this.samsaraHead.getChildByName("btnEnter");Ng.userVO.getValue(1006)<38?(n.text="38级开启",i.color="#e70626",o.visible=!1,i.text=""):(n.text="",e&&e.baseId>0?(i.text="当前层数："+(e.challengeId>0?e.challengeId:e.baseId),o.visible=!0):(i.text="载入数据中...",o.visible=!1),i.color="#ffffff");var s=this.samsaraHead.getChildByName("btnAwds");s.visible=o.visible},n.listNotificationInterests=function(){return["USER_INIT","USER_LEVEL_CHANGE","OPEN_SAMSARA","RECEIVE_SAMSARA"]},n.handleNotification=function(e){var t=this.facade.retrieveProxy("SamsaraProxy"),i=Ng.userVO.getValue(1006);switch(e.getName()){case"USER_INIT":t.vo.baseId=0,this._lastMapStr=null,this.cleanView(),i>=38?ou.instance.query():(this.freshHead(null),this._vo=null);break;case"OPEN_SAMSARA":"close"==e.getBody()?(this.view.close(),this._challengView.close()):(this.view.popup(),this.checkChallenge());break;case"USER_LEVEL_CHANGE":0==t.vo.baseId&&i>=38&&ou.instance.query();break;case"RECEIVE_SAMSARA":this.freshHead(e.getBody()),this.fresh(e.getBody()),this.checkChallenge()}},n.checkChallenge=function(){this._vo&&-1==this._vo.challengeId&&this.view.isPopup?this._challengView.popInfo(this._vo):this._challengView.close()},n.onDrop=function(){this.sendNotification("POP_CONFIRM_INFO",{info:"<font color='#fffc00'>放弃跨级挑战，地图将重置到最近通关层</font>是否确认？",handler:h.create(this,function(e,t){e&&ou.instance.dropChalleng()})})},n.onChalleng=function(e){var t,i=0;e?(i=this._vo.baseId+this._challengView.cbCross.selectedIndex+1,t="确认选择<font color='#fffc00'>跨级挑战第"+i+"层</font>吗？"):(i=this._vo.baseId,t="确认选择<font color='#fffc00'>放弃本次跨级挑战</font>吗？"),this.sendNotification("POP_CONFIRM_INFO",{info:t,handler:h.create(this,function(e,t){e&&ou.instance.challeng(i)})})},n.fresh=function(e){if(this._vo=e,null!=e&&0!=e.baseId){var t,i=0;e.challengeId>0?(this.view.lbCross.visible=!0,this.view.btnDrop.visible=!0,this.view.lbCross.text="【跨"+(e.challengeId-e.baseId)+"级挑战中】",i=e.challengeId,t=Vi.queryAwards(this._vo.baseId,this._vo.challengeId)):(this.view.lbCross.visible=!1,this.view.btnDrop.visible=!1,i=e.baseId,t=Vi.queryAwards(this._vo.baseId,this._vo.baseId)),this.view.lbTitle.text="轮回之地第"+i+"层",t.endcfg.corrosion>0?(this.view.lbBuf.text="【腐蚀】"+t.endcfg.corrosion+"级",this.view.lbBuf.color="#c527ff"):this.view.lbBuf.text="",this.view.lbNtc.x=this.view.lbBuf.x+this.view.lbBuf.width,this.view.lbHas.text="剩余怪物："+e.hasMonster,this.view.lbHas.color="#e70626",this.view.awdGas.text=t.gas+"真元",this.view.awdGas.color="#00dc24";var n;if(t.props.keys.length>0){var o=t.props.keys[0],s=t.props.get(o);n=g.database.getData("props",o),this.view.awdProp.text="【"+n.name+"】*"+s,this.view.awdProp.color=N.getColor(n.quality),this.view.awdProp.x=this.view.awdGas.x+this.view.awdGas.width,t.props.keys.length>1?(o=t.props.keys[1],s=t.props.get(o),n=g.database.getData("props",o),this.view.awdProp1.text="【"+n.name+"】*"+s,this.view.awdProp1.color=N.getColor(n.quality),this.view.awdProp1.x=this.view.awdProp.x+this.view.awdProp.width):this.view.awdProp1.text="",this.view.awdAttr.text="攻击+"+t.attack+"、防御+"+t.defense+"、生命+"+t.hp+"、法力+"+t.mp,this.view.awdAttr.color="#00dc24"}else this.view.awdProp.text="",this.view.awdProp1.text="",this.view.awdAttr.text="";if(this.view.totalAttr.color="#0084ff",e.baseId>1){var r=g.database.getData("samsara",e.baseId-1);r&&r.totalAttack>0?this.view.totalAttr.text="攻击+"+r.totalAttack+"、防御+"+r.totalDefense+"、生命+"+r.totalHP+"、法力+"+r.totalMP:this.view.totalAttr.text=""}else this.view.totalAttr.text="";this.freshPlayer(e),this.view.map.visible=!0}},n.onMapRender=function(e,t,i){void 0===i&&(i=!1);var n=e.dataSource;if(n){var o=this.facade.retrieveProxy("SamsaraProxy"),s=o.vo;if(s&&0!=s.baseId){var r=n.ty-this._offsetY,a=n.tx-this._offsetX,l=e.getChildByName("bg");if(0==a||8==a||0==r||11==r?l.alpha=.3:l.alpha=1,i||a==s.x&&r==s.y){this.view.showHead(s);return e.addChild(this.view.head),void this.view.cArrow.pos(this.view.map.x+e.x+e.width/2,this.view.map.y+e.y+e.height/2)}var h=s.getP(a,r);if(9==h){var c=this.view.getEmptyMontain();e.addChild(c)}else if(0==h);else if(h>0&&6>h){var u=this.view.getEmptyMonster();e.addChild(u);var d=this.view.getEmptyNature();d.index=h-1,e.addChild(d);var p=null,f=s.getArroundMonsterEffect(a,r);f>0?(p=this.view.getEmptyArrow(),p.skin="samsara/arrow_red.png",e.addChild(p)):0>f&&(p=this.view.getEmptyArrow(),p.skin="samsara/arrow_blue.png",e.addChild(p))}else if(8==h){var _=this.view.getEmptyDrug();e.addChild(_)}}}},n.freshPlayer=function(e){var t=this.view.map.repeatX>>1,i=this.view.map.repeatY>>1,n=t-1-e.x,o=i-1-e.y;if(n>0)n=0;else if(0>n){var s=this.view.map.repeatX-9;s>n&&(n=s)}if(o>0)o=0;else if(0>o){var r=this.view.map.repeatY-12;r>o&&(o=r)}if(this._lastMapStr!=e.mapStr||n!=this._offsetX||o!=this._offsetY)this._lastMapStr=e.mapStr,this._offsetX=n,this._offsetY=o,this.view.clearMap(),this.view.map.refresh();else{var a=(e.y+this._offsetY)*this.view.map.repeatX+e.x+this._offsetX,l=this.view.map.getCell(a);this.onMapRender(l,a,!0)}this.view.btnDown.visible=!0,this.view.btnUp.visible=!0,this.view.btnLeft.visible=!0,this.view.btnRight.visible=!0;var h=0;e.x>0?(h=e.getP(e.x-1,e.y),9==h?this.view.btnLeft.visible=!1:0!=h?this.view.btnLeft.alpha=0:this.view.btnLeft.alpha=1):this.view.btnLeft.visible=!1,e.x<8?(h=e.getP(e.x+1,e.y),9==h?this.view.btnRight.visible=!1:0!=h?this.view.btnRight.alpha=0:this.view.btnRight.alpha=1):this.view.btnRight.visible=!1,e.y>0?(h=e.getP(e.x,e.y-1),9==h?this.view.btnUp.visible=!1:0!=h?this.view.btnUp.alpha=0:this.view.btnUp.alpha=1):this.view.btnUp.visible=!1,e.y<11?(h=e.getP(e.x,e.y+1),9==h?this.view.btnDown.visible=!1:0!=h?this.view.btnDown.alpha=0:this.view.btnDown.alpha=1):this.view.btnDown.visible=!1},n.onArrow=function(e){var t=e.target.parent;if(t&&1==t.alpha){var n=this.facade.retrieveProxy("SamsaraProxy"),o=n.vo;if(o.fighting)return void this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,15);var s=o.x,r=o.y;switch(e.target.name){case"btnUp":r-=1;break;case"btnDown":r+=1;break;case"btnLeft":s-=1;break;case"btnRight":s+=1;break;default:return}var a=o.getP(s,r);if(9==a)return void console.log("samsara move erro point:"+s,",",r);a>0&&6>a?ou.instance.fight(s,r):ou.instance.move(s,r),t.alpha=.5,i.timer.once(300,this,function(){t.alpha=1})}},n.onHead=function(e){var t=this.facade.retrieveProxy("SamsaraProxy"),i=t.vo;switch(e.target.name){case"btnEnter":i.baseId>96?this.sendNotification("prompted_info_show",{info:"后续层级暂未开启"}):(this.view.popup(),this.checkChallenge());break;case"btnAwds":this._awdsView.showAwd(i)}},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="SamsaraMediator",t}(lc),Jv=function(e){function t(){t.__super.call(this)}o(t,"modules.activitypayweek.controller.commands.ActivityPayWeekCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 1:var i=v.protoCodec.getResponseDecoder().decode("ActivityPayWeek",t.value),n=this.facade.retrieveProxy("ActivityPayWeekProxy");n.setData(i),this.sendNotification("ACTIVIT_PAY_WEEK_INFO");break;case 2:this.showAward(t,"领取成功")}else 1==t.cmd&&this.sendNotification("ACTIVIT_PAY_WEEK_INFO")},i.showAward=function(e,t){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",e.value),n=Te.value(i);n.isEmpty?this.sendNotification("prompted_info_show",{info:t}):this.sendNotification("POP_COMMON_AWARDS_INFO",{title:t,awards:n,desc:""})},t}(rc),$v=function(e){function t(){t.__super.call(this)}o(t,"modules.alcboss.controller.commands.AlcBossRankCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i;switch(t.cmd){case 2:i=v.protoCodec.getResponseDecoder().decode("AlcBossRankList",t.value),this.sendNotification("RECIEVE_ALC_BOSS_RANK",i.list);break;case 7:i=v.protoCodec.getResponseDecoder().decode("AllianceListPager",t.value);var n=new xt;n.update(i),this.sendNotification("RECIVE_ALC_BOSS_PASS_RANK",n)}}},t}(rc),ey=function(e){function t(){t.__super.call(this)}o(t,"modules.alcboss.controller.commands.AlcBossLogCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AlcBossLogList",t.value);this.sendNotification("RECIEVE_ALC_BOSS_LOG",i.list)}},t}(rc),ty=function(e){function t(){t.__super.call(this)}o(t,"modules.alcboss.controller.commands.AlcBossCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n=this.facade.retrieveProxy("AlcBossProxy");switch(t.cmd){case 5:case 1:case 6:i=v.protoCodec.getResponseDecoder().decode("AlcBoss",t.value),i=n.recieveBossInfo(i),this.sendNotification("RECIEVE_ALC_BOSS",i);break;case 4:this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,13);case 0:i=v.protoCodec.getResponseDecoder().decode("PlayerAlcBoss",t.value),i=n.receivePlayerBoss(i),this.sendNotification("RECIEVE_PLAYER_ALC_BOSS",i);break;case 8:i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value);var o=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"宗门BOSS奖励",awards:o,desc:""})}}else switch(t.status){case-37:this.sendNotification("prompted_info_show",{info:"凶兽正在被攻击，请稍后再尝试"})}},t}(rc),iy=function(e){function t(){this._alcBoss=null,t.__super.call(this,"AlcBossProxy",new qi)}o(t,"modules.alcboss.model.AlcBossProxy",e);var i=t.prototype;return i.recieveBossInfo=function(e){return this._alcBoss=e,this._alcBoss},i.receivePlayerBoss=function(e){return this.data=e,this.playerBoss},s(0,i,"playerBoss",function(){return this.data}),s(0,i,"boss",function(){return this._alcBoss}),t.NAME="AlcBossProxy",t}(sc),ny=function(e){function t(){t.__super.call(this)}o(t,"modules.alcboss.controller.AlcBossPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Wi.ALCBOSS_QUERY_BOSS,ty),this.facade.registerCommand(Wi.ALCBOSS_QUERY_PLAYER_BOSS,ty),this.facade.registerCommand(Wi.ALCBOSS_FIGHT,ty,!0),this.facade.registerCommand(Wi.ALCBOSS_TAKE_AWARD,ty,!0),this.facade.registerCommand(Wi.ALCBOSS_LIST_LOGS,ey),this.facade.registerCommand(Wi.ALCBOSS_LIST_RANK,$v),this.facade.registerCommand(Wi.ALCBOSS_AUTHORIZE,ty,!0),this.facade.registerCommand(Wi.ALCBOSS_RESET_BOSS,ty,!0),this.facade.registerCommand(Wi.ALCBOSS_BOSS_RANK,$v)},t}(rc),oy=function(e){function t(){this.freshAble=!1,this.playerStar=null,this.equip=null,this._paytotal=null,this.starCfg=null,this.starLv=-1,this.freshAbleStone=!1,this.starStones=null,this.protectStones=null,this.lastCostStoneCount=0,t.__super.call(this,"StarMediator")}o(t,"modules.star.view.StarMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new CR),this.view.btnSubmit.clickHandler=new h(this,this.onSubmit)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","OPEN_STAR_VIEW","RECEIVE_STAR_INFO","USER_VIP_STAR_FAIL_RETURN","FRESH_GOODS_PACK","RECIVE_PAY_TOTAL_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":var t=this.facade.retrieveProxy("StarProxy").playerStar;t&&t.clear(),this._paytotal=null,this.playerStar=null,this.starLv=-1;break;case"RECIVE_PAY_TOTAL_INFO":this._paytotal=e.getBody();break;case"OPEN_STAR_VIEW":this.playerStar?(this.equip=e.getBody(),this.starLv=this.playerStar.getStar(this.equip.equipConf.position),this.starLv>=20?this.sendNotification("prompted_info_show",{info:"当前已是最高强化等级"}):(this.view.popup(),this.freshStones(),this.freshAble=!0,this.fresh())):this.starLv=-1;break;case"RECEIVE_STAR_INFO":this.playerStar=e.getBody();var i=this.starLv;if(this.view.isPopup&&this.playerStar&&this.equip)if(this.starLv=this.playerStar.getStar(this.equip.equipConf.position),i<this.starLv){this.sendNotification("prompted_info_show",{info:"恭喜您强化成功"});var n=g.database.getData("equipStar",this.starLv);if(6==this.equip.equipConf.position)this.sendNotification("prompted_info_show",{info:"生命上限 +"+n.hpPercent/100+"%"});else if(7==this.equip.equipConf.position)this.sendNotification("prompted_info_show",{info:"法力上限 +"+n.hpPercent/100+"%"});else{var o=this.equip.baseAttr[0],s=I.getName(o.key),r=vo["int"](o.value*(Math.pow(1.1,this.starLv)-1));this.sendNotification("prompted_info_show",{info:s+" "+I.getValueStr(o.key,r,!0)})}}else{i>this.starLv?this.sendNotification("prompted_info_show",{info:"强化失败，星级减少"+(i-this.starLv)+"，可以选择护灵符保护"}):this.sendNotification("prompted_info_show",{info:"强化失败，星级保留"});var a=Ng.userVO.getValue(7003);if(a&&this.lastCostStoneCount){var l=vo["int"](this.lastCostStoneCount*a/1e4);this.sendNotification("prompted_info_show",{info:"返还灵石："+l+"个"})}}this.freshStones(),this.freshAble=!0,this.fresh(),this.freshFailReturn();break;case"FRESH_GOODS_PACK":var h=e.getBody();h.contain(0)&&(this.freshAbleStone=!0,this.freshStones());break;case"USER_VIP_STAR_FAIL_RETURN":this.freshFailReturn()}},i.freshFailReturn=function(){},i.fresh=function(){this.freshAble&&this.view.isPopup&&this.playerStar&&this.equip&&(this.playerStar&&(this.starLv=this.playerStar.getStar(this.equip.equipConf.position)),Ln.renderEquip(this.view.equipA,this.equip,this.starLv),Ln.renderEquip(this.view.equipB,this.equip,this.starLv+1),this.freshStoneCountShow())},i.freshStoneCountShow=function(){if(this.view.checkProtect.visible=this.starLv>5,this.view.txtHoldTimes.visible=!1,this.starCfg=g.database.getData("equipStar",this.starLv+1),this.starCfg){this.view.txtStoneNum.color="#e70626";var e=this.starCfg.needStone;1==this.equip.equipConf.position?e*=4:6==this.equip.equipConf.position||7==this.equip.equipConf.position?e*=2:8!=this.equip.equipConf.position&&9!=this.equip.equipConf.position&&10!=this.equip.equipConf.position||(e*=6),this.starStones?(this.view.txtStoneNum.text=e+"/"+this.starStones.count,e<=this.starStones.count&&(this.view.txtStoneNum.color="#00dc24")):this.view.txtStoneNum.text=e+"/0";var t=1;this.starLv>=10&&(t+=this.starLv-9),this.protectStones?this.view.checkProtect.label="使用护灵符："+t+"/"+this.protectStones.count:this.view.checkProtect.label="使用护灵符："+t+"/0",this.view.txtSuccPercent.text=this.starCfg.succPercent/100+"%";var i=this.playerStar?this.playerStar.getFail(this.equip.equipConf.position):0;if(this.playerStar&&i){var n=Ui.getSuccPercentAdd(this.equip.equipConf.position,i);this.view.txtSuccPercentAdd.text="+ "+n+"%"}else this.view.txtSuccPercentAdd.text="";if(this._paytotal&&this._paytotal.isStarExHold()){var o=Ui.getHoldTime(this.equip.equipConf.position,this.starLv);2147483647>o&&(this.view.txtHoldTimes.visible=!0,i>=o?(this.view.txtHoldTimes.text="已强化失败"+i+"次，本次强化必然成功",this.view.checkProtect.visible=!1):this.view.txtHoldTimes.text="最多强化失败"+o+"次，之后必然成功（已失败"+i+"次）")}this.view.equipB.visible=!0,this.view.btnSubmit.visible=!0}else this.view.txtStoneNum.text="",this.view.txtSuccPercent.text="已是最高等级",this.view.equipB.visible=!1,this.view.txtSuccPercentAdd.text="",this.view.btnSubmit.visible=!1},i.freshStones=function(){if(this.freshAbleStone&&this.view.isPopup){var e=this.facade.retrieveProxy("GoodsProxy"),t=e.listItems(0);this.starStones=null,this.protectStones=null;var i;for(var n in t)if(i=t[n],!(null==i||i.count<=0)&&0==i.goodsType){var o=i;500002==o.propConf.id?this.protectStones=i:500001==o.propConf.id&&(this.starStones=i)}this.freshStoneCountShow(),this.freshAbleStone=!1}},i.onSubmit=function(e){var t=this;if(this.starLv<0)return void this.sendNotification("prompted_info_show",{info:"强化数据未载入,请稍后再试."});if(this.starStones&&this.starCfg){var i=this.starCfg.needStone;if(1==this.equip.equipConf.position?i*=4:6==this.equip.equipConf.position||7==this.equip.equipConf.position?i*=2:8!=this.equip.equipConf.position&&9!=this.equip.equipConf.position&&10!=this.equip.equipConf.position||(i*=6),this.lastCostStoneCount=i,this.starStones.count<i)return void this.sendNotification("prompted_info_show",{info:"需要"+i+"个灵石。"});if(this.starLv<=5||0==this.view.checkProtect.visible)return void(this.starLv>5?su.instance.upgrade(this.equip.equipConf.position,this.starStones.id,0,!0):su.instance.upgrade(this.equip.equipConf.position,this.starStones.id,0,!1));if(!this.view.checkProtect.selected){return void(this.starLv>5&&x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"您未使用护灵符，若强化失败，强化星级将下降。",handler:h.create(this,function(e){e&&su.instance.upgrade(t.equip.equipConf.position,t.starStones.id,0,!1)})},"duble"))}var n=1;if(this.starLv>=10&&(n+=this.starLv-9),!this.protectStones||this.protectStones.count<n){var o=this._paytotal&&this._paytotal.isMarcket90percent(),s=100;o&&(s=vo["int"](90*s/100));var r=Ng.userVO.getValue(1010),a=s*n;return a>r?void this.sendNotification("prompted_info_show",{info:"护灵符不足"+n+"个，需要元宝"+a+"，无法强化。"}):void x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"护灵符不足，将使用<font color='#fffc00'>"+a+"元宝</font>，是否继续？",handler:h.create(this,function(e){e&&(su.instance.upgrade(t.equip.equipConf.position,t.starStones.id,-1,!1),k.goldenCost("强化护灵符",n,s))})})}su.instance.upgrade(this.equip.equipConf.position,this.starStones.id,this.protectStones.id,!1)}else this.sendNotification("prompted_info_show",{info:"您的灵石不足。"})},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="StarMediator",t}(lc),sy=function(e){function t(){this._inited=!1,t.__super.call(this,"ActivityPayWeekMediator")}o(t,"modules.activitypayweek.view.ActivityPayWeekMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new PR)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","USER_INIT","ZERO_CLOCK_TRIGER","SHOW_ACTIVIT_PAY_WEEK_PAGE","ACTIVIT_PAY_WEEK_INFO"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("ActivityPayWeekProxy");switch(e.getName()){case"CLEAR_CACHE_DATA":this._inited=!1,t.setData(null);break;case"ZERO_CLOCK_TRIGER":case"USER_INIT":ru.instance.query();break;case"SHOW_ACTIVIT_PAY_WEEK_PAGE":this.vi.popup();var i=this.vi;i.showInfo();break;case"ACTIVIT_PAY_WEEK_INFO":null!=t.payweekdata&&this.vi&&(i=this.vi,i.showInfo())}},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="ActivityPayWeekMediator",t}(lc),ry=function(e){function t(){t.__super.call(this)}o(t,"modules.petpvp.controller.PetPvpPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Ki.PET_PVP_QUERY_INFO,hy,!0),this.facade.registerCommand(Ki.PET_PVP_QUERY_ROOM,ly,!0),this.facade.registerCommand(Ki.PET_PVP_FIGHT,ay,!0)},t}(rc),ay=function(e){function t(){t.__super.call(this)}o(t,"modules.petpvp.controller.commands.PetPvpFightCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerPetPvp",t.value),n=this.facade.retrieveProxy("PetPvpProxy"),o=n.receive(i);this.sendNotification("RECEIVE_PET_PVP_INFO",o),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,19)}else{var s;switch(t.status){case-37:s="今天已挑战过该玩家";break;case-24:s="今天挑战次数已用完";break;case-57:this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,19),s="您正在挑战中";break;case-56:s="该玩家正在战斗中";break;default:s="操作失败："+t.status}this.sendNotification("prompted_info_show",{info:s})}},t}(rc),ly=function(e){function t(){t.__super.call(this)}o(t,"modules.petpvp.controller.commands.PetPvpRoomCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PetPvpRoom",t.value);this.sendNotification("RECEIVE_PET_PVP_ROOM",i)}},t}(rc),hy=function(e){function t(){t.__super.call(this)}o(t,"modules.petpvp.controller.commands.PetPvpInfoCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerPetPvp",t.value),n=this.facade.retrieveProxy("PetPvpProxy"),o=n.receive(i);this.sendNotification("RECEIVE_PET_PVP_INFO",o)}},t}(rc),cy=function(e){function t(){t.__super.call(this,"PetPvpProxy")}o(t,"modules.petpvp.model.PetPvpProxy",e);var i=t.prototype;return i.receive=function(e){return this.data=e,this.info},i.getDropRateShow=function(){var e=100+this.info.dropRate/100;return e+"%"},i.getLeftTime=function(){var e=20-this.info.fighted;return 0>e&&(e=0),e},i.clear=function(){this.data=null},s(0,i,"info",function(){return this.data}),t.NAME="PetPvpProxy",t}(sc),uy=function(e){function t(){t.__super.call(this,"AlcBossRankMediator")}o(t,"modules.alcboss.view.AlcBossRankMediator",e);
var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new KR),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onClick)},i.listNotificationInterests=function(){return["OPEN_ALC_BOSS_RANK_PAGE","RECIEVE_ALC_BOSS_RANK"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_BOSS_RANK_PAGE":au.instance.listRank();break;case"RECIEVE_ALC_BOSS_RANK":var t=e.getBody();t.sort(this.compareDamge),this.view.list.dataSource=t,this.view.popup()}},i.compareDamge=function(e,t){return t.hpDamage-e.hpDamage},i.onClick=function(e,t){if("click"==e.type){var i=this.view.list.getCell(t).dataSource;i&&(i.playerId==Ng.userVO.unitId.id?this.sendNotification("ROLE_VIEW"):this.sendNotification("SHOW_LOOK_PAGE",{playerId:i.playerId,name:i.name,nature:0,level:0}))}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcBossRankMediator",t}(lc),dy=function(e){function t(){this._resetAutorSelect=null,this._init=!1,this._pab=null,t.__super.call(this,"AlcBossMediator")}o(t,"modules.alcboss.view.AlcBossMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new qR),this._resetAutorSelect=new UR,this._resetAutorSelect.list.mouseEnabled=!0,this._resetAutorSelect.list.mouseHandler=new h(this,this.onAutorize),this._resetAutorSelect.btnClear.clickHandler=new h(this,this.onAutorClear),this.view.on("click",this,this.onClick)},i.onAutorClear=function(){au.instance.authorize(0),this.resetAutorSelect.close()},i.onAutorize=function(e,t){if("click"==e.type&&"btnJoin"==e.target.name){var i=this.resetAutorSelect.list.getCell(t).dataSource;i&&au.instance.authorize(i.playerId),this.resetAutorSelect.close()}},i.onRegister=function(){this.facade.registerMediator(new uy),this.facade.registerMediator(new py),this.facade.registerMediator(new fy)},i.listNotificationInterests=function(){return["OPEN_ALC_BOSS_PAGE","RECIEVE_ALC_BOSS","RECIEVE_PLAYER_ALC_BOSS","RECIVE_ALLIANCE","CLEAR_CACHE_DATA","ZERO_CLOCK_TRIGER","USER_ALLIANCE_CHANGE"]},i.handleNotification=function(e){var t;switch(e.getName()){case"OPEN_ALC_BOSS_PAGE":t=this.facade.retrieveProxy("AllianceProxy"),t.alliance&&t.alliance.allianceLevel>=2?(0==this._init&&(this._init=!0,kc.instance.listMembers(1),au.instance.queryBoss(),au.instance.queryPalyerBoss()),this.freshAlc(),this.view.popup()):(this.sendNotification("prompted_info_show",{info:"需要2级宗门开启"}),this.view.close());break;case"RECIEVE_ALC_BOSS":this.view.showBoss(e.getBody()),this.freshAlc();break;case"RECIEVE_PLAYER_ALC_BOSS":this._pab=e.getBody(),this.view.showPlayerBoss(this._pab);break;case"RECIVE_ALLIANCE":this.freshAlc();break;case"CLEAR_CACHE_DATA":this._pab=null,this._init=!1;break;case"ZERO_CLOCK_TRIGER":au.instance.queryPalyerBoss();break;case"USER_ALLIANCE_CHANGE":this._init=!1,this.view.isPopup&&(t=this.facade.retrieveProxy("AllianceProxy"),t.alliance&&t.alliance.allianceLevel>=2?0==this._init&&(this._init=!0,au.instance.queryBoss(),au.instance.queryPalyerBoss()):this.view.close())}},i.freshAlc=function(){var e=this.facade.retrieveProxy("AllianceProxy"),t=e.alliance;if(null!=t){var i=this.facade.retrieveProxy("AlcBossProxy");if(this.view.txtAuthorizer.visible=!0,i.boss&&i.boss.authorizeId>0){var n=this.facade.retrieveProxy("AlcaProxy"),o=n.selfAlca.getMemeberInfo(i.boss.authorizeId);o?this.view.txtAuthorizer.text="重置授权："+o.name:this.view.txtAuthorizer.text="重置授权："+i.boss.authorizeId,this.view.txtAuthorizer.color="#0084ff"}else this.view.txtAuthorizer.text="重置授权：无",this.view.txtAuthorizer.color="#ffffff";if(t.masterId==Ng.userVO.unitId.id?this.view.btnAuthorize.visible=!0:this.view.btnAuthorize.visible=!1,this.view.btnReset.visible=!1,this.view.lbResetCD.visible=!1,i.boss&&i.boss.baseId>1&&(t.masterId==Ng.userVO.unitId.id||i.boss.authorizeId>0&&i.boss.authorizeId==Ng.userVO.unitId.id)){var s=ro.dateDiffByMs(g.clock.currentTime,i.boss.resetDate);s>30?this.view.btnReset.visible=!0:(this.view.lbResetCD.text=30-s+1+"天后可重置层数",this.view.lbResetCD.visible=!0)}}},i.onClick=function(e){switch(e.target.name){case"btnNtc":this.sendNotification("POP_FUN_NOTICE",15);break;case"btnFight":this._pab&&this._pab.fightTime<1?au.instance.fight():this.sendNotification("prompted_info_show",{info:"今日已挑战过了，请明天再来吧"});break;case"btnRank":this.sendNotification("OPEN_ALC_BOSS_RANK_PAGE");break;case"btnLogs":this.sendNotification("OPEN_ALC_BOSS_LOG_PAGE");break;case"btnTop":this.sendNotification("OPEN_ALC_BOSS_PASS_RANK");break;case"btnReset":var t=this.facade.retrieveProxy("AlcBossProxy");if(t.boss){if(t.boss.baseId<=1)return void this.sendNotification("prompted_info_show",{info:"当前已是最低层"});var i=ro.dateDiffByMs(g.clock.currentTime,t.boss.resetDate);if(30>=i)return void this.sendNotification("prompted_info_show",{info:"重置冷时间未到"});this.sendNotification("POP_CONFIRM_INFO",{info:"重置后宗门BOSS将<font color='#fffc00'>重新从第1层开始</font>，最大通关层数和成员通关记录保留，是否确认？",handler:h.create(this,function(e){e&&au.instance.resetBoss()})})}break;case"btnAuthorize":var n=this.facade.retrieveProxy("AlcaProxy"),o=n.selfAlca;this.resetAutorSelect.showMembers(o),this.resetAutorSelect.popup();break;case"btnAward":this._pab&&this._pab.goldAward>0?au.instance.takeAward():this.sendNotification("prompted_info_show",{info:"当前没有可领取的奖励"})}},s(0,i,"resetAutorSelect",function(){return this.getViewComponent(),this._resetAutorSelect}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcBossMediator",t}(lc),py=function(e){function t(){t.__super.call(this,"AlcBossLogMediator")}o(t,"modules.alcboss.view.AlcBossLogMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new zR)},i.listNotificationInterests=function(){return["OPEN_ALC_BOSS_LOG_PAGE","RECIEVE_ALC_BOSS_LOG"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_BOSS_LOG_PAGE":au.instance.listLog();break;case"RECIEVE_ALC_BOSS_LOG":this.view.showLogs(e.getBody()),this.view.popup()}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcBossLogMediator",t}(lc),fy=function(e){function t(){t.__super.call(this,"AlcBossPassRankMediator")}o(t,"modules.alcboss.view.AlcBossPassRankMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new WR)},i.listNotificationInterests=function(){return["OPEN_ALC_BOSS_PASS_RANK","RECIVE_ALC_BOSS_PASS_RANK"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_BOSS_PASS_RANK":au.instance.bossRank(),this.view.popup();break;case"RECIVE_ALC_BOSS_PASS_RANK":this.view.isPopup&&this.view.showInf(e.getBody())}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcBossPassRankMediator",t}(lc),_y=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.PetPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Zi.PET_LIST,gy,!0),this.facade.registerCommand(Zi.PET_QUERY_ATTRIBUTES,Ey,!0),this.facade.registerCommand(Zi.PET_DROP,Ly,!0),this.facade.registerCommand(Zi.PET_FIGHT_ON,Ly,!0),this.facade.registerCommand(Zi.PET_FEED,Ly,!0),this.facade.registerCommand(Zi.PET_FEED_QUALITY_DRUG,Ly,!0),this.facade.registerCommand(Zi.PET_FEED_ORANGE_DRUG,Ly,!0),this.facade.registerCommand(Zi.PET_FEED_GROW_DRUG,Ly,!0),this.facade.registerCommand(Zi.PET_FEED_NATURE_DRUG,Ly,!0),this.facade.registerCommand(Zi.PET_QUERY_DRESS_GHOST,Oy,!0),this.facade.registerCommand(Zi.PET_DRESS_GHOST,Iy,!0),this.facade.registerCommand(Zi.PET_TAKE_OFF_GHOST,Iy,!0),this.facade.registerCommand(Zi.PET_MIX_GHOST,My,!0),this.facade.registerCommand(Zi.PET_DECOMPOSE_GHOST,My,!0),this.facade.registerCommand(Zi.PET_UN_MIX_GHOST_PIECE,My,!0),this.facade.registerCommand(Zi.PET_TWO_MIX_ONE,vy,!0),this.facade.registerCommand(Zi.PET_MAKE_ORANGE_GHOST,Sy,!0),this.facade.registerCommand(Zi.PET_CHG_GHOST_NATURE,Cy,!0),this.facade.registerCommand($i.PET_SHOP_QUERY,yy,!0),this.facade.registerCommand($i.PET_SHOP_FRESH,yy,!0),this.facade.registerCommand($i.PET_SHOP_FRESH_FREE,yy,!0),this.facade.registerCommand($i.PET_SHOP_FRESH_USE_FRUIT,yy,!0),this.facade.registerCommand($i.PET_SHOP_FRESH_AUTO,yy,!0),this.facade.registerCommand($i.PET_SHOP_TAKE_ONE,yy,!0),this.facade.registerCommand($i.PET_SHOP_FRESH_USE_QUALITY,yy,!0),this.facade.registerCommand($i.PET_SHOP_TAKE_BY_PROP,yy,!0),this.facade.registerCommand($i.PET_SHOP_FRESH_USE_FRUIT_AUTO,yy,!0),this.facade.registerCommand(ji.PET_SKILL_QUERY,my,!0),this.facade.registerCommand(ji.PET_SKILL_UPGRADE,my,!0),this.facade.registerCommand(ji.PET_SKILL_DRESS,Ny,!0),this.facade.registerCommand(ji.PET_SKILL_RECOVER,Ry,!0),this.facade.registerCommand(ji.PET_SKILL_OPEN_BOX_ONCE,wy,!0),this.facade.registerCommand(ji.PET_SKILL_OPEN_BOX_TEN,wy,!0),this.facade.registerCommand(Ji.PETEQ_QUERY_INFO,Ty,!0),this.facade.registerCommand(Ji.PETEQ_IDENTIFY,Ay,!0),this.facade.registerCommand(Ji.PETEQ_DRESS,Py,!0),this.facade.registerCommand(Ji.PETEQ_FEED_METERIAL,Ty,!0),this.facade.registerCommand(Ji.PETEQ_UPGRADE_FEED,Ty,!0),this.facade.registerCommand(Ji.PETEQ_REFINE,Ty,!0),this.facade.registerCommand(Ji.PETEQ_REFINE_AUTO,xy,!0),this.facade.registerCommand(Ji.PETEQ_UPGRADE_STAR,Ty,!0)},t}(rc),my=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetSkillOptionCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=this.facade.retrieveProxy("PetProxy"),n=v.protoCodec.getResponseDecoder().decode("PlayerPetSkill",t.value),o=i.updatePetSkill(n);switch(t.cmd){case 1:break;case 2:this.sendNotification("prompted_info_show",{info:"灵宠技能升级成功"})}this.sendNotification("RECEIVE_PET_SKILL",o)}},t}(rc),gy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetListCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerPetGroup",t.value),n=this.facade.retrieveProxy("PetProxy"),o=n.recieveAll(i.list);this.sendNotification("RECEIVE_PET_LIST",o)}},t}(rc),vy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetChgNatureCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){this.sendNotification("prompted_info_show",{info:"灵宠转换五行成功"});var i=this.facade.retrieveProxy("PetProxy");i&&i.clear(),cu.instance.listAll()}else this.sendNotification("prompted_info_show",{info:"灵宠转换五行失败"})},t}(rc),yy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetShopOptionCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n;switch(t.cmd){case 1:i=v.protoCodec.getResponseDecoder().decode("PetShop",t.value),this.fresh(i);break;case 2:case 8:case 5:case 6:i=v.protoCodec.getResponseDecoder().decode("PetShop",t.value),this.sendNotification("prompted_info_show",{info:"灵宠乐园已刷新"}),this.fresh(i);break;case 3:i=v.protoCodec.getResponseDecoder().decode("PetShopAuto",t.value),this.fresh(i.petShop),n="<br><br>完成自动寻找，总共寻找了<font color='#fffc00'>"+i.count+"次</font>",i.blood>0&&(n+="<br>自动放生了低级宠物，累计获得<font color='#00dc24'>"+i.blood+"远古血脉</font>"),this.sendNotification("POP_ALERT_INFO",{info:n}),k.goldenCost("自动寻宠",i.count,20);break;case 9:i=v.protoCodec.getResponseDecoder().decode("PetShopAuto",t.value),this.fresh(i.petShop),n=i.count<0?"<br><br><font color='#cc0000'>寻找失败，总共寻找了"+-i.count+"次，龙涎果已用完。</font>":"<br><br>寻找成功，总共寻找了<font color='#fffc00'>"+i.count+"次</font>",i.blood>0&&(n+="<br>自动放生了低级宠物，累计获得<font color='#00dc24'>"+i.blood+"远古血脉</font>"),this.sendNotification("POP_ALERT_INFO",{info:n});break;case 4:i=v.protoCodec.getResponseDecoder().decode("PetTake",t.value),this.fresh(i.shop),this.addPet(i.pet);break;case 7:i=v.protoCodec.getResponseDecoder().decode("PlayerPet",t.value),this.addPet(i);break;default:as.error(this,"","unkown cmd:"+t.cmd)}}else 4==t.cmd&&this.sendNotification("prompted_info_show",{info:"您的灵宠数量已达上限"})},i.fresh=function(e){var t=this.facade.retrieveProxy("PetProxy"),i=t.freshPetShop(e);this.sendNotification("RECEIVE_PET_SHOP",i)},i.addPet=function(e){var t=this.facade.retrieveProxy("PetProxy"),i=t.changePet(e);this.sendNotification("RECEIVE_PET_NEW",i)},t}(rc),by=function(e){function t(){t.__super.call(this,"PetPvpMediator")}o(t,"modules.petpvp.view.PetPvpMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new IR),this.view.listPlayer.renderHandler=new h(this,this.onPlayerRender),this.view.listPlayer.mouseEnabled=!0,this.view.listPlayer.mouseHandler=new h(this,this.onPlayerClick),this.view.listLog.renderHandler=new h(this,this.onLogRender)},i.listNotificationInterests=function(){return["USER_INIT","USER_HANGDUNGEON_CHANGE","OPEN_PET_PVP_PAGE","RECEIVE_PET_PVP_INFO","RECEIVE_PET_PVP_ROOM"]},i.handleNotification=function(e){if(this.isInitedView||"OPEN_PET_PVP_PAGE"==e.getName())switch(e.getName()){case"USER_INIT":this.clean();case"USER_HANGDUNGEON_CHANGE":var t=Ng.userVO.getValue(19002);t>100&&lu.instance.queryInfo();break;case"OPEN_PET_PVP_PAGE":this.freshInfo(),lu.instance.queryRoom(),this.view.popup();break;case"RECEIVE_PET_PVP_INFO":this.view.isPopup&&this.freshInfo();break;case"RECEIVE_PET_PVP_ROOM":this.freshRoom(e.getBody())}},i.clean=function(){this.view.lbRate.text="",this.view.lbLeftTime.text="",this.view.listPlayer.visible=!1,this.view.listLog.visible=!1},i.freshInfo=function(){var e=this.facade.retrieveProxy("PetPvpProxy");e&&e.info?(this.view.lbRate.text="寻宝概率："+e.getDropRateShow(),this.view.lbLeftTime.text=""):(this.view.lbRate.text="等待数据返回",this.view.lbLeftTime.text="")},i.freshRoom=function(e){this.view.listPlayer.dataSource=e.players,this.view.listLog.dataSource=e.logs,this.view.listPlayer.visible=!0,this.view.listLog.visible=!0,this.view.lbEmpty1.visible=0==e.players.length,this.view.lbEmpty2.visible=0==e.logs.length},i.onPlayerClick=function(e,t){if("click"==e.type&&"btnFight"==e.target.name){var i=this.facade.retrieveProxy("PetPvpProxy");if(i&&i.info&&i.getLeftTime()<1)return void this.sendNotification("prompted_info_show",{info:"挑战频繁，请明天再来。"});var n=this.view.listPlayer.getCell(t).dataSource;n&&lu.instance.fight(n.playerId)}},i.onPlayerRender=function(e,t){var i=e.dataSource;if(i){var n=e.getChildByName("name");n.text=i.name;var o=e.getChildByName("nature");o.index=i.natue-1,o.x=n.x+n.width,n=e.getChildByName("level"),n.visible=!1}},i.onLogRender=function(e,t){var i=e.dataSource;if(i){var n=e.getChildByName("log");n.text=Xi.build(i),i.rate>0?n.color="#00dc24":n.color="#e70626"}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetPvpMediator",t}(lc),Ey=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetQueryAttributeCommands",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("AnimalInfo",t.value),n=this.facade.retrieveProxy("PetProxy"),o=n.receivePetAttribute(i);this.sendNotification("RECEIVE_PET_ATTRIBUTES",o)}},t}(rc),xy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetEquipRefineCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=this.facade.retrieveProxy("PetEquipProxy"),n=v.protoCodec.getResponseDecoder().decode("PetEquipAutoRefine",t.value),o=i.receive(n.starInfo);this.sendNotification("RECEIVE_PET_EQUIP_INFO",o),this.sendNotification("POP_ALERT_INFO",{info:"精炼结束，<font color='#00dc24'>总计精炼"+n.count+"次</font>，<font color='#FFA500'>精炼至"+n.addValue/100+"%</font>"})}},t}(rc),Sy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetMakeOrangeGhostCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PetDress",t.value),n=this.facade.retrieveProxy("PetProxy"),o=n.changePet(i.pet);this.sendNotification("RECEIVE_PET_CHANGE",o),cu.instance.queryAttributes(o.id),this.sendNotification("prompted_info_show",{info:"兽魂进阶成功"})}},t}(rc),wy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetSkillOpenCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PetSkillAwardVO",t.value);this.sendNotification("OPEN_PET_SKILL_OPENAWARD",i,t.cmd)}},t}(rc),Cy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetChgGhostNatureCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PetDress",t.value),n=this.facade.retrieveProxy("PetProxy"),o=n.changePet(i.pet);this.sendNotification("RECEIVE_PET_CHANGE",o),cu.instance.queryAttributes(o.id),this.sendNotification("prompted_info_show",{info:"兽魂重铸成功"})}},t}(rc),Ty=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetEquipInfoCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=this.facade.retrieveProxy("PetEquipProxy"),n=v.protoCodec.getResponseDecoder().decode("PetEquipStar",t.value),o=i.receive(n);switch(this.sendNotification("RECEIVE_PET_EQUIP_INFO",o),t.cmd){case 4:this.sendNotification("prompted_info_show",{info:"培炼经验增加成功"}),this.sendNotification("RECEIVE_PET_EQUIP_FEED");break;case 5:this.sendNotification("prompted_info_show",{info:"培炼升级成功"});break;case 6:this.sendNotification("prompted_info_show",{info:"精炼完成"});break;case 8:this.sendNotification("RECEIVE_PET_EQUIP_STAR",o);break;case 1:}}},t}(rc),Iy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetDressGhostCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PetDress",t.value),n=this.facade.retrieveProxy("PetProxy"),o=n.changePet(i.pet);switch(this.changeItem(i.items),t.cmd){case 7:case 8:this.sendNotification("RECEIVE_PET_CHANGE",o)}cu.instance.queryAttributes(o.id)}},i.changeItem=function(e){var t=this.facade.retrieveProxy("GoodsProxy"),i=t.updateItemsSimple(e);i.size>0&&this.sendNotification("FRESH_GOODS_PACK",i)},t}(rc),Ay=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetEquipIdentifyCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success&&this.sendNotification("prompted_info_show",{info:"灵宠装备鉴定成功"})},t}(rc),Ny=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetSkillDressCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerPet",t.value),n=this.facade.retrieveProxy("PetProxy"),o=n.changePet(i);this.sendNotification("RECEIVE_PET_CHANGE",o),this.sendNotification("prompted_info_show",{info:"灵宠技能装备成功"}),cu.instance.queryAttributes(o.id)}},t}(rc),Py=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetEquipDressCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemSimpleGroup",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.updateItemsSimple(i.items);o.size>0&&this.sendNotification("FRESH_GOODS_PACK",o),this.sendNotification("RECEIVE_PET_EQUIP_CHG");var s=this.facade.retrieveProxy("PetProxy"),r=s.getFightPet();r&&cu.instance.queryAttributes(r.id)}},t}(rc),Ry=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetSkillRecoverCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i),o="<br><font color='#00dc24'>获得秘籍碎片 +"+n.exp+"</font>";o=o+"<br><font color='#ffffff'>获得铜币 +"+n.silver+"</font><br><font color='#ffffff'>-----以上是您回收灵宠技能返还所得-----</font>",this.sendNotification("POP_COMMON_AWARDS_INFO_SIMPLE",{title:"回收技能",html:o})}},t}(rc),Ly=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetOptionCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerPet",t.value),n=this.facade.retrieveProxy("PetProxy"),o=n.changePet(i);switch(t.cmd){case 3:this.sendNotification("RECEIVE_PET_DROP",o),this.sendNotification("prompted_info_show",{info:"放生了灵宠"+o.getRealName()}),o.color>=20&&this.sendNotification("prompted_info_show",{info:"获得【橙宠进阶丹】*1"}),o.growAdd>0&&this.sendNotification("prompted_info_show",{info:"获得【灵宠成长丹】*"+o.growAdd});break;case 4:this.sendNotification("RECEIVE_PET_CHANGE",o),cu.instance.queryAttributes(o.id),1==o.state?this.sendNotification("prompted_info_show",{info:"灵宠出战成功"}):this.sendNotification("prompted_info_show",{info:"灵宠休息成功"});break;case 5:this.sendNotification("RECEIVE_PET_CHANGE",o),this.sendNotification("prompted_info_show",{info:"灵宠升级成功"}),cu.instance.queryAttributes(o.id);break;case 14:this.sendNotification("RECEIVE_PET_CHANGE",o),this.sendNotification("SHOW_PET_PAGE",o),this.sendNotification("prompted_info_show",{info:"出战宠物成功进阶为橙宠，资质加10"}),cu.instance.queryAttributes(o.id);break;case 12:this.sendNotification("RECEIVE_PET_CHANGE",o),this.sendNotification("prompted_info_show",{info:"物品使用成功，出战宠物资质加1"}),cu.instance.queryAttributes(o.id);break;case 17:this.sendNotification("RECEIVE_PET_CHANGE",o),this.sendNotification("prompted_info_show",{info:"物品使用成功，出战宠物成长比加1%"}),cu.instance.queryAttributes(o.id);break;case 19:this.sendNotification("RECEIVE_PET_CHANGE",o),this.sendNotification("prompted_info_show",{info:"物品使用成功，出战宠物负五行提升"}),cu.instance.queryAttributes(o.id)}}else switch(t.cmd){case 12:this.sendNotification("prompted_info_show",{info:"使用失败，请确认是否有出战宠物，或资质是否已满。"});break;case 14:this.sendNotification("prompted_info_show",{info:"使用失败，请确认是否有出战宠物，或个性名字有误。"});break;case 17:this.sendNotification("prompted_info_show",{info:"使用失败，请确认是否有出战宠物。"});break;case 19:this.sendNotification("prompted_info_show",{info:"使用失败，请确认是否有出战宠物，或负五行已为0"})}},t}(rc),Oy=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetQueryDressCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){v.protoCodec.getResponseDecoder().decode("PetDress",t.value),this.facade.retrieveProxy("PetProxy")}},t}(rc),My=function(e){function t(){t.__super.call(this)}o(t,"modules.pet.controller.commands.PetDealGhostCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 9:this.sendNotification("prompted_info_show",{info:"兽魂合成成功"});break;case 10:this.sendNotification("prompted_info_show",{info:"兽魂分解成功"});break;case 11:this.sendNotification("prompted_info_show",{info:"残魂分解成功"})}},t}(rc),Dy=function(e){function t(){t.__super.call(this,"PetEquipProxy")}o(t,"modules.pet.model.PetEquipProxy",e);var i=t.prototype;return i.receive=function(e){return null==this.info&&(this.data=new nn),this.info.update(e),this.info},i.clear=function(){this.data=null},s(0,i,"info",function(){return this.data}),t.NAME="PetEquipProxy",t}(sc),ky=function(e){function t(){this._pets=[],this._petDic=new uo,this._petShop=new rn,this._petSkill=new ln,t.__super.call(this,"PetProxy")}o(t,"modules.pet.model.PetProxy",e);var i=t.prototype;return i.isFull=function(){return this._petDic.keys.length>=5},i.clear=function(){this._pets.length=0,this._petDic.clear()},i.freshPetShop=function(e){return this._petShop.update(e),this._petShop},i.updatePetSkill=function(e){return this._petSkill.update(e),this._petSkill},i.recieveAll=function(e){if(this._pets.length=0,this._petDic.clear(),null!=e&&e.length>0){var t;for(var i in e){t=e[i];var n=new on(t);n.state!=on.STATE_ABANDON&&-1==this._petDic.indexOf(n.id)&&(this._petDic.set(n.id,n),this._pets.push(n))}}return this._pets.sort(this.compareFunctionProp),this._pets},i.changePet=function(e){for(var t=1==e.state,i=null,n=0;n<this._pets.length;n++){var o=this._pets[n];if(o.id==e.id){if(i=o,i.update(e),i.state==on.STATE_ABANDON)return this._pets.splice(n,1),this._petDic.remove(i.id),this._pets.sort(this.compareFunctionProp),i}else t&&1==o.state&&(o.state=0,cu.instance.queryAttributes(o.id))}if(null!=i)return this._pets.sort(this.compareFunctionProp),i;var s=new on(e);return this._pets.push(s),this._petDic.set(s.id,s),this._pets.sort(this.compareFunctionProp),s},i.compareFunctionProp=function(e,t){return 1==e.state?-1:1==t.state?1:e.getRealQuality()<t.getRealQuality()?1:0},i.receivePetAttribute=function(e){var t=this._petDic.get(e.id.id);return t?(t.updateAttributes(e.attributes),t):null},i.getFightPet=function(){if(this._pets){var e;for(var t in this._pets)if(e=this._pets[t],1==e.state)return e}return null},i.getAllPets=function(){return this._pets},s(0,i,"petSkill",function(){return this._petSkill}),t.NAME="PetProxy",t}(sc),By=function(e){function t(){this._selectPop=null,t.__super.call(this,"PetChgNatureMediator")}o(t,"modules.pet.view.PetChgNatureMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new GR),this._selectPop=new bL,this._selectPop.pets.mouseEnabled=!0,this._selectPop.pets.mouseHandler=new h(this,this.onPetSelected),this.view.btnSure.clickHandler=new h(this,this.onMixSure)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","SHOW_PET_CHG_NATURE_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this.view.close();break;case"SHOW_PET_CHG_NATURE_PAGE":this._showChgPage(e.getBody())}},i._showChgPage=function(e){var t=this.facade.retrieveProxy("PetProxy"),i=t.getAllPets();if(null==i||0==i.length)return void this.sendNotification("prompted_info_show",{info:"转换灵宠五行，最少需要两个紫色灵宠"});var n,o=[];for(var s in i)n=i[s],n.id!=e.id&&(n.petCfg.quality<6||o.push(n));return 0==o.length?void this.sendNotification("prompted_info_show",{info:"转换灵宠五行，最少需要两个紫色灵宠"}):void this.selectPop.popInfo(e,o)},i.onPetSelected=function(e,t){if("click"==e.type){var i=this.selectPop.pets.getCell(t).dataSource;i&&(this.view.popInfo(this.selectPop.petA,i),this.selectPop.close())}},i.onMixSure=function(){var e=this;return"转换"!=this.view.doubleSure.text?void this.sendNotification("prompted_info_show",{info:"确认请输入 ‘转换’"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"请再次确认要使用一个紫宠，转换灵宠五行吗？",handler:h.create(this,function(t){t&&(cu.instance.twoPetMixOne(e.view._petA.id,e.view._petB.id,e.view.getAimNature()),e.view.close())})})},s(0,i,"selectPop",function(){return this.getViewComponent(),this._selectPop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetChgNatureMediator",t.PET_NOT_ENOUGH="转换灵宠五行，最少需要两个紫色灵宠",t}(lc),Vy=function(e){function t(){this.aimProp=null,this.pet=null,t.__super.call(this,"PetGhostChgNatureMediator")}o(t,"modules.pet.view.PetGhostChgNatureMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new vL),this.view.aimList.renderHandler=new h(this,this.onRender),this.view.aimList.mouseEnabled=!0,this.view.aimList.mouseHandler=new h(this,this.onNature)},i.listNotificationInterests=function(){return["SHOW_PET_CHG_GHOST_NATURE_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PET_CHG_GHOST_NATURE_PAGE":this._show(e.getBody())}},i._show=function(e){this.aimProp=e.ghost,this.pet=e.pet,this.renderGhost(this.view.aimGhost,this.aimProp.propConf);var t;switch(this.aimProp.propConf.nature){case 1:t=[2,3,4,5];break;case 2:t=[1,3,4,5];break;case 3:t=[1,2,4,5];break;case 4:t=[1,2,3,5];break;case 5:t=[1,2,3,4]}this.view.aimList.dataSource=t;var i=this._needIron(this.aimProp.propConf.level);this.view.needIron.text="【重铸神铁】"+i+"个",this.view.needIron.color="#c527ff",this.view.popup()},i._needIron=function(e){return 3>e?1:5>e?2:3},i.onRender=function(e,t){var i=e.dataSource,n=this.aimProp.propConf.type;n+=i-this.aimProp.propConf.nature;var o=10*n+1e4+this.aimProp.propConf.quality,s=g.database.getData("props",o);this.renderGhost(e,s)},i.onNature=function(e,t){var i=this;if("click"==e.type&&"btnChg"==e.target.name){var n=this._needIron(this.aimProp.propConf.level),o=this.facade.retrieveProxy("GoodsProxy"),s=o.queryProp(500023);if(null==s||s.count<n)return this.sendNotification("prompted_info_show",{info:"需要【重铸神铁】"+n+"个，可在商城中购买。"}),void this.sendNotification("OPEN_MARCKET_FAST_BUY",24);var r=this.view.aimList.getCell(t).dataSource;this.sendNotification("POP_CONFIRM_INFO",{info:"确定使用<font color='#c527ff'>【重铸神铁】</font>"+n+"个，重铸兽魂吗？",handler:h.create(this,function(e){e&&(i.view.close(),cu.instance.chgGhostNature(i.pet?i.pet.id:0,i.aimProp.id,s.id,r))})})}},i.renderGhost=function(e,t){if(null!=t){var i=e.getChildByName("name"),n=e.getChildByName("nature"),o=e.getChildByName("attribute1"),s=e.getChildByName("attribute2");e.getChildByName("changeBtn"),e.getChildByName("takeOffBtn");i.text=t.name,i.color=N.getColor(t.quality);var r=i.x+i.width;n.x=r,n.index=t.nature-1;var a=t.baseAttr[0],l=I.getName(a.key);o.text=l+I.getValueStr(a.key,a.min,!0),a=t.baseAttr[1],l=I.getName(a.key),s.text=l+I.getValueStr(a.key,a.min,!0)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetGhostChgNatureMediator",t}(lc),Fy=function(e){function t(){this._skillId=0,t.__super.call(this,"PetSkillUpgradMediator")}o(t,"modules.pet.view.PetSkillUpgradMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new rL),this.view.btnSure.clickHandler=new h(this,this.onClick),this.view.cbNtc.clickHandler=new h(this,this.onNtc);var e=Ts.getItem("_PET_SKILL_UP_CFM");null!=e&&"true"==e&&(this.view.cbNtc.selected=!0)},i.listNotificationInterests=function(){return["OPEN_PET_SKILL_UPGRADE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_PET_SKILL_UPGRADE":this.showInfo(e.getBody())}},i.showInfo=function(e){this._skillId=e;var t=this.facade.retrieveProxy("PetProxy"),i=t.petSkill;if(i){var n=i.getLevel(e);if(n>=6)return void this.sendNotification("prompted_info_show",{info:"品质已是最高级"});Qi.renderSkill(this.view.before,e,n,!0),Qi.renderSkill(this.view.after,e,n+1,!0);var o=sn.getNeedPiece(e,n+1),s=sn.getNeedSilver(e,n+1);this.view.silverNeed.text=s+"",this.view.pieceNeed.text=o+"/"+i.piece,s>Ng.userVO.getValue(1009)?this.view.silverNeed.color="#e70626":this.view.silverNeed.color="#ffffff",o>i.piece?this.view.pieceNeed.color="#e70626":this.view.pieceNeed.color="#00dc24",this.view.before.visible=!0,this.view.after.visible=!0}else this.view.before.visible=!1,this.view.after.visible=!1,this.view.silverNeed.text="",this.view.pieceNeed.text="";this.view.popup()},i.onNtc=function(){this.view.cbNtc.selected?Ts.setItem("_PET_SKILL_UP_CFM","true"):Ts.removeItem("_PET_SKILL_UP_CFM")},i.onClick=function(){var e=this,t=this.facade.retrieveProxy("PetProxy"),i=t.petSkill;if(i){if(0==this.view.cbNtc.selected)return void this.sendNotification("prompted_info_show",{info:"您未同意技能升级协议，请阅读以下文字并确定接受后再做升级操作。"});var n=i.getLevel(this._skillId);if(n>=6)return void this.sendNotification("prompted_info_show",{info:"品质已是最高级"});var o=sn.getNeedPiece(this._skillId,n+1),s=sn.getNeedSilver(this._skillId,n+1);if(o>i.piece)return void this.sendNotification("prompted_info_show",{info:"升品需要碎片不足"});if(s>Ng.userVO.getValue(1009))return void this.sendNotification("prompted_info_show",{info:"升品需要铜币不足"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认升品灵宠技能？",handler:h.create(this,function(t){t&&(uu.instance.upgrade(e._skillId),e.view.close())})})}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetSkillUpgradMediator",t._PET_SKILL_UP_CFM="_PET_SKILL_UP_CFM",t}(lc),Gy=function(e){function t(){this._starInfo=null,this._dressed=null,t.__super.call(this,"PetEquipFeedUpMediator")}o(t,"modules.pet.view.PetEquipFeedUpMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new HR),this.view.btnFeed.clickHandler=new h(this,this.onFeed),this.view.btnUpgrade.clickHandler=new h(this,this.onUpgrade)},i.listNotificationInterests=function(){return["SHOW_PET_EQUIP_FEEDUP_PAGE","RECEIVE_PET_EQUIP_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PET_EQUIP_FEEDUP_PAGE":
this.showInfo(e.getBody(),e.getType());break;case"RECEIVE_PET_EQUIP_INFO":this.view.isPopup&&this.refresh()}},i.showInfo=function(e,t){this._dressed=e;var i=this.facade.retrieveProxy("PetEquipProxy");this._starInfo=i.info,this.refresh(),this.view.popup()},i.refresh=function(){if(null!=this._dressed&&null!=this._starInfo){var e=an.queryMaxFeedLevel(this._dressed.prefix),t=this._dressed.pos,i=this._starInfo.getFeedLv(t);if(Ln.renderPetEquip(this.view.equipOld,this._dressed,this._starInfo),i>=e)return this.view.equipNew.visible=!1,this.view.btnFeed.visible=!1,this.view.btnUpgrade.visible=!1,this.view.redStone.text="当前培炼已是最高等级",this.view.purpleStone.text="",void(this.view.lbExp.text="--");this.view.equipNew.visible=!0,this.view.btnFeed.visible=!0,this.view.btnUpgrade.visible=!0,Ln.renderPetEquip(this.view.equipNew,this._dressed,this._starInfo,0,1);var n=this._starInfo.getExp();this.view.lbExpHas.text=n+"";var o=an.queryFeedUpNeedExp(i);this.view.lbExp.text=""+o,n>=o?this.view.lbExp.color="#00dc24":this.view.lbExp.color="#e70626";var s=an.queryFeedUpNeedRedStone(i);s>0?this.view.redStone.text="消耗红色仙品天籁石"+s+"个":this.view.redStone.text="";var r=an.queryFeedUpNeedPurpleStone(i);r>0?this.view.purpleStone.text="消耗紫色仙品天籁石"+r+"个":this.view.purpleStone.text=""}},i.onFeed=function(){this.sendNotification("SHOW_PET_EQUIP_FEED_PAGE",this._dressed)},i.onUpgrade=function(){var e=this;if(null!=this._dressed&&null!=this._starInfo){var t=this._dressed.pos,i=this._starInfo.getFeedLv(t),n=this._starInfo.getExp(),o=an.queryFeedUpNeedExp(i);if(o>n)return void this.sendNotification("prompted_info_show",{info:"升级需要的培炼值不足"});var s=this.facade.retrieveProxy("GoodsProxy"),r=an.queryFeedUpNeedRedStone(i),a=null,l=null,c="确认升级灵宠装备培炼等级吗？";if(r>0){if(this.view.redStone.text="消耗红色仙品天籁石"+r+"个",a=s.queryProp(185007),null==a||a.count<r)return void this.sendNotification("prompted_info_show",{info:"升级需要红色仙品天籁石不足"});c=c+"<br>额外消耗：<font color='#e70626'>红色【仙品天籁石】"+r+"个</font>"}var u=an.queryFeedUpNeedPurpleStone(i);if(u>0){if(l=s.queryProp(185008),null==l||l.count<u)return void this.sendNotification("prompted_info_show",{info:"升级需要紫色仙品天籁石不足"});c=c+"<br>额外消耗：<font color='#c527ff'>紫色【仙品天籁石】"+u+"个</font>"}this.sendNotification("POP_CONFIRM_INFO",{info:c,handler:h.create(this,function(t){t&&du.instance.upgradeFeed(e._dressed.id,a?a.id:0,l?l.id:0)})})}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetEquipFeedUpMediator",t}(lc),Hy=function(e){function t(){this._petOrangeDrugView=null,this.freshAble=!1,this._requested=!1,this._drugOrange=null,t.__super.call(this,"PetUPgradeMediator")}o(t,"modules.pet.view.PetUPgradeMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new kR),this.view.btnUpgrade.clickHandler=new h(this,this.onUpgrade),this._petOrangeDrugView=new IL,this._petOrangeDrugView.btnUpgrade.clickHandler=new h(this,this.onOrangeDrug)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","USER_PET_FOOD_CHANGE","SHOW_PET_UPGRADE_PAGE","SHOW_PET_FEED_ORANGE_DRUG_PAGE","RECEIVE_PET_CHANGE","RECEIVE_PET_ATTRIBUTES"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this._requested=!1,this._drugOrange=null,this.petOrangeDrugView.close();break;case"SHOW_PET_UPGRADE_PAGE":this.view.popup(),this.freshAble=!0,this.fresh(),this.view.showPet(e.getBody());break;case"USER_PET_FOOD_CHANGE":this.freshAble=!0,this.fresh();break;case"RECEIVE_PET_CHANGE":case"RECEIVE_PET_ATTRIBUTES":var t=e.getBody();this.view.isPopup&&this.view.showPet(e.getBody()),this.petOrangeDrugView.isPopup&&this.petOrangeDrugView.pet&&t.id==this.petOrangeDrugView.pet.id&&t.color>=6&&(this.petOrangeDrugView.close(),this.petOrangeDrugView.pet=null),this._drugOrange&&(this.checkForOrangeDrug(this._drugOrange),this._drugOrange=null);break;case"SHOW_PET_FEED_ORANGE_DRUG_PAGE":this.checkForOrangeDrug(e.getBody())}},i.fresh=function(){this.freshAble&&this.view.isPopup&&(this.view.freshCost(),this.freshAble=!1)},i.onUpgrade=function(){this.view.pet&&"#e70626"!=this.view.txtCost.color?cu.instance.feed(this.view.pet.id):this.sendNotification("prompted_info_show",{info:"升级需要的魔核不足"})},i.onOrangeDrug=function(){var e=this.petOrangeDrugView.pet;if(e&&1==e.state&&6==e.getRealQuality()){var t=this.petOrangeDrugView.nickname.text;if(null==t||""==t)return void(this.petOrangeDrugView.erro.text="名字不可为空");t=t.replace(/\s*$/g,""),t=t.replace(/^\s*/g,""),this.petOrangeDrugView.nickname.text=t;var i=mo.getCharLength(t);if(4>i||i>16)return void(this.petOrangeDrugView.erro.text="长度二到四个中文");if(!mo.isLegalWord(t))return void(this.petOrangeDrugView.erro.text="名字有不合法字符");this.petOrangeDrugView.erro.text="";var n=this.petOrangeDrugView.drug;null==n||n.count<1||this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(n.propConf.quality)+"'>【"+n.propConf.name+"】</font> 进阶出战灵宠<font color='#c527ff'>"+e.getRealName()+"</font>吗？<br>个性名字：<font color='#FFA500'>"+t+"</font>",handler:h.create(this,function(e){e&&cu.instance.feedOrangeDrug(n.id,t)})})}},i.checkForOrangeDrug=function(e){var t=this.facade.retrieveProxy("PetProxy"),i=t.getFightPet();return null==i?0==this._requested?(cu.instance.listAll(),this._drugOrange=e,void(this._requested=!0)):void this.sendNotification("prompted_info_show",{info:"当前没有出战的宠物"}):i.color>6?void this.sendNotification("prompted_info_show",{info:"当前出战的宠物已是橙宠"}):6!=i.getRealQuality()?void this.sendNotification("prompted_info_show",{info:"只有出战紫宠方可服用此丹"}):void this.petOrangeDrugView.showPet(i,e)},s(0,i,"petOrangeDrugView",function(){return this.getViewComponent(),this._petOrangeDrugView}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetUPgradeMediator",t}(lc),Uy=function(e){function t(){this._starInfo=null,t.__super.call(this,"PetEquipChgMediator")}o(t,"modules.pet.view.PetEquipChgMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new BR),this.view.canUsedEqups.renderHandler=new h(this,this.onRender),this.view.canUsedEqups.mouseEnabled=!0,this.view.canUsedEqups.mouseHandler=new h(this,this.onClick)},i.listNotificationInterests=function(){return["SHOW_PET_EQUIP_CHG_PAGE","RECEIVE_PET_EQUIP_INFO","RECEIVE_PET_EQUIP_CHG"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PET_EQUIP_CHG_PAGE":this.showInfo(e.getBody(),e.getType());break;case"RECEIVE_PET_EQUIP_INFO":this._starInfo=e.getBody();break;case"RECEIVE_PET_EQUIP_CHG":this.view.close()}},i.showInfo=function(e,t){var i=this.facade.retrieveProxy("PetEquipProxy");this._starInfo=i.info,e?Ln.renderPetEquip(this.view.dressedEquip,e,i.info):Ln.renderPetEquipEmpty(this.view.dressedEquip,t);var n,o=[],s=this.facade.retrieveProxy("GoodsProxy"),r=s.listItems(0);for(var a in r)n=r[a],n instanceof modules.goods.model.data.PackPetEquip&&n.pos==t&&n.count>0&&o.push(n);0==o.length?(this.view.canUsedEqups.visible=!1,this.view.emptTxt.visible=!0):(this.view.canUsedEqups.visible=!0,this.view.emptTxt.visible=!1,o.sort(this.compareFunctionEquip),this.view.canUsedEqups.dataSource=o),this.view.popup()},i.compareFunctionEquip=function(e,t){return e.isIdentify&&t.isIdentify?t.quality-e.quality:e.isIdentify?-1:t.isIdentify?1:t.quality-e.quality},i.onRender=function(e,t){var i=e.dataSource;i&&Ln.renderPetEquip(e.getChildByName("equip"),i,this._starInfo)},i.onClick=function(e,t){if("click"==e.type)switch(e.target.name){case"btnChange":var i=this.view.canUsedEqups.getCell(t).dataSource;i&&(i.isIdentify?du.instance.dress(i.id,i.pos-1):this.sendNotification("POP_CONFIRM_INFO",{info:"灵宠装备未鉴定，穿戴后将自动鉴定，是否确定？",handler:h.create(this,function(e){e&&du.instance.dress(i.id,i.pos-1)})}))}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetEquipChgMediator",t}(lc),zy=function(e){function t(){this._selectPet=null,t.__super.call(this,"PetSkillDressMediator")}o(t,"modules.pet.view.PetSkillDressMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new hL),this.view.skillDress.renderHandler=new h(this,this.onRender),this.view.skillDress.mouseEnabled=!0,this.view.skillDress.mouseHandler=new h(this,this.onMouse),this.view.skillDress.dataSource=[0,1,2,3],this.view.tab.selectHandler=new h(this,this.onTab),this.view.skillAll.renderHandler=new h(this,this.onRenderAll),this.view.skillAll.mouseEnabled=!0,this.view.skillAll.mouseHandler=new h(this,this.onUpgrade),this.view.skillStore.on("click",this,this.onOpenBox)},i.listNotificationInterests=function(){return["OPEN_PET_SKILL_DRESS","RECEIVE_PET_SKILL","RECEIVE_PET_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_PET_SKILL_DRESS":if(Ng.userVO.getValue(1006)<50)return void this.sendNotification("prompted_info_show",{info:"角色50级开启灵宠技能系统"});if(e.getBody()instanceof modules.pet.model.PlayerPet)this._selectPet=e.getBody(),this.view.tab.selectedIndex=0;else{var t=this.facade.retrieveMediator("PetMediator");t.onShow();var i=this.facade.retrieveProxy("PetProxy");this._selectPet=i.getFightPet(),this.view.tab.selectedIndex=e.getBody()}this.view.popup(),this.fresh();break;case"RECEIVE_PET_SKILL":case"RECEIVE_PET_CHANGE":this.fresh()}},i.fresh=function(){this.view.isPopup&&this.onTab(this.view.tab.selectedIndex)},i.onTab=function(e){var t=this.facade.retrieveProxy("PetProxy"),i=t.petSkill;switch(i?this.view.hasPiece.text="秘籍碎片："+i.piece:this.view.hasPiece.text="",e){case 0:this._selectPet?(this.view.skillDress.visible=!0,this.view.skillAll.visible=!1,this.view.skillStore.visible=!1,this.view.skillDress.refresh()):(this.sendNotification("prompted_info_show",{info:"请选择要查看技能的灵宠"}),this.view.close(),this.sendNotification("SHOW_PET_PAGE"));break;case 1:this.view.skillDress.visible=!1,this.view.skillAll.visible=!0,this.view.skillStore.visible=!1,i?this.view.skillAll.dataSource=i.listAll():this.view.skillAll.dataSource=[];break;case 2:this.view.skillDress.visible=!1,this.view.skillAll.visible=!1,this.view.skillStore.visible=!0,this.freshStore(i)}},i.freshStore=function(e){var t="拥有密阁之钥：",i=this.queryPetSkillKey();i?t=t+i.count+"个":t+="0个";var n=this.view.skillStore.getChildByName("hasKey");n.text=t;var o=this.view.skillStore.getChildByName("btn100"),s=this.view.skillStore.getChildByName("need100");o.visible=e&&e.totalGold>=5e3,s.visible=o.visible},i.onOpenBox=function(e){var t;switch(e.target.name){case"btnOnce":t=this.queryPetSkillKey(),t&&t.count>=1?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用一个【密阁之钥】抽取一次？",handler:h.create(this,function(e){e&&uu.instance.openOnce(t.id)})}):Ng.userVO.getValue(1010)>=60?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用60元宝抽取一次？",handler:h.create(this,function(e){e&&uu.instance.openOnce(0)})}):this.sendNotification("prompted_info_show",{info:"您的元宝不足"});break;case"btnTen":t=this.queryPetSkillKey(),t&&t.count>=10?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用10个【密阁之钥】连续抽取10次？",handler:h.create(this,function(e){e&&uu.instance.openTenTime(t.id,1)})}):Ng.userVO.getValue(1010)>=500?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用500元宝连续抽取10次？",handler:h.create(this,function(e){e&&uu.instance.openTenTime(0,1)})}):this.sendNotification("prompted_info_show",{info:"您的元宝不足"});break;case"btn100":t=this.queryPetSkillKey(),t&&t.count>=100?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用100个【密阁之钥】连续抽取100次？",handler:h.create(this,function(e){e&&uu.instance.openTenTime(t.id,10)})}):Ng.userVO.getValue(1010)>=5e3?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用5000元宝连续抽取100次？",handler:h.create(this,function(e){e&&uu.instance.openTenTime(0,10)})}):this.sendNotification("prompted_info_show",{info:"您的元宝不足"});break;case"btnBook":this.sendNotification("OPEN_PET_SKILL_BOOK");break;case"btnNtc":this.sendNotification("POP_FUN_NOTICE",21)}},i.queryPetSkillKey=function(){var e=this.facade.retrieveProxy("GoodsProxy");return e.findOnePropByBaseId(500024)},i.onRender=function(e,t){if(null!=this._selectPet){var i=this.facade.retrieveProxy("PetProxy"),n=i.petSkill;if(null!=n){var o=e.dataSource,s=-1;null!=this._selectPet.skill&&o<this._selectPet.skill.length&&(s=this._selectPet.skill[o]);var r=e.getChildByName("skill"),a=e.getChildByName("pos"),l=e.getChildByName("empty");switch(t){case 0:a.text="战技1",l.text="绿色品质灵宠开放";break;case 1:a.text="战技2",l.text="黄色品质灵宠开放";break;case 2:a.text="绝技1",l.text="红色品质灵宠开放";break;case 3:a.text="绝技2",l.text="紫色品质灵宠开放"}var h=e.getChildByName("btnUp"),c=e.getChildByName("btnChg");if(s>0){var u=n.getLevel(s);Qi.renderSkill(r,s,u,!1),r.visible=!0,l.visible=!1,h.visible=6>u,c.visible=!0,c.label="更换"}else 0==s?(Qi.renderSkillEmpty(r,t),r.visible=!0,l.visible=!1,h.visible=!1,c.visible=!0,c.label="装备"):(r.visible=!1,l.visible=!0,h.visible=!1,c.visible=!1)}}},i.onMouse=function(e,t){if("click"==e.type){var i=-1;switch(null!=this._selectPet.skill&&t<this._selectPet.skill.length&&(i=this._selectPet.skill[t]),e.target.name){case"btnUp":this.sendNotification("OPEN_PET_SKILL_UPGRADE",i);break;case"btnChg":this.sendNotification("OPEN_PET_SKILL_DRESS_SELECT",{pet:this._selectPet.id,pos:t,skill:i,dress:this._selectPet.skill})}}},i.onRenderAll=function(e,t){var i=e.dataSource,n=e.getChildByName("cellv"),o=e.getChildByName("learnBtn"),s=e.getChildByName("recoverBtn");i.lv<=0?(Qi.renderSkill(n,i.id,1,!0),n.alpha=.6,o.label="获取",o.visible=!0,s.visible=!1):(Qi.renderSkill(n,i.id,i.lv,!0),n.alpha=1,o.label="升品",o.visible=i.lv<6,s.visible=i.lv>1)},i.onUpgrade=function(e,t){if("click"==e.type){var i=this.view.skillAll.getCell(t),n=i.dataSource;switch(e.target.name){case"learnBtn":n.lv<=0?this.sendNotification("OPEN_PET_SKILL_DRESS",2):this.sendNotification("OPEN_PET_SKILL_UPGRADE",n.id);break;case"recoverBtn":var o=this.facade.retrieveProxy("PayTotalPropxy"),s="";if(o.info){var r=o.info.recoverPetSkillAddPercent();r>0&&(s="+"+r+"%")}this.sendNotification("POP_CONFIRM_INFO",{info:"<br><font color='#fffc00'>回收后该技能变更为</font>白色，<br><font color='#e70626'>返还70%"+s+"秘籍碎片和70%铜币</font>，是否继续？",handler:h.create(this,function(e){e&&uu.instance.recover(n.id)})},"duble")}}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetSkillDressMediator",t}(lc),Wy=function(e){function t(){this._selectPet=NaN,this._dressed=null,this._pos=0,t.__super.call(this,"PetSkillDressSelectMediator")}o(t,"modules.pet.view.PetSkillDressSelectMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new sL),this.view.skills.renderHandler=new h(this,this.onRender),this.view.skills.mouseEnabled=!0,this.view.skills.mouseHandler=new h(this,this.onMouse),this.view.btnBuy.clickHandler=new h(this,this.onBuy)},i.onBuy=function(){this.sendNotification("OPEN_PET_SKILL_DRESS",2),this.view.close()},i.listNotificationInterests=function(){return["OPEN_PET_SKILL_DRESS_SELECT"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_PET_SKILL_DRESS_SELECT":this.showDress(e.getBody())}},i.showDress=function(e){this._selectPet=e.pet,this._dressed=e.dress,this._pos=e.pos;var t=e.skill;0>=t?(this.view.noDressTxt.visible=!0,this.view.dress.visible=!1,this.view.dress.dataSource=0):(this.view.noDressTxt.visible=!1,this.view.dress.visible=!0,this.view.dress.dataSource=t);var i=this.facade.retrieveProxy("PetProxy"),n=i.petSkill;n?(this._pos<2?this.view.skills.dataSource=n.listBaseSkills():this.view.skills.dataSource=n.listFightSkills(),Qi.renderSkill(this.view.dress,t,n.getLevel(t),!1)):this.view.skills.dataSource=null,null==this.view.skills.dataSource||this.view.skills.dataSource.length<=0?(this.view.skills.visible=!1,this.view.emptTxt.visible=!0):(this.view.skills.visible=!0,this.view.emptTxt.visible=!1),this.view.popup()},i.onRender=function(e,t){var i=e.dataSource;null!=this._dressed&&-1!=this._dressed.indexOf(i.id)?e.alpha=.6:e.alpha=1,Qi.renderSkill(e.getChildByName("skill"),i.id,i.lv,!1)},i.onMouse=function(e,t){if("click"==e.type){var i=this.view.skills.getCell(t);if(1==i.alpha){var n=i.dataSource;uu.instance.dress(this._selectPet,n.id,this._pos),this.view.close()}else this.sendNotification("prompted_info_show",{info:"该技能已装备"})}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetSkillDressSelectMediator",t}(lc),Yy=function(e){function t(){this._starInfo=null,this._dressed=null,t.__super.call(this,"PetEqiupRefineMediator")}o(t,"modules.pet.view.PetEqiupRefineMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new JR),this.view.btnOnce.clickHandler=new h(this,this.onOnce),this.view.btnAuto.clickHandler=new h(this,this.onAuto)},i.listNotificationInterests=function(){return["SHOW_PET_EQUIP_REFINE_PAGE","RECEIVE_PET_EQUIP_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PET_EQUIP_REFINE_PAGE":this.showInfo(e.getBody(),e.getType());break;case"RECEIVE_PET_EQUIP_INFO":this.view.isPopup&&this.refresh()}},i.showInfo=function(e,t){this._dressed=e;var i=this.facade.retrieveProxy("PetEquipProxy");this._starInfo=i.info,this.refresh(),this.view.popup()},i.refresh=function(){if(null!=this._dressed&&null!=this._starInfo){var e=this._dressed.pos,t=an.queryMaxRefineAdd(this._dressed.prefix);Ln.renderPetEquip(this.view.equip,this._dressed,this._starInfo);var i=this._starInfo.getRefine(e);this.view.lbNow.text=i/100+"%",this.view.lbMax.text=t/100+"%",i>=t?(this.view.btnOnce.visible=!1,this.view.btnAuto.visible=!1):(this.view.btnOnce.visible=!0,this.view.btnAuto.visible=!0)}},i.onOnce=function(){var e=this,t=this.facade.retrieveProxy("GoodsProxy"),i=t.queryProp(500026);return null==i||i.count<1?(this.sendNotification("prompted_info_show",{info:"您的精炼石不足"}),void this.sendNotification("OPEN_MARCKET_FAST_BUY",25)):void this.sendNotification("POP_CONFIRM_INFO",{info:"精炼一次，每次精炼提升-1.5%至+3% 是否确认？",handler:h.create(this,function(t){t&&du.instance.refine(e._dressed.id,i.id)})})},i.onAuto=function(){var e=this,t=this.facade.retrieveProxy("GoodsProxy"),i=t.queryProp(500026);return null==i||i.count<1?(this.sendNotification("prompted_info_show",{info:"您的精炼石不足"}),void this.sendNotification("OPEN_MARCKET_FAST_BUY",25)):void this.sendNotification("POP_CONFIRM_INFO",{info:"自动精炼，每次精炼提升-1.5%至+3% 是否确认？<br>当前持有精炼石"+i.count+"个(自动精炼将消耗玩家身上所有的精炼石，或者将精炼度精炼满为止)",handler:h.create(this,function(t){t&&du.instance.refineAuto(e._dressed.id,i.id)})})},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetEqiupRefineMediator",t}(lc),qy=function(e){function t(){this._equip=null,t.__super.call(this,"PetEquipBreakMediator")}o(t,"modules.pet.view.PetEquipBreakMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new VR),this.view.lbBreakMore.on("click",this,this.onMore),this.view.useNum.on("blur",this,this.onBlur),this.view.btnSure.clickHandler=new h(this,this.onSure)},i.listNotificationInterests=function(){return["SHOW_PET_EQUIP_BREAK_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PET_EQUIP_BREAK_PAGE":this.showInfo(e.getBody())}},i.showInfo=function(e){this._equip=e,null!=this._equip&&(Ln.renderPetEquip(this.view.equip,e),this.view.hasNum.text="持有："+e.count+"个",e.quality<4?(this.view.useNum.text=""+e.count,this.view.ckDouble.selected=!0,this.view.ckDouble.visible=!1):(this.view.useNum.text="1",this.view.ckDouble.selected=!1,this.view.ckDouble.visible=!0),this.onBlur(),this.view.popup())},i.onSure=function(){if(null!=this._equip){var e=vo["int"](this.view.useNum.text);if(isNaN(e)||1>e||e>this._equip.count)return void this.sendNotification("prompted_info_show",{info:"分解数量有误，请确认"});if(0==this.view.ckDouble.selected)return void this.sendNotification("prompted_info_show",{info:"分高品质装备，需要勾选再次确认"});du.instance.feedOne(this._equip.id,e),this.view.close()}},i.onMore=function(e){this.view.close(),this.sendNotification("SHOW_PET_EQUIP_FEED_PAGE")},i.onBlur=function(e){if(this._equip){var t=vo["int"](this.view.useNum.text);isNaN(t)||t>this._equip.count?this.view.exp.text="输入数量有误":this.view.exp.text=t*an.queryMaterialExp(this._equip)+""}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetEquipBreakMediator",t}(lc),Ky=function(e){function t(){this._autoPop=null,this._autoFruitPop=null,this.continueFresh=!1,t.__super.call(this,"PetShopMediator")}o(t,"modules.pet.view.PetShopMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new nL(new h(this,this.onTakePet))),this._autoPop=new eL,this._autoPop.btnSure.clickHandler=new h(this,this.onAutoSure),this.view.btnFresh.clickHandler=new h(this,this.onFresh),this.view.btnFreshAuto.clickHandler=new h(this,this.onFreshAuto),this.view.btnFruit.clickHandler=new h(this,this.onFruitAuto),this._autoFruitPop=new QR,this._autoFruitPop.btnSure.clickHandler=new h(this,this.onAutoFruitSure),this.view.ntc.clickHandler=new h(this,this.onNotice)},i.onNotice=function(){this.sendNotification("POP_FUN_NOTICE",8)},i.listNotificationInterests=function(){return["SHOW_PET_SHOP_PAGE","RECEIVE_PET_SHOP"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PET_SHOP_PAGE":this.view.btnFruit.visible=Ng.userVO.getValue(1006)>=55,this.view.popup(),e.getBody()&&hu.instance.query(),this.continueFresh=!1;break;case"RECEIVE_PET_SHOP":this.view.fresh(e.getBody())}},i.onFresh=function(){var e=this;if(this.view.shop.freshTime-g.clock.currentTime>0){var t,i,n=this.facade.retrieveProxy("GoodsProxy"),o=n.listItems(0),s=null;for(var r in o)if(i=o[r],!(null==i||i.count<=0)&&0==i.goodsType){var a=i;if(500003==a.propConf.id){s=i;break}}if(s){if(this.view.hasNicePet)t="当前拥有高级灵宠<font color='"+N.getColor(this.view.hasNicePet.quality)+"'>【"+this.view.hasNicePet.name+"】</font>，是否使用【龙涎果】继续刷新？";else{if(this.continueFresh)return void hu.instance.freshUseFruit(s.id);t="使用【龙涎果】提前寻找"}this.sendNotification("POP_CONFIRM_INFO",{info:t,handler:h.create(this,function(t){t&&(hu.instance.freshUseFruit(s.id),e.continueFresh=!0)})})}else t=this.view.hasNicePet?"当前拥有高级灵宠<font color='"+N.getColor(this.view.hasNicePet.quality)+"'>【"+this.view.hasNicePet.name+"】</font>，是否花费20元宝继续刷新？":"花费20元宝提前寻找",this.sendNotification("POP_CONFIRM_INFO",{info:t,handler:h.create(this,function(e){e&&hu.instance.fresh()})})}else this.view.hasNicePet?this.sendNotification("POP_CONFIRM_INFO",{info:"当前拥有高级灵宠<font color='"+N.getColor(this.view.hasNicePet.quality)+"'>【"+this.view.hasNicePet.name+"】</font>，是否继续刷新？",handler:h.create(this,function(e){e&&hu.instance.freshFree()})}):hu.instance.freshFree();op.aldSendEvent("寻找灵宠")},i.onFreshAuto=function(){this.autoPop.popup(),op.aldSendEvent("自动寻找")},i.onFruitAuto=function(){var e,t=this.facade.retrieveProxy("GoodsProxy"),i=t.listItems(0),n=null;for(var o in i)if(e=i[o],!(null==e||e.count<=0)&&0==e.goodsType){var s=e;if(500003==s.propConf.id){n=s;break}}n?this.autoFruitPop.showInfo(n):this.sendNotification("prompted_info_show",{info:"您的龙涎果不足"})},i.onAutoFruitSure=function(){hu.instance.freshUseFruitAuto(this.autoFruitPop.fruit.id,this.autoFruitPop.aimQ),this.autoFruitPop.close()},i.onAutoSure=function(){var e=vo["int"](this.autoPop.maxGold.text);Ng.userVO.getValue(1010)<e?this.sendNotification("prompted_info_show",{info:"您的元宝不足"+e}):hu.instance.freshAuto(this.autoPop.aimQ),this.autoPop.close()},i.onTakePet=function(e){var t=this.facade.retrieveProxy("PetProxy");t.isFull()?this.sendNotification("prompted_info_show",{info:"您抓捕的宠物已满"}):hu.instance.takeOne(e)},s(0,i,"autoFruitPop",function(){return this.getViewComponent(),this._autoFruitPop}),s(0,i,"autoPop",function(){return this.getViewComponent(),this._autoPop}),s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetShopMediator",t}(lc),Xy=function(e){function t(){this._starInfo=null,t.__super.call(this,"PetEquipFeedMediator")}o(t,"modules.pet.view.PetEquipFeedMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new XR),this.view.submit.clickHandler=new h(this,this.onFeed)},i.listNotificationInterests=function(){return["SHOW_PET_EQUIP_FEED_PAGE","RECEIVE_PET_EQUIP_FEED"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PET_EQUIP_FEED_PAGE":this.showInfo(e.getBody(),e.getType());break;case"RECEIVE_PET_EQUIP_FEED":this.view.close()}},i.showInfo=function(e,t){var i,n=[],o=this.facade.retrieveProxy("GoodsProxy"),s=o.listItems(0);for(var r in s)i=s[r],i instanceof modules.goods.model.data.PackPetEquip&&i.count>0&&n.push(i.resetCountTmp());return 0==n.length?void this.sendNotification("prompted_info_show",{info:"当前没有可分解的装备"}):(n.sort(this.compareFunctionEquip),this.view.list.dataSource=n,void this.view.showProps(n,this._starInfo))},i.compareFunctionEquip=function(e,t){return e.quality==t.quality?100*e.prefix+e.pos-(100*t.prefix+t.pos):e.quality-t.quality},i.compareFunctionEquipBetter=function(e,t){return e.isIdentify&&t.isIdentify?t.quality-e.quality:e.isIdentify?-1:t.isIdentify?1:t.quality-e.quality},i.onFeed=function(){var e,t,i=this,n=[],o=0;if(this.view.selectedProps.keys.length){var s=[];s=s.concat(this.view.selectedProps.keys),s.sort(this.compareFunctionEquipBetter);var r;for(var a in s)r=s[a],o+=an.queryMaterialExp(r)*r.countTmp,n.length<20&&(t="<font color='"+N.getColor(r.quality)+"'>"+r.extCfg.prefix+"【"+r.baseCfg.name+"】*"+r.countTmp+" </font>",n.push(t)),20==n.length&&n.push("……");e=n.join("、"),e="确定分解："+e+"用于增加培炼值？<br><font color='#e70626'>(总计可增加培炼值："+o+")</font>",this.sendNotification("POP_CONFIRM_INFO",{info:e,handler:h.create(this,function(e){e&&(du.instance.feed(i.view.selectedProps),i.view.close())})},"duble")}else this.sendNotification("prompted_info_show",{info:"请选择要分解的装备"})},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetEquipFeedMediator",t}(lc),Qy=function(e){function t(){this.freshAble=!1,this._paytotal=null,this.starCfg=null,this.starLv=-1,this._starInfo=null,this._dressed=null,this.freshAbleStone=!1,this.starStones=null,this.protectStones=null,this.lastCostStoneCount=0,t.__super.call(this,"PetEquipStarMediator")}o(t,"modules.pet.view.PetEquipStarMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new YR),this.view.btnSubmit.clickHandler=new h(this,this.onSubmit)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","SHOW_PET_EQUIP_STAR_PAGE","RECEIVE_PET_EQUIP_STAR","FRESH_GOODS_PACK","RECIVE_PAY_TOTAL_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this.starLv=-1,this._starInfo=null,this._dressed=null,this._paytotal=null;break;case"RECIVE_PAY_TOTAL_INFO":this._paytotal=e.getBody();break;case"SHOW_PET_EQUIP_STAR_PAGE":this.freshAble=!0,this.showInfo(e.getBody(),e.getType());break;case"RECEIVE_PET_EQUIP_STAR":this._starInfo=e.getBody();var t=this.starLv;if(this.view.isPopup&&this._starInfo&&this._dressed)if(this.starLv=this._starInfo.getStarLv(this._dressed.pos),t<this.starLv){this.sendNotification("prompted_info_show",{info:"恭喜您强化成功"});var i=this._dressed.baseCfg,n=I.getName(i.getKey()),o=i.getValue(this._dressed.prefix),s=this._starInfo.getFeedLv(this._dressed.pos);if(s>0){var r=an.queryMaxFeedLevel(this._dressed.prefix);s>r&&(s=r);var a=an.getFeedAdd(s,o);o+=a}o=vo["int"](o*(Math.pow(1.1,this.starLv)-1)),this.sendNotification("prompted_info_show",{info:n+" "+I.getValueStr(i.getKey(),o,!0)})}else{t>this.starLv?this.sendNotification("prompted_info_show",{info:"强化失败，星级减少"+(t-this.starLv)+"，可以选择护灵符保护"}):this.sendNotification("prompted_info_show",{info:"强化失败，星级保留"});var l=Ng.userVO.getValue(7003);if(l&&this.lastCostStoneCount){var h=vo["int"](this.lastCostStoneCount*l/1e4);this.sendNotification("prompted_info_show",{info:"返还灵石："+h+"个"})}}this.freshStones(),this.freshAble=!0,this.fresh();break;case"FRESH_GOODS_PACK":var c=e.getBody();c.contain(0)&&(this.freshAbleStone=!0,this.freshStones())}},i.showInfo=function(e,t){this._dressed=e;var i=this.facade.retrieveProxy("PetEquipProxy");this._starInfo=i.info,this.view.popup(),this.freshStones(),this.fresh()},i.fresh=function(){this.freshAble&&this.view.isPopup&&this._starInfo&&this._dressed&&(this.starLv=this._starInfo.getStarLv(this._dressed.pos),Ln.renderPetEquip(this.view.equipOld,this._dressed,this._starInfo),Ln.renderPetEquip(this.view.equipNew,this._dressed,this._starInfo,1),this.freshStoneCountShow())},i.freshStoneCountShow=function(){if(this.view.checkProtect.visible=this.starLv>5,this.view.txtHoldTimes.visible=!1,this.starCfg=g.database.getData("equipStar",this.starLv+1),this.starCfg){this.view.txtStoneNum.color="#e70626";var e=this.starCfg.needStone;e*=8,this.starStones?(this.view.txtStoneNum.text=e+"/"+this.starStones.count,e<=this.starStones.count&&(this.view.txtStoneNum.color="#00dc24")):this.view.txtStoneNum.text=e+"/0";var t=1;this.starLv>=10&&(t+=this.starLv-9),t*=2,this.protectStones?this.view.checkProtect.label="使用护灵符："+t+"/"+this.protectStones.count:this.view.checkProtect.label="使用护灵符："+t+"/0",this.view.txtSuccPercent.text=this.starCfg.succPercent/100+"%";var i=this._starInfo?this._starInfo.getStarFail(this._dressed.pos):0;if(this._starInfo&&i){var n=Ui.getSuccPercentAdd(this._dressed.pos,i);this.view.txtSuccPercentAdd.text="+ "+n+"%"}else this.view.txtSuccPercentAdd.text="";if(this._paytotal&&this._paytotal.isStarExHold()){var o=Ui.getHoldTime(this._dressed.pos,this.starLv);2147483647>o&&(this.view.txtHoldTimes.visible=!0,i>=o?(this.view.txtHoldTimes.text="已强化失败"+i+"次，本次强化必然成功",this.view.checkProtect.visible=!1):this.view.txtHoldTimes.text="最多强化失败"+o+"次，之后必然成功（已失败"+i+"次）")}this.view.equipNew.visible=!0,this.view.btnSubmit.visible=!0}else this.view.txtStoneNum.text="",this.view.txtSuccPercent.text="已是最高等级",this.view.equipNew.visible=!1,this.view.txtSuccPercentAdd.text="",this.view.btnSubmit.visible=!1},i.freshStones=function(){if(this.freshAbleStone&&this.view.isPopup){var e=this.facade.retrieveProxy("GoodsProxy"),t=e.listItems(0);this.starStones=null,this.protectStones=null;var i;for(var n in t)if(i=t[n],!(null==i||i.count<=0)&&0==i.goodsType){var o=i;500002==o.propConf.id?this.protectStones=i:500001==o.propConf.id&&(this.starStones=i)}this.freshStoneCountShow(),this.freshAbleStone=!1}},i.onSubmit=function(e){var t=this;if(this.starLv<0)return void this.sendNotification("prompted_info_show",{info:"强化数据未载入,请稍后再试."});if(this.starStones&&this.starCfg){var i=this.starCfg.needStone;if(i*=8,this.lastCostStoneCount=i,this.starStones.count<i)return void this.sendNotification("prompted_info_show",{info:"需要"+i+"个灵石。"});if(this.starLv<=5||0==this.view.checkProtect.visible)return void(this.starLv>5?du.instance.upgradeStar(this._dressed.pos,this.starStones.id,0,!0):du.instance.upgradeStar(this._dressed.pos,this.starStones.id,0,!1));if(!this.view.checkProtect.selected){return void(this.starLv>5&&this.facade.sendNotification("POP_CONFIRM_INFO",{info:"您未使用护灵符，若强化失败，强化星级将下降。",handler:h.create(this,function(e){e&&du.instance.upgradeStar(t._dressed.pos,t.starStones.id,0,!1)})},"duble"))}var n=1;if(this.starLv>=10&&(n+=this.starLv-9),n*=2,!this.protectStones||this.protectStones.count<n){var o=this._paytotal&&this._paytotal.isMarcket90percent(),s=100;o&&(s=vo["int"](90*s/100));var r=Ng.userVO.getValue(1010),a=s*n;return a>r?void this.sendNotification("prompted_info_show",{info:"护灵符不足"+n+"个，需要元宝"+a+"，无法强化。"}):void this.facade.sendNotification("POP_CONFIRM_INFO",{info:"护灵符不足，将使用<font color='#fffc00'>"+a+"元宝</font>，是否继续？",handler:h.create(this,function(e){e&&(du.instance.upgradeStar(t._dressed.pos,t.starStones.id,-1,!1),k.goldenCost("强化护灵符",n,s))})})}du.instance.upgradeStar(this._dressed.pos,this.starStones.id,this.protectStones.id,!1)}else this.sendNotification("prompted_info_show",{info:"您的灵石不足。"})},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetEquipStarMediator",t}(lc),jy=function(e){function t(){t.__super.call(this)}o(t,"modules.team.controller.commands.TeamPushCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("Team",t.value),n=this.facade.retrieveProxy("TeamProxy"),o=n.receiveTeamOption(i);switch(this.sendNotification("RECEIVE_TEAM_INFO",o),t.cmd){case 101:break;case 102:break;case 103:break;case 104:break;case 105:break;case 107:this.sendNotification("prompted_info_show",{info:"您已被移除队伍"}),this.sendNotification("OPEN_TEAM_SELF",null,"close"),
this.sendNotification("OPEN_TEAM_GATE"),n.clearMemberInfo()}}},t}(rc),Zy=function(e){function t(){t.__super.call(this)}o(t,"modules.team.controller.commands.MemeberInfoCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ParamKeyValue",t.value),n=this.facade.retrieveProxy("TeamProxy"),o=n.receiveMemberInfo(i.keys,i.values);this.sendNotification("RECEIVE_TEAM_MEMBER_INFO",o)}},t}(rc),Jy=function(e){function t(){t.__super.call(this)}o(t,"modules.team.controller.commands.TeamOptionCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody(),i=this.facade.retrieveProxy("TeamProxy");if(t.success){var n=v.protoCodec.getResponseDecoder().decode("Team",t.value),o=i.receiveTeamOption(n);switch(this.sendNotification("RECEIVE_TEAM_INFO",o),t.cmd){case 4:this.sendNotification("prompted_info_show",{info:"创建队伍成功"}),this.sendNotification("OPEN_TEAM_SELF");break;case 5:case 15:this.sendNotification("prompted_info_show",{info:"加入队伍成功"}),this.sendNotification("OPEN_TEAM_SELF");break;case 7:this.sendNotification("prompted_info_show",{info:"您已离开队伍"}),this.sendNotification("OPEN_TEAM_SELF",null,"close"),this.sendNotification("OPEN_TEAM_GATE"),i.clearMemberInfo();break;case 11:if(this.sendNotification("prompted_info_show",{info:"开始组队战斗"}),Ng.userVO.getValue(7007)){var s=g.database.getData("dungeonteam",o.dungeonId);s&&this.sendNotification("SHOW_FIGHT_PAGE_OTHER",s,6)}break;case 16:this.sendNotification("prompted_info_show",{info:"切换副本成功"})}}else{16==t.cmd&&null!=i&&null!=i.getTeam()&&this.sendNotification("RECEIVE_TEAM_INFO",i.getTeam());var r=cn.getLoginErrorInfo(t.status);this.sendNotification("prompted_info_show",{info:r})}},t}(rc),$y=function(e){function t(){t.__super.call(this)}o(t,"modules.team.controller.commands.TeamBreakPushCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success&&(this.sendNotification("prompted_info_show",{info:"队伍已解散"}),this.sendNotification("OPEN_TEAM_SELF",null,"close"))},t}(rc),eb=function(e){function t(){t.__super.call(this)}o(t,"modules.team.controller.commands.ListLogsCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("TeamLogs",t.value);this.sendNotification("RECEIVE_TEAM_LOGS",i.logs)}},t}(rc),tb=function(e){function t(){t.__super.call(this)}o(t,"modules.team.controller.commands.PlayerTeamCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerTeam",t.value),n=this.facade.retrieveProxy("TeamProxy"),o=n.receivePlayerTeam(i);this.sendNotification("RECEIVE_PLAYER_TEAM",o),13==t.cmd?(this.sendNotification("prompted_info_show",{info:"进入副本次数购买成功"}),Ng.userVO.setValue(7008,o.times),this.sendNotification("RECEIVE_TEAM_MEMBER_INFO")):90==t.cmd&&(this.sendNotification("prompted_info_show",{info:"副本次数增加1次"}),Ng.userVO.setValue(7008,o.times),this.sendNotification("RECEIVE_TEAM_MEMBER_INFO"))}},t}(rc),ib=function(e){function t(){t.__super.call(this)}o(t,"modules.team.controller.commands.ListTeamCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("TeamPager",t.value),n=this.facade.retrieveProxy("TeamProxy"),o=n.receiveTeamPager(i);this.sendNotification("RECEIVE_TEAM_LIST",o)}},t}(rc),nb=function(e){function t(){t.__super.call(this)}o(t,"modules.team.controller.TeamPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(hn.TEAM_LIST_LOGS,eb),this.facade.registerCommand(hn.TEAM_QUERY_PLAYER_TEAM,tb),this.facade.registerCommand(hn.TEAM_BUY_TIME,tb,!0),this.facade.registerCommand(hn.TEAM_ADD_BY_PROP,tb,!0),this.facade.registerCommand(hn.TEAM_LIST_TEAM,ib,!0),this.facade.registerCommand(hn.TEAM_QUERY_MEMBER_INOF,Zy,!0),this.facade.registerCommand(hn.TEAM_CREATE,Jy,!0),this.facade.registerCommand(hn.TEAM_JOIN,Jy,!0),this.facade.registerCommand(hn.TEAM_JOIN_WITH_PWD,Jy,!0),this.facade.registerCommand(hn.TEAM_JOIN_NPC,Jy,!0),this.facade.registerCommand(hn.TEAM_LEAVE,Jy,!0),this.facade.registerCommand(hn.TEAM_KICK,Jy,!0),this.facade.registerCommand(hn.TEAM_CHANGE_LEADER,Jy,!0),this.facade.registerCommand(hn.TEAM_CHANGE_POS,Jy,!0),this.facade.registerCommand(hn.TEAM_FIGHT,Jy,!0),this.facade.registerCommand(hn.TEAM_QUERY_TEAM,Jy,!0),this.facade.registerCommand(hn.TEAM_CHG_DUNGEON,Jy,!0),this.facade.registerCommand(hn.TEAM_PUSH_TEAM,jy),this.facade.registerCommand(hn.TEAM_PUSH_JOIN,jy),this.facade.registerCommand(hn.TEAM_PUSH_REMOVE,jy),this.facade.registerCommand(hn.TEAM_PUSH_LEADER_CHG,jy),this.facade.registerCommand(hn.TEAM_PUSH_POS_CHG,jy),this.facade.registerCommand(hn.TEAM_PUSH_BE_KICK,jy),this.facade.registerCommand(hn.TEAM_PUSH_BREAK,$y)},t}(rc),ob=function(e){function t(){this._playerTeam=new un,this._teamPager=new dn,this._memberInfoTmp=new uo,this._team=new fn,this._requestedMids=new go,t.__super.call(this,"TeamProxy",null)}o(t,"modules.team.model.TeamProxy",e);var i=t.prototype;return i.clearMemberInfo=function(){this._memberInfoTmp.clear(),this._requestedMids.clear()},i.receivePlayerTeam=function(e){return this._playerTeam.update(e),this._playerTeam},i.receiveTeamPager=function(e){return this._teamPager.update(e),this._teamPager},i.receiveMemberInfo=function(e,t){for(var i=new $c,n=0;n<e.length;n++){var o=e[n],s=t[n];i.setValue(o,s),1106==o&&i.setValue(1100,s),1107==o&&i.setValue(1101,s),1001==o&&(i.unitId.id=s),1203!=o&&1204!=o||si.updateAndCheck(i,o,s)}return this._memberInfoTmp.set(i.getValue(1001),i),i},i.getMemberInfo=function(e){return e==Ng.userVO.unitId.id?Ng.userVO:this._memberInfoTmp.get(e)},i.reduceMembertimes=function(){var e;for(var t in this._team.members.values)if(e=this._team.members.values[t],e>0){var i=this.getMemberInfo(e);if(null!=i){var n=i.getValue(7008)-1;0>n&&(n=0),i.setValue(7008,n)}}},i.receiveTeamOption=function(e){return this._team.update(e),this.checkMemberInfos(),this._team},i.getTeam=function(){return this._team},i.checkMemberInfos=function(){var e,t=!1;for(var i in this._team.members.values)e=this._team.members.values[i],e>0&&(null!=this.getMemberInfo(e)||this._requestedMids.contain(e)||(pu.instance.queryMemberInfo(e),this._requestedMids.add(e),t=!0));return t},i.isMemberInfoFull=function(){var e;for(var t in this._team.members.values)if(e=this._team.members.values[t],e>0&&null==this.getMemberInfo(e))return!1;return!0},t.NAME="TeamProxy",n(t,["MEMBER_POS",function(){return this.MEMBER_POS=[{i:0,a:"防御+10%",d:"攻击-10%"},{i:1,a:"攻击+10%",d:"防御-10%"},{i:2,a:"攻击+10%",d:"防御-10%"}]}]),t}(sc),sb=function(e){function t(){this._starInfo=null,this._pos2equip=new uo,t.__super.call(this,"PetEquipMediator")}o(t,"modules.pet.view.PetEquipMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new FR),this.view.list.dataSource=en.ARR_ALL,this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onClick)},i.onRegister=function(){this.facade.registerMediator(new Uy),this.facade.registerMediator(new qy),this.facade.registerMediator(new Xy),this.facade.registerMediator(new Gy),this.facade.registerMediator(new Qy),this.facade.registerMediator(new Yy)},i.listNotificationInterests=function(){return["USER_INIT","SHOW_PET_EQUIP_PAGE","RECEIVE_PET_EQUIP_INFO","FRESH_GOODS_PACK"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":this._starInfo=null,this._pos2equip.clear();var t=this.facade.retrieveProxy("PetEquipProxy");t.clear(),Ng.userVO.getValue(1006)>=100&&du.instance.queryInfo();break;case"SHOW_PET_EQUIP_PAGE":if(Ng.userVO.getValue(1006)<100)return void this.sendNotification("prompted_info_show",{info:"100级开启灵宠装备系统"});this.freshEquips(),this.view.popup();break;case"RECEIVE_PET_EQUIP_INFO":this._starInfo=e.getBody(),this.view.isPopup&&this.freshEquips();break;case"FRESH_GOODS_PACK":if(this.view.isPopup){var i=e.getBody();i.contain(2)&&this.freshEquips()}}},i.freshEquips=function(){if(this._pos2equip.clear(),this._starInfo)if(this._starInfo.suitLv>0){this.view.lbSuit.text="【套装效果】神圣抵抗"+this._starInfo.suitLv+"级";var e=vo["int"](this._starInfo.suitLv/20)+1;this.view.lbSuit.color=N.getColor(e)}else this.view.lbSuit.text="【套装效果】神圣抵抗1级(全套培炼5级可激活)",this.view.lbSuit.color="#b0bcb0";else this.view.lbSuit.text="";var t,i=this.facade.retrieveProxy("GoodsProxy"),n=i.listItems(2);for(var o in n)t=n[o],t instanceof modules.goods.model.data.PackPetEquip&&t.count>0&&this._pos2equip.set(t.pos,t);this.view.list.refresh()},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("btnStar"),o=e.getChildByName("btnFeed"),s=e.getChildByName("btnRefine"),r=e.getChildByName("btnDress"),a=this._pos2equip.get(i);null==a?(Ln.renderPetEquipEmpty(e.getChildByName("item"),i),o.visible=!1,s.visible=!1,n.visible=!1,r.label="佩戴"):(Ln.renderPetEquip(e.getChildByName("item"),a,this._starInfo),o.visible=!0,n.visible=!0,s.visible=!0,n.visible=!0,r.label="更换")},i.onClick=function(e,t){if("click"==e.type){var i=this.view.list.getCell(t).dataSource,n=this._pos2equip.get(i);switch(e.target.name){case"btnFeed":this.sendNotification("SHOW_PET_EQUIP_FEEDUP_PAGE",n,i);break;case"btnStar":this.sendNotification("SHOW_PET_EQUIP_STAR_PAGE",n,i);break;case"btnRefine":this.sendNotification("SHOW_PET_EQUIP_REFINE_PAGE",n,i);break;case"btnDress":this.sendNotification("SHOW_PET_EQUIP_CHG_PAGE",n,i)}}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetEquipMediator",t}(lc),rb=function(e){function t(){this._requested=!1,t.__super.call(this,"PetMediator")}o(t,"modules.pet.view.PetMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new TN),this.view.btnUpgrade.clickHandler=new h(this,this.onUpgrade),this.view.btnDrop.clickHandler=new h(this,this.onDrop),this.view.btnFightOn.clickHandler=new h(this,this.onFighton),this.view.btnBlood.clickHandler=new h(this,this.onBlood),this.view.chgNature.clickHandler=new h(this,this.onChgNature),this.view.btnEquip.clickHandler=new h(this,this.onEquip),this.view.chat.clickHandler=new h(this,this.onChat),this.view.btnSkill.clickHandler=new h(this,this.onSkill)},i.onRegister=function(){this.facade.registerMediator(new Hy),this.facade.registerMediator(new Ky),this.facade.registerMediator(new By),this.facade.registerMediator(new ab),this.facade.registerMediator(new Vy),this.facade.registerMediator(new Fy),this.facade.registerMediator(new zy),this.facade.registerMediator(new Wy),this.facade.registerMediator(new hb)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","SHOW_PET_PAGE","RECEIVE_PET_LIST","RECEIVE_PET_ATTRIBUTES","RECEIVE_PET_NEW","RECEIVE_PET_DROP","RECEIVE_PET_CHANGE","FRESH_GOODS_PACK"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this._requested=!1;var t=this.facade.retrieveProxy("PetProxy");t&&t.clear();break;case"SHOW_PET_PAGE":break;case"RECEIVE_PET_LIST":var i=e.getBody();this.view.freshPets(i);break;case"RECEIVE_PET_ATTRIBUTES":this.view.freshAttribut(e.getBody());break;case"RECEIVE_PET_NEW":this.view.freshTitles();break;case"RECEIVE_PET_DROP":this.view.freshTitles(),this.view.dropPetFresh();break;case"RECEIVE_PET_CHANGE":this.view.freshTitles(),this.view.changePet(e.getBody());break;case"FRESH_GOODS_PACK":var n=e.getBody();this.view.visible&&n.contain(2)&&this.view.freshDressedNow()}},i.onUpgrade=function(){this.view.selectPet&&this.sendNotification("SHOW_PET_UPGRADE_PAGE",this.view.selectPet)},i.onDrop=function(){var e=this;if(null!=this.view.selectPet){if(1==this.view.selectPet.state)return void this.sendNotification("prompted_info_show",{info:"出战灵宠不可放生"});var t=N.getColor(this.view.selectPet.getRealQuality()),i="确认放生灵宠<font color='"+t+"'>【"+this.view.selectPet.getRealName()+"】</font><br>放生将收回装备的兽魂和80%魔核";this.view.selectPet.growAdd>0&&(i=i+"<br>放生回收<font color='#c527ff'>【灵宠成长丹】</font>*"+this.view.selectPet.growAdd),this.view.selectPet.getRealQuality()>=3&&(i+="<br>绿色品质以上还可获得远古血脉"),this.view.selectPet.color>=20&&(i+="<br>放生橙宠可获得<font color='#c527ff'>【橙宠进阶丹】1个</font>"),this.view.selectPet.petCfg.quality>=5&&(i+="<br>&nbsp;<br><font color='#e70626'>特别告知：您当前正在放生宠物，</font><br><font color='#e70626'>此操作一经确认不可逆转。</font>"),this.view.selectPet.getRealQuality()>=5?this.sendNotification("POP_CONFIRM_INFO",{info:i,"double":"确认请输入 ‘放生’",handler:h.create(this,function(t,i){t&&"放生"==i&&cu.instance.drop(e.view.selectPet.id)})},"dubleinput"):this.sendNotification("POP_CONFIRM_INFO",{info:i,handler:h.create(this,function(t){t&&cu.instance.drop(e.view.selectPet.id)})})}},i.onFighton=function(){cu.instance.fightOn(this.view.selectPet.id)},i.onBlood=function(){this.sendNotification("SHOW_BLOOD_PAGE")},i.onChgNature=function(){this.sendNotification("SHOW_PET_CHG_NATURE_PAGE",this.view.selectPet)},i.onChat=function(){this.sendNotification("CHAT_INPUT_ITEM",this.view.selectPet)},i.onSkill=function(){this.sendNotification("OPEN_PET_SKILL_DRESS",this.view.selectPet)},i.onEquip=function(){this.sendNotification("SHOW_PET_EQUIP_PAGE")},i.onShow=function(){0==this._requested&&(cu.instance.listAll(),Kc.instance.query(),uu.instance.query(),this._requested=!0)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetMediator",t}(lc),ab=function(e){function t(){this.aimProp=null,this.pet=null,t.__super.call(this,"PetMakeOrangeGhostMediator")}o(t,"modules.pet.view.PetMakeOrangeGhostMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new iL),this.view.materials.renderHandler=new h(this,this.onRenderMaterials),this.view.btnSure.clickHandler=new h(this,this.onSure)},i.listNotificationInterests=function(){return["SHOW_PET_ORANGE_GHOST_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_PET_ORANGE_GHOST_PAGE":this._show(e.getBody())}},i._show=function(e){this.aimProp=e.ghost,this.pet=e.pet,this.renderGhost(this.view.aimGhost,this.aimProp);var t=g.database.getData("props",this.aimProp.baseId+1);this.renderNextGhost(this.view.showGhost,t);var i,n=this.facade.retrieveProxy("GoodsProxy"),o=n.listItems(0),s=null,r=null,a=null,l=10*(this.aimProp.propConf.type+100)+1;for(var h in o)i=o[h],null==i||i.count<=0||0!=i.goodsType||(185007==i.baseId?s=i:185008==i.baseId?r=i:26==i.propConf.propType&&i.propConf.nature==this.aimProp.propConf.nature&&i.baseId==l&&(a=i));this.view.materials.dataSource=[a,s,r],this.view.popup()},i.onRenderMaterials=function(e,t){var i,n=e.dataSource,o=0,s=e.getChildByName("price"),r=e.getChildByName("count");switch(s.visible=!1,t){case 0:o=100;var a=this.aimProp.propConf.type+100;a=10*a+1,i=g.database.getData("props",a);break;case 1:o=20,i=g.database.getData("props",185007);break;case 2:o=5,i=g.database.getData("props",185008)}null!=n?(Ln.renderProps(e,n),n.count>=o?(e.alpha=1,r.color="#00dc24"):(e.alpha=.5,r.color="#e70626")):(Ln.renderPropsByCfg(e,i,0),e.alpha=.5,r.color="#e70626"),r.text=(n?n.count:0)+"/"+o+"个",r.visible=!0},i.renderGhost=function(e,t){var i=e.getChildByName("name"),n=e.getChildByName("nature"),o=e.getChildByName("attribute1"),s=e.getChildByName("attribute2");e.getChildByName("changeBtn"),e.getChildByName("takeOffBtn");i.text=t.propConf.name,i.color=N.getColor(t.quality);var r=i.x+i.width;n.x=r,n.index=t.propConf.nature-1;var a=t.baseAttr[0],l=I.getName(a.key);o.text=l+I.getValueStr(a.key,a.value,!0),a=t.baseAttr[1],l=I.getName(a.key),s.text=l+I.getValueStr(a.key,a.value,!0)},i.renderNextGhost=function(e,t){if(null!=t){var i=e.getChildByName("name"),n=e.getChildByName("nature"),o=e.getChildByName("attribute1"),s=e.getChildByName("attribute2");e.getChildByName("changeBtn"),e.getChildByName("takeOffBtn");i.text=t.name,i.color=N.getColor(t.quality);var r=i.x+i.width;n.x=r,n.index=t.nature-1;var a=t.baseAttr[0],l=I.getName(a.key);o.text=l+I.getValueStr(a.key,a.min,!0),a=t.baseAttr[1],l=I.getName(a.key),s.text=l+I.getValueStr(a.key,a.min,!0)}},i.onSure=function(){var e=this,t=this.view.materials.dataSource,i=t[0],n=t[1],o=t[2];if(null==n||null==o||null==i||i.count<100||n.count<20||o.count<5)return void this.sendNotification("prompted_info_show",{info:"进阶需要的材料不足"});var s="确认消耗";s=s+"<font color='#c527ff'>"+i.propConf.name+"*100</font>",s+="<font color='#e70626'>【仙品天籁石】*20</font>",s+="<br><font color='#c527ff'>【仙品天籁石】*5</font>",s+="进阶兽魂吗?",this.sendNotification("POP_CONFIRM_INFO",{info:s,handler:h.create(this,function(t){t&&(cu.instance.makeOrangeGhost(e.pet.id,e.aimProp.id,[{L:i.id,i:100},{L:n.id,i:20},{L:o.id,i:5}]),e.view.close())})},"duble")},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetMakeOrangeGhostMediator",t.PET_GHOST_ORANGE_NEED_SOUL=100,t.PET_GHOST_ORANGE_NEED_RED_SKY=20,t.PET_GHOST_ORANGE_NEED_PURPLE_SKY=5,t}(lc),lb=function(e){function t(){this._requested=!1,t.__super.call(this,"PetSkillBookMediator")}o(t,"modules.pet.view.PetSkillBookMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new CN),this.view.list.renderHandler=new h(this,this.onRender)},i.listNotificationInterests=function(){return["RECEIVE_PET_SKILL"]},i.handleNotification=function(e){switch(e.getName()){case"RECEIVE_PET_SKILL":var t=e.getBody();this.view.list.dataSource=t.listBook()}},i.onShow=function(){0==this._requested&&(uu.instance.query(),this._requested=!0)},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("name"),o=e.getChildByName("spInfo"),s=g.database.getData("petskill",i.id);s?(n.text=s.name,i.lv<=0?(n.color="#b0bcb0",o.text=s.getSpInfo(1)+"（未激活）",o.color="#b0bcb0"):(n.color=N.getColor(i.lv),o.text=s.getSpInfo(i.lv),o.color=n.color),o.x=n.x+n.width+10):console.log("not find petskill:"+i.id)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetSkillBookMediator",t}(lc),hb=function(e){function t(){t.__super.call(this,"PetSkillOpenMediator")}o(t,"modules.pet.view.PetSkillOpenMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new _P),this.view.lbTitle.text="抽取灵宠技能",this.view.desc.text=""},i.listNotificationInterests=function(){return["OPEN_PET_SKILL_OPENAWARD"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_PET_SKILL_OPENAWARD":var t=e.getBody();this.view.clear(),10==e.getType()?this.view.txtReports.appendHTML("单抽一次获得<br>"):this.view.txtReports.appendHTML("连抽"+t.skills.length+"次获得<br>");for(var i=0,n=0;n<t.skills.length;n++){var o=t.skills[n],s=t.pieces[n];if(i+=s,0!=o){var r=Math.abs(o),a=g.database.getData("petskill",r);a&&(16>r?this.view.txtReports.appendHTML("<font color='#fffc00'>【战技】</font>"+a.name):this.view.txtReports.appendHTML("<font color='#e70626'>【绝技】</font>"+a.name))}0>o?this.view.txtReports.appendHTML("<font color='#e70626'>（已有技能自动分解，获得秘籍碎片:"+s+"）</font><br>"):o>0?this.view.txtReports.appendHTML("<font color='#00dc24'>（图鉴已激活）</font><br>"):this.view.txtReports.appendHTML("秘籍碎片："+s+"<br>")}t.skills.length>0&&(this.view.txtReports.appendHTML("=======累计获得秘籍碎片："+i),this.view.panelReports.refresh(),this.view.panelReports.vScrollBar.value=this.view.panelReports.vScrollBar.max),this.view.popup()}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="PetSkillOpenMediator",t}(lc),cb=function(e){function t(){t.__super.call(this)}o(t,"modules.alcshop.controller.AlcshopPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(_n.ALCSHOP_BUY,ub,!0)},t}(rc),ub=function(e){function t(){t.__super.call(this)}o(t,"modules.alcshop.controller.commands.AlcshopCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n=this.facade.retrieveProxy("AllianceProxy");switch(t.cmd){case 1:i=v.protoCodec.getResponseDecoder().decode("PlayerAlliance",t.value);var o=n.receivePlayerAlliance(i);this.sendNotification("RECIVE_PLAYER_ALLIANCE",o)}}},t}(rc),db=function(e){function t(e){this._teamLogs=null,this._pd=null,this._team=null,t.__super.call(this,"TeamMediator")}o(t,"modules.team.view.TeamMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.spcailDungeon.getChildByName("teamHead")),this.init();var i=this.vi.getChildByName("btnEnter");i.on("mouseup",this,this.onClick)},i.init=function(){this.getViewComponent();var e=this.vi.getChildByName("lbTimes");e.text="",e=this.vi.getChildByName("lbBuyed"),e.text="",e=this.vi.getChildByName("txLevel"),e.text="40级开启";var t=this.vi.getChildByName("btnEnter");t.visible=!1;var i=this.vi.getChildByName("lbFighting");i.visible=!1;var n=this.vi.getChildByName("btnBuy");n.visible=!1,null==n.clickHandler&&(n.clickHandler=new h(this,this.onBuy));var o=this.vi.getChildByName("btnLogs");o.visible=!1,null==o.clickHandler&&(o.clickHandler=new h(this,this.onLogs)),null==this._teamLogs&&(this._teamLogs=new TL)},i.onRegister=function(){this.facade.registerMediator(new fb),this.facade.registerMediator(new pb),this.facade.registerMediator(new _b)},i.listNotificationInterests=function(){return["USER_INIT","CLEAR_CACHE_DATA","RECEIVE_PLAYER_TEAM","RECEIVE_TEAM_INFO","RECEIVE_TEAM_LOGS","RECIVE_PAY_TOTAL_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":this.getViewComponent();var t=this.vi.getChildByName("txLevel");Ng.userVO.getValue(1006)<40?(t.text="40级开启",t.color="#e70626"):(t.text="努力加载中…",t.color="#ffffff");break;case"CLEAR_CACHE_DATA":this._pd=null,this._team=null;var i=this.facade.retrieveProxy("TeamProxy");i.clearMemberInfo(),this.init();break;case"RECEIVE_PLAYER_TEAM":this.freshPlayerTeam(e.getBody());break;case"RECEIVE_TEAM_INFO":this.freshTeam(e.getBody());break;case"RECIVE_PAY_TOTAL_INFO":this._pd&&this.freshPlayerTeam(this._pd);break;case"RECEIVE_TEAM_LOGS":this.teamLogs.logs.dataSource=e.getBody(),this.teamLogs.popup()}},i.freshPlayerTeam=function(e){this._pd=e;var t=this.vi.getChildByName("lbTimes");t.text="当前可进入次数："+e.times;var i=this.facade.retrieveProxy("PayTotalPropxy"),n=1;i.info&&(n+=i.info.addTeamBuyTime()),t=this.vi.getChildByName("lbBuyed"),t.text="今日已购买次数："+e.buyed+"/"+n,t=this.vi.getChildByName("txLevel"),t.text="";var o=this.vi.getChildByName("btnBuy");e.times<=0?o.visible=!0:o.visible=!1,Ng.userVO.getValue(7007)&&pu.instance.queryTeam();var s=this.vi.getChildByName("btnEnter");s.visible=!0;var r=this.vi.getChildByName("btnLogs");r.visible=!0},i.onLogs=function(){pu.instance.listLogs()},i.onBuy=function(){if(!(this._pd.times>0)){var e=this.facade.retrieveProxy("PayTotalPropxy"),t=1+e.info.addTeamBuyTime();if(this._pd.buyed>=t)return void this.sendNotification("prompted_info_show",{info:"今日购买次数已用完"});var i=pn.buyTimeNeedGold(this._pd.buyed);return Ng.userVO.getValue(1010)>=i?void this.sendNotification("POP_CONFIRM_INFO",{info:"确认花费"+i+"元宝购买1次？",handler:h.create(this,function(e){e&&(pu.instance.buyTime(),k.goldenCost("组队本次数",1,i))})}):void this.sendNotification("prompted_info_show",{info:"您的元宝不足"+i+"，无法购买。"})}},i.onClick=function(e){if(Ng.userVO.getValue(7007))if(this._team&&1==this._team.state){var t=g.database.getData("dungeonteam",this._team.dungeonId);this.sendNotification("SHOW_FIGHT_PAGE_OTHER",t,6)}else this.sendNotification("OPEN_TEAM_SELF");else this.sendNotification("OPEN_TEAM_GATE")},i.freshTeam=function(e){if(this._team=e,this._team&&Ng.userVO.getValue(7007)){var t=this.vi.getChildByName("lbFighting");1==this._team.state?t.visible=!0:t.visible=!1}},s(0,i,"teamLogs",function(){return this.getViewComponent(),this._teamLogs}),s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="TeamMediator",t}(lc),pb=function(e){function t(){this._teamJoinPwdView=null,this._d=null,this._teampager=null,t.__super.call(this,"TeamLismMediator")}o(t,"modules.team.view.TeamListMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new xL),this._teamJoinPwdView=new SL,this.vi.teams.dataSource=[],this.vi.teams.renderHandler=new h(this,this.onRender),this.vi.teams.mouseEnabled=!0,this.vi.teams.mouseHandler=new h(this,this.onClick),this.vi.pageUP.on("mouseup",this,this.onPage),this.vi.pageDown.on("mouseup",this,this.onPage),this.vi.pageFresh.on("mouseup",this,this.onPage),this.vi.btnCreate.on("mouseup",this,this.onCreate)},i.onCreate=function(e){this._d&&pu.instance.create(this._d.id,this.vi.inputDesc.text,this.vi.autoStart.selected)},i.onPage=function(e){this._d&&(e.target==this.vi.pageUP?this._teampager.pager.pageNumber>1?pu.instance.listTeam(this._d.id,this._teampager.pager.pageNumber-1,10):pu.instance.listTeam(this._d.id,this._teampager.pager.pageNumber,10):e.target==this.vi.pageDown?this._teampager.pager.pageNumber<this._teampager.pager.totalPage?pu.instance.listTeam(this._d.id,this._teampager.pager.pageNumber+1,10):pu.instance.listTeam(this._d.id,this._teampager.pager.pageNumber,10):e.target==this.vi.pageFresh&&pu.instance.listTeam(this._d.id,this._teampager.pager.pageNumber,10))},i.onClick=function(e,t){if("click"==e.type){var i=this.vi.teams.getCell(t).dataSource;i&&"btnJoin"==e.target.name&&(i.hasPwd?this.teamJoinPwdView.popInfo(i):pu.instance.join(i.id))}},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("dName");i.hasPwd?n.text="『"+i.desc+"』":n.text=i.desc;var o=i.memberNum;n=e.getChildByName("dState"),n.text="成员数量:"+o+"/3",n=e.getChildByName("dLevel"),n.text="等级范围:"+i.minLv+"~"+i.maxLv;var s=e.getChildByName("btnJoin");i.canjoin?(e.alpha=1,s.visible=!0):(e.alpha=.7,s.visible=!1)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","OPEN_TEAM_LIST","RECEIVE_TEAM_LIST"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this._d=null,this._teampager=null;break;case"OPEN_TEAM_LIST":this._d!=e.getBody()?(this._d=e.getBody(),this.vi.title.text=this._d.name+"副本",this._teampager=null,pu.instance.listTeam(this._d.id,1,10)):this._d&&pu.instance.listTeam(this._d.id,this._teampager.pager.pageNumber,10),this.vi.popup();break;case"RECEIVE_TEAM_LIST":this._teampager=e.getBody(),this.vi.teams.dataSource=this._teampager.pager.recoards,this.vi.dPage.text=this._teampager.pager.pageNumber+"/"+this._teampager.pager.totalPage}},s(0,i,"teamJoinPwdView",function(){return this.getViewComponent(),this._teamJoinPwdView}),s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="TeamLismMediator",t.PAGE_SIZ=10,t}(lc),fb=function(e){function t(){t.__super.call(this,"TeamGateMediator")}o(t,"modules.team.view.TeamGateMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new CL),this.vi.dungeons.scrollBar.hide=!0,this.vi.dungeons.renderHandler=new h(this,this.onRender),this.vi.dungeons.mouseEnabled=!0,this.vi.dungeons.mouseHandler=new h(this,this.onClick),this.vi.dungeons.dataSource=g.database.dungeonTeams},i.onClick=function(e,t){if("click"==e.type){var i=this.vi.dungeons.getCell(t).dataSource;i&&this.sendNotification("OPEN_TEAM_LIST",i)}},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("dName");n.text=i.name,n=e.getChildByName("dLevel"),n.text=i.level+"级";var o=e.getChildByName("info");o.style.lineHeight=40,o.style.fontSize=26,o.style.color="#ffffff",o.innerHTML=i.info},i.listNotificationInterests=function(){return["OPEN_TEAM_GATE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_TEAM_GATE":this.vi.popup()}},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="TeamGateMediator",t}(lc),_b=function(e){function t(){this._dungeons=null,this._team=null,t.__super.call(this,"TeamSelfMediator")}o(t,"modules.team.view.TeamSelfMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new EL);var e=g.database.getDict("dungeonteam");this._dungeons=[];var t;for(var i in e.values)t=e.values[i],this._dungeons.push(t.name);this.vi.dName.labels=this._dungeons.join(","),this._dungeons=e.values,this.vi.dName.selectHandler=new h(this,this.onDungeon),this.vi.members.renderHandler=new h(this,this.onRender),this.vi.members.mouseEnabled=!0,this.vi.members.mouseHandler=new h(this,this.onClick),this.vi.btnEnter.on("mouseup",this,this.onFight)},i.onFight=function(){if(this._team){if(1==this._team.state){var e=g.database.getData("dungeonteam",this._team.dungeonId);return void this.sendNotification("SHOW_FIGHT_PAGE_OTHER",e,6)}return this._team.members.keys.length<3?void this.sendNotification("prompted_info_show",{info:"队伍未满员，不能开始战斗"}):void pu.instance.fight()}},i.onClick=function(e,t){if("click"==e.type){var i=this.vi.members.getCell(t),n=i.dataSource;if(!n||!this._team)return;var o=this._team.members.get(n.i);switch(e.target.name){case"btnJoin":if(o==Ng.userVO.unitId.id)this._team.isLeader?this.sendNotification("POP_CONFIRM_INFO",{info:"确认要解散队伍吗？",handler:h.create(this,function(e){e&&pu.instance.leave()})}):this.sendNotification("POP_CONFIRM_INFO",{info:"确认要离开当前队伍吗？",handler:h.create(this,function(e){e&&pu.instance.leave()})});else if(o)this.sendNotification("POP_CONFIRM_INFO",{info:"确认要踢出队员吗？",handler:h.create(this,function(e){e&&pu.instance.kick(o)})});else{var s=i.getChildByName("typeNpc"),r=this._team.checkNpcId(s.selectedIndex);0==r?this.sendNotification("prompted_info_show",{info:"同一护卫只能招募一次。"}):pu.instance.joinNpc(t,r)}break;case"btnChg":this.sendNotification("POP_CONFIRM_INFO",{info:"确认要转移队长吗？",handler:h.create(this,function(e){e&&pu.instance.changeLeader(o)})});break;case"btnUp":this._chgPos(t,!0);break;case"btnDown":this._chgPos(t,!1);break;default:if(o>0)if(o==Ng.userVO.unitId.id)this.sendNotification("ROLE_VIEW");else{var a=this.facade.retrieveProxy("TeamProxy"),l=a.getMemberInfo(o);l&&this.sendNotification("SHOW_LOOK_PAGE",{playerId:o,name:l.getValue(1002),nature:l.getValue(1004),level:l.getValue(1006)})}}}},i._chgPos=function(e,t){for(var i=new uo,n=0;3>n;n++){var o=this._team.members.get(n);o&&i.set(n,o)}var s=e+(t?-1:1),r=i.get(s);r?(i.set(s,this._team.members.get(e)),i.set(e,r)):(i.set(s,this._team.members.get(e)),i.remove(e)),pu.instance.changePos(i)},i.onRender=function(e,t){var i=e.dataSource;if(null!=i){var n=e.getChildByName("p1");n.text=i.a,n=e.getChildByName("p2"),n.text=i.d;var o=e.getChildByName("title"),s=e.getChildByName("name"),r=e.getChildByName("nature"),a=e.getChildByName("level"),l=e.getChildByName("times"),h=e.getChildByName("btnJoin"),c=e.getChildByName("btnChg"),u=e.getChildByName("btnUp"),d=e.getChildByName("btnDown"),p=e.getChildByName("typeNpc"),f=e.getChildByName("lbNpc"),_=this._team.members.get(i.i);if(_){if(o.visible=!0,s.visible=!0,r.visible=!0,a.visible=!0,l.visible=!0,p.visible=!1,f.visible=!1,_>0){var m=this.facade.retrieveProxy("TeamProxy"),v=m.getMemberInfo(_);if(v){var y=v.getValue(7006);if(y>0){var b=g.database.getData("achieve",y);b&&(o.text=b.name,o.color=N.getColor(b.quailty))}else o.color="#ffffff",o.text="";s.text=v.getValue(1002),r.index=v.getValue(1004)-1,a.text="Lv."+v.getValue(1006);var E=v.getValue(7008);l.text="剩余进入次数："+E,0>=E?l.color="#e70626":l.color="#00dc24"}else o.text="??",o.color="#ffffff",s.text="??",r.index=-1,a.text="",l.text="";_==Ng.userVO.unitId.id?(this._team.isLeader?h.label="解散队伍":h.label="离开队伍",h.visible=!0,s.color="#00dc24",c.visible=!1):(this._team.isLeader?(h.label="踢出队伍",c.label="转移队长",h.visible=!0,c.visible=!0):(h.visible=!1,c.visible=!1),s.color="#ffffff")}else{o.visible=!1,l.visible=!1;var x=vo["int"](_/-1e3);s.text=R.getName(x)+"灵守卫",r.index=x-1;var S=g.database.getData("dungeonteam",this._team.dungeonId);a.text="Lv."+S.level,h.label="踢出队伍",h.visible=!0,c.visible=!1,s.color="#b0bcb0"}r.x=s.x+s.width,a.x=r.x+r.width}else o.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,l.visible=!1,c.visible=!1,h.visible=!0,h.label="招募护卫",p.visible=!0,f.visible=!0;u.visible=!0,d.visible=!0,u.visible=0!=t&&_,d.visible=2!=t&&_}},i.listNotificationInterests=function(){return["OPEN_TEAM_SELF","RECEIVE_TEAM_INFO","RECEIVE_TEAM_MEMBER_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_TEAM_SELF":"close"==e.getType()?this.vi.close():this.vi.popup(!0);break;case"RECEIVE_TEAM_INFO":this.fresh(e.getBody());break;case"RECEIVE_TEAM_MEMBER_INFO":var t=this.facade.retrieveProxy("TeamProxy");
t.isMemberInfoFull()&&this.vi.members.refresh()}},i.fresh=function(e){this._team=e,this.vi.title.text=e.desc;var t=g.database.getData("dungeonteam",e.dungeonId),i=this._dungeons.indexOf(t);this.vi.dName.selectedIndex=i,this.vi.members.dataSource=ob.MEMBER_POS,1==this._team.state?this.vi.btnEnter.label="返回战斗":this.vi.btnEnter.label="开始战斗"},i.onDungeon=function(e){if(null!=this._team){var t=g.database.getData("dungeonteam",this._team.dungeonId),i=this._dungeons.indexOf(t);if(this.vi.dName.selectedIndex!=i){if(1==this._team.state)return this.sendNotification("prompted_info_show",{info:"战斗中暂时无法切换副本。"}),void this.fresh(this._team);if(!this._team.isLeader)return this.sendNotification("prompted_info_show",{info:"只有队长有权切换副本。"}),void this.fresh(this._team);t=this._dungeons[e],pu.instance.chgDungeon(t.id)}}},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="TeamSelfMediator",t}(lc),mb=function(e){function t(){t.__super.call(this)}o(t,"modules.task.controller.TaskPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(gn.TASK_SHARE_GAME,vb),this.facade.registerCommand(gn.TASK_SHARE_GAME_4VIP,vb),this.facade.registerCommand(gn.TASK_SHARE_SHARE_GAME_VIDEO,vb),this.facade.registerCommand(gn.TASK_QUERY,gb),this.facade.registerCommand(gn.TASK_GET_AWARD,gb,!0),this.facade.registerCommand(gn.TASK_PUSH_TASK,gb),this.facade.registerCommand(mn.DAILY_TASK_QUERY,bb),this.facade.registerCommand(mn.DAILY_TASK_FINISH,bb,!0),this.facade.registerCommand(mn.DAILY_TASK_AWARD,bb,!0)},t}(rc),gb=function(e){function t(){t.__super.call(this)}o(t,"modules.task.controller.commands.TaskMainCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerTask",t.value),n=this.facade.retrieveProxy("TaskPropxy");4==t.cmd&&n.vo.lastTask&&this.sendNotification("prompted_info_show",{info:"完成任务，获得奖励："+n.vo.lastTask.golden+"元宝， "+n.vo.lastTask.silver+"铜币",updateTime:1e3});var o=n.recieve(i);this.sendNotification("RECEIVE_TASK_INFO",o)}},t}(rc),vb=function(e){function t(){t.__super.call(this)}o(t,"modules.task.controller.commands.TaskShareCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);5==t.cmd?this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"福利宝箱",awards:n,desc:"<br><font color='#0084ff'>尊敬的月卡用户，已为您跳过广告，全部领取</font>"}):this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"福利宝箱",awards:n,desc:""}),this.sendNotification("BOX_WELFARE_UPDATE")}else this.sendNotification("prompted_info_show",{info:"今日次数已用完,请明天再来"})},t}(rc),yb=function(e){function t(){t.__super.call(this,"DailyTaskProxy",new yn)}o(t,"modules.task.model.DailyTaskProxy",e);var i=t.prototype;return i.receive=function(e){return this.vo.update(e),this.vo},s(0,i,"vo",function(){return this.data}),t.NAME="DailyTaskProxy",n(t,["DAILY_TASK_AWARDS",function(){return this.DAILY_TASK_AWARDS=[{id:0,i:"10万铜币，2元宝",s:50,lv:1},{id:1,i:"15万铜币，3元宝，1个护灵阵法",s:70,lv:25},{id:2,i:"20万铜币，5元宝，2个龙涎果，1个灵矿地图",s:100,lv:30}]}]),t}(sc),bb=function(e){function t(){t.__super.call(this)}o(t,"modules.task.controller.commands.DailyTaskCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerDailyTask",t.value),n=this.facade.retrieveProxy("DailyTaskProxy"),o=n.receive(i);this.sendNotification("RECEIVE_TASK_DAILY_INFO",o),3==t.cmd&&this.sendNotification("prompted_info_show",{info:"领取成功，获得任务奖励"})}},t}(rc),Eb=function(e){function t(){t.__super.call(this,"TaskPropxy",new vn)}o(t,"modules.task.model.TaskProxy",e);var i=t.prototype;return i.recieve=function(e){return this.vo.update(e),t.lastId=100,t.isNewGuy=!1,this.vo},s(0,i,"vo",function(){return this.data}),t.NAME="TaskPropxy",t.isNewGuy=!1,t.lastId=0,t}(sc),xb=function(e){function t(){this.dungeonSpInfo=null,this.pa=null,this._selected=null,this._buyMoreView,t.__super.call(this,"AlcshopMediator")}o(t,"modules.alcshop.view.AlcshopMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new uL),this.view.items.scrollBar.hide=!0,this.view.items.renderHandler=new h(this,this.onRender),this.view.items.mouseEnabled=!0,this.view.items.mouseHandler=new h(this,this.onClick),this._buyMoreView=new oL,this._buyMoreView.buyNum.on("blur",this,this.onAimCountChanged),this._buyMoreView.btnSure.clickHandler=new h(this,this.onBuy)},i.listNotificationInterests=function(){return["OPEN_ALC_SHOP_PAGE","RECIVE_PLAYER_ALLIANCE","RECEIVE_DUNGEON_SP_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ALC_SHOP_PAGE":this.fresh(),this.view.popup();break;case"RECIVE_PLAYER_ALLIANCE":this.pa=e.getBody(),this.view.lbDonate.text=""+this.pa.donate;break;case"RECEIVE_DUNGEON_SP_INFO":this.dungeonSpInfo=e.getBody(),this.view.isPopup&&this.fresh()}},i.fresh=function(){this.view.items.dataSource=g.database.getDict("allianceshop").values},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("name"),o=e.getChildByName("desc"),s=e.getChildByName("price"),r=1;switch(s.text=i.donatePrice+"贡献",i.propId){case 500001:if(!this.dungeonSpInfo)return;var a=In.queryCountPerM(this.dungeonSpInfo.passedId);r=6*a*60,o.text="五行宫通关层数越高，购买所获得的灵石将越多";default:var l=g.database.getData("props",i.propId);l?(1==r?n.text=l.name+" 1个":n.text=l.name+" "+r+"个",n.color=N.getColor(l.quality),""==o.text&&(o.text=l.desc)):n.text="未知物品id:"+i.propId}},i.onClick=function(e,t){if("click"==e.type&&"btnBuy"==e.target.name){if(this._selected=this.view.items.getCell(t).dataSource,null==this.pa||this._selected.donatePrice>this.pa.donate)return void this.sendNotification("prompted_info_show",{info:"您的贡献不足"});this.showMore()}},i.showMore=function(){if(null!=this.pa){var e=g.database.getData("props",this._selected.propId),t=1;if(500001==this._selected.propId){if(!this.dungeonSpInfo)return;var i=In.queryCountPerM(this.dungeonSpInfo.passedId);t=6*i*60,this._buyMoreView.goldPrice.text="每组仅需"+this._selected.donatePrice+"贡献",this._buyMoreView.buyNum.text="1",this._buyMoreView.unit.text="组"}else this._buyMoreView.goldPrice.text="每个仅需"+this._selected.donatePrice+"贡献",this._buyMoreView.buyNum.text="1",this._buyMoreView.unit.text="个";Ln.renderPropsByCfg(this._buyMoreView.props,e,t),this.onAimCountChanged(),this._buyMoreView.popup()}},i.onAimCountChanged=function(){var e=vo["int"](this._buyMoreView.buyNum.text),t=this.pa.donate,i=this._selected.donatePrice;vo["int"](t/i);if(isNaN(e)||0>e)this._buyMoreView.costGold.text=""+i+"贡献",this._buyMoreView.costGold.color="#f4b922";else{this._buyMoreView.costGold.text="";var n=i*e;this._buyMoreView.costGold.text=String(n)+"贡献",n>t?this._buyMoreView.costGold.color="#e70626":this._buyMoreView.costGold.color="#f4b922"}},i.onBuy=function(){var e=this,t=this.pa.donate,i=vo["int"](this._buyMoreView.buyNum.text);0>=i&&(i=1);var n=this._selected.donatePrice*i;return n>t?void this.sendNotification("prompted_info_show",{info:"购买需要"+n+"贡献"}):void(n>=1e3?this.sendNotification("POP_CONFIRM_INFO",{info:"购买需要<font color='#fffc00'>"+n+"贡献</font>，是否确认？",handler:h.create(this,function(t){t&&(fu.instance.buy(e._selected.id-1,i),e._buyMoreView.close())})},"duble"):(fu.instance.buy(this._selected.id-1,i),this._buyMoreView.close()))},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AlcshopMediator",t}(lc),Sb=function(e){function t(){t.__super.call(this)}o(t,"modules.meridian.controller.MeridianPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(bn.MERIDIAN_INFO,wb),this.facade.registerCommand(bn.MERIDIAN_UPGRADE,wb,!0),this.facade.registerCommand(bn.MERIDIAN_UPGRADE_SP,wb,!0)},t}(rc),wb=function(e){function t(){t.__super.call(this)}o(t,"modules.meridian.controller.commands.MeridianCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerMeridian",t.value),n=this.facade.retrieveProxy("MeridianProxy"),o=n.receive(i);this.sendNotification("RECEIVE_MERIDIAN",o),2==t.cmd?this.sendNotification("prompted_info_show",{info:"经脉升级成功"}):3==t.cmd&&this.sendNotification("prompted_info_show",{info:"经脉突破成功"})}},t}(rc),Cb=function(e){function t(){t.__super.call(this,"MeridianProxy",new En)}o(t,"modules.meridian.model.MeridianProxy",e);var i=t.prototype;return i.receive=function(e){return this.meridian.update(e),this.meridian},s(0,i,"meridian",function(){return this.data}),t.NAME="MeridianProxy",t}(sc),Tb=function(e){function t(){t.__super.call(this)}o(t,"modules.paytotal.controller.PayTotalPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Sn.PAY_TOTAL_QUERY,Ib),this.facade.registerCommand(Sn.PAY_TOTAL_AWARD,Ib,!0),this.facade.registerCommand(Sn.PAY_PRIVILEGE_REST,Ib,!0)},t}(rc),Ib=function(e){function t(){t.__super.call(this)}o(t,"modules.paytotal.controller.commands.PayTotalCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerPayTotal",t.value),n=this.facade.retrieveProxy("PayTotalPropxy"),o=n.receive(i);switch(this.sendNotification("RECIVE_PAY_TOTAL_INFO",o),t.cmd){case 1:k.order(o.totalRmb);break;case 2:this.sendNotification("prompted_info_show",{info:"累充奖励领取成功。"});break;case 3:}}},t}(rc),Ab=function(e){function t(){this._payTotal=null,this._nomalArr=null,this._limitArr=null,this.redPoint=!1,t.__super.call(this,"PayTotalPropxy"),this._payTotal=new wn}o(t,"modules.paytotal.model.PayTotalPropxy",e);var i=t.prototype;return i.getArr=function(e){return e?(null==this._limitArr&&(this._limitArr=this.buildArr(!0)),this._limitArr):(null==this._nomalArr&&(this._nomalArr=this.buildArr(!1)),this._nomalArr)},i.buildArr=function(e){var t=[new Cn(1,0,0,"<br>&nbsp;<br>领取15级<font color='#e70626'>红色神武</font>无等级限制<br>加送<font color='#fffc00'>66万铜币</font>起步资金，<font color='#00dc24'>绿色龙涎果一个</font><br>"),new Cn(68,20,1,"<br>&nbsp;<br><font color='#fffc00'>送166万铜币</font>、<font color='#fffc00'>森林探索令5个</font>、<br><font color='#e70626'>15级随机五行红色特殊材料5个</font>。<br>助你快速升级灵根，领先他人一步"),new Cn(128,20,1,"<br>&nbsp;<br><font color='#00dc24'>送500魔核</font>，让你的灵宠变为世间奇兽<br><font color='#00dc24'>永久增加属性：</font><font color='#e70626'>攻击+100，防御+50，生命+300</font>"),new Cn(358,20,1,"<br><font color='#00dc24'>龙涎果x100</font>+<font color='#fffc00'>300万铜币</font><br>刷灵宠不过瘾？来刷100次！<br>刷到手抽筋，我们概不负责<br>组队副本可额外购买<font color='#c527ff'>1次</font>"),new Cn(520,20,1,"<br>&nbsp;<br>送<font color='#e70626'>【完美龙涎果】</font>x1，绝世灵宠现世，助你遨游仙界。（可直接获得红色品质灵宠）<br><font color='#0084ff'>开启购买灵珠碎片返利活动(每月10号)</font>"),new Cn(888,20,1,"<br><font color='#fffc00'>300万铜币</font>+<font color='#00dc24'>10万灵石</font><br>森林魔核产出<font color='#c527ff'>永久增加30%</font><br>商城功能:<font color='#fffc00'>经验、铜币、材料、魔核、灵气</font>购买上限增至11次<br><font color='#00dc24'>永久增加属性：</font><font color='#e70626'>攻击+100，防御+50，生命+300</font>"),new Cn(1688,35,888,"<br><font color='#fffc00'>500威望</font>+<font color='#00dc24'>15000魔核</font>(威望可换40威望红装)<br>普通副本BOSS遇到概率<font color='#c527ff'>永久增加30%</font><br>商城功能:<font color='#fffc00'>经验、铜币、材料、魔核、灵气</font>购买上限增至12次<br>组队副本可额外购买<font color='#c527ff'>2次</font>"),new Cn(4288,35,888,"商城珍宝<font color='#c527ff'>永久9折</font>商城功能全部等级<font color='#c527ff'>永久+2</font><br>商城功能:<font color='#fffc00'>经验、铜币、材料、魔核、灵气</font>购买上限增至13次<br>境界副本灵气<font color='#c527ff'>永久加成30%</font><br>境界BOSS遇到概率<font color='#c527ff'>永久增加30%</font><br><font color='#00dc24'>永久增加属性：</font><font color='#e70626'>攻击+200，防御+100，生命+300</font><br><font color='#c527ff'>增加装备强化保底</font><br><font color='#0084ff'>提高购买灵珠碎片返利活动</font><br><font color='#c527ff'>每月可手动重置一次灵珠返利活动</font>"),new Cn(9888,1e3,4288,"劫掠次数<font color='#c527ff'>每3小时</font>增加一次<br>商城功能:<font color='#fffc00'>经验、铜币、材料、魔核、灵气</font>购买上限增至14次<br>森林次数<font color='#c527ff'>每4小时</font>增加一次<br>五行宫收益<font color='#c527ff'>永久多20%</font>，采集灵石收益<font color='#c527ff'>永久增加20%</font><br><font color='#c527ff'>灵宠资质丹x5</font>（提升1点资质）<br><font color='#c527ff'>每月可手动重置一次充值送天籁石活动</font><br>"+(e?"<font color='#00dc24'>每月20日重置开启648以内充值双倍活动</font>":"")),new Cn(18888,1e3,9888,"商城功能:<font color='#fffc00'>经验、铜币、材料、魔核、灵气</font>购买上限增至15次<br>森林进入次数可额外购买<font color='#c527ff'>1次</font><br>五行宫重置可额外购买<font color='#c527ff'>2次</font><br>组队副本可额外购买<font color='#c527ff'>4次</font><br><font color='#00dc24'>锻造装备时，特殊材料属性保留的概率增加1.5倍</font><br><font color='#c527ff'>涅槃丹x1</font><br><font color='#0084ff'>提高购买灵珠碎片返利活动</font>"),new Cn(36888,1e3,9888,"商城功能:<font color='#fffc00'>经验、铜币、材料、魔核、灵气</font>购买上限增至16次<br>森林进入次数可额外购买<font color='#c527ff'>2次</font><br>五行宫重置可额外购买<font color='#c527ff'>4次</font><br><font color='#00dc24'>灵宠升级时所需魔核减少35%</font><br><font color='#00dc24'>永久增加属性：</font><font color='#e70626'>攻击+400，防御+200，生命+600</font><br><font color='#0084ff'>提高购买灵珠碎片返利活动</font><br>"+(e?"<font color='#00dc24'>每月20日重置开启1298以内充值双倍活动</font>":"")),new Cn(58888,1e3,36888,"商城功能:<font color='#fffc00'>经验、铜币、材料、魔核、灵气</font>购买上限增至18次<br>森林进入次数可额外购买<font color='#c527ff'>3次</font><br>五行宫重置可额外购买<font color='#c527ff'>6次</font><br><font color='#00dc24'>锻造装备时，随机属性将提高50%，但不超过上限</font><br><font color='#c527ff'>灵宠资质丹x5</font><br><font color='#0084ff'>提高购买灵珠碎片返利活动</font>"),new Cn(88888,1e3,36888,"商城功能:<font color='#fffc00'>经验、铜币、材料、魔核、灵气</font>购买上限增至20次<br>森林进入次数可额外购买<font color='#c527ff'>4次</font><br>五行宫重置可额外购买<font color='#c527ff'>8次</font><br><font color='#FFA500'>赠送橙色灵宠进阶丹x1</font><br><font color='#00dc24'>永久增加属性：</font><font color='#e70626'>攻击+800，防御+400，生命+1200</font><br><font color='#0084ff'>提高购买灵珠碎片返利活动</font><br>"+(e?"<font color='#00dc24'>每月20日重置开启3999以内充值双倍活动</font>":"")),new Cn(128888,1e3,88888,"8级灵珠套装时<font color='#0084ff'>提高购买灵珠碎片活动</font><br>回收宠物技能时，<font color='#c527ff'>额外增加10%</font>秘籍碎片<br><font color='#c527ff'>灵宠五行丹x5</font><br><font color='#c527ff'>灵宠资质丹x5</font><br>"),new Cn(188888,1e3,88888,"8级灵珠套装时<font color='#0084ff'>提高购买灵珠碎片活动</font><br>回收宠物技能时，<font color='#c527ff'>额外增加15%</font>秘籍碎片<br><font color='#c527ff'>灵宠五行丹x5</font><br><font color='#c527ff'>战技阁10连抽时，可额外获得2连抽</font><br>"+(e?"<font color='#00dc24'>每月20日重置开启8888以内充值双倍活动</font>":"")),new Cn(268888,1e3,188888,"9级灵珠套装时<font color='#0084ff'>提高购买灵珠碎片活动</font><br>回收宠物技能时，<font color='#c527ff'>额外增加20%</font>秘籍碎片<br><font color='#c527ff'>灵宠五行丹x7</font><br><font color='#c527ff'>灵宠资质丹x5</font><br><font color='#00dc24'>永久增加属性：</font><font color='#e70626'>攻击+1200，防御+600，生命+1800</font>")];return t},i.receive=function(e){return this._payTotal.update(e),this._payTotal},s(0,i,"info",function(){return this._payTotal}),t.NAME="PayTotalPropxy",t}(sc),Nb=function(e){function t(){this._taskdAward=null,this._taskdList=null,this._taskReady=!1,this._taskDailyReady=!1,this._achieveReady=!1,this._dailyTask=null,t.__super.call(this,"TaskMediator")}o(t,"modules.task.view.TaskMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new NL),this.view.bar.selectHandler=new h(this,this.onBar),this.view.bar.selectedIndex=0;var e=this.view.task.getChildByName("btnTask");e.clickHandler=new h(this,this.onTaskClick),this._taskdAward=this.view.taskD.getChildByName("taskdAward"),this._taskdAward.dataSource=[],this._taskdAward.renderHandler=new h(this,this.onTaskAwardRender),this._taskdAward.mouseEnabled=!0,this._taskdAward.mouseHandler=new h(this,this.onTaskAwardClick),this._taskdList=this.view.taskD.getChildByName("taskdList"),this._taskdList.dataSource=[],this._taskdList.renderHandler=new h(this,this.onTaskDRender),this._taskdList.mouseEnabled=!0,this._taskdList.mouseHandler=new h(this,this.onTaskDClick),this.view.btnFast.clickHandler=new h(this,this.onFastClick),this.view.btnFast.visible=!1,this.view.closeHandler=new h(this,this.onPageClose),this.view.cbtask.visible=!1},n.onCbTask=function(){var e=this.facade.retrieveProxy("SettingProxy");e&&e.vo&&(e.vo.tasktopshow=this.view.cbtask.selected,Su.instance.update(e.vo))},n.onPageClose=function(){this.sendNotification("CLOSE_TASK_PAGE")},n.onTaskDClick=function(e,t){if("click"==e.type&&"btnFinish"==e.target.name){var i=this.taskdList.getCell(t).dataSource;if(this._dailyTask&&i){var n=this._dailyTask.getActNum(i.id);n>=i.cnd&&_u.instance.finish(i.id)}}},n.onTaskDRender=function(e,t){if(this._dailyTask){var i=e.dataSource,n=e.getChildByName("info"),o=e.getChildByName("secore"),s=e.getChildByName("btnFinish");s.visible=!1;var r=this._dailyTask.getActNum(i.id);n.text=i.info+":"+r,-1==r?(n.text=i.info,n.color="#b0bcb0",o.text="已完成",o.color="#00dc24"):r>=i.cnd?(n.text=i.info,n.color="#00dc24",o.text="",s.visible=!0):(i.cnd>1?n.text=i.info+"("+r+"/"+i.cnd+")":n.text=i.info,n.color="#ffffff",o.text=i.point+"积分",o.color="#ffffff"),0==v.giftOpen&&20==i.point&&(o.text="--",n.text="-- --")}},n.onTaskAwardClick=function(e,t){if("click"==e.type&&"btnTask"==e.target.name&&this._dailyTask){var i=this.taskdAward.getCell(t).dataSource;this._dailyTask.point>=i.s&&_u.instance.award(t)}},n.onTaskAwardRender=function(e,t){if(this._dailyTask){var i=Ng.userVO.getValue(1006);i>=30?e.visible=!0:e.visible=2>t;var n=e.dataSource,o=e.getChildByName("info"),s=e.getChildByName("taskState"),r=e.getChildByName("btnTask");o.text=n.i,this._dailyTask.isAwarded(t)?(o.color="#b0bcb0",r.visible=!1,s.text="今日已完成",s.color="#00dc24"):this._dailyTask.point>=n.s?(s.text="",o.color="#00dc24",s.color="#00dc24",r.visible=!0,this.view.btnFast.visible=!0):(s.text=this._dailyTask.point+"/"+n.s+"积分",o.color="#ffffff",s.color="#ffffff",r.visible=!1)}},n.onBar=function(e){switch(this.view.task.removeSelf(),this.view.achieve.removeSelf(),e){case 0:this._taskReady&&this.view.addChild(this.view.task),this.view.taskD.visible=this._taskDailyReady;break;case 1:this._achieveReady&&this.view.addChild(this.view.achieve)}},n.onRegister=function(){this.facade.registerMediator(new OE)},n.listNotificationInterests=function(){return["SHOW_TASK_PAGE","RECEIVE_TASK_INFO","USER_INIT","USER_LEVEL_CHANGE","RECEIVE_TASK_DAILY_INFO","RECEIVE_ACHIEVE_INFO"]},n.handleNotification=function(e){switch(e.getName()){case"USER_INIT":this._taskReady=!1,this._taskDailyReady=!1,this._achieveReady=!1,mu.instance.query(),_u.instance.query();break;case"USER_LEVEL_CHANGE":this.freshWhenLv();break;case"SHOW_TASK_PAGE":this.view.popup(),this._dailyTask&&(ro.isTodayTs(this._dailyTask.freshTime)||_u.instance.query()),i.timer.once(3e3,this,function(){wu.instance.query()});var t=this.facade.retrieveProxy("SettingProxy");t&&t.vo&&(this.view.cbtask.selected=t.vo.tasktopshow);break;case"RECEIVE_TASK_INFO":this._taskReady=!0,this.freshTask(e.getBody()),this.onBar(this.view.bar.selectedIndex);break;case"RECEIVE_TASK_DAILY_INFO":this._taskDailyReady=!0,this.freshTaskDaily(e.getBody()),this.onBar(this.view.bar.selectedIndex);break;case"RECEIVE_ACHIEVE_INFO":this._achieveReady=!0,this.onBar(this.view.bar.selectedIndex)}},n.freshTaskDaily=function(e){this.view.btnFast.visible=!1,this._dailyTask=e,this.taskdAward.dataSource=yb.DAILY_TASK_AWARDS,this.freshDtaskLv()},n.freshWhenLv=function(){var e=Ng.userVO.getValue(1006);25!=e&&30!=e||this.freshDtaskLv()},n.freshDtaskLv=function(){var e=Ng.userVO.getValue(1006);15>e?this.view.taskD.visible=!1:this.view.taskD.visible=!0;var t,i=[];for(var n in g.database.dailyTasks){if(t=g.database.dailyTasks[n],T.IS_ON_MINI&&Or.onIOS){if(8==t.id)continue;11==t.id&&(t.info=t.info.replace("商城","功能"))}if(e>=t.minLv){if(this._dailyTask){var o=this._dailyTask.getActNum(t.id);if(o>=t.cnd){i.unshift(t),this.view.btnFast.visible=!0;continue}}i.push(t)}}this.taskdList.dataSource=i},n.freshTask=function(e){this.view.freshTask(e)},n.onTaskClick=function(){var e=this.facade.retrieveProxy("TaskPropxy"),t=e.vo;t.lastTask&&1==t.lastState&&(mu.instance.getAward(t.lastTask.id),0==t.version&&mu.instance.guidSmithyEmptyProp())},n.onFastClick=function(){var e;for(var t in this.taskdList.dataSource)if(e=this.taskdList.dataSource[t],this._dailyTask&&e){var n=this._dailyTask.getActNum(e.id);n>=e.cnd&&_u.instance.finish(e.id)}i.timer.once(500,this,this.delayFinish)},n.delayFinish=function(){if(this._dailyTask){var e,t=0;for(var i in this.taskdAward.dataSource)e=this.taskdAward.dataSource[i],this._dailyTask.point>=e.s&&_u.instance.award(t),t++}},s(0,n,"taskdList",function(){return this.getViewComponent(),this._taskdList}),s(0,n,"taskdAward",function(){return this.getViewComponent(),this._taskdAward}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="TaskMediator",t}(lc),Pb=function(e){function t(){t.__super.call(this)}o(t,"modules.arena.controller.commands.ArenaFightCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("ArenaInfo",t.value),n=this.facade.retrieveProxy("ArenaProxy"),o=n.receiveInfo(i);this.sendNotification("RECIEVE_ARENA_INFO",o),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,2)}else switch(t.status){case-44:this.sendNotification("prompted_info_show",{info:"当前挑战中"}),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,2);break;case-10004:this.sendNotification("prompted_info_show",{info:"对方正遭受攻击，请稍后再来"});break;case-10003:this.sendNotification("prompted_info_show",{info:"劫掠次数用完，请稍后再试"});break;case-10001:this.sendNotification("prompted_info_show",{info:"对手保护中，稍后再试"});break;default:xi.isCaptchaErro(t.status)?this.sendNotification("CAPTCHA_ALERT_FORBIDEN",t.status):this.sendNotification("prompted_info_show",{info:"挑战失败:"+t.status})}},t}(rc),Rb=function(e){function t(){t.__super.call(this)}o(t,"modules.arena.controller.commands.ArenaCollectCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i),o=null,s=this.facade.retrieveProxy("PayTotalPropxy");if(s.info){var r=s.info.connectStoneAddPercent();if(r>0){var a=vo["int"](100*n.counts[0]/(100+r)),l=n.counts[0]-a;o="收取获得灵石"+a+"个,额外+"+l+"个"}}null==o&&(o="收取获得灵石"+n.counts[0]+"个");var h=this.facade.retrieveProxy("ActivityPropxy");h.tempActivitySet.inTime()&&h.tempActivitySet.isOpen(4)&&(o+="(活动翻倍)"),this.sendNotification("prompted_info_show",{info:o})}},t}(rc),Lb=function(e){function t(){t.__super.call(this)}o(t,"modules.arena.controller.commands.ArenaRoomCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("ArenaRoom",t.value);this.sendNotification("RECIEVE_ARENA_ROOM",i)}},t}(rc),Ob=function(e){function t(){t.__super.call(this)}o(t,"modules.arena.controller.commands.GlobalArenaLogCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=this.facade.retrieveProxy("ArenaProxy");if(8==t.cmd){var n=v.protoCodec.getResponseDecoder().decode("GlobalArenaLogList",t.value),o=i.receiveGlobalArenaLogs(n.logs);this.sendNotification("RECIEVE_ARENA_GLOBAL_LOGS",o)}else if(9==t.cmd){var s=v.protoCodec.getResponseDecoder().decode("GlobalArenaLog",t.value),r=i.receiveGlobalArenaLogMine(s);this.sendNotification("RECIEVE_ARENA_GLOBAL_LOGS_MINE",r)}}},t}(rc),Mb=function(e){function t(){this._globalArenaList=[],this._globalArenaListCross=[],this._globalArenaLogs=[],this._myLastLog=null,t.__super.call(this,"ArenaProxy",null)}o(t,"modules.arena.model.ArenaProxy",e);var i=t.prototype;return i.receiveInfo=function(e){var t=this.arenaInfo;return null==t?(t=new An(e),this.setData(t)):t.update(e),t},i.receiveGlobalArenaList=function(e){for(var t,i=0;i<e.length;i++){var n=e[i];i>=this._globalArenaList.length?(t=new Pn(n),this._globalArenaList.push(t)):(t=this._globalArenaList[i],t.update(n))}return this._globalArenaList.length=e.length,this._globalArenaList},i.receiveGlobalArenaBase=function(e){var t;if(e.id<0){var i;for(i in this._globalArenaListCross)if(t=this._globalArenaListCross[i],t.id==e.id)return t.updateBase(e),t}else{var i;for(i in this._globalArenaList)if(t=this._globalArenaList[i],t.id==e.id)return t.updateBase(e),t}return null},i.receiveGlobalArenaListCross=function(e){for(var t,i=0;i<e.length;i++){var n=e[i];i>=this._globalArenaListCross.length?(t=new Pn(n),this._globalArenaListCross.push(t)):(t=this._globalArenaListCross[i],t.update(n))}return this._globalArenaListCross.length=e.length,this._globalArenaListCross},i.receiveGlobalArenaLogs=function(e){this._globalArenaLogs.length=0;var t;for(var i in e)t=e[i],this._globalArenaLogs.push(new Nn(t));return this._globalArenaLogs},i.receiveGlobalArenaLogMine=function(e){return null==this._myLastLog?this._myLastLog=new Nn(e):this._myLastLog.update(e),this._myLastLog},s(0,i,"arenaInfo",function(){return this.data}),t.NAME="ArenaProxy",t}(sc),Db=function(e){function t(){t.__super.call(this,"MeridianMediator")}o(t,"modules.meridian.view.MeridianMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new IN),this.cleanView(),this.view.bar.selectHandler=new h(this,this.onBar),this.view.btnUp.clickHandler=new h(this,this.onUpgrade)},i.cleanView=function(){this.view.m1.visible=!1,this.view.m2.visible=!1,this.view.m3.visible=!1,this.view.m4.visible=!1,this.view.level.text="",this.view.needGas.text="",this.view.needSilver.text="",this.view.attr.text=""},i.listNotificationInterests=function(){return["USER_INIT","USER_LEVEL_CHANGE","RECEIVE_MERIDIAN"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("MeridianProxy"),i=Ng.userVO.getValue(1006);switch(e.getName()){case"USER_INIT":t.meridian.id=0,this.cleanView(),i>=7&&gu.instance.query();break;case"USER_LEVEL_CHANGE":0==t.meridian.id&&i>=7&&gu.instance.query();break;case"RECEIVE_MERIDIAN":this.onBar(this.view.bar.selectedIndex)}},i.onBar=function(e){if(0!=this.view.visible){var t=this.facade.retrieveProxy("MeridianProxy"),i=t.meridian;if(0!=i.id){this.view.m1.visible=!1,this.view.m2.visible=!1,this.view.m3.visible=!1,this.view.m4.visible=!1;var n,o=0;switch(e+1){case 1:o=i.attackLv,n=this.view.m1,n.visible=!0,this.view.level.text="任脉等级："+o,this.view.attr.text="累计加成：攻击 + "+xn.getAttrAdd(0,o);break;case 2:o=i.defenceLv,n=this.view.m2,n.visible=!0,this.view.level.text="督脉等级："+o,this.view.attr.text="累计加成：防御 + "+xn.getAttrAdd(1,o);break;case 3:o=i.hpLv,n=this.view.m3,n.visible=!0,this.view.level.text="冲脉等级："+o,this.view.attr.text="累计加成：生命 + "+xn.getAttrAdd(2,o);break;case 4:o=i.mpLv,n=this.view.m4,n.visible=!0,this.view.level.text="带脉等级："+o,this.view.attr.text="累计加成：法力 + "+xn.getAttrAdd(3,o)}var s=o+1,r=xn.getNeedGas(s),a=xn.getNeedSilver(s),l=i.getGasMax();i.gas>=l?(this.view.hasGas.text="当前真元："+i.gas+"/"+l+"(已满)",this.view.hasGas.color="#c527ff"):(this.view.hasGas.text="当前真元："+i.gas+"/"+l,this.view.hasGas.color="#00dc24"),this.view.needGas.text="消耗真元："+r,r>i.gas?this.view.needGas.color="#e70626":this.view.needGas.color="#00dc24",this.view.needSilver.text="消耗铜币："+a,s%7==0?(s>=47?(this.view.needProp.visible=!0,this.view.needProp.text="消耗物品：易经丹*"+vo["int"](s/47)):this.view.needProp.visible=!1,this.view.btnUp.label="突  破"):(this.view.needProp.visible=!1,this.view.btnUp.label="升  级");for(var h=o%7+1,c=1;7>=c;c++){var u=n.getChildByName("r"+c),d=u.getChildByName("icon"),p=u.getChildByName("txt");"星"==p.text&&p.changeText(xn.STAR_NAME[e][c-1]),h>c?(d.index=2,p.color="#0084ff"):c==h?(d.index=1,p.color="#00dc24"):(d.index=0,c>o?p.color="#b0bcb0":p.color="#ffffff")}}}},i.onUpgrade=function(){var e=this,t=this.facade.retrieveProxy("MeridianProxy"),i=t.meridian;if(0==i.id)return void this.sendNotification("prompted_info_show",{info:"经脉数据未初始"});var n=0;switch(this.view.bar.selectedIndex+1){case 1:n=i.attackLv;break;case 2:n=i.defenceLv;break;case 3:n=i.hpLv;break;case 4:n=i.mpLv;break;default:return void this.sendNotification("prompted_info_show",{info:"经脉数据错误"})}var o=n+1,s=xn.getNeedGas(n+1),r=xn.getNeedSilver(n+1);if(s>i.gas)return void this.sendNotification("prompted_info_show",{info:"需要真元不足"});if(Ng.userVO.getValue(1009)<r)return void this.sendNotification("prompted_info_show",{info:"需要铜币不足"});var a=0;if(o%7==0&&o>=47&&(a=vo["int"](o/47)),a>0){var l=this.facade.retrieveProxy("GoodsProxy");if(!l.packInited)return void this.sendNotification("prompted_info_show",{info:"背包数据未初始，请稍候再试"});var c=l.findOnePropByBaseId(500020),u=0;if(null!=c&&(u=c.count),a>u){var d=5,p=this.facade.retrieveProxy("PayTotalPropxy");p&&p.info&&p.info.isMarcket90percent()&&(d=vo["int"](90*d/100));var f=d*(a-u);if(Ng.userVO.getValue(1010)<f)return void this.sendNotification("prompted_info_show",{info:"进阶需要购买【易经丹】，您的元宝不足"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认花费"+f+"元宝购买【易经丹】并突破经脉吗？",handler:h.create(this,function(t){t&&gu.instance.upgradeSp(e.view.bar.selectedIndex,o,c?c.id:0,u,1)})})}else this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用【易经丹】破经脉吗？",handler:h.create(this,function(t){t&&gu.instance.upgradeSp(e.view.bar.selectedIndex,o,c.id,a,0)})})}else gu.instance.upgrade(this.view.bar.selectedIndex,o)},i.onShow=function(){this.onBar(this.view.bar.selectedIndex)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="MeridianMediator",t}(lc),kb=function(e){function t(){t.__super.call(this)}o(t,"modules.arena.controller.commands.GlobalArenaCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i,n,o,s=this.facade.retrieveProxy("ArenaProxy");switch(t.cmd){case 12:i=v.protoCodec.getResponseDecoder().decode("GlobalArenaList",t.value),n=s.receiveGlobalArenaList(i.arenas),this.sendNotification("RECIEVE_ARENA_GLOBAL",n);break;case 13:i=v.protoCodec.getResponseDecoder().decode("GlobalArenaList",t.value),n=s.receiveGlobalArenaListCross(i.arenas),this.sendNotification("RECIEVE_ARENA_GLOBAL",n,"cross");break;case 6:case 11:i=v.protoCodec.getResponseDecoder().decode("GlobalArena",t.value),i.playerId==Ng.userVO.unitId.id?(o=s.receiveGlobalArenaBase(i),o&&this.sendNotification("WINNER_ARENA_GLOBAL",o.id<0?"cross":null),yu.instance.queryGlobalInfo()):this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,5);break;case 7:i=v.protoCodec.getResponseDecoder().decode("GlobalArena",t.value),i.playerId==Ng.userVO.unitId.id&&(o=s.receiveGlobalArenaBase(i),o&&this.sendNotification("WINNER_ARENA_GLOBAL",o.id<0?"cross":null),this.sendNotification("prompted_info_show",{info:"成功领取奖池奖励"}))}}else switch(t.status){case-10001:this.sendNotification("prompted_info_show",{info:"擂主受保护期间，请稍侯再试。"});break;case-10004:this.sendNotification("prompted_info_show",{info:"擂台正在争夺中，请稍侯再试。"});break;case-21:this.sendNotification("prompted_info_show",{info:"擂主已经易手，请夺取后再试。"}),yu.instance.queryGlobalInfo();break;case-53:this.sendNotification("prompted_info_show",{info:"占领擂台10分钟后方可领取。"});break;case-37:this.sendNotification("prompted_info_show",{info:"您正在夺擂中。"}),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,5);break;case-10005:this.sendNotification("prompted_info_show",{info:"刚占领完擂台，休息一会吧。"});break;default:xi.isCaptchaErro(t.status)&&this.sendNotification("CAPTCHA_ALERT_FORBIDEN",t.status)}},t}(rc),Bb=function(e){function t(){t.__super.call(this)}o(t,"modules.arena.controller.commands.ArenaInfoCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(0==t.status){var i=v.protoCodec.getResponseDecoder().decode("ArenaInfo",t.value),n=this.facade.retrieveProxy("ArenaProxy"),o=n.receiveInfo(i);this.sendNotification("RECIEVE_ARENA_INFO",o)}},t}(rc),Vb=function(e){function t(){t.__super.call(this)}o(t,"modules.arena.controller.ArenaPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Tn.ARENA_QUERY_INFO,Bb),this.facade.registerCommand(Tn.ARENA_QUERY_ROOM_INFO,Lb),this.facade.registerCommand(Tn.ARENA_COLLECT_STONE,Rb,!0),this.facade.registerCommand(Tn.ARENA_FIGHT_WITH_OTHER,Pb,!0),this.facade.registerCommand(Tn.ARENA_QUERY_GLOBAL_INFO,kb),this.facade.registerCommand(Tn.ARENA_QUERY_GLOBAL_INFO_CROSS,kb),this.facade.registerCommand(Tn.ARENA_GLOBAL_FIGHT,kb,!0),this.facade.registerCommand(Tn.ARENA_GLOBAL_GLOBAL_FIGHT_BY_GOLD,kb,!0),this.facade.registerCommand(Tn.ARENA_GLOBAL_TAKE_AWARDS,kb,!0),this.facade.registerCommand(Tn.ARENA_QUERY_GLOBAL_LOGS,Ob),this.facade.registerCommand(Tn.ARENA_LAST_GLOBAL_LOGS_MINE,Ob)},t}(rc),Fb=function(e){
function t(){this._heroLv=0,this._payTotalInfo=null,t.__super.call(this,"PayTotalMediator")}o(t,"modules.paytotal.view.PayTotalMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new dL),this.view.paytotal.scrollBar.hide=!0,this.view.paytotal.renderHandler=new h(this,this.onRender),this.view.paytotal.mouseEnabled=!0,this.view.paytotal.mouseHandler=new h(this,this.onMouse);this.view.paytotal.getChildByName("btnFuture"),this.view.paytotal.getChildByName("btnReBate");v.OPEN_PAYMENT||(this.view.title.text=this.upText(this.view.title.text))},n.onGiftFuture=function(){this.sendNotification("OPEN_FUTURE_GIFT_PAGE")},n.listNotificationInterests=function(){return["SHOW_PAY_TOTAL_PAGE","RECIVE_PAY_TOTAL_INFO","USER_INIT","USER_LEVEL_CHANGE","QUERY_REBATE","ZERO_CLOCK_TRIGER","RECEIVE_DUNGEON_LIMIT_INFO"]},n.handleNotification=function(e){switch(e.getName()){case"SHOW_PAY_TOTAL_PAGE":this.view.popup(),this.fresh();break;case"RECIVE_PAY_TOTAL_INFO":this._payTotalInfo=e.getBody(),this.view&&this.fresh(),this.sendNotification("UPDATA_REBATE"),this.checkDouble();break;case"USER_INIT":this._heroLv=Ng.userVO.getValue(1006),vu.instance.query(),this.sendNotification("UPDATA_REBATE");case"USER_LEVEL_CHANGE":this._heroLv=Ng.userVO.getValue(1006),this.view&&this.fresh();break;case"ZERO_CLOCK_TRIGER":Ng.userVO.getValue(1006)>=45&&pc.instance.queryRebate(),vu.instance.query();break;case"RECEIVE_DUNGEON_LIMIT_INFO":this.checkDouble(),this.view&&this.fresh()}},n.checkDouble=function(){this._payTotalInfo&&this._payTotalInfo.canResetDoublePay()&&i.timer.once(1e3,this,this.queryRestDouble)},n.queryRestDouble=function(){var e=this.facade.retrieveProxy("DungeonProxy");e.getDungeonLimitOpen()&&e.getDungeonLimitOpen().openLimit&&this._payTotalInfo.canResetDoublePay()&&vu.instance.resetDoublePay()},n.fresh=function(){if(0!=this._heroLv&&null!=this._payTotalInfo){var e=this.facade.retrieveProxy("PayTotalPropxy"),t=[],i=this.facade.retrieveProxy("DungeonProxy");if(i.getDungeonLimitOpen()){var n,o=e.getArr(i.getDungeonLimitOpen().openLimit);for(var s in o)n=o[s],this._heroLv<n.openLv&&this._payTotalInfo.totalRmb<n.openRmb||t.push(n)}this.view.paytotal.dataSource=t}},n.upText=function(e){return e=e.split("充值任意金额").join("获得福利积分"),e=e.split("当前充值").join("当前积分"),e=e.split("我要充值").join("获取积分"),e=e.split("充值").join("积分")},n.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("title"),o=(n.text,i.title,"当前充值："+this._payTotalInfo.totalRmb+"/"+i.rmb);v.OPEN_PAYMENT||(n.text=this.upText(i.title)),n=e.getChildByName("paytotal"),n.text=o,v.OPEN_PAYMENT||(n.text=this.upText(o)),this._payTotalInfo.totalRmb>=i.rmb?n.color="#00dc24":n.color="#fffc00";var s=e.getChildByName("btnGet");this._payTotalInfo.isFinish(i.rmb)?this._payTotalInfo.isAwarded(i.rmb)?(s.visible=!1,n.text="奖励已领取",n.color="#b0bcb0"):(s.label="领取奖励",s.visible=!0):(s.label="我要充值",s.visible=!0,v.OPEN_PAYMENT||(s.label="我要积分",s.visible=!1));var r=e.getChildByName("info");r.style.color="#ffffff",r.style.align="center",r.style.fontSize=26,r.style.leading=10,r.innerHTML=i.htmlInfo},n.onMouse=function(e,t){if("click"==e.type&&"btnGet"==e.target.name){var i=this.view.paytotal.dataSource[t];this._payTotalInfo.isFinish(i.rmb)?this._payTotalInfo.isAwarded(i.rmb)||vu.instance.getAward(i.rmb):this.sendNotification("OPEN_MARCKET_VIEW","充值")}},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="PayTotalMediator",t}(lc),Gb=function(e){function t(){this.needFresh=!0,this.info=null,t.__super.call(this,"ArenaRankMediator")}o(t,"modules.arena.view.ArenaRankMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new aL),this.view.listRank.scrollBar.hide=!0,this.view.listRank.dataSource=[],this.view.listRank.renderHandler=new h(this,this.onRenderRank),this.view.listRank.mouseEnabled=!0,this.view.listRank.mouseHandler=new h(this,this.onMouseRank),this.view.listLogs.scrollBar.hide=!0,this.view.listLogs.dataSource=[],this.view.listLogs.renderHandler=new h(this,this.onRenderLog),this.view.listLogs.mouseEnabled=!0,this.view.listLogs.mouseHandler=new h(this,this.onMouseLog),this.view.listLogs.x=this.view.ranks.x,this.view.ranks.visible=!0,this.view.listLogs.visible=!1,this.view.tabBar.selectHandler=new h(this,this.onBar),X.IS_TEST?(this.view.testId.visible=!0,this.view.btnTest.visible=!0,this.view.btnTest.clickHandler=new h(this,this.onTestFight)):(this.view.testId.visible=!1,this.view.btnTest.visible=!1)},i.listNotificationInterests=function(){return["OPEN_ARENA_RANK_PAGE","RECIEVE_ARENA_ROOM","RECIEVE_ARENA_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_ARENA_RANK_PAGE":this.view.popup(),this.onFresh();break;case"RECIEVE_ARENA_ROOM":var t=e.getBody().attackPlayers;t.sort(this.compareAttark),this.view.listRank.dataSource=t,this.view.listLogs.dataSource=e.getBody().fightLogs;break;case"RECIEVE_ARENA_INFO":this.info=e.getBody(),this.needFresh=!0,this.onFresh()}},i.onBar=function(e){switch(e){case 0:this.view.ranks.visible=!0,this.view.listLogs.visible=!1;break;case 1:this.view.ranks.visible=!1,this.view.listLogs.visible=!0}},i.onFresh=function(){this.needFresh&&this.view.isPopup&&(this.needFresh=!1,yu.instance.queryRoom())},i.compareAttark=function(e,t){return e.rank==t.rank?t.level-e.level:e.rank-t.rank},i.onRenderRank=function(e,t){if(this.view.listRank.dataSource){var i,n=this.view.listRank.dataSource[t];i=e.getChildByName("name"),i.text="神秘人";var o=e.getChildByName("nature");o.index=n.nature-1;var s=i.x+i.width;o.x=s,i=e.getChildByName("level"),i.text=n.level+"级",s=o.x+o.width,i.x=s,s=i.x+i.width,i=e.getChildByName("alc"),i.text="",i.x=s,i=e.getChildByName("state");var r=e.getChildByName("btnFight");if(n.playerId==Ng.userVO.unitId.id)i.color="#00dc24",i.text="【您】",r.visible=!1;else{i.color="#fffc00";var a=n.coolTimes-g.clock.currentTime;a>0?(i.text="保护"+vo["int"](a/6e4)+"分钟",r.visible=!1):(i.text="",r.visible=!0)}}},i.onMouseRank=function(e,t){if("click"==e.type&&this.view.listRank.dataSource){var i=this.view.listRank.dataSource[t];if("btnFight"==e.target.name){if(this.info&&!this.info.hasFightTime()){var n=this.facade.retrieveProxy("PayTotalPropxy");return void(n.info&&n.info.isRecoverArenaFightCDShort()?this.sendNotification("prompted_info_show",{info:"挑战次数已用完，3小时恢复1次，请稍后再来。"}):this.sendNotification("prompted_info_show",{info:"挑战次数已用完，4小时恢复1次，请稍后再来。"}))}yu.instance.fightOtherPlayer(i.playerId)}}},i.onRenderLog=function(e,t){if(this.view.listLogs.dataSource){var i,n=this.view.listLogs.dataSource[t];i=e.getChildByName("log");var o=e.getChildByName("btnFight");1==n.action?(o.label="劫掠",n.win?(i.text="挑战【"+n.targetName+"】胜利，获得灵石"+n.stoneCount+"个。",i.color="#00dc24"):(i.text="挑战【"+n.targetName+"】失败，择日再战。",i.color="#ffffff")):(o.label="反击",n.win?(i.text="【"+n.targetName+"】前来找你切磋，经过三百回合大战，你落入下风。",i.color="#e70626"):(i.text="【"+n.targetName+"】前来挑战，铩羽而归。",i.color="#fffc00"))}},i.onMouseLog=function(e,t){if("mousedown"==e.type&&"btnFight"==e.target.name&&this.view.listLogs.dataSource){if(this.info&&!this.info.hasFightTime()){var i=this.facade.retrieveProxy("PayTotalPropxy");return void(i.info&&i.info.isRecoverArenaFightCDShort()?this.sendNotification("prompted_info_show",{info:"挑战次数已用完，3小时恢复1次，请稍后再来。"}):this.sendNotification("prompted_info_show",{info:"挑战次数已用完，4小时恢复1次，请稍后再来。"}))}var n=this.view.listLogs.dataSource[t];yu.instance.fightOtherPlayer(n.targetId)}},i.onTestFight=function(){var e=this.view.testId.text;if(null!=e&&""!=e){e=e.replace(" ","");var t=vo["int"](e);Gc.instance.fightOtherPlayer(t),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,2)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="ArenaRankMediator",t}(lc),Hb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.GoodsPrepCommands",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Rn.GOODS_LIST,Zb,!0),this.facade.registerCommand(Rn.GOODS_SELL,Xb,!0),this.facade.registerCommand(Rn.GOODS_SELL_PROPS,Xb,!0),this.facade.registerCommand(Rn.GOODS_DRESS,iE,!0),this.facade.registerCommand(Rn.GOODS_OPEN_BOX,Yb,!0),this.facade.registerCommand(Rn.GOODS_BREAK_EQUIP,Jb,!0),this.facade.registerCommand(Rn.GOODS_SPEED_CLOCK_BOX_AD,Qb,!0),this.facade.registerCommand(Rn.GOODS_PUSH_GOODS_CHANGE,jb),this.facade.registerCommand(Rn.GOODS_PUSH_GOODS_COUNT_CHANGE,eE),this.facade.registerCommand(Rn.GOODS_PUSH_CHANGE_SIMPLE,oE),this.facade.registerCommand(Rn.GOODS_PUSH_COMMON_AWARDS_POP,$b),this.facade.registerCommand(Rn.GOODS_CHANGE_PLAYER_NAME,Kb,!0),this.facade.registerCommand(Rn.GOODS_OPEN_PROP,aE,!0),this.facade.registerCommand(Rn.GOODS_CHANGE_PLAYER_NATURE,qb,!0),this.facade.registerCommand(Rn.GOODS_CHANGE_PLAYER_NATURE_EXT,qb,!0),this.facade.registerCommand(Rn.GOODS_TAKE_PLAYER_NATURE_EXT_AWD,rE,!0),this.facade.registerCommand(Rn.GOODS_MIX_PET_FOOD,cE,!0),this.facade.registerCommand(Rn.GOODS_BREAK_PET_FOOD,cE,!0),this.facade.registerCommand(Rn.GOODS_CHANGE_GRAPH_NATURE,sE,!0),this.facade.registerCommand(Rn.GOODS_BREAK_PET_GHOSTSOUL,lE,!0),this.facade.registerCommand(Rn.GOODS_REBUILD_COAT_SPECIAL,zb,!0)},t}(rc),Ub=function(e){function t(){this.dungeonSpInfo=null,this.info=null,t.__super.call(this,"ArenaMediator")}o(t,"modules.arena.view.ArenaMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view;this.setViewComponent(t.spcailDungeon.getChildByName("stoneHead")),this.view.on("mouseup",this,this.onArenaClick)},i.listNotificationInterests=function(){return["RECIEVE_ARENA_INFO","RECEIVE_DUNGEON_SP_INFO","USER_VIP_ARENA_MINE_TIME_CHANGE"]},i.handleNotification=function(e){switch(e.getName()){case"RECIEVE_ARENA_INFO":this.freshArenaInfo(e.getBody());break;case"USER_VIP_ARENA_MINE_TIME_CHANGE":this.info&&this.freshArenaInfo(this.info);break;case"RECEIVE_DUNGEON_SP_INFO":this.dungeonSpInfo=e.getBody()}},i.freshArenaInfo=function(e){this.info=e;var t=this.view.getChildByName("currentIncome"),i=0;if(this.dungeonSpInfo){var n=Ng.userVO.getValue(7004);i=In.queryCountPerM(this.dungeonSpInfo.passedId),n>0?t.text=i+" + "+n+" 个/分钟":t.text=i+"个/分钟"}t=this.view.getChildByName("collectTime");var o=Ng.userVO.getValue(7002),s=(g.clock.currentTime-e.mineTimeBegin)/1e3;s>o?(s=o,t.color="#e70626"):1800>s?t.color="#ffffff":t.color="#00dc24",0>s&&(s=0),s=Math.floor(s/60);var r=Math.floor(s/60);s%=60,r>0?s?t.text=r+"小时"+s+"分钟":t.text=r+"小时":t.text=s+"分钟",t=this.view.getChildByName("totalCount"),i+=n;var a=e.totalCount+i*(s+60*r);if(0>a&&(a=0),t.text=a+"个",t=this.view.getChildByName("currentArenaTime"),e.fightTimes<=0){var l=this.facade.retrieveProxy("PayTotalPropxy");l.info&&l.info.isRecoverArenaFightCDShort()?(t.text="3小时恢复1次",t.color="#c527ff"):(t.text="4小时恢复1次",t.color="#e70626")}else t.text=e.fightTimes+"次",t.color="#ffffff";t=this.view.getChildByName("coolTime");var h=e.coolTime-g.clock.currentTime;h>0?t.text="保护"+vo["int"](h/6e4)+"分钟":t.text=""},i.onArenaClick=function(e){var t=this.facade.retrieveProxy("DungeonProxy"),i=t.dungeonSpInfo.passedId;if("btnRank"==e.target.name)return void(0>=i?this.sendNotification("prompted_info_show",{info:"五行宫通关一层可劫掠灵石"}):(this.sendNotification("OPEN_ARENA_RANK_PAGE"),op.aldSendEvent("劫掠灵石")));if("btnCollect"==e.target.name&&this.info)if(0>=i)this.sendNotification("prompted_info_show",{info:"五行宫通关一层可采集灵石"});else{var n=g.clock.currentTime-this.info.collectDate;n<In.COLLENCT_TIME_LIMIT?this.sendNotification("prompted_info_show",{info:"采集30分钟后，方可收集灵石。"}):(yu.instance.collectStone(),op.aldSendEvent("收取灵石"))}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="ArenaMediator",t}(lc),zb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.RebuildCoatSpecialCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemGoods",t.value),n=new ld(i);this.sendNotification("SMITHY_SUCCESS",n,"rebuild")}},t}(rc),Wb=function(e){function t(){this._logsView=null,this._playerKeep=null,this._globalListAll=null,this._fightBtn=null,this.playerArena=null,this._continueFightProtectCD=0,this._clockCount=0,t.__super.call(this,"GlobalArenaMediator")}o(t,"modules.arena.view.GlobalArenaMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new AL),i.timer.loop(1e3,this,this.onClock),this.view.raenaList.dataSource=[],this.view.raenaList.renderHandler=new h(this,this.onRender),this.view.raenaList.mouseEnabled=!0,this.view.raenaList.mouseHandler=new h(this,this.onMouse),this._logsView=new cL,this._logsView.arenaName.visible=!1,this.view.ntc.clickHandler=new h(this,this.onNotice)},n.freshTop=function(){if(null!=this._globalListAll){var e=this._globalListAll[0];if(null!=e){e.id<0?(this.view.lbCross.text="跨服擂台(周六周日开启，资源翻倍)",this.view.lbCross.color="#c527ff"):(this.view.lbCross.text="普通擂台(周1至周5开启)",this.view.lbCross.color="#00dc24");var t=Ng.userVO.unitId.id;this._playerKeep=null;var i;for(var n in this._globalListAll)if(i=this._globalListAll[n],i.playerId==t){this._playerKeep=i;break}}}},n.showDetail=function(e){this.view.raenaList.visible=!0,this.view.raenaList.dataSource=this._globalListAll,this.view.raenaList.refresh()},n._onGet=function(e,t){var i=Ng.userVO.unitId.id,n=this.facade.retrieveMediator("FightArenaMediator");if(n&&n.isFighting()&&e.playerId!=i)return this.sendNotification("prompted_info_show",{info:"打擂中,请稍后。"}),void this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,5);if(this._playerKeep&&this._playerKeep.baseId<=e.baseId)return void this.sendNotification("prompted_info_show",{info:"您当前已占有更高级的擂台，无需更换擂台"});if(e.playerId>0)if(e.playerId==i){var o=vo["int"]((g.clock.currentTime-e.startTime)/6e4);o>=10?yu.instance.globalTakeAwards(e.id):this.sendNotification("prompted_info_show",{info:"占领时间最少10分钟，才可以获取奖励。"})}else{if(this._continueFightProtectCD>0)return void this.sendNotification("prompted_info_show",{info:"擂主处于保护期间，请稍后再试"});var s=vo["int"]((g.clock.currentTime-e.startTime)/6e4);if(20>s)return void this.sendNotification("prompted_info_show",{info:"擂主处于保护期间，请稍后再试"});var r=0,a=20,l=!1;if(this.playerArena.globalFighted>=a&&(r+=20,l=!0),e.id<0&&r>Ng.userVO.getValue(1010))return void this.sendNotification("prompted_info_show",{info:"夺擂需要缴纳"+r+"元宝，您的元宝不足"});if(t.costSilver<Ng.userVO.getValue(1009)){var c="夺擂需要缴纳<font color='#f19e21'>"+t.costSilver+"铜币</font>";r>0&&(c=c+",<font color='#fffc00'>"+r+"元宝</font>"),this.sendNotification("POP_CONFIRM_INFO",{info:c,handler:h.create(this,function(t){t&&(l?yu.instance.globalFightByGold(e.id):yu.instance.globalFight(e.id))})})}else this.sendNotification("prompted_info_show",{info:"夺擂需要缴纳"+t.costSilver+"铜币，您的铜币不足"})}else null!=this._playerKeep?this.sendNotification("POP_CONFIRM_INFO",{info:"夺擂<font color='#e70626'>您将离开所占擂台</font>，是否确定",handler:h.create(this,function(t){t&&yu.instance.globalFight(e.id)})}):yu.instance.globalFight(e.id)},n.onMouse=function(e,t){if("click"==e.type&&this.view.raenaList.dataSource){var i,n=this.view.raenaList.dataSource[t],o=n;i=g.database.getData("arenaglobal",o.baseId);var s=Ng.userVO.unitId.id;switch(e.target.name){case"btnView":o.playerId>0&&(o.playerId==s?this.sendNotification("ROLE_VIEW"):this.sendNotification("SHOW_LOOK_PAGE",{playerId:o.playerId,name:o.name,nature:o.nature,level:o.level}));break;case"btnLogs":this.logsView.logs.dataSource=[],this.logsView.costSilver=i.costSilver,this.logsView.arenaName.text=o.id<0?"(跨服)"+i.name:i.name,this.logsView.arenaName.color=i.color,yu.instance.queryGlobalLogs(o.id),this.logsView.popup();break;case"btnGet":this._fightBtn=e.target,this._onGet(o,i)}}},n.onNotice=function(){this.sendNotification("POP_FUN_NOTICE",19)},n.onRender=function(e,t){if(e.dataSource){var i=e.dataSource,n=i.id<0,o=g.database.getData("arenaglobal",i.baseId);if(null==o)return;var s;if(s=e.getChildByName("dName"),s&&(s.text=o.name,s.color=o.color),s=e.getChildByName("dPercent"))switch(i.baseId){case 1:s.text="【海量资源】",s.color="#c527ff";break;case 2:s.text="【大量资源】",s.color="#e70626";break;case 3:s.text="【较多资源】",s.color="#fffc00";break;case 4:s.text="【一般资源】",s.color="#00dc24"}s=e.getChildByName("lvLimit"),s.text="占擂等级："+o.levelMin+"~"+o.levelMax,s.visible=!1;var r=e.getChildByName("btnGet"),a=(Ng.userVO.getValue(1006),Ng.userVO.unitId.id);r.visible=!0,this._fightBtn=r,s=e.getChildByName("needSilver"),s.text="夺擂铜币："+3666*Ng.userVO.getValue(1006);var l=e.getChildByName("nature"),h=e.getChildByName("awardPool");if(i.playerId>0){s=e.getChildByName("name"),s.text=i.name,i.playerId==a?(r.label="收集",s.color="#00dc24",r.visible=!1):(-1==r.label.indexOf("夺擂")&&(r.label="夺擂"),s.color="#f19e21"),l.index=i.nature-1;var c=s.x+s.width;l.x=c,s=e.getChildByName("level"),s.text=i.level+"级",c=l.x+l.width,s.x=c,s=e.getChildByName("keepTimes"),s.text=i.keepTimes+" 次";var u=vo["int"]((g.clock.currentTime-i.startTime)/6e4);s=e.getChildByName("connectTime"),20>u?(s.text=u+" 分钟(保护中)",s.color="#fffc00"):u>480?(s.text=u-480+" 分钟(分身中)",s.color="#00dc24"):(s.text=u+" 分钟",s.color="#00dc24"),h.style.fontSize=24,h.style.lineHeight=30,h.innerHTML=i.getAwardsHtml()}else s=e.getChildByName("name"),s.text="无人守擂",s.color="#f19e21",l.index=-1,s=e.getChildByName("level"),s.text="",s=e.getChildByName("keepTimes"),s.text="",s=e.getChildByName("connectTime"),s.text="",h.innerHTML="",r.label="占领";s=e.getChildByName("lbCross"),s&&(s.visible=n)}},n.onFresh=function(){this.view.isPopup&&yu.instance.queryGlobalInfo()},n.listNotificationInterests=function(){return["SHOW_GLOBAL_ARENA_PAGE","RECIEVE_ARENA_GLOBAL","WINNER_ARENA_GLOBAL","FIGHT_ARENA_GLOBAL_FAIL","RECIEVE_ARENA_GLOBAL_LOGS","RECIEVE_ARENA_GLOBAL_LOGS_MINE","RECIEVE_ARENA_INFO","CHANGE_VIP_INFO","ZERO_CLOCK_TRIGER","USER_INIT","CLEAR_CACHE_DATA"]},n.handleNotification=function(e){switch(e.getName()){case"SHOW_GLOBAL_ARENA_PAGE":if(Ng.userVO.getValue(1006)<32)return void this.sendNotification("prompted_info_show",{info:"40级开启擂台"});var t=this._checkWaiting();if(null!=t)return void this.sendNotification("prompted_info_show",{info:t});this.view.popup(),this.onFresh(),op.aldSendEvent("进入擂台");break;case"RECIEVE_ARENA_GLOBAL":this._globalListAll=e.getBody(),this._checkOpenShow(),this.showDetail(0),this.freshTop();var i=this._checkWaiting();this.view.isPopup&&null!=i&&(this.sendNotification("prompted_info_show",{info:i}),this.view.close());break;case"WINNER_ARENA_GLOBAL":this.onFresh();break;case"RECIEVE_ARENA_GLOBAL_LOGS":this.logsView.logs.dataSource=e.getBody();break;case"FIGHT_ARENA_GLOBAL_FAIL":this._continueFightProtectCD=11;break;case"RECIEVE_ARENA_GLOBAL_LOGS_MINE":this.renderMyLog(e.getBody());break;case"RECIEVE_ARENA_INFO":this.playerArena=e.getBody(),this._checkVipChg();break;case"CHANGE_VIP_INFO":this._checkVipChg();break;case"ZERO_CLOCK_TRIGER":this.onFresh(),this._checkVipChg(),this._checkWaiting();break;case"USER_INIT":this._checkOpenShow(),this._checkWaiting();break;case"CLEAR_CACHE_DATA":}},n._checkWaiting=function(){var e=this.facade.retrieveMediator("HomeMediator"),t=e.view.spcailDungeon.getChildByName("arenaHead"),i=t.getChildByName("times");i.text="温馨提示：周1-5本服，周末跨服";var n=null,o=ro.newDate(g.clock.currentTime),s=o.getDay(),r=o.getHours(),a=o.getMinutes();return 21==r&&a>=58&&(5==s?(n="22点即将开启跨服擂台，系统准备中，请稍侯再试。",i.text="22点即将开启跨服擂台，系统准备中..."):0==s&&(n="22点即将开启本服擂台，系统准备中，请稍侯再试。",i.text="22点即将开启本服擂台，系统准备中...")),n},n._checkOpenShow=function(){var e=this.facade.retrieveMediator("HomeMediator");if(e){var t=e.view.spcailDungeon.getChildByName("arenaHead"),i=t.getChildByName("txLevel"),n=t.getChildByName("btnEnter");Ng.userVO.getValue(1006)<32?(n.visible=!1,i.text="32级开启"):(n.visible=!0,i.text="")}},n._checkVipChg=function(){if(null!=this.playerArena){var e=20;this.view.fightTimes.text="今日已夺擂："+this.playerArena.globalFighted+"/"+e,this.playerArena.globalFighted>=e?this.view.fightTimes.color="#fffc00":this.view.fightTimes.color="#00dc24"}},n.renderMyLog=function(e){var t=this.logsView.myLastLog.getChildByName("log");t.style.fontSize=26,t.style.leading=6,t.style.color="#ffffff";var i,n,o="",s=e.arenaId;switch(0>s&&(o="<font color='#c527ff'>(跨服)</font>",s=-s),s%=10){case 0:return void(t.innerHTML="暂无日志");case 1:n="【海量资源】",i="#c527ff";break;case 2:n="【大量资源】",i="#e70626";break;case 3:n="【较多资源】",i="#fffc00";break;case 4:n="【一般资源】",i="#00dc24"}o+="<font color='"+i+"'>"+n+"</font>";var r=3666*Ng.userVO.getValue(1006);t.innerHTML=o+"<br>"+e.getHtmlStr(r)},n.onClock=function(){this._clockCount+=1,this._clockCount%60==0&&this.onFresh(),this._continueFightProtectCD>0&&(this._continueFightProtectCD-=1,this._fightBtn&&-1!=this._fightBtn.label.indexOf("夺擂")&&(this._continueFightProtectCD>0?this._fightBtn.text.changeText("夺擂"+this._continueFightProtectCD+"秒"):this._fightBtn.text.changeText("夺擂")))},s(0,n,"logsView",function(){return this.getViewComponent(),this._logsView}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="GlobalArenaMediator",t}(lc),Yb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.OpenBoxCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"开启宝箱",awards:n,desc:"<br><font color='#ffffff'>-----以上是您开启宝箱的收获^^-----</font>"})}else{if(xi.isCaptchaErro(t.status))return void this.sendNotification("CAPTCHA_ALERT_FORBIDEN",t.status);as.debug(this,"OpenBoxCommand","open box failue:"+t.status)}},t}(rc),qb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.ChangeNatureCommand",e,"ChangeNatureCommand$1");var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success&&this.sendNotification("prompted_info_show",{info:"转换五行成功"}),this.sendNotification("CHANGE_NATURE_RESULT",t.status)},t}(rc),Kb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.ChangeNameCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success&&this.sendNotification("prompted_info_show",{info:"改名成功"}),this.sendNotification("CHANGE_NAME_RESULT",t.status)},t}(rc),Xb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.GoodsSellCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemSimple",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.getItemById(i.id,i.goodsType);if(o){var s,r=-i.count;0==r&&(r=1);var a=0;switch(o.goodsType){case 0:var l=o;s=l.propConf.name,a=l.propConf.silverPrice;break;case 1:var h=o;s=h.equipConf.name,a=h.equipConf.silverPrice;break;case 6:var c=o;s=c.talismanConf.name,a=c.getPrice()}if(a>0){var u=a*r,d="出售【"+s+"】获得铜币"+u,p=this.facade.retrieveProxy("MarketProxy"),f=p.vipInfo,_=a,m=Ng.userVO.getValue(1601);if(f){var g=f.vipMontAdd,y=this.facade.retrieveProxy("PayTotalPropxy");y.info&&(g+=y.info.getVipFunAdd()),m=m+f.silverRate+500*g}if(m>0){_=vo["int"](a*(1e4+m)/1e4);var b=_*r-u;b>0&&(d=d+"\n商城功能额外 +"+b+"铜币")}this.sendNotification("prompted_info_show",{info:d})}}}},t}(rc),Qb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.SpeedBoxCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success?this.sendNotification("prompted_info_show",{info:"福利加速成功,宝箱加速开启1小时"}):as.debug(this,"SpeedBoxCommand","speed box failue:"+t.status)},t}(rc),jb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.GoodsChangeCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("GoodsInfo",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.changeGoods(i.packType,i.sort,i.items);o.size>0&&this.sendNotification("FRESH_GOODS_PACK",o)}else console.log("props change get.. error:"+t.status)},t}(rc),Zb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.GoodsListCommand",e);var i=t.prototype;return i.execute=function(e){var t,i=e.getBody();if(i.success){var n=v.protoCodec.getResponseDecoder().decode("ItemGoodsGroup",i.value);if(n){var o=this.facade.retrieveProxy("GoodsProxy");t=o.receiveItems(n.items),this.sendNotification("FRESH_GOODS_PACK",t)}}else t=new go,-10010==i.status?(t.add(2),this.sendNotification("FRESH_GOODS_PACK",t)):-10011==i.status?(t.add(0),this.sendNotification("FRESH_GOODS_PACK",t)):console.log("props list get.. error:"+i.status)},t}(rc),Jb=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.EquipBreakCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"装备分解成功",awards:n,desc:""})}else as.debug(this,"EquipBreakCommand","failue:"+t.status)},t}(rc),$b=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.CommonAwardsPopCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"",awards:n,desc:""})}else as.debug(this,"CommonAwardsPopCommand","failue:"+t.status)},t}(rc),eE=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.GoodsChangeCountCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("GoodCountChange",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.changeCount(i.items);o.size>0&&this.sendNotification("FRESH_GOODS_PACK",o)}else console.log("props change count get.. error:"+t.status)},t}(rc),tE=function(e){function t(){this.isCickAd=!1,this.freshAble=!1,this._tabBarArr=[],this._pauseFilter=!1,this._saleTmp=null,this._autoSendCount=0,this._boxTmp=null,this.equips=null,this.propMetas=null,this.propStones=null,this.propBoxes=null,this.propPets=null,this.talismas=null,this.handbooks=null,this.equipExt=null,this.petEuips=null,this.boxKey=null,this.boxTimerInit=!1,this._exchangeGhostPop=new mL,this._smityPropCommPop=new zL,this._smityPropSpPop=new lL,this._changeNamePop=new yL,this._exchangePetFoodPop=new _L,this._filterHandler=new h(this,this.onFilter),this.saleConfirmHandler=new h(this,this.onSaleConfirm),this.breakConfirmHandler=new h(this,this.onBreakConfirm),t.__super.call(this,"BagpackMediator")}o(t,"modules.bagpack.view.BagpackMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new PL),this.view.typeBar.selectedIndex=-1,this.view.typeBar.selectHandler=new h(this,this.onTypeSelect),this.view.natureFilter.selectHandler=this._filterHandler,this.view.qualityFilter.selectHandler=this._filterHandler,this.view.posFilter.selectHandler=this._filterHandler,this.view.levelFilter.on("blur",this,this.onFilter),this.view.qualityFilter.visibleNum=7,this.view.equipList.x=this.view.propsList.x,this.view.boxList.x=this.view.propsList.x,this.view.talismanList.x=this.view.propsList.x,this.view.petEquips.x=this.view.propsList.x,this.onClose(),this.view.closeHandler=new h(this,this.onClose),this.view.propsList.renderHandler=new h(this,this.onPropsRender),this.view.propsList.mouseEnabled=!0,this.view.propsList.mouseHandler=new h(this,this.onMouseProp),this.view.equipList.renderHandler=new h(this,this.onEquipRender),this.view.equipList.mouseEnabled=!0,this.view.equipList.mouseHandler=new h(this,this.onMouseEquip),this.view.talismanList.renderHandler=new h(this,this.onTalimsmanRender),this.view.talismanList.mouseEnabled=!0,this.view.talismanList.mouseHandler=new h(this,this.onMouseTalisman),this.view.petEquips.renderHandler=new h(this,this.onPetEqRender),this.view.petEquips.mouseEnabled=!0,this.view.petEquips.mouseHandler=new h(this,this.onMousePetEquip),this.view.propsList.scrollBar.hide=!0,this.view.equipList.scrollBar.hide=!0,this.view.talismanList.scrollBar.hide=!0,this.view.petEquips.scrollBar.hide=!0,this.view.propsList.dataSource=[],this.view.boxList.renderHandler=new h(this,this.onBoxRender),this.view.boxList.mouseEnabled=!0,this.view.boxList.mouseHandler=new h(this,this.onMouseBox);var e=this.view.boxList.getChildByName("openVip");e.clickHandler=new h(this,this.onBuyBoxVip),this._exchangeGhostPop=new mL,this._smityPropCommPop=new zL,this._smityPropSpPop=new lL,this._changeNamePop=new yL,this._exchangePetFoodPop=new _L},n.onClose=function(e){void 0===e&&(e="close");var t="close"==e;this.view.propsList.silence=t,this.view.equipList.silence=t,this.view.boxList.silence=t,this.view.talismanList.silence=t},n.listNotificationInterests=function(){return["OPEN_BAGPACK_VIEW","FRESH_GOODS_PACK","USER_CURRENCY_CHANGE","USER_BOX_SIZE_CHANGE","USER_INIT","USER_LOOK_VIDEO_CARD_CHANGE","USER_OFFLINE_OPEN_BOX_CHG","USER_LEVEL_CHANGE","RECEIVE_TASK_INFO","USER_HANGDUNGEON_CHANGE","CHANGE_NAME_RESULT","AD_COMPLETE","AD_COLSE","ZERO_CLOCK_TRIGER"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_BAGPACK_VIEW":"props"!=e.getBody()&&-1!=this.view.typeBar.selectedIndex||(this.view.typeBar.selectedIndex=0),this.view.popup(),this.onClose("show"),this.fresh();break;case"FRESH_GOODS_PACK":var t=e.getBody();(t.contain(0)||t.contain(5))&&(this.freshAble=!0),this.fresh();break;case"USER_BOX_SIZE_CHANGE":var i=this.facade.retrieveProxy("GoodsProxy");i.checkBoxRedPoint();case"USER_CURRENCY_CHANGE":this.freshAble=!0,this.fresh();break;case"USER_INIT":this.freshTabBar(),this.freshBoxVip();case"USER_LOOK_VIDEO_CARD_CHANGE":this.freshAdTime();break;case"CHANGE_NAME_RESULT":var n=e.getBody();-37==n?this.sendNotification("prompted_info_show",{info:"72小时内只能改名一次"}):0>n?this.sendNotification("prompted_info_show",{info:"改名失败,请确认新名字是否可用"}):this.changeNamePop.close();break;case"AD_COMPLETE":if("box"==e.getBody()){var o=g.clock.currentTime+3e4;Ts.setItem("BOX_SPEED"+v.playerId,o.toString()),this.isCickAd=!1}break;case"AD_COLSE":this.isCickAd=!1;break;case"ZERO_CLOCK_TRIGER":case"USER_OFFLINE_OPEN_BOX_CHG":this.freshBoxVip();break;case"USER_LEVEL_CHANGE":case"RECEIVE_TASK_INFO":case"USER_HANGDUNGEON_CHANGE":this.freshTabBar()}},n.freshTabBar=function(){var e=[],t=Ng.userVO.getValue(19002),i=Ng.userVO.getValue(1006);if(0!=t&&e.push("材料"),i>2)e.push("装备");else{var n=this.facade.retrieveProxy("TaskPropxy");n&&n.vo&&n.vo.isFinish(2)&&e.push("装备")}e.push("宝箱"),i>=20&&e.push("灵宠"),i>=100&&e.push("宠装"),i>=35&&e.push("法宝"),i>=40&&e.push("特装"),e.push("其他"),e.length!=this._tabBarArr.length&&(this._tabBarArr=e,this.clearRedPoint(),this.view.typeBar.labels=e.join(","),-1==this.view.typeBar.selectedIndex?this.view.typeBar.selectedIndex=0:(this.freshAble=!0,this.fresh(),this.onTypeSelect(this.view.typeBar.selectedIndex))),(-1==this.view.typeBar.selectedIndex||this.view.typeBar.selectedIndex>e.length-1)&&(this.view.typeBar.selectedIndex=0)},n.clearRedPoint=function(){if(this.view.typeBar._childs){var e;for(var t in this.view.typeBar._childs)e=this.view.typeBar._childs[t],co.showOrHide(e,!1)}},n.getTabBarCell=function(e){var t=this._tabBarArr.indexOf(e);return-1==t?null:this.view.typeBar.getChildAt(t)},n.freshAdTime=function(){var e=Ng.userVO.getValue(7010),t=10-Ng.userVO.getValue(7009),i=this.view.boxList.getChildByName("adTime");Or.onAndroid?(0>t&&(t=0),i.text="剩余福利加速:"+t+"次"):(e>t&&(e=t),0>e&&(e=0),i.text="剩余福利加速:"+e+"次")},n.freshBoxVip=function(){var e=this.view.boxList.getChildByName("vipTime"),t=this.view.boxList.getChildByName("openVip"),i=Ng.userVO.getValue(7021);if(0>=i){var n=Ng.userVO.getValue(1006);e.visible=!1,t.visible=n>=45}else{var o=ro.newDate(i),s=ro.dateDiff(o,g.clock.todayZero);s>0?(e.visible=!0,t.visible=!1,e.text="离线开启宝箱剩余:"+s+"天",e.color="#c527ff"):(e.visible=!1,t.visible=!0)}},n.onBuyBoxVip=function(){var e=this.facade.retrieveProxy("MarketProxy"),t=e.vipInfo,i=680,n="";return t&&(t.isYearVIP?i=88:t.isDubleMVIP&&(i=300)),i>Ng.userVO.getValue(1010)?void this.sendNotification("prompted_info_show",{info:"您的元宝不足"+i
}):(n+="开通【<font color='#c527ff'>会员权限</font>】功能<br><br>",n+="<font color='#00dc24'>原价：680元宝/30天</font><br> <br>",n+="<font color='#c527ff'>钻石月卡：免费自动激活</font><br>",n+="<font color='#e70626'>年卡：88元宝/30天</font><br>",n+="<font color='#fffc00'>双月卡：300元宝/30天</font><br>",n+="功能说明：离线状态下开启宝箱并获取新的宝箱，持续30天<br> <br>",n+="您需花费<font color='#e70626'>"+i+"元宝</font>，是否确认开通？",void this.sendNotification("POP_CONFIRM_INFO",{info:n,handler:h.create(this,function(e){e&&fc.instance.buyOfflineOpenBox(i)})}))},n.onFilter=function(e){if(void 0===e&&(e=0),!this._pauseFilter){var t=this.view.natureFilter.selectedIndex,i=this.view.qualityFilter.selectedIndex,n=this.view.posFilter.selectedIndex;switch(this._tabBarArr[this.view.typeBar.selectedIndex]){case"材料":this._filterMetal(t,i,n);break;case"装备":this._filterEquips(t,i,n);break;case"宝箱":break;case"灵宠":this._filterPets(t,i,n);break;case"宠装":this._filterPetEquips(t,i,n);break;case"法宝":this._filterTalisman(t,i,n);break;case"特装":this._filterEquipEx(t,i,n);break;case"其他":this._filterOther(t,i,n)}}},n._filterOther=function(e,t,i){var n=[];if(this.propPets&&this.propPets.length>0&&-1==this._tabBarArr.indexOf("灵宠")&&(n=n.concat(this.propPets)),e>0||t>0||i>0){var o;for(var s in this.propStones)if(o=this.propStones[s],!(e>0&&o.propConf.nature!=e||t>0&&o.propConf.quality!=t)){if(i>0)switch(i){case 1:if(3!=o.propConf.propType&&5!=o.propConf.propType&&23!=o.propConf.propType)continue;break;case 2:if(500010!=o.propConf.id&&500011!=o.propConf.id)continue;break;case 3:if(500017!=o.propConf.id&&24!=o.propConf.propType)continue;break;default:if(3==o.propConf.propType||5==o.propConf.propType||23==o.propConf.propType||500010==o.propConf.id||500011==o.propConf.id||500017==o.propConf.id||24==o.propConf.propType)continue}n.push(o)}}else n=n.concat(this.propStones);this.view.propsList.dataSource=n,this.view.txtEmptyInfo.visible=n&&0==n.length,this.view.txtEmptyInfo.text="空空如也"},n._filterEquipEx=function(e,t,i){var n;if(e>0||t>0||i>0){n=[];var o;for(var s in this.equipExt)if(o=this.equipExt[s],!(e>0&&o.propConf.nature!=e||t>0&&o.propConf.quality!=t)){if(i>0)switch(i){case 1:if(17!=o.propConf.propType)continue;break;case 2:if(16!=o.propConf.propType)continue;break;case 3:if(18!=o.propConf.propType)continue}n.push(o)}}else n=this.equipExt;this.view.propsList.dataSource=n,this.view.txtEmptyInfo.visible=n&&0==n.length,this.view.txtEmptyInfo.text="空空如也"},n._filterHandbook=function(e,t,i){var n=vo["int"](this.view.levelFilter.text);isNaN(n)||0>=n?n=0:5>n?n=5:n-=n%5;var o;if(e>0||t>0||i>0||n>0){o=[];var s;for(var r in this.handbooks)s=this.handbooks[r],e>0&&s.propConf.nature!=e||t>0&&s.quality!=t||n>0&&s.propConf.level!=n||o.push(s)}else o=this.handbooks;this.view.propsList.dataSource=o,this.view.txtEmptyInfo.visible=o&&0==o.length,this.view.txtEmptyInfo.text="空空如也"},n._filterTalisman=function(e,t,i){var n;if(e>0||t>0||i>0){n=[];var o;for(var s in this.talismas)o=this.talismas[s],i>0&&o.talismanConf.grad!=i||e>0&&o.talismanConf.nature!=e||t>0&&o.quality!=t||n.push(o)}else n=this.talismas;this.view.talismanList.dataSource=n,this.view.txtEmptyInfo.visible=n&&0==n.length,this.view.txtEmptyInfo.text="空空如也，境界副本中掉落"},n._filterPets=function(e,t,i){var n;if(e>0||t>0||i>0){n=[];var o;for(var s in this.propPets)if(o=this.propPets[s],!(e>0&&o.propConf.nature!=e||t>0&&o.propConf.quality!=t)){if(i>0)switch(i){case 1:if(9!=o.propConf.propType)continue;break;case 2:if(10!=o.propConf.propType)continue;break;case 3:if(14!=o.propConf.propType)continue;break;default:if(9==o.propConf.propType||10==o.propConf.propType||14==o.propConf.propType)continue}n.push(o)}}else n=this.propPets;this.view.propsList.dataSource=n,this.view.txtEmptyInfo.visible=n&&0==n.length,this.view.txtEmptyInfo.text="20级后可以兽魂森林中获得宠物相关物品"},n._filterPetEquips=function(e,t,i){var n;if(e>0||t>0||i>0){n=[];var o;for(var s in this.petEuips)o=this.petEuips[s],e>0&&o.nature!=e||t>0&&o.quality!=t||i>0&&o.pos!=i||n.push(o)}else n=this.petEuips;this.view.petEquips.dataSource=n,this.view.txtEmptyInfo.visible=n&&0==n.length,this.view.txtEmptyInfo.text="灵宠装备在仙尊副本中掉落"},n._filterEquips=function(e,t,i){var n;if(e>0||t>0||i>0){n=[];var o;for(var s in this.equips)if(o=this.equips[s],!(e>0&&o.equipConf.nature!=e||t>0&&o.quality!=t)){if(i>0){switch(i){case 1:if(1!=o.equipConf.position)continue;break;case 2:if(2!=o.equipConf.position&&3!=o.equipConf.position&&4!=o.equipConf.position&&5!=o.equipConf.position)continue;break;case 3:if(6!=o.equipConf.position&&7!=o.equipConf.position)continue;break;case 4:if(8!=o.equipConf.position)continue;break;case 5:if(9!=o.equipConf.position)continue;break;default:continue}}n.push(o)}}else n=this.equips;this.view.equipList.dataSource=n,this.view.txtEmptyInfo.visible=n&&0==n.length,this.view.txtEmptyInfo.text="空空如也，可使用材料进行锻造"},n._filterMetal=function(e,t,i){var n;if(e>0||t>0||i>0){n=[];var o;for(var s in this.propMetas)if(o=this.propMetas[s],!(e>0&&o.propConf.nature!=e||t>0&&o.propConf.quality!=t)){if(i>0){var r=0;switch(i){case 1:r=1;break;case 2:r=2;break;case 3:r=3}if(r>0&&r!=o.propConf.position)continue}n.push(o)}}else n=this.propMetas;this.view.propsList.dataSource=n,this.view.txtEmptyInfo.visible=n&&0==n.length,this.view.txtEmptyInfo.text="空空如也，材料副本中掉落"},n.onTypeSelect=function(e){switch(this.view.propsList.visible=!1,this.view.equipList.visible=!1,this.view.boxList.visible=!1,this.view.talismanList.visible=!1,this.view.petEquips.visible=!1,this._pauseFilter=!0,this.view.natureFilter.selectedIndex=0,this.view.qualityFilter.selectedIndex=0,this.view.natureLb.visible=!0,this.view.qualityLb.visible=!0,this.view.qualityLb.text="品质：",this.view.levelFilter.visible=!1,this.view.posLb.visible=!0,this.view.posFilter.visible=!0,this.view.natureFilter.visible=!0,this.view.qualityFilter.visible=!0,this.view.natureLb.color="#fffc00",this.view.qualityLb.color="#00dc24",this.view.posLb.color="#0084ff",this.view.posLb.text="类型：",this._tabBarArr[e]){case"材料":this.view.propsList.visible=!0,this.view.filterBar.visible=!0,this.view.posFilter.labels="全部,武器,防具,饰品",this.view.posFilter.selectedIndex=0,this._pauseFilter=!1,this.onFilter();break;case"装备":this.view.equipList.visible=!0,this.view.filterBar.visible=!0,this.view.posFilter.labels="全部,武器,防具,饰品,披风,护甲",this.view.posFilter.selectedIndex=0,this._pauseFilter=!1,this.onFilter();break;case"宝箱":this.view.boxList.visible=!0,this._autoSendCount=0,this.view.boxList.dataSource=this.propBoxes,this.view.txtEmptyInfo.visible=!1,this.view.filterBar.visible=!1;break;case"灵宠":this.view.propsList.visible=!0,this.view.filterBar.visible=!0,this.view.posFilter.labels="全部,残魂,兽魂,血脉,其他",this.view.posFilter.selectedIndex=0,this._pauseFilter=!1,this.onFilter();break;case"宠装":this.view.petEquips.visible=!0,this.view.filterBar.visible=!0,this.view.posFilter.labels="全部,铃铛,葫芦,飞剑,灵甲,内丹,兽炎",this.view.posFilter.selectedIndex=0,this._pauseFilter=!1,this.onFilter();break;case"法宝":this.view.talismanList.visible=!0,this.view.filterBar.visible=!0,this.view.posFilter.labels="全部,炼气,筑基,金丹,元婴,化神,炼虚,合体",this.view.posFilter.selectedIndex=0,this.view.posLb.text="境界：",this._pauseFilter=!1,this.onFilter();break;case"特装":this.view.propsList.visible=!0,this.view.filterBar.visible=!0,this.view.posFilter.labels="全部,图纸,材料,熔灵",this.view.posFilter.selectedIndex=0,this.view.natureFilter.visible=!0,this.view.natureLb.visible=!0,this._pauseFilter=!1,this.onFilter();break;case"其他":default:this.view.propsList.visible=!0,this.view.filterBar.visible=!0,this.view.posFilter.labels="全部,天籁石,灵矿,灵珠,其他",this.view.posFilter.selectedIndex=0,this.view.natureFilter.visible=!1,this.view.natureLb.visible=!1,this._pauseFilter=!1,this.onFilter()}var t=this.view.posLb.x;this.view.posLb.visible&&(t+=this.view.posLb.width,t+=this.view.posFilter.width+5),this.view.natureLb.visible&&(this.view.natureLb.x=t,t+=this.view.natureLb.width,this.view.natureFilter.x=t,t+=this.view.natureFilter.width+5),this.view.qualityLb.visible&&(this.view.qualityLb.x=t,t+=this.view.qualityLb.width,this.view.qualityFilter.x=t,this.view.levelFilter.x=t)},n.onMouseProp=function(e,t){var i=this;if("click"==e.type){if(null==this.view.propsList.dataSource)return;var n=Ng.userVO.getValue(1006),o=this.view.propsList.dataSource[t];switch(e.target.name){case"chat":this.sendNotification("CHAT_INPUT_ITEM",o);break;case"mixCommon":if(500003==o.propConf.id)return void this.sendNotification("prompted_info_show",{info:"森林探索中遇到灵宠乐园时可使用"});if(500005==o.propConf.id)return void this.changeNamePop.popInfo(o);if(500008==o.propConf.id)return void this.sendNotification("ROLE_VIEW");if(500010==o.propConf.id||500011==o.propConf.id)return void this.sendNotification("SHOW_LODE_PAGE");if(500020==o.propConf.id)return void this.sendNotification("OPEN_MERIDIAN");if(500024==o.propConf.id)return void this.sendNotification("OPEN_PET_SKILL_DRESS",2);if(500026==o.propConf.id)return void this.sendNotification("SHOW_PET_EQUIP_PAGE");if(500006==o.propConf.id||500007==o.propConf.id||500012==o.propConf.id||500009==o.propConf.id||500018==o.propConf.id||185018==o.propConf.id||23==o.propConf.propType||27==o.propConf.propType)return void(n<o.propConf.level?this.sendNotification("prompted_info_show",{info:o.propConf.level+"级后可使用"}):o.count>1?(this._saleTmp=o,this.sendNotification("POP_USE_CONFIRM_INFO",{vo:o,handler:h.create(this,function(e,t){if(e&&i._saleTmp){var n=vo["int"](t);0>=n||n>i._saleTmp.count?i.sendNotification("prompted_info_show",{info:"使用数量有误，请确认后再试。"}):bu.instance.openProp(i._saleTmp.id,n)}})})):bu.instance.openProp(o.id,o.count));if(30009==o.propConf.id)return void this.sendNotification("SHOW_PET_FEED_ORANGE_DRUG_PAGE",o);if(7==o.propConf.propType)return void(this.view.typeBar.selectedIndex=this._tabBarArr.indexOf("宝箱"));if(8==o.propConf.propType)return void this.sendNotification("OPEN_EQUIP_VIEW");if(11==o.propConf.propType||10==o.propConf.propType||26==o.propConf.propType)return 20>n?void this.sendNotification("prompted_info_show",{info:"20级后可使用"}):void this.sendNotification("SHOW_PET_PAGE");if(12==o.propConf.propType)return 20>n?void this.sendNotification("prompted_info_show",{info:"20级后可使用"}):void(30010==o.baseId?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(o.propConf.quality)+"'>【"+o.propConf.name+"】</font>，<font color='#fffc00'>增加出战宠物成长比吗</font>",handler:h.create(this,function(e){e&&cu.instance.feedGrowDrug(o.id)})}):30011==o.baseId?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(o.propConf.quality)+"'>【"+o.propConf.name+"】</font>，<font color='#fffc00'>提高出战宠物负五行吗</font>",handler:h.create(this,function(e){e&&cu.instance.feedNatureDrug(o.id)})}):this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(o.propConf.quality)+"'>【"+o.propConf.name+"】</font>，<font color='#fffc00'>提高出战宠物资质吗</font>",handler:h.create(this,function(e){e&&cu.instance.feedQualityDrug(o.id)})}));if(13==o.propConf.propType)return 20>n?void this.sendNotification("prompted_info_show",{info:"20级后可使用"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(o.propConf.quality)+"'>【"+o.propConf.name+"】</font>，<font color='#fffc00'>刷新灵宠商店吗</font>",handler:h.create(this,function(e){e&&(hu.instance.freshUseQuality(o.id),i.sendNotification("SHOW_PET_SHOP_PAGE"))})});if(20==o.propConf.propType)return 20>n?void this.sendNotification("prompted_info_show",{info:"20级后可使用"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(o.propConf.quality)+"'>【"+o.propConf.name+"】</font>，<font color='#fffc00'>获取灵宠吗</font>",handler:h.create(this,function(e){e&&(hu.instance.takeByProp(o.id),i.sendNotification("SHOW_PET_PAGE"))})});if(14==o.propConf.propType||15==o.propConf.propType)return void this.sendNotification("SHOW_BLOOD_PAGE");if(17==o.propConf.propType){var s,r=null;for(var a in this.equipExt)if(s=this.equipExt[a],o.propConf.type==s.propConf.type&&16==s.propConf.propType&&s.propConf.quality==o.propConf.quality&&s.count>=10){r=s;break}return void(r?this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(o.propConf.quality)+"'>【"+o.propConf.name+"】</font>，和 10个 <font color='"+N.getColor(r.propConf.quality)+"'>【"+r.propConf.name+"】</font> 制作装备吗？",handler:h.create(this,function(e){e&&Sc.instance.buildEquipEx(o.id,r.id)})}):this.sendNotification("prompted_info_show",{info:"制作需要的材料不足。"}))}if(18==o.propConf.propType)return void this.sendNotification("OPEN_EQUIP_VIEW");if(19==o.propConf.propType)return 5>n?void this.sendNotification("prompted_info_show",{info:"20后可使用"}):void this.sendNotification("OPEN_ALLIANCE_VIEW");if(21==o.propConf.propType){switch(o.baseId){case 200002:20>n?this.sendNotification("prompted_info_show",{info:"20级兽魂森林开启后才可使用。"}):this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(o.propConf.quality)+"'>【"+o.propConf.name+"】</font>，增加一次探索次数吗",handler:h.create(this,function(e){e&&dc.instance.usePropAddTime(o.id)})});break;case 200003:40>n?this.sendNotification("prompted_info_show",{info:"组队副本开启后才可使用。"}):this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(o.propConf.quality)+"'>【"+o.propConf.name+"】</font>，增加一次组队副本次数吗",handler:h.create(this,function(e){e&&pu.instance.usePropAddTime(o.id)})})}return}if(22==o.propConf.propType)return void this.sendNotification("OPEN_HANDBOOK_VIEW",o.propConf.attributes);if(24==o.propConf.propType||500017==o.propConf.id)return void this.sendNotification("OPEN_PEARL_DRESS_PAGE");if(25==o.propConf.propType)return void this.sendNotification("SHOW_BONE_PAGE",o);if(500021==o.baseId)return void this.sendNotification("OPEN_DEMON_DRESS_PAGE");if(500022==o.baseId)return void this.sendNotification("OPEN_MYSTERY_GATE_VIEW");if(5==o.propConf.propType||28==o.propConf.propType){var l=vo["int"](o.count/100);return void(1>l?this.sendNotification("prompted_info_show",{info:"材料不足，无法合成。"}):Sc.instance.mixProp(o.id,l))}if(o.needIdentify){var c=this.facade.retrieveProxy("UserProxy").vo,u=5;return void(c.getValue(1010)<u?this.sendNotification("prompted_info_show",{info:"鉴定需要5元宝"}):this.sendNotification("POP_CONFIRM_INFO",{info:"鉴定后可得知该材料具体数值。<br>不鉴定也可照常锻造，是否需要花费<font color='#fffc00'>5元宝</font>鉴定？",handler:h.create(this,function(e){e&&(Sc.instance.identifyPropSp(o.id),k.goldenCost("鉴定特材",1,u))})}))}if(o.propConf.quality>=6)return void this.sendNotification("prompted_info_show",{info:"已是最高品质"});if(o.propConf.quality>=5)return void this.sendNotification("prompted_info_show",{info:"红色材料请使用特殊合成。"});if(o.count<3)return void this.sendNotification("prompted_info_show",{info:"普通合成,最少需要3个材料。"});this.smityPropCommPop.popProp(o),op.aldSendEvent("普通合成");break;case"mixSP":if(0==o.propConf.propType)return void this.exchangeGhostPop.popProp(o);if(10==o.propConf.propType)return void this.sendNotification("SHOW_PET_PAGE");if(14==o.propConf.propType)return void this.sendNotification("SHOW_BLOOD_UPQUALITY_PAGE",o.id);if(18==o.propConf.propType)return c=this.facade.retrieveProxy("UserProxy").vo,u=5,void(c.getValue(1010)<u?this.sendNotification("prompted_info_show",{info:"鉴定需要5元宝"}):this.sendNotification("POP_CONFIRM_INFO",{info:"鉴定后可得知该熔灵具体数值。<br>不鉴定也可照常锻造，是否需要花费<font color='#fffc00'>5元宝</font>鉴定？",handler:h.create(this,function(e){e&&(Sc.instance.identifyPropSp(o.id),k.goldenCost("鉴定熔灵",1,u))})}));if(11==o.propConf.propType)return void(3e4==o.propConf.id?this.exchangePetFoodPop.showMix():this.exchangePetFoodPop.showBreak());if(17==o.propConf.propType)return void this.sendNotification("OPEN_UPGRADE_GRAPH_VIEW",o);if(8==o.propConf.propType)return void this.sendNotification("SHOW_TOWER_SHOP_RECOVER_PAGE",o);if(26==o.propConf.propType)return void this.sendNotification("POP_USE_CONFIRM_INFO",{vo:o,handler:h.create(this,function(e,t){e&&t>=1&&t<=o.count&&bu.instance.breakPetGhostSoul(o.id,t)})},"break");if(o.propConf.quality>=6)return void this.sendNotification("prompted_info_show",{info:"材料已是最高品质。"});var d=0;d=o.propConf.level<=25?o.propConf.quality<5?125005:125006:o.propConf.level<=40?o.propConf.quality<5?145005:145006:o.propConf.level<=50?o.propConf.quality<5?165005:165006:o.propConf.level<=85?o.propConf.quality<5?185007:185008:o.propConf.quality<5?185007:185008;var p,f=[];if(d>0){var _;for(var m in this.propStones)if(_=this.propStones[m],3==_.propConf.propType&&_&&_.propConf.id>=d){if(o.propConf.quality>=5&&6!=_.propConf.quality)continue;null==p?(p=_,f.push(_)):p.propConf.id>_.propConf.id?(p=_,f.unshift(_)):f.push(_)}this.smityPropSpPop.popProp(o,f,d),op.aldSendEvent("特殊合成")}break;case"btnMix":9==o.propConf.propType?o.count<5?this.sendNotification("prompted_info_show",{info:"提炼一个兽魂,需要5个残魂。"}):cu.instance.mixGhost(o.id):17==o.propConf.propType?this.sendNotification("POP_CONFIRM_INFO",{info:"确认将图纸五行转换为角色对应的五行吗？",handler:h.create(this,function(e){e&&bu.instance.chgGraphNature(o.id)})}):18==o.propConf.propType&&this.sendNotification("OPEN_COAT_SPECIAL_REBUILD",o);break;case"btnUnMix":9==o.propConf.propType&&o.count>0&&cu.instance.unMixGhostPiece(o.id);break;case"saleBtn":if(5==o.propConf.propType)return void this.sendNotification("POP_FUN_NOTICE",7);if(10==o.propConf.propType)return void cu.instance.decomposeGhost(o.id);op.aldSendEvent("出售材料"),o.count>1?(this._saleTmp=o,this.sendNotification("POP_CONFIRM_INFO",{maxNum:o.count,vo:o,handler:h.create(this,function(e,t){if(e&&i._saleTmp){var n=vo["int"](t);0>=n||n>i._saleTmp.count?i.sendNotification("prompted_info_show",{info:"出售数量有误，请确认后再试。"}):bu.instance.sellProps(i._saleTmp.id,n)}})},"num")):o.propConf.quality>=4?(this._saleTmp=o,this.sendNotification("POP_CONFIRM_INFO",{info:"正在出售高级材料，是否确认？",vo:o,handler:this.saleConfirmHandler})):bu.instance.sell(o.id,o.goodsType)}}},n.onSaleConfirm=function(e){e&&this._saleTmp&&bu.instance.sell(this._saleTmp.id,this._saleTmp.goodsType)},n.onBreakConfirm=function(e){e&&this._saleTmp&&bu.instance.breakEquip(this._saleTmp.id)},n.onPropsRender=function(e,t){if(this.view.propsList.dataSource){var i=e.getChildByName("chat");v.enableChat()&&!v.limitChat&&i&&(i.visible=!0);var n=this.view.propsList.dataSource[t];Ln.renderProps(e.getChildByName("prop"),n);var o=e.getChildByName("mixCommon"),s=e.getChildByName("mixSP"),r=e.getChildByName("saleBtn");r.label="出售";var a=e.getChildByName("btnMix");a.visible=!1;var l=e.getChildByName("btnUnMix");l.visible=!1;var h=Ng.userVO.getValue(1006);switch(n.propConf.propType){case 0:o.visible=!1,s.visible=!0,s.label="兑换材料",r.visible=!0;break;case 1:case 16:n.propConf.quality>=5?o.visible=!1:(o.label="普通合成",o.visible=!0),20>h||n.propConf.quality>=6||Eb.isNewGuy?s.visible=!1:(s.visible=Eb.lastId>13,s.label="特殊合成"),r.visible=!Eb.isNewGuy;break;case 2:n.needIdentify?(o.label="鉴定",o.visible=!0):o.visible=!1,20>h||n.propConf.quality>=6?s.visible=!1:(s.visible=Eb.lastId>13,s.label="特殊合成"),r.visible=!0;break;case 3:o.visible=!1,s.visible=!1,r.visible=!1;break;case 5:o.label="合成",o.visible=!0,s.visible=!1,r.visible=!0,r.label="来源";break;case 8:o.label="去使用",o.visible=!0,s.visible=!1,r.visible=!1,s.visible=!0,s.label="换威望";break;case 28:o.label="合成",o.visible=!0,s.visible=!1,r.visible=!1;break;case 7:case 12:case 13:case 15:case 19:case 20:case 21:case 22:case 23:case 27:case 24:o.label="去使用",o.visible=!0,s.visible=!1,r.visible=!1;break;case 26:o.label="去使用",o.visible=!0,s.label="分解",s.visible=!0,r.visible=!1;break;case 100:500013==n.baseId||500014==n.baseId||500015==n.baseId||500016==n.baseId?(o.visible=!1,s.visible=!1,r.visible=!0):(o.label="去使用",o.visible=!0,s.visible=!1,r.visible=!1);break;case 11:o.label="去使用",o.visible=!0,s.visible=!1,r.visible=!1,Ng.userVO.getValue(1006)>=60&&(3e4==n.propConf.id?s.label="合成":s.label="分解",s.visible=!0);break;case 17:o.label="去使用",o.visible=!0,n.propConf.quality<6?(s.label="升品",s.visible=!0):s.visible=!1,r.visible=!0,n.propConf.nature!=Ng.userVO.getValue(1004)&&(a.label="转换",a.visible=!0);break;case 18:o.label="去使用",o.visible=!0,n.needIdentify?(s.label="鉴定",s.visible=!0):s.visible=!1,r.visible=!0,n.quality>=5&&(a.label="重铸",a.visible=!0);break;case 14:o.label="去使用",o.visible=!0,n.quality<6?(s.visible=!0,s.label="升品"):6==n.quality?(s.visible=!0,s.label="进阶"):(s.visible=!0,s.label="培养"),r.visible=!0;break;case 9:n.propConf.quality>=6?(o.visible=!1,s.visible=!1):n.propConf.quality>=5?(o.visible=!1,s.label="特殊合成",s.visible=!0):(o.label="普通合成",o.visible=!0,s.label="特殊合成",s.visible=!0),r.visible=!0,a.visible=!0,a.label="提炼",n.propConf.quality>1&&n.propConf.quality<6&&(l.visible=!0);break;case 10:o.visible=!1,s.label="装备",s.visible=!0,n.quality<=6?(r.label="分解",r.visible=!0):r.visible=!1;break;case 25:o.label="去使用",o.visible=!0,r.visible=!1;break;default:o.visible=!1}n.propConf.silverPrice<=0&&(r.visible=!1);var c=r.x+r.width;r.visible&&(c-=r.width),s.visible&&(s.x=c-s.width-5,c=s.x),o.visible&&(o.x=c-o.width-5,c=o.x),a.visible&&(a.x=c-a.width-5,c=a.x),l.visible&&(l.x=c-l.width-5,c=l.x)}},n.onMouseEquip=function(e,t){if("click"==e.type){var i;if(this.view.equipList.dataSource){var n=this.view.equipList.dataSource[t];switch(e.target.name){case"chat":this.sendNotification("CHAT_INPUT_ITEM",n);break;case"dhBtn":if(n.canCreatAttr()){var o=kn.getDhCostSilver(n.equipConf.level);if(i=this.facade.retrieveProxy("UserProxy").vo,i.getValue(1009)<o)return void this.sendNotification("prompted_info_show",{info:"需要"+o+"铜币，铜币不足无法点化。"});this.sendNotification("POP_CONFIRM_INFO",{info:"点化需要"+o+"铜币，是否继续？",vo:n,handler:h.create(this,function(e){e&&Sc.instance.dianhuaEquip(n.id)})})}else n.canEnchanment()&&this.sendNotification("OPEN_ENCHANTMENT_EQUIP_VIEW",n);break;case"saleBtn":if(n.equipConf.quality>=4||n.equipConf.position>=8){this._saleTmp=n;var s=0,r=g.database.getPropForGhost(n.equipConf.mainPropsType,n.quality);switch(n.equipConf.position){case 1:s=3;break;case 2:case 3:s=2;break;case 4:case 5:s=1;break;case 6:case 7:s=2;break;case 8:case 9:case 10:var a=vo["int"](n.equipConf.mainPropsType/1e4);a=1e4*a+10*n.equipConf.nature+n.equipConf.quality,r=g.database.getData("props",a),s=1}var l=null;n.equipConf.quality>=5&&(l="duble"),this.sendNotification("POP_CONFIRM_INFO",{info:"正在分解装备<font color='"+N.getColor(n.quality)+"'>【"+n.equipConf.name+"】</font><br>可获得：<font color='"+N.getColor(r.quality)+"'>【"+r.name+"】</font>*"+s+"个，是否确认？",vo:n,handler:this.breakConfirmHandler},l)}else bu.instance.sell(n.id,n.goodsType);break;case"dressBtn":i=this.facade.retrieveProxy("UserProxy").vo;var c=i.getValue(1006),u=i.getValue(1004);if(0!=n.equipConf.needNature&&u!=n.equipConf.needNature)return void(n.equipConf.position>=8?this.sendNotification("POP_CONFIRM_INFO",{info:"转换五行后该装备属性将全部随机，不可逆转，是否继续？",vo:n,handler:h.create(this,function(e){e&&Sc.instance.chgExEquipNature(n.id)})}):this.sendNotification("prompted_info_show",{info:"五行限制，无法装备。"}));if(c<n.equipConf.level)return void this.sendNotification("prompted_info_show",{info:"级别不足，无法装备。"});bu.instance.dress(n.id,-1);break;case"rbBtn":this.sendNotification("OPEN_REBUILD_EQUIP_VIEW",n)}}}},n.onEquipRender=function(e,t){if(this.view.equipList.dataSource){var i=this.view.equipList.dataSource[t];Ln.renderEquip(e.getChildByName("equip"),i);var n=e.getChildByName("chat");v.enableChat()&&!v.limitChat&&n&&(n.visible=!0);var o=e.getChildByName("dhBtn");i.canCreatAttr()?(o.visible=!0,o.label="点化"):i.canEnchanment()?(o.visible=!0,o.label="熔灵"):o.visible=!1;var s=e.getChildByName("saleBtn");i.equipConf.position<8&&i.quality>=4||i.equipConf.position>=8?s.label="分解":s.label="出售";var r=e.getChildByName("rbBtn");r.visible=i.canRebuild();var a=e.getChildByName("dressBtn");a.label="穿上",i.equipConf.position>=8&&0!=i.equipConf.needNature&&Ng.userVO.getValue(1004)!=i.equipConf.needNature&&(a.label="转换")}},n.onMouseTalisman=function(e,t){if("click"==e.type&&this.view.talismanList.dataSource){var i=this.view.talismanList.dataSource[t];switch(e.target.name){case"chat":this.sendNotification("CHAT_INPUT_ITEM",i);break;case"btnDress":gc.instance.dress(i.id,0);break;case"btnUpgrade":i.quality<6?this.sendNotification("OPEN_UPGRADE_TALISMAN_VIEW",i):this.sendNotification("OPEN_CHG_NATURE_VIEW",i);break;case"btnRebuild":this.sendNotification("OPEN_REBUILD_TALISMAN_VIEW",i);break;case"btnSale":if(i.quality>=6){this.sendNotification("prompted_info_show",{info:"紫色极品法宝，不可出售。"});break}this._saleTmp=i,this.sendNotification("POP_CONFIRM_INFO",{info:"正在出售法宝<font color='"+N.getColor(i.quality)+"'>【"+i.talismanConf.name+"】</font>，是否确认？",vo:i,handler:this.saleConfirmHandler})}}},n.onTalimsmanRender=function(e,t){if(this.view.talismanList.dataSource){var i=e.getChildByName("chat");v.enableChat()&&!v.limitChat&&i&&(i.visible=!0);var n=this.view.talismanList.dataSource[t];Ln.renderTalisman(e.getChildByName("talisman"),n,!0);var o;0==n.talismanConf.nature?(o=e.getChildByName("btnDress"),o.visible=!1,o=e.getChildByName("btnUpgrade"),o.visible=!1,o=e.getChildByName("btnRebuild"),o.visible=!1):(o=e.getChildByName("btnDress"),o.visible=!0,o=e.getChildByName("btnRebuild"),o.visible=!0,o=e.getChildByName("btnUpgrade"),o.visible=!0,n.quality<6?o.label="升品":o.label="重铸")}},n.onMousePetEquip=function(e,t){if("click"==e.type&&this.view.petEquips.dataSource){var i=this.view.petEquips.dataSource[t];switch(e.target.name){case"btnDress":i.isIdentify?this.sendNotification("SHOW_PET_EQUIP_PAGE"):this.sendNotification("POP_CONFIRM_INFO",{info:"<br>确认要鉴定灵宠装备随机属性吗？<br>(品质越高鉴定后属性越多)",vo:i,handler:h.create(this,function(e){e&&du.instance.identify(i.id)})});break;case"btnBreak":this.sendNotification("SHOW_PET_EQUIP_BREAK_PAGE",i)}}},n.onPetEqRender=function(e,t){if(this.view.petEquips.dataSource){var i=e.getChildByName("chat");v.enableChat()&&!v.limitChat&&i&&(i.visible=!0);var n=this.view.petEquips.dataSource[t],o=e.getChildByName("btnDress");Ln.renderPetEquip(e.getChildByName("item"),n),n.isIdentify?o.label="佩戴":o.label="鉴定"}},n.onBoxTimer=function(){if(this.view.boxList.dataSource){for(var e=!1,t=!1,i=0;i<this.view.boxList.dataSource.length;i++){var n=this.view.boxList.dataSource[i];if(n&&n.expiration){var o=n.expiration-g.clock.currentTime;if(0>=o){e=!0,this.onBoxRender(this.view.boxList.getCell(i),i);continue}var s=this.countDownToString(o),r=this.view.boxList.getCell(i).getChildByName("clockTxt");r.text=s;var a=Ts.getItem("BOX_SPEED"+v.playerId);if(null!=a&&""!=a){var l=this.view.boxList.getCell(i).getChildByName("videoBtn"),h=Number(Ts.getItem("BOX_SPEED"+v.playerId)),c=h-g.clock.currentTime;if(0>c){t=!0;var u=this.view.boxList.getCell(i).getChildByName("txtVideo");u.visible=!1,l.text.changeText(""),l.getChildByName("icon").visible=!0}else s=this.countDownToString(c),l.text.changeText(s),l.getChildByName("icon").visible=!1}}}t&&Ts.setItem("BOX_SPEED"+v.playerId,""),e&&this.sendNotification("BAGPACK_HAS_BOX_READY",!0)}},n.countDownToString=function(e){var t=Math.floor(e/6e4),i=Math.floor(t/60);t-=60*i;var n,o=Math.floor(e%6e4/1e3);return n=i+(10>t?":0":":")+t+(10>o?":0":":")+o},n.onBoxRender=function(e,t){var i=Ng.userVO.getValue(1012),n=Ng.userVO.getValue(1010);if(this.view.boxList.dataSource){var o=e.getChildByName("name"),s=e.getChildByName("lbClock"),r=e.getChildByName("clockTxt"),a=e.getChildByName("info");a.color="#ffffff";var l=e.getChildByName("openBtn"),h=e.getChildByName("videoBtn");h.visible=!1;var c=e.getChildByName("txtVideo");c.visible=!1;var u=this.view.boxList.dataSource[t];if(u)if(o.visible=!0,a.visible=!0,l.visible=!0,o.text="【"+u.propConf.name+"】",o.color=N.getColor(u.propConf.quality),a.text=u.propConf.desc,u.expiration){var d=g.clock.currentTime-u.expiration;if(d>=0)s.visible=!1,r.visible=!1,l.label="打开",7e4>d&&this.view.isPopup&&"宝箱"==this._tabBarArr[this.view.typeBar.selectedIndex]&&0==this._autoSendCount&&(bu.instance.openBox(u.id),this._autoSendCount++);else if(s.visible=!0,r.visible=!0,r.color="#00dc24",l.label="加速",0==u.reason&&Ng.userVO.getValue(7009)<10&&0==u.reason){h.visible=!0;var p=Ts.getItem("BOX_SPEED"+v.playerId);if(null!=p&&""!=p)return void(c.visible=!0);var f=this.facade.retrieveProxy("MarketProxy");f&&f.vipInfo&&f.vipInfo.isMVIP?(h.label="福利加速",h.getChildByName("icon").visible=!1):v.IS_THIRD_PT?(h.label="福利加速",h.getChildByName("icon").visible=!1):(h.label="",h.getChildByName("icon").visible=!0)}}else s.visible=!0,r.visible=!0,r.color="#fffc00",r.text=On.queryOpenTime(u.propConf.id),l.label="开启";else if(o.visible=!1,s.visible=!1,r.visible=!1,a.visible=!0,t==i){l.visible=!0;var _=On.queryGoldNeedOfOpen(i),m=On.queryGoldNeedLevel(i);a.text="解锁需要"+_+"元宝,或等级达到"+m+"级";var y=Ng.userVO.getValue(1006);_>n&&m>y?a.color="#e70626":y>=m&&(a.color="#00dc24"),l.label="解锁"}else i>t?(a.text="未获得宝箱",l.visible=!1):(a.text="请先解锁以上位置",a.color="#e70626",l.visible=!1)}},n.onMouseBox=function(e,t){var i=this;if("click"==e.type&&("videoBtn"==e.target.name||"openBtn"==e.target.name)){var n=Ng.userVO.getValue(1012),o=Ng.userVO.getValue(1010),s=this.view.boxList.dataSource[t],r=0;if(s){this._boxTmp=s;var a=NaN,l=0;if(s.expiration)if(g.clock.currentTime>=s.expiration)bu.instance.openBox(s.id),op.aldSendEvent("开启宝箱");else{if("videoBtn"==e.target.name){if(Ng.userVO.getValue(1006)<25){var c=this.facade.retrieveProxy("MarketProxy");if(c&&c.vipInfo&&c.vipInfo.vipMontAdd>0);else{if(v.IS_THIRD_PT&&"m4399"!=X.FLAVOR)return void this.sendNotification("prompted_info_show",{info:"需要激活月卡"});if(!op.isMini)return void this.sendNotification("prompted_info_show",{info:"需要激活月卡或等级到达25通过广告加速"})}}var u=Ts.getItem("BOX_SPEED"+v.playerId);if(null!=u&&""!=u)return void this.sendNotification("prompted_info_show",{info:"广告加速冷却中"});var d=10-Ng.userVO.getValue(7009);if(0>=d)return void this.sendNotification("prompted_info_show",{info:"今日次数已用完,请明天再试"});var p=Ng.userVO.getValue(7010);if(p>0&&(c=this.facade.retrieveProxy("MarketProxy"),c&&c.vipInfo&&c.vipInfo.vipMontAdd>0))return void bu.instance.speedClockBoxByVideo(this._boxTmp.id);if(T.IS_ON_MINI);else{if(Or.onIOS)return void this.sendNotification("prompted_info_show",{info:"iOS设备暂时不支持广告内容，等后续更新"});if(""==v.version_app)return void this.sendNotification("prompted_info_show",{info:"请下载最新版本开启看广告免费加速"})}if(T.IS_ON_MINI)op.createRewardedVideoAd(function(){bu.instance.speedClockBoxByVideo(i._boxTmp.id),i.sendNotification("AD_COMPLETE","box")},function(){i.sendNotification("prompted_info_show",{info:"未观看完视频"})});else{if(v.IS_THIRD_PT&&c&&!c.vipInfo.isMVIP&&"m4399"!=X.FLAVOR)return void this.sendNotification("prompted_info_show",{info:"看广告领奖励功能调整中，待完成后开放"});if(Or.onAndroid&&!this.isCickAd){var f=v.playerId+"|box|"+this._boxTmp.id;Q.showAd(f),this.isCickAd=!0}else this.sendNotification("prompted_info_show",{info:"广告正在加载中，请等待"})}return}a=s.expiration-g.clock.currentTime,this.boxKey?(l=Math.ceil(a/3e5),l>this.boxKey.count&&(l=this.boxKey.count),this.sendNotification("POP_CONFIRM_INFO",{info:"您将使用"+l+"个灵符减少宝箱"+5*l+"分钟开启时间",vo:this.boxKey,handler:h.create(this,function(e){e&&i._boxTmp&&bu.instance.speedClockBoxByKey(i.boxKey.id,s.id)})})):(r=On.queryGoldNeedOfSpeed(a),r>o?this.sendNotification("prompted_info_show",{info:"加速需要"+r+"元宝"}):this.sendNotification("POP_CONFIRM_INFO",{info:"加速需要<font color='#fffc00'>"+r+"元宝</font>，是否确认？",handler:h.create(this,function(e){e&&i._boxTmp&&(bu.instance.speedClockBox(s.id),k.goldenCost("加速宝箱",1,r))})})),op.aldSendEvent("加速宝箱")}else bu.instance.beginClockBox(s.id)}else if(t==n){var _=On.queryGoldNeedLevel(n),m=Ng.userVO.getValue(1006);if(m>=_)return void bu.instance.addBoxSize();r=On.queryGoldNeedOfOpen(n),r>o?this.sendNotification("prompted_info_show",{info:"元宝不足。"}):this.sendNotification("POP_CONFIRM_INFO",{info:"开启位置需要<font color='#fffc00'>"+r+"元宝</font>，是否确认？",handler:h.create(this,function(e){e&&(bu.instance.addBoxSize(),k.goldenCost("解锁宝箱位"+n,1,r))})})}}},n.fresh=function(){if(this.freshAble&&this.view.isPopup){this.boxKey=null,this.equips=[],this.propMetas=[],this.propStones=[],this.propPets=[],this.talismas=[],this.handbooks=[],this.equipExt=[],this.petEuips=[];var e,t=this.facade.retrieveProxy("GoodsProxy"),n=t.listItems(0);for(var o in n)if(e=n[o],!(null==e||e.count<=0))if(1==e.goodsType)this.equips.push(e);else if(0==e.goodsType){var s=e;if(null==s.propConf){console.log("----not fond:",s.baseId);continue}0==s.propConf.propType||1==s.propConf.propType||2==s.propConf.propType?this.propMetas.push(e):9==s.propConf.propType||10==s.propConf.propType||11==s.propConf.propType||12==s.propConf.propType||13==s.propConf.propType||14==s.propConf.propType||15==s.propConf.propType||20==s.propConf.propType||30009==s.propConf.id||500003==s.propConf.id||26==s.propConf.propType||500024==s.propConf.id||500026==s.propConf.id?this.propPets.push(e):22==s.propConf.propType?this.handbooks.push(e):17==s.propConf.propType||16==s.propConf.propType||18==s.propConf.propType?this.equipExt.push(e):(this.propStones.push(e),
7==s.propConf.propType&&(this.boxKey=e))}else 6==e.goodsType?this.talismas.push(e):14==e.goodsType&&this.petEuips.push(e);this.propMetas.sort(this.compareFunctionProp),this.propPets.sort(this.compareFunctionProp),this.handbooks.sort(this.compareFunctionProp),this.equips.sort(this.compareFunctionEquip),this.talismas.sort(this.compareFunctionTalisman),this.petEuips.sort(this.compareFunctionPetEquip),this.propBoxes=new Array(5),n=t.listItems(5);var o,r=0;for(o in n)e=n[o],e&&e.count>0&&(this.propBoxes[r++]=e);switch(this._tabBarArr[this.view.typeBar.selectedIndex]){case"宝箱":this._autoSendCount=0,this.view.boxList.dataSource=this.propBoxes,this.view.txtEmptyInfo.visible=!1;break;default:this.onFilter(this.view.typeBar.selectedIndex)}this.freshAble=!1,this.boxTimerInit||(this.boxTimerInit=!0,this.onBoxTimer(),i.timer.loop(1e3,this,this.onBoxTimer))}},n.compareFunctionProp=function(e,t){var i=e.propConf.id,n=t.propConf.id,o=Math.floor(i/1e6),s=Math.floor(n/1e6);return o==s?i>n?1:n>i?-1:t.count-e.count:(o=i%1e6,s=n%1e6,o>s?1:s>o?-1:i>n?1:n>i?-1:0)},n.compareFunctionEquip=function(e,t){return e.equipConf.id>t.equipConf.id?1:e.equipConf.id<t.equipConf.id?-1:0},n.compareFunctionTalisman=function(e,t){return e.talismanConf.grad>t.talismanConf.grad?-1:e.talismanConf.grad<t.talismanConf.grad?1:e.quality>t.quality?-1:e.quality<t.quality?1:e.baseId-t.baseId},n.compareFunctionPetEquip=function(e,t){return e.prefix>t.prefix?1:e.prefix<t.prefix?-1:e.quality-t.quality},s(0,n,"exchangePetFoodPop",function(){return this.getViewComponent(),this._exchangePetFoodPop}),s(0,n,"changeNamePop",function(){return this.getViewComponent(),this._changeNamePop}),s(0,n,"smityPropSpPop",function(){return this.getViewComponent(),this._smityPropSpPop}),s(0,n,"exchangeGhostPop",function(){return this.getViewComponent(),this._exchangeGhostPop}),s(0,n,"smityPropCommPop",function(){return this.getViewComponent(),this._smityPropCommPop}),s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="BagpackMediator",t.BOX_SPEED="BOX_SPEED",t}(lc),iE=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.EquipDressCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemSimpleGroup",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.updateItemsSimple(i.items);o.size>0&&this.sendNotification("FRESH_GOODS_PACK",o)}else console.log("props dress get.. error:"+t.status)},t}(rc),nE=function(e){function t(){this.selectPropsPop=null,this._aimVo=null,this._meterialVo=null,this.propsPool=[],t.__super.call(this,"RebuildCoatSpecialMediator")}o(t,"modules.bagpack.view.RebuildCoatSpecialMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new fL),this.view.btnChose.clickHandler=new h(this,this.onMeterial),this.selectPropsPop=new cP(new h(this,this.onPropPopSelect)),this.selectPropsPop.filterBar.visible=!1,this.view.btnSubmit.clickHandler=new h(this,this.onSubmit)},i.listNotificationInterests=function(){return["OPEN_COAT_SPECIAL_REBUILD"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_COAT_SPECIAL_REBUILD":this.showItem(e.getBody())}},i.showItem=function(e){this._aimVo=e,Ln.renderProps(this.view.aim,e),Ln.changeCountShow(this.view.aim,1),this.view.meterial.visible=!1,this._meterialVo=null;var t=this._needSilver(this._meterialVo);this.view.costSilver.text=lo.transform(t),this.propsPool.length=0;var i,n=this.facade.retrieveProxy("GoodsProxy"),o=n.listItems(0);for(var s in o)if(i=o[s],!(null==i||i.count<=0)&&0==i.goodsType){var r=i;if(null==r.propConf)continue;if(18!=r.propConf.propType)continue;if(r.quality!=e.quality||r.propConf.level!=e.propConf.level)continue;r.id==e.id?r.count>1&&(r.countTmp=r.count-1,this.propsPool.push(r)):this.propsPool.push(r.resetCountTmp())}this.view.popup()},i.onMeterial=function(){return null==this.propsPool||0==this.propsPool.length?void this.sendNotification("prompted_info_show",{info:"没有可用同等级同品质的熔灵了。"}):void this.selectPropsPop.popPops(this.propsPool,!1)},i.onPropPopSelect=function(e){if(this.selectPropsPop.close(),this.propsPool&&e){if(this._meterialVo&&this._meterialVo.id==e.id)return;var t=this.propsPool.indexOf(e);if(-1==t)return;e.countTmp--,e.countTmp<=0&&(this.propsPool.splice(t,1),this.selectPropsPop.props.refresh()),this._meterialVo&&(t=this.propsPool.indexOf(this._meterialVo),t>-1&&(this._meterialVo.countTmp++,1==this._meterialVo.countTmp&&(this.propsPool.push(this._meterialVo),this.selectPropsPop.props.refresh()))),this._meterialVo=e,Ln.renderProps(this.view.meterial,this._meterialVo),Ln.changeCountShow(this.view.meterial,1),this.view.meterial.visible=!0}},i._needSilver=function(e){var t=0;return t=5==this._aimVo.quality?this._aimVo.propConf.level<=40?1e6:this._aimVo.propConf.level<=55?5e6:3e7:this._aimVo.propConf.level<=40?3e6:this._aimVo.propConf.level<=55?1e7:5e7},i.onSubmit=function(){var e=this;if(null==this._meterialVo)return void this.sendNotification("prompted_info_show",{info:"重铸需要材料不可为空。"});var t=this._needSilver(this._meterialVo);return Ng.userVO.getValue(1009)<t?void this.sendNotification("prompted_info_show",{info:"重铸需要的铜币不足。"}):void this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用选定的熔灵进行重铸吗？",handler:h.create(this,function(t){t&&(bu.instance.rebuildCoatSpecial(e._aimVo.id,e._meterialVo.id),e.view.close())})})},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="RebuildCoatSpecialMediator",t}(lc),oE=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.GoodsChangeSimpleCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ItemSimpleGroup",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.updateItemsSimple(i.items);o.size>0&&this.sendNotification("FRESH_GOODS_PACK",o)}else console.log("props change simple get.. error:"+t.status)},t}(rc),sE=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.ChgGraphNatureCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();t.success?this.sendNotification("prompted_info_show",{info:"图纸五行更换成功"}):as.debug(this,"ChgGraphNatureCommand",""+t.status)},t}(rc),rE=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.TakeNatureExtAwdCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"补偿奖励",awards:n,desc:"<br><font color='#ffffff'>-----以上是平衡优化后给您的补偿^^-----</font>"})}else as.debug(this,"TakeNatureExtAwdCommand","failue:"+t.status)},t}(rc),aE=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.OpenPropCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"开启宝箱 ",awards:n,desc:"<br><font color='#ffffff'>-----以上是您开启宝箱的收获^^-----</font>"})}else as.debug(this,"OpenPropCommand","open box failue:"+t.status)},t}(rc),lE=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.BreakPetGhostSoulCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"分解精魂",awards:n,desc:""})}},t}(rc),hE=function(e){function t(){this.key2item=null,this.back2Items=null,this._packInited=!1,t.__super.call(this,"GoodsProxy"),this.key2item=new uo,this.back2Items=new uo}o(t,"modules.goods.model.GoodsProxy",e);var i=t.prototype;return i.reset=function(){t._requestInit=!1,this.key2item.clear(),this.back2Items.clear(),this._packInited=!1},i.getPackMaxSize=function(e){return 0==e?1e3:2==e?9:5==e?5:1e3},i.receiveItems=function(e){var t=new go;this._packInited=!0;var i;for(var n in e)if(i=e[n],null!=i){var o=this.getItemById(i.id,i.goodsType);if(null==o){if(o=this.buildBackGoods(i),null==o)continue;this.moveItemPackIndex(o,i.backpack,i.index,!0)}else t.add(i.backpack),i.baseId>0&&i.baseId!=o.baseId&&(o.baseId=i.baseId),i.attrs&&o.updateAttr(i.attrs),o.count=i.count,o.binding=i.binding,o.quality=i.quality,o.discardTime=i.discardTime,o.reason=i.reason,o.expiration=i.expiration,o.trading=i.trading,this.moveItemPackIndex(o,i.backpack,i.index,!1);t.add(o.backpack);var s=Mn.buildKey(o.id,o.goodsType);this.key2item.set(s,o)}return t.contain(5)&&this.checkBoxRedPoint(),t},i.checkBoxRedPoint=function(){var e,t=!1,i=!1,n=!1;for(var o in this.listItems(5))if(e=this.listItems(5)[o],e&&e.count>0)if(e.expiration){if(g.clock.currentTime>=e.expiration){t=!0;break}i=!0}else n=!0;var s=Ng.userVO.getValue(1012),r=On.queryGoldNeedLevel(s);n||t||Ng.userVO.getValue(1006)>=r?this.sendNotification("BAGPACK_HAS_BOX_READY",!0):this.sendNotification("BAGPACK_HAS_BOX_READY",!1)},i.buildBackGoods=function(e){var t=null;switch(e.goodsType){case 0:t=new ld(e);break;case 6:t=new ad(e);break;case 1:t=new rd(e);break;case 12:t=new cd(e);break;case 14:t=new hd(e);break;default:as.error(this,"buildBackGoods","类型不匹配type:"+e.goodsType)}return t},i.changeGoods=function(e,t,i){if(t){var n=this.back2Items.get(e);if(null==n){var o=this.getPackMaxSize(e);n=new Array(o),this.back2Items.set(e,n)}else for(var s=0;s<n.length;s++)n[s]=null}return this.receiveItems(i)},i.changeCount=function(e){var t,i=new go;for(var n in e)if(t=e[n],null!=t){var o=this.getItemById(t.id,t.goodsType);null!=o?(o.count=t.count,i.add(o.backpack)):as.error(this,"changeCount","找不到更新目标")}return i},i.updateItemsSimple=function(e){var t,i=new go;for(var n in e)if(t=e[n],null!=t){var o=this.getItemById(t.id,t.goodsType);if(null==o){if(o=this.buildBackGoods(t),null==o){as.error(this,"changeCount","找不到更新目标");continue}this.moveItemPackIndex(o,t.backpack,t.index,!0)}else o.count=t.count,i.add(o.backpack),this.moveItemPackIndex(o,t.backpack,t.index,!1);i.add(t.backpack)}return i},i.moveItemPackIndex=function(e,t,i,n){if(0!=n||e.backpack!=t){var o;o=this.listItems(e.backpack);var s,r=0;for(r=0;r<o.length;r++)s=o[r],s&&s.key==e.key&&(o[r]=null);o=this.listItems(t),e.backpack=t;var a=!1;for(r=0;r<o.length;r++)if(s=o[r],null==s){o[r]=e,a=!0;break}a||o.push(e)}},i.listItems=function(e){var t=this.back2Items.get(e);if(null==t){var i=this.getPackMaxSize(e);t=new Array(i),this.back2Items.set(e,t)}return t},i.findOnePropByBaseId=function(e){var t,i=this.listItems(0);for(var n in i)if(t=i[n],!(null==t||t.count<=0)&&0==t.goodsType&&t.baseId==e)return t;return null},i.findOnePropByType=function(e){var t,i=this.listItems(0);for(var n in i)if(t=i[n],!(null==t||t.count<=0)&&0==t.goodsType){var o=t;if(null==o.propConf)continue;if(o.propConf.propType==e)return o}return null},i.getItemById=function(e,t){var i=Mn.buildKey(e,t);return this.key2item.get(i)},i.getDressedEquipByType=function(e){var t=this.listItems(2);if(null==t||t.length<=0);else{var i;for(var n in t)if(i=t[n],i instanceof modules.goods.model.data.PackEquip&&i.equipConf.position==e)return i}return null},i.queryProp=function(e){var t=null,i=this.facade.retrieveProxy("GoodsProxy"),n=i.listItems(0);new A;var o;for(var s in n)if(o=n[s],o&&o.baseId==e){t=o;break}return t},s(0,i,"packInited",function(){return this._packInited}),t.requestInit=function(){0==t._requestInit&&(bu.instance.list(0),bu.instance.list(2),bu.instance.list(5),t._requestInit=!0)},t.NAME="GoodsProxy",t._requestInit=!1,t}(sc),cE=function(e){function t(){t.__super.call(this)}o(t,"modules.goods.controller.commands.ChangePetFoodCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);switch(t.cmd){case 14:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"合成高级魔核",awards:n,desc:""});break;case 15:this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"分解高级魔核",awards:n,desc:""})}}else as.debug(this,"OpenPropCommand","open box failue:"+t.status)},t}(rc),uE=function(e){function t(){t.__super.call(this)}o(t,"modules.guard.controller.GuardPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Bn.GUARD_QUERY,dE),this.facade.registerCommand(Bn.GUARD_FRESH,dE,!0),this.facade.registerCommand(Bn.GUARD_CHG_POS,dE,!0),this.facade.registerCommand(Bn.GUARD_TAKE_DONATE,dE,!0),this.facade.registerCommand(Bn.GUARD_ABANDON,dE,!0),this.facade.registerCommand(Bn.GUARD_CHG_ROBAT,dE,!0),this.facade.registerCommand(Bn.GUARD_CATCH_FIGHT,dE,!0),this.facade.registerCommand(Bn.GUARD_REVOLT_FIGHT,dE,!0)},t}(rc),dE=function(e){function t(){t.__super.call(this)}o(t,"modules.guard.controller.commands.GuardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 1:case 2:case 5:case 7:case 8:this.sendNotification("RECEIVE_GUARD_INFO",this.chgInfo(t));break;case 3:this.sendNotification("RECEIVE_GUARD_INFO",this.chgInfo(t)),this.sendNotification("SHOW_FIGHT_PAGE_OTHER","抓捕护卫",17);break;case 4:this.sendNotification("RECEIVE_GUARD_INFO",this.chgInfo(t)),this.sendNotification("SHOW_FIGHT_PAGE_OTHER","反抗家主",17);break;case 6:var i=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),n=Te.value(i);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"领取进贡成功",awards:n,desc:""})}else this.sendNotification("prompted_info_show",{info:"操作失败请稍后再试"})},i.chgInfo=function(e){var t=this.facade.retrieveProxy("GuardProxy"),i=v.protoCodec.getResponseDecoder().decode("PlayerGuard",e.value);return t.receive(i)},t}(rc),pE=function(e){function t(){t.__super.call(this,"GuardProxy")}o(t,"modules.guard.model.GuardProxy",e);var i=t.prototype;return i.receive=function(e){return this.data=e,this.data},s(0,i,"info",function(){return this.data}),t.NAME="GuardProxy",t}(sc),fE=function(e){function t(){t.__super.call(this,"CommAwardMediator")}o(t,"modules.goods.view.CommAwardMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new ML)},i.listNotificationInterests=function(){return["POP_COMMON_AWARDS_INFO","POP_COMMON_AWARDS_INFO_SIMPLE"]},i.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case"POP_COMMON_AWARDS_INFO":this.view.popAwards(t.title,t.awards,t.desc);break;case"POP_COMMON_AWARDS_INFO_SIMPLE":this.view.popAwardsSimple(t.title,t.html)}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="CommAwardMediator",t}(lc),_E=function(e){function t(){t.__super.call(this)}o(t,"modules.setting.controller.SettingPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Fn.SETTING_QUERY,gE),this.facade.registerCommand(Fn.SETTING_UPDATE,vE,!0),this.facade.registerCommand(Fn.SETTING_QUERY_HANG_SKILL,gE,!0),this.facade.registerCommand(Fn.SETTING_UPDATE_HANG_SKILL,vE,!0)},t}(rc),mE=function(e){function t(){t.__super.call(this,"SettingProxy",new Gn)}o(t,"modules.setting.model.SettingProxy",e);var i=t.prototype;return i.receive=function(e){if(this.vo.autoOpenBoxQuality=0,this.vo.autoSaleSpQuality=0,this.vo.autoSaleCmQuality=0,this.vo.skillOnlyHang=0,this.vo.tasktopshow=!0,this.vo.autoBreakPetEquip=0,null!=e&&""!=e){var t=e.split("_");t.length>=1&&(this.vo.autoOpenBoxQuality=vo["int"](t[0])),t.length>=2&&(this.vo.autoSaleSpQuality=vo["int"](t[1])),t.length>=3&&(this.vo.autoSaleCmQuality=vo["int"](t[2])),t.length>=4&&(this.vo.skillOnlyHang=vo["int"](t[3])),t.length>=5&&(this.vo.tasktopshow="1"==t[4]),t.length>=6&&(this.vo.autoBreakPetEquip=vo["int"](t[5]))}return this.vo},i.receiveHangSkills=function(e){if(this.vo.skillDisableDic.clear(),null!=e){var t,i=e.split("_");for(var n in i)t=i[n],this.vo.skillDisableDic.add(vo["int"](t))}return this.vo},s(0,i,"vo",function(){return this.data}),t.NAME="SettingProxy",t}(sc),gE=function(e){function t(){t.__super.call(this)}o(t,"modules.setting.controller.commands.SettingQueryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n,o=v.protoCodec.getResponseDecoder().decodeString(t.value),s=this.facade.retrieveProxy("SettingProxy");switch(t.cmd){case 1:n="1",i=s.receive(o);break;case 3:n="4",i=s.receiveHangSkills(o)}this.sendNotification("RECEIVE_SETTING_INFO",i,n)}},t}(rc),vE=function(e){function t(){t.__super.call(this)}o(t,"modules.setting.controller.commands.SettingUpdateCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i,n,o=v.protoCodec.getResponseDecoder().decodeString(t.value),s=this.facade.retrieveProxy("SettingProxy");switch(t.cmd){case 2:n="1",i=s.receive(o),this.sendNotification("prompted_info_show",{info:"游戏设置成功"});break;case 4:n="4",i=s.receiveHangSkills(o),this.sendNotification("prompted_info_show",{info:"技能设置成功，下轮战斗生效"})}this.sendNotification("SETTING_SUCCESS",i,n)}},t}(rc),yE=function(e){function t(){this._guardPoolPage=null,this._vo=null,this._robatIndex=0,t.__super.call(this,"GuardMediator")}o(t,"modules.guard.view.GuardMediator",e);var n=t.prototype;return n.initViewComponent=function(){var e=new kL;e.members.renderHandler=new h(this,this.onMbRender),e.members.mouseEnabled=!0,e.members.mouseHandler=new h(this,this.onMemberClick),e.btnRevolt.clickHandler=new h(this,this.onRevlot),e.takeDonate.clickHandler=new h(this,this.onTakeDonate),e.hostName.on("click",this,this.lookHost),this.setViewComponent(e),this._guardPoolPage=new DL,this._guardPoolPage.btnFresh.clickHandler=new h(this,this.onFresh),this._guardPoolPage.btnTake.clickHandler=new h(this,this.onCatche),this._guardPoolPage.btnRobat.clickHandler=new h(this,this.onRobat)},n.listNotificationInterests=function(){return["OPEN_GUARD_PAGE","RECEIVE_GUARD_INFO"]},n.handleNotification=function(e){switch(e.getName()){case"OPEN_GUARD_PAGE":Eu.instance.query(!1),this.view.popup();break;case"RECEIVE_GUARD_INFO":this.showInfo(e.getBody()),this._guardPoolPage.isPopup&&this._guardPoolPage.showInfo(this._vo)}},n.showInfo=function(e){if(this._vo=e,null!=this._vo){if(e.host){var t=this.view.hostName.x;this.view.hostName.text=e.host.name,this.view.hostName.underline=!0,this.view.hostName.mouseEnabled=!0,this.view.hostName.color="#fffc00",t+=this.view.hostName.width,this.view.hostVip.visible=!0,this.view.hostVip.x=t,t+=this.view.hostVip.width-5,this.view.hostNature.index=e.host.nature-1,this.view.hostNature.x=t,t+=this.view.hostNature.width,this.view.hostLevel.text="Lv."+e.host.level,this.view.hostLevel.x=t,this.view.hostNature.visible=!0,this.view.hostLevel.visible=!0,this.view.hostHalo.text="攻击+"+e.hostHalo[0]+"\n防御+"+e.hostHalo[1]+"\n生命+"+e.hostHalo[2]+"\n法力+"+e.hostHalo[3],this.view.hostHalo.color="#00dc24",this.view.btnRevolt.visible=!0,this.onClock(),this._vo.revoltCd>g.clock.currentTime?i.timer.loop(1e3,this,this.onClock):i.timer.clear(this,this.onClock)}else this.view.hostName.text="无",this.view.hostName.underline=!1,this.view.hostName.mouseEnabled=!1,this.view.hostName.color="#b0bcb0",this.view.hostVip.visible=!1,this.view.hostNature.visible=!1,this.view.hostLevel.visible=!1,this.view.hostHalo.text="未激活",this.view.hostHalo.color="#b0bcb0",this.view.btnRevolt.visible=!1,this.onClock(),i.timer.clear(this,this.onClock);this.view.members.dataSource=e.team;var n=0;e.guardA&&(n+=e.guardA.donate),e.guardB&&(n+=e.guardB.donate),this.view.donate.text="护卫进贡天籁石碎片宝箱："+n,n>0?this.view.donate.color="#00dc24":this.view.donate.color="#ffffff"}},n.onMbRender=function(e,t){var i,n=e.dataSource,o=e.getChildByName("title"),s=e.getChildByName("btnJoin"),r=e.getChildByName("btnChg"),a=0,l=0,h=0,c=0,u=0;switch(n){case 0:o.text="",i=Ng.userVO.getValue(1002),l=Ng.userVO.getValue(1006),h=Ng.userVO.getValue(1004),a=Ng.userVO.unitId.id,s.visible=!1,r.visible=!1;break;case 1:o.text="【护卫一】",this._vo.guardA?(i=this._vo.guardA.name,l=this._vo.guardA.level,0>=l&&this._vo.guardA.id<0&&(l=Vn.getRobatLevel(Ng.userVO.getValue(1006))),h=this._vo.guardA.nature,c=this._vo.guardA.donate,u=this._vo.guardA.extVip,a=this._vo.guardA.id,s.visible=!1,r.visible=!0):(s.visible=!0,r.visible=!1);break;case 2:o.text="【护卫二】",this._vo.guardB?(i=this._vo.guardB.name,l=this._vo.guardB.level,0>=l&&this._vo.guardB.id<0&&(l=Vn.getRobatLevel(Ng.userVO.getValue(1006))),h=this._vo.guardB.nature,c=this._vo.guardB.donate,u=this._vo.guardB.extVip,a=this._vo.guardB.id,s.visible=!1,r.visible=!0):(s.visible=!0,r.visible=!1)}var d=e.getChildByName("name"),p=e.getChildByName("vip"),f=e.getChildByName("nature"),_=e.getChildByName("level"),m=e.getChildByName("donate"),v=e.getChildByName("look");if(0==a)d.text="未招募",d.color="#ffffff",p.visible=!1,f.index=-1,_.text="",m.text="",v.visible=!1;else{d.text=i;var y=d.x+d.width;0==n?(d.color="#00dc24",m.text="",v.visible=!0):0>a?(d.color="#E0FFFF",m.text="",v.visible=!1,s.visible=!0,r.visible=!0):(d.color="#0084ff",m.text="进贡天籁石碎片宝箱："+c,c>0?m.color="#00dc24":m.color="#ffffff",v.visible=!0),u>g.clock.currentTime?(p.visible=!0,p.x=y,y+=p.width-5):p.visible=!1,f.index=h-1,f.x=y,y+=f.width,_.text="Lv."+l,_.x=y}var b=e.getChildByName("btnUp"),E=e.getChildByName("btnDown");switch(t){case 0:b.visible=!1,E.visible=!0;break;case 1:b.visible=!0,E.visible=!0;break;case 2:b.visible=!0,E.visible=!1}},n.onMemberClick=function(e,t){if(null!=this._vo&&"click"==e.type){var i=this.view.members.getCell(t).dataSource,n=0,o=null;switch(i){case 0:n=-1;break;case 1:this._vo.guardA&&(o=this._vo.guardA,n=this._vo.guardA.id);break;case 2:this._vo.guardB&&(o=this._vo.guardB,n=this._vo.guardB.id)}switch(e.target.name){case"btnJoin":Eu.instance.query(!0),this._guardPoolPage.showInfo(this._vo),this._robatIndex=i,this._guardPoolPage.popup();break;case"btnChg":if(0>n)Eu.instance.addRobat(i,0);else{var s="<br><font color='#e70626'>解雇后该护卫进贡物品将清空</font><br>新的护卫需要重新抓捕";this.sendNotification("POP_CONFIRM_INFO",{info:s,"double":"确认请输入 ‘解雇’",handler:h.create(this,function(e,t){e&&"解雇"==t&&Eu.instance.abandon(n)})},"dubleinput")}break;case"look":0>n?this.sendNotification("ROLE_VIEW"):null!=o&&this.sendNotification("SHOW_LOOK_PAGE",{playerId:o.id,name:o.name,nature:o.nature,level:o.level});break;case"btnUp":this._chgPos(t,!0);break;case"btnDown":this._chgPos(t,!1)}}},n.lookHost=function(){if(null!=this._vo&&null!=this._vo.host){var e=this._vo.host;this.sendNotification("SHOW_LOOK_PAGE",{playerId:e.id,name:e.name,nature:e.nature,level:e.level})}},n._chgPos=function(e,t){if(null!=this._vo){var i,n=[];for(var o in this._vo.team)i=this._vo.team[o],n.push(i);var s=0;t?(s=n[e-1],n[e-1]=n[e],n[e]=s):(s=n[e+1],n[e+1]=n[e],n[e]=s),Eu.instance.changePos(n)}},n.onRevlot=function(){this._vo&&this._vo.host&&(this._vo.revoltCd>g.clock.currentTime?this.sendNotification("prompted_info_show",{info:"反抗冷却中"}):Eu.instance.revoltFight(this._vo.host.id))},n.onClock=function(){return this._vo&&this._vo.host&&this._vo.revoltCd>g.clock.currentTime?(ao.me.update(this._vo.revoltCd-g.clock.currentTime),void(this.view.revoltCd.text="反抗冷却时间："+ao.me.formatStringFullHour)):(this.view.revoltCd.text="",void i.timer.clear(this,this.onClock))},n.onTakeDonate=function(){var e=0;this._vo&&(this._vo.guardA&&(e+=this._vo.guardA.donate),this._vo.guardB&&(e+=this._vo.guardB.donate)),e>0?Eu.instance.takDonate():this.sendNotification("prompted_info_show",{info:"暂无进贡可领取"})},n.onFresh=function(){if(null!=this._vo){var e=this._vo.freshTime+216e5;if(e>g.clock.currentTime){if(Ng.userVO.getValue(1010)<10)return void this.sendNotification("prompted_info_show",{info:"提前刷新需要10元宝。"});this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='#fffc00'>10元宝</font>提前刷新吗？",handler:h.create(this,function(e,t){e&&Eu.instance.fresh(10)})})}else Eu.instance.fresh(0)}},n.onCatche=function(){null!=this._vo&&(null!=this._vo.guardA&&this._vo.guardB&&this.sendNotification("prompted_info_show",{info:"您的护卫已满"}),this._vo.catchCd>g.clock.currentTime?this.sendNotification("prompted_info_show",{info:"抓捕冷却中"}):null!=this._vo.guardTemp?Eu.instance.catchFight(this._vo.guardTemp.id):this.sendNotification("prompted_info_show",{info:"暂无可抓捕护卫"}))},n.onRobat=function(){null!=this._vo&&(Eu.instance.addRobat(this._robatIndex,this._guardPoolPage.typeNpc.selectedIndex+1),this._guardPoolPage.close())},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="GuardMediator",t}(lc),bE=function(e){function t(){t.__super.call(this)}o(t,"modules.achieve.controller.AchievePrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Hn.ACHIEVE_QUERY,xE),this.facade.registerCommand(Hn.ACHIEVE_GET_AWARD,xE,!0),this.facade.registerCommand(Hn.ACHIEVE_PUSH_ACHIEVE,xE)},t}(rc),EE=function(e){function t(){t.__super.call(this,"AchieveProxy",new Un)}o(t,"modules.achieve.model.AchieveProxy",e);var i=t.prototype;return i.recieve=function(e){return this.vo.update(e),this.vo},s(0,i,"vo",function(){return this.data}),t.NAME="AchieveProxy",t}(sc),xE=function(e){function t(){t.__super.call(this)}o(t,"modules.achieve.controller.commands.AchieveCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerAchieve",t.value),n=this.facade.retrieveProxy("AchieveProxy");2==t.cmd&&this.sendNotification("prompted_info_show",{info:"成就奖励领取成功",updateTime:1e3});var o=n.recieve(i);this.sendNotification("RECEIVE_ACHIEVE_INFO",o)}},t}(rc),SE=function(e){function t(){this._failCheckAgain=1,this._init=!1,this.waitingReg=!1,t.__super.call(this,"AdultMediator")}o(t,"modules.adult.view.AdultMediator",e);var n=t.prototype;return n.initViewComponent=function(){this.setViewComponent(new BL),this.view.btnSure.clickHandler=new h(this,this.onSure)},n.listNotificationInterests=function(){return["OPEN_ADULT_IDENTIFY","USER_INDULGE_CHANGE","CHECK_INDULGE_NOT_ADULT","USER_INIT","USER_NATURE_CHANGE","CLEAR_CACHE_DATA"]},n.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this.closeAndRemove(),this._init=!1,this.waitingReg=!1;break;case"OPEN_ADULT_IDENTIFY":this.view.popup(),"hard"!=v.INDULGE_TYPE&&1!=e.getBody()||(this.view.closeHandler=new h(this,this.onExit)),this.initCheck();break;case"USER_INDULGE_CHANGE":var t=Ng.userVO.getValue(1017);this.alertCheck(),t>0&&(this.sendNotification("prompted_info_show",{info:"实名认证状态更新"}),this.closeAndRemove());break;case"CHECK_INDULGE_NOT_ADULT":this.exitChild();break;case"USER_INIT":this._failCheckAgain=1,Ng.userVO.getValue(1004)>0&&i.timer.once(2e3,this,this.alertCheck);break;case"USER_NATURE_CHANGE":this.alertCheck()}},n.alertCheck=function(){var e=Ng.userVO.getValue(1017);if("none"!=v.INDULGE_TYPE)if(-1==e)this.sendNotification("prompted_info_show",{info:"实名认证审核中"}),this.sendCheck();else{if(-2==e)return this._failCheckAgain>0&&(this._failCheckAgain-=1,this.sendCheck()),void(this.view.closeHandler?this.alertVisiter():Ng.userVO.getValue(1004)>0&&1==Ng.userVO.getValue(1006)&&0==Ng.userVO.getValue(1007)&&this.alertVisiter());0==e?this.sendCheck():18>e&&(this.view.closeHandler?this.alertChild():Ng.userVO.getValue(1004)>0&&1==Ng.userVO.getValue(1006)&&0==Ng.userVO.getValue(1007)&&this.alertChild())}},n.alertChild=function(){var e=ro.newDate(g.clock.currentTime),t=e.getDay(),i=e.getHours(),n=!1;5!=t&&6!=t&&0!=t||(n=20==i);var o;return n?(o="<br>当前实名认证信息：未成年<br>根据国家《关于防止未成年人沉迷网络游戏的通知》规定:<br>&nbsp;&nbsp;1、未成年人（未满18周岁）玩家游戏时长不得超过1小时。<br>&nbsp;&nbsp;2、游戏时间仅限周五、周六、周日的20时至21时。<br>&nbsp;&nbsp;3、限制充值。<br>",this.sendNotification("POP_ALERT_INFO",{info:o,title:"实名认证提示",align:"left"})):(o="<br>当前实名认证信息：未成年<br>根据国家《关于防止未成年人沉迷网络游戏的通知》规定:<br>&nbsp;&nbsp;1、未成年人（未满18周岁）玩家可在周五、周六、周日的20时至21时游戏1小时。<br>&nbsp;&nbsp;当前时段限制游戏。<br>",this.sendNotification("POP_ALERT_INFO",{info:o,title:"实名认证提示",align:"left"},"timelimit"),Ts.removeItem("session_key"),Ts.removeItem("_sever_selectd"),Ts.setItem("_check_selectd","false")),n},n.alertVisiter=function(){var e,t=this;e="<br>当前实名认证信息：未实名<br>根据国家《关于防止未成年人沉迷网络游戏的通知》规定:<br>&nbsp;&nbsp;1、未实名玩家禁止登录游戏。<br>",this.sendNotification("POP_CONFIRM_INFO",{info:e,title:"实名认证提示",sureLb:"前往认证",cancelLb:"退出游戏",align:"left",handler:h.create(this,function(e){e?t.sendNotification("OPEN_ADULT_IDENTIFY"):(Ts.removeItem("session_key"),Ts.removeItem("_sever_selectd"),Ts.setItem("_check_selectd","false"),X.logout())})})},n.exitChild=function(){},n.onExit=function(){var e=this;this.sendNotification("POP_CONFIRM_INFO",{info:"未完成实名认证，游戏时间已到无法继续游戏，确认退出吗?",handler:h.create(this,function(t){if(t)if(T.IS_ON_MINI){var i=e.facade.retrieveProxy("UserProxy");0==lo.isNull(i)&&i.reset();var n=e.facade.retrieveProxy("GoodsProxy");0==lo.isNull(n)&&n.reset(),v.gameMain.onLoaded()}else v.gameMain.reLoaded();else e.view.popup()})})},n.initCheck=function(){if(!this._init)return this._init=!0,void(this.waitingReg&&(this.sendNotification("prompted_info_show",{info:"实名认证状态查询中"}),this.view.close()));var e=Ng.userVO.getValue(1017);-1==e&&this.sendCheck()},n.sendCheck=function(){if(T.IS_ON_MINI){var e=this;B.getHttp(X.INDULGE_CHECK,{openId:v.account},null,function(t){e.onHttp(t)},function(t){e.onHttpErr(null)})}else{var t=new Iu;t.on("complete",this,this.onHttp),t.on("error",this,this.onHttpErr),t.send(X.INDULGE_CHECK,"openId="+v.account,"post","json")}},n.onHttp=function(e){var t=0;if(X.INDULGE_IDNAME)if(0==e.state){var i=e.data;switch(i.rgt){case 1e3:this.sendNotification("prompted_info_show",{info:"当前游客模式，请尽快完成认证"});break;case 1001:this._updateAdult(-1);break;case 1002:return this.sendNotification("prompted_info_show",{info:"实名认证中"}),this.view.close(),this.waitingReg=!0,void this._updateAdult(-1);case 1003:return t=i.adt,void this._updateAdult(t);case 1004:Ng.userVO.getValue(1004)>0&&(this.sendNotification("prompted_info_show",{info:"实名认证失败，请确认身份证信息是否正确"}),this.sendNotification("OPEN_ADULT_IDENTIFY")),this._updateAdult(-2)}}else"info empty"==e.erro?(this.sendNotification("OPEN_ADULT_IDENTIFY"),this._updateAdult(-2)):this.sendNotification("prompted_info_show",{info:"信息校验错误，请确认实名内容是否准确,错误码："+e.erro});else 0==e.code?(t=e.data,this._updateAdult(t)):this.sendNotification("prompted_info_show",{info:"信息校验错误，请确认实名内容是否准确,错误码："+e.code})},n._updateAdult=function(e){var t=Ng.userVO.getValue(1017);if(t!=e&&Yc.instance.saveAdultState(e),e>0){this.sendNotification("prompted_info_show",{info:"实名认证成功"});var n=Ng.userVO.getValue(19002);return 0!=n&&Gc.instance.enterDungeon(n),this.closeAndRemove(),this.sendNotification("POP_CONFIRM_INFO","close"),void(18>e&&this.alertChild())}-1==e?-1==t&&i.timer.once(3e5,this,this.sendCheck):-2==e&&(this._init=!1,this.waitingReg=!1),this.view.popup()},n.onHttpErr=function(e){this.sendNotification("prompted_info_show",{info:"认证失败，请确稍后再试"});var t=Ng.userVO.getValue(1017);-1==t&&i.timer.once(3e5,this,this.sendCheck)},n.onSure=function(){var e=Ng.userVO.getValue(1017);if(-2!=e&&0!=e)return this.sendNotification("prompted_info_show",{info:"实名认证中"}),void this.view.close();var t=this.view.realname.text;if(null!=t){if(t=t.replace(/\s*/g,""),t.length<=0||t.length>6)return void this.sendNotification("prompted_info_show",{info:"名字格式有误，请确认"});var i=this.view.idcode.text;if(null!=i){if(i=i.replace(/\s*/g,""),null==i||18!=i.length)return void this.sendNotification("prompted_info_show",{info:"身份证格式有误，请确认"});if(i=i.toUpperCase(),T.IS_ON_MINI){var n=this,o={openId:v.account,name:t,idcode:i,devId:v.account};X.INDULGE_IDNAME&&(o.hd="1"),B.getHttp(X.INDULGE_IDENTIFY,o,null,function(e){n.onHttp(e)},function(e){n.onHttpErr(null)})}else{var s=new Iu;s.on("complete",this,this.onHttp),s.on("error",this,this.onHttpErr),X.INDULGE_IDNAME?s.send(X.INDULGE_IDENTIFY,"hd=1&openId="+v.account+"&name="+t+"&idcode="+i+"&devId="+v.account,"post","json"):s.send(X.INDULGE_IDENTIFY,"openId="+v.account+"&name="+t+"&idcode="+i+"&devId="+v.account,"post","json")}}}},n.closeAndRemove=function(){this.view.closeHandler=null,this.view.close()},s(0,n,"view",function(){return this.getViewComponent()}),t.NAME="AdultMediator",t}(lc),wE=function(e){function t(){t.__super.call(this)}o(t,"modules.activityweek.controller.ActivityWeekPrepCommand",e);var i=t.prototype;return i.execute=function(e){
this.facade.registerCommand(zn.ACTIVITY_WEEK_QUERY,IE),this.facade.registerCommand(zn.ACTIVITY_WEEK_TAKE_AWARD,IE,!0),this.facade.registerCommand(zn.ACTIVITY_WEEK_TAKE_AWARD_EX,IE,!0),this.facade.registerCommand(zn.ACTIVITY_WEEK_TAKE_FAST_CHG,IE,!0)},t}(rc),CE=function(e){function t(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,t.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}o(t,"laya.d3.core.ComponentNode",e);var i=t.prototype;return i.addComponent=function(e){var t,i=this._componentsMap.indexOf(e);if(-1===i)t=[],this._componentsMap.push(e),this._typeComponentsIndices.push(t);else if(t=this._typeComponentsIndices[i],this._components[t[0]].isSingleton)throw new Error("无法单实例创建"+e+"组件，"+e+"组件已存在！");var n=Ur.getInstance(e);return t.push(this._components.length),this._components.push(n),n instanceof laya.d3.component.Script&&this._scripts.push(n),n._initialize(this),n},i._removeComponent=function(e,t){var i=this._typeComponentsIndices[e],n=i[t],o=this._components[n];this._components.splice(n,1),o instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(o),1),i.splice(t,1),0===i.length&&(this._typeComponentsIndices.splice(e,1),this._componentsMap.splice(e,1));for(var s=0,r=this._componentsMap.length;r>s;s++){i=this._typeComponentsIndices[s];for(var a=i.length-1;a>=0;a--){var l=i[a];if(!(l>n))break;i[a]=--l}}o._destroy()},i.getComponentByType=function(e,t){void 0===t&&(t=0);var i=this._componentsMap.indexOf(e);return-1===i?null:this._components[this._typeComponentsIndices[i][t]]},i.getComponentsByType=function(e,t){var i=this._componentsMap.indexOf(e);if(-1===i)return void(t.length=0);var n=this._typeComponentsIndices[i],o=n.length;t.length=o;for(var s=0;o>s;s++)t[s]=this._components[n[s]]},i.getComponentByIndex=function(e){return this._components[e]},i.removeComponentByType=function(e,t){void 0===t&&(t=0);var i=this._componentsMap.indexOf(e);-1!==i&&this._removeComponent(i,t)},i.removeComponentsByType=function(e){var t=this._componentsMap.indexOf(e);if(-1!==t)for(var i=this._typeComponentsIndices[t],n=0,o=i.length;o>n;i.length<o?o--:n++)this._removeComponent(t,n)},i.removeAllComponent=function(){for(var e=0,t=this._componentsMap.length;t>e;this._componentsMap.length<t?t--:e++)this.removeComponentsByType(this._componentsMap[e])},i._updateComponents=function(e){for(var t=0,i=this._components.length;i>t;t++){var n=this._components[t];!n.started&&(n._start(e),n.started=!0),n.enable&&n._update(e)}},i._lateUpdateComponents=function(e){for(var t=0;t<this._components.length;t++){var i=this._components[t];!i.started&&(i._start(e),i.started=!0),i.enable&&i._lateUpdate(e)}},i._preRenderUpdateComponents=function(e){for(var t=0;t<this._components.length;t++){var i=this._components[t];!i.started&&(i._start(e),i.started=!0),i.enable&&i._preRenderUpdate(e)}},i._postRenderUpdateComponents=function(e){for(var t=0;t<this._components.length;t++){var i=this._components[t];!i.started&&(i._start(e),i.started=!0),i.enable&&i._postRenderUpdate(e)}},t}(oc),TE=function(e){function t(){this.leftDay=0,this.nowDay=0,this.minIdCanAward=-1,this.maxIdAwarded=-1,t.__super.call(this,"ActivityWeekPropxy")}o(t,"modules.activityweek.model.ActivityWeekPropxy",e);var i=t.prototype;return i.setData=function(t){if(e.prototype.setData.call(this,t),this.leftDay=0,this.nowDay=7,null!=t){var i=this.weekdata.begin+6048e5-g.clock.currentTime;this.leftDay=vo["int"](i/864e5),this.nowDay=7-this.leftDay,this._dealTemp()}},i.getActTypeObj=function(){return 1==this.weekdata.type?g.database.getJsonObj("activityTianNai"):2==this.weekdata.type?g.database.getJsonObj("activityLingshi"):3==this.weekdata.type?g.database.getJsonObj("activityLingzhu"):4==this.weekdata.type?g.database.getJsonObj("activityHufu"):null},i.isActiving=function(){if(null==this.data)return!1;var e=this.weekdata.begin+6048e5-g.clock.currentTime;return!(0>=e)},i.getActEndTime=function(){var e="活动剩余：";return this.leftDay>0?e=e+this.leftDay+"天":e+="最后一天(23点59分结束)",e},i.isLocTypeChg=function(){if(null==this.data)return!1;var e=Ts.getItem("_KEY_LASTWEEK_TYPE");return null==e||e!=String(this.weekdata.type)},i.updateLocType=function(){null!=this.data&&Ts.setItem("_KEY_LASTWEEK_TYPE",String(this.weekdata.type))},i.hasAward=function(){if(null==this.data)return!1;var e=this.weekdata.begin+6048e5-g.clock.currentTime;if(0>=e)return!1;var t=this.getActTypeObj();if(t)for(var i=0;i<t.data.length;i++){var n=t.data[i];if(!(this.weekdata.point>=n.score))return!1;if(-1==this.weekdata.awardedIds.indexOf(n.id))return!0}return!1},i.finishAll=function(){return null==this.data?!1:null!=this.weekdata&&null!=this.weekdata.awardedIds&&this.weekdata.awardedIds.length>=9},i._dealTemp=function(){this.minIdCanAward=-1,this.maxIdAwarded=-1;var e=this.getActTypeObj();if(e)for(var t=0;t<e.data.length;t++){var i=e.data[t];-1==this.weekdata.awardedIds.indexOf(i.id)?-1==this.minIdCanAward&&this.weekdata.point>=i.score&&(this.minIdCanAward=i.id):this.maxIdAwarded=i.id}},s(0,i,"weekdata",function(){return this.data}),t.NAME="ActivityWeekPropxy",t._KEY_LASTWEEK_TYPE="_KEY_LASTWEEK_TYPE",t}(sc),IE=function(e){function t(){t.__super.call(this)}o(t,"modules.activityweek.controller.commands.ActivityWeekCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 1:case 4:var i=v.protoCodec.getResponseDecoder().decode("Activity7DayEx",t.value),n=this.facade.retrieveProxy("ActivityWeekPropxy");n.setData(i),this.sendNotification("ACTIVIT_WEEK_INFO");break;case 2:this.showAward(t,"奖励领取成功");break;case 3:this.showAward(t,"购买成功")}else 1==t.cmd&&this.sendNotification("ACTIVIT_WEEK_INFO")},i.showAward=function(e,t){var i=v.protoCodec.getResponseDecoder().decode("FightAwards",e.value),n=Te.value(i);n.isEmpty?this.sendNotification("prompted_info_show",{info:t}):this.sendNotification("POP_COMMON_AWARDS_INFO",{title:t,awards:n,desc:""})},t}(rc),AE=function(e){function t(){this._requested=!1,this.indulge=-1,this._info=null,this._boxAlertStr=["无","白色","蓝色","绿色","黄色","红色","紫色"],t.__super.call(this,"SettingMediator")}o(t,"modules.setting.view.SettingMediator",e);var i=t.prototype;return i.initViewComponent=function(){if(this.setViewComponent(new wL),this.view.boxQuality.labels="无,绿色,黄色,红色,紫色",this.view.spQuality.labels="无,绿色,黄色,红色",this.view.cmQuality.labels="无,白色,蓝色,绿色,黄色,红色",this.view.boxQuality.selectedIndex=0,this.view.spQuality.selectedIndex=0,this.view.cmQuality.selectedIndex=0,this.view.peQuality.selectedIndex=0,this.view.btnSubmit.clickHandler=new h(this,this.onSubmit),this.view.btnLogout.clickHandler=new h(this,this.onLogout),this.view.skillSetting.renderHandler=new h(this,this.onRenderSkill),this.view.btnHelp.clickHandler=new h(this,this.onHelp),this.view.btnStrong.clickHandler=new h(this,this.onStrong),(Q.isLaya()||Or.onQQMiniGame||Or.onMiniGame)&&(this.view.btnzcxy.visible=!0,this.view.btnysxy.visible=!0),this.view.btnzcxy.clickHandler=new h(this,this.onzcxy),this.view.btnysxy.clickHandler=new h(this,this.onysxy),this.view.closeHandler=new h(this,this.onClose),"none"!=v.INDULGE_TYPE?(this.view.btnIdentify.clickHandler=new h(this,this.onAdult),this.view.btnStrong.y=this.view.btnHelp.y):(this.view.btnIdentify.visible=!1,this.view.btnStrong.y=this.view.btnSubmit.y),(T.IS_ON_MINI||Or.onIOS)&&(this.view.btnStrong.visible=!1,this.view.btnIdentify.visible=!1,this.view.btnHelp.visible=!1),this.view.btnVisitBind.clickHandler=new h(this,this.onVisitBind),Or.onQGMiniGame||"oppo"==X.FLAVOR){this.view.cbMusic.clickHandler=new h(this,this.onMusic);var e=Ts.getItem("_KEY_MUSIC_STAT");lo.isNull(e)&&(e="true"),this.view.cbMusic.selected="true"==e,this.onMusic(),this.view.cbMusic.visible=!0}else this.view.cbMusic.visible=!1},i.onMusic=function(){this.view.cbMusic.selected?(Ts.setItem("_KEY_MUSIC_STAT","true"),Or.onQGMiniGame&&Y.playMusic("https://res.mudgj.com/hmov/bg.mp3"),"oppo"==X.FLAVOR&&jh.playMusic("https://res.mudgj.com/hmov/bg.mp3")):(Ts.setItem("_KEY_MUSIC_STAT","false"),Or.onQGMiniGame&&Y.stopAll(),"oppo"==X.FLAVOR&&jh.stopAll())},i.listNotificationInterests=function(){return["USER_INIT","USER_NATURE_CHANGE","OPEN_SETTING_VIEW","SETTING_SUCCESS","RECEIVE_SETTING_INFO","USER_INDULGE_CHANGE","VISITOR_BIND_CHG"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":0==this._requested,this.checkAdult();case"USER_NATURE_CHANGE":var t=Ng.userVO.getValue(1004);this.view.skillSetting.dataSource=ze.getBaseSkills(t);break;case"OPEN_SETTING_VIEW":this.view.popup(),0==this._requested&&(Su.instance.query(),this._requested=!0),0!=this.indulge&&-2!=this.indulge||this.onAdult(),Ng.userVO.getValue(1006)<50?(this.view.cmQuality.visible=!1,this.view.lbCm.visible=!1):(this.view.cmQuality.visible=!0,this.view.lbCm.visible=!0),Ng.userVO.getValue(1006)<100?(this.view.peQuality.visible=!1,this.view.lbPe.visible=!1):(this.view.peQuality.visible=!0,this.view.lbPe.visible=!0),this.view.btnVisitBind.visible=X.IS_VISITOR;break;case"RECEIVE_SETTING_INFO":case"SETTING_SUCCESS":this._info=e.getBody(),"1"==e.getType()?(this.view.boxQuality.selectedIndex=this.quality2index(this._info.autoOpenBoxQuality),this.view.spQuality.selectedIndex=this.quality2index(this._info.autoSaleSpQuality),this.view.cmQuality.selectedIndex=this._info.autoSaleCmQuality,this.view.ckOnlyHang.selected=this._info.skillOnlyHang):this.view.skillSetting.refresh();break;case"USER_INDULGE_CHANGE":this.checkAdult();break;case"VISITOR_BIND_CHG":this.view.btnVisitBind.visible=X.IS_VISITOR}},i.checkAdult=function(){"none"!=v.INDULGE_TYPE&&(this.indulge=Ng.userVO.getValue(1017),this.indulge<=0?(this.view.btnIdentify.visible=!0,this.view.btnStrong.y=this.view.btnHelp.y):(this.view.btnIdentify.visible=!1,this.view.btnStrong.y=this.view.btnSubmit.y))},i.onAdult=function(){return-1==this.indulge?void this.sendNotification("POP_ALERT_INFO",{info:"实名认证已提交，正在审核中，请稍耐心待。"}):void this.sendNotification("OPEN_ADULT_IDENTIFY")},i.onVisitBind=function(){this.view.close(),this.sendNotification("OPEN_VISITOR_BINDING_PAGE")},i.onRenderSkill=function(e,t){var i=e.dataSource,n=g.database.getData("skill",i),o=e;o.label=n.name,this._info&&(o.selected=this._info.skillDisableDic.contain(i))},i.onSubmit=function(){if(null!=this._info){if(this.hasChangeBox()){var e=this.index2quality(this.view.boxQuality.selectedIndex),t=this.index2quality(this.view.spQuality.selectedIndex),i=this.view.cmQuality.selectedIndex,n=this.view.ckOnlyHang.selected?1:0,o=this.view.peQuality.selectedIndex;this._info.autoOpenBoxQuality=e,this._info.autoSaleSpQuality=t,this._info.autoSaleCmQuality=i,this._info.skillOnlyHang=n,this._info.autoBreakPetEquip=o,Su.instance.update(this._info)}this.hasChangeSkill()&&this._checkSkillSave()}},i.index2quality=function(e){return e>0?e+2:0},i.quality2index=function(e){return e>=3?e-2:0},i.hasChangeBox=function(){return null==this._info?!1:this._info.autoOpenBoxQuality!=this.index2quality(this.view.boxQuality.selectedIndex)||this._info.autoSaleSpQuality!=this.index2quality(this.view.spQuality.selectedIndex)||this._info.autoSaleCmQuality!=this.view.cmQuality.selectedIndex||this._info.skillOnlyHang!=(this.view.ckOnlyHang.selected?1:0)||this._info.autoBreakPetEquip!=this.view.peQuality.selectedIndex},i.hasChangeSkill=function(){if(null==this._info)return!1;var e;for(var t in this.view.skillSetting.cells){e=this.view.skillSetting.cells[t];var i=e.dataSource;if(e.selected){if(!this._info.skillDisableDic.contain(i))return!0}else if(this._info.skillDisableDic.contain(i))return!0}return!1},i._checkSkillSave=function(){if(this.hasChangeSkill()){this._info.skillDisableDic.clear();var e;for(var t in this.view.skillSetting.cells){e=this.view.skillSetting.cells[t];var i=e.dataSource;e.selected&&this._info.skillDisableDic.add(i)}Su.instance.updateSkill(this._info)}},i.onClose=function(e){if("close"==e){var t=!1;this.hasChangeBox()&&(this.view.boxQuality.selectedIndex=this.quality2index(this._info.autoOpenBoxQuality),this.view.spQuality.selectedIndex=this.quality2index(this._info.autoSaleSpQuality),this.view.cmQuality.selectedIndex=this._info.autoSaleCmQuality,this.view.ckOnlyHang.selected=1==this._info.skillOnlyHang,this.view.peQuality.selectedIndex=this._info.autoBreakPetEquip,t=!0),this.hasChangeSkill()&&(this.view.skillSetting.refresh(),t=!0),t&&this.sendNotification("prompted_info_show",{info:"设置未确定，取消更改"})}},i.onLogout=function(){this.view.close(),Ts.removeItem("_sever_selectd"),X.logout(!0),this.sendNotification("prompted_info_show",{info:"您已离线,正在断开连接..."})},i.onHelp=function(){this.sendNotification("SHOW_HELP_PAGE")},i.onStrong=function(){this.sendNotification("SHOW_HELP_STRONG_PAGE")},i.onzcxy=function(){if("VIVO"==X.PLATE_FORM){var e="https://res.mudgj.com/yhxy.html";Q.isLaya()?Q.openWebview(e):nwei_sdk.popHelp(e)}else this.sendNotification("OPEN_AGREEMENT_PAGE","data/Agreement1.txt")},i.onysxy=function(){if("VIVO"==X.PLATE_FORM){var e="https://res.mudgj.com/ysxymg.html";Q.isLaya()?Q.openWebview(e):nwei_sdk.popHelp(e)}else this.sendNotification("OPEN_AGREEMENT_PAGE","data/Agreement2.txt")},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="SettingMediator",t._KEY_MUSIC_STAT="_KEY_MUSIC_STAT",t}(lc),NE=function(e){function t(){t.__super.call(this)}o(t,"modules.lottery.controller.LotteryPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Wn.LOTTERY_INFO,LE),this.facade.registerCommand(Wn.LOTTERY_DRAW,PE)},t}(rc),PE=function(e){function t(){t.__super.call(this)}o(t,"modules.lottery.controller.commands.LotteryAwardCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("LotteryRollDraw",t.value);this.sendNotification("RECEIVE_LOTTERY_DRAW",i)}},t}(rc),RE=function(e){function t(){this.leftDay=0,this.endDate=null,t.__super.call(this,"LotteryProxy",new Yn)}o(t,"modules.lottery.model.LotteryProxy",e);var i=t.prototype;return i.recieve=function(e){this.leftDay=0,this.info.update(e);var t=this.info.freshTime-3*ro.T_1D;if(this.endDate=ro.newDate(t),t>g.clock.currentTime){var i=ro.newDate(g.clock.currentTime);this.leftDay=ro.dateDiff(this.endDate,i)}return this.info},i.clear=function(){this.leftDay=0,this.endDate=null},i.getActEndTime=function(){var e="活动剩余：";return this.leftDay>0?e=e+this.leftDay+"天":e+="最后一天(23点59分结束)",e},i.getActEndTimeShort=function(){var e="活动剩余：";return this.leftDay>0?e=e+this.leftDay+"天":e+="最后一天",e},i.hasTime=function(){if(this.info){if(this.info.awards.size>=12)return!1;var e=qn.getDrawNeedGold(this.info.awards.size+1);return this.info.costGold>=e}return!1},i.isOpen=function(){return this.endDate&&this.endDate.getTime()>g.clock.currentTime},s(0,i,"info",function(){return this.data}),t.NAME="LotteryProxy",t}(sc),LE=function(e){function t(){t.__super.call(this)}o(t,"modules.lottery.controller.commands.LotteryCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerLotteryRoll",t.value),n=this.facade.retrieveProxy("LotteryProxy"),o=n.recieve(i);this.sendNotification("RECEIVE_PLAYER_LOTTERY",o)}},t}(rc),OE=function(e){function t(){t.__super.call(this,"AchieveMediator")}o(t,"modules.achieve.view.AchieveMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this.facade.retrieveMediator("TaskMediator");this.setViewComponent(e.view);var t=this.view.achieve.getChildByName("achieveList");t.mouseEnabled=!0,t.mouseHandler=new h(this,this.onAchieveClick);var i=this.view.achieve.getChildByName("btnOffTitle");i.clickHandler=new h(this,this.onTitleOff)},i.listNotificationInterests=function(){return["RECEIVE_ACHIEVE_INFO","USER_INIT","USER_DRESSED_TITLE_CHANGE","CLEAR_CACHE_DATA"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":wu.instance.query();break;case"RECEIVE_ACHIEVE_INFO":this.freshAchieve(e.getBody());break;case"USER_DRESSED_TITLE_CHANGE":this.freshForTitle();break;case"CLEAR_CACHE_DATA":}},i.freshForTitle=function(){var e=this.facade.retrieveProxy("AchieveProxy");this.view.freshAchieve(e.vo)},i.freshAchieve=function(e){this.view.freshAchieve(e)},i.onTitleOff=function(){var e=Ng.userVO.getValue(7006);wu.instance.dressTitle(e)},i.onAchieveClick=function(e,t){var i=this.view.achieve.getChildByName("achieveList");if("click"==e.type&&"btnAchieve"==e.target.name&&i.dataSource){var n,o=i.dataSource[t],s=o.vo;switch(o.state){case 0:n=g.database.getData("achieve",s.id-1),n&&wu.instance.dressTitle(n.id);break;case 1:wu.instance.getAward(s.id);break;case 2:wu.instance.dressTitle(s.id)}}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="AchieveMediator",t}(lc),ME=function(e){function t(){t.__super.call(this)}o(t,"modules.demon.controller.DemonPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Kn.DEMON_QUERY_MARKET,DE),this.facade.registerCommand(Kn.DEMON_MARKET_TAKE,DE,!0),this.facade.registerCommand(Kn.DEMON_BUILD_ONE,BE,!0),this.facade.registerCommand(Kn.DEMON_UPGRADE_ONE,BE,!0),this.facade.registerCommand(Kn.DEMON_DRESS,BE,!0)},t}(rc),DE=function(e){function t(){t.__super.call(this)}o(t,"modules.demon.controller.commands.PlayerDemonCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 1:var i=v.protoCodec.getResponseDecoder().decode("PlayerDemonMarket",t.value),n=this.facade.retrieveProxy("DemonProxy"),o=n.receive(i);this.sendNotification("RECEIVE_DEMON_MARKET_INFO",o);break;case 2:var s=v.protoCodec.getResponseDecoder().decode("FightAwards",t.value),r=Te.value(s);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"领取福利",awards:r,desc:""})}},t}(rc),kE=function(e){function t(){this._inited=!1,this._fastChgPage=null,t.__super.call(this,"ActivityWeekMediator")}o(t,"modules.activityweek.view.ActivityWeekMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new RL)},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","USER_INIT","ZERO_CLOCK_TRIGER","SHOW_ACTIVIT_WEEK_PAGE","ACTIVIT_WEEK_INFO"]},i.handleNotification=function(e){var t=this.facade.retrieveProxy("ActivityWeekPropxy");switch(e.getName()){case"CLEAR_CACHE_DATA":this._inited=!1,t.setData(null);break;case"ZERO_CLOCK_TRIGER":case"USER_INIT":Cu.instance.query();break;case"SHOW_ACTIVIT_WEEK_PAGE":this.vi.popup();var i=this.vi;i.showInfo(),t.isLocTypeChg()&&t.updateLocType(),this.checkFinishAll();break;case"ACTIVIT_WEEK_INFO":null!=t.weekdata&&this.vi&&(i=this.vi,i.showInfo()),this.checkFinishAll()}},i.checkFinishAll=function(){if(this.vi&&this.vi.isPopup){var e=this.facade.retrieveProxy("ActivityWeekPropxy");e.finishAll()?(null==this._fastChgPage&&(this._fastChgPage=new LL),this._fastChgPage.popup()):null!=this._fastChgPage&&this._fastChgPage.close()}},s(0,i,"vi",function(){return this.getViewComponent()}),t.NAME="ActivityWeekMediator",t}(lc),BE=function(e){function t(){t.__super.call(this)}o(t,"modules.demon.controller.commands.DemonOptCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success)switch(t.cmd){case 3:this.sendNotification("prompted_info_show",{info:"合成伏魔装备成功"}),this.sendNotification("RECEIVE_DEMON_UPGRADE");break;case 4:this.sendNotification("prompted_info_show",{info:"合成伏魔装备成功"}),this.sendNotification("RECEIVE_DEMON_UPGRADE");break;case 5:var i=v.protoCodec.getResponseDecoder().decode("ItemGoodsGroup",t.value),n=this.facade.retrieveProxy("GoodsProxy"),o=n.receiveItems(i.items);o.size>0&&this.sendNotification("FRESH_GOODS_PACK",o)}},t}(rc),VE=function(e){function t(){t.__super.call(this,"DemonProxy",new Qn)}o(t,"modules.demon.model.DemonProxy",e);var i=t.prototype;return i.receive=function(e){return this.info.update(e),this.info},s(0,i,"info",function(){return this.data}),t.NAME="DemonProxy",t}(sc),FE=function(e){function t(){this._drawObj=null,this.info=null,t.__super.call(this,"LotteryMediator")}o(t,"modules.lottery.view.LotteryMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new VL),this.view.items.renderHandler=new h(this,this.onRender),this.view.btnDraw.clickHandler=new h(this,this.onDraw),this.view.btnNtc.clickHandler=new h(this,this.onNotice)},i.listNotificationInterests=function(){return["OPEN_LOTTERY_PAGE","RECEIVE_PLAYER_LOTTERY","RECEIVE_LOTTERY_DRAW","USER_INIT","USER_LEVEL_CHANGE","ZERO_CLOCK_TRIGER"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_LOTTERY_PAGE":this.view.popup();break;case"RECEIVE_PLAYER_LOTTERY":this.showInfo(e.getBody()),this.sendNotification("UPDATA_HOME_LIST_ACT");break;case"RECEIVE_LOTTERY_DRAW":this.showDraw(e.getBody());break;case"USER_INIT":this.info=null;var t=this.facade.retrieveProxy("LotteryProxy");t.clear(),this.isInitedView()&&this.view.clear();case"ZERO_CLOCK_TRIGER":case"USER_LEVEL_CHANGE":Ng.userVO.getValue(1006)>=55&&Nu.instance.info()}},i.showDraw=function(e){this._drawObj=e,this.view.rollingTo(this._drawObj.awardId),this.view.btnDraw.visible=!1,this.view.once("complete",this,this.rollingEnd)},i.rollingEnd=function(){this.view.lightR.removeSelf();var e=Te.value(this._drawObj.award);this.sendNotification("POP_COMMON_AWARDS_INFO",{title:"转盘奖励",awards:e,desc:""});var t=this.facade.retrieveProxy("LotteryProxy"),i=t.recieve(this._drawObj.info);this.sendNotification("RECEIVE_PLAYER_LOTTERY",i),this.view.idle(this.info)},i.showInfo=function(e){this.view.lightR.removeSelf(),this.info=e;var t=this.facade.retrieveProxy("LotteryProxy");if(t&&t.info&&t.isOpen()){if(e.awards.size>=12)this.view.needGold.text="奖励已全部抽完",this.view.needGold.color="#e70626",this.view.btnDraw.visible=!1,this.view.nextLb.visible=!1,this.view.needGold.visible=!0,this.view.nextOne.visible=!1;else{var i=qn.getDrawNeedGold(e.awards.size+1);e.costGold>=i?(this.view.btnDraw.visible=!0,this.view.nextLb.visible=!1,this.view.needGold.visible=!1,this.view.nextOne.visible=!1):(this.view.btnDraw.visible=!1,this.view.nextLb.visible=!0,this.view.needGold.visible=!0,this.view.nextOne.visible=!0,this.view.needGold.text="再消耗"+(i-e.costGold)+"元宝",this.view.needGold.color="#fffc00")}this.view.nextLb1.visible=this.view.nextLb.visible,this.view.items.refresh(),this.view.endTime.text=t.getActEndTimeShort(),this.view.idle(e)}else this.view.close()},i.onRender=function(e,t){if(null!=this.info){var i=e.dataSource;if(0>=i)e.alpha=0;else{var n=qn.ITEMS[i-1],o=e.getChildByName("lbTitle");12==i?this.info?this.info.spAwardFull()?o.text="5000元宝":1==this.info.spAwardFlag?o.text="灵宠\n绝技":o.text="灵宠\n血脉":o.text="":o.text=n.name,o.color=n.color;var s=e.getChildByName("lbRate"),r=e.getChildByName("taked"),a=this.info&&this.info.awards.contain(i);a?(r.visible=!0,s.text=""):(r.visible=!1,s.text=vo.toFixedNum(100*n.rate/this.info._RBase)+"%概率");var l=e.getChildByName("mask1");l.visible=!0}}},i.onDraw=function(){if(!this.view.drawing){var e=this.facade.retrieveProxy("LotteryProxy");e&&e.info&&e.isOpen()&&(e.hasTime()?Nu.instance.draw(e.info.awards.size):this.sendNotification("prompted_info_show",{info:"您的抽奖励次数已用完，请获得次数后再试"}))}},i.onNotice=function(){this.sendNotification("POP_FUN_NOTICE",23)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="LotteryMediator",t}(lc),GE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.LookPrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand(Zn.LOOK_INFO,tx,!0),this.facade.registerCommand(Zn.LOOK_EQUIP,zE,!0),this.facade.registerCommand(Zn.LOOK_STAR,qE,!0),this.facade.registerCommand(Zn.LOOK_BONE,UE,!0),this.facade.registerCommand(Zn.LOOK_PET,HE,!0),this.facade.registerCommand(Zn.LOOK_CULTURE,YE,!0),this.facade.registerCommand(Zn.LOOK_BLOOD,ex,!0),this.facade.registerCommand(Zn.LOOK_HANDBOOK,$E,!0),this.facade.registerCommand(Zn.LOOK_PEARL,WE,!0),this.facade.registerCommand(Zn.LOOK_MERIDIAN,QE,!0),this.facade.registerCommand(Zn.LOOK_PET_EQUIP_INFO,ZE,!0)},t}(rc),HE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookPetCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("LookPet",t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.receivePet(i);this.sendNotification("LOOK_RECEIVE_PET",o)}else this.sendNotification("LOOK_RECEIVE_PET",null)},t}(rc),UE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookBoneCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("BoneInfo",t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.receiveBone(i);this.sendNotification("LOOK_RECEIVE_BONE",o)}else this.sendNotification("LOOK_RECEIVE_BONE",null)},t}(rc),zE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookEquipCommand",e);var i=t.prototype;return i.execute=function(e){var t,i=e.getBody(),n=this.facade.retrieveProxy("LookProxy");if(i.success){var o=v.protoCodec.getResponseDecoder().decode("ItemGoodsGroup",i.value);o&&(t=n.receiveEquips(o.items),this.sendNotification("LOOK_RECEIVE_EQUIPS",t))}else-10010==i.status&&(t=n.receiveEquips([]),this.sendNotification("LOOK_RECEIVE_EQUIPS",t))},t}(rc),WE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookPearlCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerPearl",t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.receivePearl(i);this.sendNotification("LOOK_RECEIVE_PEARL",o)}else this.sendNotification("LOOK_RECEIVE_PEARL",null)},t}(rc),YE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookCultureCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("CultureInfo",t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.receiveCulture(i);this.sendNotification("LOOK_RECEIVE_CULTURE",o)}else this.sendNotification("LOOK_RECEIVE_CULTURE",null)},t}(rc),qE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookStarCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeString(t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.recieveStar(i);this.sendNotification("LOOK_RECEIVE_STARS",o)}},t}(rc),KE=function(e){function t(){this._dresseds=null,this.propsCorrosion=null,t.__super.call(this,"DemonUpgradeMediator")}o(t,"modules.demon.view.DemonUpgradeMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new FL),this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onClick),this.view.list.scrollBar.hide=!0,this.view.tab.selectHandler=new h(this,this.onTab),this.view.btnNtc.visible=!1},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","OPEN_DEMON_MIX_PAGE","RECEIVE_DEMON_UPGRADE"]},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this.propsCorrosion=null,this._dresseds=null,this.view.close();break;case"OPEN_DEMON_MIX_PAGE":var t=this.facade.retrieveMediator("DemonDressMediator");this.showSelect(t.view.list.dataSource,e.getBody()),this.view.list.scrollBar.value=this.view.list.scrollBar.max,this.view.popup();break;case"RECEIVE_DEMON_UPGRADE":this.view.isPopup&&null!=this._dresseds&&this.showSelect(this._dresseds,this.view.tab.selectedIndex+1)}},i.getDreesed=function(e){return null!=this._dresseds?this._dresseds[e]:null},i.showSelect=function(e,t){this._dresseds=e,this.view.tab.selectedIndex=-1,this.view.tab.selectedIndex=t-1},i.onTab=function(e){if(-1!=e){var t,i=this.view.tab.selectedIndex+1,n=this.facade.retrieveProxy("GoodsProxy"),o=n.listItems(0),s=new uo,r=this.getDreesed(i),a=null!=r?r.demonConf.level:0;for(var l in o)if(t=o[l],!(null==t||t.count<=0))if(t instanceof modules.goods.model.data.PackDemon){var h=t;h.demonConf.position==e+1&&(s.set(h.demonConf.level,h),h.demonConf.level>a&&(a=h.demonConf.level))}else t instanceof modules.goods.model.data.PackProp&&500021==t.baseId&&(this.propsCorrosion=t);var c=[];if(0==a)c.push(1);else{a<Xo.MAX_LEVEL&&(a+=1);for(var u=1;a>=u;u++){var d=s.get(u);c.push(null!=d?d:u)}}this.view.list.dataSource=c}},i.onRender=function(e,t){if(null!=this.view.list.dataSource){var i=this.view.tab.selectedIndex+1,n=0,o=e.dataSource;n="number"==typeof o&&Math.floor(o)==o?o:o.demonConf.level;var s=this.facade.retrieveProxy("DungeonProxy"),r=!1;s.getDungeonLimitOpen()?(r=s.getDungeonLimitOpen().openLimit,e.visible=!0):e.visible=!1;var a=e.getChildByName("demon"),l=e.getChildByName("has"),h=this.getDreesed(i),c=null!=h&&h.demonConf.level==n;if(o instanceof modules.goods.model.data.PackDemon)Ln.renderDemon(a,o),a.alpha=1,l.text="持有："+(c?o.count+1:o.count)+"个";else if(c)Ln.renderDemon(a,h),a.alpha=1,l.text="持有：1个";else{var u=g.database.getDemon(i,n);Ln.renderDemonByCfg(a,u),a.alpha=.5,l.text="持有：0个"}var d=this.propsCorrosion?this.propsCorrosion.count:0,p=e.getChildByName("needProp"),f=e.getChildByName("needSilver"),_=e.getChildByName("needMet"),m=e.getChildByName("lbDress");m.visible=c;var v=g.database.getData("demonupgrade",n);if(null!=v?(p.text="腐蚀之精"+v.costProp+"/"+d,v.costProp>d?p.color="#e70626":p.color="#00dc24",f.text="消耗铜币"+v.costSilver):(p.text="已是最高级",f.text=""),0==t)_.text="";else if(null!=v){var y=0,b=this.view.list.dataSource[t-1];b&&b instanceof modules.goods.model.data.PackDemon&&(y+=b.count),h&&h.demonConf.level==n-1&&(y+=1),_.text="消耗"+(n-1)+"级"+Xn.getTypeNameFull(i)+"4/"+y,4>y?_.color="#e70626":_.color="#00dc24"}else _.text=""}},i.onClick=function(e,t){var i=this;if("click"==e.type&&"btnMix"==e.target.name){var n="true"==Ts.getItem("_DEMON_MIX_NO_CONFIRM"),o=this.view.tab.selectedIndex+1,s=this.propsCorrosion?this.propsCorrosion.count:0;if(0>=s)return void this.sendNotification("prompted_info_show",{info:"合成需要的【腐蚀之精】不足"});var r=null;if(0==t){if(r=g.database.getData("demonupgrade",1),s<r.costProp)return void this.sendNotification("prompted_info_show",{info:"合成需要的【腐蚀之精】不足"});n?Ou.instance.buildOne(this.propsCorrosion.id,o):this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(this.propsCorrosion.propConf.quality)+"'>【"+this.propsCorrosion.propConf.name+"】"+r.costProp+"个</font>，铜币"+r.costSilver+"<br><font color='#ffffff'>合成一个"+Xn.getTypeNameFull(o)+"</font>","double":"以后不再提示",handler:h.create(this,function(e,t){e&&(Ou.instance.buildOne(i.propsCorrosion.id,o),t&&Ts.setItem("_DEMON_MIX_NO_CONFIRM","true"))})},"doubleExt")}else{var a=0,l=this.view.list.getCell(t).dataSource;if(a="number"==typeof l&&Math.floor(l)==l?l:l.demonConf.level,r=g.database.getData("demonupgrade",a),null==r)return void this.sendNotification("prompted_info_show",{info:"装备已是最高等级"});if(s<r.costProp)return void this.sendNotification("prompted_info_show",{info:"合成需要的【腐蚀之精】不足"});if(Ng.userVO.getValue(1009)<r.costSilver)return void this.sendNotification("prompted_info_show",{info:"合成需要的铜币不足"});var c=0,u=this.view.list.dataSource[t-1];null!=u&&u instanceof modules.goods.model.data.PackDemon&&(c+=u.count);var d=this.getDreesed(o),p=NaN;if(d&&d.demonConf.level==a-1?(c+=1,p=d.id):p=u.id,4>c)return void this.sendNotification("prompted_info_show",{info:"合成需要低1级装备4个"});var f=new uo;f.set(u.id,3),n?Ou.instance.upgrade(p,f,this.propsCorrosion.id):this.sendNotification("POP_CONFIRM_INFO",{info:"确认使用<font color='"+N.getColor(this.propsCorrosion.propConf.quality)+"'>【"+this.propsCorrosion.propConf.name+"】"+r.costProp+"个</font>，铜币"+r.costSilver+"和4个低1级装备<br>合成一个<font color='"+N.getColor(jn.getLevelColor(a))+"'>"+Xn.getTypeNameFull(o)+"</font>","double":"以后不再提示",handler:h.create(this,function(e,t){e&&(Ou.instance.upgrade(p,f,i.propsCorrosion.id),t&&Ts.setItem("_DEMON_MIX_NO_CONFIRM","true"))})},"doubleExt")}}},s(0,i,"view",function(){return this.getViewComponent();
}),t.NAME="DemonUpgradeMediator",t._DEMON_MIX_NO_CONFIRM="_DEMON_MIX_NO_CONFIRM",t}(lc),XE=function(e){function t(){t.__super.call(this,"DemonMediator")}o(t,"modules.demon.view.DemonMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this.facade.retrieveMediator("MarcketMediator"),t=e.view.boxWelfare.getChildByName("boxDemon");t.on("click",this,this.onClick),this.setViewComponent(t),this.showInfo(null)},i.onClick=function(e){switch(e.target.name){case"demonAward":Ou.instance.takeDaily();break;case"lbTime":this.sendNotification("OPEN_MARCKET_VIEW","充值")}},i.showInfo=function(e){var t=this.view.getChildByName("demonAward"),i=this.view.getChildByName("lbTime"),n=this.view.getChildByName("lbNext"),o=this.view.getChildByName("desc");if(null==e)this.view.visible=!1;else{var s=this.view.getChildByName("award1");s.text="随机"+e.level+"级伏魔装备",s.color=N.getColor(jn.getLevelColor(e.level)),s=this.view.getChildByName("award2"),s.text="【腐蚀之精】*"+jn.getDemonMarketPropCount(e.level);var r=jn.getDemonMarketUpgradeNeedTime(e.level),a=r-e.times;0>a?n.text="当前已是最高级":n.text="再领取"+a+"次后伏魔装备等级将提升",e.gotToday<e.maxToday?(t.visible=!0,i.visible=!1):(t.visible=!1,i.visible=!0,i.text="今日已领取",i.color="#00dc24",i.underline=!1,i.mouseEnabled=!1,v.OPEN_PAYMENT&&(1==e.maxToday?(i.text="今日累充30可再领一次",i.underline=!0,i.mouseEnabled=!0,i.color="#fffc00"):2==e.maxToday&&(i.text="今日累充100可再领一次",i.underline=!0,i.mouseEnabled=!0,i.color="#fffc00"))),o.visible=v.OPEN_PAYMENT,this.view.visible=!0}},i.onRegister=function(){this.facade.registerMediator(new jE),this.facade.registerMediator(new KE)},i.listNotificationInterests=function(){return["ZERO_CLOCK_TRIGER","USER_INIT","RECEIVE_DEMON_MARKET_INFO"]},i.handleNotification=function(e){switch(e.getName()){case"USER_INIT":var t=this.facade.retrieveProxy("DemonProxy");t.receive(null);this.showInfo(null);case"ZERO_CLOCK_TRIGER":Ng.userVO.getValue(1006)>=39&&Ou.instance.query();break;case"RECEIVE_DEMON_MARKET_INFO":this.showInfo(e.getBody())}},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="DemonMediator",t}(lc),QE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookMeridianCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerMeridian",t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.receiveMeridian(i);this.sendNotification("LOOK_RECEIVE_MERIDIAN",o)}else this.sendNotification("LOOK_RECEIVE_MERIDIAN",null)},t}(rc),jE=function(e){function t(){this.freshAble=!1,this.dressedEquips=[],this.demonDressChgView=null,t.__super.call(this,"DemonDressMediator")}o(t,"modules.demon.view.DemonDressMediator",e);var i=t.prototype;return i.initViewComponent=function(){var e=this;this.setViewComponent(new GL),this.view.list.renderHandler=new h(this,this.onRender),this.view.list.mouseEnabled=!0,this.view.list.mouseHandler=new h(this,this.onMouse),this.view.list.scrollBar.hide=!0,this.view.list.visible=!1,this.view.btnNtc.clickHandler=new h(this,function(){e.sendNotification("POP_FUN_NOTICE",18)})},i.listNotificationInterests=function(){return["CLEAR_CACHE_DATA","FRESH_GOODS_PACK","OPEN_DEMON_DRESS_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"OPEN_DEMON_DRESS_PAGE":if(Ng.userVO.getValue(1006)<39)return void this.sendNotification("prompted_info_show",{info:"39级开启伏魔装备系统"});this.view.popup(),this.view.addChild(e.getBody()),this.fresh();break;case"FRESH_GOODS_PACK":var t=e.getBody();t.contain(2)&&(this.freshAble=!0),this.fresh();break;case"CLEAR_CACHE_DATA":this.view.list.visible=!1,this.freshAble=!1}},i.fresh=function(){if(this.freshAble&&this.view.isPopup){for(var e=this.facade.retrieveProxy("GoodsProxy"),t=e.listItems(2),i=0;5>i;i++)this.dressedEquips[i]=null;var n;for(var o in t)n=t[o],n instanceof modules.goods.model.data.PackDemon&&(this.dressedEquips[n.demonConf.position]=n);this.view.list.dataSource?this.view.list.refresh():this.view.list.dataSource=this.dressedEquips,this.view.list.visible=!0,this.freshAble=!1}},i.onRender=function(e,t){if(this.view.list.dataSource){var i=e.getChildByName("changeBtn"),n=e.getChildByName("mixBtn");if(0==t)i.visible=!1,n.visible=!1,Ln.renderDemonSuit(e.getChildByName("demon"),this.dressedEquips);else{var o=e.dataSource;null!=o?(Ln.renderDemon(e.getChildByName("demon"),o),i.label="更  换"):(Ln.renderDemonEmptyGrid(e.getChildByName("demon"),t),i.label="装  备"),i.visible=!0,n.visible=!0}}},i.onMouse=function(e,t){if("click"==e.type){var i=this.view.list.dataSource[t];switch(e.target.name){case"changeBtn":null==this.demonDressChgView&&(this.demonDressChgView=new HL(new h(this,this.onEquipPopSelect)));var n,o=t,s=this.facade.retrieveProxy("GoodsProxy"),r=s.listItems(0),a=[];for(var l in r)n=r[l],null==n||n.count<=0||null!=i&&n.baseId==i.baseId||n instanceof modules.goods.model.data.PackDemon&&n.demonConf.position==o&&a.push(n);a.sort(this.compareFunctionEquip),this.demonDressChgView.popSelect(i,a,o);break;case"mixBtn":this.sendNotification("OPEN_DEMON_MIX_PAGE",t)}}},i.compareFunctionEquip=function(e,t){return e.demonConf.id>t.demonConf.id?-1:e.demonConf.id<t.demonConf.id?1:0},i.onEquipPopSelect=function(e){e&&(Ou.instance.dress(e.id,e.demonConf.position),this.demonDressChgView.close())},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="DemonDressMediator",t}(lc),ZE=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookPetEquipCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PetEquipStar",t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.receivePetEquipStar(i);this.sendNotification("LOOK_RECEIVE_PET_EQUIP_STAR",o)}else this.sendNotification("LOOK_RECEIVE_PET_EQUIP_STAR",null)},t}(rc),JE=function(e){function t(){t.__super.call(this,"LookProxy"),t._userVO=new $c}o(t,"modules.look.model.LookProxy",e);var i=t.prototype;return i.update=function(e,i){for(var n=0;n<e.length;n++){var o=e[n],s=i[n];t.userVO.setValue(o,s),si.updateAndCheck(t.userVO,o,s)}return t.userVO},i.receiveEquips=function(e){t.petGhosts.clear(),t.bloods.clear(),t.equips.length=0,t.talismans.length=0,t.demons.length=0,t.petequips.length=0;var i,n=null;for(var o in e)switch(i=e[o],i.goodsType){case 0:var s=new ld(i);n=s,14==s.propConf.propType?t.bloods.set(n.id,n):t.petGhosts.set(n.id,n);break;case 1:n=new rd(i),t.equips.push(n);break;case 6:n=new ad(i),t.talismans.push(n);break;case 12:n=new cd(i),t.demons.push(n);break;case 14:n=new hd(i),t.petequips.push(n);break;default:as.error(this,"buildBackGoods","类型不匹配type:"+i.goodsType)}return t.talismans.sort(this.compareFunctionBad),t.equips},i.compareFunctionBad=function(e,t){return e.talismanConf.grad-t.talismanConf.grad},i.recieveStar=function(e){return null==t.stars?t.stars=new Hi(e):(t.stars.clear(),t.stars.update(e)),t.stars},i.receiveBone=function(e){null==t.bone&&(t.bone=new _t);var i=t.userVO.getValue(1004);return t.bone.update(e,i),t.bone},i.receivePet=function(e){return null==t.pet?t.pet=new on(e.pet):t.pet.update(e.pet),t.pet.updateAttributes(e.attr.attributes),t.pet.updateSkillLevel(e.skills),t.pet},i.receiveCulture=function(e){return null==t.culture&&(t.culture=new eo),t.culture.update(e.cultureId),t.culture.gas=e.gas,t.culture},i.receiveBlood=function(e){return null==t.blood&&(t.blood=new ci),t.blood.update(e),t.blood},i.receiveHandbook=function(e){return null==t.book&&(t.book=new Oi),t.book.update(e,!0),t.book},i.receivePearl=function(e){return null==t.pearl&&(t.pearl=new Bt),t.pearl.update(e),t.pearl},i.receiveMeridian=function(e){return null==t.meridan&&(t.meridan=new En),t.meridan.update(e),t.meridan},i.receivePetEquipStar=function(e){return null==t.petEquipStar&&(t.petEquipStar=new nn),t.petEquipStar.update(e),t.petEquipStar},s(1,t,"userVO",function(){return t._userVO},org.puremvc.as3.patterns.proxy.Proxy._$SET_userVO),t.NAME="LookProxy",t._userVO=null,t.equips=[],t.talismans=[],t.demons=[],t.petequips=[],t.stars=null,t.bone=null,t.pet=null,t.culture=null,t.blood=null,t.book=null,t.pearl=null,t.meridan=null,t.petEquipStar=null,n(t,["bloods",function(){return this.bloods=new uo},"petGhosts",function(){return this.petGhosts=new uo}]),t}(sc),$E=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookHandbookCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("HandbookBattle",t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.receiveHandbook(i);this.sendNotification("LOOK_RECEIVE_BOOK",o)}else this.sendNotification("LOOK_RECEIVE_BOOK",null)},t}(rc),ex=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookBloodCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("PlayerBlood",t.value),n=this.facade.retrieveProxy("LookProxy"),o=n.receiveBlood(i);this.sendNotification("LOOK_RECEIVE_BLOOD",o)}else this.sendNotification("LOOK_RECEIVE_BLOOD",null)},t}(rc),tx=function(e){function t(){t.__super.call(this)}o(t,"modules.look.controller.commands.LookInfoCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("ParamKeyValue",t.value),n=i.keys,o=i.values,s=this.facade.retrieveProxy("LookProxy"),r=s.update(n,o);this.sendNotification("LOOK_RECEIVE_ATTR",r)}},t}(rc),ix=function(e){function t(){t.__super.call(this,"Mediator"),v.IS_GLOBAL_VERSION?t.URLS=["https://res.gl.mudgj.com/help/index.html","https://res.gl.mudgj.com/help/如何變強.html","https://res.gl.mudgj.com/help/融靈屬性.html"]:t.URLS=["https://res.mudgj.com/help/index.html","https://res.mudgj.com/help/如何变强.html","https://res.mudgj.com/help/融灵属性.html"]}o(t,"modules.help.view.HelpMediator",e);var i=t.prototype;return i.listNotificationInterests=function(){return["SHOW_HELP_PAGE","SHOW_HELP_STRONG_PAGE"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_HELP_PAGE":var i=t.URLS[0];null!=e.getBody()&&(i=t.URLS[e.getBody()]),Q.isLaya()?Q.openWebview(i):nwei_sdk.popHelp(i);break;case"SHOW_HELP_STRONG_PAGE":Q.isLaya()?Q.openWebview(t.URLS[1]):nwei_sdk.popHelp(t.URLS[1])}},t.URLS=null,t}(lc),nx=function(e){function t(){t.__super.call(this)}o(t,"modules.culture.controller.commands.GlobalBossFreshCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeIntArr(t.value);this.sendNotification("RECEIVE_GLOBAL_BOSS_FRESH",i)}},t}(rc),ox=function(e){function t(){t.__super.call(this)}o(t,"modules.culture.controller.commands.GasChangeCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decodeLong(t.value).toNumber(!1),n=this.facade.retrieveProxy("CultureProxy");n.playerCulture&&(n.playerCulture.gas=i,this.sendNotification("RECEIVE_CULTURE_GAS",n.playerCulture))}},t}(rc),sx=function(e){function t(){t.__super.call(this)}o(t,"modules.culture.controller.commands.CultureCommand",e);var i=t.prototype;return i.execute=function(e){var t=e.getBody();if(t.success){var i=v.protoCodec.getResponseDecoder().decode("CultureInfo",t.value),n=this.facade.retrieveProxy("CultureProxy"),o=n.receive(i);this.sendNotification("RECEIVE_CULTURE_INFO",o)}},t}(rc),rx=function(e){function t(){t.__super.call(this)}o(t,"modules.culture.controller.CulturePrepCommand",e);var i=t.prototype;return i.execute=function(e){this.facade.registerCommand($n.CULTURE_QUERY,sx,!0),this.facade.registerCommand($n.CULTURE_UPGRADE,sx,!0),this.facade.registerCommand($n.CULTURE_PUSH_GAS,ox),this.facade.registerCommand($n.CULTURE_PUSH_GLOBAL_BOSS,nx)},t}(rc),ax=function(e){function t(){t.__super.call(this,"CultureProxy")}o(t,"modules.culture.model.CultureProxy",e);var i=t.prototype;return i.receive=function(e){return null==this.data&&(this.data=new eo),this.playerCulture.update(e.cultureId),this.playerCulture.gas=e.gas,this.playerCulture},s(0,i,"playerCulture",function(){return this.data}),t.NAME="CultureProxy",t}(sc),lx=function(e){function t(){this.dressedEquips=null,this.dressedPearls=null,this.dressedDemons=null,this.suit=null,this.suitQuality=0,this.playerStar=null,this.petEquips=null,this.player=null,this._selectIndex=0,this._dataReady=new go,t.__super.call(this,"LookOterMediator"),this.dressedEquips=[],this.dressedPearls=[],this.dressedDemons=[],this.petEquips=[];for(var e=0;10>e;e++)this.dressedEquips.push(null),this.dressedPearls.push(e);for(e=0;5>e;e++)this.dressedDemons.push(null);for(e=0;e<en.ARR_ALL.length;e++)this.petEquips.push(null)}o(t,"modules.look.view.LookOterMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new OL),this.onBar(0),this.view.tabBar.selectHandler=new h(this,this.onBar),this.view.btnFight.clickHandler=new h(this,this.onFight),this.view.equips.renderHandler=new h(this,this.onEquipRender),this.view.dressGhosts.renderHandler=new h(this,this.onGhostRender),this.view.talismanList.renderHandler=new h(this,this.onTalismanRender),this.view.bloods.renderHandler=new h(this,this.onBloodRender),this.view.petSkill.renderHandler=new h(this,this.onPetSkillRender),this.view.pearls.renderHandler=new h(this,this.onPearlRender),this.view.demons.renderHandler=new h(this,this.onMemonRender),this.view.equipBar.selectHandler=new h(this,this.onEquipBar),this.view.petBar.selectHandler=new h(this,this.onPetBar),this.view.bookBar.selectHandler=new h(this,this.onBookBar),this.view.petEquips.renderHandler=new h(this,this.onPerEquipRender),this.view.skillBookList.renderHandler=new h(this,this.onSkillBookRender)},i.listNotificationInterests=function(){return["SHOW_LOOK_PAGE","LOOK_RECEIVE_ATTR","LOOK_RECEIVE_EQUIPS","LOOK_RECEIVE_STARS","LOOK_RECEIVE_BONE","LOOK_RECEIVE_PET","LOOK_RECEIVE_CULTURE","LOOK_RECEIVE_BLOOD","LOOK_RECEIVE_BOOK","LOOK_RECEIVE_PEARL","LOOK_RECEIVE_MERIDIAN","LOOK_RECEIVE_PET_EQUIP_STAR"]},i.handleNotification=function(e){switch(e.getName()){case"SHOW_LOOK_PAGE":return this.player&&this.player.playerId==e.getBody().playerId||(this.player=e.getBody(),JE.userVO.setValue(1004,this.player.nature),JE.userVO.setValue(1006,this.player.level),this._selectIndex=this.view.tabBar.selectedIndex,this.view.tabBar.selectedIndex=-1,this._dataReady.clear(),ku.instance.lookInfo(this.player.playerId)),this.freshBase(),void this.view.popup();case"LOOK_RECEIVE_ATTR":this.showAtt(e.getBody()),this.player.level>=35?ku.instance.lookCulture(this.player.playerId):this.showCulture(null);break;case"LOOK_RECEIVE_EQUIPS":this.showEquips(e.getBody()),this.showTalisman(),this.showPetGhost(),this.showDemons(),this.showPetEquips(JE.petEquipStar),this.view.bloods.refresh();break;case"LOOK_RECEIVE_PEARL":this.showPearls();break;case"LOOK_RECEIVE_MERIDIAN":this.showMeridian(e.getBody());break;case"LOOK_RECEIVE_STARS":this.playerStar=e.getBody(),this.view.equips.dataSource&&this.view.equips.refresh();break;case"LOOK_RECEIVE_BONE":this.showBoneInfo(e.getBody());break;case"LOOK_RECEIVE_PET":this.showPetInfo(e.getBody());break;case"LOOK_RECEIVE_CULTURE":this.showCulture(e.getBody());break;case"LOOK_RECEIVE_BLOOD":this.showBlood(e.getBody());break;case"LOOK_RECEIVE_BOOK":this.showHandbook(e.getBody());break;case"LOOK_RECEIVE_PET_EQUIP_STAR":this.showPetEquips(e.getBody());break;default:return}this._dataReady.add(e.getName()),this.view.tabBar.selectedIndex=this._selectIndex,this.onBar(this._selectIndex)},i.showPetEquips=function(e){for(var t=0;t<en.ARR_ALL.length;t++)this.petEquips[t]=null;var i;for(var n in JE.petequips)i=JE.petequips[n],this.petEquips[i.pos-1]=i;this.view.petEquips.dataSource=this.petEquips},i.showHandbook=function(e){var t=this.view.handbook,i=(t.getChildByName("lbNotOpen"),t.getChildByName("attrsPercent"));if(null==e||0==e.suitAttr.keys.length)return i.visible=!1,void(this.view.lbNotOpen.text="未激活器灵");this.view.lbNotOpen.text="",i.visible=!0;var n,o,s,r,a,l=e.suitAttr,h="#00dc24",c=[];for(a in Li.KEY_SUIT){switch(n=Li.KEY_SUIT[a],s=I.getName(n),o=l.get(n),null==o&&(o=0),n){case 1106:case 1107:case 1201:case 1202:r=o/100+"%";break;default:r=I.getValueStr(n,o)}c.push({text:s+" + "+r,color:o>0?h:"#b0bcb0"})}i.dataSource=c},i.showBlood=function(e){e&&(this.view.bloods.dataSource=e.bloodArr)},i.onBloodRender=function(e,t){var i=e.getChildByName("item"),n=e.getChildByName("openInfo"),o=e.dataSource;if(o)if(o.id){n.text="";var s=JE.bloods.get(o.id);s?(Ln.renderBlood(i,s,o.lv),i.visible=!0):i.visible=!1}else n.text="未装备",i.visible=!1;else n.text="未开启",i.visible=!1},i.onPetSkillRender=function(e,t){var i=e.dataSource,n=JE.pet.getSkillLv(i);n>0?Qi.renderSkill(e,i,n,!1):Qi.renderSkillEmpty(e,t)},i.onPearlRender=function(e,t){var i=JE.pearl;if(null==i||0==i.isInit())return void(e.visible=!1);e.visible=!0;var n=e.getChildByName("pearl"),o=e.dataSource;if(0==o){var s=i.getSuitLevel();Ln.renderPearlSuit(n,s)}else{var r=i.getPearl(o);null==r||r.holeLv<=0?Ln.renderPearlEmpty(n,o):r.level<=0?Ln.renderPearlEmpty(n,o):Ln.renderPearl(n,r)}},i.onMemonRender=function(e,t){if(this.view.demons.dataSource)if(0==t)Ln.renderDemonSuit(e.getChildByName("demon"),this.dressedDemons);else{var i=e.dataSource;null!=i?Ln.renderDemon(e.getChildByName("demon"),i):Ln.renderDemonEmptyGrid(e.getChildByName("demon"),t)}},i.onSkillBookRender=function(e,t){var i=e.dataSource,n=e.getChildByName("name"),o=e.getChildByName("spInfo"),s=i.cfg;s?(n.text=s.name,n.color=N.getColor(i.lv),o.text=s.getSpInfo(i.lv),o.color=n.color):console.log("not find petskill look:"+i.id)},i.onPerEquipRender=function(e,t){var i=e.dataSource;null==i?Ln.renderPetEquipEmpty(e.getChildByName("item"),t+1):Ln.renderPetEquip(e.getChildByName("item"),i,JE.petEquipStar)},i.showTalisman=function(){JE.talismans&&(this.view.talismanList.dataSource=JE.talismans)},i.showCulture=function(e){var t,i=new Array,n=this.view.culture.getChildByName("culture");if(e){var o=e.current;o?(t=n.getChildByName("name"),t.text=o.name,t.color=N.getColor(o.grade+1),i.push({text:"攻击 +"+o.attrPercent/100+"%",color:t.color}),i.push({text:"防御 +"+o.attrPercent/100+"%",color:t.color}),i.push({text:"生命 +"+o.attrPercent/100+"%",color:t.color}),i.push({text:"法力 +"+o.attrPercent/100+"%",color:t.color})):(t=n.getChildByName("name"),t.text="凡人",t.color="#ffffff",i.push({text:"无加成",color:t.color}))}else t=n.getChildByName("name"),t.text="凡人",t.color="#ffffff",i.push({text:"无加成",color:t.color});var s=n.getChildByName("attrs");s.dataSource=i},i.freshBase=function(){var e=this.view.txtName;e.text=this.player.name;var t=this.view.nature;t.index=this.player.nature-1;var i=e.x+e.width;t.x=i,e=this.view.level,e.text=this.player.level+"级",i=t.x+t.width,e.x=i,this.view.achieveTitle.x=i+e.width+5,i=this.view.achieveTitle.x+this.view.achieveTitle.width,this.view.alliance.x=i},i.showAtt=function(e){this.player&&(0==this.player.level||this.player.level<e.getValue(1006))&&(this.player.level=e.getValue(1006),this.player.nature=e.getValue(1004),this.freshBase());var t=e.getValue(7011);t>0?(this.view.alliance.text="【"+e.getValue(7012)+"】"+e.getValue(7013)+"级",this.view.alliance.color=Lt.getAlcColor(e.getValue(7013))):(this.view.alliance.text="",this.view.alliance.color="#ffffff");var i="编号:"+e.getValue(19e3)+"-";i+=e.getValue(1016).length>16?e.getValue(1016).substring(16):e.getValue(1016),this.view.uID.text=i;var n=e.getValue(1027);this.view.txtName.color=N.getColor(n);var o,s=[];for(var r in I.ROLE_ATTRIBUTE_SHOW){o=I.ROLE_ATTRIBUTE_SHOW[r];var a=e.getValue(o);if(a){var l=I.getName(o),h=I.getValueStr(o,a);1205==o&&(4==e.getValue(1004)?12e3==a&&(l+="(满)"):8e3==a&&(l+="(满)")),s.push({key:l,value:h})}}this.view.attributes.dataSource=s,this.view.achieveTitle.text="";var c=e.getValue(7006);if(c>0){var u=g.database.getData("achieve",c);u&&(this.view.achieveTitle.text=u.name,this.view.achieveTitle.color=N.getColor(u.quailty))}else this.view.achieveTitle.color="#ffffff",this.view.achieveTitle.text=""},i.showEquips=function(e){for(var t=0;10>t;t++)this.dressedEquips[t]=null;var i,n=0,o=0,s=0;for(var r in e)i=e[r],this.dressedEquips[i.equipConf.position]=i,i.equipConf.suitId&&(n!=i.equipConf.suitId?(o=1,n=i.equipConf.suitId,s=i.quality):(o++,s+=i.quality));n&&3==o?(this.suit=g.database.getData("equipsuit",n),this.suitQuality=Math.floor(s/o)):(this.suit=null,this.suitQuality=0),this.view.equips.dataSource=this.dressedEquips},i.showDemons=function(){for(var e=0;5>e;e++)this.dressedDemons[e]=null;var t;for(var i in JE.demons)t=JE.demons[i],this.dressedDemons[t.demonConf.position]=t;this.view.demons.dataSource=this.dressedDemons},i.showPearls=function(){this.view.pearls.dataSource=this.dressedPearls},i.showMeridian=function(e){var t=this.view.meridian.getChildByName("m1");e.attackLv<1?(t.color="#b0bcb0",t.text="任脉未激活"):(t.color="#fffc00",t.text="任脉：攻击 + "+xn.getAttrAdd(0,e.attackLv)),t=this.view.meridian.getChildByName("m2"),e.defenceLv<1?(t.color="#b0bcb0",t.text="督脉未激活"):(t.color="#00dc24",t.text="督脉：防御 + "+xn.getAttrAdd(1,e.defenceLv)),t=this.view.meridian.getChildByName("m3"),e.hpLv<1?(t.color="#b0bcb0",t.text="冲脉未激活"):(t.color="#e70626",t.text="冲脉：生命 + "+xn.getAttrAdd(2,e.hpLv)),t=this.view.meridian.getChildByName("m4"),e.mpLv<1?(t.color="#b0bcb0",t.text="带脉未激活"):(t.color="#0084ff",t.text="带脉：法力 + "+xn.getAttrAdd(3,e.mpLv))},i.onEquipRender=function(e,t){if(this.view.equips.dataSource)if(0==t)Ln.renderEquipSuit(e.getChildByName("equip"),this.suit,this.suitQuality);else{var i=this.view.equips.dataSource[t];if(i){var n=0;this.playerStar&&(n=this.playerStar.getStar(i.equipConf.position)),Ln.renderEquip(e.getChildByName("equip"),i,n)}else Ln.renderEquipEmptyGrid(e.getChildByName("equip"),t)}},i.showBoneInfo=function(e){var t=this.view.bone.getChildByName("name"),i=this.view.bone.getChildByName("txtNotOpen"),n=this.view.bone.getChildByName("nature"),o=this.view.bone.getChildByName("attrs"),s=this.view.bone.getChildByName("lbSp");if(null==e||null==this.player||0==e.currentAttrs.keys.length)return t.visible=!1,n.visible=!1,o.visible=!1,i.visible=!0,void(s.text="");t.visible=!0,n.visible=!0,o.visible=!0,i.visible=!1;var r=this.player.nature,a=Math.floor(e.boneId/9),l=e.boneId%9;t.text=mt.nameArr[a]+R.getName(r)+"灵根       "+mt.clzArr[l],t.color=mt.colorArr[a],n.index=r-1;var h,c=new Array;for(var u in e.currentAttrs.keys){h=e.currentAttrs.keys[u];var d=e.currentAttrs.get(h),p=I.getName(h),f=I.getValueStr(h,d,!0);c.push({text:p+" "+f,color:t.color})}o.dataSource=c,e.variation>0?(s.text=e.variation+"级变异 灵根属性 + "+mt.getPercentAdd(e.variation)+"%",s.color=mt.getSpColor(e.variation),s.visible=!0):s.visible=!1},i.showPetGhost=function(){if(JE.pet){var e,t=[];for(var i in JE.pet.ghosts.values)if(e=JE.pet.ghosts.values[i],e>0){var n=JE.petGhosts.get(e);n&&t.push(n)}this.view.dressGhosts.dataSource=t,this.view.dressGhosts.visible=!0}else this.view.dressGhosts.visible=!1},i.showPetInfo=function(e){var t=this.view.pet.getChildByName("nameTxt"),i=this.view.pet.getChildByName("nature"),n=this.view.pet.getChildByName("level"),o=this.view.pet.getChildByName("quality"),s=this.view.pet.getChildByName("attributes"),r=this.view.pet.getChildByName("desc");if(e){t.text=e.getRealName(),t.color=N.getColor(e.getRealQuality()),i.index=e.petCfg.nature-1,i.x=t.x+t.width,n=this.view.pet.getChildByName("level"),n.text=e.level+"",o=this.view.pet.getChildByName("quality");var a=e.qualityLevel+e.getQrangeQualityLeveLAdd()+"";e.qualityLevel>=e.petCfg.maxQuality?(a+="（满）",o.color="#c527ff"):o.color="#00dc24",e.addQuality&&(a=a+" + "+e.addQuality),o.text=a;var l,h=[];for(var c in e.attributes.keys){l=e.attributes.keys[c];var u=e.attributes.get(l);if(u){var d=I.getValueStr(l,u);h.push({key:I.getName(l),value:d})}}s.dataSource=h,s.visible=!0,r=this.view.pet.getChildByName("desc"),r.text=e.petCfg.desc,r.color=N.getColor(e.getRealQuality()),this.showPetGhost(),this.view.petSkill.dataSource=e.skill,this.view.skillBookList.dataSource=e.listSkillBook()}else{t.color="#ffffff",t.text="无协战灵宠",i.index=-1,n.text="--",o.text="--",s.visible=!1,r.text="",this.view.dressGhosts.visible=!1;var p=[];this.view.petSkill.dataSource=p,this.view.skillBookList.dataSource=p}},i.onGhostRender=function(e,t){var i=e.getChildByName("name"),n=e.getChildByName("nature"),o=e.getChildByName("attribute1"),s=e.getChildByName("attribute2");if(this.view.dressGhosts.dataSource){var r=this.view.dressGhosts.dataSource[t];if(r){i.text=r.propConf.name,i.color=N.getColor(r.quality);var a=i.x+i.width;n.x=a,n.index=r.propConf.nature-1;var l=r.baseAttr[0],h=I.getName(l.key);o.text=h+I.getValueStr(l.key,l.value,!0),o.color="#0084ff",l=r.baseAttr[1],h=I.getName(l.key),s.text=h+I.getValueStr(l.key,l.value,!0)}}},i.onTalismanRender=function(e,t){if(this.view.talismanList.dataSource){var i=e,n=this.view.talismanList.dataSource[t];n&&(Ln.renderTalisman(i,n),i.visible=!0)}},i.onBookBar=function(e){switch(this.view.handbook.visible=!1,this.view.skillBook.visible=!1,e){case 0:this._dataReady.contain("LOOK_RECEIVE_BOOK")?(this.view.handbook.visible=!0,this.view.lbNotOpen.text=""):ku.instance.lookHandbook(this.player.playerId);break;case 1:this._dataReady.contain("LOOK_RECEIVE_PET")?(this.view.skillBook.visible=!0,this.view.lbNotOpen.text=""):ku.instance.lookPet(this.player.playerId)}},i.onEquipBar=function(e){switch(this.view.equips.visible=!1,this.view.pearls.visible=!1,this.view.demons.visible=!1,e){case 0:this._dataReady.contain("LOOK_RECEIVE_EQUIPS")?(this.view.equips.visible=!0,this.view.lbNotOpen.text=""):(ku.instance.lookEquips(this.player.playerId),ku.instance.lookStar(this.player.playerId));break;case 1:this._dataReady.contain("LOOK_RECEIVE_EQUIPS")?(this.view.demons.visible=!0,this.view.lbNotOpen.text=""):(ku.instance.lookEquips(this.player.playerId),ku.instance.lookStar(this.player.playerId));break;case 2:this._dataReady.contain("LOOK_RECEIVE_PEARL")?(this.view.pearls.visible=!0,this.view.lbNotOpen.text=""):this.player.level<45?this.view.lbNotOpen.text="未开启":this._dataReady.contain("LOOK_RECEIVE_PEARL")||ku.instance.lookPearl(this.player.playerId)}},i.onPetBar=function(e){switch(this.view.pet.visible=!1,this.view.bloods.visible=!1,this.view.petSkill.visible=!1,this.view.petEquips.visible=!1,e){case 0:this._dataReady.contain("LOOK_RECEIVE_PET")?(this.view.pet.visible=!0,this.view.lbNotOpen.text=""):(ku.instance.lookPet(this.player.playerId),this._dataReady.contain("LOOK_RECEIVE_EQUIPS")||(ku.instance.lookEquips(this.player.playerId),ku.instance.lookStar(this.player.playerId)));break;case 1:this._dataReady.contain("LOOK_RECEIVE_BLOOD")?(this.view.bloods.visible=!0,this.view.lbNotOpen.text=""):(ku.instance.lookBlood(this.player.playerId),this._dataReady.contain("LOOK_RECEIVE_EQUIPS")||(ku.instance.lookEquips(this.player.playerId),ku.instance.lookStar(this.player.playerId)));break;case 2:this._dataReady.contain("LOOK_RECEIVE_PET")?(this.view.petSkill.visible=!0,this.view.lbNotOpen.text=""):ku.instance.lookPet(this.player.playerId);break;case 3:this._dataReady.contain("LOOK_RECEIVE_PET_EQUIP_STAR")?(this.view.petEquips.visible=!0,this.view.lbNotOpen.text=""):this.player.level<100?this.view.lbNotOpen.text="未开启":(ku.instance.lookPetEquip(this.player.playerId),this._dataReady.contain("LOOK_RECEIVE_EQUIPS")||(ku.instance.lookEquips(this.player.playerId),ku.instance.lookStar(this.player.playerId)))}},i.onBar=function(e){switch(e>0&&(this._selectIndex=e),this.view.boxAttributes.visible=!1,this.view.equips.visible=!1,this.view.bone.visible=!1,this.view.pet.visible=!1,this.view.culture.visible=!1,this.view.bloods.visible=!1,this.view.petSkill.visible=!1,this.view.bookBar.visible=!1,this.view.handbook.visible=!1,this.view.skillBook.visible=!1,this.view.pearls.visible=!1,this.view.meridian.visible=!1,this.view.equipBar.visible=!1,this.view.demons.visible=!1,this.view.petBar.visible=!1,this.view.petEquips.visible=!1,this.view.lbNotOpen.text="正在加载数据",e){case 0:this._dataReady.contain("LOOK_RECEIVE_ATTR")&&(this.view.boxAttributes.visible=!0,this.view.lbNotOpen.text="");break;case 1:this.view.equipBar.visible=!0,this.onEquipBar(this.view.equipBar.selectedIndex);break;case 2:this._dataReady.contain("LOOK_RECEIVE_BONE")?(this.view.bone.visible=!0,this.view.lbNotOpen.text=""):ku.instance.lookBone(this.player.playerId);break;case 3:this.view.bookBar.visible=!0,this.onBookBar(this.view.bookBar.selectedIndex);break;case 4:this.view.petBar.visible=!0,this.onPetBar(this.view.petBar.selectedIndex);break;case 5:this._dataReady.contain("LOOK_RECEIVE_CULTURE")&&this._dataReady.contain("LOOK_RECEIVE_EQUIPS")?(this.view.culture.visible=!0,this.view.lbNotOpen.text=""):this.player.level<35?this.view.lbNotOpen.text="未开启":this._dataReady.contain("LOOK_RECEIVE_EQUIPS")||(ku.instance.lookEquips(this.player.playerId),ku.instance.lookStar(this.player.playerId));break;case 6:this._dataReady.contain("LOOK_RECEIVE_MERIDIAN")?(this.view.meridian.visible=!0,this.view.lbNotOpen.text=""):this.player.level<7?this.view.lbNotOpen.text="未开启":ku.instance.lookMeridian(this.player.playerId)}},i.onFight=function(){this.player&&this.player.playerId&&(Gc.instance.fightOtherPlayer(this.player.playerId),this.sendNotification("SHOW_FIGHT_PAGE_OTHER",null,2))},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="LookOterMediator",t}(lc),hx=function(e){function t(){this.freshAble=!1,this.culture=null,this.dressedTalismans=[null,null,null,null,null,null,null],this._requested=!1,t.__super.call(this,"CultureMediator")}o(t,"modules.culture.view.CultureMediator",e);var i=t.prototype;return i.initViewComponent=function(){this.setViewComponent(new AN),this.view.submit.clickHandler=new h(this,this.onUpgrade),this.view.listTalisman.mouseEnabled=!0,this.view.listTalisman.renderHandler=new h(this,this.onTalismanRender),this.view.listTalisman.mouseEnabled=!0,this.view.listTalisman.mouseHandler=new h(this,this.onMouseTalisman),this.view.listTalisman.scrollBar.hide=!0,this.view.listTalisman.visible=!1,this.view.dressNum.text=""},i.listNotificationInterests=function(){return["RECEIVE_CULTURE_INFO","RECEIVE_CULTURE_GAS","CLEAR_CACHE_DATA","FRESH_GOODS_PACK"]},i.onTalismanRender=function(e,t){if(this.view.listTalisman.dataSource){var i=e.getChildByName("chat");i.visible=!1;var n=e.getChildByName("btnDress"),o=e.getChildByName("btnUpgrade"),s=e.getChildByName("btnRebuild"),r=e.getChildByName("openInfo"),a=e.getChildByName("talisman"),l=this.view.listTalisman.dataSource[t];l?(v.enableChat()&&!v.limitChat&&i&&(i.visible=!0),Ln.renderTalisman(a,l),a.visible=!0,n.label="更换",n.visible=!0,o.visible=!0,s.visible=!0,r.text="",l.quality<6?o.label="升品":o.label="重铸"):(a.visible=!1,n.visible=!1,o.visible=!1,s.visible=!1,this.culture.current&&this.culture.current.grade>t?(r.color="#ffffff",r.text=Re.getClutureName(t+1)+"期法宝",n.visible=!0):(r.color="#e70626",r.text=Re.getClutureName(t+1)+"期开启\n限定"+Re.getClutureName(t+1)+"法宝"))}},i.onMouseTalisman=function(e,t){if("click"==e.type){var i=this.view.listTalisman.dataSource[t];switch(e.target.name){case"chat":this.sendNotification("CHAT_INPUT_ITEM",i);break;case"btnDress":i?this.sendNotification("OPEN_DRESS_TALISMAN_CHANGE",i):this.sendNotification("OPEN_DRESS_TALISMAN_CHANGE",t+1);break;case"btnUpgrade":i.quality<6?this.sendNotification("OPEN_UPGRADE_TALISMAN_VIEW",i):this.sendNotification("OPEN_CHG_NATURE_VIEW",i);break;case"btnRebuild":this.sendNotification("OPEN_REBUILD_TALISMAN_VIEW",i)}}},i.handleNotification=function(e){switch(e.getName()){case"CLEAR_CACHE_DATA":this._requested=!1;break;case"RECEIVE_CULTURE_INFO":this.culture=e.getBody(),this.view.showInfo(this.culture),this.freshAble=!0,this.freshTalisman();break;case"RECEIVE_CULTURE_GAS":this.view.changeGas(e.getBody());break;case"FRESH_GOODS_PACK":var t=e.getBody();t.contain(2)&&(this.freshAble=!0),this.freshTalisman()}},i.freshTalisman=function(){if(this.freshAble&&this.view.visible&&this.culture){var e=this.facade.retrieveProxy("GoodsProxy"),t=e.listItems(2);this.dressedTalismans[0]=null,this.dressedTalismans[1]=null,this.dressedTalismans[2]=null,
this.dressedTalismans[3]=null,this.dressedTalismans[4]=null,this.dressedTalismans[5]=null,this.dressedTalismans[6]=null;var i,n=0;for(var o in t)i=t[o],i instanceof modules.goods.model.data.PackTalisman&&(this.dressedTalismans[i.talismanConf.grad-1]=i,n+=1);this.view.dressNum.text="装备法宝：（"+n+"/7）",this.view.listTalisman.dataSource?this.view.listTalisman.refresh():this.view.listTalisman.dataSource=this.dressedTalismans,this.freshAble=!1,this.view.listTalisman.visible=!0}},i.onUpgrade=function(){var e=this.facade.retrieveProxy("CultureProxy").playerCulture;if(e){if(!e.next)return void this.sendNotification("prompted_info_show",{info:"已是最高境界"});e.gas>=e.next.needGas?x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗灵气提升境界？",handler:h.create(this,function(e){e&&Bu.instance.upgrade()})}):this.sendNotification("prompted_info_show",{info:"当前灵气不足"})}},i.onShow=function(){0==this._requested&&(Bu.instance.query(),this._requested=!0)},s(0,i,"view",function(){return this.getViewComponent()}),t.NAME="CultureMediator",t}(lc),cx=function(e){function t(e,i){this._host=null,this._port=0,this._lastReceiveTimestamp=NaN,this._silence=!1,this._state=0,t.__super.call(this,e,i),this._host=e,this._port=i}o(t,"com.nwei.net.BaseSocket",e);var i=t.prototype;return i.writeByte=function(e,t){e.writeByte(t)},i.readByte=function(e){return e.readByte()},i.writeShort=function(e,t){e.writeInt16(t)},i.readShort=function(e){return e.getInt16()},i.writeInt=function(e,t){e.writeInt32(t)},i.readInt=function(e){return e.getInt32()},i.writeBytes=function(e,t){e.writeArrayBuffer(t)},i._onOpen=function(t){e.prototype._onOpen.call(this,t),this._state=200,as.debug(this,"_onOpen","---ws 连接建立:"+this._silence+"-"+JSON.stringify(t)+this._host+this._port),this._silence||x.getInstance().sendNotification("socket_OPEN",t)},i._onClose=function(t){e.prototype._onClose.call(this,t),this._state=400,as.debug(this,"_onClose","---ws 连接关闭:"+this._silence+"-"+JSON.stringify(t)+this._host+this._port),this._silence||x.getInstance().sendNotification("socket_CLOSE",t)},i._onError=function(t){e.prototype._onError.call(this,t),this._state=404,as.debug(this,"_onError","---ws 连接错误:"+this._silence+"-"+JSON.stringify(t)+this._host+this._port),this._silence||x.getInstance().sendNotification("socket_ERROR",t)},i.close=function(){e.prototype.close.call(this),this._state=400,as.debug(this,"_onError","---ws 连接关闭1"),this._silence||x.getInstance().sendNotification("socket_CLOSE")},i.reconect=function(e,t){this._silence=!0,this.cleanSocket(),this._silence=!1,this._state=0,this.connect(e,t)},i.sendPacket=function(e){this.connected&&(this.writeShort(this.output,e.module),this.writeShort(this.output,e.cmd),e.value&&this.writeBytes(this.output,e.value),this.flush())},i._onMessage=function(e){var t=new Vr;t.endian="bigEndian",t.writeArrayBuffer(e.data),t.pos=0;var i=this.readShort(t),n=this.readShort(t),o=this.readInt(t);switch(o){case 0:t.bytesAvailable>0?this.dispatch(i,n,o,t):this.dispatch(i,n,o);break;case 1:x.getInstance().sendNotification("RESPONSE_ERROR",new io("response_code_no_results",i+"_"+n));break;case 2:x.getInstance().sendNotification("RESPONSE_ERROR",new io("response_code_resolve_error",i+"_"+n));break;case 3:x.getInstance().sendNotification("RESPONSE_ERROR",new io("response_code_no_right",i+"_"+n));break;case 4:x.getInstance().sendNotification("RESPONSE_ERROR",new io("response_code_auth_code_error",i+"_"+n));break;case to.RESPONSE_CODE_ERROR:if(3==i&&50==n)return Ts.removeItem("_sever_selectd"),void X.logout(!0);var s=Ng.userVO.getValue(19001);s>0?X.gameReload(!1):(this.close(),x.getInstance().sendNotification("RESPONSE_ERROR",new io("response_code_error",i+"_"+n)));break;default:t.bytesAvailable>0?this.dispatch(i,n,o,t):this.dispatch(i,n,o)}},i.dispatch=function(e,t,i,n){var o=new no;o.module=e,o.cmd=t,o.status=i,o.value=n;var s=e+"_"+t;x.getInstance().sendNotification("SYS_MESSAGE_RECEIVE_CMD",o),x.getInstance().sendNotification(s,o),this._lastReceiveTimestamp=g.clock.currentTime},s(0,i,"lastReceiveTimestamp",function(){return this._lastReceiveTimestamp}),s(0,i,"state",function(){return this._state}),t.STATE_CREATING=0,t.STATE_OPEN=200,t.STATE_CLOSE=400,t.STATE_ERROR=404,t}(uc),ux=function(e){function t(){this._aniMap={},this.unfixedLastAniIndex=-1,t.__super.call(this),this._anis=new Array}o(t,"laya.ani.AnimationTemplet",e);var n=t.prototype;return n.parse=function(e){var t=new Vr(e);this._aniVersion=t.readUTFString(),Ss.parse(this,t)},n._calculateKeyFrame=function(e,t,i){var n=e.keyFrame;n[t]=n[0];for(var o=0;t>o;o++){var s=n[o];s.nextData=0===s.duration?s.data:n[o+1].data}n.length--},n.onAsynLoaded=function(e,t,i){var n=new Vr(t);switch(this._aniVersion=n.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":vs.parse(this,n);break;default:Ss.parse(this,n)}this._endLoaded()},n.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},n.getAnimationCount=function(){return this._anis.length},n.getAnimation=function(e){return this._anis[e]},n.getAniDuration=function(e){return this._anis[e].playTime},n.getNodes=function(e){return this._anis[e].nodes},n.getNodeIndexWithName=function(e,t){return this._anis[e].bone3DMap[t]},n.getNodeCount=function(e){return this._anis[e].nodes.length},n.getTotalkeyframesLength=function(e){return this._anis[e].totalKeyframeDatasLength},n.getPublicExtData=function(){return this._publicExtData},n.getAnimationDataWithCache=function(e,t,i,n){var o=t[i];if(o){var s=o[e];return s?s[n]:null}return null},n.setAnimationDataWithCache=function(e,t,i,n,o){var s=t[i]||(t[i]={}),r=s[e]||(s[e]=[]);r[n]=o},n.getOriginalData=function(e,i,n,o,s){for(var r=this._anis[e],a=r.nodes,l=0,h=0,c=a.length,u=0;c>h;h++){var d,p=a[h];d=p.keyFrame[n[h][o]],p.dataOffset=u;var f=s-d.startTime,_=p.lerpType;if(_)switch(_){case 0:case 1:for(l=0;l<p.keyframeWidth;)l+=p.interpolationMethod[l](p,l,i,u+l,d.data,f,null,d.duration,d.nextData);break;case 2:var m=d.interpolationData,g=m.length,v=0;for(l=0;g>l;){var y=m[l];switch(y){case 6:l+=t.interpolation[y](p,v,i,u+v,d.data,f,null,d.duration,d.nextData,m,l+1);break;case 7:l+=t.interpolation[y](p,v,i,u+v,d.data,f,null,d.duration,d.nextData,m,l+1);break;default:l+=t.interpolation[y](p,v,i,u+v,d.data,f,null,d.duration,d.nextData)}v++}}else for(l=0;l<p.keyframeWidth;)l+=p.interpolationMethod[l](p,l,i,u+l,d.data,f,null,d.duration,d.nextData);u+=p.keyframeWidth}},n.getNodesCurrentFrameIndex=function(e,t){var i=this._anis[e],n=i.nodes;e!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(n.length),this.unfixedCurrentTimes=new Float32Array(n.length),this.unfixedLastAniIndex=e);for(var o=0,s=n.length;s>o;o++){var r=n[o];for(t<this.unfixedCurrentTimes[o]&&(this.unfixedCurrentFrameIndexes[o]=0),this.unfixedCurrentTimes[o]=t;this.unfixedCurrentFrameIndexes[o]<r.keyFrame.length&&!(r.keyFrame[this.unfixedCurrentFrameIndexes[o]].startTime>this.unfixedCurrentTimes[o]);)this.unfixedCurrentFrameIndexes[o]++;this.unfixedCurrentFrameIndexes[o]--}return this.unfixedCurrentFrameIndexes},n.getOriginalDataUnfixedRate=function(e,i,n){var o=this._anis[e],s=o.nodes;e!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(s.length),this.unfixedCurrentTimes=new Float32Array(s.length),this.unfixedKeyframes=r(s.length),this.unfixedLastAniIndex=e);for(var a=0,l=0,h=s.length,c=0;h>l;l++){var u=s[l];for(n<this.unfixedCurrentTimes[l]&&(this.unfixedCurrentFrameIndexes[l]=0),this.unfixedCurrentTimes[l]=n;this.unfixedCurrentFrameIndexes[l]<u.keyFrame.length&&!(u.keyFrame[this.unfixedCurrentFrameIndexes[l]].startTime>this.unfixedCurrentTimes[l]);)this.unfixedKeyframes[l]=u.keyFrame[this.unfixedCurrentFrameIndexes[l]],this.unfixedCurrentFrameIndexes[l]++;var d=this.unfixedKeyframes[l];u.dataOffset=c;var p=n-d.startTime,f=u.lerpType;if(f)switch(u.lerpType){case 0:case 1:for(a=0;a<u.keyframeWidth;)a+=u.interpolationMethod[a](u,a,i,c+a,d.data,p,null,d.duration,d.nextData);break;case 2:var _=d.interpolationData,m=_.length,g=0;for(a=0;m>a;){var v=_[a];switch(v){case 6:a+=t.interpolation[v](u,g,i,c+g,d.data,p,null,d.duration,d.nextData,_,a+1);break;case 7:a+=t.interpolation[v](u,g,i,c+g,d.data,p,null,d.duration,d.nextData,_,a+1);break;default:a+=t.interpolation[v](u,g,i,c+g,d.data,p,null,d.duration,d.nextData)}g++}}else for(a=0;a<u.keyframeWidth;)a+=u.interpolationMethod[a](u,a,i,c+a,d.data,p,null,d.duration,d.nextData);c+=u.keyframeWidth}},t._LinearInterpolation_0=function(e,t,i,n,o,s,r,a,l,h){var c=0===a?0:s/a;return i[n]=(1-c)*o[t]+c*l[t],1},t._QuaternionInterpolation_1=function(e,t,i,n,o,s,r,a,l,h){var c=0===a?0:s/a;return Ih.slerpQuaternionArray(o,t,l,t,c,i,n),4},t._AngleInterpolation_2=function(e,t,i,n,o,s,r,a,l,h){return 0},t._RadiansInterpolation_3=function(e,t,i,n,o,s,r,a,l,h){return 0},t._Matrix4x4Interpolation_4=function(e,t,i,n,o,s,r,a,l,h){for(var c=0;16>c;c++,t++)i[n+c]=o[t]+s*r[t];return 16},t._NoInterpolation_5=function(e,t,i,n,o,s,r,a,l,h){return i[n]=o[t],1},t._BezierInterpolation_6=function(e,t,i,n,o,s,r,a,l,h,c){return void 0===c&&(c=0),i[n]=o[t]+(l[t]-o[t])*Es.getBezierRate(s/a,h[c],h[c+1],h[c+2],h[c+3]),5},t._BezierInterpolation_7=function(e,t,i,n,o,s,r,a,l,h,c){return void 0===c&&(c=0),i[n]=h[c+4]+h[c+5]*Es.getBezierRate((.001*s+h[c+6])/h[c+7],h[c],h[c+1],h[c+2],h[c+3]),9},t.load=function(e){return i.loader.create(e,null,null,t)},t.interpolation=[t._LinearInterpolation_0,t._QuaternionInterpolation_1,t._AngleInterpolation_2,t._RadiansInterpolation_3,t._Matrix4x4Interpolation_4,t._NoInterpolation_5,t._BezierInterpolation_6,t._BezierInterpolation_7],t}(xu),dx=function(e){function t(e,i){this._audio=null,this._onEnd=null,this._miniSound=null,t.__super.call(this),this._audio=e,this._miniSound=i,this._onEnd=t.bindToThis(this.__onEnd,this),e.onEnded(this._onEnd)}o(t,"laya.hw.mini.MiniSoundChannel",e);var n=t.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.play=function(){this.isStopped=!1,jh.addChannel(this),this._audio.play()},n.stop=function(){this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.stop(),this._audio.offEnded(null),this._audio.destroy(),this._audio=null,this._miniSound=null,this._onEnd=null)},n.pause=function(){this.isStopped=!0,this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"autoplay",function(){return this._audio.autoplay},function(e){this._audio.autoplay=e}),s(0,n,"loop",function(){return this._audio.loop},function(e){this._audio.loop=e}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"startTime",null,function(e){this._audio&&(this._audio.startTime=e)}),t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t}(Pu),px=function(e){function t(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,t.__super.call(this),t._gl=ur.mainContext}o(t,"laya.webgl.utils.Buffer",e);var i=t.prototype;return i._bind=function(){this.activeResource(),t._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(t._bindVertexBuffer=this._glBuffer),t._gl.bindBuffer(this._bufferType,t._bindActive[this._bufferType]=this._glBuffer),_x.activeShader=null)},i.recreateResource=function(){this._glBuffer||(this._glBuffer=t._gl.createBuffer()),this.completeCreate()},i.disposeResource=function(){this._glBuffer&&(ur.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},s(0,i,"bufferUsage",function(){return this._bufferUsage}),t._gl=null,t._bindActive={},t._bindVertexBuffer=null,t._enableAtributes=[],t}(xu),fx=function(e){function t(e,i){this._audio=null,this._onEnd=null,this._miniSound=null,t.__super.call(this),this._audio=e,this._miniSound=i,this._onEnd=t.bindToThis(this.__onEnd,this),e.onended(this._onEnd)}o(t,"laya.mi.mini.MiniSoundChannel",e,"MiniSoundChannel$2");var n=t.prototype;return n.__onEnd=function(){return Du._audioCache[this.url]=this._miniSound,1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.play=function(){this.isStopped=!1,jh.addChannel(this),this._audio.play()},n.stop=function(){this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.stop(),this._audio.offended&&this._audio.offended(null),this._miniSound.dispose(),this._audio=null,this._miniSound=null,this._onEnd=null)},n.pause=function(){this.isStopped=!0,this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"autoplay",function(){return this._audio.autoplay},function(e){this._audio.autoplay=e}),s(0,n,"loop",function(){return this._audio.loop},function(e){this._audio.loop=e}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"startTime",null,function(e){this._audio&&(this._audio.startTime=e)}),t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t}(Pu),_x=function(e){function t(){t.__super.call(this),this.lock=!0}return o(t,"laya.webgl.shader.BaseShader",e),t.activeShader=null,t.bindShader=null,t}(xu),mx=function(e){function t(){t.__super.call(this),this._w=0,this._h=0}o(t,"laya.resource.Bitmap",e);var i=t.prototype;return s(0,i,"source",function(){return this._source}),s(0,i,"height",function(){return this._h}),s(0,i,"width",function(){return this._w}),t}(xu),gx=function(e){function t(e,i){this._audio=null,this._onEnd=null,this._miniSound=null,t.__super.call(this),this._audio=e,this._miniSound=i,this._onEnd=t.bindToThis(this.__onEnd,this),e.onEnded(this._onEnd)}o(t,"laya.wx.mini.MiniSoundChannel",e,"MiniSoundChannel$4");var n=t.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.play=function(){this.isStopped=!1,jh.addChannel(this),this._audio.play()},n.stop=function(){this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.stop(),this._audio.offEnded(null),this._audio.destroy(),this._audio=null,this._miniSound=null,this._onEnd=null)},n.pause=function(){this.isStopped=!0,this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"autoplay",function(){return this._audio.autoplay},function(e){this._audio.autoplay=e}),s(0,n,"loop",function(){return this._audio.loop},function(e){this._audio.loop=e}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"startTime",null,function(e){this._audio&&(this._audio.startTime=e)}),t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t}(Pu),vx=function(e){function t(e){this._audio=null,this._onEnd=null,this._onCanplay=null,this._onError=null,this._miniSound=null,t.__super.call(this),this._audio=e._sound,this._miniSound=e,this._onEnd=t.bindToThis(this.__onEnd,this),this._onCanplay=t.bindToThis(this.onCanPlay,this),this._onError=t.bindToThis(this.onError,this),this.addEventListener()}o(t,"laya.qg.mini.MiniSoundChannel",e,"MiniSoundChannel$5");var n=t.prototype;return n.addEventListener=function(){this._audio.onError(this._onError),this._audio.onCanplay(this._onCanplay)},n.offEventListener=function(){this._audio.offError(this._onError),this._audio.offCanplay(this._onCanplay),this._audio.offEnded(this._onEnd)},n.onError=function(e){console.log("-----1---------------minisound-----url:",this.url),this.event("error",[e]),this._audio&&(this._miniSound.dispose(),this.offEventListener(),this._audio=this._miniSound=null)},n.onCanPlay=function(){this._audio&&(this.event("complete"),this.offEventListener(),this._audio.onEnded(this._onEnd),this.isStopped?this.stop():this.play())},n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.play=function(){this.isStopped=!1,jh.addChannel(this),this._audio&&this._audio.src&&this._audio.play()},n.stop=function(){e.prototype.stop.call(this),this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.stop(),this.loop||(this.offEventListener(),this._miniSound.dispose(),this._miniSound=null,this._audio=null))},n.pause=function(){this.isStopped=!0,this._audio&&this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"autoplay",function(){return this._audio?this._audio.autoplay:!1},function(e){this._audio&&(this._audio.autoplay=e)}),s(0,n,"loop",function(){return this._audio?this._audio.loop:!1},function(e){this._audio&&(this._audio.loop=e)}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"startTime",function(){return this._audio?this._audio.startTime:0},function(e){this._audio&&(this._audio.startTime=e)}),t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t}(Pu),yx=function(e){function t(){t.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new gl,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new el(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}o(t,"laya.d3.core.material.BaseMaterial",e);var r=t.prototype;return i.imps(r,{"laya.d3.core.IClone":!0}),r._addShaderDefine=function(e){this._shaderDefineValue|=e},r._removeShaderDefine=function(e){this._shaderDefineValue&=~e},r._addDisablePublicShaderDefine=function(e){this._disablePublicShaderDefine|=e},r._removeDisablePublicShaderDefine=function(e){this._disablePublicShaderDefine&=~e},r._setBuffer=function(e,t){var i=this._shaderValues;i.setValue(e,t),this._values[e]=t},r._getBuffer=function(e){return this._values[e]},r._setMatrix4x4=function(e,t){this._shaderValues.setValue(e,t?t.elements:null),this._values[e]=t},r._getMatrix4x4=function(e){return this._values[e]},r._setInt=function(e,t){var i=this._shaderValues;i.setValue(e,t),this._values[e]=t},r._getInt=function(e){return this._values[e]},r._setNumber=function(e,t){var i=this._shaderValues;i.setValue(e,t),this._values[e]=t},r._getNumber=function(e){return this._values[e]},r._setBool=function(e,t){var i=this._shaderValues;i.setValue(e,t),this._values[e]=t},r._getBool=function(e){return this._values[e]},r._setVector2=function(e,t){var i=this._shaderValues;i.setValue(e,t?t.elements:null),this._values[e]=t},r._getVector2=function(e){return this._values[e]},r._setColor=function(e,t){var i=this._shaderValues;i.setValue(e,t?t.elements:null),this._values[e]=t},r._getColor=function(e){return this._values[e]},r._setTexture=function(e,t){var i=this._values[e];this._values[e]=t,this._shaderValues.setValue(e,t),this.referenceCount>0&&(i&&i._removeReference(),t&&t._addReference())},r._getTexture=function(e){return this._values[e]},r._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},r._getShader=function(e,t,i){var n=(e|t)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(n,i,this._shaderDefineValue),this._shader},r._setRenderStateBlendDepth=function(){var e=ur.mainContext;switch(Fs.setDepthMask(e,this.depthWrite),0===this.depthTest?Fs.setDepthTest(e,!1):(Fs.setDepthTest(e,!0),Fs.setDepthFunc(e,this.depthTest)),this.blend){case 0:Fs.setBlend(e,!1);break;case 1:Fs.setBlend(e,!0),Fs.setBlendFunc(e,this.srcBlend,this.dstBlend);break;case 2:Fs.setBlend(e,!0)}},r._setRenderStateFrontFace=function(e,t){var i=ur.mainContext,n=0;switch(this.cull){case 0:Fs.setCullFace(i,!1);break;case 1:Fs.setCullFace(i,!0),n=e?t&&t._isFrontFaceInvert?2305:2304:t&&t._isFrontFaceInvert?2304:2305,Fs.setFrontFace(i,n);break;case 2:Fs.setCullFace(i,!0),n=e?t&&t._isFrontFaceInvert?2304:2305:t&&t._isFrontFaceInvert?2305:2304,Fs.setFrontFace(i,n)}},r.onAsynLoaded=function(e,t,i){var n=t[0],o=t[1];switch(n.version){case"LAYAMATERIAL:01":var s=0,r=0,a=n.props;for(var l in a)switch(l){case"vectors":var h=a[l];for(s=0,r=h.length;r>s;s++){var c=h[s],u=c.value;switch(u.length){case 2:this[c.name]=new ul(u[0],u[1]);break;case 3:this[c.name]=new rl(u[0],u[1],u[2]);break;case 4:this[c.name]=new el(u[0],u[1],u[2],u[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var d=a[l];for(s=0,r=d.length;r>s;s++){var p=d[s],f=p.path;f&&(this[p.name]=Tu.getRes(o[f]))}break;case"defines":var _=a[l];for(s=0,r=_.length;r>s;s++){var m=this._shaderCompile.getMaterialDefineByName(_[s]);this._addShaderDefine(m)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[l]=a[l];break;case"renderQueue":var g=a[l];switch(g){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[l]=a[l]}break;case"LAYAMATERIAL:02":a=n.props;for(l in a)switch(l){case"vectors":for(h=a[l],s=0,r=h.length;r>s;s++)switch(c=h[s],u=c.value,u.length){case 2:this[c.name]=new ul(u[0],u[1]);break;case 3:this[c.name]=new rl(u[0],u[1],u[2]);break;case 4:this[c.name]=new el(u[0],u[1],u[2],u[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(d=a[l],s=0,r=d.length;r>s;s++)p=d[s],f=p.path,f&&(this[p.name]=Tu.getRes(o[f]));break;case"defines":for(_=a[l],s=0,r=_.length;r>s;s++)m=this._shaderCompile.getMaterialDefineByName(_[s]),this._addShaderDefine(m);break;default:this[l]=a[l]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},r._addReference=function(){e.prototype._addReference.call(this);for(var t=this._values.length,i=0,n=t;n>i;i++){var o=this._values[i];o&&o instanceof laya.d3.resource.BaseTexture&&o._addReference()}},r._removeReference=function(){e.prototype._removeReference.call(this);for(var t=this._values.length,i=0,n=t;n>i;i++){var o=this._values[i];o&&o instanceof laya.d3.resource.BaseTexture&&o._removeReference()}},r.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null;for(var e=this._values.length,t=0,i=e;i>t;t++){var n=this._values[t];n&&n instanceof laya.d3.resource.BaseTexture&&n._removeReference()}this._values=null},r.setShaderName=function(e){var t=CS.nameKey.getID(e);if(-1===t)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=Id._preCompileShader[t]},r.cloneTo=function(e){var t=e;t.name=this.name,t.cull=this.cull,t.blend=this.blend,t.srcBlend=this.srcBlend,t.dstBlend=this.dstBlend,t.srcBlendRGB=this.srcBlendRGB,t.dstBlendRGB=this.dstBlendRGB,t.srcBlendAlpha=this.srcBlendAlpha,t.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(t.blendConstColor),t.blendEquation=this.blendEquation,t.blendEquationRGB=this.blendEquationRGB,t.blendEquationAlpha=this.blendEquationAlpha,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.renderQueue=this.renderQueue,t._shader=this._shader,t._disablePublicShaderDefine=this._disablePublicShaderDefine,t._shaderDefineValue=this._shaderDefineValue;var i=0,n=0,o=t._shaderValues;t._shaderValues.data.length=this._shaderValues.data.length;var s=this._values.length,r=t._values;for(r.length=s,i=0,n=s;n>i;i++){var a=this._values[i];if(a)if("number"==typeof a)r[i]=a,o.data[i]=a;else if("number"==typeof a&&Math.floor(a)==a)r[i]=a,o.data[i]=a;else if("boolean"==typeof a)r[i]=a,o.data[i]=a;else if(a instanceof laya.d3.math.Vector2){var l=r[i]||(r[i]=new ul);a.cloneTo(l),o.data[i]=l.elements}else if(a instanceof laya.d3.math.Vector3){var h=r[i]||(r[i]=new rl);a.cloneTo(h),o.data[i]=h.elements}else if(a instanceof laya.d3.math.Vector4){var c=r[i]||(r[i]=new el);a.cloneTo(c),o.data[i]=c.elements}else if(a instanceof laya.d3.math.Matrix4x4){var u=r[i]||(r[i]=new ol);a.cloneTo(u),o.data[i]=u.elements}else a instanceof laya.d3.resource.BaseTexture&&(r[i]=a,o.data[i]=a)}},r.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},s(0,r,"alphaTest",function(){return this._alphaTest},function(e){this._alphaTest=e,e?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),s(0,r,"alphaTestValue",function(){return this._getNumber(0)},function(e){this._setNumber(0,e)}),t.__init__=function(){t.SHADERDEFINE_ALPHATEST=t.shaderDefines.registerDefine("ALPHATEST")},t.RENDERQUEUE_OPAQUE=2e3,t.RENDERQUEUE_ALPHATEST=2450,t.RENDERQUEUE_TRANSPARENT=3e3,t.CULL_NONE=0,t.CULL_FRONT=1,t.CULL_BACK=2,t.BLEND_DISABLE=0,t.BLEND_ENABLE_ALL=1,t.BLEND_ENABLE_SEPERATE=2,t.BLENDPARAM_ZERO=0,t.BLENDPARAM_ONE=1,t.BLENDPARAM_SRC_COLOR=768,t.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,t.BLENDPARAM_DST_COLOR=774,t.BLENDPARAM_ONE_MINUS_DST_COLOR=775,t.BLENDPARAM_SRC_ALPHA=770,t.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,t.BLENDPARAM_DST_ALPHA=772,t.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,t.BLENDPARAM_SRC_ALPHA_SATURATE=776,t.BLENDEQUATION_ADD=0,t.BLENDEQUATION_SUBTRACT=1,t.BLENDEQUATION_REVERSE_SUBTRACT=2,t.DEPTHTEST_OFF=0,t.DEPTHTEST_NEVER=512,t.DEPTHTEST_LESS=513,t.DEPTHTEST_EQUAL=514,t.DEPTHTEST_LEQUAL=515,t.DEPTHTEST_GREATER=516,t.DEPTHTEST_NOTEQUAL=517,t.DEPTHTEST_GEQUAL=518,t.DEPTHTEST_ALWAYS=519,t.SHADERDEFINE_ALPHATEST=1,t.ALPHATESTVALUE=0,n(t,["shaderDefines",function(){return this.shaderDefines=new ml}]),t}(xu),bx=function(e){function t(e,i){this._audio=null,this._onEnd=null,this._miniSound=null,t.__super.call(this),this._audio=e,this._miniSound=i,this._onEnd=t.bindToThis(this.__onEnd,this),e.onEnded(this._onEnd)}o(t,"laya.vv.mini.MiniSoundChannel",e,"MiniSoundChannel$6");var n=t.prototype;return n.__onEnd=function(){return Wu._audioCache[this.url]=this._miniSound,1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.play=function(){this.isStopped=!1,jh.addChannel(this),this._audio.play()},n.stop=function(){this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.stop(),this._audio.offEnded(null),this._miniSound.dispose(),this._audio=null,this._miniSound=null,this._onEnd=null)},n.pause=function(){this.isStopped=!0,this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"autoplay",function(){return this._audio.autoplay},function(e){this._audio.autoplay=e}),s(0,n,"loop",function(){return this._audio.loop},function(e){this._audio.loop=e}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"startTime",null,function(e){this._audio&&(this._audio.startTime=e)}),t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t}(Pu),Ex=function(e){function t(){t.__super.call(this)}o(t,"laya.d3.core.Avatar",e);var n=t.prototype;return i.imps(n,{"laya.d3.core.IClone":!0}),n._initCloneToAnimator=function(e,t){t._avatarNodeMap[e.name]=e,t._avatarNodes.push(e);for(var i=0,n=e.getChildCount();n>i;i++)this._initCloneToAnimator(e.getChildByIndex(i),t)},n._parseNode=function(e,t){var i=e.props.name;if(t.name=i,t._parent){var n=e.customProps,o=t.transform;o._localRotationEuler=new Float32Array(3),o.setLocalPosition(new Float32Array(n.translate)),o.setLocalRotation(new Float32Array(n.rotation)),o.setLocalScale(new Float32Array(n.scale)),o._setWorldMatrixAndUpdate(new Float32Array(16))}for(var s=e.child,r=0,a=s.length;a>r;r++){var l=s[r],h=new Ha;t.addChild(h),this._parseNode(l,h)}},n.onAsynLoaded=function(e,t,i){if(this._rootNode=new Ha,t.version){this._version=t.version;var n=t.rootNode;n&&this._parseNode(n,this._rootNode)}else this._parseNode(t,this._rootNode);this._endLoaded()},n._cloneDatasToAnimator=function(e){var t=this._rootNode.clone();t.transform._setWorldMatrixIgnoreUpdate(null);var i=[];e._avatarNodeMap={},e._avatarNodes=i,this._initCloneToAnimator(t,e)},n.cloneTo=function(e){var t=e,i=this._rootNode.clone();t._rootNode=i},n.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},t.load=function(e){return i.loader.create(e,null,null,t)},t}(xu),xx=function(e){function t(e,i,n,o,s,r,a,l,h){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===n&&(n=6408),void 0===o&&(o=5121),void 0===s&&(s=34041),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===l&&(l=-1),void 0===h&&(h=-1),this._type=1,this._w=e,this._h=i,this._surfaceFormat=n,this._surfaceType=o,this._depthStencilFormat=s,Ns.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=r,this._repeat=a,this._minFifter=l,this._magFifter=h,this._createWebGLRenderTarget(),this.bitmap.lock=!0,t.__super.call(this,this.bitmap,Vu.INV_UV)}o(t,"laya.webgl.resource.RenderTarget2D",e);var n=t.prototype;return i.imps(n,{"laya.resource.IDispose":!0}),n.getType=function(){return this._type},n.getTexture=function(){return this},n.size=function(e,t){this._w==e&&this._h==t||(this._w=e,this._h=t,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},n.release=function(){this.destroy()},n.recycle=function(){t.POOL.push(this)},n.start=function(){var e=ur.mainContext;return this._preRenderTarget=Js.curRenderTarget,Js.curRenderTarget=this,e.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(e.viewport(0,0,this._w,this._h),this._svWidth=Js.width,this._svHeight=Js.height,Js.width=this._w,Js.height=this._h,_x.activeShader=null),this},n.clear=function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1);var o=ur.mainContext;o.clearColor(e,t,i,n);var s=16384;switch(this._depthStencilFormat){case 33189:s|=256;break;case 36168:s|=1024;break;case 34041:s|=256,s|=1024}o.clear(s)},n.end=function(){var e=ur.mainContext;e.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,Js.curRenderTarget=this._preRenderTarget,1==this._type?(e.viewport(0,0,this._svWidth,this._svHeight),Js.width=this._svWidth,Js.height=this._svHeight,_x.activeShader=null):e.viewport(0,0,i.stage.width,i.stage.height)},n.getData=function(e,t,i,n){var o=ur.mainContext;o.bindFramebuffer(36160,this.bitmap.frameBuffer);
var s=36053===o.checkFramebufferStatus(36160);if(!s)return o.bindFramebuffer(36160,null),null;var r=new Uint8Array(this._w*this._h*4);return o.readPixels(e,t,i,n,this._surfaceFormat,this._surfaceType,r),o.bindFramebuffer(36160,null),r},n.destroy=function(t){void 0===t&&(t=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,e.prototype.destroy.call(this))},n.dispose=function(){},n._createWebGLRenderTarget=function(){this.bitmap=new xS(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(e){this.event("recovered")})},s(0,n,"source",function(){return this._alreadyResolved?i.superGet(Vu,this,"source"):null}),s(0,n,"magFifter",function(){return this._magFifter}),s(0,n,"mipMap",function(){return this._mipMap}),s(0,n,"minFifter",function(){return this._minFifter}),s(0,n,"surfaceType",function(){return this._surfaceType}),s(0,n,"depthStencilFormat",function(){return this._depthStencilFormat}),s(0,n,"surfaceFormat",function(){return this._surfaceFormat}),t.create=function(e,i,n,o,s,r,a,l,h){void 0===n&&(n=6408),void 0===o&&(o=5121),void 0===s&&(s=34041),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===l&&(l=-1),void 0===h&&(h=-1);var c=t.POOL.pop();return c||(c=new t(e,i)),c.bitmap&&c._w==e&&c._h==i&&c._surfaceFormat==n&&c._surfaceType==o&&c._depthStencilFormat==s&&c._mipMap==r&&c._repeat==a&&c._minFifter==l&&c._magFifter==h||(c._w=e,c._h=i,c._surfaceFormat=n,c._surfaceType=o,c._depthStencilFormat=s,Ns.isConchWebGL&&34041===c._depthStencilFormat&&(c._depthStencilFormat=33189),c._mipMap=r,c._repeat=a,c._minFifter=l,c._magFifter=h,c.release(),c._createWebGLRenderTarget()),c},t.TYPE2D=1,t.TYPE3D=2,t.POOL=[],t}(Vu),Sx=function(e){function t(){this._realTimeCurrentFrameIndexes=null,this._realTimeCurrentTimes=null,this._fullKeyframeIndicesCache=null,this._animationDatasCache=null,this._avatarDatasCache=null,this._skinnedDatasCache=null,this._version=null,this._nodes=null,this._nodesMap=null,this._cachePropertyMap=null,this._nodeToCachePropertyMap=null,this._unCachePropertyMap=null,this._duration=NaN,this._frameRate=0,this._animationEvents=null,this._publicClipDatas=null,this.islooping=!1,t.__super.call(this),this._fullKeyframeIndicesCache={},this._animationDatasCache=[],this._avatarDatasCache=[],this._skinnedDatasCache=[],this._animationEvents=[]}o(t,"laya.d3.animation.AnimationClip",e);var n=t.prototype;return n.duration=function(){return this._duration},n._hermiteInterpolate=function(e,t,i,n){for(var o=e.data,s=e.outTangent,r=e.next,a=r.data,l=r.inTangent,h=!1,c=NaN,u=NaN,d=NaN,p=NaN,f=0,_=n.length;_>f;f++){var m=s[f],g=l[f];if(Number.isFinite(m)&&Number.isFinite(g)){if(!h){var v=t*t,y=v*t;c=2*y-3*v+1,u=y-2*v+t,d=y-v,p=-2*y+3*v,h=!0}n[f]=c*o[f]+u*m*i+d*g*i+p*a[f]}else n[f]=o[f]}},n._getFullKeyframeIndicesWithCache=function(e){return this._fullKeyframeIndicesCache[e]},n._cacheFullKeyframeIndices=function(e,t){this._fullKeyframeIndicesCache[e]=t},n._getAnimationDataWithCache=function(e,t){var i=this._animationDatasCache[e];return i?i[t]:null},n._cacheAnimationData=function(e,t,i){var n=this._animationDatasCache[e]||(this._animationDatasCache[e]=[]);n[t]=i},n._getAvatarDataWithCache=function(e,t,i){var n=this._avatarDatasCache[e.id];if(n){var o=n[t];return o?o[i]:null}return null},n._cacheAvatarData=function(e,t,i,n){var o=this._avatarDatasCache[e.id]||(this._avatarDatasCache[e.id]=[]),s=o[t]||(o[t]=[]);s[i]=n},n._evaluateAnimationlDatasCacheMode=function(e,t,i,n,o){for(var s=0,r=0,a=0,l=o?o.length:this._nodes.length;l>a;a++){var h=o?o[a]:a,c=this._nodes[h],u=c._cacheProperty;if(e[h]){var d,p=t[h],f=p[i.currentFrameIndex],_=0;if(-1!==f){var m=c.keyFrames[f],g=m.next;if(g){o&&!u?(d=n[h],d||(d=n[h]=new Float32Array(c.keyFrameWidth))):(d=new Float32Array(c.keyFrameWidth),n[a]=d);var v=NaN,y=m.duration;v=0!==y?(i.currentFrameTime-m.startTime)/y:0,this._hermiteInterpolate(m,v,y,d)}else{if(o&&!u)d=n[h],d||(d=n[h]=new Float32Array(c.keyFrameWidth));else{if(_=i._lastFrameIndex,-1!==_&&p[_]===f)continue;d=new Float32Array(c.keyFrameWidth),n[a]=d}var b=m.data;for(s=0,r=d.length;r>s;s++)d[s]=b[s]}}else{if(o&&!u)d=n[h],d||(d=n[h]=new Float32Array(c.keyFrameWidth));else{if(_=i._lastFrameIndex,-1!==_&&p[_]===f)continue;d=new Float32Array(c.keyFrameWidth),n[a]=d}var E=c.keyFrames[0].data;for(s=0,r=d.length;r>s;s++)d[s]=E[s]}}}},n._evaluateAnimationlDatasRealTime=function(e,t,i,n){var o=0,s=0,r=this._nodes;if(!this._realTimeCurrentFrameIndexes){for(this._realTimeCurrentFrameIndexes=new Int32Array(r.length),o=0,s=r.length;s>o;o++)this._realTimeCurrentFrameIndexes[o]=-1;this._realTimeCurrentTimes=new Float32Array(r.length)}for(o=0,s=n?n.length:this._nodes.length;s>o;o++){var a=n?n[o]:o,l=r[a];t<this._realTimeCurrentTimes[a]&&(this._realTimeCurrentFrameIndexes[a]=-1),this._realTimeCurrentTimes[a]=t;for(var h=this._realTimeCurrentFrameIndexes[a]+1,c=l.keyFrames,u=c.length;u>h;){if(c[h].startTime>t){this._realTimeCurrentFrameIndexes[a]=h-1;break}h++}h===u&&(this._realTimeCurrentFrameIndexes[a]=u-1);var d=0,p=0,f=i[a];f||(f=i[a]=new Float32Array(l.keyFrameWidth));var _=c[this._realTimeCurrentFrameIndexes[a]];if(_){var m=_.next;if(m){var g=_.duration,v=NaN;v=0!==g?(t-_.startTime)/g:0,this._hermiteInterpolate(_,v,g,f)}else{var y=_.data;for(d=0,p=f.length;p>d;d++)f[d]=y[d]}}else{var b=l.keyFrames[0].data;for(d=0,p=f.length;p>d;d++)f[d]=b[d]}var E=e[a];E&&(n?Ha._propertySetFuncs[l.propertyNameID](E,null,f):Ha._propertySetFuncs[l.propertyNameID](null,E,f))}},n._binarySearchEventIndex=function(e){for(var t=0,i=this._animationEvents.length-1,n=0;i>=t;){n=Math.floor((t+i)/2);var o=this._animationEvents[n].time;if(o==e)return n;o>e?i=n-1:t=n+1}return t},n.addEvent=function(e){var t=this._binarySearchEventIndex(e.time);this._animationEvents.splice(t,0,e)},n.onAsynLoaded=function(e,t,i){var n=new Vr(t);switch(this._version=n.readUTFString(),this._version){case"LAYAANIMATION:01":Wa.parse(this,n);break;case"LAYAANIMATION:02":Fa.parse(this,n)}this.completeCreate(),this._endLoaded()},n.disposeResource=function(){this._realTimeCurrentFrameIndexes=null,this._realTimeCurrentTimes=null,this._fullKeyframeIndicesCache=null,this._animationDatasCache=null,this._avatarDatasCache=null,this._skinnedDatasCache=null,this._version=null,this._nodes=null,this._nodesMap=null,this._cachePropertyMap=null,this._nodeToCachePropertyMap=null,this._unCachePropertyMap=null,this._publicClipDatas=null},t.load=function(e){return i.loader.create(e,null,null,t)},t}(xu),Cx=function(e){function t(){this._terrainHeightData=null,this._width=0,this._height=0,this._bitType=0,this._value=NaN,t.__super.call(this)}o(t,"laya.d3.terrain.TerrainHeightData",e);var n=t.prototype;return n.onAsynLoaded=function(e,t,i){this._width=i[0],this._height=i[1],this._bitType=i[2],this._value=i[3];var n,o=NaN;8==this._bitType?(n=new Uint8Array(t),o=1/255):16==this._bitType&&(n=new Int16Array(t),o=1/32766),this._terrainHeightData=new Float32Array(this._height*this._width);for(var s=0,r=this._height*this._width;r>s;s++)this._terrainHeightData[s]=n[s]*o*this._value/2;this._endLoaded()},t.load=function(e,n,o,s,r){return i.loader.create(e,null,null,t,[n,o,s,r],1,!1)},t}(xu),Tx=function(e){function t(){this._version=NaN,this._cameraCoordinateInverse=!1,this._gridSize=NaN,this._chunkNumX=0,this._chunkNumZ=0,this._heightDataX=0,this._heightDataZ=0,this._heightDataBitType=0,this._heightDataValue=NaN,this._heightDataUrl=null,this._detailTextureInfos=null,this._chunkInfos=null,this._heightData=null,this._materialInfo=null,this._alphaMaps=null,this._normalMaps=null,t.__super.call(this)}o(t,"laya.d3.terrain.TerrainRes",e);var n=t.prototype;return n.parseData=function(e){var t=e[0],i=e[1];if(this._version=t.version,1==this._version){this._cameraCoordinateInverse=t.cameraCoordinateInverse,this._gridSize=t.gridSize,this._chunkNumX=t.chunkNumX,this._chunkNumZ=t.chunkNumZ;var n=t.heightData;if(this._heightDataX=n.numX,this._heightDataZ=n.numZ,this._heightDataBitType=n.bitType,this._heightDataValue=n.value,this._heightDataUrl=i[n.url],this._materialInfo=new pl,t.material){var o=t.material.ambient,s=t.material.diffuse,a=t.material.specular;this._materialInfo.ambientColor=new rl(o[0],o[1],o[2]),this._materialInfo.diffuseColor=new rl(s[0],s[1],s[2]),this._materialInfo.specularColor=new el(a[0],a[1],a[2],a[3])}var l=t.detailTexture;this._detailTextureInfos=r(l.length);for(var h=0;h<l.length;h++){var c=l[h],u=new fl;u.diffuseTexture=i[c.diffuse],u.normalTexture=c.normal?i[c.normal]:null,c.scale?u.scale=new ul(c.scale[0],c.scale[1]):u.scale=new ul(1,1),c.offset?u.offset=new ul(c.offset[0],c.offset[1]):u.offset=new ul(0,0),this._detailTextureInfos[h]=u}var d=t.alphaMap;for(this._alphaMaps=r(d.length),h=0;h<this._alphaMaps.length;h++)this._alphaMaps[h]=t.alphaMap[h];var p=t.normalMap;for(this._normalMaps=r(p.length),h=0;h<this._normalMaps.length;h++)this._normalMaps[h]=t.normalMap[h];var f=t.chunkInfo;if(this._chunkNumX*this._chunkNumZ!=f.length)return alert("terrain data error"),!1;for(this._chunkInfos=r(f.length),h=0;h<f.length;h++){var _=f[h],m=new dl,g=_.alphaMap.length,v=_.detailID.length;if(g!=v)return alert("terrain chunk data error"),!1;m.alphaMap=r(g),m.detailID=r(v),m.normalMap=i[this._normalMaps[_.normalMap]];for(var y=0;g>y;y++){m.alphaMap[y]=i[this._alphaMaps[_.alphaMap[y]]];var b=_.detailID[y],E=b.length;m.detailID[y]=new Uint8Array(E);for(var x=0;E>x;x++)m.detailID[y][x]=b[x]}this._chunkInfos[h]=m}this._heightData=Tu.getRes(this._heightDataUrl),this.onLoadTerrainComplete(this._heightData)}return!0},n.onLoadTerrainComplete=function(e){this._endLoaded()},n.onAsynLoaded=function(e,t,i){this.parseData(t)},t.load=function(e){return i.loader.create(e,null,null,t,null,1,!1)},t}(xu),Ix=function(e){function t(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,t.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}o(t,"laya.d3.resource.BaseTexture",e);var i=t.prototype;return s(0,i,"source",function(){return this.activeResource(),this._source}),s(0,i,"format",function(){return this._format}),s(0,i,"magFifter",function(){return this._magFifter},function(e){this._magFifter=e,e!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(e)}),s(0,i,"mipmap",function(){return this._mipmap},function(e){this._mipmap=e,this._mipmap!=e&&this._conchTexture&&this._conchTexture.setMipMap(e)}),s(0,i,"wrapModeV",function(){return this._wrapModeV}),s(0,i,"height",function(){return this._height}),s(0,i,"repeat",function(){return this._repeat},function(e){if(this._repeat!==e&&(this._repeat=e,this._source)){var t=ur.mainContext;Fs.bindTexture(t,this._type,this._source);var i=Th.isPOT(this._width,this._height);i&&this._repeat?(t.texParameteri(this._type,10242,10497),t.texParameteri(this._type,10243,10497)):(t.texParameteri(this._type,10242,33071),t.texParameteri(this._type,10243,33071))}}),s(0,i,"minFifter",function(){return this._minFifter},function(e){this._minFifter=e,this._minFifter!=e&&this._conchTexture&&this._conchTexture.setMinFifter(e)}),s(0,i,"wrapModeU",function(){return this._wrapModeU}),s(0,i,"defaulteTexture",function(){return HS.grayTexture}),s(0,i,"size",function(){return this._size}),s(0,i,"width",function(){return this._width}),t.WARPMODE_REPEAT=0,t.WARPMODE_CLAMP=1,t}(xu),Ax=function(e){function t(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,t.__super.call(this),this._boundingBoxCorners=r(8,null)}o(t,"laya.d3.resource.models.BaseMesh",e);var i=t.prototype;return i._getPositions=function(){throw new Error("未Override,请重载该属性！")},i._generateBoundingObject=function(){this._boundingSphere=new hl(new rl,0),hl.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new nl(new rl,new rl),nl.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},i.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},i.getRenderElement=function(e){throw new Error("未Override,请重载该属性！")},s(0,i,"boundingBoxCorners",function(){return this._boundingBoxCorners}),s(0,i,"boundingBox",function(){return this._boundingBox}),s(0,i,"boundingSphere",function(){return this._boundingSphere}),s(0,i,"subMeshCount",function(){return this._subMeshCount}),t}(xu),Nx=function(e){function t(e,i){this._audio=null,this._onEnd=null,this._miniSound=null,t.__super.call(this),this._audio=e,this._miniSound=i,this._onEnd=t.bindToThis(this.__onEnd,this),e.onEnded(this._onEnd)}o(t,"laya.bili.mini.MiniSoundChannel",e,"MiniSoundChannel$7");var n=t.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.play=function(){this.isStopped=!1,jh.addChannel(this),this._audio.play()},n.stop=function(){this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.pause(),this._audio.offEnded(null),this._audio=null,this._miniSound=null,this._onEnd=null)},n.pause=function(){this.isStopped=!0,this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"autoplay",function(){return this._audio.autoplay},function(e){this._audio.autoplay=e}),s(0,n,"loop",function(){return this._audio.loop},function(e){this._audio.loop=e}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"startTime",null,function(e){this._audio&&(this._audio.startTime=e)}),t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t}(Pu),Px=function(e){function t(e){this._owner=null,this._trailRenderElements=null,this._minVertexDistance=NaN,this._widthMultiplier=NaN,this._time=NaN,this._widthCurve=null,this._colorGradient=null,this._textureMode=0,this._curtime=0,this._curSubTrailFinishCurTime=0,this._curSubTrailFinished=!1,this._hasLifeSubTrail=!1,this._trailTotalLength=0,this._trailSupplementLength=0,this._trailDeadLength=0,this._isStart=!1,this._trailRenderElementIndex=0,t.__super.call(this),this._curSubTrailFinishPosition=new rl,this._curSubTrailFinishDirection=new rl,this._owner=e,this._trailRenderElements=[],this.addRenderElement()}o(t,"laya.d3.core.trail.TrailFilter",e);var i=t.prototype;return i.getRenderElementsCount=function(){return this._trailRenderElements.length},i.addRenderElement=function(){for(var e=0;e<this._trailRenderElements.length;e++)if(1==this._trailRenderElements[e]._isDead)return this._trailRenderElements[e].reActivate(),e;var t=new la(this);return this._trailRenderElements.push(t),this._trailRenderElements.length-1},i.getRenderElement=function(e){return this._trailRenderElements[e]},i._update=function(e){this._curtime+=e.elapsedTime/1e3,this._owner._render._setShaderValueNumber(3,this._curtime),this._curSubTrailFinished&&(this._curSubTrailFinished=!1,this._trailRenderElementIndex=this.addRenderElement(),this.event("trailfilterchange",[this._trailRenderElementIndex,this._trailRenderElements[this._trailRenderElementIndex]]))},i.reset=function(){for(var e=0;e<this._trailRenderElements.length;e++)this._trailRenderElements[e].reActivate();this._isStart=!1,this._hasLifeSubTrail=!1,this._curSubTrailFinished=!1,this._curSubTrailFinishCurTime=0,this._trailTotalLength=0,this._trailSupplementLength=0,this._trailDeadLength=0},i._destroy=function(){e.prototype._destroy.call(this);for(var t=0;t<this._trailRenderElements.length;t++)this._trailRenderElements[t]._destroy();this._trailRenderElements=null,this._widthCurve=null,this._colorGradient=null,this._curSubTrailFinishPosition=null,this._curSubTrailFinishDirection=null},s(0,i,"textureMode",function(){return this._textureMode},function(e){this._textureMode=e}),s(0,i,"colorGradient",function(){return this._colorGradient},function(e){this._colorGradient=e,this._owner._render._setShaderValueBuffer(7,e._colorKeyData),this._owner._render._setShaderValueBuffer(8,e._alphaKeyData),0==e.mode?this._owner._render._addShaderDefine(Uw.SHADERDEFINE_GRADIENTMODE_BLEND):this._owner._render._removeShaderDefine(Uw.SHADERDEFINE_GRADIENTMODE_BLEND)}),s(0,i,"widthCurve",function(){return this._widthCurve},function(e){this._widthCurve=e;var t=new Float32Array(4*e.length),i=0,n=0,o=0;for(i=0,n=e.length;n>i;i++)t[o++]=e[i].time,t[o++]=e[i].inTangent,t[o++]=e[i].outTangent,t[o++]=e[i].value;this._owner._render._setShaderValueBuffer(5,t),this._owner._render._setShaderValueInt(6,e.length)}),s(0,i,"widthMultiplier",function(){return this._widthMultiplier},function(e){this._widthMultiplier=e}),s(0,i,"minVertexDistance",function(){return this._minVertexDistance},function(e){this._minVertexDistance=e}),s(0,i,"time",function(){return this._time},function(e){this._time=e,this._owner._render._setShaderValueNumber(4,e)}),t}(Yu),Rx=function(e){function t(e){t.__super.call(this,e)}o(t,"laya.d3.core.trail.TrailRenderer",e);var i=t.prototype;return i._calculateBoundingBox=function(){var e=this._boundingBox.min.elements;e[0]=-Number.MAX_VALUE,e[1]=-Number.MAX_VALUE,e[2]=-Number.MAX_VALUE;var t=this._boundingBox.min.elements;t[0]=Number.MAX_VALUE,t[1]=Number.MAX_VALUE,t[2]=Number.MAX_VALUE},i._calculateBoundingSphere=function(){var e=this._boundingSphere.center.elements;e[0]=0,e[1]=0,e[2]=0,this._boundingSphere.radius=Number.MAX_VALUE},i._renderUpdate=function(e){return!0},t}(qu),Lx=function(e){function t(e){this._owner=null,this._sharedMesh=null,t.__super.call(this),this._owner=e}o(t,"laya.d3.core.MeshFilter",e);var i=t.prototype;return i._sharedMeshLoaded=function(){this.event("loaded")},i._destroy=function(){e.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},s(0,i,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),s(0,i,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),s(0,i,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),s(0,i,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),s(0,i,"sharedMesh",function(){return this._sharedMesh},function(e){var t=this._sharedMesh;t&&t._removeReference(),this._sharedMesh=e,e._addReference(),this.event("meshchanged",[this,t,e]),e.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),t}(Yu),Ox=function(e){function t(e){this._finalGravity=new rl,this._tempRotationMatrix=new ol,t.__super.call(this,e),this._defaultBoundBox=new nl(new rl,new rl),this._renderMode=-1,this.stretchedBillboardCameraSpeedScale=0,this.stretchedBillboardSpeedScale=0,this.stretchedBillboardLengthScale=1}o(t,"laya.d3.core.particleShuriKen.ShurikenParticleRender",e);var n=t.prototype;return n._calculateBoundingBox=function(){var e=this._boundingBox.min.elements;e[0]=-Number.MAX_VALUE,e[1]=-Number.MAX_VALUE,e[2]=-Number.MAX_VALUE;var t=this._boundingBox.min.elements;t[0]=Number.MAX_VALUE,t[1]=Number.MAX_VALUE,t[2]=Number.MAX_VALUE},n._calculateBoundingSphere=function(){var e=this._owner.particleSystem._boundingSphere,t=NaN,i=this._owner.transform,n=i.scale.elements,o=Math.abs(n[0]),s=Math.abs(n[1]),r=Math.abs(n[2]);t=o>=s&&o>=r?o:s>=r?s:r,rl.transformCoordinate(e.center,i.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=e.radius*t},n._renderUpdate=function(e){var t=this._owner.particleSystem;if(!i.stage.isVisibility||!t.isAlive)return!1;var n=this._owner.transform;switch(t.simulationSpace){case 0:break;case 1:this._setShaderValueColor(0,n.position),this._setShaderValueColor(1,n.rotation);break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.")}switch(t.scaleMode){case 0:var o=n.scale;this._setShaderValueColor(4,o),this._setShaderValueColor(5,o);break;case 1:var s=n.localScale;this._setShaderValueColor(4,s),this._setShaderValueColor(5,s);break;case 2:this._setShaderValueColor(4,n.scale),this._setShaderValueColor(5,rl.ONE)}var r=this._finalGravity.elements,a=qa.gravity.elements,l=t.gravityModifier;return r[0]=a[0]*l,r[1]=a[1]*l,r[2]=a[2]*l,this._setShaderValueBuffer(7,r),this._setShaderValueInt(11,t.simulationSpace),this._setShaderValueBool(8,t.threeDStartRotation),this._setShaderValueInt(6,t.scaleMode),this._setShaderValueInt(9,this.stretchedBillboardLengthScale),this._setShaderValueInt(10,this.stretchedBillboardSpeedScale),this._setShaderValueNumber(12,t._currentTime),ic.debugMode&&this._renderRenderableBoundBox(),!0},n._destroy=function(){e.prototype._destroy.call(this),this._mesh&&(this._mesh._removeReference(),this._mesh=null)},s(0,n,"boundingBox",function(){return this._owner.particleSystem.isAlive?(this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox):this._defaultBoundBox}),s(0,n,"mesh",function(){return this._mesh},function(e){this._mesh!==e&&(this._mesh&&this._mesh._removeReference(),this._mesh=e,e&&e._addReference(),this._owner.particleSystem._initBufferDatas())}),s(0,n,"renderMode",function(){return this._renderMode},function(e){if(this._renderMode!==e){switch(this._renderMode){case 0:this._removeShaderDefine(Ww.SHADERDEFINE_RENDERMODE_BILLBOARD);break;case 1:this._removeShaderDefine(Ww.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD);break;case 2:this._removeShaderDefine(Ww.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD);break;case 3:this._removeShaderDefine(Ww.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD);break;case 4:this._removeShaderDefine(Ww.SHADERDEFINE_RENDERMODE_MESH)}switch(this._renderMode=e,e){case 0:this._addShaderDefine(Ww.SHADERDEFINE_RENDERMODE_BILLBOARD);break;case 1:this._addShaderDefine(Ww.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD);break;case 2:this._addShaderDefine(Ww.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD);break;case 3:this._addShaderDefine(Ww.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD);break;case 4:this._addShaderDefine(Ww.SHADERDEFINE_RENDERMODE_MESH);break;default:throw new Error("ShurikenParticleRender: unknown renderMode Value.")}this._owner.particleSystem._initBufferDatas()}}),t}(qu),Mx=function(e){function t(e){t.__super.call(this),this._tempRotationMatrix=new ol,this._uvLength=new ul,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._owner=e,this._ownerRender=e.particleRender,this._boundingBoxCorners=r(8,null),this._boundingSphere=new hl(new rl,Number.MAX_VALUE),this._boundingBox=new nl(new rl(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),new rl(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)),this._currentTime=0,this._isEmitting=!1,this._isPlaying=!1,this._isPaused=!1,this._burstsIndex=0,this._frameRateTime=0,this._emissionTime=0,this._totalDelayTime=0,this._simulateUpdate=!1,this._bufferMaxParticles=1,this.duration=5,this.looping=!0,this.prewarm=!1,this.startDelayType=0,this.startDelay=0,this.startDelayMin=0,this.startDelayMax=0,this._startLifetimeType=0,this._startLifetimeConstant=5,this._startLifeTimeGradient=new ka,this._startLifetimeConstantMin=0,this._startLifetimeConstantMax=5,this._startLifeTimeGradientMin=new ka,this._startLifeTimeGradientMax=new ka,this._maxStartLifetime=5,this.startSpeedType=0,this.startSpeedConstant=5,this.startSpeedConstantMin=0,this.startSpeedConstantMax=5,this.threeDStartSize=!1,this.startSizeType=0,this.startSizeConstant=1,this.startSizeConstantSeparate=new rl(1,1,1),this.startSizeConstantMin=0,this.startSizeConstantMax=1,this.startSizeConstantMinSeparate=new rl(0,0,0),this.startSizeConstantMaxSeparate=new rl(1,1,1),this.threeDStartRotation=!1,this.startRotationType=0,this.startRotationConstant=0,this.startRotationConstantSeparate=new rl(0,0,0),this.startRotationConstantMin=0,this.startRotationConstantMax=0,this.startRotationConstantMinSeparate=new rl(0,0,0),this.startRotationConstantMaxSeparate=new rl(0,0,0),this.randomizeRotationDirection=0,this.startColorType=0,this.startColorConstant=new el(1,1,1,1),this.startColorConstantMin=new el(1,1,1,1),this.startColorConstantMax=new el(1,1,1,1),this.gravityModifier=0,this.simulationSpace=1,this.scaleMode=0,this.playOnAwake=!0,this._rand=new Za(0),this.autoRandomSeed=!0,this.randomSeed=new Uint32Array(1),this._randomSeeds=new Uint32Array(t._RANDOMOFFSET.length),this.isPerformanceMode=!0,this._emission=new Ta,this._emission.enbale=!0,this._owner.on("activeinhierarchychanged",this,this._onOwnerActiveHierarchyChanged)}o(t,"laya.d3.core.particleShuriKen.ShurikenParticleSystem",e);var a=t.prototype;return i.imps(a,{"laya.d3.core.IClone":!0,"laya.d3.core.render.IRenderable":!0}),a._getVertexBuffer=function(e){return void 0===e&&(e=0),0===e?this._vertexBuffer:null},a._getIndexBuffer=function(){return this._indexBuffer},a._generateBoundingSphere=function(){var e=this._boundingSphere.center.elements;e[0]=0,e[1]=0,e[2]=0,this._boundingSphere.radius=Number.MAX_VALUE},a._generateBoundingBox=function(){var e=this._owner,i=e.particleRender,n=this._boundingBox.min,o=this._boundingBox.max,s=0,r=0,a=NaN;switch(this.startLifetimeType){case 0:a=this.startLifetimeConstant;break;case 1:a=-Number.MAX_VALUE;var l=l;for(s=0,r=l.gradientCount;r>s;s++)a=Math.max(a,l.getValueByIndex(s));break;case 2:a=Math.max(this.startLifetimeConstantMin,this.startLifetimeConstantMax);break;case 3:a=-Number.MAX_VALUE;var h=h;for(s=0,r=h.gradientCount;r>s;s++)a=Math.max(a,h.getValueByIndex(s));var c=c;for(s=0,r=c.gradientCount;r>s;s++)a=Math.max(a,c.getValueByIndex(s))}var u=NaN,d=NaN;switch(this.startSpeedType){case 0:u=d=this.startSpeedConstant;break;case 1:break;case 2:u=this.startLifetimeConstantMin,d=this.startLifetimeConstantMax;break;case 3:}var p,f,_,m;this._shape&&this._shape.enable||(p=f=rl.ZERO,_=rl.ZERO,m=rl.UnitZ);var g=new rl(_.x*u,_.y*u,_.z*u),v=new rl(m.x*d,m.y*d,m.z*d);if(this._velocityOverLifetime&&this._velocityOverLifetime.enbale){var y,b,E=this._velocityOverLifetime.velocity;switch(E.type){case 0:y=b=E.constant;break;case 1:y=b=new rl(E.gradientX.getAverageValue(),E.gradientY.getAverageValue(),E.gradientZ.getAverageValue());break;case 2:y=E.constantMin,b=E.constantMax;break;case 3:y=new rl(E.gradientXMin.getAverageValue(),E.gradientYMin.getAverageValue(),E.gradientZMin.getAverageValue()),b=new rl(E.gradientXMax.getAverageValue(),E.gradientYMax.getAverageValue(),E.gradientZMax.getAverageValue())}}var x,S,w=this._owner.transform,C=w.position,T=t._tempVector39,I=T.elements,A=i.renderMode;switch(this.scaleMode){case 0:var N=w.scale;x=N,I[0]=N.x,I[1]=N.z,I[2]=N.y,1===A&&(S=N);break;case 1:var P=w.localScale;x=P,I[0]=P.x,I[1]=P.z,I[2]=P.y,1===A&&(S=P);break;case 2:x=w.scale,I[0]=I[1]=I[2]=1,1===A&&(S=rl.ONE)}var R,L;switch(this._velocityOverLifetime&&this._velocityOverLifetime.enbale||(R=new rl(g.x*a,g.y*a,g.z*a),L=new rl(v.x*a,v.y*a,v.z*a),2!=this.scaleMode?(rl.add(p,R,n),rl.multiply(x,n,n),rl.add(f,L,o),rl.multiply(x,o,o)):(rl.multiply(x,p,n),rl.add(n,R,n),rl.multiply(x,f,o),rl.add(o,L,o))),this.simulationSpace){case 0:break;case 1:rl.add(n,C,n),rl.add(o,C,o)}var O=NaN,M=NaN;switch(this.startSizeType){case 0:if(this.threeDStartSize){var D=D;O=Math.max(D.x,D.y),1===A&&(M=D.y)}else O=this.startSizeConstant,1===A&&(M=this.startSizeConstant);break;case 1:break;case 2:if(this.threeDStartSize){var k=k;O=Math.max(k.x,k.y),1===A&&(M=k.y)}else O=this.startSizeConstantMax,1===A&&(M=this.startSizeConstantMax);break;case 3:}if(this._sizeOverLifetime&&this._sizeOverLifetime.enbale){this._sizeOverLifetime.size;O*=this._sizeOverLifetime.size.getMaxSizeInGradient()}var B=t._tempVector30,V=B.elements,F=NaN,G=NaN;switch(A){case 0:F=O*t.halfKSqrtOf2,rl.scale(T,O,B),rl.subtract(n,B,n),rl.add(o,B,o);break;case 1:var H=t._tempVector31,U=t._tempVector32,z=t._tempVector33,W=t._tempVector34;this._velocityOverLifetime&&this._velocityOverLifetime.enbale||(rl.multiply(S,v,U),rl.multiply(S,g,z));var Y=M*i.stretchedBillboardLengthScale,q=rl.scalarLength(U)*i.stretchedBillboardSpeedScale+Y,K=rl.scalarLength(z)*i.stretchedBillboardSpeedScale+Y,X=t._tempVector35,Q=t._tempVector36;rl.normalize(U,X),rl.scale(X,q,W),rl.subtract(L,W,W),rl.normalize(z,Q),rl.scale(Q,K,H),rl.add(R,H,H),F=O*t.halfKSqrtOf2,rl.scale(T,F,B);var j=t._tempVector37,Z=t._tempVector38;rl.scale(X,.5,j),rl.scale(Q,.5,Z),rl.multiply(j,T,j),rl.multiply(Z,T,Z),rl.add(n,Z,n),rl.min(n,W,n),rl.subtract(n,B,n),rl.subtract(o,j,o),rl.max(o,H,o),rl.add(o,B,o);break;case 2:O*=Math.cos(.7853981633974483),G=.5*O,V[0]=T.x*G,V[1]=T.z*G,rl.subtract(n,B,n),rl.add(o,B,o);break;case 3:O*=Math.cos(.7853981633974483),G=.5*O,rl.scale(T,G,B),rl.subtract(n,B,n),rl.add(o,B,o)}this._boundingBox.getCorners(this._boundingBoxCorners)},a._updateEmission=function(){if(i.stage.isVisibility&&this.isAlive)if(this._simulateUpdate)this._simulateUpdate=!1;else{var e=this._startUpdateLoopCount===Nr.loopCount||this._isPaused?0:i.timer.delta/1e3;e=Math.min(t._maxElapsedTime,e),this._updateParticles(e)}},a._updateParticles=function(e){(4!==this._ownerRender.renderMode||this._ownerRender.mesh)&&(this._currentTime+=e,this._retireActiveParticles(),this._freeRetiredParticles(),this._totalDelayTime+=e,this._totalDelayTime<this._playStartDelay||this._emission.enbale&&this._isEmitting&&!this._isPaused&&this._advanceTime(e,this._currentTime))},a._updateParticlesSimulationRestart=function(e){this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._burstsIndex=0,this._frameRateTime=e,this._emissionTime=0,this._totalDelayTime=0,this._currentTime=e;var t=e;return t<this._playStartDelay?void(this._totalDelayTime=t):void(this._emission.enbale&&this._advanceTime(e,e))},a._addUpdateEmissionToTimer=function(){i.timer.frameLoop(1,this,this._updateEmission)},a._removeUpdateEmissionToTimer=function(){i.timer.clear(this,this._updateEmission)},a._onOwnerActiveHierarchyChanged=function(e){this._owner.displayedInStage&&(e?this._addUpdateEmissionToTimer():this._removeUpdateEmissionToTimer())},a._retireActiveParticles=function(){for(var e=1e-4;this._firstActiveElement!=this._firstNewElement;){var t=this._firstActiveElement*this._floatCountPerVertex*this._vertexStride,i=t+this._timeIndex,n=this._currentTime-this._vertices[i];if(n+e<this._vertices[t+this._startLifeTimeIndex])break;this._vertices[i]=this._drawCounter,this._firstActiveElement++,this._firstActiveElement>=this._bufferMaxParticles&&(this._firstActiveElement=0)}},a._freeRetiredParticles=function(){for(;this._firstRetiredElement!=this._firstActiveElement;){var e=this._drawCounter-this._vertices[this._firstRetiredElement*this._floatCountPerVertex*this._vertexStride+this._timeIndex];if(this.isPerformanceMode&&3>e)break;this._firstRetiredElement++,this._firstRetiredElement>=this._bufferMaxParticles&&(this._firstRetiredElement=0)}},a._burst=function(e,t){for(var i=0,n=this._emission._bursts,o=n.length;this._burstsIndex<o;this._burstsIndex++){var s=n[this._burstsIndex],r=s.time;if(!(r>=e&&t>r))break;var a=0;this.autoRandomSeed?a=Ih.lerp(s.minCount,s.maxCount,Math.random()):(this._rand.seed=this._randomSeeds[0],a=Ih.lerp(s.minCount,s.maxCount,this._rand.getFloat()),this._randomSeeds[0]=this._rand.seed),i+=a}return i},a._advanceTime=function(e,t){var i=0,n=this._emissionTime;this._emissionTime+=e;var o=0;if(this._emissionTime>this.duration){if(!this.looping){for(o=Math.min(this.maxParticles-this.aliveParticleCount,o),i=0;o>i;i++)this.emit(t);return this._isPlaying=!1,void this.stop()}o+=this._burst(n,this._emissionTime),this._emissionTime-=this.duration,
this.event("complete"),this._burstsIndex=0,o+=this._burst(0,this._emissionTime)}else o+=this._burst(n,this._emissionTime);for(o=Math.min(this.maxParticles-this.aliveParticleCount,o),i=0;o>i;i++)this.emit(t);var s=this.emission.emissionRate;if(s>0){var r=1/s;for(this._frameRateTime+=r,this._frameRateTime=this._currentTime-(this._currentTime-this._frameRateTime)%this._maxStartLifetime;this._frameRateTime<=t&&this.emit(this._frameRateTime);)this._frameRateTime+=r;this._frameRateTime=Math.floor(t/r)*r}},a._initBufferDatas=function(){this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy());var e=this._ownerRender,t=e.renderMode;if(-1!==t&&this.maxParticles>0){var i,n,o=0,s=0,r=0,a=0,l=0,h=e.mesh;if(4===t){if(h){var c=h._vertexBuffers.length;if(c>1)throw new Error("ShurikenParticleSystem: submesh Count mesh be One or all subMeshes have the same vertexDeclaration.");n=nh.vertexDeclaration,this._floatCountPerVertex=n.vertexStride/4,this._startLifeTimeIndex=12,this._timeIndex=16,this._vertexStride=h._vertexBuffers[0].vertexCount;var u=this._bufferMaxParticles*this._vertexStride,d=Math.floor(u/65535)+1,p=u%65535;if(d>1)throw new Error("ShurikenParticleSystem:the maxParticleCount multiply mesh vertexCount is large than 65535.");this._vertexBuffer=IS.create(n,p,35048),this._vertices=new Float32Array(this._floatCountPerVertex*p),this._indexStride=h._indexBuffer.indexCount;var f=h._indexBuffer.getData(),_=this._bufferMaxParticles*this._indexStride;for(this._indexBuffer=AS.create("ushort",_,35044),i=new Uint16Array(_),a=0,o=0;o<this._bufferMaxParticles;o++){var m=o*this._vertexStride;for(s=0,r=f.length;r>s;s++)i[a++]=m+f[s]}this._indexBuffer.setData(i)}}else{for(n=Fl.vertexDeclaration,this._floatCountPerVertex=n.vertexStride/4,this._startLifeTimeIndex=7,this._timeIndex=11,this._vertexStride=4,this._vertexBuffer=IS.create(n,this._bufferMaxParticles*this._vertexStride,35048),this._vertices=new Float32Array(this._floatCountPerVertex*this._bufferMaxParticles*this._vertexStride),o=0;o<this._bufferMaxParticles;o++)l=o*this._floatCountPerVertex*this._vertexStride,this._vertices[l]=-.5,this._vertices[l+1]=-.5,this._vertices[l+2]=0,this._vertices[l+3]=1,l+=this._floatCountPerVertex,this._vertices[l]=.5,this._vertices[l+1]=-.5,this._vertices[l+2]=1,this._vertices[l+3]=1,l+=this._floatCountPerVertex,this._vertices[l]=.5,this._vertices[l+1]=.5,this._vertices[l+2]=1,this._vertices[l+3]=0,l+=this._floatCountPerVertex,this._vertices[l]=-.5,this._vertices[l+1]=.5,this._vertices[l+2]=0,this._vertices[l+3]=0;for(this._indexStride=6,this._indexBuffer=AS.create("ushort",6*this._bufferMaxParticles,35044),i=new Uint16Array(6*this._bufferMaxParticles),o=0;o<this._bufferMaxParticles;o++){a=6*o;var g=o*this._vertexStride,v=g+2;i[a++]=g,i[a++]=v,i[a++]=g+1,i[a++]=g,i[a++]=g+3,i[a++]=v}this._indexBuffer.setData(i)}}},a._destroy=function(){e.prototype._destroy.call(this),this._owner.activeInHierarchy&&this._removeUpdateEmissionToTimer(),this._vertexBuffer.destroy(),this._indexBuffer.destroy(),this._emission._destroy(),this._owner=null,this._vertices=null,this._vertexBuffer=null,this._indexBuffer=null,this._emission=null,this._shape=null,this.startLifeTimeGradient=null,this.startLifeTimeGradientMin=null,this.startLifeTimeGradientMax=null,this.startSizeConstantSeparate=null,this.startSizeConstantMinSeparate=null,this.startSizeConstantMaxSeparate=null,this.startRotationConstantSeparate=null,this.startRotationConstantMinSeparate=null,this.startRotationConstantMaxSeparate=null,this.startColorConstant=null,this.startColorConstantMin=null,this.startColorConstantMax=null,this._velocityOverLifetime=null,this._colorOverLifetime=null,this._sizeOverLifetime=null,this._rotationOverLifetime=null,this._textureSheetAnimation=null},a.emit=function(e){var i=t._tempPosition,n=t._tempDirection;if(this._shape&&this._shape.enable)this.autoRandomSeed?this._shape.generatePositionAndDirection(i,n):this._shape.generatePositionAndDirection(i,n,this._rand,this._randomSeeds);else{var o=i.elements,s=n.elements;o[0]=o[1]=o[2]=0,s[0]=s[1]=0,s[2]=1}return this.addParticle(i,n,e)},a.addParticle=function(e,t,i){rl.normalize(t,t);var n=this._firstFreeElement+1;if(n>=this._bufferMaxParticles&&(n=0),n===this._firstRetiredElement)return!1;va.create(this,this._ownerRender,this._owner.transform);var o=this._currentTime-i;if(o>=va.startLifeTime)return!0;var s=NaN,r=NaN,a=NaN,l=NaN,h=NaN,c=NaN,u=NaN,d=this._velocityOverLifetime&&this._velocityOverLifetime.enbale;if(d){var p=this._velocityOverLifetime.velocity.type;2===p||3===p?this.autoRandomSeed?(s=Math.random(),r=Math.random(),a=Math.random()):(this._rand.seed=this._randomSeeds[9],s=this._rand.getFloat(),r=this._rand.getFloat(),a=this._rand.getFloat(),this._randomSeeds[9]=this._rand.seed):d=!1}else d=!1;var f=this._colorOverLifetime&&this._colorOverLifetime.enbale;if(f){var _=this._colorOverLifetime.color.type;3===_?this.autoRandomSeed?l=Math.random():(this._rand.seed=this._randomSeeds[10],l=this._rand.getFloat(),this._randomSeeds[10]=this._rand.seed):f=!1}else f=!1;var m=this._sizeOverLifetime&&this._sizeOverLifetime.enbale;if(m){var g=this._sizeOverLifetime.size.type;3===g?this.autoRandomSeed?h=Math.random():(this._rand.seed=this._randomSeeds[11],h=this._rand.getFloat(),this._randomSeeds[11]=this._rand.seed):m=!1}else m=!1;var v=this._rotationOverLifetime&&this._rotationOverLifetime.enbale;if(v){var y=this._rotationOverLifetime.angularVelocity.type;2===y||3===y?this.autoRandomSeed?c=Math.random():(this._rand.seed=this._randomSeeds[12],c=this._rand.getFloat(),this._randomSeeds[12]=this._rand.seed):v=!1}else v=!1;var b=this._textureSheetAnimation&&this._textureSheetAnimation.enable;if(b){var E=this._textureSheetAnimation.frame.type;3===E?this.autoRandomSeed?u=Math.random():(this._rand.seed=this._randomSeeds[15],u=this._rand.getFloat(),this._randomSeeds[15]=this._rand.seed):b=!1}else b=!1;var x,S=this._firstFreeElement*this._floatCountPerVertex*this._vertexStride,w=va.startUVInfo[0],C=va.startUVInfo[1],T=va.startUVInfo[2],I=va.startUVInfo[3],A=e.elements,N=t.elements,P=0,R=0,L=0,O=0,M=0,D=this._ownerRender;if(4===D.renderMode){var k=D.mesh._vertexBuffers[0];x=k.getData();var B=k.vertexDeclaration;R=B.getVertexElementByUsage(0).offset/4;var V=B.getVertexElementByUsage(1);L=V?V.offset/4:-1;var F=B.getVertexElementByUsage(2);O=F?F.offset/4:-1,P=B.vertexStride/4,M=0}else{this._vertices[S+2]=T,this._vertices[S+3]=I+C;var G=S+this._floatCountPerVertex;this._vertices[G+2]=T+w,this._vertices[G+3]=I+C;var H=G+this._floatCountPerVertex;this._vertices[H+2]=T+w,this._vertices[H+3]=I;var U=H+this._floatCountPerVertex;this._vertices[U+2]=T,this._vertices[U+3]=I}for(var z=S,W=S+this._floatCountPerVertex*this._vertexStride;W>z;z+=this._floatCountPerVertex){var Y=0;if(4===D.renderMode){Y=z;var q=P*M++,K=q+R;this._vertices[Y++]=x[K++],this._vertices[Y++]=x[K++],this._vertices[Y++]=x[K],-1===L?(this._vertices[Y++]=1,this._vertices[Y++]=1,this._vertices[Y++]=1,this._vertices[Y++]=1):(K=q+L,this._vertices[Y++]=x[K++],this._vertices[Y++]=x[K++],this._vertices[Y++]=x[K++],this._vertices[Y++]=x[K]),-1===O?(this._vertices[Y++]=0,this._vertices[Y++]=0):(K=q+O,this._vertices[Y++]=T+x[K++]*w,this._vertices[Y++]=I+x[K]*C)}else Y=z+4;switch(this._vertices[Y++]=A[0],this._vertices[Y++]=A[1],this._vertices[Y++]=A[2],this._vertices[Y++]=va.startLifeTime,this._vertices[Y++]=N[0],this._vertices[Y++]=N[1],this._vertices[Y++]=N[2],this._vertices[Y++]=i,this._vertices[Y++]=va.startColor[0],this._vertices[Y++]=va.startColor[1],this._vertices[Y++]=va.startColor[2],this._vertices[Y++]=va.startColor[3],this._vertices[Y++]=va.startSize[0],this._vertices[Y++]=va.startSize[1],this._vertices[Y++]=va.startSize[2],this._vertices[Y++]=va.startRotation[0],this._vertices[Y++]=va.startRotation[1],this._vertices[Y++]=va.startRotation[2],this._vertices[Y++]=va.startSpeed,f&&(this._vertices[Y+1]=l),m&&(this._vertices[Y+2]=h),v&&(this._vertices[Y+3]=c),b&&(this._vertices[Y+4]=u),d&&(this._vertices[Y+5]=s,this._vertices[Y+6]=r,this._vertices[Y+7]=a),this.simulationSpace){case 0:Y+=8,this._vertices[Y++]=va.simulationWorldPostion[0],this._vertices[Y++]=va.simulationWorldPostion[1],this._vertices[Y++]=va.simulationWorldPostion[2],this._vertices[Y++]=va.simulationWorldRotation[0],this._vertices[Y++]=va.simulationWorldRotation[1],this._vertices[Y++]=va.simulationWorldRotation[2],this._vertices[Y++]=va.simulationWorldRotation[3];break;case 1:break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.")}}return this._firstFreeElement=n,!0},a.addNewParticlesToVertexBuffer=function(){var e=0;this._firstNewElement<this._firstFreeElement?(e=this._firstNewElement*this._vertexStride*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,e,e,(this._firstFreeElement-this._firstNewElement)*this._vertexStride*this._floatCountPerVertex)):(e=this._firstNewElement*this._vertexStride*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,e,e,(this._bufferMaxParticles-this._firstNewElement)*this._vertexStride*this._floatCountPerVertex),this._firstFreeElement>0&&this._vertexBuffer.setData(this._vertices,0,0,this._firstFreeElement*this._vertexStride*this._floatCountPerVertex)),this._firstNewElement=this._firstFreeElement},a._beforeRender=function(e){return this._firstNewElement!=this._firstFreeElement&&this.addNewParticlesToVertexBuffer(),this._drawCounter++,this._firstActiveElement!=this._firstFreeElement?(this._vertexBuffer._bind(),this._indexBuffer._bind(),!0):!1},a._render=function(e){var t=0,i=ur.mainContext;this._firstActiveElement<this._firstFreeElement?(t=(this._firstFreeElement-this._firstActiveElement)*this._indexStride,i.drawElements(4,t,5123,2*this._firstActiveElement*this._indexStride),Nr.trianglesFaces+=t/3,Nr.drawCall++):(t=(this._bufferMaxParticles-this._firstActiveElement)*this._indexStride,i.drawElements(4,t,5123,2*this._firstActiveElement*this._indexStride),Nr.trianglesFaces+=t/3,Nr.drawCall++,this._firstFreeElement>0&&(t=this._firstFreeElement*this._indexStride,i.drawElements(4,t,5123,0),Nr.trianglesFaces+=t/3,Nr.drawCall++))},a.play=function(){if(this._burstsIndex=0,this._isEmitting=!0,this._isPlaying=!0,this._isPaused=!1,this._emissionTime=0,this._totalDelayTime=0,!this.autoRandomSeed)for(var e=0,i=this._randomSeeds.length;i>e;e++)this._randomSeeds[e]=this.randomSeed[0]+t._RANDOMOFFSET[e];switch(this.startDelayType){case 0:this._playStartDelay=this.startDelay;break;case 1:this.autoRandomSeed?this._playStartDelay=Ih.lerp(this.startDelayMin,this.startDelayMax,Math.random()):(this._rand.seed=this._randomSeeds[2],this._playStartDelay=Ih.lerp(this.startDelayMin,this.startDelayMax,this._rand.getFloat()),this._randomSeeds[2]=this._rand.seed);break;default:throw new Error("Utils3D: startDelayType is invalid.")}this._frameRateTime=this._currentTime+this._playStartDelay,this._startUpdateLoopCount=Nr.loopCount,this.event("played")},a.pause=function(){this._isPaused=!0,this.event("paused")},a.simulate=function(e,t){void 0===t&&(t=!0),this._simulateUpdate=!0,t?this._updateParticlesSimulationRestart(e):(this._isPaused=!1,this._updateParticles(e)),this.pause()},a.stop=function(){this._burstsIndex=0,this._isEmitting=!1,this._emissionTime=0,this.event("stopped")},a.cloneTo=function(e){var t=e;t.duration=this.duration,t.looping=this.looping,t.prewarm=this.prewarm,t.startDelayType=this.startDelayType,t.startDelay=this.startDelay,t.startDelayMin=this.startDelayMin,t.startDelayMax=this.startDelayMax,t._maxStartLifetime=this._maxStartLifetime,t.startLifetimeType=this.startLifetimeType,t.startLifetimeConstant=this.startLifetimeConstant,this.startLifeTimeGradient.cloneTo(t.startLifeTimeGradient),t.startLifetimeConstantMin=this.startLifetimeConstantMin,t.startLifetimeConstantMax=this.startLifetimeConstantMax,this.startLifeTimeGradientMin.cloneTo(t.startLifeTimeGradientMin),this.startLifeTimeGradientMax.cloneTo(t.startLifeTimeGradientMax),t.startSpeedType=this.startSpeedType,t.startSpeedConstant=this.startSpeedConstant,t.startSpeedConstantMin=this.startSpeedConstantMin,t.startSpeedConstantMax=this.startSpeedConstantMax,t.threeDStartSize=this.threeDStartSize,t.startSizeType=this.startSizeType,t.startSizeConstant=this.startSizeConstant,this.startSizeConstantSeparate.cloneTo(t.startSizeConstantSeparate),t.startSizeConstantMin=this.startSizeConstantMin,t.startSizeConstantMax=this.startSizeConstantMax,this.startSizeConstantMinSeparate.cloneTo(t.startSizeConstantMinSeparate),this.startSizeConstantMaxSeparate.cloneTo(t.startSizeConstantMaxSeparate),t.threeDStartRotation=this.threeDStartRotation,t.startRotationType=this.startRotationType,t.startRotationConstant=this.startRotationConstant,this.startRotationConstantSeparate.cloneTo(t.startRotationConstantSeparate),t.startRotationConstantMin=this.startRotationConstantMin,t.startRotationConstantMax=this.startRotationConstantMax,this.startRotationConstantMinSeparate.cloneTo(t.startRotationConstantMinSeparate),this.startRotationConstantMaxSeparate.cloneTo(t.startRotationConstantMaxSeparate),t.randomizeRotationDirection=this.randomizeRotationDirection,t.startColorType=this.startColorType,this.startColorConstant.cloneTo(t.startColorConstant),this.startColorConstantMin.cloneTo(t.startColorConstantMin),this.startColorConstantMax.cloneTo(t.startColorConstantMax),t.gravityModifier=this.gravityModifier,t.simulationSpace=this.simulationSpace,t.scaleMode=this.scaleMode,t.playOnAwake=this.playOnAwake,t.maxParticles=this.maxParticles,this._emission&&(t._emission=this._emission.clone()),this.shape&&(t.shape=this.shape.clone()),this.velocityOverLifetime&&(t.velocityOverLifetime=this.velocityOverLifetime.clone()),this.colorOverLifetime&&(t.colorOverLifetime=this.colorOverLifetime.clone()),this.sizeOverLifetime&&(t.sizeOverLifetime=this.sizeOverLifetime.clone()),this.rotationOverLifetime&&(t.rotationOverLifetime=this.rotationOverLifetime.clone()),this.textureSheetAnimation&&(t.textureSheetAnimation=this.textureSheetAnimation.clone()),t.isPerformanceMode=this.isPerformanceMode,t._isEmitting=this._isEmitting,t._isPlaying=this._isPlaying,t._isPaused=this._isPaused,t._playStartDelay=this._playStartDelay,t._frameRateTime=this._frameRateTime,t._emissionTime=this._emissionTime,t._totalDelayTime=this._totalDelayTime,t._burstsIndex=this._burstsIndex},a.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a._getVertexBuffers=function(){return null},s(0,a,"_originalBoundingBoxCorners",function(){return this._boundingBoxCorners}),s(0,a,"_originalBoundingBox",function(){return this._boundingBox}),s(0,a,"_originalBoundingSphere",function(){return this._boundingSphere}),s(0,a,"textureSheetAnimation",function(){return this._textureSheetAnimation},function(e){var t=this._ownerRender;if(e){var i=e.frame,n=i.type;if(e.enable)switch(n){case 1:t._addShaderDefine(Ww.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE);break;case 3:t._addShaderDefine(Ww.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE)}else t._removeShaderDefine(Ww.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE),t._removeShaderDefine(Ww.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE);if(1===n||3===n){t._setShaderValueInt(48,e.cycles);var o=e.tiles,s=this._uvLength.elements;s[0]=1/o.x,s[1]=1/o.y,t._setShaderValueVector2(49,this._uvLength)}switch(n){case 1:t._setShaderValueBuffer(50,i.frameOverTimeData._elements);break;case 3:t._setShaderValueBuffer(50,i.frameOverTimeDataMin._elements),t._setShaderValueBuffer(51,i.frameOverTimeDataMax._elements)}}else t._removeShaderDefine(Ww.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE),t._removeShaderDefine(Ww.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE),t._setShaderValueInt(48,void 0),t._setShaderValueVector2(49,null),t._setShaderValueBuffer(50,null),t._setShaderValueBuffer(51,null);this._textureSheetAnimation=e}),s(0,a,"colorOverLifetime",function(){return this._colorOverLifetime},function(e){var t=this._ownerRender;if(e){var i=e.color;if(e.enbale)switch(i.type){case 1:t._addShaderDefine(Ww.SHADERDEFINE_COLOROVERLIFETIME);break;case 3:t._addShaderDefine(Ww.SHADERDEFINE_RANDOMCOLOROVERLIFETIME)}else t._removeShaderDefine(Ww.SHADERDEFINE_COLOROVERLIFETIME),t._removeShaderDefine(Ww.SHADERDEFINE_RANDOMCOLOROVERLIFETIME);switch(i.type){case 1:var n=i.gradient;t._setShaderValueBuffer(22,n._alphaElements),t._setShaderValueBuffer(23,n._rgbElements);break;case 3:var o=i.gradientMin,s=i.gradientMax;t._setShaderValueBuffer(22,o._alphaElements),t._setShaderValueBuffer(23,o._rgbElements),t._setShaderValueBuffer(24,s._alphaElements),t._setShaderValueBuffer(25,s._rgbElements)}}else t._removeShaderDefine(Ww.SHADERDEFINE_COLOROVERLIFETIME),t._removeShaderDefine(Ww.SHADERDEFINE_RANDOMCOLOROVERLIFETIME),t._setShaderValueBuffer(22,n._alphaElements),t._setShaderValueBuffer(23,n._rgbElements),t._setShaderValueBuffer(22,o._alphaElements),t._setShaderValueBuffer(23,o._rgbElements),t._setShaderValueBuffer(24,s._alphaElements),t._setShaderValueBuffer(25,s._rgbElements);this._colorOverLifetime=e}),s(0,a,"_vertexBufferCount",function(){return 1}),s(0,a,"rotationOverLifetime",function(){return this._rotationOverLifetime},function(e){var t=this._ownerRender;if(e){var i=e.angularVelocity;if(!i)return;var n=i.separateAxes,o=i.type;if(e.enbale)switch(n?t._addShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE):t._addShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIME),o){case 0:t._addShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT);break;case 1:t._addShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE);break;case 2:t._addShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS);break;case 3:t._addShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES)}else t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIME),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES);switch(o){case 0:n?t._setShaderValueColor(35,i.constantSeparate):t._setShaderValueNumber(34,i.constant);break;case 1:n?(t._setShaderValueBuffer(37,i.gradientX._elements),t._setShaderValueBuffer(38,i.gradientY._elements),t._setShaderValueBuffer(39,i.gradientZ._elements),t._setShaderValueBuffer(40,i.gradientW._elements)):t._setShaderValueBuffer(36,i.gradient._elements);break;case 2:n?(t._setShaderValueColor(35,i.constantMinSeparate),t._setShaderValueColor(42,i.constantMaxSeparate)):(t._setShaderValueNumber(34,i.constantMin),t._setShaderValueNumber(41,i.constantMax));break;case 3:n?(t._setShaderValueBuffer(37,i.gradientXMin._elements),t._setShaderValueBuffer(44,i.gradientXMax._elements),t._setShaderValueBuffer(38,i.gradientYMin._elements),t._setShaderValueBuffer(45,i.gradientYMax._elements),t._setShaderValueBuffer(39,i.gradientZMin._elements),t._setShaderValueBuffer(46,i.gradientZMax._elements),t._setShaderValueBuffer(40,i.gradientWMin._elements),t._setShaderValueBuffer(47,i.gradientWMax._elements)):(t._setShaderValueBuffer(36,i.gradientMin._elements),t._setShaderValueBuffer(43,i.gradientMax._elements))}}else t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIME),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS),t._removeShaderDefine(Ww.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES),t._setShaderValueColor(35,null),t._setShaderValueColor(42,null),t._setShaderValueNumber(34,void 0),t._setShaderValueNumber(41,void 0),t._setShaderValueBuffer(37,null),t._setShaderValueBuffer(44,null),t._setShaderValueBuffer(38,null),t._setShaderValueBuffer(45,null),t._setShaderValueBuffer(39,null),t._setShaderValueBuffer(46,null),t._setShaderValueBuffer(40,null),t._setShaderValueBuffer(47,null),t._setShaderValueBuffer(36,null),t._setShaderValueBuffer(43,null);this._rotationOverLifetime=e}),s(0,a,"startLifeTimeGradientMax",function(){return this._startLifeTimeGradientMax},function(e){if(3===this._startLifetimeType){var t=0,i=0;for(this._maxStartLifetime=-Number.MAX_VALUE,t=0,i=this._startLifeTimeGradientMin.gradientCount;i>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,this._startLifeTimeGradientMin.getValueByIndex(t));for(t=0,i=e.gradientCount;i>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,e.getValueByIndex(t))}this._startLifeTimeGradientMax=e}),s(0,a,"isPaused",function(){return this._isPaused}),s(0,a,"startLifetimeType",function(){return this._startLifetimeType},function(e){var t=0,i=0;switch(this.startLifetimeType){case 0:this._maxStartLifetime=this.startLifetimeConstant;break;case 1:this._maxStartLifetime=-Number.MAX_VALUE;var n=n;for(t=0,i=n.gradientCount;i>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,n.getValueByIndex(t));break;case 2:this._maxStartLifetime=Math.max(this.startLifetimeConstantMin,this.startLifetimeConstantMax);break;case 3:this._maxStartLifetime=-Number.MAX_VALUE;var o=o;for(t=0,i=o.gradientCount;i>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,o.getValueByIndex(t));var s=s;for(t=0,i=s.gradientCount;i>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,s.getValueByIndex(t))}this._startLifetimeType=e}),s(0,a,"startLifetimeConstantMax",function(){return this._startLifetimeConstantMax},function(e){2===this._startLifetimeType&&(this._maxStartLifetime=Math.max(this._startLifetimeConstantMin,e)),this._startLifetimeConstantMax=e}),s(0,a,"emissionTime",function(){return this._emissionTime>this.duration?this.duration:this._emissionTime}),s(0,a,"startLifeTimeGradient",function(){return this._startLifeTimeGradient},function(e){if(1===this._startLifetimeType){this._maxStartLifetime=-Number.MAX_VALUE;for(var t=0,i=e.gradientCount;i>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,e.getValueByIndex(t))}this._startLifeTimeGradient=e}),s(0,a,"startLifeTimeGradientMin",function(){return this._startLifeTimeGradientMin},function(e){if(3===this._startLifetimeType){var t=0,i=0;for(this._maxStartLifetime=-Number.MAX_VALUE,t=0,i=e.gradientCount;i>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,e.getValueByIndex(t));for(t=0,i=this._startLifeTimeGradientMax.gradientCount;i>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,this._startLifeTimeGradientMax.getValueByIndex(t))}this._startLifeTimeGradientMin=e}),s(0,a,"isAlive",function(){return!!(this._isPlaying||this.aliveParticleCount>0)}),s(0,a,"sizeOverLifetime",function(){return this._sizeOverLifetime},function(e){var t=this._ownerRender;if(e){var i=e.size,n=i.separateAxes,o=i.type;if(e.enbale)switch(o){case 0:n?t._addShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE):t._addShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMECURVE);break;case 2:n?t._addShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE):t._addShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES)}else t._removeShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMECURVE),t._removeShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE),t._removeShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES),t._removeShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE);switch(o){case 0:n?(t._setShaderValueBuffer(27,i.gradientX._elements),t._setShaderValueBuffer(28,i.gradientY._elements),t._setShaderValueBuffer(29,i.gradientZ._elements)):t._setShaderValueBuffer(26,i.gradient._elements);break;case 2:n?(t._setShaderValueBuffer(27,i.gradientXMin._elements),t._setShaderValueBuffer(31,i.gradientXMax._elements),t._setShaderValueBuffer(28,i.gradientYMin._elements),t._setShaderValueBuffer(32,i.gradientYMax._elements),t._setShaderValueBuffer(29,i.gradientZMin._elements),t._setShaderValueBuffer(33,i.gradientZMax._elements)):(t._setShaderValueBuffer(26,i.gradientMin._elements),t._setShaderValueBuffer(30,i.gradientMax._elements))}}else t._removeShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMECURVE),t._removeShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE),t._removeShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES),t._removeShaderDefine(Ww.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE),t._setShaderValueBuffer(27,null),t._setShaderValueBuffer(31,null),t._setShaderValueBuffer(28,null),t._setShaderValueBuffer(32,null),t._setShaderValueBuffer(29,null),t._setShaderValueBuffer(33,null),t._setShaderValueBuffer(26,null),t._setShaderValueBuffer(30,null);this._sizeOverLifetime=e}),s(0,a,"isPlaying",function(){return this._isPlaying}),s(0,a,"velocityOverLifetime",function(){return this._velocityOverLifetime},function(e){var t=this._ownerRender;if(e){var i=e.velocity,n=i.type;if(e.enbale)switch(n){case 0:t._addShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT);break;case 1:t._addShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE);break;case 2:t._addShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT);break;case 3:t._addShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE)}else t._removeShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT),t._removeShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE),t._removeShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT),t._removeShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE);switch(n){case 0:t._setShaderValueColor(13,i.constant);break;case 1:t._setShaderValueBuffer(14,i.gradientX._elements),t._setShaderValueBuffer(15,i.gradientY._elements),t._setShaderValueBuffer(16,i.gradientZ._elements);break;case 2:t._setShaderValueColor(13,i.constantMin),t._setShaderValueColor(17,i.constantMax);break;case 3:t._setShaderValueBuffer(14,i.gradientXMin._elements),t._setShaderValueBuffer(18,i.gradientXMax._elements),t._setShaderValueBuffer(15,i.gradientYMin._elements),t._setShaderValueBuffer(19,i.gradientYMax._elements),t._setShaderValueBuffer(16,i.gradientZMin._elements),t._setShaderValueBuffer(20,i.gradientZMax._elements)}t._setShaderValueInt(21,e.space)}else t._removeShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT),t._removeShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE),t._removeShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT),t._removeShaderDefine(Ww.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE),t._setShaderValueColor(13,null),t._setShaderValueBuffer(14,null),t._setShaderValueBuffer(15,null),t._setShaderValueBuffer(16,null),t._setShaderValueColor(13,null),t._setShaderValueColor(17,null),t._setShaderValueBuffer(14,null),t._setShaderValueBuffer(18,null),t._setShaderValueBuffer(15,null),t._setShaderValueBuffer(19,null),t._setShaderValueBuffer(16,null),t._setShaderValueBuffer(20,null),t._setShaderValueInt(21,void 0);this._velocityOverLifetime=e}),s(0,a,"isEmitting",function(){return this._isEmitting}),s(0,a,"startLifetimeConstant",function(){return this._startLifetimeConstant},function(e){0===this._startLifetimeType&&(this._maxStartLifetime=e),this._startLifetimeConstant=e}),s(0,a,"triangleCount",function(){return this._indexBuffer?this._indexBuffer.indexCount/3:0}),s(0,a,"shape",function(){return this._shape},function(e){this._shape!==e&&(e&&e.enable?this._ownerRender._addShaderDefine(Ww.SHADERDEFINE_SHAPE):this._ownerRender._removeShaderDefine(Ww.SHADERDEFINE_SHAPE),this._shape=e)}),s(0,a,"aliveParticleCount",function(){return this._firstNewElement>=this._firstRetiredElement?this._firstNewElement-this._firstRetiredElement:this._bufferMaxParticles-this._firstRetiredElement+this._firstNewElement}),s(0,a,"startLifetimeConstantMin",function(){return this._startLifetimeConstantMin},function(e){2===this._startLifetimeType&&(this._maxStartLifetime=Math.max(e,this._startLifetimeConstantMax)),this._startLifetimeConstantMin=e}),s(0,a,"emission",function(){return this._emission}),s(0,a,"maxParticles",function(){return this._bufferMaxParticles-1},function(e){var t=e+1;t!==this._bufferMaxParticles&&(this._bufferMaxParticles=t,this._initBufferDatas())}),t.halfKSqrtOf2=.71,n(t,["_RANDOMOFFSET",function(){return this._RANDOMOFFSET=new Uint32Array([592910910,3276756734,322376503,306581307,1793934638,3737431713,2527743459,2368504881,4085612399,3774601268,326370691,1494990940,1089181156,3159510623,2941263940,2786374529,271901988,4233252447])},"_maxElapsedTime",function(){return this._maxElapsedTime=1/3},"_tempVector30",function(){return this._tempVector30=new rl},"_tempVector31",function(){return this._tempVector31=new rl},"_tempVector32",function(){return this._tempVector32=new rl},"_tempVector33",function(){return this._tempVector33=new rl},"_tempVector34",function(){return this._tempVector34=new rl},"_tempVector35",function(){return this._tempVector35=new rl},"_tempVector36",function(){return this._tempVector36=new rl},"_tempVector37",function(){return this._tempVector37=new rl},"_tempVector38",function(){return this._tempVector38=new rl},"_tempVector39",function(){return this._tempVector39=new rl},"_tempPosition",function(){return this._tempPosition=new rl},"_tempDirection",function(){return this._tempDirection=new rl}]),t}(Yu),Dx=function(e){function t(e){t.__super.call(this,e)}o(t,"laya.d3.core.GlitterRender",e);var i=t.prototype;return i._calculateBoundingBox=function(){var e=this._boundingBox.min.elements;e[0]=-Number.MAX_VALUE,e[1]=-Number.MAX_VALUE,e[2]=-Number.MAX_VALUE;var t=this._boundingBox.min.elements;t[0]=Number.MAX_VALUE,t[1]=Number.MAX_VALUE,t[2]=Number.MAX_VALUE},i._calculateBoundingSphere=function(){var e=this._boundingSphere.center.elements;e[0]=0,e[1]=0,e[2]=0,this._boundingSphere.radius=Number.MAX_VALUE},i._renderUpdate=function(e){this._setShaderValueMatrix4x4(0,this._owner.transform.worldMatrix);var t=this._owner.getProjectionViewWorldMatrix(e);this._setShaderValueMatrix4x4(1,t);var i=this._owner.templet;return this._setShaderValueNumber(3,i.lifeTime),this._setShaderValueNumber(2,i._currentTime),!0},t}(qu),kx=function(e){function t(e,i){this._audio=null,this._onEnd=null,this._miniSound=null,t.__super.call(this),this._audio=e,this._miniSound=i,this._onEnd=t.bindToThis(this.__onEnd,this),e.onEnded(this._onEnd)}o(t,"laya.tt.mini.MiniSoundChannel",e,"MiniSoundChannel$8");var n=t.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.play=function(){this.isStopped=!1,jh.addChannel(this),this._audio.play()},n.stop=function(){this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.stop(),this._audio.offEnded(null),this._audio.destroy(),this._audio=null,this._miniSound=null,this._onEnd=null)},n.pause=function(){this.isStopped=!0,this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"autoplay",function(){return this._audio.autoplay},function(e){this._audio.autoplay=e}),s(0,n,"loop",function(){return this._audio.loop},function(e){this._audio.loop=e}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"startTime",null,function(e){this._audio&&(this._audio.startTime=e)}),t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t}(Pu),Bx=function(e){function t(e){t.__super.call(this,e),e.meshFilter.on("meshchanged",this,this._onMeshChanged)}o(t,"laya.d3.core.MeshRender",e);var i=t.prototype;return i._onMeshChanged=function(e,t,i){i.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:i.once("loaded",this,this._onMeshLoaed)},i._onMeshLoaed=function(e,t){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0;
},i._calculateBoundingSphereByInitSphere=function(e){var t=NaN,i=this._owner.transform,n=i.scale.elements,o=Math.abs(n[0]),s=Math.abs(n[1]),r=Math.abs(n[2]);t=o>=s&&o>=r?o:s>=r?s:r,rl.transformCoordinate(e.center,i.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=e.radius*t},i._calculateBoundBoxByInitCorners=function(e){for(var t=this._owner.transform.worldMatrix,i=0;8>i;i++)rl.transformCoordinate(e[i],t,qu._tempBoundBoxCorners[i]);nl.createfromPoints(qu._tempBoundBoxCorners,this._boundingBox)},i._calculateBoundingSphere=function(){var e=this._owner.meshFilter.sharedMesh;null==e||null==e.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(e.boundingSphere)},i._calculateBoundingBox=function(){var e=this._owner.meshFilter.sharedMesh;null==e||null==e.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(e.boundingBoxCorners)},i._renderUpdate=function(e){var t=this._owner.transform;if(t){this._setShaderValueMatrix4x4(0,t.worldMatrix);var i=this._owner.getProjectionViewWorldMatrix(e);this._setShaderValueMatrix4x4(1,i)}else this._setShaderValueMatrix4x4(0,ol.DEFAULT),this._setShaderValueMatrix4x4(1,e);return ic.debugMode&&this._renderRenderableBoundBox(),!0},t}(qu),Vx=function(e){function t(e,i,n,o,s,a,l,h){this._owner=null,this._gridSize=NaN,this.memorySize=0,this._numberVertices=0,this._maxNumberIndices=0,this._currentNumberIndices=0,this._numberTriangle=0,this._vertexBuffer=null,this._indexBuffer=null,this._boundingSphere=null,this._boundingBox=null,this._indexArrayBuffer=null,this._boundingBoxCorners=null,this._leafs=null,this._leafNum=0,this._terrainHeightData=null,this._terrainHeightDataWidth=0,this._terrainHeightDataHeight=0,this._chunkOffsetX=0,this._chunkOffsetZ=0,this._cameraCoordinateInverse=!1,this._cameraPos=null,this._currentLOD=0,this._perspectiveFactor=NaN,this._LODTolerance=0,t.__super.call(this),this._owner=e,this._cameraPos=new rl,this._chunkOffsetX=i,this._chunkOffsetZ=n,this._gridSize=o,this._terrainHeightData=s,this._terrainHeightDataWidth=a,this._terrainHeightDataHeight=l,this._leafNum=_l.CHUNK_GRID_NUM/_l.LEAF_GRID_NUM*(_l.CHUNK_GRID_NUM/_l.LEAF_GRID_NUM),this._leafs=r(this._leafNum),this._cameraCoordinateInverse=h;for(var c=0;c<this._leafNum;c++)this._leafs[c]=new _l;this.recreateResource()}o(t,"laya.d3.terrain.TerrainFilter",e);var a=t.prototype;return i.imps(a,{"laya.d3.core.render.IRenderable":!0}),a._destroy=function(){e.prototype._destroy.call(this),this._owner=null,this._vertexBuffer&&this._vertexBuffer.destroy(),this._indexBuffer&&this._indexBuffer.destroy()},a.recreateResource=function(){this._currentNumberIndices=0,this._numberTriangle=0;var e=_l.LEAF_VERTEXT_COUNT,t=_l.LEAF_MAX_INDEX_COUNT;this._numberVertices=e*this._leafNum,this._maxNumberIndices=t*this._leafNum,this._indexArrayBuffer=new Uint16Array(this._maxNumberIndices);var i=Yl.vertexDeclaration,n=i.vertexStride/4,o=new Float32Array(this._numberVertices*n),s=_l.CHUNK_GRID_NUM/_l.LEAF_GRID_NUM,r=0,a=0,l=0;for(r=0;r<this._leafNum;r++)a=r%s,l=Math.floor(r/s),this._leafs[r].calcVertextBuffer(this._chunkOffsetX,this._chunkOffsetZ,a*_l.LEAF_GRID_NUM,l*_l.LEAF_GRID_NUM,this._gridSize,o,r*_l.LEAF_PLANE_VERTEXT_COUNT,n,this._terrainHeightData,this._terrainHeightDataWidth,this._terrainHeightDataHeight,this._cameraCoordinateInverse);for(r=0;r<this._leafNum;r++)a=r%s,l=Math.floor(r/s),this._leafs[r].calcSkirtVertextBuffer(this._chunkOffsetX,this._chunkOffsetZ,a*_l.LEAF_GRID_NUM,l*_l.LEAF_GRID_NUM,this._gridSize,o,this._leafNum*_l.LEAF_PLANE_VERTEXT_COUNT+r*_l.LEAF_SKIRT_VERTEXT_COUNT,n,this._terrainHeightData,this._terrainHeightDataWidth,this._terrainHeightDataHeight);this.assembleIndexInit(),this._vertexBuffer=new IS(i,this._numberVertices,35044,!1),this._indexBuffer=new AS("ushort",this._maxNumberIndices,35044,!1),this._vertexBuffer.setData(o),this._indexBuffer.setData(this._indexArrayBuffer),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.calcOriginalBoudingBoxAndSphere()},a.setLODLevel=function(e){if(4!=e.length)return!0;var t=(e[0]+1<<24)+(e[1]+1<<16)+(e[2]+1<<8)+(e[3]+1);return this._currentLOD==t?!1:(this._currentLOD=t,!0)},a.assembleIndexInit=function(){this._currentNumberIndices=0,this._numberTriangle=0;for(var e=0,t=0;t<this._leafNum;t++){var i=_l.getPlaneLODIndex(t,0);this._indexArrayBuffer.set(i,e),e+=i.length;var n=_l.getSkirtLODIndex(t,0);this._indexArrayBuffer.set(n,e),e+=n.length,this._currentNumberIndices+=i.length+n.length}this._numberTriangle=this._currentNumberIndices/3},a.isNeedAssemble=function(e,t){var i=Math.min(e.viewport.width,e.viewport.height)/(2*Math.tan(Math.PI*e.fieldOfView/180));return this._perspectiveFactor!=i?(this._perspectiveFactor=i,1):this._LODTolerance!=vw.LOD_TOLERANCE_VALUE?(this._LODTolerance=vw.LOD_TOLERANCE_VALUE,1):0==rl.equals(t,this._cameraPos)?(this._cameraPos.x=t.x,this._cameraPos.y=t.y,this._cameraPos.z=t.z,2):0},a.assembleIndex=function(e,i){var n=this.isNeedAssemble(e,i);if(n>0){for(var o=0;o<this._leafNum;o++)t._TEMP_ARRAY_BUFFER[o]=this._leafs[o].determineLod(i,this._perspectiveFactor,vw.LOD_TOLERANCE_VALUE,1==n);if(this.setLODLevel(t._TEMP_ARRAY_BUFFER)){this._currentNumberIndices=0,this._numberTriangle=0;var s=0;for(o=0;o<this._leafNum;o++){var r=t._TEMP_ARRAY_BUFFER[o],a=_l.getPlaneLODIndex(o,r);this._indexArrayBuffer.set(a,s),s+=a.length;var l=_l.getSkirtLODIndex(o,r);this._indexArrayBuffer.set(l,s),s+=l.length,this._currentNumberIndices+=a.length+l.length}return this._numberTriangle=this._currentNumberIndices/3,!0}}return!1},a.calcOriginalBoudingBoxAndSphere=function(){for(var e=new ul(2147483647,-2147483647),t=0;t<this._leafNum;t++)e.x=this._leafs[t]._sizeOfY.x<e.x?this._leafs[t]._sizeOfY.x:e.x,e.y=this._leafs[t]._sizeOfY.y>e.y?this._leafs[t]._sizeOfY.y:e.y;var i=new rl(this._chunkOffsetX*_l.CHUNK_GRID_NUM*this._gridSize,e.x,this._chunkOffsetZ*_l.CHUNK_GRID_NUM*this._gridSize),n=new rl((this._chunkOffsetX+1)*_l.CHUNK_GRID_NUM*this._gridSize,e.y,(this._chunkOffsetZ+1)*_l.CHUNK_GRID_NUM*this._gridSize);_l.__ADAPT_MATRIX__&&(rl.transformV3ToV3(i,_l.__ADAPT_MATRIX__,i),rl.transformV3ToV3(n,_l.__ADAPT_MATRIX__,n)),this._boundingBox=new nl(i,n);var o=new rl;rl.subtract(n,i,o),rl.scale(o,.5,o);var s=new rl;rl.add(i,o,s),this._boundingSphere=new hl(s,rl.scalarLength(o)),this._boundingBoxCorners=r(8,null),this._boundingBox.getCorners(this._boundingBoxCorners)},a.calcLeafBoudingBox=function(e){for(var t=0;t<this._leafNum;t++)this._leafs[t].calcLeafBoudingBox(e)},a.calcLeafBoudingSphere=function(e,t){for(var i=0;i<this._leafNum;i++)this._leafs[i].calcLeafBoudingSphere(e,t)},a._getVertexBuffer=function(e){return void 0===e&&(e=0),0==e?this._vertexBuffer:null},a._getIndexBuffer=function(){return this._indexBuffer},a._beforeRender=function(e){this._vertexBuffer._bind(),this._indexBuffer._bind();var t=e.renderElement._material;if(0==t.blend){var i=e.camera;this.assembleIndex(i,i.position)&&this._indexBuffer.setData(this._indexArrayBuffer)}return!0},a._getVertexBuffers=function(){return null},a._render=function(e){ur.mainContext.drawElements(vw.RENDER_LINE_MODEL?1:4,this._currentNumberIndices,5123,0),Nr.trianglesFaces+=this._numberTriangle,Nr.drawCall++},s(0,a,"_vertexBufferCount",function(){return this._numberVertices}),s(0,a,"triangleCount",function(){return this._numberTriangle}),s(0,a,"_originalBoundingBox",function(){return this._boundingBox}),s(0,a,"_originalBoundingSphere",function(){return this._boundingSphere}),n(t,["_TEMP_ARRAY_BUFFER",function(){return this._TEMP_ARRAY_BUFFER=new Uint32Array(_l.CHUNK_GRID_NUM/_l.LEAF_GRID_NUM*_l.CHUNK_GRID_NUM/_l.LEAF_GRID_NUM)}]),t}(Yu),Fx=function(e){function t(e){this._terrainSprite3DOwner=null,t.__super.call(this,e),this._terrainSprite3DOwner=e}o(t,"laya.d3.terrain.TerrainRender",e);var i=t.prototype;return i._calculateBoundingSphere=function(){var e=this._terrainSprite3DOwner.terrainFilter;if(null==e)this._boundingSphere.toDefault();else{var t=e._originalBoundingSphere,i=NaN,n=this._terrainSprite3DOwner.transform,o=n.scale;i=o.x>=o.y&&o.x>=o.z?o.x:o.y>=o.z?o.y:o.z,rl.transformCoordinate(t.center,n.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=t.radius*i,e.calcLeafBoudingSphere(n.worldMatrix,i)}},i._calculateBoundingBox=function(){var e=this._terrainSprite3DOwner.terrainFilter;if(null==e)this._boundingBox.toDefault();else{for(var t=this._terrainSprite3DOwner.transform.worldMatrix,i=e._boundingBoxCorners,n=0;8>n;n++)rl.transformCoordinate(i[n],t,qu._tempBoundBoxCorners[n]);nl.createfromPoints(qu._tempBoundBoxCorners,this._boundingBox),e.calcLeafBoudingBox(t)}},i._renderUpdate=function(e){this._setShaderValueMatrix4x4(0,this._owner.transform.worldMatrix);var t=this._owner.getProjectionViewWorldMatrix(e);return this._setShaderValueMatrix4x4(1,t),!0},i._destroy=function(){e.prototype._destroy.call(this),this._terrainSprite3DOwner=null},t}(qu),Gx=function(e){function t(e){this._floatCountPerVertex=6,this._owner=null,this._vertices=null,this._vertexBuffer=null,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=NaN,this._drawCounter=0,this.scLeft=null,this.scRight=null,this._numPositionMode=0,this._numPositionVelocityMode=0,this._lastTime=NaN,this._needPatch=!1,this._lastPatchAddPos0=null,this._lastPatchAddPos1=null,this._lastPatchAddTime=NaN,this.lifeTime=NaN,this.minSegmentDistance=NaN,this.minInterpDistance=NaN,this.maxSlerpCount=0,this._maxSegments=0,t.__super.call(this),this._tempVector0=new rl,this._tempVector1=new rl,this._tempVector2=new rl,this._tempVector3=new rl,this._posModeLastPosition0=new rl,this._posModeLastPosition1=new rl,this._posModePosition0=new rl,this._posModePosition1=new rl,this._posVelModePosition0=new rl,this._posVelModeVelocity0=new rl,this._posVelModePosition1=new rl,this._posVelModeVelocity1=new rl,this._owner=e,this._lastTime=0,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=0,this._drawCounter=0,this._needPatch=!1,this._lastPatchAddPos0=new rl,this._lastPatchAddPos1=new rl,this.scLeft=new sa,this.scRight=new sa,this.lifeTime=.5,this.minSegmentDistance=.1,this.minInterpDistance=.6,this.maxSlerpCount=128,this._maxSegments=200,this._owner.on("activeinhierarchychanged",this,this._onActiveHierarchyChanged)}o(t,"laya.d3.resource.tempelet.GlitterTemplet",e);var n=t.prototype;return i.imps(n,{"laya.d3.core.render.IRenderable":!0}),n._getVertexBuffer=function(e){return void 0===e&&(e=0),0===e?this._vertexBuffer:null},n._getIndexBuffer=function(){return null},n._initialize=function(){this._vertexBuffer=IS.create(Xl.vertexDeclaration,2*this.maxSegments,35048),this._vertices=new Float32Array(this.maxSegments*this._floatCountPerVertex*2)},n._onActiveHierarchyChanged=function(e){e||(this._numPositionMode=0,this._numPositionVelocityMode=0,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=0,this._drawCounter=0)},n._updateTextureCoordinates=function(){this._firstActiveElement<this._firstFreeElement?this._updateSubTextureCoordinates(this._firstActiveElement,2*(this._firstFreeElement-this._firstActiveElement)):(this._updateSubTextureCoordinates(this._firstActiveElement,2*(this.maxSegments-this._firstActiveElement)),this._firstFreeElement>0&&this._updateSubTextureCoordinates(0,2*this._firstFreeElement))},n._updateSubTextureCoordinates=function(e,t){for(var i=2*e,n=0;t>n;n+=2){var o=i+n,s=o*this._floatCountPerVertex,r=(o+1)*this._floatCountPerVertex;this._vertices[s+3]=this._vertices[r+3]=(this._vertices[s+5]-this._currentTime)/this.lifeTime}},n._retireActiveGlitter=function(){for(var e=this.lifeTime,t=2*this._floatCountPerVertex;this._firstActiveElement!=this._firstNewElement;){var i=this._firstActiveElement*t+5,n=this._currentTime-this._vertices[i];if(e>n)break;this._vertices[i]=this._drawCounter,this._firstActiveElement++,this._firstActiveElement>=this.maxSegments&&(this._firstActiveElement=0)}},n._freeRetiredGlitter=function(){for(var e=2*this._floatCountPerVertex;this._firstRetiredElement!=this._firstActiveElement;){var t=this._drawCounter-this._vertices[this._firstRetiredElement*e+5];if(3>t)break;this._firstRetiredElement++,this._firstRetiredElement>=this.maxSegments&&(this._firstRetiredElement=0)}},n._calcVelocity=function(e,t,i){rl.subtract(e,t,i),rl.scale(i,.5,i)},n._addNewGlitterSegementToVertexBuffer=function(){var e=0;this._firstActiveElement<this._firstFreeElement?(e=2*this._firstActiveElement*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,e,e,2*(this._firstFreeElement-this._firstActiveElement)*this._floatCountPerVertex)):(e=2*this._firstActiveElement*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,e,e,2*(this.maxSegments-this._firstActiveElement)*this._floatCountPerVertex),this._firstFreeElement>0&&this._vertexBuffer.setData(this._vertices,0,0,2*this._firstFreeElement*this._floatCountPerVertex)),this._firstNewElement=this._firstFreeElement},n._addGlitter=function(e,t,i){this._needPatch&&(this._needPatch=!1,this._addGlitter(this._lastPatchAddPos0,this._lastPatchAddPos1,this._lastPatchAddTime));var n=this._firstFreeElement+1;n>=this.maxSegments&&(n=0,e.cloneTo(this._lastPatchAddPos0),t.cloneTo(this._lastPatchAddPos1),this._lastPatchAddTime=i,this._needPatch=!0),n===this._firstRetiredElement&&console.log("GlitterTemplet:current segement count have large than maxSegments,please adjust the  value of maxSegments or add Glitter Vertex Frequency.");var o=e.elements,s=t.elements,r=0,a=this._firstFreeElement*this._floatCountPerVertex*2;for(r=0;3>r;r++)this._vertices[a+r]=o[r];this._vertices[a+3]=0,this._vertices[a+4]=0,this._vertices[a+5]=i;var l=a+this._floatCountPerVertex;for(r=0;3>r;r++)this._vertices[l+r]=s[r];this._vertices[l+3]=0,this._vertices[l+4]=1,this._vertices[l+5]=i,this._firstFreeElement=n},n._update=function(e){this._currentTime+=e/1e3,this._retireActiveGlitter(),this._freeRetiredGlitter(),this._firstActiveElement==this._firstFreeElement&&(this._currentTime=0),this._firstRetiredElement==this._firstActiveElement&&(this._drawCounter=0),this._updateTextureCoordinates()},n._beforeRender=function(e){return this._firstNewElement!=this._firstFreeElement&&this._addNewGlitterSegementToVertexBuffer(),this._drawCounter++,this._firstActiveElement!=this._firstFreeElement?(this._vertexBuffer.bindWithIndexBuffer(null),!0):!1},n._render=function(e){var t=0,i=ur.mainContext;this._firstActiveElement<this._firstFreeElement?(t=2*(this._firstFreeElement-this._firstActiveElement),i.drawArrays(5,2*this._firstActiveElement,t),Nr.trianglesFaces+=t-2,Nr.drawCall++):(t=2*(this.maxSegments-this._firstActiveElement),i.drawArrays(5,2*this._firstActiveElement,t),Nr.trianglesFaces+=t-2,Nr.drawCall++,this._firstFreeElement>0&&(t=2*this._firstFreeElement,i.drawArrays(5,0,t),Nr.trianglesFaces+=t-2,Nr.drawCall++))},n.addVertexPosition=function(e,t){if(this._owner.activeInHierarchy)if(this._numPositionMode<2)0===this._numPositionMode?(e.cloneTo(this._posModeLastPosition0),t.cloneTo(this._posModeLastPosition1)):(e.cloneTo(this._posModePosition0),t.cloneTo(this._posModePosition1)),this._numPositionMode++;else{var i=this._tempVector2;this._calcVelocity(e,this._posModeLastPosition0,i);var n=this._tempVector3;this._calcVelocity(t,this._posModeLastPosition1,n),this.addVertexPositionVelocity(this._posModePosition0,i,this._posModePosition1,n),this._posModePosition0.cloneTo(this._posModeLastPosition0),this._posModePosition1.cloneTo(this._posModeLastPosition1),e.cloneTo(this._posModePosition0),t.cloneTo(this._posModePosition1)}},n.addVertexPositionVelocity=function(e,t,i,n){if(this._owner.activeInHierarchy){if(0===this._numPositionVelocityMode)this._numPositionVelocityMode++;else{var o=this._tempVector0;rl.subtract(e,this._posVelModePosition0,o);var s=rl.scalarLength(o);rl.subtract(i,this._posVelModePosition1,o);var r=rl.scalarLength(o),a=0,l=l;if(l>s&&l>r)return;if(a=1+Math.floor(Math.max(s,r)/this.minInterpDistance),1===a)this._addGlitter(e,i,this._currentTime);else{a=Math.min(a,this.maxSlerpCount),this.scLeft.Init(this._posVelModePosition0,this._posVelModeVelocity0,e,t),this.scRight.Init(this._posVelModePosition1,this._posVelModeVelocity1,i,n);for(var h=1/a,c=h,u=this._currentTime-this._lastTime,d=1;a>=d;d++){var p=this._tempVector0;this.scLeft.Slerp(c,p);var f=this._tempVector1;this.scRight.Slerp(c,f);var _=this._lastTime+u*d/a;this._addGlitter(p,f,_),c+=h}}}this._lastTime=this._currentTime,e.cloneTo(this._posVelModePosition0),t.cloneTo(this._posVelModeVelocity0),i.cloneTo(this._posVelModePosition1),n.cloneTo(this._posVelModeVelocity1)}},n._destroy=function(){e.prototype._destroy.call(this),this._tempVector0=null,this._tempVector1=null,this._tempVector2=null,this._tempVector3=null,this._owner=null,this._vertices=null,this._vertexBuffer.destroy(),this._vertexBuffer=null,this.scLeft=null,this.scRight=null,this._posModeLastPosition0=null,this._posModeLastPosition1=null,this._posModePosition0=null,this._posModePosition1=null,this._posVelModePosition0=null,this._posVelModeVelocity0=null,this._posVelModePosition1=null,this._posVelModeVelocity1=null,this._lastPatchAddPos0=null,this._lastPatchAddPos1=null},n._getVertexBuffers=function(){return null},s(0,n,"_originalBoundingSphere",function(){return i.superGet(Yu,this,"_originalBoundingSphere")}),s(0,n,"_originalBoundingBox",function(){return i.superGet(Yu,this,"_originalBoundingBox")}),s(0,n,"triangleCount",function(){var e=0;return this._firstActiveElement<this._firstFreeElement?e=2*(this._firstFreeElement-this._firstActiveElement)-2:(e=2*(this.maxSegments-this._firstActiveElement)-2,e+=2*this._firstFreeElement-2),e}),s(0,n,"_vertexBufferCount",function(){return 1}),s(0,n,"maxSegments",function(){return this._maxSegments-1},function(e){var t=e+1;t!==this._maxSegments&&(this._maxSegments=t,this._vertexBuffer&&this._vertexBuffer.destroy(),this._initialize())}),t}(Yu),Hx=function(e){function t(){t.__super.call(this),this._clipNames=[],this._clips=[],this._playStartFrames=[],this._playEndFrames=[],this._cacheNodesSpriteOwners=[],this._cacheNodesAvatarOwners=[],this._cacheNodesDefaultlValues=[],this._cacheNodesToSpriteMap=[],this._cacheSpriteToNodesMap=[],this._cacheFullFrames=[],this._publicClipsDatas=[],this._playEventIndex=-1,this._updateTransformPropertyLoopCount=-1,this._lastFrameIndex=-1,this._defaultClipIndex=-1,this._cachePlayRate=1,this._currentPlayClip=null,this._currentFrameIndex=-1,this._currentTime=0,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this.isCache=!0,this.cacheFrameRate=60,this.playbackRate=1,this.playOnWake=!0}o(t,"laya.d3.component.Animator",e);var r=t.prototype;return i.imps(r,{"laya.resource.IDestroy":!0}),r._getAvatarOwnersByClip=function(e){var t=this._clips[e]._nodes,i=t.length,n=this._cacheNodesAvatarOwners[e];n.length=i;var o=this._cacheNodesDefaultlValues[e];o.length=i;for(var s=0;i>s;s++){for(var r=this._avatarNodes[0],a=t[s],l=a.path,h=0,c=l.length;c>h;h++){var u=l[h];if(""===u)break;if(r=r.getChildByName(u),!r)break}if(r){n[s]=r;var d=Ha._propertyGetFuncs[a.propertyNameID](r);if(d){var p=new Float32Array(a.keyFrameWidth);for(o[s]=p,h=0,c=d.length;c>h;h++)p[h]=d[h]}}}},r._handleSpriteOwnersByClip=function(e){var t=this._clips[e]._nodes,i=t.length,n=this._cacheNodesSpriteOwners[e];n.length=i;var o=this._cacheNodesDefaultlValues[e];o.length=i;for(var s=0;i>s;s++){var r=this._owner,a=t[s],l=a.path,h=0,c=0;for(h=0,c=l.length;c>h;h++){var u=l[h];if(""===u)break;if(r=r.getChildByName(u),!r)break}if(r){n[s]=r;var d=Ha._propertyGetFuncs[a.propertyNameID](null,r);if(d){var p=new Float32Array(a.keyFrameWidth);for(o[s]=p,h=0,c=d.length;c>h;h++)p[h]=d[h]}}}},r._offClipAndAvatarRelateEvent=function(e,t){e.loaded?t.loaded||t.off("loaded",this,this._getAvatarOwnersByClip):e.off("loaded",this,this._getAvatarOwnersAndInitDatasAsync)},r._getAvatarOwnersByClipAsync=function(e,t){t.loaded?this._getAvatarOwnersByClip(e):t.once("loaded",this,this._getAvatarOwnersByClip,[e])},r._offGetSpriteOwnersByClipAsyncEvent=function(e){e.loaded||e.off("loaded",this,this._getSpriteOwnersByClipAsync)},r._getSpriteOwnersByClipAsync=function(e,t){t.loaded?this._handleSpriteOwnersByClip(e):t.once("loaded",this,this._handleSpriteOwnersByClip,[e])},r._getAvatarOwnersAndInitDatasAsync=function(){for(var e=0,t=this._clips.length;t>e;e++)this._getAvatarOwnersByClipAsync(e,this._clips[e]);for(this._avatar._cloneDatasToAnimator(this),e=0,t=this._avatarNodes.length;t>e;e++)this._checkAnimationNode(this._avatarNodes[e],this._owner)},r._offGetClipCacheFullKeyframeIndicesEvent=function(e){e.loaded||e.off("loaded",this,this._computeCacheFullKeyframeIndices)},r._computeCacheFullKeyframeIndices=function(e){var t=this._clips[e],i=this._cacheFrameRateInterval*this._cachePlayRate,n=t._getFullKeyframeIndicesWithCache(i);if(n)return void(this._cacheFullFrames[e]=n);n=this._cacheFullFrames[e]=[];var o=t._nodes,s=o.length;n.length=s;for(var r=Math.ceil(t._duration/i-1e-5)+1,a=0;s>a;a++){var l=o[a],h=new Int32Array(r);h.fill(-1);for(var c=l.keyFrames,u=0,d=c.length;d>u;u++)for(var p=c[u],f=p.startTime,_=f+p.duration;_>=f;){var m=Math.ceil(f/i-1e-5);h[m]=u,f+=i}n[a]=h}t._cacheFullKeyframeIndices(i,n)},r._updateAnimtionPlayer=function(){this._updatePlayer(i.timer.delta/1e3)},r._onOwnerActiveHierarchyChanged=function(){var e=this._owner;e.activeInHierarchy?(i.timer.frameLoop(1,this,this._updateAnimtionPlayer),this.playOnWake&&this.clip&&this.play()):(0!==this.playState&&(this._stoped=!0),i.timer.clear(this,this._updateAnimtionPlayer))},r._eventScript=function(e,t){for(var i=this._currentPlayClip._animationEvents,n=i.length;this._playEventIndex<n;this._playEventIndex++){var o=i[this._playEventIndex],s=o.time;if(!(s>=e&&t>s))break;for(var r=this._owner._scripts,a=0,l=r.length;l>a;a++){var h=r[a],c=h[o.eventName];c&&c.apply(h,o.params)}}},r._setPlayParams=function(e,t){var i=this._currentTime;this._currentTime=e,this._currentFrameIndex=Math.max(Math.floor(this.currentPlayTime/t-1e-5),0),this._currentFrameTime=this._currentFrameIndex*t,this._eventScript(i,e)},r._setPlayParamsWhenStop=function(e,t){var i=this._currentTime;this._currentTime=e,this._currentFrameIndex=Math.max(Math.floor(e/t-1e-5),0),this._currentFrameTime=this._currentFrameIndex*t,this._eventScript(i,e),this._currentPlayClip=null},r._revertKeyframeNodes=function(e,t){var i=this._cacheNodesDefaultlValues[t],n=e._nodes;if(this._avatar)for(var o=this._cacheNodesAvatarOwners[t],s=0,r=o.length;r>s;s++){var a=o[s];a&&Ha._propertySetFuncs[n[s].propertyNameID](a,null,i[s])}else{var l=this._cacheNodesSpriteOwners[t];for(s=0,r=l.length;r>s;s++){var h=l[s];h&&Ha._propertySetFuncs[n[s].propertyNameID](null,h,i[s])}}},r._onAnimationStop=function(){var e,t,i,n=0,o=0;this._lastFrameIndex=-1;var s=this._currentPlayClip._nodes;if(this._avatar){var r=this._cacheNodesAvatarOwners[this._currentPlayClipIndex];for(n=0,o=r.length;o>n;n++){var a=r[n];e=s[n],t=e.keyFrames,i=t[t.length-1].data,a&&Ha._propertySetFuncs[e.propertyNameID](a,null,i)}}else{var l=this._cacheNodesSpriteOwners[this._currentPlayClipIndex];for(n=0,o=l.length;o>n;n++){var h=l[n];e=s[n],t=e.keyFrames,i=t[t.length-1].data,h&&Ha._propertySetFuncs[e.propertyNameID](null,h,i)}}},r._setAnimationClipPropertyToAnimationNode=function(e,t,i){for(var n=0,o=t.length;o>n;n++){var s=t[n],r=e[s];if(r){var a=this._currentPlayClip._nodes[s],l=i[s];l&&Ha._propertySetFuncs[a.propertyNameID](r,null,l)}}},r._setAnimationClipPropertyToSprite3D=function(e,t){for(var i=0,n=e.length;n>i;i++){var o=e[i];if(o){var s=this._currentPlayClip._nodes[i],r=t[i];r&&Ha._propertySetFuncs[s.propertyNameID](null,o,r)}}},r._handleSpriteOwnersBySprite=function(e,t,i,n){var o=this._clips[e],s=i.join("/"),r=o._nodesMap[s];if(r)for(var a=this._cacheNodesSpriteOwners[e],l=o._nodes,h=this._cacheNodesDefaultlValues[e],c=0,u=r.length;u>c;c++){var d=r[c],p=l.indexOf(d);if(t){a[p]=n;var f=Ha._propertyGetFuncs[d.propertyNameID](null,n);if(f){var _=h[p];_||(h[p]=_=new Float32Array(d.keyFrameWidth));for(var m=0,g=f.length;g>m;m++)_[m]=f[m]}}else a[p]=null}},r._evaluateAvatarNodesCacheMode=function(e,i,n,o,s){i._evaluateAnimationlDatasCacheMode(e,this._cacheFullFrames[this._currentPlayClipIndex],this,n,s),this._setAnimationClipPropertyToAnimationNode(e,s,n);for(var r=0,a=this._avatarNodes.length;a>r;r++){var l=this._avatarNodes[r],h=l.transform;if(h._worldUpdate){var c=new Float32Array(16);o[r]=c,h._setWorldMatrixAndUpdate(c)}else{var u=h.getWorldMatrix();o[r]=u?u:t.deafaultMatrix}}},r._evaluateAvatarNodesRealTime=function(e,i,n,o,s){i._evaluateAnimationlDatasRealTime(e,this.currentPlayTime,n,s),this._setAnimationClipPropertyToAnimationNode(e,s,n);for(var r=0,a=this._avatarNodes.length;a>r;r++){var l=this._avatarNodes[r].transform;l._worldUpdate?l._setWorldMatrixNoUpdate(o[r]):o[r]=t.deafaultMatrix}},r._updateAvatarNodesToSpriteCacheMode=function(e,i){for(var n=0,o=this._cacheSpriteToNodesMap.length;o>n;n++){var s=this._cacheSpriteToNodesMap[n],r=i[s];if(r!==t.deafaultMatrix){var a=this._avatarNodes[s].transform._entity,l=a.worldMatrix;Ya.matrix4x4MultiplyMFM(this._owner._transform.worldMatrix,r,l),a.worldMatrix=l}}},r._updateAvatarNodesToSpriteRealTime=function(){for(var e=0,i=this._cacheSpriteToNodesMap.length;i>e;e++){var n=this._avatarNodes[this._cacheSpriteToNodesMap[e]],o=n.transform._entity,s=n.transform;if(s._worldUpdate){var r=t._tempMatrix4x40;s._setWorldMatrixAndUpdate(r);var a=o.worldMatrix;Ya.matrix4x4MultiplyMFM(this._owner._transform.worldMatrix,r,a),o.worldMatrix=a}}},r._updatePlayer=function(e){if(null!=this._currentPlayClip&&!this._stoped&&this._currentPlayClip.loaded){var t=this._cacheFrameRateInterval*this._cachePlayRate,i=0;this._startUpdateLoopCount!==Nr.loopCount&&(i=e*this.playbackRate,this._elapsedPlaybackTime+=i);var n=this._currentPlayClip._frameRate,o=this._playStartFrames[this._currentPlayClipIndex]/n,s=Math.min(this._playEndFrames[this._currentPlayClipIndex]/n,this._currentPlayClip._duration),r=s-o;if(!this._currentPlayClip.islooping&&this._elapsedPlaybackTime>=r)return this._onAnimationStop(),this._setPlayParamsWhenStop(r,t),void this.event("stopped");if(i+=this._currentTime,r>0)if(i>=r){do i-=r,r>i&&(this._setPlayParams(i,t),this.event("complete")),this._playEventIndex=0,this._eventScript(0,i);while(i>=r)}else this._setPlayParams(i,t);else this._currentTime=this._currentFrameTime=this._currentFrameIndex=this._playEventIndex=0,this.event("complete")}},r._update=function(e){var t=this._currentPlayClip;if(2===this.playState&&t&&t.loaded){var n=this.playbackRate*i.timer.scale,o=this._cachePlayRate;this._canCache=this.isCache&&n>=o;var s,r=-1;if(this._canCache){if(r=this._currentFrameIndex,this._lastFrameIndex===r)return;if(s=t._getAnimationDataWithCache(o,r),this._avatar){var a=this._cacheNodesAvatarOwners[this._currentPlayClipIndex],l=t._cachePropertyMap,h=l.length;h>0&&(s||(s=[],s.length=h,t._cacheAnimationData(o,r,s),t._evaluateAnimationlDatasCacheMode(a,this._cacheFullFrames[this._currentPlayClipIndex],this,s,l)),this._setAnimationClipPropertyToAnimationNode(a,l,s)),this._curAvatarNodeDatas=t._getAvatarDataWithCache(this._avatar,this._cachePlayRate,r),this._curAvatarNodeDatas||(this._curAvatarNodeDatas=[],this._curAvatarNodeDatas.length=this._avatarNodes.length,t._cacheAvatarData(this._avatar,this._cachePlayRate,r,this._curAvatarNodeDatas),this._evaluateAvatarNodesCacheMode(a,t,t._publicClipDatas,this._curAvatarNodeDatas,t._unCachePropertyMap)),this._updateAvatarNodesToSpriteCacheMode(t,this._curAvatarNodeDatas)}else{var c=this._cacheNodesSpriteOwners[this._currentPlayClipIndex];s||(s=[],s.length=this._currentPlayClip._nodes.length,t._evaluateAnimationlDatasCacheMode(c,this._cacheFullFrames[this._currentPlayClipIndex],this,s,null),t._cacheAnimationData(o,r,s)),this._setAnimationClipPropertyToSprite3D(c,s)}}else if(s=t._publicClipDatas,this._avatar){if(t._evaluateAnimationlDatasRealTime(this._cacheNodesAvatarOwners[this._currentPlayClipIndex],this.currentPlayTime,s,t._cachePropertyMap),!this._publicAvatarNodeDatas){this._publicAvatarNodeDatas=[];var u=this._avatarNodes.length;this._publicAvatarNodeDatas.length=u;for(var d=1;u>d;d++)this._publicAvatarNodeDatas[d]=new Float32Array(16)}this._curAvatarNodeDatas=this._publicAvatarNodeDatas,this._evaluateAvatarNodesRealTime(this._cacheNodesAvatarOwners[this._currentPlayClipIndex],t,s,this._curAvatarNodeDatas,t._unCachePropertyMap),this._updateAvatarNodesToSpriteRealTime()}else t._evaluateAnimationlDatasRealTime(this._cacheNodesSpriteOwners[this._currentPlayClipIndex],this.currentPlayTime,s,null);this._lastFrameIndex=r}},r._checkAnimationNode=function(e,t){e.name!==t.name||t._transform.dummy||t._isLinkSpriteToAnimationNode(this,e,!0);for(var i=0,n=t._childs.length;n>i;i++)this._checkAnimationNode(e,t.getChildAt(i))},r._load=function(e){e.activeInHierarchy&&i.timer.frameLoop(1,this,this._updateAnimtionPlayer),this._owner.on("activeinhierarchychanged",this,this._onOwnerActiveHierarchyChanged)},r._unload=function(t){e.prototype._unload.call(this,t),t.activeInHierarchy&&i.timer.clear(this,this._updateAnimtionPlayer),this._owner.off("activeinhierarchychanged",this,this._onOwnerActiveHierarchyChanged),this._curAvatarNodeDatas=null},r._destroy=function(){e.prototype._destroy.call(this);for(var t=0,i=this._clips.length;i>t;t++)this._clips[t]._removeReference();this._currentPlayClip=null,this._clipNames=null,this._cacheNodesSpriteOwners=null,this._cacheNodesAvatarOwners=null,this._cacheNodesDefaultlValues=null,this._clips=null,this._cacheFullFrames=null},r._cloneTo=function(e){var t=e;t.avatar=this.avatar;for(var i=(this._clips.length,0),n=this._clips.length;n>i;i++)t.addClip(this._clips[i]);if(this.clip&&(t.clip=this.clip),this._linkSpritesData){t._linkSpritesData={};for(var o in this._linkSpritesData)t._linkSpritesData[o]=this._linkSpritesData[o].slice()}},r.addClip=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=4294967295),t=t||e.name;var o=this._clipNames.indexOf(t);if(-1!==o){if(this._clips[o]!==e)throw new Error("Animation:this playName has exist with another clip.")}else{var s=this._clips.indexOf(e);if(0>i||0>n)throw new Error("Animator:startFrame and endFrame must large than zero.");if(i>n)throw new Error("Animator:startFrame must less than endFrame.");this._clipNames.push(t),this._clips.push(e),this._playStartFrames.push(i),this._playEndFrames.push(n),this._cacheNodesSpriteOwners.push([]),this._cacheNodesAvatarOwners.push([]),this._cacheNodesDefaultlValues.push([]),this._publicClipsDatas.push([]),e._addReference(),s=this._clips.length-1,this._avatar?this._avatar.loaded?this._getAvatarOwnersByClipAsync(s,e):this._avatar.once("loaded",this,this._getAvatarOwnersByClipAsync,[s,e]):this._getSpriteOwnersByClipAsync(s,e),e.loaded?this._computeCacheFullKeyframeIndices(s):e.once("loaded",this,this._computeCacheFullKeyframeIndices,[s])}},r.removeClip=function(e){var t=this._clips.indexOf(e);-1!==t&&(this._avatar?this._offClipAndAvatarRelateEvent(this._avatar,e):this._offGetSpriteOwnersByClipAsyncEvent(e),this._offGetClipCacheFullKeyframeIndicesEvent(e),this._clipNames.splice(t,1),this._clips.splice(t,1),this._playStartFrames.splice(t,1),this._playEndFrames.splice(t,1),this._cacheNodesSpriteOwners.splice(t,1),this._cacheNodesAvatarOwners.splice(t,1),this._cacheNodesDefaultlValues.splice(t,1),this._publicClipsDatas.splice(t,1),e._removeReference())},r.removeClipByName=function(e){var t=this._clipNames.indexOf(e);if(-1!==t){var i=this._clips[t];this._avatar?this._offClipAndAvatarRelateEvent(this._avatar,i):this._offGetSpriteOwnersByClipAsyncEvent(i),this._offGetClipCacheFullKeyframeIndicesEvent(i),this._clipNames.splice(t,1),this._clips.splice(t,1),this._playStartFrames.splice(t,1),this._playEndFrames.splice(t,1),this._cacheNodesSpriteOwners.splice(t,1),this._cacheNodesAvatarOwners.splice(t,1),this._cacheNodesDefaultlValues.splice(t,1),this._publicClipsDatas.splice(t,1)}},r.getClip=function(e){var t=this._clipNames.indexOf(e);
return-1!==t?this._clips[t]:null},r.getClipCount=function(){return this._clips.length},r.play=function(e,t){if(void 0===t&&(t=1),!e&&-1==this._defaultClipIndex)throw new Error("Animator:must have  default clip value,please set clip property.");e?(this._currentPlayClipIndex=this._clipNames.indexOf(e),this._currentPlayClip=this._clips[this._currentPlayClipIndex]):(this._currentPlayClipIndex=this._defaultClipIndex,this._currentPlayClip=this._clips[this._defaultClipIndex]),this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this._playEventIndex=0,this.playbackRate=t,this._stoped=!1,this._currentFrameIndex=0,this._startUpdateLoopCount=Nr.loopCount,this._lastPlayAnimationClip&&this._lastPlayAnimationClip!==this._currentPlayClip&&this._revertKeyframeNodes(this._lastPlayAnimationClip,this._lastPlayAnimationClipIndex),this._updatePlayer(0),this._lastPlayAnimationClip=this._currentPlayClip,this._lastPlayAnimationClipIndex=this._currentPlayClipIndex},r.stop=function(){0!==this.playState&&(this._stoped=!0,this.event("stopped"))},r._getLinkSpritePath=function(e,t){t.unshift(e.name);var i=e._parent;i._hierarchyAnimator===this?this._getLinkSpritePath(i,t):t.shift()},r.linkSprite3DToAvatarNode=function(e,t){if(t._hierarchyAnimator===this){if(this._avatar){var i=this._avatarNodeMap[e];if(i){this._linkSpritesData=this._linkSpritesData||{};var n=[];return this._getLinkSpritePath(t,n),this._linkSpritesData[e]=n,t._isLinkSpriteToAnimationNode(this,i,!0),!0}return!1}return!1}throw"Animator:sprite3D must belong to this Animator"},r.unLinkSprite3DToAvatarNode=function(e){if(this._avatar){var t=e.transform.dummy;if(t){var i=this._avatarNodeMap[t._owner.name];return e._isLinkSpriteToAnimationNode(this,i,!1),!0}return!1}return!1},s(0,r,"playbackTime",null,function(e){if(null!=this._currentPlayClip&&this._currentPlayClip&&this._currentPlayClip.loaded){this._startUpdateLoopCount=Nr.loopCount;var t=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=e,this._currentFrameIndex=Math.floor(this.currentPlayTime/t),this._currentFrameTime=this._currentFrameIndex*t}}),s(0,r,"currentFrameTime",function(){return this._currentFrameTime}),s(0,r,"playState",function(){return null==this._currentPlayClip?0:this._stoped?0:2}),s(0,r,"currentPlayTime",function(){return this._currentTime+this._playStartFrames[this._currentPlayClipIndex]/this._currentPlayClip._frameRate}),s(0,r,"currentPlayClip",function(){return this._currentPlayClip}),s(0,r,"cachePlayRate",function(){return this._cachePlayRate},function(e){if(this._cachePlayRate!==e){this._cachePlayRate=e;for(var t=0,i=this._clips.length;i>t;t++)this._clips[t].loaded&&this._computeCacheFullKeyframeIndices(t)}}),s(0,r,"cacheFrameRate",function(){return this._cacheFrameRate},function(e){if(this._cacheFrameRate!==e){this._cacheFrameRate=e,this._cacheFrameRateInterval=1/this._cacheFrameRate;for(var t=0,i=this._clips.length;i>t;t++)this._clips[t].loaded&&this._computeCacheFullKeyframeIndices(t)}}),s(0,r,"paused",function(){return this._stoped},function(e){this._stoped=e,e&&this.event("paused")}),s(0,r,"clip",function(){return this._clips[this._defaultClipIndex]},function(e){var t=e?this._clips.indexOf(e):-1;this._defaultClipIndex!==t&&(-1!==this._defaultClipIndex&&this.removeClip(this._clips[this._defaultClipIndex]),-1!==t&&this.addClip(e,e.name),this._defaultClipIndex=t)}),s(0,r,"currentFrameIndex",function(){return this._currentFrameIndex}),s(0,r,"avatar",function(){return this._avatar},function(e){if(this._avatar!==e){var t=this._avatar;this._avatar=e;for(var i=this._clips.length,n=0;i>n;n++)this._offClipAndAvatarRelateEvent(t,this._clips[n]);e&&(e.loaded?this._getAvatarOwnersAndInitDatasAsync():e.once("loaded",this,this._getAvatarOwnersAndInitDatasAsync))}}),n(t,["deafaultMatrix",function(){return this.deafaultMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new Float32Array(16)}]),t}(Qu),Ux=(function(e){function t(){t.__super.call(this)}o(t,"laya.d3.component.Script",e);var i=t.prototype;return i.onTriggerEnter=function(e){},i.onTriggerExit=function(e){},i.onTriggerStay=function(e){},s(0,i,"isSingleton",function(){return t._isSingleton}),t._isSingleton=!1,t}(Qu),function(e){function t(){t.__super.call(this),this._isRigidbody=!1,this._runtimeCollisonMap={},this._runtimeCollisonTestMap={},this._ignoreCollisonMap={},this.isTrigger=!0}o(t,"laya.d3.component.physics.Collider",e);var i=t.prototype;return i._clearCollsionMap=function(){for(var e in this._runtimeCollisonMap){var t=this._runtimeCollisonMap[e];delete t._runtimeCollisonMap[this.id],t._isRigidbody&&delete t._runtimeCollisonTestMap[this.id];var i=t.id;delete this._runtimeCollisonMap[i],this._isRigidbody&&delete this._runtimeCollisonTestMap[i]}},i._unload=function(e){for(var t in this._runtimeCollisonMap){var i=this._runtimeCollisonMap[t];delete i._runtimeCollisonMap[this.id],i._isRigidbody&&delete i._runtimeCollisonTestMap[this.id],delete this._ignoreCollisonMap[t]._ignoreCollisonMap[this.id]}},i._setIsRigidbody=function(e){if(this._isRigidbody!==e){this._isRigidbody=e;var t=this._owner;if(t.displayedInStage){var i=t.layer;i._removeCollider(this),i._addCollider(this)}}},i._getType=function(){return-1},i._collisonTo=function(e){return!1},i.raycast=function(e,t,i){throw void 0===i&&(i=1.79e308),new Error("Collider:Must override it.")},s(0,i,"isSingleton",function(){return t._isSingleton}),s(0,i,"enable",e.prototype._$get_enable,function(e){if(this._enable!==e){var t=this._owner;t.displayedInStage&&(e||this._clearCollsionMap()),this._enable=e,this.event("enablechanged",this._enable)}}),t._isSingleton=!1,t}(Qu)),zx=function(e){function t(){t.__super.call(this)}o(t,"laya.d3.component.Rigidbody",e);var i=t.prototype;return s(0,i,"enable",e.prototype._$get_enable,function(e){if(this._enable!==e){for(var t=this._owner._colliders,i=0,n=t.length;n>i;i++){var o=t[i];o._setIsRigidbody(e);var s=o._runtimeCollisonMap,r=o._runtimeCollisonTestMap;if(!e)for(var a in s)delete r[a]}this._enable=e,this.event("enablechanged",this._enable)}}),t}(Qu),Wx=function(e){function t(e){this._audio=null,this._onEnd=null,this._resumePlay=null,t.__super.call(this),this._onEnd=Dr.bind(this.__onEnd,this),this._resumePlay=Dr.bind(this.__resumePlay,this),e.addEventListener("ended",this._onEnd),this._audio=e}o(t,"laya.media.h5audio.AudioSoundChannel",e);var n=t.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.__resumePlay=function(){if(this._audio&&this._audio.removeEventListener("canplay",this._resumePlay),!this.isStopped)try{this._audio.currentTime=this.startTime,Or.container.appendChild(this._audio),this._audio.play()}catch(e){this.event("error")}},n.play=function(){if(this.isStopped=!1,this._audio){try{this._audio.playbackRate=jh.playbackRate,this._audio.currentTime=this.startTime}catch(e){return void this._audio.addEventListener("canplay",this._resumePlay)}jh.addChannel(this),Or.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()}},n.stop=function(){this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&Ns.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),Or.onIE||this._audio!=td._musicAudio&&Hr.recover("audio:"+this.url,this._audio),Or.removeElement(this._audio),this._audio=null)},n.pause=function(){this.isStopped=!0,jh.removeChannel(this),"pause"in this._audio&&this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),"play"in this._audio&&this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),t}(Pu),Yx=function(e){function t(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=nd.ctx,t.__super.call(this),this._onPlayEnd=Dr.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}o(t,"laya.media.webaudio.WebAudioSoundChannel",e);var n=t.prototype;return n.play=function(){if(jh.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){if(this.startTime>=this.duration)return this.stop();var e=this.context,t=this.gain,i=e.createBufferSource();this.bufferSource=i,i.buffer=this.audioBuffer,i.connect(t),t&&t.disconnect(),t.connect(e.destination),i.onended=this._onPlayEnd,this._startTime=Or.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.001):this.gain.gain.value=this._volume,0==this.loops&&(i.loop=!0),i.playbackRate.setTargetAtTime?i.playbackRate.setTargetAtTime(jh.playbackRate,this.context.currentTime,.001):i.playbackRate.value=jh.playbackRate,i.start(0,this.startTime),this._currentTime=0}},n.__onPlayEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n._clearBufferSource=function(){if(this.bufferSource){var e=this.bufferSource;e.stop?e.stop(0):e.noteOff(0),e.disconnect(0),e.onended=null,t._tryCleanFailed||this._tryClearBuffer(e),this.bufferSource=null}},n._tryClearBuffer=function(e){if(Or.onMac)try{e.buffer=nd._miniBuffer}catch(i){t._tryCleanFailed=!0}else try{e.buffer=null}catch(i){t._tryCleanFailed=!0}},n.stop=function(){e.prototype.stop.call(this),this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,jh.autoReleaseSound&&i.timer.once(5e3,null,jh.disposeSoundIfNotUsed,[this.url],!1)},n.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,jh.removeChannel(this),jh.autoReleaseSound&&i.timer.once(5e3,null,jh.disposeSoundIfNotUsed,[this.url],!1)},n.resume=function(){this.startTime=this._pauseTime,this.play()},s(0,n,"volume",function(){return this._volume},function(e){this.isStopped||(this._volume=e,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(e,this.context.currentTime,.001):this.gain.gain.value=e)}),s(0,n,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),s(0,n,"position",function(){return this.bufferSource?(Or.now()-this._startTime)/1e3+this.startTime:0}),t._tryCleanFailed=!1,t.SetTargetDelay=.001,t}(Pu),qx=function(e){function t(e,i){this._audio=null,this._onEnd=null,this._miniSound=null,t.__super.call(this),this._audio=e,this._miniSound=i,this._onEnd=t.bindToThis(this.__onEnd,this),e.onEnded(this._onEnd)}o(t,"laya.qq.mini.MiniSoundChannel",e,"MiniSoundChannel$11");var n=t.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},n.play=function(){this.isStopped=!1,jh.addChannel(this),this._audio.play()},n.stop=function(){this.isStopped=!0,jh.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.pause(),this._audio.offEnded(null),this._audio=null,this._miniSound=null,this._onEnd=null)},n.pause=function(){this.isStopped=!0,this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,jh.addChannel(this),this._audio.play())},s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(e){this._audio&&(this._audio.volume=e)}),s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"autoplay",function(){return this._audio.autoplay},function(e){this._audio.autoplay=e}),s(0,n,"loop",function(){return this._audio.loop},function(e){this._audio.loop=e}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"startTime",null,function(e){this._audio&&(this._audio.startTime=e)}),t.bindToThis=function(e,t){var i=e;return i=e.bind(t)},t}(Pu),Kx=(function(e){function t(){this.isCached=!1,this.canvas=null,this.tex=null,this.rec=null,t.__super.call(this)}o(t,"laya.ani.bone.canvasmesh.CacheAbleSkinMesh",e);var i=t.prototype;return i.getCanvasPic=function(){var e=new GS("2D"),i=e.getContext("2d");this.rec=this.mesh.getBounds(),e.size(this.rec.width,this.rec.height);var n;return n=this.transform,this.transform=t.tempMt,this.transform.identity(),this.transform.translate(-this.rec.x,-this.rec.y),this.renderToContext(i),this.transform.translate(+this.rec.x,+this.rec.y),this.transform=n,new Vu(e)},i.render=function(e,t,i){this.mesh.texture&&(this.isCached||(this.isCached=!0,this.tex=this.getCanvasPic()),this.transform?(this.transform.translate(t,i),this._renderTextureToContext(e),this.transform.translate(-t,-i)):(this.transform=fd._tempMatrix,this.transform.identity(),this.transform.translate(t,i),this._renderTextureToContext(e),this.transform.translate(-t,-i),this.transform=null))},i._renderTextureToContext=function(e){this.context=e.ctx||e,e.save();var t;if(t=this.tex,this.transform){var i=this.transform;e.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)}this.rec=this.mesh.getBounds(),e.translate(this.rec.x,this.rec.y),e.drawTexture(t,0,0,t.width,t.height,0,0),e.restore()},n(t,["tempMt",function(){return this.tempMt=new Ph}]),t}(fd),function(e){function t(e){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=wd._TEXCOORD,void 0===e&&(e=0),t.__super.call(this,1,e)}o(t,"laya.webgl.shader.d2.value.TextureSV",e);var i=t.prototype;return i.setValue=function(e){this.ALPHA=e.ALPHA,e.filters&&this.setFilters(e.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},t}(wd)),Xx=function(e){function t(e){this.a_color=null,this.u_pos=[0,0],t.__super.call(this,4,0),this.position=[2,5126,!1,5*Zs.BYTES_PE,0],this.a_color=[3,5126,!1,5*Zs.BYTES_PE,2*Zs.BYTES_PE]}return o(t,"laya.webgl.shader.d2.value.PrimitiveSV",e),t}(wd),Qx=function(e){function t(e){t.__super.call(this,2,0),this.color=[]}o(t,"laya.webgl.shader.d2.value.Color2dSV",e);var i=t.prototype;return i.setValue=function(e){e.fillStyle&&(this.color=e.fillStyle._color._color),e.strokeStyle&&(this.color=e.strokeStyle._color._color)},t}(wd),jx=function(e){function t(e){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=wd._TEXCOORD,t.__super.call(this,256,0)}o(t,"laya.webgl.shader.d2.value.FillTextureSV",e);var i=t.prototype;return i.setValue=function(e){this.ALPHA=e.ALPHA,e.filters&&this.setFilters(e.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},t}(wd),Zx=function(e){function t(e){this.texcoord=null,this.offsetX=300,this.offsetY=0,t.__super.call(this,512,0);var i=8*Zs.BYTES_PE;this.position=[2,5126,!1,i,0],this.texcoord=[2,5126,!1,i,2*Zs.BYTES_PE],this.color=[4,5126,!1,i,4*Zs.BYTES_PE]}return o(t,"laya.webgl.shader.d2.skinAnishader.SkinSV",e),t}(wd),Jx=function(e){function t(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,t.__super.call(this),this._layout=fs.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}o(t,"laya.ui.Component",e);var n=t.prototype;return i.imps(n,{"laya.ui.IComponent":!0}),n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},n.preinitialize=function(){},n.createChildren=function(){},n.initialize=function(){},n.callLater=function(e,t){i.timer.callLater(this,e,t)},n.runCallLater=function(e){i.timer.runCallLater(this,e)},n.commitMeasure=function(){},n.changeSize=function(){this.event("resize"),this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},n.getLayout=function(){return this._layout===fs.EMPTY&&(this._layout=new fs),this._layout},n._setLayoutEnabled=function(e){this._layout&&this._layout.enable!=e&&(this._layout.enable=e,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},n.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},n.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},n.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},n.resetLayoutX=function(){var e=this._layout;if(isNaN(e.anchorX)||(this.pivotX=e.anchorX*this.width),this.layoutEnabled){var t=this.parent;t&&(isNaN(e.centerX)?isNaN(e.left)?isNaN(e.right)||(this.x=Math.round(t.width-this.displayWidth-e.right+this.pivotX*this.scaleX)):(this.x=Math.round(e.left+this.pivotX*this.scaleX),isNaN(e.right)||(this.width=(t._width-e.left-e.right)/(this.scaleX||.01))):this.x=Math.round(.5*(t.width-this.displayWidth)+e.centerX+this.pivotX*this.scaleX))}},n.resetLayoutY=function(){var e=this._layout;if(isNaN(e.anchorY)||(this.pivotY=e.anchorY*this.height),this.layoutEnabled){var t=this.parent;t&&(isNaN(e.centerY)?isNaN(e.top)?isNaN(e.bottom)||(this.y=Math.round(t.height-this.displayHeight-e.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(e.top+this.pivotY*this.scaleY),isNaN(e.bottom)||(this.height=(t._height-e.top-e.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(t.height-this.displayHeight)+e.centerY+this.pivotY*this.scaleY))}},n.onMouseOver=function(e){i.stage.event("showtip",this._toolTip)},n.onMouseOut=function(e){i.stage.event("hidetip",this._toolTip)},n._childChanged=function(t){this.callLater(this.changeSize),e.prototype._childChanged.call(this,t)},s(0,n,"disabled",function(){return this._disabled},function(e){e!==this._disabled&&(this.gray=this._disabled=e,this.mouseEnabled=!e)}),s(0,n,"gray",function(){return this._gray},function(e){e!==this._gray&&(this._gray=e,ps.gray(this,e))}),s(0,n,"tag",function(){return this._tag},function(e){this._tag=e}),s(0,n,"anchorY",function(){return this._layout.anchorY},function(e){e!=this._layout.anchorY&&(this.getLayout().anchorY=e,this._setLayoutEnabled(!0)),this.resetLayoutY()}),s(0,n,"toolTip",function(){return this._toolTip},function(e){this._toolTip!=e&&(this._toolTip=e,null!=e?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),s(0,n,"anchorX",function(){return this._layout.anchorX},function(e){e!=this._layout.anchorX&&(this.getLayout().anchorX=e,this._setLayoutEnabled(!0)),this.resetLayoutX()}),s(0,n,"centerY",function(){return this._layout.centerY},function(e){e!=this._layout.centerY&&(this.getLayout().centerY=e,this._setLayoutEnabled(!0)),this.resetLayoutY()}),s(0,n,"right",function(){return this._layout.right},function(e){e!=this._layout.right&&(this.getLayout().right=e,this._setLayoutEnabled(!0)),this.resetLayoutX()}),s(0,n,"dataSource",function(){return this._dataSource},function(e){this._dataSource=e;for(var t in this._dataSource)this.hasOwnProperty(t)&&"function"!=typeof this[t]&&(this[t]=this._dataSource[t])}),s(0,n,"scaleY",e.prototype._$get_scaleY,function(e){i.superGet(Bd,this,"scaleY")!=e&&(i.superSet(Bd,this,"scaleY",e),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),s(0,n,"left",function(){return this._layout.left},function(e){e!=this._layout.left&&(this.getLayout().left=e,this._setLayoutEnabled(!0)),this.resetLayoutX()}),s(0,n,"bottom",function(){return this._layout.bottom},function(e){e!=this._layout.bottom&&(this.getLayout().bottom=e,this._setLayoutEnabled(!0)),this.resetLayoutY()}),s(0,n,"top",function(){return this._layout.top},function(e){e!=this._layout.top&&(this.getLayout().top=e,this._setLayoutEnabled(!0)),this.resetLayoutY()}),s(0,n,"scaleX",e.prototype._$get_scaleX,function(e){i.superGet(Bd,this,"scaleX")!=e&&(i.superSet(Bd,this,"scaleX",e),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),s(0,n,"comXml",function(){return this._comXml},function(e){this._comXml=e}),s(0,n,"measureHeight",function(){var e=0;this.commitMeasure();for(var t=this.numChildren-1;t>-1;t--){var i=this.getChildAt(t);i.visible&&(e=Math.max(i.y+i.height*i.scaleY,e))}return e}),s(0,n,"displayWidth",function(){return this.width*this.scaleX}),s(0,n,"centerX",function(){return this._layout.centerX},function(e){e!=this._layout.centerX&&(this.getLayout().centerX=e,this._setLayoutEnabled(!0)),this.resetLayoutX()}),s(0,n,"measureWidth",function(){var e=0;this.commitMeasure();for(var t=this.numChildren-1;t>-1;t--){var i=this.getChildAt(t);i.visible&&(e=Math.max(i.x+i.width*i.scaleX,e))}return e}),s(0,n,"displayHeight",function(){return this.height*this.scaleY}),s(0,n,"height",function(){return this._height?this._height:this.measureHeight},function(e){this._height!=e&&(this._height=e,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),s(0,n,"width",function(){return this._width?this._width:this.measureWidth},function(e){this._width!=e&&(this._width=e,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),t}(Bd),$x=function(e){function t(){this.info=null,this.duration=1500,t.__super.call(this),this.info=new iw,this.info.fontSize=30,this.info.bold=!0,this.info.color="#eecc99",this.info.bgColor="#000000",this.info.align="center",this.info.leading=5,this.addChild(this.info)}o(t,"common.view.componets.PromptInfoPlayer",e);var i=t.prototype;return i.prompt=function(e){this.info.text=e.info,this.info.width>720&&(this.info.width=720,this.info.wordWrap=!0),this.info.x=-this.info.width/2,this.info.visible=!0,this.info.alpha=1,this.info.scaleX=1,this.info.scaleY=1,this.info.y=10;var t=this.duration;e.updateTime&&(t=e.updateTime),Lr.to(this.info,{y:-50,alpha:.8},t,null,h.create(this,this.onComplete))},i.onComplete=function(){this.info.visible=!1,this.info.width=0,this.info.wordWrap=!1,this.event("complete")},t}(Bd),eS=function(e){function t(e,i){this.letter=null,t.__super.call(this),this.width=e,this.height=i,this.letter=new fS,this.letter.fontSize=24,this.letter.color="#e70626",this.addChild(this.letter)}o(t,"common.view.componets.CaptchaBg",e);var i=t.prototype;return i.drawLine=function(e,i){for(var n=0;e>n;n++){var o=t.random(-10,10),s=t.random(10,this.height-10),r=t.random(this.width-10,this.width+10),a=t.random(2,this.height-2);this.graphics.drawLine(o,s,r,a,i,3)}},i.drawOval=function(e,i){for(var n=0;e>n;n++){var o=5+t.random(0,10);this.graphics.drawCircle(t.random(0,this.width-25),t.random(0,this.height-15),o,"#0",i,3)}},i.randLetter=function(){var e=t.random(1,10);this.letter.changeText(e+""),this.letter.pos(t.random(36,this.width-46),t.random(0,this.height-15)),this.letter.rotation=t.random(-30,30)},t.random=function(e,t){return vo["int"](Math.random()*(t-e+1)+e)},t}(Bd),tS=function(e){function t(){this._transparentMask=null,this._topMask=null,this._info=null,t.__super.call(this),this.mouseEnabled=!0,this._transparentMask=new Bd,this._transparentMask.width=v.browerWidth,this._transparentMask.height=v.browerHeight,this._transparentMask.graphics.clear(),this._transparentMask.graphics.drawRect(0,0,this._transparentMask.width,this._transparentMask.height,"#cccccc"),this._transparentMask.mouseEnabled=!0,this._transparentMask.alpha=0,this._transparentMask.visible=!0,this.addChild(this._transparentMask),this._topMask=new Bd,this._topMask.width=i.stage.width,this._topMask.height=i.stage.height,this._topMask.graphics.clear(),this._topMask.graphics.drawRect(0,0,this._topMask.width,this._topMask.height,"#000000"),this._topMask.alpha=.3,this.addChild(this._topMask),this._info=new hS("正在载入","#ffffff",24),this._info.pos(10,v.browerHeight-30),this.addChild(this._info),this.zOrder=10001}o(t,"common.view.componets.TopMaskView",e);var n=t.prototype;return n.alertInfo=function(e){this._topMask.visible=!1,null==e||""==e?this._info.visible=!1:(this._info.changeInfo(e,"#ffffff",24),this._info.visible=!0),this.visible=!0},n.erroInfo=function(e){this._topMask.visible=!0,null==e||""==e?this._info.visible=!1:(this._info.changeInfo(e,"#FFD000",24),this._info.visible=!0),this.visible=!0},n.hide=function(){this.visible=!1},t}(Bd),iS=function(e){function t(){this._label=null,this._timeLive=0,this.nature=0,t.__super.call(this),this._label=new iw,this._label.fontSize=24,this.addChild(this._label)}o(t,"modules.fight.view.components.BuffCell",e);var n=t.prototype;return n.showBuf=function(e,t){switch(this.nature=e,e){case 1:this._label.text="【眩晕】",this._label.color="#e70626";break;case 2:this._label.text="【中毒】",this._label.color="#e70626";break;case 3:this._label.text="【冰冻】",this._label.color="#e70626";break;case 4:this._label.text="【致盲】",this._label.color="#e70626";break;case 5:this._label.text="【虚弱】",this._label.color="#e70626";break;case 1008:this._label.text="【重伤】",this._label.color="#e70626";break;case 1009:this._label.text="【破招】",this._label.color="#e70626";break;default:this._label.text="【??】"+e,this._label.color="#ffffff"}this._timeLive<t&&(this._timeLive=t),this._label.alpha=1,this.width=this._label.width-10,i.timer.loop(100,this,this.onLoop)},n.onLoop=function(){return this._timeLive-=100,this._timeLive<=0?(this.removeSelf(),i.timer.clear(this,this.onLoop),Hr.recover("BuffCell_clz",this),void this.event("complete",this.nature)):void(this._timeLive<3e3&&(this._label.alpha=1==this._label.alpha?.5:1))},n.clear=function(){this._timeLive=0,i.timer.clear(this,this.onLoop),Hr.recover("BuffCell_clz",this),this.event("complete",this.nature)},t.getOne=function(){return Hr.getItemByClass("BuffCell_clz",t)},t.NAME="BuffCell_clz",t}(Bd),nS=function(e){function t(){this._label=null,this._timeLive=0,this.skillId=0,t.__super.call(this),this._label=new iw,this._label.fontSize=24,this._label.bold=!0,this.addChild(this._label)}o(t,"modules.fight.view.components.BuffSkillCell",e);var n=t.prototype;return n.showBuf=function(e,t){this.skillId=e;var n;0>e?(n=g.database.getSkill(-e),this._label.text="【"+n.name+"】",this._label.color="#e70626"):e>0&&(n=g.database.getSkill(e),this._label.text="【"+n.name+"】",this._label.color="#00dc24"),this.width=this._label.width-10,this._timeLive=t,this._label.alpha=1,i.timer.loop(100,this,this.onLoop)},n.onLoop=function(){return this._timeLive-=100,this._timeLive<=0?(this.removeSelf(),i.timer.clear(this,this.onLoop),Hr.recover("BuffSkillCell_clz",this),void this.event("complete")):void(this._timeLive<3e3&&(this._label.alpha=1==this._label.alpha?.5:1))},n.clear=function(){this._timeLive=0,i.timer.clear(this,this.onLoop),Hr.recover("BuffSkillCell_clz",this),this.event("complete")},t.getOne=function(){return Hr.getItemByClass("BuffSkillCell_clz",t)},t.NAME="BuffSkillCell_clz",t}(Bd),oS=function(e){function t(){this.lb=null,t.__super.call(this),this.tw=new Lr,this.tw.gid=t.gidNum++,this.lb=new iw,this.lb.width=40,this.lb.pivotX=20,this.lb.fontSize=36,this.lb.bold=!0,this.lb.align="center",this.addChild(this.lb);var e=this.lb.$_GID||(this.lb.$_GID=Dr.getGID());this.tw.gid=e}o(t,"modules.fight.view.components.CombatTipView",e);var i=t.prototype;return i.popMis=function(){this.lb.text="闪避",this.lb.color="#ffffff",this.tw.to(this,{y:this.y-20},500,Br.circIn,h.create(this,this.onPopEnd))},i.popCrazy=function(e){e?(this.lb.text="狂暴",this.lb.color="#cc0000"):(this.lb.text="狂暴结束",this.lb.color="#000000"),this.tw.to(this,{y:this.y-20},500,Br.circIn,h.create(this,this.onPopEnd))},i.popHurt=function(e,t,i){void 0===i&&(i=!1),i?this.lb.color="#e0e00d":this.lb.color=t?"#3dc613":"#ffffff",e>0?(this.lb.color="#00ff00",this.lb.text="+"+String(e)):0==e?this.lb.text="伤害免疫":this.lb.text=String(e),this.tw.to(this,{y:this.y-20},500,Br.circIn,h.create(this,this.onPopEnd))},i.popHurtCritic=function(e){this.lb.color="#40fb06",0==e?this.lb.text="伤害免疫":this.lb.text=String(e),this.tw.to(this,{y:this.y-20},500,Br.circIn,h.create(this,this.onPopEnd))},i.popMPChange=function(e){this.lb.color="#00ddff",e>0?this.lb.text="+"+String(e):this.lb.text=String(e),this.tw.to(this,{y:this.y-20},500,Br.circIn,h.create(this,this.onPopEnd))},i.onPopEnd=function(){this.tw&&(this.tw.clear(),this.removeSelf(),this.name="",Hr.recover("CombatTipView",this))},i.clear=function(){this.tw&&(this.tw.clear(),this.name="",Hr.recover("CombatTipView",this))},t.getOne=function(){return Hr.getItemByClass("CombatTipView",t)},t.CLZZ_NAME="CombatTipView",t.offsetY=20,t.gidNum=18090,t}(Bd),sS=function(e){function t(){this.damge=null,this._icon=null,t.__super.call(this),this._icon=new rw("ui/head/m1.png"),this._icon.width=87,this._icon.height=83,this.addChild(this._icon)}o(t,"modules.worldboss.view.componets.WorldBossFighter",e);var i=t.prototype;return i.clear=function(){this.damge=null,this.removeSelf(),Hr.recover("WorldBossFighter",this)},i.randomIcon=function(){this._icon.skin=t.ICONS[fo.RandomBetweenTwoNumbers(0,3)]},t.getOne=function(){return Hr.getItemByClass("WorldBossFighter",t)},t.CLZZ_NAME="WorldBossFighter",n(t,["ICONS",function(){return this.ICONS=["ui/head/m1.png","ui/head/m2.png","ui/head/w1.png","ui/head/w2.png"]}]),t}(Bd),rS=function(e){function t(){t.__super.call(this),this.proxyName="FightAlcaProxy"}return o(t,"modules.fight.model.FightAlcaProxy",e),t.NAME="FightAlcaProxy",t}(tf),aS=function(e){function t(){t.__super.call(this),this.proxyName="FightDungeonDailyProxy"}return o(t,"modules.fight.model.FightDungeonDailyProxy",e),t.NAME="FightDungeonDailyProxy",t}(tf),lS=function(e){function t(){this.hangContext=null,t.__super.call(this),this.proxyName="FightVideoProxy"}return o(t,"modules.fight.model.FightVideoProxy",e),t.NAME="FightVideoProxy",t}(tf),hS=function(e){function t(e,i,n){this._hangingDotIndex=0,this.charNum=0,this._textNow=null,t.__super.call(this),this.changeInfo(e,i,n)}o(t,"com.nwei.utils.JumpText",e);var n=t.prototype;return n.changeInfo=function(e,t,n){if(this._textNow!=e){this.charNum=0,this._hangingDotIndex=0,this.removeChildren();for(var o=0,s=!1,r=0;r<e.length;r++){var a=e.charAt(r),l=new fS;l.text=a,l.bold=!0,l.color=t,l.align="left",l.fontSize=n,"."==a&&0==s&&(s=!0,o+=5),l.x=o,o+="."==a?n-4:n,this.addChild(l),this.charNum++}this.charNum>0?i.timer.loop(200,this,this.onHangingDot):i.timer.clear(this,this.onHangingDot)}},n.onHangingDot=function(){if(0!=this.visible){this._hangingDotIndex>this.charNum-1&&(this._hangingDotIndex=0);var e=this.getChildAt(this._hangingDotIndex);e.y=e.y>=5?0:5,this._hangingDotIndex+=1}},n.clearJumping=function(){i.timer.clear(this,this.onHangingDot)},t}(Bd),cS=function(e){function t(){this.lockLayer=null,this.popupEffect=function(e){e.scale(1,1),Lr.from(e,{x:i.stage.width/2,y:i.stage.height/2,scaleX:0,scaleY:0},300,Br.backOut,h.create(this,this.doOpen,[e]))},this.closeEffect=function(e,t){Lr.to(e,{x:i.stage.width/2,y:i.stage.height/2,scaleX:0,scaleY:0},300,Br.strongOut,h.create(this,this.doClose,[e,t]))},t.__super.call(this),this.maskLayer=new Bd,this.popupEffectHandler=new h(this,this.popupEffect),this.closeEffectHandler=new h(this,this.closeEffect),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,i.stage.addChild(this),i.stage.on("resize",this,this._onResize),ls.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}o(t,"laya.ui.DialogManager",e);
var n=t.prototype;return n._closeOnSide=function(){var e=this.getChildAt(this.numChildren-1);e instanceof laya.ui.Dialog&&e.close("side")},n.setLockView=function(e){this.lockLayer||(this.lockLayer=new ew,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(i.stage.width,i.stage.height)),this.lockLayer.removeChildren(),e&&(e.centerX=e.centerY=0,this.lockLayer.addChild(e))},n._onResize=function(e){var t=this.maskLayer.width=i.stage.width,n=this.maskLayer.height=i.stage.height;this.lockLayer&&this.lockLayer.size(t,n),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,t,n,ls.popupBgColor),this.maskLayer.alpha=ls.popupBgAlpha;for(var o=this.numChildren-1;o>-1;o--){var s=this.getChildAt(o);s.popupCenter&&this._centerDialog(s)}},n._centerDialog=function(e){e.x=Math.round((i.stage.width-e.width>>1)+e.pivotX),e.y=Math.round((i.stage.height-e.height>>1)+e.pivotY)},n.open=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),t&&this._closeAll(),e.popupCenter&&this._centerDialog(e),this.addChild(e),(e.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),i&&null!=e.popupEffect?e.popupEffect.runWith(e):this.doOpen(e),this.event("open")},n.doOpen=function(e){e.onOpened()},n.lock=function(e){this.lockLayer&&(e?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},n.close=function(e,t,i){void 0===i&&(i=!1),i&&null!=e.closeEffect?e.closeEffect.runWith([e,t]):this.doClose(e,t),this.event("close")},n.doClose=function(e,t){e.removeSelf(),e.isModal&&this._checkMask(),e.closeHandler&&e.closeHandler.runWith(t),e.onClosed(t)},n.closeAll=function(){this._closeAll(),this.event("close")},n._closeAll=function(){for(var e=this.numChildren-1;e>-1;e--){var t=this.getChildAt(e);t&&null!=t.close&&this.doClose(t)}},n.getDialogsByGroup=function(e){for(var t=[],i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n&&n.group===e&&t.push(n)}return t},n.closeByGroup=function(e){for(var t=[],i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n&&n.group===e&&(n.close(),t.push(n))}return t},n._checkMask=function(){this.maskLayer.removeSelf();for(var e=this.numChildren-1;e>-1;e--){var t=this.getChildAt(e);if(t&&t.isModal)return void this.addChildAt(this.maskLayer,e)}},t}(Bd),uS=function(e){function t(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,t.__super.call(this),this._interval=nc.animationInterval,this._setUpNoticeType(1)}o(t,"laya.display.AnimationPlayerBase",e);var i=t.prototype;return i.play=function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=!0),void 0===i&&(i=""),void 0===n&&(n=!0),this._isPlaying=!0,this.index="string"==typeof e?this._getFrameByLabel(e):e,this.loop=t,this._actionName=i,this._isReverse=1==this.wrapMode,this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},i._getFrameByLabel=function(e){var t=0;for(t=0;t<this._count;t++)if(this._labels[t]&&this._labels[t].indexOf(e)>=0)return t;return 0},i._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},i._setControlNode=function(e){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),this._controlNode=e,e&&e!=this&&(e.on("display",this,this._checkResumePlaying),e.on("undisplay",this,this._checkResumePlaying))},i._setDisplay=function(t){e.prototype._setDisplay.call(this,t),this._checkResumePlaying()},i._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},i.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},i.addLabel=function(e,t){this._labels||(this._labels={}),this._labels[t]||(this._labels[t]=[]),this._labels[t].push(e)},i.removeLabel=function(e){if(e){if(this._labels)for(var t in this._labels)this._removeLabelFromLabelList(this._labels[t],e)}else this._labels=null},i._removeLabelFromLabelList=function(e,t){if(e)for(var i=e.length-1;i>=0;i--)e[i]==t&&e.splice(i,1)},i.gotoAndStop=function(e){this.index="string"==typeof e?this._getFrameByLabel(e):e,this.stop()},i._displayToIndex=function(e){},i.clear=function(){this.stop(),this._labels=null},s(0,i,"count",function(){return this._count}),s(0,i,"index",function(){return this._index},function(e){if(this._index=e,this._displayToIndex(e),this._labels&&this._labels[e])for(var t=this._labels[e],i=0,n=t.length;n>i;i++)this.event("label",t[i])}),s(0,i,"isPlaying",function(){return this._isPlaying}),s(0,i,"interval",function(){return this._interval},function(e){this._interval!=e&&(this._frameRateChanged=!0,this._interval=e,this._isPlaying&&e>0&&this.timerLoop(e,this,this._frameLoop,null,!0,!0))}),t.WRAP_POSITIVE=0,t.WRAP_REVERSE=1,t.WRAP_PINGPONG=2,t}(Bd),dS=function(e){function t(){this.URI=null,this._href=null,t.__super.call(this),this._text=t._EMPTYTEXT,this.setStyle(new kd(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}o(t,"laya.html.dom.HTMLElement",e);var n=t.prototype;return n.layaoutCallNative=function(){var e=0;if(this._childs&&(e=this._childs.length)>0)for(var t=0;e>t;t++)this._childs[t].layaoutCallNative&&this._childs[t].layaoutCallNative();var i=this._getWords();i?laya.html.dom.HTMLElement.fillWords(this,i,0,0,this.style.font,this.style.color,this.style.underLine,this.style.stroke,this.style.strokeColor):this.graphics.clear()},n.appendChild=function(e){return this.addChild(e)},n._getWords2=function(){var e=this._text.text;if(!e||0===e.length)return null;var t,i,n=0,o=0;if(this._text.drawWords)i=this._text.drawWords;else{for(t=e.split(" "),o=t.length-1,i=[],n=0;o>n;n++)i.push(t[n]," ");o>=0&&i.push(t[o]),this._text.drawWords=i}var s=this._text.words;if(s&&s.length===i.length)return s;null===s&&(this._text.words=s=[]),s.length=i.length;var r,a=this.style,l=a.font;for(n=0,o=i.length;o>n;n++){r=Dr.measureText(i[n],l);var h=s[n]=new Fr(i[n],r.width,r.height||a.fontSize,a);if(h["char"].length>1&&(h.charNum=h["char"]),this.href){var c=new Bd;this.addChild(c),h.setSprite(c)}}return s},n._getWords=function(){if(!fS.CharacterCache)return this._getWords2();var e=this._text.text;if(!e||0===e.length)return null;var t=this._text.words;if(t&&t.length===e.length)return t;null===t&&(this._text.words=t=[]),t.length=e.length;for(var i,n=this.style,o=n.font,s=0,r=e.length;r>s;s++){i=Dr.measureText(e.charAt(s),o);var a=t[s]=new Fr(e.charAt(s),i.width,i.height||n.fontSize,n);if(this.href){var l=new Bd;this.addChild(l),a.setSprite(l)}}return t},n.showLinkSprite=function(){var e=this._text.words;if(e)for(var t,i,n=[],o=0;o<e.length;o++)i=e[o],t=new Bd,t.graphics.drawRect(0,0,i.width,i.height,"#ff0000"),t.width=i.width,t.height=i.height,this.addChild(t),n.push(t)},n._layoutLater=function(){var e=this.style;512&e._type||(e.widthed(this)&&(this._childs.length>0||null!=this._getWords())&&e.block?(Qr.later(this),e._type|=512):this.parent&&this.parent._layoutLater())},n._setAttributes=function(t,i){switch(t){case"style":return void this.style.cssText(i);case"class":return void(this.className=i)}e.prototype._setAttributes.call(this,t,i)},n.updateHref=function(){if(null!=this._href){var e=this._getWords();if(e)for(var t,i,n=0;n<e.length;n++)t=e[n],i=t.getSprite(),i&&(i.size(t.width,t.height),i.on("click",this,this.onLinkHandler))}},n.onLinkHandler=function(e){switch(e.type){case"click":for(var t=this;t;)t.event("link",[this.href]),t=t.parent}},n.formatURL=function(e){return this.URI?Cs.formatURL(e,this.URI?this.URI.path:null):e},s(0,n,"className",null,function(e){this.style.attrs(dw.document.styleSheets["."+e])}),s(0,n,"onClick",null,function(e){var t;i._runScript("fn=function(event){"+e+";}"),this.on("click",this,t)}),s(0,n,"innerTEXT",function(){return this._text.text},function(e){this.text=e}),s(0,n,"text",function(){return this._text.text},function(e){this._text==t._EMPTYTEXT?this._text={text:e,words:null}:(this._text.text=e,this._text.words&&(this._text.words.length=0)),Ns.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),s(0,n,"style",function(){return this._style}),s(0,n,"color",null,function(e){this.style.color=e}),s(0,n,"href",function(){return this._href},function(e){this._href=e,null!=e&&(this._getCSSStyle().underLine=1,this.updateHref())}),s(0,n,"parent",e.prototype._$get_parent,function(e){if(e instanceof laya.html.dom.HTMLElement){var t=e;this.URI||(this.URI=t.URI),this.style.inherit(t.style)}i.superSet(Bd,this,"parent",e)}),s(0,n,"id",null,function(e){dw.document.setElementById(e,this)}),t.fillWords=function(e,t,i,n,o,s,r,a,l){e.graphics.clear();for(var h=0,c=t.length;c>h;h++){var u=t[h];a>0?e.graphics.fillBorderText(u["char"],u.x+i,u.y+n,o,s,l,a,"left"):e.graphics.fillText(u["char"],u.x+i,u.y+n,o,s,"left",r)}},t._EMPTYTEXT={text:null,words:null},t}(Bd),pS=function(e){function t(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,t.__super.call(this),this._renderState=new ma,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new gl,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new xl,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new rl(.7,.7,.7),this.ambientColor=new rl(.212,.227,.259),ur.shaderHighPrecision&&this.addShaderDefine(Id.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}o(t,"laya.d3.core.scene.Scene",e);var n=t.prototype;return i.imps(n,{"laya.resource.ICreateResource":!0,"laya.webgl.submit.ISubmit":!0}),n._setUrl=function(e){this._url=e},n._getGroup=function(){return this._group},n._setGroup=function(e){this._group=e},n._display=function(){i.stage._scenes.push(this),i.stage._scenes.sort(t._sortScenes);for(var e=0,n=this._childs.length;n>e;e++){var o=this._childs[e];o.active&&o._activeHierarchy()}},n._unDisplay=function(){var e=i.stage._scenes;e.splice(e.indexOf(this),1);for(var t=0,n=this._childs.length;n>t;t++){var o=this._childs[t];o.active&&o._inActiveHierarchy()}},n._addChild3D=function(e){e.transform._onWorldTransform(),e._setBelongScene(this),this.displayedInStage&&e.active&&e._activeHierarchy()},n._removeChild3D=function(e){e.transform.parent=null,this.displayedInStage&&e.active&&e._inActiveHierarchy(),e._setUnBelongScene()},n.initOctree=function(e,t,i,n,o){void 0===o&&(o=6),this.treeSize=new rl(e,t,i),this.treeLevel=o,this.treeRoot=new Ba(this,0),this.treeRoot.init(n,this.treeSize)},n._prepareUpdateToRenderState=function(e,t){t.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,t.scene=this},n._prepareSceneToRender=function(e){var t=this._lights.length;if(t>0)for(var i=0,n=0;t>n&&!(this._lights[n]._prepareToScene(e)&&(i++,i>=this._enableLightCount));n++);},n._updateChilds=function(e){for(var t=0,i=this._childs.length;i>t;++t)this._childs[t]._update(e)},n._preRenderScene=function(e,t,i){var n=t._viewMatrix,o=t._projectionMatrix,s=t._projectionViewMatrix,r=0,a=0,l=t.camera;for(l.useOcclusionCulling?this.treeRoot?jl.renderObjectCullingOctree(i,this,l,n,o,s):jl.renderObjectCulling(i,this,l,n,o,s):jl.renderObjectCullingNoBoundFrustum(this,l,n,o,s),r=0,a=this._quenes.length;a>r;r++)this._quenes[r]&&this._quenes[r]._preRender(t)},n._clear=function(e,t){var i=t._viewport,n=t.camera,o=i.x,s=n.renderTargetSize.height-i.y-i.height,r=i.width,a=i.height;e.viewport(o,s,r,a);var l=256,h=n.renderTarget;switch(n.clearFlag){case 0:var c=n.clearColor;if(c){e.enable(3089),e.scissor(o,s,r,a);var u=c.elements;e.clearColor(u[0],u[1],u[2],u[3]),l|=16384}if(h)switch(c||(l=16384),h.depthStencilFormat){case 33189:l|=256;break;case 36168:l|=1024;break;case 34041:l|=256,l|=1024}e.clear(l),c&&e.disable(3089);break;case 1:case 2:if(h)switch(l=16384,h.depthStencilFormat){case 33189:l|=256;break;case 36168:l|=1024;break;case 34041:l|=256,l|=1024}e.clear(l);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},n._renderScene=function(e,t){var i,n=t.camera,o=0,s=0;for(o=0;2>o;o++)i=this._quenes[o],i&&(n.renderTarget?i._render(t,!0):i._render(t,!1));if(1===n.clearFlag){var r=n.sky;r&&(Fs.setCullFace(e,!1),Fs.setDepthFunc(e,515),Fs.setDepthMask(e,!1),r._render(t),Fs.setDepthFunc(e,513),Fs.setDepthMask(e,!0))}for(o=2,s=this._quenes.length;s>o;o++)i=this._quenes[o],i&&(i._sortAlpha(t.camera.transform.position),n.renderTarget?i._render(t,!0):i._render(t,!1))},n._set3DRenderConfig=function(e){e.disable(3042),Fs._blend=!1,e.blendFunc(770,771),Fs._sFactor=770,Fs._dFactor=771,e.disable(2929),Fs._depthTest=!1,e.enable(2884),Fs._cullFace=!0,e.depthMask(1),Fs._depthMask=!0,e.frontFace(2304),Fs._frontFace=2304},n._set2DRenderConfig=function(e){Fs.setBlend(e,!0),Fs.setBlendFunc(e,1,771),Fs.setDepthTest(e,!1),Fs.setCullFace(e,!1),Fs.setDepthMask(e,!0),Fs.setFrontFace(e,2305),e.viewport(0,0,Js.width,Js.height)},n._parseCustomProps=function(e,t,i,n){var o=n.customProps.lightmaps,s=o.length,r=this._lightmaps;r.length=s;for(var a=0;s>a;a++)r[a]=Tu.getRes(t[o[a].replace(".exr",".png")]);this.setlightmaps(r);var l=n.customProps.ambientColor;l&&(this.ambientColor=new rl(l[0],l[1],l[2]));var h=n.customProps.fogColor;h&&(this.fogColor=new rl(h[0],h[1],h[2]))},n._addLight=function(e){this._lights.indexOf(e)<0&&this._lights.push(e)},n._removeLight=function(e){var t=this._lights.indexOf(e);t>=0&&this._lights.splice(t,1)},n._updateScene=function(){var e=this._renderState;this._prepareUpdateToRenderState(ur.mainContext,e),this._updateComponents(e),this._updateChilds(e),this._lateUpdateComponents(e),this._time+=e.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},n._updateSceneConch=function(){var e=this._renderState;this._prepareUpdateToRenderState(ur.mainContext,e),this._updateComponents(e),this._lateUpdateComponents(e),this._prepareSceneToRender(e);for(var t=0,i=this._cameraPool.length;i>t;t++){var n=this._cameraPool[t];e.camera=n,n._prepareCameraToRender()}},n._preRenderShadow=function(e,t,i,n,o){this.treeRoot?jl.renderShadowObjectCullingOctree(this,t,i,n,o):jl.renderShadowObjectCulling(this,t,i,n,o);for(var s=0,r=i.length;r>s;s++)i[s]&&i[s]._preRender(e)},n._renderShadowMap=function(e,t,i){var n=this.parallelSplitShadowMaps[0];n._calcAllLightCameraInfo(i);var o=n.PSSMNum;this._preRenderShadow(t,n._lightCulling,n._shadowQuenes,n._lightVPMatrix[0],o),this.addShaderDefine(Va.SHADERDEFINE_CAST_SHADOW);var s,r,a;if(o>1)for(var l=0;o>l;l++)s=n.getRenderTarget(l+1),n.beginRenderTarget(l+1),e.clearColor(1,1,1,1),e.clear(16640),e.viewport(0,0,s.width,s.height),t.camera=a=n.getLightCamera(l),a._prepareCameraToRender(),a._prepareCameraViewProject(a.viewMatrix,a.projectionMatrix),t._projectionViewMatrix=n._lightVPMatrix[l+1],r=n._shadowQuenes[l],r._preRender(t),r._renderShadow(t,!1),n.endRenderTarget(l+1);else s=n.getRenderTarget(1),n.beginRenderTarget(1),e.clearColor(1,1,1,1),e.clear(16640),e.viewport(0,0,s.width,s.height),t.camera=a=n.getLightCamera(0),a._prepareCameraToRender(),a._prepareCameraViewProject(a.viewMatrix,a.projectionMatrix),t._projectionViewMatrix=n._lightVPMatrix[0],r=n._shadowQuenes[0],r._preRender(t),r._renderShadow(t,!0),n.endRenderTarget(1);this.removeShaderDefine(Va.SHADERDEFINE_CAST_SHADOW)},n.addTreeNode=function(e){this.treeRoot.addTreeNode(e)},n.removeTreeNode=function(e){this.treeSize&&e._treeNode&&e._treeNode.removeObject(e)},n.setlightmaps=function(e){this._lightmaps=e;for(var t=0,i=this._renderableSprite3Ds.length;i>t;t++)this._renderableSprite3Ds[t]._render._applyLightMapParams()},n.getlightmaps=function(){return this._lightmaps},n.addChildAt=function(e,t){if(!(e instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e||this.destroyed||e===this)return e;if(e.zOrder&&this._set$P("hasZorder",!0),t>=0&&t<=this._childs.length){if(e._parent===this){var i=this.getChildIndex(e);this._childs.splice(i,1),this._childs.splice(t,0,e),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(e.conchModel,t)),this._childChanged()}else e.parent&&e.parent.removeChild(e),this._childs===oc.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(t,0,e),this.conchModel&&this.conchModel.addChildAt(e.conchModel,t),e.parent=this,this._addChild3D(e);return e}throw new Error("appendChildAt:The index is out of bounds")},n.addChild=function(e){if(!(e instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e||this.destroyed||e===this)return e;if(e.zOrder&&this._set$P("hasZorder",!0),e._parent===this){var t=this.getChildIndex(e);t!==this._childs.length-1&&(this._childs.splice(t,1),this._childs.push(e),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(e.conchModel,this._childs.length-1)),this._childChanged())}else e.parent&&e.parent.removeChild(e),this._childs===oc.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e),this.conchModel&&this.conchModel.addChildAt(e.conchModel,this._childs.length-1),e.parent=this,this._childChanged(),this._addChild3D(e);return e},n.removeChildAt=function(e){var t=this.getChildAt(e);return t&&(this._removeChild3D(t),this._childs.splice(e,1),this.conchModel&&this.conchModel.removeChild(t.conchModel),t.parent=null),t},n.removeChildren=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=2147483647),this._childs&&this._childs.length>0){var i=this._childs;if(0===e&&t>=s){var n=i;this._childs=oc.ARRAY_EMPTY}else n=i.splice(e,t-e);for(var o=0,s=n.length;s>o;o++)this._removeChild3D(n[o]),n[o].parent=null,this.conchModel&&this.conchModel.removeChild(n[o].conchModel)}return this},n.addFrustumCullingObject=function(e){this.treeRoot?this.addTreeNode(e):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(e):this._cullingRenders[this._cullingRendersLength]=e,e._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},n.removeFrustumCullingObject=function(e){if(this.treeRoot)this.removeTreeNode(e);else{this._cullingRendersLength--;var t=e._indexInSceneFrustumCullingObjects;if(t!==this._cullingRendersLength){var i=this._cullingRenders[this._cullingRendersLength];this._cullingRenders[t]=i,i._indexInSceneFrustumCullingObjects=t,e._indexInSceneFrustumCullingObjects=-1}}},n.getRenderQueue=function(e){return 3e3>e?this._quenes[1]||(this._quenes[1]=new ga(this)):this._quenes[2]||(this._quenes[2]=new ga(this))},n.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new ga(this)},n.addShaderDefine=function(e){this._shaderDefineValue|=e},n.removeShaderDefine=function(e){this._shaderDefineValue&=~e},n.addScript=function(e){return this._addComponent(e)},n.getScriptByType=function(e,t){return void 0===t&&(t=0),this._getComponentByType(e,t)},n.getScriptsByType=function(e,t){this._getComponentsByType(e,t)},n.getScriptByIndex=function(e){return this._getComponentByIndex(e)},n.removeScriptByType=function(e,t){void 0===t&&(t=0),this._removeComponentByType(e,t)},n.removeScriptsByType=function(e){this._removeComponentByType(e)},n.removeAllScript=function(){this._removeAllComponent()},n.render=function(e,t,i){Ns._context.ctx._renderKey=0,this._childs.length>0&&e.addRenderObject(this)},n.renderSubmit=function(){var e=ur.mainContext,t=this._renderState;this._set3DRenderConfig(e),this._prepareSceneToRender(this._renderState);var i,n=0,o=0;if(ic.debugMode||Ba.debugMode)for(n=0,o=this._cameraPool.length;o>n;n++)i=this._cameraPool[n],ic._debugPhasorSprite.begin(1,i),i.activeInHierarchy&&i._renderCamera(e,t,this),ic._debugPhasorSprite.end();else for(n=0,o=this._cameraPool.length;o>n;n++)i=this._cameraPool[n],i.activeInHierarchy&&i._renderCamera(e,t,this);return this._set2DRenderConfig(e),1},n.onAsynLoaded=function(e,t,i){var n=t[0];if("Scene"!==n.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var o=t[1];Ya._createNodeByJson(this,n,this,o),this.event("hierarchyloaded",[this]),this.__loaded=!0},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,Tu.clearRes(this.url),this.loaded||ic._cancelLoadByUrl(this.url))},n.getRenderType=function(){return 0},n.releaseRender=function(){},n._addComponent=function(e){var t,i=this._componentsMap.indexOf(e);if(-1===i)t=[],this._componentsMap.push(e),this._typeComponentsIndices.push(t);else if(t=this._typeComponentsIndices[i],this._components[t[0]].isSingleton)throw new Error("无法单实例创建"+e+"组件，"+e+"组件已存在！");var n=Ur.getInstance(e);t.push(this._components.length),this._components.push(n);var o=this;return n._initialize(o),n},n._removeComponent=function(e,t){var i=this._typeComponentsIndices[e],n=i[t],o=this._components[n];this._components.splice(n,1),i.splice(t,1),0===i.length&&(this._typeComponentsIndices.splice(e,1),this._componentsMap.splice(e,1));for(var s=0,r=this._componentsMap.length;r>s;s++){i=this._typeComponentsIndices[s];for(var a=i.length-1;a>=0;a--){var l=i[a];if(!(l>n))break;i[a]=--l}}o._destroy()},n._getComponentByType=function(e,t){void 0===t&&(t=0);var i=this._componentsMap.indexOf(e);return-1===i?null:this._components[this._typeComponentsIndices[i][t]]},n._getComponentsByType=function(e,t){var i=this._componentsMap.indexOf(e);if(-1===i)return void(t.length=0);var n=this._typeComponentsIndices[i],o=n.length;t.length=o;for(var s=0;o>s;s++)t[s]=this._components[n[s]]},n._getComponentByIndex=function(e){return this._components[e]},n._removeComponentByType=function(e,t){void 0===t&&(t=0);var i=this._componentsMap.indexOf(e);-1!==i&&this._removeComponent(i,t)},n._removeComponentsByType=function(e){var t=this._componentsMap.indexOf(e);if(-1!==t)for(var i=this._typeComponentsIndices[t],n=0,o=i.length;o>n;i.length<o?o--:n++)this._removeComponent(t,n)},n._removeAllComponent=function(){for(var e=0,t=this._componentsMap.length;t>e;this._componentsMap.length<t?t--:e++)this._removeComponentsByType(this._componentsMap[e])},n._updateComponents=function(e){for(var t=0,i=this._components.length;i>t;t++){var n=this._components[t];!n.started&&(n._start(e),n.started=!0),n.enable&&n._update(e)}},n._lateUpdateComponents=function(e){for(var t=0;t<this._components.length;t++){var i=this._components[t];!i.started&&(i._start(e),i.started=!0),i.enable&&i._lateUpdate(e)}},n._preRenderUpdateComponents=function(e){for(var t=0;t<this._components.length;t++){var i=this._components[t];!i.started&&(i._start(e),i.started=!0),i.enable&&i._preRenderUpdate(e)}},n._postRenderUpdateComponents=function(e){for(var t=0;t<this._components.length;t++){var i=this._components[t];!i.started&&(i._start(e),i.started=!0),i.enable&&i._postRenderUpdate(e)}},s(0,n,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),s(0,n,"fogStart",function(){return this._fogStart},function(e){this._fogStart=e,this._shaderValues.setValue(1,e)}),s(0,n,"fogRange",function(){return this._fogRange},function(e){this._fogRange=e,this._shaderValues.setValue(2,e)}),s(0,n,"fogColor",function(){return this._fogColor},function(e){this._fogColor=e,this._shaderValues.setValue(0,e.elements)}),s(0,n,"scene",function(){return this}),s(0,n,"ambientColor",function(){return this._ambientColor},function(e){this._ambientColor=e,this._shaderValues.setValue(21,e.elements)}),s(0,n,"_loaded",null,function(e){this.__loaded=e}),s(0,n,"enableDepthFog",function(){return this._enableDepthFog},function(e){this._enableDepthFog!=e&&(this._enableDepthFog=e,e?(this.addShaderDefine(Id.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(Id.SHADERDEFINE_FOG)):this.removeShaderDefine(Id.SAHDERDEFINE_DEPTHFOG))}),s(0,n,"loaded",function(){return this.__loaded}),s(0,n,"enableFog",function(){return this._enableFog},function(e){this._enableFog!==e&&(this._enableFog=e,e?(this.addShaderDefine(Id.SHADERDEFINE_FOG),this.removeShaderDefine(Id.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(Id.SHADERDEFINE_FOG))}),s(0,n,"url",function(){return this._url}),t._sortScenes=function(e,n){if(e.parent===i.stage&&n.parent===i.stage){var o=i.stage._childs;return o.indexOf(e)-o.indexOf(n)}return e.parent!==i.stage&&n.parent!==i.stage?t._sortScenes(e.parent,n.parent):e.parent===i.stage?-1:1},t.load=function(e){return i.loader.create(e,null,null,t)},t.FOGCOLOR=0,t.FOGSTART=1,t.FOGRANGE=2,t.LIGHTDIRECTION=3,t.LIGHTDIRCOLOR=4,t.POINTLIGHTPOS=5,t.POINTLIGHTRANGE=6,t.POINTLIGHTATTENUATION=7,t.POINTLIGHTCOLOR=8,t.SPOTLIGHTPOS=9,t.SPOTLIGHTDIRECTION=10,t.SPOTLIGHTSPOT=11,t.SPOTLIGHTRANGE=12,t.SPOTLIGHTATTENUATION=13,t.SPOTLIGHTCOLOR=14,t.SHADOWDISTANCE=15,t.SHADOWLIGHTVIEWPROJECT=16,t.SHADOWMAPPCFOFFSET=17,t.SHADOWMAPTEXTURE1=18,t.SHADOWMAPTEXTURE2=19,t.SHADOWMAPTEXTURE3=20,t.AMBIENTCOLOR=21,t.TIME=22,t}(Bd),fS=function(e){function t(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,t.__super.call(this),this.overflow=t.VISIBLE,this._style=new kd(this),this._style.wordWrap=!1}o(t,"laya.display.Text",e);var r=t.prototype;return r.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._lines=null,this._words&&(this._words.length=0,this._words=null)},r._getBoundPointsM=function(e){void 0===e&&(e=!1);var t=Ch.TEMP;return t.setTo(0,0,this.width,this.height),t._getBoundPoints()},r.getGraphicBounds=function(e){void 0===e&&(e=!1);var t=Ch.TEMP;return t.setTo(0,0,this.width,this.height),t},r._getCSSStyle=function(){return this._style},r.lang=function(e,i,n,o,s,r,a,l,h,c,u){if(e=t.langPacks&&t.langPacks[e]?t.langPacks[e]:e,arguments.length<2)this._text=e;else{for(var d=0,p=arguments.length;p>d;d++)e=e.replace("{"+d+"}",arguments[d+1]);this._text=e}},r._isPassWordMode=function(){var e=this._style,t=e.password;return"prompt"in this&&this.prompt==this._text&&(t=!1),t},r._getPassWordTxt=function(e){var t,i=e.length;t="";for(var n=i;n>0;n--)t+="●";return t},r.renderText=function(e,t){var i=this.graphics;i.clear(!0);var n=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(Or.onIPhone?laya.display.Text._fontFamilyMap[this.font]||this.font:this.font);Or.context.font=n,Ns.isConchNode&&(Or.context.direction=this.direction,i.setDirection&&i.setDirection(this.direction));var o=this.padding,s=o[3],r="left",a=this._lines,l=this.leading+this._charSize.height,h=this._currBitmapFont;h&&(l=this.leading+h.getMaxHeight());var c=o[0];if(!h&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(r="right",s=this._width-o[1]):"center"==this.align&&(r="center",s=.5*this._width+o[3]-o[1])),this._height>0){var u=this._textHeight>this._height?"top":this.valign;"middle"===u?c=.5*(this._height-t*l)+o[0]-o[2]:"bottom"===u&&(c=this._height-t*l-o[2])}var d=this._style;if(h&&h.autoScaleSize)var p=h.fontSize/this.fontSize;if(this._clipPoint)if(i.save(),h&&h.autoScaleSize){var f=0,_=0;f=this._width?this._width-o[3]-o[1]:this._textWidth,_=this._height?this._height-o[0]-o[2]:this._textHeight,f*=p,_*=p,i.clipRect(o[3],o[0],f,_)}else i.clipRect(o[3],o[0],this._width?this._width-o[3]-o[1]:this._textWidth,this._height?this._height-o[0]-o[2]:this._textHeight);var m=d.password;"prompt"in this&&this.prompt==this._text&&(m=!1);for(var g=0,v=0,y=Math.min(this._lines.length,t+e)||1,b=e;y>b;b++){var E,x=a[b];if(m){var S=x.length;x="";for(var w=S;w>0;w--)x+="●"}if(void 0===x&&(x=""),g=s-(this._clipPoint?this._clipPoint.x:0),v=c+l*b-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(r,g,v,b),h){var C=this.width;h.autoScaleSize&&(C=this.width*p),h.drawText(x,this,g,v,this.align,C)}else Ns.isWebGL?(this._words||(this._words=[]),E=this._words.length>b-e?this._words[b-e]:new Rr,E.setText(x)):E=x,d.stroke?i.fillBorderText(E,g,v,n,this.color,d.strokeColor,d.stroke,r):i.fillText(E,g,v,n,this.color,r)}if(h&&h.autoScaleSize){var T=1/p;this.scale(T,T)}this._clipPoint&&i.restore(),this._startX=s,this._startY=c},r.drawUnderline=function(e,t,i,n){var o=this._lineWidths[n];switch(e){case"center":t-=o/2;break;case"right":t-=o;break;case"left":}i+=this._charSize.height,this._graphics.drawLine(t,i,t+o,i,this.underlineColor||this.color,1)},r.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);if(Ns.isConchApp){var e=""+this._getCSSStyle().font,i=this._getCSSStyle();i.stroke&&this._getCSSStyle().strokeColor&&(e+=" 1 "+this._getCSSStyle().strokeColor),Or.context.font=e,Ns.isConchNode&&(Or.context.direction=this.direction,this.graphics.setDirection&&this.graphics.setDirection(this.direction))}else Or.context.font=this._getCSSStyle().font;this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Ah(0,0)):this._clipPoint=null;var n=this._lines.length;if(this.overflow!=t.VISIBLE){var o=this.overflow==t.HIDDEN?Math.floor:Math.ceil;n=Math.min(n,o((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var s=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(s,n),this.repaint()},r.evalTextSize=function(){var e=NaN,t=NaN;e=Math.max.apply(this,this._lineWidths),t=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],e==this._textWidth&&t==this._textHeight||(this._textWidth=e,this._textHeight=t,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},r.checkEnabledViewportOrNot=function(){return this.overflow==t.SCROLL&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)},r.changeText=function(e){this._text!==e&&(this.lang(e+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},r.parseLines=function(e){var i=this.wordWrap||this.overflow==t.HIDDEN;if(i)var n=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var o=Or.context.measureText(t._testWord);Ns.isConchApp&&0===o.width&&0===o.height&&(o=Or.context.measureText("W")),this._charSize.width=o.width,this._charSize.height=o.height||this.fontSize}for(var s=e.replace(/\r\n/g,"\n").split("\n"),r=0,a=s.length;a>r;r++){var l=s[r];i?this.parseLine(l,n):(this._lineWidths.push(this.getTextWidth(l)),this._lines.push(l))}},r.parseLine=function(e,i){var n,o=(Or.context,this._lines),s=0,r=NaN,a=NaN,l=0;if(r=this.getTextWidth(e),i>=r)return o.push(e),void this._lineWidths.push(r);r=this._charSize.width,s=Math.floor(i/r),0==s&&(s=1),r=this.getTextWidth(e.substring(0,s)),a=r;for(var h=s,c=e.length;c>h;h++)if(r=this.getTextWidth(e.charAt(h)),
a+=r,a>i)if(this.wordWrap){var u=e.substring(l,h);if(u.charCodeAt(u.length-1)<255?(n=/(?:\w|-)+$/.exec(u),n&&(h=n.index+l,0==n.index?h+=u.length:u=e.substring(l,h))):t.RightToLeft&&(n=/([\u0600-\u06FF])+$/.exec(u),n&&(h=n.index+l,0==n.index?h+=u.length:u=e.substring(l,h))),o.push(u),this._lineWidths.push(a-r),l=h,!(c>h+s)){o.push(e.substring(l,c)),this._lineWidths.push(this.getTextWidth(o[o.length-1])),l=-1;break}h+=s,r=this.getTextWidth(e.substring(l,h)),a=r,h--}else if(this.overflow==t.HIDDEN)return o.push(e.substring(0,h)),void this._lineWidths.push(this.getTextWidth(o[o.length-1]));this.wordWrap&&-1!=l&&(o.push(e.substring(l,c)),this._lineWidths.push(this.getTextWidth(o[o.length-1])))},r.getTextWidth=function(e){return this._currBitmapFont?this._currBitmapFont.getTextWidth(e):Or.context.measureText(e).width},r.getWordWrapWidth=function(){var e=this.padding,t=NaN;return t=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width,0>=t&&(t=this.wordWrap?100:Or.width),0>=t&&(t=100),t-e[3]-e[1]},r.getCharPoint=function(e,t){this._isChanged&&i.timer.runCallLater(this,this.typeset);for(var n=0,o=this._lines,s=0,r=0,a=o.length;a>r;r++){if(n+=o[r].length,n>e){var l=r;break}s=n}var h=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Or.context.font=h,Ns.isConchNode&&(Or.context.direction=this.direction,this.graphics.setDirection&&this.graphics.setDirection(this.direction));var c=this.getTextWidth(this._text.substring(s,e)),u=t||new Ah;return u.setTo(this._startX+c-(this._clipPoint?this._clipPoint.x:0),this._startY+l*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},s(0,r,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),s(0,r,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),s(0,r,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(e){if(!(this.overflow!=t.SCROLL||this.textHeight<this._height)&&this._clipPoint){e=e<this.padding[0]?this.padding[0]:e;var i=this._textHeight-this._height;e=e>i?i:e;var n=e/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=n;var o=(this._height/(this._charSize.height+this.leading)|0)+1;this._clipPoint.y=e,this.renderText(n,o)}}),s(0,r,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(e){if(!(this.overflow!=t.SCROLL||this.textWidth<this._width)&&this._clipPoint){e=e<this.padding[3]?this.padding[3]:e;var i=this._textWidth-this._width;e=e>i?i:e;var n=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=e,this.renderText(this._lastVisibleLineIndex,n)}}),s(0,r,"stroke",function(){return this._getCSSStyle().stroke},function(e){this._getCSSStyle().stroke=e,this.isChanged=!0}),s(0,r,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(e){this._getCSSStyle().strokeColor=e,this.isChanged=!0}),s(0,r,"bold",function(){return this._getCSSStyle().bold},function(e){this._getCSSStyle().bold=e,this.isChanged=!0}),s(0,r,"padding",function(){return this._getCSSStyle().padding},function(e){this._getCSSStyle().padding=e,this.isChanged=!0}),s(0,r,"height",function(){return this._height?this._height:this.textHeight},function(e){e!=this._height&&(i.superSet(Bd,this,"height",e),this.isChanged=!0)}),s(0,r,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(e){this._getCSSStyle().wordWrap=e,this.isChanged=!0}),s(0,r,"isChanged",null,function(e){this._isChanged!==e&&(this._isChanged=e,e&&i.timer.callLater(this,this.typeset))}),s(0,r,"borderColor",function(){return this._getCSSStyle().borderColor},function(e){this._getCSSStyle().borderColor=e,this.isChanged=!0}),s(0,r,"text",function(){return this._text||""},function(e){this._text!==e&&(this.lang(e+""),this.isChanged=!0,this.event("change"))}),s(0,r,"valign",function(){return this._getCSSStyle().valign},function(e){this._getCSSStyle().valign=e,this.isChanged=!0}),s(0,r,"underlineColor",function(){return this._underlineColor},function(e){this._underlineColor=e,this._isChanged=!0,this.typeset()}),s(0,r,"italic",function(){return this._getCSSStyle().italic},function(e){this._getCSSStyle().italic=e,this.isChanged=!0}),s(0,r,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(e){this._getCSSStyle().backgroundColor=e,this.isChanged=!0}),s(0,r,"color",function(){return this._getCSSStyle().color},function(e){this._getCSSStyle().color!=e&&(this._getCSSStyle().color=e,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),s(0,r,"align",function(){return this._getCSSStyle().align},function(e){this._getCSSStyle().align=e,this.isChanged=!0}),s(0,r,"fontSize",function(){return this._getCSSStyle().fontSize},function(e){this._getCSSStyle().fontSize=e,this.isChanged=!0}),s(0,r,"direction",function(){return this._getCSSStyle().direction},function(e){this._getCSSStyle().direction=e,this.isChanged=!0}),s(0,r,"textHeight",function(){return this._isChanged&&i.timer.runCallLater(this,this.typeset),this._textHeight}),s(0,r,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),s(0,r,"leading",function(){return this._getCSSStyle().leading},function(e){this._getCSSStyle().leading=e,this.isChanged=!0}),s(0,r,"font",function(){return this._getCSSStyle().fontFamily},function(e){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),t._bitmapFonts&&t._bitmapFonts[e]&&(this._currBitmapFont=t._bitmapFonts[e]),this._getCSSStyle().fontFamily=e,this.isChanged=!0}),s(0,r,"textWidth",function(){return this._isChanged&&i.timer.runCallLater(this,this.typeset),this._textWidth}),s(0,r,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(e){e!=this._width&&(i.superSet(Bd,this,"width",e),this.isChanged=!0)}),t.registerBitmapFont=function(e,i){t._bitmapFonts||(t._bitmapFonts={}),t._bitmapFonts[e]=i},t.unregisterBitmapFont=function(e,i){if(void 0===i&&(i=!0),t._bitmapFonts&&t._bitmapFonts[e]){var n=t._bitmapFonts[e];i&&n.destroy(),delete t._bitmapFonts[e]}},t.setTextRightToLeft=function(){var e;e=Or.canvas.source.style,e.display="none",e.position="absolute",e.direction="rtl",Ns._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,Or.document.body.appendChild(Or.canvas.source)},t.supportFont=function(e){Or.context.font="10px sans-serif";var t=Or.context.measureText("abcji").width;Or.context.font="10px "+e;var i=Or.context.measureText("abcji").width;return console.log(t,i),t!==i},t._testWord="游",t.langPacks=null,t.VISIBLE="visible",t.SCROLL="scroll",t.HIDDEN="hidden",t.CharacterCache=!0,t.RightToLeft=!1,t._bitmapFonts=null,n(t,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),t}(Bd),_S=function(e){function t(){function e(){"hidden"==Or.document[r]?s._setStageVisible(!1):s._setStageVisible(!0)}function i(e){s._setStageVisible(!e.hidden)}this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",this.useRetinalCanvas=!1,t.__super.call(this),this.offset=new Ah,this._canvasTransform=new Ph,this._previousOrientation=Or.window.orientation;var n=this;this.transform=Ph.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0,this.useRetinalCanvas=nc.useRetinalCanvas;var o=Or.window,s=this;o.addEventListener("focus",function(){n._isFocused=!0,s.event("focus"),s.event("focuschange")}),o.addEventListener("blur",function(){n._isFocused=!1,s.event("blur"),s.event("focuschange"),s._isInputting()&&(fw.inputElement.target.focus=!1)});var r="visibilityState",a="visibilitychange",l=o.document;"undefined"!=typeof l.hidden?(a="visibilitychange",r="visibilityState"):"undefined"!=typeof l.mozHidden?(a="mozvisibilitychange",r="mozVisibilityState"):"undefined"!=typeof l.msHidden?(a="msvisibilitychange",r="msVisibilityState"):"undefined"!=typeof l.webkitHidden&&(a="webkitvisibilitychange",r="webkitVisibilityState"),o.document.addEventListener(a,e),o.document.addEventListener("qbrowserVisibilityChange",i),o.addEventListener("resize",function(){var e=Or.window.orientation;null!=e&&e!=n._previousOrientation&&s._isInputting()&&(fw.inputElement.target.focus=!1),n._previousOrientation=e,s._isInputting()||s._resetCanvas()}),o.addEventListener("orientationchange",function(e){s._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),Or.onMobile&&this.on("mousedown",this,this._onmouseMove)}o(t,"laya.display.Stage",e);var r=t.prototype;return r._setStageVisible=function(e){this._isVisibility!=e&&(this._isVisibility=e,this._isVisibility||this._isInputting()&&(fw.inputElement.target.focus=!1),this.event("visibilitychange"))},r._isInputting=function(){return Or.onMobile&&fw.isInputting},r._changeCanvasSize=function(){this.setScreenSize(Or.clientWidth*Or.pixelRatio,Or.clientHeight*Or.pixelRatio)},r._resetCanvas=function(){if(this.screenAdaptationEnabled){var e=Ns._mainCanvas;e.source.style;e.size(1,1),i.timer.once(100,this,this._changeCanvasSize)}},r.setScreenSize=function(e,t){var i=!1;if("none"!==this._screenMode){var n=1>e/t?"vertical":"horizontal";if(i=n!==this._screenMode){var o=t;t=e,e=o}}this.canvasRotation=i;var s=Ns._mainCanvas,r=s.source.style,l=this._canvasTransform.identity(),h=this._scaleMode,c=e/this.designWidth,u=t/this.designHeight,d=nc.useRetinalCanvas?e:this.designWidth,p=nc.useRetinalCanvas?t:this.designHeight,f=e,_=t,m=Or.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,h){case"noscale":c=u=1,f=this.designWidth,_=this.designHeight;break;case"showall":c=u=Math.min(c,u),d=f=Math.round(this.designWidth*c),p=_=Math.round(this.designHeight*u);break;case"noborder":c=u=Math.max(c,u),f=Math.round(this.designWidth*c),_=Math.round(this.designHeight*u);break;case"full":c=u=1,this._width=d=e,this._height=p=t;break;case"fixedwidth":u=c,this._height=p=Math.round(t/c);break;case"fixedheight":c=u,this._width=d=Math.round(e/u);break;case"fixedauto":e/t<this.designWidth/this.designHeight?(u=c,this._height=p=Math.round(t/c)):(c=u,this._width=d=Math.round(e/u))}this.conchModel&&this.conchModel.size(this._width,this._height),nc.useRetinalCanvas&&(f=d=e,_=p=t),c*=this.scaleX,u*=this.scaleY,1===c&&1===u?this.transform.identity():(this.transform.a=this._formatData(c/(f/d)),this.transform.d=this._formatData(u/(_/p)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),s.size(d,p),a.changeWebGLSize(d,p),l.scale(f/d/m,_/p/m),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(e-f)/m:this.offset.x=.5*(e-f)/m,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(t-_)/m:this.offset.y=.5*(t-_)/m,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),l.translate(this.offset.x,this.offset.y),this.canvasDegree=0,i&&("horizontal"===this._screenMode?(l.rotate(Math.PI/2),l.translate(t/m,0),this.canvasDegree=90):(l.rotate(-Math.PI/2),l.translate(0,e/m),this.canvasDegree=-90)),l.a=this._formatData(l.a),l.d=this._formatData(l.d),l.tx=this._formatData(l.tx),l.ty=this._formatData(l.ty),r.transformOrigin=r.webkitTransformOrigin=r.msTransformOrigin=r.mozTransformOrigin=r.oTransformOrigin="0px 0px 0px",r.transform=r.webkitTransform=r.msTransform=r.mozTransform=r.oTransform="matrix("+l.toString()+")",r.width=d,r.height=p,l.translate(parseInt(r.left)||0,parseInt(r.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},r._formatData=function(e){return Math.abs(e)<1e-6?0:Math.abs(1-e)<.001?e>0?1:-1:e},r.getMousePoint=function(){return Ah.TEMP.setTo(this.mouseX,this.mouseY)},r.repaint=function(){this._repaint=1},r.parentRepaint=function(){},r._loop=function(){return this.render(Ns.context,0,0),!0},r._onmouseMove=function(e){this._mouseMoveTime=Or.now()},r.getTimeFromFrameStart=function(){return Or.now()-this._frameStartTime},r.render=function(t,n,o){if("sleep"===this._frameRate&&!Ns.isConchApp){var s=Or.now();if(!(s-this._frameStartTime>=1e3))return;this._frameStartTime=s}if(this._renderCount++,Ns.isFlash&&this.repaint(),!this._style.visible)return void(this._renderCount%5===0&&(Nr.loopCount++,Fh.instance.runEvent(),i.timer._update()));this._frameStartTime=Or.now();var r="mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate,l="slow"!==r,h=this._renderCount%2===0;if(Nr.renderSlow=!l,l||h||Ns.isConchApp){Nr.loopCount++,Fh.instance.runEvent(),i.timer._update(),a.update3DLoop();var c,u=0,d=0;if(Ns.isConchNode)for(u=0,d=this._scenes.length;d>u;u++)c=this._scenes[u],c&&c._updateSceneConch();else for(u=0,d=this._scenes.length;d>u;u++)c=this._scenes[u],c&&c._updateScene();if(Ns.isConchNode){var p=Bd.CustomList;for(u=0,d=p.length;d>u;u++){var f=p[u];f.customRender(f.customContext,0,0)}return}}Ns.isConchNode||this.renderingEnabled&&(l||!h||Ns.isConchWebGL)&&(Ns.isWebGL?(t.clear(),e.prototype.render.call(this,t,n,o),Nr._show&&Nr._sp&&Nr._sp.render(t,n,o),a.clear(this._bgColor),a.beginFlush(),t.flush(),a.endFinish(),Wr.instance&&Wr.getInstance().endDispose()):(a.clear(this._bgColor),e.prototype.render.call(this,t,n,o),Nr._show&&Nr._sp&&Nr._sp.render(t,n,o)))},r._requestFullscreen=function(){var e=Or.document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},r._fullScreenChanged=function(){i.stage.event("fullscreenchange")},r.exitFullscreen=function(){var e=Or.document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()},s(0,r,"screenMode",function(){return this._screenMode},function(e){this._screenMode=e}),s(0,r,"mouseX",function(){return Math.round(Fh.instance.mouseX/this.clientScaleX)}),s(0,r,"bgColor",function(){return this._bgColor},function(e){this._bgColor=e,this.conchModel&&this.conchModel.bgColor(e),Ns.isWebGL&&(e?t._wgColor=zr.create(e)._color:t._wgColor=null),Or.onLimixiu?t._wgColor=zr.create(e)._color:e?Ns.canvas.style.background=e:Ns.canvas.style.background="none"}),s(0,r,"visible",e.prototype._$get_visible,function(e){if(this.visible!==e){i.superSet(Bd,this,"visible",e);var t=Ns._mainCanvas.source.style;t.visibility=e?"visible":"hidden"}}),s(0,r,"alignH",function(){return this._alignH},function(e){this._alignH=e,i.timer.callLater(this,this._changeCanvasSize)}),s(0,r,"alignV",function(){return this._alignV},function(e){this._alignV=e,i.timer.callLater(this,this._changeCanvasSize)}),s(0,r,"scaleMode",function(){return this._scaleMode},function(e){this._scaleMode=e,i.timer.callLater(this,this._changeCanvasSize)}),s(0,r,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),s(0,r,"isVisibility",function(){return this._isVisibility}),s(0,r,"isFocused",function(){return this._isFocused}),s(0,r,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),s(0,r,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),s(0,r,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||Ph.create()},e.prototype._$set_transform),s(0,r,"height",e.prototype._$get_height,function(e){this.designHeight=e,i.superSet(Bd,this,"height",e),i.timer.callLater(this,this._changeCanvasSize)}),s(0,r,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),s(0,r,"mouseY",function(){return Math.round(Fh.instance.mouseY/this.clientScaleY)}),s(0,r,"width",e.prototype._$get_width,function(e){this.designWidth=e,i.superSet(Bd,this,"width",e),i.timer.callLater(this,this._changeCanvasSize)}),s(0,r,"fullScreenEnabled",null,function(e){var t=Or.document,i=Ns.canvas;e?(i.addEventListener("mousedown",this._requestFullscreen),i.addEventListener("touchstart",this._requestFullscreen),t.addEventListener("fullscreenchange",this._fullScreenChanged),t.addEventListener("mozfullscreenchange",this._fullScreenChanged),t.addEventListener("webkitfullscreenchange",this._fullScreenChanged),t.addEventListener("msfullscreenchange",this._fullScreenChanged)):(i.removeEventListener("mousedown",this._requestFullscreen),i.removeEventListener("touchstart",this._requestFullscreen),t.removeEventListener("fullscreenchange",this._fullScreenChanged),t.removeEventListener("mozfullscreenchange",this._fullScreenChanged),t.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),t.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),s(0,r,"frameRate",function(){return this._frameRate},function(e){if(this._frameRate=e,Ns.isConchApp)switch(this._frameRate){case"slow":Or.window.conch&&Or.window.conchConfig.setSlowFrame&&Or.window.conchConfig.setSlowFrame(!0);break;case"fast":Or.window.conch&&Or.window.conchConfig.setSlowFrame&&Or.window.conchConfig.setSlowFrame(!1);break;case"mouse":Or.window.conch&&Or.window.conchConfig.setMouseFrame&&Or.window.conchConfig.setMouseFrame(2e3);break;case"sleep":Or.window.conch&&Or.window.conchConfig.setLimitFPS&&Or.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),t.SCALE_NOSCALE="noscale",t.SCALE_EXACTFIT="exactfit",t.SCALE_SHOWALL="showall",t.SCALE_NOBORDER="noborder",t.SCALE_FULL="full",t.SCALE_FIXED_WIDTH="fixedwidth",t.SCALE_FIXED_HEIGHT="fixedheight",t.SCALE_FIXED_AUTO="fixedauto",t.ALIGN_LEFT="left",t.ALIGN_RIGHT="right",t.ALIGN_CENTER="center",t.ALIGN_TOP="top",t.ALIGN_MIDDLE="middle",t.ALIGN_BOTTOM="bottom",t.SCREEN_NONE="none",t.SCREEN_HORIZONTAL="horizontal",t.SCREEN_VERTICAL="vertical",t.FRAME_FAST="fast",t.FRAME_SLOW="slow",t.FRAME_MOUSE="mouse",t.FRAME_SLEEP="sleep",t.FRAME_MOUSE_THREDHOLD=2e3,n(t,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),t}(Bd),mS=function(e){function t(e){t.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new ol,this._shaderValues=new gl,this._colliders=[],this._id=++t._uniqueIDCounter,this._transform=new Ku(this),this.name=e?e:"Sprite3D-"+t._nameNumberCounter++,this.layer=aa.currentCreationLayer,this.active=!0}o(t,"laya.d3.core.Sprite3D",e);var n=t.prototype;return i.imps(n,{"laya.d3.core.IClone":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.render.IUpdate":!0}),n._setUrl=function(e){this._url=e},n._getGroup=function(){return this._group},n._setGroup=function(e){this._group=e},n._addChild3D=function(e){e.transform.parent=this.transform,this._hierarchyAnimator&&(!e._hierarchyAnimator&&e._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(e,!0,[e.name])),this._scene&&(e._setBelongScene(this._scene),this._activeInHierarchy&&e._active&&e._activeHierarchy())},n._removeChild3D=function(e){e.transform.parent=null,this._scene&&(this._activeInHierarchy&&e._active&&e._inActiveHierarchy(),e._setUnBelongScene()),this._hierarchyAnimator&&(e._hierarchyAnimator==this._hierarchyAnimator&&e._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(e,!1,[e.name]))},n._parseBaseCustomProps=function(e){var t=this.transform.localPosition;t.fromArray(e.translate),this.transform.localPosition=t;var i=this.transform.localRotation;i.fromArray(e.rotation),this.transform.localRotation=i;var n=this.transform.localScale;n.fromArray(e.scale),this.transform.localScale=n;var o=e.layer;null!=o&&(this.layer=aa.getLayerByNumber(o))},n._parseCustomComponent=function(e,t,i){for(var n in i){var o=i[n];switch(n){case"Animator":var s=this.addComponent(Hx);if(o.avatarPath)s.avatar=Tu.getRes(t[o.avatarPath]);else{var r=o.avatar;if(r){s.avatar=Tu.getRes(t[r.path]);var a=r.linkSprites;a&&e.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[s,a])}}for(var l=o.clipPaths,h=l.length,c=0;h>c;c++)s.addClip(Tu.getRes(t[l[c]]));s.clip=Tu.getRes(t[l[0]]);var u=o.playOnWake;void 0!==u&&(s.playOnWake=u);break;case"Rigidbody":this.addComponent(zx);break;case"SphereCollider":var d=this.addComponent(jS);d.isTrigger=o.isTrigger;var p=d.center;p.fromArray(o.center),d.center=p,d.radius=o.radius;break;case"BoxCollider":var f=this.addComponent(JS);f.isTrigger=o.isTrigger,f.center.fromArray(o.center);var _=f.size;_.fromArray(o.size),f.size=_;break;case"MeshCollider":this.addComponent(ZS)}}},n._onRootNodeHierarchyLoaded=function(e,t){for(var i in t){for(var n=this,o=t[i],s=0,r=o.length;r>s;s++){var a=o[s];if(""===a)break;if(n=n.getChildByName(a),!n)break}n&&e.linkSprite3DToAvatarNode(i,n)}},n._setHierarchyAnimator=function(e,t){this._changeHierarchyAnimator(e);for(var i=0,n=this._childs.length;n>i;i++){var o=this._childs[i];o._hierarchyAnimator==t&&o._setHierarchyAnimator(e,t)}},n._clearHierarchyAnimator=function(e,t){this._changeHierarchyAnimator(t);for(var i=0,n=this._childs.length;n>i;i++){var o=this._childs[i];o._hierarchyAnimator==e&&o._clearHierarchyAnimator(e,t)}},n._getAnimatorToLinkSprite3D=function(e,t,i){var n=this.getComponentByType(Hx);if(n&&(n.avatar?n.avatar._version||e._setAnimatorToLinkAvatar(n,t):e._setAnimatorToLinkSprite3DNoAvatar(n,t,i)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){i.unshift(this._parent.name);var o=this._parent;o._hierarchyAnimator&&o._getAnimatorToLinkSprite3D(e,t,i)}},n._setAnimatorToLinkSprite3DNoAvatar=function(e,t,i){var n=0,o=0;for(n=0,o=e.getClipCount();o>n;n++)e._handleSpriteOwnersBySprite(n,t,i,this);for(n=0,o=this._childs.length;o>n;n++){var s=this._childs[n],r=i.length;i.push(s.name),s._setAnimatorToLinkSprite3DNoAvatar(e,t,i),i.splice(r,1)}},n._changeHierarchyAnimator=function(e){this._hierarchyAnimator=e},n._isLinkSpriteToAnimationNode=function(e,t,i){var n=e._avatarNodes.indexOf(t),o=e._cacheSpriteToNodesMap;if(i)this._transform.dummy=t.transform,e._cacheNodesToSpriteMap[n]=o.length,o.push(n);else{this._transform.dummy=null;var s=e._cacheNodesToSpriteMap[n];e._cacheNodesToSpriteMap[n]=null,o.splice(s,1)}},n._setBelongScene=function(e){this._scene=e;for(var t=0,i=this._childs.length;i>t;t++)this._childs[t]._setBelongScene(e)},n._setUnBelongScene=function(){this._scene=null;for(var e=0,t=this._childs.length;t>e;e++)this._childs[e]._setUnBelongScene()},n._activeHierarchy=function(){var e=0,t=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),e=0,t=this._colliders.length;t>e;e++)this._layer._addCollider(this._colliders[e]);for(this.event("activeinhierarchychanged",!0),e=0,t=this._childs.length;t>e;e++){var i=this._childs[e];i._active&&i._activeHierarchy()}},n._inActiveHierarchy=function(){var e=0,t=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),e=0,t=this._colliders.length;t>e;e++){var i=this._colliders[e];i._clearCollsionMap(),this._layer._removeCollider(i)}for(this.event("activeinhierarchychanged",!1),e=0,t=this._childs.length;t>e;e++){var n=this._childs[e];n._active&&n._inActiveHierarchy()}},n.addComponent=function(e){var t,i=this._componentsMap.indexOf(e);if(-1===i)t=[],this._componentsMap.push(e),this._typeComponentsIndices.push(t);else if(t=this._typeComponentsIndices[i],this._components[t[0]].isSingleton)throw new Error("无法单实例创建"+e+"组件，"+e+"组件已存在！");var n=Ur.getInstance(e);if(t.push(this._components.length),this._components.push(n),n instanceof laya.d3.component.physics.Collider){var o=this.getComponentByType(zx);o&&(n._isRigidbody=!0),this._activeInHierarchy&&this._layer._addCollider(n),this._colliders.push(n)}else if(n instanceof laya.d3.component.Animator){var s=n;this._setHierarchyAnimator(s,this._parent?this._parent._hierarchyAnimator:null),this._setAnimatorToLinkSprite3DNoAvatar(s,!0,[])}else if(n instanceof laya.d3.component.Rigidbody)for(var r=0,a=this._colliders.length;a>r;r++)this._colliders[r]._setIsRigidbody(!0);return n instanceof laya.d3.component.Script&&this._scripts.push(n),n._initialize(this),n},n._removeComponent=function(e,t){var i=0,n=0,o=this._typeComponentsIndices[e],s=o[t],r=this._components[s];if(r instanceof laya.d3.component.physics.Collider){var a=r;this._activeInHierarchy&&this._layer._removeCollider(a),this._colliders.splice(this._colliders.indexOf(a),1)}else if(r instanceof laya.d3.component.Animator){var l=r;this._clearHierarchyAnimator(l,this._parent?this._parent._hierarchyAnimator:null)}else if(r instanceof laya.d3.component.Rigidbody)for(i=0,n=this._colliders.length;n>i;i++){var h=this._colliders[i];h._setIsRigidbody(!1);var c=h._runtimeCollisonMap,u=h._runtimeCollisonTestMap;for(var d in c)delete u[d]}for(this._components.splice(s,1),r instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(r),1),o.splice(t,1),0===o.length&&(this._typeComponentsIndices.splice(e,1),this._componentsMap.splice(e,1)),i=0,n=this._componentsMap.length;n>i;i++){o=this._typeComponentsIndices[i];for(var p=o.length-1;p>=0;p--){var f=o[p];if(!(f>s))break;o[p]=--f}}r._destroy()},n._clearSelfRenderObjects=function(){},n._addSelfRenderObjects=function(){},n._parseCustomProps=function(e,t,i,n){},n._updateChilds=function(e){var t=this._childs.length;if(0!==t)for(var i=0;t>i;++i)this._childs[i]._update(e)},n._getSortID=function(e,t){return 1e3*t.id+e._getVertexBuffer().vertexDeclaration.id},n._update=function(e){e.owner=this,this._activeInHierarchy&&(this._updateComponents(e),this._lateUpdateComponents(e),Nr.spriteCount++,this._childs.length&&this._updateChilds(e))},n.getProjectionViewWorldMatrix=function(e){return ol.multiply(e,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},n.loadHierarchy=function(e){this.addChild(laya.d3.core.Sprite3D.load(e))},n.addChildAt=function(e,t){if(!(e instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e||this.destroyed||e===this)return e;if(e.zOrder&&this._set$P("hasZorder",!0),t>=0&&t<=this._childs.length){if(e._parent===this){var i=this.getChildIndex(e);this._childs.splice(i,1),this._childs.splice(t,0,e),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(e.conchModel,t)),this._childChanged()}else e.parent&&e.parent.removeChild(e),this._childs===oc.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(t,0,e),this.conchModel&&this.conchModel.addChildAt(e.conchModel,t),e.parent=this,this._addChild3D(e);return e}throw new Error("appendChildAt:The index is out of bounds")},n.addChild=function(e){if(!(e instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e||this.destroyed||e===this)return e;if(e.zOrder&&this._set$P("hasZorder",!0),e._parent===this){var t=this.getChildIndex(e);t!==this._childs.length-1&&(this._childs.splice(t,1),this._childs.push(e),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(e.conchModel,this._childs.length-1)),this._childChanged())}else e.parent&&e.parent.removeChild(e),this._childs===oc.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e),this.conchModel&&this.conchModel.addChildAt(e.conchModel,this._childs.length-1),e.parent=this,this._childChanged(),this._addChild3D(e);return e},n.removeChildAt=function(e){var t=this.getChildAt(e);return t&&(this._removeChild3D(t),this._childs.splice(e,1),this.conchModel&&this.conchModel.removeChild(t.conchModel),t.parent=null),t},n.removeChildren=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=2147483647),this._childs&&this._childs.length>0){var i=this._childs;if(0===e&&t>=s){var n=i;this._childs=oc.ARRAY_EMPTY}else n=i.splice(e,t-e);for(var o=0,s=n.length;s>o;o++)this._removeChild3D(n[o]),n[o].parent=null,this.conchModel&&this.conchModel.removeChild(n[o].conchModel)}return this},n.onAsynLoaded=function(e,t,i){var n=t[0];if("Sprite3D"!==n.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var o=t[1];Ya._createNodeByJson(this,n,this,o),this.event("hierarchyloaded",[this]),this.__loaded=!0},n.cloneTo=function(e){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var t=e;t.name=this.name,t._destroyed=this._destroyed,t.timer=this.timer,t._$P=this._$P,t.active=this._active;var i=t.transform.localPosition;this.transform.localPosition.cloneTo(i),t.transform.localPosition=i;var n=t.transform.localRotation;this.transform.localRotation.cloneTo(n),t.transform.localRotation=n;var o=t.transform.localScale;this.transform.localScale.cloneTo(o),t.transform.localScale=o,t.isStatic=this.isStatic;var s=0,r=0;for(s=0,r=this._componentsMap.length;r>s;s++){var a=t.addComponent(this._componentsMap[s]);this._components[s]._cloneTo(a)}for(s=0,r=this._childs.length;r>s;s++)t.addChild(this._childs[s].clone());var l=t.getComponentByType(Hx);if(l){var h=l._linkSpritesData;if(h)for(var c in h){for(var u=h[c],d=t,p=0,f=u.length;f>p&&(d=d.getChildByName(u[p]),d);p++);if(d){var _=l._avatarNodeMap[c];d._isLinkSpriteToAnimationNode(l,_,!0)}}}},n.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},n.destroy=function(e){if(void 0===e&&(e=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,e);var t=0,i=0;for(t=0,i=this._components.length;i>t;t++)this._components[t]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,Tu.clearRes(this.url),this.loaded||ic._cancelLoadByUrl(this.url)}},n._handleSpriteToAvatar=function(e,t){var i=(e._avatarNodes,e._avatarNodeMap[this.name]);i&&i.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(e,i,t)},n._setAnimatorToLinkAvatar=function(e,t){this._handleSpriteToAvatar(e,t);for(var i=0,n=this._childs.length;n>i;i++){var o=this._childs[i];o._setAnimatorToLinkAvatar(e,t)}},s(0,n,"url",function(){return this._url}),s(0,n,"transform",function(){return this._transform}),s(0,n,"scene",function(){return this._scene}),s(0,n,"_loaded",null,function(e){this.__loaded=e}),s(0,n,"activeInHierarchy",function(){return this._activeInHierarchy}),s(0,n,"loaded",function(){return this.__loaded}),s(0,n,"layer",function(){return this._layer},function(e){if(this._layer!==e){if(!e)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var t=0,i=this._colliders.length;if(this._layer)for(t=0;i>t;t++)this._layer._removeCollider(this._colliders[t]);for(t=0;i>t;t++)e._addCollider(this._colliders[t])}this._layer=e,this.event("layerchanged",e)}}),s(0,n,"id",function(){return this._id}),s(0,n,"componentsCount",function(){return this._components.length}),s(0,n,"active",function(){return this._active},function(e){this._active!==e&&(this._active=e,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(e?this._activeHierarchy():this._inActiveHierarchy()))}),t.instantiate=function(e,t,i,n,o){void 0===i&&(i=!0);var s=e.clone();t&&t.addChild(s);var r=s.transform;if(i){var a=r.worldMatrix;e.transform.worldMatrix.cloneTo(a),r.worldMatrix=a}else n&&(r.position=n),o&&(r.rotation=o);return s},t.load=function(e){return i.loader.create(e,null,null,t)},t.WORLDMATRIX=0,t.MVPMATRIX=1,t._uniqueIDCounter=0,t._nameNumberCounter=0,t}(CE),gS=function(e){function t(){this._maxsize=0,this._upload=!0,this._uploadSize=0,t.__super.call(this),this.lock=!0}o(t,"laya.webgl.utils.Buffer2D",e);var i=t.prototype;return i.needSize=function(e){var t=this._byteLength;if(e){var i=this._byteLength+e;i<=this._buffer.byteLength||this._resizeBuffer(i<<1,!0),this._byteLength=i}return t},i._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),
Nr.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,px._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),px._gl.bufferSubData(this._bufferType,0,this._buffer)},i._bufferSubData=function(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this._maxsize=Math.max(this._maxsize,this._byteLength),Nr.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,px._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),t||i){var n=this._buffer.slice(t,i);px._gl.bufferSubData(this._bufferType,e,n)}else px._gl.bufferSubData(this._bufferType,e,this._buffer)},i._checkArrayUse=function(){},i._bind_upload=function(){return this._upload?(this._upload=!1,this._bind(),this._bufferData(),!0):!1},i._bind_subUpload=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this._upload?(this._upload=!1,this._bind(),this._bufferSubData(e,t,i),!0):!1},i._resizeBuffer=function(e,t){if(e<this._buffer.byteLength)return this;if(this.memorySize=e,t&&this._buffer&&this._buffer.byteLength>0){var i=new ArrayBuffer(e),n=new Uint8Array(i);n.set(new Uint8Array(this._buffer),0),this._buffer=i}else this._buffer=new ArrayBuffer(e);return this._checkArrayUse(),this._upload=!0,this},i.append=function(e){this._upload=!0;var t,i=0;i=e.byteLength,e instanceof Uint8Array?(this._resizeBuffer(this._byteLength+i,!0),t=new Uint8Array(this._buffer,this._byteLength)):e instanceof Uint16Array?(this._resizeBuffer(this._byteLength+i,!0),t=new Uint16Array(this._buffer,this._byteLength)):e instanceof Float32Array&&(this._resizeBuffer(this._byteLength+i,!0),t=new Float32Array(this._buffer,this._byteLength)),t.set(e,0),this._byteLength+=i,this._checkArrayUse()},i.appendU16Array=function(e,t){this._resizeBuffer(this._byteLength+2*t,!0);for(var i=new Uint16Array(this._buffer,this._byteLength,t),n=0;t>n;n++)i[n]=e[n];this._byteLength+=2*t,this._checkArrayUse()},i.appendEx=function(e,t){this._upload=!0;var i,n=0;n=e.byteLength,this._resizeBuffer(this._byteLength+n,!0),i=new t(this._buffer,this._byteLength),i.set(e,0),this._byteLength+=n,this._checkArrayUse()},i.appendEx2=function(e,t,i,n){void 0===n&&(n=1),this._upload=!0;var o,s=0;s=i*n,this._resizeBuffer(this._byteLength+s,!0),o=new t(this._buffer,this._byteLength);var r=0;for(r=0;i>r;r++)o[r]=e[r];this._byteLength+=s,this._checkArrayUse()},i.getBuffer=function(){return this._buffer},i.setNeedUpload=function(){this._upload=!0},i.getNeedUpload=function(){return this._upload},i.upload=function(){var e=this._bind_upload();return px._gl.bindBuffer(this._bufferType,null),px._bindActive[this._bufferType]=null,_x.activeShader=null,e},i.subUpload=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0);var n=this._bind_subUpload();return px._gl.bindBuffer(this._bufferType,null),px._bindActive[this._bufferType]=null,_x.activeShader=null,n},i.disposeResource=function(){e.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},i.clear=function(){this._byteLength=0,this._upload=!0},s(0,i,"byteLength",null,function(e){this._byteLength!==e&&(e<=this._buffer.byteLength||this._resizeBuffer(2*e+256,!0),this._byteLength=e)}),s(0,i,"bufferLength",function(){return this._buffer.byteLength}),t.__int__=function(e){bw.QuadrangleIB=bw.create(35044),er.fillIBQuadrangle(bw.QuadrangleIB,16)},t.FLOAT32=4,t.SHORT=2,t}(px),vS=function(e){function t(e,i,n,o){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,t.__super.call(this),!e||!i)throw"Shader Error";this._id=++t._count,this._vs=e,this._ps=i,this._nameMap=o?o:{},null!=n&&(t.sharders[n]=this)}o(t,"laya.webgl.shader.Shader",e);var i=t.prototype;return i.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},i.disposeResource=function(){ur.mainContext.deleteShader(this._vshader),ur.mainContext.deleteShader(this._pshader),ur.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},i._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var e=[this._vs,this._ps],i=ur.mainContext;if(this._program=i.createProgram(),this._vshader=t._createShader(i,e[0],35633),this._pshader=t._createShader(i,e[1],35632),i.attachShader(this._program,this._vshader),i.attachShader(this._program,this._pshader),i.linkProgram(this._program),!Ns.isConchApp&&!i.getProgramParameter(this._program,35714))throw i.getProgramInfoLog(this._program);var n,o,s=0,r=0,a=0;for(a=Ns.isConchApp?i.getProgramParameterEx(this._vs,this._ps,"",35721):i.getProgramParameter(this._program,35721),s=0;a>s;s++){var l=null;l=Ns.isConchApp?i.getActiveAttribEx(this._vs,this._ps,"",s):i.getActiveAttrib(this._program,s),o=i.getAttribLocation(this._program,l.name),n={vartype:"attribute",glfun:null,ivartype:0,attrib:l,location:o,name:l.name,type:l.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(n)}var h=0;for(h=Ns.isConchApp?i.getProgramParameterEx(this._vs,this._ps,"",35718):i.getProgramParameter(this._program,35718),s=0;h>s;s++){var c=null;c=Ns.isConchApp?i.getActiveUniformEx(this._vs,this._ps,"",s):i.getActiveUniform(this._program,s),o=i.getUniformLocation(this._program,c.name),n={vartype:"uniform",glfun:null,ivartype:1,attrib:l,location:o,name:c.name,type:c.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},n.name.indexOf("[0]")>0&&(n.name=n.name.substr(0,n.name.length-3),n.isArray=!0,n.location=i.getUniformLocation(this._program,n.name)),this._params.push(n)}for(s=0,r=this._params.length;r>s;s++)if(n=this._params[s],n.indexOfParams=s,n.index=1,n.value=[n.location,null],n.codename=n.name,n.name=this._nameMap[n.codename]?this._nameMap[n.codename]:n.codename,this._paramsMap[n.name]=n,n._this=this,n.uploadedValue=[],"attribute"!==n.vartype)switch(n.type){case 5124:n.fun=n.isArray?this._uniform1iv:this._uniform1i;break;case 5126:n.fun=n.isArray?this._uniform1fv:this._uniform1f;break;case 35664:n.fun=n.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:n.fun=n.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:n.fun=n.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:n.fun=this._uniform_sampler2D;break;case 35680:n.fun=this._uniform_samplerCube;break;case 35676:n.glfun=i.uniformMatrix4fv,n.fun=this._uniformMatrix4fv;break;case 35670:n.fun=this._uniform1i;break;case 35674:case 35675:throw new Error("compile shader err!");default:throw new Error("compile shader err!")}else n.fun=this._attribute}},i.getUniform=function(e){return this._paramsMap[e]},i._attribute=function(e,t){var i=ur.mainContext,n=px._enableAtributes,o=e.location;return n[o]||i.enableVertexAttribArray(o),i.vertexAttribPointer(o,t[0],t[1],t[2],t[3],t[4]+this._offset),n[o]=px._bindVertexBuffer,1},i._uniform1f=function(e,t){var i=e.uploadedValue;return i[0]!==t?(ur.mainContext.uniform1f(e.location,i[0]=t),1):0},i._uniform1fv=function(e,t){if(t.length<4){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]?(ur.mainContext.uniform1fv(e.location,t),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],1):0}return ur.mainContext.uniform1fv(e.location,t),1},i._uniform_vec2=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]?(ur.mainContext.uniform2f(e.location,i[0]=t[0],i[1]=t[1]),1):0},i._uniform_vec2v=function(e,t){if(t.length<2){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]?(ur.mainContext.uniform2fv(e.location,t),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],1):0}return ur.mainContext.uniform2fv(e.location,t),1},i._uniform_vec3=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]?(ur.mainContext.uniform3f(e.location,i[0]=t[0],i[1]=t[1],i[2]=t[2]),1):0},i._uniform_vec3v=function(e,t){return ur.mainContext.uniform3fv(e.location,t),1},i._uniform_vec4=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]?(ur.mainContext.uniform4f(e.location,i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]),1):0},i._uniform_vec4v=function(e,t){return ur.mainContext.uniform4fv(e.location,t),1},i._uniformMatrix2fv=function(e,t){return ur.mainContext.uniformMatrix2fv(e.location,!1,t),1},i._uniformMatrix3fv=function(e,t){return ur.mainContext.uniformMatrix3fv(e.location,!1,t),1},i._uniformMatrix4fv=function(e,t){return ur.mainContext.uniformMatrix4fv(e.location,!1,t),1},i._uniform1i=function(e,t){var i=e.uploadedValue;return i[0]!==t?(ur.mainContext.uniform1i(e.location,i[0]=t),1):0},i._uniform1iv=function(e,t){return ur.mainContext.uniform1iv(e.location,t),1},i._uniform_ivec2=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]?(ur.mainContext.uniform2i(e.location,i[0]=t[0],i[1]=t[1]),1):0},i._uniform_ivec2v=function(e,t){return ur.mainContext.uniform2iv(e.location,t),1},i._uniform_vec3i=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]?(ur.mainContext.uniform3i(e.location,i[0]=t[0],i[1]=t[1],i[2]=t[2]),1):0},i._uniform_vec3vi=function(e,t){return ur.mainContext.uniform3iv(e.location,t),1},i._uniform_vec4i=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]?(ur.mainContext.uniform4i(e.location,i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]),1):0},i._uniform_vec4vi=function(e,t){return ur.mainContext.uniform4iv(e.location,t),1},i._uniform_sampler2D=function(e,i){var n=ur.mainContext,o=e.uploadedValue;return null==o[0]?(o[0]=this._curActTexIndex,n.uniform1i(e.location,this._curActTexIndex),n.activeTexture(t._TEXTURES[this._curActTexIndex]),Fs.bindTexture(n,3553,i),this._curActTexIndex++,1):(n.activeTexture(t._TEXTURES[o[0]]),Fs.bindTexture(n,3553,i),0)},i._uniform_samplerCube=function(e,i){var n=ur.mainContext,o=e.uploadedValue;return null==o[0]?(o[0]=this._curActTexIndex,n.uniform1i(e.location,this._curActTexIndex),n.activeTexture(t._TEXTURES[this._curActTexIndex]),Fs.bindTexture(n,34067,i),this._curActTexIndex++,1):(n.activeTexture(t._TEXTURES[o[0]]),Fs.bindTexture(n,34067,i),0)},i._noSetValue=function(e){console.log("no....:"+e.name)},i.uploadOne=function(e,t){this.activeResource(),Fs.UseProgram(this._program);var i=this._paramsMap[e];i.fun.call(this,i,t)},i.uploadTexture2D=function(e){Nr.shaderCall++;var t=ur.mainContext;t.activeTexture(33984),Fs.bindTexture(t,3553,e)},i.upload=function(e,t){_x.activeShader=_x.bindShader=this,this._lastUseFrameCount===Nr.loopCount||this.activeResource(),Fs.UseProgram(this._program),this._reCompile?(t=this._params,this._reCompile=!1):t=t||this._params;for(var i,n,o=(ur.mainContext,t.length),s=0,r=0;o>r;r++)i=t[r],null!==(n=e[i.name])&&(s+=i.fun.call(this,i,n));Nr.shaderCall+=s},i.uploadArray=function(e,t,i){_x.activeShader=this,_x.bindShader=this,this.activeResource(),Fs.UseProgram(this._program);for(var n,o,s=(this._params,0),r=t-2;r>=0;r-=2)o=this._paramsMap[e[r]],o&&(n=e[r+1],null!=n&&(i&&i[o.name]&&i[o.name].bind(),s+=o.fun.call(this,o,n)));Nr.shaderCall+=s},i.getParams=function(){return this._params},t.getShader=function(e){return t.sharders[e]},t.create=function(e,i,n,o){return new t(e,i,n,o)},t.withCompile=function(e,i,n,o){if(n&&t.sharders[n])return t.sharders[n];var s=t._preCompileShader[2e-4*e];if(!s)throw new Error("withCompile shader err!"+e);return s.createShader(i,n,o)},t.withCompile2D=function(e,i,n,o,s){if(o&&t.sharders[o])return t.sharders[o];var r=t._preCompileShader[2e-4*e+i];if(!r)throw new Error("withCompile shader err!"+e+" "+i);return r.createShader(n,o,s)},t.addInclude=function(e,t){js.addInclude(e,t)},t.preCompile=function(e,i,n,o){var s=2e-4*e;t._preCompileShader[s]=new js(s,i,n,o)},t.preCompile2D=function(e,i,n,o,s){var r=2e-4*e+i;t._preCompileShader[r]=new js(r,n,o,s)},t._createShader=function(e,t,i){var n=e.createShader(i);return e.shaderSource(n,t),e.compileShader(n),n},t._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],t._count=0,t._preCompileShader={},t.SHADERNAME2ID=2e-4,t.sharders=(t.sharders=[],t.sharders.length=32,t.sharders),n(t,["nameKey",function(){return this.nameKey=new Mr}]),t}(_x),yS=function(e){function t(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,t.__super.call(this)}o(t,"laya.webgl.atlas.AtlasWebGLCanvas",e);var i=t.prototype;return i.recreateResource=function(){var e=ur.mainContext,t=this._source=e.createTexture(),i=Fs.curBindTexTarget,n=Fs.curBindTexValue;Fs.bindTexture(e,3553,t),e.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),e.texParameteri(3553,10241,9729),e.texParameteri(3553,10240,9729),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071),i&&n&&Fs.bindTexture(e,i,n),this.memorySize=this._w*this._h*4,this.completeCreate()},i.disposeResource=function(){this._source&&(ur.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.texSubImage2D=function(e,t,i){if(Ns.isFlash){this._flashCacheImage||(this._flashCacheImage=xw.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var n=i.bitmapdata;this._flashCacheImage._image.copyPixels(n,0,0,n.width,n.height,e,t),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var o=ur.mainContext,s=Fs.curBindTexTarget,r=Fs.curBindTexValue;Fs.bindTexture(o,3553,this._source),Ns.isConchWebGL?(i!==ConchTextCanvas&&(e-1>=0&&o.texSubImage2DEx(!0,3553,0,e-1,t,6408,5121,i),e+1<=this._w&&o.texSubImage2DEx(!0,3553,0,e+1,t,6408,5121,i),t-1>=0&&o.texSubImage2DEx(!0,3553,0,e,t-1,6408,5121,i),t+1<=this._h&&o.texSubImage2DEx(!0,3553,0,e,t+1,6408,5121,i)),o.texSubImage2DEx(!0,3553,0,e,t,6408,5121,i)):(o.pixelStorei(37441,!0),e-1>=0&&o.texSubImage2D(3553,0,e-1,t,6408,5121,i),e+1<=this._w&&o.texSubImage2D(3553,0,e+1,t,6408,5121,i),t-1>=0&&o.texSubImage2D(3553,0,e,t-1,6408,5121,i),t+1<=this._h&&o.texSubImage2D(3553,0,e,t+1,6408,5121,i),o.texSubImage2D(3553,0,e,t,6408,5121,i),o.pixelStorei(37441,!1)),s&&r&&Fs.bindTexture(o,s,r)}},i.texSubImage2DPixel=function(e,t,i,n,o){var s=ur.mainContext,r=Fs.curBindTexTarget,a=Fs.curBindTexValue;Fs.bindTexture(s,3553,this._source);var l=new Uint8Array(o.data);Ns.isConchWebGL?s.texSubImage2DEx(!0,3553,0,e,t,i,n,6408,5121,l):(s.pixelStorei(37441,!0),s.texSubImage2D(3553,0,e,t,i,n,6408,5121,l),s.pixelStorei(37441,!1)),r&&a&&Fs.bindTexture(s,r,a)},s(0,i,"height",e.prototype._$get_height,function(e){this._h=e}),s(0,i,"width",e.prototype._$get_width,function(e){this._w=e}),t}(mx),bS=function(e){function t(e,i,n,o,s,r,a){this.offsetX=0,this.offsetY=0,t.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=r,this.canvas=e,this._ctx=e.getContext("2d",void 0),this._w=o,this._h=s,this.offsetX=i,this.offsetY=n,this.src=a,this._enableMerageInAtlas=!0,xr.enabled&&this._w<xr.atlasLimitWidth&&this._h<xr.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}o(t,"laya.webgl.resource.WebGLSubImage",e);var n=t.prototype;return i.imps(n,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n.size=function(e,t){this._w=e,this._h=t,this._ctx&&this._ctx.size(e,t),this.canvas&&(this.canvas.height=t,this.canvas.width=e)},n.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},n.createWebGlTexture=function(){var e=ur.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var t=this._source=e.createTexture(),i=Fs.curBindTexTarget,n=Fs.curBindTexValue;Fs.bindTexture(e,3553,t),Ns.isConchWebGL?e.texImage2DEx(!0,3553,0,6408,6408,5121,this.canvas):(e.pixelStorei(37441,!0),e.texImage2D(3553,0,6408,6408,5121,this.canvas),e.pixelStorei(37441,!1));var o=this.minFifter,s=this.magFifter,r=this.repeat?10497:33071,a=Th.isPOT(this.width,this.height);a?(this.mipmap?-1!==o||(o=9987):-1!==o||(o=9729),-1!==s||(s=9729),e.texParameteri(3553,10240,s),e.texParameteri(3553,10241,o),e.texParameteri(3553,10242,r),e.texParameteri(3553,10243,r),this.mipmap&&e.generateMipmap(3553)):(-1!==o||(o=9729),-1!==s||(s=9729),e.texParameteri(3553,10241,o),e.texParameteri(3553,10240,s),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071)),i&&n&&Fs.bindTexture(e,i,n),this.canvas=null,a&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},n.disposeResource=function(){xr.enabled&&this._allowMerageInAtlas||!this._source||(ur.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},n.clearAtlasSource=function(){},s(0,n,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(e){this._allowMerageInAtlas=e}),s(0,n,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),s(0,n,"atlasSource",function(){return this.canvas}),t}(mx),ES=function(e){function t(){this._src=null,this._onload=null,this._onerror=null,t.__super.call(this)}o(t,"laya.resource.FileBitmap",e);var i=t.prototype;return s(0,i,"onload",null,function(e){}),s(0,i,"onerror",null,function(e){}),s(0,i,"src",function(){return this._src},function(e){this._src=e}),t}(mx),xS=function(e){function t(e,i,n,o,s,r,a,l,h){void 0===n&&(n=6408),void 0===o&&(o=5121),void 0===s&&(s=34041),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===l&&(l=-1),void 0===h&&(h=1),t.__super.call(this),this._w=e,this._h=i,this._surfaceFormat=n,this._surfaceType=o,this._depthStencilFormat=s,Ns.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=r,this._repeat=a,this._minFifter=l,this._magFifter=h}o(t,"laya.webgl.resource.WebGLRenderTarget",e);var i=t.prototype;return i.recreateResource=function(){var e=ur.mainContext;this._frameBuffer||(this._frameBuffer=e.createFramebuffer()),this._source||(this._source=e.createTexture());var t=Fs.curBindTexTarget,i=Fs.curBindTexValue;Fs.bindTexture(e,3553,this._source),e.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var n=this._minFifter,o=this._magFifter,s=this._repeat?10497:33071,r=Th.isPOT(this._w,this._h);if(r?(this._mipMap?-1!==n||(n=9987):-1!==n||(n=9729),-1!==o||(o=9729),e.texParameteri(3553,10241,n),e.texParameteri(3553,10240,o),e.texParameteri(3553,10242,s),e.texParameteri(3553,10243,s),this._mipMap&&e.generateMipmap(3553)):(-1!==n||(n=9729),-1!==o||(o=9729),e.texParameteri(3553,10241,n),e.texParameteri(3553,10240,o),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071)),e.bindFramebuffer(36160,this._frameBuffer),e.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=e.createRenderbuffer()),e.bindRenderbuffer(36161,this._depthStencilBuffer),e.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:e.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:e.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:e.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}e.bindFramebuffer(36160,null),t&&i&&Fs.bindTexture(e,t,i),e.bindRenderbuffer(36161,null),r&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},i.disposeResource=function(){this._frameBuffer&&(ur.mainContext.deleteTexture(this._source),ur.mainContext.deleteFramebuffer(this._frameBuffer),ur.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},s(0,i,"depthStencilBuffer",function(){return this._depthStencilBuffer}),s(0,i,"frameBuffer",function(){return this._frameBuffer}),t}(mx),SS=function(e){function t(e,i){t.__super.call(this),this["char"]=e,this.isSpace=" "===e,this.xs=i.scaleX,this.ys=i.scaleY,this.font=i.font.toString(),this.fontSize=i.font.size,this.fillColor=i.fillColor,this.borderColor=i.borderColor,this.lineWidth=i.lineWidth,this.underLine=i.underLine;var n,o=Ns.isConchApp;o?(n=ConchTextCanvas,n._source=ConchTextCanvas,n._source.canvas=ConchTextCanvas):n=Or.canvas.source,this.canvas=n,this._enableMerageInAtlas=!0,o?this._ctx=n:this._ctx=this.canvas.getContext("2d",void 0);var s=Dr.measureText(this["char"],this.font);this.cw=s.width*this.xs,this.ch=(s.height||this.fontSize)*this.ys,this.onresize(this.cw+2*nc.CborderSize,this.ch+2*nc.CborderSize),this.texture=new Vu(this)}o(t,"laya.webgl.resource.WebGLCharImage",e);var n=t.prototype;return i.imps(n,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n.active=function(){this.texture.active()},n.recreateResource=function(){var e=Ns.isConchApp;if(this.onresize(this.cw+2*nc.CborderSize,this.ch+2*nc.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),e){var i=this.fontSize;1==this.xs&&1==this.ys||(i=parseInt(i*(this.xs>this.ys?this.xs:this.ys)+""));var n="normal 100 "+this.font;n=n.replace(t._fontSizeReg,i),this.borderColor&&(n+=" 1 "+this.borderColor),this._ctx.font=n,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this["char"],nc.CborderSize,nc.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*nc.CborderSize,this.ch+2*nc.CborderSize),this._ctx.font=this.font,fS.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",1!=this.xs||1!=this.ys?this._ctx.setTransform(this.xs,0,0,this.ys,nc.CborderSize,nc.CborderSize):this._ctx.setTransform(1,0,0,1,nc.CborderSize,nc.CborderSize),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this["char"],0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this["char"],0,0)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this["char"],0,0)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this["char"],0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var o=this._ctx.measureText(this["char"]).width+1;this._ctx.lineTo(o,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=nc.CborderSize,this.completeCreate()},n.onresize=function(e,t){this._w=e,this._h=t,this._allowMerageInAtlas=!0},n.clearAtlasSource=function(){},s(0,n,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),s(0,n,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(e){this._enableMerageInAtlas=e}),s(0,n,"atlasImgData",function(){return!t.canUseCanvas&&this._ctx.getImageData?this._ctx.getImageData(0,0,this._w,this._h):null}),s(0,n,"atlasSource",function(){return this.canvas}),t.createOneChar=function(e,i){var n=new t(e,i);return n},t.canUseCanvas=!0,t._fontSizeReg=new RegExp("\\d+(?=px)","g"),t}(mx),wS=function(e){function t(){this.flipY=!0,this.alwaysChange=!1,t.__super.call(this)}o(t,"laya.webgl.resource.WebGLCanvas",e);var i=t.prototype;return i.getCanvas=function(){return this._canvas},i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},i._setContext=function(e){this._ctx=e},i.getContext=function(e,i){return this._ctx?this._ctx:this._ctx=t._createContext(this)},i.size=function(e,t){this._w==e&&this._h==t||(this._w=e,this._h=t,this._ctx&&this._ctx.size(e,t),this._canvas&&(this._canvas.height=t,this._canvas.width=e))},i.activeResource=function(e){void 0===e&&(e=!1),this._source||this.recreateResource()},i.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},i.disposeResource=function(){this._source&&!this.iscpuSource&&(ur.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.createWebGlTexture=function(){var e=ur.mainContext;!this._canvas;var i=this._source=e.createTexture();this.iscpuSource=!1;var n=Fs.curBindTexTarget,o=Fs.curBindTexValue;Fs.bindTexture(e,3553,i),e.pixelStorei(37440,this.flipY?1:0),Ns.isConchWebGL?e.texImage2DEx(t.premulAlpha,3553,0,6408,6408,5121,this._imgData):(t.premulAlpha&&e.pixelStorei(37441,!0),e.texImage2D(3553,0,6408,6408,5121,this._imgData),t.premulAlpha&&e.pixelStorei(37441,!1)),e.texParameteri(3553,10240,9729),e.texParameteri(3553,10241,9729),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071),e.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,n&&o&&Fs.bindTexture(e,n,o)},i.reloadCanvasData=function(){var e=ur.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var i=Fs.curBindTexTarget,n=Fs.curBindTexValue;Fs.bindTexture(e,3553,this._source),Ns.isConchWebGL?e.texImage2DEx(t.premulAlpha,3553,0,6408,6408,5121,this._imgData):(t.premulAlpha&&e.pixelStorei(37441,!0),e.texImage2D(3553,0,6408,6408,5121,this._imgData),t.premulAlpha&&e.pixelStorei(37441,!1)),e.pixelStorei(37440,0),i&&n&&Fs.bindTexture(e,i,n)},i.texSubImage2D=function(e,t,i){var n=ur.mainContext,o=Fs.curBindTexTarget,s=Fs.curBindTexValue;Fs.bindTexture(n,3553,this._source),Ns.isConchWebGL?n.texSubImage2DEx(!0,3553,0,t,i,6408,5121,e._source):(n.pixelStorei(37441,!0),n.texSubImage2D(3553,0,t,i,6408,5121,e._source),n.pixelStorei(37441,!1)),o&&s&&Fs.bindTexture(n,o,s)},i.toBase64=function(e,t,i){var n=null;this._canvas&&(n=this._canvas.toDataURL(e,t)),i.call(this,n)},s(0,i,"asBitmap",null,function(e){this._ctx&&(this._ctx.asBitmap=e)}),s(0,i,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),s(0,i,"context",function(){return this._ctx}),t._createContext=null,t.premulAlpha=!1,t}(mx),CS=function(e){function t(e,i,n,o,s,r,a,l){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],t.__super.call(this),!e||!i)throw"Shader Error";this._id=++t._count,this._vs=e,this._ps=i,this._attributeMap=n,this._sceneUniformMap=o,this._cameraUniformMap=s,this._spriteUniformMap=r,this._materialUniformMap=a,this._renderElementUniformMap=l,this.recreateResource()}o(t,"laya.d3.shader.Shader3D",e);var i=t.prototype;return i.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},i.disposeResource=function(){ur.mainContext.deleteShader(this._vshader),ur.mainContext.deleteShader(this._pshader),ur.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},i._compile=function(){if(this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var e=[this._vs,this._ps],i=ur.mainContext;if(this._program=i.createProgram(),this._vshader=t._createShader(i,e[0],35633),this._pshader=t._createShader(i,e[1],35632),i.attachShader(this._program,this._vshader),i.attachShader(this._program,this._pshader),i.linkProgram(this._program),!Ns.isConchApp&&Id.debugMode&&!i.getProgramParameter(this._program,35714))throw i.getProgramInfoLog(this._program);var n,o,s=0,r=0,a=0;for(a=Ns.isConchApp?i.getProgramParameterEx(this._vs,this._ps,"",35721):i.getProgramParameter(this._program,35721),s=0;a>s;s++){var l=null;l=Ns.isConchApp?i.getActiveAttribEx(this._vs,this._ps,"",s):i.getActiveAttrib(this._program,s),o=i.getAttribLocation(this._program,l.name),n={vartype:"attribute",ivartype:0,attrib:l,location:o,name:l.name,type:l.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(n)}var h=0;for(h=Ns.isConchApp?i.getProgramParameterEx(this._vs,this._ps,"",35718):i.getProgramParameter(this._program,35718),s=0;h>s;s++){var c=null;c=Ns.isConchApp?i.getActiveUniformEx(this._vs,this._ps,"",s):i.getActiveUniform(this._program,s),o=i.getUniformLocation(this._program,c.name),n={vartype:"uniform",ivartype:1,attrib:l,location:o,name:c.name,type:c.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},n.name.indexOf("[0]")>0&&(n.name=n.name.substr(0,n.name.length-3),n.isArray=!0,n.location=i.getUniformLocation(this._program,n.name)),this._uniformParams.push(n)}for(s=0,r=this._attributeParams.length;r>s;s++)n=this._attributeParams[s],n.indexOfParams=s,n.index=1,n.value=[n.location,null],n.codename=n.name,n.name=null!=this._attributeMap[n.codename]?this._attributeMap[n.codename]:n.codename,this._attributeParamsMap.push(n.name),this._attributeParamsMap.push(n),n._this=this,n.uploadedValue=[],n.fun=this._attribute;for(s=0,r=this._uniformParams.length;r>s;s++)switch(n=this._uniformParams[s],n.indexOfParams=s,n.index=1,n.value=[n.location,null],n.codename=n.name,null!=this._sceneUniformMap[n.codename]?(n.name=this._sceneUniformMap[n.codename],this._sceneUniformParamsMap.push(n.name),this._sceneUniformParamsMap.push(n)):null!=this._cameraUniformMap[n.codename]?(n.name=this._cameraUniformMap[n.codename],this._cameraUniformParamsMap.push(n.name),this._cameraUniformParamsMap.push(n)):null!=this._spriteUniformMap[n.codename]?(n.name=this._spriteUniformMap[n.codename],this._spriteUniformParamsMap.push(n.name),this._spriteUniformParamsMap.push(n)):null!=this._materialUniformMap[n.codename]?(n.name=this._materialUniformMap[n.codename],this._materialUniformParamsMap.push(n.name),this._materialUniformParamsMap.push(n)):null!=this._renderElementUniformMap[n.codename]?(n.name=this._renderElementUniformMap[n.codename],this._renderElementUniformParamsMap.push(n.name),this._renderElementUniformParamsMap.push(n)):console.log("Shader:can't find uinform name:"+n.codename+" in shader file."),n._this=this,n.uploadedValue=[],n.type){case 5124:n.fun=n.isArray?this._uniform1iv:this._uniform1i;break;case 5126:n.fun=n.isArray?this._uniform1fv:this._uniform1f;break;case 35664:n.fun=n.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:n.fun=n.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:n.fun=n.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:n.fun=this._uniform_sampler2D;break;case 35680:n.fun=this._uniform_samplerCube;break;case 35676:n.fun=this._uniformMatrix4fv;break;case 35670:n.fun=this._uniform1i;break;case 35674:n.fun=this._uinformMatrix2fv;break;case 35675:n.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},i._attribute=function(e,t){var i=ur.mainContext,n=px._enableAtributes,o=e.location;return n[o]||i.enableVertexAttribArray(o),i.vertexAttribPointer(o,t[0],t[1],t[2],t[3],t[4]),n[o]=px._bindVertexBuffer,1},i._uniform1f=function(e,t){var i=e.uploadedValue;return i[0]!==t?(ur.mainContext.uniform1f(e.location,i[0]=t),1):0},i._uniform1fv=function(e,t){if(t.length<4){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]?(ur.mainContext.uniform1fv(e.location,t),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],1):0}return ur.mainContext.uniform1fv(e.location,t),1},i._uniform_vec2=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]?(ur.mainContext.uniform2f(e.location,i[0]=t[0],i[1]=t[1]),1):0},i._uniform_vec2v=function(e,t){if(t.length<2){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]?(ur.mainContext.uniform2fv(e.location,t),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],1):0}return ur.mainContext.uniform2fv(e.location,t),
1},i._uniform_vec3=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]?(ur.mainContext.uniform3f(e.location,i[0]=t[0],i[1]=t[1],i[2]=t[2]),1):0},i._uniform_vec3v=function(e,t){return ur.mainContext.uniform3fv(e.location,t),1},i._uniform_vec4=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]?(ur.mainContext.uniform4f(e.location,i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]),1):0},i._uniform_vec4v=function(e,t){return ur.mainContext.uniform4fv(e.location,t),1},i._uniformMatrix2fv=function(e,t){return ur.mainContext.uniformMatrix2fv(e.location,!1,t),1},i._uniformMatrix3fv=function(e,t){return ur.mainContext.uniformMatrix3fv(e.location,!1,t),1},i._uniformMatrix4fv=function(e,t){return ur.mainContext.uniformMatrix4fv(e.location,!1,t),1},i._uinformMatrix2fv=function(e,t){return ur.mainContext.uniformMatrix2fv(e.location,!1,t),1},i._uinformMatrix3fv=function(e,t){return ur.mainContext.uniformMatrix3fv(e.location,!1,t),1},i._uniform1i=function(e,t){var i=e.uploadedValue;return i[0]!==t?(ur.mainContext.uniform1i(e.location,i[0]=t),1):0},i._uniform1iv=function(e,t){return ur.mainContext.uniform1iv(e.location,t),1},i._uniform_ivec2=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]?(ur.mainContext.uniform2i(e.location,i[0]=t[0],i[1]=t[1]),1):0},i._uniform_ivec2v=function(e,t){return ur.mainContext.uniform2iv(e.location,t),1},i._uniform_vec3i=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]?(ur.mainContext.uniform3i(e.location,i[0]=t[0],i[1]=t[1],i[2]=t[2]),1):0},i._uniform_vec3vi=function(e,t){return ur.mainContext.uniform3iv(e.location,t),1},i._uniform_vec4i=function(e,t){var i=e.uploadedValue;return i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]?(ur.mainContext.uniform4i(e.location,i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]),1):0},i._uniform_vec4vi=function(e,t){return ur.mainContext.uniform4iv(e.location,t),1},i._uniform_sampler2D=function(e,i){var n=i.source||i.defaulteTexture.source,o=ur.mainContext,s=e.uploadedValue;if(null==s[0]){if(this._curActTexIndex>7)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return s[0]=this._curActTexIndex,o.uniform1i(e.location,this._curActTexIndex),o.activeTexture(t._TEXTURES[this._curActTexIndex]),n&&Fs.bindTexture(o,3553,n),this._curActTexIndex++,1}return o.activeTexture(t._TEXTURES[s[0]]),n&&Fs.bindTexture(o,3553,n),0},i._uniform_samplerCube=function(e,i){var n=i.source||i.defaulteTexture.source,o=ur.mainContext,s=e.uploadedValue;if(null==s[0]){if(this._curActTexIndex>7)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return s[0]=this._curActTexIndex,o.uniform1i(e.location,this._curActTexIndex),o.activeTexture(t._TEXTURES[this._curActTexIndex]),n?Fs.bindTexture(o,34067,n):Fs.bindTexture(o,34067,US.grayTexture.source),this._curActTexIndex++,1}return o.activeTexture(t._TEXTURES[s[0]]),n?Fs.bindTexture(o,34067,n):Fs.bindTexture(o,34067,US.grayTexture.source),0},i._noSetValue=function(e){console.log("no....:"+e.name)},i.bind=function(){return _x.activeShader=this,_x.bindShader=this,this.activeResource(),Fs.UseProgram(this._program)},i.uploadAttributes=function(e,t){for(var i,n,o=0,s=0,r=this._attributeParamsMap.length;r>s;s+=2)n=this._attributeParamsMap[s+1],i=e[this._attributeParamsMap[s]],null!=i&&(t&&t[n.name]&&t[n.name].bind(),o+=n.fun.call(this,n,i));Nr.shaderCall+=o},i.uploadAttributesX=function(e,t){for(var i,n,o=0,s=0,r=this._attributeParamsMap.length;r>s;s+=2)n=this._attributeParamsMap[s+1],i=e[this._attributeParamsMap[s]],null!=i&&(t._bind(),o+=n.fun.call(this,n,i));Nr.shaderCall+=o},i.uploadSceneUniforms=function(e){for(var t,i,n=0,o=0,s=this._sceneUniformParamsMap.length;s>o;o+=2)i=this._sceneUniformParamsMap[o+1],t=e[this._sceneUniformParamsMap[o]],null!=t&&(n+=i.fun.call(this,i,t));Nr.shaderCall+=n},i.uploadCameraUniforms=function(e){for(var t,i,n=0,o=0,s=this._cameraUniformParamsMap.length;s>o;o+=2)i=this._cameraUniformParamsMap[o+1],t=e[this._cameraUniformParamsMap[o]],null!=t&&(n+=i.fun.call(this,i,t));Nr.shaderCall+=n},i.uploadSpriteUniforms=function(e){for(var t,i,n=0,o=0,s=this._spriteUniformParamsMap.length;s>o;o+=2)i=this._spriteUniformParamsMap[o+1],t=e[this._spriteUniformParamsMap[o]],null!=t&&(n+=i.fun.call(this,i,t));Nr.shaderCall+=n},i.uploadMaterialUniforms=function(e){for(var t,i,n=0,o=0,s=this._materialUniformParamsMap.length;s>o;o+=2)i=this._materialUniformParamsMap[o+1],t=e[this._materialUniformParamsMap[o]],null!=t&&(n+=i.fun.call(this,i,t));Nr.shaderCall+=n},i.uploadRenderElementUniforms=function(e){for(var t,i,n=0,o=0,s=this._renderElementUniformParamsMap.length;s>o;o+=2)i=this._renderElementUniformParamsMap[o+1],t=e[this._renderElementUniformParamsMap[o]],null!=t&&(n+=i.fun.call(this,i,t));Nr.shaderCall+=n},t.create=function(e,i,n,o,s,r,a,l){return new t(e,i,n,o,s,r,a,l)},t.addInclude=function(e,t){js.addInclude(e,t)},t._createShader=function(e,t,i){var n=e.createShader(i);if(e.shaderSource(n,t),e.compileShader(n),Id.debugMode&&!e.getShaderParameter(n,35713))throw e.getShaderInfoLog(n);return n},t.PERIOD_RENDERELEMENT=0,t.PERIOD_MATERIAL=1,t.PERIOD_SPRITE=2,t.PERIOD_CAMERA=3,t.PERIOD_SCENE=4,t._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],t._count=0,n(t,["shaderParamsMap",function(){return this.shaderParamsMap={"float":5126,"int":5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new Mr}]),t}(_x),TS=function(e){function t(){t.__super.call(this),this.setShaderName("Trail"),this._setColor(2,new el(1,1,1,1))}o(t,"laya.d3.core.trail.TrailMaterial",e);var r=t.prototype;return s(0,r,"tilingOffset",function(){return this._getColor(3)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._addShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(3,e)}),s(0,r,"diffuseTexture",function(){return this._getTexture(1)},function(e){e?this._addShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_DIFFUSETEXTURE):this._removeShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_DIFFUSETEXTURE),this._setTexture(1,e)}),s(0,r,"tintColor",function(){return this._getColor(2)},function(e){this._setColor(2,e)}),t.__init__=function(){t.SHADERDEFINE_DIFFUSETEXTURE=t.shaderDefines.registerDefine("DIFFUSETEXTURE"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET")},t.load=function(e){return i.loader.create(e,null,null,t)},t.SHADERDEFINE_DIFFUSETEXTURE=0,t.SHADERDEFINE_TILINGOFFSET=0,t.DIFFUSETEXTURE=1,t.TINTCOLOR=2,t.TILINGOFFSET=3,n(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),IS=function(e){function t(e,i,n,o){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===o&&(o=!1),t.__super.call(this),this._vertexDeclaration=e,this._vertexCount=i,this._bufferUsage=n,this._bufferType=34962,this._canRead=o,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*i,this._bind(),px._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),o&&(this._buffer=new Float32Array(this._byteLength/4))}o(t,"laya.d3.graphics.VertexBuffer3D",e);var i=t.prototype;return i.bindWithIndexBuffer=function(e){e&&e._bind(),this._bind()},i.setData=function(e,t,i,n){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=4294967295),0===i&&4294967295===n||(e=new Float32Array(e.buffer,4*i,n)),this._bind(),px._gl.bufferSubData(this._bufferType,4*t,e),this._canRead)if(0!==t||0!==i||4294967295!==n){var o=this._buffer.length-t;n>o&&(n=o);for(var s=0;n>s;s++)this._buffer[t+s]=e[s]}else this._buffer=e},i.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},i.disposeResource=function(){for(var t=ur.mainContext,i=this._vertexDeclaration.getVertexElements(),n=px._enableAtributes,o=0,s=i.length;s>o;o++)n[o]===this._glBuffer&&(t.disableVertexAttribArray(o),n[o]=null);e.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},s(0,i,"canRead",function(){return this._canRead}),s(0,i,"vertexCount",function(){return this._vertexCount}),s(0,i,"vertexDeclaration",function(){return this._vertexDeclaration}),t.create=function(e,i,n,o){return void 0===n&&(n=35044),void 0===o&&(o=!1),new t(e,i,n,o)},t}(px),AS=function(e){function t(e,i,n,o){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===n&&(n=35044),void 0===o&&(o=!1),t.__super.call(this),this._indexType=e,this._indexCount=i,this._bufferUsage=n,this._bufferType=34963,this._canRead=o;var s=0;if("ushort"==e)this._indexTypeByteCount=2;else{if("ubyte"!=e)throw new Error("unidentification index type.");this._indexTypeByteCount=1}s=this._indexTypeByteCount*i,this._byteLength=s,this._bind(),px._gl.bufferData(this._bufferType,s,this._bufferUsage),o?("ushort"==e?this._buffer=new Uint16Array(i):"ubyte"==e&&(this._buffer=new Uint8Array(i)),this.memorySize=2*s):this.memorySize=s}o(t,"laya.d3.graphics.IndexBuffer3D",e);var i=t.prototype;return i.setData=function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=4294967295);var o=0;if("ushort"==this._indexType?(o=2,0===i&&4294967295===n||(e=new Uint16Array(e.buffer,i*o,n))):"ubyte"==this._indexType&&(o=1,0===i&&4294967295===n||(e=new Uint8Array(e.buffer,i*o,n))),this._bind(),px._gl.bufferSubData(this._bufferType,t*o,e),this._canRead)if(0!==t||0!==i||4294967295!==n){var s=this._buffer.length-t;n>s&&(n=s);for(var r=0;n>r;r++)this._buffer[t+r]=e[r]}else this._buffer=e},i.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},i.disposeResource=function(){e.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},s(0,i,"canRead",function(){return this._canRead}),s(0,i,"indexCount",function(){return this._indexCount}),s(0,i,"indexTypeByteCount",function(){return this._indexTypeByteCount}),s(0,i,"indexType",function(){return this._indexType}),t.INDEXTYPE_UBYTE="ubyte",t.INDEXTYPE_USHORT="ushort",t.create=function(e,i,n,o){return void 0===n&&(n=35044),void 0===o&&(o=!1),new t(e,i,n,o)},t}(px),NS=function(e){function t(){t.__super.call(this),this.setShaderName("PARTICLESHURIKEN"),this.renderMode=6}o(t,"laya.d3.core.particleShuriKen.ShurikenParticleMaterial",e);var r=t.prototype;return r.onAsynLoaded=function(i,n,o){var s=n[0];if(s.version)e.prototype.onAsynLoaded.call(this,i,n,o);else{var r=n[1],a=s.props;for(var l in a)this[l]=a[l];t._parseShurikenParticleMaterial(r,this,s),this._endLoaded()}},s(0,r,"tilingOffset",function(){return this._getColor(3)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._addShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(3,e)}),s(0,r,"tintColor",function(){return this._getColor(2)},function(e){e?this._addShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TINTCOLOR):this._removeShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TINTCOLOR),this._setColor(2,e)}),s(0,r,"diffuseTexture",function(){return this._getTexture(1)},function(e){e?this._addShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,e)}),s(0,r,"renderMode",null,function(e){switch(e){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(e)}),t.__init__=function(){t.SHADERDEFINE_DIFFUSEMAP=t.shaderDefines.registerDefine("DIFFUSEMAP"),t.SHADERDEFINE_TINTCOLOR=t.shaderDefines.registerDefine("TINTCOLOR"),t.SHADERDEFINE_ADDTIVEFOG=t.shaderDefines.registerDefine("ADDTIVEFOG"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET")},t.load=function(e){return i.loader.create(e,null,null,t)},t._parseShurikenParticleMaterial=function(e,t,i){var n=i.customProps,o=n.diffuseTexture.texture2D;o&&(t.diffuseTexture=Tu.getRes(e[o]));var s=n.tintColor;s&&(t.tintColor=new el(s[0],s[1],s[2],s[3]))},t.RENDERMODE_OPAQUE=1,t.RENDERMODE_OPAQUEDOUBLEFACE=2,t.RENDERMODE_CUTOUT=3,t.RENDERMODE_CUTOUTDOUBLEFACE=4,t.RENDERMODE_TRANSPARENT=13,t.RENDERMODE_TRANSPARENTDOUBLEFACE=14,t.RENDERMODE_ADDTIVE=15,t.RENDERMODE_ADDTIVEDOUBLEFACE=16,t.RENDERMODE_DEPTHREAD_TRANSPARENT=5,t.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,t.RENDERMODE_DEPTHREAD_ADDTIVE=7,t.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,t.RENDERMODE_NONDEPTH_TRANSPARENT=9,t.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,t.RENDERMODE_NONDEPTH_ADDTIVE=11,t.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,t.SHADERDEFINE_DIFFUSEMAP=0,t.SHADERDEFINE_TINTCOLOR=0,t.SHADERDEFINE_TILINGOFFSET=0,t.SHADERDEFINE_ADDTIVEFOG=0,t.DIFFUSETEXTURE=1,t.TINTCOLOR=2,t.TILINGOFFSET=3,n(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),PS=function(e){function t(){t.__super.call(this),this.setShaderName("ExtendTerrain"),this.renderMode=1}o(t,"laya.d3.core.material.ExtendTerrainMaterial",e);var i=t.prototype;return i._setDetailNum=function(e){switch(e){case 1:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 2:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 3:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 4:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 5:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4)}},i.disableLight=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_POINTLIGHT|Id.SHADERDEFINE_SPOTLIGHT|Id.SHADERDEFINE_DIRECTIONLIGHT)},s(0,i,"renderMode",null,function(e){switch(e){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.depthTest=513;break;case 2:this.renderQueue=2e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.depthTest=515;break;default:throw new Error("ExtendTerrainMaterial:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(e)}),s(0,i,"specularColor",function(){return this._getColor(13)},function(e){this._setColor(13,e)}),s(0,i,"ambientColor",function(){return this._getColor(11)},function(e){this._setColor(11,e)}),s(0,i,"albedo",function(){return this._getColor(14)},function(e){this._setColor(14,e)}),s(0,i,"diffuseColor",function(){return this._getColor(12)},function(e){this._setColor(12,e)}),s(0,i,"diffuseScaleOffset2",null,function(e){this._setColor(7,e)}),s(0,i,"diffuseScaleOffset4",null,function(e){this._setColor(9,e)}),s(0,i,"diffuseScaleOffset5",null,function(e){this._setColor(10,e)}),s(0,i,"diffuseScaleOffset3",null,function(e){this._setColor(8,e)}),s(0,i,"diffuseTexture5",function(){return this._getTexture(5)},function(e){this._setTexture(5,e),this._setDetailNum(5)}),s(0,i,"diffuseScaleOffset1",null,function(e){this._setColor(6,e)}),s(0,i,"diffuseTexture4",function(){return this._getTexture(4)},function(e){this._setTexture(4,e),this._setDetailNum(4)}),s(0,i,"diffuseTexture3",function(){return this._getTexture(3)},function(e){this._setTexture(3,e),this._setDetailNum(3)}),s(0,i,"diffuseTexture2",function(){return this._getTexture(2)},function(e){this._setTexture(2,e),this._setDetailNum(2)}),s(0,i,"diffuseTexture1",null,function(e){this._setTexture(1,e),this._setDetailNum(1)}),s(0,i,"splatAlphaTexture",function(){return this._getTexture(0)},function(e){this._setTexture(0,e)}),t.__init__=function(){t.SHADERDEFINE_DETAIL_NUM1=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM1"),t.SHADERDEFINE_DETAIL_NUM2=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM2"),t.SHADERDEFINE_DETAIL_NUM3=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM3"),t.SHADERDEFINE_DETAIL_NUM4=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM4"),t.SHADERDEFINE_DETAIL_NUM5=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM5")},t.RENDERMODE_OPAQUE=1,t.RENDERMODE_TRANSPARENT=2,t.SPLATALPHATEXTURE=0,t.DIFFUSETEXTURE1=1,t.DIFFUSETEXTURE2=2,t.DIFFUSETEXTURE3=3,t.DIFFUSETEXTURE4=4,t.DIFFUSETEXTURE5=5,t.DIFFUSESCALEOFFSET1=6,t.DIFFUSESCALEOFFSET2=7,t.DIFFUSESCALEOFFSET3=8,t.DIFFUSESCALEOFFSET4=9,t.DIFFUSESCALEOFFSET5=10,t.MATERIALAMBIENT=11,t.MATERIALDIFFUSE=12,t.MATERIALSPECULAR=13,t.MATERIALALBEDO=14,t.SHADERDEFINE_DETAIL_NUM1=0,t.SHADERDEFINE_DETAIL_NUM2=0,t.SHADERDEFINE_DETAIL_NUM3=0,t.SHADERDEFINE_DETAIL_NUM4=0,t.SHADERDEFINE_DETAIL_NUM5=0,n(t,["shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),RS=function(e){function t(){this._useVertexDeep=!1,t.__super.call(this),this.setShaderName("Water")}o(t,"laya.d3.core.material.WaterMaterial",e);var r=t.prototype;return r.disableFog=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_FOG)},r.onAsynLoaded=function(t,i,n){e.prototype.onAsynLoaded.call(this,t,i,n)},s(0,r,"renderMode",null,function(e){switch(e){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1;break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1;break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3;break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;default:throw new Error("PBRMaterial:renderMode value error.")}}),s(0,r,"useRefractTexture",null,function(e){e?this._addShaderDefine(t.SHADERDEFINE_USE_REFRACT_TEX):this._removeShaderDefine(t.SHADERDEFINE_USE_REFRACT_TEX)}),s(0,r,"useFoam",null,function(e){e?this._addShaderDefine(t.SHADERDEFINE_USE_FOAM):this._removeShaderDefine(t.SHADERDEFINE_USE_FOAM)}),s(0,r,"deepScale",function(){return this._getNumber(20)},function(e){this._setNumber(20,e)}),s(0,r,"seaColor",function(){return this._getBuffer(19)},function(e){this._setBuffer(19,e)}),s(0,r,"waveMainDir",function(){return this._getNumber(14)},function(e){this._setNumber(14,e*Math.PI/180)}),s(0,r,"waveInfoD",function(){return this._getBuffer(13)},function(e){this._setBuffer(13,e)}),s(0,r,"scrsize",null,function(e){this._setBuffer(15,e)}),s(0,r,"currentTm",function(){return this._getNumber(8)},function(e){this._setNumber(8,e)}),s(0,r,"deepColorTexture",function(){return this._getTexture(10)},function(e){this._setTexture(10,e)}),s(0,r,"detailTexture",function(){return this._getTexture(9)},function(e){this._setTexture(9,e)}),s(0,r,"foamTexture",function(){return this._getTexture(17)},function(e){this._setTexture(17,e)}),s(0,r,"useVertexDeep",function(){return this._useVertexDeep},function(e){this._useVertexDeep=e,e?this._addShaderDefine(t.SHADERDEFINE_USEVERTEXHEIGHT):this._removeShaderDefine(t.SHADERDEFINE_USEVERTEXHEIGHT)}),s(0,r,"skyTexture",function(){return this._getTexture(11)},function(e){this._setTexture(11,e)}),s(0,r,"windSpeed",function(){return 0},function(e){}),s(0,r,"waterInfoTexture",function(){return this._getTexture(16)},function(e){this._setTexture(16,e)}),s(0,r,"geoWaveUVScale",function(){return this._getNumber(18)},function(e){this._setNumber(18,e)}),s(0,r,"vertexDispTexture",function(){return this._getTexture(4)},function(e){this._setTexture(4,e)}),s(0,r,"underWaterTexture",function(){return this._getTexture(3)},function(e){this._setTexture(3,e)}),s(0,r,"waveInfo",function(){return this._getBuffer(12)},function(e){this._setBuffer(12,e)}),s(0,r,"normalTexture",function(){return this._getTexture(2)},function(e){this._setTexture(2,e)}),s(0,r,"windDir",function(){return 0},function(e){}),s(0,r,"diffuseTexture",function(){return this._getTexture(1)},function(e){this._setTexture(1,e)}),t.__init__=function(){t.SHADERDEFINE_CUBE_ENV=t.shaderDefines.registerDefine("CUBE_ENV"),t.SHADERDEFINE_HDR_ENV=t.shaderDefines.registerDefine("HDR_ENV"),t.SHADERDEFINE_SHOW_NORMAL=t.shaderDefines.registerDefine("SHOW_NORMAL"),t.SHADERDEFINE_USEVERTEXHEIGHT=t.shaderDefines.registerDefine("USE_VERTEX_DEEPINFO"),t.SHADERDEFINE_USE_FOAM=t.shaderDefines.registerDefine("USE_FOAM"),t.SHADERDEFINE_USE_REFRACT_TEX=t.shaderDefines.registerDefine("USE_REFR_TEX")},t.load=function(e){return i.loader.create(e,null,null,t)},t.DIFFUSETEXTURE=1,t.NORMALTEXTURE=2,t.UNDERWATERTEXTURE=3,t.VERTEXDISPTEXTURE=4,t.UVANIAGE=5,t.UVMATRIX=6,t.UVAGE=7,t.CURTM=8,t.DETAILTEXTURE=9,t.DEEPCOLORTEXTURE=10,t.SKYTEXTURE=11,t.WAVEINFO=12,t.WAVEINFOD=13,t.WAVEMAINDIR=14,t.SCRSIZE=15,t.WATERINFO=16,t.FOAMTEXTURE=17,t.GEOWAVE_UV_SCALE=18,t.SEA_COLOR=19,t.WAVEINFODEEPSCALE=20,t.SHADERDEFINE_SHOW_NORMAL=0,t.SHADERDEFINE_CUBE_ENV=0,t.SHADERDEFINE_HDR_ENV=0,t.SHADERDEFINE_USE_FOAM=0,t.SHADERDEFINE_USE_REFRACT_TEX=0,t.SHADERDEFINE_USEVERTEXHEIGHT=0,t.RENDERMODE_OPAQUE=1,t.RENDERMODE_OPAQUEDOUBLEFACE=2,t.RENDERMODE_CUTOUT=3,t.RENDERMODE_CUTOUTDOUBLEFACE=4,t.RENDERMODE_TRANSPARENT=13,n(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),LS=function(e){function t(){t.__super.call(this),this.setShaderName("PBRStandard"),this._setColor(7,new el(1,1,1,1)),this._setColor(8,new el(0,0,0,0)),this._setNumber(9,0),this._setNumber(10,.5),this._setNumber(11,1),this._setNumber(12,0),this._setNumber(13,1),this._setNumber(14,1),this._setNumber(15,.001),this._setBool(16,!1),this._setNumber(0,.5)}o(t,"laya.d3.core.material.PBRStandardMaterial",e);var i=t.prototype;return s(0,i,"tilingOffset",function(){return this._getColor(17)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(17,e)}),s(0,i,"emissionColor",function(){return this._getColor(8)},function(e){this._setColor(8,e)}),s(0,i,"enableEmission",function(){return this._getBool(16)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSION):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSION),this._setBool(16,e)}),s(0,i,"smoothnessSource",function(){return this._getNumber(12)},function(e){1==e?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA):(this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA),e=0),this._setNumber(12,e)}),s(0,i,"smoothnessTextureScale",function(){return this._getNumber(11)},function(e){e=Math.max(0,Math.min(1,e)),this._setNumber(11,e)}),s(0,i,"parallaxTextureScale",function(){return this._getNumber(15)},function(e){e=Math.max(.005,Math.min(.08,e)),this._setNumber(15,e)}),s(0,i,"metallicGlossTexture",function(){return this._getTexture(2)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_METALLICGLOSSTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_METALLICGLOSSTEXTURE),this._setTexture(2,e)}),s(0,i,"occlusionTextureStrength",function(){return this._getNumber(13)},function(e){e=Math.max(0,Math.min(1,e)),this._setNumber(13,e)}),s(0,i,"metallic",function(){return this._getNumber(9)},function(e){e=Math.max(0,Math.min(1,e)),this._setNumber(9,e)}),s(0,i,"occlusionTexture",function(){return this._getTexture(5)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_OCCLUSIONTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_OCCLUSIONTEXTURE),this._setTexture(5,e)}),s(0,i,"emissionTexture",function(){return this._getTexture(6)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSIONTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSIONTEXTURE),this._setTexture(6,e)}),s(0,i,"albedoTexture",function(){return this._getTexture(1)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_DIFFUSETEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_DIFFUSETEXTURE),this._setTexture(1,e)}),s(0,i,"normalTextureScale",function(){return this._getNumber(14)},function(e){this._setNumber(14,e)}),s(0,i,"normalTexture",function(){return this._getTexture(3)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_NORMALTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_NORMALTEXTURE),this._setTexture(3,e)}),s(0,i,"smoothness",function(){return this._getNumber(10)},function(e){e=Math.max(0,Math.min(1,e)),this._setNumber(10,e)}),s(0,i,"parallaxTexture",function(){return this._getTexture(4)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_PARALLAXTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_PARALLAXTEXTURE),this._setTexture(4,e)}),s(0,i,"albedoColor",function(){return this._getColor(7)},function(e){this._setColor(7,e)}),t.__init__=function(){t.SHADERDEFINE_DIFFUSETEXTURE=t.shaderDefines.registerDefine("DIFFUSETEXTURE"),t.SHADERDEFINE_METALLICGLOSSTEXTURE=t.shaderDefines.registerDefine("METALLICGLOSSTEXTURE"),t.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=t.shaderDefines.registerDefine("SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA"),t.SHADERDEFINE_NORMALTEXTURE=t.shaderDefines.registerDefine("NORMALTEXTURE"),t.SHADERDEFINE_PARALLAXTEXTURE=t.shaderDefines.registerDefine("PARALLAXTEXTURE"),t.SHADERDEFINE_OCCLUSIONTEXTURE=t.shaderDefines.registerDefine("OCCLUSIONTEXTURE"),t.SHADERDEFINE_EMISSION=t.shaderDefines.registerDefine("EMISSION"),t.SHADERDEFINE_EMISSIONTEXTURE=t.shaderDefines.registerDefine("EMISSIONTEXTURE"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET")},t.SmoothnessSource_MetallicGlossTexture_Alpha=0,t.SmoothnessSource_DiffuseTexture_Alpha=1,t.SHADERDEFINE_DIFFUSETEXTURE=0,t.SHADERDEFINE_NORMALTEXTURE=0,t.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=0,t.SHADERDEFINE_METALLICGLOSSTEXTURE=0,t.SHADERDEFINE_OCCLUSIONTEXTURE=0,t.SHADERDEFINE_PARALLAXTEXTURE=0,t.SHADERDEFINE_EMISSION=0,t.SHADERDEFINE_EMISSIONTEXTURE=0,t.SHADERDEFINE_TILINGOFFSET=0,t.DIFFUSETEXTURE=1,t.METALLICGLOSSTEXTURE=2,t.NORMALTEXTURE=3,t.PARALLAXTEXTURE=4,t.OCCLUSIONTEXTURE=5,t.EMISSIONTEXTURE=6,t.DIFFUSECOLOR=7,t.EMISSIONCOLOR=8,
t.METALLIC=9,t.SMOOTHNESS=10,t.SMOOTHNESSSCALE=11,t.SMOOTHNESSSOURCE=12,t.OCCLUSIONSTRENGTH=13,t.NORMALSCALE=14,t.PARALLAXSCALE=15,t.ENABLEEMISSION=16,t.TILINGOFFSET=17,n(t,["shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),OS=function(e){function t(){t.__super.call(this),this.setShaderName("GLITTER"),this.renderMode=1,this._setColor(3,new el(1,1,1,1)),this._setColor(2,new el(1,1,1,1))}o(t,"laya.d3.core.material.GlitterMaterial",e);var r=t.prototype;return r.setShaderName=function(t){e.prototype.setShaderName.call(this,t)},s(0,r,"color",function(){return this._getColor(3)},function(e){this._setColor(3,e)}),s(0,r,"albedo",function(){return this._getColor(2)},function(e){this._setColor(2,e)}),s(0,r,"diffuseTexture",function(){return this._getTexture(1)},function(e){this._setTexture(1,e)}),s(0,r,"renderMode",null,function(e){switch(e){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0;break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0;break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(e)}),t.load=function(e){return i.loader.create(e,null,null,t)},t.RENDERMODE_OPAQUE=1,t.RENDERMODE_OPAQUEDOUBLEFACE=2,t.RENDERMODE_TRANSPARENT=13,t.RENDERMODE_TRANSPARENTDOUBLEFACE=14,t.RENDERMODE_ADDTIVE=15,t.RENDERMODE_ADDTIVEDOUBLEFACE=16,t.RENDERMODE_DEPTHREAD_TRANSPARENT=5,t.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,t.RENDERMODE_DEPTHREAD_ADDTIVE=7,t.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,t.RENDERMODE_NONDEPTH_TRANSPARENT=9,t.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,t.RENDERMODE_NONDEPTH_ADDTIVE=11,t.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,t.DIFFUSETEXTURE=1,t.ALBEDO=2,t.UNICOLOR=3,n(t,["defaultMaterial",function(){return this.defaultMaterial=new t}]),t}(yx),MS=function(e){function t(){this._transformUV=null,t.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new rl(.6,.6,.6)),this._setColor(10,new rl(1,1,1)),this._setColor(11,new el(1,1,1,8)),this._setColor(12,new rl(1,1,1)),this._setColor(7,new el(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new el(1,1,0,0)),this.renderMode=1}o(t,"laya.d3.core.material.StandardMaterial",e);var r=t.prototype;return r.disableLight=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_POINTLIGHT|Id.SHADERDEFINE_SPOTLIGHT|Id.SHADERDEFINE_DIRECTIONLIGHT)},r.disableFog=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_FOG)},r.onAsynLoaded=function(i,n,o){var s=n[0];if(s.version)e.prototype.onAsynLoaded.call(this,i,n,o);else{var r=n[1],a=s.props;for(var l in a)this[l]=a[l];t._parseStandardMaterial(r,this,s),this._endLoaded()}},r.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var i=t;this._transformUV&&(i._transformUV=this._transformUV.clone())},s(0,r,"ambientTexture",function(){return this._getTexture(5)},function(e){e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,e)}),s(0,r,"emissiveTexture",function(){return this._getTexture(4)},function(e){e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,e)}),s(0,r,"transformUV",function(){return this._transformUV},function(e){this._transformUV=e,this._setMatrix4x4(13,e.matrix),e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,e.matrix.elements,0)}),s(0,r,"reflectTexture",function(){return this._getTexture(6)},function(e){e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,e)}),s(0,r,"specularTexture",function(){return this._getTexture(3)},function(e){e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,e)}),s(0,r,"diffuseTexture",function(){return this._getTexture(1)},function(e){e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,e)}),s(0,r,"albedoColor",function(){return this._getColor(7)},function(e){this._setColor(7,e)}),s(0,r,"specularColor",function(){return this._getColor(11)},function(e){this._setColor(11,e)}),s(0,r,"normalTexture",function(){return this._getTexture(2)},function(e){e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,e)}),s(0,r,"reflectColor",function(){return this._getColor(12)},function(e){this._setColor(12,e)}),s(0,r,"diffuseColor",function(){return this._getColor(10)},function(e){this._setColor(10,e)}),s(0,r,"albedo",function(){return this._getColor(7)},function(e){this._setColor(7,e)}),s(0,r,"ambientColor",function(){return this._getColor(9)},function(e){this._setColor(9,e)}),s(0,r,"tilingOffset",function(){return this._getColor(15)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,e)}),s(0,r,"renderMode",null,function(e){switch(e){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(e)}),t.__init__=function(){t.SHADERDEFINE_DIFFUSEMAP=t.shaderDefines.registerDefine("DIFFUSEMAP"),t.SHADERDEFINE_NORMALMAP=t.shaderDefines.registerDefine("NORMALMAP"),t.SHADERDEFINE_SPECULARMAP=t.shaderDefines.registerDefine("SPECULARMAP"),t.SHADERDEFINE_EMISSIVEMAP=t.shaderDefines.registerDefine("EMISSIVEMAP"),t.SHADERDEFINE_AMBIENTMAP=t.shaderDefines.registerDefine("AMBIENTMAP"),t.SHADERDEFINE_REFLECTMAP=t.shaderDefines.registerDefine("REFLECTMAP"),t.SHADERDEFINE_UVTRANSFORM=t.shaderDefines.registerDefine("UVTRANSFORM"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET"),t.SHADERDEFINE_ADDTIVEFOG=t.shaderDefines.registerDefine("ADDTIVEFOG")},t.load=function(e){return i.loader.create(e,null,null,t)},t._parseStandardMaterial=function(e,t,i){var n=i.customProps,o=n.ambientColor;t.ambientColor=new rl(o[0],o[1],o[2]);var s=n.diffuseColor;t.diffuseColor=new rl(s[0],s[1],s[2]);var r=n.specularColor;t.specularColor=new el(r[0],r[1],r[2],r[3]);var a=n.reflectColor;t.reflectColor=new rl(a[0],a[1],a[2]);var l=n.albedoColor;l&&(t.albedo=new el(l[0],l[1],l[2],l[3]));var h=n.diffuseTexture.texture2D;h&&(t.diffuseTexture=Tu.getRes(e[h]));var c=n.normalTexture.texture2D;c&&(t.normalTexture=Tu.getRes(e[c]));var u=n.specularTexture.texture2D;u&&(t.specularTexture=Tu.getRes(e[u]));var d=n.emissiveTexture.texture2D;d&&(t.emissiveTexture=Tu.getRes(e[d]));var p=n.ambientTexture.texture2D;p&&(t.ambientTexture=Tu.getRes(e[p]));var f=n.reflectTexture.texture2D;f&&(t.reflectTexture=Tu.getRes(e[f]))},t.RENDERMODE_OPAQUE=1,t.RENDERMODE_OPAQUEDOUBLEFACE=2,t.RENDERMODE_CUTOUT=3,t.RENDERMODE_CUTOUTDOUBLEFACE=4,t.RENDERMODE_TRANSPARENT=13,t.RENDERMODE_TRANSPARENTDOUBLEFACE=14,t.RENDERMODE_ADDTIVE=15,t.RENDERMODE_ADDTIVEDOUBLEFACE=16,t.RENDERMODE_DEPTHREAD_TRANSPARENT=5,t.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,t.RENDERMODE_DEPTHREAD_ADDTIVE=7,t.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,t.RENDERMODE_NONDEPTH_TRANSPARENT=9,t.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,t.RENDERMODE_NONDEPTH_ADDTIVE=11,t.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,t.SHADERDEFINE_DIFFUSEMAP=0,t.SHADERDEFINE_NORMALMAP=0,t.SHADERDEFINE_SPECULARMAP=0,t.SHADERDEFINE_EMISSIVEMAP=0,t.SHADERDEFINE_AMBIENTMAP=0,t.SHADERDEFINE_REFLECTMAP=0,t.SHADERDEFINE_UVTRANSFORM=0,t.SHADERDEFINE_TILINGOFFSET=0,t.SHADERDEFINE_ADDTIVEFOG=0,t.DIFFUSETEXTURE=1,t.NORMALTEXTURE=2,t.SPECULARTEXTURE=3,t.EMISSIVETEXTURE=4,t.AMBIENTTEXTURE=5,t.REFLECTTEXTURE=6,t.ALBEDO=7,t.UVANIAGE=8,t.MATERIALAMBIENT=9,t.MATERIALDIFFUSE=10,t.MATERIALSPECULAR=11,t.MATERIALREFLECT=12,t.UVMATRIX=13,t.UVAGE=14,t.TILINGOFFSET=15,n(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),DS=function(e){function t(){if(this._transformUV=null,t.__super.call(this),!laya.d3.core.material.PBRMaterial.pbrlutTex){var e=Or.window.__pbrlutdata;if(!e)throw alert("no pbr lutdata, need pbrlut.js"),"no pbr lutdata, need pbrlut.js";var i=qS.create(new Uint32Array(e).buffer,256,256,9728,9728,!1);laya.d3.core.material.PBRMaterial.pbrlutTex=i}this._setTexture(4,laya.d3.core.material.PBRMaterial.pbrlutTex),this.setShaderName("PBR"),this._setNumber(0,.5),this.use_groundtruth=!1}o(t,"laya.d3.core.material.PBRMaterial",e);var r=t.prototype;return r.disableLight=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_POINTLIGHT|Id.SHADERDEFINE_SPOTLIGHT|Id.SHADERDEFINE_DIRECTIONLIGHT)},r.disableFog=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_FOG)},r.onAsynLoaded=function(t,i,n){e.prototype.onAsynLoaded.call(this,t,i,n)},r.radicalInverse_VdC=function(e){var t=new Uint32Array(1);return function(e){return e=e<<16|e>>>16,e=(1431655765&e)<<1|(2863311530&e)>>>1,e=(858993459&e)<<2|(3435973836&e)>>>2,e=(252645135&e)<<4|(4042322160&e)>>>4,e=(16711935&e)<<8|(4278255360&e)>>>8,t[0]=e,2.3283064365386963e-10*t[0]}(e)},r.createHammersleyTex=function(e,t){var i=new Uint8Array(e*t*4),n=0,o=0;for(o=0;e*t>o;o++){var s=this.radicalInverse_VdC(o);i[n++]=255*s,i[n++]=0,i[n++]=0,i[n++]=255}return i},s(0,r,"renderMode",null,function(e){switch(e){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1;break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1;break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3;break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;default:throw new Error("PBRMaterial:renderMode value error.")}}),s(0,r,"transformUV",function(){return this._transformUV},function(e){this._transformUV=e,this._setMatrix4x4(8,e.matrix),this._conchMaterial&&this._conchMaterial.setShaderValue(8,e.matrix.elements,0)}),s(0,r,"normalTexture",function(){return this._getTexture(2)},function(e){this._setTexture(2,e)}),s(0,r,"pbrlutTexture",function(){return this._getTexture(4)},function(e){this._setTexture(4,e)}),s(0,r,"pbrInfoTexture",function(){return this._getTexture(3)},function(e){this._setTexture(3,e),this._addShaderDefine(t.SHADERDEFINE_HAS_PBRINFO)}),s(0,r,"diffuseTexture",function(){return this._getTexture(1)},function(e){this._setTexture(1,e)}),s(0,r,"testClipZ",null,function(e){this._addShaderDefine(t.SHADERDEFINE_TEST_CLIPZ)}),s(0,r,"metaless",function(){return this._getNumber(7)},function(e){this._setNumber(7,e),this._addShaderDefine(t.SHADERDEFINE_FIX_METALESS)}),s(0,r,"roughness",function(){return this._getNumber(6)},function(e){this._setNumber(6,e),this._addShaderDefine(t.SHADERDEFINE_FIX_ROUGHNESS)}),s(0,r,"use_groundtruth",null,function(e){if(e){if(this._addShaderDefine(t.SHADERDEFINE_USE_GROUNDTRUTH),!laya.d3.core.material.PBRMaterial.HammersleyNoiseTex){var i=this.createHammersleyTex(32,32);laya.d3.core.material.PBRMaterial.HammersleyNoiseTex=qS.create(i.buffer,32,32,9728,9728,!1)}this._setTexture(15,t.HammersleyNoiseTex)}else laya.d3.core.material.PBRMaterial.HammersleyNoiseTex=null,this._removeShaderDefine(t.SHADERDEFINE_USE_GROUNDTRUTH)}),s(0,r,"has_tangent",null,function(e){this._addShaderDefine(t.SHADERDEFINE_HAS_TANGENT)}),t.__init__=function(){t.SHADERDEFINE_FIX_METALESS=t.shaderDefines.registerDefine("FIX_METALESS"),t.SHADERDEFINE_FIX_ROUGHNESS=t.shaderDefines.registerDefine("FIX_ROUGHNESS"),t.SHADERDEFINE_HAS_TANGENT=t.shaderDefines.registerDefine("HAS_TANGENT"),t.SHADERDEFINE_HAS_PBRINFO=t.shaderDefines.registerDefine("HAS_PBRINFO"),t.SHADERDEFINE_USE_GROUNDTRUTH=t.shaderDefines.registerDefine("USE_GROUNDTRUTH"),t.SHADERDEFINE_TEST_CLIPZ=t.shaderDefines.registerDefine("CLIPZ")},t.load=function(e){return i.loader.create(e,null,null,t)},t.DIFFUSETEXTURE=1,t.NORMALTEXTURE=2,t.PBRINFOTEXTURE=3,t.PBRLUTTEXTURE=4,t.UVANIAGE=5,t.MATERIALROUGHNESS=6,t.MATERIALMETALESS=7,t.UVMATRIX=8,t.UVAGE=9,t.AOOBJPOS=14,t.HSNOISETEXTURE=15,t.SHADERDEFINE_FIX_ROUGHNESS=0,t.SHADERDEFINE_FIX_METALESS=0,t.SHADERDEFINE_HAS_TANGENT=0,t.SHADERDEFINE_TEST_CLIPZ=0,t.SHADERDEFINE_HAS_PBRINFO=0,t.SHADERDEFINE_USE_GROUNDTRUTH=0,t.RENDERMODE_OPAQUE=1,t.RENDERMODE_OPAQUEDOUBLEFACE=2,t.RENDERMODE_CUTOUT=3,t.RENDERMODE_CUTOUTDOUBLEFACE=4,t.RENDERMODE_TRANSPARENT=13,t.pbrlutTex=null,t.HammersleyNoiseTex=null,n(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),kS=function(e){function t(){t.__super.call(this),this.setShaderName("BLINNPHONG"),this._albedoIntensity=1,this._albedoColor=new el(1,1,1,1),this._setColor(6,new el(1,1,1,1)),this._setColor(8,new rl(1,1,1)),this._setNumber(9,.078125),this._setColor(10,new rl(1,1,1)),this._setNumber(0,.5),this._setColor(11,new el(1,1,0,0)),this._enableLighting=!0,this.renderMode=0}o(t,"laya.d3.core.material.BlinnPhongMaterial",e);var r=t.prototype;return r.disableLight=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_POINTLIGHT|Id.SHADERDEFINE_SPOTLIGHT|Id.SHADERDEFINE_DIRECTIONLIGHT)},r.disableFog=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_FOG)},r.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var i=t;i._enableLighting=this._enableLighting,i._albedoIntensity=this._albedoIntensity,this._albedoColor.cloneTo(i._albedoColor)},s(0,r,"enableLighting",function(){return this._enableLighting},function(e){this._enableLighting!==e&&(e?this._removeDisablePublicShaderDefine(Id.SHADERDEFINE_POINTLIGHT|Id.SHADERDEFINE_SPOTLIGHT|Id.SHADERDEFINE_DIRECTIONLIGHT):this._addDisablePublicShaderDefine(Id.SHADERDEFINE_POINTLIGHT|Id.SHADERDEFINE_SPOTLIGHT|Id.SHADERDEFINE_DIRECTIONLIGHT),this._enableLighting=e)}),s(0,r,"reflectTexture",function(){return this._getTexture(5)},function(e){e?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(5,e)}),s(0,r,"specularTexture",function(){return this._getTexture(3)},function(e){e?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,e)}),s(0,r,"normalTexture",function(){return this._getTexture(2)},function(e){e?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,e)}),s(0,r,"albedoIntensity",function(){return this._albedoIntensity},function(e){if(this._albedoIntensity!==e){var t=this._getColor(6);el.scale(this._albedoColor,e,t),this._albedoIntensity=e}}),s(0,r,"reflectColor",function(){return this._getColor(10)},function(e){this._setColor(10,e)}),s(0,r,"albedoTexture",function(){return this._getTexture(1)},function(e){e?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,e)}),s(0,r,"shininess",function(){return this._getNumber(9)},function(e){e=Math.max(0,Math.min(1,e)),this._setNumber(9,e)}),s(0,r,"specularColor",function(){return this._getColor(8)},function(e){this._setColor(8,e)}),s(0,r,"tilingOffset",function(){return this._getColor(11)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(11,e)}),s(0,r,"albedoColor",function(){return this._albedoColor},function(e){var t=this._getColor(6);el.scale(e,this._albedoIntensity,t),this._albedoColor=e}),s(0,r,"renderMode",null,function(e){switch(e){case 0:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this.depthTest=513,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 1:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this.depthTest=513,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this.depthTest=513,this._removeShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this.depthTest=513,this._addShaderDefine(t.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(e)}),t.__init__=function(){t.SHADERDEFINE_DIFFUSEMAP=t.shaderDefines.registerDefine("DIFFUSEMAP"),t.SHADERDEFINE_NORMALMAP=t.shaderDefines.registerDefine("NORMALMAP"),t.SHADERDEFINE_SPECULARMAP=t.shaderDefines.registerDefine("SPECULARMAP"),t.SHADERDEFINE_REFLECTMAP=t.shaderDefines.registerDefine("REFLECTMAP"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET"),t.SHADERDEFINE_ADDTIVEFOG=t.shaderDefines.registerDefine("ADDTIVEFOG")},t.load=function(e){return i.loader.create(e,null,null,t)},t.SPECULARSOURCE_DIFFUSEMAPALPHA=0,t.SPECULARSOURCE_SPECULARMAP=0,t.RENDERMODE_OPAQUE=0,t.RENDERMODE_CUTOUT=1,t.RENDERMODE_TRANSPARENT=2,t.RENDERMODE_ADDTIVE=3,t.SHADERDEFINE_DIFFUSEMAP=0,t.SHADERDEFINE_NORMALMAP=0,t.SHADERDEFINE_SPECULARMAP=0,t.SHADERDEFINE_REFLECTMAP=0,t.SHADERDEFINE_TILINGOFFSET=0,t.SHADERDEFINE_ADDTIVEFOG=0,t.ALBEDOTEXTURE=1,t.NORMALTEXTURE=2,t.SPECULARTEXTURE=3,t.EMISSIVETEXTURE=4,t.REFLECTTEXTURE=5,t.ALBEDOCOLOR=6,t.MATERIALSPECULAR=8,t.SHININESS=9,t.MATERIALREFLECT=10,t.TILINGOFFSET=11,n(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),BS=function(e){function t(){this._diffuseScale1=null,this._diffuseScale2=null,this._diffuseScale3=null,this._diffuseScale4=null,t.__super.call(this),this.setShaderName("Terrain"),this.renderMode=1,this._diffuseScale1=new ul,this._diffuseScale2=new ul,this._diffuseScale3=new ul,this._diffuseScale4=new ul,this.ambientColor=new rl(.6,.6,.6),this.diffuseColor=new rl(1,1,1),this.specularColor=new el(.2,.2,.2,32)}o(t,"laya.d3.core.material.TerrainMaterial",e);var r=t.prototype;return r.setDiffuseScale1=function(e,t){this._diffuseScale1.x=e,this._diffuseScale1.y=t,this._setColor(6,this._diffuseScale1)},r.setDiffuseScale2=function(e,t){this._diffuseScale2.x=e,this._diffuseScale2.y=t,this._setColor(7,this._diffuseScale2)},r.setDiffuseScale3=function(e,t){this._diffuseScale3.x=e,this._diffuseScale3.y=t,this._setColor(8,this._diffuseScale3)},r.setDiffuseScale4=function(e,t){this._diffuseScale4.x=e,this._diffuseScale4.y=t,this._setColor(9,this._diffuseScale4)},r.setDetailNum=function(e){switch(e){case 1:this._addShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 2:this._addShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 3:this._addShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 4:this._addShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3)}},r.disableLight=function(){this._addDisablePublicShaderDefine(Id.SHADERDEFINE_POINTLIGHT|Id.SHADERDEFINE_SPOTLIGHT|Id.SHADERDEFINE_DIRECTIONLIGHT)},r.setShaderName=function(t){e.prototype.setShaderName.call(this,t)},s(0,r,"diffuseTexture4",function(){return this._getTexture(5)},function(e){this._setTexture(5,e)}),s(0,r,"diffuseTexture3",function(){return this._getTexture(4)},function(e){this._setTexture(4,e)}),s(0,r,"renderMode",null,function(e){switch(e){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.depthTest=513;break;case 2:this.renderQueue=2e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.depthTest=515;break;default:throw new Error("TerrainMaterial:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(e)}),s(0,r,"diffuseTexture2",function(){return this._getTexture(3)},function(e){this._setTexture(3,e)}),s(0,r,"diffuseTexture1",function(){return this._getTexture(2)},function(e){this._setTexture(2,e)}),s(0,r,"specularColor",function(){return this._getColor(12)},function(e){this._setColor(12,e)}),s(0,r,"normalTexture",function(){return this._getTexture(1)},function(e){this._setTexture(1,e)}),s(0,r,"diffuseColor",function(){return this._getColor(11)},function(e){this._setColor(11,e)}),s(0,r,"splatAlphaTexture",function(){return this._getTexture(0)},function(e){this._setTexture(0,e)}),s(0,r,"ambientColor",function(){return this._getColor(10)},function(e){this._setColor(10,e)}),t.__init__=function(){t.SHADERDEFINE_DETAIL_NUM1=t.shaderDefines.registerDefine("DETAIL_NUM1"),t.SHADERDEFINE_DETAIL_NUM2=t.shaderDefines.registerDefine("DETAIL_NUM2"),t.SHADERDEFINE_DETAIL_NUM4=t.shaderDefines.registerDefine("DETAIL_NUM4"),t.SHADERDEFINE_DETAIL_NUM3=t.shaderDefines.registerDefine("DETAIL_NUM3")},t.load=function(e){return i.loader.create(e,null,null,t)},t.RENDERMODE_OPAQUE=1,t.RENDERMODE_TRANSPARENT=2,t.SPLATALPHATEXTURE=0,t.NORMALTEXTURE=1,t.DIFFUSETEXTURE1=2,t.DIFFUSETEXTURE2=3,t.DIFFUSETEXTURE3=4,t.DIFFUSETEXTURE4=5,t.DIFFUSESCALE1=6,t.DIFFUSESCALE2=7,t.DIFFUSESCALE3=8,t.DIFFUSESCALE4=9,t.MATERIALAMBIENT=10,t.MATERIALDIFFUSE=11,t.MATERIALSPECULAR=12,t.SHADERDEFINE_DETAIL_NUM1=0,t.SHADERDEFINE_DETAIL_NUM2=0,t.SHADERDEFINE_DETAIL_NUM3=0,t.SHADERDEFINE_DETAIL_NUM4=0,n(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),VS=function(e){function t(){t.__super.call(this),this.setShaderName("PBRSpecular"),this._setColor(7,new el(1,1,1,1)),this._setColor(9,new el(0,0,0,0)),this._setColor(8,new el(.2,.2,.2,.2)),this._setNumber(10,.5),this._setNumber(11,1),this._setNumber(12,0),this._setNumber(13,1),this._setNumber(14,1),this._setNumber(15,.001),this._setBool(16,!1),this._setNumber(0,.5)}o(t,"laya.d3.core.material.PBRSpecularMaterial",e);var i=t.prototype;return s(0,i,"tilingOffset",function(){return this._getColor(17)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(17,e)}),s(0,i,"emissionColor",function(){return this._getColor(9)},function(e){this._setColor(9,e)}),s(0,i,"enableEmission",function(){return this._getBool(16)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSION):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSION),this._setBool(16,e)}),s(0,i,"smoothnessSource",function(){return this._getNumber(12)},function(e){1==e?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA):(this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA),e=0),this._setNumber(12,e)}),s(0,i,"smoothnessTextureScale",function(){return this._getNumber(11)},function(e){e=Math.max(0,Math.min(1,e)),this._setNumber(11,e)}),s(0,i,"specularColor",function(){return this._getColor(8)},function(e){this._setColor(8,e)}),s(0,i,"specularTexture",function(){return this._getTexture(2)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SPECULARTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SPECULARTEXTURE),this._setTexture(2,e)}),s(0,i,"occlusionTextureStrength",function(){return this._getNumber(13)},function(e){e=Math.max(0,Math.min(1,e)),this._setNumber(13,e)}),s(0,i,"occlusionTexture",function(){return this._getTexture(5)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_OCCLUSIONTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_OCCLUSIONTEXTURE),this._setTexture(5,e)}),s(0,i,"emissionTexture",function(){return this._getTexture(6)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSIONTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSIONTEXTURE),this._setTexture(6,e)}),s(0,i,"albedoTexture",function(){return this._getTexture(1)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_DIFFUSETEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_DIFFUSETEXTURE),this._setTexture(1,e)}),s(0,i,"normalTextureScale",function(){return this._getNumber(14)},function(e){this._setNumber(14,e)}),s(0,i,"parallaxTextureScale",function(){return this._getNumber(15)},function(e){e=Math.max(.005,Math.min(.08,e)),this._setNumber(15,e)}),s(0,i,"normalTexture",function(){return this._getTexture(3)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_NORMALTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_NORMALTEXTURE),this._setTexture(3,e)}),s(0,i,"smoothness",function(){return this._getNumber(10)},function(e){e=Math.max(0,Math.min(1,e)),this._setNumber(10,e)}),s(0,i,"parallaxTexture",function(){return this._getTexture(4)},function(e){e?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_PARALLAXTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_PARALLAXTEXTURE),this._setTexture(4,e)}),s(0,i,"albedoColor",function(){return this._getColor(7);
},function(e){this._setColor(7,e)}),t.__init__=function(){t.SHADERDEFINE_DIFFUSETEXTURE=t.shaderDefines.registerDefine("DIFFUSETEXTURE"),t.SHADERDEFINE_SPECULARTEXTURE=t.shaderDefines.registerDefine("SPECULARTEXTURE"),t.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=t.shaderDefines.registerDefine("SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA"),t.SHADERDEFINE_NORMALTEXTURE=t.shaderDefines.registerDefine("NORMALTEXTURE"),t.SHADERDEFINE_PARALLAXTEXTURE=t.shaderDefines.registerDefine("PARALLAXTEXTURE"),t.SHADERDEFINE_OCCLUSIONTEXTURE=t.shaderDefines.registerDefine("OCCLUSIONTEXTURE"),t.SHADERDEFINE_EMISSION=t.shaderDefines.registerDefine("EMISSION"),t.SHADERDEFINE_EMISSIONTEXTURE=t.shaderDefines.registerDefine("EMISSIONTEXTURE"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET")},t.SmoothnessSource_MetallicGlossTexture_Alpha=0,t.SmoothnessSource_DiffuseTexture_Alpha=1,t.SHADERDEFINE_DIFFUSETEXTURE=0,t.SHADERDEFINE_NORMALTEXTURE=0,t.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=0,t.SHADERDEFINE_SPECULARTEXTURE=0,t.SHADERDEFINE_OCCLUSIONTEXTURE=0,t.SHADERDEFINE_PARALLAXTEXTURE=0,t.SHADERDEFINE_EMISSION=0,t.SHADERDEFINE_EMISSIONTEXTURE=0,t.SHADERDEFINE_TILINGOFFSET=0,t.DIFFUSETEXTURE=1,t.SPECULARTEXTURE=2,t.NORMALTEXTURE=3,t.PARALLAXTEXTURE=4,t.OCCLUSIONTEXTURE=5,t.EMISSIONTEXTURE=6,t.DIFFUSECOLOR=7,t.SPECULARCOLOR=8,t.EMISSIONCOLOR=9,t.SMOOTHNESS=10,t.SMOOTHNESSSCALE=11,t.SMOOTHNESSSOURCE=12,t.OCCLUSIONSTRENGTH=13,t.NORMALSCALE=14,t.PARALLAXSCALE=15,t.ENABLEEMISSION=16,t.TILINGOFFSET=17,n(t,["shaderDefines",function(){return this.shaderDefines=new ml(yx.shaderDefines)}]),t}(yx),FS=function(e){function t(e,i,n,o,s,r,a,l){throw t.__super.call(this),new Error("不允许new！")}return o(t,"laya.resource.HTMLSubImage",e),t.create=function(e,i,n,o,s,r,a,l){return void 0===l&&(l=!1),new t(e,i,n,o,s,r,a,l)},t}(mx),GS=function(e){function t(e,i){this._is2D=!1,t.__super.call(this);var n=this;if(this._source=this,"2D"===e||"AUTO"===e&&!Ns.isWebGL){this._is2D=!0,this._source=i||Or.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var o=this;o.getContext=function(e,t){if(n._ctx)return n._ctx;var i=n._ctx=n._source.getContext(e,t);return i&&(i._canvas=o,Ns.isFlash||Or.onLimixiu||(i.size=function(e,t){})),i}}this.lock=!0}o(t,"laya.resource.HTMLCanvas",e);var i=t.prototype;return i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},i.release=function(){},i._setContext=function(e){this._ctx=e},i.getContext=function(e,i){return this._ctx?this._ctx:this._ctx=t._createContext(this)},i.getMemSize=function(){return 0},i.size=function(e,t){(this._w!=e||this._h!=t||this._source&&(this._source.width!=e||this._source.height!=t))&&(this._w=e,this._h=t,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(e,t),this._source&&(this._source.height=t,this._source.width=e))},i.getCanvas=function(){return this._source},i.toBase64=function(e,t,i){if(this._source)if(Ns.isConchApp&&this._source.toBase64)this._source.toBase64(e,t,i);else{var n=this._source.toDataURL(e,t);i.call(this,n)}},s(0,i,"asBitmap",null,function(e){}),s(0,i,"context",function(){return this._ctx}),t.create=function(e,i){return new t(e,i)},t.TYPE2D="2D",t.TYPE3D="3D",t.TYPEAUTO="AUTO",t._createContext=null,t}(mx),HS=function(e){function t(e){this._color=null,this._pixels=null,t.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new Qa(this.width,this.height),this._color=e,this._pixels=new Uint8Array([255*e.x,255*e.y,255*e.z,255*e.w])}o(t,"laya.d3.resource.SolidColorTexture2D",e);var i=t.prototype;return i._createWebGlTexture=function(){var e=ur.mainContext,t=this._source=e.createTexture(),i=this._width,n=this._height,o=Fs.curBindTexTarget,s=Fs.curBindTexValue;Fs.bindTexture(e,this._type,t),e.texImage2D(this._type,0,6408,i,n,0,6408,5121,this._pixels);var r=this._minFifter,a=this._magFifter,l=this._repeat?10497:33071,h=Th.isPOT(i,n);h?(this._mipmap?-1!==r||(r=9987):-1!==r||(r=9729),-1!==a||(a=9729),e.texParameteri(this._type,10241,r),e.texParameteri(this._type,10240,a),e.texParameteri(this._type,10242,l),e.texParameteri(this._type,10243,l),this._mipmap&&e.generateMipmap(this._type)):(-1!==r||(r=9729),-1!==a||(a=9729),e.texParameteri(this._type,10241,r),e.texParameteri(this._type,10240,a),e.texParameteri(this._type,10242,33071),e.texParameteri(this._type,10243,33071)),o&&s&&Fs.bindTexture(e,o,s),h?this.memorySize=i*n*4*(1+1/3):this.memorySize=i*n*4},i.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},i.disposeResource=function(){this._source&&(ur.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},n(t,["magentaTexture",function(){return this.magentaTexture=new t(new el(1,0,1,1))},"grayTexture",function(){return this.grayTexture=new t(new el(.5,.5,.5,1))}]),t}(Ix),US=function(e){function t(e){this._color=null,this._pixels=null,this._texCount=6,t.__super.call(this),this._type=34067,this._width=1,this._height=1,this._size=new Qa(this.width,this.height),this._color=e,this._pixels=new Uint8Array([255*e.x,255*e.y,255*e.z,255*e.w])}o(t,"laya.d3.resource.SolidColorTextureCube",e);var i=t.prototype;return i._createWebGlTexture=function(){var e=ur.mainContext,t=this._source=e.createTexture(),i=this._width,n=this._height,o=Fs.curBindTexTarget,s=Fs.curBindTexValue;Fs.bindTexture(e,this._type,t),e.texImage2D(34069,0,6408,i,n,0,6408,5121,this._pixels),e.texImage2D(34070,0,6408,i,n,0,6408,5121,this._pixels),e.texImage2D(34071,0,6408,i,n,0,6408,5121,this._pixels),e.texImage2D(34072,0,6408,i,n,0,6408,5121,this._pixels),e.texImage2D(34073,0,6408,i,n,0,6408,5121,this._pixels),e.texImage2D(34074,0,6408,i,n,0,6408,5121,this._pixels);var r=this.minFifter,a=this.magFifter,l=this._repeat?10497:33071,h=Th.isPOT(i,n);h?(this.mipmap?-1!==r||(r=9987):-1!==r||(r=9729),-1!==a||(a=9729),e.texParameteri(this._type,10241,r),e.texParameteri(this._type,10240,a),e.texParameteri(this._type,10242,l),e.texParameteri(this._type,10243,l),this.mipmap&&e.generateMipmap(this._type)):(-1!==r||(r=9729),-1!==a||(a=9729),e.texParameteri(this._type,10241,r),e.texParameteri(this._type,10240,a),e.texParameteri(this._type,10242,33071),e.texParameteri(this._type,10243,33071)),o&&s&&Fs.bindTexture(e,o,s),h?this.memorySize=i*n*4*(1+1/3)*this._texCount:this.memorySize=i*n*4*this._texCount},i.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},i.disposeResource=function(){this._source&&(ur.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},n(t,["magentaTexture",function(){return this.magentaTexture=new t(new el(1,0,1,1))},"grayTexture",function(){return this.grayTexture=new t(new el(.5,.5,.5,1))}]),t}(Ix),zS=function(t){function n(e,t,i,o){this._canRead=!1,this._image=null,this._pixels=null,void 0===e&&(e=!1),void 0===t&&(t=!0),void 0===i&&(i=6408),void 0===o&&(o=!0),n.__super.call(this),this._type=3553,this._repeat=t,this._canRead=e,this._format=i,this._mipmap=o}o(n,"laya.d3.resource.Texture2D",t);var r=n.prototype;return r._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var e=ur.mainContext,t=this._source=e.createTexture(),i=this._width,n=this._height,o=Fs.curBindTexTarget,s=Fs.curBindTexValue;switch(Fs.bindTexture(e,this._type,t),this._format){case 6407:case 6408:this._canRead?e.texImage2D(this._type,0,this._format,i,n,0,this._format,5121,this._pixels):e.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case ur.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:e.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image)}var r=this._minFifter,a=this._magFifter,l=this._repeat?10497:33071,h=0==this._wrapModeU?10497:33071,c=0==this._wrapModeV?10497:33071,u=Th.isPOT(i,n);u?(this._mipmap?-1!==r||(r=9987):-1!==r||(r=9729),-1!==a||(a=9729),e.texParameteri(this._type,10241,r),e.texParameteri(this._type,10240,a),e.texParameteri(this._type,10242,l),e.texParameteri(this._type,10243,l),e.texParameteri(this._type,10242,h),e.texParameteri(this._type,10243,c),this._mipmap&&e.generateMipmap(this._type)):(-1!==r||(r=9729),-1!==a||(a=9729),e.texParameteri(this._type,10241,r),e.texParameteri(this._type,10240,a),e.texParameteri(this._type,10242,33071),e.texParameteri(this._type,10243,33071)),o&&s&&Fs.bindTexture(e,o,s),this._image.onload=null,this._image=null,u?this.memorySize=i*n*4*(1+1/3):this.memorySize=i*n*4},r.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},r.onAsynLoaded=function(t,i,n){if(n){var o=n[0];void 0!==o&&(this._canRead=o);var s=n[1];void 0!==s&&(this._repeat=s);var r=n[2];void 0!==r&&(this._format=r);var a=n[3];void 0!==a&&(this._mipmap=a);var l=n.wrapModeU;void 0!==l&&(this._wrapModeU=l);var h=n.wrapModeV;void 0!==h&&(this._wrapModeV=h)}switch(this._format){case 6407:case 6408:this._image=i;var c=i.width,u=i.height;this._width=c,this._height=u,this._size=new Qa(c,u),this._canRead&&(Ns.isConchApp?i instanceof e.HTMLElement&&(this._pixels=new Uint8Array(i.getImageData(0,0,c,u))):(Or.canvas.size(c,u),Or.canvas.clear(),Or.context.drawImage(i,0,0,c,u),this._pixels=new Uint8Array(Or.context.getImageData(0,0,c,u).data.buffer)));break;case ur.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var d=new Vr(i);d.readUTFBytes(4),d.readUTFBytes(2),d.getInt16();d.endian="bigEndian",this._width=d.getInt16(),this._height=d.getInt16(),this._size=new Qa(this._width,this._height);d.getInt16(),d.getInt16();this._image=new Uint8Array(i,d.pos)}this.recreateResource(),this._endLoaded()},r.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},r.disposeResource=function(){this._source&&(ur.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},s(0,r,"src",function(){return this.url}),s(0,r,"_src",function(){return this.url}),n.load=function(e){return i.loader.create(e,null,null,n)},n}(Ix),WS=function(e){function t(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,t.__super.call(this)}o(t,"laya.d3.resource.models.PrimitiveMesh",e);var n=t.prototype;return i.imps(n,{"laya.d3.core.render.IRenderable":!0}),n._getVertexBuffer=function(e){return void 0===e&&(e=0),0===e?this._vertexBuffer:null},n._getVertexBuffers=function(){return null},n._getIndexBuffer=function(){return this._indexBuffer},n._getPositions=function(){var e,t=[],i=this._vertexBuffer.vertexDeclaration.getVertexElements(),n=0;for(n=0;n<i.length;n++){var o=i[n];if("vector3"===o.elementFormat&&0===o.elementUsage){e=o;break}}var s=this._vertexBuffer.getData();for(n=0;n<s.length;n+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var r=n+e.offset/4,a=new rl(s[r+0],s[r+1],s[r+2]);t.push(a)}return t},n.getRenderElement=function(e){return this},n.getRenderElementsCount=function(){return 1},n.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this.memorySize=0},n._beforeRender=function(e){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},n._render=function(e){ur.mainContext.drawElements(4,this._numberIndices,5123,0),Nr.drawCall++,Nr.trianglesFaces+=this._numberIndices/3},s(0,n,"triangleCount",function(){return this._indexBuffer.indexCount/3}),s(0,n,"_vertexBufferCount",function(){return 1}),t}(Ax),YS=function(e){function t(e,i,n,o,s,r,a,l,h){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===n&&(n=6408),void 0===o&&(o=5121),void 0===s&&(s=33189),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===l&&(l=-1),void 0===h&&(h=-1),t.__super.call(this),this._type=3553,this._width=e,this._height=i,this._size=new Qa(e,i),this._surfaceFormat=n,this._surfaceType=o,this._depthStencilFormat=s,Ns.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=r,this._repeat=a,this._minFifter=l,this._magFifter=h,this.activeResource(),this._alreadyResolved=!0}o(t,"laya.d3.resource.RenderTexture",e);var n=t.prototype;return n.recreateResource=function(){var e=ur.mainContext;this._frameBuffer=e.createFramebuffer(),this._source=e.createTexture();var t=Fs.curBindTexTarget,i=Fs.curBindTexValue;Fs.bindTexture(e,this._type,this._source),e.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var n=this._minFifter,o=this._magFifter,s=this._repeat?10497:33071,r=Th.isPOT(this._width,this._height);if(r?(this._mipmap?-1!==n||(n=9987):-1!==n||(n=9729),-1!==o||(o=9729),e.texParameteri(this._type,10241,n),e.texParameteri(this._type,10240,o),e.texParameteri(this._type,10242,s),e.texParameteri(this._type,10243,s),this._mipmap&&e.generateMipmap(this._type)):(-1!==n||(n=9729),-1!==o||(o=9729),e.texParameteri(this._type,10241,n),e.texParameteri(this._type,10240,o),e.texParameteri(this._type,10242,33071),e.texParameteri(this._type,10243,33071)),e.bindFramebuffer(36160,this._frameBuffer),e.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,this._depthStencilBuffer),e.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),this._depthStencilFormat){case 33189:e.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:e.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:e.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}e.bindFramebuffer(36160,null),t&&i&&Fs.bindTexture(e,t,i),e.bindRenderbuffer(36161,null),this.memorySize=this._width*this._height*4,this.completeCreate()},n.start=function(){ur.mainContext.bindFramebuffer(36160,this.frameBuffer),t._currentRenderTarget=this,this._alreadyResolved=!1},n.end=function(){ur.mainContext.bindFramebuffer(36160,null),t._currentRenderTarget=null,this._alreadyResolved=!0},n.getData=function(e,t,i,n){var o=ur.mainContext;o.bindFramebuffer(36160,this._frameBuffer);var s=36053===o.checkFramebufferStatus(36160);if(!s)return o.bindFramebuffer(36160,null),null;var r=new Uint8Array(this._width*this._height*4);return o.readPixels(e,t,i,n,this._surfaceFormat,this._surfaceType,r),o.bindFramebuffer(36160,null),r},n.disposeResource=function(){if(this._frameBuffer){var e=ur.mainContext;e.deleteTexture(this._source),e.deleteFramebuffer(this._frameBuffer),e.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},s(0,n,"source",function(){return this._alreadyResolved?i.superGet(Ix,this,"source"):null}),s(0,n,"frameBuffer",function(){return this._frameBuffer}),s(0,n,"depthStencilBuffer",function(){return this._depthStencilBuffer}),s(0,n,"surfaceType",function(){return this._surfaceType}),s(0,n,"depthStencilFormat",function(){return this._depthStencilFormat}),s(0,n,"surfaceFormat",function(){return this._surfaceFormat}),t._currentRenderTarget=null,t}(Ix),qS=function(e){function t(){this.simLodInfo=null,this._src=null,this._buffer=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,t.__super.call(this),this._type=3553}o(t,"laya.d3.resource.DataTexture2D",e);var r=t.prototype;return r.genDebugMipmaps=function(){var e=[];return e.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),e.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),e.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),e.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),e.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),e.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),e.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),e.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),e.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),e.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),e},r._onTextureLoaded=function(e){},r._createWebGlTexture=function(){if(!this._buffer&&!this._mipmaps)throw"create GLTextur err:no data";var e=ur.mainContext;e.getExtension("EXT_shader_texture_lod");var i=this._source=e.createTexture(),n=this._width,o=this._height,s=Fs.curBindTexTarget,r=Fs.curBindTexValue;if(Fs.bindTexture(e,this._type,i),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var a=0;e.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var l=0;l<this._mipmaps.length;l++){if(this._mipmaps[l].byteLength!=h*c*4)throw"mipmap size error  level:"+l;e.texSubImage2D(this._type,0,t.simLodRect[a++],t.simLodRect[a++],t.simLodRect[a++],t.simLodRect[a++],6408,5121,new Uint8Array(this._mipmaps[l]))}this.minFifter=9729,this.magFifter=9729}else{var h=this._width,c=this._height;for(a=0,e.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),l=0;l<this._mipmaps.length;l++){if(this._mipmaps[l].byteLength!=h*c*4)throw"mipmap size error  level:"+l;e.texImage2D(this._type,l,6408,h,c,0,6408,5121,new Uint8Array(this._mipmaps[l])),h/=2,c/=2,1>h&&(h=1),1>c&&(c=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else e.texImage2D(this._type,0,6408,n,o,0,6408,5121,new Uint8Array(this._buffer));var u=this._minFifter,d=this._magFifter,p=this._repeat?10497:33071,f=Th.isPOT(n,o);if(!f)throw"data texture must be POT";this._mipmap||this._mipmaps?-1!==u||(u=9987):-1!==u||(u=9729),-1!==d||(d=9729),e.texParameteri(this._type,10241,u),e.texParameteri(this._type,10240,d),e.texParameteri(this._type,10242,p),this._mipmaps?e.texParameteri(this._type,10243,33071):e.texParameteri(this._type,10243,p),this._mipmap&&e.generateMipmap(this._type),s&&r&&Fs.bindTexture(e,s,r),this.src&&this.src.length>0&&(this._buffer=null),f?this.memorySize=n*o*4*(1+1/3):this.memorySize=n*o*4,this._recreateLock=!1},r.recreateResource=function(){if(this._buffer||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},r.onAsynLoaded=function(e,t,i){var n;i&&(n=i[0].call(this,t)),n&&(this._width=n.width,this._height=n.height,this._buffer=n.data),this._src=e,this._size=new Qa(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},r.getPixels=function(){return new Uint8Array(this._buffer)},r.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(ur.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this.memorySize=0)},s(0,r,"src",function(){return this._src}),t.create=function(e,i,n,o,s,r){if(void 0===o&&(o=9729),void 0===s&&(s=9729),void 0===r&&(r=!0),!e||e.byteLength<i*n*4)throw"DataTexture2D create error";var a=new t;return a._buffer=e,a._width=i,a._height=n,a._mipmap=r,a._magFifter=o,a._minFifter=s,a._size=new Qa(a._width,a._height),a._conchTexture?alert("怎么给runtime传递datatexture数据"):a.activeResource(),a},t.load=function(e,n,o,s,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=9729),void 0===r&&(r=9729);var a=Dr.getFileExtension(e);if("mipmaps"===a){var l=i.loader.create(e,null,null,t,[function(e){this._mipmaps=[];var t=new Uint32Array(e);this._width=t[0];var i=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,i=1024),this._width!=i)throw console.error("现在只支持512x256的环境贴图。当前的是"+t[0]),"现在只支持512x256的环境贴图。当前的是"+t[0];this._height=t[1];for(var n=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,o=this._height,s=8;;){var r=n*o*4;if(s+r>e.byteLength)throw"load mipmaps data size error ";var a=new Uint8Array(e,s,r);if(this._mipmaps.push(a),s+=r,1==n&&1==o)break;n/=2,o/=2,1>n&&(n=1),1>o&&(o=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){l.simLodInfo=new Float32Array(40);for(var h=0;h<l.simLodInfo.length;)l.simLodInfo[h]=(t.simLodRect[h]+.5)/1024,h++,l.simLodInfo[h]=(t.simLodRect[h]+.5)/256,h++,l.simLodInfo[h]=Math.max(t.simLodRect[h]-1,.1)/1024,h++,l.simLodInfo[h]=Math.max(t.simLodRect[h]-1.5,.1)/256,h++}return l}if("number"==typeof n)return i.loader.create(e,null,null,t,[function(e){return this._width=n,this._height=o,this._buffer=e,null}]);if("function"==typeof n)return i.loader.create(e,null,null,t,[n]);throw new Error("unknown params.")},t.lodasatlas=!1,n(t,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),t}(Ix),KS=function(e){function t(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,t.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}o(t,"laya.d3.resource.models.Mesh",e);var n=t.prototype;return n._getPositions=function(){var e,t,i,n,o,s=[],r=0,a=0,l=0;if(0!==this._vertexBuffers.length){var h=this._vertexBuffers.length;for(r=0;h>r;r++){for(e=this._vertexBuffers[r],i=e.vertexDeclaration.getVertexElements(),a=0;a<i.length;a++)if(n=i[a],"vector3"===n.elementFormat&&0===n.elementUsage){t=n;break}for(o=e.getData(),a=0;a<o.length;a+=e.vertexDeclaration.vertexStride/4)l=a+t.offset/4,s.push(new rl(o[l+0],o[l+1],o[l+2]))}}else{var c=this._subMeshes.length;for(r=0;c>r;r++){var u=this._subMeshes[r];for(e=u._getVertexBuffer(),i=e.vertexDeclaration.getVertexElements(),a=0;a<i.length;a++)if(n=i[a],"vector3"===n.elementFormat&&0===n.elementUsage){t=n;break}for(o=e.getData(),a=0;a<o.length;a+=e.vertexDeclaration.vertexStride/4)l=a+t.offset/4,s.push(new rl(o[l+0],o[l+1],o[l+2]))}}return s},n._setSubMeshes=function(e){this._subMeshes=e,this._subMeshCount=e.length;for(var t=0;t<this._subMeshCount;t++)e[t]._indexInMesh=t;this._positions=this._getPositions(),this._generateBoundingObject()},n.onAsynLoaded=function(e,t,i){var n=t[0],o=t[1];mh.read(n,this,this._materials,this._subMeshes,o),this.completeCreate(),this._endLoaded()},n.getSubMesh=function(e){return this._subMeshes[e]},n.getSubMeshCount=function(){return this._subMeshes.length},n.getRenderElementsCount=function(){return this._subMeshes.length},n.getRenderElement=function(e){return this._subMeshes[e]},n.disposeResource=function(){for(var e=0;e<this._subMeshes.length;e++)this._subMeshes[e].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},s(0,n,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),s(0,n,"materials",function(){return this._materials.slice()}),t.load=function(e){return i.loader.create(e,null,null,t)},t}(Ax),XS=function(e){function t(){t.__super.call(this),this._type=34067}o(t,"laya.d3.resource.TextureCube",e);var n=t.prototype;return n._onTextureLoaded=function(e){this._images=e;for(var t=2147483647,i=2147483647,n=0;6>n;n++){var o=e[n];t=Math.min(t,o.width),i=Math.min(i,o.height)}this._width=t,this._height=i,this._size=new Qa(t,i)},n._createWebGlTexture=function(){var e=6,t=0;for(t=0;e>t;t++)if(!this._images[t])throw"create GLTextur err:no data:"+this._images[t];var i=ur.mainContext,n=this._source=i.createTexture(),o=this._width,s=this._height,r=Fs.curBindTexTarget,a=Fs.curBindTexValue;Fs.bindTexture(i,this._type,n),i.texImage2D(34069,0,6408,6408,5121,this._images[0]),i.texImage2D(34070,0,6408,6408,5121,this._images[1]),i.texImage2D(34071,0,6408,6408,5121,this._images[2]),i.texImage2D(34072,0,6408,6408,5121,this._images[3]),i.texImage2D(34073,0,6408,6408,5121,this._images[4]),i.texImage2D(34074,0,6408,6408,5121,this._images[5]);var l=this.minFifter,h=this.magFifter,c=this._repeat?10497:33071,u=Th.isPOT(o,s);for(u?(this.mipmap?-1!==l||(l=9987):-1!==l||(l=9729),-1!==h||(h=9729),i.texParameteri(this._type,10241,l),i.texParameteri(this._type,10240,h),i.texParameteri(this._type,10242,c),i.texParameteri(this._type,10243,c),this.mipmap&&i.generateMipmap(this._type)):(-1!==l||(l=9729),-1!==h||(h=9729),i.texParameteri(this._type,10241,l),i.texParameteri(this._type,10240,h),i.texParameteri(this._type,10242,33071),i.texParameteri(this._type,10243,33071)),r&&a&&Fs.bindTexture(i,r,a),t=0;6>t;t++)this._images[t].onload=null,this._images[t]=null;u?this.memorySize=o*s*4*(1+1/3)*e:this.memorySize=o*s*4*e},n.recreateResource=function(){null!=this._url&&(this._createWebGlTexture(),this.completeCreate())},n.onAsynLoaded=function(e,t,i){this._onTextureLoaded(t),this.activeResource(),this._endLoaded()},n.disposeResource=function(){this._source&&(ur.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},s(0,n,"defaulteTexture",function(){return US.grayTexture}),t.load=function(e){return i.loader.create(e,null,null,t)},t}(Ix),QS=function(e){function t(e){this._hasIndependentBound=!0,t.__super.call(this,e),this._owner.transform.off("worldmatrixneedchanged",this,this._onWorldMatNeedChange),this._cacheAnimationNodeIndex=[],this._cacheAnimationNode=[],this._localBoundingBoxCorners=r(8,null),this._owner.meshFilter.on("meshchanged",this,this._$3__onMeshChanged)}o(t,"laya.d3.core.SkinnedMeshRender",e);var i=t.prototype;return i._getCacheAnimationNodes=function(){var e=this._cacheMesh._boneNames,t=e.length;this._cacheAnimationNode.length=t,this._cacheAnimationNodeIndex.length=t;for(var i=this._cacheAnimator._avatarNodes,n=this._cacheAnimator._avatarNodeMap,o=0;t>o;o++){var s=n[e[o]];this._cacheAnimationNode[o]=s,this._cacheAnimationNodeIndex[o]=i.indexOf(s)}},i._offComputeBoneIndexToMeshEvent=function(e,t){e.loaded?t.loaded||t.off("loaded",this,this._getCacheAnimationNodes):e.off("loaded",this,this._computeBoneIndexToMeshWithAsyncMesh)},i._computeBoneIndexToMeshWithAsyncAvatar=function(){this._cacheAvatar.loaded?this._computeBoneIndexToMeshWithAsyncMesh():this._cacheAvatar.once("loaded",this,this._computeBoneIndexToMeshWithAsyncMesh)},i._computeBoneIndexToMeshWithAsyncMesh=function(){this._cacheMesh.loaded?this._getCacheAnimationNodes():this._cacheMesh.on("loaded",this,this._getCacheAnimationNodes)},i._$3__onMeshChanged=function(e,t,i){this._cacheMesh=i,t&&!t.loaded&&i.off("loaded",this,this._onMeshLoaded),i.loaded?this._onMeshLoaded(i):i.on("loaded",this,this._onMeshLoaded),this._cacheAvatar&&(t&&this._offComputeBoneIndexToMeshEvent(this._cacheAvatar,t),i&&this._computeBoneIndexToMeshWithAsyncAvatar())},i._onMeshLoaded=function(e){var t=e.subMeshCount;this._subSkinnedDatas=[],this._subSkinnedDatas.length=t;for(var i=0;t>i;i++)for(var n=this._subSkinnedDatas[i]=[],o=e.getSubMesh(i)._boneIndicesList,s=0,r=o.length;r>s;s++)n[s]=new Float32Array(16*o[s].length)},i._setCacheAnimator=function(e){this._cacheAnimator=e,this._rootBone&&(this._rootIndex=e._avatarNodes.indexOf(e._avatarNodeMap[this._rootBone]))},i._setRootBone=function(e){this._rootBone=e,this._cacheAnimator&&(this._rootIndex=this._cacheAnimator._avatarNodes.indexOf(this._cacheAnimator._avatarNodeMap[e]))},i._setCacheAvatar=function(e){this._cacheAvatar!==e&&(this._cacheMesh?(this._cacheAvatar&&this._offComputeBoneIndexToMeshEvent(this._cacheAvatar,this._cacheMesh),this._cacheAvatar=e,e&&(this._addShaderDefine(Yw.SHADERDEFINE_BONE),this._computeBoneIndexToMeshWithAsyncAvatar())):this._cacheAvatar=e)},i._calculateBoundingBox=function(){if(this._hasIndependentBound){if(this._cacheAnimator){var t=this._owner.transform,i=t.worldMatrix;if(this._cacheAnimator._canCache){var n=this._cacheAnimator._curAvatarNodeDatas;Ya.matrix4x4MultiplyMFM(this._cacheAnimator.owner.transform.worldMatrix,n[this._rootIndex],i)}else Ya.matrix4x4MultiplyMFM(this._cacheAnimator.owner.transform.worldMatrix,this._cacheAnimator._avatarNodeMap[this._rootBone].transform.getWorldMatrix(),i);t.worldMatrix=i;var o=this._cacheAnimator._avatarNodeMap[this._rootBone];null==o||null==this._localBoundBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(this._localBoundingBoxCorners)}}else e.prototype._calculateBoundingBox.call(this)},i._calculateBoundingSphere=function(){if(this._hasIndependentBound){if(this._cacheAnimator){var t=this._owner.transform,i=t.worldMatrix;if(this._cacheAnimator._canCache){var n=this._cacheAnimator._curAvatarNodeDatas;Ya.matrix4x4MultiplyMFM(this._cacheAnimator.owner.transform.worldMatrix,n[this._rootIndex],i)}else Ya.matrix4x4MultiplyMFM(this._cacheAnimator.owner.transform.worldMatrix,this._cacheAnimator._avatarNodeMap[this._rootBone].transform.getWorldMatrix(),i);t.worldMatrix=i;var o=this._cacheAnimator._avatarNodeMap[this._rootBone];null==o||null==this.localBoundSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(this.localBoundSphere)}}else e.prototype._calculateBoundingSphere.call(this)},i._updateOctreeNode=function(){var e=this._treeNode;e&&e.updateObject(this)},i._renderUpdate=function(e){var i,n=this._cacheAnimator,o=this._cacheMesh.subMeshCount,s=this._owner.transform;if(n){var r=n._canCache,a=this._cacheAnimator._curAvatarNodeDatas,l=n.owner;if(this._setShaderValueMatrix4x4(0,l._transform.worldMatrix),i=l.getProjectionViewWorldMatrix(e),this._setShaderValueMatrix4x4(1,i),this._cacheMesh&&this._cacheMesh.loaded&&this._cacheAvatar&&this._cacheAvatar.loaded){var h=0,c=0,u=this._cacheMesh._inverseBindPoses,d=this._cacheMesh._skinnedDatas;if(r)for(h=0,c=u.length;c>h;h++)Ya._mulMatrixArray(a[this._cacheAnimationNodeIndex[h]],u[h],d,16*h);else for(h=0,c=u.length;c>h;h++)Ya._mulMatrixArray(this._cacheAnimationNode[h].transform.getWorldMatrix(),u[h],d,16*h);for(h=0;o>h;h++){for(var p=this._cacheMesh.getSubMesh(h)._boneIndicesList,f=p.length,_=this._subSkinnedDatas[h],m=0;f>m;m++)t._splitAnimationDatas(p[m],d,_[m]);this._renderElements[h]._skinAnimationDatas=_}}}else this._setShaderValueMatrix4x4(0,s.worldMatrix),i=this._owner.getProjectionViewWorldMatrix(e),this._setShaderValueMatrix4x4(1,i);return ic.debugMode&&this._renderRenderableBoundBox(),!0},s(0,i,"boundingBox",function(){return this._calculateBoundingBox(),this._boundingBox}),s(0,i,"boundingSphere",function(){return this._calculateBoundingSphere(),this._boundingSphere}),s(0,i,"boundingBoxCenter",function(){var e=this.boundingBox;return rl.add(e.min,e.max,this._boundingBoxCenter),rl.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenter}),s(0,i,"localBoundBox",function(){return this._localBoundBox},function(e){this._localBoundBox=e,e.getCorners(this._localBoundingBoxCorners)}),t._splitAnimationDatas=function(e,t,i){for(var n=0,o=e.length,s=0;o>n;n++)for(var r=e[n]<<4,a=0;16>a;a++,s++)i[s]=t[r+a]},t}(Bx),jS=function(e){function t(){this._originalBoundSphere=null,this._transformBoundSphere=null,t.__super.call(this),this._needUpdate=!1}o(t,"laya.d3.component.physics.SphereCollider",e);var i=t.prototype;return i._updateCollider=function(){if(this._needUpdate){var e=NaN,t=this._owner.transform,i=t.scale;e=i.x>=i.y&&i.x>=i.z?i.x:i.y>=i.z?i.y:i.z,rl.transformCoordinate(this._originalBoundSphere.center,t.worldMatrix,this._transformBoundSphere.center),this._transformBoundSphere.radius=this._originalBoundSphere.radius*e,this._needUpdate=!1}},i._onWorldMatrixChanged=function(){this._needUpdate=!0;for(var e in this._runtimeCollisonMap)this._runtimeCollisonTestMap[e]=!0,this._runtimeCollisonMap[e]._runtimeCollisonTestMap[this.id]=!0},i._initialize=function(e){laya.d3.component.Component3D.prototype._initialize.call(this,e),this._originalBoundSphere=new hl(new rl(0,0,0),.5),this._transformBoundSphere=new hl(new rl(0,0,0),.5),e.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged),this._needUpdate=!0},i._getType=function(){return 0},i._collisonTo=function(e){switch(e._getType()){case 0:return 0!==al.sphereContainsSphere(this.boundSphere,e.boundSphere);case 1:return 0!==e.boundBox.containsSphere(this.boundSphere);case 2:var t=e;if(0!==al.sphereContainsBox(this.boundSphere,t._boundBox)){for(var i=t.mesh._positions,n=0,o=i.length;o>n;n++)if(1===al.sphereContainsPoint(this.boundSphere,i[n]))return!0;
return!1}return!1;default:throw new Error("SphereCollider:unknown collider type.")}},i._cloneTo=function(e){var t=e;t.radius=this.radius;var i=t.center;this.center.cloneTo(i),t.center=i},i.raycast=function(e,t,i){void 0===i&&(i=1.79e308),this._updateCollider();var n=this._transformBoundSphere.intersectsRayPoint(e,t.position);return-1!==n&&i>=n?(t.distance=n,t.sprite3D=this._owner,!0):(t.distance=-1,t.sprite3D=null,!1)},s(0,i,"boundSphere",function(){return this._updateCollider(),this._transformBoundSphere}),s(0,i,"radius",function(){return this._originalBoundSphere.radius},function(e){this._originalBoundSphere.radius=e}),s(0,i,"center",function(){return this._originalBoundSphere.center},function(e){this._originalBoundSphere.center=e}),t}(Ux),ZS=function(e){function t(){this._transformBoundingBox=null,this._mesh=null,t.__super.call(this),this._transformBoundingBox=new nl(new rl,new rl),this._needUpdate=!1}o(t,"laya.d3.component.physics.MeshCollider",e);var i=t.prototype;return i._updateBoundBoxCollider=function(){if(this._needUpdate){for(var e=this._owner.transform.worldMatrix,i=this._mesh.boundingBoxCorners,n=0;8>n;n++)rl.transformCoordinate(i[n],e,t._tempBoundBoxCorners[n]);nl.createfromPoints(t._tempBoundBoxCorners,this._transformBoundingBox),this._needUpdate=!1}},i._raycastMesh=function(e,i,n,o){void 0===o&&(o=1.79e308);var s=i.transform.worldMatrix,r=t._tempMatrix4x40;s.invert(r);var a=e.origin,l=e.direction,h=t._tempRay0;rl.transformCoordinate(a,r,h.origin),rl.TransformNormal(l,r,h.direction);for(var c=Number.MAX_VALUE,u=0,d=this._mesh.getRenderElementsCount();d>u;u++){var p=this._mesh.getRenderElement(u),f=p._getVertexBuffer(0),_=f.getData(),m=p._getIndexBuffer().getData(),g=t._tempRaycastHit,v=Xa.rayIntersectsPositionsAndIndices(h,_,f.vertexDeclaration,m,g);if(v){rl.transformCoordinate(g.position,s,g.position);var y=t._tempVector30;rl.subtract(a,g.position,y);var b=rl.scalarLength(y);if(o>b&&c>b){g.distance=b,g.sprite3D=i;var E=g.trianglePositions;rl.transformCoordinate(E[0],s,E[0]),rl.transformCoordinate(E[1],s,E[1]),rl.transformCoordinate(E[2],s,E[2]);var x=g.triangleNormals;return rl.transformCoordinate(x[0],s,x[0]),rl.transformCoordinate(x[1],s,x[1]),rl.transformCoordinate(x[2],s,x[2]),c=b,g.cloneTo(n),!0}return!1}}return!1},i._onWorldMatrixChanged=function(){this._needUpdate=!0},i._initialize=function(e){laya.d3.component.Component3D.prototype._initialize.call(this,e),e.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged),this._needUpdate=!0},i._getType=function(){return 2},i._collisonTo=function(e){var t=0,i=0,n=this.mesh._positions;switch(e._getType()){case 0:var o=e;if(0!==al.sphereContainsBox(o.boundSphere,this._boundBox)){for(t=0,i=n.length;i>t;t++)if(1===al.sphereContainsPoint(o.boundSphere,n[t]))return!0;return!1}return!1;case 1:var s=e;if(0!==s.boundBox.containsBoundBox(this._boundBox)){for(t=0,i=n.length;i>t;t++)if(1===s.boundBox.containsPoint(n[t]))return!0;return!1}return!1;case 2:var r=e;return 1!==al.intersectsBoxAndBox(r._boundBox,this._boundBox);default:throw new Error("MeshCollider:unknown collider type.")}},i._cloneTo=function(e){var t=e;t.mesh=this._mesh},i.raycast=function(e,t,i){if(void 0===i&&(i=1.79e308),null==this._mesh||!this._mesh.loaded)return!1;var n=al.intersectsRayAndBoxRD(e,this._boundBox);return-1!==n&&i>=n&&this._raycastMesh(e,this._owner,t,i)?!0:(t.distance=-1,t.sprite3D=null,!1)},s(0,i,"mesh",function(){return this._mesh},function(e){this._mesh=e}),s(0,i,"_boundBox",function(){return this._updateBoundBoxCollider(),this._transformBoundingBox}),n(t,["_tempRay0",function(){return this._tempRay0=new sl(new rl,new rl)},"_tempVector30",function(){return this._tempVector30=new rl},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new ol},"_tempRaycastHit",function(){return this._tempRaycastHit=new Ka},"_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new rl,new rl,new rl,new rl,new rl,new rl,new rl,new rl]}]),t}(Ux),JS=function(e){function t(){this._size=null,this._transformOrientedBoundBox=null,this.center=null,t.__super.call(this),this._needUpdate=!1}o(t,"laya.d3.component.physics.BoxCollider",e);var i=t.prototype;return i._updateCollider=function(){if(this._needUpdate){var e=this._transformOrientedBoundBox.transformation,i=this._owner.transform,n=i.rotation,o=i.scale,s=this.center.elements;0===s[0]&&0===s[1]&&0===s[2]?ol.createAffineTransformation(i.position,n,rl.ONE,e):(rl.multiply(this.center,o,t._deviationV3),rl.transformQuat(t._deviationV3,n,t._deviationV3),rl.add(i.position,t._deviationV3,t._deviationV3),ol.createAffineTransformation(t._deviationV3,n,rl.ONE,e)),this._transformOrientedBoundBox.transformation=e;var r=this._transformOrientedBoundBox.extents.elements,a=this._size.elements,l=o.elements;r[0]=.5*a[0]*l[0],r[1]=.5*a[1]*l[1],r[2]=.5*a[2]*l[2],this._needUpdate=!1}},i._onWorldMatrixChanged=function(){this._needUpdate=!0;for(var e in this._runtimeCollisonMap)this._runtimeCollisonTestMap[e]=!0,this._runtimeCollisonMap[e]._runtimeCollisonTestMap[this.id]=!0},i._initialize=function(e){laya.d3.component.Component3D.prototype._initialize.call(this,e),this._transformOrientedBoundBox=new tl(new rl,new ol),this._size=new rl,this.center=new rl,e.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged),this._needUpdate=!0},i._getType=function(){return 1},i._collisonTo=function(e){switch(e._getType()){case 0:return 0!==this.boundBox.containsSphere(e.boundSphere);case 1:return 0!==this.boundBox.containsOrientedBoundBox(e.boundBox);case 2:var t=e;if(0!==this.boundBox.containsBoundBox(t._boundBox)){for(var i=e.mesh._positions,n=0,o=i.length;o>n;n++)if(1===this.boundBox.containsPoint(i[n]))return!0;return!1}return!1;default:throw new Error("BoxCollider:unknown collider type.")}},i._cloneTo=function(e){var t=e,i=t.size;this.size.cloneTo(i),t.size=i,this.center.cloneTo(t.center)},i.raycast=function(e,t,i){void 0===i&&(i=1.79e308),this._updateCollider();var n=this._transformOrientedBoundBox.intersectsRay(e,t.position);return-1!==n&&i>=n?(t.distance=n,t.sprite3D=this._owner,!0):(t.distance=-1,t.sprite3D=null,!1)},i.setFromBoundBox=function(e){tl.createByBoundBox(e,this._transformOrientedBoundBox);var t=this._transformOrientedBoundBox.extents;this._size=new rl(2*t.x,2*t.y,2*t.z),this.center=new rl,rl.add(e.min,e.max,this.center),rl.scale(this.center,.5,this.center),this._needUpdate=!0},s(0,i,"boundBox",function(){return this._updateCollider(),this._transformOrientedBoundBox}),s(0,i,"size",function(){return this._size},function(e){this._size=e,this._needUpdate=!0}),n(t,["_deviationV3",function(){return this._deviationV3=new rl},"_obbCenterV3",function(){return this._obbCenterV3=new rl}]),t}(Ux),$S=function(e){function t(e){t.__super.call(this,64),this.defines.add(64)}o(t,"laya.webgl.shader.d2.value.TextSV",e);var i=t.prototype;return i.release=function(){t.pool[t._length++]=this,this.clear()},i.clear=function(){e.prototype.clear.call(this)},t.create=function(){return t._length?t.pool[--t._length]:new t(null)},t.pool=[],t._length=0,t}(Kx),ew=function(e){function t(){t.__super.call(this)}o(t,"laya.ui.Box",e);var n=t.prototype;return i.imps(n,{"laya.ui.IBox":!0}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e;for(var t in e){var i=this.getChildByName(t);i?i.dataSource=e[t]:this.hasOwnProperty(t)&&"function"!=typeof this[t]&&(this[t]=e[t])}}),t}(Jx),tw=function(e){function t(e){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,t.__super.call(this),this.skin=e}o(t,"laya.ui.Slider",e);var r=t.prototype;return r.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._bg&&this._bg.destroy(t),this._bar&&this._bar.destroy(t),this._progress&&this._progress.destroy(t),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},r.createChildren=function(){this.addChild(this._bg=new rw),this.addChild(this._bar=new ow)},r.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},r.onBarMouseDown=function(e){this._globalSacle||(this._globalSacle=new Ah),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=i.stage.mouseX,this._ty=i.stage.mouseY,i.stage.on("mousemove",this,this.mouseMove),i.stage.once("mouseup",this,this.mouseUp),i.stage.once("mouseout",this,this.mouseUp),this.showValueText()},r.showValueText=function(){if(this.showLabel){var e=laya.ui.Slider.label;this.addChild(e),e.textField.changeText(this._value+""),this.isVertical?(e.x=this._bar.x+20,e.y=.5*(this._bar.height-e.height)+this._bar.y):(e.y=this._bar.y-20,e.x=.5*(this._bar.width-e.width)+this._bar.x)}},r.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},r.mouseUp=function(e){i.stage.off("mousemove",this,this.mouseMove),i.stage.off("mouseup",this,this.mouseUp),i.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},r.mouseMove=function(e){var t=this._value;this.isVertical?(this._bar.y+=(i.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(i.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=i.stage.mouseX,this._ty=i.stage.mouseY;var n=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*n)/n,this._value!=t&&this.sendChangeEvent(),this.showValueText()},r.sendChangeEvent=function(e){void 0===e&&(e="change"),this.event(e),this.changeHandler&&this.changeHandler.runWith(this._value)},r.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},r.changeSize=function(){e.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},r.setSlider=function(e,t,i){this._value=-1,this._min=e,this._max=t>e?t:e,this.value=e>i?e:i>t?t:i},r.changeValue=function(){var e=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*e)/e,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var t=this._max-this._min;0===t&&(t=1),this.isVertical?(this._bar.y=(this._value-this._min)/t*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/t*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},r.onBgMouseDown=function(e){var t=this._bg.getMousePoint();this.isVertical?this.value=t.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=t.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},s(0,r,"bar",function(){return this._bar}),s(0,r,"allowClickBack",function(){return this._allowClickBack},function(e){this._allowClickBack!=e&&(this._allowClickBack=e,e?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),s(0,r,"min",function(){return this._min},function(e){this._min!=e&&(this._min=e,this.callLater(this.changeValue))}),s(0,r,"max",function(){return this._max},function(e){this._max!=e&&(this._max=e,this.callLater(this.changeValue))}),s(0,r,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):i.superSet(Jx,this,"dataSource",e)}),s(0,r,"value",function(){return this._value},function(e){if(this._value!=e){var t=this._value;this._value=e,this.changeValue(),this._value!=t&&this.sendChangeEvent()}}),s(0,r,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),s(0,r,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),s(0,r,"tick",function(){return this._tick},function(e){this._tick!=e&&(this._tick=e,this.callLater(this.changeValue))}),s(0,r,"sizeGrid",function(){return this._bg.sizeGrid},function(e){this._bg.sizeGrid=e,this._bar.sizeGrid=e,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),s(0,r,"skin",function(){return this._skin},function(e){if(this._skin!=e){this._skin=e,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var t=this._skin.replace(".png","$progress.png");Tu.getRes(t)&&(this._progress||(this.addChild(this._progress=new rw),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=t),this.setBarPoint(),this.callLater(this.changeValue)}}),n(t,["label",function(){return this.label=new iw}]),t}(Jx),iw=function(e){function t(e){this._tf=null,t.__super.call(this),void 0===e&&(e=""),Dh.defaultColor=ds.labelColor,this.text=e}o(t,"laya.ui.Label",e);var n=t.prototype;return n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._tf=null},n.createChildren=function(){this.addChild(this._tf=new fS)},n.changeText=function(e){this._tf.changeText(e)},s(0,n,"bgColor",function(){return this._tf.bgColor},function(e){this._tf.bgColor=e}),s(0,n,"underline",function(){return this._tf.underline},function(e){this._tf.underline=e}),s(0,n,"leading",function(){return this._tf.leading},function(e){this._tf.leading=e}),s(0,n,"measureWidth",function(){return this._tf.width}),s(0,n,"overflow",function(){return this._tf.overflow},function(e){this._tf.overflow=e}),s(0,n,"measureHeight",function(){return this._tf.height}),s(0,n,"stroke",function(){return this._tf.stroke},function(e){this._tf.stroke=e}),s(0,n,"width",function(){return this._width||this._tf.text?i.superGet(Jx,this,"width"):0},function(e){i.superSet(Jx,this,"width",e),this._tf.width=e}),s(0,n,"textField",function(){return this._tf}),s(0,n,"text",function(){return this._tf.text},function(e){this._tf.text!=e&&(e&&(e=ps.adptString(e+"")),this._tf.text=e,this.event("change"),this._width&&this._height||this.onCompResize())}),s(0,n,"valign",function(){return this._tf.valign},function(e){this._tf.valign=e}),s(0,n,"borderColor",function(){return this._tf.borderColor},function(e){this._tf.borderColor=e}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.text=e+"":i.superSet(Jx,this,"dataSource",e)}),s(0,n,"strokeColor",function(){return this._tf.strokeColor},function(e){this._tf.strokeColor=e}),s(0,n,"bold",function(){return this._tf.bold},function(e){this._tf.bold=e}),s(0,n,"padding",function(){return this._tf.padding.join(",")},function(e){this._tf.padding=ps.fillArray(ds.labelPadding,e,Number)}),s(0,n,"align",function(){return this._tf.align},function(e){this._tf.align=e}),s(0,n,"color",function(){return this._tf.color},function(e){this._tf.color=e}),s(0,n,"fontSize",function(){return this._tf.fontSize},function(e){this._tf.fontSize=e}),s(0,n,"font",function(){return this._tf.font},function(e){this._tf.font=e}),s(0,n,"underlineColor",function(){return this._tf.underlineColor},function(e){this._tf.underlineColor=e}),s(0,n,"italic",function(){return this._tf.italic},function(e){this._tf.italic=e}),s(0,n,"wordWrap",function(){return this._tf.wordWrap},function(e){this._tf.wordWrap=e}),s(0,n,"height",function(){return this._height||this._tf.text?i.superGet(Jx,this,"height"):0},function(e){i.superSet(Jx,this,"height",e),this._tf.height=e}),t}(Jx),nw=function(e){function t(e){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,t.__super.call(this),this._showButtons=ls.showButtons,this._touchScrollEnable=ls.touchScrollEnable,this._mouseWheelEnable=ls.mouseWheelEnable,this.skin=e,this.max=1}o(t,"laya.ui.ScrollBar",e);var n=t.prototype;return n.destroy=function(t){void 0===t&&(t=!0),this.stopScroll(),this.target=null,e.prototype.destroy.call(this,t),this.upButton&&this.upButton.destroy(t),this.downButton&&this.downButton.destroy(t),this.slider&&this.slider.destroy(t),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},n.createChildren=function(){this.addChild(this.slider=new tw),this.addChild(this.upButton=new ow),this.addChild(this.downButton=new ow)},n.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},n.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},n.onButtonMouseDown=function(e){var t=e.currentTarget===this.upButton;this.slide(t),i.timer.once(ds.scrollBarDelayTime,this,this.startLoop,[t]),i.stage.once("mouseup",this,this.onStageMouseUp)},n.startLoop=function(e){i.timer.frameLoop(1,this,this.slide,[e])},n.slide=function(e){e?this.value-=this._scrollSize:this.value+=this._scrollSize},n.onStageMouseUp=function(e){i.timer.clear(this,this.startLoop),i.timer.clear(this,this.slide)},n.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},n.changeSize=function(){e.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},n.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},n.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},n.setScroll=function(e,t,i){this.runCallLater(this.changeSize),this.slider.setSlider(e,t,i),this.slider.bar.visible=t>0,!this._hide&&this.autoHide&&(this.visible=!1)},n.onTargetMouseWheel=function(e){this.value-=e.delta*this._scrollSize,this.target=this._target},n.onTargetMouseDown=function(e){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Ah),this._lastPoint.setTo(i.stage.mouseX,i.stage.mouseY),i.timer.clear(this,this.tweenMove),Lr.clearTween(this),i.stage.once("mouseup",this,this.onStageMouseUp2),i.stage.once("mouseout",this,this.onStageMouseUp2),i.timer.frameLoop(1,this,this.loop)},n.loop=function(){var e=i.stage.mouseY,t=i.stage.mouseX;if(this._lastOffset=this.isVertical?e-this._lastPoint.y:t-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?i.stage._canvasTransform.getScaleY():i.stage._canvasTransform.getScaleX()))>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=t,this._lastPoint.y=e,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},n.onStageMouseUp2=function(e){if(i.stage.off("mouseup",this,this.onStageMouseUp2),i.stage.off("mouseout",this,this.onStageMouseUp2),i.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?Lr.to(this,{value:this.min},this.elasticBackTime,Br.sineOut,h.create(this,this.elasticOver)):this._value>this.max&&Lr.to(this,{value:this.max},this.elasticBackTime,Br.sineOut,h.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?i.stage.mouseY-this._lastPoint.y:i.stage.mouseX-this._lastPoint.x);for(var t=0,n=Math.min(this._offsets.length,3),o=0;n>o;o++)t+=this._offsets[this._offsets.length-1-o];if(this._lastOffset=t/n,t=Math.abs(this._lastOffset),2>t)return void this.event("end");t>60&&(this._lastOffset=this._lastOffset>0?60:-60);var s=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));i.timer.frameLoop(1,this,this.tweenMove,[s])}},n.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&Lr.to(this,{alpha:0},500),this.event("end")},n.tweenMove=function(e){this._lastOffset*=this.rollRatio;var t=NaN;if(e>0&&(this._lastOffset>0&&this.value<=this.min?(this._isElastic=!0,t=.5*-(this.min-e-this.value),this._lastOffset>t&&(this._lastOffset=t)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,t=.5*-(this.max+e-this.value),this._lastOffset<t&&(this._lastOffset=t))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(i.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?Lr.to(this,{value:this.min},this.elasticBackTime,Br.sineOut,h.create(this,this.elasticOver)):this._value>this.max?Lr.to(this,{value:this.max},this.elasticBackTime,Br.sineOut,h.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&Lr.to(this,{alpha:0},500)}},n.stopScroll=function(){this.onStageMouseUp2(null),i.timer.clear(this,this.tweenMove),Lr.clearTween(this)},s(0,n,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(e){this._mouseWheelEnable=e,this.target=this._target}),s(0,n,"touchScrollEnable",function(){return this._touchScrollEnable},function(e){this._touchScrollEnable=e,this.target=this._target}),s(0,n,"hide",function(){return this._hide},function(e){this._hide=e,this.visible=!e}),s(0,n,"showButtons",function(){return this._showButtons},function(e){this._showButtons=e,this.callLater(this.changeScrollBar)}),s(0,n,"max",function(){return this.slider.max},function(e){this.slider.max=e}),s(0,n,"thumbPercent",function(){return this._thumbPercent},function(e){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),e=e>=1?.99:e,this._thumbPercent=e,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*e,ds.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*e,ds.scrollBarMinNum))}),s(0,n,"scrollSize",function(){return this._scrollSize},function(e){this._scrollSize=e}),s(0,n,"sizeGrid",function(){return this.slider.sizeGrid},function(e){this.slider.sizeGrid=e}),s(0,n,"tick",function(){return this.slider.tick},function(e){this.slider.tick=e}),s(0,n,"target",function(){return this._target},function(e){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),this._target=e,e&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),s(0,n,"isVertical",function(){return this.slider.isVertical},function(e){this.slider.isVertical=e}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):i.superSet(Jx,this,"dataSource",e)}),s(0,n,"value",function(){return this._value},function(e){e!==this._value&&(this._value=e,this._isElastic||(this.slider._value!=e&&(this.slider._value=e,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),s(0,n,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),s(0,n,"min",function(){return this.slider.min},function(e){this.slider.min=e}),s(0,n,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),s(0,n,"skin",function(){return this._skin},function(e){this._skin!=e&&(this._skin=e,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),t}(Jx),ow=function(e){function t(e,i){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,t.__super.call(this),this._labelColors=ds.buttonLabelColors,this._stateNum=ds.buttonStateNum,void 0===i&&(i=""),this.skin=e,this.label=i}o(t,"laya.ui.Button",e);var r=t.prototype;return i.imps(r,{"laya.ui.ISelect":!0}),r.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(t),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},r.createChildren=function(){this.graphics=this._bitmap=new pd},r.createText=function(){this._text||(this._text=new fS,this._text.overflow=fS.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},r.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},r.onMouse=function(e){return this.toggle===!1&&this._selected?void 0:"click"===e.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=t.stateMap[e.type]))},r.changeClips=function(){if(null!=this._skin&&""!=this._skin&&" "!=this._skin){var e=Tu.getRes(this._skin);if(!e)return void console.log("lose skin",this._skin);var t=e.sourceWidth,i=e.sourceHeight/this._stateNum;e.$_GID||(e.$_GID=Dr.getGID());var n=e.$_GID+"-"+this._stateNum,o=Gr.I.get(n);if(Dr.isOkTextureList(o)||(o=null),o)this._sources=o;else{if(this._sources=[],1===this._stateNum)this._sources.push(e);else for(var s=0;s<this._stateNum;s++)this._sources.push(Vu.createFromTexture(e,0,i*s,t,i));Gr.I.set(n,this._sources)}this._autoSize?(this._bitmap.width=this._width||t,this._bitmap.height=this._height||i,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=t)}},r.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var e=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[e]),this.label&&(this._text.color=this._labelColors[e],this._strokeColors&&(this._text.strokeColor=this._strokeColors[e]))},r._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},s(0,r,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.label=e+"":i.superSet(Jx,this,"dataSource",e)}),s(0,r,"width",e.prototype._$get_width,function(e){i.superSet(Jx,this,"width",e),this._autoSize&&(this._bitmap.width=e,this._text&&(this._text.width=e))}),s(0,r,"labelBold",function(){return this.createText(),this._text.bold},function(e){this.createText(),this._text.bold=e}),s(0,r,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(e){this.createText(),this._text.strokeColor=e}),s(0,r,"clickHandler",function(){return this._clickHandler},function(e){this._clickHandler=e}),s(0,r,"labelStroke",function(){return this.createText(),this._text.stroke},function(e){this.createText(),this._text.stroke=e}),s(0,r,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),s(0,r,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(e){this.createText(),this._text.padding=ps.fillArray(ds.labelPadding,e,Number)}),s(0,r,"selected",function(){return this._selected},function(e){this._selected!=e&&(this._selected=e,this.state=this._selected?2:0,this.event("change"))}),s(0,r,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(e){e?this._bitmap._offset=ps.fillArray([1,1],e,Number):this._bitmap._offset=[]}),s(0,r,"height",e.prototype._$get_height,function(e){i.superSet(Jx,this,"height",e),this._autoSize&&(this._bitmap.height=e,this._text&&(this._text.height=e))}),s(0,r,"text",function(){return this.createText(),this._text}),s(0,r,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(e){this._strokeColors=ps.fillArray(ds.buttonLabelColors,e,String),this._setStateChanged()}),s(0,r,"labelColors",function(){return this._labelColors.join(",")},function(e){this._labelColors=ps.fillArray(ds.buttonLabelColors,e,String),this._setStateChanged()}),s(0,r,"label",function(){return this._text?this._text.text:null},function(e){(this._text||e)&&(this.createText(),this._text.text!=e&&(e&&!this._text.parent&&this.addChild(this._text),this._text.text=(e+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),s(0,r,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e){this._bitmap.sizeGrid=ps.fillArray(ds.defaultSizeGrid,e,Number)}),s(0,r,"state",function(){return this._state},function(e){this._state!=e&&(this._state=e,this._setStateChanged())}),s(0,r,"labelAlign",function(){return this.createText(),this._text.align},function(e){this.createText(),this._text.align=e}),s(0,r,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),s(0,r,"labelSize",function(){return this.createText(),this._text.fontSize},function(e){this.createText(),this._text.fontSize=e}),s(0,r,"labelFont",function(){return this.createText(),this._text.font},function(e){this.createText(),this._text.font=e}),s(0,r,"stateNum",function(){return this._stateNum},function(e){"string"==typeof e&&(e=parseInt(e)),this._stateNum!=e&&(this._stateNum=1>e?1:e>3?3:e,this.callLater(this.changeClips))}),s(0,r,"skin",function(){return this._skin},function(e){this._skin!=e&&(this._skin=e,this.callLater(this.changeClips),this._setStateChanged())}),n(t,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),t}(Jx),sw=function(e){function t(e){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,t.__super.call(this),this.skin=e}o(t,"laya.ui.ProgressBar",e);var n=t.prototype;return n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._bg&&this._bg.destroy(t),this._bar&&this._bar.destroy(t),
this._bg=this._bar=null,this.changeHandler=null},n.createChildren=function(){this.addChild(this._bg=new rw),this.addChild(this._bar=new rw),this._bar._bitmap.autoCacheCmd=!1},n.changeValue=function(){if(this.sizeGrid){var e=this.sizeGrid.split(","),t=Number(e[3]),i=Number(e[1]),n=this.width-t-i,o=n*this._value;this._bar.width=t+i+o,this._bar.visible=this._bar.width>t+i}else this._bar.width=this.width*this._value},s(0,n,"sizeGrid",function(){return this._bg.sizeGrid},function(e){this._bg.sizeGrid=this._bar.sizeGrid=e}),s(0,n,"bg",function(){return this._bg}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):i.superSet(Jx,this,"dataSource",e)}),s(0,n,"value",function(){return this._value},function(e){this._value!=e&&(e=e>1?1:0>e?0:e,this._value=e,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(e))}),s(0,n,"measureHeight",function(){return this._bg.height}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(Jx,this,"height",e),this._bg.height=this._height,this._bar.height=this._height}),s(0,n,"bar",function(){return this._bar}),s(0,n,"measureWidth",function(){return this._bg.width}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(Jx,this,"width",e),this._bg.width=this._width,this.callLater(this.changeValue)}),s(0,n,"skin",function(){return this._skin},function(e){this._skin!=e&&(this._skin=e,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),t}(Jx),rw=function(e){function t(e){this._bitmap=null,this._skin=null,this._group=null,t.__super.call(this),this.skin=e}o(t,"laya.ui.Image",e);var n=t.prototype;return n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null},n.dispose=function(){this.destroy(!0),i.loader.clearRes(this._skin)},n.createChildren=function(){this.graphics=this._bitmap=new pd,this._bitmap.autoCacheCmd=!1},n.setSource=function(e,t){e===this._skin&&t&&(this.source=t,this.onCompResize())},s(0,n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e){this._bitmap.sizeGrid=ps.fillArray(ds.defaultSizeGrid,e,Number)}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(Jx,this,"height",e),this._bitmap.height=0==e?1e-7:e}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"string"==typeof e?this.skin=e:i.superSet(Jx,this,"dataSource",e)}),s(0,n,"source",function(){return this._bitmap.source},function(e){this._bitmap&&(this._bitmap.source=e,this.event("loaded"),this.repaint())}),s(0,n,"measureHeight",function(){return this._bitmap.height}),s(0,n,"measureWidth",function(){return this._bitmap.width}),s(0,n,"group",function(){return this._group},function(e){e&&this._skin&&Tu.setGroup(this._skin,e),this._group=e}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(Jx,this,"width",e),this._bitmap.width=0==e?1e-7:e}),s(0,n,"skin",function(){return this._skin},function(e){if(this._skin!=e)if(this._skin=e,e){var t=Tu.getRes(e);t?(this.source=t,this.onCompResize()):i.loader.load(this._skin,h.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),t}(Jx),aw=function(e){function t(e,i,n){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,t.__super.call(this),void 0===i&&(i=1),void 0===n&&(n=1),this._clipX=i,this._clipY=n,this.skin=e}o(t,"laya.ui.Clip",e);var n=t.prototype;return n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},n.dispose=function(){this.destroy(!0),i.loader.clearRes(this._skin)},n.createChildren=function(){this.graphics=this._bitmap=new pd},n._onDisplay=function(e){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},n.changeClip=function(){if(this._clipChanged=!1,this._skin){var e=Tu.getRes(this._skin);e?this.loadComplete(this._skin,e):i.loader.load(this._skin,h.create(this,this.loadComplete,[this._skin]))}},n.loadComplete=function(e,t){if(e===this._skin&&t){var i=this._clipWidth||Math.ceil(t.sourceWidth/this._clipX),n=this._clipHeight||Math.ceil(t.sourceHeight/this._clipY),o=this._skin+i+n,s=Gr.I.get(o);if(Dr.isOkTextureList(s)||(s=null),s)this._sources=s;else{this._sources=[];for(var r=0;r<this._clipY;r++)for(var a=0;a<this._clipX;a++)this._sources.push(Vu.createFromTexture(t,i*a,n*r,i,n));Gr.I.set(o,this._sources)}this.index=this._index,this.event("loaded"),this.onCompResize()}},n.play=function(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),this._isPlaying=!0,this.index=e,this._toIndex=t,this._index++,i.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},n._loop=function(){this._style.visible&&this._sources&&(this._index++,this._toIndex>-1&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},n.stop=function(){this._isPlaying=!1,i.timer.clear(this,this._loop),this.event("complete")},n._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},s(0,n,"bitmap",function(){return this._bitmap}),s(0,n,"interval",function(){return this._interval},function(e){this._interval!=e&&(this._interval=e,this._isPlaying&&this.play())}),s(0,n,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),s(0,n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e){this._bitmap.sizeGrid=ps.fillArray(ds.defaultSizeGrid,e,Number)}),s(0,n,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(Jx,this,"height",e),this._bitmap.height=e}),s(0,n,"clipWidth",function(){return this._clipWidth},function(e){this._clipWidth=e,this._setClipChanged()}),s(0,n,"group",function(){return this._group},function(e){e&&this._skin&&Tu.setGroup(this._skin,e),this._group=e}),s(0,n,"clipHeight",function(){return this._clipHeight},function(e){this._clipHeight=e,this._setClipChanged()}),s(0,n,"index",function(){return this._index},function(e){this._index=e,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[e]),this.event("change")}),s(0,n,"sources",function(){return this._sources},function(e){this._sources=e,this.index=this._index,this.event("loaded")}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.index=parseInt(e):i.superSet(Jx,this,"dataSource",e)}),s(0,n,"clipY",function(){return this._clipY},function(e){this._clipY=e||1,this._setClipChanged()}),s(0,n,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),s(0,n,"clipX",function(){return this._clipX},function(e){this._clipX=e||1,this._setClipChanged()}),s(0,n,"autoPlay",function(){return this._autoPlay},function(e){this._autoPlay!=e&&(this._autoPlay=e,e?this.play():this.stop())}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(Jx,this,"width",e),this._bitmap.width=e}),s(0,n,"isPlaying",function(){return this._isPlaying},function(e){this._isPlaying=e}),s(0,n,"skin",function(){return this._skin},function(e){this._skin!=e&&(this._skin=e,e?this._setClipChanged():this._bitmap.source=null)}),t}(Jx),lw=function(e){function t(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,t.__super.call(this)}o(t,"laya.ui.ColorPicker",e);var n=t.prototype;return n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._colorPanel&&this._colorPanel.destroy(t),this._colorButton&&this._colorButton.destroy(t),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},n.createChildren=function(){this.addChild(this._colorButton=new ow),this._colorPanel=new ew,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new Bd),this._colorPanel.addChild(this._colorBlock=new Bd),this._colorPanel.addChild(this._colorInput=new fw)},n.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},n.onPanelMouseDown=function(e){e.stopPropagation()},n.changePanel=function(){this._panelChanged=!1;var e=this._colorPanel.graphics;e.clear(),e.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,e=this._colorTiles.graphics,e.clear();for(var t=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],i=0;12>i;i++)for(var n=0;20>n;n++){var o=0;o=0===n?t[i]:1===n?0:51*(((3*i+n/6)%3<<0)+3*(i/6<<0))<<16|n%6*51<<8|(i<<0)%6*51;var s=ps.toColor(o);this._colors.push(s);var r=n*this._gridSize,a=i*this._gridSize;e.drawRect(r,a,this._gridSize,this._gridSize,s,"#000000")}},n.onColorButtonClick=function(e){this._colorPanel.parent?this.close():this.open()},n.open=function(){var e=this.localToGlobal(new Ah),t=e.x+this._colorPanel.width<=i.stage.width?e.x:i.stage.width-this._colorPanel.width,n=e.y+this._colorButton.height;n=n+this._colorPanel.height<=i.stage.height?n:e.y-this._colorPanel.height,this._colorPanel.pos(t,n),this._colorPanel.zOrder=1001,i._currentStage.addChild(this._colorPanel),i.stage.on("mousedown",this,this.removeColorBox)},n.close=function(){i.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},n.removeColorBox=function(e){this.close()},n.onColorFieldKeyDown=function(e){13==e.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),e.stopPropagation())},n.onColorInputChange=function(e){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},n.onColorTilesClick=function(e){this.selectedColor=this.getColorByMouse(),this.close()},n.onColorTilesMouseMove=function(e){this._colorInput.focus=!1;var t=this.getColorByMouse();this._colorInput.text=t,this.drawBlock(t)},n.getColorByMouse=function(){var e=this._colorTiles.getMousePoint(),t=Math.floor(e.x/this._gridSize),i=Math.floor(e.y/this._gridSize);return this._colors[20*i+t]},n.drawBlock=function(e){var t=this._colorBlock.graphics;t.clear();var i=e?e:"#ffffff";t.drawRect(0,0,50,20,i,this._borderColor),e||t.drawLine(0,0,50,20,"#ff0000")},n.changeColor=function(){var e=this.graphics;e.clear();var t=this._selectedColor||"#000000";e.drawRect(0,0,this._colorButton.width,this._colorButton.height,t)},n._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},s(0,n,"inputBgColor",function(){return this._inputBgColor},function(e){this._inputBgColor=e,this._setPanelChanged()}),s(0,n,"inputColor",function(){return this._inputColor},function(e){this._inputColor=e,this._setPanelChanged()}),s(0,n,"bgColor",function(){return this._bgColor},function(e){this._bgColor=e,this._setPanelChanged()}),s(0,n,"skin",function(){return this._colorButton.skin},function(e){this._colorButton.skin=e,this.changeColor()}),s(0,n,"borderColor",function(){return this._borderColor},function(e){this._borderColor=e,this._setPanelChanged()}),s(0,n,"selectedColor",function(){return this._selectedColor},function(e){this._selectedColor!=e&&(this._selectedColor=this._colorInput.text=e,this.drawBlock(e),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",ms.EMPTY.setTo("change",this,this)))}),t}(Jx),hw=function(e){function t(e,i){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,t.__super.call(this),this._itemColors=ds.comboBoxItemColors,this.skin=e,this.labels=i}o(t,"laya.ui.ComboBox",e);var n=t.prototype;return n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._button&&this._button.destroy(t),this._list&&this._list.destroy(t),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},n.createChildren=function(){this.addChild(this._button=new ow),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},n._createList=function(){this._list=new Pw,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},n._setListEvent=function(e){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=h.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},n.onListDown=function(e){e.stopPropagation()},n.onScrollBarDown=function(e){e.stopPropagation()},n.onButtonMouseDown=function(e){this.callLater(this.switchTo,[!this._isOpen])},n.changeList=function(){this._listChanged=!1;var e=this.width-2,t=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:e,height:this._itemHeight,fontSize:this._itemSize,color:t}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},n.onlistItemMouse=function(e,t){var i=e.type;if("mouseover"===i||"mouseout"===i){if(this._isCustomList)return;var n=this._list.getCell(t);if(!n)return;var o=n.getChildByName("label");o&&("mouseover"===i?(o.bgColor=this._itemColors[0],o.color=this._itemColors[1]):(o.bgColor=null,o.color=this._itemColors[2]))}else"click"===i&&(this.selectedIndex=t,this.isOpen=!1)},n.switchTo=function(e){this.isOpen=e},n.changeOpen=function(){this.isOpen=!this._isOpen},n.changeItem=function(){if(this._itemChanged=!1,this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var e=this._list.graphics;e.clear(),e.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}var t=this._list.array||[];t.length=0;for(var i=0,n=this._labels.length;n>i;i++)t.push({label:this._labels[i]});this._list.height=this._listHeight,this._list.array=t},n.changeSelected=function(){this._button.label=this.selectedLabel},n._onStageMouseWheel=function(e){this._list&&!this._list.contains(e.target)&&this.removeList(null)},n.removeList=function(e){i.stage.off("mousedown",this,this.removeList),i.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},s(0,n,"stateNum",function(){return this._button.stateNum},function(e){this._button.stateNum=e}),s(0,n,"labelFont",function(){return this._button.text.font},function(e){this._button.text.font=e}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(Jx,this,"height",e),this._button.height=this._height}),s(0,n,"labelBold",function(){return this._button.text.bold},function(e){this._button.text.bold=e}),s(0,n,"labelSize",function(){return this._button.text.fontSize},function(e){this._button.text.fontSize=e}),s(0,n,"list",function(){return this._list||this._createList(),this._list},function(e){e&&(e.removeSelf(),this._isCustomList=!0,this._list=e,this._setListEvent(e),this._itemHeight=e.getCell(0).height+e.spaceY)}),s(0,n,"isOpen",function(){return this._isOpen},function(e){if(this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Ah.TEMP.setTo(0,0)),n=t.y+this._button.height;n=n+this._listHeight<=i.stage.height?n:t.y-this._listHeight,this._list.pos(t.x,n),this._list.zOrder=1001,i._currentStage.addChild(this._list),i.stage.once("mousedown",this,this.removeList),i.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),s(0,n,"button",function(){return this._button}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=parseInt(e):e instanceof Array?this.labels=e.join(","):i.superSet(Jx,this,"dataSource",e)}),s(0,n,"scrollBar",function(){return this.list.scrollBar}),s(0,n,"selectedIndex",function(){return this._selectedIndex},function(e){this._selectedIndex!=e&&(this._selectedIndex=e,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[ms.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),s(0,n,"itemSize",function(){return this._itemSize},function(e){this._itemSize=e,this._listChanged=!0}),s(0,n,"sizeGrid",function(){return this._button.sizeGrid},function(e){this._button.sizeGrid=e}),s(0,n,"labelColors",function(){return this._button.labelColors},function(e){this._button.labelColors!=e&&(this._button.labelColors=e)}),s(0,n,"visibleNum",function(){return this._visibleNum},function(e){this._visibleNum=e,this._listChanged=!0}),s(0,n,"selectHandler",function(){return this._selectHandler},function(e){this._selectHandler=e}),s(0,n,"selectedLabel",function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(e){this.selectedIndex=this._labels.indexOf(e)}),s(0,n,"measureHeight",function(){return this._button.height}),s(0,n,"labels",function(){return this._labels.join(",")},function(e){this._labels.length>0&&(this.selectedIndex=-1),e?this._labels=e.split(","):this._labels.length=0,this._itemChanged=!0}),s(0,n,"measureWidth",function(){return this._button.width}),s(0,n,"scrollBarSkin",function(){return this._scrollBarSkin},function(e){this._scrollBarSkin=e}),s(0,n,"itemColors",function(){return String(this._itemColors)},function(e){this._itemColors=ps.fillArray(this._itemColors,e,String),this._listChanged=!0}),s(0,n,"labelPadding",function(){return this._button.text.padding.join(",")},function(e){this._button.text.padding=ps.fillArray(ds.labelPadding,e,Number)}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(Jx,this,"width",e),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),s(0,n,"skin",function(){return this._button.skin},function(e){this._button.skin!=e&&(this._button.skin=e,this._listChanged=!0)}),t}(Jx),cw=function(e){function t(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,t.__super.call(this),null==t._sortIndexFun&&(t._sortIndexFun=Ih.sortByKey("index",!1,!0))}o(t,"laya.display.FrameAnimation",e);var i=t.prototype;return i._setUp=function(e,t){this._labels=null,this._animationNewFrames=null,this._targetDic=e,this._animationData=t,this.interval=1e3/t.frameRate,t.parsed?(this._count=t.count,this._labels=t.labels,this._animationNewFrames=t.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),t.parsed=!0,t.labels=this._labels,t.count=this._count,t.animationNewFrames=this._animationNewFrames},i.clear=function(){e.prototype.clear.call(this),this._targetDic=null,this._animationData=null},i._displayToIndex=function(e){if(this._animationData){0>e&&(e=0),e>this._count&&(e=this._count);var t=this._animationData.nodes,i=0,n=t.length;for(i=0;n>i;i++)this._displayNodeToFrame(t[i],e)}},i._displayNodeToFrame=function(e,t,i){i||(i=this._targetDic);var n=i[e.target];if(n){var o,s,r,a=e.frames,l=e.keys,h=0,c=l.length;for(h=0;c>h;h++)o=l[h],s=a[o],r=s.length>t?s[t]:s[s.length-1],n[o]=r}},i._calculateDatas=function(){if(this._animationData){var e,t=this._animationData.nodes,i=0,n=t.length;for(this._count=0,i=0;n>i;i++)e=t[i],this._calculateNodeKeyFrames(e);this._count+=1}},i._calculateNodeKeyFrames=function(e){var i,n,o=e.keyframes,s=e.target;e.frames||(e.frames={}),e.keys?e.keys.length=0:e.keys=[],e.initValues||(e.initValues={});for(i in o)n=o[i],e.frames[i]||(e.frames[i]=[]),this._targetDic&&this._targetDic[s]&&(e.initValues[i]=this._targetDic[s][i]),n.sort(t._sortIndexFun),e.keys.push(i),this._calculateNodePropFrames(n,e.frames[i],i,s)},i.resetToInitState=function(){if(this._targetDic&&this._animationData){var e,t,i=this._animationData.nodes,n=0,o=i.length;for(n=0;o>n;n++)if(e=i[n],t=e.initValues){var s=this._targetDic[e.target];if(s){var r;for(r in t)s[r]=t[r]}}}},i._calculateNodePropFrames=function(e,t,i,n){var o=0,s=e.length-1;for(t.length=e[s].index+1,o=0;s>o;o++)this._dealKeyFrame(e[o]),this._calculateFrameValues(e[o],e[o+1],t);0==s&&(t[e[0].index]=e[0].value,this._animationNewFrames&&(this._animationNewFrames[e[0].index]=!0)),this._dealKeyFrame(e[o])},i._dealKeyFrame=function(e){e.label&&""!=e.label&&this.addLabel(e.label,e.index)},i._calculateFrameValues=function(e,t,i){var n,o=0,s=e.index,r=t.index,a=e.value,l=t.value-e.value,h=r-s;if(r>this._count&&(this._count=r),e.tween)for(n=Br[e.tweenMethod],null==n&&(n=Br.linearNone),o=s;r>o;o++)i[o]=n(o-s,a,l,h),this._animationNewFrames&&(this._animationNewFrames[o]=!0);else for(o=s;r>o;o++)i[o]=a;this._animationNewFrames&&(this._animationNewFrames[e.index]=!0,this._animationNewFrames[t.index]=!0),i[t.index]=t.value},t._sortIndexFun=null,t}(uS),uw=function(e){function t(){this.contextHeight=NaN,this.contextWidth=NaN,t.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}o(t,"laya.html.dom.HTMLDivElement",e);var n=t.prototype;return n.appendHTML=function(e){try{Xr.parse(this,e,this.URI),this.layout()}catch(t){as.error(this,"appendHTML",e),this.innerHTML=""}},n._addChildsToLayout=function(e){var t=this._getWords();if(null==t&&0==this._childs.length)return!1;t&&t.forEach(function(t){e.push(t)});for(var i=!0,n=0,o=this._childs.length;o>n;n++){var s=this._childs[n];i?i=!1:e.push(null),s._addToLayout(e)}return!0},n._addToLayout=function(e){this.layout()},n.layout=function(){if(this.style){this.style._type|=512;var e=Qr.layout(this);if(e){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new Ch);var t=this._$P.mHtmlBounds;t.x=t.y=0,t.width=this.contextWidth=e[0],t.height=this.contextHeight=e[1],this.setBounds(t)}}},s(0,n,"height",function(){return this._height?this._height:this.contextHeight},e.prototype._$set_height),s(0,n,"width",function(){return this._width?this._width:this.contextWidth},function(e){var t=!1;t=0===e?e!=this._width:e!=this.width,i.superSet(dS,this,"width",e),t&&this.layout()}),s(0,n,"innerHTML",null,function(e){this.destroyChildren(),this.appendHTML(e)}),t}(dS),dw=(function(e){function t(){this._tex=null,this._url=null,this._renderArgs=[],t.__super.call(this),this.style.block=!0}o(t,"laya.html.dom.HTMLImageElement",e);var i=t.prototype;return i._addToLayout=function(e){!this._style.absolute&&e.push(this)},i.render=function(e,t,i){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(Nr.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,e.ctx.drawTexture2(t,i,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},i.layaoutCallNative=function(){var e=0;if(this._childs&&(e=this._childs.length)>0)for(var t=0;e>t;t++)this._childs[t].layaoutCallNative&&this._childs[t].layaoutCallNative()},s(0,i,"src",null,function(e){function t(){if(i._style){var e=i._style;e.widthed(i)?-1:i._tex.width,e.heighted(i)?-1:i._tex.height;e.widthed(i)||i._width==i._tex.width||(i.width=i._tex.width,i.parent&&i.parent._layoutLater()),e.heighted(i)||i._height==i._tex.height||(i.height=i._tex.height,i.parent&&i.parent._layoutLater()),Ns.isConchApp&&(i._renderArgs[0]=i._tex,i._renderArgs[1]=i.x,i._renderArgs[2]=i.y,i._renderArgs[3]=i.width||i._tex.width,i._renderArgs[4]=i.height||i._tex.height,i.graphics.drawTexture(i._tex,0,0,i._renderArgs[3],i._renderArgs[4])),i.repaint(),i.parentRepaint()}}var i=this;if(e=this.formatURL(e),this._url!=e){this._url=e;var n=this._tex=Tu.getRes(e);n||(this._tex=n=new Vu,n.load(e),Tu.cacheRes(e,n)),n.loaded?t():n.on("loaded",null,t)}}),t}(dS),function(e){function t(){this.all=new Array,this.styleSheets=kd.styleSheets,t.__super.call(this)}o(t,"laya.html.dom.HTMLDocument",e);var i=t.prototype;return i.getElementById=function(e){return this.all[e]},i.setElementById=function(e,t){this.all[e]=t},n(t,["document",function(){return this.document=new t}]),t}(dS)),pw=(function(e){function t(){t.__super.call(this),this.visible=!1}o(t,"laya.html.dom.HTMLStyleElement",e);var i=t.prototype;return s(0,i,"text",e.prototype._$get_text,function(e){kd.parseCSS(e,null)}),t}(dS),function(e){function t(){t.__super.call(this),this.style.lineElement=!0,this.style.block=!0}return o(t,"laya.html.dom.HTMLBrElement",e),t}(dS),function(e){function t(){this._frames=null,this._url=null,t.__super.call(this),this._setControlNode(this)}o(t,"laya.display.Animation",e);var n=t.prototype;return n.destroy=function(e){void 0===e&&(e=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,e),this._frames=null,this._labels=null},n.play=function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=!0),void 0===i&&(i=""),void 0===n&&(n=!0),i&&this._setFramesFromCache(i,n),this._isPlaying=!0,this.index="string"==typeof e?this._getFrameByLabel(e):e,this.loop=t,this._actionName=i,this._isReverse=1==this.wrapMode,this._frames&&this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},n._setFramesFromCache=function(e,i){if(void 0===i&&(i=!1),this._url&&(e=this._url+"#"+e),e&&t.framesMap[e]){var n;return n=t.framesMap[e],n instanceof Array?(this._frames=t.framesMap[e],this._count=this._frames.length):(n.nodeRoot&&(t.framesMap[e]=this._parseGraphicAnimationByData(n),n=t.framesMap[e]),this._frames=n.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=n.interval),this._labels=this._copyLabels(n.labels)),!0}return i&&console.log("ani not found:",e),!1},n._copyLabels=function(e){if(!e)return null;var t;t={};var i;for(i in e)t[i]=Dr.copyArray([],e[i]);return t},n._frameLoop=function(){this._style.visible&&this._style.alpha>.01&&e.prototype._frameLoop.call(this)},n._displayToIndex=function(e){this._frames&&(this.graphics=this._frames[e])},n.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},n.loadImages=function(e,i){return void 0===i&&(i=""),this._url="",this._setFramesFromCache(i)||(this.frames=t.framesMap[i]?t.framesMap[i]:t.createFrames(e,i)),this},n.loadAtlas=function(e,n,o){function s(i){e===i&&(r.frames=t.framesMap[o]?t.framesMap[o]:t.createFrames(e,o),n&&n.run())}void 0===o&&(o=""),this._url="";var r=this;return r._setFramesFromCache(o)||(Tu.getAtlas(e)?s(e):i.loader.load(e,h.create(null,s,[e]),null,"atlas")),this},n.loadAnimation=function(e,t,n){this._url=e;var o=this;return this._actionName||(this._actionName=""),o._setFramesFromCache(this._actionName)?(o._setFramesFromCache(this._actionName,!0),this.index=0,t&&t.run()):!n||Tu.getAtlas(n)?this._loadAnimationData(e,t,n):i.loader.load(n,h.create(this,this._loadAnimationData,[e,t,n]),null,"atlas"),this},n._loadAnimationData=function(e,n,o){function s(i){if(Tu.getRes(i)&&e===i){var o;if(t.framesMap[e+"#"])a._setFramesFromCache(r._actionName,!0),r.index=0,r._checkResumePlaying();else{var s=a._parseGraphicAnimation(Tu.getRes(e));if(!s)return;var l,h=s.animationList,c=0,u=h.length;for(c=0;u>c;c++)o=h[c],t.framesMap[e+"#"+o.name]=o,l||(l=o);l&&(t.framesMap[e+"#"]=l,a._setFramesFromCache(r._actionName,!0),r.index=0),r._checkResumePlaying()}n&&n.run()}}var r=this;if(o&&!Tu.getAtlas(o))return void console.warn("atlas load fail:"+o);var a=this;Tu.getRes(e)?s(e):i.loader.load(e,h.create(null,s,[e]),null,"json"),Tu.clearRes(e)},n._parseGraphicAnimation=function(e){return Gw.parseAnimationData(e)},n._parseGraphicAnimationByData=function(e){return Gw.parseAnimationByData(e)},s(0,n,"autoAnimation",null,function(e){this.play(0,!0,e,!1)}),s(0,n,"autoPlay",null,function(e){e?this.play():this.stop()}),s(0,n,"source",null,function(e){e.indexOf(".ani")>-1?this.loadAnimation(e):e.indexOf(".json")>-1||e.indexOf("als")>-1||e.indexOf("atlas")>-1?this.loadAtlas(e):this.loadImages(e.split(","))}),s(0,n,"frames",function(){return this._frames},function(e){this._frames=e,e&&(this._count=e.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),t.createFrames=function(e,i){var n,o,s=0,r=0;if("string"==typeof e){var l=Tu.getAtlas(e);if(l&&l.length)for(n=[],s=0,r=l.length;r>s;s++)o=new a.createGraphics,o.drawTexture(Tu.getRes(l[s]),0,0),n.push(o)}else if(e instanceof Array)for(n=[],s=0,r=e.length;r>s;s++)o=new a.createGraphics,o.loadImage(e[s],0,0),n.push(o);return i&&(t.framesMap[i]=n),n},t.clearCache=function(e){var i,n=t.framesMap,o=e+"#";for(i in n)i!==e&&0!=i.indexOf(o)||delete t.framesMap[i]},t.framesMap={},t}(uS)),fw=function(e){function t(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",t.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=fS.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}o(t,"laya.display.Input",e);var r=t.prototype;return r.setSelection=function(e,t){this.focus=!0,laya.display.Input.inputElement.selectionStart=e,laya.display.Input.inputElement.selectionEnd=t},r._onUnDisplay=function(e){this.focus=!1},r._onMouseDown=function(e){this.focus=!0},r._syncInputTransform=function(){var e=this.nativeInput,n=Dr.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),o=this._width-this.padding[1]-this.padding[3],s=this._height-this.padding[0]-this.padding[2];Ns.isConchApp?(e.setScale(n.scaleX,n.scaleY),e.setSize(o,s),e.setPos(n.x,n.y)):(t.inputContainer.style.transform=t.inputContainer.style.webkitTransform="scale("+n.scaleX+","+n.scaleY+") rotate("+i.stage.canvasDegree+"deg)",e.style.width=o+"px",e.style.height=s+"px",t.inputContainer.style.left=n.x+"px",t.inputContainer.style.top=n.y+"px")},r.select=function(){this.nativeInput.select()},r._setInputMethod=function(){t.input.parentElement&&t.inputContainer.removeChild(t.input),t.area.parentElement&&t.inputContainer.removeChild(t.area),Or.onAndroid&&!Or.isMiniGame&&(laya.display.Input.input=laya.display.Input.inputElement=Or.createElement("input"),laya.display.Input._initInput(laya.display.Input.input)),t.inputElement=this._multiline?t.area:t.input,t.inputContainer.appendChild(t.inputElement),fS.RightToLeft&&(t.inputElement.style.direction="rtl")},r._focusIn=function(){laya.display.Input.isInputting=!0;var e=this.nativeInput;this._focus=!0;var t=e.style;t.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",
this._setPromptColor(),e.readOnly=!this._editable,Ns.isConchApp&&(e.setType(this._type),e.setForbidEdit(!this._editable)),e.maxLength=this._maxChars;this.padding;if(e.type=this._type,e.value=this._content,e.placeholder=this._prompt,i.stage.off("keydown",this,this._onKeyDown),i.stage.on("keydown",this,this._onKeyDown),i.stage.focus=this,this.event("focus"),Or.onPC&&e.focus(),!(Or.onMiniGame||Or.onBDMiniGame||Or.onQGMiniGame||Or.onVVMiniGame||Or.onBLMiniGame||Or.onAlipayMiniGame||Or.onTTMiniGame||Or.onHWMiniGame||Or.onTBMiniGame)){this._text;this._text=null}this.typeset(),e.setColor(this._originColor),e.setBgColor&&e.setBgColor(this.bgColor),e.setFontSize(this.fontSize),e.setFontFace(Or.onIPhone?fS._fontFamilyMap[this.font]||this.font:this.font),Ns.isConchApp&&e.setMultiAble&&e.setMultiAble(this._multiline),t.lineHeight=this.leading+this.fontSize+"px",t.fontStyle=this.italic?"italic":"normal",t.fontWeight=this.bold?"bold":"normal",t.textAlign=this.align,t.padding="0 0",this._syncInputTransform(),!Ns.isConchApp&&Or.onPC&&i.timer.frameLoop(1,this,this._syncInputTransform)},r._setPromptColor=function(){t.promptStyleDOM=Or.getElementById("promptStyle"),t.promptStyleDOM||(t.promptStyleDOM=Or.createElement("style"),t.promptStyleDOM.setAttribute("id","promptStyle"),Or.document.head.appendChild(t.promptStyleDOM)),t.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},r._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(i.superSet(fS,this,"text",this._content),i.superSet(fS,this,"color",this._originColor)):(i.superSet(fS,this,"text",this._prompt),i.superSet(fS,this,"color",this._promptColor)),i.stage.off("keydown",this,this._onKeyDown),i.stage.focus=null,this.event("blur"),Ns.isConchApp&&this.nativeInput.blur(),Or.onPC&&i.timer.clear(this,this._syncInputTransform)},r._onKeyDown=function(e){13===e.keyCode&&(Or.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},r.changeText=function(t){this._content=t,this._focus?(this.nativeInput.value=t||"",this.event("change")):e.prototype.changeText.call(this,t)},s(0,r,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(e){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),s(0,r,"type",function(){return this._type},function(e){"password"==e?this._getCSSStyle().password=!0:this._getCSSStyle().password=!1,this._type=e,Ns.isConchApp&&this.nativeInput.setType(e)}),s(0,r,"editable",function(){return this._editable},function(e){this._editable=e,Ns.isConchApp&&t.input.setForbidEdit(!e)}),s(0,r,"prompt",function(){return this._prompt},function(e){!this._text&&e&&i.superSet(fS,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?i.superSet(fS,this,"text",this._text==this._prompt?e:this._text):i.superSet(fS,this,"text",e),this._prompt=fS.langPacks&&fS.langPacks[e]?fS.langPacks[e]:e}),s(0,r,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(e){e?(e="[^"+e+"]",e.indexOf("^^")>-1&&(e=e.replace("^^","")),this._restrictPattern=new RegExp(e,"g")):this._restrictPattern=null}),s(0,r,"color",e.prototype._$get_color,function(e){this._focus&&this.nativeInput.setColor(e),i.superSet(fS,this,"color",this._content?e:this._promptColor),this._originColor=e}),s(0,r,"asPassword",function(){return this._getCSSStyle().password},function(e){this._getCSSStyle().password=e,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),s(0,r,"maxChars",function(){return this._maxChars},function(e){0>=e&&(e=1e5),this._maxChars=e}),s(0,r,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(e){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),s(0,r,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(e){i.superSet(fS,this,"color",this._originColor),e+="",this._focus?(this.nativeInput.value=e||"",this.event("change")):(this._multiline||(e=e.replace(/\r?\n/g,"")),this._content=e,e?i.superSet(fS,this,"text",e):(i.superSet(fS,this,"text",this._prompt),i.superSet(fS,this,"color",this.promptColor)))}),s(0,r,"promptColor",function(){return this._promptColor},function(e){this._promptColor=e,this._content||i.superSet(fS,this,"color",e)}),s(0,r,"focus",function(){return this._focus},function(e){var i=this.nativeInput;this._focus!==e&&(e?(i.target?i.target._focusOut():this._setInputMethod(),i.target=this,this._focusIn()):(i.target=null,this._focusOut(),Or.document.body.scrollTop=0,i.blur(),Ns.isConchApp?i.setPos(-1e4,-1e4):t.inputContainer.contains(i)&&t.inputContainer.removeChild(i)))}),s(0,r,"nativeInput",function(){return this._multiline?t.area:t.input}),s(0,r,"multiline",function(){return this._multiline},function(e){this._multiline=e,this.valign=e?"top":"middle"}),t.__init__=function(){if(t._createInputElement(),Or.onMobile){var e=!1;(Or.onMiniGame||Or.onBDMiniGame||Or.onKGMiniGame||Or.onQGMiniGame||Or.onVVMiniGame||Or.onBLMiniGame||Or.onAlipayMiniGame||Or.onQQMiniGame||Or.onTTMiniGame||Or.onHWMiniGame||Or.onTBMiniGame)&&(e=!0),Ns.canvas.addEventListener(t.IOS_IFRAME?e?"touchend":"click":"touchend",t._popupInputMethod)}},t._popupInputMethod=function(e){if(laya.display.Input.isInputting){var t=laya.display.Input.inputElement;t.focus()}},t._createInputElement=function(){t._initInput(t.area=Or.createElement("textarea")),t._initInput(t.input=Or.createElement("input")),t.inputContainer=Or.createElement("div"),t.inputContainer.style.position="absolute",t.inputContainer.style.zIndex=1e5,Or.container.appendChild(t.inputContainer),t.inputContainer.setPos=function(e,i){t.inputContainer.style.left=e+"px",t.inputContainer.style.top=i+"px"}},t._initInput=function(e){var i=e.style;i.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",i.resize="none",i.backgroundColor="transparent",i.border="none",i.outline="none",i.zIndex=1,e.addEventListener("input",t._processInputting),e.addEventListener("mousemove",t._stopEvent),e.addEventListener("mousedown",t._stopEvent),e.addEventListener("touchmove",t._stopEvent),e.setFontFace=function(t){e.style.fontFamily=t},Ns.isConchApp||(e.setColor=function(t){e.style.color=t},e.setFontSize=function(t){e.style.fontSize=t+"px"})},t._processInputting=function(e){var t=laya.display.Input.inputElement.target;if(t){var i=laya.display.Input.inputElement.value;t._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),t._restrictPattern.test(i)&&(i=i.replace(t._restrictPattern,""),laya.display.Input.inputElement.value=i)),t._text=i,t.event("input")}},t._stopEvent=function(e){"touchmove"==e.type&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},t.TYPE_TEXT="text",t.TYPE_PASSWORD="password",t.TYPE_EMAIL="email",t.TYPE_URL="url",t.TYPE_NUMBER="number",t.TYPE_RANGE="range",t.TYPE_DATE="date",t.TYPE_MONTH="month",t.TYPE_WEEK="week",t.TYPE_TIME="time",t.TYPE_DATE_TIME="datetime",t.TYPE_DATE_TIME_LOCAL="datetime-local",t.TYPE_SEARCH="search",t.input=null,t.area=null,t.inputElement=null,t.inputContainer=null,t.confirmButton=null,t.promptStyleDOM=null,t.inputHeight=45,t.isInputting=!1,t.stageMatrix=null,n(t,["IOS_IFRAME",function(){return this.IOS_IFRAME=Or.onIOS&&Or.window.top!=Or.window.self}]),t}(fS),_w=function(e){function t(e){this._render=null,this._geometryFilter=null,t.__super.call(this,e)}o(t,"laya.d3.core.RenderableSprite3D",e);var i=t.prototype;return i._addToInitStaticBatchManager=function(){},i._setBelongScene=function(t){e.prototype._setBelongScene.call(this,t),t._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},i._setUnBelongScene=function(){var t=this._scene._renderableSprite3Ds,i=t.indexOf(this);t.splice(i,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),e.prototype._setUnBelongScene.call(this)},i._update=function(e){e.owner=this,this._activeInHierarchy&&(this._updateComponents(e),this._render._updateOctreeNode(),this._lateUpdateComponents(e),Nr.spriteCount++,this._childs.length&&this._updateChilds(e))},i.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._render._destroy(),this._render=null},t.__init__=function(){t.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=t.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),t.SAHDERDEFINE_LIGHTMAP=t.shaderDefines.registerDefine("LIGHTMAP")},t.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,t.SAHDERDEFINE_LIGHTMAP=4,t.LIGHTMAPSCALEOFFSET=2,t.LIGHTMAP=3,n(t,["shaderDefines",function(){return this.shaderDefines=new ml}]),t}(mS),mw=function(e){function t(e,n){t.__super.call(this),void 0===e&&(e=.3),void 0===n&&(n=1e3),this._tempVector3=new rl,this._position=new rl,this._up=new rl,this._forward=new rl,this._right=new rl,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=Qa.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=e,this._farPlane=n,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),i.stage.on("resize",this,this._onScreenSizeChanged)}o(t,"laya.d3.core.BaseCamera",e);var r=t.prototype;return r._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var e=this.scene._cameraPool,t=e.length-1,i=0;t>i;i++)if(e[i].renderingOrder>e[t].renderingOrder){var n=e[i];e[i]=e[t],e[t]=n}},r._calculateProjectionMatrix=function(){},r._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},r._prepareCameraToRender=function(){aa._currentCameraCullingMask=this.cullingMask;var e=this._shaderValues;e.setValue(0,this.transform.position.elements),e.setValue(5,this.forward.elements),e.setValue(6,this.up.elements)},r._prepareCameraViewProject=function(e,t){var i=this._shaderValues;i.setValue(1,e.elements),i.setValue(2,t.elements)},r._renderCamera=function(e,t,i){},r.addLayer=function(e){29!==e.number&&30!=e.number&&(this.cullingMask=this.cullingMask|e.mask)},r.removeLayer=function(e){29!==e.number&&30!=e.number&&(this.cullingMask=this.cullingMask&~e.mask)},r.addAllLayers=function(){this.cullingMask=2147483647},r.removeAllLayers=function(){this.cullingMask=0|aa.getLayerByNumber(29).mask|aa.getLayerByNumber(30).mask},r.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},r.moveForward=function(e){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=e,this.transform.translate(this._tempVector3)},r.moveRight=function(e){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=e,this.transform.translate(this._tempVector3)},r.moveVertical=function(e){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=e,this.transform.translate(this._tempVector3,!1)},r._addSelfRenderObjects=function(){var e=this.scene._cameraPool,t=e.length;if(t>0){for(var i=t-1;i>=0;i--)if(this.renderingOrder<=e[i].renderingOrder){e.splice(i+1,0,this);break}}else e.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},r._clearSelfRenderObjects=function(){var e=this.scene._cameraPool;e.splice(e.indexOf(this),1)},r.destroy=function(t){void 0===t&&(t=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,i.stage.off("resize",this,this._onScreenSizeChanged),e.prototype.destroy.call(this,t)},s(0,r,"renderingOrder",function(){return this._renderingOrder},function(e){this._renderingOrder=e,this._sortCamerasByRenderingOrder()}),s(0,r,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(e){this._orthographicVerticalSize=e,this._calculateProjectionMatrix()}),s(0,r,"orthographic",function(){return this._orthographic},function(e){this._orthographic=e,this._calculateProjectionMatrix()}),s(0,r,"renderTargetSize",function(){return this._renderTargetSize},function(e){null!=this.renderTarget&&this._renderTargetSize!=e,this._renderTargetSize=e,this._calculateProjectionMatrix()}),s(0,r,"farPlane",function(){return this._farPlane},function(e){this._farPlane=e,this._calculateProjectionMatrix()}),s(0,r,"fieldOfView",function(){return this._fieldOfView},function(e){this._fieldOfView=e,this._calculateProjectionMatrix()}),s(0,r,"renderTarget",function(){return this._renderTarget},function(e){this._renderTarget=e,null!=e&&(this._renderTargetSize=e.size)}),s(0,r,"up",function(){var e=this.transform.worldMatrix.elements,t=this._up.elements;return t[0]=e[4],t[1]=e[5],t[2]=e[6],this._up}),s(0,r,"nearPlane",function(){return this._nearPlane},function(e){this._nearPlane=e,this._calculateProjectionMatrix()}),s(0,r,"right",function(){var e=this.transform.worldMatrix.elements,t=this._right.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],this._right}),s(0,r,"forward",function(){var e=this.transform.worldMatrix.elements,t=this._forward.elements;return t[0]=-e[8],t[1]=-e[9],t[2]=-e[10],this._forward}),s(0,r,"position",function(){var e=this.transform.worldMatrix.elements,t=this._position.elements;return t[0]=e[12],t[1]=e[13],t[2]=e[14],this._position}),s(0,r,"sky",function(){return this._sky},function(e){this._sky=e,e._ownerCamera=this}),t.CAMERAPOS=0,t.VIEWMATRIX=1,t.PROJECTMATRIX=2,t.VPMATRIX=3,t.VPMATRIX_NO_TRANSLATE=4,t.CAMERADIRECTION=5,t.CAMERAUP=6,t.ENVIRONMENTDIFFUSE=7,t.ENVIRONMENTSPECULAR=8,t.SIMLODINFO=9,t.DIFFUSEIRRADMATR=10,t.DIFFUSEIRRADMATG=11,t.DIFFUSEIRRADMATB=12,t.HDREXPOSURE=13,t.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",t.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",t.CLEARFLAG_SOLIDCOLOR=0,t.CLEARFLAG_SKY=1,t.CLEARFLAG_DEPTHONLY=2,t.CLEARFLAG_NONE=3,n(t,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new ol(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new ol},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new ol}]),t}(mS),gw=function(e){function t(){this._intensityColor=null,this._intensity=NaN,this._shadow=!1,this._shadowFarPlane=0,this._shadowMapSize=0,this._shadowMapCount=0,this._shadowMapPCFType=0,this._parallelSplitShadowMap=null,this._lightmapBakedType=0,this.color=null,t.__super.call(this),this._intensity=1,this._intensityColor=new rl,this.color=new rl(1,1,1),this._shadow=!1,this._shadowFarPlane=8,this._shadowMapSize=512,this._shadowMapCount=1,this._shadowMapPCFType=0,this._lightmapBakedType=t.LIGHTMAPBAKEDTYPE_REALTIME}o(t,"laya.d3.core.light.LightSprite",e);var i=t.prototype;return i._parseCustomProps=function(e,t,i,n){var o=i.color,s=this.color.elements;s[0]=o[0],s[1]=o[1],s[2]=o[2]},i._addSelfRenderObjects=function(){this.lightmapBakedType!==t.LIGHTMAPBAKEDTYPE_BAKED&&this._scene._addLight(this)},i._clearSelfRenderObjects=function(){this.lightmapBakedType!==t.LIGHTMAPBAKEDTYPE_BAKED&&this._scene._removeLight(this)},i._prepareToScene=function(e){return!1},s(0,i,"diffuseColor",function(){return console.log("LightSprite: discard property,please use color property instead."),this.color},function(e){console.log("LightSprite: discard property,please use color property instead."),this.color=e}),s(0,i,"lightmapBakedType",function(){return this._lightmapBakedType},function(e){this._lightmapBakedType!==e&&(this._lightmapBakedType=e,this._activeInHierarchy&&(e!==t.LIGHTMAPBAKEDTYPE_BAKED?this._scene._addLight(this):this._scene._removeLight(this)))}),s(0,i,"shadowPCFType",function(){return this._shadowMapPCFType},function(e){this._shadowMapPCFType=e,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setPCFType(e)}),s(0,i,"shadowPSSMCount",function(){return this._shadowMapCount},function(e){this._shadowMapCount=e,this._parallelSplitShadowMap&&(this._parallelSplitShadowMap.PSSMNum=e)}),s(0,i,"intensity",function(){return this._intensity},function(e){this._intensity=e}),s(0,i,"shadow",function(){return this._shadow},function(e){throw new Error("LightSprite: must override it.")}),s(0,i,"shadowResolution",function(){return this._shadowMapSize},function(e){this._shadowMapSize=e,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setShadowMapTextureSize(e)}),s(0,i,"shadowDistance",function(){return this._shadowFarPlane},function(e){this._shadowFarPlane=e,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setFarDistance(e)}),t.LIGHTMAPBAKEDTYPE_REALTIME=0,t.LIGHTMAPBAKEDTYPE_MIXED=1,t.LIGHTMAPBAKEDTYPE_BAKED=2,t}(mS),vw=function(e){function t(e){this._terrainRes=null,this._lightmapScaleOffset=null,t.__super.call(this),this._lightmapScaleOffset=new el(1,1,0,0),e&&(this._terrainRes=e,e.loaded?this.buildTerrain(e):e.once("loaded",this,this.buildTerrain))}o(t,"laya.d3.terrain.Terrain",e);var n=t.prototype;return n._parseCustomProps=function(e,t,i,n){this.terrainRes=Tu.getRes(t[i.dataPath]);var o=i.lightmapIndex;null!=o&&this.setLightmapIndex(o);var s=i.lightmapScaleOffset;s&&this.setLightmapScaleOffset(new el(s[0],s[1],s[2],s[3]))},n.setLightmapIndex=function(e){for(var t=0;t<this._childs.length;t++){var i=this._childs[t];i.terrainRender.lightmapIndex=e}},n.setLightmapScaleOffset=function(e){if(e){e.cloneTo(this._lightmapScaleOffset);for(var t=0;t<this._childs.length;t++){var i=this._childs[t];i.terrainRender.lightmapScaleOffset=this._lightmapScaleOffset}}},n.disableLight=function(){for(var e=0,t=this._childs.length;t>e;e++)for(var i=this._childs[e],n=0,o=i._render.sharedMaterials.length;o>n;n++){var s=i._render.sharedMaterials[n];s.disableLight()}},n.buildTerrain=function(e){for(var t=e._chunkNumX,i=e._chunkNumZ,n=e._heightData,o=0,s=0;i>s;s++)for(var r=0;t>r;r++){for(var a=new qw(r,s,e._gridSize,n._terrainHeightData,n._width,n._height,e._cameraCoordinateInverse),l=e._chunkInfos[o++],h=0;h<l.alphaMap.length;h++){var c=l.detailID[h].length,u=c>0?e._detailTextureInfos[l.detailID[h][0]].diffuseTexture:null,d=c>1?e._detailTextureInfos[l.detailID[h][1]].diffuseTexture:null,p=c>2?e._detailTextureInfos[l.detailID[h][2]].diffuseTexture:null,f=c>3?e._detailTextureInfos[l.detailID[h][3]].diffuseTexture:null,_=c>0?e._detailTextureInfos[l.detailID[h][0]].scale:null,m=c>1?e._detailTextureInfos[l.detailID[h][1]].scale:null,g=c>2?e._detailTextureInfos[l.detailID[h][2]].scale:null,v=c>3?e._detailTextureInfos[l.detailID[h][3]].scale:null;a.buildRenderElementAndMaterial(c,l.normalMap,l.alphaMap[h],u,d,p,f,e._materialInfo.ambientColor,e._materialInfo.diffuseColor,e._materialInfo.specularColor,_?_.x:1,_?_.y:1,m?m.x:1,m?m.y:1,g?g.x:1,g?g.y:1,v?v.x:1,v?v.y:1)}a.terrainRender.receiveShadow=!0,a.terrainRender.lightmapScaleOffset=this._lightmapScaleOffset,this.addChild(a)}},n.width=function(){return this._terrainRes._chunkNumX*_l.CHUNK_GRID_NUM*this._terrainRes._gridSize},n.depth=function(){return this._terrainRes._chunkNumZ*_l.CHUNK_GRID_NUM*this._terrainRes._gridSize},n.getHeightXZ=function(e,i){if(!this._terrainRes||!this._terrainRes.loaded)return NaN;if(e-=this.transform.position.x,i-=this.transform.position.z,t.__VECTOR3__||(t.__VECTOR3__=new rl),t.__VECTOR3__.elements[0]=e,t.__VECTOR3__.elements[1]=0,t.__VECTOR3__.elements[2]=i,rl.transformV3ToV3(t.__VECTOR3__,_l.__ADAPT_MATRIX_INV__,t.__VECTOR3__),e=t.__VECTOR3__.elements[0],i=t.__VECTOR3__.elements[2],0>e||e>this.width()||0>i||i>this.depth())return NaN;var n=this._terrainRes._gridSize,o=parseInt(""+e/n),s=parseInt(""+i/n),r=e-o*n,a=i-s*n,l=NaN,h=NaN,c=NaN,u=NaN,d=NaN,p=this._terrainRes._heightData;return r+a>n?(l=p._terrainHeightData[(s+1-1)*p._width+o+1],h=p._terrainHeightData[(s+1-1)*p._width+o],c=p._terrainHeightData[(s-1)*p._width+o+1],u=(n-r)/n,d=(n-a)/n,l+(h-l)*u+(c-l)*d):(l=p._terrainHeightData[Math.max(0,s-1)*p._width+o],h=p._terrainHeightData[Math.min(p._width*p._height-1,(s+1-1)*p._width+o)],c=p._terrainHeightData[Math.min(p._width*p._height-1,Math.max(0,s-1)*p._width+o+1)],u=r/n,d=a/n,l+(h-l)*d+(c-l)*u)},s(0,n,"terrainRes",null,function(e){e&&(this._terrainRes=e,e.loaded?this.buildTerrain(e):e.once("loaded",this,this.buildTerrain))}),t.load=function(e){return i.loader.create(e,null,null,t,null,1,!1)},t.RENDER_LINE_MODEL=!1,t.LOD_TOLERANCE_VALUE=4,t.LOD_DISTANCE_FACTOR=2,t.__VECTOR3__=null,t}(mS),yw=function(e){function t(e,i){this._floatArray32=null,this._vertexStride=0,t.__super.call(this),this._vertexStride=e,this._bufferUsage=i,this._bufferType=34962,Ns.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}o(t,"laya.webgl.utils.VertexBuffer2D",e);var i=t.prototype;return i.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},i.bind=function(e){e&&e._bind(),this._bind()},i.insertData=function(e,t){var i=this.getFloat32Array();i.set(e,t),this._upload=!0},i.bind_upload=function(e){e._bind_upload()||e._bind(),this._bind_upload()||this._bind()},i._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},i.disposeResource=function(){return void e.prototype.disposeResource.call(this)},i.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},s(0,i,"vertexStride",function(){return this._vertexStride}),t.create=function(e,i){return void 0===i&&(i=35048),new t(e,i)},t}(gS),bw=function(e){function t(e){this._uint8Array=null,this._uint16Array=null,void 0===e&&(e=35044),t.__super.call(this),this._bufferUsage=e,this._bufferType=34963,Ns.isFlash||(this._buffer=new ArrayBuffer(8))}o(t,"laya.webgl.utils.IndexBuffer2D",e);var i=t.prototype;return i._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},i.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},i.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},i.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},t.QuadrangleIB=null,t.create=function(e){return void 0===e&&(e=35044),new t(e)},t}(gS),Ew=function(e){function t(e,i,n,o){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,t.__super.call(this,e,i,n,o)}o(t,"laya.webgl.shader.d2.Shader2X",e);var i=t.prototype;return i.upload2dQuick1=function(e){this.upload(e,this._params2dQuick1||this._make2dQuick1())},i._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var e,t=this._params,i=0,n=t.length;n>i;i++)e=t[i],(Ns.isFlash||"size"!==e.name&&"position"!==e.name&&"texcoord"!==e.name)&&this._params2dQuick1.push(e)}return this._params2dQuick1},i.disposeResource=function(){e.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},i.upload2dQuick2=function(e){this.upload(e,this._params2dQuick2||this._make2dQuick2())},i._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var e,t=this._params,i=0,n=t.length;n>i;i++)e=t[i],(Ns.isFlash||"size"!==e.name)&&this._params2dQuick2.push(e)}return this._params2dQuick2},t.create=function(e,i,n,o){return new t(e,i,n,o)},t}(vS),xw=function(e){function t(e,i){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,t.__super.call(this),this._init_(e,i)}o(t,"laya.resource.HTMLImage",e);var i=t.prototype;return i._init_=function(e,t){this._src=e,this._source=new Or.window.Image,t&&(t.onload&&(this.onload=t.onload),t.onerror&&(this.onerror=t.onerror),t.onCreate&&t.onCreate(this)),0!=e.indexOf("data:image")&&(this._source.crossOrigin=""),e&&(this._source.src=e)},i.recreateResource=function(){var e=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var t=this;this._source=new Or.window.Image,this._source.crossOrigin="",this._source.onload=function(){return t._needReleaseAgain?(t._needReleaseAgain=!1,t._source.onload=null,void(t._source=null)):(t._source.onload=null,t.memorySize=e._w*e._h*4,t._recreateLock=!1,void t.completeCreate())},this._source.src=this._src}},i.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},i.onresize=function(){this._w=this._source.width,this._h=this._source.height},s(0,i,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(e){this._enableMerageInAtlas=e,Ns.isConchApp&&this._source&&(this._source.enableMerageInAtlas=e)}),s(0,i,"onerror",null,function(e){var t=this;this._onerror=e,this._source&&(this._source.onerror=null!=this._onerror?function(){t._onerror()}:null)}),s(0,i,"onload",null,function(e){var t=this;this._onload=e,this._source&&(this._source.onload=null!=this._onload?function(){t.onresize(),t._onload()}:null)}),t.create=function(e,i){return new t(e,i)},t}(ES),Sw=(function(e){function t(e,i,n){this._radius=NaN,this._slices=0,this._stacks=0,void 0===e&&(e=.5),void 0===i&&(i=32),void 0===n&&(n=32),t.__super.call(this),this._radius=e,this._stacks=i,this._slices=n,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}o(t,"laya.d3.resource.models.SphereMesh",e);var i=t.prototype;return i.recreateResource=function(){this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=3*this._stacks*(this._slices+1)*2;for(var e=new Uint16Array(this._numberIndices),t=wl.vertexDeclaration,i=t.vertexStride/4,n=new Float32Array(this._numberVertices*i),o=Math.PI/this._stacks,s=2*Math.PI/this._slices,r=0,a=0,l=0,h=0;h<this._stacks+1;h++)for(var c=Math.sin(h*o),u=Math.cos(h*o),d=0;d<this._slices+1;d++){var p=c*Math.sin(d*s+1*Math.PI/2),f=c*Math.cos(d*s+1*Math.PI/2);n[a+0]=p*this._radius,n[a+1]=u*this._radius,n[a+2]=f*this._radius,n[a+3]=p,n[a+4]=u,n[a+5]=f,n[a+6]=d/this._slices,n[a+7]=h/this._stacks,a+=i,h!=this._stacks-1&&(e[l++]=r+(this._slices+1),e[l++]=r,e[l++]=r+1,e[l++]=r+this._slices,e[l++]=r,e[l++]=r+(this._slices+1),r++)}this._vertexBuffer=new IS(t,this._numberVertices,35044,!0),this._indexBuffer=new AS("ushort",this._numberIndices,35044,!0),this._vertexBuffer.setData(n),this._indexBuffer.setData(e),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},s(0,i,"stacks",function(){return this._stacks},function(e){this._stacks!==e&&(this._stacks=e,this.releaseResource(),this.activeResource())}),s(0,i,"slices",function(){return this._slices},function(e){this._slices!==e&&(this._slices=e,this.releaseResource(),this.activeResource())}),s(0,i,"radius",function(){return this._radius},function(e){this._radius!==e&&(this._radius=e,this.releaseResource(),this.activeResource())}),t}(WS),function(e){function t(){this._idMap=null,this._aniList=null,this._watchMap={},t.__super.call(this)}var s;o(t,"laya.ui.View",e);var r=t.prototype;return r.createView=function(e){if(e.animations&&!this._idMap&&(this._idMap={}),t.createComp(e,this,this),e.animations){var i,n,o=[],s=e.animations,r=0,a=s.length;for(r=0;a>r;r++){switch(i=new cw,n=s[r],i._setUp(this._idMap,n),this[n.name]=i,i._setControlNode(this),n.action){case 1:i.play(0,!1);break;case 2:i.play(0,!0)}o.push(i)}this._aniList=o}this._width>0&&null==e.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},r.onEvent=function(e,t){},r.loadUI=function(e){var i=t.uiMap[e];i&&this.createView(i)},r.destroy=function(e){void 0===e&&(e=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,e)},r.changeData=function(e){var t=this._watchMap[e];if(t){console.log("change",e);for(var i=0,n=t.length;n>i;i++){var o=t[i];o.exe(this)}}},t._regs=function(){for(var e in t.uiClassMap)Ur.regClass(e,t.uiClassMap[e])},t.createComp=function(e,n,o,s){if(n=n||t.getCompInstance(e),!n)return console.warn("can not create:"+e.type),null;var r=e.child;if(r)for(var a=n instanceof laya.ui.List,l=0,h=r.length;h>l;l++){var c=r[l];if(!n.hasOwnProperty("itemRender")||"render"!=c.props.name&&"render"!==c.props.renderType)if("Graphic"==c.type)Ur.addGraphicsToSprite(c,n);else if(Ur.isDrawType(c.type))Ur.addGraphicToSprite(c,n,!0);else{if(a){var u=[],d=t.createComp(c,null,o,u);u.length&&(d._$bindData=u)}else d=t.createComp(c,null,o,s);"Script"==c.type?"owner"in d?d.owner=n:"target"in d&&(d.target=n):"mask"==c.props.renderType||"mask"==c.props.name?n.mask=d:d instanceof laya.display.Sprite&&n.addChild(d)}else n.itemRender=c}var p=e.props;for(var f in p){var _=p[f];t.eventDic[f]?_&&o&&n.on(f,o,o.onEvent,[_]):t.setCompValue(n,f,_,o,s)}return i.__typeof(n,"laya.ui.IItem")&&n.initItems(),e.compId&&o&&o._idMap&&(o._idMap[e.compId]=n),n},t.setCompValue=function(e,n,o,r,a){if("string"==typeof o&&o.indexOf("${")>-1){if(t._sheet||(t._sheet=Ur.getClass("laya.data.Table")),!t._sheet)return void console.warn("Can not find class Sheet");if(a)a.push(e,n,o);else if(r){-1==o.indexOf("].")&&(o=o.replace(".","[0]."));var l=new s(e,n,o);l.exe(r);for(var h,c,u=o.replace(/\[.*?\]\./g,".");null!=(h=t._parseWatchData.exec(u));){for(var d=h[1];null!=(c=t._parseKeyWord.exec(d));){var p=c[0],f=r._watchMap[p]||(r._watchMap[p]=[]);f.push(l),t._sheet.I.notifer.on(p,r,r.changeData,[p])}f=r._watchMap[d]||(r._watchMap[d]=[]),f.push(l),t._sheet.I.notifer.on(d,r,r.changeData,[d])}}}else if("var"===n&&r)r[o]=e;else if("onClick"==n){var _=i._runScript("(function(){"+o+"})");e.on("click",r,_)}else e[n]="true"===o?!0:"false"===o?!1:o},t.getCompInstance=function(e){var n,o=e.props?e.props.runtime:null;return n=o?t.viewClassMap[o]||t.uiClassMap[o]||i.__classmap[o]:t.uiClassMap[e.type],e.props&&e.props.hasOwnProperty("renderType")&&"instance"==e.props.renderType?n.instance:n?new n:null},t.regComponent=function(e,i){t.uiClassMap[e]=i,Ur.regClass(e,i)},t.regViewRuntime=function(e,i){t.viewClassMap[e]=i},t.uiMap={},t.viewClassMap={},t._sheet=null,n(t,["uiClassMap",function(){return this.uiClassMap={ViewStack:Tw,LinkButton:ow,TextArea:HC,ColorPicker:lw,Box:ew,Button:ow,CheckBox:kw,Clip:aw,ComboBox:hw,Component:Jx,HScrollBar:Ow,HSlider:Lw,Image:rw,Label:iw,List:Pw,Panel:Nw,ProgressBar:sw,Radio:Dw,RadioGroup:BC,ScrollBar:nw,Slider:tw,Tab:VC,TextInput:Vw,View:t,VScrollBar:Bw,VSlider:Mw,Tree:Rw,HBox:FC,VBox:GC,Sprite:Bd,Animation:pw,Text:fS,FontClip:Fw}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),t.__init$=function(){t._regs(),s=function(){function e(e,t,i){this.comp=null,this.prop=null,this.value=null,this.comp=e,this.prop=t,this.value=i}o(e,"");var t=e.prototype;return t.exe=function(e){var t=ps.getBindFun(this.value);this.comp[this.prop]=t.call(this,e)},e}()},t}(ew)),ww=function(e){function t(){this.distance=20,t.__super.call(this),this.sp=new Bd,this.label=new iw,this.label.fontSize=32,this.label.bold=!0,this.label.color="#fbf8f8",this.addChild(this.sp),this.addChild(this.label),this.zOrder=1e7}o(t,"modules.guide.view.BubbleBt",e);var n=t.prototype;return n.show=function(e,t,n,o){void 0===o&&(o=!0),this.label.width=0,this.label.wordWrap=!1,this.label.text=t,this.label.width+50>this.stage.width&&(this.label.wordWrap=!0,this.label.leading=5,this.label.width=600),this.sp.graphics.clear();var s=e.parent.localToGlobal(new Ah(e.x,e.y)),r=s.y,a=i.stage.height,l=25;
Lr.clearAll(this),this.label.x=e.width/2-this.label.width/2;var h=e.width/2,c=s.x+e.width/2+this.label.width/2+50,u=s.x+e.width/2-this.label.width/2-50;c>i.stage.width?this.label.x=this.label.x-(c-i.stage.width):0>u&&(this.label.x-=u),this.sp.x=h,r>a/2?(this.label.y=-(this.label.height+100)/2-this.label.height/2,o?(this.sp.graphics.drawPoly(0,0,[0,0,25,-25,this.label.x+this.label.width+l-h,-25,this.label.x+this.label.width+l-h,-this.label.height-100,this.label.x-h-l,-this.label.height-100,this.label.x-h-l,-25,-25,-25,0,0],"#4f4f4f"),this.sp.graphics.drawLines(0,0,[0,0,25,-25,this.label.x+this.label.width+l-h,-25,this.label.x+this.label.width+l-h,-this.label.height-100,this.label.x-h-l,-this.label.height-100,this.label.x-h-l,-25,-25,-25,0,0],"#fbf8f8")):(this.sp.graphics.drawPoly(0,0,[this.label.x+this.label.width+l-h,-25,this.label.x+this.label.width+l-h,-this.label.height-100,this.label.x-h-l,-this.label.height-100,this.label.x-h-l,-25,this.label.x+this.label.width+l-h,-25],"#4f4f4f"),this.sp.graphics.drawLines(0,0,[this.label.x+this.label.width+l-h,-25,this.label.x+this.label.width+l-h,-this.label.height-100,this.label.x-h-l,-this.label.height-100,this.label.x-h-l,-25,this.label.x+this.label.width+l-h,-25],"#fbf8f8")),this.distance=-20):(this.label.y=e.height+(this.label.height+100)/2,o?(this.sp.graphics.drawPoly(0,e.height,[0,0,25,25,this.label.x+this.label.width+l-h,25,this.label.x+this.label.width+l-h,this.label.height+100,this.label.x-h-l,this.label.height+100,this.label.x-h-l,25,-25,25,0,0],"#4f4f4f"),this.sp.graphics.drawLines(0,e.height,[0,0,25,25,this.label.x+this.label.width+l-h,25,this.label.x+this.label.width+l-h,this.label.height+100,this.label.x-h-l,this.label.height+100,this.label.x-h-l,25,-25,25,0,0],"#fbf8f8")):(this.sp.graphics.drawPoly(0,e.height,[this.label.x+this.label.width+l-h,25,this.label.x+this.label.width+l-h,this.label.height+100,this.label.x-h-l,this.label.height+100,this.label.x-h-l,25,this.label.x+this.label.width+l-h,25],"#4f4f4f"),this.sp.graphics.drawLines(0,e.height,[this.label.x+this.label.width+l-h,25,this.label.x+this.label.width+l-h,this.label.height+100,this.label.x-h-l,this.label.height+100,this.label.x-h-l,25,this.label.x+this.label.width+l-h,25],"#fbf8f8")),this.distance=20),n?(this.pos(s.x,s.y),n.addChild(this)):(this.pos(e.x,e.y),e.parent.addChild(this)),this.tween()},n.tween=function(){Lr.to(this,{y:this.y+this.distance},1e3)},t}(ew),Cw=function(e){function t(e){this.textfiled=null,this._$5__width=712,this._msgObj=null,void 0===e&&(e=712),t.__super.call(this),this._$5__width=e}o(t,"modules.chat.view.componets.ChatLineView",e);var i=t.prototype;return i.init=function(e,t){if(this.pos(0,0),this._msgObj=e,null==this.textfiled&&(this.textfiled=new uw,this.addChild(this.textfiled),this.textfiled.width=this._$5__width,this.textfiled.style.fontSize=26,this.textfiled.style.valign="middle"),5==e.ch?this.textfiled.style.color=e.uid>0?"#fffc00":"#e70626":this.textfiled.style.color="#ffffff",null==t){var i;if(e.uid){var n,o=Math.abs(e.uid),s="usr,"+o+","+e.name+","+e.vip;n=o==Ng.userVO.unitId.id?"#00dc24":"#0084ff",i="<span style='color:"+n+";' href='"+s+"'>"+e.name+"</span>";var r=de.getTag(e.vip);null!=r&&(i+="<span style='color:"+de.getTagColor(e.vip)+";'>"+r+"</span>"),4==e.ch&&(e.uid<0?i="我对"+i+"说":i+="对我说"),5!=e.ch&&(i+="：")}else i="";var a=Xe.CHANELS_ARR[e.ch].name,l=Xe.CHANELS_ARR[e.ch].color,h="<span style='color:"+l+";'>【"+a+"】</span>"+i;t=this.getFaceHtmlText(e.msg,5!=e.ch),t=h+t}return this.textfiled.innerHTML=t,this.textfiled.height=this.textfiled.contextHeight+10,this.textfiled.hasListener("link")||this.textfiled.on("link",this,this.onLink),t},i.onLink=function(e){this.parent.parent.event("chatLink",[e,this._msgObj])},i.getFaceHtmlText=function(e,t){var i=e;t&&(i=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var n="",o=i.indexOf("["),s=-1;if(-1!=o)for(;-1!=o;){var r=i.substring(s+1,o);if(n+=r,s=i.indexOf("]",o),-1==s){n+=i.substring(o);break}var a=i.substring(o+1,s),l=a.split(",");if(l.length>=5){if("9"==l[0]){var h="usr,"+l[1]+","+l[3]+",0",c="<span style='color:#00dc24;' href='"+h+"'>"+l[3]+"</span>";a="<font color='#0084ff'>挑战</font>&nbsp;"+c+"&nbsp;",a+="1"==l[4]?"<font color='#00dc24'>胜利</font>":"<font color='#e70626'>失败</font>"}else a="&nbsp;<span style='color:"+N.getColor(vo["int"](l[4]))+";' href='itm,"+a+"'>"+l[3]+"</span>&nbsp;";n+=a}else n+="[]";o=i.indexOf("[",s),-1==o&&s<i.length-1&&(n+=i.substring(s+1))}else n=i;return n},i.removeSelf=function(){return this.textfiled.off("link",this,this.onLink),laya.display.Node.prototype.removeSelf.call(this)},t.STORE_KEY="chatLine",t}(ew),Tw=function(e){function t(){this._items=null,this._selectedIndex=0,t.__super.call(this),this._setIndexHandler=h.create(this,this.setIndex,null,!1)}o(t,"laya.ui.ViewStack",e);var n=t.prototype;return i.imps(n,{"laya.ui.IItem":!0}),n.setItems=function(e){this.removeChildren();for(var t=0,i=0,n=e.length;n>i;i++){var o=e[i];o&&(o.name="item"+t,this.addChild(o),t++)}this.initItems()},n.addItem=function(e){e.name="item"+this._items.length,this.addChild(e),this.initItems()},n.initItems=function(){this._items=[];for(var e=0;1e4>e;e++){var t=this.getChildByName("item"+e);if(null==t)break;this._items.push(t),t.visible=e==this._selectedIndex}},n.setSelect=function(e,t){this._items&&e>-1&&e<this._items.length&&(this._items[e].visible=t)},n.setIndex=function(e){this.selectedIndex=e},s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){if(this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e)this.selectedIndex=parseInt(e);else for(var t in this._dataSource)this.hasOwnProperty(t)&&(this[t]=this._dataSource[t])}),s(0,n,"items",function(){return this._items}),s(0,n,"setIndexHandler",function(){return this._setIndexHandler},function(e){this._setIndexHandler=e}),s(0,n,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(e){this.selectedIndex=this._items.indexOf(e)}),s(0,n,"selectedIndex",function(){return this._selectedIndex},function(e){this._selectedIndex!=e&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=e,this.setSelect(this._selectedIndex,!0))}),t}(ew),Iw=function(e){function t(){this._space=0,this._align="none",this._itemChanged=!1,t.__super.call(this)}o(t,"laya.ui.LayoutBox",e);var i=t.prototype;return i.addChild=function(e){return e.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,e)},i.onResize=function(e){this._setItemChanged()},i.addChildAt=function(e,t){return e.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,e,t)},i.removeChildAt=function(e){return this.getChildAt(e).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,e)},i.refresh=function(){this._setItemChanged()},i.changeItems=function(){this._itemChanged=!1},i.sortItem=function(e){e&&e.sort(function(e,t){return e.y-t.y})},i._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},s(0,i,"align",function(){return this._align},function(e){this._align=e,this._setItemChanged()}),s(0,i,"space",function(){return this._space},function(e){this._space=e,this._setItemChanged()}),t}(ew),Aw=function(e){function t(e,i){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,t.__super.call(this),this.skin=i,this.labels=e}o(t,"laya.ui.UIGroup",e);var n=t.prototype;return i.imps(n,{"laya.ui.IItem":!0}),n.preinitialize=function(){this.mouseEnabled=!0},n.destroy=function(e){void 0===e&&(e=!0),laya.ui.Component.prototype.destroy.call(this,e),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},n.addItem=function(e,t){void 0===t&&(t=!0);var i=e,n=this._items.length;if(i.name="item"+n,this.addChild(i),this.initItems(),t&&n>0){var o=this._items[n-1];"horizontal"==this._direction?i.x=o.x+o.width+this._space:i.y=o.y+o.height+this._space}else t&&(i.x=0,i.y=0);return n},n.delItem=function(e,t){void 0===t&&(t=!0);var i=this._items.indexOf(e);if(-1!=i){var n=e;this.removeChild(n);for(var o=i+1,s=this._items.length;s>o;o++){var r=this._items[o];r.name="item"+(o-1),t&&("horizontal"==this._direction?r.x-=n.width+this._space:r.y-=n.height+this._space)}if(this.initItems(),this._selectedIndex>-1){var a=0;a=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=a}}},n.initItems=function(){this._items||(this._items=[]),this._items.length=0;for(var e=0;1e4>e;e++){var t=this.getChildByName("item"+e);if(null==t)break;this._items.push(t),t.selected=e===this._selectedIndex,t.clickHandler=h.create(this,this.itemClick,[e],!1)}},n.itemClick=function(e){this.selectedIndex=e},n.setSelect=function(e,t){this._items&&e>-1&&e<this._items.length&&(this._items[e].selected=t)},n.createItem=function(e,t){return null},n.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var e=0,t=0,i=this._items.length;i>t;t++){var n=this._items[t];this._skin&&(n.skin=this._skin),this._labelColors&&(n.labelColors=this._labelColors),this._labelSize&&(n.labelSize=this._labelSize),this._labelStroke&&(n.labelStroke=this._labelStroke),this._labelStrokeColor&&(n.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(n.strokeColors=this._strokeColors),this._labelBold&&(n.labelBold=this._labelBold),this._labelPadding&&(n.labelPadding=this._labelPadding),this._labelAlign&&(n.labelAlign=this._labelAlign),this._stateNum&&(n.stateNum=this._stateNum),this._labelFont&&(n.labelFont=this._labelFont),"horizontal"===this._direction?(n.y=0,n.x=e,e+=n.width+this._space):(n.x=0,n.y=e,e+=n.height+this._space)}this.changeSize()},n.commitMeasure=function(){this.runCallLater(this.changeLabels)},n._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=parseInt(e):e instanceof Array?this.labels=e.join(","):i.superSet(ew,this,"dataSource",e)}),s(0,n,"items",function(){return this._items}),s(0,n,"space",function(){return this._space},function(e){this._space=e,this._setLabelChanged()}),s(0,n,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(e){this.selectedIndex=this._items.indexOf(e)}),s(0,n,"direction",function(){return this._direction},function(e){this._direction=e,this._setLabelChanged()}),s(0,n,"labelPadding",function(){return this._labelPadding},function(e){this._labelPadding!=e&&(this._labelPadding=e,this._setLabelChanged())}),s(0,n,"labels",function(){return this._labels},function(e){if(this._labels!=e){if(this._labels=e,this.removeChildren(),this._setLabelChanged(),this._labels)for(var t=this._labels.split(","),i=0,n=t.length;n>i;i++){var o=this.createItem(this._skin,t[i]);o.name="item"+i,this.addChild(o)}this.initItems()}}),s(0,n,"stateNum",function(){return this._stateNum},function(e){this._stateNum!=e&&(this._stateNum=e,this._setLabelChanged())}),s(0,n,"labelFont",function(){return this._labelFont},function(e){this._labelFont!=e&&(this._labelFont=e,this._setLabelChanged())}),s(0,n,"labelStrokeColor",function(){return this._labelStrokeColor},function(e){this._labelStrokeColor!=e&&(this._labelStrokeColor=e,this._setLabelChanged())}),s(0,n,"strokeColors",function(){return this._strokeColors},function(e){this._strokeColors!=e&&(this._strokeColors=e,this._setLabelChanged())}),s(0,n,"labelColors",function(){return this._labelColors},function(e){this._labelColors!=e&&(this._labelColors=e,this._setLabelChanged())}),s(0,n,"labelStroke",function(){return this._labelStroke},function(e){this._labelStroke!=e&&(this._labelStroke=e,this._setLabelChanged())}),s(0,n,"skin",function(){return this._skin},function(e){this._skin!=e&&(this._skin=e,this._setLabelChanged())}),s(0,n,"labelSize",function(){return this._labelSize},function(e){this._labelSize!=e&&(this._labelSize=e,this._setLabelChanged())}),s(0,n,"labelBold",function(){return this._labelBold},function(e){this._labelBold!=e&&(this._labelBold=e,this._setLabelChanged())}),s(0,n,"selectedIndex",function(){return this._selectedIndex},function(e){this._selectedIndex!=e&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=e,this.setSelect(e,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),t}(ew),Nw=function(e){function t(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,t.__super.call(this),this.width=this.height=100}o(t,"laya.ui.Panel",e);var n=t.prototype;return n.destroy=function(e){void 0===e&&(e=!0),laya.ui.Component.prototype.destroy.call(this,e),this._content&&this._content.destroy(e),this._vScrollBar&&this._vScrollBar.destroy(e),this._hScrollBar&&this._hScrollBar.destroy(e),this._vScrollBar=null,this._hScrollBar=null,this._content=null},n.destroyChildren=function(){this._content.destroyChildren()},n.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new ew)},n.addChild=function(e){return e.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(e)},n.onResize=function(){this._setScrollChanged()},n.addChildAt=function(e,t){return e.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(e,t)},n.removeChild=function(e){return e.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(e)},n.removeChildAt=function(e){return this.getChildAt(e).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(e)},n.removeChildren=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=2147483647),this._content.removeChildren(e,t),this._setScrollChanged(),this},n.getChildAt=function(e){return this._content.getChildAt(e)},n.getChildByName=function(e){return this._content.getChildByName(e)},n.getChildIndex=function(e){return this._content.getChildIndex(e)},n.changeScroll=function(){this._scrollChanged=!1;var e=this.contentWidth||1,t=this.contentHeight||1,i=this._vScrollBar,n=this._hScrollBar,o=i&&t>this._height,s=n&&e>this._width,r=o?this._width-i.width:this._width,a=s?this._height-n.height:this._height;i&&(i.x=this._width-i.width,i.y=0,i.height=this._height-(s?n.height:0),i.scrollSize=Math.max(.033*this._height,1),i.thumbPercent=a/t,i.setScroll(0,t-a,i.value)),n&&(n.x=0,n.y=this._height-n.height,n.width=this._width-(o?i.width:0),n.scrollSize=Math.max(.033*this._width,1),n.thumbPercent=r/e,n.setScroll(0,e-r,n.value))},n.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},n.setContentSize=function(e,t){var i=this._content;i.width=e,i.height=t,i.scrollRect||(i.scrollRect=new Ch),i.scrollRect.setTo(0,0,e,t),i.scrollRect=i.scrollRect},n.onScrollBarChange=function(e){var t=this._content.scrollRect;if(t){var i=Math.round(e.value);e.isVertical?t.y=i:t.x=i,this._content.scrollRect=t}},n.scrollTo=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.vScrollBar&&(this.vScrollBar.value=t),this.hScrollBar&&(this.hScrollBar.value=e)},n.refresh=function(){this.changeScroll()},n.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=i.superGet(ew,this,"cacheAs")),i.superSet(ew,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},n.onScrollEnd=function(){i.superSet(ew,this,"cacheAs",this._$P.cacheAs)},n._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},s(0,n,"cacheAs",e.prototype._$get_cacheAs,function(e){i.superSet(ew,this,"cacheAs",e),this._$P.cacheAs=null,"none"!==e?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),s(0,n,"content",function(){return this._content}),s(0,n,"hScrollBar",function(){return this._hScrollBar}),s(0,n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(e){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new Ow),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=e}),s(0,n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(e){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new Bw),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=e}),s(0,n,"contentHeight",function(){for(var e=0,t=this._content.numChildren-1;t>-1;t--){var i=this._content.getChildAt(t);e=Math.max(i.y+i.height*i.scaleY,e)}return e}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(ew,this,"height",e),this._setScrollChanged()}),s(0,n,"vScrollBar",function(){return this._vScrollBar}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(ew,this,"width",e),this._setScrollChanged()}),s(0,n,"contentWidth",function(){for(var e=0,t=this._content.numChildren-1;t>-1;t--){var i=this._content.getChildAt(t);e=Math.max(i.x+i.width*i.scaleX,e)}return e}),s(0,n,"numChildren",function(){return this._content.numChildren}),t}(ew),Pw=function(e){function t(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._arrowLb=null,this._silence=!1,this._cells=[],this._offset=new Ah,t.__super.call(this)}o(t,"laya.ui.List",e);var n=t.prototype;return i.imps(n,{"laya.ui.IItem":!0,"laya.ui.IRender":!0}),n.showArrow=function(){return null!=this._arrowLb||null==this.scrollBar?void this.checkArrow():void(this.scrollBar instanceof laya.ui.VScrollBar&&(this._arrowLb=new iw("︾"),this._arrowLb.fontSize=32,this._arrowLb.bold=!0,this._arrowLb.align="center",this._arrowLb.color="#ffffff",this._arrowLb.zOrder=1e3,this._arrowLb.mouseEnabled=!1,this._arrowLb.pos((this.width-this._arrowLb.width)/2,this.height+10),this.addChild(this._arrowLb),this.checkArrow()))},n.checkArrow=function(){null!=this._arrowLb&&null!=this.scrollBar&&(this._arrowLb.visible=this.scrollBar.value<this.scrollBar.max)},n.destroy=function(e){void 0===e&&(e=!0),this._content&&this._content.destroy(e),this._scrollBar&&this._scrollBar.destroy(e),laya.ui.Component.prototype.destroy.call(this,e),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},n.createChildren=function(){this.addChild(this._content=new ew)},n.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=i.superGet(ew,this,"cacheAs")),i.superSet(ew,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},n.onScrollEnd=function(){i.superSet(ew,this,"cacheAs",this._$P.cacheAs)},n._removePreScrollBar=function(){var e=this.removeChildByName("scrollBar");e&&e.destroy(!0)},n.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var e=this._getOneCell(),t=e.width+this._spaceX||1,i=e.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/t):Math.ceil(this._width/t)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/i):Math.round(this._height/i));var n=this._width?this._width:t*this.repeatX-this._spaceX,o=this._height?this._height:i*this.repeatY-this._spaceY;this._cellSize=this._isVertical?i:t,this._cellOffset=this._isVertical?i*Math.max(this._repeatY2,this._repeatY)-o-this._spaceY:t*Math.max(this._repeatX2,this._repeatX)-n-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=o:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=n),this.setContentSize(n,o);var s=this._isVertical?this.repeatX:this.repeatY,r=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,s,r),this._createdLine=r,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},n._getOneCell=function(){if(0===this._cells.length){var e=this.createItem();if(this._offset.setTo(e.x,e.y),this.cacheContent)return e;this._cells.push(e)}return this._cells[0]},n._createItems=function(e,t,i){var n=this._content,o=this._getOneCell(),s=o.width+this._spaceX,r=o.height+this._spaceY;if(this.cacheContent){var a=new ew;a.cacheAsBitmap=!0,a.pos((this._isVertical?0:e)*s,(this._isVertical?e:0)*r),this._content.addChild(a),this._content.optimizeScrollRect=!0,n=a}else{for(var l=[],h=this._cells.length-1;h>-1;h--){var c=this._cells[h];c.removeSelf(),l.push(c)}this._cells.length=0}for(var u=e;i>u;u++)for(var d=0;t>d;d++)o=l&&l.length?l.pop():this.createItem(),o.x=(this._isVertical?d:u)*s-n.x,o.y=(this._isVertical?u:d)*r-n.y,o.name="item"+(u*t+d),n.addChild(o),this.addCell(o)},n.createItem=function(){var e=[];if("function"==typeof this._itemRender)var t=new this._itemRender;else t=Sw.createComp(this._itemRender,null,null,e);if(0==e.length&&t._watchMap){var i=t._watchMap;for(var n in i)for(var o=i[n],s=0;s<o.length;s++){var r=o[s];e.push(r.comp,r.prop,r.value)}}return e.length&&(t._$bindData=e),t.cacheAs="normal",t},n.addCell=function(e){e.on("click",this,this.onCellMouse),e.on("rightclick",this,this.onCellMouse),e.on("mouseover",this,this.onCellMouse),e.on("mouseout",this,this.onCellMouse),e.on("mousedown",this,this.onCellMouse),e.on("mouseup",this,this.onCellMouse),this._cells.push(e)},n.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;var e=0;e=0;for(var t=0;1e4>t;t++){var i=this.getChildByName("item"+t);{if(!i)break;this.addCell(i),e++}}this.repeatY=e}},n.setContentSize=function(e,t){this._content.width=e,this._content.height=t,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new Ch),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,e,t),this._content.scrollRect=this._content.scrollRect),this.event("resize")},n.onCellMouse=function(e){"mousedown"===e.type&&(this._isMoved=!1);var t=e.currentTarget,i=this._startIndex+this._cells.indexOf(t);0>i||("click"===e.type||"rightclick"===e.type?this.selectEnable&&!this._isMoved?this.selectedIndex=i:this.changeCellState(t,!0,0):"mouseover"!==e.type&&"mouseout"!==e.type||this._selectedIndex===i||this.changeCellState(t,"mouseover"===e.type,0),this.mouseHandler&&this.mouseHandler.runWith([e,i]))},n.changeCellState=function(e,t,i){var n=e.getChildByName("selectBox");n&&(this.selectEnable=!0,n.visible=t,n.index=i)},n.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},n.onScrollBarChange=function(e){this.runCallLater(this.changeCells);var t=this._scrollBar.value,i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,o=Math.floor(t/this._cellSize);if(this.cacheContent)r=n+1,this._createdLine-o<r&&(this._createItems(this._createdLine,i,this._createdLine+r),this.renderItems(this._createdLine*i,0),this._createdLine+=r);else{var s=o*i,r=0;if(s>this._startIndex){r=s-this._startIndex;var a=!0,l=this._startIndex+i*(n+1);this._isMoved=!0}else s<this._startIndex&&(r=this._startIndex-s,a=!1,l=this._startIndex-1,this._isMoved=!0);for(var h=0;r>h;h++){if(a){var c=this._cells.shift();this._cells[this._cells.length]=c;var u=l+h}else c=this._cells.pop(),this._cells.unshift(c),u=l-h;var d=Math.floor(u/i)*this._cellSize;this._isVertical?c.y=d:c.x=d,this.renderItem(c,u)}this._startIndex=s,this.changeSelectStatus()}var p=this._content.scrollRect;this._isVertical?(p.y=t-this._offset.y,p.x=-this._offset.x):(p.y=-this._offset.y,p.x=t-this._offset.x),this._content.scrollRect=p,this.checkArrow()},n.posCell=function(e,t){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY,n=(this._isVertical?this.repeatY:this.repeatX,Math.floor(t/i)*this._cellSize);this._isVertical?e.y=n:e.x=n}},n.changeSelectStatus=function(){for(var e=0,t=this._cells.length;t>e;e++)this.changeCellState(this._cells[e],this._selectedIndex===this._startIndex+e,1)},n.renderItems=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);for(var i=e,n=t||this._cells.length;n>i;i++)this.renderItem(this._cells[i],this._startIndex+i);this.changeSelectStatus()},n.renderItem=function(e,t){this._array&&t>=0&&t<this._array.length?(e.visible=!0,e._$bindData?(e._dataSource=this._array[t],this._bindData(e,this._array[t])):e.dataSource=this._array[t],this.cacheContent||this.posCell(e,t),this.hasListener("render")&&this.event("render",[e,t]),this.renderHandler&&this.renderHandler.runWith([e,t])):(e.visible=!1,e.dataSource=null)},n._bindData=function(e,t){for(var i=e._$bindData,n=0,o=i.length;o>n;n++){var s=i[n++],r=i[n++],a=i[n],l=ps.getBindFun(a);s[r]=l.call(this,t)}},n.refresh=function(){this.array=this._array},n.getItem=function(e){return e>-1&&e<this._array.length?this._array[e]:null},n.changeItem=function(e,t){e>-1&&e<this._array.length&&(this._array[e]=t,e>=this._startIndex&&e<this._startIndex+this._cells.length&&this.renderItem(this.getCell(e),e))},n.setItem=function(e,t){this.changeItem(e,t)},n.addItem=function(e){this._array.push(e),this.array=this._array},n.addItemAt=function(e,t){this._array.splice(t,0,e),this.array=this._array},n.deleteItem=function(e){this._array.splice(e,1),this.array=this._array},n.getCell=function(e){return this.runCallLater(this.changeCells),e>-1&&this._cells?this._cells[(e-this._startIndex)%this._cells.length]:null},n.scrollTo=function(e){if(this._scrollBar){var t=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(e/t)*this._cellSize}else this.startIndex=e},n.tweenTo=function(e,t,i){if(void 0===t&&(t=200),this._scrollBar){var n=this._isVertical?this.repeatX:this.repeatY;Lr.to(this._scrollBar,{value:Math.floor(e/n)*this._cellSize},t,null,i,0,!0)}else this.startIndex=e,i&&i.run()},n._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},n.commitMeasure=function(){this.runCallLater(this.changeCells)},s(0,n,"length",function(){return this._array?this._array.length:0}),s(0,n,"startIndex",function(){return this._startIndex},function(e){this._startIndex=e>0?e:0,this.callLater(this.renderItems)}),s(0,n,"array",function(){return this._array},function(e){this.runCallLater(this.changeCells),this._array=e||[];var t=this._array.length;if(this.totalPage=Math.ceil(t/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<t?this._selectedIndex:t-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,o=Math.ceil(t/i),s=this._cellOffset>0?this.totalPage+1:this.totalPage;s>1?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=n/o,this._scrollBar.setScroll(0,(o-n)*this._cellSize+this._cellOffset,this._scrollBar.value),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}this.showArrow()}),s(0,n,"selection",function(){return this.getCell(this._selectedIndex)},function(e){this.selectedIndex=this._startIndex+this._cells.indexOf(e)}),s(0,n,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(e){this.selectedIndex=this._array.indexOf(e)}),s(0,n,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),s(0,n,"silence",function(){return this._silence},function(e){this._silence=e,!this._silence&&this._dataSource&&(this.dataSource=this._dataSource)}),s(0,n,"spaceY",function(){return this._spaceY},function(e){this._spaceY=e,this._setCellChanged()}),s(0,n,"page",function(){return this._page},function(e){this._page=e,this._array&&(this._page=e>0?e:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),s(0,n,"height",e.prototype._$get_height,function(e){e!=this._height&&(i.superSet(ew,this,"height",e),this._setCellChanged())}),s(0,n,"repeatY",function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},function(e){this._repeatY=e,this._setCellChanged()}),s(0,n,"repeatX",function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},function(e){this._repeatX=e,this._setCellChanged()}),s(0,n,"spaceX",function(){return this._spaceX},function(e){this._spaceX=e,this._setCellChanged()}),s(0,n,"width",e.prototype._$get_width,function(e){e!=this._width&&(i.superSet(ew,this,"width",e),this._setCellChanged())}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,this._silence||("number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=parseInt(e):e instanceof Array?this.array=e:i.superSet(ew,this,"dataSource",e))}),s(0,n,"scrollBar",function(){return this._scrollBar},function(e){this._scrollBar!=e&&(this._scrollBar=e,e&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange)))}),s(0,n,"cacheAs",e.prototype._$get_cacheAs,function(e){i.superSet(ew,this,"cacheAs",e),this._scrollBar&&(this._$P.cacheAs=null,"none"!==e?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),s(0,n,"itemRender",function(){return this._itemRender},function(e){if(this._itemRender!=e){this._itemRender=e;for(var t=this._cells.length-1;t>-1;t--)this._cells[t].destroy();this._cells.length=0,this._setCellChanged()}}),s(0,n,"content",function(){return this._content}),s(0,n,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(e){this._removePreScrollBar();var t=new Ow;t.name="scrollBar",t.bottom=0,e&&" "!=e&&(t.skin=e),this.scrollBar=t,this.addChild(t),this._setCellChanged()}),s(0,n,"selectedIndex",function(){return this._selectedIndex},function(e){this._selectedIndex!=e&&(this._selectedIndex=e,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(e),this.startIndex=this._startIndex)}),s(0,n,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(e){this._removePreScrollBar();var t=new Bw;t.name="scrollBar",t.right=0,e&&" "!=e&&(t.skin=e),this.scrollBar=t,this.addChild(t),this._setCellChanged()}),t}(ew),Rw=function(e){function t(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,t.__super.call(this),this.width=this.height=200}o(t,"laya.ui.Tree",e);var n=t.prototype;return i.imps(n,{"laya.ui.IRender":!0}),n.destroy=function(e){void 0===e&&(e=!0),laya.ui.Component.prototype.destroy.call(this,e),this._list&&this._list.destroy(e),this._list=null,this._source=null,this._renderHandler=null},n.createChildren=function(){this.addChild(this._list=new Pw),this._list.renderHandler=h.create(this,this.renderItem,null,!1),
this._list.repeatX=1,this._list.on("change",this,this.onListChange)},n.onListChange=function(e){this.event("change")},n.getArray=function(){var e,t=[];for(var i in this._source)e=this._source[i],this.getParentOpenStatus(e)&&(e.x=this._spaceLeft*this.getDepth(e),t.push(e));return t},n.getDepth=function(e,t){return void 0===t&&(t=0),null==e.nodeParent?t:this.getDepth(e.nodeParent,t+1)},n.getParentOpenStatus=function(e){var t=e.nodeParent;return null==t?!0:t.isOpen?null!=t.nodeParent?this.getParentOpenStatus(t):!0:!1},n.renderItem=function(e,t){var i=e.dataSource;if(i){e.left=i.x;var n=e.getChildByName("arrow");n&&(i.hasChild?(n.visible=!0,n.index=i.isOpen?1:0,n.tag=t,n.off("click",this,this.onArrowClick),n.on("click",this,this.onArrowClick)):n.visible=!1);var o=e.getChildByName("folder");o&&(2==o.clipY?o.index=i.isDirectory?0:1:o.index=i.isDirectory?i.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([e,t])}},n.onArrowClick=function(e){var t=e.currentTarget,i=t.tag;this._list.array[i].isOpen=!this._list.array[i].isOpen,this.event("open"),this._list.array=this.getArray()},n.setItemState=function(e,t){this._list.array[e]&&(this._list.array[e].isOpen=t,this._list.array=this.getArray())},n.fresh=function(){this._list.array=this.getArray(),this.repaint()},n.parseXml=function(e,t,i,n){var o,s=e.childNodes,r=s.length;if(!n){o={};var a,l=e.attributes;for(var h in l){a=l[h];var c=a.nodeName,u=a.nodeValue;o[c]="true"==u?!0:"false"==u?!1:u}o.nodeParent=i,r>0&&(o.isDirectory=!0),o.hasChild=r>0,t.push(o)}for(var d=0;r>d;d++){var p=s[d];this.parseXml(p,t,o,!1)}},n.parseOpenStatus=function(e,t){for(var i=0,n=t.length;n>i;i++){var o=t[i];if(o.isDirectory)for(var s=0,r=e.length;r>s;s++){var a=e[s];if(a.isDirectory&&this.isSameParent(a,o)&&o.label==a.label){o.isOpen=a.isOpen;break}}}},n.isSameParent=function(e,t){return null==e.nodeParent&&null==t.nodeParent?!0:null==e.nodeParent||null==t.nodeParent?!1:e.nodeParent.label==t.nodeParent.label?this.isSameParent(e.nodeParent,t.nodeParent):!1},n.filter=function(e){if(Boolean(e)){var t=[];this.getFilterSource(this._source,t,e),this._list.array=t}else this._list.array=this.getArray()},n.getFilterSource=function(e,t,i){i=i.toLocaleLowerCase();var n;for(var o in e)n=e[o],!n.isDirectory&&String(n.label).toLowerCase().indexOf(i)>-1&&(n.x=0,t.push(n)),n.child&&n.child.length>0&&this.getFilterSource(n.child,t,i)},s(0,n,"xml",null,function(e){var t=[];this.parseXml(e.childNodes[0],t,null,!0),this.array=t}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(ew,this,"height",e),this._list.height=e}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(ew,this,"width",e),this._list.width=e}),s(0,n,"selectedIndex",function(){return this._list.selectedIndex},function(e){this._list.selectedIndex=e}),s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,i.superSet(ew,this,"dataSource",e)}),s(0,n,"scrollBar",function(){return this._list.scrollBar}),s(0,n,"spaceLeft",function(){return this._spaceLeft},function(e){this._spaceLeft=e}),s(0,n,"renderHandler",function(){return this._renderHandler},function(e){this._renderHandler=e}),s(0,n,"itemRender",function(){return this._list.itemRender},function(e){this._list.itemRender=e}),s(0,n,"mouseHandler",function(){return this._list.mouseHandler},function(e){this._list.mouseHandler=e}),s(0,n,"spaceBottom",function(){return this._list.spaceY},function(e){this._list.spaceY=e}),s(0,n,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),s(0,n,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(e){this._list.vScrollBarSkin=e}),s(0,n,"source",function(){return this._source}),s(0,n,"array",function(){return this._list.array},function(e){this._keepStatus&&this._list.array&&e&&this.parseOpenStatus(this._list.array,e),this._source=e,this._list.array=this.getArray()}),s(0,n,"selectedItem",function(){return this._list.selectedItem},function(e){this._list.selectedItem=e}),s(0,n,"list",function(){return this._list}),s(0,n,"keepStatus",function(){return this._keepStatus},function(e){this._keepStatus=e}),t}(ew),Lw=function(e){function t(e){t.__super.call(this,e),this.isVertical=!1}return o(t,"laya.ui.HSlider",e),t}(tw),Ow=function(e){function t(){t.__super.call(this)}o(t,"laya.ui.HScrollBar",e);var i=t.prototype;return i.initialize=function(){e.prototype.initialize.call(this),this.slider.isVertical=!1},t}(nw),Mw=function(e){function t(){t.__super.call(this)}return o(t,"laya.ui.VSlider",e),t}(tw),Dw=function(e){function t(e,i){this._value=null,void 0===i&&(i=""),t.__super.call(this,e,i)}o(t,"laya.ui.Radio",e);var i=t.prototype;return i.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._value=null},i.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},i.initialize=function(){e.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},i.onClick=function(e){this.selected=!0},s(0,i,"value",function(){return null!=this._value?this._value:this.label},function(e){this._value=e}),t}(ow),kw=function(e){function t(e,i){void 0===i&&(i=""),t.__super.call(this,e,i)}o(t,"laya.ui.CheckBox",e);var n=t.prototype;return n.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},n.initialize=function(){e.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},s(0,n,"dataSource",e.prototype._$get_dataSource,function(e){this._dataSource=e,"boolean"==typeof e?this.selected=e:"string"==typeof e?this.selected="true"===e:i.superSet(ow,this,"dataSource",e)}),t}(ow),Bw=function(e){function t(){t.__super.call(this)}return o(t,"laya.ui.VScrollBar",e),t}(nw),Vw=function(e){function t(e){this._bg=null,this._skin=null,t.__super.call(this),void 0===e&&(e=""),this.text=e,this.skin=this.skin}o(t,"laya.ui.TextInput",e);var n=t.prototype;return n.preinitialize=function(){this.mouseEnabled=!0},n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._bg&&this._bg.destroy(),this._bg=null},n.createChildren=function(){this.addChild(this._tf=new fw),this._tf.padding=ds.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},n._onFocus=function(){this.event("focus",this)},n._onBlur=function(){this.event("blur",this)},n._onInput=function(){this.event("input",this)},n._onEnter=function(){this.event("enter",this)},n.initialize=function(){this.width=128,this.height=22},n.select=function(){this._tf.select()},n.setSelection=function(e,t){this._tf.setSelection(e,t)},s(0,n,"type",function(){return this._tf.type},function(e){this._tf.type=e}),s(0,n,"asPassword",function(){return this._tf.asPassword},function(e){this._tf.asPassword=e}),s(0,n,"maxChars",function(){return this._tf.maxChars},function(e){this._tf.maxChars=e}),s(0,n,"promptColor",function(){return this._tf.promptColor},function(e){this._tf.promptColor=e}),s(0,n,"prompt",function(){return this._tf.prompt},function(e){this._tf.prompt=e}),s(0,n,"text",e.prototype._$get_text,function(e){this._tf.text!=e&&(e+="",this._tf.text=e,this.event("change"))}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(iw,this,"height",e),this._bg&&(this._bg.height=e)}),s(0,n,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(e){this._tf.inputElementYAdjuster=e}),s(0,n,"bg",function(){return this._bg},function(e){this.graphics=this._bg=e}),s(0,n,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(e){this._tf.inputElementXAdjuster=e}),s(0,n,"editable",function(){return this._tf.editable},function(e){this._tf.editable=e}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(iw,this,"width",e),this._bg&&(this._bg.width=e)}),s(0,n,"multiline",function(){return this._tf.multiline},function(e){this._tf.multiline=e}),s(0,n,"restrict",function(){return this._tf.restrict},function(e){this._tf.restrict=e}),s(0,n,"focus",function(){return this._tf.focus},function(e){this._tf.focus=e}),s(0,n,"skin",function(){return this._skin},function(e){this._skin!=e&&(this._skin=e,this._bg||(this.graphics=this._bg=new pd),this._bg.source=Tu.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),s(0,n,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(e){this._bg||(this.graphics=this._bg=new pd),this._bg.sizeGrid=ps.fillArray(ds.defaultSizeGrid,e,Number)}),t}(iw),Fw=function(e){function t(e,i){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,t.__super.call(this),e&&(this.skin=e),i&&(this.sheet=i)}o(t,"laya.ui.FontClip",e);var n=t.prototype;return n.createChildren=function(){this._bitmap=new pd,this.on("loaded",this,this._onClipLoaded)},n._onClipLoaded=function(){this.callLater(this.changeValue)},n.changeValue=function(){if(this._sources&&this._valueArr){this.graphics.clear(!0);var e;if(e=this._sources[0]){var t="horizontal"===this._direction;t?(this._wordsW=this._valueArr.length*(e.sourceWidth+this.spaceX),this._wordsH=e.sourceHeight):(this._wordsW=e.sourceWidth,this._wordsH=(e.sourceHeight+this.spaceY)*this._valueArr.length);var i=0;if(this._width)switch(this._align){case"center":i=.5*(this._width-this._wordsW);break;case"right":i=this._width-this._wordsW;break;default:i=0}for(var n=0,o=this._valueArr.length;o>n;n++){var s=this._indexMap[this._valueArr.charAt(n)];this.sources[s]&&(e=this.sources[s],t?this.graphics.drawTexture(e,i+n*(e.sourceWidth+this.spaceX),0,e.sourceWidth,e.sourceHeight):this.graphics.drawTexture(e,0+i,n*(e.sourceHeight+this.spaceY),e.sourceWidth,e.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}}},n.destroy=function(t){void 0===t&&(t=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),e.prototype.destroy.call(this,t)},s(0,n,"measureWidth",function(){return this._wordsW}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(aw,this,"width",e),this.callLater(this.changeValue)}),s(0,n,"align",function(){return this._align},function(e){this._align=e,this.callLater(this.changeValue)}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(aw,this,"height",e),this.callLater(this.changeValue)}),s(0,n,"spaceY",function(){return this._spaceY},function(e){this._spaceY=e,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),s(0,n,"measureHeight",function(){return this._wordsH}),s(0,n,"value",function(){return this._valueArr?this._valueArr:""},function(e){e+="",this._valueArr=e,this.callLater(this.changeValue)}),s(0,n,"direction",function(){return this._direction},function(e){this._direction=e,this.callLater(this.changeValue)}),s(0,n,"spaceX",function(){return this._spaceX},function(e){this._spaceX=e,"horizontal"===this._direction&&this.callLater(this.changeValue)}),s(0,n,"sheet",function(){return this._sheet},function(e){e+="",this._sheet=e;var t=e.split(" ");this._clipX=String(t[0]).length,this.clipY=t.length,this._indexMap={};for(var i=0;i<this._clipY;i++)for(var n=t[i].split(""),o=0,s=n.length;s>o;o++)this._indexMap[n[o]]=i*this._clipX+o}),t}(aw),Gw=function(e){function t(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,t.__super.call(this)}var i;o(t,"laya.utils.GraphicAnimation",e);var s=t.prototype;return s._parseNodeList=function(e){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[e.compId]=e.props,e.compId&&this._nodeList.push(e.compId);var t=e.child;if(t){var i=0,n=t.length;for(i=0;n>i;i++)this._parseNodeList(t[i])}},s._calGraphicData=function(e){if(this._setUp(null,e),this._createGraphicData(),this._nodeIDAniDic){var t;for(t in this._nodeIDAniDic)this._nodeIDAniDic[t]=null}},s._createGraphicData=function(){var e=[],t=0,i=this.count,n=this._animationNewFrames;n||(n=[]);var o;for(t=0;i>t;t++)!n[t]&&o||(o=this._createFrameGraphic(t)),e.push(o);this._gList=e},s._createFrameGraphic=function(e){var i=a.createGraphics();return t._rootMatrix||(t._rootMatrix=new Ph),this._updateNodeGraphic(this._rootNode,e,t._rootMatrix,i),i},s._updateNodeGraphic=function(e,t,i,n,o){void 0===o&&(o=1);var s;s=this._nodeGDic[e.compId]=this._getNodeGraphicData(e.compId,t,this._nodeGDic[e.compId]);var r=s.alpha*o;if(!(.01>r)){s.resultTransform||(s.resultTransform=Ph.create());var a;a=s.resultTransform,Ph.mul(s.transform,i,a);var l;s.skin&&(l=this._getTextureByUrl(s.skin),l&&(a._checkTransform()?(n.drawTexture(l,0,0,s.width,s.height,a,r),s.resultTransform=null):n.drawTexture(l,a.tx,a.ty,s.width,s.height,null,r)));var h;if(h=e.child){var c=0,u=0;for(u=h.length,c=0;u>c;c++)this._updateNodeGraphic(h[c],t,a,n,r)}}},s._updateNoChilds=function(e,t){if(e.skin){var i=this._getTextureByUrl(e.skin);if(i){var n=e.transform;n._checkTransform();var o=!1;o=!n.bTransform,o?t.drawTexture(i,n.tx,n.ty,e.width,e.height,null,e.alpha):t.drawTexture(i,0,0,e.width,e.height,n.clone(),e.alpha)}}},s._updateNodeGraphic2=function(e,t,i){var n;if(n=this._nodeGDic[e.compId]=this._getNodeGraphicData(e.compId,t,this._nodeGDic[e.compId]),!e.child)return void this._updateNoChilds(n,i);var o=n.transform;o._checkTransform();var s=!1;s=!o.bTransform;var r=!1;r=s&&(0!=o.tx||0!=o.ty);var a=!1;a=o.bTransform||1!=n.alpha,a&&i.save(),1!=n.alpha&&i.alpha(n.alpha),s?r&&i.translate(o.tx,o.ty):i.transform(o.clone());var l;l=e.child;var h;if(n.skin&&(h=this._getTextureByUrl(n.skin),h&&i.drawTexture(h,0,0,n.width,n.height)),l){var c=0,u=0;for(u=l.length,c=0;u>c;c++)this._updateNodeGraphic2(l[c],t,i)}a?i.restore():s?r&&i.translate(-o.tx,-o.ty):i.transform(o.clone().invert())},s._calculateNodeKeyFrames=function(t){e.prototype._calculateNodeKeyFrames.call(this,t),this._nodeIDAniDic[t.target]=t},s.getNodeDataByID=function(e){return this._nodeIDAniDic[e]},s._getParams=function(e,i,n,o){var s=t._temParam;s.length=i.length;var r=0,a=i.length;for(r=0;a>r;r++)s[r]=this._getObjVar(e,i[r][0],n,i[r][1],o);return s},s._getObjVar=function(e,t,i,n,o){if(e.hasOwnProperty(t)){var s=e[t];if(i>=s.length&&(i=s.length-1),void 0!=e[t][i])return e[t][i]}return o.hasOwnProperty(t)?o[t]:n},s._getNodeGraphicData=function(e,n,o){o||(o=i.create()),o.transform?o.transform.identity():o.transform=Ph.create();var s=this.getNodeDataByID(e);if(!s)return o;var r=s.frames,a=this._getParams(r,t._drawTextureCmd,n,this._nodeDefaultProps[e]),l=a[0],h=NaN,c=NaN,u=a[5],d=a[6],p=a[13],f=a[14],_=a[7],m=a[8],g=a[9],v=a[11],y=a[12];h=a[3],c=a[4],0!=h&&0!=c||(l=null),-1==h&&(h=0),-1==c&&(c=0);var b;o.skin=l,o.width=h,o.height=c,l&&(b=this._getTextureByUrl(l),b?(h||(h=b.sourceWidth),c||(c=b.sourceHeight)):console.warn("lost skin:",l,",you may load pics first")),o.alpha=a[10];var E;E=o.transform,0!=p&&(u=p*h),0!=f&&(d=f*c),0==u&&0==d||E.translate(-u,-d);var x=null;if(g||1!==_||1!==m||v||y){x=t._tempMt,x.identity(),x.bTransform=!0;var S=.0174532922222222*(g-v),w=.0174532922222222*(g+y),C=Math.cos(w),T=Math.sin(w),I=Math.sin(S),A=Math.cos(S);x.a=_*C,x.b=_*T,x.c=-m*I,x.d=m*A,x.tx=x.ty=0}return x&&(E=Ph.mul(E,x,E)),E.translate(a[1],a[2]),o},s._getTextureByUrl=function(e){return Tu.getRes(e)},s.setAniData=function(e,i){if(e.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e,this._parseNodeList(e);var n,o={},s=[],r=e.animations,a=0,l=r.length;for(a=0;l>a;a++)if(n=r[a],this._labels=null,(!i||i==n.name)&&n){try{this._calGraphicData(n)}catch(h){console.warn("parse animation fail:"+n.name+",empty animation created"),this._gList=[]}var c={};c.interval=1e3/n.frameRate,c.frames=this._gList,c.labels=this._labels,c.name=n.name,s.push(c),o[n.name]=c}this.animationList=s,this.animationDic=o}t._temParam.length=0},s.parseByData=function(e){var t,i;t=e.nodeRoot,i=e.aniO,delete e.nodeRoot,delete e.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t),this._labels=null;try{this._calGraphicData(i)}catch(n){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[]}var o=e;return o.interval=1e3/i.frameRate,o.frames=this._gList,o.labels=this._labels,o.name=i.name,o},s.setUpAniData=function(e){if(e.animations){var t,i={},n=[],o=e.animations,s=0,r=o.length;for(s=0;r>s;s++)if(t=o[s]){var a={};a.name=t.name,a.aniO=t,a.nodeRoot=e,n.push(a),i[t.name]=a}this.animationList=n,this.animationDic=i}},s._clear=function(){if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic){var e,t;for(e in this._nodeGDic)t=this._nodeGDic[e],t&&t.recover()}this._nodeGDic=null},t.parseAnimationByData=function(e){t._I||(t._I=new t);var i;return i=t._I.parseByData(e),t._I._clear(),i},t.parseAnimationData=function(e){t._I||(t._I=new t),t._I.setUpAniData(e);var i;return i={},i.animationList=t._I.animationList,i.animationDic=t._I.animationDic,t._I._clear(),i},t._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],t._temParam=[],t._I=null,t._rootMatrix=null,n(t,["_tempMt",function(){return this._tempMt=new Ph}]),t.__init$=function(){i=function(){function e(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}o(e,"");var t=e.prototype;return t.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),Hr.recover("GraphicNode",this)},e.create=function(){return Hr.getItemByClass("GraphicNode",e)},e}()},t}(cw),Hw=function(e){function t(e,i){t.__super.call(this,i),this._geometryFilter=new Lx(this),this._render=new Bx(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),e&&(this._geometryFilter.sharedMesh=e,e instanceof laya.d3.resource.models.Mesh&&(e.loaded?this._render.sharedMaterials=e.materials:e.once("loaded",this,this._applyMeshMaterials)))}o(t,"laya.d3.core.MeshSprite3D",e);var r=t.prototype;return r._changeRenderObjectByMesh=function(e){var t=this._render._renderElements,i=t[e];i||(i=t[e]=new Ad),i._render=this._render;var n=this._render.sharedMaterials[e];n||(n=MS.defaultMaterial);var o=this._geometryFilter.sharedMesh.getRenderElement(e);return i._mainSortID=this._getSortID(o,n),i._sprite3D=this,i.renderObj=o,i._material=n,i},r._changeRenderObjectByMaterial=function(e,t){var i=this._render._renderElements[e];t||(t=MS.defaultMaterial);var n=this._geometryFilter.sharedMesh.getRenderElement(e);return i._mainSortID=this._getSortID(n,t),i._sprite3D=this,i.renderObj=n,i._material=t,i},r._changeRenderObjectsByMesh=function(){var e=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=e;for(var t=0;e>t;t++)this._changeRenderObjectByMesh(t)},r._onMeshChanged=function(e){var t=e.sharedMesh;t.loaded?this._changeRenderObjectsByMesh():t.once("loaded",this,this._onMeshLoaded)},r._onMeshLoaded=function(e){e===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},r._onMaterialChanged=function(e,t,i){var n=this._render._renderElements.length;n>t&&this._changeRenderObjectByMaterial(t,i)},r._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},r._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},r._parseCustomProps=function(e,t,i,n){var o=this.meshRender,s=i.lightmapIndex;null!=s&&(o.lightmapIndex=s);var r=i.lightmapScaleOffset;r&&(o.lightmapScaleOffset=new el(r[0],r[1],r[2],r[3]));var a,l;if(n.instanceParams)a=n.instanceParams.loadPath,a&&(l=Tu.getRes(t[a]),this.meshFilter.sharedMesh=l,l.loaded?o.sharedMaterials=l.materials:l.once("loaded",this,this._applyMeshMaterials));else{a=i.meshPath,a&&(l=Tu.getRes(t[a]),this.meshFilter.sharedMesh=l);var h=i.materials;if(h){var c=o.sharedMaterials,u=h.length;c.length=u;for(var d=0;u>d;d++)c[d]=Tu.getRes(t[h[d].path]);o.sharedMaterials=c}}},r._applyMeshMaterials=function(e){for(var t=this._render.sharedMaterials,i=e.materials,n=0,o=i.length;o>n;n++)t[n]||(t[n]=i[n]);this._render.sharedMaterials=t},r._addToInitStaticBatchManager=function(){t._staticBatchManager._addInitBatchSprite(this)},r.cloneTo=function(e){var t=e;t._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var i=this._render,n=t._render;n.enable=i.enable,n.sharedMaterials=i.sharedMaterials,n.castShadow=i.castShadow;var o=i.lightmapScaleOffset;o&&(n.lightmapScaleOffset=o.clone()),n.lightmapIndex=i.lightmapIndex,n.receiveShadow=i.receiveShadow,n.sortingFudge=i.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e)},r.destroy=function(t){if(void 0===t&&(t=!0),!this.destroyed){var i=this.meshFilter.sharedMesh;i.loaded||i.off("loaded",this,this._applyMeshMaterials),e.prototype.destroy.call(this,t),this._geometryFilter._destroy()}},s(0,r,"meshRender",function(){return this._render}),s(0,r,"meshFilter",function(){return this._geometryFilter}),t.__init__=function(){ql._staticBatchManagers.push(t._staticBatchManager)},t.load=function(e){return i.loader.create(e,null,null,t)},n(t,["_staticBatchManager",function(){return this._staticBatchManager=new Dd}]),t}(_w),Uw=(function(e){function t(){t.__super.call(this),this._render=new Dx(this),this._render.on("materialchanged",this,this._onMaterialChanged);var e=new OS;this._render.sharedMaterial=e,this._geometryFilter=new Gx(this),e.renderMode=8,this._changeRenderObject(0)}o(t,"laya.d3.core.glitter.Glitter",e);var i=t.prototype;return i._changeRenderObject=function(e){var t=this._render._renderElements,i=t[e];i||(i=t[e]=new _a),i._render=this._render;var n=this._render.sharedMaterials[e];n||(n=OS.defaultMaterial);var o=this._geometryFilter;return i._mainSortID=0,i._sprite3D=this,i.renderObj=o,i._material=n,i},i._onMaterialChanged=function(e,t,i){var n=e._renderElements.length;n>t&&this._changeRenderObject(t)},i._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},i._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},i._update=function(t){this._geometryFilter._update(t.elapsedTime),e.prototype._update.call(this,t)},i.addGlitterByPositions=function(e,t){this._geometryFilter.addVertexPosition(e,t)},i.addGlitterByPositionsVelocitys=function(e,t,i,n){this._geometryFilter.addVertexPositionVelocity(e,t,i,n)},i.cloneTo=function(e){var t=e,i=t.templet,n=this._geometryFilter;i.lifeTime=n.lifeTime,i.minSegmentDistance=n.minSegmentDistance,i.minInterpDistance=n.minInterpDistance,i.maxSlerpCount=n.maxSlerpCount,i._maxSegments=n._maxSegments;var o=t._render,s=this._render;o.sharedMaterials=s.sharedMaterials,o.enable=s.enable,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e)},i.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._geometryFilter._destroy(),this._geometryFilter=null)},s(0,i,"glitterRender",function(){return this._render}),s(0,i,"templet",function(){return this._geometryFilter}),t.CURRENTTIME=2,t.DURATION=3,t}(_w),function(e){function t(){t.__super.call(this),this._geometryFilter=new Px(this),this._render=new Rx(this),this._changeRenderObjectsByMaterial(this._render,0,TS.defaultMaterial),this._render.on("materialchanged",this,this._changeRenderObjectsByMaterial),this._geometryFilter.on("trailfilterchange",this,this._changeRenderObjectsByRenderElement)}o(t,"laya.d3.core.trail.TrailSprite3D",e);var i=t.prototype;return i._changeRenderObjectsByMaterial=function(e,t,i){var n=this._geometryFilter.getRenderElementsCount();this._render._renderElements.length=n;for(var o=0;n>o;o++)this._changeRenderObjectByMaterial(o,i)},i._changeRenderObjectByMaterial=function(e,t){var i=this._render._renderElements;t||(t=TS.defaultMaterial);var n=i[e];n||(n=i[e]=new _a),n._sprite3D=this,n.renderObj=this._geometryFilter.getRenderElement(e),n._render=this._render,n._material=t},i._changeRenderObjectsByRenderElement=function(e,t){var i=this._render._renderElements,n=i[e];n||(n=i[e]=new _a),n._sprite3D=this,n.renderObj=t,n._render=this._render,n._material=this._render.sharedMaterial},i._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},i._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},i._update=function(t){e.prototype._update.call(this,t),this._geometryFilter._update(t)},i._parseCustomProps=function(e,t,i,n){var o=this._render,s=this._geometryFilter,r=0,a=0,l=i.materials;if(l){var h=o.sharedMaterials,c=l.length;for(h.length=c,r=0;c>r;r++)h[r]=Tu.getRes(t[l[r].path]);o.sharedMaterials=h}var u=n.props;s.time=u.time,s.minVertexDistance=u.minVertexDistance,s.widthMultiplier=u.widthMultiplier,s.textureMode=u.textureMode;var d=[],p=i.widthCurve;for(r=0,a=p.length;a>r;r++){var f=new ha;f.time=p[r].time,f.inTangent=p[r].inTangent,f.outTangent=p[r].outTangent,f.value=p[r].value,d.push(f)}s.widthCurve=d;var _=i.colorGradient,m=new da;m.mode=_.mode;var g,v,y=[],b=_.colorKeys;for(r=0,a=b.length;a>r;r++)v=b[r],g=new pa(new ca(v.value[0],v.value[1],v.value[2],1),v.time),y.push(g);var E,x,S=[],w=_.alphaKeys;for(r=0,a=w.length;a>r;r++)x=w[r],E=new ua(x.value,x.time),S.push(E);m.setKeys(y,S),s.colorGradient=m},i.reset=function(){this.trailFilter.reset()},i.cloneTo=function(e){laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e);var t=0,i=0,n=e,o=n.trailFilter;o.time=this.trailFilter.time,o.minVertexDistance=this.trailFilter.minVertexDistance,o.widthMultiplier=this.trailFilter.widthMultiplier;var s=this.trailFilter.widthCurve,r=[];for(t=0,i=s.length;i>t;t++){var a=new ha;s[t].cloneTo(a),r.push(a)}o.widthCurve=r;var l=new da;this.trailFilter.colorGradient.cloneTo(l),o.colorGradient=l,o.textureMode=this.trailFilter.textureMode;var h=n.trailRender;h.sharedMaterial=this.trailRender.sharedMaterial},i.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._geometryFilter._destroy(),this._geometryFilter=null)},s(0,i,"trailRender",function(){return this._render}),s(0,i,"trailFilter",function(){return this._geometryFilter}),t.__init__=function(){t.SHADERDEFINE_GRADIENTMODE_BLEND=t.shaderDefines.registerDefine("GRADIENTMODE_BLEND")},t.CURTIME=3,t.LIFETIME=4,t.WIDTHCURVE=5,t.WIDTHCURVEKEYLENGTH=6,t.GRADIENTCOLORKEY=7,t.GRADIENTALPHAKEY=8,t.SHADERDEFINE_GRADIENTMODE_BLEND=0,n(t,["shaderDefines",function(){return this.shaderDefines=new ml(_w.shaderDefines)}]),t}(_w)),zw=function(e){function t(e,i,n){void 0===e&&(e=0),void 0===i&&(i=.3),void 0===n&&(n=1e3),this._viewMatrix=new ol,this._projectionMatrix=new ol,this._projectionViewMatrix=new ol,this._viewport=new $a(0,0,0,0),this._normalizedViewport=new $a(0,0,1,1),this._aspectRatio=e,this._boundFrustumUpdate=!0,this._boundFrustum=new ll(ol.DEFAULT),t.__super.call(this,i,n),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}o(t,"laya.d3.core.Camera",e);var r=t.prototype;return r._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},r._parseCustomProps=function(e,t,i,n){var o=i.clearColor;this.clearColor=new el(o[0],o[1],o[2],o[3]);var s=i.viewport;this.normalizedViewport=new $a(s[0],s[1],s[2],s[3])},r._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var e=this.orthographicVerticalSize*this.aspectRatio*.5,t=.5*this.orthographicVerticalSize;ol.createOrthoOffCenterRH(-e,e,-t,t,this.nearPlane,this.farPlane,this._projectionMatrix)}else ol.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},r._update=function(e){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,e)},r._renderCamera=function(e,t,i){i.parallelSplitShadowMaps[0]&&i._renderShadowMap(e,t,this),t.camera=this,this._prepareCameraToRender(),i._preRenderUpdateComponents(t);var n,o;n=t._viewMatrix=this.viewMatrix;var s=this._renderTarget;s?(s.start(),ol.multiply(mw._invertYScaleMatrix,this._projectionMatrix,mw._invertYProjectionMatrix),ol.multiply(mw._invertYScaleMatrix,this.projectionViewMatrix,mw._invertYProjectionViewMatrix),o=t._projectionMatrix=mw._invertYProjectionMatrix,t._projectionViewMatrix=mw._invertYProjectionViewMatrix):(o=t._projectionMatrix=this._projectionMatrix,t._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(n,o),t._viewport=this.viewport,i._preRenderScene(e,t,this.boundFrustum),i._clear(e,t),i._renderScene(e,t),i._postRenderUpdateComponents(t),s&&s.end()},r.viewportPointToRay=function(e,t){Xa.calculateCursorRay(e,this.viewport,this._projectionMatrix,this.viewMatrix,null,t)},r.normalizedViewportPointToRay=function(e,i){var n=t._tempVector20,o=this.viewport,s=e.elements,r=n.elements;r[0]=s[0]*o.width,r[1]=s[1]*o.height,Xa.calculateCursorRay(n,this.viewport,this._projectionMatrix,this.viewMatrix,null,i)},r.worldToViewportPoint=function(e,t){ol.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(e,this._projectionViewMatrix,t);var n=t.elements;n[0]=n[0]/i.stage.clientScaleX,n[1]=n[1]/i.stage.clientScaleY},r.worldToNormalizedViewportPoint=function(e,t){ol.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(e,this._projectionViewMatrix,t);var n=t.elements;n[0]=n[0]/i.stage.clientScaleX,n[1]=n[1]/i.stage.clientScaleY},r.convertScreenCoordToOrthographicCoord=function(e,t){if(this._orthographic){var i=ma.clientWidth,n=ma.clientHeight,o=this.orthographicVerticalSize*this.aspectRatio/i,s=this.orthographicVerticalSize/n,r=e.elements,a=t.elements;return a[0]=(-i/2+r[0])*o,a[1]=(n/2-r[1])*s,a[2]=(this.nearPlane-this.farPlane)*(r[2]+1)/2-this.nearPlane,rl.transformCoordinate(t,this.transform.worldMatrix,t),!0}return!1},s(0,r,"projectionViewMatrix",function(){return ol.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),s(0,r,"projectionMatrix",function(){return this._projectionMatrix},function(e){this._projectionMatrix=e,this._useUserProjectionMatrix=!0}),s(0,r,"viewport",function(){if(this._viewportExpressedInClipSpace){var e=this._normalizedViewport,t=this.renderTargetSize,i=t.width,n=t.height;this._viewport.x=e.x*i,this._viewport.y=e.y*n,this._viewport.width=e.width*i,this._viewport.height=e.height*n}return this._viewport},function(e){if(null!=this.renderTarget&&(e.x<0||e.y<0||0==e.width||0==e.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=e,this._calculateProjectionMatrix()}),s(0,r,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),s(0,r,"needViewport",function(){var e=this.normalizedViewport;return 0===e.x&&0===e.y&&1===e.width&&1===e.height}),s(0,r,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var e=this._viewport,t=this.renderTargetSize,i=t.width,n=t.height;this._normalizedViewport.x=e.x/i,this._normalizedViewport.y=e.y/n,this._normalizedViewport.width=e.width/i,this._normalizedViewport.height=e.height/n}return this._normalizedViewport},function(e){e.x<0&&(e.x=0,console.warn("Camera: viewport.x must large than 0.0.")),e.y<0&&(e.y=0,console.warn("Camera: viewport.y must large than 0.0.")),
e.x+e.width>1&&(e.width=1-e.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),e.y+e.height>1&&(e.height=1-e.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=e,this._calculateProjectionMatrix()}),s(0,r,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),s(0,r,"aspectRatio",function(){if(0===this._aspectRatio){var e=this.viewport;return e.width/e.height}return this._aspectRatio},function(e){if(0>e)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=e,this._calculateProjectionMatrix()}),n(t,["_tempVector20",function(){return this._tempVector20=new ul}]),t}(mw),Ww=function(e){function t(e){t.__super.call(this),this._render=new Ox(this),this._render.on("materialchanged",this,this._onMaterialChanged),this._geometryFilter=new Mx(this),this._createRenderElement(0),e&&(this._render.sharedMaterial=e)}o(t,"laya.d3.core.particleShuriKen.ShuriKenParticle3D",e);var r=t.prototype;return r._initParticleVelocity=function(e){for(var t=new ka,i=e.velocitys,n=0,o=i.length;o>n;n++){var s=i[n];t.add(s.key,s.value)}return t},r._initParticleColor=function(e){var t=new Ia,i=e.alphas,n=0,o=0;for(n=0,o=i.length;o>n;n++){var s=i[n];t.addAlpha(s.key,s.value)}var r=e.rgbs;for(n=0,o=r.length;o>n;n++){var a=r[n],l=a.value;t.addRGB(a.key,new rl(l[0],l[1],l[2]))}return t},r._initParticleSize=function(e){for(var t=new ka,i=e.sizes,n=0,o=i.length;o>n;n++){var s=i[n];t.add(s.key,s.value)}return t},r._initParticleRotation=function(e){for(var t=new ka,i=e.angularVelocitys,n=0,o=i.length;o>n;n++){var s=i[n];t.add(s.key,s.value/180*Math.PI)}return t},r._initParticleFrame=function(e){for(var t=new Ma,i=e.frames,n=0,o=i.length;o>n;n++){var s=i[n];t.add(s.key,s.value)}return t},r._createRenderElement=function(e){var t=this._render._renderElements,i=t[e]=new _a;i._render=this._render;var n=this._render.sharedMaterials[e];n||(n=NS.defaultMaterial);var o=this._geometryFilter;i._mainSortID=0,i._sprite3D=this,i.renderObj=o,i._material=n},r._onMaterialChanged=function(e,t,i){var n=e._renderElements;if(t<n.length){var o=n[t];o._material=i||NS.defaultMaterial}},r._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},r._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},r._parseCustomProps=function(e,i,n,o){var s,r=Math.PI/180,a=0,l=0,h=this.particleRender,c=n.material;if(c)s=Tu.getRes(i[c.path]);else{var u=n.materialPath;u?s=Tu.getRes(i[u]):(s=new NS,s.diffuseTexture=i?Tu.getRes(i[n.texturePath]):zS.load(n.texturePath))}h.sharedMaterial=s;var d=n.meshPath;d&&(h.mesh=Tu.getRes(i[d])),h.renderMode=n.renderMode,h.stretchedBillboardCameraSpeedScale=n.stretchedBillboardCameraSpeedScale,h.stretchedBillboardSpeedScale=n.stretchedBillboardSpeedScale,h.stretchedBillboardLengthScale=n.stretchedBillboardLengthScale,h.sortingFudge=n.sortingFudge?n.sortingFudge:0;var p=this.particleSystem;p.isPerformanceMode=n.isPerformanceMode,p.duration=n.duration,p.looping=n.looping,p.prewarm=n.prewarm,p.startDelayType=n.startDelayType,p.startDelay=n.startDelay,p.startDelayMin=n.startDelayMin,p.startDelayMax=n.startDelayMax,p.startLifetimeType=n.startLifetimeType,p.startLifetimeConstant=n.startLifetimeConstant,p.startLifeTimeGradient=t._initStartLife(n.startLifetimeGradient),p.startLifetimeConstantMin=n.startLifetimeConstantMin,p.startLifetimeConstantMax=n.startLifetimeConstantMax,p.startLifeTimeGradientMin=t._initStartLife(n.startLifetimeGradientMin),p.startLifeTimeGradientMax=t._initStartLife(n.startLifetimeGradientMax),p.startSpeedType=n.startSpeedType,p.startSpeedConstant=n.startSpeedConstant,p.startSpeedConstantMin=n.startSpeedConstantMin,p.startSpeedConstantMax=n.startSpeedConstantMax,p.threeDStartSize=n.threeDStartSize,p.startSizeType=n.startSizeType,p.startSizeConstant=n.startSizeConstant;var f=n.startSizeConstantSeparate,_=p.startSizeConstantSeparate.elements;_[0]=f[0],_[1]=f[1],_[2]=f[2],p.startSizeConstantMin=n.startSizeConstantMin,p.startSizeConstantMax=n.startSizeConstantMax;var m=n.startSizeConstantMinSeparate,g=p.startSizeConstantMinSeparate.elements;g[0]=m[0],g[1]=m[1],g[2]=m[2];var v=n.startSizeConstantMaxSeparate,y=p.startSizeConstantMaxSeparate.elements;y[0]=v[0],y[1]=v[1],y[2]=v[2],p.threeDStartRotation=n.threeDStartRotation,p.startRotationType=n.startRotationType,p.startRotationConstant=n.startRotationConstant*r;var b=n.startRotationConstantSeparate,E=p.startRotationConstantSeparate.elements;E[0]=b[0]*r,E[1]=b[1]*r,E[2]=b[2]*r,p.startRotationConstantMin=n.startRotationConstantMin*r,p.startRotationConstantMax=n.startRotationConstantMax*r;var x=n.startRotationConstantMinSeparate,S=p.startRotationConstantMinSeparate.elements;S[0]=x[0]*r,S[1]=x[1]*r,S[2]=x[2]*r;var w=n.startRotationConstantMaxSeparate,C=p.startRotationConstantMaxSeparate.elements;C[0]=w[0]*r,C[1]=w[1]*r,C[2]=w[2]*r,p.randomizeRotationDirection=n.randomizeRotationDirection,p.startColorType=n.startColorType;var T=n.startColorConstant,I=p.startColorConstant.elements;I[0]=T[0],I[1]=T[1],I[2]=T[2],I[3]=T[3];var A=n.startColorConstantMin,N=p.startColorConstantMin.elements;N[0]=A[0],N[1]=A[1],N[2]=A[2],N[3]=A[3];var P=n.startColorConstantMax,R=p.startColorConstantMax.elements;R[0]=P[0],R[1]=P[1],R[2]=P[2],R[3]=P[3],p.gravityModifier=n.gravityModifier,p.simulationSpace=n.simulationSpace,p.scaleMode=n.scaleMode,p.playOnAwake=n.playOnAwake,p.maxParticles=n.maxParticles;var L=n.autoRandomSeed;null!=L&&(p.autoRandomSeed=L);var O=n.randomSeed;null!=O&&(p.randomSeed[0]=O);var M=n.emission,D=p.emission;if(M){D.emissionRate=M.emissionRate;var k=M.bursts;if(k)for(a=0,l=k.length;l>a;a++){var B=k[a];D.addBurst(new Sa(B.time,B.min,B.max))}D.enbale=M.enable}else D.enbale=!1;var V=n.shape;if(V){var F;switch(V.shapeType){case 0:var G;F=G=new Od,G.radius=V.sphereRadius,G.emitFromShell=V.sphereEmitFromShell,G.randomDirection=V.sphereRandomDirection;break;case 1:var H;F=H=new Nd,H.radius=V.hemiSphereRadius,H.emitFromShell=V.hemiSphereEmitFromShell,H.randomDirection=V.hemiSphereRandomDirection;break;case 2:var U;F=U=new Ld,U.angle=V.coneAngle*r,U.radius=V.coneRadius,U.length=V.coneLength,U.emitType=V.coneEmitType,U.randomDirection=V.coneRandomDirection;break;case 3:var z;F=z=new Rd,z.x=V.boxX,z.y=V.boxY,z.z=V.boxZ,z.randomDirection=V.boxRandomDirection;break;case 7:var W;F=W=new Pd,W.radius=V.circleRadius,W.arc=V.circleArc*r,W.emitFromEdge=V.circleEmitFromEdge,W.randomDirection=V.circleRandomDirection;break;default:var Y;F=Y=new Pd,Y.radius=V.circleRadius,Y.arc=V.circleArc*r,Y.emitFromEdge=V.circleEmitFromEdge,Y.randomDirection=V.circleRandomDirection}F.enable=V.enable,p.shape=F}var q=n.velocityOverLifetime;if(q){var K,X=q.velocity;switch(X.type){case 0:var Q=X.constant;K=Da.createByConstant(new rl(Q[0],Q[1],Q[2]));break;case 1:K=Da.createByGradient(this._initParticleVelocity(X.gradientX),this._initParticleVelocity(X.gradientY),this._initParticleVelocity(X.gradientZ));break;case 2:var j=X.constantMin,Z=X.constantMax;K=Da.createByRandomTwoConstant(new rl(j[0],j[1],j[2]),new rl(Z[0],Z[1],Z[2]));break;case 3:K=Da.createByRandomTwoGradient(this._initParticleVelocity(X.gradientXMin),this._initParticleVelocity(X.gradientXMax),this._initParticleVelocity(X.gradientYMin),this._initParticleVelocity(X.gradientYMax),this._initParticleVelocity(X.gradientZMin),this._initParticleVelocity(X.gradientZMax))}var J=new Na(K);J.space=q.space,J.enbale=q.enable,p.velocityOverLifetime=J}var $=n.colorOverLifetime;if($){var ee,te=$.color;switch(te.type){case 0:var ie=te.constant;ee=Aa.createByConstant(new el(ie[0],ie[1],ie[2],ie[3]));break;case 1:ee=Aa.createByGradient(this._initParticleColor(te.gradient));break;case 2:var ne=te.constantMin,oe=te.constantMax;ee=Aa.createByRandomTwoConstant(new el(ne[0],ne[1],ne[2],ne[3]),new el(oe[0],oe[1],oe[2],oe[3]));break;case 3:ee=Aa.createByRandomTwoGradient(this._initParticleColor(te.gradientMin),this._initParticleColor(te.gradientMax))}var se=new Ra(ee);se.enbale=$.enable,p.colorOverLifetime=se}var re=n.sizeOverLifetime;if(re){var ae,le=re.size;switch(le.type){case 0:ae=le.separateAxes?La.createByGradientSeparate(this._initParticleSize(le.gradientX),this._initParticleSize(le.gradientY),this._initParticleSize(le.gradientZ)):La.createByGradient(this._initParticleSize(le.gradient));break;case 1:if(le.separateAxes){var he=le.constantMinSeparate,ce=le.constantMaxSeparate;ae=La.createByRandomTwoConstantSeparate(new rl(he[0],he[1],he[2]),new rl(ce[0],ce[1],ce[2]))}else ae=La.createByRandomTwoConstant(le.constantMin,le.constantMax);break;case 2:ae=le.separateAxes?La.createByRandomTwoGradientSeparate(this._initParticleSize(le.gradientXMin),this._initParticleSize(le.gradientYMin),this._initParticleSize(le.gradientZMin),this._initParticleSize(le.gradientXMax),this._initParticleSize(le.gradientYMax),this._initParticleSize(le.gradientZMax)):La.createByRandomTwoGradient(this._initParticleSize(le.gradientMin),this._initParticleSize(le.gradientMax))}var ue=new Ca(ae);ue.enbale=re.enable,p.sizeOverLifetime=ue}var de=n.rotationOverLifetime;if(de){var pe,fe=de.angularVelocity;switch(fe.type){case 0:fe.separateAxes||(pe=wa.createByConstant(fe.constant*r));break;case 1:fe.separateAxes||(pe=wa.createByGradient(this._initParticleRotation(fe.gradient)));break;case 2:if(fe.separateAxes){var _e=fe.constantMinSeparate,me=fe.constantMaxSeparate;pe=wa.createByRandomTwoConstantSeparate(new rl(_e[0]*r,_e[1]*r,_e[2]*r),new rl(me[0]*r,me[1]*r,me[2]*r))}else pe=wa.createByRandomTwoConstant(fe.constantMin*r,fe.constantMax*r);break;case 3:fe.separateAxes||(pe=wa.createByRandomTwoGradient(this._initParticleRotation(fe.gradientMin),this._initParticleRotation(fe.gradientMax)))}var ge=new Pa(pe);ge.enbale=de.enable,p.rotationOverLifetime=ge}var ve=n.textureSheetAnimation;if(ve){var ye,be=ve.frame;switch(be.type){case 0:ye=ya.createByConstant(be.constant);break;case 1:ye=ya.createByOverTime(this._initParticleFrame(be.overTime));break;case 2:ye=ya.createByRandomTwoConstant(be.constantMin,be.constantMax);break;case 3:ye=ya.createByRandomTwoOverTime(this._initParticleFrame(be.overTimeMin),this._initParticleFrame(be.overTimeMax))}var Ee,xe=ve.startFrame;switch(xe.type){case 0:Ee=Oa.createByConstant(xe.constant);break;case 1:Ee=Oa.createByRandomTwoConstant(xe.constantMin,xe.constantMax)}var Se=new ba(ye,Ee);Se.enable=ve.enable;var we=ve.tiles;Se.tiles=new ul(we[0],we[1]),Se.type=ve.type,Se.randomRow=ve.randomRow;var Ce=ve.rowIndex;void 0!==Ce&&(Se.rowIndex=Ce),Se.cycles=ve.cycles,p.textureSheetAnimation=Se}},r._activeHierarchy=function(){laya.d3.core.Sprite3D.prototype._activeHierarchy.call(this),this.particleSystem.playOnAwake&&this.particleSystem.play()},r._inActiveHierarchy=function(){laya.d3.core.Sprite3D.prototype._inActiveHierarchy.call(this),this.particleSystem.isAlive&&this.particleSystem.simulate(0,!0)},r.cloneTo=function(e){var t=e,i=t._geometryFilter;this._geometryFilter.cloneTo(i);var n=t._render,o=this._render;n.sharedMaterials=o.sharedMaterials,n.enable=o.enable,n.renderMode=o.renderMode,n.mesh=o.mesh,n.stretchedBillboardCameraSpeedScale=o.stretchedBillboardCameraSpeedScale,n.stretchedBillboardSpeedScale=o.stretchedBillboardSpeedScale,n.stretchedBillboardLengthScale=o.stretchedBillboardLengthScale,n.sortingFudge=o.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e)},r.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._geometryFilter._destroy(),this._geometryFilter=null)},s(0,r,"particleRender",function(){return this._render}),s(0,r,"particleSystem",function(){return this._geometryFilter}),t.__init__=function(){t.SHADERDEFINE_RENDERMODE_BILLBOARD=t.shaderDefines.registerDefine("SPHERHBILLBOARD"),t.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=t.shaderDefines.registerDefine("STRETCHEDBILLBOARD"),t.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=t.shaderDefines.registerDefine("HORIZONTALBILLBOARD"),t.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=t.shaderDefines.registerDefine("VERTICALBILLBOARD"),t.SHADERDEFINE_COLOROVERLIFETIME=t.shaderDefines.registerDefine("COLOROVERLIFETIME"),t.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=t.shaderDefines.registerDefine("RANDOMCOLOROVERLIFETIME"),t.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=t.shaderDefines.registerDefine("VELOCITYOVERLIFETIMECONSTANT"),t.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=t.shaderDefines.registerDefine("VELOCITYOVERLIFETIMECURVE"),t.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=t.shaderDefines.registerDefine("VELOCITYOVERLIFETIMERANDOMCONSTANT"),t.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=t.shaderDefines.registerDefine("VELOCITYOVERLIFETIMERANDOMCURVE"),t.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=t.shaderDefines.registerDefine("TEXTURESHEETANIMATIONCURVE"),t.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=t.shaderDefines.registerDefine("TEXTURESHEETANIMATIONRANDOMCURVE"),t.SHADERDEFINE_ROTATIONOVERLIFETIME=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIME"),t.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMESEPERATE"),t.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMECONSTANT"),t.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMECURVE"),t.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMERANDOMCURVES"),t.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMERANDOMCURVES"),t.SHADERDEFINE_SIZEOVERLIFETIMECURVE=t.shaderDefines.registerDefine("SIZEOVERLIFETIMECURVE"),t.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=t.shaderDefines.registerDefine("SIZEOVERLIFETIMECURVESEPERATE"),t.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=t.shaderDefines.registerDefine("SIZEOVERLIFETIMERANDOMCURVES"),t.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=t.shaderDefines.registerDefine("SIZEOVERLIFETIMERANDOMCURVESSEPERATE"),t.SHADERDEFINE_RENDERMODE_MESH=t.shaderDefines.registerDefine("RENDERMODE_MESH"),t.SHADERDEFINE_SHAPE=t.shaderDefines.registerDefine("SHAPE")},t.load=function(e){return i.loader.create(e,null,null,t)},t._initStartLife=function(e){for(var t=new ka,i=e.startLifetimes,n=0,o=i.length;o>n;n++){var s=i[n];t.add(s.key,s.value)}return t},t.SHADERDEFINE_RENDERMODE_BILLBOARD=0,t.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=0,t.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=0,t.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=0,t.SHADERDEFINE_COLOROVERLIFETIME=0,t.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=0,t.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=0,t.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=0,t.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=0,t.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=0,t.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=0,t.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=0,t.SHADERDEFINE_ROTATIONOVERLIFETIME=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=0,t.SHADERDEFINE_SIZEOVERLIFETIMECURVE=0,t.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=0,t.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=0,t.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=0,t.SHADERDEFINE_RENDERMODE_MESH=0,t.SHADERDEFINE_SHAPE=0,t.WORLDPOSITION=0,t.WORLDROTATION=1,t.POSITIONSCALE=4,t.SIZESCALE=5,t.SCALINGMODE=6,t.GRAVITY=7,t.THREEDSTARTROTATION=8,t.STRETCHEDBILLBOARDLENGTHSCALE=9,t.STRETCHEDBILLBOARDSPEEDSCALE=10,t.SIMULATIONSPACE=11,t.CURRENTTIME=12,t.VOLVELOCITYCONST=13,t.VOLVELOCITYGRADIENTX=14,t.VOLVELOCITYGRADIENTY=15,t.VOLVELOCITYGRADIENTZ=16,t.VOLVELOCITYCONSTMAX=17,t.VOLVELOCITYGRADIENTXMAX=18,t.VOLVELOCITYGRADIENTYMAX=19,t.VOLVELOCITYGRADIENTZMAX=20,t.VOLSPACETYPE=21,t.COLOROVERLIFEGRADIENTALPHAS=22,t.COLOROVERLIFEGRADIENTCOLORS=23,t.MAXCOLOROVERLIFEGRADIENTALPHAS=24,t.MAXCOLOROVERLIFEGRADIENTCOLORS=25,t.SOLSIZEGRADIENT=26,t.SOLSIZEGRADIENTX=27,t.SOLSIZEGRADIENTY=28,t.SOLSizeGradientZ=29,t.SOLSizeGradientMax=30,t.SOLSIZEGRADIENTXMAX=31,t.SOLSIZEGRADIENTYMAX=32,t.SOLSizeGradientZMAX=33,t.ROLANGULARVELOCITYCONST=34,t.ROLANGULARVELOCITYCONSTSEPRARATE=35,t.ROLANGULARVELOCITYGRADIENT=36,t.ROLANGULARVELOCITYGRADIENTX=37,t.ROLANGULARVELOCITYGRADIENTY=38,t.ROLANGULARVELOCITYGRADIENTZ=39,t.ROLANGULARVELOCITYGRADIENTW=40,t.ROLANGULARVELOCITYCONSTMAX=41,t.ROLANGULARVELOCITYCONSTMAXSEPRARATE=42,t.ROLANGULARVELOCITYGRADIENTMAX=43,t.ROLANGULARVELOCITYGRADIENTXMAX=44,t.ROLANGULARVELOCITYGRADIENTYMAX=45,t.ROLANGULARVELOCITYGRADIENTZMAX=46,t.ROLANGULARVELOCITYGRADIENTWMAX=47,t.TEXTURESHEETANIMATIONCYCLES=48,t.TEXTURESHEETANIMATIONSUBUVLENGTH=49,t.TEXTURESHEETANIMATIONGRADIENTUVS=50,t.TEXTURESHEETANIMATIONGRADIENTMAXUVS=51,n(t,["shaderDefines",function(){return this.shaderDefines=new ml(_w.shaderDefines)}]),t}(_w),Yw=function(e){function t(e,i){this._subMeshOffset=null,t.__super.call(this,i),this._subMeshOffset=[],this._geometryFilter=new Lx(this),this._render=new QS(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),e&&(this._geometryFilter.sharedMesh=e)}o(t,"laya.d3.core.SkinnedMeshSprite3D",e);var r=t.prototype;return r._changeRenderObjectByMesh=function(e){var t=this._render._renderElements,i=t[e];i||(i=t[e]=new Ad),i._render=this._render;var n=this._render.sharedMaterials[e];n||(n=MS.defaultMaterial);var o=this._geometryFilter.sharedMesh.getRenderElement(e);return i._mainSortID=this._getSortID(o,n),i._sprite3D=this,i.renderObj=o,i._material=n,i},r._changeRenderObjectByMaterial=function(e,t){var i=this._render._renderElements[e];t||(t=MS.defaultMaterial);var n=this._geometryFilter.sharedMesh.getRenderElement(e);return i._mainSortID=this._getSortID(n,t),i._sprite3D=this,i.renderObj=n,i._material=t,i},r._changeRenderObjectsByMesh=function(){var e=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=e;for(var t=0;e>t;t++)this._changeRenderObjectByMesh(t)},r._onMeshChanged=function(e){var t=e.sharedMesh;t.loaded?this._changeRenderObjectsByMesh():t.once("loaded",this,this._changeRenderObjectsByMesh)},r._onMaterialChanged=function(e,t,i){var n=this._render._renderElements.length;n>t&&this._changeRenderObjectByMaterial(t,i)},r._parseCustomProps=function(e,t,i,n){var o=this.skinnedMeshRender,s=i.lightmapIndex;null!=s&&(o.lightmapIndex=s);var r=i.lightmapScaleOffset;r&&(o.lightmapScaleOffset=new el(r[0],r[1],r[2],r[3]));var a,l;if(n.instanceParams)a=n.instanceParams.loadPath,a&&(l=Tu.getRes(t[a]),this.meshFilter.sharedMesh=l,l.loaded?o.sharedMaterials=l.materials:l.once("loaded",this,this._applyMeshMaterials));else{a=i.meshPath,a&&(l=Tu.getRes(t[a]),this.meshFilter.sharedMesh=l);var h=i.materials;if(h){var c=o.sharedMaterials,u=h.length;c.length=u;for(var d=0;u>d;d++)c[d]=Tu.getRes(t[h[d].path]);o.sharedMaterials=c}var p=i.rootBone;p&&o._setRootBone(p);var f=i.boundBox;if(f){var _=f.min,m=f.max,g=new nl(new rl(_[0],_[1],_[2]),new rl(m[0],m[1],m[2]));o.localBoundBox=g}else o._hasIndependentBound=!1;var v=i.boundSphere;if(v){var y=v.center,b=new hl(new rl(y[0],y[1],y[2]),v.radius);o.localBoundSphere=b}}},r._changeHierarchyAnimator=function(e){if(e){var t=this.skinnedMeshRender;t._setCacheAnimator(e);var i=e.avatar;i&&t._setCacheAvatar(i)}laya.d3.core.Sprite3D.prototype._changeHierarchyAnimator.call(this,e)},r._clearSelfRenderObjects=function(){this._scene.removeFrustumCullingObject(this._render)},r._addSelfRenderObjects=function(){this._scene.addFrustumCullingObject(this._render)},r._applyMeshMaterials=function(e){for(var t=this._render.sharedMaterials,i=e.materials,n=0,o=i.length;o>n;n++)t[n]||(t[n]=i[n]);this._render.sharedMaterials=t},r.cloneTo=function(e){var t=e;t._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var i=this._render,n=t._render;n.enable=i.enable,n.sharedMaterials=i.sharedMaterials,n.castShadow=i.castShadow;var o=i.lightmapScaleOffset;o&&(n.lightmapScaleOffset=o.clone()),n.receiveShadow=i.receiveShadow,n.sortingFudge=i.sortingFudge,n._rootBone=i._rootBone;var s=i.localBoundSphere;s&&(n.localBoundSphere=s.clone());var r=i.localBoundBox;r&&(n.localBoundBox=r.clone()),n._hasIndependentBound=i._hasIndependentBound,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e)},r.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._geometryFilter._destroy())},s(0,r,"skinnedMeshRender",function(){return this._render}),s(0,r,"meshFilter",function(){return this._geometryFilter}),t.__init__=function(){t.SHADERDEFINE_BONE=t.shaderDefines.registerDefine("BONE")},t.load=function(e){return i.loader.create(e,null,null,t)},t.SHADERDEFINE_BONE=8,t.BONES=0,n(t,["shaderDefines",function(){return this.shaderDefines=new ml(_w.shaderDefines)}]),t}(_w),qw=function(e){function t(e,i,n,o,s,r,a,l){t.__super.call(this,l),this._geometryFilter=new Vx(this,e,i,n,o,s,r,a),this._render=new Fx(this)}o(t,"laya.d3.terrain.TerrainChunk",e);var n=t.prototype;return n.buildRenderElementAndMaterial=function(e,t,i,n,o,s,r,a,l,h,c,u,d,p,f,_,m,g){void 0===c&&(c=1),void 0===u&&(u=1),void 0===d&&(d=1),void 0===p&&(p=1),void 0===f&&(f=1),void 0===_&&(_=1),void 0===m&&(m=1),void 0===g&&(g=1);var v=new BS;l&&(v.diffuseColor=l),a&&(v.ambientColor=a),h&&(v.specularColor=h),v.splatAlphaTexture=Tu.getRes(i),v.normalTexture=t?Tu.getRes(t):null,v.diffuseTexture1=n?Tu.getRes(n):null,v.diffuseTexture2=o?Tu.getRes(o):null,v.diffuseTexture3=s?Tu.getRes(s):null,v.diffuseTexture4=r?Tu.getRes(r):null,v.setDiffuseScale1(c,u),v.setDiffuseScale2(d,p),v.setDiffuseScale3(f,_),v.setDiffuseScale4(m,g),v.setDetailNum(e),0!=this._render._renderElements.length&&(v.renderMode=2);var y=new _a;y._mainSortID=0,y._sprite3D=this,y.renderObj=this._geometryFilter,y._material=v,this._render._materials.push(v),this._render._renderElements.push(y)},n._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},n._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},n._applyMeshMaterials=function(e){for(var t=this._render.sharedMaterials,i=e.materials,n=0,o=i.length;o>n;n++)t[n]||(t[n]=i[n]);this._render.sharedMaterials=t},n.cloneTo=function(e){console.log("Terrain Chunk can't clone")},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._geometryFilter._destroy())},s(0,n,"terrainRender",function(){return this._render}),s(0,n,"terrainFilter",function(){return this._geometryFilter}),t.load=function(e){return i.loader.create(e,null,null,t,null,1,!1)},t}(_w),Kw=function(e){function t(){this._direction=null,this._updateDirection=!1,t.__super.call(this),this._updateDirection=!1,this._direction=new rl,this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChange)}o(t,"laya.d3.core.light.DirectionLight",e);var i=t.prototype;return i._initShadow=function(){if(this._shadow)this._parallelSplitShadowMap=new Va,this.scene.parallelSplitShadowMaps.push(this._parallelSplitShadowMap),this.transform.worldMatrix.getForward(this._direction),rl.normalize(this._direction,this._direction),this._parallelSplitShadowMap.setInfo(this.scene,this._shadowFarPlane,this._direction,this._shadowMapSize,this._shadowMapCount,this._shadowMapPCFType);else{var e=this.scene.parallelSplitShadowMaps;e.splice(e.indexOf(this._parallelSplitShadowMap),1),this._parallelSplitShadowMap.disposeAllRenderTarget(),this._parallelSplitShadowMap=null,this.scene.removeShaderDefine(Va.SHADERDEFINE_SHADOW_PSSM1),this.scene.removeShaderDefine(Va.SHADERDEFINE_SHADOW_PSSM2),this.scene.removeShaderDefine(Va.SHADERDEFINE_SHADOW_PSSM3)}},i._addSelfRenderObjects=function(){e.prototype._addSelfRenderObjects.call(this),this._shadow&&this._initShadow()},i._clearSelfRenderObjects=function(){var e=this.scene,t=e._shaderValues;t.setValue(4,null),t.setValue(3,null),e.removeShaderDefine(Id.SHADERDEFINE_DIRECTIONLIGHT)},i._prepareToScene=function(e){var t=e.scene;if(t.enableLight&&this._activeInHierarchy){var i=t._shaderValues;return t.addShaderDefine(Id.SHADERDEFINE_DIRECTIONLIGHT),rl.scale(this.color,this._intensity,this._intensityColor),i.setValue(4,this._intensityColor.elements),this.transform.worldMatrix.getForward(this._direction),rl.normalize(this._direction,this._direction),i.setValue(3,this._direction.elements),!0}return t.removeShaderDefine(Id.SHADERDEFINE_DIRECTIONLIGHT),!1},i._onWorldMatrixChange=function(){this._updateDirection=!0},s(0,i,"direction",function(){return console.log("Warning: discard property,please use transform's property instead."),this._updateDirection&&(this.transform.worldMatrix.getForward(this._direction),rl.normalize(this._direction,this._direction),this._updateDirection=!1),this._direction},function(e){console.log("Warning: discard property,please use transform's property instead.");var t=this.transform.worldMatrix;t.setForward(e),this.transform.worldMatrix=t,rl.normalize(e,e),this._direction=e,this.shadow&&this._parallelSplitShadowMap&&this._parallelSplitShadowMap._setGlobalParallelLightDir(this._direction)}),s(0,i,"shadow",e.prototype._$get_shadow,function(e){this._shadow!==e&&(this._shadow=e,this.scene&&this._initShadow())}),t}(gw),Xw=function(e){function t(e,i,n,o){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,this.magFifter=0,void 0===n&&(n=6408),void 0===o&&(o=!0),t.__super.call(this,e,i),this._format=n,this._mipmap=o,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof e)this._url=e,this._src=e,this._image=new Or.window.Image,i&&(i.onload&&(this.onload=i.onload),i.onerror&&(this.onerror=i.onerror),i.onCreate&&i.onCreate(this)),this._image.crossOrigin=e&&0==e.indexOf("data:")?null:"",e&&(this._image.src=e);else if(e instanceof ArrayBuffer){this._src=i,this._url=this._src;var s=new Vr(e);s.readUTFBytes(4),s.readUTFBytes(2),s.getInt16();s.endian="bigEndian",this._w=s.getInt16(),this._h=s.getInt16();s.getInt16(),s.getInt16();this._image=new Uint8Array(e,s.pos),this._format=ur.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,xr.enabled&&this._w<xr.atlasLimitWidth&&this._h<xr.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else this._src=i,this._url=this._src,this._image=e.source||e,this.onresize();this._$5__enableMerageInAtlas=!0}o(t,"laya.webgl.resource.WebGLImage",e);var n=t.prototype;return i.imps(n,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n._init_=function(e,t){},n._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var e=ur.mainContext,t=this._source=e.createTexture(),i=Fs.curBindTexTarget,n=Fs.curBindTexValue;if(Fs.bindTexture(e,3553,t),Ns.isConchWebGL)switch(this._format){case 6408:e.texImage2DEx(!0,3553,0,this._format,6408,5121,this._image);break;case ur.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:e.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image)}else{switch(e.pixelStorei(37441,!0),this._format){case 6408:e.texImage2D(3553,0,this._format,6408,5121,this._image);break;case ur.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:e.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image)}e.pixelStorei(37441,!1)}var o=this.minFifter,s=this.magFifter,r=this.repeat?10497:33071,a=Th.isPOT(this._w,this._h);a?(this.mipmap?-1!==o||(o=9987):-1!==o||(o=9729),-1!==s||(s=9729),e.texParameteri(3553,10241,o),e.texParameteri(3553,10240,s),e.texParameteri(3553,10242,r),e.texParameteri(3553,10243,r),this.mipmap&&e.generateMipmap(3553)):(-1!==o||(o=9729),-1!==s||(s=9729),e.texParameteri(3553,10241,o),e.texParameteri(3553,10240,s),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071)),i&&n&&Fs.bindTexture(e,i,n),this._image.onload=null,this._image=null,a&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._recreateLock=!1},n.recreateResource=function(){var e=this;if(null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var t=this;this._image=new Or.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){return t._needReleaseAgain?(t._needReleaseAgain=!1,t._image.onload=null,void(t._image=null)):(t._allowMerageInAtlas&&t._enableMerageInAtlas?(e.memorySize=0,e._recreateLock=!1):t._createWebGlTexture(),void t.completeCreate())},this._image.src=this._src}},n.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(ur.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},n.onresize=function(){this._w=this._image.width,this._h=this._image.height,xr.enabled&&this._w<xr.atlasLimitWidth&&this._h<xr.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},n.clearAtlasSource=function(){this._image=null},s(0,n,"onload",null,function(e){var t=this;this._onload=e,this._image&&(this._image.onload=null!=this._onload?function(){t.onresize(),t._onload()}:null)}),s(0,n,"onerror",null,function(e){var t=this;this._onerror=e,this._image&&(this._image.onerror=null!=this._onerror?function(){t._onerror()}:null)}),s(0,n,"format",function(){return this._format}),s(0,n,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(e){this._$5__enableMerageInAtlas=e}),s(0,n,"atlasSource",function(){return this._image}),s(0,n,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),s(0,n,"mipmap",function(){return this._mipmap}),t}(xw),Qw=function(e){function t(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,t.__super.call(this)}o(t,"laya.ui.Dialog",e);var n=t.prototype;return n.initialize=function(){this.popupEffect=t.manager.popupEffectHandler,this.closeEffect=t.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},n._dealDragArea=function(){var e=this.getChildByName("drag");e&&(this.dragArea=e.x+","+e.y+","+e.width+","+e.height,e.removeSelf())},n._onClick=function(e){var t=e.target;if(t)switch(t.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(t.name)}},n.show=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0),this._open(!1,e,t)},n.popup=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0),this._open(!0,e,t)},n._open=function(e,i,n){t.manager.lock(!1),this.isModal=e,t.manager.open(this,i,n)},n.onOpened=function(){},n.close=function(e,i){void 0===i&&(i=!0),t.manager.close(this,e,i)},n.onClosed=function(e){},n._onMouseDown=function(e){var t=this.getMousePoint();this._dragArea.contains(t.x,t.y)?this.startDrag():this.stopDrag()},s(0,n,"zOrder",e.prototype._$get_zOrder,function(e){i.superSet(Sw,this,"zOrder",e),t.manager._checkMask()}),s(0,n,"isPopup",function(){return null!=this.parent}),s(0,n,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(e){if(e){var t=ps.fillArray([0,0,0,0],e,Number);this._dragArea=new Ch(t[0],t[1],t[2],t[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),s(1,t,"manager",function(){return t._manager=t._manager||new cS},function(e){t._manager=e}),t.setLockView=function(e){t.manager.setLockView(e)},t.lock=function(e){t.manager.lock(e)},t.closeAll=function(){t.manager.closeAll()},t.getDialogsByGroup=function(e){return t.manager.getDialogsByGroup(e)},t.closeByGroup=function(e){return t.manager.closeByGroup(e)},t.CLOSE="close",t.CANCEL="cancel",t.SURE="sure",t.NO="no",t.OK="ok",t.YES="yes",t._manager=null,t}(Sw),jw=function(e){function t(){this.price=null,this.btnTake=null,t.__super.call(this)}o(t,"ui.model.exchange.ExchangePropCellUI",e);var i=t.prototype;return i.createChildren=function(){
laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:200},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:18,x:19,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:8,x:80,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:18,x:126,width:82,text:"Lv.3",styleSkin:"comp/label.png",name:"level",height:37,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:12,x:595,width:108,text:"1个",styleSkin:"comp/label.png",name:"count",height:39,fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:127,x:20,width:126,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:36,fontSize:26,color:"#46A3FF",align:"left"}},{type:"Label",props:{y:99,x:521,width:201,"var":"price",text:"单价:10仙玉",styleSkin:"comp/label.png",name:"price",height:33,fontSize:26,color:"#f9d61a",bold:!0,align:"center"}},{type:"Label",props:{y:55,x:18,wordWrap:!0,width:488,text:"可将65级以内锻造材料提升一个品质",styleSkin:"comp/label.png",name:"desc",leading:3,height:59,fontSize:26,color:"#f4f6fb",align:"left"}},{type:"Label",props:{y:158,x:20,width:128,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:34,fontSize:26,color:"#46A3FF",align:"left"}},{type:"Button",props:{y:137,x:562,width:120,"var":"btnTake",stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:150,x:233,width:315,styleSkin:"comp/label.png",name:"lbNotice",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},t}(Sw),Zw=function(e){function t(){this.price=null,this.btnTake=null,t.__super.call(this)}o(t,"ui.model.exchange.ExchangeEquipCellUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:260},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",name:"bg",height:260,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:12,x:3,width:104,text:"【头盔】",styleSkin:"comp/label.png",name:"position",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:14,x:279,text:"17级",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:5,x:233,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:12,x:130,text:"锦鸡盔",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:14,x:535,width:147,text:"限定：【金】",styleSkin:"comp/label.png",name:"natureLimit",height:36,fontSize:32,color:"#fbf8f8",bold:!1,align:"left"}},{type:"HTMLDivElement",props:{y:53,x:17,width:699,styleSkin:"comp/html.png",name:"attribute",height:178}},{type:"Label",props:{y:139,x:552,width:158,"var":"price",text:"10仙玉",styleSkin:"comp/label.png",name:"price",height:35,fontSize:26,color:"#f9d61a",bold:!0,align:"center"}},{type:"Label",props:{y:53,x:365,width:223,visible:!1,text:"熔灵属性",styleSkin:"comp/label.png",name:"attributeSP",height:36,fontSize:26,color:"#7985e0",bold:!0,align:"left"}},{type:"Button",props:{y:182,x:566,width:130,"var":"btnTake",stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:16,x:357,text:"★+20",styleSkin:"comp/label.png",name:"star",fontSize:32,color:"#fffc00",bold:!0,align:"left"}},{type:"Label",props:{y:209,x:233,width:315,styleSkin:"comp/label.png",name:"lbNotice",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},t}(Sw),Jw=function(e){function t(){t.__super.call(this)}o(t,"ui.model.exchange.ExchangeAddCellUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:200},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:75,x:305,width:120,stateNum:2,skin:"comp/button.png",name:"addBtn",label:"上架",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:143,x:8,wordWrap:!0,width:714,text:"     温馨提示：角色50级以上可上架1个物品,开启商会卡可上架10个物品",styleSkin:"comp/label.png",name:"desc",leading:3,height:42,fontSize:22,color:"#6b9eec",align:"center"}}]},t}(Sw),$w=function(e){function t(){this.tabCh=null,this.inputMsg=null,this.btn_send=null,this.lbCh=null,this.chatPanel=null,this.btn_close=null,this.btn_face=null,this.petTips=null,this.itemTips=null,this.playerMenu=null,this.report=null,t.__super.call(this)}o(t,"ui.model.chat.ChatUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:992},child:[{type:"Image",props:{y:7,x:5,width:740,skin:"ui/fangkuang.png",name:"bg",height:978,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:922,x:5,width:740,skin:"ui/fangkuang.png",name:"bg1",height:63,sizeGrid:"10,10,10,10"}},{type:"Tab",props:{y:874,x:9,"var":"tabCh",stateNum:2,space:-1,skin:"comp/tab_small.png",labels:"综合,世界,宗门,组队,私聊,系统",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:24}},{type:"TextInput",props:{y:926,x:87,width:545,"var":"inputMsg",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"请输入发送内容",padding:"0,0,0,10",maxChars:128,height:55,fontSize:26,bold:!0,align:"left"}},{type:"Button",props:{y:922,x:632,width:113,"var":"btn_send",stateNum:2,skin:"comp/button.png",labelColors:"#ffffff",label:"发送",height:63,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:938,x:22,"var":"lbCh",text:"世界",styleSkin:"comp/label.png",fontSize:28,color:"#00dc24",bold:!0,align:"center"}},{type:"Panel",props:{y:15,x:19,width:712,"var":"chatPanel",height:848}},{type:"Button",props:{y:11,x:677,"var":"btn_close",stateNum:1,skin:"comp/btn_close.png"}},{type:"Button",props:{y:999,x:571,visible:!1,"var":"btn_face",stateNum:1,skin:"chat/face/3.png"}},{type:"Box",props:{y:127,x:-767,"var":"petTips"},child:[{type:"Image",props:{y:0,x:0,width:672,skin:"comp/bg.png",height:735,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:71,x:31,text:"灵宠",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:72,x:111,text:"野山猪",styleSkin:"comp/label.png",name:"nameTxt",height:28,fontSize:32,color:"#f19e21",align:"left"}},{type:"Text",props:{y:113,x:31,text:"等级",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:115,x:112,width:91,text:99,styleSkin:"comp/label.png",name:"level",height:28,fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:157,x:31,text:"资质",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:159,x:110,width:37,text:20,styleSkin:"comp/label.png",name:"quality",height:28,fontSize:32,color:"#22d931",align:"left"}},{type:"Clip",props:{y:64,x:219,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Text",props:{y:212,x:20,width:136,text:"宠物属性",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:19,x:20,width:104,text:"灵宠信息",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"List",props:{y:266,x:37,width:304,vScrollBarSkin:" ",repeatX:1,name:"attributes",height:280},child:[{type:"Box",props:{y:1,x:0,width:297,name:"render",height:29},child:[{type:"Label",props:{y:0,x:0,width:98,text:"生命力回满",styleSkin:"comp/label.png",name:"key",height:30,fontSize:28,color:"#46aec8",align:"left"}},{type:"Label",props:{y:2,x:179,width:60,text:500,styleSkin:"comp/label.png",name:"value",height:27,fontSize:28,color:"#fbf8f8",align:"left"}}]}]},{type:"Label",props:{y:596,x:38,wordWrap:!0,width:616,text:"一种常见的灵宠，全身金色，像穿着一身金甲",styleSkin:"comp/label.png",name:"desc",leading:1,height:92,fontSize:26,color:"#46aec8",align:"left"}},{type:"Text",props:{y:560,x:20,width:106,text:"灵宠简介",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:12,x:594,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Label",props:{y:670,x:10,wordWrap:!0,width:652,text:"小贴示：此处仅显示宠物的基础属性\\n如需查看血脉或兽魂可查看玩家出战宠物详情",styleSkin:"comp/label.png",leading:5,height:58,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}}]},{type:"Box",props:{y:127,x:856,"var":"itemTips"},child:[{type:"Image",props:{y:18,x:0,width:740,skin:"comp/bg.png",height:382,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:28,x:659,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"PropCell",props:{y:129,x:4,name:"prop",runtime:"ui.model.pops.PropCellUI"}},{type:"EquipCell",props:{y:89,x:4,name:"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"TalismanCell",props:{y:119,x:5,name:"talisman",runtime:"ui.model.pops.TalismanCellUI"}}]},{type:"Box",props:{y:372,x:141,"var":"playerMenu"},child:[{type:"Image",props:{y:0,x:0,width:489,skin:"comp/bg.png",height:277,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:7,x:413,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Button",props:{y:80,x:75,width:140,stateNum:2,skin:"comp/button.png",name:"btnView",label:"查看",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:152,x:73,width:140,stateNum:2,skin:"comp/button.png",name:"btnChat",label:"私聊",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:80,x:279,width:140,stateNum:2,skin:"comp/button.png",name:"btnNocare",labelColors:"#cccc00",label:"拉黑",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:14,x:71,width:346,text:"张三",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Button",props:{y:152,x:279,width:140,stateNum:2,skin:"comp/button.png",name:"btnReport",labelColors:"#cc0000",label:"举报",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:127,x:34,"var":"report"},child:[{type:"Image",props:{y:0,x:0,width:681,skin:"comp/bg.png",height:590,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:9,x:610,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Button",props:{y:205,x:174,width:140,stateNum:2,skin:"comp/button.png",name:"btnReport",labelColors:"#cc0000",label:"举报",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:49,x:78,width:141,text:"举报玩家：",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"TextArea",props:{y:106,x:80,width:548,type:"text",skin:"comp/textarea.png",sizeGrid:"10,10,10,10",prompt:"补充说明",name:"info",leading:5,height:255,fontSize:30,align:"left"}},{type:"CheckBox",props:{y:396,x:57,width:142,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"fuck",labelSize:24,labelPadding:"0,0,0,10",labelBold:!0,label:"口头谩骂",height:29}},{type:"CheckBox",props:{y:396,x:275,width:132,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"rubbish",labelSize:24,labelPadding:"0,0,0,10",labelBold:!0,label:"垃圾广告",height:29}},{type:"CheckBox",props:{y:400,x:483,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"bug",labelSize:24,labelPadding:"0,0,0,10",labelBold:!0,label:"利用漏洞",height:25}},{type:"Label",props:{y:524,x:0,wordWrap:!0,width:681,text:"注意：举报口头谩骂或垃圾广告后将拉黑对方\\n 主动私聊对方，即可解除拉黑",styleSkin:"comp/label.png",leading:5,height:58,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:440,x:275,width:185,stateNum:2,skin:"comp/button.png",name:"submit",labelSize:28,label:"确认举报",height:70,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:49,x:231,width:374,text:"张三",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#e32121",bold:!0,align:"left"}}]}]},t}(Sw),eC=function(e){function t(){this.faceList=null,t.__super.call(this)}o(t,"ui.model.chat.chatFaceUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:250,height:200},child:[{type:"Image",props:{y:0,x:0,width:250,skin:"comp/bg.png",height:200,sizeGrid:"10,10,10,10"}},{type:"List",props:{y:10,x:10,"var":"faceList",spaceY:10,spaceX:10,repeatY:3,repeatX:4},child:[{type:"Image",props:{y:0,x:0,skin:"chat/face/3.png",name:"render",mouseEnabled:!0}}]}]},t}(Sw),tC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.pops.EquipCellUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:260},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",name:"bg",height:260,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:12,x:3,width:104,text:"【头盔】",styleSkin:"comp/label.png",name:"position",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:14,x:279,text:"17级",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:5,x:233,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:12,x:130,text:"锦鸡盔",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:61,x:546,width:177,text:"限定：【金】",styleSkin:"comp/label.png",name:"natureLimit",height:36,fontSize:32,color:"#fbf8f8",bold:!1,align:"left"}},{type:"HTMLDivElement",props:{y:53,x:17,width:699,styleSkin:"comp/html.png",name:"attribute",height:178}},{type:"Label",props:{y:139,x:587,width:128,text:"100000",styleSkin:"comp/label.png",name:"price",height:35,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:138,x:548,skin:"ui/tongbi.png",name:"priceIcon"}},{type:"Label",props:{y:137,x:489,width:57,text:"售价",styleSkin:"comp/label.png",name:"lbPrice",height:38,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:15,x:353,text:"★+20",styleSkin:"comp/label.png",name:"star",fontSize:32,color:"#fffc00",bold:!0,align:"left"}},{type:"Label",props:{y:93,x:395,width:223,visible:!1,text:"熔灵属性",styleSkin:"comp/label.png",name:"attributeSP",height:36,fontSize:26,color:"#7985e0",bold:!0,align:"left"}}]},t}(Sw),iC=function(e){function t(){this.btnFight=null,this.searchPress=null,this.coinTemp=null,t.__super.call(this)}o(t,"ui.model.pops.TowerSearchUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Button",props:{y:1099,x:412,width:120,"var":"btnFight",stateNum:2,skin:"comp/button.png",name:"btnFight",label:"前进",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:480,x:52,width:282,"var":"searchPress",text:"当前层数：1/10",styleSkin:"comp/label.png",height:38,fontSize:24,color:"#00dc24",bold:!0,align:"left"}},{type:"Button",props:{y:1099,x:569,width:120,stateNum:2,skin:"comp/button.png",name:"close",label:"返回",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:676,x:55,width:651,height:318},child:[{type:"Text",props:{y:69,x:0,wordWrap:!0,width:641,text:"    1.每天可以报名并进入一次，进入即可获得50威望。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:122,x:0,wordWrap:!0,width:617,text:"    2.总共10层，每通过一层可获得一些威望。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:171,x:0,wordWrap:!0,width:609,text:"    3.可使用威望兑换需要的材料或物品。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{wordWrap:!0,width:295,text:"小提示：",leading:4,fontSize:24,color:"#fffc00",bold:!0,align:"left"}}]},{type:"Label",props:{y:520,x:52,width:280,"var":"coinTemp",text:"获得威望：50",styleSkin:"comp/label.png",height:40,fontSize:24,color:"#fffc00",align:"left"}}]},t}(Sw),nC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.pops.PropCellUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:200},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:18,x:19,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:8,x:80,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:18,x:126,width:82,text:"Lv.3",styleSkin:"comp/label.png",name:"level",height:37,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:60,x:439,width:284,text:"999个",styleSkin:"comp/label.png",name:"count",height:39,fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:127,x:20,width:126,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",fontSize:26,color:"#46A3FF",align:"left"}},{type:"Label",props:{y:99,x:505,width:58,text:"单价",styleSkin:"comp/label.png",name:"lbPrice",height:35,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:100,x:596,width:108,text:"100000",styleSkin:"comp/label.png",name:"price",height:33,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:55,x:18,wordWrap:!0,width:488,text:"可将65级以内锻造材料提升一个品质",styleSkin:"comp/label.png",name:"desc",leading:3,height:59,fontSize:26,color:"#f4f6fb",align:"left"}},{type:"Label",props:{y:158,x:20,width:128,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",fontSize:26,color:"#46A3FF",align:"left"}},{type:"Image",props:{y:95,x:560,skin:"ui/tongbi.png",name:"priceIcon"}},{type:"Label",props:{y:18,x:299,width:133,visible:!1,text:"【绑定】",styleSkin:"comp/label.png",name:"binding",height:37,fontSize:32,color:"#e70626",bold:!0,align:"left"}},{type:"Label",props:{y:95,x:20,width:126,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute3",fontSize:26,color:"#46A3FF",align:"left"}}]},t}(Sw),oC=function(e){function t(){this.lbPos=null,this.nature=null,this.prefix=null,this.attr_base=null,this.lbFeed=null,this.star=null,this.attr_star=null,this.attr_feed=null,this.attr_ext0=null,this.attr_ext1=null,this.attr_ext2=null,this.attr_ext3=null,this.attr_ext4=null,this.attr_add0=null,this.attr_add1=null,this.attr_add2=null,this.attr_add3=null,this.attr_add4=null,this.attr_refine=null,this.attr_nature0=null,this.attr_nature1=null,this.lbCount=null,this.lbChg=null,t.__super.call(this)}o(t,"ui.model.pops.PetEquipCellUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:200},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:10,x:89,"var":"lbPos",text:"【葫芦】",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:3,x:217,"var":"nature",skin:"ui/clip_wuxing.png",index:1,clipY:5}},{type:"Label",props:{y:10,x:18,"var":"prefix",text:"人仙",styleSkin:"comp/label.png",height:35,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:51,x:18,"var":"attr_base",text:"基础 + 500",styleSkin:"comp/label.png",height:28,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:10,x:271,width:103,"var":"lbFeed",text:"◆+500",styleSkin:"comp/label.png",height:34,fontSize:32,color:"#c527ff",bold:!0,align:"left"}},{type:"Label",props:{y:10,x:373,"var":"star",text:"★+20",styleSkin:"comp/label.png",fontSize:32,color:"#fffc00",bold:!0,align:"left"}},{type:"Label",props:{y:51,x:210,"var":"attr_star",text:" + 500",styleSkin:"comp/label.png",height:28,fontSize:26,color:"#fffc00",bold:!0,align:"left"}},{type:"Label",props:{y:51,x:149,"var":"attr_feed",text:" + 10",styleSkin:"comp/label.png",fontSize:26,color:"#c527ff",bold:!0,align:"left"}},{type:"Label",props:{y:83,x:18,"var":"attr_ext0",text:"hp + 10",styleSkin:"comp/label.png",fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:113,x:18,"var":"attr_ext1",text:"hp + 5000",styleSkin:"comp/label.png",fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:143,x:18,"var":"attr_ext2",text:"hp + 5000",styleSkin:"comp/label.png",fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:83,x:301,"var":"attr_ext3",text:"hp + 5000",styleSkin:"comp/label.png",fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:113,x:301,"var":"attr_ext4",text:"hp + 5000",styleSkin:"comp/label.png",fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:83,x:124,"var":"attr_add0",text:" + 10",styleSkin:"comp/label.png",fontSize:26,color:"#FFA500",bold:!0,align:"left"}},{type:"Label",props:{y:113,x:146,"var":"attr_add1",text:" + 10",styleSkin:"comp/label.png",fontSize:26,color:"#FFA500",bold:!0,align:"left"}},{type:"Label",props:{y:143,x:145,"var":"attr_add2",text:" + 10",styleSkin:"comp/label.png",fontSize:26,color:"#FFA500",bold:!0,align:"left"}},{type:"Label",props:{y:83,x:428,"var":"attr_add3",text:" + 10",styleSkin:"comp/label.png",fontSize:26,color:"#FFA500",bold:!0,align:"left"}},{type:"Label",props:{y:113,x:425,"var":"attr_add4",text:" + 10",styleSkin:"comp/label.png",fontSize:26,color:"#FFA500",bold:!0,align:"left"}},{type:"Label",props:{y:10,x:483,"var":"attr_refine",text:"精炼度 1100%",styleSkin:"comp/label.png",fontSize:32,color:"#FFA500",bold:!0,align:"left"}},{type:"Label",props:{y:51,x:301,"var":"attr_nature0",text:"金防御 + 10",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:51,x:473,"var":"attr_nature1",text:"金防御 - 10",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:51,x:546,width:173,"var":"lbCount",text:"999个",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:172,x:8,"var":"lbChg",text:"『可交易』",styleSkin:"comp/label.png",fontSize:20,color:"#00dc24",bold:!0,align:"left"}}]},t}(Sw),sC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.pops.TalismanCellUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:200},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:10,x:19,text:"玄冰刺",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:3,x:127,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:10,x:176,width:108,text:"【练气】",styleSkin:"comp/label.png",name:"grad",height:35,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:56,x:302,wordWrap:!0,width:419,text:"无视防御 + 4%（红色品质激活）",styleSkin:"comp/label.png",name:"attributeSP",leading:3,height:78,fontSize:26,color:"#e70626",bold:!0,align:"left"}},{type:"Label",props:{y:57,x:18,width:142,text:"法力恢复值 + 5",styleSkin:"comp/label.png",name:"attribute0",height:28,fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:91,x:20,width:119,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:28,fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:121,x:20,width:122,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:32,fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:152,x:20,width:113,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute3",height:30,fontSize:26,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:11,x:517,width:110,text:"150000",styleSkin:"comp/label.png",name:"price",height:31,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:10,x:472,skin:"ui/tongbi.png",name:"priceIcon"}},{type:"Label",props:{y:10,x:402,width:57,text:"售价",styleSkin:"comp/label.png",name:"lbPrice",height:34,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Sw),rC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.pops.PropCellSimpleUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:700,height:114},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:114,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:16,x:18,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:6,x:53,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:16,x:99,text:"Lv.-",styleSkin:"comp/label.png",name:"level",height:33,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:60,x:423,width:267,text:"--个",styleSkin:"comp/label.png",name:"count",height:36,fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:52,x:18,wordWrap:!0,width:574,text:"??",styleSkin:"comp/label.png",name:"desc",height:52,fontSize:26,color:"#f4f6fb",bold:!0,align:"left"}},{type:"Label",props:{y:18,x:559,width:125,visible:!1,text:"价格默认无",styleSkin:"comp/label.png",name:"price",height:36,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:72,x:282,width:143,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",fontSize:26,color:"#46A3FF",bold:!0,align:"left"}},{type:"Label",props:{y:43,x:282,width:149,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",fontSize:26,color:"#46A3FF",bold:!0,align:"left"}},{type:"Label",props:{y:14,x:421,width:133,visible:!1,text:"【绑定】",styleSkin:"comp/label.png",name:"binding",height:37,fontSize:32,color:"#e70626",bold:!0,align:"left"}},{type:"Label",props:{y:13,x:282,width:143,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute3",fontSize:26,color:"#46A3FF",bold:!0,align:"left"}}]},t}(Sw),aC=function(e){function t(){this.panelReports=null,this.btnN=null,this.btnS=null,this.btnW=null,this.btnE=null,this.txtFast=null,t.__super.call(this)}o(t,"ui.model.pops.ForestSearchUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Panel",props:{y:473,x:19,width:723,"var":"panelReports",vScrollBarSkin:"comp/vscroll.png",height:604}},{type:"Button",props:{y:1105,x:317,width:100,"var":"btnN",stateNum:2,skin:"comp/button.png",name:"btnN",label:"北",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1190,x:317,width:100,"var":"btnS",stateNum:2,skin:"comp/button.png",name:"btnS",label:"南",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1147,x:192,width:100,"var":"btnW",stateNum:2,skin:"comp/button.png",name:"btnW",label:"西",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1146,x:438,width:100,"var":"btnE",stateNum:2,skin:"comp/button.png",name:"btnE",label:"东",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:435,x:20,width:315,text:"搜索进度：1/4",styleSkin:"comp/label.png",name:"searchPress",height:38,fontSize:24,color:"#00dc24",align:"center"}},{type:"Button",props:{y:1242,x:511,width:115,stateNum:2,skin:"comp/button.png",name:"close",label:"返回",height:53,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1156,x:217,width:315,"var":"txtFast",text:"扫荡中自动前进",styleSkin:"comp/label.png",height:38,fontSize:32,color:"#c527ff",align:"center"}}]},t}(Sw),lC=function(e){function t(){this.ranks=null,t.__super.call(this)}o(t,"ui.model.worldboss.FeedRankUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1004},child:[{type:"Box",props:{y:0,x:5},child:[{type:"Box",props:{},child:[{type:"Text",props:{y:29,x:364,width:144,text:"喂养度",pivotY:5,height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:29,x:23,text:"排名",pivotY:5,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:27,x:583,width:117,text:"排名奖励",styleSkin:"comp/label.png",pivotY:5,height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:29,x:137,width:159,text:"名字",pivotY:5,height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:3,x:530,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:3,x:91,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:3,x:342,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}}]}]},{type:"List",props:{y:87,x:5,width:740,"var":"ranks",spaceY:10,repeatY:11,height:917},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Text",props:{y:30,x:357,width:168,text:"100",pivotY:5,name:"lbValue",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:30,x:6,width:80,text:"1",pivotY:5,name:"lbNo",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:30,x:106,width:230,text:"张",pivotY:5,name:"lbName",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:30,x:539,width:195,text:"护灵符*10",styleSkin:"comp/label.png",pivotY:5,name:"lbAward",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:3,x:530,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:3,x:91,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:3,x:342,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}}]}]}]},t}(Sw),hC=function(e){function t(){this.ranks=null,t.__super.call(this)}o(t,"ui.model.worldboss.FightRankUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1004},child:[{type:"Box",props:{y:0,x:5},child:[{type:"Box",props:{},child:[{type:"Text",props:{y:28,x:364,width:144,text:"伤害量",pivotY:5,height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:28,x:23,text:"排名",pivotY:5,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:26,x:583,width:117,text:"排名奖励",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:28,x:137,width:159,text:"名字",pivotY:5,height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:3,x:530,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:3,x:91,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:3,x:342,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}}]}]},{type:"List",props:{y:87,x:5,width:740,"var":"ranks",spaceY:10,repeatY:11,height:917},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Text",props:{y:30,x:106,width:230,text:"张",pivotY:5,name:"lbName",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:30,x:357,width:168,text:"100",pivotY:5,name:"lbValue",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:30,x:6,width:80,text:"1",pivotY:5,name:"lbNo",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:30,x:539,width:195,text:"护灵符碎片*70",styleSkin:"comp/label.png",pivotY:5,name:"lbAward",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:3,
x:530,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:3,x:91,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:3,x:342,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}}]}]}]},t}(Sw),cC=function(e){function t(){this.home=null,this.buildings=null,this.btnRank=null,this.btnLog=null,this.btnNotice=null,this.gate=null,this.listAlc=null,this.ctName=null,this.btCreate=null,this.pgUp=null,this.pgDown=null,this.pgNum=null,this.pgFresh=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Box",props:{y:195,x:5,width:740,"var":"home",height:1085},child:[{type:"Label",props:{y:0,x:115,width:200,styleSkin:"comp/label.png",name:"nameAlc",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"List",props:{y:90,x:20,width:700,"var":"buildings",vScrollBarSkin:" ",spaceY:20,height:1e3},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:102},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:102,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:35,x:261,width:218,text:"宗门成员",styleSkin:"comp/label.png",name:"title",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}}]}]},{type:"Button",props:{y:8,x:610,width:130,"var":"btnRank",stateNum:2,skin:"comp/button.png",label:"宗门排行",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:8,x:468,width:130,"var":"btnLog",stateNum:2,skin:"comp/button.png",label:"宗门日志",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:0,x:26,width:76,text:"宗门：",styleSkin:"comp/label.png",name:"titleAlc",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:43,x:27,width:76,text:"等级：",styleSkin:"comp/label.png",name:"titleAlc",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:43,x:115,width:200,styleSkin:"comp/label.png",name:"lvAlc",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:8,x:326,width:130,"var":"btnNotice",stateNum:2,skin:"comp/button.png",label:"宗门公告",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:195,x:5,width:740,"var":"gate",height:1127},child:[{type:"List",props:{y:36,x:0,width:740,"var":"listAlc",spaceY:6,repeatX:1,height:760},child:[{type:"Box",props:{y:0,x:0,width:740,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:357,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:27,x:17,width:309,text:"破天宗",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:13,x:610,width:100,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"加入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:1,x:450,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:27,x:381,width:60,text:"2级",styleSkin:"comp/label.png",pivotY:5,name:"dLv",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:27,x:479,width:122,text:"10/10人",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Image",props:{y:915,x:0,width:740,skin:"ui/fangkuang.png",height:212,sizeGrid:"10,10,10,10"}},{type:"TextInput",props:{y:943,x:253,width:397,"var":"ctName",type:"text",skin:"comp/textinput.png",prompt:"为宗门取个响亮的名字",height:52,fontSize:32,bold:!1,align:"center"}},{type:"Text",props:{y:950,x:59,width:148,text:"宗门名字",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1012,x:321,width:203,"var":"btCreate",stateNum:2,skin:"comp/button.png",label:"创建宗门",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:876,x:15,width:218,text:"创建一个宗门",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:838,x:298,width:100,"var":"pgUp",stateNum:2,skin:"comp/button.png",label:"上一页",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:838,x:485,width:100,"var":"pgDown",stateNum:2,skin:"comp/button.png",label:"下一页",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{x:15,width:152,text:"宗门列表",styleSkin:"comp/label.png",name:"dName",height:32,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:847,x:402,width:81,"var":"pgNum",text:"1/10",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:838,x:611,width:100,"var":"pgFresh",stateNum:2,skin:"comp/button.png",label:"刷新",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1028,x:63,width:194,text:"花费350元宝",styleSkin:"comp/label.png",name:"lbCost",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:366,x:234,width:272,text:"空空如也",styleSkin:"comp/label.png",name:"lbEmpty",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1082,x:5,width:729,text:"小贴士：禁止使用非法违规字符，如违反规定将强制解散宗门。",leading:5,fontSize:26,color:"#e70626",bold:!1,align:"center"}}]}]},t}(Sw),uC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.pearl.PearlCellUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:282},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",name:"bg",height:282,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:59,x:46,width:259,styleSkin:"comp/html.png",name:"attribute",height:155}},{type:"Label",props:{y:12,x:130,text:"灵珠",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:5,x:193,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:12,x:239,text:"17级",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:12,x:3,width:104,text:"【头盔】",styleSkin:"comp/label.png",name:"position",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"HTMLDivElement",props:{y:59,x:338,width:259,styleSkin:"comp/html.png",name:"attributeNext",height:178}},{type:"Image",props:{y:147,x:298,width:19,skin:"ui/arrow.png",rotation:-90,name:"arrow",height:25}},{type:"Label",props:{y:213,x:46,visible:!1,text:"与玩家对战时：",styleSkin:"comp/label.png",name:"attrSp1",fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:244,x:46,visible:!1,text:"对战属性",styleSkin:"comp/label.png",name:"attrSp2",fontSize:26,color:"#fbf8f8",bold:!0}}]},t}(Sw),dC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.petskill.PetSkillCellUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:728,height:130},child:[{type:"Clip",props:{y:0,x:0,width:728,skin:"ui/clip_fangkuang.png",sizeGrid:"8,7,10,27",name:"bg",height:130,clipY:6}},{type:"Label",props:{y:17,x:139,text:"怒斩",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#c18314",bold:!0,align:"center"}},{type:"Label",props:{y:56,x:32,wordWrap:!0,width:542,text:"战斗每5秒造成自己攻击力的{0}%真实伤害，该伤害无视任何闪避或免疫效果",styleSkin:"comp/label.png",name:"info",leading:2,height:48,fontSize:22,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:17,x:12,width:123,text:"【攻击】",styleSkin:"comp/label.png",name:"type",height:26,fontSize:32,color:"#99ec4d",bold:!0,align:"center"}},{type:"Clip",props:{y:10,x:210,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}}]},t}(Sw),pC=function(e){function t(){this.list=null,t.__super.call(this)}o(t,"ui.model.petskill.PetSkillBookUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"List",props:{y:261,x:36,width:712,"var":"list",vScrollBarSkin:" ",spaceY:20,height:969},child:[{type:"Box",props:{y:5,name:"render"},child:[{type:"Label",props:{y:3,x:0,text:"天击",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#c18314",bold:!0,align:"center"}},{type:"Label",props:{y:3,x:84,width:598,text:"提高铜币获取每级+3%",styleSkin:"comp/label.png",name:"spInfo",height:30,fontSize:32,color:"#fbf8f8",align:"left"}}]}]},{type:"Text",props:{y:1273,x:43,wordWrap:!0,width:663,text:"小贴士：拥有过该技能后可自动激活图鉴，通过宠物-战技页面开宝箱获得。",leading:5,height:58,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Sw),fC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.petskill.PetSkillCellFullUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:728,height:162},child:[{type:"Clip",props:{y:0,x:0,width:728,skin:"ui/clip_fangkuang.png",sizeGrid:"8,7,10,27",name:"bg",height:162,clipY:6}},{type:"Clip",props:{y:14,x:204,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:17,x:139,text:"天击",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#c18314",bold:!0,align:"center"}},{type:"Label",props:{y:93,x:98,wordWrap:!0,width:590,text:"战斗每5秒造成自己攻击力的{0}%真实伤害，该伤害无视任何闪避或免疫效果",styleSkin:"comp/label.png",name:"info",leading:2,height:48,fontSize:22,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:17,x:12,width:123,text:"【攻击】",styleSkin:"comp/label.png",name:"type",height:26,fontSize:32,color:"#99ec4d",bold:!0,align:"center"}},{type:"Label",props:{y:93,x:31,width:76,text:"灵宠：",styleSkin:"comp/label.png",height:30,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:58,x:31,width:69,text:"图鉴：",styleSkin:"comp/label.png",height:30,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:58,x:98,width:598,text:"提高铜币获取每级+3%",styleSkin:"comp/label.png",name:"spInfo",height:30,fontSize:24,color:"#fbf8f8",align:"left"}}]},t}(Sw),_C=function(e){function t(){t.__super.call(this)}o(t,"ui.model.surprise.ItemCellUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:700,height:100},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:100,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:8,x:25,width:207,text:"??",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fbf8f8"}},{type:"HTMLDivElement",props:{y:43,x:25,width:538,styleSkin:"comp/html.png",name:"info",mouseEnabled:!1,height:48}},{type:"Label",props:{y:12,x:569,width:111,text:"【限定】",styleSkin:"comp/label.png",name:"limit",height:32,fontSize:32,color:"#e70626"}},{type:"Label",props:{y:60,x:604,underline:!0,text:"选择",styleSkin:"comp/label.png",name:"lbTs",fontSize:28,color:"#6b9eec"}}]},t}(Sw),mC=function(e){function t(){this.icsilver=null,this.icgold=null,this.txtSilver=null,this.txtGold=null,this.taskbar=null,this.btnTask=null,this.btnStrong=null,this.icjade=null,this.txtJade=null,this.lbDate=null,t.__super.call(this)}o(t,"ui.model.head.HeadBarUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:80},child:[{type:"Image",props:{y:5,x:3,"var":"icsilver",skin:"ui/tongbi.png"}},{type:"Image",props:{y:5,x:143,"var":"icgold",skin:"ui/yuanbao.png"}},{type:"Label",props:{y:11,x:41,"var":"txtSilver",text:"99999",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:11,x:182,"var":"txtGold",text:"9999999",styleSkin:"comp/label.png",color:"#e8f116",bold:!0,align:"left",fontSize:26}},{type:"Box",props:{y:-50,x:256,width:491,"var":"taskbar",height:43},child:[{type:"Text",props:{y:12,x:16,text:"主线：",fontSize:24,color:"#0084ff",bold:!0,align:"left"}},{type:"Button",props:{y:0,x:79,width:118,"var":"btnTask",stateNum:2,skin:"comp/button.png",name:"btnTask",labelSize:24,labelColors:"#21db21",label:"领取奖励",height:43,sizeGrid:"4,4,4,4"},child:[{type:"Clip",props:{y:-13,x:-8,width:135,skin:"create/clip_select.png",sizeGrid:"21,18,17,21",name:"lightR",interval:100,height:65,clipX:15,autoPlay:!0}},{type:"Image",props:{y:-6,x:105,width:18,skin:"ui/red_point.png",name:"red",height:18}}]}]},{type:"Button",props:{y:12,x:415,width:118,"var":"btnStrong",stateNum:2,skin:"comp/button.png",labelSize:24,label:"新手教程",height:43,sizeGrid:"4,4,4,4"},child:[{type:"Clip",props:{y:-13,x:-8,width:135,skin:"create/clip_select.png",sizeGrid:"21,18,17,21",name:"lightR",interval:100,height:65,clipX:15,autoPlay:!0}}]},{type:"Image",props:{y:5,x:282,"var":"icjade",skin:"ui/xianyu.png"}},{type:"Label",props:{y:11,x:321,"var":"txtJade",text:"999999",styleSkin:"comp/label.png",color:"#59f344",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:11,x:539,visible:!1,"var":"lbDate",text:"12月15日周四01:30",styleSkin:"comp/label.png",fontSize:24,color:"#fbf8f8",align:"left"}}]},t}(Sw),gC=function(e){function t(){this.levelList=null,this.attributes=null,t.__super.call(this)}o(t,"ui.model.handbook.HandbookUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Image",props:{y:255,width:700,skin:"ui/bg_windos.png",right:25,left:25,height:189,sizeGrid:"30,30,30,30"}},{type:"Text",props:{y:292,x:40,width:222,text:"累计图鉴属性",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:381,x:40,width:222,text:"图鉴列表",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:461,x:22,width:705,"var":"levelList",vScrollBarSkin:" ",spaceY:5,repeatX:1,height:800},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:213},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",name:"bg",height:209,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:262,width:166,text:"5级图鉴",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fbf8f8",bold:!1,align:"center"}},{type:"Label",props:{y:46,x:547,width:80,text:"攻击+2",styleSkin:"comp/label.png",name:"attribute1",height:20,fontSize:24,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:78,x:548,width:80,text:"防御+1",styleSkin:"comp/label.png",name:"attribute2",height:20,fontSize:24,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:110,x:548,width:80,text:"生命+100",styleSkin:"comp/label.png",name:"attribute3",height:20,fontSize:24,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:140,x:548,width:80,text:"法力+5",styleSkin:"comp/label.png",name:"attribute4",height:20,fontSize:24,color:"#1440ee",bold:!0,align:"left"}},{type:"List",props:{y:91,x:40,width:491,spaceY:10,spaceX:20,repeatY:2,repeatX:4,name:"posList",height:85},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{width:83,text:"武器",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fbf8f8",bold:!1,align:"center"}}]}]},{type:"Label",props:{y:45,x:15,width:234,text:"激活部件：(1/7)",styleSkin:"comp/label.png",name:"lbPos",height:28,fontSize:28,color:"#fbf8f8",bold:!0}}]}]},{type:"Text",props:{y:1266,x:10,wordWrap:!0,width:730,text:"小贴示：只有消耗红色或紫色装备才可以激活图鉴，凑齐部件可激活图鉴属性。建议将过渡的装备放入图鉴，优先主角装备使用。",leading:5,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"List",props:{y:278,x:320,width:340,"var":"attributes",spaceY:5,repeatY:2,repeatX:2,height:57},child:[{type:"Label",props:{y:0,x:0,width:170,text:"hp + 5000",styleSkin:"comp/label.png",name:"render",fontSize:26,color:"#0084ff",bold:!0,align:"center"}}]},{type:"Label",props:{y:363,x:262,width:448,text:"（小提示：红色+0.5%，紫色+2%）\\n最高只计算紫色图鉴，2%属性加成",styleSkin:"comp/label.png",leading:3,height:64,fontSize:28,color:"#fffc00",bold:!0,align:"left"}}]},t}(Sw),vC=function(e){function t(){this.nameTxt=null,this.level=null,this.quality=null,this.nature=null,this.attributesList=null,this.btnFightOn=null,this.btnUpgrade=null,this.btnDrop=null,this.tabPets=null,this.dressGhosts=null,this.desc=null,this.txtEmptyInfo=null,this.btnBlood=null,this.chgNature=null,this.chat=null,this.growAdd=null,this.btnSkill=null,this.btnEquip=null,t.__super.call(this)}o(t,"ui.model.PetUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Image",props:{y:260,width:409,skin:"ui/bg_windos.png",left:15,height:946,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:461,x:29,skin:"ui/widget_long.png"}},{type:"Text",props:{y:329,x:35,text:"灵宠",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:329,x:108,"var":"nameTxt",text:"野山猪",styleSkin:"comp/label.png",fontSize:28,color:"#f19e21",align:"left"}},{type:"Text",props:{y:370,x:35,text:"等级",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:370,x:108,"var":"level",text:99,styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:410,x:36,text:"资质",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:410,x:108,"var":"quality",text:20,styleSkin:"comp/label.png",fontSize:28,color:"#22d931",align:"left"}},{type:"Clip",props:{y:321,x:206,"var":"nature",skin:"ui/clip_wuxing.png",index:4,clipY:5}},{type:"Text",props:{y:449,x:35,text:"协战加成",fontSize:32,color:"#f19e21",bold:!0,align:"left"}},{type:"Text",props:{y:285,x:35,width:128,text:"灵宠信息",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"List",props:{y:490,x:35,width:356,"var":"attributesList",vScrollBarSkin:"comp/vscroll.png",spaceY:5,repeatX:1,height:515},child:[{type:"Box",props:{y:1,x:0,name:"render"},child:[{type:"Label",props:{y:0,x:0,width:182,text:"生命力回满",styleSkin:"comp/label.png",name:"key",height:26,fontSize:28,color:"#46aec8",align:"left"}},{type:"Label",props:{y:0,x:186,width:200,text:500,styleSkin:"comp/label.png",name:"value",height:23,fontSize:28,color:"#fbf8f8",align:"left"}}]}]},{type:"Button",props:{y:1232,x:19,width:130,"var":"btnFightOn",stateNum:2,skin:"comp/button.png",labelSize:32,label:"协  战",height:60,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:1232,x:164,width:130,"var":"btnUpgrade",stateNum:2,skin:"comp/button.png",labelSize:32,label:"培  养",height:60,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:429,x:315,width:89,"var":"btnDrop",stateNum:2,skin:"comp/button.png",label:"放生",height:47,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Tab",props:{y:195,x:15,width:724,"var":"tabPets",stateNum:2,space:6,skin:"comp/tab.png",selectedIndex:0,labels:"灵宠【战】,灵宠2,灵宠3,灵宠4,灵宠5",labelSize:24,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:51.5}},{type:"List",props:{y:260,x:444,width:291,"var":"dressGhosts",vScrollBarSkin:" ",spaceY:10,height:945},child:[{type:"Box",props:{y:0,x:0,width:290,name:"render",height:175},child:[{type:"Image",props:{y:0,x:0,width:288,skin:"ui/fangkuang.png",name:"bg",height:173,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:13,x:5,width:216,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"name",height:34,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:3,x:238,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:45,x:18,width:116,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:32,fontSize:26,color:"#1440ee",align:"left"}},{type:"Label",props:{y:74,x:18,width:118,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:32,fontSize:26,color:"#1440ee",align:"left"}},{type:"Button",props:{y:106,x:164,width:90,stateNum:2,skin:"comp/button.png",name:"takeOffBtn",label:"卸下",height:46,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:106,x:44,width:90,stateNum:2,skin:"comp/button.png",name:"changeBtn",label:"更换",height:46,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Label",props:{y:1070,x:35,wordWrap:!0,width:364,"var":"desc",text:"像穿着一身金甲一种常见的灵宠，全身金色，像穿着一身金甲一种常见的灵宠，全身金色，像穿着一身金甲",styleSkin:"comp/label.png",leading:1,fontSize:26,color:"#46aec8",align:"left"}},{type:"Text",props:{y:1028,x:35,text:"灵宠简介",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:1304,x:43,width:664,text:"小贴士：灵宠资质越高，成长属性越多，兽魂等加成越多",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:603,x:176,wordWrap:!0,width:432,"var":"txtEmptyInfo",text:"您可以前往兽魂森林里的灵宠乐园看看",styleSkin:"comp/label.png",leading:4,height:31,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:1232,x:310,width:130,"var":"btnBlood",stateNum:2,skin:"comp/button.png",labelSize:32,label:"血  脉",height:60,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:279,x:238,width:166,"var":"chgNature",stateNum:2,skin:"comp/button.png",labelSize:26,label:"转换五行",sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:283,x:169,width:36,visible:!1,"var":"chat",stateNum:1,skin:"chat/btn_chat1.png",height:36}},{type:"Text",props:{y:370,x:203,text:"成长比",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:370,x:295,"var":"growAdd",text:"100%",styleSkin:"comp/label.png",fontSize:28,color:"#22d931",align:"left"}},{type:"Button",props:{y:1232,x:455,width:130,"var":"btnSkill",stateNum:2,skin:"comp/button.png",labelSize:32,label:"战  技",height:60,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:1232,x:600,width:130,"var":"btnEquip",stateNum:2,skin:"comp/button.png",labelSize:32,label:"装  备",height:60,sizeGrid:"4,4,4,4"}}]},t}(Sw),yC=function(e){function t(){this.bar=null,this.level=null,this.attr=null,this.btnUp=null,this.needGas=null,this.needSilver=null,this.m1=null,this.m2=null,this.m3=null,this.m4=null,this.needProp=null,this.hasGas=null,t.__super.call(this)}o(t,"ui.model.meridian.MeridianUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.meridian.StarUI",bC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Tab",props:{y:195,x:25,width:391,"var":"bar",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:0,labels:"任脉, 督脉,冲脉,带脉",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:24}},{type:"Label",props:{y:277,x:211,width:327,"var":"level",text:"任脉等级：10",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1272,x:2,width:745,text:"小贴示：副本战斗可增加真元，真元满后不再增加请尽快使用",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:962,x:237,width:457,"var":"attr",text:"累计加成：攻击 +10",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#6b9eec",bold:!0,align:"left"}},{type:"Button",props:{y:1185,x:308,width:130,"var":"btnUp",stateNum:2,skin:"comp/button.png",label:"升  级",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1044,x:237,width:465,"var":"needGas",text:"消耗真元：10",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#00dc24",bold:!0,align:"left"}},{type:"Label",props:{y:1085,x:237,width:465,"var":"needSilver",text:"消耗铜币：100",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#ffffff",bold:!0,align:"left"}},{type:"Box",props:{y:319,x:252,width:246,"var":"m1",height:632},child:[{type:"Image",props:{y:122,x:11,width:2,skin:"ui/vline_white.png",rotation:192,height:102,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:223,x:110,width:2,skin:"ui/vline_white.png",rotation:136,height:136,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:338,x:103,width:2,skin:"ui/vline_white.png",rotation:184,height:107,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:497,x:8,width:2,skin:"ui/vline_white.png",rotation:211,height:170,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:608,x:103,width:2,skin:"ui/vline_white.png",rotation:138,height:136,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:612,x:108,width:2,skin:"ui/vline_white.png",rotation:222,height:123,sizeGrid:"5,0,5,0"}},{type:"Star",props:{y:502,x:175,name:"r7",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:3,x:19,name:"r1",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:107,x:-3,name:"r2",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:207,x:95,name:"r3",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:329,x:83,name:"r4",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:488,x:-7,name:"r5",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:597,x:94,name:"r6",runtime:"ui.model.meridian.StarUI"}}]},{type:"Box",props:{y:398,x:245,width:260,"var":"m2",height:395},child:[{type:"Image",props:{y:62,x:62,width:2,skin:"ui/vline_white.png",rotation:-129,height:128,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:175,x:75,width:2,skin:"ui/vline_white.png",rotation:171,height:107,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:184,x:80,width:2,skin:"ui/vline_white.png",rotation:300,height:125,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:434,x:110,width:2,skin:"ui/vline_white.png",rotation:142,height:145,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:388,x:183,width:2,skin:"ui/vline_white.png",rotation:55,height:85,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:253,x:189,width:2,skin:"ui/vline_white.png",rotation:1,height:130,sizeGrid:"5,0,5,0"}},{type:"Star",props:{y:-34,x:150,name:"r1",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:304,x:5,name:"r7",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:422,x:97,name:"r6",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:371,x:175,name:"r5",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:232,x:178,name:"r4",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:166,x:65,name:"r3",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:46,x:42,name:"r2",runtime:"ui.model.meridian.StarUI"}}]},{type:"Box",props:{y:320,x:249,width:251,"var":"m3",height:603},child:[{type:"Image",props:{y:199,x:13,width:2,skin:"ui/vline_white.png",rotation:-141,height:202,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:138,x:202,width:2,skin:"ui/vline_white.png",rotation:151,height:113,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:143,x:203,width:2,skin:"ui/vline_white.png",rotation:373,height:182,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:501,x:70,skin:"ui/vline_white.png",rotation:-181,height:174,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:466,x:156,width:2,skin:"ui/vline_white.png",rotation:65,height:105,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:331,x:162,width:2,skin:"ui/vline_white.png",rotation:1,height:130,sizeGrid:"5,0,5,0"}},{type:"Star",props:{y:308,x:54,name:"r7",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:494,x:56,name:"r6",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:446,x:147,name:"r5",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:314,x:148,name:"r4",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:124,x:189,name:"r3",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:21,x:128,name:"r2",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:185,x:-6,name:"r1",runtime:"ui.model.meridian.StarUI"}}]},{type:"Box",props:{y:396,x:178,"var":"m4"},child:[{type:"Image",props:{y:89,x:57,width:2,skin:"ui/vline_white.png",rotation:-73,height:108,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:25,x:252,width:2,skin:"ui/vline_white.png",rotation:43,height:125,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:29,x:252,width:2,skin:"ui/vline_white.png",rotation:313,height:129,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:384,x:101,skin:"ui/vline_white.png",rotation:-229,height:123,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:213,x:219,width:2,skin:"ui/vline_white.png",rotation:35,height:200,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:116,x:347,width:2,skin:"ui/vline_white.png",rotation:53,height:153,sizeGrid:"5,0,5,0"}},{type:"Star",props:{y:289,x:-9,name:"r7",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:366,x:86,name:"r6",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:196,x:207,name:"r5",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:100,x:332,name:"r4",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:12,x:237,name:"r3",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:104,x:150,name:"r2",runtime:"ui.model.meridian.StarUI"}},{type:"Star",props:{y:73,x:46,name:"r1",runtime:"ui.model.meridian.StarUI"}}]},{type:"Label",props:{y:1126,x:237,width:465,"var":"needProp",text:"消耗物品：易经丹*10",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#c527ff",bold:!0,align:"left"}},{type:"Label",props:{y:1003,x:237,width:465,"var":"hasGas",text:"当前真元：10/100",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#00dc24",bold:!0,align:"left"}}]},t}(Sw),bC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.meridian.StarUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:76,height:32},child:[{type:"Clip",props:{y:2,x:0,width:28,skin:"comp/radio.png",name:"icon",height:28,clipY:3}},{type:"Label",props:{y:0,x:36,width:39,text:"星",styleSkin:"comp/label.png",name:"txt",height:32,fontSize:28,color:"#fbf8f8"}}]},t}(Sw),EC=function(e){function t(){this.submit=null,this.listTalisman=null,this.panelNow=null,this.notice=null,this.dressNum=null,this.costGas=null,this.panelNext=null,t.__super.call(this)}o(t,"ui.model.CultureUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Image",props:{y:195,x:10,width:730,skin:"ui/bg_windos.png",height:305,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:226,x:261,width:228,skin:"ui/widget_dazuo.png",height:247}},{type:"Image",props:{y:360,x:355,skin:"ui/arrow.png",rotation:-90}},{type:"Text",props:{y:529,x:47,text:"消耗灵气：",fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Button",props:{y:540,x:584,width:130,"var":"submit",stateNum:2,skin:"comp/button.png",label:"进  阶",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"List",props:{y:640,x:10,width:730,"var":"listTalisman",vScrollBarSkin:" ",spaceY:10,repeatY:3,height:627},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"TalismanCell",props:{y:0,x:0,name:"talisman",runtime:"ui.model.pops.TalismanCellUI"}},{type:"Label",props:{y:84,x:135,width:213,text:"练气期开启",styleSkin:"comp/label.png",name:"openInfo",leading:3,height:33,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:120,x:427,width:80,stateNum:2,skin:"comp/button.png",name:"btnDress",label:"佩戴",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:120,x:512,width:80,stateNum:2,skin:"comp/button.png",name:"btnUpgrade",label:"升品",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:120,x:597,width:80,stateNum:2,skin:"comp/button.png",name:"btnRebuild",labelSize:24,label:"洗炼",height:50,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:7,x:684,width:36,visible:!1,stateNum:1,skin:"chat/btn_chat1.png",name:"chat",height:36}}]}]},{type:"Box",props:{y:258,x:50,width:291,"var":"panelNow",height:229},child:[{type:"Label",props:{y:15,x:47,width:197,text:"练气    一层",styleSkin:"comp/label.png",name:"name",height:44,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:69,x:79,width:132,spaceY:6,repeatY:4,name:"attrs",height:146},child:[{type:"Label",props:{y:0,x:0,width:136,text:"攻击 +100",styleSkin:"comp/label.png",name:"render",height:30,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}}]}]},{type:"Text",props:{y:220,x:147,text:"当前境界",fontSize:24,
color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:222,x:468,width:172,text:"提升后境界",fontSize:24,color:"#00dc24",bold:!1,align:"center"}},{type:"Label",props:{y:1288,x:89,width:529,"var":"notice",text:"小贴示：法宝通过境界副本击杀境界Boss获得",styleSkin:"comp/label.png",height:42,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:585,x:47,"var":"dressNum",text:"装备法宝：（0/3）",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Label",props:{y:529,x:176,width:186,"var":"costGas",text:"1000/1000000",styleSkin:"comp/label.png",height:36,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Box",props:{y:260,x:409,width:291,"var":"panelNext",height:229},child:[{type:"Label",props:{y:15,x:47,width:197,text:"练气    一层",styleSkin:"comp/label.png",name:"name",height:44,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:69,x:79,width:132,spaceY:6,repeatY:4,name:"attrs",height:146},child:[{type:"Label",props:{y:0,x:0,width:136,text:"攻击 +100",styleSkin:"comp/label.png",name:"render",height:30,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}}]}]}]},t}(Sw),xC=function(e){function t(){this.lbCdn=null,this.submit=null,this.costSilver=null,this.listProps=null,this.panelNow=null,this.panelNext=null,this.attrArrow=null,this.silverIcon=null,this.lbSp=null,this.btnSp=null,t.__super.call(this)}o(t,"ui.model.BoneUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Image",props:{y:195,x:25,width:700,skin:"ui/bg_windos.png",height:377,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:221,x:223,skin:"ui/widget_dazuo.png"}},{type:"Image",props:{y:404,x:357,width:35,skin:"ui/arrow.png",rotation:-90,height:44}},{type:"Label",props:{y:688,x:25,width:185,"var":"lbCdn",text:"提升条件",styleSkin:"comp/label.png",height:34,fontSize:28,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Button",props:{y:1071,x:558,width:146,"var":"submit",stateNum:2,skin:"comp/button.png",labelSize:32,label:"突  破",height:61,sizeGrid:"4,4,4,4"}},{type:"Text",props:{y:1085,x:41,text:"花费铜币：",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:1085,x:246,"var":"costSilver",text:99999,styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"List",props:{y:732,x:25,width:700,"var":"listProps",spaceY:15,repeatY:3,height:294},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:90},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:90,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:30,x:20,text:"紫色特殊材料",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:24,x:222,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:31,x:280,text:"Lv.3",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:31,x:414,width:136,text:"1/10",styleSkin:"comp/label.png",name:"count",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Button",props:{y:21,x:562,width:80,stateNum:2,skin:"comp/button.png",name:"putIn",label:"放入",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Box",props:{y:233,x:34,width:300,"var":"panelNow",height:328},child:[{type:"Label",props:{y:14,x:26,text:"当前火灵根",styleSkin:"comp/label.png",name:"name",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:63,x:26,width:247,repeatY:9,repeatX:1,name:"attrs",height:248},child:[{type:"Box",props:{y:0,x:0,width:229,name:"render",height:27},child:[{type:"Label",props:{y:0,text:"攻击 +100",styleSkin:"comp/label.png",name:"base",left:0,fontSize:24,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Label",props:{y:0,x:114,text:"+100%",styleSkin:"comp/label.png",name:"sp",height:27,fontSize:24,color:"#fbf8f8",bold:!1,align:"left"}}]}]},{type:"Clip",props:{y:7,x:171,width:38,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:38,clipY:5}},{type:"Label",props:{y:14,x:213,text:"四阶",styleSkin:"comp/label.png",name:"name_g",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:233,x:387,width:300,"var":"panelNext",height:328},child:[{type:"Label",props:{y:14,x:26,text:"当前火灵根",styleSkin:"comp/label.png",name:"name",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:63,x:26,width:230,repeatY:9,repeatX:1,name:"attrs",height:248},child:[{type:"Box",props:{y:0,x:0,width:213,name:"render",height:27},child:[{type:"Label",props:{y:0,x:0,text:"攻击 +100",styleSkin:"comp/label.png",name:"base",height:27,fontSize:24,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Label",props:{y:0,x:115,text:"+100%",styleSkin:"comp/label.png",name:"sp",height:27,fontSize:24,color:"#fbf8f8",bold:!1,align:"left"}}]}]},{type:"Clip",props:{y:7,x:170,width:38,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:38,clipY:5}},{type:"Label",props:{y:14,x:218,text:"四阶",styleSkin:"comp/label.png",name:"name_g",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Image",props:{y:321,x:412,width:16,"var":"attrArrow",skin:"ui/arrow.png",rotation:-180,height:27}},{type:"Image",props:{y:1084,x:189,"var":"silverIcon",skin:"ui/tongbi.png"}},{type:"Text",props:{y:209,x:99,width:150,text:"当前灵根",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:209,x:460,width:150,text:"提升后灵根",fontSize:24,color:"#00dc24",bold:!1,align:"center"}},{type:"Text",props:{y:1266,x:46,width:683,text:"小贴示：紫色材料通过击杀boss或用天籁石提升品质获得",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:617,x:20,width:399,"var":"lbSp",text:"变异5级 灵根属性 + 10%",styleSkin:"comp/label.png",height:35,color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:604,x:558,width:146,"var":"btnSp",stateNum:2,skin:"comp/button.png",labelSize:32,label:"变  异",height:61,sizeGrid:"4,4,4,4"}}]},t}(Sw),SC=function(e){function t(){this.skillList=null,this.lbInfo=null,t.__super.call(this)}o(t,"ui.model.SkillUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"List",props:{y:195,x:29,width:716,"var":"skillList",spaceY:15,repeatY:4,height:1026},child:[{type:"Box",props:{y:0,x:0,width:716,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:634,skin:"ui/fangkuang.png",height:230,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:127,text:"怒斩问天",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#c18314",bold:!0,align:"center"}},{type:"Label",props:{y:14,x:266,text:"Lv.3",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:193,x:70,width:102,text:"消耗铜币",styleSkin:"comp/label.png",name:"lbSilver",height:29,fontSize:24,color:"#84ec6b",bold:!0,align:"left"}},{type:"Label",props:{y:193,x:211,width:101,text:1e5,styleSkin:"comp/label.png",name:"silver",height:30,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:165,x:516,width:100,stateNum:2,skin:"comp/button.png",name:"learnBtn",label:"学习",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:53,x:14,wordWrap:!0,width:615,text:"蓄力0.5秒，\\n造成[150+50]%并附带[200+100]点伤害，眩晕2秒（若蓄力过程中被晕眩，技能释放失败",styleSkin:"comp/label.png",name:"info",leading:2,fontSize:22,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:14,x:0,width:123,text:"【攻击】",styleSkin:"comp/label.png",name:"type",height:26,fontSize:32,color:"#99ec4d",bold:!0,align:"center"}},{type:"Button",props:{y:125,x:649,width:58,stateNum:2,skin:"ui/btn_arrow_0.png",name:"downBtn",height:58}},{type:"Button",props:{y:60,x:668,width:58,stateNum:2,skin:"ui/btn_arrow_1.png",pivotY:20,pivotX:20,name:"upBtn",height:58}},{type:"Label",props:{y:164,x:70,width:66,text:"需要等级",styleSkin:"comp/label.png",name:"lbNeedLv",height:20,fontSize:24,color:"#64e2c9",bold:!0,align:"left"}},{type:"Label",props:{y:164,x:174,width:80,text:100,styleSkin:"comp/label.png",name:"needLevel",height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:164,x:13,width:52,skin:"ui/skill/1001.png",name:"icon",height:52}},{type:"Image",props:{y:188,x:170,skin:"ui/tongbi.png",name:"silverIcon"}},{type:"Label",props:{y:128,x:14,wordWrap:!0,width:615,text:"【宗】宗门技能",styleSkin:"comp/label.png",name:"info2",leading:2,fontSize:22,color:"#fffc00",align:"left"}},{type:"Label",props:{y:163,x:261,text:"消耗法力",styleSkin:"comp/label.png",name:"lbNeedMP",fontSize:24,color:"#0084ff",bold:!0,align:"left"}},{type:"Label",props:{y:163,x:365,width:80,text:100,styleSkin:"comp/label.png",name:"needMP",height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Label",props:{y:1293,x:180,width:389,"var":"lbInfo",text:"小贴示：移动技能可更改释放顺序",styleSkin:"comp/label.png",height:39,fontSize:22,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Sw),wC=function(e){function t(){this.nameTxt=null,this.level=null,this.exp=null,this.nature=null,this.achieveTitle=null,this.txtStar=null,this.ntc=null,this.userId=null,this.cbDetail=null,this.alliance=null,this.chgNature=null,this.silver=null,this.attributes=null,t.__super.call(this)}o(t,"ui.model.RoleInfoUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Image",props:{y:195,x:15,width:720,skin:"ui/bg_windos.png",height:1080,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:514,x:32,skin:"ui/widget_role.png",cacheAs:"bitmap"}},{type:"Text",props:{y:254,x:45,text:"名字",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:253,x:130,"var":"nameTxt",text:"??",styleSkin:"comp/label.png",fontSize:28,color:"#f19e21",bold:!0,align:"left"}},{type:"Text",props:{y:336,x:45,text:"等级",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:334,x:130,"var":"level",text:99,styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:377,x:45,text:"经验",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:378,x:130,"var":"exp",text:"999/999999",styleSkin:"comp/label.png",fontSize:28,color:"#22d931",bold:!0,align:"left"}},{type:"Clip",props:{y:245,x:231,"var":"nature",skin:"ui/clip_wuxing.png",index:4,clipY:5}},{type:"Text",props:{y:468,x:45,text:"人物属性",fontSize:32,color:"#c5c502",bold:!0,align:"left"}},{type:"Text",props:{y:213,x:45,text:"角色信息",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:253,x:271,"var":"achieveTitle",text:"【叫我壕哥】",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:253,x:428,"var":"txtStar",text:"★★★",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:459,x:186,width:133,"var":"ntc",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:213,x:173,"var":"userId",text:"ID : 1",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:1292,x:2,width:745,text:"小贴示：百分比属性包含饰品强化、灵珠、部分血脉、境界",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"CheckBox",props:{y:471,x:362,width:142,"var":"cbDetail",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#00dc24,#FFFFFF,#FFFFFF",labelBold:!0,label:"显示详情",height:29}},{type:"Text",props:{y:295,x:45,text:"宗门",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:293,x:130,"var":"alliance",text:"无",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:298,x:556,width:163,"var":"chgNature",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"转换五行",height:65,sizeGrid:"4,4,4,4"}},{type:"Text",props:{y:418,x:45,text:"铜币",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:418,x:130,"var":"silver",text:"999999",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"List",props:{y:524,x:45,width:680,"var":"attributes",vScrollBarSkin:"comp/vscroll.png",spaceY:10,repeatX:1,height:719},child:[{type:"Box",props:{y:1,x:0,width:340,name:"render"},child:[{type:"Label",props:{text:"生命生命生命",styleSkin:"comp/label.png",name:"key",fontSize:28,color:"#46aec8",bold:!0,align:"left"}},{type:"Label",props:{y:0,x:232,text:9999,styleSkin:"comp/label.png",name:"value",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}}]}]}]},t}(Sw),CC=function(e){function t(){this.htmltext=null,t.__super.call(this)}o(t,"ui.model.buy.paoma.pao_ma_deng_wzUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:30},child:[{type:"HTMLDivElement",props:{y:3,x:0,width:1e3,"var":"htmltext",styleSkin:"comp/html.png",innerHTML:"<span color='#f8de9d' style=' font:20px SimSun; font-weight:bold;'>【玩家五个字】从竞技场对战【玩家五个字】战胜了对手，获得【仙月石Lv100】</span>",height:24}}]},t}(Sw),TC=function(e){function t(){this.wz1=null,this.wz2=null,t.__super.call(this)}o(t,"ui.model.buy.paoma.pao_ma_dengUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.buy.paoma.pao_ma_deng_wzUI",CC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:80},child:[{type:"Box",props:{y:38,x:0,mouseThrough:!0,mouseEnabled:!0},child:[{type:"pao_ma_deng_wz",props:{y:0,x:0,"var":"wz1",runtime:"ui.model.buy.paoma.pao_ma_deng_wzUI"}},{type:"pao_ma_deng_wz",props:{y:0,x:1100,"var":"wz2",runtime:"ui.model.buy.paoma.pao_ma_deng_wzUI"}}]}]},t}(Sw),IC=function(e){function t(){this.ani1=null,this.type1=null,this.type2=null,this.times=null,t.__super.call(this)}o(t,"ui.model.buy.isp.tt_videoUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{name:"typeVideo",mouseThrough:!1,mouseEnabled:!0},child:[{type:"Image",props:{y:1,x:0,width:125,visible:!0,skin:"comp/bg.png",height:61,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:23,x:16,width:20,"var":"type1",skin:"ui/red_point.png",height:20},child:[{type:"Text",props:{y:-2,x:7,width:105,text:"录屏",fontSize:22,color:"#ffffff",align:"center"}}]},{type:"Box",props:{y:14,x:7,width:131,visible:!1,"var":"type2",height:33},child:[{type:"Label",props:{y:7,x:56,width:66,"var":"times",text:"30s",styleSkin:"comp/label.png",height:25,fontSize:22,color:"#ff0400",alpha:1,align:"center"}},{type:"Text",props:{y:7,x:26,text:"录制",fontSize:22,color:"#ffffff",alpha:1,align:"left"}},{type:"Image",props:{y:10,x:4,width:18,skin:"ui/bgHp.png",height:18,alpha:1},compId:15}]}],animations:[{nodes:[{target:15,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:15,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:15,key:"alpha",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:15,key:"alpha",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:15,key:"alpha",index:30}]}}],name:"ani1",id:1,frameRate:24,action:2}]},t}(Sw),AC=function(e){function t(){t.__super.call(this)}o(t,"ui.model.demon.DemonCellUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:730,height:260},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",name:"bg",height:260,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:59,x:56,width:547,styleSkin:"comp/html.png",name:"attribute",height:171}},{type:"Label",props:{y:12,x:159,text:"17级",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:12,x:3,text:"【伏魔弓】",styleSkin:"comp/label.png",name:"position",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Sw),NC=function(e){function t(){this.logo=null,this.gameNumber=null,this.btnAge=null,t.__super.call(this)}o(t,"ui.pages.HealthPageUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Image",props:{y:0,x:15,"var":"logo",skin:"ui/logo.png",name:"logo"}},{type:"Text",props:{y:1300,x:85,width:662,visible:!1,text:"Powered by LayaAir Engine",fontSize:18,color:"#FFFFFF",bold:!1,align:"right"}},{type:"Text",props:{y:826,x:29,wordWrap:!0,width:692,text:"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",leading:10,fontSize:24,color:"#FFFFFF",bold:!0,align:"center"}},{type:"Label",props:{y:1087,x:24,wordWrap:!0,width:701,"var":"gameNumber",styleSkin:"comp/label.png",leading:10,height:93,fontSize:18,color:"#FFFFFF",align:"center"}},{type:"Text",props:{y:1049,x:121,text:"本游戏适合16周岁以上用户，为了您的健康，请合理控制游戏时间",fontSize:18,color:"#FFFFFF",align:"center"}},{type:"Button",props:{y:760,x:648,"var":"btnAge",stateNum:1,skin:"ui/16+.png",scaleY:.3,scaleX:.3}},{type:"Text",props:{y:918,x:29,wordWrap:!0,width:692,text:"开发团队承诺积极履行《网络游戏行业防沉迷自律公约》",leading:10,fontSize:24,color:"#FFFFFF",align:"center"}}]},t}(Sw),PC=function(e){function t(){this.itemBar=null,this.loginPage=null,this.regPage=null,this.errorInfo=null,this.loginSP=null,this.ntc=null,this.btnAge=null,this.cbAgree=null,this.firstPage=null,t.__super.call(this)}o(t,"ui.pages.LoginRegUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Tab",props:{y:332,x:145,"var":"itemBar",stateNum:2,space:20,skin:"comp/tab.png",selectedIndex:-1,labels:"登    录,注    册,找    回",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}},{type:"Box",props:{y:402,x:126,"var":"loginPage"},child:[{type:"Image",props:{y:0,x:-2,width:500,skin:"comp/bg.png",height:369,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:91,x:51,text:"帐    号：",fontSize:26,color:"#FFFFFF",bold:!0}},{type:"TextInput",props:{y:82,x:164,width:300,type:"text",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",prompt:"输入手机号或邮箱",name:"email",height:42,fontSize:32}},{type:"Text",props:{y:178,x:51,text:"密    码：",fontSize:26,color:"#FFFFFF",bold:!0}},{type:"TextInput",props:{y:168,x:164,width:300,type:"password",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",prompt:"输入密码",name:"password",height:42,fontSize:26}},{type:"Button",props:{y:259,x:171,width:158,stateNum:2,skin:"comp/button.png",name:"btnLogin",label:"登录",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:402,x:774,"var":"regPage"},child:[{type:"Image",props:{width:500,skin:"comp/bg.png",height:370,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:69,x:46,text:"帐   号：",fontSize:26,color:"#FFFFFF",bold:!0}},{type:"TextInput",props:{y:60,x:147,width:314,type:"text",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",prompt:"输入手机号或邮箱",name:"email",height:42,fontSize:32}},{type:"Button",props:{y:279,x:173,width:154,stateNum:2,skin:"comp/button.png",name:"btnSubmit",label:"注    册",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:215,x:46,width:96,text:"密   码：",styleSkin:"comp/label.png",name:"lbPwd",height:32,color:"#FFFFFF",bold:!0,fontSize:26}},{type:"TextInput",props:{y:206,x:147,width:314,type:"password",text:"glim",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",name:"password",height:42,fontSize:26}},{type:"Text",props:{y:146,x:46,text:"验证码：",fontSize:26,color:"#FFFFFF",bold:!0}},{type:"TextInput",props:{y:137,x:147,width:158,type:"number",text:"345562",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",name:"emailcode",height:44,fontSize:26,bold:!0}},{type:"Button",props:{y:132,x:363,width:100,stateNum:2,skin:"comp/button.png",name:"btnCode",label:"获取",height:56,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Label",props:{y:1118,x:28,width:329,"var":"errorInfo",text:"错误信息",styleSkin:"comp/label.png",height:46,fontSize:32,color:"#f80c08",bold:!0}},{type:"Box",props:{y:402,x:-551,"var":"loginSP"},child:[{type:"Image",props:{y:0,x:-2,width:500,skin:"comp/bg.png",height:369,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:91,x:51,text:"角色ID：",fontSize:26,color:"#FFFFFF",bold:!0}},{type:"TextInput",props:{y:82,x:164,width:300,type:"text",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",prompt:"输入角色编号,例 1-001",name:"playerId",height:42,fontSize:26}},{type:"Text",props:{y:178,x:51,text:"口    令：",fontSize:26,color:"#FFFFFF",bold:!0}},{type:"TextInput",props:{y:168,x:164,width:300,type:"password",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",prompt:"输入口令",name:"password",height:42,fontSize:26}},{type:"Button",props:{y:259,x:171,width:158,stateNum:2,skin:"comp/button.png",name:"btnLogin",label:"登录",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Label",props:{y:982,x:10,width:730,"var":"ntc",text:"温馨提示：海外用户请附加国际区号，例如 +85200000000\\n邮箱注册请查看邮件是否在垃圾箱中",styleSkin:"comp/label.png",leading:5,height:74,color:"#6b9eec",bold:!1,align:"center",fontSize:26}},{type:"Button",props:{y:664,x:523,"var":"btnAge",stateNum:1,skin:"ui/16+.png",scaleY:.3,scaleX:.3}},{type:"CheckBox",props:{y:810,x:128,width:205,"var":"cbAgree",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#e70626,#00dc24,#FFFFFF,#FFFFFF",labelBold:!0,label:"我已阅读并同意",height:29}},{type:"Label",props:{y:814,x:373,width:127,underlineColor:"#ffffff",underline:!0,text:"用户协议",styleSkin:"comp/label.png",name:"txAgree1",mouseEnabled:!0,height:38,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:814,x:501,width:127,underlineColor:"#ffffff",underline:!0,text:"隐私协议",styleSkin:"comp/label.png",name:"txAgree2",mouseEnabled:!0,height:38,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Box",props:{y:402,x:1327,"var":"firstPage"},child:[{type:"Image",props:{y:0,x:-2,width:500,skin:"comp/bg.png",height:369,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:209,x:170,width:158,stateNum:2,skin:"comp/button.png",name:"btnAccount",label:"帐号登录",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:112,x:170,width:158,stateNum:2,skin:"comp/button.png",name:"btnVisitor",label:"游客登录",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},t}(Sw),RC=function(e){function t(){this.btnSure=null,this.bg_relation=null,this.iconSelect=null,this.txtSelect=null,this.txtStyle=null,t.__super.call(this)}o(t,"ui.pages.SelectWuxingUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Button",props:{y:1098,x:256,width:236,"var":"btnSure",stateNum:2,skin:"comp/button.png",name:"btnSure",labelBold:!0,label:"进入游戏",height:84,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:454,x:375,"var":"bg_relation",skin:"ui/bg_wuxingrule.png",pivotY:377,pivotX:375}},{type:"Clip",props:{y:898,x:238,"var":"iconSelect",skin:"ui/clip_wuxing.png",index:4,clipY:5}},{type:"Text",props:{y:29,x:311,text:"选择五行",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:835,x:181,visible:!1,text:"请慎重选择五行，确认后不能更改",fontSize:26,color:"#865fdb",bold:!0,align:"left"}},{type:"Label",props:{y:912,x:111,wordWrap:!0,width:544,"var":"txtSelect",text:"土系特点：\\n        防御高，高减免，特殊抵抗状态高，并且拥有沼化攻击几率后，便可使敌人降低攻击和防御属性，大大增幅自己防御高的特点。",styleSkin:"comp/label.png",leading:10,height:152,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:120,x:328,skin:"ui/clip_nature_1.png",name:"wx_3",mouseEnabled:!0,index:2,clipY:5}},{type:"Clip",props:{y:309,x:578,skin:"ui/clip_nature_1.png",name:"wx_2",mouseEnabled:!0,index:1,clipY:5}},{type:"Clip",props:{y:294,x:61,skin:"ui/clip_nature_1.png",name:"wx_1",mouseEnabled:!0,index:0,clipY:5}},{type:"Clip",props:{y:602,x:170,skin:"ui/clip_nature_1.png",name:"wx_5",mouseEnabled:!0,index:4,clipY:5}},{type:"Clip",props:{y:606,x:477,skin:"ui/clip_nature_1.png",name:"wx_4",mouseEnabled:!0,index:3,clipY:5}},{type:"Label",props:{y:913,x:275,visible:!1,"var":"txtStyle",text:"【优势：中后期】",styleSkin:"comp/label.png",leading:3,fontSize:26,color:"#ff6100",align:"left"}}]},t}(Sw),LC=function(e){function t(){this.headList=null,this.nameTxt=null,this.creatBtn=null,this.selectClip=null,this.txt_error=null,this.rollBtn=null,this.btnBack=null,t.__super.call(this)}o(t,"ui.pages.CreatePlayerUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"List",props:{y:211,x:161,width:440,"var":"headList",vScrollBarSkin:"comp/vscroll.png",spaceY:10,spaceX:20,repeatX:2,height:513},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:200,skin:"ui/bg_white.png",sizeGrid:"2,2,2,2",height:200}},{type:"Image",props:{y:0,x:0,width:200,skin:"ui/head/m1.png",name:"bg",height:200}}]}]},{type:"TextInput",props:{y:909,x:164,width:264,"var":"nameTxt",type:"text",text:"??",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",maxChars:5,height:55,fontSize:26,bold:!0,align:"center"}},{type:"Button",props:{y:1004,x:268,width:214,"var":"creatBtn",stateNum:2,skin:"comp/button.png",labelColors:"#ffffff",label:"下一步",height:70,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Clip",props:{y:311,x:265,width:271,"var":"selectClip",skin:"create/clip_select.png",pivotY:145,pivotX:138,interval:100,height:278,clipX:15,autoPlay:!0}},{type:"Label",props:{y:1288,x:129,width:492,"var":"txt_error",text:"出错信息",styleSkin:"comp/label.png",height:26,fontSize:26,color:"#ec1616",bold:!0,align:"center"}},{type:"Button",props:{y:906,x:474,width:113,"var":"rollBtn",stateNum:2,skin:"comp/button.png",labelColors:"#ffffff",label:"换一个",height:59,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:70,x:669,"var":"btnBack",stateNum:1,skin:"comp/btn_close.png"}}]},t}(Sw),OC=function(e){function t(){this.txt_now=null,this.pressBar=null,this.txt_press=null,this.txt_model=null,this.txt_error=null,this.btnAge=null,this.refresh=null,t.__super.call(this)}o(t,"ui.pages.LoadingPageUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Image",props:{y:199,x:5,width:740,skin:"comp/bg.png",height:460,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:390,x:147,"var":"txt_now",text:"当前项",styleSkin:"comp/label.png",color:"#FFFFFF",align:"left",fontSize:26}},{type:"ProgressBar",props:{y:423,x:25,width:700,"var":"pressBar",skin:"comp/progress.png",sizeGrid:"6,7,5,13",height:20}},{type:"Label",props:{y:392,x:640,width:86,"var":"txt_press",text:"99%",styleSkin:"comp/label.png",height:26,color:"#FFFFFF",bold:!0,align:"right",fontSize:26}},{type:"Text",props:{y:274,x:282,text:"正在进入游戏....",fontSize:26,color:"#FFFFFF",bold:!0,align:"center"}},{type:"Label",props:{y:361,x:147,"var":"txt_model",text:"模块",styleSkin:"comp/label.png",color:"#FFFFFF",align:"left",fontSize:26}},{type:"Text",props:{y:390,x:27,width:120,text:"正在载入：",fontSize:26,color:"#FFFFFF",align:"left"}},{type:"Text",props:{y:361,x:27,text:"加载模块：",fontSize:26,color:"#FFFFFF",align:"left"}},{type:"Label",props:{y:451,x:27,width:319,"var":"txt_error",text:"出错信息",styleSkin:"comp/label.png",color:"#ec1616",align:"left",fontSize:26}},{type:"Button",props:{y:210,x:683,"var":"btnAge",stateNum:1,skin:"ui/16+.png",scaleY:.3,scaleX:.3}},{type:"Button",props:{y:125,x:675,"var":"refresh",stateNum:1,skin:"comp/btn_close.png"}}]},t}(Sw),MC=function(e){function t(){this.icoHead=null,this.barModel=null,this.txtName=null,this.iconNature=null,this.boxHangdungeon=null,this.bgExp=null,this.txtLevel=null,this.spcailDungeonPl=null,this.listCulture=null,this.btnAchieve=null,this.achieveTitle=null,this.paytotal_wx_kf=null,this.listVisitPl=null,this.offlineLb=null,this.chatLast=null,this.btn_chat=null,this.moduleItems=null,this.listacthome=null,this.dungeon=null,this.listDungeon=null,this.selectDungeon=null,this.btnSurprise=null,this.btn2Yuan=null,t.__super.call(this)}o(t,"ui.pages.HomePageUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Box",props:{y:72,x:8,"var":"icoHead",name:"icoHead",alpha:.3},child:[{type:"Image",props:{y:0,x:0,width:200,skin:"ui/white_grid.png",height:200,sizeGrid:"4,4,4,4"}},{type:"Image",props:{y:0,x:0,width:200,skin:"ui/head/w2.png",name:"bg",height:200}}]},{type:"Tab",props:{y:282,x:17,"var":"barModel",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"装备副本,特殊副本,境界副本,礼包,活动",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26,stateNum:2}},{type:"Label",props:{y:81,x:218,"var":"txtName",text:"??",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:129,x:218,text:"等级：",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:72,x:316,"var":"iconNature",skin:"ui/clip_wuxing.png",index:1,clipY:5}},{type:"Box",props:{y:216,x:220,width:515,"var":"boxHangdungeon",right:15,height:50},child:[{type:"Image",props:{top:0,skin:"ui/bg_white.png",right:0,left:0,gray:!0,bottom:0,alpha:.2}},{type:"Label",props:{y:15,x:10,text:"锦鸡",styleSkin:"comp/label.png",name:"txtHangGroup",left:10,fontSize:22,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:15,x:70,text:"锦鸡锦鸡",styleSkin:"comp/label.png",name:"txtHangDungeon",fontSize:22,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:15,x:218,width:292,text:"平均收益：正在算...",styleSkin:"comp/label.png",name:"txtHangDungeonExp",height:22,fontSize:22,color:"#0cd41c",bold:!1}},{type:"Clip",props:{x:171,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5,centerY:0}},{type:"Label",props:{y:15,x:424,text:"装备副本",styleSkin:"comp/label.png",name:"dungeonType",fontSize:22,color:"#ffffff",bold:!1,align:"center"}}]},{type:"Image",props:{y:178,x:295,width:223,skin:"ui/bg_0.png",sizeGrid:"0,24,0,20",height:24}},{type:"Image",props:{y:180,x:297,width:219,"var":"bgExp",skin:"ui/bgHp3.png",height:20,sizeGrid:"0,20,0,20"}},{type:"Text",props:{y:177,x:218,text:"经验：",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:129,x:305,"var":"txtLevel",text:99,styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Panel",props:{y:343,x:-1528,width:740,"var":"spcailDungeonPl",vScrollBarSkin:"comp/vscroll.png",height:854},child:[{type:"Box",props:{y:0,x:0,name:"spcailDungeon"},child:[{type:"Box",props:{y:388,x:0,name:"forestHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:68,x:40,text:"兽魂森林",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:72,x:261,text:"今日剩余进入次数：--",styleSkin:"comp/label.png",name:"times",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:47,x:3,width:47,visible:!1,text:"探索中...",styleSkin:"comp/label.png",rotation:-30,name:"lbFighting",height:26,fontSize:26,color:"#0cd41c",align:"left"}},{type:"Label",props:{y:148,x:225,text:"温馨提示：每5小时增加一次进入次数，3次为上限",styleSkin:"comp/label.png",name:"enterTips",fontSize:22,color:"#21db21",align:"left"}},{
type:"Button",props:{y:53,x:590,width:140,stateNum:2,skin:"comp/button.png",name:"btnPetshop",label:"灵宠乐园",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:111,x:54,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:0,x:0,name:"spHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:56,x:52,width:118,text:"五行宫",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Text",props:{y:25,x:232,text:"当前关卡：",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:21,x:375,text:"--",styleSkin:"comp/label.png",name:"currentLv",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Label",props:{y:62,x:375,text:"--",styleSkin:"comp/label.png",name:"passedLv",color:"#0cd41c",align:"left",fontSize:26}},{type:"Text",props:{y:62,x:232,text:"最大通关：",fontSize:26,color:"#0cd41c",align:"center"}},{type:"Label",props:{y:46,x:1,width:47,visible:!1,text:"闯关中...",styleSkin:"comp/label.png",rotation:-30,name:"lbFighting",height:26,fontSize:26,color:"#0cd41c",align:"left"}},{type:"Text",props:{y:147,x:217,text:"温馨提示：击败内部守卫即可获得大量经验和铜币。",fontSize:22,color:"#21db21",align:"left"}},{type:"Label",props:{y:111,x:232,text:"距离免费重置时间：--小时--分钟",styleSkin:"comp/label.png",name:"nextClearTime",fontSize:24,color:"#fffc00",align:"left"}},{type:"Button",props:{y:12,x:590,width:140,stateNum:2,skin:"comp/button.png",name:"btnRank",label:"排行榜",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:82,x:590,width:140,stateNum:2,skin:"comp/button.png",name:"btnReset",label:"重置",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:99,x:59,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:1164,x:0,name:"towertHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:60,x:40,text:"试练之塔",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:31,x:227,text:"报名时间：00:00~15:00",styleSkin:"comp/label.png",name:"lbSignTime",color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:46,x:4,width:89,visible:!1,text:"挑战中...",styleSkin:"comp/label.png",rotation:-30,name:"lbFighting",height:24,fontSize:26,color:"#0cd41c",align:"left"}},{type:"Text",props:{y:150,x:238,text:"温馨提示：报名后方可在开启时间内进入挑战。",fontSize:22,color:"#21db21",align:"left"}},{type:"Button",props:{y:19,x:590,width:140,stateNum:2,skin:"comp/button.png",name:"btnRank",label:"排行榜",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:74,x:227,text:"开启时间：17:00~23:00",styleSkin:"comp/label.png",name:"lbRaceTime",color:"#fbf8f8",align:"center",fontSize:26}},{type:"Button",props:{y:89,x:590,width:140,stateNum:2,skin:"comp/button.png",name:"btnExchange",label:"威望兑换",height:59,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:113,x:229,width:346,text:"35级开启",styleSkin:"comp/label.png",name:"txLevel",height:26,color:"#f32d25",align:"center",fontSize:26}},{type:"Button",props:{y:107,x:56,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:776,x:0,name:"ladderHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:46,x:52,text:"竞技场",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:81,x:224,text:"竞技场中可获得大量铜币和宝石碎片",styleSkin:"comp/label.png",name:"lbRaceTime",color:"#0cd41c",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:96,x:57,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:39,x:263,text:"今日剩余挑战次数：--",styleSkin:"comp/label.png",name:"times",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:147,x:254,text:"温馨提示：每日22:00计算排名奖励。",styleSkin:"comp/label.png",name:"enterTips",fontSize:22,color:"#21db21",align:"left"}}]},{type:"Box",props:{y:194,x:0,name:"stoneHead"},child:[{type:"Image",props:{width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:15,x:235,text:"当前收益：",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:15,x:369,text:"--",styleSkin:"comp/label.png",name:"currentIncome",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Label",props:{y:48,x:369,text:"--",styleSkin:"comp/label.png",name:"collectTime",color:"#0cd41c",align:"left",fontSize:26}},{type:"Text",props:{y:48,x:235,text:"采集时间：",fontSize:26,color:"#0cd41c",align:"center"}},{type:"Text",props:{y:146,x:266,text:"温馨提示：五行宫通关越高，灵石收益越高",fontSize:22,color:"#21db21",align:"left"}},{type:"Button",props:{y:82,x:590,width:140,stateNum:2,skin:"comp/button.png",name:"btnRank",label:"劫掠",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:56,x:40,text:"采集灵石",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:81,x:369,text:"--",styleSkin:"comp/label.png",name:"totalCount",color:"#fffc00",align:"left",fontSize:26}},{type:"Text",props:{y:81,x:235,text:"累计灵石：",fontSize:26,color:"#fffc00",align:"center"}},{type:"Button",props:{y:14,x:590,width:140,stateNum:2,skin:"comp/button.png",name:"btnCollect",label:"收取",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:114,x:235,text:"劫掠次数：",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:114,x:369,text:"--",styleSkin:"comp/label.png",name:"currentArenaTime",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Label",props:{y:103,x:57,width:106,styleSkin:"comp/label.png",name:"coolTime",height:24,fontSize:24,color:"#0cd41c",align:"center"}}]},{type:"Box",props:{y:1746,x:0,name:"teamHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:60,x:40,text:"组队副本",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:55,x:296,width:236,text:"今日可进入次数：3",styleSkin:"comp/label.png",name:"lbTimes",height:26,color:"#f4f9f5",bold:!0,fontSize:26}},{type:"Button",props:{y:106,x:57,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:140,x:214,width:514,text:"每日0点重置次数，掉落特殊装备图纸，融灵",fontSize:26,color:"#0cd41c",align:"center"}},{type:"Label",props:{y:55,x:3,width:89,visible:!1,text:"挑战中...",styleSkin:"comp/label.png",rotation:-30,name:"lbFighting",height:26,fontSize:26,color:"#0cd41c",align:"left"}},{type:"Label",props:{y:90,x:296,width:250,text:"今日可购买次数：3",styleSkin:"comp/label.png",name:"lbBuyed",height:26,color:"#f4f9f5",bold:!0,fontSize:26}},{type:"Button",props:{y:79,x:579,width:150,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买次数",height:58,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:14,x:580,width:150,stateNum:2,skin:"comp/button.png",name:"btnLogs",label:"最近奖励",height:58,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:73,x:225,width:346,text:"35级开启",styleSkin:"comp/label.png",name:"txLevel",height:26,color:"#f32d25",align:"center",fontSize:26}}]},{type:"Box",props:{y:970,x:0,name:"arenaHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:46,x:40,text:"擂台争霸",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:91,x:224,text:"全天开放，每日产出大量铜币和灵珠碎片",styleSkin:"comp/label.png",name:"lbRaceTime",color:"#0cd41c",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:96,x:57,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:49,x:227,width:346,text:"35级开启",styleSkin:"comp/label.png",name:"txLevel",height:26,color:"#f32d25",align:"center",fontSize:26}},{type:"Label",props:{y:140,x:226,width:463,text:"周1-5本服，周末跨服",styleSkin:"comp/label.png",name:"times",height:26,color:"#6b9eec",bold:!0,align:"center",fontSize:26}}]},{type:"Box",props:{y:582,x:0,name:"lodeHead"},child:[{type:"Image",props:{width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Button",props:{y:108,x:60,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:15,x:235,text:"当前状态：",styleSkin:"comp/label.png",name:"currentState",color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:57,x:235,text:"今日夺掠次数：",styleSkin:"comp/label.png",name:"todayCount",color:"#0cd41c",align:"center",fontSize:26}},{type:"Text",props:{y:146,x:266,text:"温馨提示：矿脉可产出各种稀有道具",fontSize:22,color:"#21db21",align:"left"}},{type:"Text",props:{y:56,x:40,text:"地灵矿脉",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:99,x:235,text:"剩余地图：",styleSkin:"comp/label.png",name:"mapCount",color:"#fffc00",align:"center",fontSize:26}},{type:"Label",props:{y:57,x:291,width:346,text:"35级开启",styleSkin:"comp/label.png",name:"txLevel",height:26,color:"#f32d25",align:"center",fontSize:26}}]},{type:"Box",props:{y:1358,x:0,name:"samsaraHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:68,x:40,text:"轮回之地",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:72,x:296,width:276,text:"当前层数：10",styleSkin:"comp/label.png",name:"title",height:26,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Label",props:{y:47,x:3,width:47,visible:!1,text:"战斗中...",styleSkin:"comp/label.png",rotation:-30,name:"lbFighting",height:26,fontSize:26,color:"#0cd41c",align:"left"}},{type:"Label",props:{y:148,x:225,text:"温馨提示：闯关可获得奖励，层数越高奖励越多",styleSkin:"comp/label.png",name:"enterTips",fontSize:22,color:"#21db21",align:"left"}},{type:"Button",props:{y:111,x:54,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:53,x:588,width:140,stateNum:2,skin:"comp/button.png",name:"btnAwds",label:"奖励预览",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:70,x:225,width:346,text:"35级开启",styleSkin:"comp/label.png",name:"txLevel",height:26,color:"#f32d25",align:"center",fontSize:26}}]},{type:"Box",props:{y:1552,x:0,name:"mysteryHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:68,x:40,text:"伏魔秘境",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:72,x:296,width:276,text:"当前层数：10",styleSkin:"comp/label.png",name:"title",height:26,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Label",props:{y:47,x:3,width:47,visible:!1,text:"探索中...",styleSkin:"comp/label.png",rotation:-30,name:"lbFighting",height:26,fontSize:26,color:"#0cd41c",align:"left"}},{type:"Label",props:{y:148,x:225,text:"温馨提示：获取伏魔装备，层数越高奖励越多",styleSkin:"comp/label.png",name:"enterTips",fontSize:22,color:"#21db21",align:"left"}},{type:"Button",props:{y:111,x:54,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:70,x:225,width:346,text:"35级开启",styleSkin:"comp/label.png",name:"txLevel",height:26,color:"#f32d25",align:"center",fontSize:26}},{type:"Label",props:{y:112,x:296,width:255,text:"切换倒计时：00:00:00",styleSkin:"comp/label.png",name:"txClock",height:26,color:"#fffc00",fontSize:26}},{type:"Button",props:{y:60,x:588,width:140,stateNum:2,skin:"comp/button.png",name:"btnCancel",label:"取消切换",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:2141,x:0,name:"dungeonDailyHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:57,x:40,text:"每日副本",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:50,x:264,text:"今日可获取奖励次数1",styleSkin:"comp/label.png",name:"lbRaceTime",color:"#0cd41c",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:91,x:264,text:"可免费尝试挑战次数5",styleSkin:"comp/label.png",name:"lbTryTime",color:"#0cd41c",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:49,x:227,width:346,text:"55级开启",styleSkin:"comp/label.png",name:"txLevel",height:26,color:"#f32d25",align:"center",fontSize:26}},{type:"Label",props:{y:140,x:226,width:463,text:"激活钻石月卡可增加一次奖励次数",styleSkin:"comp/label.png",height:26,color:"#6b9eec",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:55,x:3,width:89,visible:!1,text:"挑战中...",styleSkin:"comp/label.png",rotation:-30,name:"lbFighting",height:26,fontSize:26,color:"#0cd41c",align:"left"}},{type:"Button",props:{y:96,x:57,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:60,x:588,width:140,stateNum:2,skin:"comp/button.png",name:"btnGuard",label:"护卫布阵",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:1944,x:0,name:"worldbossHead"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,width:3,skin:"ui/vline_white.png",height:176,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:60,x:40,text:"世界首领",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:47,x:217,width:349,text:"喂养度：3/10000",styleSkin:"comp/label.png",name:"lbExp",height:26,color:"#f4f9f5",bold:!0,fontSize:26}},{type:"Button",props:{y:106,x:57,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:144,x:213,width:520,text:"小贴士：喂养第一玩家可指定开启时间",height:26,fontSize:26,color:"#0cd41c"}},{type:"Label",props:{y:55,x:3,width:89,visible:!1,text:"挑战中...",styleSkin:"comp/label.png",rotation:-30,name:"lbFighting",height:26,fontSize:26,color:"#0cd41c",align:"left"}},{type:"Label",props:{y:14,x:217,width:344,text:"首领境界：炼气",styleSkin:"comp/label.png",name:"lbName",height:26,color:"#f4f9f5",bold:!0,fontSize:26}},{type:"Button",props:{y:79,x:579,width:150,stateNum:2,skin:"comp/button.png",name:"btnRank",label:"排  名",height:58,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:14,x:580,width:150,stateNum:2,skin:"comp/button.png",name:"btnFeed",label:"喂  养",height:58,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:73,x:225,width:346,text:"45级开启",styleSkin:"comp/label.png",name:"txLevel",height:26,color:"#f32d25",align:"center",fontSize:26}},{type:"Label",props:{y:83,x:217,width:349,text:"开启时间：下周六11:00",styleSkin:"comp/label.png",name:"lbTime",height:26,color:"#f4f9f5",bold:!0,fontSize:26}}]}]}]},{type:"List",props:{y:343,x:1565,width:740,"var":"listCulture",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:860},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Image",props:{width:740,skin:"ui/fangkuang.png",height:178,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,skin:"ui/vline_white.png",height:172,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:73,x:102,text:"【练气】",styleSkin:"comp/label.png",name:"dName",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:50,x:234,text:"怪物等级：",styleSkin:"comp/label.png",name:"monsterLb",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:99,x:234,text:"副本怪物掉落灵气，法宝等",styleSkin:"comp/label.png",name:"desc",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:52,x:392,text:"35",styleSkin:"comp/label.png",name:"monsterLv",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Button",props:{y:81,x:634,width:100,"var":"btnAchieve",stateNum:2,skin:"comp/button.png",label:"任务",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:81,x:367,"var":"achieveTitle",text:"【叫我壕哥】",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:372,x:34,width:139,"var":"paytotal_wx_kf",stateNum:2,skin:"comp/button.png",label:"在线客服",height:53,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Panel",props:{y:343,x:2360,width:740,"var":"listVisitPl",vScrollBarSkin:"comp/vscroll.png",mouseThrough:!0,mouseEnabled:!0,height:855},child:[{type:"Box",props:{y:0,x:0,width:731,name:"listVisit",height:891},child:[{type:"Box",props:{y:846,x:1,width:740,name:"actCode",height:180},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:180,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:12,x:305,text:"使用激活码",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:145,x:135,text:"加入QQ群：37459311可获得更多礼包码。",styleSkin:"comp/label.png",name:"qqGroup",fontSize:24,color:"#21db21",bold:!0,align:"left"}},{type:"Button",props:{y:60,x:579,width:140,stateNum:2,skin:"comp/button.png",name:"btnActive",label:"激活",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"TextInput",props:{y:64,x:171,width:397,type:"text",text:"欢迎萌新",skin:"comp/textinput.png",name:"inputActive",height:52,fontSize:32,bold:!1,align:"center"}},{type:"Button",props:{y:17,x:18,width:140,visible:!1,stateNum:2,skin:"comp/button.png",name:"btnOldguy",label:"转移福利",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:1037,x:1,width:740,visible:!1,name:"invitCode"},child:[{type:"Image",props:{y:-1,x:0,width:740,visible:!0,skin:"ui/fangkuang.png",height:617,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:178,x:6,text:"    二维码推广：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:208,x:9,wordWrap:!0,width:525,visible:!0,text:"    右侧是你的专属二维码推广链接，也可将此截图发送给你的好友，让你的好友很方便扫下二维码，带他们体验这文字游戏的独特魅力，一起分享放置游戏的喜悦！",leading:3,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:332,x:6,text:"     推广元宝增加规则：",leading:3,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:159,x:2,width:2,visible:!0,skin:"ui/vline_white.png",rotation:-90,height:740,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:480,x:19,visible:!0,text:"一级推广玩家数量：5",styleSkin:"comp/label.png",name:"lbChildNum",fontSize:22,color:"#6b9eec",align:"left"}},{type:"Label",props:{y:480,x:289,visible:!0,text:"已贡献200元宝",styleSkin:"comp/label.png",name:"lbChildAward",fontSize:22,color:"#fffc00",align:"left"}},{type:"Button",props:{y:474,x:568,width:130,visible:!0,stateNum:2,skin:"comp/button.png",name:"btnGetAward",label:"领取",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:577,x:22,width:694,visible:!0,text:"小提示：同一个帐号对应唯一邀请码，奖励可以由帐号下任意角色领取。",fontSize:20,color:"#21db21",align:"center"}},{type:"Button",props:{y:91,x:537,width:130,visible:!1,stateNum:2,skin:"comp/button.png",name:"btnBind",label:"绑定",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:117,x:82,visible:!1,text:"绑定邀请人：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"TextInput",props:{y:109,x:240,width:250,visible:!1,type:"text",text:"888888",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",name:"inputInvite",height:41,fontSize:24,bold:!1,align:"center"}},{type:"Button",props:{y:81,x:229,width:279,stateNum:2,skin:"comp/button.png",name:"codeCopy",labelSize:26,label:"复制链接分享给好友",height:60,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:16,x:10,wordWrap:!0,width:717,text:"   我正在玩《无尽洪荒》文字挂机修仙游戏，五行为职业，山海神兽为装备 http：//XXXXX",styleSkin:"comp/label.png",name:"shareUrl",height:50,fontSize:22,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:364,x:9,wordWrap:!0,width:695,visible:!0,text:"    你成功邀请的玩家（一级推广玩家）在游戏中做任何充值操作你都可以获得10%的元宝奖励，若你邀请的玩家也邀请了其他玩家（二级推广玩家），那么他充值的奖励你也可以获得5%。",leading:3,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:508,x:19,visible:!0,text:"二级推广玩家数量：100",styleSkin:"comp/label.png",name:"lbGrandNum",fontSize:22,color:"#6b9eec",align:"left"}},{type:"Label",props:{y:508,x:289,visible:!0,text:"已贡献200元宝",styleSkin:"comp/label.png",name:"lbGrandAward",fontSize:22,color:"#fffc00",align:"left"}},{type:"Label",props:{y:544,x:19,width:667,visible:!0,text:"累计元宝奖励：500，已领取元宝奖励：300，可领取元宝奖励：200",styleSkin:"comp/label.png",name:"lbSumary",height:22,fontSize:22,color:"#6b9eec",align:"left"}},{type:"Image",props:{y:168,x:531,width:188,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:172,x:535,width:180,name:"shareCode",height:180}}]},{type:"Box",props:{y:278,x:0,name:"dailySign"},child:[{type:"Image",props:{y:0,x:0,width:740,visible:!0,skin:"ui/fangkuang.png",height:560,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:10,x:306,text:"每日签到",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"List",props:{y:78,x:44,width:663,spaceY:15,spaceX:15,repeatY:5,repeatX:7,name:"dayList",height:322},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Button",props:{width:80,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",name:"item",labelSize:26,label:"1天",height:50}},{type:"Label",props:{y:1,x:58,text:"★",styleSkin:"comp/label.png",name:"star",fontSize:24,color:"#c527ff",align:"left"}}]}]},{type:"Label",props:{y:400,x:145,text:"20元宝",styleSkin:"comp/label.png",name:"gold",color:"#e8f116",align:"left",fontSize:26}},{type:"Text",props:{y:400,x:15,text:"签到奖励：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:401,x:277,text:"（激活任意月卡签到额外获得10元宝）",styleSkin:"comp/label.png",name:"vipTip",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Label",props:{y:474,x:6,text:"【极品龙涎果】x 1",styleSkin:"comp/label.png",name:"props",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Button",props:{y:431,x:315,width:110,stateNum:2,skin:"comp/button.png",name:"btnSign",label:"签到",height:45,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:41,x:20,text:"签到天数：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:507,x:16,wordWrap:!0,width:704,text:"异常美味的龙涎果，使用后可直接寻找到黄色品质灵宠异常美味的龙涎果，异常美味的龙涎果，",styleSkin:"comp/label.png",name:"desc",leading:3,height:54,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:453,x:485,text:"【今日已签到】",styleSkin:"comp/label.png",name:"lbSigned",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Label",props:{y:41,x:162,text:"90",styleSkin:"comp/label.png",name:"totalDay",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Text",props:{y:439,x:16,text:"额外奖励：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Button",props:{y:11,x:622,width:102,stateNum:2,skin:"comp/button.png",name:"btnNotice",label:"\b公告",height:54,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:0,x:0,name:"limitGift"},child:[{type:"Image",props:{y:2,x:1,width:740,skin:"ui/fangkuang.png",height:264,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:10,x:197,width:345,text:"特价升级礼包",fontSize:26,color:"#c527ff",bold:!0,align:"center"}},{type:"Label",props:{y:236,x:10,width:721,text:"小贴士：倒计时结束后，礼包会自动消失哦",styleSkin:"comp/label.png",name:"tips",height:20,fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Button",props:{y:154,x:302,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:43,x:297,width:146,text:"原价25元",styleSkin:"comp/label.png",name:"oldPrice",italic:!0,fontSize:24,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:75,x:297,width:146,text:"现价12元",styleSkin:"comp/label.png",name:"nowPrice",italic:!0,fontSize:24,color:"#21db21",bold:!0,align:"center"}},{type:"Label",props:{y:210,x:265,width:209,text:"倒计时47:50:39",styleSkin:"comp/label.png",name:"clock",italic:!0,height:24,fontSize:24,color:"#fffc00",align:"center"}},{type:"HTMLDivElement",props:{y:112,x:11,width:708,name:"info",innerHTML:"奖励内容",height:29}},{type:"Button",props:{y:154,x:553,stateNum:2,skin:"comp/button.png",name:"btnDrop",labelColors:"#e70626",label:"放弃",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:1037,x:750,width:740,visible:!1,name:"invitMiniCode",height:469},child:[{type:"Image",props:{y:-1,x:0,width:734,visible:!0,skin:"ui/fangkuang.png",height:470,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:21,x:9,text:"    分享推广：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:51,x:9,wordWrap:!0,width:525,visible:!0,text:"    点击分享按钮，生成分享链接，让你的好友一起体验这文字游戏的独特魅力，一起分享放置游戏的喜悦！",leading:3,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:144,x:9,text:"    推广元宝增加规则：",leading:3,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:323,x:19,visible:!0,text:"一级推广玩家数量：5",styleSkin:"comp/label.png",name:"lbChildNum",fontSize:22,color:"#6b9eec",align:"left"}},{type:"Label",props:{y:323,x:289,visible:!0,text:"已贡献200元宝",styleSkin:"comp/label.png",name:"lbChildAward",fontSize:22,color:"#fffc00",align:"left"}},{type:"Button",props:{y:317,x:568,width:130,visible:!0,stateNum:2,skin:"comp/button.png",name:"btnGetAward",label:"领取",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:420,x:22,width:694,visible:!0,text:"小提示：同一个帐号对应唯一邀请码，奖励可以由帐号下任意角色领取。",fontSize:20,color:"#21db21",align:"center"}},{type:"Label",props:{y:213,x:9,wordWrap:!0,width:695,visible:!0,text:"    你成功邀请的玩家（一级推广玩家）在游戏中做任何充值操作你都可以获得10%的元宝奖励，若你邀请的玩家也邀请了其他玩家（二级推广玩家），那么他充值的奖励你也可以获得5%。",styleSkin:"comp/label.png",name:"lbChildInfo",leading:3,height:92,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:351,x:19,visible:!0,text:"二级推广玩家数量：100",styleSkin:"comp/label.png",name:"lbGrandNum",fontSize:22,color:"#6b9eec",align:"left"}},{type:"Label",props:{y:351,x:289,visible:!0,text:"已贡献200元宝",styleSkin:"comp/label.png",name:"lbGrandAward",fontSize:22,color:"#fffc00",align:"left"}},{type:"Label",props:{y:387,x:19,width:667,visible:!0,text:"累计元宝奖励：500，已领取元宝奖励：300，可领取元宝奖励：200",styleSkin:"comp/label.png",name:"lbSumary",height:22,fontSize:22,color:"#6b9eec",align:"left"}},{type:"Button",props:{y:46,x:568,width:130,visible:!0,stateNum:2,skin:"comp/button.png",name:"btnShare",label:"分享游戏",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:180,x:9,text:"    推广玩家需要创建角色，并选好五行职业，及算一个推广。",leading:3,fontSize:24,color:"#fbf8f8",align:"left"}}]}]}]},{type:"Label",props:{y:76,x:12,width:184,"var":"offlineLb",text:"断线重连中...",styleSkin:"comp/label.png",strokeColor:"#0",height:35,fontSize:28,color:"#ff0000",bold:!0}},{type:"Sprite",props:{y:1218,x:8,width:660,"var":"chatLast",mouseEnabled:!0,height:34}},{type:"Button",props:{y:1200,x:681,width:62,"var":"btn_chat",stateNum:1,skin:"chat/btn_chat.png",height:54}},{type:"Box",props:{y:1253,x:8,"var":"moduleItems"},child:[{type:"Button",props:{y:5,x:125,width:110,skin:"comp/button.png",name:"btnEquip",labelSize:32,labelColors:"#fbf8f8,#fbf8f8,#ff0000",labelBold:!0,label:"装备",height:60,sizeGrid:"4,4,4,4",stateNum:2}},{type:"Button",props:{y:5,x:250,width:110,stateNum:2,skin:"comp/button.png",name:"btnPackage",labelSize:32,labelColors:"#fbf8f8,#fbf8f8,#ff0000",labelBold:!0,label:"背包",height:60,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:5,x:374,width:110,stateNum:2,skin:"comp/button.png",name:"btnSmithy",labelSize:32,labelColors:"#fbf8f8,#fbf8f8,#ff0000",labelBold:!0,label:"锻造",height:60,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:5,x:499,width:110,stateNum:2,skin:"comp/button.png",name:"btnMacket",labelSize:32,labelColors:"#fbf8f8,#fbf8f8,#ff0000",labelBold:!0,label:"商城",height:60,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:5,x:0,width:110,skin:"comp/button.png",name:"btnRolegroup",labelSize:32,labelColors:"#fbf8f8,#fbf8f8,#ff0000",labelBold:!0,label:"人物",height:60,sizeGrid:"4,4,4,4",stateNum:2}},{type:"Button",props:{y:5,x:624,width:110,stateNum:2,skin:"comp/button.png",name:"btnSetting",labelSize:32,labelColors:"#fbf8f8,#fbf8f8,#ff0000",labelBold:!0,label:"设置",height:60,sizeGrid:"4,4,4,4"}}]},{type:"List",props:{y:343,x:-756,width:740,"var":"listacthome",vScrollBarSkin:"comp/vscroll.png",spaceY:10,repeatX:1,height:856},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:176,sizeGrid:"10,10,10,10"}},{type:"Label",props:{x:15,width:365,top:38,text:"7天乐",styleSkin:"comp/label.png",name:"title",fontSize:32,color:"#3dff00",align:"center"}},{type:"Label",props:{y:94,x:15,width:365,text:"活动时间：无限制",styleSkin:"comp/label.png",name:"lbActTime",fontSize:32,color:"#ffff00",align:"center"}},{type:"Button",props:{x:556,width:133,stateNum:2,skin:"comp/button.png",name:"btnSure",label:"查看",height:53,bottom:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:61,x:404,width:133,stateNum:2,skin:"comp/button.png",name:"btnReset",label:"重置开启",height:53,bottom:59,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Box",props:{y:343,x:5,"var":"dungeon"},child:[{type:"List",props:{width:740,"var":"listDungeon",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:860},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:176,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,skin:"ui/vline_white.png",height:169,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:59,x:20,width:163,text:"【初段】",styleSkin:"comp/label.png",name:"dName",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:24,x:235,width:214.28125,text:"怪物等级：2~1",name:"monsterLv",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:70,x:235,text:"装备等级：1~10",name:"equipLv",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:116,x:235,text:"五行专属装备",styleSkin:"comp/label.png",name:"equipType",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:99,x:23,width:156,text:"【炼气】",styleSkin:"comp/label.png",name:"dCulture",height:26,color:"#00dc24",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:122,x:427,text:"（建议锻造黄色以上套装）",styleSkin:"comp/label.png",name:"tips",color:"#7985e0",bold:!1,align:"left",fontSize:26}}]}]},{type:"Box",props:{x:781,width:740,"var":"selectDungeon",height:860},child:[{type:"List",props:{y:235,x:0,width:740,vScrollBarSkin:" ",spaceY:15,repeatY:5,repeatX:1,name:"items",height:584},child:[{type:"Box",props:{y:0,x:0,width:740,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:110,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,skin:"ui/vline_white.png",height:104,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:37,x:22,text:"锦鸡锦鸡",styleSkin:"comp/label.png",name:"dName",height:26,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:28,x:95,skin:"ui/clip_wuxing.png",name:"dNature",index:1,clipY:5}},{type:"Label",props:{y:71,x:68,text:"挂机中",styleSkin:"comp/label.png",name:"lbHang",height:26,fontSize:26,color:"#0cd41c",bold:!0,align:"left"}},{type:"Label",props:{y:14,x:213,text:"技能触发概率 + 100%",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:44,x:213,text:"攻击+100",styleSkin:"comp/label.png",name:"suitInfo_1",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:14,x:484,text:"攻击+100",styleSkin:"comp/label.png",name:"suitInfo_2",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:44,x:484,text:"攻击+100",styleSkin:"comp/label.png",name:"suitInfo_3",fontSize:24,
color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:73,x:213,text:"攻击+100",styleSkin:"comp/label.png",name:"suitInfo_4",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:73,x:484,text:"攻击+100",styleSkin:"comp/label.png",name:"suitInfo_5",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:44,x:249,text:"攻击+100",styleSkin:"comp/label.png",name:"suitInfo_lv",fontSize:24,color:"#fbf8f8",align:"left"}}]}]},{type:"Box",props:{y:0,x:0,width:740,name:"head",height:178},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:178,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,skin:"ui/vline_white.png",height:171,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:73,x:15,width:176,text:"【初行者】",styleSkin:"comp/label.png",name:"dName",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:26,x:238,text:"装备等级：",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:26,x:404,text:"2~17",styleSkin:"comp/label.png",name:"equipLv",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:73,x:237,text:"怪物等级：",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:73,x:406,text:"1~10",styleSkin:"comp/label.png",name:"monsterLv",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:118,x:238,text:"五行专属装备",styleSkin:"comp/label.png",name:"equipType",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:73,x:639,text:"返回",fontSize:32,color:"#0cd41c",bold:!0,align:"left"}},{type:"Label",props:{y:118,x:446,width:131,underline:!0,text:"掉落预览",styleSkin:"comp/label.png",name:"equipView",mouseEnabled:!0,height:38,fontSize:32,color:"#0084ff",bold:!0,align:"left"}}]},{type:"Button",props:{y:258,x:623,width:98,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:58,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:192,x:260,text:"【套装属性】",styleSkin:"comp/label.png",name:"suitInfo",fontSize:28,color:"#fffc00",align:"left"}},{type:"Label",props:{y:192,x:51,text:"怪物五行",styleSkin:"comp/label.png",name:"suitInfo",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:831,x:-2,text:"小贴示：收集怪物的材料锻造合身的装备，激活套装，您会变得更强哦",styleSkin:"comp/label.png",name:"tips",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:192,x:608,text:"点选进入",styleSkin:"comp/label.png",name:"suitInfo",fontSize:28,color:"#ffffff",align:"left"}}]}]},{type:"Button",props:{y:157,x:616,width:118,visible:!1,"var":"btnSurprise",stateNum:2,skin:"comp/button.png",labelSize:24,label:"惊喜礼包",height:43,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:157,x:616,width:118,visible:!1,"var":"btn2Yuan",stateNum:2,skin:"comp/button.png",labelSize:24,label:"2元大礼",height:43,sizeGrid:"4,4,4,4"},child:[{type:"Clip",props:{y:-13,x:-8,width:135,skin:"create/clip_select.png",sizeGrid:"21,18,17,21",name:"lightR",interval:100,height:65,clipX:15,autoPlay:!0}},{type:"Image",props:{y:-5,x:107,width:18,skin:"ui/red_point.png",name:"red",height:18}}]}]},t}(Sw),DC=function(e){function t(){this.btnAge=null,t.__super.call(this)}o(t,"ui.pages.LoadingPageSimpleUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Label",props:{y:594,x:136,wordWrap:!0,width:515,text:"抵制不良游戏，拒绝盗版游戏。\\n注意自我保护，谨防受骗上当。\\n适度游戏益脑，沉迷游戏伤身。\\n合理安排时间，享受健康生活。",styleSkin:"comp/label.png",leading:10,height:166,fontSize:32,color:"#FFFFFF",bold:!0,align:"center"}},{type:"Text",props:{y:492,x:136,wordWrap:!0,width:478,text:"健康游戏忠告",leading:10,fontSize:40,color:"#FFFFFF",bold:!0,align:"center"}},{type:"Button",props:{y:490,x:521,"var":"btnAge",stateNum:1,skin:"ui/16+.png",scaleY:.3,scaleX:.3}}]},t}(Sw),kC=function(e){function t(){this.txtName=null,this.btnLogin=null,this.txtServer=null,this.comServer=null,this.txtBranch=null,t.__super.call(this)}o(t,"ui.pages.TestLoginUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{y:4,x:0,width:750,height:1334},child:[{type:"Image",props:{y:217,x:32,width:685,skin:"comp/bg.png",height:507,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:315,x:311,text:"测试登录",fontSize:32,color:"#FFFFFF",bold:!0}},{type:"Text",props:{y:402,x:205,text:"帐号：",fontSize:26,color:"#FFFFFF",bold:!0}},{type:"TextInput",props:{y:394,x:297,width:155,"var":"txtName",text:"glim",skin:"comp/textinput.png",height:42,fontSize:26}},{type:"Button",props:{y:572,x:296,width:158,"var":"btnLogin",stateNum:2,skin:"comp/button.png",label:"登录",height:63,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:459,x:179,text:"服务器：",fontSize:26,color:"#FFFFFF",bold:!0}},{type:"TextInput",props:{y:451,x:297,width:155,"var":"txtServer",text:"glim",skin:"comp/textinput.png",height:42,fontSize:26}},{type:"ComboBox",props:{y:454,x:469,width:52,"var":"comServer",skin:"comp/combobox.png",selectedIndex:0,labels:"本地,远程",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",height:35,itemSize:20,labelSize:20}},{type:"TextInput",props:{y:508,x:297,width:155,"var":"txtBranch",type:"number",text:"4",skin:"comp/textinput.png",height:42,fontSize:26}},{type:"Text",props:{y:516,x:205,text:"区号：",fontSize:26,color:"#FFFFFF",bold:!0}}]},t}(Sw),BC=function(e){function t(){t.__super.call(this)}o(t,"laya.ui.RadioGroup",e);var i=t.prototype;return i.createItem=function(e,t){return new Dw(e,t)},t}(Aw),VC=function(e){function t(){t.__super.call(this)}o(t,"laya.ui.Tab",e);var i=t.prototype;return i.createItem=function(e,t){return new ow(e,t)},t}(Aw),FC=function(e){function t(){t.__super.call(this)}o(t,"laya.ui.HBox",e);var n=t.prototype;return n.sortItem=function(e){e&&e.sort(function(e,t){return e.x-t.x})},n.changeItems=function(){this._itemChanged=!1;for(var e=[],t=0,i=0,n=this.numChildren;n>i;i++){var o=this.getChildAt(i);o&&o.layoutEnabled&&(e.push(o),t=this._height?this._height:Math.max(t,o.height*o.scaleY))}this.sortItem(e);var s=0;for(i=0,n=e.length;n>i;i++)o=e[i],o.x=s,s+=o.width*o.scaleX+this._space,"top"==this._align?o.y=0:"middle"==this._align?o.y=.5*(t-o.height*o.scaleY):"bottom"==this._align&&(o.y=t-o.height*o.scaleY);this.changeSize()},s(0,n,"height",e.prototype._$get_height,function(e){this._height!=e&&(i.superSet(Iw,this,"height",e),this.callLater(this.changeItems))}),t.NONE="none",t.TOP="top",t.MIDDLE="middle",t.BOTTOM="bottom",t}(Iw),GC=function(e){function t(){t.__super.call(this)}o(t,"laya.ui.VBox",e);var n=t.prototype;return n.changeItems=function(){this._itemChanged=!1;for(var e=[],t=0,i=0,n=this.numChildren;n>i;i++){var o=this.getChildAt(i);o&&o.layoutEnabled&&(e.push(o),t=this._width?this._width:Math.max(t,o.width*o.scaleX))}this.sortItem(e);var s=0;for(i=0,n=e.length;n>i;i++)o=e[i],o.y=s,s+=o.height*o.scaleY+this._space,"left"==this._align?o.x=0:"center"==this._align?o.x=.5*(t-o.width*o.scaleX):"right"==this._align&&(o.x=t-o.width*o.scaleX);this.changeSize()},s(0,n,"width",e.prototype._$get_width,function(e){this._width!=e&&(i.superSet(Iw,this,"width",e),this.callLater(this.changeItems))}),t.NONE="none",t.LEFT="left",t.CENTER="center",t.RIGHT="right",t}(Iw),HC=function(e){function t(e){this._vScrollBar=null,this._hScrollBar=null,void 0===e&&(e=""),t.__super.call(this,e)}o(t,"laya.ui.TextArea",e);var n=t.prototype;return n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},n.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},n.onVBarChanged=function(e){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},n.onHBarChanged=function(e){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},n.changeScroll=function(){var e=this._vScrollBar&&this._tf.maxScrollY>0,t=this._hScrollBar&&this._tf.maxScrollX>0,i=e?this._width-this._vScrollBar.width:this._width,n=t?this._height-this._hScrollBar.height:this._height,o=this._tf.padding||ds.labelPadding;this._tf.width=i,this._tf.height=n,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-o[2],this._vScrollBar.y=o[1],this._vScrollBar.height=this._height-(t?this._hScrollBar.height:0)-o[1]-o[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=n/Math.max(this._tf.textHeight,n),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=e),this._hScrollBar&&(this._hScrollBar.x=o[0],this._hScrollBar.y=this._height-this._hScrollBar.height-o[3],this._hScrollBar.width=this._width-(e?this._vScrollBar.width:0)-o[0]-o[2],this._hScrollBar.scrollSize=Math.max(.033*i,1),this._hScrollBar.thumbPercent=i/Math.max(this._tf.textWidth,i),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=t)},n.scrollTo=function(e){this.commitMeasure(),this._tf.scrollY=e},s(0,n,"scrollX",function(){return this._tf.scrollX}),s(0,n,"maxScrollX",function(){return this._tf.maxScrollX}),s(0,n,"maxScrollY",function(){return this._tf.maxScrollY}),s(0,n,"scrollY",function(){return this._tf.scrollY}),s(0,n,"width",e.prototype._$get_width,function(e){i.superSet(Vw,this,"width",e),this.callLater(this.changeScroll)}),s(0,n,"vScrollBar",function(){return this._vScrollBar}),s(0,n,"hScrollBar",function(){return this._hScrollBar}),s(0,n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(e){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new Ow),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=e}),s(0,n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(e){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new Bw),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=e}),s(0,n,"height",e.prototype._$get_height,function(e){i.superSet(Vw,this,"height",e),this.callLater(this.changeScroll)}),t}(Vw),UC=function(e){function t(){this.nameTxt=null,this.level=null,this.quality=null,this.nature=null,this.btnUpgrade=null,this.txtCost=null,this.attributes=null,this.attributesAfter=null,t.__super.call(this)}o(t,"ui.model.PetUpgradeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:356,width:720,skin:"ui/bg_windos.png",right:15,left:15,height:737,alpha:.5,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:170,skin:"ui/bg_windos.png",right:15,left:15,height:160,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:507,x:190,skin:"ui/widget_long.png"}},{type:"Text",props:{y:191,x:50,text:"灵宠",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:191,x:123,"var":"nameTxt",text:"野山猪",styleSkin:"comp/label.png",fontSize:32,color:"#f19e21",align:"left"}},{type:"Text",props:{y:234,x:50,text:"等级",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:234,x:121,"var":"level",text:"99→100",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:275,x:50,text:"资质",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:275,x:122,"var":"quality",text:20,styleSkin:"comp/label.png",fontSize:32,color:"#22d931",bold:!0,align:"left"}},{type:"Clip",props:{y:183,x:223,"var":"nature",skin:"ui/clip_wuxing.png",index:4,clipY:5}},{type:"Text",props:{y:380,x:44,text:"协战加成",fontSize:32,color:"#f19e21",bold:!0,align:"left"}},{type:"Text",props:{y:70,x:311,text:"灵宠信息",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:699,x:350,skin:"ui/arrow.png",rotation:-90}},{type:"Text",props:{y:380,x:425,text:"升级后加成",fontSize:32,color:"#f19e21",bold:!0,align:"left"}},{type:"Button",props:{y:242,x:517,width:130,"var":"btnUpgrade",stateNum:2,skin:"comp/button.png",labelSize:32,label:"升级",height:60,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:195,width:452,"var":"txtCost",text:"魔核：9000/10263",styleSkin:"comp/label.png",right:23,height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Text",props:{y:1128,x:140,width:470,text:"小贴士：探险兽魂森林可以获取对应材料",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:427,width:285,"var":"attributes",vScrollBarSkin:"comp/vscroll.png",spaceY:10,left:40,height:625},child:[{type:"Box",props:{y:1,x:0,name:"render"},child:[{type:"Label",props:{y:0,x:0,width:141,text:"生命力回满",styleSkin:"comp/label.png",name:"key",fontSize:28,color:"#46aec8",bold:!0,align:"left"}},{type:"Label",props:{y:1,x:168,width:82,text:500,styleSkin:"comp/label.png",name:"value",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"List",props:{y:427,width:285,"var":"attributesAfter",vScrollBarSkin:"comp/vscroll.png",spaceY:10,right:40,height:625},child:[{type:"Box",props:{y:1,x:0,name:"render"},child:[{type:"Label",props:{y:0,x:0,width:141,text:"生命力回满",styleSkin:"comp/label.png",name:"key",fontSize:28,color:"#46aec8",bold:!0,align:"left"}},{type:"Label",props:{y:1,x:168,width:82,text:500,styleSkin:"comp/label.png",name:"value",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),zC=function(e){function t(){this.title=null,this.equip=null,t.__super.call(this)}o(t,"ui.model.EquipOptionSuccessUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:476,x:310,width:130,stateNum:2,skin:"comp/button.png",name:"close",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:100,x:248,width:253,"var":"title",text:"恭喜您洗炼成功",styleSkin:"comp/label.png",height:56,fontSize:32,color:"#48f656",bold:!0,align:"center"}},{type:"EquipCell",props:{y:174,x:9,"var":"equip",runtime:"ui.model.pops.EquipCellUI"}}]},t}(Qw),WC=function(e){function t(){this.aimTalisman=null,this.list=null,t.__super.call(this)}o(t,"ui.model.TalismanChgNatureUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:305,width:140,text:"法宝重铸",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:128,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:170,x:25,text:"当前法宝：",left:25,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"TalismanCell",props:{y:204,x:10,"var":"aimTalisman",runtime:"ui.model.pops.TalismanCellUI"}},{type:"Text",props:{y:422,x:25,text:"重铸预览：",left:0,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Text",props:{y:1301,x:38,wordWrap:!0,width:673,text:"注意：重铸后除第一条属性和特殊属性更换外，其他属性将保留",leading:3,fontSize:24,color:"#fffc00",bold:!1,align:"center"}},{type:"List",props:{y:457,x:10,width:730,"var":"list",spaceY:10,repeatY:4,height:831},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"TalismanCell",props:{name:"itm",runtime:"ui.model.pops.TalismanCellUI"}},{type:"Button",props:{y:106,x:554,width:130,stateNum:2,skin:"comp/button.png",name:"btnChg",label:"选择重铸",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]}]},t}(Qw),YC=function(e){function t(){this.dressed=null,this.canUsed=null,this.emptTxt=null,t.__super.call(this)}o(t,"ui.model.TalismanDressChangeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:294,width:162,text:"当前法宝",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"TalismanCell",props:{y:170,x:10,"var":"dressed",runtime:"ui.model.pops.TalismanCellUI"}},{type:"List",props:{y:439,x:10,width:737,"var":"canUsed",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:836},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Button",props:{y:118,x:566,width:130,stateNum:2,skin:"comp/button.png",name:"btnChange",label:"更换",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"TalismanCell",props:{name:"talisman",runtime:"ui.model.pops.TalismanCellUI"}}]}]},{type:"Text",props:{y:390,x:24,width:117,text:"可用法宝：",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:443,x:305,width:140,"var":"emptTxt",text:"空空如也",styleSkin:"comp/label.png",height:42,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Qw),qC=function(e){function t(){this.txtName=null,this.btnAward=null,this.panelReports=null,this.clearReport=null,this.btnBoss=null,this.dungeonNotice=null,this.fighterA=null,this.fighterB=null,this.petDrop=null,this.petAttack=null,this.lbTrible=null,t.__super.call(this)}o(t,"ui.model.FightingLiveUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,skin:"ui/bgHp2.png",height:1334},child:[{type:"Label",props:{y:70,x:83,width:584,"var":"txtName",text:"锦鸡副本",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:147,x:17,width:717,skin:"ui/fangkuang.png",height:288,cacheAs:"bitmap",sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:148,x:376,width:4,skin:"ui/vline_white.png",height:284,cacheAs:"bitmap",sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:584,x:28,skin:"ui/widget_chaoshi.png"}},{type:"Button",props:{y:1235,x:141,width:100,"var":"btnAward",stateNum:2,skin:"comp/button.png",label:"战利品",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Panel",props:{y:534,x:19,width:716,"var":"panelReports",vScrollBarSkin:"comp/vscroll.png",height:680}},{type:"Button",props:{y:475,x:613,width:120,"var":"clearReport",stateNum:2,skin:"comp/button.png",label:"清空战报",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1235,x:275,width:200,"var":"btnBoss",stateNum:2,skin:"comp/button.png",label:"挑战BOSS(5)",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1235,x:509,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"返回",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:440,x:21,width:715,visible:!1,"var":"dungeonNotice",text:"当前副本：5个公共BOSS，距离下次刷新还有10分钟",styleSkin:"comp/label.png",leading:3,fontSize:22,color:"#ffffff",align:"left"}},{type:"Box",props:{y:163,x:34,"var":"fighterA"},child:[{type:"Label",props:{y:57,x:0,text:"生命",styleSkin:"comp/label.png",name:"lbHp",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:6,x:23,text:"??",styleSkin:"comp/label.png",name:"name",height:26,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:101,x:0,text:"法力",styleSkin:"comp/label.png",name:"lbMp",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:147,x:0,text:"速度",styleSkin:"comp/label.png",name:"lbSpeed",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Box",props:{y:105,x:78,name:"mp"},child:[{type:"Image",props:{y:0,x:0,width:199,skin:"ui/bg_0.png",height:24}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgMp.png",name:"bgPress",height:18}}]},{type:"Box",props:{y:151,x:78,name:"speed"},child:[{type:"Image",props:{y:0,x:0,width:199,skin:"ui/bg_0.png",height:24}},{type:"Clip",props:{y:3,x:3,width:193,skin:"ui/clip_speed.png",name:"bgPress",height:18,clipX:6}}]},{type:"Clip",props:{y:0,x:125,width:43,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:43,clipY:5}},{type:"Label",props:{y:6,x:172,width:68,text:"Lv.3",styleSkin:"comp/label.png",name:"level",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Box",props:{y:61,x:78,name:"hp"},child:[{type:"Image",props:{y:0,x:0,width:199,skin:"ui/bg_0.png",height:24}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgHp.png",name:"bgRed",height:18}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgHp2.png",name:"bgYellow",height:18}}]},{type:"Sprite",props:{y:197,x:1,width:66,name:"buff",height:24}},{type:"Sprite",props:{y:231,x:1,width:66,name:"debuff",height:24}}]},{type:"Box",props:{y:162,x:402,"var":"fighterB"},child:[{type:"Label",props:{y:7,x:19,text:"锦鸡",styleSkin:"comp/label.png",name:"name",height:36,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{x:118,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:58,x:253,text:"生命",styleSkin:"comp/label.png",name:"lbHp",fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:104,x:253,text:"法力",styleSkin:"comp/label.png",name:"lbMp",fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:148,x:253,text:"速度",styleSkin:"comp/label.png",name:"lbSpeed",fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Box",props:{y:62,x:233,scaleX:-1,name:"hp"},child:[{type:"Image",props:{y:0,x:-1,skin:"ui/bg_0.png"}},{type:"Image",props:{y:3,x:3,skin:"ui/bgHp.png",name:"bgRed"}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgHp2.png",name:"bgYellow"}}]},{type:"Box",props:{y:108,x:233,scaleX:-1,name:"mp"},child:[{type:"Image",props:{y:0,x:0,width:199,skin:"ui/bg_0.png",height:24}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgMp.png",name:"bgPress"}}]},{type:"Box",props:{y:152,x:233,scaleX:-1,name:"speed"},child:[{type:"Image",props:{y:0,x:0,width:199,skin:"ui/bg_0.png",height:24}},{type:"Clip",props:{y:3,x:3,width:193,skin:"ui/clip_speed.png",name:"bgPress",height:18,clipX:6}}]},{type:"Label",props:{y:7,x:166,width:63,text:"Lv.3",styleSkin:"comp/label.png",name:"level",height:34,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Sprite",props:{y:198,width:66,name:"buff",height:24}},{type:"Sprite",props:{y:232,width:66,name:"debuff",height:24}}]},{type:"Label",props:{y:471,x:21,width:180,visible:!1,"var":"petDrop",text:"寻宝概率：100%",styleSkin:"comp/label.png",leading:3,fontSize:22,color:"#ffffff",align:"left"}},{type:"Label",props:{y:471,x:202,width:93,visible:!1,"var":"petAttack",underline:!0,text:"主动挑战",styleSkin:"comp/label.png",mouseEnabled:!0,leading:3,fontSize:22,color:"#00dc24",align:"left"}},{type:"Label",props:{y:502,x:21,width:257,visible:!1,"var":"lbTrible",text:"3倍收益剩余：1天",styleSkin:"comp/label.png",leading:3,height:25,fontSize:22,color:"#c527ff",align:"left"}}]},t}(Qw),KC=function(e){function t(){this.aimNature=null,this.petA=null,this.petB=null,this.aimPet=null,this.doubleSure=null,this.btnSure=null,t.__super.call(this)}o(t,"ui.model.PetChgNatureUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:260,width:230,text:"转换灵宠五行",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,x:678,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Image",props:{y:170,x:15,width:720,skin:"ui/bg_windos.png",right:15,left:15,height:540,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:366,x:348,skin:"ui/arrow.png"}},{type:"Text",props:{y:462,x:230,text:"转换五行：",fontSize:28,color:"#00dc24",bold:!0,align:"left"}},{type:"ComboBox",props:{y:451,x:371,width:130,"var":"aimNature",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:0,labels:"金,木,水,火,土",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"Label",props:{y:956,x:103,wordWrap:!0,width:545,text:"1、使用两个紫色的灵宠转换五行。\\n2、转换后的灵宠等级和资质取二者最大值。\\n3、转换时将取下灵宠兽魂，返还资质丹。",styleSkin:"comp/label.png",leading:5,height:93,fontSize:26,color:"#6b9eec",bold:!1,align:"left"}},{type:"Box",props:{y:214,"var":"petA",left:100},child:[{type:"Text",props:{y:8,x:0,text:"灵宠",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:8,x:73,text:"野山猪",styleSkin:"comp/label.png",name:"nameTxt",fontSize:32,color:"#f19e21",align:"left"}},{type:"Text",props:{y:46,x:0,text:"等级",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:46,x:71,text:"99",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:82,x:0,text:"基础资质",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:82,x:152,text:"20",styleSkin:"comp/label.png",name:"quality",fontSize:32,color:"#22d931",align:"left"}},{type:"Clip",props:{y:0,x:173,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}}]},{type:"Box",props:{y:214,"var":"petB",right:100},child:[{type:"Text",props:{y:8,x:0,text:"灵宠",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:8,x:73,text:"野山猪",styleSkin:"comp/label.png",name:"nameTxt",fontSize:32,color:"#f19e21",align:"left"}},{type:"Text",props:{y:46,x:0,text:"等级",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:46,x:71,text:"99",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:82,x:0,text:"基础资质",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:82,x:142,text:"20",styleSkin:"comp/label.png",name:"quality",fontSize:32,color:"#22d931",align:"left"}},{type:"Clip",props:{x:173,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}}]},{type:"Box",props:{y:547,x:267,"var":"aimPet"},child:[{type:"Text",props:{y:8,x:0,text:"灵宠",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:8,x:73,text:"野山猪",styleSkin:"comp/label.png",name:"nameTxt",fontSize:32,color:"#f19e21",align:"left"}},{type:"Text",props:{y:46,x:0,text:"等级",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:46,x:71,text:"99",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:82,x:0,text:"基础资质",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:82,x:142,text:"20",styleSkin:"comp/label.png",name:"quality",fontSize:32,color:"#22d931",align:"left"}},{type:"Clip",props:{x:173,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}}]},{type:"TextInput",props:{y:742,x:201,width:348,"var":"doubleSure",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"确认请输入 ‘转换’",height:52,fontSize:24,bold:!0,align:"center"}},{type:"Button",props:{y:831,x:287,width:176,"var":"btnSure",stateNum:2,skin:"comp/button.png",labelSize:32,label:"转换五行",height:66,sizeGrid:"4,4,4,4"}}]},t}(Qw),XC=function(e){function t(){this.towerShop=null,this.talismanUp=null,this.vipMonth=null,this.equipRebuild=null,this.equipGhostBox=null,this.alcBoss=null,this.lottery=null,this.activecodes=null,this.skyPieceFrom=null,this.mixEquip=null,this.roleInfo=null,this.equipDress=null,this.petShop=null,this.towerShopRate=null,this.exchange=null,this.allianceTitle=null,this.alcarule=null,this.pearl=null,this.alcmine=null,this.demon=null,this.arena=null,this.petSkillStore=null,this.worldboss=null,t.__super.call(this)}o(t,"ui.model.FunNoticeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("Text",fS),Sw.regComponent("ui.model.petskill.PetSkillCellUI",dC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,name:"close",height:1334},child:[{type:"Image",props:{y:73,x:0,width:750,skin:"comp/bg.png",height:1201,sizeGrid:"10,10,10,10"}},{type:"Box",props:{y:240,x:40,width:670,"var":"towerShop",height:774},child:[{type:"HTMLDivElement",props:{y:-11,x:9,width:665,name:"towerShop",innerHTML:"<font color='#ffffff'>towerShop</font>",height:109}},{type:"Label",props:{y:112,x:527,width:131,underline:!0,text:"装备预览",styleSkin:"comp/label.png",name:"equipView",mouseEnabled:!0,height:38,fontSize:32,color:"#0084ff",bold:!0,align:"left"}},{type:"List",props:{y:159,x:-12,width:694,spaceY:10,repeatY:5,name:"suits",height:596},child:[{type:"Box",props:{y:0,x:0,width:693,name:"render",height:109},child:[{type:"Image",props:{y:0,x:0,width:692,skin:"ui/fangkuang.png",height:107,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:174,width:2,skin:"ui/vline_white.png",height:103,sizeGrid:"5,0,5,0"}},{type:"Clip",props:{y:32,x:68,skin:"ui/clip_wuxing.png",name:"dNature",index:1,clipY:5}},{type:"Label",props:{y:41,x:16,width:74,text:"锦鸡锦鸡",styleSkin:"comp/label.png",name:"dName",height:40,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:23,x:189.5,styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:53,x:189.5,styleSkin:"comp/label.png",name:"suitInfo_1",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:23,x:450.5,styleSkin:"comp/label.png",name:"suitInfo_2",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:53,x:450.5,styleSkin:"comp/label.png",name:"suitInfo_3",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:82,x:189.5,styleSkin:"comp/label.png",name:"suitInfo_4",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:82,x:450.5,styleSkin:"comp/label.png",name:"suitInfo_5",fontSize:24,color:"#fbf8f8",align:"left"}}]}]},{type:"Tab",props:{y:100,x:0,stateNum:2,space:10,skin:"comp/tab_small.png",name:"lvBar",labels:"40级,60级,80级,100级",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:24}}]},{type:"Box",props:{y:160,x:40,width:670,"var":"talismanUp",height:1010},child:[{type:"Label",props:{y:110,x:485,width:64,text:"红",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"center"}},{type:"Label",props:{y:110,x:595,width:64,text:"紫",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"center"}},{type:"Label",props:{y:141,x:25,width:40,text:"属性：",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:141,x:484,width:64,text:"3条",styleSkin:"comp/label.png",name:"suitInfo_0",height:25,fontSize:26,color:"#e70626",align:"center"}},{type:"Label",props:{y:143,x:596,width:64,text:"3~4条",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"center"}},{type:"HTMLDivElement",props:{y:816,x:20,width:630,name:"talismanUp",innerHTML:"<font color='#ffffff'>talismanUp</font>",height:256}},{type:"Label",props:{y:112,x:25,width:64,text:"品质：",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:112,x:113,width:64,text:"白",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:112,x:196,width:64,text:"蓝",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#0084ff",align:"center"}},{type:"Label",props:{y:112,x:288,width:64,text:"绿",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#00dc24",align:"center"}},{type:"Label",props:{y:112,x:385,width:64,text:"黄",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fffc00",align:"center"}},{type:"Label",props:{y:141,x:112,width:64,text:"1条",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,
fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:143,x:197,width:64,text:"1~2条",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#0084ff",align:"center"}},{type:"Label",props:{y:143,x:288,width:64,text:"2条",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#00dc24",align:"center"}},{type:"Label",props:{y:143,x:386,width:64,text:"2~3条",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fffc00",align:"center"}},{type:"List",props:{y:170,x:20,width:630,repeatY:25,repeatX:1,name:"items",height:629},child:[{type:"Box",props:{y:0,x:0,width:677,name:"render",height:25},child:[{type:"Label",props:{y:-3,x:-36,width:137,text:"五个字叮当",styleSkin:"comp/label.png",name:"name",fontSize:22,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:-3,x:79,width:89,text:"20",styleSkin:"comp/label.png",name:"a1",fontSize:22,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:-3,x:162,width:88,text:"30",styleSkin:"comp/label.png",name:"a2",fontSize:22,color:"#0084ff",align:"center"}},{type:"Label",props:{y:-3,x:265,width:71,text:"50",styleSkin:"comp/label.png",name:"a3",fontSize:22,color:"#00dc24",align:"center"}},{type:"Label",props:{y:-3,x:357,width:81,text:"80",styleSkin:"comp/label.png",name:"a4",fontSize:22,color:"#fffc00",align:"center"}},{type:"Label",props:{y:-3,x:449,width:93,text:"130",styleSkin:"comp/label.png",name:"a5",fontSize:22,color:"#e70626",align:"center"}},{type:"Label",props:{y:-3,x:552,width:111,text:"200",styleSkin:"comp/label.png",name:"a6",fontSize:22,color:"#c527ff",align:"center"}}]}]},{type:"Label",props:{y:60,x:5,width:173,text:"【属性一览】",styleSkin:"comp/label.png",name:"suitInfo_0",height:34,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Image",props:{y:94,skin:"ui/hline_white.png",right:40,left:40,height:2,sizeGrid:"0,5,0,5"}},{type:"Image",props:{y:795,skin:"ui/hline_white.png",right:40,left:40,sizeGrid:"0,5,0,5"}},{type:"Tab",props:{y:0,x:4,stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,name:"tbGrad",labels:"低阶法宝,高阶法宝",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}}]},{type:"Box",props:{y:240,x:40,width:670,"var":"vipMonth",mouseEnabled:!1,height:578},child:[{type:"Label",props:{y:11,x:252,width:117,text:"黄金月卡",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#e70626",bold:!0,align:"center"}},{type:"Label",props:{y:11,x:450,width:118,text:"至尊月卡",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#c527ff",bold:!0,align:"left"}},{type:"Label",props:{y:11,x:70,width:163,text:"功能加成",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:83,x:280,width:64,text:"+5%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:83,x:450,width:64,text:"+10%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff"}},{type:"Label",props:{y:82,x:70,width:64,text:"经验增加",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8"}},{type:"Label",props:{y:115,x:280,width:64,text:"+5%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:115,x:450,width:64,text:"+10%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:114,x:70,width:64,text:"铜币掉率",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:146,x:280,width:64,text:"+5%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:146,x:450,width:64,text:"+10%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:145,x:70,width:64,text:"材料掉率",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:180,x:280,width:64,text:"+5%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:180,x:450,width:64,text:"+10%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:179,x:70,width:64,text:"灵气增加",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:213,x:280,width:64,text:"+0.5小时",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:213,x:450,width:64,text:"+1小时",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:212,x:70,width:64,text:"离线时长",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:247,x:280,width:64,text:"+0.5小时",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:247,x:450,width:64,text:"+1小时",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:246,x:70,width:64,text:"采集灵石时长",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:279,x:280,width:64,text:"60个/小时",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:279,x:450,width:64,text:"120个/小时",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:278,x:70,width:64,text:"灵石数量增加",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:315,x:280,width:64,text:"+3%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:315,x:450,width:64,text:"+6%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:314,x:70,width:64,text:"强化失败返还",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:349,x:280,width:64,text:"+10%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:349,x:450,width:64,text:"+20%",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:348,x:70,width:64,text:"魔核掉落数量",styleSkin:"comp/label.png",name:"suitInfo_0",height:12,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:538,x:0,width:670,text:"小贴士：两种月卡可以同时激活，加成累加，商城功能加成可超过上限",fontSize:20,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:62,skin:"ui/hline_white.png",right:40,left:40,sizeGrid:"0,5,0,5"}},{type:"Text",props:{y:441,x:166,text:"激活月卡可使用扫荡森林功能",fontSize:26,color:"#c527ff",align:"left"}}]},{type:"Box",props:{y:228,x:40,width:670,"var":"equipRebuild",height:1010},child:[{type:"Label",props:{y:127,x:513,width:64,text:"红",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#e70626"}},{type:"Label",props:{y:127,x:612,width:64,text:"紫",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#c527ff"}},{type:"Label",props:{y:155,x:3,width:137,text:"随机属性：",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#fbf8f8"}},{type:"Label",props:{y:158,x:513,width:64,text:"2条",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#e70626"}},{type:"Label",props:{y:160,x:612,width:64,text:"3条",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#c527ff"}},{type:"Label",props:{y:129,x:3,width:137,text:"装备品质：",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:129,x:157,width:41,text:"白",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:129,x:215,width:64,text:"蓝",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#0084ff",align:"left"}},{type:"Label",props:{y:129,x:314,width:64,text:"绿",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#00dc24"}},{type:"Label",props:{y:129,x:414,width:64,text:"黄",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#fffc00",align:"left"}},{type:"Label",props:{y:158,x:157,width:64,text:"无",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#fbf8f8"}},{type:"Label",props:{y:162,x:215,width:64,text:"1条",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#0084ff"}},{type:"Label",props:{y:160,x:314,width:64,text:"1条",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#00dc24"}},{type:"Label",props:{y:160,x:414,width:64,text:"2条",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:22,color:"#fffc00"}},{type:"Label",props:{y:77,x:3,width:173,text:"【属性一览】",styleSkin:"comp/label.png",name:"suitInfo_0",height:34,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:211,x:2,width:208,text:"可洗炼出的属性：",styleSkin:"comp/label.png",name:"suitInfo_0",height:26,fontSize:26,color:"#fbf8f8"}},{type:"Text",props:{y:528,x:0,wordWrap:!0,width:670,text:"    提示：五行不同洗炼出的属性也不一样，基础属性，熔灵属性不可洗炼。品质越高属性加成越高。",leading:3,fontSize:24,color:"#fffc00",bold:!1,align:"center"}},{type:"Image",props:{y:199,skin:"ui/hline_white.png",right:40,left:40,sizeGrid:"0,5,0,5"}},{type:"Image",props:{y:494,skin:"ui/hline_white.png",right:40,left:40,sizeGrid:"0,5,0,5"}},{type:"List",props:{y:321,x:3,width:670,repeatY:6,repeatX:1,name:"items",height:162},child:[{type:"Box",props:{y:0,x:0,width:677,name:"render",height:25},child:[{type:"Label",props:{y:0,x:0,width:137,text:"五个字叮当",styleSkin:"comp/label.png",name:"name",fontSize:22,color:"#fbf8f8"}},{type:"Label",props:{y:0,x:157,width:41,text:"--",styleSkin:"comp/label.png",name:"a1",fontSize:22,color:"#fbf8f8"}},{type:"Label",props:{y:0,x:215,width:88,text:"30",styleSkin:"comp/label.png",name:"a2",fontSize:22,color:"#0084ff"}},{type:"Label",props:{y:0,x:314,width:88,text:"50",styleSkin:"comp/label.png",name:"a3",fontSize:22,color:"#00dc24"}},{type:"Label",props:{y:0,x:414,width:88,text:"80",styleSkin:"comp/label.png",name:"a4",fontSize:22,color:"#fffc00"}},{type:"Label",props:{y:0,x:513,width:88,text:"130",styleSkin:"comp/label.png",name:"a5",fontSize:22,color:"#e70626"}},{type:"Label",props:{y:0,x:612,width:88,text:"200",styleSkin:"comp/label.png",name:"a6",fontSize:22,color:"#c527ff"}}]}]},{type:"Tab",props:{y:251,x:2,stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:-1,name:"tbNature",labels:"金,木,水,火,土",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:24}},{type:"Tab",props:{x:20.000000026794794,stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,name:"tbEquip",labels:"梼杌/帝江,九婴/岩蛟",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}}]},{type:"Box",props:{y:240,x:40,width:670,"var":"equipGhostBox",height:752},child:[{type:"Label",props:{y:30,x:276,text:"开出概率",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:30,x:80,width:104,text:"熔灵品质",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:92,x:301,text:"44%",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#0084ff",align:"left"}},{type:"Text",props:{y:92,x:106,text:"蓝色",fontSize:26,color:"#0084ff"}},{type:"Image",props:{y:75,skin:"ui/hline_white.png",right:40,left:40,sizeGrid:"0,5,0,5"}},{type:"Label",props:{y:135,x:301,text:"33%",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#00dc24",align:"left"}},{type:"Text",props:{y:135,x:106,text:"绿色",fontSize:26,color:"#00dc24"}},{type:"Label",props:{y:185,x:301,text:"15%",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#fffc00",align:"left"}},{type:"Text",props:{y:185,x:106,text:"黄色",fontSize:26,color:"#fffc00"}},{type:"Label",props:{y:231,x:309,text:"6%",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#e70626",align:"left"}},{type:"Text",props:{y:231,x:106,text:"红色",fontSize:26,color:"#e70626"}},{type:"Label",props:{y:281,x:309,text:"2%",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#c527ff",align:"left"}},{type:"Text",props:{y:281,x:106,text:"紫色",fontSize:26,color:"#c527ff"}},{type:"Label",props:{y:281,x:503,text:"100次",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:231,x:510,text:"30次",styleSkin:"comp/label.png",name:"suitInfo_0",fontSize:26,color:"#e70626",align:"left"}},{type:"Label",props:{y:30,x:486,width:104,text:"保底次数",styleSkin:"comp/label.png",name:"suitInfo_0",height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:240,x:40,"var":"alcBoss"},child:[{type:"Label",props:{y:0,x:0,wordWrap:!0,width:670,text:"挑战规则\\n 1、每人每天最多只能挑战1次，不能多人同时攻打BOSS；\\n 2、每杀死1个BOSS个人可获得元宝奖励、宗门资源增加、天籁石碎片；\\n 3、元宝奖励（首次通关奖励）：固定每打掉1个BOSS，宗门内所有成员可获得50元宝奖励；\\n 4、宗门资源（通关奖励）：层数越高，宗门资源递增奖励；\\n 5、宗门贡献（进攻奖励）：只要参与一次攻打宗门BOSS，不论胜负，都固定加80点贡献；\\n 6、天籁石碎片（额外奖励）：伤害排行榜前三（BOSS被打死后结算）才可获得额外奖励；\\n 7、BOSS每30天可重置1次，重置后可从第1关开始打，BOSS重置后击败重置前的关卡，只有资源和进攻贡献奖励，已经领取过该关卡BOSS元宝奖励的，则无法重复领取元宝奖励； \\n 8、如当日宗门BOSS未打败，BOSS当前血量将持续保留当前状态，次日可继续攻打，直到击败为止（BOSS的血量只减不增）；\\n 9、伤害排行，指当前层BOSS的伤害排行榜，非历史BOSS累计伤害；\\n 10、战斗期间超过一定时间，boss会进入狂暴状态； \\n 11、进入新的宗门当日次数为0，次日恢复正常；",styleSkin:"comp/label.png",leading:8,height:787,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:845,x:4,wordWrap:!0,width:670,text:"特别说明：\\n    更换宗门后，挑战BOSS元宝奖励将记录历史BOSS层数，如在前宗门已领取过前10层BOSS的元宝奖励，更换宗门后，则无法重复领取",styleSkin:"comp/label.png",leading:10,height:148,fontSize:28,color:"#fffc00",bold:!0,align:"left"}}]},{type:"Box",props:{y:260,x:18,"var":"lottery"},child:[{type:"HTMLDivElement",props:{y:-64,x:12,width:697,name:"info",mouseEnabled:!1,height:300}},{type:"Tab",props:{y:247,x:-3,stateNum:2,space:10,skin:"comp/tab.png",name:"tbAwd",labels:"战  技,血  脉",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}},{type:"List",props:{y:307,x:-9,width:728,spaceY:5,repeatY:5,name:"listSkill",height:675},child:[{type:"PetSkillCell",props:{name:"render",runtime:"ui.model.petskill.PetSkillCellUI"}}]},{type:"List",props:{y:307,x:7,width:700,spaceY:5,repeatY:5,name:"bloodList",height:696},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:110},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",name:"bg",height:109,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:10,x:15,width:109,text:"金龙血脉",styleSkin:"comp/label.png",name:"name",height:36,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:0,x:119,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:42,x:15,width:135,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:32,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:15,width:142,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:33,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:10,x:282,width:135,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute3",height:32,fontSize:24,color:"#1440ee",align:"left"}}]}]}]},{type:"Label",props:{y:240,x:40,wordWrap:!0,width:670,"var":"activecodes",text:"补偿礼包码：\\n数字“1”;\\n数字“888”;\\n数字“666”;\\n数字“123”（二区回档严重专属补偿）;\\n礼包码使用方法：打开游戏-礼包-输入礼包码-领取;\\n如游戏里无法输入中文，请打开手机系统设置-输入法-关闭安全键盘;",styleSkin:"comp/label.png",leading:4,height:526,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:240,x:40,width:670,"var":"skyPieceFrom",text:"1、开红色品质以上宝箱。\\n2、五行宫每日掉落。\\n3、森林给老者铜币。\\n4、试炼之塔威望兑换。\\n5、竞技场排名获得。",styleSkin:"comp/label.png",leading:4,height:523,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"HTMLDivElement",props:{y:314,x:38,width:679,"var":"mixEquip",mouseEnabled:!1,innerHTML:"<font color='#ffffff'>4	可放入相生材料增加保留特殊材料概率，以及额外属性</font>",height:512}},{type:"HTMLDivElement",props:{y:146,x:24,width:702,"var":"roleInfo",mouseEnabled:!1,innerHTML:"<font color='#ffffff'>roleInfo</font>",height:510}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"equipDress",mouseEnabled:!1,height:512}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"petShop",mouseEnabled:!1,height:512}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"towerShopRate",mouseEnabled:!1,height:512}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"exchange",mouseEnabled:!1,height:512}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"allianceTitle",mouseEnabled:!1,height:512}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"alcarule",mouseEnabled:!1,height:912}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"pearl",mouseEnabled:!1,height:818}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"alcmine",mouseEnabled:!1,height:818}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"demon",mouseEnabled:!1,height:818}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"arena",mouseEnabled:!1,height:818}},{type:"HTMLDivElement",props:{y:240,x:40,width:670,"var":"petSkillStore",mouseEnabled:!1,height:818}},{type:"HTMLDivElement",props:{y:250,x:50,width:670,"var":"worldboss",mouseEnabled:!1,height:818}},{type:"Button",props:{y:130,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}}]},t}(Qw),QC=function(e){function t(){this.typeBar=null,this.logPanel=null,this.buyBox=null,this.goodsFilter=null,this.natureFilter=null,this.listContainer=null,this.kindFilter=null,this.qualityFilter=null,this.lbLv=null,this.inputLv=null,this.addPanel=null,this.jadePanel=null,this.ntc=null,t.__super.call(this)}o(t,"ui.model.exchange.ExchangeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:80,x:315,width:120,text:"交易所",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:75,x:667,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Tab",props:{y:143,x:10,width:613,"var":"typeBar",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"购买,我的货架,交易日志,仙玉",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:26,stateNum:2}},{type:"Panel",props:{y:205,x:-730,width:730,"var":"logPanel",vScrollBarSkin:"comp/vscroll.png",height:1100}},{type:"Box",props:{y:205,x:10,width:730,"var":"buyBox",height:1100},child:[{type:"ComboBox",props:{y:0,x:10,width:110,"var":"goodsFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"图纸,材料,熔灵,装备",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"ComboBox",props:{y:0,x:134,width:110,"var":"natureFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,金系,木系,水系,火系,土系",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"List",props:{y:57,x:0,width:730,"var":"listContainer",vScrollBarSkin:"comp/vscroll.png",spaceY:10,repeatX:1,height:995}},{type:"ComboBox",props:{y:0,x:259,width:110,"var":"kindFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,梼杌,帝江,九婴",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Label",props:{y:11,x:516,width:213,text:"持有:999仙玉 ",styleSkin:"comp/label.png",name:"jadeHas",height:27,fontSize:24,color:"#f9d61a",bold:!0,align:"left"}},{type:"ComboBox",props:{y:-1,x:383,width:110,"var":"qualityFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,绿色,黄色,红色,紫色",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Label",props:{y:12,x:376,width:67,"var":"lbLv",text:"等级：",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:7,x:448,width:55,"var":"inputLv",type:"number",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}}]},{type:"Panel",props:{y:207,x:750,width:730,"var":"addPanel",vScrollBarSkin:"comp/vscroll.png",height:1100}},{type:"Box",props:{y:218,x:1564,"var":"jadePanel"},child:[{type:"Label",props:{x:443,width:254,text:"持有:999仙玉 ",styleSkin:"comp/label.png",name:"jadeHas",height:27,fontSize:24,color:"#f9d61a",bold:!0,align:"left"}},{type:"List",props:{y:282,x:0,width:712,vScrollBarSkin:"comp/vscroll.png",spaceY:15,name:"jadePays",height:800},child:[{type:"Box",props:{y:0,x:0,width:712,name:"render",height:188},child:[{type:"Image",props:{y:0,x:0,width:712,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:48,x:115,text:"300",styleSkin:"comp/label.png",name:"jade",height:42,fontSize:32,color:"#f4eb13",bold:!0,align:"left"}},{type:"Button",props:{y:68,x:532,width:130,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:110,x:112,width:126,text:"仅需6元",styleSkin:"comp/label.png",name:"money",height:26,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:44,x:3,width:149,text:"送10%",styleSkin:"comp/label.png",rotation:-30,name:"lbRate",height:41,fontSize:32,color:"#0cd41c",bold:!0,align:"left"}},{type:"Label",props:{y:48,x:168,width:179,text:" + 30仙玉",styleSkin:"comp/label.png",name:"jadeAdd",height:44,fontSize:32,color:"#0cd41c",bold:!0,align:"left"}}]}]},{type:"Image",props:{y:38,x:0,width:712,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:85,x:274,text:"元宝",fontSize:32,color:"#f4eb13",bold:!0,align:"left"}},{type:"Button",props:{y:106,x:532,width:130,stateNum:2,skin:"comp/button.png",name:"btnChange",label:"兑换",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:136,x:34,width:333,text:"需要:100仙玉",styleSkin:"comp/label.png",name:"needJade",height:44,fontSize:32,color:"#0cd41c",bold:!0,align:"left"}},{type:"Text",props:{y:85,x:34,text:"换取:",fontSize:32,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:85,x:123,width:144,type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",name:"aimGolden",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Label",props:{y:241,x:2,width:254,text:"购买仙玉:",styleSkin:"comp/label.png",name:"lbBuyjade",height:27,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{x:2,width:254,text:"换取元宝:",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:190,x:38,width:636,text:"小提示:15仙玉兑换10元宝.换取元宝必需是10的整数倍",fontSize:24,color:"#6b9eec",bold:!0,align:"center"}},{type:"Box",props:{y:243,x:0,visible:!1},child:[{type:"Image",props:{y:38,width:712,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:85,x:274,text:"个",fontSize:32,color:"#f4eb13",bold:!0,align:"left"}},{type:"Button",props:{y:106,x:532,width:130,stateNum:2,skin:"comp/button.png",name:"btnBook",label:"兑换",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:136,x:34,width:333,text:"需要:100仙玉",styleSkin:"comp/label.png",name:"needJadeBook",height:44,fontSize:32,color:"#0cd41c",bold:!0,align:"left"}},{type:"Text",props:{y:85,x:34,text:"换取:",fontSize:32,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:85,x:123,width:144,type:"number",text:"1",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",name:"bookCount",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{x:2,width:254,text:"换取器灵:",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:190,x:38,width:636,text:"小提示:100仙玉兑换随机获得一个不超过角色等级的器灵",fontSize:24,color:"#6b9eec",bold:!0,align:"center"}}]}]},{type:"Button",props:{y:142,x:652,width:90,"var":"ntc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),jC=function(e){function t(){this.props=null,this.typeBar=null,this.natureFilter=null,this.typeFilter=null,this.qualityFilter=null,this.natureLb=null,this.typeLb=null,this.qualityLb=null,this.levelFilter=null,t.__super.call(this)}o(t,"ui.model.exchange.ExchangeSelectPropsUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:264,x:10,width:730,"var":"props",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:1041}},{type:"Text",props:{y:80,x:18,width:143,text:"选择上架的商品：",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:75,x:667,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Tab",props:{y:133,x:10,width:606,"var":"typeBar",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"道具,装备",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:26,stateNum:2}},{type:"Box",props:{y:199,x:10},child:[{type:"ComboBox",props:{y:1,x:376,width:110,"var":"natureFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,金系,木系,水系,火系,土系",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"ComboBox",props:{y:1,x:184,width:110,"var":"typeFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,图纸,材料,熔灵,器灵",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"ComboBox",props:{y:1,x:568,width:110,"var":"qualityFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,白色,蓝色,绿色,黄色,红色,紫色",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Text",props:{y:11,x:0,width:112,text:"筛选条件",fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:11,x:312,width:69,"var":"natureLb",text:"五行：",styleSkin:"comp/label.png",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:11,x:119,width:69,"var":"typeLb",text:"类型：",styleSkin:"comp/label.png",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:11,x:505,width:69,"var":"qualityLb",text:"品质：",styleSkin:"comp/label.png",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:6,x:577,width:90,"var":"levelFilter",type:"number",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",maxChars:3,height:39,fontSize:24,bold:!0,align:"center"}}]}]},t}(Qw),ZC=function(e){function t(){this.aimCount=null,this.needJade=null,this.btnSure=null,this.prop=null,this.equip=null,this.hasJade=null,t.__super.call(this)}o(t,"ui.model.exchange.ExchangeBuyConfirmUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.exchange.ExchangePropCellUI",jw),Sw.regComponent("ui.model.exchange.ExchangeEquipCellUI",Zw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:542,x:42,text:"购买数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:540,x:241,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"TextInput",props:{y:537,x:166,width:78,"var":"aimCount",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:607,x:42,width:123,text:"需要花费：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:607,x:166,width:162,"var":"needJade",text:"10仙玉",styleSkin:"comp/label.png",fontSize:24,color:"#f9d61a",bold:!0,align:"left"}},{type:"Button",props:{y:704,x:228,width:100,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:704,x:395,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:101,x:311,text:"购买确认",fontSize:32,color:"#ffffff",bold:!0,align:"left"}},{type:"ExchangePropCell",props:{y:216,x:10,"var":"prop",runtime:"ui.model.exchange.ExchangePropCellUI"}},{type:"ExchangeEquipCell",props:{y:190,x:10,"var":"equip",runtime:"ui.model.exchange.ExchangeEquipCellUI"}},{type:"Text",props:{y:661,x:42,width:123,text:"持有仙玉：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:661,x:166,width:162,"var":"hasJade",text:"10仙玉",styleSkin:"comp/label.png",fontSize:24,color:"#f9d61a",bold:!0,align:"left"}}]},t}(Qw),JC=function(e){function t(){this.equip=null,this.prop=null,this.saleNum=null,this.salePrice=null,this.btnSure=null,this.hasJade=null,t.__super.call(this)}o(t,"ui.model.exchange.ExchangePutOnConfirmUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"EquipCell",props:{y:187,x:9,"var":"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"PropCell",props:{y:204,x:9,"var":"prop",runtime:"ui.model.pops.PropCellUI"}},{type:"Text",props:{y:510,x:31,text:"上架数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:508,x:226,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"TextInput",props:{y:505,x:151,width:78,"var":"saleNum",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:575,x:31,text:"出售单价：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:574,x:302,text:"仙玉",fontSize:24,color:"#f9d61a",bold:!0,align:"center"}},{type:"TextInput",props:{y:570,x:151,width:144,"var":"salePrice",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Button",props:{y:704,x:228,width:100,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:704,x:395,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:101,x:311,text:"上架确认",fontSize:32,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:640,x:31,width:123,text:"持有仙玉：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:640,x:155,width:162,"var":"hasJade",text:"10仙玉",styleSkin:"comp/label.png",fontSize:24,color:"#f9d61a",bold:!0,align:"left"}}]},t}(Qw),$C=function(e){function t(){this.btnSure=null,this.exp=null,this.hasNum=null,this.useNum=null,this.ckDouble=null,this.equip=null,this.lbBreakMore=null,t.__super.call(this)}o(t,"ui.model.petequip.PetEquipBreakUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:379,x:10,width:730,skin:"comp/bg.png",height:333,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:599,x:243,width:100,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"分解",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:599,x:410,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:448,x:101,text:"分解数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:446,x:300,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:499,x:100,width:110,text:"获得培炼值：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:501,x:244,width:116,"var":"exp",text:99999999,styleSkin:"comp/label.png",height:26,fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:448,x:359,width:163,"var":"hasNum",text:"持有：999个",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#fbf8f8",bold:!0,
align:"center"}},{type:"TextInput",props:{y:443,x:225,width:78,"var":"useNum",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"CheckBox",props:{y:541,x:295,width:133,"var":"ckDouble",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"再次确认",height:31}},{type:"PetEquipCell",props:{y:158,x:10,"var":"equip",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"Text",props:{y:728,x:46,wordWrap:!0,width:650,text:"    分解后增加培炼值，请谨慎操作。如果您有过多不需要的灵宠装备，你可以选择批量分解。",leading:3,height:84,fontSize:26,color:"#fffc00",bold:!0,align:"left"}},{type:"Label",props:{y:760,x:489,width:163,"var":"lbBreakMore",underline:!0,text:"批量分解",styleSkin:"comp/label.png",mouseEnabled:!0,height:33,fontSize:24,color:"#6b9eec",bold:!0,align:"center"}},{type:"Text",props:{y:105,x:266,width:218,text:"分解灵宠装备",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}}]},t}(Qw),eT=function(e){function t(){this.equipOld=null,this.equipNew=null,this.btnSubmit=null,this.txtStoneNum=null,this.txtSuccPercent=null,this.checkProtect=null,this.txtSuccPercentAdd=null,this.txtHoldTimes=null,t.__super.call(this)}o(t,"ui.model.petequip.PetEquipStarUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:403,x:348,skin:"ui/arrow.png"}},{type:"Text",props:{y:70,x:279,text:"灵宠装备强化",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,x:652,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"PetEquipCell",props:{y:180,x:10,"var":"equipOld",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"PetEquipCell",props:{y:486,x:10,"var":"equipNew",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"Text",props:{y:849,x:21,width:107,text:"消耗灵石：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1003,x:293,width:163,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",label:"确认强化",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:850,x:138,width:159,"var":"txtStoneNum",text:"100/10000",styleSkin:"comp/label.png",height:35,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:1246,x:54,width:641,text:"小贴示：强化星级和部位相关，更换装备星级保留\\n装备基础属性会影响强化加成",styleSkin:"comp/label.png",fontSize:24,color:"#6b9eec",bottom:105,bold:!1,align:"center"}},{type:"Text",props:{y:896,x:20,width:152,text:"强化成功率：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:898,x:166,width:90,"var":"txtSuccPercent",text:"100%",styleSkin:"comp/label.png",height:34,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"CheckBox",props:{y:1112,x:262,width:223,"var":"checkProtect",stateNum:2,skin:"comp/checkbox.png",labelSize:24,labelColors:"#e70626,#00FF00,#FFFFFF,#FFFFFF",labelBold:!0,label:"使用护灵符：1/10",height:28}},{type:"Label",props:{y:900,x:244,width:123,"var":"txtSuccPercentAdd",text:"+ 100%",styleSkin:"comp/label.png",height:32,fontSize:24,color:"#fffc00",bold:!0,align:"left"}},{type:"Label",props:{y:943,x:20,width:318,"var":"txtHoldTimes",text:"保底成功次数：20",styleSkin:"comp/label.png",height:41,fontSize:24,color:"#c527ff",bold:!0,align:"left"}}]},t}(Qw),tT=function(e){function t(){this.equipOld=null,this.equipNew=null,this.btnUpgrade=null,this.btnFeed=null,this.purpleStone=null,this.lbExp=null,this.redStone=null,this.lbExpHas=null,t.__super.call(this)}o(t,"ui.model.petequip.PetEquipFeedUpUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:403,x:348,skin:"ui/arrow.png"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"PetEquipCell",props:{y:180,x:10,"var":"equipOld",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"PetEquipCell",props:{y:486,x:10,"var":"equipNew",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"Button",props:{y:1133,x:297,width:163,"var":"btnUpgrade",stateNum:2,skin:"comp/button.png",label:"确认培炼",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:60,x:652,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Button",props:{y:788,x:293,width:163,"var":"btnFeed",stateNum:2,skin:"comp/button.png",label:"前往分解",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1060,x:24,"var":"purpleStone",text:"消耗紫色仙品天籁石1个",styleSkin:"comp/label.png",fontSize:24,color:"#c527ff",bold:!0,align:"left"}},{type:"Text",props:{y:70,x:279,text:"灵宠装备培炼",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1104,x:24,width:107,text:"消耗培炼值：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:1104,x:162,width:159,"var":"lbExp",text:"100",styleSkin:"comp/label.png",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:1246,x:58,width:641,text:"小贴示：培炼星级和部位相关，更换装备星级保留；\\n装备基础属性会影响培炼加成。",styleSkin:"comp/label.png",fontSize:24,color:"#6b9eec",bottom:30,bold:!1,align:"center"}},{type:"Text",props:{y:1016,x:24,"var":"redStone",text:"消耗红色仙品天籁石1个",fontSize:24,color:"#e70626",bold:!0,align:"left"}},{type:"Text",props:{y:867,x:66,wordWrap:!0,width:617,text:"    分解灵宠装备可增加培炼值，品质和等级越高增加培炼值越多。",leading:3,height:58,fontSize:26,color:"#6b9eec",bold:!0,align:"left"}},{type:"Text",props:{y:730,x:29,text:"持有培炼值：",fontSize:28,color:"#00dc24",bold:!0,align:"left"}},{type:"Label",props:{y:730,x:195,width:316,"var":"lbExpHas",text:"100",styleSkin:"comp/label.png",fontSize:28,color:"#00dc24",bold:!0,align:"left"}}]},t}(Qw),iT=function(e){function t(){this.list=null,this.submit=null,t.__super.call(this)}o(t,"ui.model.petequip.PetEquipFeedUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:247,text:"选择要分解的装备",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"List",props:{y:185,x:10,width:730,"var":"list",vScrollBarSkin:" ",spaceY:20,repeatY:6,height:1053},child:[{type:"Box",props:{name:"render"},child:[{type:"PetEquipCell",props:{y:0,x:0,name:"grid",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"Text",props:{y:156,x:259,width:245,text:"培炼值100/个",name:"lbExp",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:155,x:698,width:27,text:"个",styleSkin:"comp/label.png",name:"lbUnit",height:26,fontSize:26,color:"#ffffff",bold:!0}},{type:"CheckBox",props:{y:154,x:513,width:75,stateNum:2,skin:"comp/checkbox.png",sizeGrid:"6,6,6,6",scaleY:1.2,scaleX:1.2,name:"checkBox",labelSize:24,labelColors:"#ffffff",labelBold:!0,label:"使用",height:35}},{type:"TextInput",props:{y:152,x:605,width:89,type:"number",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",name:"inputNum",height:35,fontSize:24,bold:!0,align:"center"}}]}]},{type:"Button",props:{y:1263,x:304,width:142,"var":"submit",stateNum:2,skin:"comp/button.png",label:"确认分解",height:59,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:60,x:662,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}}]},t}(Qw),nT=function(e){function t(){this.list=null,this.lbSuit=null,t.__super.call(this)}o(t,"ui.model.petequip.PetEquipDressUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:310,width:130,text:"灵宠装备",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,x:648,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:213,x:10,width:730,"var":"list",vScrollBarSkin:" ",spaceY:20,repeatY:6,height:1047},child:[{type:"Box",props:{name:"render"},child:[{type:"PetEquipCell",props:{y:0,x:0,name:"item",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"Button",props:{y:141,x:353,width:80,stateNum:2,skin:"comp/button.png",name:"btnFeed",label:"培炼",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:141,x:633,width:80,stateNum:2,skin:"comp/button.png",name:"btnDress",label:"替换",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:141,x:540,width:80,stateNum:2,skin:"comp/button.png",name:"btnRefine",labelSize:24,label:"精炼",height:50,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:10,x:685,width:36,visible:!1,stateNum:1,skin:"chat/btn_chat1.png",name:"chat",height:36}},{type:"Button",props:{y:141,x:446,width:80,stateNum:2,skin:"comp/button.png",name:"btnStar",label:"强化",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:1292,x:0,width:750,text:"小贴示：培炼影响基础属性，精炼影响随机属性",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:163,x:2,"var":"lbSuit",text:"【套装效果】神圣抵抗1级",fontSize:32,color:"#fbf8f8",bold:!0}}]},t}(Qw),oT=function(e){function t(){this.lbRate=null,this.lbLeftTime=null,this.listPlayer=null,this.listLog=null,this.lbEmpty1=null,this.lbEmpty2=null,t.__super.call(this)}o(t,"ui.model.petequip.PetPvpRoomUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:310,width:130,text:"主动挑战",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,x:648,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:163,x:22,"var":"lbRate",text:"寻宝概率：100%",fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:163,x:290,width:399,visible:!1,"var":"lbLeftTime",text:"主动挑战今日剩余5次",styleSkin:"comp/label.png",mouseEnabled:!0,leading:3,height:32,fontSize:32,color:"#00dc24",align:"left"}},{type:"List",props:{y:208,x:18,width:707,"var":"listPlayer",spaceY:10,repeatY:5,height:458},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:26,x:20,text:"??",styleSkin:"comp/label.png",name:"name",height:34,fontSize:32,color:"#f19e21",bold:!0,align:"left"}},{type:"Clip",props:{y:18,x:130,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Label",props:{y:26,x:187,text:"99级",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:11,x:544,stateNum:2,skin:"comp/button.png",name:"btnFight",label:"挑战",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:679,x:22,text:"最近日志",fontSize:26,color:"#fbf8f8",bold:!0}},{type:"List",props:{y:715,x:18,width:700,"var":"listLog",vScrollBarSkin:" ",spaceY:15,height:487},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:60,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:7,x:9,wordWrap:!0,width:673,valign:"middle",text:"【张三】前来挑战，铩羽而归。",styleSkin:"comp/label.png",name:"log",height:47,fontSize:26,color:"#fbf8f8",align:"left"}}]}]},{type:"Label",props:{y:1250,x:11,wordWrap:!0,width:728,text:"     温馨提示：挑战成功概率+3%，失败-5% (最低100%，最高200%）；灵宠装备本中遇boss有概率触发额外挑战。",styleSkin:"comp/label.png",leading:2,height:71,fontSize:26,color:"#6b9eec",bold:!1,align:"left"}},{type:"Text",props:{y:403,x:247,"var":"lbEmpty1",text:"未找到匹配的对手",fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Text",props:{y:804,x:247,"var":"lbEmpty2",text:"最近没有事件发生",fontSize:32,color:"#fbf8f8",bold:!0}}]},t}(Qw),sT=function(e){function t(){this.equip=null,this.lbNow=null,this.lbMax=null,this.btnAuto=null,this.btnOnce=null,t.__super.call(this)}o(t,"ui.model.petequip.PetEquipRefineUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:279,text:"灵宠装备精炼",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,x:653,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"PetEquipCell",props:{y:180,x:15,"var":"equip",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"Text",props:{y:422,x:35,text:"当前精炼度：",fontSize:24,color:"#FFA500",bold:!0,align:"left"}},{type:"Label",props:{y:423,x:172,"var":"lbNow",text:"100%",styleSkin:"comp/label.png",fontSize:24,color:"#FFA500",bold:!0,align:"left"}},{type:"Text",props:{y:457,x:35,text:"最高精炼度：",fontSize:24,color:"#c527ff",bold:!0,align:"left"}},{type:"Label",props:{y:458,x:172,"var":"lbMax",text:"100%",styleSkin:"comp/label.png",fontSize:24,color:"#c527ff",bold:!0,align:"left"}},{type:"Button",props:{y:898,x:293,width:163,"var":"btnAuto",stateNum:2,skin:"comp/button.png",labelColors:"#fffc00",label:"自动精炼",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:622,x:297,width:163,"var":"btnOnce",stateNum:2,skin:"comp/button.png",label:"精炼一次",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:974,x:72,wordWrap:!0,width:605,text:"    自动精炼将消耗玩家身上所有的精炼石，或者将精炼度精炼满为止。",leading:3,fontSize:26,color:"#fffc00",bold:!0,align:"left"}},{type:"Text",props:{y:707,x:66,wordWrap:!0,width:617,text:"    每次精炼提升-1.5%至+3%；最小扣到0，达到最高精炼度后不可再精炼。",leading:3,height:58,fontSize:26,color:"#6b9eec",bold:!0,align:"left"}},{type:"Text",props:{y:498,x:35,text:"精炼一次消耗一个精炼石",fontSize:24,color:"#e70626",bold:!0,align:"left"}},{type:"Label",props:{y:1256,x:54,width:641,text:"小贴示：随机属性受精炼度加成影响；\\n精炼度和部位相关，更换装备精炼度保留；\\n每次精炼可能增加也可能减少精炼度。",styleSkin:"comp/label.png",leading:3,fontSize:24,color:"#6b9eec",bottom:30,bold:!1,align:"center"}}]},t}(Qw),rT=function(e){function t(){this.canUsedEqups=null,this.emptTxt=null,this.dressedEquip=null,t.__super.call(this)}o(t,"ui.model.petequip.PetEquipChangeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:471,x:10,width:730,"var":"canUsedEqups",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:806},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Button",props:{y:138,x:639,width:80,stateNum:2,skin:"comp/button.png",name:"btnChange",label:"更换",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"PetEquipCell",props:{y:0,x:0,name:"equip",runtime:"ui.model.pops.PetEquipCellUI"}}]}]},{type:"Text",props:{y:70,x:317,width:116,text:"更换装备",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:432,x:13,width:122,text:"可用装备",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:165,x:13,width:122,text:"当前装备",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:641,x:252,width:245,"var":"emptTxt",text:"空空如也",styleSkin:"comp/label.png",height:53,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,x:652,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"PetEquipCell",props:{y:201,x:10,"var":"dressedEquip",runtime:"ui.model.pops.PetEquipCellUI"}}]},t}(Qw),aT=function(e){function t(){this.dressed=null,this.bloodPieces=null,this.btnExchange=null,this.aimNum=null,this.btnTower=null,t.__super.call(this)}o(t,"ui.model.BloodUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:310,width:130,text:"灵宠血脉",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:213,x:10,width:730,"var":"dressed",spaceY:20,repeatY:4,height:866},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:732,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"PropCell",props:{name:"item",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:137,x:449,width:80,stateNum:2,skin:"comp/button.png",name:"btnQuality",label:"升品",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:137,x:628,width:80,stateNum:2,skin:"comp/button.png",name:"btnDress",label:"佩戴",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:137,x:539,width:80,stateNum:2,skin:"comp/button.png",name:"btnLevel",labelSize:24,label:"熔炼",height:50,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:93,x:49,width:637,text:"人物等级 55开启",styleSkin:"comp/label.png",name:"openInfo",leading:3,height:33,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:10,x:685,width:36,visible:!1,stateNum:1,skin:"chat/btn_chat1.png",name:"chat",height:36}},{type:"Button",props:{y:137,x:357,width:80,stateNum:2,skin:"comp/button.png",name:"btnRebuild",label:"重铸",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:1282,x:0,width:750,text:"小贴示：血脉等级不能超过人物等级，同种五行的血脉只能装一个",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:1094,x:25,width:132,text:"远古血脉：",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:170,x:25,width:174,text:"装备血脉：",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:1094,x:154,width:132,"var":"bloodPieces",text:"999",styleSkin:"comp/label.png",height:38,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:1142,x:303,width:176,"var":"btnExchange",stateNum:2,skin:"comp/button.png",labelSize:32,label:"兑换血脉",height:60,sizeGrid:"4,4,4,4"}},{type:"Text",props:{y:1240,x:0,width:750,text:"放生绿色以上宠物可获得远古血脉，50远古血脉可兑换一个完整血脉",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:1159,x:25,width:132,text:"兑换数量：",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:1143,x:154,width:78,"var":"aimNum",type:"number",text:"999",skin:"comp/textinput.png",height:58,fontSize:26,bold:!0,align:"center"}},{type:"Button",props:{y:1142,x:543,width:176,"var":"btnTower",stateNum:2,skin:"comp/button.png",labelSize:32,label:"威望兑换",height:60,sizeGrid:"4,4,4,4"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),lT=function(e){function t(){this.logs=null,this.lbEmpty=null,t.__super.call(this)}o(t,"ui.model.record.RecordViewUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:180,x:25,width:152,text:"最近消费",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:50,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:80,x:311,text:"消费日志",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:225,x:25,width:700,"var":"logs",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:103},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:101,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:11,x:20,width:660,name:"log",height:80}}]}]},{type:"Label",props:{y:603,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:180,x:141,width:164,text:"（最近30条）",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),hT=function(e){function t(){this.title=null,this.boxQuality=null,this.spQuality=null,this.btnSubmit=null,this.btnLogout=null,this.skillSetting=null,this.btnIdentify=null,this.btnVisitBind=null,this.btnHelp=null,this.cmQuality=null,this.lbCm=null,this.btnStrong=null,this.ckOnlyHang=null,this.btnzcxy=null,this.btnysxy=null,this.cbMusic=null,this.btnMail=null,this.peQuality=null,this.lbPe=null,t.__super.call(this)}o(t,"ui.model.SettingUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:70,x:307,width:136,"var":"title",text:"游戏设置",styleSkin:"comp/label.png",mouseEnabled:!0,height:43,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:170,x:25,width:700,skin:"ui/bg_windos.png",height:1100,sizeGrid:"30,30,30,30"}},{type:"ComboBox",props:{y:30,x:49,width:130,visible:!1,"var":"boxQuality",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:1,labels:"白色,蓝色,绿色,黄色,红色,紫色",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"Text",props:{y:396,x:60,text:"1、装备副本自动出售指定(及以下)品质的材料",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"ComboBox",props:{y:464,x:236,width:130,"var":"spQuality",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:1,labels:"白色,蓝色,绿色,黄色,红色",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"Text",props:{y:469,x:88,width:132,text:"特殊材料：",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1143,x:309,width:130,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",label:"确认设定",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1143,x:135,width:130,"var":"btnLogout",stateNum:2,skin:"comp/button.png",label:"切换分区",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:649,x:60,width:366,text:"2、战斗中不使用以下选中的技能",fontSize:28,color:"#fbf8f8",align:"left"}},{type:"List",props:{y:724,x:88,width:456,"var":"skillSetting",spaceY:20,spaceX:10,repeatY:2,repeatX:2,height:84},child:[{type:"CheckBox",props:{y:0,x:0,width:205,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"render",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#00dc24,#b0bcb0,#FFFFFF,#FFFFFF",labelBold:!0,label:"怒斩问天】",height:29}}]},{type:"Button",props:{y:1143,x:483,width:130,"var":"btnIdentify",stateNum:2,skin:"comp/button.png",label:"实名认证",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1049,x:135,width:130,"var":"btnVisitBind",stateNum:2,skin:"comp/button.png",labelColors:"#cc0000",label:"绑定帐号",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1049,x:310,width:130,"var":"btnHelp",stateNum:2,skin:"comp/button.png",label:"游戏攻略",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"ComboBox",props:{y:535,x:236,width:130,"var":"cmQuality",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:1,labels:"白色,蓝色,绿色,黄色,红色",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"Label",props:{y:540,x:88,width:132,"var":"lbCm",text:"普通材料：",styleSkin:"comp/label.png",height:36,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1049,x:484,width:130,"var":"btnStrong",stateNum:2,skin:"comp/button.png",label:"新手教程",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"CheckBox",props:{y:828,x:88,width:266,"var":"ckOnlyHang",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#cc0000,#FFFFFF,#FFFFFF",labelBold:!0,label:"仅在挂机副本生效",height:29}},{type:"Button",props:{y:954,x:135,width:130,visible:!1,"var":"btnzcxy",stateNum:2,skin:"comp/button.png",label:"用户协议",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:954,x:313,width:130,visible:!1,"var":"btnysxy",stateNum:2,skin:"comp/button.png",label:"隐私条款",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"CheckBox",props:{y:199,x:371,width:266,"var":"cbMusic",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,right:60,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#00cc00,#FFFFFF,#FFFFFF",labelBold:!0,label:"开启背景音乐",height:29}},{type:"Button",props:{y:199,x:60,width:130,"var":"btnMail",stateNum:2,skin:"comp/button.png",labelSize:24,label:"系统邮件",height:60,sizeGrid:"4,4,4,4"},child:[{type:"Rect",props:{y:-2,x:-43,width:374,renderType:"hit",lineWidth:1,height:88,fillColor:"#ff0000"}}]},{type:"Image",props:{y:365,x:25,width:700,skin:"ui/hline_white.png",sizeGrid:"0,5,0,5"}},{type:"Image",props:{y:617,x:25,width:700,skin:"ui/hline_white.png",sizeGrid:"0,5,0,5"}},{type:"Image",props:{y:894,x:25,width:700,skin:"ui/hline_white.png",sizeGrid:"0,5,0,5"}},{type:"ComboBox",props:{y:535,x:578,width:130,"var":"peQuality",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:1,labels:"无,白色,蓝色,绿色,黄色",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"Text",props:{y:540,x:389,width:183,"var":"lbPe",text:"分解灵宠装备：",height:28,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Qw),cT=function(e){function t(){this.oldName=null,this.newName=null,this.btnSure=null,this.erro=null,t.__super.call(this)}o(t,"ui.model.pops.ChangeNamePopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:196,x:288,width:164,text:"使用改名卡",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:263,x:25,width:700,skin:"ui/fangkuang.png",height:360,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:334,x:238,"var":"oldName",text:"张三",styleSkin:"comp/label.png",color:"#f19e21",bold:!0,fontSize:26}},{type:"Text",props:{y:334,x:102,text:"现在名字",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"TextInput",props:{y:400,x:238,width:348,"var":"newName",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:52,fontSize:24,bold:!0,align:"center"}},{type:"Button",props:{y:541,x:176,width:152,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:541,x:412,width:152,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:483,x:142,width:465,"var":"erro",text:"错误信息",styleSkin:"comp/label.png",pivotY:5,height:34,color:"#ea2f15",bold:!0,align:"center",fontSize:26}},{type:"Text",props:{y:412,x:102,text:"新的名字",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}}]},t}(Qw),uT=function(e){function t(){this.submit=null,this.costSilver=null,this.costProp=null,this.costStone=null,this.aimProp=null,this.notHasStone=null,this.silverIcon=null,this.btnNext=null,this.txtStoneLm=null,t.__super.call(this)}o(t,"ui.model.pops.SmityPropSpPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:290,width:169,text:"特殊合成",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:665,x:25,width:136,text:"合成材料：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:925,x:25,width:193,text:"合成数量：1个",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:994,x:25,width:547,text:"消耗1个原材料和一个天籁石，合成1个目标材料。",leading:3,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1055,x:315,width:120,"var":"submit",stateNum:2,skin:"comp/button.png",label:"确认合成",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:960,x:25,width:120,text:"花费铜币：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:960,x:180,width:117,"var":"costSilver",text:"99999",styleSkin:"comp/label.png",height:33,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"PropCell",props:{y:170,x:10,"var":"costProp",runtime:"ui.model.pops.PropCellUI"}},{type:"PropCell",props:{y:421,x:10,"var":"costStone",runtime:"ui.model.pops.PropCellUI"}},{type:"PropCell",props:{y:701,x:10,"var":"aimProp",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Label",props:{y:560,x:58,width:363,"var":"notHasStone",text:"没有合适的天籁石",styleSkin:"comp/label.png",leading:3,height:25,fontSize:18,color:"#ef2727",bold:!0,align:"center"}},{type:"Image",props:{y:636,x:348,skin:"ui/arrow.png"}},{type:"Image",props:{y:958,x:137,"var":"silverIcon",skin:"ui/tongbi.png"}},{type:"Button",props:{y:548,x:333,width:120,"var":"btnNext",stateNum:2,skin:"comp/button.png",label:"换一个",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:382,x:25,width:143,text:"消耗天籁石：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:383,x:171,width:503,"var":"txtStoneLm",text:"完美红色以上品质",styleSkin:"comp/label.png",height:37,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:1137,x:96,width:558,text:"小贴示：若材料为红色品质则天籁石必需要紫色。",fontSize:26,color:"#f6d348",bold:!1,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),dT=function(e){function t(){this.btnBuy=null,this.items=null,this.desc=null,this.tips=null,t.__super.call(this)}o(t,"ui.model.pops.GiftFutureUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1120},child:[{type:"Text",props:{y:70,x:296,width:157,text:"投资礼包",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Image",props:{y:170,x:17,width:712,skin:"ui/fangkuang.png",height:574,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:636,x:280,width:190,"var":"btnBuy",stateNum:2,skin:"comp/button.png",label:"充值2元投资",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"List",props:{y:238,x:54,width:641,"var":"items",spaceY:5,repeatY:6,height:384},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:14,x:0,width:107,text:"5级",styleSkin:"comp/label.png",name:"level",height:32,fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:14,x:170,width:323,text:"20元宝",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fffc00",align:"left"}},{type:"Button",props:{y:-2,x:522,width:109,stateNum:2,skin:"comp/button.png",name:"btnAward",label:"领取",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:13,x:513,width:128,text:"已领取",styleSkin:"comp/label.png",name:"buyed",height:31,fontSize:26,color:"#0cd41c",bold:!0,align:"center"}}]}]},{type:"Text",props:{y:192,x:43,text:"等级",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:192,x:225,width:323,text:"奖励",fontSize:32,color:"#fbf8f8",
align:"left"}},{type:"Label",props:{y:701,x:96,width:558,"var":"desc",text:"可获得28.5倍元宝收益！！！",styleSkin:"comp/label.png",height:33,fontSize:26,color:"#c527ff",bold:!1,align:"center"}},{type:"Label",props:{y:845,x:96,width:558,"var":"tips",text:"小贴示：投资后可领取首充福利哦。",styleSkin:"comp/label.png",height:33,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Qw),pT=function(e){function t(){this.list=null,t.__super.call(this)}o(t,"ui.model.pops.MonthCardBuyPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:254,width:241,text:"组合购买月卡",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"List",props:{y:170,x:25,width:700,"var":"list",spaceY:30,repeatY:4,height:905},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:200},child:[{type:"Image",props:{width:700,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:135,x:226,wordWrap:!0,width:470,text:"激活后可直接领取11520元宝\\n次日开始每日领取100元宝，持续360天",styleSkin:"comp/label.png",name:"lbYear",height:56,fontSize:26,color:"#0084ff",bold:!0}},{type:"Label",props:{y:46,x:46,text:"黄金月卡 * 12  +",styleSkin:"comp/label.png",name:"name1",fontSize:32,color:"#e70626",bold:!0,align:"left"}},{type:"Label",props:{y:85,x:62,underline:!0,text:"原价1030元",styleSkin:"comp/label.png",name:"oldPrice",height:37,fontSize:32,color:"#b0bcb0",bold:!0,align:"left"}},{type:"Label",props:{y:129,x:63,text:" 现价888元",styleSkin:"comp/label.png",name:"nowPrice",height:37,fontSize:32,color:"#00dc24",bold:!0,align:"left"}},{type:"Label",props:{y:46,x:291,text:"至尊月卡 * 12",styleSkin:"comp/label.png",name:"name2",fontSize:32,color:"#c527ff",bold:!0,align:"left"}},{type:"Label",props:{y:141,x:398,width:282,text:"10天后才可再买",styleSkin:"comp/label.png",name:"lbCD",height:37,fontSize:32,color:"#b0bcb0",bold:!0,align:"right"}},{type:"Button",props:{y:73,x:557,width:120,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),fT=function(e){function t(){this.lbTitle=null,this.btnFresh=null,this.lbInfo=null,this.rankTitle=null,this.list=null,this.natureBar=null,t.__super.call(this)}o(t,"ui.model.pops.SpDungeonRankUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:70,x:258,width:233,"var":"lbTitle",text:"五行宫排行榜",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Button",props:{y:1127,x:310,width:130,"var":"btnFresh",stateNum:2,skin:"comp/button.png",label:"刷新",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{x:152,width:473,"var":"lbInfo",text:"小贴示：仅显示前10名，排名定时更新。",styleSkin:"comp/label.png",height:37,fontSize:26,color:"#6b9eec",bottom:30,bold:!1,align:"center"}},{type:"Box",props:{y:235,x:18,width:706,height:60},child:[{type:"Image",props:{y:0,x:0,width:706,skin:"ui/fangkuang.png",height:60,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:0,x:70,width:4,skin:"ui/vline_white.png",height:60,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:16,x:10,text:"排名",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:0,x:416,width:4,skin:"ui/vline_white.png",height:60,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:0,x:552,width:4,skin:"ui/vline_white.png",height:60,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:16,x:171,width:124,text:"人物信息",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:16,x:450,width:71,"var":"rankTitle",text:"通关",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"List",props:{y:308,x:18,width:706,"var":"list",spaceY:10,repeatY:10,repeatX:1,height:797},child:[{type:"Box",props:{y:0,x:0,width:707,name:"render",height:70},child:[{type:"Image",props:{y:0,x:0,width:706,skin:"ui/fangkuang.png",height:70,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:0,x:70,width:4,skin:"ui/vline_white.png",height:70,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:19,x:10,width:55,text:"1",styleSkin:"comp/label.png",name:"rank",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:0,x:416,width:4,skin:"ui/vline_white.png",height:70,sizeGrid:"5,0,5,0"}},{type:"Image",props:{y:0,x:552,width:4,skin:"ui/vline_white.png",height:70,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:21,x:97,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:28,color:"#f19e21",bold:!0,align:"left"}},{type:"Clip",props:{y:13,x:204,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Label",props:{y:16,x:257,width:89,text:"99级",styleSkin:"comp/label.png",name:"level",height:38,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:19,x:434,width:99,text:"100",styleSkin:"comp/label.png",name:"maxNum",height:32,fontSize:28,color:"#22d931",bold:!0,align:"center"}},{type:"Label",props:{y:23,x:590,width:83,text:"【您】",styleSkin:"comp/label.png",name:"state",fontSize:24,color:"#22d931",bold:!0,align:"center"}},{type:"Button",props:{y:10,x:578,width:107,stateNum:2,skin:"comp/button.png",name:"btnView",labelSize:28,label:"查看",height:50,sizeGrid:"4,4,4,4"}}]}]},{type:"Tab",props:{y:170,x:18,"var":"natureBar",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:-1,labels:"金系,木系,水系,火系,土系",labelSize:26,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),_T=function(e){function t(){this.aimEquip=null,this.itemList=null,this.lbEmpty=null,this.btnNtc=null,t.__super.call(this)}o(t,"ui.model.pops.EquipEnchantmentUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"EquipCell",props:{y:170,x:10,width:730,"var":"aimEquip",height:260,runtime:"ui.model.pops.EquipCellUI"}},{type:"Text",props:{y:70,x:286,width:177,text:"装备熔灵",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:528,x:25,width:700,"var":"itemList",vScrollBarSkin:"comp/vscroll.png",spaceY:5,height:698},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:114},child:[{type:"PropCellSimple",props:{y:0,x:0,name:"props",runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"Button",props:{y:35,x:553,width:130,stateNum:2,skin:"comp/button.png",name:"btnUse",label:"使用",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:462,x:17,width:125,text:"可用熔灵：",fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Text",props:{y:1270,x:11,width:727,text:"小贴示：熔灵后装备原有熔灵属性将会被覆盖",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:676,x:48,width:653,"var":"lbEmpty",text:"没有可用熔灵，组队副本有概率掉落",styleSkin:"comp/label.png",height:55,fontSize:32,color:"#f3f5f8",bold:!1,align:"center"}},{type:"Button",props:{y:450,x:571,width:132,"var":"btnNtc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"融灵属性",height:53,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),mT=function(e){function t(){this.props=null,this.emptyBtn=null,this.emptyInfo=null,this.filterBar=null,this.cbNature=null,this.minLv=null,this.qualityFilter=null,t.__super.call(this)}o(t,"ui.model.pops.SelectPropsPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1344},child:[{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:70,x:303,width:143,text:"可选材料",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:232,x:24,width:707,"var":"props",vScrollBarSkin:" ",spaceY:10,height:1059},child:[{type:"PropCellSimple",props:{name:"render",runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"Label",props:{y:51,x:311,text:"点击选择放入材料",styleSkin:"comp/label.png",name:"txtPutin",fontSize:32,color:"#e70626",bold:!0,align:"center"}}]},{type:"Button",props:{y:667,x:309,width:131,"var":"emptyBtn",stateNum:2,skin:"comp/button.png",label:"前往兑换",height:54,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:250,x:25,width:700,"var":"emptyInfo",height:350},child:[{type:"Image",props:{top:0,skin:"ui/bg_windos.png",right:0,left:0,bottom:0,sizeGrid:"30,30,30,30"}},{type:"Text",props:{y:73,x:32,wordWrap:!0,width:676,text:"1.材料可通过副本获取，同一种类材料过半则视为主材料。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:120,x:30,wordWrap:!0,width:651,text:"2.特殊材料最多可放一个，如果未鉴定属性将随机取值。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:162,x:32,wordWrap:!0,width:696,text:"3.主材料之外视为辅助材料，主材料不区分品质和等级。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:230,x:30,wordWrap:!0,width:593,text:"例：锻造武器需要6个材料，可放入5个锦鸡喙（主材料），1个锦鸡尖喙（特殊材料）。",leading:4,fontSize:24,color:"#00dc24",bold:!0,align:"left"}},{type:"Text",props:{y:26,x:30,wordWrap:!0,width:295,text:"锻造小提示：",leading:4,fontSize:24,color:"#fffc00",bold:!0,align:"left"}}]},{type:"Box",props:{y:170,x:30,"var":"filterBar"},child:[{type:"ComboBox",props:{x:115,width:110,"var":"cbNature",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,金系,木系,水系,火系,土系",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Text",props:{y:10,width:112,text:"筛选五行：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:10,x:250,width:112,text:"等级下限：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:6,x:365,width:78,"var":"minLv",type:"number",text:"0",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"ComboBox",props:{x:546,width:110,"var":"qualityFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,白色,蓝色,绿色,黄色,红色,紫色",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Text",props:{y:10,x:483,text:"品质：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}}]}]},t}(Qw),gT=function(e){function t(){this.tabBar=null,this.listLogs=null,this.lbInfo=null,this.ranks=null,this.listRank=null,this.testId=null,this.btnTest=null,t.__super.call(this)}o(t,"ui.model.pops.ArenaRankUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Tab",props:{y:121,x:17,width:290,"var":"tabBar",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"劫掠,记录",labelSize:26,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:51.5}},{type:"Button",props:{y:1253,x:310,width:130,stateNum:2,skin:"comp/button.png",name:"close",label:"返  回",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"List",props:{y:180,x:811,width:700,"var":"listLogs",vScrollBarSkin:" ",spaceY:15,height:980},child:[{type:"Box",props:{width:711,name:"render",height:105},child:[{type:"Image",props:{width:700,skin:"ui/fangkuang.png",height:105,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:7,x:9,wordWrap:!0,width:495,valign:"middle",text:"【张三】前来挑战，铩羽而归。",styleSkin:"comp/label.png",name:"log",height:91,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Button",props:{y:22,x:548,width:130,stateNum:2,skin:"comp/button.png",name:"btnFight",label:"劫掠",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:2,x:508,width:3,skin:"ui/vline_white.png",height:101,sizeGrid:"5,0,5,0"}}]}]},{type:"Label",props:{y:1193,x:16,wordWrap:!0,width:728,"var":"lbInfo",text:"     温馨提示：成功劫掠对手可获得1小时灵石收益,只能劫掠与自身战力相当的对手。",styleSkin:"comp/label.png",leading:2,height:72,fontSize:26,color:"#6b9eec",bold:!1,align:"left"}},{type:"Box",props:{y:180,x:18,width:700,"var":"ranks",height:980},child:[{type:"Box",props:{y:0,x:0},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:68,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:498,width:3,skin:"ui/vline_white.png",height:62,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:17,x:187,text:"人物信息",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"List",props:{y:85,x:0,width:713,"var":"listRank",vScrollBarSkin:" ",spaceY:15,height:893},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:109},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:105,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:498,width:3,skin:"ui/vline_white.png",height:100,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:36,x:20,text:"??",styleSkin:"comp/label.png",name:"name",height:34,fontSize:32,color:"#f19e21",bold:!0,align:"left"}},{type:"Clip",props:{y:28,x:130,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Label",props:{y:36,x:187,text:"99级",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:37,x:542,width:161,text:"【您】",styleSkin:"comp/label.png",name:"state",height:32,fontSize:24,color:"#22d931",bold:!0,align:"center"}},{type:"Button",props:{y:26,x:546,stateNum:2,skin:"comp/button.png",name:"btnFight",label:"劫掠",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:38,x:269,text:"宗门",styleSkin:"comp/label.png",name:"alc",fontSize:26,color:"#0084ff",bold:!0,align:"left"}}]}]}]},{type:"TextInput",props:{y:120,x:334,width:204,"var":"testId",type:"number",skin:"comp/textinput.png",prompt:"切磋目标ID",height:52,fontSize:32,bold:!1,align:"center"}},{type:"Button",props:{y:121,x:555,width:132,"var":"btnTest",stateNum:2,skin:"comp/button.png",label:"测试切磋",height:51.5,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),vT=function(e){function t(){this.aimQuality=null,this.btnSure=null,this.fruitCount=null,t.__super.call(this)}o(t,"ui.model.pops.PetShopFruitPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:439,x:25,width:700,skin:"comp/bg.png",height:456,sizeGrid:"10,10,10,10"}},{type:"ComboBox",props:{y:594,x:372,width:96,"var":"aimQuality",skin:"comp/combobox.png",sizeGrid:"2,25,2,4",selectedIndex:0,labels:"蓝色,绿色,黄色,红色",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:48}},{type:"Text",props:{y:604,x:236,width:123,text:"寻找品质：",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:756,x:198,width:130,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"寻找",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:755,x:383,width:130,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:473,x:72,wordWrap:!0,width:605,text:"    使用龙涎果寻找灵宠，直到找到需要品质或用完龙涎果。",leading:3,fontSize:26,color:"#6b9eec",bold:!0,align:"left"}},{type:"Text",props:{y:666,x:211,text:"持有龙涎果：",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:666,x:379,width:138,"var":"fruitCount",text:"99999",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:853,x:55,width:640,text:"小贴士：【龙涎果】寻找灵宠，无保底设置，请慎重使用。",fontSize:24,color:"#e70626",bold:!1,align:"center"}}]},t}(Qw),yT=function(e){function t(){this.nature=null,this.level=null,this.txtName=null,this.equips=null,this.tabBar=null,this.bone=null,this.pet=null,this.culture=null,this.achieveTitle=null,this.alliance=null,this.bloods=null,this.bookBar=null,this.handbook=null,this.uID=null,this.lbNotOpen=null,this.btnFight=null,this.pearls=null,this.meridian=null,this.boxAttributes=null,this.attributes=null,this.demons=null,this.equipBar=null,this.petBar=null,this.petSkill=null,this.skillBook=null,this.skillBookList=null,this.petEquips=null,t.__super.call(this)}o(t,"ui.model.pops.LookOtherUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("ui.model.pearl.PearlCellUI",uC),Sw.regComponent("ui.model.demon.DemonCellUI",AC),Sw.regComponent("ui.model.petskill.PetSkillCellUI",dC),Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Clip",props:{y:115,x:116,"var":"nature",skin:"ui/clip_wuxing.png",index:4,clipY:5}},{type:"Label",props:{y:124,x:168,"var":"level",text:"99级",styleSkin:"comp/label.png",height:43,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:124,x:25,"var":"txtName",text:"??",styleSkin:"comp/label.png",height:33,fontSize:28,color:"#f19e21",bold:!0,align:"left"}},{type:"List",props:{y:299,x:-3379,width:730,"var":"equips",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:1024},child:[{type:"Box",props:{y:0,x:0,width:730,name:"render",height:262},child:[{type:"EquipCell",props:{name:"equip",runtime:"ui.model.pops.EquipCellUI"}}]}]},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Tab",props:{y:170,x:11,width:729,"var":"tabBar",stateNum:2,space:5,skin:"comp/tab_small.png",selectedIndex:0,labels:"属性,装备,灵根,图鉴,灵宠,境界,经脉",labelSize:26,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50}},{type:"Box",props:{y:235,x:798,width:730,"var":"bone",height:1060},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/bg_windos.png",height:500,sizeGrid:"30,30,30,30"}},{type:"Label",props:{y:25,x:218,width:282,text:"当前火灵根       四阶",styleSkin:"comp/label.png",name:"name",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:103,x:65,width:600,repeatY:9,repeatX:1,name:"attrs",height:326},child:[{type:"Label",props:{y:0,x:0,width:600,text:"攻击 +100",styleSkin:"comp/label.png",name:"render",height:32,fontSize:28,color:"#fbf8f8",bold:!1,align:"center"}}]},{type:"Clip",props:{y:22,x:380,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:180,x:222,width:273,text:"对方未开启灵根",styleSkin:"comp/label.png",name:"txtNotOpen",height:53,fontSize:32,color:"#fffc00",bold:!1,align:"center"}},{type:"Label",props:{y:390,x:139,width:399,text:"变异5级 灵根属性 + 10%",styleSkin:"comp/label.png",name:"lbSp",height:35,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Image",props:{y:72,skin:"ui/hline_white.png",right:7,left:7,height:3,sizeGrid:"0,5,0,5"}}]},{type:"Box",props:{y:290,x:1592,width:730,"var":"pet",height:1046},child:[{type:"Image",props:{y:0,x:0,width:370,skin:"ui/bg_windos.png",height:838,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:848,x:0,width:730,skin:"ui/bg_windos.png",height:193,sizeGrid:"30,30,30,30"}},{type:"Text",props:{y:88,x:44,text:"灵宠",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:89,x:124,text:"野山猪",styleSkin:"comp/label.png",name:"nameTxt",fontSize:32,color:"#f19e21",align:"left"}},{type:"Text",props:{y:130,x:44,text:"等级",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:132,x:125,text:99,styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:174,x:44,text:"资质",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:176,x:123,text:20,styleSkin:"comp/label.png",name:"quality",fontSize:32,color:"#22d931",align:"left"}},{type:"Clip",props:{y:81,x:231,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Text",props:{y:229,x:33,text:"协战加成",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:36,x:33,text:"灵宠信息",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"List",props:{y:283,x:33,width:304,vScrollBarSkin:" ",repeatX:1,name:"attributes",height:520},child:[{type:"Box",props:{y:1,x:0,width:297,name:"render",height:29},child:[{type:"Label",props:{y:0,x:0,width:98,text:"生命力回满",styleSkin:"comp/label.png",name:"key",height:30,fontSize:28,color:"#46aec8",align:"left"}},{type:"Label",props:{y:2,x:179,width:60,text:500,styleSkin:"comp/label.png",name:"value",height:27,fontSize:28,color:"#fbf8f8",align:"left"}}]}]},{type:"Label",props:{y:920,x:28,wordWrap:!0,width:660,text:"一种常见的灵宠，全身金色，像穿着一身金甲",styleSkin:"comp/label.png",name:"desc",leading:1,fontSize:26,color:"#46aec8",align:"left"}},{type:"Text",props:{y:869,x:28,text:"灵宠简介",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"List",props:{y:0,x:410,width:302,vScrollBarSkin:" ",spaceY:15,name:"dressGhosts",height:806},child:[{type:"Box",props:{y:0,x:0,width:301,name:"render",height:142},child:[{type:"Image",props:{y:0,x:0,width:299,skin:"ui/fangkuang.png",name:"bg",height:142,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:21,x:5,width:219,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"name",height:33,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:8,x:245,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:60,x:36,width:99,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:29,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:93,x:36,width:101,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:28,fontSize:24,color:"#1440ee",align:"left"}}]}]}]},{type:"Box",props:{y:235,x:-860,width:730,"var":"culture",height:1060},child:[{type:"List",props:{y:313,x:-6,width:754,vScrollBarSkin:" ",spaceY:15,repeatY:3,name:"listTalisman",height:655},child:[{type:"TalismanCell",props:{y:0,x:2,name:"render",runtime:"ui.model.pops.TalismanCellUI"}}]},{type:"Box",props:{y:0,x:-3,width:723,name:"culture",height:247},child:[{type:"Image",props:{y:0,width:723,skin:"ui/bg_windos.png",right:0,left:0,height:247,sizeGrid:"30,30,30,30"}},{type:"Label",props:{y:17,x:246,width:230,text:"练气一层",styleSkin:"comp/label.png",name:"name",height:37,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:62,skin:"ui/hline_white.png",right:6,left:6,sizeGrid:"0,5,0,5"}},{type:"List",props:{y:79,x:185,width:364,spaceY:3,repeatY:4,name:"attrs",height:166},child:[{type:"Label",props:{y:0,x:0,width:352,text:"攻击 +100",styleSkin:"comp/label.png",name:"render",height:33,fontSize:28,color:"#fbf8f8",bold:!1,align:"center"}}]}]},{type:"Label",props:{y:266,x:14,width:180,text:"装备法宝：",styleSkin:"comp/label.png",name:"dressNum",height:38,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}}]},{type:"Label",props:{y:126,x:236,width:168,"var":"achieveTitle",text:"【叫我壕哥】",styleSkin:"comp/label.png",height:30,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:126,x:404,width:226,"var":"alliance",styleSkin:"comp/label.png",height:30,fontSize:28,color:"#fbf8f8",align:"left"}},{type:"List",props:{y:300,x:2427,width:730,"var":"bloods",spaceY:20,repeatY:4,height:1046},child:[{type:"Box",props:{y:0,x:0,width:730,name:"render",height:200},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:200,sizeGrid:"10,10,10,10"}},{type:"PropCell",props:{name:"item",runtime:"ui.model.pops.PropCellUI"}},{type:"Label",props:{y:93,x:49,width:637,text:"人物等级 55开启",styleSkin:"comp/label.png",name:"openInfo",leading:3,height:33,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]}]},{type:"Tab",props:{y:232,x:11,width:196,"var":"bookBar",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:0,labels:"装备,战技",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:52,labelSize:24}},{type:"Box",props:{y:293,x:10,width:730,"var":"handbook",height:1034},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/bg_windos.png",right:0,left:0,height:500,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:72,x:7,skin:"ui/hline_white.png",right:7,left:7,height:3,sizeGrid:"0,5,0,5"}},{type:"Text",props:{y:25,x:229,width:272,text:"当前装备图鉴累计属性",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:103,x:165,width:400,spaceY:5,repeatY:5,repeatX:1,name:"attrsPercent",height:161},child:[{type:"Label",props:{y:0,x:0,width:400,text:"攻击 +100",styleSkin:"comp/label.png",name:"render",height:27,fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}}]}]},{type:"Label",props:{y:81,x:25,width:496,"var":"uID",text:"编号:10_10",styleSkin:"comp/label.png",height:30,fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:653,x:239,width:272,"var":"lbNotOpen",text:"未激活器灵",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:70,x:548,width:81,"var":"btnFight",stateNum:2,skin:"comp/button.png",label:"切磋",height:45,sizeGrid:"4,4,4,4",labelSize:26}},{type:"List",props:{y:300,x:-1715,width:730,"var":"pearls",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:1024},child:[{type:"Box",props:{y:0,x:0,width:730,name:"render",height:260},child:[{type:"PearlCell",props:{y:0,x:0,name:"pearl",runtime:"ui.model.pearl.PearlCellUI"}}]}]},{type:"Box",props:{y:235,x:10,width:730,"var":"meridian",height:1060},child:[{type:"Image",props:{y:0,width:730,skin:"ui/bg_windos.png",right:0,left:0,height:500,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:72,x:7,skin:"ui/hline_white.png",right:7,left:7,height:3,sizeGrid:"0,5,0,5"}},{type:"Text",props:{y:25,x:229,width:272,text:"经脉属性加成",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:103,x:165,width:400,text:"任脉1级：攻击 +100",styleSkin:"comp/label.png",name:"m1",height:27,fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}},{type:"Label",props:{y:133,x:165,width:400,text:"攻击 +100",styleSkin:"comp/label.png",name:"m2",height:27,fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}},{type:"Label",props:{y:164,x:165,width:400,text:"攻击 +100",styleSkin:"comp/label.png",name:"m3",height:27,fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}},{type:"Label",props:{y:194,x:165,width:400,text:"攻击 +100",styleSkin:"comp/label.png",name:"m4",height:27,fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}}]},{type:"Box",props:{y:235,x:10,width:730,"var":"boxAttributes",height:1060},child:[{type:"Image",props:{x:0,width:730,top:0,skin:"ui/bg_windos.png",right:0,left:0,height:500,bottom:0,sizeGrid:"30,30,30,30"}},{type:"List",props:{y:20,x:20,width:690,"var":"attributes",vScrollBarSkin:" ",repeatX:1,height:981},child:[{type:"Box",props:{y:0,x:15,width:350,name:"render"},child:[{type:"Label",props:{y:0,x:0,text:"生命",styleSkin:"comp/label.png",name:"key",height:34,fontSize:28,color:"#46aec8",bold:!0,align:"left"}},{type:"Label",props:{y:0,x:232,text:"9999",styleSkin:"comp/label.png",name:"value",height:35,fontSize:28,color:"#fbf8f8",bold:!0}}]}]}]},{type:"List",props:{y:300,x:-2485,width:730,"var":"demons",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:1024},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"DemonCell",props:{y:0,x:0,name:"demon",runtime:"ui.model.demon.DemonCellUI"}}]}]},{type:"Tab",props:{y:234,x:-2485,width:454,"var":"equipBar",stateNum:2,space:20,skin:"comp/tab_small.png",selectedIndex:0,labels:"装备,伏魔,灵珠",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50,labelSize:24}},{type:"Tab",props:{y:233,x:1605,width:454,"var":"petBar",stateNum:2,space:20,skin:"comp/tab_small.png",selectedIndex:0,labels:"灵宠,血脉,战技,装备",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50,labelSize:24}},{type:"List",props:{y:300,x:3201,width:728,"var":"petSkill",spaceY:30,repeatY:4,height:960},child:[{type:"PetSkillCell",props:{y:0,x:0,name:"render",runtime:"ui.model.petskill.PetSkillCellUI"}}]},{type:"Box",props:{y:293,x:6,"var":"skillBook"},child:[{type:"Image",props:{width:738,skin:"ui/bg_windos.png",height:1022,sizeGrid:"30,30,30,30"}},{type:"Text",props:{y:25,x:233,width:272,text:"灵宠技能图鉴",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:72,x:13,width:712,"var":"skillBookList",vScrollBarSkin:" ",spaceY:20,height:906},child:[{type:"Box",props:{y:5,name:"render"},child:[{type:"Label",props:{y:3,x:0,text:"天击",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#c18314",bold:!0,align:"center"}},{type:"Label",props:{y:3,x:84,width:598,text:"提高铜币获取每级+3%",styleSkin:"comp/label.png",name:"spInfo",height:30,fontSize:32,color:"#fbf8f8",align:"left"}}]}]}]},{type:"List",props:{y:293,x:10,width:730,"var":"petEquips",vScrollBarSkin:" ",spaceY:20,repeatY:6,height:1008},child:[{type:"Box",props:{name:"render"},child:[{type:"PetEquipCell",props:{y:0,x:0,name:"item",runtime:"ui.model.pops.PetEquipCellUI"}}]}]}]},t}(Qw),bT=function(e){function t(){this.tips=null,this.rebatePearl=null,t.__super.call(this)}o(t,"ui.model.pops.RebatePopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:296,width:157,text:"返利活动",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Label",props:{y:469,x:11,wordWrap:!0,width:727,"var":"tips",text:"小贴士：每次活动只存在48小时，每月一次，档位越高，可领取的返利活动越多",styleSkin:"comp/label.png",height:52,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Box",props:{y:170,x:5,"var":"rebatePearl"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:284,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:214,x:557,stateNum:2,skin:"comp/button.png",name:"btnReset",label:"重  置",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:214,x:302,stateNum:2,skin:"comp/button.png",name:"btnReceive",label:"领  取",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:10,x:197,width:345,text:"灵珠",styleSkin:"comp/label.png",name:"txtTitle",height:24,fontSize:24,color:"#c527ff",bold:!0,align:"center"}},{type:"Label",props:{y:53,x:20,wordWrap:!0,width:700,text:"当前累充档位可享受在接下去48小时内，商城珍宝处购买灵珠碎片参与满减活动",styleSkin:"comp/label.png",name:"txtContent",leading:5,fontSize:24,color:"#32ff00",bold:!0,align:"left"}},{type:"Label",props:{y:13,x:20,width:209,text:"倒计时 --:--:--",styleSkin:"comp/label.png",name:"clock",height:24,fontSize:24,color:"#fffc00",align:"left"}},{type:"Label",props:{y:185,x:553,width:143,text:"可重置1次",styleSkin:"comp/label.png",name:"txtRest",height:24,fontSize:24,color:"#e70626",bold:!0,align:"center"}},{type:"HTMLDivElement",props:{y:122,x:20,width:700,name:"htmlContent1",height:25}},{type:"HTMLDivElement",props:{y:160,x:20,width:700,name:"htmlContent2",height:25}}]},{type:"Label",props:{y:553,x:24,wordWrap:!0,width:702,text:"提示：完成每周消耗活动（灵石大王、天籁至尊、灵珠转世）\\n将提前开启当前活动（已开启则增加重置该活动的次数）",styleSkin:"comp/label.png",leading:3,height:63,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Qw),ET=function(e){function t(){this.logs=null,this.arenaName=null,this.myLastLog=null,t.__super.call(this)}o(t,"ui.model.pops.ArenaGlobalLogUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334
},child:[{type:"List",props:{y:419,x:24,width:702,"var":"logs",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:791},child:[{type:"Box",props:{y:0,x:0,width:702,name:"render",height:155},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:150,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:17,x:7,width:688,name:"log",height:125}}]}]},{type:"Label",props:{y:375,x:25,width:114,"var":"arenaName",text:"青铜擂台",styleSkin:"comp/label.png",height:34,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1255,x:302,width:146,stateNum:2,skin:"comp/button.png",name:"close",label:"返  回",height:58,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:70,x:281,width:187,text:"夺擂日志",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Box",props:{y:216,x:24,width:702,"var":"myLastLog",height:146},child:[{type:"Image",props:{y:0,x:0,width:699,skin:"ui/fangkuang.png",height:147,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:14,x:5,width:690,name:"log",height:128}}]},{type:"Text",props:{y:170,x:24,width:159,text:"最近与我相关",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),xT=function(e){function t(){this.tabBar=null,this.items=null,this.btnEnter=null,this.tabDiff=null,t.__super.call(this)}o(t,"ui.model.pops.ForestSelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Tab",props:{y:237,x:5,width:741,"var":"tabBar",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:0,labels:"一 阶,二 阶,三 阶,四 阶,五阶,六阶,七阶,八阶",labelSize:26,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50}},{type:"List",props:{y:344,x:5,width:740,"var":"items",spaceY:15,repeatY:5,height:539},child:[{type:"Box",props:{y:0,x:0,width:740,name:"render",height:91},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:93,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:295,width:3,skin:"ui/vline_white.png",height:90,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:3,width:248,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"dName",height:33,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:23,x:237,skin:"ui/clip_wuxing.png",name:"dNature",index:1,clipY:5}},{type:"Label",props:{y:11,x:321,width:329,text:"技能触发概率 + 100%",styleSkin:"comp/label.png",name:"suitInfo_0",height:38,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:48,x:320,width:162,text:"攻击+100",styleSkin:"comp/label.png",name:"suitInfo_1",height:35,fontSize:26,color:"#fbf8f8",align:"left"}}]}]},{type:"Button",props:{y:368,x:620,width:110,"var":"btnEnter",stateNum:2,skin:"comp/button.png",labelSize:26,label:"进入",height:50,sizeGrid:"4,4,4,4"}},{type:"Text",props:{y:306,x:386,width:160,text:"【兽魂属性】",fontSize:26,color:"#fffc00",align:"center"}},{type:"Text",props:{y:306,x:74,width:145,text:"残魂五行",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:306,x:620,width:108,text:"点选进入",fontSize:26,color:"#ffffff",align:"center"}},{type:"Text",props:{y:70,x:289,width:155,text:"森林入口",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:894,x:0,width:750,text:"小贴示：残魂可通过合成提升品质，5个残魂可提炼出相应品质的兽魂。",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:1056,x:317,width:119,stateNum:2,skin:"comp/button.png",name:"close",label:"返回",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:929,x:15,wordWrap:!0,width:719,text:"扫荡说明：同一森林连续通关3次后可开启扫荡模式(中途使用复活或医生回血均不算)使用森林扫荡需要激活任意月卡",leading:3,fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Tab",props:{y:170,x:5,width:216,"var":"tabDiff",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:0,labels:"普通,困难",labelSize:26,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),ST=function(e){function t(){this.aimQuality=null,this.btnSure=null,this.maxGold=null,t.__super.call(this)}o(t,"ui.model.pops.PetShopAutoPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:439,x:25,width:700,skin:"comp/bg.png",height:456,sizeGrid:"10,10,10,10"}},{type:"ComboBox",props:{y:624,x:372,width:96,"var":"aimQuality",skin:"comp/combobox.png",sizeGrid:"2,25,2,4",selectedIndex:0,labels:"黄色,红色,紫色",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:48}},{type:"Text",props:{y:634,x:236,width:123,text:"寻找品质：",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:776,x:198,width:130,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"寻找",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:775,x:383,width:130,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:522,x:75,wordWrap:!0,width:605,text:"    自动寻找灵宠，最少黄色品质，具体花费元宝根据实际寻找次数计算。",leading:3,fontSize:26,color:"#6b9eec",bold:!0,align:"left"}},{type:"Text",props:{y:696,x:196,width:158,text:"最大花费元宝：",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:697,x:419,width:138,"var":"maxGold",text:"99999",styleSkin:"comp/label.png",height:27,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:690,x:375,skin:"ui/yuanbao.png"}}]},t}(Qw),wT=function(e){function t(){this.list=null,this.title=null,this.emptyInfo=null,this.submit=null,t.__super.call(this)}o(t,"ui.model.pops.BoneFeedPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:120,x:25,width:700,"var":"list",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:1099},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:116},child:[{type:"PropCellSimple",props:{width:700,name:"grid",height:114,runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"CheckBox",props:{y:18,x:495,width:75,stateNum:2,skin:"comp/checkbox.png",sizeGrid:"6,6,6,6",scaleY:1.2,scaleX:1.2,name:"checkBox",labelSize:24,labelColors:"#ffffff",labelBold:!0,label:"使用",height:35}},{type:"Label",props:{y:60,x:469,width:228,text:"持有：100个",styleSkin:"comp/label.png",name:"has",height:37,fontSize:26,color:"#ffffff",bold:!0,align:"right"}},{type:"Label",props:{y:19,x:629,width:30,text:"9",styleSkin:"comp/label.png",name:"inNum",height:37,fontSize:26,color:"#ffffff",bold:!0,align:"center"}},{type:"Button",props:{y:0,x:580,width:53,name:"btnD",labelSize:30,labelColors:"#ffffff",labelBold:!0,label:"-",height:63}},{type:"Button",props:{y:0,x:657,width:43,name:"btnU",labelSize:30,labelColors:"#ffffff",labelBold:!0,label:"+",height:69}}]}]},{type:"Label",props:{y:70,x:40,width:516,"var":"title",text:"需要特殊材料、红色、30级以上、火系：(1/5)",styleSkin:"comp/label.png",height:39,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Box",props:{y:179,x:94,width:571,"var":"emptyInfo",height:348},child:[{type:"Text",props:{y:49,x:1,wordWrap:!0,width:685,text:"    1.普通材料可通过副本获取，品质可通过合成提升。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:91,x:1,wordWrap:!0,width:611,text:"    2.特殊材料只能通过副本掉落获得。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:138,x:0,wordWrap:!0,width:614,text:"    3.只有品质、级别、五行符合才可用于提升级灵根。",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:0,x:1,wordWrap:!0,width:295,text:"灵根小提示：",leading:4,fontSize:24,color:"#fffc00",bold:!0,align:"left"}}]},{type:"Button",props:{y:1264,x:324,width:101,"var":"submit",stateNum:2,skin:"comp/button.png",label:"确  定",height:53,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),CT=function(e){function t(){this.equip=null,this.closeBtn=null,this.title=null,this.props=null,this.btnDress=null,t.__super.call(this)}o(t,"ui.model.pops.SmithySuccessUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"EquipCell",props:{y:224,x:10,"var":"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:547,x:315,width:120,"var":"closeBtn",stateNum:2,skin:"comp/button.png",name:"close",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:165,x:10,width:364,"var":"title",text:"恭喜您锻造成功，获得装备",styleSkin:"comp/label.png",height:42,fontSize:24,color:"#48f656",bold:!0,align:"center"}},{type:"PropCell",props:{y:251,x:9,"var":"props",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:547,x:491,width:120,"var":"btnDress",stateNum:2,skin:"comp/button.png",label:"穿戴",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),TT=function(e){function t(){this.equipA=null,this.equipB=null,this.btnSubmit=null,this.txtStoneNum=null,this.lbAlert=null,this.txtSuccPercent=null,this.checkProtect=null,this.txtSuccPercentAdd=null,this.txtHoldTimes=null,t.__super.call(this)}o(t,"ui.model.pops.EquipStarUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"EquipCell",props:{y:170,x:9,width:732,"var":"equipA",height:260,runtime:"ui.model.pops.EquipCellUI"}},{type:"EquipCell",props:{y:551,x:9,width:732,"var":"equipB",height:260,runtime:"ui.model.pops.EquipCellUI"}},{type:"Image",props:{y:463,x:348,skin:"ui/arrow.png"}},{type:"Text",props:{y:70,x:287,width:177,text:"部位强化",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:849,x:21,width:107,text:"消耗灵石：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1003,x:293,width:163,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",label:"确认强化",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:850,x:138,width:159,"var":"txtStoneNum",text:"100/10000",styleSkin:"comp/label.png",height:35,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{x:54,width:641,"var":"lbAlert",text:"小贴示：强化星级和部位相关，更换装备星级保留\\n装备基础属性会影响强化加成",styleSkin:"comp/label.png",fontSize:24,color:"#6b9eec",bottom:30,bold:!1,align:"center"}},{type:"Text",props:{y:896,x:20,width:152,text:"强化成功率：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:898,x:166,width:90,"var":"txtSuccPercent",text:"100%",styleSkin:"comp/label.png",height:34,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"CheckBox",props:{y:1112,x:262,width:223,"var":"checkProtect",stateNum:2,skin:"comp/checkbox.png",labelSize:24,labelColors:"#e70626,#00FF00,#FFFFFF,#FFFFFF",labelBold:!0,label:"使用护灵符：1/10",height:28}},{type:"Label",props:{y:900,x:244,width:123,"var":"txtSuccPercentAdd",text:"+ 100%",styleSkin:"comp/label.png",height:32,fontSize:24,color:"#fffc00",bold:!0,align:"left"}},{type:"Label",props:{y:943,x:20,width:318,"var":"txtHoldTimes",text:"保底成功次数：20",styleSkin:"comp/label.png",height:41,fontSize:24,color:"#c527ff",bold:!0,align:"left"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),IT=function(e){function t(){this.equip=null,this.sureBtn=null,t.__super.call(this)}o(t,"ui.model.pops.SmithyConfirmUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"EquipCell",props:{y:183,x:10,"var":"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:577,x:214,width:120,"var":"sureBtn",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:700,x:36,wordWrap:!0,width:645,text:"    您的材料可以锻造以下装备，并将有概率随机获得其中一条蓝色属性。",leading:3,fontSize:24,color:"#6b9eec",bold:!0,align:"left"}},{type:"Button",props:{y:577,x:412,width:120,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:508,x:221,width:307,text:"确认锻造这个装备吗",fontSize:24,color:"#f6d348",bold:!0,align:"center"}}]},t}(Qw),AT=function(e){function t(){this.tips=null,this.tab=null,this.simple=null,this.silverIcon=null,this.fast=null,t.__super.call(this)}o(t,"ui.model.pops.SmityPropCommPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Label",props:{y:1283,x:96,width:558,"var":"tips",text:"小贴示：本材料普通合成最高只能合成到红色。",styleSkin:"comp/label.png",height:33,fontSize:26,color:"#f6d348",bold:!1,align:"center"}},{type:"Tab",props:{y:170,x:25,"var":"tab",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"普通合成,快速合成",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}},{type:"Box",props:{y:230,x:10,width:730,"var":"simple",height:1100},child:[{type:"Text",props:{y:235,x:2,width:139,text:"合成材料：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:523,x:136,width:94,type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",name:"aimCount",height:38,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:526,x:15,width:131,text:"合成数量：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:527,x:235,text:"个",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:679,x:15,width:416,text:"每消耗3个低品材料合成1个高品质材料。",styleSkin:"comp/label.png",name:"lbDesc",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:771,x:300,width:130,stateNum:2,skin:"comp/button.png",name:"btnSubmit",label:"确认合成",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:574,x:15,width:131,text:"花费铜币：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:575,x:177,width:103,text:"99999",styleSkin:"comp/label.png",name:"costSilver",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"PropCell",props:{y:0,x:0,name:"costProp",runtime:"ui.model.pops.PropCellUI"}},{type:"PropCell",props:{y:278,x:0,name:"aimProp",runtime:"ui.model.pops.PropCellUI"}},{type:"Image",props:{y:213,x:340,skin:"ui/arrow.png"}},{type:"Image",props:{y:572,x:138,"var":"silverIcon",skin:"ui/tongbi.png"}},{type:"Label",props:{y:623,x:15,width:610,text:"合成材料需要消耗大量铜币，建议计算好数量再进行合成",styleSkin:"comp/label.png",name:"lbDesc",height:39,fontSize:24,color:"#e70626",bold:!0,align:"left"}}]},{type:"Box",props:{y:230,x:822,width:730,"var":"fast",height:1100},child:[{type:"Text",props:{y:522,x:0,width:139,text:"合成材料：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:831,x:134,width:134,type:"number",text:"1",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",name:"aimCount",height:48,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:837,x:7,width:131,text:"合成数量：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:838,x:273,text:"个",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:976,x:12,width:446,text:"自动收集可用材料连续合成直至目标品质",styleSkin:"comp/label.png",name:"lbDesc",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1018,x:308,width:130,stateNum:2,skin:"comp/button.png",name:"btnSubmit",label:"确认合成",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:885,x:7,width:131,text:"花费铜币：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:886,x:175,width:103,text:"99999",styleSkin:"comp/label.png",name:"costSilver",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"PropCell",props:{y:555,x:0,name:"aimProp",runtime:"ui.model.pops.PropCellUI"}},{type:"Image",props:{y:497,x:344,skin:"ui/arrow.png"}},{type:"Image",props:{y:883,x:136,skin:"ui/tongbi.png"}},{type:"Label",props:{y:934,x:12,width:610,text:"合成材料需要消耗大量铜币，建议计算好数量再进行合成",styleSkin:"comp/label.png",name:"lbDesc",height:39,fontSize:24,color:"#e70626",bold:!0,align:"left"}},{type:"List",props:{y:0,x:11,width:707,spaceY:10,repeatY:4,repeatX:1,name:"maters",height:490},child:[{type:"PropCellSimple",props:{name:"render",runtime:"ui.model.pops.PropCellSimpleUI"}}]},{type:"Label",props:{y:512,x:149,text:"可用材料不足",styleSkin:"comp/label.png",name:"txtPutin",fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"ComboBox",props:{y:770,x:134,width:130,skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:1,name:"aimQ",labels:"蓝色,绿色,黄色,红色",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"Text",props:{y:782,x:7,width:131,text:"目标品质：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:777,x:287,text:"当前拥有数量：10个",styleSkin:"comp/label.png",name:"txtHas",fontSize:32,color:"#21e706",bold:!0,align:"center"}}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),NT=function(e){function t(){this.props=null,this.goldPrice=null,this.unit=null,this.buyNum=null,this.costGold=null,this.btnSure=null,this.lbMax=null,t.__super.call(this)}o(t,"ui.model.pops.BuyPropMoreUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"PropCell",props:{y:363,x:10,width:732,"var":"props",height:200,runtime:"ui.model.pops.PropCellUI"}},{type:"Text",props:{y:272,x:280,width:189,text:"确认购买",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:512,x:424,width:287,"var":"goldPrice",text:"每个仅需6元宝",styleSkin:"comp/label.png",height:37,fontSize:26,color:"#f4b922",align:"right"}},{type:"Text",props:{y:610,x:30,width:132,text:"购买数量：",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:612,x:300,width:45,"var":"unit",text:"个",styleSkin:"comp/label.png",height:37,fontSize:26,color:"#ffffff",bold:!0,align:"center"}},{type:"TextInput",props:{y:610,x:166,width:133,"var":"buyNum",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:40,fontSize:26,bold:!0,align:"center"}},{type:"Label",props:{y:665,x:160,width:115,"var":"costGold",text:"100元宝",styleSkin:"comp/label.png",height:42,fontSize:26,color:"#f4b922",align:"left"}},{type:"Text",props:{y:662,x:30,width:127,text:"总计需要：",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Button",props:{y:769,x:231,width:120,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:769,x:417,width:120,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:612,x:372,width:235,"var":"lbMax",text:"剩余可购买：10个",styleSkin:"comp/label.png",height:41,fontSize:26,color:"#ffffff",bold:!0,align:"left"}}]},t}(Qw),PT=function(e){function t(){this.costSilver=null,this.btnSubmit=null,this.aim=null,this.meterial=null,this.btnChose=null,t.__super.call(this)}o(t,"ui.model.pops.RebuildCoatSpecialPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:130,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:80,x:303,width:143,text:"重铸熔灵",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:50,x:10,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:724,x:31,width:131,text:"花费铜币：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:725,x:193,width:143,"var":"costSilver",text:"99999",styleSkin:"comp/label.png",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:716,x:154,skin:"ui/tongbi.png"}},{type:"Button",props:{y:881,x:310,width:130,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",label:"确认重铸",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"PropCell",props:{y:212,x:10,"var":"aim",runtime:"ui.model.pops.PropCellUI"}},{type:"PropCell",props:{y:483,x:10,"var":"meterial",runtime:"ui.model.pops.PropCellUI"}},{type:"Text",props:{y:444,x:31,width:298,text:"消耗同等级同品质熔灵",height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:182,x:31,width:298,text:"重铸目标熔灵",height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:785,x:36,width:665,text:"重铸需要消耗熔灵和大量铜币\\n重铸后获得1个同等级同品质未鉴定熔灵(五行随机）",styleSkin:"comp/label.png",name:"lbDesc",leading:5,height:71,fontSize:24,color:"#e70626",bold:!0,align:"left"}},{type:"Button",props:{y:601,x:309,width:131,"var":"btnChose",stateNum:2,skin:"comp/button.png",label:"选择材料",height:54,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),RT=function(e){function t(){this.aimCount=null,this.submit=null,this.costSilver=null,this.costProp=null,this.aimProp=null,this.aimPosition=null,this.aimQuality=null,this.costGhostNum=null,this.hasGhostNum=null,this.adviceNumInfo=null,t.__super.call(this)}o(t,"ui.model.pops.ExchangeGhostPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:303,width:146,text:"兑换材料",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:912,x:151,width:61,"var":"aimCount",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:38,fontSize:20,bold:!0,align:"center"}},{type:"Text",props:{y:911,x:31,width:116,text:"兑换数量：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:916,x:220,text:"个",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:1103,x:29,width:561,text:"兑换材料的品质和部位不同消耗的精元数量也不同。",styleSkin:"comp/label.png",name:"lbDesc",height:47,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1177,x:318,width:160,"var":"submit",stateNum:2,skin:"comp/button.png",label:"确认兑换",height:59,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1035,x:31,width:132,text:"花费铜币：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:1036,x:185,width:104,"var":"costSilver",text:"99999",styleSkin:"comp/label.png",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"PropCell",props:{y:241,x:10,width:732,"var":"costProp",height:200,runtime:"ui.model.pops.PropCellUI"}},{type:"PropCell",props:{y:578,x:11,width:732,"var":"aimProp",height:200,runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:471,x:348,skin:"ui/arrow.png"}},{type:"Image",props:{y:1034,x:144,skin:"ui/tongbi.png"}},{type:"Tab",props:{y:170,x:25,"var":"aimPosition",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"武器材料,防具材料,饰品材料",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}},{type:"ComboBox",props:{y:965,x:153,width:60,"var":"aimQuality",skin:"comp/combobox.png",selectedIndex:0,labels:"白色,蓝色,绿色,黄色,红色",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",height:38,itemSize:20,labelSize:20}},{type:"Text",props:{y:968,x:33,width:124,text:"兑换品质：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:900,x:276,width:156,"var":"costGhostNum",text:"消耗精元999个",styleSkin:"comp/label.png",height:26,fontSize:22,color:"#e81515",bold:!0,align:"left"}},{type:"Label",props:{y:934,x:276,width:157,"var":"hasGhostNum",text:"持有精元999个",styleSkin:"comp/label.png",height:26,fontSize:22,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:835,x:34,width:355,"var":"adviceNumInfo",text:"锻造武器需要6个材料",styleSkin:"comp/label.png",height:43,fontSize:24,color:"#00dc24",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),LT=function(e){function t(){this.mixFood=null,this.btnMix=null,this.needNormal=null,this.aimNice=null,this.hasNormal=null,this.breakFood=null,this.btnBreak=null,this.awardNum=null,this.breakNum=null,this.hasNice=null,t.__super.call(this)}o(t,"ui.model.pops.ExchangePetFoodPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Box",props:{y:312,x:0,"var":"mixFood"},child:[{type:"Image",props:{y:0,x:18,width:700,skin:"comp/bg.png",height:400,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:308,x:228,width:100,"var":"btnMix",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:308,x:395,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:157,x:157,width:157,text:"合成高级魔核：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:157,x:401,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:210,x:157,width:155,text:"需要魔核数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:210,x:325,width:116,"var":"needNormal",text:99999999,styleSkin:"comp/label.png",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:149,x:324,width:78,"var":"aimNice",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:46,x:293,width:163,text:"合成高级魔核",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:103,x:157,width:111,text:"持有魔核：",fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:103,x:274,width:281,"var":"hasNormal",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Text",props:{y:779,x:12,width:725,text:"小贴示：100万普通魔核可合成1个高级魔核",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}}]},{type:"Box",props:{y:311,x:776,"var":"breakFood"},child:[{type:"Image",props:{y:0,x:18,width:700,skin:"comp/bg.png",height:400,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:308,x:228,width:100,"var":"btnBreak",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:308,x:395,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:157,x:157,width:157,text:"分解高级魔核：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:157,x:401,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:210,x:157,width:155,text:"获得魔核数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:210,x:325,width:116,"var":"awardNum",text:99999999,styleSkin:"comp/label.png",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:149,x:324,width:78,"var":"breakNum",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:46,x:293,width:163,text:"分解高级魔核",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:103,x:157,width:111,text:"持有高级魔核：",fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:103,x:324,width:281,"var":"hasNice",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Text",props:{y:779,x:12,width:725,text:"小贴示：1个高级魔核,可分解为100万普通魔核",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}}]}]},t}(Qw),OT=function(e){function t(){this.list=null,t.__super.call(this)}o(t,"ui.model.worldboss.FeedTalismanUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.TalismanCellUI",sC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:730,height:1098},child:[{type:"List",props:{y:0,x:0,width:730,"var":"list",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:1099},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"TalismanCell",props:{y:0,x:0,name:"grid",runtime:"ui.model.pops.TalismanCellUI"}},{type:"CheckBox",props:{y:117,x:500,width:143,stateNum:2,skin:"comp/checkbox.png",sizeGrid:"6,6,6,6",scaleY:1.2,scaleX:1.2,name:"checkBox",labelSize:24,labelColors:"#ffffff",labelBold:!0,label:"选择使用",height:35}},{type:"Label",props:{y:159,x:498,width:206,text:"喂养值：100点",styleSkin:"comp/label.png",name:"price",height:26,fontSize:26,color:"#ffffff",bold:!0}}]}]}]},t}(Qw),MT=function(e){function t(){this.list=null,t.__super.call(this)}o(t,"ui.model.worldboss.FeedPropsUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:700,height:1098},child:[{type:"List",props:{y:0,x:0,width:700,"var":"list",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:1099},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:116},child:[{type:"PropCellSimple",props:{width:700,name:"grid",height:114,runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"CheckBox",props:{y:18,x:485,width:75,stateNum:2,skin:"comp/checkbox.png",sizeGrid:"6,6,6,6",scaleY:1.2,scaleX:1.2,name:"checkBox",labelSize:24,labelColors:"#ffffff",labelBold:!0,label:"使用",height:35}},{type:"Label",props:{y:78,x:487,width:204,text:"持有：100个",styleSkin:"comp/label.png",name:"has",height:26,fontSize:26,color:"#ffffff",bold:!0}},{type:"Label",props:{y:51,x:488,width:206,text:"喂养值：100点/个",styleSkin:"comp/label.png",name:"price",height:26,fontSize:26,color:"#ffffff",bold:!0}},{type:"TextInput",props:{y:16,x:575,width:89,type:"number",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",name:"inputNum",height:35,fontSize:24,bold:!0,align:"center"}},{type:"Label",props:{y:21,x:668,width:27,text:"个",styleSkin:"comp/label.png",name:"lbUnit",height:26,fontSize:26,color:"#ffffff",bold:!0}}]}]}]},t}(Qw),DT=function(e){function t(){this.lbHour=null,this.btnSure=null,this.cbWeek=null,this.lbMin=null,t.__super.call(this)}o(t,"ui.model.worldboss.WorldBossChgUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:180,x:22,width:700,skin:"ui/fangkuang.png",height:484,sizeGrid:"10,10,10,10"}},{type:"TextInput",props:{y:309,x:399,width:85,"var":"lbHour",type:"number",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"时",height:52,fontSize:24,bold:!0,align:"center"}},{type:"Button",props:{y:558,x:178,width:152,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:558,x:414,width:152,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",
height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"ComboBox",props:{y:311,x:247,width:130,"var":"cbWeek",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:0,labels:"选择,周六,周日",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"TextInput",props:{y:307,x:547,width:85,"var":"lbMin",type:"number",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"分",height:52,fontSize:24,bold:!0,align:"center"}},{type:"Label",props:{y:319,x:492,width:49,text:":",styleSkin:"comp/label.png",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:226,x:170,width:369,text:"设定世界首领开启时间",height:32,fontSize:32,color:"#c527ff",bold:!0,align:"center"}},{type:"Text",props:{y:410,x:55,wordWrap:!0,width:599,text:"      喂养满后，排名第一的玩家可设定开启时间。限定可设区间：周六、周日11:00-22:00（设定后10分钟内无法再次更改）",pivotY:5,leading:5,fontSize:26,color:"#e70626",bold:!0}},{type:"Text",props:{y:322,x:42,text:"指定开启时间：",fontSize:28,color:"#fffc00",bold:!0,align:"left"}}]},t}(Qw),kT=function(e){function t(){this.list=null,this.head=null,this.bossName=null,this.hp=null,this.ntc=null,this.btnRank=null,this.btnClose=null,t.__super.call(this)}o(t,"ui.model.worldboss.WorldBossHomeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:179,x:2,"var":"list",spaceY:-2,spaceX:-2,repeatY:8,repeatX:6},child:[{type:"Box",props:{width:126,name:"render",height:126},child:[{type:"Image",props:{y:0,x:0,width:126,staticCache:!0,skin:"samsara/bg_map.png",name:"bg",height:126}}]}]},{type:"Box",props:{y:258,x:-179,width:126,"var":"head",height:126,cacheAs:"normal"},child:[{type:"Image",props:{y:17,x:19,width:87,skin:"ui/head/m1.png",name:"head",height:83}},{type:"Image",props:{y:7,x:12,skin:"samsara/bg_head.png"}},{type:"Text",props:{y:90,x:24,text:"战斗中",stroke:2,name:"fight",fontSize:26,color:"#00dc24",bold:!0,align:"center"}}]},{type:"Label",props:{y:98,x:255,width:239,"var":"bossName",text:"世界首领",styleSkin:"comp/label.png",height:36,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Box",props:{y:143,x:25,"var":"hp",height:24},child:[{type:"Image",props:{y:0,x:0,width:699,skin:"ui/bg_0.png",sizeGrid:"0,51,0,55",height:24}},{type:"Image",props:{y:3,x:3,width:693,skin:"ui/bgHp.png",sizeGrid:"0,19,0,27",name:"bgRed",height:18}},{type:"Image",props:{y:3,x:3,width:693,skin:"ui/bgHp2.png",sizeGrid:"0,31,0,36",name:"bgYellow",height:18}}]},{type:"Button",props:{y:68,x:626,width:106,"var":"ntc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1190,x:310,width:130,"var":"btnRank",stateNum:2,skin:"comp/button.png",label:"伤害排行",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1263,x:21,wordWrap:!0,width:728,text:"      小贴士：战斗自动进行，若离线战斗将停止。打完后按伤害排行领取奖励。",styleSkin:"comp/label.png",leading:2,height:65,fontSize:26,color:"#6b9eec",bold:!1}},{type:"Button",props:{y:1187,x:616,width:106,"var":"btnClose",stateNum:2,skin:"comp/button.png",labelColors:"#e70626",label:"退出",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),BT=function(e){function t(){this.emptyInfo=null,this.submit=null,this.cbNature=null,this.tabBar=null,this.props=null,this.talismans=null,t.__super.call(this)}o(t,"ui.model.worldboss.WorldBossFeedPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.worldboss.FeedPropsUI",MT),Sw.regComponent("ui.model.worldboss.FeedTalismanUI",OT),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:83,x:432,width:69,text:"品质：",styleSkin:"comp/label.png",height:33,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Box",props:{y:286,x:89,width:571,"var":"emptyInfo",height:348},child:[{type:"Text",props:{y:49,x:1,wordWrap:!0,width:685,text:"    1.喂养值只和品质相关",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:91,x:1,wordWrap:!0,width:611,text:"    2.排名越高奖励更高",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:138,x:0,wordWrap:!0,width:614,text:"    3.开战后可领取喂养奖励",leading:4,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:0,x:1,wordWrap:!0,width:295,text:"小提示：",leading:4,fontSize:24,color:"#fffc00",bold:!0,align:"left"}}]},{type:"Button",props:{y:60,x:648,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Button",props:{y:1264,x:304,width:142,"var":"submit",stateNum:2,skin:"comp/button.png",label:"确  定",height:59,sizeGrid:"4,4,4,4",labelSize:26}},{type:"ComboBox",props:{y:74,x:495,width:110,visibleNum:7,"var":"cbNature",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,白色,蓝色,绿色,黄色,红色,紫色",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Tab",props:{y:74,x:31,width:290,"var":"tabBar",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"材  料,法  宝",labelSize:26,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:51.5}},{type:"FeedProps",props:{y:140,x:25,"var":"props",runtime:"ui.model.worldboss.FeedPropsUI"}},{type:"FeedTalisman",props:{y:140,x:10,"var":"talismans",runtime:"ui.model.worldboss.FeedTalismanUI"}}]},t}(Qw),VT=function(e){function t(){this.tab=null,this.listFeed=null,this.listFight=null,this.btnFeed=null,this.btnAward=null,this.btnNtc=null,this.lbTaked=null,this.lbNotice=null,t.__super.call(this)}o(t,"ui.model.worldboss.WorldBossRankUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.worldboss.FeedRankUI",lC),Sw.regComponent("ui.model.worldboss.FightRankUI",hC),Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Tab",props:{y:77,x:25,width:290,"var":"tab",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"喂养排行,伤害排行",labelSize:26,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:51.5}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"FeedRank",props:{y:134,x:0,"var":"listFeed",runtime:"ui.model.worldboss.FeedRankUI"}},{type:"FightRank",props:{y:134,x:0,"var":"listFight",runtime:"ui.model.worldboss.FightRankUI"}},{type:"Button",props:{y:1168,x:29,width:130,"var":"btnFeed",stateNum:2,skin:"comp/button.png",label:"喂养",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1168,x:404,width:130,"var":"btnAward",stateNum:2,skin:"comp/button.png",label:"领取",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1168,x:591,width:130,"var":"btnNtc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1184,x:30,width:359,"var":"lbTaked",text:"奖励已领取",height:28,fontSize:28,color:"#00dc24",bold:!0,align:"right"}},{type:"HTMLDivElement",props:{y:1235,x:21,width:708,"var":"lbNotice",height:94}}]},t}(Qw),FT=function(e){function t(){this.aimTalisman=null,this.btnSubmit=null,this.viewTalisman=null,this.checkBox0=null,this.checkBox1=null,this.checkBox2=null,this.checkBox3=null,this.ntc=null,this.stoneMater=null,this.btnGoBuy=null,t.__super.call(this)}o(t,"ui.model.TalismanRebuildUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:305,width:140,text:"法宝洗炼",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TalismanCell",props:{y:170,x:10,"var":"aimTalisman",runtime:"ui.model.pops.TalismanCellUI"}},{type:"Button",props:{y:1204,x:310,width:130,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",label:"开始洗炼",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1281,x:11,width:727,text:"小贴示：洗炼时将需要的属性锁定，更容易洗炼出理想的法宝",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:394,x:337,skin:"ui/arrow.png"}},{type:"TalismanCell",props:{y:472,x:12,"var":"viewTalisman",runtime:"ui.model.pops.TalismanCellUI"}},{type:"Text",props:{y:408,x:25,text:"洗炼预览：",fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"CheckBox",props:{y:229,x:222,width:97,"var":"checkBox0",stateNum:2,skin:"comp/checkbox.png",labelSize:26,labelPadding:"-3",labelColors:"#ffffff",labelBold:!0,label:"锁定",height:29}},{type:"CheckBox",props:{y:262,x:222,width:88,"var":"checkBox1",stateNum:2,skin:"comp/checkbox.png",labelSize:26,labelPadding:"-3",labelColors:"#ffffff",labelBold:!0,label:"锁定",height:28}},{type:"CheckBox",props:{y:296,x:222,width:84,"var":"checkBox2",stateNum:2,skin:"comp/checkbox.png",labelSize:26,labelPadding:"-3",labelColors:"#ffffff",labelBold:!0,label:"锁定",height:30}},{type:"CheckBox",props:{y:330,x:222,width:87,"var":"checkBox3",stateNum:2,skin:"comp/checkbox.png",labelSize:26,labelPadding:"-3",labelColors:"#ffffff",labelBold:!0,label:"锁定",height:27}},{type:"Text",props:{y:700,x:44,wordWrap:!0,width:673,text:"    注意：所有未锁定的属性洗炼后都必然会变动，第一条属性和法宝五行有关，特殊属性无法洗炼",leading:3,fontSize:24,color:"#fffc00",bold:!1,align:"left"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Button",props:{y:396,width:100,"var":"ntc",stateNum:2,skin:"comp/button.png",right:25,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:778,x:9,width:732,"var":"stoneMater",height:415},child:[{type:"HTMLDivElement",props:{y:2,x:2,width:722,name:"costNum",innerHTML:"消耗天籁石：",height:48}},{type:"List",props:{y:54,x:0,width:732,vScrollBarSkin:"comp/vscroll.png",spaceY:5,name:"stones",height:353},child:[{type:"Box",props:{name:"render"},child:[{type:"PropCellSimple",props:{y:0,x:0,name:"props",runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"CheckBox",props:{y:17,x:520,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"sureUse",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认使用",height:29}}]}]}]},{type:"Button",props:{y:856,x:310,width:130,"var":"btnGoBuy",stateNum:2,skin:"comp/button.png",label:"去购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:128,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),GT=function(e){function t(){this.aimGhost=null,this.showGhost=null,this.btnSure=null,this.materials=null,t.__super.call(this)}o(t,"ui.model.PetMakeOrangeGhostUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:302,width:146,text:"兽魂升阶",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Box",props:{y:198,x:15,width:720,"var":"aimGhost",height:113},child:[{type:"Image",props:{y:0,x:0,width:712,skin:"ui/fangkuang.png",name:"bg",height:111,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:9,x:4,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"name",height:21,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:5,x:235,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:40,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:34,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:29,fontSize:24,color:"#1440ee",align:"left"}}]},{type:"Text",props:{y:1269,x:141,text:"小贴示：进阶材料可在森林困难模式获取",color:"#6b9eec",align:"center",fontSize:26}},{type:"Box",props:{y:378,x:15,width:720,"var":"showGhost",height:113},child:[{type:"Image",props:{y:0,x:0,width:712,skin:"ui/fangkuang.png",name:"bg",height:111,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:9,x:4,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"name",height:21,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:5,x:235,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:40,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:34,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:29,fontSize:24,color:"#1440ee",align:"left"}}]},{type:"Text",props:{y:164,x:22,text:"进阶前",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Text",props:{y:337,x:22,text:"进阶后",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Image",props:{y:319,x:348,skin:"ui/arrow.png"}},{type:"Text",props:{y:545,x:22,text:"需要材料",color:"#fbf8f8",align:"left",fontSize:26}},{type:"Button",props:{y:1076,x:310,width:130,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认进阶",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"List",props:{y:586,x:21,width:707,"var":"materials",spaceY:20,height:399},child:[{type:"PropCellSimple",props:{name:"render",runtime:"ui.model.pops.PropCellSimpleUI"}}]}]},t}(Qw),HT=function(e){function t(){this.buyA=null,this.position=null,this.nature=null,this.buyB=null,this.buyC=null,t.__super.call(this)}o(t,"ui.model.TowerShopPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Box",props:{y:219,x:96,width:554,"var":"buyA",height:306},child:[{type:"Image",props:{y:0,x:0,width:553,skin:"comp/bg.png",height:306,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:25,x:175,width:203,text:"40级套装材料",styleSkin:"comp/label.png",name:"name",height:31,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:60,x:154,width:246,text:"威望：4",styleSkin:"comp/label.png",name:"costCoin",height:30,color:"#f4eb13",align:"center",fontSize:26}},{type:"Button",props:{y:220,x:296,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"ComboBox",props:{y:159,x:177,width:100,"var":"position",skin:"comp/combobox.png",sizeGrid:"7,27,8,12",selectedIndex:0,labels:" 武器, 防具, 饰品",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"TextInput",props:{y:135,x:388,width:60,type:"number",text:"1",skin:"comp/textinput.png",sizeGrid:"9,12,8,20",name:"count",height:40,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:140,x:307,text:"数量：",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"ComboBox",props:{y:101,x:177,width:100,"var":"nature",skin:"comp/combobox.png",sizeGrid:"7,27,8,12",selectedIndex:-1,labels:"  金,  木,  水,  火,  土",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Text",props:{y:171,x:103,text:"部位：",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Text",props:{y:112,x:102,text:"五行：",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:219,x:154,width:100,stateNum:2,skin:"comp/button.png",name:"btnSure",label:"兑换",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:219,x:682,width:554,"var":"buyB",height:308},child:[{type:"Image",props:{y:0,x:0,width:553,skin:"comp/bg.png",height:308,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:27,x:179,width:196,text:"40级套装材料",styleSkin:"comp/label.png",name:"name",height:46,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:63,x:161,width:232,text:"威望：4",styleSkin:"comp/label.png",name:"costCoin",height:34,color:"#f4eb13",align:"center",fontSize:26}},{type:"Button",props:{y:222,x:153,width:100,stateNum:2,skin:"comp/button.png",name:"btnSure",label:"兑换",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"TextInput",props:{y:126,x:258,width:96,type:"number",text:"1",skin:"comp/textinput.png",sizeGrid:"9,12,8,20",name:"count",height:42,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:131,x:184,text:"数量：",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:222,x:294,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:219,x:1268,width:554,"var":"buyC",height:308},child:[{type:"Image",props:{y:0,x:0,width:553,skin:"comp/bg.png",height:308,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:27,x:179,width:196,text:"元宝兑换威望",styleSkin:"comp/label.png",name:"name",height:46,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:70,x:161,width:232,text:"3元宝=1威望",styleSkin:"comp/label.png",name:"costCoin",height:34,color:"#f4eb13",align:"center",fontSize:26}},{type:"Button",props:{y:222,x:164,width:100,stateNum:2,skin:"comp/button.png",name:"btnSure",label:"兑换",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"TextInput",props:{y:126,x:258,width:96,type:"number",text:"1",skin:"comp/textinput.png",sizeGrid:"9,12,8,20",name:"count",height:42,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:131,x:184,text:"数量：",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:222,x:305,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},t}(Qw),UT=function(e){function t(){this.act4=null,this.act1=null,this.act2=null,this.act3=null,this.act5=null,this.act6=null,this.act7=null,this.act8=null,this.act9=null,this.act10=null,this.act12=null,this.act13=null,this.act14=null,this.act15=null,this.act11=null,this.panelList=null,this.lbBegin=null,this.lbEnd=null,this.title=null,this.act100=null,this.act16=null,this.act17=null,this.act18=null,this.act19=null,this.act20=null,t.__super.call(this)}o(t,"ui.model.activity.ActivityTempUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:70,x:667,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Box",props:{y:1058,x:797,"var":"act4"},child:[{type:"Image",props:{y:31,width:740,visible:!0,skin:"ui/fangkuang.png",height:254,sizeGrid:"10,10,10,10"}},{type:"Text",props:{x:3,text:"活动?",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:54,x:274,text:"采集灵石翻倍",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:135,x:48,text:"在活动期间，采集灵石功能获得的灵石数量将翻倍！",fontSize:28,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:182,x:50,text:"注：地灵矿脉不受该活动加成",fontSize:28,color:"#fbf8f8",align:"center"}}]},{type:"Box",props:{y:96,x:797,"var":"act1"},child:[{type:"Image",props:{y:31,width:740,visible:!0,skin:"ui/fangkuang.png",height:254,sizeGrid:"10,10,10,10"}},{type:"Text",props:{x:3,text:"活动?",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:54,x:274,text:"双倍经验",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:135,x:48,text:"在活动期间，装备本经验双倍",fontSize:28,color:"#fbf8f8",align:"center"}}]},{type:"Box",props:{y:418,x:797,"var":"act2"},child:[{type:"Image",props:{y:31,width:740,visible:!0,skin:"ui/fangkuang.png",height:254,sizeGrid:"10,10,10,10"}},{type:"Text",props:{x:3,text:"活动?",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:54,x:274,text:"双倍掉落",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:135,x:48,text:"在活动期间，挂机本掉落双倍",fontSize:28,color:"#fbf8f8",align:"center"}}]},{type:"Box",props:{y:753,x:797,"var":"act3"},child:[{type:"Image",props:{y:31,width:740,visible:!0,skin:"ui/fangkuang.png",height:254,sizeGrid:"10,10,10,10"}},{type:"Text",props:{x:3,text:"活动？",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:54,x:242,text:"五行宫护灵符翻倍",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:135,x:25,text:"重置五行宫获得的护灵符翻倍，仅限活动期间哦~",fontSize:32,color:"#fbf8f8",align:"center"}}]},{type:"Box",props:{y:1377,x:797,"var":"act5"},child:[{type:"Image",props:{y:32,width:740,visible:!0,skin:"ui/fangkuang.png",height:300,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:51,x:187,width:334,text:"偶遇嫦娥",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:106,x:10,width:720,text:"\\n在森林探索中有机会偶遇嫦娥\\n并有可能获得嫦娥的月饼哦～",styleSkin:"comp/label.png",leading:20,height:152,fontSize:32,color:"#00dc24",align:"center"}},{type:"Text",props:{x:8,text:"活动？",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:110,x:1582,"var":"act6"},child:[{type:"Image",props:{y:43,x:0,width:740,visible:!0,skin:"ui/fangkuang.png",height:300,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:62,x:224,text:"组队本打boss掉宝箱",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:150,x:8,width:724,text:"感谢大家一直以来的陪伴，特在组队副本",leading:20,fontSize:26,color:"#c527ff",align:"center"}},{type:"Text",props:{y:209,x:10,width:720,text:"我们奉上宝箱福利，祝大家在新的一年运气爆棚！！",leading:20,fontSize:32,color:"#00dc24",align:"center"}},{type:"Text",props:{x:10,text:"活动？",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:489,x:1582,"var":"act7"},child:[{type:"Image",props:{y:29,width:740,visible:!0,skin:"ui/fangkuang.png",height:254,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:200,x:598,width:111,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",name:"btnExchange",labelSize:26,label:"兑换",height:50}},{type:"Text",props:{x:4,text:"活动二",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:42,x:290,text:"祝福大作战",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:81,x:11,width:724,text:"十一假期期间，通关组队副本有概率掉落祝福“国、庆、快、乐”\\n收集齐后可兑换元宝奖励",styleSkin:"comp/label.png",leading:5,height:66,fontSize:26,color:"#fbf8f8"}},{type:"Text",props:{y:157,x:22,text:"持有：",leading:5,fontSize:28,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:214,x:467,text:"200元宝",leading:5,fontSize:28,color:"#eedb0b",align:"center"}},{type:"Label",props:{y:157,x:231,width:98,text:"“庆”",styleSkin:"comp/label.png",name:"lbQin",leading:5,height:33,fontSize:26,color:"#e70626"}},{type:"Label",props:{y:157,x:104,width:98,text:"“国” ",styleSkin:"comp/label.png",name:"lbGuo",leading:5,height:33,fontSize:26,color:"#e70626"}},{type:"Label",props:{y:157,x:359,width:98,text:"“快”",styleSkin:"comp/label.png",name:"lbKuai",leading:5,height:33,fontSize:26,color:"#e70626"}},{type:"Label",props:{y:157,x:486,width:98,text:"“乐”",styleSkin:"comp/label.png",name:"lbLe",leading:5,height:33,fontSize:26,color:"#e70626"}}]},{type:"Box",props:{y:787,x:1582,"var":"act8"},child:[{type:"Image",props:{y:32,x:0,width:740,visible:!0,skin:"ui/fangkuang.png",height:300,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:51,x:224,text:"组队本打boss掉月饼",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:139,x:10,width:720,text:"嫦娥下凡，但是被一些妖兽抢走一些珍宝，需要你前去讨伐",leading:20,fontSize:26,color:"#c527ff",align:"center"}},{type:"Text",props:{y:198,x:10,width:720,text:"通关组队副本，有几率获得嫦娥的奖励：月饼",leading:20,fontSize:32,color:"#00dc24",align:"center"}},{type:"Text",props:{x:8,text:"活动二",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:1158,x:1582,"var":"act9"},child:[{type:"Image",props:{y:44,x:0,width:740,visible:!0,skin:"ui/fangkuang.png",height:286,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:210,x:281,width:178,stateNum:2,skin:"comp/button.png",name:"btnAward",label:"领取",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{x:20,text:"活动三",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:67,x:226,text:"充值任意金额领元宝",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:148,x:8,width:724,text:"在活动期间，每日充值任意金额，可领取100元宝",fontSize:32,color:"#fffc00",align:"center"}},{type:"Label",props:{y:213,x:266,width:208,text:"今日已领取",styleSkin:"comp/label.png",overflow:"visible",name:"lbBuyed",height:43,fontSize:32,color:"#0cd41c",bold:!0,align:"center"}},{type:"Text",props:{y:288,x:126,width:487,text:"小贴士：仅限当日领取，过期重置",fontSize:26,color:"#6b9eec",bottom:16,bold:!1,align:"center"}}]},{type:"Box",props:{y:105,x:-832,"var":"act10"},child:[{type:"Image",props:{y:35,width:740,visible:!0,skin:"ui/fangkuang.png",height:678,sizeGrid:"10,10,10,10"}},{type:"List",props:{y:101,x:15,width:715,spaceY:10,repeatY:7,repeatX:1,name:"goldenList",height:591},child:[{type:"Box",props:{y:0,x:0,width:731,name:"render",height:77},child:[{type:"Button",props:{y:3,x:457,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",name:"btnAward",labelSize:26,label:"领取元宝",height:56}},{type:"Button",props:{y:2,x:596,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",name:"btnAward2",labelSize:26,label:"领取宝箱",height:56}},{type:"Label",props:{y:15,x:451,width:248,text:"10/100",styleSkin:"comp/label.png",name:"lbAim",height:26,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:0,x:0,width:439,text:"需要：消耗100000元宝 \\n奖励：10000元宝  或 器灵宝箱*1",styleSkin:"comp/label.png",name:"info",leading:5,height:63,color:"#fbf8f8",align:"left",fontSize:26}}]}]},{type:"Text",props:{y:58,x:258,text:"你消耗我买单！",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:728,x:9,width:721,text:"小贴士：活动期间，消耗元宝越多，领取奖励越多;奖励元宝和宝箱二选一",styleSkin:"comp/label.png",name:"tips",height:20,fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Text",props:{x:10,text:"活动一",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:1356,x:-832,"var":"act12"},child:[{type:"Image",props:{y:32,width:740,visible:!0,skin:"ui/fangkuang.png",height:300,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:51,x:201,text:"挑战BOSS，击败年兽！",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:106,x:10,width:720,text:"活动内容：\\n挂机副本使用挑战BOSS后有概率出现年兽 \\n击败年兽后获得新春爆竹！",styleSkin:"comp/label.png",leading:20,height:152,fontSize:32,color:"#00dc24",align:"center"}},{type:"Text",props:{x:8,text:"活动一",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:1721,x:-832,"var":"act13"},child:[{type:"Image",props:{y:30,width:740,visible:!0,skin:"ui/fangkuang.png",height:254,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:203,x:267,width:205,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",name:"btnAward",labelSize:26,label:"领取红包",height:58}},{type:"Text",props:{y:53,x:290,text:"红包疯狂领",fontSize:32,color:"#e70626",align:"center"}},{type:"Label",props:{y:116,x:43,width:653,text:"在活动期间，每天可以领取一个红包\\n红包可开出100-200元宝。",styleSkin:"comp/label.png",leading:10,height:76,fontSize:28,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:211,x:270,width:208,text:"今日已领取",styleSkin:"comp/label.png",overflow:"visible",name:"lbBuyed",height:43,fontSize:32,color:"#0cd41c",bold:!0,align:"center"}},{type:"Text",props:{x:1,text:"活动三",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:104,x:-1650,"var":"act14"},child:[{type:"Image",props:{y:31,width:740,visible:!0,skin:"ui/fangkuang.png",height:692,sizeGrid:"10,10,10,10"}},{type:"Box",props:{y:132,x:96},child:[{type:"Text",props:{y:0,x:-75,text:"概率公示(两位小数)",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:0,x:168,text:"奖品内容",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Text",props:{x:495,text:"状态",fontSize:26,color:"#fbf8f8",align:"center"}}]},{type:"List",props:{y:165,x:96,width:547,spaceY:10,repeatY:10,name:"awards",height:356},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:0,x:0,width:99,text:"00.99%",styleSkin:"comp/label.png",name:"rate",color:"#fbf8f8",align:"right",fontSize:26}},{type:"Label",props:{y:0,x:167,width:299,text:"奖品内容",styleSkin:"comp/label.png",name:"info",height:26,color:"#fbf8f8",fontSize:26}},{type:"Label",props:{x:495,text:"状态",styleSkin:"comp/label.png",name:"state",color:"#fbf8f8",align:"center",fontSize:26}}]}]},{type:"Button",props:{y:578,x:281,width:178,stateNum:2,skin:"comp/button.png",name:"btnAward",label:"抽奖啦",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:54,x:135,text:"正月初五，喜迎财神，幸运大抽奖！",fontSize:32,color:"#c527ff",align:"center"}},{type:"Label",props:{y:643,x:11,text:"抽奖励时间：1月26日-1月27日\\n财神赐福，在春节活动期间，充值金额满足条件即可抽大奖",styleSkin:"comp/label.png",leading:10,fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:92,x:23,text:"注：抽奖在1月26日-1月27日开启，活动期间充值金额都会计算哦",fontSize:24,color:"#e70626",align:"center"}},{type:"Label",props:{y:545,x:110,width:520,text:"春节期活动间，累计再充值xx元即可再抽一次",styleSkin:"comp/label.png",name:"lbTimes",color:"#fbf8f8",align:"center",fontSize:26}},{type:"Text",props:{x:3,text:"活动六",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:894,x:-1650,"var":"act15"},child:[{type:"Image",props:{y:38,width:712,skin:"ui/fangkuang.png",height:316,sizeGrid:"10,10,10,10"}},{type:"Box",props:{y:107,x:50,width:625,name:"contentStone",height:207},child:[{type:"Button",props:{y:147,x:437,width:178,stateNum:2,skin:"comp/button.png",name:"btnPayStone2",label:"3999元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:75,x:437,width:178,stateNum:2,skin:"comp/button.png",name:"btnPayStone1",label:"648元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{x:437,width:178,stateNum:2,skin:"comp/button.png",name:"btnPayStone0",label:"98元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:14,x:0,underline:!0,text:"980元宝+2个红色仙品天籁石",styleSkin:"comp/label.png",overflow:"visible",name:"txtStone0",fontSize:28,color:"#0cd41c",align:"center"}},{type:"Label",props:{y:89,x:0,underline:!0,text:"6480元宝+15个红色仙品天籁石",styleSkin:"comp/label.png",overflow:"visible",name:"txtStone1",fontSize:28,color:"#fffc00",align:"center"}},{type:"Label",props:{y:161,x:0,underline:!0,text:"39990元宝+100个红色仙品天籁石",styleSkin:"comp/label.png",overflow:"visible",name:"txtStone2",fontSize:28,color:"#e70626",align:"center"}}]},{type:"Label",props:{y:52,x:244,text:"天籁石特惠专场",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#e70626",bold:!0,align:"left"}},{type:"Label",props:{y:177,x:252,width:208,text:"今日已购买",styleSkin:"comp/label.png",overflow:"visible",name:"lbBuyed",height:43,fontSize:32,color:"#0cd41c",bold:!0,align:"center"}},{type:"Text",props:{y:318,x:112,width:487,text:"小贴士：活动期间每日只能三选一购买一次",fontSize:26,color:"#6b9eec",bottom:20,bold:!1,align:"center"}},{type:"Text",props:{x:1,text:"活动二",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:895,x:-832,"var":"act11"},child:[{type:"Image",props:{y:32,width:740,visible:!0,skin:"ui/fangkuang.png",height:379,sizeGrid:"10,10,10,10"}},{type:"List",props:{y:115,x:9,width:717,spaceY:15,spaceX:15,repeatY:1,repeatX:8,name:"dailySign",height:193,hScrollBarSkin:"comp/hscroll.png"},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Button",props:{y:100,x:23,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",name:"btnAward",labelSize:26,label:"领  取",height:56}},{type:"Label",props:{y:17,x:47,width:77,text:"第1天",styleSkin:"comp/label.png",name:"day",height:27,color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:114,x:46,width:77,text:"已领取",styleSkin:"comp/label.png",name:"lbState",height:27,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:55,x:1,width:169,text:"副本组队令*3",styleSkin:"comp/label.png",name:"awards",height:43,color:"#fbf8f8",align:"center",fontSize:26}}]}]},{
type:"Text",props:{y:51,x:258,text:"好礼天天送",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:345,x:9,width:721,text:"小贴士：活动期间登录即可领取,只能领取当日奖励",styleSkin:"comp/label.png",name:"tips",height:20,fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Text",props:{x:8,text:"活动一",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Panel",props:{y:227,x:10,width:750,"var":"panelList",vScrollBarSkin:"comp/vscroll.png",height:1098}},{type:"Label",props:{y:116,x:3,width:580,"var":"lbBegin",text:"活动开始时间：2020年10月1日0点",styleSkin:"comp/label.png",height:37,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:148,x:3,width:580,"var":"lbEnd",text:"活动结束时间：2020年10月8日23点59分",styleSkin:"comp/label.png",height:37,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:70,x:213,width:323,"var":"title",text:"节日活动",fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"Image",props:{y:182,skin:"ui/toplink.png",right:15,left:19}},{type:"Box",props:{y:1324,x:-1650,"var":"act100"},child:[{type:"Image",props:{y:31,width:740,visible:!0,skin:"ui/fangkuang.png",height:254,sizeGrid:"10,10,10,10"}},{type:"Text",props:{x:3,text:"活动?",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:54,x:290,text:"礼包激活码",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:232,x:50,text:"注：礼包码活动期间仅可激活一次",fontSize:28,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:110,x:39,wordWrap:!0,width:661,text:"在活动期间，使用礼包码“端午安康 ”\\n可领取奖励：伏魔之精*50个，灵珠碎片*10，元宝*88",styleSkin:"comp/label.png",name:"info",leading:10,height:114,fontSize:26,color:"#28c612",align:"left"}}]},{type:"Box",props:{y:1661,x:-1650,width:740,"var":"act16",height:423},child:[{type:"Image",props:{y:32,width:740,visible:!0,skin:"ui/fangkuang.png",height:379,sizeGrid:"10,10,10,10"}},{type:"List",props:{y:115,x:9,width:717,spaceY:15,spaceX:15,repeatY:1,repeatX:8,name:"dailySign",hScrollBarSkin:"comp/hscroll.png"},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Button",props:{y:150,x:23,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",name:"btnAward",labelSize:26,label:"领  取",height:56}},{type:"Label",props:{y:17,x:47,width:77,text:"第1天",styleSkin:"comp/label.png",name:"day",height:27,color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:164,x:46,width:77,text:"已领取",styleSkin:"comp/label.png",name:"lbState",height:27,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:55,x:1,width:169,text:"副本组队令*3",styleSkin:"comp/label.png",name:"awards",height:25,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:85,x:1,width:169,text:"铜币10万",styleSkin:"comp/label.png",name:"awards1",height:25,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:115,x:0,width:169,text:"铜币10万",styleSkin:"comp/label.png",name:"awards2",height:25,color:"#fbf8f8",align:"center",fontSize:26}}]}]},{type:"Text",props:{y:51,x:306,text:"七天有礼",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:365,x:9,width:721,text:"小贴士：活动期间登录即可领取，每天一次，领完为止",styleSkin:"comp/label.png",name:"tips",height:20,fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Text",props:{x:8,text:"活动一",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:2127,x:-1650,"var":"act17"},child:[{type:"Image",props:{y:31,x:0,width:740,visible:!0,skin:"ui/fangkuang.png",height:169,sizeGrid:"10,10,10,10"}},{type:"Text",props:{x:3,text:"活动三",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:54,x:306,text:"双倍充值",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:94,x:23,wordWrap:!0,width:694,text:"活动期间增加一次双倍充值的机会",styleSkin:"comp/label.png",leading:10,height:34,fontSize:26,color:"#fffc00",align:"center"}},{type:"Label",props:{y:130,x:23,wordWrap:!0,width:694,text:"（仅活动期间有效，648以上需要累充条件）",styleSkin:"comp/label.png",name:"info",leading:10,height:57,fontSize:26,color:"#fffc00",align:"center"}}]},{type:"Box",props:{y:2127,x:-832,"var":"act18"},child:[{type:"Image",props:{y:31,x:0,width:740,visible:!0,skin:"ui/fangkuang.png",height:169,sizeGrid:"10,10,10,10"}},{type:"Text",props:{x:3,text:"活动三",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:54,x:290,text:"高额充值双倍，作费",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:114,x:23,wordWrap:!0,width:694,text:"累充达到4288可享受1298双倍1次\\n累充达到9888可享受3999双倍1次",styleSkin:"comp/label.png",name:"info",leading:10,height:68,fontSize:26,color:"#fffc00",align:"center"}}]},{type:"Box",props:{y:1754,x:797,"var":"act19"},child:[{type:"Image",props:{y:32,width:740,visible:!0,skin:"ui/fangkuang.png",height:300,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:51,x:187,width:334,text:"偶遇圣诞老人",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:106,x:10,width:720,text:"\\n在森林探索中有机会遇到圣诞老人\\n并有可能获得他的圣诞果哦～",styleSkin:"comp/label.png",leading:20,height:152,fontSize:32,color:"#00dc24",align:"center"}},{type:"Text",props:{x:8,text:"活动？",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Box",props:{y:2336,x:-1650,"var":"act20"},child:[{type:"Image",props:{y:31,x:0,width:740,visible:!0,skin:"ui/fangkuang.png",height:169,sizeGrid:"10,10,10,10"}},{type:"Text",props:{x:3,text:"活动三",name:"lbNo",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:54,x:306,text:"双倍充值",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:94,x:23,wordWrap:!0,width:694,text:"活动期间增加一次双倍充值的机会",styleSkin:"comp/label.png",leading:10,height:34,fontSize:26,color:"#fffc00",align:"center"}},{type:"Label",props:{y:130,x:23,wordWrap:!0,width:694,text:"（动期间有效，仅限648以内）",styleSkin:"comp/label.png",name:"info",leading:10,height:57,fontSize:26,color:"#fffc00",align:"center"}}]}]},t}(Qw),zT=function(e){function t(){this.libao=null,this.goldenList=null,this.tips=null,this.title=null,this.score=null,this.description=null,this.timeTips=null,t.__super.call(this)}o(t,"ui.model.activity.ActivityWeekUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:60,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:67}},{type:"Box",props:{y:338,x:25,width:700,height:869},child:[{type:"Box",props:{y:0,x:0,width:700,"var":"libao",height:110},child:[{type:"Image",props:{width:700,visible:!0,skin:"ui/fangkuang.png",height:110,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:21,x:166,styleSkin:"comp/label.png",name:"lbCount",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:21,x:35,text:"每日限购",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"HTMLDivElement",props:{y:62,x:35,width:430,name:"content",innerHTML:"htmlText",height:26}},{type:"Button",props:{y:23,width:180,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",right:28,name:"btnAward",labelSize:26,height:56}}]},{type:"List",props:{y:125,x:0,width:700,"var":"goldenList",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:745},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:110},child:[{type:"Image",props:{width:700,visible:!0,skin:"ui/fangkuang.png",height:110,sizeGrid:"10,10,10,10"}},{type:"Label",props:{x:563,top:35,text:"已领取",styleSkin:"comp/label.png",name:"lbState",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:21,x:35,text:"消耗",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:57,x:35,text:"奖励",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"HTMLDivElement",props:{y:21,x:109,width:440,name:"content",innerHTML:"htmlText",height:26}},{type:"HTMLDivElement",props:{y:56,x:109,width:440,name:"award",innerHTML:"htmlText",height:26}},{type:"Button",props:{y:23,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",right:20,name:"btnAward",labelSize:26,label:"领  取",height:56}}]}]}]},{type:"Label",props:{x:16,wordWrap:!0,width:715,"var":"tips",text:"小贴士：活动到期后积分将清零，注意合理分配哦～称号若重复拥有，将直接获得500元宝",styleSkin:"comp/label.png",leading:5,fontSize:24,color:"#6b9eec",bottom:30,bold:!0,align:"center"}},{type:"Label",props:{y:82,x:213,width:323,"var":"title",styleSkin:"comp/label.png",height:36,fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"Label",props:{y:275,x:25,"var":"score",styleSkin:"comp/label.png",fontSize:26,color:"#fffc00"}},{type:"HTMLDivElement",props:{y:170,x:25,width:700,"var":"description",innerHTML:"消耗紫色天籁石将获得积分，积分可兑换以下奖励，必须从上往下依次兑换。消耗天籁石级别依次获得10积分（精品），20积分（无暇），45积分（完美），150积分（仙品）活动到期后将清零。",height:87}},{type:"Label",props:{y:306,x:25,"var":"timeTips",styleSkin:"comp/label.png",fontSize:26,color:"#fffc00"}},{type:"Image",props:{y:132,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),WT=function(e){function t(){this.act1=null,this.btnPayStone2=null,this.btnPayStone1=null,this.btnPayStone0=null,this.txtStone2=null,this.lbBuyed=null,t.__super.call(this)}o(t,"ui.model.activity.ActivityLimitUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1344},child:[{type:"Button",props:{y:40,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Text",props:{y:1262,x:17,width:715,text:"小贴士：活动会不定期开启，可不要错过哦～",fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Text",props:{y:70,x:213,width:323,text:"仙品天籁石特惠",fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Box",props:{y:183,x:19,"var":"act1"},child:[{type:"Image",props:{y:38,width:712,skin:"ui/fangkuang.png",height:316,sizeGrid:"10,10,10,10"}},{type:"Box",props:{y:79,x:50,width:625,name:"contentStone",height:207},child:[{type:"Button",props:{y:147,x:437,width:178,"var":"btnPayStone2",stateNum:2,skin:"comp/button.png",name:"btnPayStone2",label:"3999元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:75,x:437,width:178,"var":"btnPayStone1",stateNum:2,skin:"comp/button.png",name:"btnPayStone1",label:"648元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{x:437,width:178,"var":"btnPayStone0",stateNum:2,skin:"comp/button.png",name:"btnPayStone0",label:"98元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:14,x:0,underline:!0,text:"980元宝+2个红色仙品天籁石",styleSkin:"comp/label.png",overflow:"visible",name:"txtStone0",fontSize:28,color:"#0cd41c",align:"center"}},{type:"Label",props:{y:89,x:0,underline:!0,text:"6480元宝+15个红色仙品天籁石",styleSkin:"comp/label.png",overflow:"visible",name:"txtStone1",fontSize:28,color:"#fffc00",align:"center"}},{type:"Label",props:{y:161,x:0,"var":"txtStone2",underline:!0,text:"39990元宝+100个红色仙品天籁石",styleSkin:"comp/label.png",overflow:"visible",name:"txtStone2",fontSize:28,color:"#e70626",align:"center"}}]},{type:"Label",props:{y:164,x:476,width:208,"var":"lbBuyed",text:"今日已购买",styleSkin:"comp/label.png",overflow:"visible",name:"lbBuyed",height:43,fontSize:32,color:"#0cd41c",bold:!0,align:"center"}},{type:"Text",props:{y:318,x:34,width:643,text:"小贴士：活动当天仅可选择购买一次",height:26,fontSize:26,color:"#6b9eec",bottom:10,bold:!1,align:"center"}}]},{type:"Text",props:{y:1286,x:1,width:747,text:"完成每周消耗活动（灵石大王、天籁至尊、灵珠转世），将重置开启当前活动。",height:20,fontSize:20,color:"#6b9eec",bold:!0,align:"center"}}]},t}(Qw),YT=function(e){function t(){this.goldenList=null,this.tips=null,t.__super.call(this)}o(t,"ui.model.activity.Activity7DayUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1344},child:[{type:"Button",props:{y:40,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Box",props:{y:234,x:25,width:700,height:985},child:[{type:"List",props:{y:0,x:0,width:700,"var":"goldenList",vScrollBarSkin:" ",spaceY:10,repeatY:7,repeatX:1,height:982},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:176},child:[{type:"Image",props:{width:700,visible:!0,skin:"ui/fangkuang.png",height:176,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:72,x:574,top:72,text:"已领取",styleSkin:"comp/label.png",name:"lbState",height:26,fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{x:302,top:13,text:"第一天",styleSkin:"comp/label.png",name:"title",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:62,x:43,text:"目标",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:98,x:43,text:"奖励",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:134,x:43,text:"进度",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"HTMLDivElement",props:{y:62,x:117,width:576,name:"content",innerHTML:"htmlText",height:26}},{type:"HTMLDivElement",props:{y:97,x:117,width:450,name:"award",innerHTML:"htmlText",height:26}},{type:"HTMLDivElement",props:{y:132,x:117,width:450,name:"progress",innerHTML:"htmlText",height:26}},{type:"Button",props:{y:60,x:556,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",right:20,name:"btnAward",labelSize:26,label:"领  取",height:56}}]}]}]},{type:"Text",props:{y:1262,x:16,width:715,text:"小贴士：活动目标会按建角后的天数来开启，可不要错过哦～",fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Text",props:{y:1299,x:16,width:715,text:"活动有效期为10天，过期后活动目标自动消失。",fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Label",props:{y:169.5,x:26,"var":"tips",styleSkin:"comp/label.png",color:"#ef4117",bold:!0,fontSize:26}},{type:"Text",props:{y:70,x:213,width:323,text:"七天乐",fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"Text",props:{y:203.5,x:23,text:"（活动只要在活动期限内完成即可，不指定某一天完成）",fontSize:24,color:"#fffc00"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),qT=function(e){function t(){this.paytotal=null,this.title=null,t.__super.call(this)}o(t,"ui.model.activity.ActivityPaytotalUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:170,x:15,width:720,"var":"paytotal",vScrollBarSkin:" ",spaceY:15,height:1100},child:[{type:"Box",props:{y:0,x:0,width:721,name:"render",height:414},child:[{type:"Image",props:{y:0,x:0,width:719,skin:"ui/fangkuang.png",height:413,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:15,x:282,text:"累计充值998",styleSkin:"comp/label.png",name:"title",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:373,x:186,width:328,text:"当前充值：100/998",styleSkin:"comp/label.png",name:"paytotal",height:28,fontSize:28,color:"#fbf8f8",align:"center"}},{type:"HTMLDivElement",props:{y:59,x:7,width:706,styleSkin:"comp/html.png",name:"info",height:302}},{type:"Button",props:{y:348,x:553,width:133,stateNum:2,skin:"comp/button.png",name:"btnGet",label:"我要充值",height:53,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Label",props:{y:70,x:223,width:323,"var":"title",text:"累计充值返利活动",styleSkin:"comp/label.png",height:36,fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),KT=function(e){function t(){this.tips=null,this.actList=null,t.__super.call(this)}o(t,"ui.model.activity.ActivityWeekPassUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:60,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:67}},{type:"Label",props:{y:1175,x:17,wordWrap:!0,width:715,"var":"tips",text:"小贴士：提前开新一轮后积分将清零，商城灵珠返利活动、天籁石特惠将开启",styleSkin:"comp/label.png",leading:5,fontSize:24,color:"#6b9eec",bottom:130,bold:!0,align:"center"}},{type:"List",props:{y:237,x:15,width:720,"var":"actList",spaceY:50,repeatY:3,height:820},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{width:720,visible:!0,skin:"ui/fangkuang.png",height:230,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:15,x:198,width:323,text:"灵石大王",styleSkin:"comp/label.png",name:"name",height:36,fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"HTMLDivElement",props:{y:57,x:10,width:700,name:"info",height:87}},{type:"Button",props:{y:156,x:298,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",right:294,name:"btnSure",labelSize:26,label:"选  择 ",height:56}}]}]},{type:"Label",props:{y:130,x:82,width:585,text:"当前活动已完成，您可以提前选择下一轮",styleSkin:"comp/label.png",height:36,fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"Image",props:{y:180,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),XT=function(e){function t(){this.goldenList=null,this.tips=null,this.score=null,this.timeTips=null,this.tabBar=null,this.btnAward=null,t.__super.call(this)}o(t,"ui.model.activity.ActivityInvestUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:70,x:223,width:323,text:"投资礼包",fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"Button",props:{y:40,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Box",props:{y:324,x:25,width:700},child:[{type:"List",props:{y:0,x:0,width:700,"var":"goldenList",vScrollBarSkin:" ",spaceY:7,repeatY:11,repeatX:1,height:815},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:110},child:[{type:"Image",props:{width:700,visible:!0,skin:"ui/fangkuang.png",height:110,sizeGrid:"10,10,10,10"}},{type:"Label",props:{x:563,top:35,text:"已领取",styleSkin:"comp/label.png",name:"lbState",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:21,x:35,text:"目标",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:57,x:35,text:"奖励",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"HTMLDivElement",props:{y:21,x:109,width:440,name:"content",innerHTML:"htmlText",height:26}},{type:"HTMLDivElement",props:{y:56,x:109,width:440,name:"award",innerHTML:"htmlText",height:26}},{type:"Button",props:{y:23,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",right:20,name:"btnAward",labelSize:26,label:"领  取",height:56}}]}]}]},{type:"Label",props:{y:1275,x:17,wordWrap:!0,width:715,"var":"tips",text:"小贴士：投资后最高可返还1000元宝，且无时间限制。",styleSkin:"comp/label.png",leading:5,fontSize:24,color:"#fffc00",bold:!0,align:"center"}},{type:"Label",props:{y:238,x:27,"var":"score",styleSkin:"comp/label.png",fontSize:26,color:"#fffc00"}},{type:"Label",props:{y:280,x:27,"var":"timeTips",styleSkin:"comp/label.png",fontSize:26,color:"#fffc00"}},{type:"Tab",props:{y:170,x:30,"var":"tabBar",stateNum:2,space:10,skin:"comp/tab.png",labels:"投资一,投资二,投资三",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}},{type:"Button",props:{y:1166,width:200,"var":"btnAward",stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",right:275,labelSize:30,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:80}}]},t}(Qw),QT=function(e){function t(){this.goldenList=null,this.btnAward=null,this.timeTips=null,t.__super.call(this)}o(t,"ui.model.activity.ActivityPayWeekUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Box",props:{y:207,x:25,width:700},child:[{type:"List",props:{y:0,x:0,width:700,"var":"goldenList",vScrollBarSkin:" ",spaceY:7,repeatY:11,repeatX:1,height:815},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:110},child:[{type:"Image",props:{width:700,visible:!0,skin:"ui/fangkuang.png",height:110,sizeGrid:"10,10,10,10"}},{type:"Label",props:{x:472,width:215,top:35,text:"已领取",styleSkin:"comp/label.png",name:"lbState",height:32,fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:21,x:35,text:"目标",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:57,x:35,text:"奖励",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"HTMLDivElement",props:{y:21,x:109,width:440,name:"content",innerHTML:"htmlText",height:26}},{type:"HTMLDivElement",props:{y:56,x:109,width:440,name:"award",innerHTML:"htmlText",height:26}},{type:"Button",props:{y:23,width:124,stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",right:50,name:"btnAward",labelSize:26,label:"领  取",height:56}}]}]}]},{type:"Button",props:{y:1042,x:275,width:200,"var":"btnAward",stateNum:2,skin:"comp/tab_small.png",sizeGrid:"4,4,4,4",labelSize:30,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",label:"充值30元购买",height:80}},{type:"Text",props:{y:70,x:213,width:323,text:"每周礼包",fontSize:32,color:"#f9f4f4",bold:!0,align:"center"}},{type:"Text",props:{y:1178,x:26,width:715,text:"小贴士：累计返还价值约100元的的超额反馈礼包",fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Label",props:{y:169.5,x:23,"var":"timeTips",styleSkin:"comp/label.png",fontSize:30,color:"#fffc00"}},{type:"Text",props:{y:1213,x:26,width:715,text:"领取完7日礼包后，可继续购买重置",fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),jT=function(e){function t(){this.list=null,this.lbEmpty=null,this.bar=null,this.btnReadAll=null,this.btnDelAll=null,t.__super.call(this)}o(t,"ui.model.mail.MailListUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:311,text:"邮件列表",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:235,x:25,width:700,"var":"list",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:872},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:103},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:101,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:19,x:12,width:540,name:"info",height:72}},{type:"Label",props:{y:56,x:503,width:177,text:"7天前",styleSkin:"comp/label.png",name:"sendtime",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:15,x:503,width:177,text:"2天后过期",styleSkin:"comp/label.png",name:"effect",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"right"}}]}]},{type:"Label",props:{y:606,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Tab",props:{y:170,x:25,width:331,"var":"bar",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"全部,未读",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:26,stateNum:2}},{type:"Text",props:{y:1272,x:50,text:"小贴示：邮件过期后将自动清理，注意领取未读邮件奖励",fontSize:26,color:"#6b9eec",bottom:30,bold:!1,align:"center"}},{type:"Button",props:{y:1150,x:429,width:130,"var":"btnReadAll",stateNum:2,skin:"comp/button.png",label:"一键领取",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1150,x:199,width:130,"var":"btnDelAll",stateNum:2,skin:"comp/button.png",label:"一键删除",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),ZT=function(e){function t(){this.title=null,this.content=null,this.awards=null,this.btnSure=null,t.__super.call(this)}o(t,"ui.model.mail.MailDetailUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:311,text:"邮件详情",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:170,x:25,width:700,skin:"comp/bg.png",height:158,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:320,x:25,width:700,skin:"comp/bg.png",height:610,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:880,x:25,width:700,skin:"comp/bg.png",height:167,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:228,x:50,width:650,"var":"title",height:80}},{type:"Text",props:{y:190,x:50,width:152,text:"标题：",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"HTMLDivElement",props:{y:381,x:50,width:650,"var":"content",height:393}},{type:"Text",props:{y:340,x:50,width:152,text:"内容：",fontSize:25,color:"#fbf8f8",bold:!0,align:"left"}},{type:"HTMLDivElement",props:{y:945,x:50,width:650,"var":"awards",height:80}},{type:"Text",props:{y:900,x:50,width:152,text:"附件：",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1072,x:310,width:130,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"领取附件",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1154,x:50,text:"小贴示：邮件过期后将自动清理，注意领取未读邮件奖励",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Qw),JT=function(e){function t(){this.btnFrame=null,this.pSelect=null,this.btnWX=null,this.btnALI=null,this.paying=null,this.loging=null,t.__super.call(this)}o(t,"ui.model.payment.PaySelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:60,x:172,width:410,"var":"btnFrame",underline:!0,text:"\b遇到问题，重新尝试",styleSkin:"comp/label.png",name:"btnFrame",mouseEnabled:!0,height:34,fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"Box",props:{y:404,x:91,"var":"pSelect"},child:[{type:"Image",props:{width:568,visible:!0,skin:"comp/bg.png",height:400,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:4,x:494,stateNum:1,skin:"comp/btn_close.png",name:"close",mouseThrough:!1,mouseEnabled:!0},child:[{type:"Rect",props:{y:-4,x:-9,width:85,renderType:"hit",lineWidth:1,height:86,fillColor:"#ff0000"}}]},{type:"Image",props:{y:258,x:187,width:129,"var":"btnWX",skin:"ui/buy0.png",pivotY:78,pivotX:64,name:"btnWX",mouseThrough:!1,mouseEnabled:!0,height:120},child:[{type:"Rect",props:{y:-82,x:-47,width:192,renderType:"hit",lineWidth:1,height:285,fillColor:"#ff0000"}}]},{type:"Image",props:{y:256,x:402,width:129,"var":"btnALI",skin:"ui/buy1.png",scaleY:1,scaleX:1,pivotY:76,pivotX:66,name:"btnALI",mouseThrough:!1,mouseEnabled:!0,height:120},child:[{type:"Rect",props:{y:-81,x:-35,width:188,renderType:"hit",lineWidth:1,height:281,fillColor:"#ff0000"}}]},{type:"Text",props:{y:25,x:135,width:297,text:"选择方式",fontSize:28,color:"#ffffff",bold:!0,align:"center"}}]},{type:"Button",props:{y:312,x:237,width:276,"var":"paying",stateNum:2,skin:"comp/button.png",name:"paying",labelColors:"#cc0000",label:"已完成支付",height:70,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:162,x:299,"var":"loging"},child:[{type:"Clip",props:{x:33,skin:"ui/clip_log.png",clipX:5,autoPlay:!0}},{type:"Text",props:{y:78,width:151,text:"网络加载中...",fontSize:20,color:"#ffffff",bold:!0,align:"center"}}]}]},t}(Qw),$T=function(e){function t(){this.positionBar=null,this.propsList=null,this.silverIcon=null,this.costSilver=null,this.submit=null,this.ntc=null,this.lbInfo=null,t.__super.call(this)}o(t,"ui.model.SmithyEquipUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:77,x:335,text:"锻造",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:60,x:664,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Tab",props:{y:167,x:23,"var":"positionBar",stateNum:2,space:10,skin:"comp/tab_small.png",labels:"武器,衣服,头盔,鞋子,护腕,项链,戒指",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:24}},{type:"Text",props:{y:229,x:25,width:141,text:"消耗材料：",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:270,x:25,width:702,"var":"propsList",spaceY:15,repeatY:6,repeatX:1,height:779},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Box",props:{y:0,x:0,width:701,name:"putinMate",height:115},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:115,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:24,x:283,width:135,stateNum:2,skin:"comp/button.png",label:"放入材料",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Clip",props:{y:156,x:409,width:162,skin:"create/clip_select.png",sizeGrid:"21,18,17,21",pivotY:145,pivotX:138,name:"lightR",interval:100,height:88,clipX:15,autoPlay:!0}}]},{type:"PropCellSimple",props:{name:"prop",runtime:"ui.model.pops.PropCellSimpleUI"}}]}]},{type:"Text",props:{y:1069,x:25,text:"花费铜币:",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:1064,x:147,"var":"silverIcon",skin:"ui/tongbi.png"}},{type:"Label",props:{y:1069,x:186,"var":"costSilver",text:"99999",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1057,x:307,"var":"submit",stateNum:2,skin:"comp/button.png",label:"开始锻造",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1057,x:621,width:106,"var":"ntc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1138,x:121,"var":"lbInfo",text:"小贴示：放入五行相生材料更容易出现极品哦",styleSkin:"comp/label.png",color:"#6b9eec",align:"center",fontSize:26}}]},t}(Qw),eI=function(e){function t(){this.graphList=null,this.emptyInfo=null,t.__super.call(this)}o(t,"ui.model.GraphSelectPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:170,x:10,width:730,"var":"graphList",vScrollBarSkin:" ",spaceY:10,height:1124},child:[{type:"PropCell",props:{name:"render",runtime:"ui.model.pops.PropCellUI"}}]},{type:"Text",props:{y:70,x:298,width:153,text:"可选图纸",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{top:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Box",props:{y:383,x:111,width:568,"var":"emptyInfo",height:391},child:[{type:"Text",props:{y:57,x:0,wordWrap:!0,width:611,text:"    1.需要同品质，同等级的图纸作为提升材料。",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:129,x:0,wordWrap:!0,width:695,text:"    2.图纸可在组队副本获得",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:200,x:0,wordWrap:!0,width:656,text:"    3.材料不足您还可能使用天籁石进行提升。",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{wordWrap:!0,width:295,text:"小提示：",leading:4,fontSize:26,color:"#fffc00",bold:!0,align:"left"}}]},{type:"Image",props:{top:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),tI=function(e){function t(){this.pets=null,this.btnFresh=null,this.btnFreshAuto=null,this.txtAlert=null,
this.txtFreshCD=null,this.ntc=null,this.btnFruit=null,t.__super.call(this)}o(t,"ui.model.PetShopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:170,x:12,width:732,"var":"pets",spaceY:15,spaceX:15,repeatY:3,repeatX:2,height:724},child:[{type:"Box",props:{y:0,x:0,width:356,name:"render",height:230},child:[{type:"Clip",props:{y:0,x:0,width:355,skin:"ui/clip_fangkuang.png",sizeGrid:"8,7,10,27",name:"bg",height:229,clipY:6}},{type:"Clip",props:{y:-4,x:201,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:7,x:125,width:82,text:"金甲虫",styleSkin:"comp/label.png",name:"name",height:35,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:41,x:92,width:141,text:"资质18",styleSkin:"comp/label.png",name:"quality",height:33,fontSize:24,color:"#f6f6f6",align:"center"}},{type:"Label",props:{y:81,x:16,wordWrap:!0,width:329,text:"一种常见的灵宠，全身金色，像穿着一身金甲",styleSkin:"comp/label.png",name:"desc",leading:1,height:85,fontSize:22,color:"#46aec8",align:"left"}},{type:"Button",props:{y:160,x:135,width:90,stateNum:2,skin:"comp/button.png",name:"takeBtn",label:"抓取",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Button",props:{y:911,x:254,width:120,"var":"btnFresh",stateNum:2,skin:"comp/button.png",label:"手动寻找",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:911,x:421,width:120,"var":"btnFreshAuto",stateNum:2,skin:"comp/button.png",label:"自动寻找",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1042,x:180,width:413,visible:!1,"var":"txtAlert",styleSkin:"comp/label.png",height:41,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:989,x:258,width:228,"var":"txtFreshCD",text:"寻找时间   --:--:--",styleSkin:"comp/label.png",height:36,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:70,x:279,width:192,text:"灵宠乐园",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Label",props:{y:1093,x:98,width:554,text:"小贴士：自动寻找有保底设置哦\\n紫宠只能通过【自动寻找】-【选择紫宠】中获得",styleSkin:"comp/label.png",leading:3,height:63,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:85,x:23,width:122,"var":"ntc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"概率公示",height:39,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:911,x:32,width:174,"var":"btnFruit",stateNum:2,skin:"comp/button.png",label:"龙涎果寻找",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:134,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),iI=function(e){function t(){this.sure=null,this.cancel=null,this.lbNum=null,this.lbTitle=null,this.nameLb=null,this.count=null,this.num=null,t.__super.call(this)}o(t,"ui.model.ConfirmUseUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:302,x:25,width:700,skin:"comp/bg.png",height:400,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:590,x:241,width:100,"var":"sure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:590,x:408,width:100,"var":"cancel",stateNum:2,skin:"comp/button.png",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:475,x:197,"var":"lbNum",text:"使用数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:473,x:396,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:320,x:320,width:110,"var":"lbTitle",text:"使用物品",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Label",props:{y:408,x:261,width:227,"var":"nameLb",text:"??",styleSkin:"comp/label.png",height:35,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:475,x:455,width:163,"var":"count",text:"持有：999个",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:470,x:321,width:78,"var":"num",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}}]},t}(Qw),nI=function(e){function t(){this.sure=null,this.cancel=null,this.silver=null,this.nameLb=null,this.nature=null,this.count=null,this.num=null,this.doubleCfm=null,t.__super.call(this)}o(t,"ui.model.ConfirmNumUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:302,x:25,width:700,skin:"comp/bg.png",height:400,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:599,x:243,width:100,"var":"sure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:599,x:410,width:100,"var":"cancel",stateNum:2,skin:"comp/button.png",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:448,x:101,text:"出售数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:446,x:300,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:499,x:100,width:110,text:"获得铜币：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:501,x:224,width:116,"var":"silver",text:99999999,styleSkin:"comp/label.png",height:26,fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:378,x:101,"var":"nameLb",text:"??",styleSkin:"comp/label.png",height:35,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:369,x:156,"var":"nature",skin:"ui/clip_wuxing.png",index:1,clipY:5}},{type:"Label",props:{y:448,x:359,width:163,"var":"count",text:"持有：999个",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:443,x:225,width:78,"var":"num",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"CheckBox",props:{y:541,x:295,width:133,"var":"doubleCfm",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"再次确认",height:31}}]},t}(Qw),oI=function(e){function t(){this.txtName=null,this.btnAward=null,this.panelReports=null,this.clearReport=null,this.grpA=null,this.grpB=null,t.__super.call(this)}o(t,"ui.model.FightingLiveTeamUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,skin:"ui/bgHp2.png",height:1334},child:[{type:"Label",props:{y:10,x:287,width:176,"var":"txtName",text:"锦鸡副本",styleSkin:"comp/label.png",height:42,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:1246,x:141,width:100,"var":"btnAward",stateNum:2,skin:"comp/button.png",label:"战利品",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1246,x:509,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"返回",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Panel",props:{y:690,x:17,width:716,"var":"panelReports",vScrollBarSkin:"comp/vscroll.png",height:548}},{type:"Image",props:{y:55,x:13,width:717,skin:"ui/fangkuang.png",height:624,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:56,x:372,width:4,skin:"ui/vline_white.png",height:618,sizeGrid:"5,0,5,0"}},{type:"Button",props:{y:697,x:600,width:120,"var":"clearReport",stateNum:2,skin:"comp/button.png",label:"清空战报",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"List",props:{y:71,x:63,width:259,"var":"grpA",spaceY:10,repeatY:3,height:604},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:38,x:0,text:"生命",styleSkin:"comp/label.png",name:"lbHp",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:6,x:4,text:"??",styleSkin:"comp/label.png",name:"name",height:26,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:71,x:0,text:"法力",styleSkin:"comp/label.png",name:"lbMp",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:103,x:0,text:"速度",styleSkin:"comp/label.png",name:"lbSpeed",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Box",props:{y:75,x:78,name:"mp"},child:[{type:"Image",props:{skin:"ui/bg_0.png",sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgMp.png",name:"bgPress"}}]},{type:"Box",props:{y:107,x:78,name:"speed"},child:[{type:"Image",props:{y:0,x:0,width:199,skin:"ui/bg_0.png",height:24}},{type:"Clip",props:{y:3,x:3,width:193,skin:"ui/clip_speed.png",name:"bgPress",clipX:6}}]},{type:"Clip",props:{y:0,x:106,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:6,x:153,width:68,text:"Lv.3",styleSkin:"comp/label.png",name:"level",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Box",props:{y:42,x:78,width:199,name:"hp",height:24},child:[{type:"Image",props:{skin:"ui/bg_0.png"}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgHp.png",name:"bgRed"}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgHp2.png",name:"bgYellow"}}]},{type:"Sprite",props:{y:142,x:-36,width:66,name:"buff",height:24}},{type:"Sprite",props:{y:170,x:-36,width:66,name:"debuff",height:24}}]}]},{type:"List",props:{y:70,x:391,width:320,"var":"grpB",spaceY:10,repeatY:3,height:606},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:7,x:29,text:"锦鸡",styleSkin:"comp/label.png",name:"name",height:36,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{x:118,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:38,x:253,text:"生命",styleSkin:"comp/label.png",name:"lbHp",fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:71,x:253,text:"法力",styleSkin:"comp/label.png",name:"lbMp",fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Label",props:{y:103,x:253,text:"速度",styleSkin:"comp/label.png",name:"lbSpeed",fontSize:32,color:"#fbf8f8",bold:!0,align:"right"}},{type:"Box",props:{y:42,x:233,scaleX:-1,name:"hp"},child:[{type:"Image",props:{y:0,x:-1,width:199,skin:"ui/bg_0.png",height:24}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgHp.png",name:"bgRed"}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgHp2.png",name:"bgYellow"}}]},{type:"Box",props:{y:75,x:233,scaleX:-1,name:"mp"},child:[{type:"Image",props:{y:0,x:0,width:199,skin:"ui/bg_0.png",height:24}},{type:"Image",props:{y:3,x:3,width:193,skin:"ui/bgMp.png",name:"bgPress"}}]},{type:"Box",props:{y:107,x:233,scaleX:-1,name:"speed"},child:[{type:"Image",props:{y:0,x:0,width:199,skin:"ui/bg_0.png",height:24}},{type:"Clip",props:{y:3,x:3,width:193,skin:"ui/clip_speed.png",name:"bgPress",clipX:6}}]},{type:"Label",props:{y:7,x:166,width:63,text:"Lv.3",styleSkin:"comp/label.png",name:"level",height:34,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Sprite",props:{y:142,x:-12,width:66,name:"buff",height:24}},{type:"Sprite",props:{y:170,x:-12,width:66,name:"debuff",height:24}}]}]}]},t}(Qw),sI=function(e){function t(){this.btnSign=null,this.btnNtc=null,this.btnAuthorize=null,this.lbInfo=null,this.txtAuthorizer=null,this.btnTakeExt=null,this.lbExt=null,t.__super.call(this)}o(t,"ui.model.alliance.alca.AlcaSignupUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Image",props:{y:170,x:25,width:700,skin:"ui/bg_windos.png",height:933,sizeGrid:"30,30,30,30"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Button",props:{y:347,x:273,width:204,"var":"btnSign",stateNum:2,skin:"comp/button.png",labelColors:"#00dc24",label:"现在报名",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:657,x:62,width:155,"var":"btnNtc",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"详细说明",height:56,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:648,x:273,width:204,stateNum:2,skin:"comp/button.png",name:"btnLastLogs",labelColors:"#00dc24",label:"上期战况",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:978,x:273,width:204,"var":"btnAuthorize",stateNum:2,skin:"comp/button.png",name:"btnAuthorize",labelColors:"#00dc24",label:"指定授权人",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:70,x:303,width:164,text:"宗门战",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1273,x:9,wordWrap:!0,width:731,text:"小贴士：参加宗门战可获得大量宗门资源",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:229,x:93,wordWrap:!0,width:564,"var":"lbInfo",styleSkin:"comp/label.png",leading:5,height:62,color:"#00dc24",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:920,x:227,width:265,"var":"txtAuthorizer",text:"布阵授权：无",styleSkin:"comp/label.png",height:36,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:466,x:45,wordWrap:!0,width:667,text:"1、每周一0时至周四下午18:00可报名参与宗门战；\\n2、宗门人数不得少于10人；\\n3、参赛开始匹配对手后宗门不可解散、不可退出和踢人;\\n4、比赛结束后宗门所有成员可领取特殊奖励（密阁之钥：胜5个，败2个）。",styleSkin:"comp/label.png",leading:5,height:163,fontSize:26,color:"#ffffff",bold:!1,align:"left"}},{type:"Text",props:{y:427,x:45,text:"说明：",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Button",props:{y:801,x:273,width:204,"var":"btnTakeExt",stateNum:2,skin:"comp/button.png",name:"btnTakeExt",labelColors:"#00dc24",label:"领取特殊奖励",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:757,x:155,width:439,"var":"lbExt",text:"特殊奖励：密阁之钥2个(败）",styleSkin:"comp/label.png",height:36,fontSize:26,color:"#ffffff",bold:!0,align:"center"}}]},t}(Qw),rI=function(e){function t(){this.list=null,this.nameFilter=null,this.lbEmpty=null,this.infoMine=null,t.__super.call(this)}o(t,"ui.model.alliance.alca.AlcaAwardLogUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:248,width:254,text:"宗门战况",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:380,x:25,width:700,"var":"list",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:850},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:82},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:21,x:25,width:650,name:"info",height:45}}]}]},{type:"Text",props:{y:1270,x:15,wordWrap:!0,width:731,text:"小贴士：仅显示最近参与宗门战的比赛结果",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:332,x:328,text:"筛选过滤",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:324,x:444,width:281,"var":"nameFilter",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",right:25,prompt:"宗门名",maxChars:3,height:40,fontSize:24,bold:!0,align:"center"}},{type:"Label",props:{y:602,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:170,x:25,width:129,text:"我的宗门：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:332,x:25,width:129,text:"所有宗门：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Box",props:{y:213,x:25,width:700},child:[{type:"Image",props:{width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:21,x:25,width:650,"var":"infoMine",height:45}}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),aI=function(e){function t(){this.grpSelf=null,this.groupM=null,this.eliteM=null,this.scoreM=null,this.grpEnemy=null,this.scoreE=null,this.eliteE=null,this.groupE=null,this.bar=null,this.btnNtc=null,this.txtTitle=null,this.eliteClock=null,this.eliteLb=null,t.__super.call(this)}o(t,"ui.model.alliance.alca.AlcaFightUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Box",props:{y:42,x:905,"var":"grpSelf"},child:[{type:"List",props:{y:310,width:748,"var":"groupM",spaceY:20,spaceX:30,repeatY:4,repeatX:2,height:976},child:[{type:"Box",props:{y:0,x:0,width:359,name:"render",height:229},child:[{type:"Image",props:{y:42,x:0,width:358,skin:"ui/fangkuang.png",height:187,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:4,x:84,width:191,text:"进攻1组 ",styleSkin:"comp/label.png",name:"tName",height:32,fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"List",props:{y:83,x:12,width:336,spaceY:5,repeatY:3,name:"member",height:148},child:[{type:"Box",props:{y:0,x:0,width:335,name:"render",height:44},child:[{type:"Label",props:{y:10,x:24,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:101,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:146,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Button",props:{y:134,x:248,width:91,stateNum:2,skin:"comp/button.png",name:"btnVideo",label:"录像",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:79,x:248,width:91,stateNum:2,skin:"comp/button.png",name:"btnAttack",label:"出击",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:54,x:128,width:103,text:"【胜利】",styleSkin:"comp/label.png",name:"tStat",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Label",props:{y:12,x:5,width:83,text:"鼓舞+1",styleSkin:"comp/label.png",name:"tDrug",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"left"}}]}]},{type:"Box",props:{y:81,x:197,"var":"eliteM"},child:[{type:"Image",props:{y:42,width:378,skin:"ui/fangkuang.png",height:187,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:0,x:68,width:242,text:"精英组",styleSkin:"comp/label.png",name:"tName",height:32,fontSize:32,color:"#c527ff",bold:!0,align:"center"}},{type:"List",props:{y:79,x:19,width:340,spaceY:5,repeatY:3,repeatX:1,name:"member",height:142},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:10,x:40,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:117,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:162,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Button",props:{y:113,x:270,width:91,stateNum:2,skin:"comp/button.png",name:"btnVideo",label:"录像",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:55,x:137,width:103,text:"【胜利】",styleSkin:"comp/label.png",name:"tStat",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Label",props:{y:8,x:25,width:83,text:"鼓舞+1",styleSkin:"comp/label.png",name:"tDrug",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"left"}}]},{type:"Label",props:{y:40,x:204,width:339,"var":"scoreM",text:"我方积分300",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#00dc24",bold:!0,align:"center"}}]},{type:"Box",props:{y:68,x:0,"var":"grpEnemy"},child:[{type:"Label",props:{y:16,x:204,width:339,"var":"scoreE",text:"敌方积分300",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"Box",props:{y:58,x:194,"var":"eliteE"},child:[{type:"Image",props:{y:0,width:378,skin:"ui/fangkuang.png",height:187,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:190,x:79,width:219,text:"精英组",styleSkin:"comp/label.png",name:"tName",height:32,fontSize:32,color:"#c527ff",bold:!0,align:"center"}},{type:"List",props:{y:6,x:26,width:340,spaceY:5,repeatY:3,repeatX:1,name:"member",height:157},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:10,x:40,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:117,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:162,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Label",props:{y:155,x:137,width:103,text:"【胜利】",styleSkin:"comp/label.png",name:"tStat",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Label",props:{y:190,x:15,width:83,text:"鼓舞+1",styleSkin:"comp/label.png",name:"tDrug",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"left"}}]},{type:"List",props:{y:284,width:748,"var":"groupE",spaceY:20,spaceX:30,repeatY:4,repeatX:2,height:976},child:[{type:"Box",props:{y:0,x:0,width:359,name:"render",height:229},child:[{type:"Image",props:{y:0,x:0,width:358,skin:"ui/fangkuang.png",height:187,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:194,x:71,width:217,text:"进攻1组 ",styleSkin:"comp/label.png",name:"tName",height:32,fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"List",props:{y:7,x:12,width:336,spaceY:5,repeatY:3,name:"member",height:148},child:[{type:"Box",props:{y:0,x:0,width:335,name:"render",height:44},child:[{type:"Label",props:{y:10,x:40,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:117,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:162,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Label",props:{y:155,x:128,width:103,text:"【胜利】",styleSkin:"comp/label.png",name:"tStat",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Label",props:{y:194,x:5,width:83,text:"鼓舞+1",styleSkin:"comp/label.png",name:"tDrug",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Button",props:{y:69,x:258,width:91,stateNum:2,skin:"comp/button.png",name:"btnAttackFast",label:"进攻",height:44,sizeGrid:"4,4,4,4",labelSize:26}}]}]}]},{type:"Tab",props:{y:55,x:5,width:175,"var":"bar",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:0,labels:"我方,敌方",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:24}},{type:"Button",props:{y:58,x:665,width:63,stateNum:1,skin:"comp/btn_close.png",name:"close",height:63}},{type:"Button",props:{y:198,x:587,width:155,"var":"btnNtc",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"规则说明",height:56,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:49,x:190,width:470,"var":"txtTitle",text:"《破天宗》 对战 《苍穹宗》",styleSkin:"comp/label.png",height:36,fontSize:32,color:"#0084ff",bold:!0,align:"center"}},{type:"Label",props:{y:230,x:26,width:141,"var":"eliteClock",text:"00:00:00",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fffc00",bold:!0,align:"center"}},{type:"Label",props:{y:188,x:8,width:178,"var":"eliteLb",text:"精英组下轮",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#e70626",bold:!0,align:"center"}}]},t}(Qw),lI=function(e){function t(){this.list=null,this.tbFilter=null,t.__super.call(this)}o(t,"ui.model.alliance.alca.AlcaLineupSelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"成员布阵",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:307,x:25,width:700,"var":"list",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:966},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:82},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:28,x:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:22,x:87,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:28,x:132,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:18,x:582,width:91,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"确定",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:30,x:337,width:184,text:"未上阵",styleSkin:"comp/label.png",name:"state",height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:26,x:230,text:"鼓舞+1",styleSkin:"comp/label.png",name:"drug",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Box",props:{y:228,x:25,width:700},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:320,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:85,width:158,text:"成员信息",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:31,x:371,width:113,text:"状态",pivotY:5,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:4,x:526,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:595,width:86,text:"操作",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Tab",props:{y:170,x:25,width:331,"var":"tbFilter",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"未上阵,全部成员",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:26,stateNum:2}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),hI=function(e){function t(){this.list=null,this.btnClear=null,t.__super.call(this)}o(t,"ui.model.alliance.alca.LineupAuthorizeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"布阵授权",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:254,x:25,width:700,"var":"list",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:868},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:82},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:28,x:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:22,x:87,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:28,x:132,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:18,x:582,width:91,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"授权",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:30,x:337,width:184,text:"宗主",styleSkin:"comp/label.png",name:"title",height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]}]},{type:"Box",props:{y:170,x:25,width:700},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:320,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:26,x:85,width:158,text:"成员信息",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:26,x:371,width:113,text:"职位",pivotY:5,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:4,x:526,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:26,x:595,width:86,text:"操作",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Button",props:{y:1159,x:273,width:204,"var":"btnClear",stateNum:2,skin:"comp/button.png",labelColors:"#00dc24",label:"解除授权",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1270,x:15,wordWrap:!0,width:731,text:"小贴士：宗门战布阵权限默认只有宗主持有",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),cI=function(e){function t(){this.groupElite=null,this.groups=null,this.tbSide=null,this.lbClock=null,this.bClock=null,this.btnNtc=null,this.btnDrug=null,this.myDrug=null,this.txtTitle=null,t.__super.call(this)}o(t,"ui.model.alliance.alca.AlcaLineupUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:313,width:164,text:"宗门战布阵",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Box",props:{y:223,x:186,"var":"groupElite"},child:[{type:"Image",props:{y:42,width:378,skin:"ui/fangkuang.png",height:187,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:0,x:126,width:125,text:"精英组",styleSkin:"comp/label.png",name:"tName",height:32,fontSize:32,color:"#c527ff",bold:!0,align:"center"}},{type:"List",props:{y:57,x:26,width:340,spaceY:10,repeatY:3,name:"tMember",height:157},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:77,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:122,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:0,x:247,width:91,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"下阵",height:44,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Label",props:{y:10,x:290,width:83,text:"鼓舞+1",styleSkin:"comp/label.png",name:"tDrug",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"left"}}]},{type:"List",props:{y:463,x:0,width:748,"var":"groups",vScrollBarSkin:" ",spaceY:20,spaceX:30,height:672},child:[{type:"Box",props:{y:0,x:0,width:359,name:"render",height:229},child:[{type:"Image",props:{y:42,x:0,width:358,skin:"ui/fangkuang.png",height:187,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:4,x:118,width:142,text:"进攻1组",styleSkin:"comp/label.png",name:"tName",fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"List",props:{y:57,x:12,width:336,spaceY:10,repeatY:3,name:"tMember",height:157},child:[{type:"Box",props:{y:0,x:0,width:335,name:"render",height:44},child:[{type:"Label",props:{y:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:77,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:122,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:0,x:242,width:91,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"下阵",height:44,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Label",props:{y:12,x:274,width:83,text:"鼓舞+1",styleSkin:"comp/label.png",
name:"tDrug",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"left"}}]}]},{type:"Tab",props:{y:116,x:5,width:303,"var":"tbSide",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"我方布阵,敌方布阵",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:26,stateNum:2}},{type:"Label",props:{y:1166,x:94,width:285,"var":"lbClock",text:"开战倒计时：",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#e70626",bold:!0,align:"right"}},{type:"Label",props:{y:1166,x:379,width:284,"var":"bClock",text:"00:00:00",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fffc00",bold:!0,align:"left"}},{type:"Text",props:{y:1275,x:0,wordWrap:!0,width:749,text:"小贴士：注意战术搭配，每个成员可鼓舞5次，所在组鼓舞共享。",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:395,x:600,width:130,"var":"btnNtc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"规则说明",height:56,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1198,x:600,width:130,"var":"btnDrug",stateNum:2,skin:"comp/button.png",label:"鼓舞士气",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1220,x:143,width:463,"var":"myDrug",text:"我的鼓舞：1级（四维属性+1%）",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"Label",props:{y:180,x:114,width:522,"var":"txtTitle",text:"《破天宗》 对战 《苍穹宗》",styleSkin:"comp/label.png",height:36,fontSize:32,color:"#0084ff",bold:!0,align:"center"}}]},t}(Qw),uI=function(e){function t(){this.groupE=null,this.teamM=null,t.__super.call(this)}o(t,"ui.model.alliance.alca.AlcaAttackSelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:213,width:323,text:"选择敌方防守组",fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:170,x:10,width:730,"var":"groupE",spaceY:30,spaceX:30,height:498},child:[{type:"Box",props:{y:0,x:0,width:350,name:"render",height:229},child:[{type:"Image",props:{y:42,x:0,width:350,skin:"ui/fangkuang.png",height:187,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:4,x:63,width:232,text:"进攻1组",styleSkin:"comp/label.png",name:"tName",height:32,fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"List",props:{y:57,x:12,width:336,spaceY:10,repeatY:3,name:"member",height:157},child:[{type:"Box",props:{y:0,x:0,width:335,name:"render",height:44},child:[{type:"Label",props:{y:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:77,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:122,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Button",props:{y:107,x:232,width:91,stateNum:2,skin:"comp/button.png",name:"btnAttack",label:"进攻",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:12,x:253,width:103,text:"【胜利】",styleSkin:"comp/label.png",name:"tStat",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"right"}},{type:"Label",props:{y:12,x:5,width:83,text:"鼓舞+1",styleSkin:"comp/label.png",name:"tDrug",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"left"}}]}]},{type:"Box",props:{y:690,x:186,"var":"teamM"},child:[{type:"Image",props:{y:42,width:378,skin:"ui/fangkuang.png",height:187,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:0,x:41,width:296,text:"精英组",styleSkin:"comp/label.png",name:"tName",height:32,fontSize:32,color:"#c527ff",bold:!0,align:"center"}},{type:"List",props:{y:57,x:38,width:316,spaceY:10,repeatY:3,repeatX:1,name:"member",height:157},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:77,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:122,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Label",props:{y:8,x:263,width:103,text:"【胜利】",styleSkin:"comp/label.png",name:"tStat",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"right"}},{type:"Label",props:{y:8,x:15,width:83,text:"鼓舞+1",styleSkin:"comp/label.png",name:"tDrug",height:24,fontSize:24,color:"#ffffff",bold:!0,align:"left"}}]},{type:"Text",props:{y:938,x:213,width:323,text:"我方进攻组",fontSize:32,color:"#00dc24",bold:!0,align:"center"}},{type:"Text",props:{y:1141,x:0,wordWrap:!0,width:750,text:"小贴士：每个进攻组最多进攻两次，获胜则双方都将退出宗门战",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),dI=function(e){function t(){this.team=null,this.list=null,this.lbEmpty=null,t.__super.call(this)}o(t,"ui.model.alliance.alca.AlcaVideoLogsUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:257,width:235,text:"宗门矿场日志",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Label",props:{y:170,x:25,width:334,"var":"team",text:"采集1队",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#ffffff",bold:!0,align:"left"}},{type:"List",props:{y:223,x:25,width:700,"var":"list",vScrollBarSkin:" ",spaceY:15,height:1061},child:[{type:"Box",props:{width:700,name:"render",height:82},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:29,x:11,text:"2021-1-2 10:00:00",styleSkin:"comp/label.png",name:"ts",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Button",props:{y:18,width:91,stateNum:2,skin:"comp/button.png",right:10,name:"btnPlay",label:"播放",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:27,x:223,width:356,text:"进攻胜利，铁矿+300",styleSkin:"comp/label.png",name:"info",height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]}]},{type:"Label",props:{y:551,x:239,width:272,"var":"lbEmpty",text:"没有发生战斗",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),pI=function(e){function t(){this.btnFree=null,this.btn100=null,this.btn300=null,this.btnHis=null,this.lbToday=null,this.dFree=null,this.d100=null,this.d300=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceDonateUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Image",props:{y:170,x:25,width:700,skin:"ui/bg_windos.png",height:839,sizeGrid:"30,30,30,30"}},{type:"Button",props:{y:281,x:130,width:490,"var":"btnFree",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#00dc24",label:"普通进贡(免费)",height:151,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:530,x:130,width:490,"var":"btn100",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#e70626",label:"高级进贡(100元宝)",height:151,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:763,x:130,width:490,"var":"btn300",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c527ff",label:"豪华进贡(300元宝)",height:151,sizeGrid:"4,4,4,4"}},{type:"Text",props:{y:70,x:293,width:164,text:"宗门进贡",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:447,x:147,width:390,text:"可获得贡献：",fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:691,x:61,width:538,text:"可获得宗门资源：300、贡献：",fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:928,x:61,width:538,text:"可获得宗门资源：1000、贡献：",fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:1144,x:2,width:745,text:"小贴示：宗门进贡每日只能进贡一次,职位越高获得贡献越多",fontSize:26,color:"#6b9eec",bottom:30,bold:!1,align:"center"}},{type:"Button",props:{y:195,x:489,width:133,"var":"btnHis",stateNum:2,skin:"comp/button.png",label:"最近进贡",height:54,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:206,x:132,width:201,"var":"lbToday",text:"今日您已进贡",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"Label",props:{y:447,x:442,width:156,"var":"dFree",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#ffffff",bold:!0}},{type:"Label",props:{y:691,x:539,width:156,"var":"d100",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#ffffff",bold:!0}},{type:"Label",props:{y:928,x:538,width:156,"var":"d300",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#ffffff",bold:!0}}]},t}(Qw),fI=function(e){function t(){this.taskLv=null,this.qualityRate=null,this.finishCount=null,this.taskInfo=null,this.taskName=null,this.taskAward=null,this.btnLogs=null,this.btnFinish=null,this.btnFast=null,this.btnDrop=null,this.btnFresh=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceTaskUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"宗门任务",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:170,x:25,width:700,skin:"ui/bg_windos.png",height:787,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:337,x:25,width:700,skin:"ui/bg_windos.png",height:372,sizeGrid:"30,30,30,30"}},{type:"Text",props:{y:242,x:43,text:"任务品质概率:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:204,x:43,text:"任务堂等级:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:204,x:233,width:125,"var":"taskLv",text:"10",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"List",props:{y:284,x:43,width:654,"var":"qualityRate",repeatY:1,repeatX:6},child:[{type:"Label",props:{width:110,text:"10%白",styleSkin:"comp/label.png",name:"render",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}}]},{type:"Text",props:{y:362,x:43,text:"今日任务:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:362,x:185,width:125,"var":"finishCount",text:"1/5",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"HTMLDivElement",props:{y:554,x:43,width:660,"var":"taskInfo",name:"log",height:131}},{type:"Label",props:{y:409,x:185,width:184,"var":"taskName",text:"偷取资源",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:409,x:43,text:"当前任务:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:1108,x:5,wordWrap:!0,width:740,text:"小贴示：任务品质越高奖励越高\\n提升任务堂等级可提升高级任务出现的概率",styleSkin:"comp/label.png",leading:5,fontSize:26,color:"#6b9eec",bottom:30,bold:!1,align:"center"}},{type:"Label",props:{y:456,x:185,width:271,"var":"taskAward",text:"100贡献 100资源",styleSkin:"comp/label.png",height:34,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:456,x:43,text:"任务奖励:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:508,x:43,text:"任务描述:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Button",props:{y:191,x:558,width:133,"var":"btnLogs",stateNum:2,skin:"comp/button.png",label:"任务日志",height:54,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:746,x:181},child:[{type:"Button",props:{y:1,width:130,"var":"btnFinish",stateNum:2,skin:"comp/button.png",label:"去完成",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{x:258,width:130,"var":"btnFast",stateNum:2,skin:"comp/button.png",label:"快速完成",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Button",props:{y:861,x:439,width:130,"var":"btnDrop",stateNum:2,skin:"comp/button.png",label:"放弃",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:861,x:181,width:130,"var":"btnFresh",stateNum:2,skin:"comp/button.png",label:"刷新任务",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),_I=function(e){function t(){this.dName=null,this.logs=null,this.lbEmpty=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceTaskLogUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:170,x:18,"var":"dName",text:"最近日志（最近50条）",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:279,text:"宗门任务日志",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:215,x:25,width:700,"var":"logs",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:103},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:101,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:11,x:20,width:660,name:"log",height:80}}]}]},{type:"Label",props:{y:603,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),mI=function(e){function t(){this.items=null,this.lbDonate=null,t.__super.call(this)}o(t,"ui.model.alliance.shop.AllianceShopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:209,x:19,width:712,"var":"items",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:1050},child:[{type:"Box",props:{y:0,x:0,width:716,name:"render",height:188},child:[{type:"Image",props:{y:0,x:0,width:712,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:30,width:144,text:"??",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:61,x:30,wordWrap:!0,width:500,styleSkin:"comp/label.png",name:"desc",leading:5,height:104,fontSize:26,color:"#f4f6fb",align:"left"}},{type:"Button",props:{y:103,x:536,width:130,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:44,x:346,width:351,text:"单价：10贡献",styleSkin:"comp/label.png",overflow:"visible",name:"price",height:43,fontSize:32,color:"#f4b922",bold:!0,align:"right"}}]}]},{type:"Button",props:{y:40,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Text",props:{y:70,x:296,width:157,text:"宗门商店",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:170,x:25,text:"持有宗门贡献:",color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:170,x:207,width:163,"var":"lbDonate",text:"10",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),gI=function(e){function t(){this.list=null,this.titleDonate=null,this.lvMin=null,this.cbState=null,this.btnSave=null,this.btnApplys=null,this.notPower=null,this.ntc=null,this.tbRank=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceMemberUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"宗门成员",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:1117,x:5,width:740,skin:"ui/bg_windos.png",height:175,sizeGrid:"30,30,30,30"}},{type:"List",props:{y:319,x:5,width:740,"var":"list",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:771},child:[{type:"Box",props:{y:0,x:0,width:740,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:14,x:644,width:84,stateNum:2,skin:"comp/button.png",name:"btnTitle",label:"任命",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:33,x:314,width:119,text:"10000",styleSkin:"comp/label.png",pivotY:5,name:"donate",height:32,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:17,x:8,text:"??",styleSkin:"comp/label.png",name:"name",height:34,fontSize:24,color:"#f19e21",align:"left"}},{type:"Clip",props:{y:7,x:150,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Label",props:{y:17,x:207,width:71,text:"99级",styleSkin:"comp/label.png",name:"level",height:28,color:"#fbf8f8",align:"left",fontSize:26}},{type:"Label",props:{y:31,x:449,width:82,text:"宗主",styleSkin:"comp/label.png",pivotY:5,name:"title",height:32,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Button",props:{y:14,x:546,width:84,stateNum:2,skin:"comp/button.png",name:"btnKick",label:"踢出",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:49,x:4,width:231,text:"【在线】",styleSkin:"comp/label.png",name:"state",height:24,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:17,x:82,text:"『月』",styleSkin:"comp/label.png",name:"vip",color:"#fffc00",align:"left",fontSize:26}}]}]},{type:"Box",props:{y:235,x:5,width:740},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:301,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:85,width:158,text:"成员信息",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:1,x:444,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:316,width:113,"var":"titleDonate",text:"历史贡献",styleSkin:"comp/label.png",pivotY:5,height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:31,x:456,width:65,text:"职位",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:4,x:526,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:595,width:86,text:"操作",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Text",props:{y:1190,x:145,width:251,text:"级可申请加入宗门",fontSize:28,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:1183,x:29,width:80,"var":"lvMin",type:"number",text:"40",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:43,fontSize:28,bold:!0,align:"center"}},{type:"CheckBox",props:{y:1238,x:30,width:213,"var":"cbState",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#ffffff,#00dc24,#FFFFFF,#FFFFFF",labelBold:!0,label:"自动审批新成员",height:29}},{type:"Text",props:{y:1138,x:28,width:251,text:"宗派申请条件:",fontSize:32,color:"#ffffff",bold:!0,align:"left"}},{type:"Button",props:{y:1213,x:580,width:130,"var":"btnSave",stateNum:2,skin:"comp/button.png",label:"保存条件",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1138,x:580,width:130,"var":"btnApplys",stateNum:2,skin:"comp/button.png",label:"申请列表",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1138,x:247,width:158,"var":"notPower",text:"(无权修改)",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#e70626",bold:!0,align:"left"}},{type:"Button",props:{y:172,x:592,width:133,"var":"ntc",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4"}},{type:"Tab",props:{y:170,x:25,"var":"tbRank",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"历史贡献,今日资源",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26,stateNum:2}}]},t}(Qw),vI=function(e){function t(){this.list=null,t.__super.call(this)}o(t,"ui.model.alliance.boss.AlcBossPassRankUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:259,x:5,width:740,"var":"list",spaceY:10,repeatY:10,height:843},child:[{type:"Box",props:{y:0,x:0,width:740,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:28,x:92,width:392,text:"破天宗",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:28,x:501,width:232,text:"第1层",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:78,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:28,x:7,width:65,text:"1",styleSkin:"comp/label.png",pivotY:5,name:"dRank",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:493,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}}]}]},{type:"Text",props:{y:70,x:293,width:164,text:"通关排行",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:1272,x:2,width:745,text:"小贴示：宗门BOSS通关排行显示前十，排名定时刷新",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Box",props:{y:170,x:5,width:740},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:29,x:95,width:385,text:"宗门",pivotY:5,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:29,x:526,width:191,text:"最大通关",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:78,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:29,x:16,text:"排名",pivotY:5,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:492,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),yI=function(e){function t(){this.list=null,this.btnClear=null,t.__super.call(this)}o(t,"ui.model.alliance.boss.ResetBossAuthorizeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:214,width:322,text:"重置宗门BOSS授权",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:249,x:25,width:700,"var":"list",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:826},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:82},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:28,x:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:22,x:87,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:28,x:132,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:18,x:582,width:91,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"授权",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:30,x:337,width:184,text:"宗主",styleSkin:"comp/label.png",name:"title",height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]}]},{type:"Box",props:{y:170,x:25,width:700},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:320,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:85,width:158,text:"成员信息",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:31,x:371,width:113,text:"职位",pivotY:5,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:4,x:526,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:595,width:86,text:"操作",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Button",props:{y:1133,x:273,width:204,"var":"btnClear",stateNum:2,skin:"comp/button.png",labelColors:"#00dc24",label:"解除授权",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1270,x:15,wordWrap:!0,width:731,text:"小贴士：宗门BOSS重置权限默认只有宗主持有",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),bI=function(e){function t(){this.panelLogs=null,t.__super.call(this)}o(t,"ui.model.alliance.boss.AlcBossLogUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:70,x:298,width:154,text:"奖励记录",styleSkin:"comp/label.png",name:"lbTitle",fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Panel",props:{y:170,x:25,width:700,"var":"panelLogs",vScrollBarSkin:"comp/vscroll.png",height:1050}},{type:"Text",props:{y:1270,x:9,wordWrap:!0,width:731,text:"小贴士：记录最近的与您相关的宗门BOSS日志",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),EI=function(e){function t(){this.list=null,t.__super.call(this)}o(t,"ui.model.alliance.boss.AlcBossRankUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"伤害排行",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Box",props:{y:170,x:5,width:740},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:111,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:29,x:28,width:59,text:"名次",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:1,x:354,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:29,x:122,width:224,text:"玩家",pivotY:5,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:31,x:386,width:116,text:"造成伤害",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:4,x:536,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:546,width:181,text:"血量占比",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"List",props:{y:252,x:5,width:740,"var":"list",vScrollBarSkin:"comp/vscroll.png",spaceY:15,repeatX:1,height:973},child:[{type:"Box",props:{width:740,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:111,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:27,x:13,width:91,text:"第1名",styleSkin:"comp/label.png",pivotY:5,name:"dRank",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:1,x:354,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:29,x:122,width:224,text:"张三",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:31,x:386,width:116,text:"100万",styleSkin:"comp/label.png",pivotY:5,name:"dDmg",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:4,x:536,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:549,width:180,text:"10.1%",styleSkin:"comp/label.png",pivotY:5,name:"dPct",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:11,x:544,width:187,text:"【今日已挑战】",styleSkin:"comp/label.png",pivotY:5,name:"dfighted",height:22,fontSize:20,color:"#49e80a",align:"center"}}]}]},{type:"Text",props:{y:1273,x:4,wordWrap:!0,width:731,text:"小贴士：排名前3可获得额外奖励哦",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),xI=function(e){function t(){this.bossName=null,this.level=null,this.hp=null,this.times=null,this.nature=null,this.btnReset=null,this.maxPass=null,this.btnAuthorize=null,this.txtAuthorizer=null,this.lbAward=null,this.lbGold=null,this.lbPiece=null,this.lbResetCD=null,t.__super.call(this)}o(t,"ui.model.alliance.boss.AlcBossUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"宗门BOSS",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:170,x:25,width:700,skin:"ui/bg_windos.png",height:1050,sizeGrid:"30,30,30,30"}},{type:"Button",props:{y:501,x:466,width:204,stateNum:2,skin:"comp/button.png",name:"btnFight",labelColors:"#00dc24",label:"挑战",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:248,x:60,"var":"bossName",text:"凶兽：30级当康",styleSkin:"comp/label.png",color:"#e70626",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:313,x:543,width:140,stateNum:2,skin:"comp/button.png",name:"btnNtc",labelSize:30,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:60,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:195,x:60,width:221,"var":"level",text:"当前：第1层",styleSkin:"comp/label.png",height:32,color:"#00dc24",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:285,x:60,width:267,"var":"hp",text:"剩余血量：100%",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:332,x:60,width:267,"var":"times",text:"今日剩余挑战次数：1",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:501,x:80,width:204,stateNum:2,skin:"comp/button.png",name:"btnRank",labelColors:"#00dc24",label:"伤害排行",height:74,sizeGrid:"4,4,4,4",labelSize:26
}},{type:"Button",props:{y:624,x:80,width:204,stateNum:2,skin:"comp/button.png",name:"btnLogs",labelColors:"#00dc24",label:"奖励记录",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Clip",props:{y:241,x:265,width:40,"var":"nature",skin:"ui/clip_wuxing.png",index:1,height:40,clipY:5}},{type:"Text",props:{y:1270,x:9,wordWrap:!0,width:731,text:"小贴士：成员每日可挑战一次，击杀可获得丰厚奖励",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:232,x:543,width:140,stateNum:2,skin:"comp/button.png",name:"btnTop",labelColors:"#6b9eec, #32cc6b, #ff0000, #C0C0C0",label:"通关排行",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:624,x:466,width:204,"var":"btnReset",stateNum:2,skin:"comp/button.png",name:"btnReset",labelColors:"#e70626",label:"重置层数",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:195,x:458,width:290,"var":"maxPass",text:"最大通关：第1层",styleSkin:"comp/label.png",height:32,color:"#fffc00",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:746,x:467,width:204,"var":"btnAuthorize",stateNum:2,skin:"comp/button.png",name:"btnAuthorize",labelColors:"#00dc24",label:"指定授权人",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:765,x:86,width:265,"var":"txtAuthorizer",text:"重置授权：无",styleSkin:"comp/label.png",height:36,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:380,x:60,width:205,"var":"lbAward",text:"累积待领取奖励：",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:428,x:60,width:125,"var":"lbGold",text:"10000元宝",styleSkin:"comp/label.png",height:32,color:"#fffc00",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:428,x:211,width:187,"var":"lbPiece",text:"天籁石碎片*1",styleSkin:"comp/label.png",height:32,color:"#c527ff",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:399,x:543,width:140,stateNum:2,skin:"comp/button.png",name:"btnAward",labelColors:"#00dc24",label:"领取奖励",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:645,x:369,width:392,"var":"lbResetCD",text:"10天后可重置层数",styleSkin:"comp/label.png",height:36,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},t}(Qw),SI=function(e){function t(){this.dName=null,this.logs=null,this.lbEmpty=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceLogUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:170,x:25,width:152,"var":"dName",text:"最近进贡",styleSkin:"comp/label.png",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:324,text:"宗门日志",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:215,x:24,width:700,"var":"logs",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:103},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:101,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:11,x:20,width:660,name:"log",height:80}}]}]},{type:"Label",props:{y:603,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:170,x:131,width:164,text:"（最近30条）",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Qw),wI=function(e){function t(){this.lbNotice=null,this.txtNotice=null,this.btnSure=null,this.lbAlert=null,this.btnCancel=null,this.lbEmpty=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceNoticeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:324,text:"宗门公告",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:170,x:25,width:700,skin:"comp/bg.png",height:727,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:208,x:50,wordWrap:!0,width:650,"var":"lbNotice",text:"空空如也",styleSkin:"comp/label.png",leading:3,height:670,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextArea",props:{y:211,x:21,width:707,"var":"txtNotice",text:"编辑",skin:"comp/textarea.png",sizeGrid:"10,10,10,10",leading:5,height:686,fontSize:32,align:"center"}},{type:"Button",props:{y:990,x:305,width:140,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"保存修改",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1130,x:11,width:729,"var":"lbAlert",text:"小贴士：禁止使用非法违规字符，如违反规定将强制解散宗门。",styleSkin:"comp/label.png",leading:5,height:40,fontSize:26,color:"#e70626",bold:!1,align:"center"}},{type:"Button",props:{y:40,"var":"btnCancel",stateNum:1,skin:"comp/btn_close.png",right:25}},{type:"Label",props:{y:532,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),CI=function(e){function t(){this.list=null,this.tbFilter=null,t.__super.call(this)}o(t,"ui.model.alliance.alcm.AlcmLineupSelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:80,x:293,width:164,text:"矿场布阵",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:317,x:25,width:700,"var":"list",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:962},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:82},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:28,x:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:22,x:87,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:28,x:132,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:18,x:582,width:91,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"确定",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:30,x:337,width:184,text:"未上阵",styleSkin:"comp/label.png",name:"state",height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]}]},{type:"Box",props:{y:233,x:25,width:700},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:320,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:85,width:158,text:"成员信息",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:31,x:371,width:113,text:"状态",pivotY:5,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:4,x:526,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:31,x:595,width:86,text:"操作",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Tab",props:{y:170,x:25,width:331,"var":"tbFilter",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"未上阵,全部成员",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:26,stateNum:2}},{type:"Image",props:{y:130,x:10,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),TI=function(e){function t(){this.team=null,this.list=null,this.lbEmpty=null,t.__super.call(this)}o(t,"ui.model.alliance.alcm.AlcmVideoLogsUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:218,width:314,text:"宗门矿场日志",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Label",props:{y:170,x:25,width:334,"var":"team",text:"进攻1组 【胜利】",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#ffffff",bold:!0,align:"left"}},{type:"List",props:{y:223,x:15,width:720,"var":"list",vScrollBarSkin:" ",spaceY:15,height:1062},child:[{type:"Box",props:{width:720,name:"render",height:82},child:[{type:"Image",props:{y:0,x:0,width:720,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:18,width:91,stateNum:2,skin:"comp/button.png",right:10,name:"btnPlay",label:"播放",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"HTMLDivElement",props:{y:7,x:10,width:604,name:"log",height:67}}]}]},{type:"Label",props:{y:551,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),II=function(e){function t(){this.lbLevel=null,this.lbExp=null,this.lbNeedAlc=null,this.btnDonate=null,this.list=null,this.lbBox=null,this.btnGetBox=null,this.btnNtc=null,this.lbMax=null,this.btnGetBoxGold=null,t.__super.call(this)}o(t,"ui.model.alliance.alcm.AlcMineUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"宗门矿场",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,x:670,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Label",props:{y:170,x:50,"var":"lbLevel",text:"矿场等级：1",styleSkin:"comp/label.png",fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Text",props:{y:207,x:50,text:"矿场经验：",fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:207,x:185,width:152,"var":"lbExp",text:"100/300",styleSkin:"comp/label.png",height:26,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Label",props:{y:207,x:423,width:310,"var":"lbNeedAlc",text:"（升级需要宗门等级10）",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:246,x:68,width:155,"var":"btnDonate",stateNum:2,skin:"comp/button.png",labelSize:32,label:"捐献物品",height:56,sizeGrid:"4,4,4,4"}},{type:"Text",props:{y:316,x:25,wordWrap:!0,width:700,text:"小贴士：捐献物品增加矿场经验可提升矿场等级",leading:5,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"List",props:{y:356,x:20,width:710,"var":"list",spaceY:30,spaceX:10,repeatY:2,repeatX:2,height:741},child:[{type:"Box",props:{y:0,x:0,width:350,name:"render",height:365},child:[{type:"Image",props:{y:0,x:0,width:345,skin:"ui/fangkuang.png",height:365,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:120,x:0,width:345,skin:"ui/hline_white.png",sizeGrid:"0,5,0,5"}},{type:"Image",props:{y:293,x:0,width:345,skin:"ui/hline_white.png",height:3,sizeGrid:"0,5,0,5"}},{type:"Label",props:{y:8,x:10,width:325,text:"采集1队",styleSkin:"comp/label.png",name:"tName",height:32,fontSize:28,color:"#ffffff",bold:!0,align:"left"}},{type:"List",props:{y:130,x:10,width:324,spaceY:10,repeatY:3,name:"tMember",height:165},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:10,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:4,x:77,width:40,skin:"ui/clip_wuxing.png",name:"nature",index:1,height:40,clipY:5}},{type:"Label",props:{y:10,x:122,text:"Lv.99",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:0,x:227,width:90,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"下阵",height:44,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Label",props:{y:45,x:10,width:325,text:"采集铁矿：1000",styleSkin:"comp/label.png",name:"lbIron",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:81,x:10,width:325,text:"参与战斗：100",styleSkin:"comp/label.png",name:"lbFighted",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:309,x:238,width:90,stateNum:2,skin:"comp/button.png",name:"btnLog",label:"日志",height:44,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:189,x:15,width:317,text:"矿场等级达到1级开启",styleSkin:"comp/label.png",name:"lbNotOpen",height:32,fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"Label",props:{y:317,x:10,width:213,text:"每日20点结算奖励",styleSkin:"comp/label.png",name:"lbtips",height:32,color:"#6b9eec",bold:!0,fontSize:26}}]}]},{type:"Label",props:{y:1188,x:25,width:384,"var":"lbBox",text:"我的矿场宝箱：1 (今日10）",styleSkin:"comp/label.png",height:26,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Button",props:{y:1215,x:572,width:155,"var":"btnGetBox",stateNum:2,skin:"comp/button.png",labelSize:32,label:"领取",height:56,sizeGrid:"4,4,4,4"}},{type:"Text",props:{y:1280,x:46,wordWrap:!0,width:657,text:"     小贴士：矿场等级越高，可采集的铁矿越多，参与采集的队伍也越多。双倍领取特指今日获得的宝箱双倍",leading:5,height:50,fontSize:20,color:"#6b9eec",bold:!0,align:"center"}},{type:"Button",props:{y:246,x:492,width:155,"var":"btnNtc",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"规则说明",height:56,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:1147,x:25,width:700,"var":"lbMax",text:"每队最多可获得宗门宝箱10个（出战队员可额外多3个）",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:1215,x:380,width:155,"var":"btnGetBoxGold",stateNum:2,skin:"comp/button.png",labelSize:32,label:"双倍领取",height:56,sizeGrid:"4,4,4,4"}}]},t}(Qw),AI=function(e){function t(){this.list=null,this.confirm=null,this.emptTxt=null,this.filter=null,this.qualityFilter=null,this.typeFilter=null,this.lbQuality=null,this.natureFilter=null,this.lbNature=null,t.__super.call(this)}o(t,"ui.model.alliance.alcm.AlcmDonateUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:235,x:25,width:700,"var":"list",vScrollBarSkin:" ",spaceY:20,height:971},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:178},child:[{type:"PropCellSimple",props:{name:"props",runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"Button",props:{y:128,x:561,width:120,stateNum:2,skin:"comp/button.png",name:"btnDonate",label:"捐献",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:132,x:2,width:483,text:"每个：矿场经验+2，贡献+2",styleSkin:"comp/label.png",name:"lbPrice",height:36,color:"#fbf8f8",bold:!0,fontSize:26}}]}]},{type:"Text",props:{y:1240,x:13,wordWrap:!0,width:723,text:"     小贴士：捐献40级以上红特、紫色材料或天籁石可增加矿场经验和宗门贡献（材料和天籁石请优先用于提升个人属性）",leading:5,fontSize:26,color:"#6b9eec",bold:!0}},{type:"Box",props:{y:424,x:0,width:750,"var":"confirm",height:418},child:[{type:"Image",props:{y:0,x:0,width:750,skin:"comp/bg.png",height:418,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:338,x:228,width:100,stateNum:2,skin:"comp/button.png",name:"btnSure",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:338,x:395,width:100,stateNum:2,skin:"comp/button.png",name:"btnCancel",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:206,x:51,text:"捐献数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:204,x:250,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:257,x:50,width:158,text:"获得矿场经验：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:259,x:224,width:116,text:"10",styleSkin:"comp/label.png",name:"lbExp",height:26,fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:201,x:175,width:78,type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",name:"inputNum",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:23,x:224,width:301,text:"确认捐献",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:293,x:50,width:161,text:"获得宗门贡献：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:295,x:224,width:116,text:"10",styleSkin:"comp/label.png",name:"lbDonate",height:26,fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"PropCellSimple",props:{y:73,x:25,name:"props",runtime:"ui.model.pops.PropCellSimpleUI"}}]},{type:"Label",props:{y:588,x:312,width:126,"var":"emptTxt",text:"空空如也",styleSkin:"comp/label.png",height:44,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:70,x:224,width:301,text:"宗门矿场捐献",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Box",props:{y:170,x:25,"var":"filter"},child:[{type:"ComboBox",props:{y:0,x:257,width:110,"var":"qualityFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,红色,紫色",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"ComboBox",props:{y:0,x:65,width:110,"var":"typeFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,材料,天籁石",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Label",props:{y:10,x:193,width:69,"var":"lbQuality",text:"品质：",styleSkin:"comp/label.png",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:10,text:"类型：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"ComboBox",props:{y:0,x:456,width:110,"var":"natureFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,金系,木系,水系,火系,土系",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Label",props:{y:10,x:392,width:69,"var":"lbNature",text:"五行：",styleSkin:"comp/label.png",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),NI=function(e){function t(){this.talismans=null,this.props=null,this.equips=null,t.__super.call(this)}o(t,"ui.model.alliance.cell.AlcTaskSelectPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.TalismanCellUI",sC),Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.EquipCellUI",tC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:170,x:-824,width:740,"var":"talismans",vScrollBarSkin:" ",spaceY:10,height:1111},child:[{type:"Box",props:{name:"render",height:200},child:[{type:"TalismanCell",props:{name:"talisman",height:200,runtime:"ui.model.pops.TalismanCellUI"}},{type:"Button",props:{y:105,x:544,width:151,stateNum:2,skin:"comp/button.png",name:"btnOk",label:"交  纳",height:69,sizeGrid:"4,4,4,4",labelSize:26}},{type:"CheckBox",props:{y:118,x:356,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"ckDouble",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认上交",height:29}}]}]},{type:"List",props:{y:170,x:5,width:740,"var":"props",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:1111},child:[{type:"Box",props:{name:"render",height:200},child:[{type:"PropCell",props:{name:"prop",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:137,x:570,width:151,stateNum:2,skin:"comp/button.png",name:"btnOk",label:"交  纳",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"CheckBox",props:{y:144,x:372,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"ckDouble",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认上交",height:29}}]}]},{type:"Text",props:{y:70,x:230,width:290,text:"上交完成宗门任务",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:170,x:853,width:740,"var":"equips",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:1111},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"EquipCell",props:{name:"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:189,x:562,width:151,stateNum:2,skin:"comp/button.png",name:"btnOk",label:"交  纳",height:52,sizeGrid:"4,4,4,4",labelSize:26}},{type:"CheckBox",props:{y:198,x:364,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"ckDouble",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认上交",height:29}}]}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),PI=function(e){function t(){this.aName=null,this.doubleSure=null,this.btnSure=null,t.__super.call(this)}o(t,"ui.model.alliance.cell.ConfirmDisbandUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:166,x:293,width:164,text:"解散宗门",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:253,x:25,width:700,skin:"ui/fangkuang.png",height:360,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:308,x:392,"var":"aName",text:"破天宗",styleSkin:"comp/label.png",color:"#f19e21",bold:!0,fontSize:26}},{type:"Text",props:{y:308,x:252,text:"宗门名称",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"TextInput",props:{y:448,x:201,width:348,"var":"doubleSure",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"确认请输入 ‘解散’",height:52,fontSize:24,bold:!0,align:"center"}},{type:"Button",props:{y:531,x:181,width:152,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:531,x:417,width:152,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:390,x:142,width:465,text:"宗门解散后无法恢复，请您三思",pivotY:5,color:"#e70626",bold:!0,align:"center",fontSize:26}}]},t}(Qw),RI=function(e){function t(){this.sure=null,this.resource=null,this.nameLb=null,this.nature=null,this.count=null,this.num=null,this.donate=null,t.__super.call(this)}o(t,"ui.model.alliance.cell.ConfirmDonateUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:212,x:25,width:700,skin:"comp/bg.png",height:400,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:516,x:238,width:100,"var":"sure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:516,x:405,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:358,x:61,width:105,text:"贡献数量：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:356,x:260,text:"个",fontSize:24,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:410,x:60,width:110,text:"获得资源：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:410,x:184,width:116,"var":"resource",text:99999999,styleSkin:"comp/label.png",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:288,x:61,"var":"nameLb",text:"??",styleSkin:"comp/label.png",height:35,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Clip",props:{y:279,x:116,"var":"nature",skin:"ui/clip_wuxing.png",index:1,clipY:5}},{type:"Label",props:{y:358,x:319,width:163,"var":"count",text:"持有：999个",styleSkin:"comp/label.png",height:26,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:353,x:185,width:78,"var":"num",type:"number",text:"999",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",height:37,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:462,x:62,width:110,text:"获得贡献：",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:462,x:186,width:116,"var":"donate",text:99999999,styleSkin:"comp/label.png",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:231,x:293,width:164,text:"进贡物品",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}}]},t}(Qw),LI=function(e){function t(){this.donate=null,this.mName=null,this.nature=null,this.level=null,this.title=null,this.aimTitle=null,this.doubleSure=null,this.btnSure=null,t.__super.call(this)}o(t,"ui.model.alliance.cell.ApointTitlePopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:166,x:293,width:164,text:"成员任命",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:253,x:25,width:700,skin:"ui/fangkuang.png",height:360,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:332,x:181,width:82,"var":"donate",text:"10000",styleSkin:"comp/label.png",pivotY:5,height:32,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Label",props:{y:286,x:181,"var":"mName",text:"??",styleSkin:"comp/label.png",height:34,color:"#f19e21",bold:!0,fontSize:26}},{type:"Clip",props:{y:278,x:273,"var":"nature",skin:"ui/clip_wuxing.png",index:4,clipY:5}},{type:"Label",props:{y:286,x:330,width:71,"var":"level",text:"99级",styleSkin:"comp/label.png",height:28,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:375,x:181,width:82,"var":"title",text:"宗主",styleSkin:"comp/label.png",pivotY:5,height:32,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Text",props:{y:334,x:39,width:108,text:"成员贡献",pivotY:5,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:378,x:40,width:111,text:"当前职位",pivotY:5,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:290,x:41,width:110,text:"成员信息",pivotY:5,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:429,x:233,width:139,text:"任命新职位",pivotY:5,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"ComboBox",props:{y:410,x:381,width:155,"var":"aimTitle",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:1,labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"TextInput",props:{y:469,x:201,width:348,"var":"doubleSure",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"确认请输入 ‘让位’",height:52,fontSize:24,bold:!0,align:"center"}},{type:"Button",props:{y:539,x:181,width:152,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:539,x:417,width:152,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),OI=function(e){function t(){this.list=null,this.lbEmpty=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceApplyUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"申请列表",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:170,x:5,width:740,"var":"list",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:1050},child:[{type:"Box",props:{y:0,x:0,width:740,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:13,x:644,width:84,stateNum:2,skin:"comp/button.png",name:"btnIgnor",labelColors:"#e70626",label:"拒绝",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:18,x:17,text:"??",styleSkin:"comp/label.png",name:"name",height:34,color:"#f19e21",bold:!0,align:"left",fontSize:26}},{type:"Clip",props:{y:10,x:127,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Label",props:{y:18,x:184,text:"99级",styleSkin:"comp/label.png",name:"level",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:13,x:546,width:84,stateNum:2,skin:"comp/button.png",name:"btnAgree",labelColors:"#00dc24",label:"通过",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:18,x:262,text:"月卡",styleSkin:"comp/label.png",name:"vip",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}}]}]},{type:"Text",props:{y:1270,x:2,width:745,text:"小贴示：宗门加入申请条数有上限,请及时处理",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:416,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),MI=function(e){function t(){this.list=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceRankUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:259,x:5,width:740,"var":"list",spaceY:10,repeatY:10,repeatX:1,height:843},child:[{type:"Box",props:{y:0,x:0,width:740,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:28,x:92,width:335,text:"破天宗",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:659,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:28,x:668,width:65,text:"10/10",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:78,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:28,x:7,width:65,text:"1",styleSkin:"comp/label.png",pivotY:5,name:"dRank",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:434,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:28,x:443,width:211,styleSkin:"comp/label.png",pivotY:5,name:"dMaster",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}}]}]},{type:"Text",props:{y:70,x:293,width:164,text:"宗门排行",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:1144,x:4,width:742,text:"小贴示：排行显示前十，定时刷新；宗门人数非实时仅供参考",height:26,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Box",props:{y:170,x:5,width:740},child:[{type:"Image",props:{y:0,x:0,width:740,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:29,x:95,width:332,text:"宗门",pivotY:5,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:660,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:29,x:669,width:68,text:"成员",styleSkin:"comp/label.png",pivotY:5,name:"dNum",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:78,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:29,x:16,text:"排名",pivotY:5,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:3,x:432,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Text",
props:{y:29,x:444,width:214,text:"宗主",pivotY:5,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),DI=function(e){function t(){this.needDonate=null,this.btnLevelup=null,this.level=null,this.defense_c=null,this.mp_c=null,this.attack_c=null,this.hp_c=null,this.defense_n=null,this.mp_n=null,this.attack_n=null,this.hp_n=null,this.skills=null,this.hasDonate=null,this.bookLevel=null,this.needHeroLv=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceSkillUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"宗门功法",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:160,x:25,width:700,skin:"ui/bg_windos.png",height:375,sizeGrid:"30,30,30,30"}},{type:"Text",props:{y:250,x:69,text:"升级消耗贡献:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:250,x:259,width:125,"var":"needDonate",text:"100",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:547,x:281,width:188,"var":"btnLevelup",stateNum:2,skin:"comp/button.png",labelColors:"#00dc24",label:"升级功法",height:68,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:210,x:69,text:"当前功法等级:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:210,x:259,width:125,"var":"level",text:"10",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:407,x:121,text:"防御:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:485,x:121,text:"法力:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:407,x:234,width:125,"var":"defense_c",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:485,x:234,width:125,"var":"mp_c",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Text",props:{y:367,x:121,text:"攻击:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:367,x:234,width:125,"var":"attack_c",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Text",props:{y:446,x:121,text:"生命:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:446,x:234,width:125,"var":"hp_c",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Text",props:{y:328,x:211,text:"当前功法加成",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:407,x:464,width:125,"var":"defense_n",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:485,x:464,width:125,"var":"mp_n",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:367,x:464,width:125,"var":"attack_n",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:446,x:464,width:125,"var":"hp_n",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"center",fontSize:26}},{type:"Text",props:{y:328,x:451,text:"升级后功法加成",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"List",props:{y:626,x:16,width:716,"var":"skills",spaceY:5,repeatY:4,repeatX:1,height:663},child:[{type:"Box",props:{y:0,x:0,width:711,name:"render",height:162},child:[{type:"Image",props:{y:0,x:0,width:706,skin:"ui/fangkuang.png",height:158,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:19,text:"【怒斩问天】",styleSkin:"comp/label.png",name:"name1",fontSize:32,color:"#c18314",bold:!0,align:"center"}},{type:"Label",props:{y:16,x:511,text:"Lv.3",styleSkin:"comp/label.png",name:"level",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:92,x:586,width:100,stateNum:2,skin:"comp/button.png",name:"learnBtn",label:"学习",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:53,x:14,wordWrap:!0,width:678,text:"蓄力0.5秒，造成[150+50]%并附带[200+100]点伤害，眩晕2秒（若蓄力过程中被晕眩，技能释放失败",styleSkin:"comp/label.png",name:"info",leading:2,height:58,fontSize:22,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:14,x:310,text:"【剑破苍穹】",styleSkin:"comp/label.png",name:"name2",fontSize:32,color:"#99ec4d",bold:!0,align:"center"}},{type:"Label",props:{y:112,x:70,text:"宗门功法25级可学习",styleSkin:"comp/label.png",name:"lbNeedLv",fontSize:24,color:"#64e2c9",bold:!0,align:"left"}},{type:"Text",props:{y:14,x:226,text:"进阶",fontSize:32,color:"#ffffff",bold:!0,align:"center"}},{type:"Label",props:{y:112,x:303,width:102,text:"消耗铜币",styleSkin:"comp/label.png",name:"lbSilver",height:29,fontSize:24,color:"#84ec6b",bold:!0,align:"left"}},{type:"Label",props:{y:112,x:444,width:101,text:1e5,styleSkin:"comp/label.png",name:"silver",height:30,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:107,x:403,skin:"ui/tongbi.png",name:"silverIcon"}}]}]},{type:"Text",props:{y:585,x:23,text:"进阶技能",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:328,x:50,text:"属性加成",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:171,x:50,text:"功法信息",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:250,x:392,text:"持有宗门贡献:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:250,x:574,width:131,"var":"hasDonate",text:"10",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:210,x:392,text:"需要功法阁等级:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:210,x:599,width:108,"var":"bookLevel",text:"10",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:289,x:69,visible:!1,text:"需要角色等级:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:289,x:260,width:125,visible:!1,"var":"needHeroLv",text:"100",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:1296,x:2,width:745,text:"小贴示：功法阁每升1级，可以学习5级功法。",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Qw),kI=function(e){function t(){this.btnUp=null,this.alcSrc=null,this.alcNeed=null,this.mbMax=null,this.mbMaxNt=null,this.btnDonate=null,this.alcLv=null,this.skillMax=null,this.bookNeed=null,this.bookLv=null,this.skillMaxNt=null,this.btnBookUp=null,this.lockBuiding=null,this.notPower=null,this.taskNeed=null,this.taskLv=null,this.btnTaskUp=null,t.__super.call(this)}o(t,"ui.model.alliance.AllianceHomeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:70,x:293,width:164,text:"宗门大厅",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:170,x:25,width:700,skin:"ui/bg_windos.png",height:855,sizeGrid:"30,30,30,30"}},{type:"Button",props:{y:335,x:47,width:204,"var":"btnUp",stateNum:2,skin:"comp/button.png",labelColors:"#00dc24",label:"升级宗门",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:236,x:62,width:125,text:"宗门资源:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:236,x:341,width:166,text:"升级宗门消耗:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:276,x:62,width:125,text:"成员上限:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:276,x:339,width:156,text:"升级后上限:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:236,x:188,width:125,"var":"alcSrc",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:236,x:524,width:125,"var":"alcNeed",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:276,x:188,width:125,"var":"mbMax",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:276,x:524,width:125,"var":"mbMaxNt",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:335,x:273,width:204,"var":"btnDonate",stateNum:2,skin:"comp/button.png",label:"贡献原木",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:195,x:62,width:125,text:"宗门等级:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:195,x:189,width:125,"var":"alcLv",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:554,x:62,width:174,text:"可学功法上限:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:594,x:62,width:200,text:"升级功法阁消耗:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:554,x:276,width:125,"var":"skillMax",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:594,x:276,width:125,"var":"bookNeed",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:513,x:62,width:148,text:"功法阁等级:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:513,x:276,width:125,"var":"bookLv",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:557,x:426,width:148,text:"升级后上限:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:557,x:579,width:125,"var":"skillMaxNt",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:649,x:273,width:204,"var":"btnBookUp",stateNum:2,skin:"comp/button.png",labelColors:"#00dc24",label:"升级功法阁",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1046,x:25,wordWrap:!0,width:700,text:"小贴士：\\n    宗门资源到达升级所需时，自动升级且不消耗资源；宗门其他建筑等级不能超过宗门等级；提升1级功法阁，可升级5级功法",styleSkin:"comp/label.png",leading:5,fontSize:26,color:"#6b9eec",bottom:30,bold:!1,align:"left"}},{type:"CheckBox",props:{y:963,x:265,width:236,"var":"lockBuiding",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#ffffff,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"禁止官员升级建筑",height:29}},{type:"Label",props:{y:967,x:550,width:139,"var":"notPower",text:"(无权修改)",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#e70626",bold:!0,align:"left"}},{type:"Text",props:{y:817,x:62,width:200,text:"升级任务堂消耗:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:817,x:276,width:125,"var":"taskNeed",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:773,x:62,width:148,text:"任务堂等级:",fontSize:26,color:"#ffffff",bold:!0,align:"left"}},{type:"Label",props:{y:773,x:276,width:125,"var":"taskLv",styleSkin:"comp/label.png",height:32,color:"#ffffff",bold:!0,align:"left",fontSize:26}},{type:"Button",props:{y:868,x:273,width:204,"var":"btnTaskUp",stateNum:2,skin:"comp/button.png",labelColors:"#00dc24",label:"升级任务堂",height:74,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),BI=function(e){function t(){this.pearls=null,t.__super.call(this)}o(t,"ui.model.pearl.PearlActiveUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:267,width:216,text:"兑换灵珠",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1252,x:-5,width:760,text:"小贴士：兑换后可免费更换一次五行,之后更换需要消耗女娲石",color:"#6b9eec",bold:!1,align:"center",fontSize:26}},{type:"List",props:{y:170,x:10,width:730,"var":"pearls",spaceY:10,repeatY:5,repeatX:1,height:1051},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"PropCell",props:{y:0,x:-3,name:"prop",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:57,x:495,width:184,stateNum:2,skin:"comp/button.png",name:"btnSelect",label:"选择兑换",height:86,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:148,x:479,text:"需要10个灵珠碎片",styleSkin:"comp/label.png",name:"need",color:"#e70626",bold:!0,fontSize:26}}]}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),VI=function(e){function t(){this.oldPearl=null,this.newPearl=null,this.needFood=null,this.hasFood=null,this.btnLevelUp=null,this.btnBuy=null,t.__super.call(this)}o(t,"ui.model.pearl.PearlLevelUpUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pearl.PearlCellUI",uC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:267,width:216,text:"提升灵珠",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:821,x:10,width:730,skin:"ui/fangkuang.png",height:130,sizeGrid:"10,10,10,10"}},{type:"PearlCell",props:{y:170,x:10,"var":"oldPearl",runtime:"ui.model.pearl.PearlCellUI"}},{type:"PearlCell",props:{y:537,x:10,"var":"newPearl",runtime:"ui.model.pearl.PearlCellUI"}},{type:"Label",props:{y:841,x:50,width:325,"var":"needFood",text:"消耗武器灵珠：550个",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:893,x:50,width:325,"var":"hasFood",text:"持有武器灵珠：550个",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:978,x:286,width:177,"var":"btnLevelUp",stateNum:2,skin:"comp/button.png",label:"提升灵珠",height:76,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:844,x:532,width:168,"var":"btnBuy",stateNum:2,skin:"comp/button.png",label:"前往兑换",height:75,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1144,x:61,width:627,text:"小贴士：消耗灵珠同部位五行不限,使用威望可兑换.",color:"#6b9eec",bottom:30,bold:!1,align:"center",fontSize:26}},{type:"Image",props:{y:457,x:348,skin:"ui/arrow.png"}}]},t}(Qw),FI=function(e){function t(){this.pearls=null,this.btnNtc=null,t.__super.call(this)}o(t,"ui.model.pearl.PearlDressUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pearl.PearlCellUI",uC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:235,x:10,width:730,"var":"pearls",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:977},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"PearlCell",props:{y:0,x:0,name:"pearl",runtime:"ui.model.pearl.PearlCellUI"}},{type:"Button",props:{y:188,x:233,width:130,stateNum:2,skin:"comp/button.png",name:"feedBtn",label:"提升灵珠",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:188,x:391,width:130,stateNum:2,skin:"comp/button.png",name:"changeBtn",label:"更换灵珠",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:188,x:549,width:130,stateNum:2,skin:"comp/button.png",name:"holeBtn",label:"提升炼器",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:15,x:360,width:176,text:"炼器10级",styleSkin:"comp/label.png",name:"holeLv",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:71,x:360,width:122,text:"炼器需求:",styleSkin:"comp/label.png",name:"lbNeeds",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:72,x:494,width:234,text:"部位强化等级10/20",styleSkin:"comp/label.png",name:"starNeed",height:32,color:"#fffc00",bold:!0,fontSize:26}},{type:"Label",props:{y:110,x:494,width:220,text:"仙品天籁石4/8",styleSkin:"comp/label.png",name:"redNeed",height:32,color:"#e70626",bold:!0,fontSize:26}},{type:"Label",props:{y:149,x:494,width:216,text:"仙品天籁石4/8",styleSkin:"comp/label.png",name:"purpleNeed",height:32,color:"#c527ff",bold:!0,fontSize:26}}]}]},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:343,text:"灵珠",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:170,width:100,"var":"btnNtc",stateNum:2,skin:"comp/button.png",right:25,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1252,x:61,width:627,text:"小贴士：强化等级越高，可炼器的等级越高，\\n灵珠等级不可超过炼器等级。",styleSkin:"comp/label.png",color:"#6b9eec",bold:!1,align:"center",fontSize:26}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),GI=function(e){function t(){this.dressed=null,this.selected=null,this.lbCost=null,this.btnChange=null,this.btnBuy=null,this.btnSelect=null,this.selectPop=null,this.pearls=null,t.__super.call(this)}o(t,"ui.model.pearl.PearlChangeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pearl.PearlCellUI",uC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:267,width:216,text:"更换灵珠",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"PearlCell",props:{y:170,x:9,"var":"dressed",runtime:"ui.model.pearl.PearlCellUI"}},{type:"PearlCell",props:{y:552,x:9,"var":"selected",runtime:"ui.model.pearl.PearlCellUI"}},{type:"Label",props:{y:871,x:65,width:325,"var":"lbCost",text:"消耗道具：女娲石1个",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:967,x:286,width:177,"var":"btnChange",stateNum:2,skin:"comp/button.png",label:"确认更换",height:76,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:849,x:505,width:168,"var":"btnBuy",stateNum:2,skin:"comp/button.png",label:"前往兑换",height:75,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1278,x:56,width:627,text:"小贴士：从第二次开始,更换需要消耗女娲石",color:"#6b9eec",bold:!1,align:"center",fontSize:26}},{type:"Image",props:{y:467,x:348,skin:"ui/arrow.png"}},{type:"Button",props:{y:712,x:286,width:177,"var":"btnSelect",stateNum:2,skin:"comp/button.png",label:"点击选择",height:76,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:170,x:780,width:750,"var":"selectPop",height:1100},child:[{type:"Rect",props:{y:0,x:0,width:750,lineWidth:1,height:1164,fillColor:"#000000"}},{type:"List",props:{y:81,x:10,width:730,"var":"pearls",spaceY:10,repeatX:1,height:1022},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"PearlCell",props:{y:0,x:0,name:"pearl",runtime:"ui.model.pearl.PearlCellUI"}},{type:"Button",props:{y:100,x:549,width:130,stateNum:2,skin:"comp/button.png",name:"btnSelect",label:"选择",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:32,x:10,width:216,text:"选择新的灵珠:",fontSize:32,color:"#fbf8f8",bold:!0}}]},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),HI=function(e){function t(){this.bloodList=null,this.emptyInfo=null,t.__super.call(this)}o(t,"ui.model.BloodSelectPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:310,width:130,text:"选择血脉",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"List",props:{y:170,x:25,width:700,"var":"bloodList",vScrollBarSkin:"comp/vscroll.png",spaceY:5,height:1111},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:110},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",name:"bg",height:109,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:10,x:15,width:109,text:"金龙血脉",styleSkin:"comp/label.png",name:"name",height:36,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:0,x:119,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:42,x:15,width:135,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:32,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:15,width:142,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:33,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:10,x:282,width:135,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute3",height:32,fontSize:24,color:"#1440ee",align:"left"}}]}]},{type:"Button",props:{y:60,width:67,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:67}},{type:"Box",props:{y:285,x:91,width:568,"var":"emptyInfo",height:391},child:[{type:"Text",props:{y:57,x:0,wordWrap:!0,width:611,text:"    1.需要同品质，完整血脉作为提升材料。",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:129,x:0,wordWrap:!0,width:695,text:"    2.完整血脉可通过远古血脉和威望兑换。",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:200,x:0,wordWrap:!0,width:656,text:"    3.材料不足您还可能使用天籁石进行提升。",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{wordWrap:!0,width:295,text:"小提示：",leading:4,fontSize:26,color:"#fffc00",bold:!0,align:"left"}}]},{type:"Image",props:{top:130,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),UI=function(e){function t(){this.btnTake=null,this.awarded=null,this.wait=null,this.price=null,this.totalpay=null,t.__super.call(this)}o(t,"ui.model.oldguy.OldGuyUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:170,skin:"ui/bg_windos.png",right:25,left:25,height:400,sizeGrid:"30,30,30,30"}},{type:"Text",props:{y:70,x:311,text:"转移福利",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:403,x:298,width:153,"var":"btnTake",stateNum:2,skin:"comp/button.png",label:"领取",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:290,x:247,width:252,"var":"awarded",text:"已领取：第1天",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:334,x:247,width:252,"var":"wait",text:"待领取：第2天",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:246,x:247,width:252,"var":"price",text:"每次可领：1000元宝",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:202,x:247,width:252,"var":"totalpay",text:"总计充值：10000元",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Text",props:{y:510,x:153,width:444,text:"小贴示： 详细规则请见平台相关公告。",leading:5,fontSize:26,color:"#6b9eec",bold:!0}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),zI=function(e){function t(){this.lbTitle=null,this.lbHas=null,this.lbNtc=null,this.clock1=null,this.clock2=null,this.map=null,this.head=null,this.cArrow=null,this.btnUp=null,this.btnRight=null,this.btnLeft=null,this.btnDown=null,this.anwser=null,this.answerPop=null,this.btnEquip=null,this.btnQuit=null,this.lbKilled=null,t.__super.call(this)}o(t,"ui.model.mystery.MysteryMapUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:70,x:261,"var":"lbTitle",text:"伏魔秘境第20层",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:190,x:28,"var":"lbHas",text:"剩余魔物：9只",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:190,x:215,"var":"lbNtc",text:"(击杀掉落伏魔装备1-2级)",styleSkin:"comp/label.png",fontSize:26,color:"#0084ff",align:"center"}},{type:"Label",props:{y:245,x:237,"var":"clock1",text:"03:00",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:245,x:28,text:"魔物刷新倒计时：",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:281,x:28,text:"秘境重置倒计时：",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:281,x:237,"var":"clock2",text:"00:03:00",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Button",props:{y:70,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:140,skin:"ui/toplink.png",right:15,left:15}},{type:"List",props:{y:335,x:2,"var":"map",spaceY:-2,spaceX:-2,repeatY:8,repeatX:6},child:[{type:"Box",props:{width:126,name:"render",height:126},child:[{type:"Image",props:{y:0,x:0,width:126,staticCache:!0,skin:"samsara/bg_map.png",name:"bg",height:126}}]}]},{type:"Box",props:{y:338,x:-189,width:126,"var":"head",height:126,cacheAs:"normal"},child:[{type:"Image",props:{y:17,x:19,width:87,skin:"ui/head/m1.png",name:"head",height:83}},{type:"Image",props:{y:7,x:12,skin:"samsara/bg_head.png"}},{type:"Text",props:{y:90,x:24,text:"战斗中",stroke:2,name:"fight",fontSize:26,color:"#00dc24",bold:!0,align:"center"}}]},{type:"Box",props:{y:522,x:188,width:373,"var":"cArrow",pivotY:187,pivotX:186,height:375},child:[{type:"Button",props:{y:1,x:124,width:126,"var":"btnUp",stateNum:1,name:"btnUp",height:126},child:[{type:"Rect",props:{y:1,x:1,width:124,renderType:"hit",lineWidth:1,height:124,fillColor:"#ff0000"}},{type:"Image",props:{y:35,x:43,skin:"samsara/arrow_white.png"}}]},{type:"Button",props:{y:125,x:248,width:126,"var":"btnRight",stateNum:1,name:"btnRight",height:126},child:[{type:"Rect",props:{y:0,x:0,width:126,renderType:"hit",lineWidth:1,height:126,fillColor:"#ff0000"}},{type:"Image",props:{y:63,x:62,skin:"samsara/arrow_white.png",rotation:90,pivotY:28,pivotX:19}}]},{type:"Button",props:{y:126,x:0,width:126,"var":"btnLeft",stateNum:1,name:"btnLeft",height:126},child:[{type:"Rect",props:{y:1,x:1,width:124,renderType:"hit",lineWidth:1,height:124,fillColor:"#ff0000"}},{type:"Image",props:{y:62,x:62,width:39,skin:"samsara/arrow_white.png",rotation:-90,pivotY:27,pivotX:19,height:55}}]},{type:"Button",props:{y:249,x:124,width:126,"var":"btnDown",stateNum:1,name:"btnDown",height:126},child:[{type:"Rect",props:{y:1,x:1,width:124,renderType:"hit",lineWidth:1,height:124,fillColor:"#ff0000"}},{type:"Image",props:{y:62,x:62,skin:"samsara/arrow_white.png",rotation:180,pivotY:27,pivotX:19}}]}]},{type:"Box",props:{y:335,x:816,"var":"anwser"},child:[{type:"Image",props:{width:746,skin:"comp/blank.png",height:994,sizeGrid:"2,2,2,2"}},{type:"Text",props:{y:945,x:4,width:737,text:"小贴示：答对奖励【腐蚀之精】，答错3次退出秘境禁入30分钟。",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Box",props:{y:120,x:84,"var":"answerPop"},child:[{type:"Image",props:{width:519,skin:"ui/fangkuang.png",height:321,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:196,x:190,width:140,stateNum:2,skin:"comp/button.png",name:"btnSure",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"TextInput",props:{y:127,x:207,width:174,type:"text",skin:"comp/textinput.png",sizeGrid:"6,9,6,10",prompt:"阿拉伯数字",name:"anwser",height:52,fontSize:32,bold:!1}},{type:"Sprite",props:{y:74,x:207,width:174,name:"questionImg",height:48}},{type:"Text",props:{y:271,x:157,text:"倒计时：",fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:271,x:260,text:"00:03:00",styleSkin:"comp/label.png",name:"clock3",fontSize:26,color:"#fbf8f8"}},{type:"Text",props:{y:32,x:66,width:388,text:"发现了一个需要输入密码的宝箱",height:36,fontSize:26,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:85,x:66,width:125,text:"密码提示：",fontSize:26,color:"#ffffff",bold:!0}},{type:"Text",props:{y:138,x:66,width:125,text:"输入密码：",height:36,fontSize:26,color:"#ffffff",bold:!0}},{type:"Label",props:{y:85,x:207,width:259,text:"壹十二加20",styleSkin:"comp/label.png",name:"question",fontSize:28,color:"#e70626",bold:!0}}]}]},{type:"Button",props:{y:196,x:580,width:140,"var":"btnEquip",stateNum:2,skin:"comp/button.png",label:"伏魔装备",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:266,x:580,width:140,"var":"btnQuit",stateNum:2,skin:"comp/button.png",labelColors:"#e70626",label:"切换秘境",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:227,x:-312,visible:!1,"var":"lbKilled",text:"今日已击杀魔物：10/50只",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}}]},t}(Qw),WI=function(e){function t(){this.listGate=null,t.__super.call(this)}o(t,"ui.model.mystery.MysteryGateUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:80,x:279,text:"伏魔秘境入口",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1258,x:2,width:745,text:"小贴示：进入秘境将随机分配地图。探索结束后可重新进入。",fontSize:26,color:"#6b9eec",bottom:50,bold:!1,align:"center"}},{type:"Button",props:{y:70,x:10,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:160,skin:"ui/toplink.png",right:15,left:15}},{type:"List",props:{y:238,x:25,width:700,"var":"listGate",spaceY:20,height:845},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:151,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:19,x:275,width:150,text:"秘境1层",styleSkin:"comp/label.png",name:"title",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:100,x:62,width:471,text:"开启条件：灵珠5级套装",styleSkin:"comp/label.png",name:"cnd",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:60,x:62,width:292,text:"掉落装备：1-2级",styleSkin:"comp/label.png",name:"drop",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:80,x:454,width:100,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"进入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:80,x:578,width:100,stateNum:2,skin:"comp/button.png",name:"btnHang",label:"挂机",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]}]},t}(Qw),YI=function(e){function t(){this.list=null,this.aimGrad=null,this.hasTime=null,t.__super.call(this)}o(t,"ui.model.mystery.MysteryHangUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:80,x:279,text:"伏魔秘境挂机",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1258,x:2,width:745,text:"小贴示：中止挂机奖励按已挂机时间计算，元宝或道具不予返还。",fontSize:26,color:"#6b9eec",bottom:50,bold:!1,align:"center"}},{type:"Button",props:{y:70,x:10,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:160,skin:"ui/toplink.png",right:15,left:15}},{type:"List",props:{y:383,x:25,width:700,"var":"list",spaceY:20,repeatY:4,height:623},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:121,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:19,x:244,width:212,text:"挂机1小时",styleSkin:"comp/label.png",name:"title",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:66,x:121,width:457,text:"收益率100%，可打怪20个",styleSkin:"comp/label.png",name:"drop",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"
}},{type:"Button",props:{y:38,x:571,width:99,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"选择",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Label",props:{y:231,x:131,width:150,"var":"aimGrad",text:"秘境1层",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:231,x:49,width:97,text:"目标：",styleSkin:"comp/label.png",name:"title",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:270,x:49,width:324,"var":"hasTime",text:"今日剩余挂机次数：5",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:316,x:49,width:350,text:"挂机一次消耗一个傀儡或50元宝",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}}]},t}(Qw),qI=function(e){function t(){this.ranks=null,this.lbRankAwd=null,this.txtSilver=null,this.txtAward1=null,this.txtAward2=null,this.btnAward=null,this.timesLeft=null,this.lbAwarded=null,t.__super.call(this)}o(t,"ui.model.ladder.LadderUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:310,width:130,text:"竞技场",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:136,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:70,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:859,x:25,width:700,skin:"ui/bg_windos.png",height:270,sizeGrid:"30,30,30,30"}},{type:"List",props:{y:262,x:25,width:700,"var":"ranks",vScrollBarSkin:" ",spaceY:10,height:580},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:87},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:86,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:124,width:1,skin:"ui/vline_white.png",height:81,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:27,x:16,width:96,text:"100",styleSkin:"comp/label.png",name:"rank",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:30,x:158,text:"??",styleSkin:"comp/label.png",name:"name",height:33,fontSize:26,color:"#f19e21",bold:!0,align:"left"}},{type:"Clip",props:{y:17,x:242,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Label",props:{y:30,x:292,width:89,text:"99级",styleSkin:"comp/label.png",name:"level",height:37,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:19,x:575,width:100,stateNum:2,skin:"comp/button.png",name:"btnFight",label:"挑战",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Box",props:{y:170,x:25,width:700,height:86},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:86,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:123,width:1,skin:"ui/vline_white.png",height:86,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:27,x:14,width:96,text:"排行",styleSkin:"comp/label.png",name:"lvLimit",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:27,x:152,width:385,text:"角色信息",styleSkin:"comp/label.png",name:"lvLimit",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Text",props:{y:876,x:438,width:132,text:"剩余次数：",fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:938,x:534,width:153,stateNum:2,skin:"comp/button.png",name:"btnFresh",label:"刷新对手",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:938,x:343,width:153,stateNum:2,skin:"comp/button.png",name:"btnTop10",label:"前十强者",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1035,x:343,width:153,stateNum:2,skin:"comp/button.png",name:"btnLog",label:"挑战记录",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1035,x:534,width:153,stateNum:2,skin:"comp/button.png",name:"btnShop",label:"威望商店",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:876,x:49,width:205,"var":"lbRankAwd",text:"排名可获得奖励",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:920,x:49,width:243,"var":"txtSilver",text:"1000铜币",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fffc00",bold:!0}},{type:"Label",props:{y:960,x:49,width:243,"var":"txtAward1",text:"天籁石碎片*1",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#e70626",bold:!0}},{type:"Label",props:{y:1e3,x:49,width:243,"var":"txtAward2",text:"天籁石碎片*2",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#c527ff",bold:!0}},{type:"Button",props:{y:1041,x:49,width:153,"var":"btnAward",stateNum:2,skin:"comp/button.png",name:"btnAward",label:"领取奖励",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{x:3,width:746,text:"小贴示：每日可挑免费挑战5次，晚上0点恢复次数。\\n每日22点计算排名奖励。",styleSkin:"comp/label.png",leading:5,fontSize:24,color:"#6b9eec",bottom:30,bold:!1,align:"center"}},{type:"Label",props:{y:876,x:568,width:95,"var":"timesLeft",text:"99",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:1059,x:49,width:153,"var":"lbAwarded",text:"今日已领取",styleSkin:"comp/label.png",fontSize:26,color:"#00dc24",bold:!0,align:"center"}}]},t}(Qw),KI=function(e){function t(){this.ranks=null,t.__super.call(this)}o(t,"ui.model.ladder.LadderTop10UI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:247,width:255,text:"竞技场前十",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:244,x:25,width:700,"var":"ranks",vScrollBarSkin:" ",spaceY:20,height:1053},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:87},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:86,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:124,width:1,skin:"ui/vline_white.png",height:81,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:27,x:16,width:96,text:"100",styleSkin:"comp/label.png",name:"rank",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:29,x:158,text:"??",styleSkin:"comp/label.png",name:"name",height:33,fontSize:26,color:"#f19e21",bold:!0,align:"left"}},{type:"Clip",props:{y:16,x:242,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Label",props:{y:29,x:292,text:"99级",styleSkin:"comp/label.png",name:"level",height:37,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:19,x:580,width:100,visible:!1,stateNum:2,skin:"comp/button.png",name:"btnView",label:"查看",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:29,x:368,width:89,text:"宗门",styleSkin:"comp/label.png",name:"alcName",height:37,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Box",props:{y:170,x:25,width:700,height:68},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:65,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:123,width:1,skin:"ui/vline_white.png",height:60,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:18,x:14,width:96,text:"排行",styleSkin:"comp/label.png",name:"lvLimit",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:17,x:152,width:385,text:"角色信息",styleSkin:"comp/label.png",name:"lvLimit",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}}]},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),XI=function(e){function t(){this.logs=null,this.lbEmpty=null,t.__super.call(this)}o(t,"ui.model.ladder.LadderLogUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:168,x:28,width:702,"var":"logs",spaceY:10,repeatX:1,height:1055},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:86},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:82,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:24,x:43,width:652,name:"log",height:62}}]}]},{type:"Text",props:{y:70,x:291,width:187,text:"竞技日志",fontSize:36,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:1270,x:3,width:744,text:"小贴示：显示与您有关的最近10条日志。",leading:5,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:561,x:239,width:272,"var":"lbEmpty",text:"空空如也",styleSkin:"comp/label.png",height:98,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:127,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),QI=function(e){function t(){this.raenaList=null,this.tips=null,this.fightTimes=null,this.ntc=null,this.lbCross=null,t.__super.call(this)}o(t,"ui.model.ArenaUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:310,width:130,text:"擂台争霸   ",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:223,x:6,width:740,"var":"raenaList",vScrollBarSkin:" ",spaceY:15,height:1e3},child:[{type:"Box",props:{y:0,x:0,width:741,name:"render",height:260},child:[{type:"Image",props:{y:0,x:0,width:737,skin:"ui/fangkuang.png",height:260,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:248,skin:"ui/vline_white.png",height:254,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:76,x:268,text:"奖池：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:176,x:268,width:111,text:"成功守擂：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:172,x:18,width:226,text:"占擂等级：45~54",styleSkin:"comp/label.png",name:"lvLimit",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:30,x:338,text:"??",styleSkin:"comp/label.png",name:"name",height:33,fontSize:26,color:"#f19e21",bold:!0,align:"left"}},{type:"Clip",props:{y:17,x:422,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}},{type:"Label",props:{y:30,x:472,text:"99级",styleSkin:"comp/label.png",name:"level",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:30,x:268,text:"擂主：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:176,x:392,width:87,text:"5 次",styleSkin:"comp/label.png",name:"keepTimes",height:33,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"HTMLDivElement",props:{y:77,x:338,width:273,styleSkin:"comp/html.png",name:"awardPool",innerHTML:"<font style=' font:24px ' color='#ffffff' >3000 铜币</font>",height:86}},{type:"Button",props:{y:186,x:610,width:100,stateNum:2,skin:"comp/button.png",name:"btnGet",label:"夺擂",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:125,x:610,width:100,stateNum:2,skin:"comp/button.png",name:"btnLogs",label:"记录",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:64,x:610,width:100,stateNum:2,skin:"comp/button.png",name:"btnView",label:"查看",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:214,x:18,width:217,text:"夺擂铜币：10000",styleSkin:"comp/label.png",name:"needSilver",height:35,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:214,x:268,width:120,text:"奖池时间：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:214,x:392,width:139,text:"5小时6分",styleSkin:"comp/label.png",name:"connectTime",height:38,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:82,x:7,width:235,text:"【海量资源】",styleSkin:"comp/label.png",name:"dPercent",height:39,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:33,x:44,width:160,text:"【跨服擂台】",styleSkin:"comp/label.png",name:"lbCross",height:33,fontSize:26,color:"#c527ff",bold:!0,align:"center"}},{type:"Label",props:{y:30,x:540,visible:!1,text:"宗门",styleSkin:"comp/label.png",name:"alc",fontSize:26,color:"#0084ff",bold:!0,align:"left"}}]}]},{type:"Label",props:{y:1246,x:0,wordWrap:!0,width:750,"var":"tips",text:"小贴示：占擂有20分钟保护时间，抢擂成功后可将原擂主赶下擂台，但不获得其资源。 每次占擂最多8小时，结束后奖励自动收取。 ",styleSkin:"comp/label.png",leading:5,fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:195,x:29,width:209,"var":"fightTimes",text:"今日已夺擂：10/10",styleSkin:"comp/label.png",height:24,fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:158,x:559,width:171,"var":"ntc",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"规则说明",height:54,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:158,x:29,width:477,"var":"lbCross",text:"跨服擂台",styleSkin:"comp/label.png",height:39,fontSize:32,color:"#fbf8f8",bold:!0}}]},t}(Qw),jI=function(e){function t(){this.emptTxt=null,this.noDressTxt=null,this.dress=null,this.skills=null,this.btnBuy=null,t.__super.call(this)}o(t,"ui.model.petskill.PetSkillDressSelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.petskill.PetSkillCellUI",dC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:110,x:308,width:134,text:"灵宠技能",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:205,x:13,width:122,text:"当前装备",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:434,x:13,width:122,text:"可选技能",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:662,x:252,width:245,"var":"emptTxt",text:"空空如也",styleSkin:"comp/label.png",height:53,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:288,x:252,width:245,"var":"noDressTxt",text:"未装备技能",styleSkin:"comp/label.png",height:53,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:80,stateNum:1,skin:"comp/btn_close.png",right:31,name:"close"}},{type:"Image",props:{y:160,skin:"ui/toplink.png",right:15,left:9}},{type:"PetSkillCell",props:{y:243,x:11,"var":"dress",runtime:"ui.model.petskill.PetSkillCellUI"}},{type:"List",props:{y:474,x:11,width:728,"var":"skills",vScrollBarSkin:" ",spaceY:20,height:823},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"PetSkillCell",props:{name:"skill",runtime:"ui.model.petskill.PetSkillCellUI"}},{type:"Button",props:{y:40,x:621,width:80,stateNum:2,skin:"comp/button.png",name:"btnChange",label:"佩戴",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Button",props:{y:399,x:556,width:168,"var":"btnBuy",stateNum:2,skin:"comp/button.png",label:"前往战技阁",height:61,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),ZI=function(e){function t(){this.hasPiece=null,this.tab=null,this.skillDress=null,this.skillAll=null,this.skillStore=null,t.__super.call(this)}o(t,"ui.model.petskill.PetSkillDressUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.petskill.PetSkillCellUI",dC),Sw.regComponent("ui.model.petskill.PetSkillCellFullUI",fC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:110,x:308,width:134,text:"灵宠技能",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:223,x:467,width:262,"var":"hasPiece",text:"秘籍碎片：999",height:24,fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:80,stateNum:1,skin:"comp/btn_close.png",right:31,name:"close"}},{type:"Tab",props:{y:199,x:24,width:437,"var":"tab",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"佩戴技能,所有技能,战技阁",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:52,labelSize:26}},{type:"Image",props:{y:160,skin:"ui/toplink.png",right:15,left:9}},{type:"List",props:{y:255,x:11,width:728,"var":"skillDress",spaceY:30,repeatY:4,height:960},child:[{type:"Box",props:{y:-3,x:0,name:"render"},child:[{type:"PetSkillCell",props:{y:43,x:0,name:"skill",runtime:"ui.model.petskill.PetSkillCellUI"}},{type:"Button",props:{y:53,x:607,width:100,stateNum:2,skin:"comp/button.png",name:"btnUp",label:"升品",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:111,x:609,width:100,stateNum:2,skin:"comp/button.png",name:"btnChg",label:"更换",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:6,x:34,width:300,text:"战技1",name:"pos",fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Text",props:{y:88,x:212,width:300,text:"未装备",name:"empty",height:24,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}}]}]},{type:"List",props:{y:261,x:11,width:728,"var":"skillAll",vScrollBarSkin:" ",spaceY:20,height:1018},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"PetSkillCellFull",props:{y:0,x:0,name:"cellv",runtime:"ui.model.petskill.PetSkillCellFullUI"}},{type:"Button",props:{y:26,x:501,width:100,stateNum:2,skin:"comp/button.png",name:"learnBtn",label:"获取",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:26,x:613,width:100,stateNum:2,skin:"comp/button.png",name:"recoverBtn",labelColors:"#e70626",label:"回收",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Box",props:{y:263,x:19,width:712,"var":"skillStore",height:1050},child:[{type:"Image",props:{y:0,x:6,width:700,skin:"ui/fangkuang.png",height:1025,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:124,x:106,width:500,text:"消耗：1个密阁之钥或60元宝",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:273,x:106,width:500,text:"消耗：10个密阁之钥或500元宝",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:950,x:27,wordWrap:!0,width:658,text:"小贴士：密阁之钥可从宗门战中获取；抽取到已有技能自动分解为碎片（战技20个，绝技100个）",height:58,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:798,x:140,width:431,text:"拥有密阁之钥：999个",name:"hasKey",height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:312,x:106,width:500,text:"温馨提示：10连抽必定获得战技",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#6b9eec",bold:!0,align:"center"}},{type:"Label",props:{y:442,x:106,width:500,text:"消耗：100个密阁之钥或5000元宝",styleSkin:"comp/label.png",name:"need100",height:32,fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:36,x:254,width:204,stateNum:2,skin:"comp/button.png",name:"btnOnce",labelColors:"#00dc24",label:"单次抽取",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:185,x:254,width:204,stateNum:2,skin:"comp/button.png",name:"btnTen",labelColors:"#00dc24",label:"连续抽取10次",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:665,x:254,width:204,stateNum:2,skin:"comp/button.png",name:"btnBook",label:"战技图鉴",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:508,x:254,width:204,stateNum:2,skin:"comp/button.png",name:"btnNtc",label:"概率公示",height:74,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:359,x:254,width:204,stateNum:2,skin:"comp/button.png",name:"btn100",labelColors:"#00dc24",label:"连续抽取100次",height:74,sizeGrid:"4,4,4,4",labelSize:26}}]}]},t}(Qw),JI=function(e){function t(){this.before=null,this.after=null,this.silverNeed=null,this.pieceNeed=null,this.btnSure=null,this.cbNtc=null,t.__super.call(this)}o(t,"ui.model.petskill.PetSkillUpgradeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.petskill.PetSkillCellFullUI",fC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:110,x:308,width:134,text:"灵宠技能",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:205,x:13,width:122,text:"当前技能",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:440,x:13,width:122,text:"升级后技能",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:80,stateNum:1,skin:"comp/btn_close.png",right:31,name:"close"}},{type:"Image",props:{y:160,skin:"ui/toplink.png",right:15,left:9}},{type:"PetSkillCellFull",props:{y:249,x:11,"var":"before",runtime:"ui.model.petskill.PetSkillCellFullUI"}},{type:"PetSkillCellFull",props:{y:477,x:11,"var":"after",runtime:"ui.model.petskill.PetSkillCellFullUI"}},{type:"Label",props:{y:691,x:286,width:102,text:"消耗铜币：",styleSkin:"comp/label.png",height:29,fontSize:24,color:"#84ec6b",bold:!0,align:"left"}},{type:"Label",props:{y:691,x:398,width:101,"var":"silverNeed",text:1e5,styleSkin:"comp/label.png",height:30,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:725,x:286,text:"消耗战技碎片：",styleSkin:"comp/label.png",fontSize:24,color:"#0084ff",bold:!0,align:"left"}},{type:"Label",props:{y:725,x:451,width:80,"var":"pieceNeed",text:"100个",styleSkin:"comp/label.png",height:24,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:767,x:283,width:183,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认升品",height:73,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:417,x:348,skin:"ui/arrow.png"}},{type:"CheckBox",props:{y:924,x:69,width:611,"var":"cbNtc",stateNum:2,skin:"comp/checkbox.png",labelSize:24,labelColors:"#e70626,#00FF00,#FFFFFF,#FFFFFF",labelBold:!0,label:"新上线功能，为确保平衡，不排除频繁优化调整的可能\\n（包含且不限于数值调整）打勾即代表接受并同意",height:54}}]},t}(Qw),$I=function(e){function t(){this.title=null,this.txtInfo=null,t.__super.call(this)}o(t,"ui.model.AlertUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:300,x:25,width:700,skin:"comp/bg.png",height:600,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:816,x:315,width:120,stateNum:2,skin:"comp/button.png",name:"close",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:339,x:44,width:662,"var":"title",text:"提示",styleSkin:"comp/label.png",height:39,fontSize:30,color:"#ffffff",bold:!0,align:"center"}},{type:"HTMLDivElement",props:{y:415,x:75,width:600,"var":"txtInfo",styleSkin:"comp/html.png",innerHTML:"提示的信息",height:370}}]},t}(Qw),eA=function(e){function t(){this.equips=null,this.lbInfo=null,this.ntc=null,this.tab=null,t.__super.call(this)}o(t,"ui.model.EquipDressUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:235,x:10,width:730,"var":"equips",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:1e3},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"EquipCell",props:{name:"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:188,x:419,width:130,stateNum:2,skin:"comp/button.png",name:"starBtn",label:"强化",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:188,x:569,width:130,stateNum:2,skin:"comp/button.png",name:"changeBtn",label:"更换",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:188,x:270,width:130,stateNum:2,skin:"comp/button.png",name:"dhBtn",label:"点化",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:188,x:120,width:130,stateNum:2,skin:"comp/button.png",name:"rbBtn",label:"洗炼",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:10,x:682,width:36,visible:!1,stateNum:1,skin:"chat/btn_chat1.png",name:"chat",height:36}}]}]},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:343,text:"装备",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:1278,x:115,"var":"lbInfo",text:"小贴示：合理的搭配装备选择可大幅提升战力",styleSkin:"comp/label.png",color:"#6b9eec",bold:!1,align:"center",fontSize:26}},{type:"Button",props:{y:170,width:100,"var":"ntc",stateNum:2,skin:"comp/button.png",right:25,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Tab",props:{y:170,x:25,width:454,"var":"tab",stateNum:2,space:20,skin:"comp/tab_small.png",selectedIndex:0,labels:"装备,伏魔,灵珠",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50,labelSize:24}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),tA=function(e){function t(){this.lbTitle=null,this.tabRmb=null,this.item1=null,this.item2=null,this.items=null,this.btnSure=null,this.clock=null,this.lbWaitPay=null,t.__super.call(this)}o(t,"ui.model.surprise.SurpriseUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.surprise.ItemCellUI",_C),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:60,x:10,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:80,x:290,width:170,"var":"lbTitle",text:"惊喜礼包",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:130,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:236,x:33,width:218,text:"选定物品",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:526,x:33,width:218,text:"待选物品",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Tab",props:{y:172,x:33,width:466,"var":"tabRmb",space:10,skin:"comp/tab.png",selectedIndex:0,labels:"6元,30元,68元",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:54,labelSize:26,stateNum:2}},{type:"ItemCell",props:{y:284,x:25,"var":"item1",runtime:"ui.model.surprise.ItemCellUI"}},{type:"ItemCell",props:{y:404,x:25,"var":"item2",runtime:"ui.model.surprise.ItemCellUI"}},{type:"List",props:{y:575,x:25,width:700,"var":"items",vScrollBarSkin:" ",spaceY:20,height:560},child:[{type:"ItemCell",props:{name:"render",runtime:"ui.model.surprise.ItemCellUI"}}]},{type:"Text",props:{y:1283,x:9,width:732,text:"小贴示：限定物品只可选择1次，倒计时结束后，礼包会自动消失哦。",height:36,fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:1162,x:289,width:171,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认购买",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1242,x:270,width:209,"var":"clock",text:"倒计时47:50:39",styleSkin:"comp/label.png",italic:!0,height:24,fontSize:24,color:"#fffc00",align:"center"}},{type:"Text",props:{y:734,x:98,width:553,"var":"lbWaitPay",text:"物品已选定，当前不可更改",height:32,fontSize:32,color:"#00dc24",bold:!0,align:"center"}}]},t}(Qw),iA=function(e){function t(){this.tips=null,this.myCoin=null,this.ntc=null,this.ntcRate=null,this.items=null,t.__super.call(this)}o(t,"ui.model.TowerShopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:307,width:136,text:"威望兑换",fontSize:30,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Label",props:{y:1132,x:67,width:640,"var":"tips",text:"小贴示：套装材料可选择五行和部位，获得材料最低蓝色品质",styleSkin:"comp/label.png",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:198,x:146,"var":"myCoin",text:"1000",styleSkin:"comp/label.png",fontSize:28,color:"#22d931",bold:!0,align:"left"}},{type:"Text",props:{y:198,x:15,text:"持有威望：",fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:186,x:469,width:90,"var":"ntc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:186,width:147,"var":"ntcRate",stateNum:2,skin:"comp/button.png",right:15,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"概率公示",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"List",props:{y:251,x:15,width:750,"var":"items",vScrollBarSkin:" ",spaceY:10,spaceX:10,repeatX:2,height:810},child:[{type:"Box",props:{y:0,x:0,width:355,name:"render",height:263},child:[{type:"Clip",props:{top:0,skin:"ui/clip_fangkuang.png",sizeGrid:"8,7,10,27",right:0,name:"bg",left:0,clipY:6,bottom:0}},{type:"Label",props:{y:13,text:"凝灵丹",styleSkin:"comp/label.png",right:0,name:"name",left:0,height:39,fontSize:28,color:"#22d931",align:"center"}},{type:"Label",props:{y:55,text:"威望：20/组",styleSkin:"comp/label.png",right:0,name:"costCoin",left:0,height:32,fontSize:24,color:"#f4eb13",align:"center"}},{type:"Label",props:{y:91,wordWrap:!0,text:"在境界副本中灵气加成100%，持续6小时",styleSkin:"comp/label.png",right:20,name:"desc",left:20,leading:3,height:100,fontSize:24,color:"#46aec8",align:"left"}},{type:"Button",props:{y:201,x:127,width:100,stateNum:2,skin:"comp/button.png",name:"btnExc",label:"兑换",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]}]},t}(Qw),nA=function(e){function t(){this.btnSure=null,this.anwser=null,this.question=null,this.lbClock=null,this.lbErro=null,this.btnClose=null,t.__super.call(this)}o(t,"ui.model.captcha.CaptchaUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Box",props:{y:486,x:83},child:[{type:"Image",props:{y:0,x:0,width:583,skin:"ui/fangkuang.png",height:398,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:271,x:221,width:140,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"TextInput",props:{y:194,x:181,width:223,"var":"anwser",type:"text",skin:"comp/textinput.png",sizeGrid:"6,9,6,10",height:57,fontSize:32,bold:!1}},{type:"Text",props:{y:32,x:97,width:388,text:"人机验证",height:36,fontSize:26,color:"#ffffff",bold:!0,align:"center"}},{type:"Text",props:{y:115,x:58,width:125,text:"密码提示：",fontSize:26,color:"#ffffff",bold:!0}},{type:"Text",props:{y:208,x:58,width:125,text:"输入密码：",height:36,fontSize:26,color:"#ffffff",bold:!0}},{type:"Image",props:{y:81,x:181,width:224,"var":"question",height:98}},{type:"Text",props:{y:348,x:198,text:"倒计时：",fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:348,x:301,"var":"lbClock",text:"00:03:00",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8"}},{type:"Label",props:{y:115,x:190,width:236,"var":"lbErro",underline:!0,text:"加载失败，点击重试",styleSkin:"comp/label.png",height:26,fontSize:26,color:"#e70626"}}]},{type:"Button",props:{y:515,"var":"btnClose",stateNum:1,skin:"comp/btn_close.png",right:114,name:"close"}},{type:"Text",props:{y:943,x:6,width:737,text:"小贴示：系统人机验证，超时或答错相关功能禁用2小时。",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:987,x:10,wordWrap:!0,width:721,text:"    长时间在线或使用第三方脚本均会频繁验证，待正常游戏时间后，次日将解除验证。请合理安排游戏时间，适当休息。",leading:5,height:62,fontSize:26,color:"#fffc00",bold:!1,align:"center"}}]},t}(Qw),oA=function(e){function t(){this.infoPanel=null,this.bars=null,t.__super.call(this)}o(t,"ui.model.notice.PlayNoticeUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Panel",props:{y:160,x:17,width:716,"var":"infoPanel",vScrollBarSkin:"comp/vscroll.png",height:1122}},{type:"Tab",props:{y:103,x:232,"var":"bars",stateNum:2,space:6,skin:"comp/tab.png",selectedIndex:0,labels:"游戏公告,常见问题",labelSize:28,labelColors:"#ffffff,#000000,#ff0000,#C0C0C0"}}]},t}(Qw),sA=function(e){function t(){this.emptyInfo=null,
this.talismanList=null,t.__super.call(this)}o(t,"ui.model.TalismanSelectPopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:289,width:153,text:"可选法宝",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:128,skin:"ui/toplink.png",right:15,left:15}},{type:"Box",props:{y:386,x:102,width:568,"var":"emptyInfo",height:391},child:[{type:"Text",props:{y:57,x:0,wordWrap:!0,width:611,text:"    1.需要同品质，同境界的法宝作为提升材料。",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:129,x:0,wordWrap:!0,width:695,text:"    2.法宝可在境界副本击杀境界Boss获得",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:200,x:0,wordWrap:!0,width:656,text:"    3.材料不足您还可能使用天籁石进行提升。",leading:4,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{wordWrap:!0,width:295,text:"小提示：",leading:4,fontSize:26,color:"#fffc00",bold:!0,align:"left"}}]},{type:"List",props:{y:170,x:10,width:730,"var":"talismanList",vScrollBarSkin:" ",spaceY:10,height:1100},child:[{type:"TalismanCell",props:{name:"render",runtime:"ui.model.pops.TalismanCellUI"}}]}]},t}(Qw),rA=function(e){function t(){this.btnSure=null,this.title=null,t.__super.call(this)}o(t,"ui.model.AlertCopyUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:375,x:150,width:450,skin:"comp/bg.png",height:254,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:552,x:315,width:120,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:446,x:241,width:268,"var":"title",text:"成功复制到剪贴板",styleSkin:"comp/label.png",height:47,fontSize:24,color:"#ffffff",bold:!0,align:"center"}}]},t}(Qw),aA=function(e){function t(){this.equips=null,this.emptTxt=null,t.__super.call(this)}o(t,"ui.model.handbook.LightEquipSelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:208,x:10,width:730,"var":"equips",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:1008},child:[{type:"Box",props:{y:0,x:0,width:730,name:"render",height:260},child:[{type:"EquipCell",props:{name:"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:181,x:295,width:141,stateNum:2,skin:"comp/button.png",name:"btnUse",label:"选择激活",height:63,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:70,x:284,width:185,text:"激活图鉴部位",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:170,x:9,width:185,text:"可使用的装备:",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:1270,x:8,width:745,text:"注意：只有红色或紫色装备才可激活图鉴部位,激活后装备将被消耗",fontSize:24,color:"#fffc00",bold:!1,align:"center"}},{type:"Label",props:{y:504,x:193,width:363,"var":"emptTxt",text:"没有可用的装备",styleSkin:"comp/label.png",height:53,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),lA=function(e){function t(){this.typeBar=null,this.propsList=null,this.equipList=null,this.boxList=null,this.txtEmptyInfo=null,this.talismanList=null,this.filterBar=null,this.natureFilter=null,this.posFilter=null,this.qualityFilter=null,this.natureLb=null,this.posLb=null,this.qualityLb=null,this.levelFilter=null,this.petEquips=null,t.__super.call(this)}o(t,"ui.model.BagpackUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),Sw.regComponent("ui.model.pops.PetEquipCellUI",oC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Tab",props:{y:170,x:20,"var":"typeBar",stateNum:2,space:10,skin:"comp/tab_small.png",labels:"材料,装备,宝箱,灵宠,宠装,法宝,特装,其他",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:24}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:302,x:10,width:730,"var":"propsList",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:995},child:[{type:"Box",props:{name:"render",height:200},child:[{type:"PropCell",props:{name:"prop",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:137,x:379,width:120,stateNum:2,skin:"comp/button.png",name:"mixCommon",label:"普通合成",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:137,x:506,width:120,stateNum:2,skin:"comp/button.png",name:"mixSP",label:"特殊合成",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:137,x:633,width:88,stateNum:2,skin:"comp/button.png",name:"saleBtn",label:"出售",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:137,x:283,width:88,stateNum:2,skin:"comp/button.png",name:"btnMix",label:"提炼",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:137,x:188,width:88,stateNum:2,skin:"comp/button.png",name:"btnUnMix",label:"分解",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:9,x:686,width:36,visible:!1,stateNum:1,skin:"chat/btn_chat1.png",name:"chat",height:36}}]}]},{type:"Text",props:{y:70,x:343,text:"背包",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:302,x:789,width:730,"var":"equipList",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:995},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"EquipCell",props:{name:"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:182,x:579,width:130,stateNum:2,skin:"comp/button.png",name:"saleBtn",label:"出售",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:182,x:430,width:130,stateNum:2,skin:"comp/button.png",name:"dressBtn",label:"穿上",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:182,x:280,width:130,stateNum:2,skin:"comp/button.png",name:"dhBtn",label:"点化",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:182,x:131,width:130,stateNum:2,skin:"comp/button.png",name:"rbBtn",label:"洗炼",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:9,x:687,width:36,visible:!1,stateNum:1,skin:"chat/btn_chat1.png",name:"chat",height:36}}]}]},{type:"List",props:{y:235,x:1572,width:730,"var":"boxList",spaceY:10,repeatY:5,height:1091},child:[{type:"Box",props:{y:0,x:0,width:732,name:"render",height:175},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",name:"bg",height:173,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:13,x:66,width:180,text:"【远古宝箱】",styleSkin:"comp/label.png",name:"name",height:42,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:52,x:16,wordWrap:!0,width:442,text:"开启后获得大量铜币，元宝",styleSkin:"comp/label.png",name:"info",leading:3,height:86,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:135,x:597,width:99,text:"05:06:01",styleSkin:"comp/label.png",name:"clockTxt",height:37,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Button",props:{y:60,x:566,width:130,stateNum:2,skin:"comp/button.png",name:"openBtn",labelSize:26,label:"加速/打开",height:60,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:134,x:480,width:112,text:"开启耗时",styleSkin:"comp/label.png",name:"lbClock",height:40,fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}},{type:"Button",props:{y:60,x:418,width:130,stateNum:2,skin:"comp/button.png",name:"videoBtn",labelSize:26,label:"福利加速",height:60,sizeGrid:"4,4,4,4"},child:[{type:"Image",props:{y:10,x:41,width:48,skin:"ui/display.png",name:"icon",height:40}}]},{type:"Label",props:{y:26,x:407,width:151,text:"广告冷却中",styleSkin:"comp/label.png",name:"txtVideo",height:30,fontSize:22,color:"#ff0000",bold:!1,align:"center"}}]},{type:"Text",props:{y:1051,x:115,width:500,text:"小贴示：击败boss会随机获得一个宝箱",fontSize:28,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:934,x:115,width:500,text:"剩余免费福利加速:10次",styleSkin:"comp/label.png",name:"adTime",fontSize:28,color:"#ffffff",bold:!1,align:"center"}},{type:"Label",props:{y:991,x:115,width:500,text:"离线开启宝箱剩余:30天",styleSkin:"comp/label.png",name:"vipTime",fontSize:28,color:"#ffffff",bold:!1,align:"center"}},{type:"Button",props:{y:971,x:290,width:150,stateNum:2,skin:"comp/button.png",name:"openVip",labelSize:26,label:"开通会员",height:60,sizeGrid:"4,4,4,4"}}]},{type:"Label",props:{y:433,x:227,wordWrap:!0,width:295,"var":"txtEmptyInfo",text:"空空如也",styleSkin:"comp/label.png",leading:4,height:43,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:302,x:-781,width:730,"var":"talismanList",vScrollBarSkin:" ",spaceY:10,height:995},child:[{type:"Box",props:{y:0,x:0,width:730,name:"render",height:200},child:[{type:"TalismanCell",props:{name:"talisman",height:200,runtime:"ui.model.pops.TalismanCellUI"}},{type:"Button",props:{y:130,x:486,width:88,stateNum:2,skin:"comp/button.png",name:"btnDress",label:"佩戴",sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:130,x:293,width:88,stateNum:2,skin:"comp/button.png",name:"btnUpgrade",label:"升品",sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:130,x:390,width:88,stateNum:2,skin:"comp/button.png",name:"btnRebuild",label:"洗炼",sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:129,x:583,width:88,stateNum:2,skin:"comp/button.png",name:"btnSale",label:"出售",height:42,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:9,x:684,width:36,visible:!1,stateNum:1,skin:"chat/btn_chat1.png",name:"chat",height:36}}]}]},{type:"Box",props:{y:235,x:25,"var":"filterBar"},child:[{type:"ComboBox",props:{y:1,x:376,width:110,"var":"natureFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,金系,木系,水系,火系,土系",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"ComboBox",props:{y:1,x:184,width:110,"var":"posFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,武器,防具,饰品",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"ComboBox",props:{y:1,x:568,width:110,"var":"qualityFilter",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,白色,蓝色,绿色,黄色,红色,紫色",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Text",props:{y:11,x:0,width:112,text:"筛选条件",fontSize:24,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:11,x:312,width:69,"var":"natureLb",text:"五行：",styleSkin:"comp/label.png",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:11,x:119,width:69,"var":"posLb",text:"类型：",styleSkin:"comp/label.png",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:11,x:505,width:69,"var":"qualityLb",text:"品质：",styleSkin:"comp/label.png",height:39,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"TextInput",props:{y:6,x:577,width:90,"var":"levelFilter",type:"number",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",maxChars:3,height:39,fontSize:24,bold:!0,align:"center"}}]},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}},{type:"List",props:{y:302,x:-1575,width:730,"var":"petEquips",vScrollBarSkin:" ",spaceY:10,repeatY:6,height:1007},child:[{type:"Box",props:{name:"render"},child:[{type:"PetEquipCell",props:{y:0,x:0,name:"item",runtime:"ui.model.pops.PetEquipCellUI"}},{type:"Button",props:{y:141,x:618,width:95,stateNum:2,skin:"comp/button.png",name:"btnDress",label:"佩戴",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:10,x:685,width:36,visible:!1,stateNum:1,skin:"chat/btn_chat1.png",name:"chat",height:36}},{type:"Button",props:{y:141,x:504,width:95,stateNum:2,skin:"comp/button.png",name:"btnBreak",label:"分解",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]}]},t}(Qw),hA=function(e){function t(){this.lbTitle=null,this.lbBuf=null,this.lbHas=null,this.awdGas=null,this.awdProp=null,this.awdAttr=null,this.map=null,this.totalAttr=null,this.head=null,this.cArrow=null,this.btnUp=null,this.btnRight=null,this.btnLeft=null,this.btnDown=null,this.lbNtc=null,this.lbCross=null,this.btnDrop=null,this.awdProp1=null,t.__super.call(this)}o(t,"ui.model.samsara.SamsaraUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:70,x:261,"var":"lbTitle",text:"轮回之地第20层",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:142,x:190,"var":"lbBuf",text:"【腐蚀】1级",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:142,x:18,"var":"lbHas",text:"剩余怪物：9只",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Text",props:{y:176,x:16,text:"通关奖励：",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:177,x:148,"var":"awdGas",text:"1000真元",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:177,x:275,"var":"awdProp",text:"精品天籁石*1",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:209,x:148,"var":"awdAttr",text:"攻击+100、防御+10",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:335,x:2,"var":"map",spaceY:-2,spaceX:-2,repeatY:8,repeatX:6},child:[{type:"Box",props:{width:126,name:"render",height:126},child:[{type:"Image",props:{y:0,x:0,width:126,staticCache:!0,skin:"samsara/bg_map.png",name:"bg",height:126}}]}]},{type:"Text",props:{y:297,x:16,text:"累计属性：",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Label",props:{y:297,x:148,"var":"totalAttr",text:"攻击+100、防御+10",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Box",props:{y:338,x:-189,width:126,"var":"head",height:126,cacheAs:"normal"},child:[{type:"Image",props:{y:17,x:19,width:87,skin:"ui/head/m1.png",name:"head",height:83}},{type:"Image",props:{y:7,x:12,skin:"samsara/bg_head.png"}},{type:"Image",props:{y:113,x:21,width:84,skin:"ui/bg_0.png",height:10}},{type:"Image",props:{y:103,x:21,width:84,skin:"ui/bg_0.png",height:10}},{type:"Image",props:{y:114,x:22,width:82,skin:"ui/bgMp.png",name:"bgBlue",height:8}},{type:"Image",props:{y:104,x:22,width:82,skin:"ui/bgHp.png",name:"bgRed",height:8}}]},{type:"Box",props:{y:522,x:188,width:373,"var":"cArrow",pivotY:187,pivotX:186,height:375},child:[{type:"Button",props:{y:1,x:124,width:126,"var":"btnUp",stateNum:1,name:"btnUp",height:126},child:[{type:"Rect",props:{y:1,x:1,width:124,renderType:"hit",lineWidth:1,height:124,fillColor:"#ff0000"}},{type:"Image",props:{y:35,x:43,skin:"samsara/arrow_white.png"}}]},{type:"Button",props:{y:125,x:248,width:126,"var":"btnRight",stateNum:1,name:"btnRight",height:126},child:[{type:"Rect",props:{y:0,x:0,width:126,renderType:"hit",lineWidth:1,height:126,fillColor:"#ff0000"}},{type:"Image",props:{y:63,x:62,skin:"samsara/arrow_white.png",rotation:90,pivotY:28,pivotX:19}}]},{type:"Button",props:{y:126,x:0,width:126,"var":"btnLeft",stateNum:1,name:"btnLeft",height:126},child:[{type:"Rect",props:{y:1,x:1,width:124,renderType:"hit",lineWidth:1,height:124,fillColor:"#ff0000"}},{type:"Image",props:{y:62,x:62,width:39,skin:"samsara/arrow_white.png",rotation:-90,pivotY:27,pivotX:19,height:55}}]},{type:"Button",props:{y:249,x:124,width:126,"var":"btnDown",stateNum:1,name:"btnDown",height:126},child:[{type:"Rect",props:{y:1,x:1,width:124,renderType:"hit",lineWidth:1,height:124,fillColor:"#ff0000"}},{type:"Image",props:{y:62,x:62,skin:"samsara/arrow_white.png",rotation:180,pivotY:27,pivotX:19}}]}]},{type:"Label",props:{y:142,x:355,"var":"lbNtc",text:"(击杀所有恶灵可获得通关奖励)",styleSkin:"comp/label.png",fontSize:26,color:"#0084ff",align:"center"}},{type:"Image",props:{y:110,skin:"ui/toplink.png",right:15,left:15}},{type:"Label",props:{y:264,x:400,width:195,"var":"lbCross",text:"【跨10级挑战中】",styleSkin:"comp/label.png",height:26,fontSize:26,color:"#00dc24",align:"center"}},{type:"Button",props:{y:246,x:604,width:133,"var":"btnDrop",stateNum:2,skin:"comp/button.png",labelColors:"#e70626",label:"放弃跨级",height:48,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:177,x:440,"var":"awdProp1",text:"精品天籁石*1",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",align:"center"}}]},t}(Qw),cA=function(e){function t(){this.list=null,t.__super.call(this)}o(t,"ui.model.samsara.SamsaraAwdsUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:311,text:"轮回之地",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:434,x:25,width:700,"var":"list",spaceY:10,repeatY:19,height:683},child:[{type:"Box",props:{y:0,x:0,width:675,name:"render",height:24},child:[{type:"Label",props:{y:0,x:89,text:"1000真元",styleSkin:"comp/label.png",name:"gas",fontSize:22,color:"#0084ff"}},{type:"Label",props:{y:0,x:200,text:"精品天籁石*1",styleSkin:"comp/label.png",name:"prop",fontSize:22,color:"#fbf8f8"}},{type:"Label",props:{y:0,x:344,width:328,text:"攻击+100、防御+10",styleSkin:"comp/label.png",name:"attr",height:24,fontSize:22,color:"#00dc24"}},{type:"Label",props:{x:0,text:"第10层：",styleSkin:"comp/label.png",name:"id",fontSize:22,color:"#fbf8f8",align:"center"}}]}]},{type:"Text",props:{y:1148,x:155,text:"小贴示：当前仅列出大关奖励，小关奖励真元",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:389,x:25,text:"奖励预览：",styleSkin:"comp/label.png",name:"gas",color:"#fbf8f8",fontSize:26}},{type:"Label",props:{y:173,x:25,text:"功能简介：",styleSkin:"comp/label.png",name:"gas",fontSize:26,color:"#fbf8f8"}},{type:"Label",props:{y:217,x:25,width:717,text:"1、每层10个恶灵，全部击杀获得奖励\\n2、临近恶灵会有相生相克状态\\n3、腐蚀属性会极大降低人物属性\\n4、每次通关可获得一次跨级挑战的机会（最多跨10级）\\n5、跨级挑战成功后获得跨过关全部奖励（等效一关一关的打）",styleSkin:"comp/label.png",name:"gas",leading:3,height:153,fontSize:26,color:"#fbf8f8"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),uA=function(e){function t(){this.btnSure=null,this.cbCross=null,this.btnDrop=null,this.gradeNow=null,t.__super.call(this)}o(t,"ui.model.samsara.SamsaraChallengUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:167,x:18,width:724,skin:"ui/fangkuang.png",height:465,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:480,x:221,width:133,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认选择",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"ComboBox",props:{y:395,x:416,width:98,visibleNum:11,"var":"cbCross",skin:"comp/combobox.png",sizeGrid:"7,27,8,12",selectedIndex:-1,labels:"  1层,  2层,  3层,  4层,  5层,  6层,  7层,  8层,  9层,10层",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",height:38,itemSize:20,labelSize:20}},{type:"Button",props:{y:480,x:430,width:133,"var":"btnDrop",stateNum:2,skin:"comp/button.png",labelColors:"#e70626",label:"放弃跨级",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:100,x:311,text:"跨级挑战",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:582,x:89,text:"小贴示：跨级挑战仅是为了提高过关效率，并无额外奖励。",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:323,x:201,width:348,"var":"gradeNow",text:"当前关卡：10层",styleSkin:"comp/label.png",height:28,fontSize:28,color:"#00dc24",align:"center"}},{type:"Label",props:{y:396,x:275,width:129,text:"跨级挑战：",styleSkin:"comp/label.png",height:28,fontSize:28,color:"#e70626",align:"left"}},{type:"Text",props:{y:245,x:67,text:"恭喜您获得一次跨级挑战的机会，请选择挑战层数",fontSize:28,color:"#fffc00",bold:!1,align:"center"}}]},t}(Qw),dA=function(e){function t(){this.doubleSure=null,this.btnSure=null,this.pname=null,this.cnature=null,this.needProps=null,this.aimNature=null,this.hasProps=null,t.__super.call(this)}o(t,"ui.model.common.ConfirmChgNatureUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:293,width:164,text:"转换五行",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Image",props:{y:170,x:25,width:700,skin:"ui/fangkuang.png",height:484,sizeGrid:"10,10,10,10"}},{type:"TextInput",props:{y:465,x:201,width:348,"var":"doubleSure",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"确认请输入 ‘转换’",height:52,fontSize:24,bold:!0,align:"center"}},{type:"Button",props:{y:548,x:181,width:152,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:548,x:417,width:152,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:370,x:58,wordWrap:!0,width:599,text:"      转换后人物所有的装备都会自动脱到背包中，成长属性会进行变更，技能变更，灵根变更，五行宫排行变更。",pivotY:5,leading:5,fontSize:26,color:"#e70626",bold:!0}},{type:"Label",props:{y:190,x:260,"var":"pname",text:"??",styleSkin:"comp/label.png",fontSize:32,color:"#f19e21",bold:!0,align:"left"}},{type:"Clip",props:{y:182,x:364,"var":"cnature",skin:"ui/clip_wuxing.png",index:4,clipY:5}},{type:"Label",props:{y:684,x:25,wordWrap:!0,width:700,text:"一、免费转换五行\\n   50级以前（含50级）且建角30天内可免费转换1次，51级及以上转换将消耗【涅槃丹】。\\n\\n二、使用【涅槃丹】转换\\n 每次转换消耗1颗【涅槃丹】。  \\n\\n三、转换五行说明 \\n  1.转换后，人物身上的所有装备都将自动脱落到背包中，成长属性、技能、灵根、五行宫排行将变更为新的五行； \\n  2.转换后，限五行的原专属装备都无法继承，需要重新获取，装备不支持同步转五行； \\n  3.一旦转换后，无法回档，只能重新再次转五行（请谨慎决定后再转）；",styleSkin:"comp/label.png",leading:5,height:485,fontSize:26,color:"#6b9eec",bold:!1}},{type:"Text",props:{y:315,x:55,text:"消耗道具：",fontSize:28,color:"#fffc00",bold:!0,align:"left"}},{type:"Label",props:{y:315,x:198,width:247,"var":"needProps",text:"【涅槃丹】1个",styleSkin:"comp/label.png",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:267,x:56,text:"转换五行：",fontSize:28,color:"#00dc24",bold:!0,align:"left"}},{type:"ComboBox",props:{y:259,x:210,width:130,"var":"aimNature",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:0,labels:"选择,金,木,水,火,土",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"Label",props:{y:315,x:545,width:162,"var":"hasProps",text:"持有1个",styleSkin:"comp/label.png",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Qw),pA=function(e){function t(){this.items=null,t.__super.call(this)}o(t,"ui.model.ShopUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,name:"render",height:1334},child:[{type:"Text",props:{y:70,x:324,width:102,text:"杂货商",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"List",props:{y:170,x:25,"var":"items",spaceY:5,repeatY:6,repeatX:1},child:[{type:"PropCellSimple",props:{y:0,x:0,name:"render",runtime:"ui.model.pops.PropCellSimpleUI"}}]},{type:"Text",props:{y:952,x:14,width:727,text:"小贴示：杂货商的商品来自五湖四海，可遇不可求，点击购买。",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:985,x:72,width:661,text:"魔核或精魂需要击杀一只小怪才可有概率出现。",height:26,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Qw),fA=function(e){function t(){this.logView=null,this.panelReports=null,this.lodeView=null,this.lodeYesView=null,this.lodeNoView=null,this.listLode=null,this.txtEmptyInfo=null,this.checkFlter=null,this.btnLog=null,this.infoView=null,this.btnExplain=null,t.__super.call(this)}o(t,"ui.model.LodeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:298,width:145,text:"地灵矿脉",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Box",props:{y:170,x:25,width:700,"var":"logView",height:1080},child:[{type:"Panel",props:{y:0,x:0,width:700,"var":"panelReports",vScrollBarSkin:"comp/vscroll.png",height:1039}},{type:"Button",props:{y:-131,x:633,stateNum:1,skin:"comp/btn_close.png",name:"btnBack"}}]},{type:"Box",props:{y:170,x:28,width:700,"var":"lodeView",height:1145},child:[{type:"Box",props:{y:0,x:0,width:700,"var":"lodeYesView",height:330},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:330,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:20,x:0,width:710,text:"你占领的灵石矿脉",styleSkin:"comp/label.png",name:"title",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:69,x:50,text:"采集剩余时间：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:69,x:240,text:"1小时42分钟/4小时",styleSkin:"comp/label.png",name:"txtTime",fontSize:24,color:"#00dc24",bold:!0,align:"left"}},{type:"Text",props:{y:112,x:50,text:"已采集：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:153,x:50,text:"已获得：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:194,x:50,text:"保护时间：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:194,x:240,text:"53分钟",styleSkin:"comp/label.png",name:"txtKeepTime",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:235,x:50,text:"被劫次数：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:235,x:240,text:"1/2",styleSkin:"comp/label.png",name:"txtAttackCount",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:157,x:530,width:130,stateNum:2,skin:"comp/button.png",name:"btnKeep",label:"护灵阵法",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:235,x:500,name:"boxKeepProp"},child:[{type:"Label",props:{y:0,x:69,text:"护灵阵法*1",styleSkin:"comp/label.png",name:"boxKeppProp",fontSize:24,color:"#0084ff",bold:!0,align:"center"}},{type:"Label",props:{y:0,x:0,text:"消耗：",styleSkin:"comp/label.png",name:"txtKeepProp",fontSize:24,color:"#ffffff",bold:!0,align:"center"}}]},{type:"Text",props:{y:280,x:0,width:710,text:"温馨提示：被劫掠后保护时间加1小时，产出时间上限减少20分钟",fontSize:24,color:"#6b9eec",bold:!0,align:"center"}},{type:"Button",props:{y:156,x:529,width:130,stateNum:2,skin:"comp/button.png",name:"btnSure",label:"点击领取",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"HTMLDivElement",props:{y:112,x:200,width:330,styleSkin:"comp/html.png",name:"txtProduct",height:32}},{type:"HTMLDivElement",props:{y:153,x:200,width:330,styleSkin:"comp/html.png",name:"txtAwarded",height:32}}]},{type:"Box",props:{y:0,x:767,"var":"lodeNoView"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:330,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:43,x:7,width:500,text:"你目前没有占领矿脉",styleSkin:"comp/label.png",name:"title",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:156,x:530,width:130,stateNum:2,skin:"comp/button.png",name:"btnExploit",label:"开发新矿",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:232,x:500,text:"消耗：灵矿地图*1",fontSize:24,color:"#e70626",bold:!0,align:"center"}},{type:"Text",props:{y:112,x:50,text:"当前拥有：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:153,x:50,text:"当前拥有：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:112,x:200,text:"灵矿地图*0",styleSkin:"comp/label.png",name:"txtPropA",fontSize:24,color:"#e70626",bold:!0,align:"left"}},{type:"Label",props:{y:153,x:200,text:"护灵阵法*0",styleSkin:"comp/label.png",name:"txtPropB",fontSize:24,color:"#0084ff",bold:!0,align:"left"}},{type:"Text",props:{y:280,x:10,width:700,text:"温馨提示：灵矿地图 可在魂兽森林中获取",fontSize:24,color:"#6b9eec",bold:!0,align:"center"}}]},{type:"List",props:{y:394,x:0,width:700,"var":"listLode",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:729},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:330,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:20,x:0,width:710,text:"元宝矿脉",styleSkin:"comp/label.png",name:"title",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:69,x:50,text:"占领者：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:69,x:140,text:"吊儿郎当",styleSkin:"comp/label.png",name:"txtName",mouseEnabled:!0,fontSize:24,color:"#f19e21",bold:!0,align:"left"}},{type:"Text",props:{y:110,x:50,text:"采集剩余时间：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:110,x:240,text:"1小时42分钟/4小时",styleSkin:"comp/label.png",name:"txtTime",fontSize:24,color:"#00dc24",bold:!0,align:"left"}},{type:"Text",props:{y:153,x:50,text:"已采集：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:194,x:50,text:"已获得：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:235,x:50,text:"保护时间：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:235,x:240,text:"53分钟",styleSkin:"comp/label.png",name:"txtKeepTime",fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:276,x:50,text:"被劫次数：",fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:276,x:240,text:"1/2",styleSkin:"comp/label.png",name:"txtAttackCount",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:82,x:539,width:130,stateNum:2,skin:"comp/button.png",name:"btnLog",label:"夺掠记录",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:204,x:540,width:130,stateNum:2,skin:"comp/button.png",name:"btnAttack",label:"掠夺资源",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Clip",props:{y:50,x:238,skin:"ui/clip_wuxing.png",name:"iconNature",index:1,clipY:5}},{type:"Label",props:{y:69,x:285,text:"Lv45",styleSkin:"comp/label.png",name:"txtLevel",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"HTMLDivElement",props:{y:153,x:200,width:330,styleSkin:"comp/html.png",name:"txtProduct",height:32}},{type:"HTMLDivElement",props:{y:194,x:200,width:330,styleSkin:"comp/html.png",name:"txtAwarded",height:32}},{type:"Label",props:{y:69,x:351,text:"宗门",styleSkin:"comp/label.png",name:"txtAlc",fontSize:24,color:"#0084ff",bold:!0,align:"left"}}]}]},{type:"Label",props:{y:580,x:215,"var":"txtEmptyInfo",text:"未发现其它矿脉",styleSkin:"comp/label.png",fontSize:40,color:"#fbf8f8",bold:!0,align:"center"}},{type:"CheckBox",props:{y:345,x:431,width:232,"var":"checkFlter",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"只显示可抢夺矿脉",height:29}},{type:"Text",props:{y:345,x:0,text:"其他矿脉",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",
props:{y:72,x:530,width:130,"var":"btnLog",stateNum:2,skin:"comp/button.png",label:"矿脉记录",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:257,x:75,"var":"infoView"},child:[{type:"Image",props:{y:0,x:0,width:600,skin:"comp/bg.png",height:500,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:83,x:25,wordWrap:!0,width:550,text:"1、每人每天最多掠夺5次，掠夺成功后将获得对方1小时产出资源，该奖励由系统产出，被劫掠者不损失，但会损失20分钟产出时间，并增加保护时间1小时。\\n2、矿脉最后倒计时20分钟，被劫掠后，则可直接收获资源。\\n3、开服10天后自动进入跨服。\\n4、被掠夺两次后，无法再进行掠夺。\\n5、当前“地灵矿脉”系统为测试版，不排除随时调整优化的可能。",styleSkin:"comp/label.png",leading:10,height:248,fontSize:24,color:"#ffffff",bold:!1,align:"left"}},{type:"Text",props:{y:26,x:25,wordWrap:!0,width:550,text:"玩法说明",fontSize:34,color:"#ffffff",bold:!0,align:"center"}},{type:"Button",props:{y:410,x:235,width:130,stateNum:2,skin:"comp/button.png",name:"btnNow",label:"我知道了",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Button",props:{y:62,x:517,width:90,"var":"btnExplain",stateNum:2,skin:"comp/button.png",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),_A=function(e){function t(){this.tabMater=null,this.aimTalisman=null,this.listTalisman=null,this.stoneMater=null,this.btnGoBuy=null,this.costSilver=null,this.ntc=null,this.btnSubmit=null,t.__super.call(this)}o(t,"ui.model.TalismanUpgradeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:298,width:145,text:"法宝升品",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:128,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Tab",props:{y:404,width:290,"var":"tabMater",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,left:25,labels:"普通法宝,天籁石",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:51.5,labelSize:26}},{type:"Text",props:{y:488,x:25,text:"选择材料：",fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}},{type:"TalismanCell",props:{y:176,x:10,"var":"aimTalisman",runtime:"ui.model.pops.TalismanCellUI"}},{type:"List",props:{y:527,x:10,width:730,"var":"listTalisman",spaceY:5,repeatY:3,height:613},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:201,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:114,x:565,width:130,stateNum:2,skin:"comp/button.png",sizeGrid:"9,37,8,16",name:"btnPutin",label:"放入材料",height:60,labelSize:26}},{type:"TalismanCell",props:{name:"talisman",runtime:"ui.model.pops.TalismanCellUI"}}]}]},{type:"Box",props:{y:527,x:767,width:732,"var":"stoneMater",height:613},child:[{type:"HTMLDivElement",props:{y:2,x:2,width:722,name:"costNum",innerHTML:"消耗天籁石：",height:48}},{type:"List",props:{x:0,width:732,vScrollBarSkin:"comp/vscroll.png",top:55,spaceY:5,name:"stones",bottom:0},child:[{type:"Box",props:{name:"render"},child:[{type:"PropCellSimple",props:{y:0,x:0,name:"props",runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"CheckBox",props:{y:17,x:520,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"sureUse",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认使用",height:29}}]}]},{type:"Button",props:{y:84,x:301,width:130,"var":"btnGoBuy",stateNum:2,skin:"comp/button.png",sizeGrid:"9,37,8,16",label:"去购买",height:60,labelSize:26}}]},{type:"Text",props:{y:1186,x:21,text:"花费铜币：",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:1181,x:147,skin:"ui/tongbi.png"}},{type:"Label",props:{y:1186,x:192,"var":"costSilver",text:"99999",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:404,width:100,"var":"ntc",stateNum:2,skin:"comp/button.png",sizeGrid:"6,5,6,8",right:25,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:51.5,labelSize:26}},{type:"Button",props:{y:1165,x:310,width:130,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",sizeGrid:"9,37,8,16",label:"开始锻造",height:60,labelSize:26}},{type:"Text",props:{y:1246,text:"小贴示：升品后现有属性仅增加数值，并有概率获得新的属性",right:28,left:20,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:1284,text:"法宝可以普通合成到红色",right:444,left:20,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Qw),mA=function(e){function t(){this.pwd=null,this.btnJoin=null,this.dName=null,t.__super.call(this)}o(t,"ui.model.team.TeamJoinPwdUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:216,x:25,width:700,skin:"ui/fangkuang.png",height:489,sizeGrid:"10,10,10,10"}},{type:"TextInput",props:{y:450,x:257,width:397,"var":"pwd",type:"text",skin:"comp/textinput.png",height:52,fontSize:32,bold:!1,align:"center"}},{type:"Text",props:{y:457,x:64,width:148,text:"入队口令：",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:568,x:183,width:147,"var":"btnJoin",stateNum:2,skin:"comp/button.png",label:"加入",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:568,x:419,width:147,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:342,x:257,width:397,"var":"dName",styleSkin:"comp/label.png",pivotY:5,height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:342,x:64,width:147,text:"队伍名字:",pivotY:5,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Qw),gA=function(e){function t(){this.title=null,this.members=null,this.btnEnter=null,this.dName=null,t.__super.call(this)}o(t,"ui.model.team.TeamSelfUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:70,x:198,width:354,"var":"title",text:"我的组队",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1136,x:9,width:732,text:"小贴示：队员次数用完，可继续战斗，但该队员将不再获得奖励。",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:200,x:17,"var":"members",spaceY:15,repeatY:3},child:[{type:"Box",props:{y:0,x:0,width:715,name:"render",height:178},child:[{type:"Image",props:{y:0,x:0,width:713,skin:"ui/fangkuang.png",height:178,sizeGrid:"10,10,10,10"}},{type:"Clip",props:{y:69,x:129,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Button",props:{y:102,x:642,width:58,stateNum:2,skin:"ui/btn_arrow_0.png",name:"btnDown",height:58}},{type:"Button",props:{y:17,x:642,width:58,stateNum:2,skin:"ui/btn_arrow_1.png",name:"btnUp",height:58}},{type:"Label",props:{y:78,x:20,text:"??",styleSkin:"comp/label.png",name:"name",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:78,x:184,text:"Lv.99",styleSkin:"comp/label.png",name:"level",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:19,x:20,text:"【叫我壕哥】",styleSkin:"comp/label.png",name:"title",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:137,x:20,width:216,text:"剩余进入次数：1",styleSkin:"comp/label.png",name:"times",height:26,color:"#00dc24",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:15,x:348,text:"防御+10%",styleSkin:"comp/label.png",name:"p1",fontSize:26,color:"#00dc24",bold:!0,align:"center"}},{type:"Label",props:{y:15,x:485,text:"攻击-10%",styleSkin:"comp/label.png",name:"p2",fontSize:26,color:"#e70626",bold:!0,align:"center"}},{type:"Label",props:{y:78,x:380,width:56,text:"护卫",styleSkin:"comp/label.png",name:"lbNpc",height:28,fontSize:28,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:138,x:321,width:107,underline:!0,text:"查看信息",styleSkin:"comp/label.png",name:"times",height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"ComboBox",props:{y:73,x:308,width:66,skin:"comp/combobox.png",sizeGrid:"7,27,8,12",selectedIndex:0,name:"typeNpc",labels:"随机,  金,  木,  水,  火,  土",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",height:38,itemSize:20,labelSize:20}},{type:"Button",props:{y:50,x:471,width:128,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"招募护卫",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:114,x:471,width:128,stateNum:2,skin:"comp/button.png",name:"btnChg",label:"转移队长",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Button",props:{y:796,x:311,width:128,"var":"btnEnter",stateNum:2,skin:"comp/button.png",label:"开始战斗",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"ComboBox",props:{y:149,x:324,width:102,"var":"dName",skin:"comp/combobox.png",sizeGrid:"7,27,8,12",selectedIndex:0,labelSize:32,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:32,height:38}}]},t}(Qw),vA=function(e){function t(){this.teams=null,this.inputDesc=null,this.autoStart=null,this.btnCreate=null,this.pageUP=null,this.pageDown=null,this.title=null,this.dPage=null,this.pageFresh=null,t.__super.call(this)}o(t,"ui.model.team.TeamListUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1344},child:[{type:"List",props:{y:215,x:25,width:700,"var":"teams",vScrollBarSkin:"comp/vscroll.png",spaceY:15,repeatY:10,height:800},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:74,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:1,x:330,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:27,x:17,width:296,text:"来个火",styleSkin:"comp/label.png",pivotY:5,name:"dName",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:7,x:356,width:147,text:"成员数量:1/3",styleSkin:"comp/label.png",name:"dState",height:32,fontSize:22,color:"#fbf8f8",bold:!0}},{type:"Button",props:{y:13,x:583,width:100,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"加入",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:1,x:550,width:4,skin:"ui/vline_white.png",height:67,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:38,x:356,width:164,text:"等级范围:10~20",styleSkin:"comp/label.png",name:"dLevel",height:32,fontSize:22,color:"#fbf8f8",bold:!0}}]}]},{type:"Image",props:{y:1118,x:25,width:700,skin:"ui/fangkuang.png",height:212,sizeGrid:"10,10,10,10"}},{type:"TextInput",props:{y:1161,x:258,width:397,"var":"inputDesc",type:"text",skin:"comp/textinput.png",prompt:"默认无",height:52,fontSize:32,bold:!1,align:"center"}},{type:"Text",props:{y:1168,x:64,width:148,text:"入队口令：",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"CheckBox",props:{y:1242,x:73,width:205,"var":"autoStart",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#00dc24",labelBold:!0,label:"自动开始",height:29}},{type:"Button",props:{y:1230,x:326,width:203,"var":"btnCreate",stateNum:2,skin:"comp/button.png",label:"创建队伍",height:64,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1049,x:25,width:218,text:"创建一个队伍",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1040,x:303,width:100,"var":"pageUP",stateNum:2,skin:"comp/button.png",label:"上一页",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1040,x:490,width:100,"var":"pageDown",stateNum:2,skin:"comp/button.png",label:"下一页",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:170,x:25,width:152,text:"队伍列表",styleSkin:"comp/label.png",name:"dName",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Label",props:{y:70,x:314,"var":"title",text:"梼杌副本",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:1049,x:407,width:81,"var":"dPage",text:"1/10",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:1040,x:616,width:100,"var":"pageFresh",stateNum:2,skin:"comp/button.png",label:"刷新",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),yA=function(e){function t(){this.dungeons=null,t.__super.call(this)}o(t,"ui.model.team.TeamGateUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:170,x:25,width:700,"var":"dungeons",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:851},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:175},child:[{type:"Image",props:{width:700,skin:"ui/fangkuang.png",height:178,sizeGrid:"10,10,10,10"}},{type:"Image",props:{y:2,x:200,skin:"ui/vline_white.png",height:172,sizeGrid:"5,0,5,0"}},{type:"Label",props:{y:57,x:102,text:"梼杌",styleSkin:"comp/label.png",name:"dName",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"Label",props:{y:95,x:102,text:"40级",styleSkin:"comp/label.png",name:"dLevel",fontSize:32,color:"#fbf8f8",bold:!0,anchorX:.5,align:"center"}},{type:"HTMLDivElement",props:{y:36,x:217,width:460,styleSkin:"comp/html.png",name:"info",height:112}}]}]},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:311,text:"组队副本",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1224,x:9,width:732,text:"小贴示：开服30天后组队功能将开启跨服模式",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),bA=function(e){function t(){this.logs=null,t.__super.call(this)}o(t,"ui.model.team.TeamLogsUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:170,x:25,width:152,text:"最近奖励",styleSkin:"comp/label.png",name:"dName",height:32,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:324,text:"组队副本",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:215,x:25,width:700,"var":"logs",vScrollBarSkin:"comp/vscroll.png",spaceY:10,height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:155},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:150,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:5,x:26,width:650,name:"log",height:137}}]}]},{type:"Image",props:{y:120,width:720,skin:"ui/toplink.png",right:15,left:15,height:29}}]},t}(Qw),EA=function(e){function t(){this.title=null,this.serviceStop=null,this.btnClose=null,this.back=null,this.noticePanel=null,this.notice=null,t.__super.call(this)}o(t,"ui.model.GameNoticeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:204,x:25,width:700,skin:"comp/bg.png",height:419,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:170,x:323,"var":"title",text:"系统公告",styleSkin:"comp/label.png",color:"#e70626",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:641,x:193,"var":"serviceStop",text:"当前服务器维护中，请稍后再试",styleSkin:"comp/label.png",color:"#e70626",align:"center",fontSize:26}},{type:"Button",props:{y:539,x:305,width:140,"var":"btnClose",stateNum:2,skin:"comp/button.png",name:"close",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:539,x:198,"var":"back"},child:[{type:"Button",props:{y:0,x:0,width:140,stateNum:2,skin:"comp/button.png",name:"close",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:0,x:214,width:140,stateNum:2,skin:"comp/button.png",name:"back",label:"返回",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Panel",props:{y:230,x:45,width:660,"var":"noticePanel",vScrollBarSkin:" ",height:297},child:[{type:"HTMLDivElement",props:{y:0,x:0,width:662,"var":"notice",styleSkin:"comp/html.png",innerHTML:"欢迎来到无尽洪荒，目前游戏处于调试阶段，若游戏中遇到问题，请及时联系管理员。",height:200}}]}]},t}(Qw),xA=function(e){function t(){this.tabBar=null,this.vipList=null,this.stoneList=null,this.shop_name=null,this.goldList=null,this.mVip=null,this.hotStoneList=null,this.btnExchange=null,this.bookshop=null,this.equipGhost=null,this.boxWelfare=null,this.btnRecord=null,this.boxDaily=null,this.jadeList=null,this.iosAlert=null,t.__super.call(this)}o(t,"ui.model.MacketUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Tab",props:{y:170,x:25,width:707,"var":"tabBar",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:0,labels:"功能,珍宝,充值",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:52,labelSize:24}},{type:"List",props:{y:240,x:25,width:700,"var":"vipList",vScrollBarSkin:" ",spaceY:10,height:1050},child:[{type:"Box",props:{y:0,x:0,width:720,name:"render",height:188},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:27,x:24,text:"经验+5%",styleSkin:"comp/label.png",name:"info",height:31,fontSize:32,color:"#f4eb13",bold:!1,align:"left"}},{type:"Button",props:{y:92,x:541,width:130,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:41,x:501,width:209,text:"仅需6元宝",styleSkin:"comp/label.png",overflow:"visible",name:"costGold",height:44,fontSize:32,color:"#f4b922",align:"center"}},{type:"Label",props:{y:85,x:22,text:"当前经验+15%",styleSkin:"comp/label.png",name:"current",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:86,x:178,text:" +15%",styleSkin:"comp/label.png",name:"currentVip",fontSize:26,color:"#00dc24",align:"left"}},{type:"Label",props:{y:131,x:22,width:184,text:"最多可够买10次",styleSkin:"comp/label.png",name:"maxCount",height:42,fontSize:32,color:"#b0bcb0",align:"left"}},{type:"Label",props:{y:86,x:264,text:" +15%",styleSkin:"comp/label.png",name:"currentPay",fontSize:26,color:"#c527ff",align:"left"}},{type:"Label",props:{y:27,x:328,underline:!0,text:"说明",styleSkin:"comp/label.png",name:"ntc",mouseEnabled:!0,fontSize:32,color:"#0084ff",bold:!1,align:"left"}}]},{type:"Text",props:{y:1057,x:-25,wordWrap:!0,width:750,text:"    小贴示：该功能购买后永久生效。",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}}]},{type:"List",props:{y:240,x:797,width:700,"var":"stoneList",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:188},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:30,width:144,text:"??",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:61,x:30,wordWrap:!0,width:466,text:"???",styleSkin:"comp/label.png",name:"desc",leading:5,height:104,fontSize:26,color:"#f4f6fb",align:"left"}},{type:"Button",props:{y:103,x:536,width:130,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:54,x:495,width:208,text:"仅需6元宝",styleSkin:"comp/label.png",overflow:"visible",name:"costGold",height:43,fontSize:32,color:"#f4b922",bold:!0,align:"center"}},{type:"Label",props:{y:19,x:496,width:206,underline:!0,text:"原价6元宝",styleSkin:"comp/label.png",overflow:"visible",name:"costGoldOld",height:32,fontSize:28,color:"#cccccc",align:"center"}}]}]},{type:"Button",props:{y:60,width:63,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Label",props:{y:70,x:296,width:157,"var":"shop_name",text:"商城",styleSkin:"comp/label.png",height:48,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:240,x:1568,width:700,"var":"goldList",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:188},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:48,x:115,text:"300",styleSkin:"comp/label.png",name:"golden",height:42,fontSize:32,color:"#f4eb13",bold:!0,align:"left"}},{type:"Button",props:{y:68,x:532,width:130,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:101,x:112,width:126,text:"仅需6元",styleSkin:"comp/label.png",name:"money",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:70,x:3,width:149,text:"送10%",styleSkin:"comp/label.png",rotation:-30,name:"lbRate",height:41,fontSize:32,color:"#0cd41c",bold:!0,align:"left"}},{type:"Label",props:{y:48,x:168,width:179,text:" + 30元宝",styleSkin:"comp/label.png",name:"goldenAdd",height:44,fontSize:32,color:"#0cd41c",bold:!0,align:"left"}},{type:"Label",props:{y:147,x:13,width:685,text:"648以内档位，每档都有一次双倍机会",styleSkin:"comp/label.png",name:"des",height:32,fontSize:26,color:"#6b9eec",align:"center"}},{type:"Label",props:{y:101,x:317,width:126,underline:!0,text:"充值仙玉",styleSkin:"comp/label.png",name:"txtJade",mouseEnabled:!0,fontSize:32,color:"#0cd41c",bold:!0,align:"left"}}]}]},{type:"Box",props:{y:240,x:-740,width:700,"var":"mVip",height:1097},child:[{type:"List",props:{y:0,x:0,width:700,spaceY:20,repeatY:2,name:"monthList",height:736},child:[{type:"Box",props:{y:0,x:0,width:720,name:"render",height:356},child:[{type:"Box",props:{y:0,x:0,width:713,name:"opened",height:355},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:351,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:22,x:238,width:236,text:"黄金月卡（30天）",styleSkin:"comp/label.png",name:"name",height:35,fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"Label",props:{y:125,x:221,width:132,text:"今日可领取：",styleSkin:"comp/label.png",name:"desc",height:29,color:"#f4f6fb",align:"left",fontSize:26}},{type:"Button",props:{y:254,x:577,width:102,stateNum:2,skin:"comp/button.png",name:"ntc",label:"详情",height:65,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:83,x:221,width:271,text:"已领取100元宝",styleSkin:"comp/label.png",name:"goldGeted",height:34,color:"#00dc24",align:"left",fontSize:26}},{type:"Button",props:{y:250,x:359,width:174,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"立刻激活",height:73,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:126,x:368,width:116,text:"9999元宝",styleSkin:"comp/label.png",name:"todayGold",height:30,color:"#fffc00",align:"left",fontSize:26}},{type:"Button",props:{y:105,x:576,width:103,stateNum:2,skin:"comp/button.png",name:"btnAward",label:"领取",height:61,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:177,x:206,text:"商城",fontSize:26,color:"#f4f6fb",align:"left"}},{type:"Label",props:{y:178,x:276,width:179,text:"所有功能增加1级",styleSkin:"comp/label.png",name:"funAdd",height:33,color:"#0084ff",align:"left",fontSize:26}},{type:"Button",props:{y:250,x:141,width:174,stateNum:2,skin:"comp/button.png",name:"btnBuyMonthMore",label:"组合购买",height:73,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:0,x:0,width:716,name:"closed",height:350},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:350,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:17,x:223,width:250,text:"黄金月卡（30天）",styleSkin:"comp/label.png",name:"name",height:26,fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"Label",props:{y:108,x:13,width:686,text:"激活后可直接领取280元宝，随后每日领取30元宝",styleSkin:"comp/label.png",name:"desc",height:40,fontSize:28,color:"#f4f6fb",align:"center"}},{type:"Label",props:{y:60,x:257,width:169,text:"价格：28元",styleSkin:"comp/label.png",name:"costRmb",height:32,fontSize:32,color:"#00dc24",align:"center"}},{type:"Label",props:{y:152,x:203,width:308,text:"累积可领取1180元宝",styleSkin:"comp/label.png",name:"descTotal",height:29,fontSize:32,color:"#c527ff",align:"center"}},{type:"Text",props:{y:195,x:202,text:"商城",fontSize:32,color:"#f4f6fb",align:"left"}},{type:"Label",props:{y:195,x:274,width:171,text:"所有功能增加1级",styleSkin:"comp/label.png",name:"funAdd",height:31,fontSize:32,color:"#0084ff",align:"left"}},{type:"Button",props:{y:250,x:363,width:170,stateNum:2,skin:"comp/button.png",name:"btnBuy",labelSize:32,label:"立刻激活",height:70,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:250,x:576,width:100,stateNum:2,skin:"comp/button.png",name:"ntc",labelSize:32,label:"详情",height:70,sizeGrid:"4,4,4,4"}},{type:"Button",props:{y:250,x:143,width:174,stateNum:2,skin:"comp/button.png",name:"btnBuyMonthMore",label:"组合购买",height:73,sizeGrid:"4,4,4,4",labelSize:26}}]}]}]},{type:"Text",props:{y:767,x:-17,wordWrap:!0,width:750,text:"    小贴示：两种月卡同时激活，加成叠加，组队副本每日4次。",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"left"}},{type:"Text",props:{y:734,x:-17,wordWrap:!0,width:750,text:"    激活任意月卡：签到额外获得10元宝，每日10次福利加速",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"left"}},{type:"Box",props:{y:814,x:0,width:716,visible:!1,name:"jadeCard",height:263},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:258,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:17,x:214,width:287,text:"商会卡（30天）",styleSkin:"comp/label.png",name:"name",height:26,fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"Label",props:{y:108,x:13,width:686,text:"激活后可在交易所上架出售物品",styleSkin:"comp/label.png",name:"desc",height:40,fontSize:28,color:"#f4f6fb",align:"center"}},{type:"Label",props:{y:60,x:98,width:520,text:"价格：28元",styleSkin:"comp/label.png",name:"costRmb",height:32,fontSize:32,color:"#00dc24",align:"center"}},{type:"Button",props:{y:161,x:273,width:170,stateNum:2,skin:"comp/button.png",name:"btnBuy",labelSize:32,label:"立刻激活",height:70,sizeGrid:"4,4,4,4"}}]},{type:"Box",props:{y:807,x:-1,width:701,visible:!1,name:"vipExtCard",height:271},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:267,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:17,x:193,width:315,text:"钻石月卡（30天）",styleSkin:"comp/label.png",name:"name",height:34,fontSize:32,color:"#e70626",bold:!0,align:"center"}},{type:"Label",props:{y:89,x:7,width:686,text:"购买后开通离线开宝箱功能（30天）\\n随后每日可领取：",styleSkin:"comp/label.png",name:"desc",leading:2,height:57,fontSize:26,color:"#0084ff",align:"center"}},{type:"Label",props:{y:51,x:98,width:520,text:"价格：198元",styleSkin:"comp/label.png",name:"costRmb",height:32,fontSize:32,color:"#00dc24",align:"center"}},{type:"Button",props:{y:186,x:263,width:174,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"立刻激活",height:73,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:37,x:577,width:103,stateNum:2,skin:"comp/button.png",name:"btnAward",label:"领取",height:61,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:150,x:34,width:633,text:"【密阁之钥】*1、【傀儡护卫】*1、【灵珠碎片】*20",styleSkin:"comp/label.png",leading:2,height:41,fontSize:26,color:"#e70626",align:"center"}}]}]},{type:"List",props:{y:240,x:2340,width:700,"var":"hotStoneList",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:188},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:188,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:30,width:506,text:"??",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Button",props:{y:93,x:536,width:130,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:31,x:505,width:182,text:"仅需6元",styleSkin:"comp/label.png",name:"costGold",height:59,fontSize:32,color:"#f4b922",bold:!0,align:"center"}},{type:"HTMLDivElement",props:{y:64,x:34,width:497,styleSkin:"comp/html.png",name:"info",height:108}},{type:"Label",props:{y:110,x:508,width:182,text:"今日已购买",styleSkin:"comp/label.png",name:"buyed",height:31,fontSize:26,color:"#0cd41c",bold:!0,align:"center"}}]}]},{type:"Button",props:{y:171,width:130,visible:!1,"var":"btnExchange",stateNum:2,skin:"comp/button.png",right:-165,label:"交易所",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:240,x:-1504,width:700,"var":"bookshop",height:1050},child:[{type:"List",props:{y:0,x:0,width:709,spaceY:10,repeatY:5,name:"books",height:625},child:[{type:"PropCellSimple",props:{y:0,x:0,name:"render",runtime:"ui.model.pops.PropCellSimpleUI"}}]},{type:"Text",props:{y:765,wordWrap:!0,width:700,text:"小贴士：每周六、日各刷新1次，等级范围内随机出现器灵，绑定不可交易，购买数量与累充档位相关。",left:15,leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:633,x:19,width:201,text:"剩余可购买个数：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:634,x:213,width:82,text:"0",styleSkin:"comp/label.png",name:"lbNum",height:27,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}}]},{type:"List",props:{y:240,x:3111,width:700,"var":"equipGhost",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:247},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:233,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:30,width:144,text:"??",styleSkin:"comp/label.png",name:"name",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:61,x:30,wordWrap:!0,width:466,text:"???",styleSkin:"comp/label.png",name:"desc",leading:5,height:104,fontSize:26,color:"#f4f6fb",align:"left"}},{type:"Button",props:{y:153,x:536,width:130,stateNum:2,skin:"comp/button.png",name:"btnAuto",label:"自动",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:41,x:495,width:208,text:"6元宝",styleSkin:"comp/label.png",overflow:"visible",name:"costGold",height:43,fontSize:32,color:"#f4b922",bold:!0,align:"center"}},{type:"Button",props:{y:153,x:381,width:130,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"开启",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:155,x:225,width:130,stateNum:2,skin:"comp/button.png",name:"btnNtc",label:"概率公示",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:155,x:70,width:130,stateNum:2,skin:"comp/button.png",name:"btnNtc1",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"融灵属性",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Box",props:{y:240,x:-2269,width:700,"var":"boxWelfare",height:1050},child:[{type:"Box",props:{y:0,x:0,name:"boxAd"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:400,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:50,x:7,width:686,text:"观看广告可以获得随机福利",height:32,fontSize:32,color:"#f4b922",bold:!0,align:"center"}},{type:"Text",props:{y:315,x:37,width:641,text:"小贴士：激活月卡可以直接跳过广告",height:28,fontSize:28,color:"#6b9eec",align:"center"}},{type:"Button",props:{y:130,x:233,width:250,stateNum:2,skin:"comp/button.png",name:"btnWelfare",label:"福利广告",height:70,sizeGrid:"4,4,4,4",labelSize:26},child:[{type:"Image",props:{y:15,x:15,width:48,skin:"ui/display.png",name:"icon",height:40}}]},{type:"Text",props:{y:259,x:197,width:271,text:"今日剩余福利次数：",fontSize:28,
color:"#f4f6fb",align:"center"}},{type:"Label",props:{y:259,x:456,width:50,text:"xx",styleSkin:"comp/label.png",name:"count",height:40,fontSize:28,color:"#0cd41c",align:"center"}}]},{type:"Box",props:{y:421,x:0,visible:!1,name:"boxWeek"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:220,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:20,x:175,width:365,top:20,text:"每周礼包",styleSkin:"comp/label.png",name:"title",fontSize:32,color:"#3dff00",align:"center"}},{type:"Label",props:{y:84,x:17,width:665,text:"激活后连续领7天好礼，累计300%优惠。",styleSkin:"comp/label.png",name:"lbActTime",height:32,fontSize:32,color:"#ad16f4",align:"center"}},{type:"Button",props:{y:147,x:291,width:133,stateNum:2,skin:"comp/button.png",name:"btnWeekSure",label:"查看",height:53,bottom:20,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Box",props:{y:662,x:0,visible:!1,name:"boxDemon"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:327,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:20,x:175,width:365,top:20,text:"每日福利",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#3dff00",align:"center"}},{type:"Label",props:{y:82,x:29,width:314,text:"随机4级伏魔装备",styleSkin:"comp/label.png",name:"award1",height:32,fontSize:32,color:"#ad16f4",align:"right"}},{type:"Button",props:{y:137,x:287,width:133,stateNum:2,skin:"comp/button.png",name:"demonAward",label:"免费领取",height:53,bottom:137,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:217,x:46,width:607,text:"再领取7次后伏魔装备等级将提升",styleSkin:"comp/label.png",name:"lbNext",height:32,fontSize:32,color:"#ffffff",align:"center"}},{type:"Text",props:{y:282,x:7,width:686,text:"小贴士：单日满足累充条件可获得额外领取次数",name:"desc",fontSize:28,color:"#6b9eec",align:"center"}},{type:"Label",props:{x:167,width:365,top:148,text:"今日已领完",styleSkin:"comp/label.png",name:"lbTime",height:32,fontSize:32,color:"#3dff00",align:"center"}},{type:"Label",props:{y:82,x:338,width:314,text:"【腐蚀之精】*1",styleSkin:"comp/label.png",name:"award2",height:32,fontSize:32,color:"#0084ff"}}]}]},{type:"Button",props:{y:68,width:130,"var":"btnRecord",stateNum:2,skin:"comp/button.png",left:39,label:"消费记录",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Box",props:{y:240,x:3883,width:712,"var":"boxDaily",height:1050},child:[{type:"Box",props:{y:0,x:0,width:700,name:"daily"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:309,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:30,text:"??",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:61,x:30,wordWrap:!0,width:639,text:"???",styleSkin:"comp/label.png",name:"desc",leading:5,height:61,fontSize:26,color:"#f4f6fb",align:"left"}},{type:"Button",props:{y:203,x:487,width:178,stateNum:2,skin:"comp/button.png",name:"btnPay",label:"直充购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:160,x:74,width:208,text:"仅需6元宝",styleSkin:"comp/label.png",overflow:"visible",name:"costGold",height:43,fontSize:30,color:"#f4b922",bold:!0,align:"center"}},{type:"Label",props:{y:123,x:74,width:208,underline:!0,text:"原价6元宝",styleSkin:"comp/label.png",overflow:"visible",name:"costGoldOld",height:32,fontSize:28,color:"#cccccc",align:"center"}},{type:"Button",props:{y:203,x:93,width:178,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"元宝购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:160,x:468,width:208,text:"仅需18元",styleSkin:"comp/label.png",overflow:"visible",name:"costRmb",height:43,fontSize:30,color:"#0cd41c",bold:!0,align:"center"}},{type:"Label",props:{y:161,x:254,width:208,text:"今日已购买",styleSkin:"comp/label.png",overflow:"visible",name:"lbBuyed",height:43,fontSize:32,color:"#0cd41c",bold:!0,align:"center"}},{type:"Text",props:{y:269,x:80,width:551,text:"小贴士：每日限购一次，每日凌晨刷新。",fontSize:26,color:"#6b9eec",bottom:14,bold:!1,align:"center"}}]},{type:"Box",props:{y:328,x:0,width:700,name:"pearl",height:326},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:316,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:14,x:30,text:"灵珠礼包",styleSkin:"comp/label.png",name:"name",fontSize:32,color:"#0cd41c",bold:!0,align:"left"}},{type:"Box",props:{y:69,x:90,name:"contentPearl"},child:[{type:"Button",props:{y:147,x:397,width:178,stateNum:2,skin:"comp/button.png",name:"btnPayPearl2",label:"648元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:75,x:397,width:178,stateNum:2,skin:"comp/button.png",name:"btnPayPearl1",label:"98元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{x:397,width:178,stateNum:2,skin:"comp/button.png",name:"btnPayPearl0",label:"6元",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:14,underline:!0,text:"60元宝+2灵珠碎片",styleSkin:"comp/label.png",overflow:"visible",name:"txtPearl0",fontSize:28,color:"#0cd41c",align:"center"}},{type:"Label",props:{y:89,underline:!0,text:"980元宝+45灵珠碎片",styleSkin:"comp/label.png",overflow:"visible",name:"txtPearl1",fontSize:28,color:"#fffc00",align:"center"}},{type:"Label",props:{y:161,underline:!0,text:"6480元宝+350灵珠碎片",styleSkin:"comp/label.png",overflow:"visible",name:"txtPearl2",fontSize:28,color:"#c527ff",align:"center"}}]},{type:"Label",props:{y:139,x:252,width:208,text:"今日已购买",styleSkin:"comp/label.png",overflow:"visible",name:"lbBuyed",height:43,fontSize:32,color:"#0cd41c",bold:!0,align:"center"}},{type:"Text",props:{y:280,x:112,width:487,text:"小贴士：每日只能三选一购买一次",fontSize:26,color:"#6b9eec",bottom:20,bold:!1,align:"center"}}]}]},{type:"Image",props:{y:129,skin:"ui/toplink.png",right:15,left:15}},{type:"List",props:{y:240,x:1872,width:700,"var":"jadeList",vScrollBarSkin:"comp/vscroll.png",spaceY:15,height:1003},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:137,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:18,x:45,text:"6仙玉",styleSkin:"comp/label.png",name:"jade",height:42,fontSize:32,color:"#f4eb13",bold:!0,align:"left"}},{type:"Button",props:{y:38,x:532,width:130,stateNum:2,skin:"comp/button.png",name:"btnBuy",label:"充值",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:71,x:42,width:126,text:"仅需6元",styleSkin:"comp/label.png",name:"money",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}}]}]},{type:"Box",props:{y:1104,x:25,"var":"iosAlert"},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",height:219,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:43,x:14,wordWrap:!0,width:671,text:"    官方将会持续调查、收集以及监控所有影响用户公平游戏的行为( 包括第三方代充、刷元宝、使用代金券折扣充值后恶意违规低价售卖盈利等) 行为，并对违规角色账号进行封停处理，最高永久封号，造成的任何损失将玩家自行承担，请玩家重视 ! 为了维护游戏的公平和秩序，保障各位玩家的利益和账号信息安全，请不要使用第三方进行代充！",styleSkin:"comp/label.png",leading:3,height:165,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:13,x:14,text:"严厉打击第三方代充声明:",styleSkin:"comp/label.png",leading:3,fontSize:24,color:"#e70626",bold:!0,align:"left"}}]}]},t}(Qw),SA=function(e){function t(){this.emptTxt=null,this.dressedBlood=null,this.canUsedBloods=null,t.__super.call(this)}o(t,"ui.model.BloodDressChangeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:302,width:146,text:"当前血脉",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:294,x:25,text:"可用血脉",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:608,x:312,width:126,"var":"emptTxt",text:"空空如也",styleSkin:"comp/label.png",height:44,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Box",props:{y:170,x:25,width:700,"var":"dressedBlood",height:113},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",name:"bg",height:111,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:9,x:17,text:"金龙血脉",styleSkin:"comp/label.png",name:"name",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:-2,x:113,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:40,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:34,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:29,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:9,x:274,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute3",height:34,fontSize:24,color:"#1440ee",align:"left"}}]},{type:"List",props:{y:336,x:25,width:700,"var":"canUsedBloods",vScrollBarSkin:"comp/vscroll.png",spaceY:5,height:950},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:110},child:[{type:"Image",props:{y:0,x:0,width:700,skin:"ui/fangkuang.png",name:"bg",height:109,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:10,x:15,text:"金龙血脉",styleSkin:"comp/label.png",name:"name",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:0,x:119,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:42,x:15,width:135,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:32,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:15,width:142,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:33,fontSize:24,color:"#1440ee",align:"left"}},{type:"Button",props:{y:30,x:609,width:80,stateNum:2,skin:"comp/button.png",name:"changeBtn",label:"更换",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:10,x:282,width:135,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute3",height:32,fontSize:24,color:"#1440ee",align:"left"}}]}]},{type:"Image",props:{top:130,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),wA=function(e){function t(){this.bloodNow=null,this.bloodAfter=null,this.rateNow=null,this.costSilver=null,this.btmSure=null,this.btnAuto=null,t.__super.call(this)}o(t,"ui.model.BloodUpgradeLvUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:298,width:145,text:"熔炼血脉",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"PropCell",props:{y:170,x:10,"var":"bloodNow",runtime:"ui.model.pops.PropCellUI"}},{type:"Image",props:{y:407,x:348,skin:"ui/arrow.png"}},{type:"PropCell",props:{y:497,x:10,"var":"bloodAfter",runtime:"ui.model.pops.PropCellUI"}},{type:"Text",props:{y:765,x:25,width:134,text:"当前幸运值：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:765,x:187,width:159,"var":"rateNow",text:"5",styleSkin:"comp/label.png",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:728,x:25,width:117,text:"消 耗 铜 币：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:728,x:187,width:159,"var":"costSilver",text:"999999",styleSkin:"comp/label.png",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:843,x:156,width:163,"var":"btmSure",stateNum:2,skin:"comp/button.png",label:"确认熔炼",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1132,x:20,wordWrap:!0,width:709,text:"小贴示：幸运值越高熔炼成功率越高，更换血脉后熔炼等级保留。",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:843,x:439,width:163,"var":"btnAuto",stateNum:2,skin:"comp/button.png",label:"一键熔炼",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:130,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),CA=function(e){function t(){this.bloodTo=null,this.bloodFrom=null,this.btnSure=null,this.bloodAfter=null,this.btnPutin=null,this.lbIron=null,t.__super.call(this)}o(t,"ui.model.BloodMoveOrangeLvUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:298,width:145,text:"重铸血脉",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"PropCell",props:{y:200,x:10,"var":"bloodTo",runtime:"ui.model.pops.PropCellUI"}},{type:"Image",props:{y:698,x:354,skin:"ui/arrow.png"}},{type:"PropCell",props:{y:467,x:10,"var":"bloodFrom",runtime:"ui.model.pops.PropCellUI"}},{type:"Text",props:{y:167,x:28,width:117,text:"目标血脉：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:1103,x:293,width:163,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"确认重铸",height:62,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1202,x:20,wordWrap:!0,width:709,text:"小贴示：重铸后来源血脉的培养等级将转移到目标血脉",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}},{type:"Image",props:{y:131,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:434,x:34,width:117,text:"来源血脉：",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"PropCell",props:{y:768,x:10,"var":"bloodAfter",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:538,x:310,width:130,"var":"btnPutin",stateNum:2,skin:"comp/button.png",label:"先择来源",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1009,x:23,"var":"lbIron",text:"重铸需要消耗神铁1个",fontSize:26,color:"#e70626",bold:!0,align:"center"}}]},t}(Qw),TA=function(e){function t(){this.aimGhost=null,this.needIron=null,this.aimList=null,t.__super.call(this)}o(t,"ui.model.PetGhostChgNatureUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Box",props:{y:198,x:15,width:720,"var":"aimGhost",height:113},child:[{type:"Image",props:{y:0,x:0,width:712,skin:"ui/fangkuang.png",name:"bg",height:111,sizeGrid:"10,10,10,10"}},{type:"Clip",props:{y:5,x:235,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:9,x:4,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"name",height:21,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:40,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:34,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:29,fontSize:24,color:"#1440ee",align:"left"}}]},{type:"Text",props:{y:70,x:302,width:146,text:"兽魂重铸",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:375,x:381,text:"重铸消耗：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:375,x:516,width:222,"var":"needIron",text:"5个",height:26,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:375,x:33,text:"重铸预览：",left:33,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"Text",props:{y:166,x:33,text:"当前兽魂：",left:33,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"List",props:{y:408,x:15,width:720,"var":"aimList",spaceY:10,repeatY:4,height:495},child:[{type:"Box",props:{width:720,name:"render",height:113},child:[{type:"Image",props:{y:0,x:0,width:712,skin:"ui/fangkuang.png",name:"bg",height:111,sizeGrid:"10,10,10,10"}},{type:"Clip",props:{y:5,x:235,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:9,x:4,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"name",height:21,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:40,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:34,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:29,fontSize:24,color:"#1440ee",align:"left"}},{type:"Button",props:{y:27,x:555,width:130,stateNum:2,skin:"comp/button.png",name:"btnChg",label:"选择重铸",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]}]},t}(Qw),IA=function(e){function t(){this.aimTalisman=null,this.viewTalisman=null,this.keepOld=null,this.useNew=null,t.__super.call(this)}o(t,"ui.model.TalismanRebuildChoseUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.TalismanCellUI",sC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:305,width:140,text:"法宝洗炼",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:128,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:170,x:25,text:"当前法宝：",left:25,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"TalismanCell",props:{y:214,x:10,"var":"aimTalisman",runtime:"ui.model.pops.TalismanCellUI"}},{type:"Image",props:{y:543,x:348,skin:"ui/arrow.png"}},{type:"Text",props:{y:572,x:25,text:"洗炼属性：",left:25,fontSize:26,color:"#fbf8f8",bold:!1,align:"left"}},{type:"TalismanCell",props:{y:622,x:12,"var":"viewTalisman",runtime:"ui.model.pops.TalismanCellUI"}},{type:"Button",props:{y:446,x:310,width:130,"var":"keepOld",stateNum:2,skin:"comp/button.png",label:"保持现状",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:855,x:310,width:130,"var":"useNew",stateNum:2,skin:"comp/button.png",label:"选择替换",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:961,x:38,wordWrap:!0,width:673,text:"注意：选择替换后洗炼属性生效,否则视为放弃洗炼属性",leading:3,fontSize:24,color:"#fffc00",bold:!1,align:"center"}}]},t}(Qw),AA=function(e){function t(){this.title=null,this.talisman=null,t.__super.call(this)}o(t,"ui.model.TalismanOptionSuccessUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.TalismanCellUI",sC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:376,x:310,width:130,stateNum:2,skin:"comp/button.png",name:"close",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:70,x:248,width:253,"var":"title",text:"恭喜您洗炼成功",styleSkin:"comp/label.png",fontSize:32,color:"#48f656",bold:!0,align:"center"}},{type:"TalismanCell",props:{y:143,x:10,"var":"talisman",runtime:"ui.model.pops.TalismanCellUI"}}]},t}(Qw),NA=function(e){function t(){this.emptTxt=null,this.dressedGhost=null,this.chgNature=null,this.canUsedGhosts=null,t.__super.call(this)}o(t,"ui.model.PetDressGhostChangeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:302,width:146,text:"当前兽魂",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:294,x:22,width:130,text:"可用兽魂",fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:608,x:312,width:126,"var":"emptTxt",text:"空空如也",styleSkin:"comp/label.png",height:44,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Box",props:{y:170,x:20,width:720,"var":"dressedGhost",height:113},child:[{type:"Image",props:{y:0,x:0,width:712,skin:"ui/fangkuang.png",name:"bg",height:111,sizeGrid:"10,10,10,10"}},{type:"Clip",props:{y:5,x:235,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:9,x:4,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"name",height:21,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:40,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:34,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:17,width:151,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:29,fontSize:24,color:"#1440ee",align:"left"}},{type:"Button",props:{y:25,x:556,width:130,"var":"chgNature",stateNum:2,skin:"comp/button.png",label:"选择重铸",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"List",props:{y:336,x:19,width:711,"var":"canUsedGhosts",vScrollBarSkin:"comp/vscroll.png",spaceY:5,height:907},child:[{type:"Box",props:{y:0,x:0,width:712,name:"render",height:110},child:[{type:"Image",props:{y:0,x:0,width:712,skin:"ui/fangkuang.png",name:"bg",height:109,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:10,x:4,width:225,text:"【一阶】狐狸精兽魂",styleSkin:"comp/label.png",name:"name",height:36,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Clip",props:{y:2,x:231,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Label",props:{y:42,x:15,width:135,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",height:32,fontSize:24,color:"#1440ee",align:"left"}},{type:"Label",props:{y:69,x:15,width:142,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",height:33,fontSize:24,color:"#1440ee",align:"left"}},{type:"Button",props:{y:30,x:609,width:80,stateNum:2,skin:"comp/button.png",name:"changeBtn",label:"更换",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:1269,x:180,text:"小贴示：可通过残魂提炼获得兽魂",fontSize:26,color:"#6b9eec",align:"center"}}]},t}(Qw),PA=function(e){function t(){this.aimEquip=null,this.keepOld=null,this.viewEquip=null,this.useNew=null,t.__super.call(this)}o(t,"ui.model.EquipRebuildChoseUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.EquipCellUI",tC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:305,width:140,text:"装备洗炼",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,x:658,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"EquipCell",props:{y:170,x:10,"var":"aimEquip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Image",props:{y:576,x:348,skin:"ui/arrow.png"}},{type:"Button",props:{y:463,x:310,width:130,"var":"keepOld",stateNum:2,skin:"comp/button.png",label:"保持现状",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"EquipCell",props:{y:664,x:10,"var":"viewEquip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:949,x:310,width:130,"var":"useNew",stateNum:2,skin:"comp/button.png",label:"选择替换",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1082,x:38,wordWrap:!0,width:673,text:"    注意：选择替换后洗炼属性生效,否则视为放弃洗炼属性",leading:3,fontSize:24,color:"#fffc00",bold:!1,align:"left"}}]},t}(Qw),RA=function(e){function t(){this.info=null,this.clear=null,this.btnLoger=null,t.__super.call(this)}o(t,"ui.model.LoggerUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"TextArea",props:{y:95,x:14,width:728,"var":"info",vScrollBarSkin:"comp/vscroll.png",text:"游戏内置日志",skin:"comp/textarea.png",sizeGrid:"10,10,10,10",height:986,fontSize:32,color:"#f90f0b"}},{type:"Button",props:{y:15,x:670,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Button",props:{y:1110,x:591,width:120,"var":"clear",stateNum:2,skin:"comp/button.png",label:"清空",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:20,x:306,width:120,"var":"btnLoger",stateNum:2,skin:"comp/button.png",label:"调试",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),LA=function(e){function t(){this.props=null,this.title=null,this.btnChg=null,this.btnAward=null,this.btnSure=null,this.btnClose=null,this.lbCost=null,t.__super.call(this)}o(t,"ui.model.market.EquipGhostSelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"PropCell",props:{y:170,x:9,"var":"props",runtime:"ui.model.pops.PropCellUI"}},{type:"Label",props:{y:70,x:295,"var":"title",text:"恭喜您获得",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:607,x:9,width:732,text:"小贴示：开出红色以上的熔灵可以选择更换五行",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:486,x:177,width:170,"var":"btnChg",stateNum:2,skin:"comp/button.png",name:"btnChg",label:"转换五行",height:70,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:485,x:412,width:170,"var":"btnAward",stateNum:2,skin:"comp/button.png",name:"btnAward",label:"直接领取",height:70,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:400,x:290,width:170,"var":"btnSure",stateNum:2,skin:"comp/button.png",name:"btnSure",label:"确认领取",height:70,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:40,width:63,"var":"btnClose",stateNum:1,skin:"comp/btn_close.png",right:25,name:"close",height:63}},{type:"Label",props:{y:420,x:203,width:344,"var":"lbCost",text:"转换五行花费：20元宝",styleSkin:"comp/label.png",height:42,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),OA=function(e){function t(){this.title=null,this.aimQ=null,this.goldNeed=null,t.__super.call(this)}o(t,"ui.model.market.EquipGhostAutoUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:310,x:25,width:700,skin:"comp/bg.png",height:492,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:354,x:213,width:323,"var":"title",text:"自动开启熔灵宝箱",styleSkin:"comp/label.png",height:42,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:756,x:9,width:732,text:"小贴示：开出红色以上的熔灵可以选择更换五行",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:539,x:75,wordWrap:!0,width:600,text:"    您将自动开启宝箱获取选定色品质熔灵，可能花费巨大元宝，但不会超过保底次数",leading:3,fontSize:28,color:"#e70626",bold:!0,align:"left"}},{type:"Button",props:{y:649,x:187,width:170,stateNum:2,skin:"comp/button.png",name:"btnSure",label:"确认开始",height:70,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:648,x:422,width:170,stateNum:2,skin:"comp/button.png",name:"close",label:"返回",height:70,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:423,x:229,width:140,text:"选择品质：",fontSize:28,color:"#00dc24",bold:!0,align:"left"}},{type:"ComboBox",props:{y:415,x:383,width:130,"var":"aimQ",skin:"comp/combobox.png",sizeGrid:"5,30,5,4",selectedIndex:-1,labels:"选择,红色,紫色",labelSize:26,labelPadding:"0,0,0,38",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:26,height:50}},{type:"Label",props:{y:486,x:229,width:350,"var":"goldNeed",text:"最多需要次数：10",styleSkin:"comp/label.png",height:42,fontSize:28,color:"#f4b922",bold:!0,align:"left"}}]},t}(Qw),MA=function(e){function t(){this.lbTitle=null,this.panelReports=null,this.desc=null,t.__super.call(this)}o(t,"ui.model.FightingAwardsUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Label",props:{y:80,x:200,width:349,"var":"lbTitle",text:"战利品",styleSkin:"comp/label.png",name:"lbTitle",height:58,fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Panel",props:{y:141,x:45,width:660,"var":"panelReports",vScrollBarSkin:"comp/vscroll.png",height:1039}},{type:"Button",props:{y:1220,x:305,width:140,stateNum:2,skin:"comp/button.png",name:"close",label:"返回",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1294,x:9,wordWrap:!0,width:731,"var":"desc",text:"小贴士：随着怪物等级越高，材料掉落率会递减",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Qw),DA=function(e){function t(){this.aimEquip=null,this.btnSubmit=null,this.checkBox0=null,this.checkBox1=null,this.checkBox2=null,this.stoneMater=null,this.btnGoBuy=null,this.ntc=null,t.__super.call(this)}o(t,"ui.model.EquipRebuildUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:70,x:305,width:140,text:"装备洗炼",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"EquipCell",props:{y:170,x:10,"var":"aimEquip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:1024,x:310,width:130,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",label:"开始洗炼",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1213,x:11,width:727,text:"小贴示：洗炼时将需要的属性锁定，更容易洗炼出理想的装备",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"CheckBox",props:{y:257,x:322,width:97,"var":"checkBox0",stateNum:2,skin:"comp/checkbox.png",labelSize:26,labelPadding:"-3",labelColors:"#ffffff",labelBold:!0,label:"锁定",height:29}},{type:"CheckBox",props:{y:290,x:322,width:88,"var":"checkBox1",stateNum:2,skin:"comp/checkbox.png",labelSize:26,labelPadding:"-3",labelColors:"#ffffff",labelBold:!0,label:"锁定",height:28}},{type:"CheckBox",props:{y:324,x:322,width:84,"var":"checkBox2",stateNum:2,skin:"comp/checkbox.png",labelSize:26,labelPadding:"-3",labelColors:"#ffffff",labelBold:!0,label:"锁定",height:30}},{type:"Text",props:{y:468,x:38,wordWrap:!0,width:673,text:"    注意：所有未锁定的属性洗炼后都必然会变动，第一条基础属性无法洗炼，熔灵属性不可洗炼",leading:3,fontSize:24,color:"#fffc00",bold:!1,align:"left"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Box",props:{y:582,x:9,width:732,"var":"stoneMater",height:415},child:[{type:"HTMLDivElement",props:{y:2,x:2,width:722,name:"costNum",innerHTML:"消耗天籁石：",height:48}},{type:"List",props:{y:54,x:0,width:732,vScrollBarSkin:"comp/vscroll.png",spaceY:5,name:"stones",height:353},child:[{type:"Box",props:{name:"render"},child:[{type:"PropCellSimple",props:{y:0,x:0,name:"props",runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"CheckBox",props:{y:17,x:520,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"sureUse",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认使用",height:29}}]}]}]},{type:"Button",props:{y:669,x:310,width:130,"var":"btnGoBuy",stateNum:2,skin:"comp/button.png",label:"去购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:550,x:607,width:100,"var":"ntc",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),kA=function(e){function t(){this.pets=null,t.__super.call(this)}o(t,"ui.model.PetSelectUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:188,x:45,width:659,"var":"pets",spaceY:20,spaceX:20,height:827},child:[{type:"Box",props:{name:"render"},child:[{type:"Clip",props:{y:0,x:0,width:316,skin:"ui/clip_fangkuang.png",
sizeGrid:"8,7,10,27",name:"bg",index:5,height:190,clipY:6}},{type:"Text",props:{y:41,x:55,text:"灵宠",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:41,x:128,text:"野山猪",styleSkin:"comp/label.png",name:"nameTxt",fontSize:32,color:"#f19e21",align:"left"}},{type:"Text",props:{y:79,x:55,text:"等级",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:79,x:126,width:91,text:"99",styleSkin:"comp/label.png",name:"level",height:28,fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:115,x:55,text:"基础资质",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:115,x:197,width:37,text:"20",styleSkin:"comp/label.png",name:"quality",height:28,fontSize:32,color:"#22d931",align:"left"}},{type:"Clip",props:{y:33,x:228,skin:"ui/clip_wuxing.png",name:"nature",index:4,clipY:5}}]}]},{type:"Text",props:{y:70,x:260,width:230,text:"选择灵宠",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:1070,x:50,width:664,text:"小贴士：转换灵宠五行需要使用两个紫色灵宠",fontSize:24,color:"#6b9eec",bold:!1,align:"center"}}]},t}(Qw),BA=function(e){function t(){this.tabMater=null,this.listGraph=null,this.btnSubmit=null,this.costSilver=null,this.stoneMater=null,this.btnGoBuy=null,this.aimGraph=null,t.__super.call(this)}o(t,"ui.model.GraphUpgradeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Tab",props:{y:378,x:31,"var":"tabMater",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"同品图纸,天籁石",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}},{type:"Text",props:{y:443,x:31,text:"选择材料：",fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}},{type:"Text",props:{y:70,x:298,width:145,text:"图纸升品",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:483,x:13,width:735,"var":"listGraph",spaceY:5,repeatY:3,height:619},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:201,sizeGrid:"10,10,10,10"}},{type:"PropCell",props:{y:0,x:0,name:"graph",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:114,x:565,width:130,stateNum:2,skin:"comp/button.png",name:"btnPutin",label:"放入材料",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Button",props:{y:1121,x:310,width:130,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",label:"开始升品",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1240,x:2,wordWrap:!0,width:745,text:"小贴示：四个同品质同等级图纸可以提升品质，红色品质提升至紫色只能用天籁石",leading:5,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{top:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:1138,x:21,text:"花费铜币：",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:1138,x:192,"var":"costSilver",text:"99999",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:1133,x:147,skin:"ui/tongbi.png"}},{type:"Box",props:{y:486,x:767,width:732,"var":"stoneMater",height:581},child:[{type:"HTMLDivElement",props:{y:2,x:2,width:722,name:"costNum",innerHTML:"消耗天籁石：",height:48}},{type:"List",props:{y:54,x:0,width:732,vScrollBarSkin:"comp/vscroll.png",spaceY:5,name:"stones",height:527},child:[{type:"Box",props:{name:"render"},child:[{type:"PropCellSimple",props:{y:0,x:0,name:"props",runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"CheckBox",props:{y:17,x:520,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"sureUse",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认使用",height:29}}]}]},{type:"Button",props:{y:84,x:301,width:130,"var":"btnGoBuy",stateNum:2,skin:"comp/button.png",label:"去购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"PropCell",props:{y:170,x:9,"var":"aimGraph",runtime:"ui.model.pops.PropCellUI"}},{type:"Image",props:{top:120,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),VA=function(e){function t(){this.nature=null,this.nameTmp=null,this.level=null,this.btnTake=null,this.fightCd=null,this.btnFresh=null,this.freshCd=null,this.natureHost=null,this.nameHost=null,this.levelHost=null,this.lbHost=null,this.btnRobat=null,this.typeNpc=null,this.extVip=null,t.__super.call(this)}o(t,"ui.model.guard.GuardPoolUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:90,x:310,width:130,text:"护卫",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:140,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:60,x:678,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Clip",props:{y:190,x:323,"var":"nature",skin:"ui/clip_wuxing.png",index:1,clipY:5}},{type:"Label",props:{y:199,x:214,"var":"nameTmp",underline:!0,text:"??",styleSkin:"comp/label.png",mouseEnabled:!0,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:199,x:378,"var":"level",text:"Lv.99",styleSkin:"comp/label.png",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:198,x:54,text:"【待招护卫】",styleSkin:"comp/label.png",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:359,x:315,width:120,"var":"btnTake",stateNum:2,skin:"comp/button.png",label:"抓捕护卫",height:52,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:424,x:102,width:545,"var":"fightCd",text:"抓捕该护卫冷却时间：00:10:00",styleSkin:"comp/label.png",height:26,color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:544,x:315,width:120,"var":"btnFresh",stateNum:2,skin:"comp/button.png",label:"寻找刷新",height:52,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:609,x:102,width:545,"var":"freshCd",text:"免费刷新冷却时间：00:10:00",styleSkin:"comp/label.png",height:26,color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Text",props:{y:1254,x:9,width:732,text:"小贴示：目标护卫有主人将和主人战斗，刷新后冷却时间将清0",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Clip",props:{y:241,x:273,"var":"natureHost",skin:"ui/clip_wuxing.png",index:1,clipY:5}},{type:"Label",props:{y:250,x:214,"var":"nameHost",underline:!0,text:"??",styleSkin:"comp/label.png",mouseEnabled:!0,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:250,x:328,"var":"levelHost",text:"Lv.99",styleSkin:"comp/label.png",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:249,x:54,"var":"lbHost",text:"【当前家主】",styleSkin:"comp/label.png",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:942,x:285,width:180,"var":"btnRobat",stateNum:2,skin:"comp/button.png",label:"招募临时护卫",height:52,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:887,x:393,width:56,text:"护卫",styleSkin:"comp/label.png",name:"lbNpc",height:28,fontSize:28,color:"#fbf8f8",align:"left"}},{type:"ComboBox",props:{y:882,x:321,width:66,"var":"typeNpc",skin:"comp/combobox.png",sizeGrid:"7,27,8,12",selectedIndex:0,labels:"  金,  木,  水,  火,  土",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",height:38,itemSize:20,labelSize:20}},{type:"Label",props:{y:810,x:102,width:545,text:"如果一时抓捕不到，您可以先招募临时护卫\\n抓捕到护卫时将自动替换临时护卫",styleSkin:"comp/label.png",leading:3,height:63,color:"#00dc24",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:199,x:256,"var":"extVip",text:"『钻』",styleSkin:"comp/label.png",mouseEnabled:!0,color:"#e70626",bold:!0,align:"left",fontSize:26}}]},t}(Qw),FA=function(e){function t(){this.hostNature=null,this.hostName=null,this.hostLevel=null,this.hostHalo=null,this.members=null,this.donate=null,this.takeDonate=null,this.btnRevolt=null,this.lbHalo=null,this.revoltCd=null,this.hostVip=null,t.__super.call(this)}o(t,"ui.model.guard.GuardHomeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:80,x:310,width:130,text:"护卫",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:130,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:60,x:668,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Clip",props:{y:181,x:226,"var":"hostNature",skin:"ui/clip_wuxing.png",index:1,clipY:5}},{type:"Label",props:{y:190,x:137,"var":"hostName",underline:!0,text:"??",styleSkin:"comp/label.png",mouseEnabled:!0,color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:190,x:281,"var":"hostLevel",text:"Lv.",styleSkin:"comp/label.png",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:188,x:34,text:"【家主】",styleSkin:"comp/label.png",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:284,x:91,width:176,"var":"hostHalo",styleSkin:"comp/label.png",leading:3,height:132,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"List",props:{y:534,x:17,"var":"members",spaceY:15,repeatY:3},child:[{type:"Box",props:{y:0,x:0,width:715,name:"render",height:178},child:[{type:"Image",props:{y:0,x:0,width:713,skin:"ui/fangkuang.png",height:178,sizeGrid:"10,10,10,10"}},{type:"Clip",props:{y:69,x:129,skin:"ui/clip_wuxing.png",name:"nature",index:1,clipY:5}},{type:"Button",props:{y:102,x:642,width:58,stateNum:2,skin:"ui/btn_arrow_0.png",name:"btnDown",height:58}},{type:"Button",props:{y:17,x:642,width:58,stateNum:2,skin:"ui/btn_arrow_1.png",name:"btnUp",height:58}},{type:"Label",props:{y:78,x:33,text:"??",styleSkin:"comp/label.png",name:"name",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:78,x:184,text:"Lv.",styleSkin:"comp/label.png",name:"level",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:19,x:10,text:"【家主】",styleSkin:"comp/label.png",name:"title",color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:137,x:20,width:276,text:"进贡天籁石碎片宝箱：",styleSkin:"comp/label.png",name:"donate",height:26,color:"#00dc24",bold:!0,align:"left",fontSize:26}},{type:"Label",props:{y:138,x:321,width:107,underline:!0,text:"查看信息",styleSkin:"comp/label.png",name:"look",mouseEnabled:!0,height:26,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:50,x:471,width:128,stateNum:2,skin:"comp/button.png",name:"btnJoin",label:"招募护卫",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:114,x:471,width:128,stateNum:2,skin:"comp/button.png",name:"btnChg",labelColors:"#e70626",label:"解雇护卫",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:78,x:70,text:"『钻』",styleSkin:"comp/label.png",name:"vip",mouseEnabled:!0,color:"#e70626",bold:!0,align:"left",fontSize:26}}]}]},{type:"Label",props:{y:497,x:52,width:135,text:"护卫布阵",styleSkin:"comp/label.png",height:26,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Label",props:{y:1143,x:29,width:445,"var":"donate",text:"护卫进贡天籁石碎片宝箱：",styleSkin:"comp/label.png",height:26,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Button",props:{y:1128,x:491,width:120,"var":"takeDonate",stateNum:2,skin:"comp/button.png",label:"领取进贡",height:53,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1244,x:9,width:732,text:"小贴示：护卫通关每日副本将给家主进贡碎片宝箱，解除雇佣关系时将清零",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:312,x:495,width:120,"var":"btnRevolt",stateNum:2,skin:"comp/button.png",label:"反抗",height:52,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1279,x:9,width:732,text:"同一个只能被一个人雇佣，招募有家主的直接与家主战斗",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Text",props:{y:248,x:34,width:435,"var":"lbHalo",text:"【家主光环】（每日副本加成属性）",height:26,fontSize:26,color:"#fbf8f8",bold:!1}},{type:"Text",props:{y:417,x:9,width:732,text:"小贴示：被招募后将激活家主光环，通关每日副本将向家主进贡宝箱",fontSize:22,color:"#6b9eec",bold:!1,align:"center"}},{type:"Label",props:{y:376,x:346,width:393,"var":"revoltCd",text:"反抗冷却时间：00:10:00",styleSkin:"comp/label.png",height:26,color:"#fbf8f8",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:190,x:160,"var":"hostVip",text:"『钻』",styleSkin:"comp/label.png",mouseEnabled:!0,color:"#e70626",bold:!0,align:"left",fontSize:26}}]},t}(Qw),GA=function(e){function t(){this.btnSure=null,this.realname=null,this.idcode=null,t.__super.call(this)}o(t,"ui.model.adult.IdentifyUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Box",props:{y:306,x:144,width:462,mouseThrough:!0,mouseEnabled:!0,height:415},child:[{type:"Image",props:{y:0,x:0,width:460,skin:"comp/bg.png",height:411,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:332,x:147,width:161,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"提交认证",height:52,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:13,x:173,width:127,text:"实名认证",fontSize:28,color:"#ffffff",bold:!0,align:"center"}},{type:"TextInput",props:{y:220,x:65,width:324,"var":"realname",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"真实姓名",height:38,fontSize:20,bold:!0,align:"center"}},{type:"Text",props:{y:54,x:27,wordWrap:!0,width:419,text:"    你的游戏帐号尚未进行实名认证，根据文化部《网络游戏管理暂行办法》的相关要求，网络游戏用户需要进行实名认证。",leading:3,fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"Text",props:{y:173,x:26,wordWrap:!0,width:426,text:"实名信息提交后不可更改，请谨慎填写",leading:3,fontSize:24,color:"#ffffff",bold:!0,align:"left"}},{type:"TextInput",props:{y:269,x:65,width:324,"var":"idcode",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"身份证号码",height:38,fontSize:20,bold:!0,align:"center"}},{type:"Button",props:{y:-11,x:402,visible:!1,stateNum:1,skin:"comp/btn_close.png",name:"close",mouseThrough:!1,mouseEnabled:!0}}]}]},t}(Qw),HA=function(e){function t(){this.desc=null,this.btnSure=null,this.count=null,this.lbUse=null,this.has=null,t.__super.call(this)}o(t,"ui.model.TowerShopRecoverUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:219,x:98,width:553,skin:"comp/bg.png",height:308,sizeGrid:"10,10,10,10"}},{type:"Label",props:{y:246,x:277,width:196,text:"物品兑换威望",styleSkin:"comp/label.png",name:"name",height:46,color:"#fbf8f8",align:"center",fontSize:26}},{type:"Label",props:{y:289,x:259,width:232,"var":"desc",text:"1护灵符=1威望",styleSkin:"comp/label.png",height:34,color:"#f4eb13",align:"center",fontSize:26}},{type:"Button",props:{y:451,x:262,width:100,"var":"btnSure",stateNum:2,skin:"comp/button.png",label:"兑换",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:451,x:403,width:100,stateNum:2,skin:"comp/button.png",name:"close",label:"取消",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"TextInput",props:{y:387,x:395,width:196,"var":"count",type:"number",text:"1",skin:"comp/textinput.png",sizeGrid:"9,12,8,20",height:42,fontSize:24,bold:!0}},{type:"Label",props:{y:392,x:218,width:174,"var":"lbUse",text:"兑换物品数量：",styleSkin:"comp/label.png",height:34,color:"#fbf8f8",bold:!0,fontSize:26}},{type:"Label",props:{y:346,x:218,width:285,"var":"has",text:"持有物品数量：1000",styleSkin:"comp/label.png",height:34,color:"#fbf8f8",bold:!0,fontSize:26}}]},t}(Qw),UA=function(e){function t(){this.bar=null,this.task=null,this.taskD=null,this.btnFast=null,this.cbtask=null,this.achieve=null,t.__super.call(this)}o(t,"ui.model.TaskAchieveUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Tab",props:{y:108,x:39,"var":"bar",space:10,skin:"comp/tab.png",labels:"任务,成就",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26,stateNum:2}},{type:"Box",props:{y:175,x:25,width:700,"var":"task",height:1145},child:[{type:"Text",props:{y:6,x:259,width:181,text:"主线",fontSize:32,color:"#fff400",bold:!0,align:"center"}},{type:"Image",props:{y:62,x:0,width:703,skin:"ui/fangkuang.png",height:221,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:78,x:100,width:594,name:"taskAim",innerHTML:"<font style=' font:26px'  color='#00dc24'>返回</font>主界面，通过<font style=' font:24px' color='#00dc24'>锻造</font>，锻造<font style=' font:24px' color='#00dc24'>一件装备</font>",height:110}},{type:"Text",props:{y:78,x:18,text:"目标：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Image",props:{y:220,x:89,skin:"ui/tongbi.png"}},{type:"Image",props:{y:189,x:88,skin:"ui/yuanbao.png"}},{type:"Label",props:{y:226,x:127,width:103,text:99999,styleSkin:"comp/label.png",name:"taskSilver",height:31,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:195,x:128,width:66,text:"99",styleSkin:"comp/label.png",name:"taskGold",height:24,fontSize:26,color:"#e8f116",align:"left"}},{type:"Text",props:{y:194,x:18,text:"奖励：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Button",props:{y:198,x:555,width:135,stateNum:2,skin:"comp/button.png",name:"btnTask",label:"领取奖励",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:215,x:429,width:124,text:"【未完成】",styleSkin:"comp/label.png",name:"taskState",height:36,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Box",props:{y:296,x:0,width:704,"var":"taskD",height:779},child:[{type:"Text",props:{y:10,x:261,width:181,text:"日常",fontSize:32,color:"#0084ff",bold:!0,align:"center"}},{type:"Image",props:{y:70,x:0,width:703,skin:"ui/fangkuang.png",height:720,sizeGrid:"10,10,10,10"}},{type:"List",props:{y:103,x:0,width:700,spaceY:10,repeatY:4,name:"taskdAward"},child:[{type:"Box",props:{y:0,x:0,width:700,name:"render",height:50},child:[{type:"Label",props:{y:9,x:15,width:371,text:"200000铜币，5元宝，2个龙涎果",styleSkin:"comp/label.png",name:"info",height:31,color:"#00dc24",align:"left",fontSize:26}},{type:"Label",props:{y:7,x:555,width:135,text:"50/100积分",styleSkin:"comp/label.png",name:"taskState",height:36,fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Button",props:{y:0,x:555,width:135,stateNum:2,skin:"comp/button.png",name:"btnTask",label:"领取",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Image",props:{y:354,x:0,width:2,skin:"ui/vline_white.png",rotation:-90,height:700,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:365,x:97,width:103,text:"任务内容",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:365,x:555,width:135,text:"奖励积分",fontSize:26,color:"#fbf8f8",align:"center"}},{type:"List",props:{y:401,x:0,width:700,vScrollBarSkin:"comp/vscroll.png",spaceY:10,name:"taskdList",height:381},child:[{type:"Box",props:{y:0,x:0,width:692,name:"render",height:50},child:[{type:"Label",props:{y:9,x:15,width:548,text:"200000铜币，5元宝，2个龙涎果",styleSkin:"comp/label.png",name:"info",height:31,color:"#ffffff",align:"left",fontSize:26}},{type:"Label",props:{y:7,x:557,width:135,text:"20积分",styleSkin:"comp/label.png",name:"secore",height:36,fontSize:26,color:"#fbf8f8",align:"center"}},{type:"Button",props:{y:0,x:557,width:135,stateNum:2,skin:"comp/button.png",name:"btnFinish",label:"领取",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:805,x:131,text:"小贴示：等级越高，日常积分任务越多",fontSize:26,color:"#6b9eec",align:"center"}},{type:"Text",props:{y:81,x:97,width:103,text:"奖励内容",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:31,x:567,width:103,text:"达成条件",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Button",props:{y:3,x:555,"var":"btnFast",stateNum:2,skin:"comp/button.png",label:"一键领取",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"CheckBox",props:{y:21,x:17,width:233,"var":"cbtask",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#00dc24",label:"主页显示指引",height:29}}]},{type:"Box",props:{y:175,x:790,width:706,"var":"achieve",height:1074},child:[{type:"Text",props:{y:6,x:321,text:"成就",fontSize:32,color:"#64e2c9",bold:!0,align:"center"}},{type:"Image",props:{y:62,x:0,width:703,skin:"ui/fangkuang.png",height:208,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:76,x:193,width:132,text:"佩戴称号：",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:76,x:319,text:"【叫我壕哥】",styleSkin:"comp/label.png",name:"achieveTitle",height:32,fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:114,x:42,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute1",fontSize:26,color:"#0084ff",bold:!0,align:"left"}},{type:"Label",props:{y:172,x:42,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute3",fontSize:26,color:"#0084ff",bold:!0,align:"left"}},{type:"Label",props:{y:144,x:42,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute2",fontSize:26,color:"#0084ff",bold:!0,align:"left"}},{type:"Label",props:{y:201,x:42,text:"hp + 5000",styleSkin:"comp/label.png",name:"attribute4",fontSize:26,color:"#0084ff",bold:!0,align:"left"}},{type:"Text",props:{y:75,x:11,width:176,text:"累计成就属性",fontSize:26,color:"#fbf8f8",align:"left"}},{type:"Button",props:{y:172,x:279,width:130,stateNum:2,skin:"comp/button.png",name:"btnOffTitle",label:"取下称号",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"List",props:{y:282,x:2,width:704,vScrollBarSkin:" ",spaceY:8,name:"achieveList",height:791},child:[{type:"Box",props:{y:0,x:0,width:704,name:"render",height:268},child:[{type:"Image",props:{y:0,x:1,width:703,skin:"ui/fangkuang.png",name:"bg",height:267,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:11,x:10,text:"称号：",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:11,x:77,text:"【叫我壕哥】",styleSkin:"comp/label.png",name:"title",height:33,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:46,x:10,text:"已达成：",fontSize:24,color:"#00dc24",align:"left"}},{type:"Text",props:{y:112,x:10,text:"未达成：",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:44,x:95,wordWrap:!0,width:332,text:"在组队副本中掉落BOSS宠物，资质丹，紫色熔灵12次",styleSkin:"comp/label.png",name:"lastFinish",leading:3,height:66,fontSize:24,color:"#00dc24",align:"left"}},{type:"Label",props:{y:112,x:95,wordWrap:!0,width:332,text:"在组队副本中掉落BOSS宠物，资质丹，紫色熔灵12次",styleSkin:"comp/label.png",name:"achieving",leading:3,height:66,fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:11,x:230,width:101,text:"★★★",styleSkin:"comp/label.png",name:"txtStar",height:32,fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:192,x:279,width:130,stateNum:2,skin:"comp/button.png",name:"btnAchieve",label:"领取奖励",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:221,x:10,width:112,text:"达成奖励：",fontSize:24,color:"#64e2c9",align:"left"}},{type:"Image",props:{y:221,x:129,width:28,skin:"ui/yuanbao.png",height:28}},{type:"Label",props:{y:222,x:167,width:77,text:"99",styleSkin:"comp/label.png",name:"txtGold",fontSize:24,color:"#e8f116",align:"left"}},{type:"Label",props:{y:14,x:557,width:61,text:"【待领取】",styleSkin:"comp/label.png",name:"awardState",height:17,fontSize:24,color:"#00dc24",align:"left"}},{type:"Label",props:{y:48,x:426,width:80,text:"攻击+2",styleSkin:"comp/label.png",name:"attribute1",height:20,fontSize:24,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:80,x:427,width:80,text:"防御+1",styleSkin:"comp/label.png",name:"attribute2",height:20,fontSize:24,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:112,x:427,width:80,text:"生命+100",styleSkin:"comp/label.png",name:"attribute3",height:20,fontSize:24,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:142,x:427,width:80,text:"法力+5",styleSkin:"comp/label.png",name:"attribute4",height:20,fontSize:24,color:"#1440ee",bold:!0,align:"left"}},{type:"Label",props:{y:48,x:576,width:60,text:"攻击+2",styleSkin:"comp/label.png",name:"attribute10",height:20,fontSize:24,color:"#b0bcb0",bold:!0,align:"left"}},{type:"Label",props:{y:79,x:576,width:60,text:"防御+1",styleSkin:"comp/label.png",name:"attribute20",height:20,fontSize:24,color:"#b0bcb0",bold:!0,align:"left"}},{type:"Label",props:{y:110,x:576,width:60,text:"生命+100",styleSkin:"comp/label.png",name:"attribute30",height:20,fontSize:24,color:"#b0bcb0",bold:!0,align:"left"}},{type:"Label",props:{y:139,x:576,width:60,text:"法力+5",styleSkin:"comp/label.png",name:"attribute40",height:20,fontSize:24,color:"#b0bcb0",bold:!0,align:"left"}},{type:"Image",props:{y:113,x:541,width:28,skin:"ui/arrow.png",rotation:-90,name:"bgA",height:28}},{type:"Text",props:{y:183,x:10,text:"当前进度：",fontSize:24,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:184,x:125,width:297,text:"100",styleSkin:"comp/label.png",name:"achieving1",height:24,fontSize:24,color:"#fbf8f8",align:"left"}}]}]},{type:"Label",props:{y:74,x:485,width:157,text:"★★★★★★",styleSkin:"comp/label.png",name:"txtStar",height:31,fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:338,x:39,width:627,text:"请完成主线任务【学习技能】开启成就系统",styleSkin:"comp/label.png",name:"notOpen",height:34,fontSize:32,color:"#e70626",bold:!0,align:"center"}}]}]},t}(Qw),zA=function(e){function t(){this.info=null,this.sure=null,this.cancel=null,this.title=null,this.inputCfm=null,this.doubleCfm=null,t.__super.call(this)}o(t,"ui.model.ConfirmUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("HTMLDivElement",uw),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:309,x:25,width:700,skin:"comp/bg.png",height:500,sizeGrid:"10,10,10,10"}},{type:"HTMLDivElement",props:{y:365,x:41,width:667,"var":"info",styleSkin:"comp/html.png",innerHTML:"提示的信息",height:290}},{type:"Button",props:{y:718,x:201,width:140,"var":"sure",stateNum:2,skin:"comp/button.png",label:"确认",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:718,x:408,width:140,"var":"cancel",stateNum:2,skin:"comp/button.png",label:"取消",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:329,x:25,width:700,"var":"title",text:"提示",styleSkin:"comp/label.png",height:35,fontSize:30,color:"#ffffff",bold:!0,align:"center"}},{type:"TextInput",props:{y:654,x:201,width:348,"var":"inputCfm",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"确认请输入 ‘放生’",height:52,fontSize:24,bold:!0,align:"center"}},{type:"CheckBox",props:{y:666,x:292,width:138,"var":"doubleCfm",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认放生",height:29}}]},t}(Qw),WA=function(e){function t(){this.nameTxt=null,this.level=null,this.quality=null,this.nature=null,this.btnUpgrade=null,this.attributes=null,this.nickname=null,this.erro=null,t.__super.call(this)}o(t,"ui.model.PetOrangeDrugUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:170,x:15,skin:"ui/bg_windos.png",right:15,left:15,height:160,sizeGrid:"30,30,30,30"}},{type:"Image",props:{y:120,x:15,skin:"ui/toplink.png",right:15,left:15}},{type:"Image",props:{y:356,width:720,skin:"ui/bg_windos.png",right:15,left:15,height:587,sizeGrid:"30,30,30,30"}},{type:"Text",props:{y:194,x:50,text:"灵宠",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:194,x:123,"var":"nameTxt",text:"野山猪",styleSkin:"comp/label.png",fontSize:32,color:"#f19e21",align:"left"}},{type:"Text",props:{y:232,x:50,text:"等级",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:232,x:121,"var":"level",text:"99",styleSkin:"comp/label.png",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Text",props:{y:268,x:50,text:"资质",fontSize:32,color:"#fbf8f8",align:"left"}},{type:"Label",props:{y:268,x:122,"var":"quality",text:"20",styleSkin:"comp/label.png",fontSize:32,color:"#22d931",align:"left"}},{type:"Clip",props:{y:186,x:223,"var":"nature",skin:"ui/clip_wuxing.png",index:4,clipY:5}},{type:"Text",props:{y:381,x:40,width:127,text:"协战加成",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:70,x:279,text:"出战灵宠信息",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Button",props:{y:963,x:579,width:140,"var":"btnUpgrade",stateNum:2,skin:"comp/button.png",labelSize:32,label:"进阶",height:63,sizeGrid:"4,4,4,4"}},{type:"Label",props:{y:1126,x:22,width:705,text:"小贴士：出战紫宠服用橙宠进阶丹后进阶为橙宠。\\n放生橙宠可回收橙宠进阶丹。",styleSkin:"comp/label.png",height:67,fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:427,x:40,width:285,"var":"attributes",vScrollBarSkin:" ",spaceY:10,height:477},child:[{type:"Box",props:{y:1,x:0,width:220,name:"render",height:24},child:[{type:"Label",props:{y:0,x:0,width:141,text:"生命力回满",styleSkin:"comp/label.png",name:"key",height:25,fontSize:26,color:"#46aec8",align:"left"}},{type:"Label",props:{y:1,x:168,width:82,text:"500",styleSkin:"comp/label.png",name:"value",height:22,fontSize:26,color:"#fbf8f8",align:"left"}}]}]},{type:"TextInput",props:{y:968,x:178,width:348,"var":"nickname",type:"text",skin:"comp/textinput.png",sizeGrid:"14,14,17,14",prompt:"2至4个中文",height:52,fontSize:24,bold:!0,align:"center"}},{type:"Text",props:{y:981,x:40,text:"个性名字",color:"#fbf8f8",bold:!0,align:"left",fontSize:26}},{type:"Text",props:{y:1074,x:10,width:729,text:"注意：禁止使用非法违规字符，如违反规定将强制放生宠物。",leading:5,fontSize:26,color:"#e70626",bold:!1,align:"center"}},{type:"Label",props:{y:1039,x:119,width:465,"var":"erro",text:"错误信息",styleSkin:"comp/label.png",pivotY:5,height:34,color:"#ea2f15",bold:!0,align:"center",fontSize:26}}]},t}(Qw),YA=function(e){function t(){this.tabMater=null,this.metList=null,this.btnSubmit=null,this.stoneMater=null,this.btnGoBuy=null,this.costSilver=null,this.aimBlood=null,t.__super.call(this)}o(t,"ui.model.BloodUpgradeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),Sw.regComponent("ui.model.pops.PropCellUI",nC),Sw.regComponent("HTMLDivElement",uw),Sw.regComponent("ui.model.pops.PropCellSimpleUI",rC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Tab",props:{y:391,x:176,"var":"tabMater",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"血脉,天籁石",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",labelSize:26}},{type:"Text",props:{y:404,x:25,text:"选择材料：",fontSize:26,color:"#fbf8f8",bold:!1,align:"center"}},{type:"Text",props:{y:70,x:298,width:145,text:"血脉升品",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"List",props:{y:464,x:13,width:730,"var":"metList",spaceY:5,repeatY:3,height:619},child:[{type:"Box",props:{name:"render"},child:[{type:"Image",props:{y:0,x:0,width:730,skin:"ui/fangkuang.png",height:201,sizeGrid:"10,10,10,10"}},{type:"PropCell",props:{y:0,x:0,name:"blood",runtime:"ui.model.pops.PropCellUI"}},{type:"Button",props:{y:114,x:565,width:130,stateNum:2,skin:"comp/button.png",name:"btnPutin",label:"放入材料",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Button",props:{y:1104,x:310,width:130,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",label:"开始锻造",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:1270,x:0,width:745,text:"小贴示：消耗3个同品级的血脉将选血脉提升一个品级",fontSize:26,color:"#6b9eec",bold:!1,align:"center"}},{type:"Box",props:{y:467,x:767,width:730,"var":"stoneMater",height:619},child:[{type:"HTMLDivElement",props:{y:2,x:2,width:722,name:"costNum",innerHTML:"消耗天籁石：",height:48}},{type:"List",props:{y:54,x:0,width:732,vScrollBarSkin:"comp/vscroll.png",spaceY:5,name:"stones",height:530},child:[{
type:"Box",props:{name:"render"},child:[{type:"PropCellSimple",props:{y:0,x:0,name:"props",runtime:"ui.model.pops.PropCellSimpleUI"}},{type:"CheckBox",props:{y:17,x:520,width:138,stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,name:"sureUse",labelSize:24,labelPadding:"0,0,0,10",labelColors:"#b0bcb0,#e70626,#FFFFFF,#FFFFFF",labelBold:!0,label:"确认使用",height:29}}]}]},{type:"Button",props:{y:85,x:301,width:130,"var":"btnGoBuy",stateNum:2,skin:"comp/button.png",label:"去购买",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:1121,x:21,text:"花费铜币：",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:1121,x:192,width:150,"var":"costSilver",text:"99999",styleSkin:"comp/label.png",fontSize:26,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Image",props:{y:1116,x:147,skin:"ui/tongbi.png"}},{type:"PropCell",props:{y:170,x:10,"var":"aimBlood",runtime:"ui.model.pops.PropCellUI"}},{type:"Image",props:{top:130,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),qA=function(e){function t(){this.items=null,this.lightR=null,this.nextLb1=null,this.nextLb=null,this.needGold=null,this.nextOne=null,this.endTime=null,this.btnDraw=null,this.btnNtc=null,t.__super.call(this)}o(t,"ui.model.lottery.LotteryUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Text",props:{y:110,x:327,text:"大转盘",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:160,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:90,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"List",props:{y:237,x:20,"var":"items",spaceY:10,spaceX:10,repeatY:4,repeatX:4},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"Image",props:{width:170,skin:"ui/fangkuang.png",sizeGrid:"10,10,10,10",height:170}},{type:"Label",props:{y:40,x:2,width:165,text:"灵宠-绝技\\n仙品天籁石",styleSkin:"comp/label.png",name:"lbTitle",leading:5,height:72,fontSize:28,color:"#f8c41f",bold:!0,align:"center"}},{type:"Label",props:{y:137,x:7,width:157,text:"2%概率",styleSkin:"comp/label.png",name:"lbRate",height:25,fontSize:24,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Image",props:{y:0,x:0,width:170,skin:"comp/blank.png",name:"mask1",height:170,sizeGrid:"2,2,2,2"}},{type:"Box",props:{y:0,x:0,name:"taked"},child:[{type:"Image",props:{width:170,skin:"comp/blank.png",height:170,sizeGrid:"2,2,2,2"}},{type:"Label",props:{y:94,x:42,width:98,text:"已领取",styleSkin:"comp/label.png",rotation:-30,name:"effect",height:25,fontSize:24,color:"#00dc24",bold:!0,align:"center"}}]}]},{type:"Clip",props:{y:-38,x:-29,width:230,"var":"lightR",skin:"create/clip_select.png",interval:60,height:238,clipX:15,autoPlay:!0}}]},{type:"Label",props:{y:443,x:203,width:340,"var":"nextLb1",text:"仅在",styleSkin:"comp/label.png",leading:10,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:475,x:204,width:340,"var":"nextLb",text:"【商城】\\n【战技能阁】\\n【重置五行宫】",styleSkin:"comp/label.png",leading:10,fontSize:28,color:"#0084ff",bold:!0,align:"center"}},{type:"Label",props:{y:592,x:205,width:340,"var":"needGold",text:"再消耗1000元宝",styleSkin:"comp/label.png",leading:10,fontSize:28,color:"#fffc00",bold:!0,align:"center"}},{type:"Label",props:{y:640,x:205,width:340,"var":"nextOne",text:"增加1次抽奖机会",styleSkin:"comp/label.png",leading:10,fontSize:28,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:727,x:203,width:343,"var":"endTime",text:"活动剩余：",styleSkin:"comp/label.png",leading:10,height:34,color:"#0084ff",bold:!0,align:"center",fontSize:26}},{type:"Label",props:{y:1264,x:27,width:695,text:"小贴士：累计抽12次可获得全部奖励，每次活动持续30天。",styleSkin:"comp/label.png",leading:10,height:34,color:"#0084ff",bold:!0,align:"center",fontSize:26}},{type:"Button",props:{y:560,x:310,width:130,"var":"btnDraw",stateNum:2,skin:"comp/button.png",label:"抽取一次",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:980,x:578,width:133,"var":"btnNtc",stateNum:2,skin:"comp/button.png",labelSize:32,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:56,sizeGrid:"4,4,4,4"}}]},t}(Qw),KA=function(e){function t(){this.list=null,this.btnNtc=null,this.tab=null,t.__super.call(this)}o(t,"ui.model.demon.DemonUpgradeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.demon.DemonCellUI",AC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:235,x:10,width:730,"var":"list",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:1043},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"DemonCell",props:{y:0,x:0,name:"demon",runtime:"ui.model.demon.DemonCellUI"}},{type:"Button",props:{y:188,x:394,width:130,stateNum:2,skin:"comp/button.png",name:"btnMix",label:"合  成",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:13,x:394,width:176,text:"持有：5个",styleSkin:"comp/label.png",name:"has",height:32,fontSize:32,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:144,x:392,width:250,text:"低一级装备10/4",styleSkin:"comp/label.png",name:"needMet",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:112,x:394,width:250,text:"铜币1000",styleSkin:"comp/label.png",name:"needSilver",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:80,x:394,width:250,text:"腐蚀之精10/20",styleSkin:"comp/label.png",name:"needProp",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Text",props:{y:80,x:264,text:"合成需要：",fontSize:26,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Text",props:{y:13,x:644,text:"已装备",name:"lbDress",fontSize:26,color:"#00dc24",bold:!0,align:"center"}}]}]},{type:"Image",props:{y:120,x:20,skin:"ui/toplink.png",right:15,left:15}},{type:"Button",props:{y:40,x:663,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Button",props:{y:170,x:630,width:100,"var":"btnNtc",stateNum:2,skin:"comp/button.png",right:25,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Tab",props:{y:170,x:25,width:522,"var":"tab",stateNum:2,space:20,skin:"comp/tab_small.png",selectedIndex:0,labels:"伏魔弓,伏魔链,伏魔甲,伏魔盾",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50,labelSize:24}},{type:"Text",props:{y:70,x:279,text:"伏魔装备合成",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:1300,x:14,width:722,text:"小贴士：腐蚀之精合成1级装备，4个同级装备可合成更高级装备",styleSkin:"comp/label.png",height:26,color:"#6b9eec",bold:!1,align:"center",fontSize:26}}]},t}(Qw),XA=function(e){function t(){this.canUsedEqups=null,this.emptTxt=null,this.dressed=null,t.__super.call(this)}o(t,"ui.model.demon.DemonDressChangeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.demon.DemonCellUI",AC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:521,x:10,width:730,"var":"canUsedEqups",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:806},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"DemonCell",props:{name:"demon",runtime:"ui.model.demon.DemonCellUI"}},{type:"Button",props:{y:197,x:639,width:80,stateNum:2,skin:"comp/button.png",name:"btnChange",label:"更换",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:70,x:317,width:116,text:"更换装备",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:479,x:9,width:122,text:"可用装备",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:639,x:252,width:245,"var":"emptTxt",text:"空空如也",styleSkin:"comp/label.png",height:53,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"DemonCell",props:{y:200,x:10,"var":"dressed",runtime:"ui.model.demon.DemonCellUI"}},{type:"Text",props:{y:164,x:9,width:122,text:"当前装备",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Qw),QA=function(e){function t(){this.list=null,this.btnNtc=null,t.__super.call(this)}o(t,"ui.model.demon.DemonDressUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.demon.DemonCellUI",AC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:235,x:10,width:730,"var":"list",vScrollBarSkin:" ",spaceY:15,repeatX:1,height:1049},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"DemonCell",props:{y:0,x:0,name:"demon",runtime:"ui.model.demon.DemonCellUI"}},{type:"Button",props:{y:188,x:394,width:130,stateNum:2,skin:"comp/button.png",name:"changeBtn",label:"更  换",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:188,x:549,width:130,stateNum:2,skin:"comp/button.png",name:"mixBtn",label:"合  成",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Button",props:{y:40,x:663,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Text",props:{y:70,x:343,text:"伏魔",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:170,x:630,width:100,"var":"btnNtc",stateNum:2,skin:"comp/button.png",right:25,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:1293,x:23,width:704,text:"小贴士：伏魔秘境掉落装备，抗腐蚀属性在轮回之地极为有用",styleSkin:"comp/label.png",height:26,color:"#6b9eec",bold:!1,align:"center",fontSize:26}},{type:"Image",props:{y:120,x:20,skin:"ui/toplink.png",right:15,left:15}}]},t}(Qw),jA=function(e){function t(){this.canUsedEqups=null,this.emptTxt=null,this.dressedEquip=null,t.__super.call(this)}o(t,"ui.model.EquipDressChangeUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:521,x:10,width:730,"var":"canUsedEqups",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:806},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"EquipCell",props:{name:"equip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Button",props:{y:197,x:639,width:80,stateNum:2,skin:"comp/button.png",name:"btnChange",label:"更换",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Text",props:{y:70,x:317,width:116,text:"更换装备",fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Text",props:{y:482,x:9,width:122,text:"可用装备",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:631,x:252,width:245,"var":"emptTxt",text:"空空如也",styleSkin:"comp/label.png",height:53,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:40,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"EquipCell",props:{y:200,x:10,"var":"dressedEquip",runtime:"ui.model.pops.EquipCellUI"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"Text",props:{y:165,x:9,width:122,text:"当前装备",fontSize:24,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Qw),ZA=function(e){function t(){this.equips=null,this.nature=null,this.title=null,this.lbNatrue=null,this.ntc=null,this.bar=null,this.props=null,t.__super.call(this)}o(t,"ui.model.EquipPreviewUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("ui.model.pops.EquipCellUI",tC),Sw.regComponent("ui.model.pops.PropCellUI",nC),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"List",props:{y:216,x:10,width:730,"var":"equips",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:1060},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"EquipCell",props:{name:"equip",runtime:"ui.model.pops.EquipCellUI"}}]}]},{type:"Button",props:{y:50,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Image",props:{y:120,skin:"ui/toplink.png",right:15,left:15}},{type:"ComboBox",props:{y:153,x:425,width:110,"var":"nature",skin:"comp/combobox.png",sizeGrid:"7,5,8,12",selectedIndex:0,labels:"全部,金系,木系,水系,火系,土系",labelSize:26,labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",itemSize:30,height:50}},{type:"Label",props:{y:68,x:93,width:564,"var":"title",text:"掉落预览",styleSkin:"comp/label.png",height:32,fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:164,x:347,width:71,"var":"lbNatrue",text:"五行：",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#fbf8f8",bold:!0}},{type:"Label",props:{y:1294,x:64,width:622,"var":"ntc",text:"小贴示：蓝色属性打造时随机获得一条",styleSkin:"comp/label.png",height:32,fontSize:26,color:"#0084ff",bold:!0,align:"center"}},{type:"Tab",props:{y:154,x:23,width:304,"var":"bar",stateNum:2,space:20,skin:"comp/tab.png",selectedIndex:0,labels:"装备预览,特殊材料",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50,labelSize:26}},{type:"List",props:{y:216,x:804,width:730,"var":"props",vScrollBarSkin:" ",spaceY:10,repeatX:1,height:1060},child:[{type:"Box",props:{y:0,x:0,name:"render"},child:[{type:"PropCell",props:{y:0,x:0,name:"prop",runtime:"ui.model.pops.PropCellUI"}}]}]}]},t}(Qw),JA=function(e){function t(){this.btSure=null,this.pl=null,this.txtInfo=null,this.btCanel=null,t.__super.call(this)}o(t,"ui.pages.AgreementUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:77,x:48,width:653,skin:"ui/fangkuang.png",height:997,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:1103,x:478,width:147,visible:!1,"var":"btSure",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"同意",height:63,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Panel",props:{y:93,x:68,width:618,"var":"pl",vScrollBarSkin:" ",height:964},child:[{type:"Label",props:{y:5,x:0,wordWrap:!0,width:613,"var":"txtInfo",text:"协议",styleSkin:"comp/label.png",leading:5,fontSize:24,color:"#ffffff",bold:!1}}]},{type:"Button",props:{y:1103,x:121,width:147,visible:!1,"var":"btCanel",stateNum:2,skin:"comp/button.png",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"拒绝",height:63,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:1103,x:301,width:147,stateNum:2,skin:"comp/button.png",name:"close",labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"确认",height:63,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),$A=function(e){function t(){t.__super.call(this)}o(t,"ui.pages.VersionReadMeUI",e);var i=t.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:0,x:0,width:750,skin:"comp/blank.png",height:1334,sizeGrid:"2,2,2,2"}},{type:"Image",props:{y:290,x:25,width:700,skin:"comp/bg.png",height:500,sizeGrid:"10,10,10,10"}},{type:"Button",props:{y:701,x:307,skin:"comp/button.png",name:"close",label:"确  认",height:60,sizeGrid:"4,4,4,4",labelSize:26,stateNum:2}},{type:"Label",props:{y:381,x:59,width:631,text:" 1、水系技能触发机制调整；\\n 2、商城不再出售转五行道具；\\n 3、七天乐任务条件和奖励物品调整；\\n 4、装备副本按玩家等级到达后以倒计时方式开启；\\n 5、其他调整如伏魔装备、低级法宝等属性调整\\n详见游戏内实际数据。\\n\\n 注意：其余优化和内容新增将和经典版保持同步。",styleSkin:"comp/label.png",name:"info",leading:10,height:233,fontSize:28,color:"#fbf8f8",bold:!0,align:"left"}},{type:"Label",props:{y:321,x:295,text:"限时版说明",styleSkin:"comp/label.png",name:"title",leading:10,fontSize:32,color:"#fbf8f8",bold:!0,align:"left"}}]},t}(Qw),eN=function(e){function t(){this.phone=null,this.btnSubmit=null,this.password=null,this.smscode=null,this.btnCode=null,this.errorInfo=null,t.__super.call(this)}o(t,"ui.pages.VisitorBindingUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Box",props:{y:412,x:125},child:[{type:"Image",props:{width:500,skin:"comp/bg.png",height:370,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:69,x:46,text:"帐   号：",color:"#FFFFFF",bold:!0,fontSize:26}},{type:"TextInput",props:{y:60,x:147,width:314,"var":"phone",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",prompt:"输入手机号或邮箱",height:42,fontSize:32}},{type:"Button",props:{y:279,x:173,width:154,"var":"btnSubmit",stateNum:2,skin:"comp/button.png",name:"btnSubmit",label:"绑定帐号",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Text",props:{y:215,x:46,text:"密   码：",color:"#FFFFFF",bold:!0,fontSize:26}},{type:"TextInput",props:{y:206,x:147,width:314,"var":"password",type:"password",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",height:42,fontSize:26}},{type:"Text",props:{y:146,x:46,text:"验证码：",color:"#FFFFFF",bold:!0,fontSize:26}},{type:"TextInput",props:{y:137,x:147,width:158,"var":"smscode",type:"number",skin:"comp/textinput.png",sizeGrid:"7,23,7,17",height:44,fontSize:26,bold:!0}},{type:"Button",props:{y:132,x:363,width:100,"var":"btnCode",stateNum:2,skin:"comp/button.png",name:"btnCode",label:"获取",height:56,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Label",props:{y:933,x:59,width:329,"var":"errorInfo",text:"错误信息",styleSkin:"comp/label.png",height:46,fontSize:32,color:"#f80c08",bold:!0}},{type:"Button",props:{y:409,x:565,stateNum:1,skin:"comp/btn_close.png",name:"close"}},{type:"Text",props:{y:343,x:293,width:164,text:"绑定账号",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:840,x:10,width:730,text:"温馨提示：海外用户请附加国际区号，例如 +85200000000\\n邮箱注册请查看邮件是否在垃圾箱中",styleSkin:"comp/label.png",leading:5,height:74,color:"#6b9eec",bold:!1,align:"center",fontSize:26}}]},t}(Qw),tN=function(e){function t(){this.serverList=null,this.btnLogout=null,this.checkStore=null,this.lastplays=null,this.newone=null,this.lastLoading=null,this.checkSort=null,this.opening=null,this.groupList=null,this.tabVersion=null,this.readme=null,t.__super.call(this)}o(t,"ui.pages.ServerListUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:199,x:11,width:728,skin:"comp/bg.png",height:1012,alpha:.6,sizeGrid:"10,10,10,10"}},{type:"List",props:{y:613,x:197,width:508,"var":"serverList",vScrollBarSkin:"comp/vscroll.png",spaceY:8,spaceX:10,repeatX:2,height:565},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:18,x:184,width:57,text:"爆满",styleSkin:"comp/label.png",name:"state",height:25,color:"#fb0c08",bold:!0,fontSize:26}},{type:"Button",props:{y:0,x:0,width:178,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"删档一区",height:60,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Label",props:{y:61,x:0,width:178,text:"8月6日10:00开启",styleSkin:"comp/label.png",name:"desc",height:25,fontSize:22,color:"#fb0c08",align:"center"}}]}]},{type:"Text",props:{y:80,x:311,text:"选服列表",fontSize:32,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Button",props:{y:1238,x:573,"var":"btnLogout",skin:"comp/button.png",label:"注  销",height:60,sizeGrid:"4,4,4,4",labelSize:26,stateNum:2}},{type:"CheckBox",props:{y:1253,x:373,width:143,"var":"checkStore",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#ffffff,#00dc24,#FFFFFF,#FFFFFF",labelBold:!0,label:"记住选服",height:29}},{type:"Text",props:{y:269,x:96,text:"新服推荐",fontSize:28,color:"#fbf8f8",align:"center"}},{type:"Image",props:{y:309,x:348,width:1,skin:"ui/vline_white.png",rotation:-90,pivotY:250,height:500,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:413,x:97,text:"最近玩过",fontSize:28,color:"#fbf8f8",align:"center"}},{type:"Image",props:{y:455,x:349,width:1,skin:"ui/vline_white.png",rotation:-90,pivotY:250,height:500,sizeGrid:"5,0,5,0"}},{type:"Text",props:{y:562,x:99,text:"全部",fontSize:28,color:"#fbf8f8",align:"center"}},{type:"Image",props:{y:602,x:348,width:1,skin:"ui/vline_white.png",rotation:-90,pivotY:250,height:500,sizeGrid:"5,0,5,0"}},{type:"List",props:{y:466,x:197,width:503,"var":"lastplays",spaceY:20,spaceX:10,repeatY:1,repeatX:2,height:70},child:[{type:"Box",props:{name:"render"},child:[{type:"Label",props:{y:18,x:185,width:57,text:"爆满",styleSkin:"comp/label.png",name:"state",height:25,color:"#fb0c08",bold:!0,fontSize:26}},{type:"Button",props:{y:0,x:0,width:178,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"盘古开天1区",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]}]},{type:"Box",props:{y:322,x:197,"var":"newone"},child:[{type:"Label",props:{y:18,x:184,width:57,text:"爆满",styleSkin:"comp/label.png",name:"state",height:25,color:"#fb0c08",bold:!0,fontSize:26}},{type:"Button",props:{width:178,stateNum:2,skin:"comp/button.png",name:"btnEnter",label:"删档一区",height:60,sizeGrid:"4,4,4,4",labelSize:26}}]},{type:"Label",props:{y:480,x:355,"var":"lastLoading",text:"读取中...",styleSkin:"comp/label.png",fontSize:28,color:"#fbf8f8",align:"center"}},{type:"CheckBox",props:{y:566,x:485,width:135,"var":"checkSort",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#ffffff,#00dc24,#FFFFFF,#FFFFFF",labelBold:!0,label:"正序排列",height:29}},{type:"Label",props:{y:714,x:197,width:423,"var":"opening",text:"服务器将于8月5日11:00准时开启",styleSkin:"comp/label.png",height:66,fontSize:28,color:"#fb0c08",align:"center"}},{type:"List",props:{y:610,x:29,width:160,"var":"groupList",spaceY:15,height:571},child:[{type:"Label",props:{text:"S100-999",styleSkin:"comp/label.png",name:"render",height:40,fontSize:34,color:"#fbf8f8",bold:!0,bgColor:"#000000"}}]},{type:"Tab",props:{y:136,x:15,width:390,"var":"tabVersion",stateNum:2,space:10,skin:"comp/tab.png",selectedIndex:0,labels:"经典版,限时版",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:50,labelSize:26}},{type:"Button",props:{y:138,width:132,"var":"readme",stateNum:2,skin:"comp/button.png",right:15,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"版本说明",height:50,sizeGrid:"4,4,4,4",labelSize:26}}]},t}(Qw),iN=function(e){function t(){this.btnBar=null,this.txtEmptyInfo=null,this.tabSec=null,t.__super.call(this)}o(t,"ui.pages.RoleGroupUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Button",props:{y:60,stateNum:1,skin:"comp/btn_close.png",right:25,name:"close"}},{type:"Tab",props:{y:130,x:15,width:710,"var":"btnBar",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:-1,labels:"人物,技能,经脉,灵根,宗门,图鉴,灵宠,境界",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:51.5,labelSize:24}},{type:"Text",props:{y:70,x:315,text:"人物系统",fontSize:30,color:"#fbf8f8",bold:!0,align:"center"}},{type:"Label",props:{y:278,x:227,wordWrap:!0,width:295,"var":"txtEmptyInfo",text:"灵宠系统25级开放",styleSkin:"comp/label.png",leading:4,height:43,fontSize:32,color:"#fbf8f8",align:"center"}},{type:"Tab",props:{y:195,x:25,width:196,"var":"tabSec",stateNum:2,space:10,skin:"comp/tab_small.png",selectedIndex:0,labels:"装备,战技",labelColors:"#ffffff,#000000,#ff0000,#C0C0C0",height:52,labelSize:24}}]},t}(Qw),nN=function(e){function t(){this.cbAgree=null,this.AgreeUI=null,this.btSure=null,this.btCanel=null,t.__super.call(this)}o(t,"ui.pages.MiniLoginPageUI",e);var i=t.prototype;return i.createChildren=function(){Sw.regComponent("Text",fS),laya.ui.Component.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:750,height:1334},child:[{type:"Image",props:{y:0,x:15,skin:"ui/logo.png"}},{type:"Button",props:{y:972,x:275,width:200,stateNum:2,skin:"comp/button.png",name:"btnLogin",labelSize:32,labelFont:"Arial",labelColors:"#ffffff,#ffffff,#ff0000,#C0C0C0",label:"开始游戏",height:80,sizeGrid:"4,4,4,4"}},{type:"Text",props:{y:1093,x:29,wordWrap:!0,width:692,text:"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",leading:10,fontSize:24,color:"#FFFFFF",bold:!0,align:"center"}},{type:"Label",props:{y:1220,x:57,text:"著作权人：杭州置游网络科技有限公司 著作权登记号：2021SR1085912\\n出版单位：咪咕互动娱乐有限公司 运营单位：咪咕互动娱乐有限公司\\n出版物号：ISBN 978-7-498-09091-1  批准文号：国新出审[2021]964号",styleSkin:"comp/label.png",leading:10,fontSize:20,color:"#FFFFFF"}},{type:"Text",props:{y:1181,x:83,text:"本游戏适合16周岁以上用户，为了您的健康，请合理控制游戏时间",fontSize:20,color:"#FFFFFF",align:"center"}},{type:"CheckBox",props:{y:899,x:73,width:205,"var":"cbAgree",stateNum:2,skin:"comp/checkbox.png",scaleY:1.2,scaleX:1.2,labelSize:24,labelPadding:"0,0,0,10",labelColors:"#e70626,#00dc24,#FFFFFF,#FFFFFF",labelBold:!0,label:"我已阅读并同意",height:29}},{type:"Label",props:{y:899,x:497,wordWrap:!1,width:182,underline:!0,text:"《隐私条款》",styleSkin:"comp/label.png",name:"txAgree2",mouseEnabled:!0,height:30,fontSize:26,color:"#2d90fb",bold:!0,align:"center"}},{type:"Label",props:{y:899,x:316,wordWrap:!1,width:179,underline:!0,text:"《用户协议》",styleSkin:"comp/label.png",name:"txAgree1",mouseEnabled:!0,height:30,fontSize:26,color:"#2d90fb",bold:!0,align:"center"}},{type:"Box",props:{y:267,x:48,"var":"AgreeUI"},child:[{type:"Image",props:{y:0,x:0,width:653,skin:"comp/bg.png",height:800,sizeGrid:"10,10,10,10"}},{type:"Text",props:{y:80,x:191,text:"用户协议与隐私政策",fontSize:30,color:"#FFFFFF",align:"center"}},{type:"Text",props:{y:150,x:61,wordWrap:!0,width:530,text:"在您使用我们服务前，请您务必审慎阅读、充分理解游戏用户协议和隐私保护指引的各条款。同时，您应特别注意前述协议中免除或者限制我们责任的条款、对您权利进行限制的条款、约定争议解决方式和司法管辖的条款，如您已详细阅读并同意游戏用户协议和隐私保护指引，请点击“同意”开始使用我们的服务，如您拒绝。将无法进入游戏。",overflow:"scroll",leading:10,height:360,fontSize:26,color:"#FFFFFF",align:"left"}},{type:"Label",props:{y:538,x:225,wordWrap:!1,width:179,underline:!0,text:"《用户协议》",styleSkin:"comp/label.png",name:"txAgree1",mouseEnabled:!0,height:30,fontSize:26,color:"#2d90fb",bold:!0,align:"center"}},{type:"Label",props:{y:538,x:396,wordWrap:!1,width:182,underline:!0,text:"《隐私条款》",styleSkin:"comp/label.png",name:"txAgree2",mouseEnabled:!0,height:30,fontSize:26,color:"#2d90fb",bold:!0,align:"center"}},{type:"Label",props:{y:538,x:53,wordWrap:!1,width:179,text:"点击查看",styleSkin:"comp/label.png",mouseEnabled:!0,height:30,fontSize:26,color:"#ffffff",bold:!0,align:"center"}},{type:"Button",props:{y:658,width:147,"var":"btSure",stateNum:2,skin:"comp/button.png",right:120,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"同意",height:63,sizeGrid:"4,4,4,4",labelSize:26}},{type:"Button",props:{y:658,width:147,"var":"btCanel",stateNum:2,skin:"comp/button.png",left:120,labelColors:"#c5c502, #32cc6b, #ff0000, #C0C0C0",label:"拒绝",height:63,sizeGrid:"4,4,4,4",labelSize:26}}]}]},t}(Qw),oN=function(e){function t(){this.txtReports=null,t.__super.call(this),this.panelReports.vScrollBar.changeHandler=new h(this,this.onReportMouse),this.panelReports.vScrollBar.hide=!0,this.txtReports=new uw,this.txtReports.width=this.panelReports.width,this.txtReports.style.lineHeight=40,this.txtReports.style.fontSize=26,this.txtReports.style.color="#ffffff",this.panelReports.addChild(this.txtReports)}o(t,"modules.forest.view.componets.ForestSearchView",e);var i=t.prototype;return i.clearEvents=function(){this.txtReports.innerHTML="",this.txtReports.height=0,this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max},i.onReportMouse=function(e){e*=this.scaleY},i.receiveEvent=function(e){e.acting?this.txtReports.appendHTML(e.message+"<br>"):"战斗胜利"==e.message||this.txtReports.appendHTML(e.message+"<br><br>"),this.panelReports.refresh(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max},i.showRecoard=function(e){this.txtReports.appendHTML(e),this.panelReports.refresh(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max},i.showSearchPress=function(e){var t=this.getChildByName("searchPress");t.text="搜索进度："+e.monsterKilled+"/4"},i.receiveFightAwards=function(e){this.txtReports.appendHTML("战斗胜利"),e.exp>0&&this.txtReports.appendHTML("<br><font color='#0000ff'>获得经验 +"+e.exp+"</font>"),e.gas>0&&this.txtReports.appendHTML("<br><font color='#00ff00'>获得灵气 +"+e.gas+"</font>"),e.silver>0&&this.txtReports.appendHTML("<br><font color='#ffff00'>获得铜币 +"+e.silver+"</font>"),e.renderItems(this.txtReports),this.txtReports.appendHTML("<br><br>"),this.panelReports.refresh(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max},i.setFast=function(e){this.txtFast.visible=e,this.showDir(!e)},i.showDir=function(e){this.btnE.visible=e,this.btnW.visible=e,this.btnS.visible=e,this.btnN.visible=e},t}(aC),sN=function(e){function t(){this.login_email=null,this.login_pwd=null,this.reg_email=null,this.reg_emailcode=null,this.reg_pwd=null,this.btnCode=null,t.__super.call(this),M.drawBlackBg(this,0),this.firstPage.x=this.loginPage.x,this.regPage.x=this.loginPage.x,this.loginSP.x=this.loginPage.x,this.loginSP.visible=!1,this.login_email=this.loginPage.getChildByName("email"),this.login_pwd=this.loginPage.getChildByName("password"),this.reg_email=this.regPage.getChildByName("email"),this.reg_emailcode=this.regPage.getChildByName("emailcode"),this.reg_pwd=this.regPage.getChildByName("password"),this.btnCode=this.regPage.getChildByName("btnCode"),this.login_email.text="",this.login_pwd.text="",this.reg_email.text="",this.reg_emailcode.text="",this.reg_pwd.text="",v.IS_GLOBAL_VERSION&&(this.login_email.prompt="邮件地址或手机号码",this.reg_email.prompt="邮件地址或手机号码",this.ntc.text="温馨提示：邮件地址注册请查看邮件是否在垃圾箱中\n手机号码注册请附加国际区号，例如 +8520000"),this.btnAge.clickHandler=new h(this,function(){x.getInstance().sendNotification("OPEN_AGREEMENT_PAGE","data/RightAge.txt")})}return o(t,"gamelogin.view.componets.LoginRegView",e),t}(PC),rN=function(e){function t(){this.job=0,this.sex=-1,this.head=-1,this._selectIndex=0,t.__super.call(this),M.drawBlackBg(this,0),this.txt_error.text="";for(var e=[],i=1;2>=i;i++)e.push({bg:"ui/head/m"+i+".png",head:i}),e.push({bg:"ui/head/w"+i+".png",head:i});this.nameTxt.text="",this.headList.scrollBar.hide=!0,this.headList.dataSource=e,this.headList.selectEnable=!0,this.headList.selectHandler=new h(this,this.onHeadSelect),this.headList.renderHandler=new h(this,this.onRender),this.onHeadSelect(0)}o(t,"gamelogin.view.componets.CreateRoleView",e);var i=t.prototype;return i.onHeadSelect=function(e){this._selectIndex=e;var t=this.headList.getCell(e);t.addChild(this.selectClip),this.selectClip.pos(100,100),t.dataSource?this.head=t.dataSource.head:this.head=1,0==e%2?this.sex=1:this.sex=0,this.event("changed")},i.onRender=function(e,t){t==this._selectIndex?e.addChild(this.selectClip):this.selectClip.parent==e&&this.selectClip.removeSelf()},s(0,i,"selectHead",function(){return this.head}),s(0,i,"selectSex",function(){return this.sex}),s(0,i,"selectJob",function(){return this.job}),t}(LC),aN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,0),this.btnAge.clickHandler=new h(this,function(){x.getInstance().sendNotification("OPEN_AGREEMENT_PAGE","data/RightAge.txt")})}return o(t,"gamelogin.view.componets.LoadSimpleView",e),t}(DC),lN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,0),this.txt_error.visible=!1,this.pressBar.value=0,this.btnAge.clickHandler=new h(this,function(){x.getInstance().sendNotification("OPEN_AGREEMENT_PAGE","data/RightAge.txt")})}o(t,"gamelogin.view.componets.LoadProgressView",e);var i=t.prototype;return i.showProgress=function(e,t){this.txt_now.text=e,this.txt_press.text=vo["int"](100*t)+"%",this.pressBar.value=t},i.showModelStep=function(e){this.txt_model.text=e},i.showError=function(e){this.txt_error.visible=!0,this.txt_error.text=e},t}(OC),hN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,0),this.zOrder=1e5,this.gameNumber.text=v.GAME_NUMBER,this.btnAge.clickHandler=new h(this,function(){x.getInstance().sendNotification("OPEN_AGREEMENT_PAGE","data/RightAge.txt");
})}o(t,"common.view.componets.HealthView",e);var n=t.prototype;return n.showTime=function(){if(v.SHOW_ALERT_PANEL){if(v.IS_GLOBAL_VERSION){var e;for(var t in this._childs)e=this._childs[t],e instanceof laya.ui.Image&&"logo"==e.name||e instanceof laya.display.Sprite&&"blackBG"==e.name?"logo"==e.name&&(e.skin="ui/logo_tw.png",e.y=v.browerHeight-828>>1):e.visible=!1}i.stage.addChild(this),i.timer.once(2e3,this,this.onEnd)}},n.onEnd=function(){this.removeSelf()},t.MIN_SHOW_TIME=2e3,t}(NC),cN=function(e){function t(){this.gui=null,this.onPaoMa=!1,t.__super.call(this),this.gui=this,this.gui.zOrder=1e4,this.gui.wz1.x=800,this.gui.wz2.x=800,this.gui.wz1.mouseEnabled=!1,this.gui.wz2.mouseEnabled=!1,i.stage.on("paoMa_countSendEvent",this,this.countSendEvent)}o(t,"link.paoma.paoma",e);var n=t.prototype;return n.countSendEvent=function(){0==this.onPaoMa&&this.onDH()},n.onDH=function(){this.onPaoMa=!0,this.gui.wz1.x=800,this.gui.wz2.x=800,this.onDH_wz1()},n.onDH_wz1=function(){var e=this;link.paoma.paoma.paomaList.length>=1&&(this.toText(this.gui.wz1,link.paoma.paoma.paomaList[0]),link.paoma.paoma.paomaList.shift(),this.gui.wz1.x=800,Lr.to(this.gui.wz1,{x:-300},22e3,null,new h(this,function(){Lr.to(e.gui.wz1,{x:-800},1e4,null,new h(this,function(){e.gui.wz1.x=800,link.paoma.paoma.paomaList.length>=1&&800==e.gui.wz2.x?e.onDH_wz2():i.stage.timer.once(5e3,this,function(){e.onPaoMa=!1})}),0,!0),e.onDH_wz2()}),0,!0))},n.onDH_wz2=function(){var e=this;link.paoma.paoma.paomaList.length>=1&&(this.toText(this.gui.wz2,link.paoma.paoma.paomaList[0]),link.paoma.paoma.paomaList.shift(),this.gui.wz2.x=800,Lr.to(this.gui.wz2,{x:-300},22e3,null,new h(this,function(){Lr.to(e.gui.wz2,{x:-800},1e4,null,new h(this,function(){e.gui.wz2.x=800,link.paoma.paoma.paomaList.length>=1&&800==e.gui.wz1.x?e.onDH_wz1():i.stage.timer.once(5e3,this,function(){e.onPaoMa=!1})}),0,!0),e.onDH_wz1()}),0,!0))},n.toText=function(e,t){var i=this.text(t.playerName,[t.playerId,1],"#0084ff")+t.info;e.htmltext.style.fontSize=24,e.htmltext.style.color="#fffc00",e.htmltext.innerHTML=i},n.onLink=function(e){},n.text=function(e,t,i){void 0===i&&(i="#ffffff");var n="<span color='"+i+"' style='font:22px 宋体' >"+e+"</span>";if(t&&t[1]>=1){var o={id:t[1],type:t[2]},s=JSON.stringify(o);n="<span color='"+i+"' style='font:22px 宋体' href='"+s+"'>"+e+"</span>"}return n},t.init=function(){link.paoma.paoma.paomaUi=new t,i.stage.addChild(link.paoma.paoma.paomaUi)},t.send=function(e){null==link.paoma.paoma.paomaUi&&t.init(),link.paoma.paoma.paomaList.length>=30||(link.paoma.paoma.paomaList.push(e),i.stage.event("paoMa_countSendEvent"))},t.paomaList=[],t.paomaUi=null,t}(TC),uN=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.view.componets.ExchangeEquipCellView",e);var i=t.prototype;return i.showPrice=function(e){this.price.text=e+" 仙玉"},t}(Zw),dN=function(e){function t(){t.__super.call(this)}o(t,"modules.exchange.view.componets.ExchangePropCellView",e);var i=t.prototype;return i.showPrice=function(e){this.price.text="单价:"+e+"仙玉"},t}(jw),pN=function(e){function t(){t.__super.call(this)}return o(t,"modules.exchange.view.componets.ExchangeAddCellView",e),t}(Jw),fN=function(e){function t(){this.expWidth=0,this._hangingDot=null,this.spcailDungeon=null,this.listVisit=null,this._currentDungeon=0,t.__super.call(this),M.drawBlackBg(this,!1),this.selectDungeon.x=0,this.spcailDungeonPl.x=this.dungeon.x,this.listVisitPl.x=this.dungeon.x,this.listCulture.x=this.dungeon.x,this.listacthome.x=this.dungeon.x,this.listVisitPl.vScrollBar.hide=!0,this.spcailDungeonPl.vScrollBar.hide=!0,this.listVisit=this.listVisitPl.getChildByName("listVisit"),this.spcailDungeon=this.spcailDungeonPl.getChildByName("spcailDungeon"),this.expWidth=this.bgExp.width,this.boxHangdungeon.on("mousedown",this,this.onDungonEnter),this._hangingDot=new hS("挂机中...","#0cd41c",26),this._hangingDot.pos(680,35),v.enableChat()||(this.btn_chat.visible=!1,this.chatLast.visible=!1,this.spcailDungeonPl.height+=10,this.listacthome.height+=10,this.dungeon.height+=10,this.listDungeon.height+=10,this.selectDungeon.height+=10,this.listCulture.height+=10,this.listVisitPl.height+=10);var e=M.heightScaleNum(this);e>0&&(this.listDungeon.height+=e,this.moduleItems.y+=e,this.listacthome.height+=e,this.height+=e,this.listVisitPl.height+=e,this.spcailDungeonPl.height+=e,this.selectDungeon.getChildByName("tips").y+=e)}o(t,"modules.home.view.componets.HomePageView",e);var i=t.prototype;return i.show=function(e){if(e){var t,i=e.getValue(1011),n=e.getValue(1005);t=0==n?"w"+i:"m"+i,this.icoHead.getChildByName("bg").skin="ui/head/"+t+".png",this.txtName.text=e.getValue(1002);var o=e.getValue(1027);this.txtName.color=N.getColor(o),this.iconNature.index=e.getValue(1004)-1;var s=this.txtName.x+this.txtName.width;this.iconNature.x=s,this.achieveTitle.x=s+25,this.freshLevel(e),this.freshExp(e),this.freshHangDungeon(e)}},i.changeNature=function(e){this.iconNature.index=e.getValue(1004)-1},i.freshHangDungeon=function(e){var t=this.boxHangdungeon.getChildByName("txtHangGroup"),i=this.boxHangdungeon.getChildByName("txtHangDungeon"),n=this.boxHangdungeon.getChildByName("nature"),o=this.boxHangdungeon.getChildByName("txtHangDungeonExp"),s=this.boxHangdungeon.getChildByName("dungeonType");this._currentDungeon=e.getValue(19002);var r=g.database.getData("dungeon",this._currentDungeon),a=NaN;if(i.color="#ffffff",r)if(this.freshHangDungeonExpAvg(0),this._currentDungeon<0){switch(i.text=r.name,this._currentDungeon){case-1:i.color="#0084ff";break;case-2:i.color="#00dc24";break;case-3:i.color="#fffc00"}t.text="",n.index=-1,s.text="境界副本",a=(200-i.width)/2,i.x=a,o.x=i.x+i.width+10}else{i.text=r.name;var l=Math.ceil(this._currentDungeon/5),h=g.database.getDungeonGroup();if(l>=0&&l<=h.length){var c=h[l-1];switch(t.text=c.name,c.id){case 1:t.color="#ffffff";break;case 2:case 3:case 4:t.color="#0084ff";break;case 5:case 6:t.color="#00dc24";break;case 7:case 8:t.color="#fffc00";break;case 9:t.color="#e70626";break;case 10:t.color="#c527ff"}}else t.text="仙尊";a=i.x+i.width,n.index=r.monsterNature-1,n.x=a,o.x=n.x+n.width+5,this._currentDungeon>=100?(s.text="",o.x+=100):s.text="装备副本"}else i.text="无",a=(200-i.width)/2,i.x=a,o.text="",t.text="",n.index=-1,s.text="装备副本"},i.freshHangDungeonExpAvg=function(e){var t=this.boxHangdungeon.getChildByName("txtHangDungeonExp");if(this._currentDungeon>=100)t.text="攻打灵宠装备副本";else{var i=this._currentDungeon<0?"灵气":"经验";0>=e?t.text="正在计算"+i+"...":t.text="约"+so.getChineseNumSimple(e)+i+"/小时"}var n=this.boxHangdungeon.getChildByName("dungeonType"),o=Ng.userVO.getValue(7022);o>g.clock.currentTime+6e4?(t.text="3倍中 "+t.text,t.color="#c527ff",n.visible=!1):(t.color="#00dc24",n.visible=!0)},i.onDungonEnter=function(){this._currentDungeon&&x.getInstance().sendNotification("SHOW_FIGHT_HANG_PAGE",this._currentDungeon)},i.freshLevel=function(e){this.txtLevel.text=e.getValue(1006)},i.freshExp=function(e){var t=e.getValue(1008);if(0==t)this.bgExp.width=this.expWidth;else{var i=e.getValue(1007)/t;i>1&&(i=1),this.bgExp.width=this.expWidth*i}},i.chgName=function(e){this.txtName.text=e.getValue(1002);var t=e.getValue(1027);this.txtName.color=N.getColor(t),this.iconNature.index=e.getValue(1004)-1;var i=this.txtName.x+this.txtName.width;this.iconNature.x=i,this.achieveTitle.x=i+25},s(0,i,"hangingDot",function(){return this._hangingDot}),t}(MC),_N=function(e){function t(){this.faceArray=[],t.__super.call(this);for(var e=0;12>e;e++)this.faceArray.push(e);this.faceList.dataSource=this.faceArray,this.faceList.renderHandler=new h(this,this.onRender),this.faceList.vScrollBarSkin="",this.faceList.selectEnable=!0,this.faceList.scrollBar.elasticBackTime=100,this.faceList.scrollBar.elasticDistance=200}o(t,"modules.chat.view.componets.ChatFaceView",e);var i=t.prototype;return i.onRender=function(e,t){var i=e;i.skin="chat/face/"+this.faceArray[t]+".png",i.on("click",this,this.onFaceClick,[t])},i.onFaceClick=function(e){this.event("faceType",["@"+e+"@"]),this.visible=!1},t}(eC),mN=function(e){function t(){this.msgTotalHeight=0,this.chatFace=null,this.initMsgs=!0,this.lastMsgs=[],this.alertSysMsgShowed=!1,this._lastCh=0,this._lookPlayer=null,this._lookMsgObj=null,t.__super.call(this),this.chatLastLine=new Cw(1e4),this.chanelMsgCache=new uo,M.drawBlackBg(this,!1),this.btn_face.mouseEnabled=!0,this.btn_face.on("click",this,this.onSelectFace),this.btn_close.on("click",this,this.onClose),this.chatPanel.vScrollBarSkin="",this.chatPanel.vScrollBar.isVertical=!0,this.chatPanel.vScrollBar.elasticBackTime=600,this.chatPanel.vScrollBar.elasticDistance=200,this.chatFace=new _N,this.chatFace.on("faceType",this,this.onGetFaceType),this.chatFace.pos(this.btn_face.x-this.chatFace.width+10,this.btn_face.y-this.chatFace.height+10),this.addChild(this.chatFace),this.chatFace.visible=!1}o(t,"modules.chat.view.componets.ChatView",e);var n=t.prototype;return n.clear=function(){if(null!=this.chanelMsgCache){var e;for(var t in this.chanelMsgCache.values)for(e=this.chanelMsgCache.values[t];e&&e.length>0;){var n=e.shift();n.removeSelf(),Hr.recover("chatLine",n)}this.btn_send.visible=!1,this.chanelMsgCache.clear(),this.alertSysMsgShowed=!1,i.timer.clear(this,this.showLastMsgs)}},n.closeChat=function(){this.clear(),this.initMsgs=!0,this.lastMsgs.length=0},n.onClose=function(){this.removeSelf()},n.onSelectFace=function(){this.chatFace.visible?this.chatFace.visible=!1:this.chatFace.visible=!0},n.onGetFaceType=function(e){this.inputMsg.text+=e,this.inputMsg.focus=!0},n.showLastMsgs=function(){this.initMsgs=!1,this.lastMsgs.sort(this.compareMsg);var e;for(var t in this.lastMsgs)e=this.lastMsgs[t],this.msgReceive(e,!1)},n.compareMsg=function(e,t){return e.ext-t.ext},n.msgReceive=function(e,t){if(void 0===t&&(t=!0),this.initMsgs)return void this.lastMsgs.push(e);if(!v.limitChat||5==e.ch){var i=this.chatLastLine.init(e),n=e.ch;if(this.cacheChatLine(n,e,i),0!=this._lastCh&&this._lastCh!=n){var o=this.tabCh.getChildAt(n);t&&o&&co.showOrHide(o,!0,-12,12)}this.cacheChatLine(0,e,i),!this.parent||this._lastCh!=n&&0!=this._lastCh||this.reChatLinePos(this._lastCh)}},n.addSysMsg=function(e,t){void 0===t&&(t=!1),this.tabCh.selectedIndex=v.limitChat?5:0;var n=new Qe;n.uid=0,n.ch=5,n.msg=e,n.ext=0;this.chatLastLine.init(n);t&&!this.alertSysMsgShowed&&(this.initMsgs=!0,this.lastMsgs.length=0,i.timer.once(2e3,this,this.showLastMsgs),this.alertSysMsgShowed=!0,this.msgReceive(n))},n.cacheChatLine=function(e,t,i){var n=Hr.getItemByClass("chatLine",Cw);n.init(t,i);var o=this.chanelMsgCache.get(e);if(null==o&&(o=[],this.chanelMsgCache.set(e,o)),o.push(n),o.length>50){var s=o.shift();s.removeSelf(),Hr.recover("chatLine",s)}},n.reChatLinePos=function(e){void 0===e&&(e=-1),-1!=e&&(this._lastCh=e),this.chatPanel.removeChildren(),this.msgTotalHeight=0;var t=this.chanelMsgCache.get(this._lastCh);if(null!=t&&0!=t.length){for(var i,n=0;n<t.length;n++)i=t[n],i.y=this.msgTotalHeight,this.msgTotalHeight+=i.height,this.chatPanel.addChild(i);this.chatPanel.vScrollBar.max=this.chatPanel.contentHeight,this.chatPanel.vScrollBar.value=this.chatPanel.vScrollBar.max}},n.showPlayerMenu=function(e,t){this._lookPlayer=e,this._lookMsgObj=t;var i=this.playerMenu.getChildByName("name");i.text=e[2],this.playerMenu.visible=!0},n.reportPlayer=function(){if(this._lookPlayer){var e=this.report.getChildByName("name");e.text=this._lookPlayer[2];var t=this.report.getChildByName("info");t.text="";var i=this.report.getChildByName("fuck");i.selected=!1,i=this.report.getChildByName("rubbish"),i.selected=!1,i=this.report.getChildByName("bug"),i.selected=!1,this.report.visible=!0}},n.getReportCb=function(){var e=0,t=this.report.getChildByName("fuck");return t.selected&&(e+=1),t=this.report.getChildByName("rubbish"),t.selected&&(e+=2),t=this.report.getChildByName("bug"),t.selected&&(e+=4),e},n.getReportInfo=function(){var e=this.report.getChildByName("info"),t=e.text;return this._lookMsgObj&&(t=t+" | '"+this._lookMsgObj.msg+"'"),t},t.MAX_LINE=50,t}($w),gN=function(e){function t(){t.__super.call(this)}return o(t,"modules.tower.view.componets.TowerSearchView",e),t}(iC),vN=function(e){function t(){this._passiveSkills=null,t.__super.call(this),this.skillList.renderHandler=new h(this,this.onRender),this.skillList.mouseEnabled=!0,this.skillList.mouseHandler=new h(this,this.onMouse)}o(t,"modules.skill.view.componets.SkillView",e);var i=t.prototype;return i.showPassives=function(e){this._passiveSkills=e},i.showSkills=function(e){this.skillList.dataSource=e},i.onRender=function(e,t){var i,n=null,o=null,s=e.dataSource,r=g.database.getSkill(s.id),a=g.database.getSkillLearn(s.id,s.level+1),l=Ng.userVO.getValue(1006),h=Ng.userVO.getValue(1009),c=NaN,u=e.getChildByName("icon");u.skin="ui/skill/"+r.id+".png",i=e.getChildByName("type"),i.text=r.getTypeInfo(),i=e.getChildByName("name"),i.color="#c18314",i.text=r.name,c=i.x+i.width,i=e.getChildByName("level"),i.x=c,i.text="Lv."+s.level,i=e.getChildByName("info"),n=r.getSkillInfo(s.level),i.text="  "+n;var d=i.y+i.height;if(i=e.getChildByName("info2"),i.text="",i.y=d,this._passiveSkills){var p=this._passiveSkills.get(r.id+1e6);if(p&&p.level>0){var f=g.database.getSkill(p.id);i=e.getChildByName("name"),i.text=f.name,c=i.x+i.width,i.color="#99ec4d",i=e.getChildByName("level"),i.x=c,i=e.getChildByName("info2"),o=f.getSkillInfo(p.level),i.text="【宗】"+o}}if(u=e.getChildByName("silverIcon"),a?(e.getChildByName("lbSilver").visible=!0,i=e.getChildByName("silver"),i.text=""+a.costSilver,u.visible=!0,a.costSilver>h?i.color="#e70626":i.color="#ffffff",e.getChildByName("lbNeedLv").visible=!0,i=e.getChildByName("needLevel"),i.text=""+a.needLevel,a.needLevel>l?i.color="#e70626":i.color="#ffffff",e.getChildByName("learnBtn").visible=!0,0==s.level?e.getChildByName("learnBtn").label="学习":e.getChildByName("learnBtn").label="升级"):(e.getChildByName("lbSilver").visible=!1,i=e.getChildByName("silver"),i.text="最是高等级",u.visible=!1,i.color="#e70626",e.getChildByName("lbNeedLv").visible=!1,e.getChildByName("needLevel").text="",e.getChildByName("learnBtn").visible=!0,e.getChildByName("learnBtn").visible=!1),e.getChildByName("upBtn").visible=!0,e.getChildByName("downBtn").visible=!0,0==t?e.getChildByName("upBtn").visible=!1:t==this.skillList.dataSource.length-1&&(e.getChildByName("downBtn").visible=!1),i=e.getChildByName("lbNeedMP"),1006==s.id){i.text="消耗生命",i.color="#e70626",i=e.getChildByName("needMP");var _=n.indexOf("损"),m=n.indexOf("点"),v=n.substring(_+1,m);null!=o&&(_=o.indexOf("失"),m=o.indexOf("生"),v=o.substring(_+1,m)+"+"+v),i.text=v}else{i.text="消耗法力",i.color="#0084ff",i=e.getChildByName("needMP");var y=g.database.getSkillLearn(s.id,s.level);y||(y=a),y?i.text=""+y.costMp:i.text="--"}},i.onMouse=function(e,t){if("click"==e.type)switch(e.target.name){case"upBtn":this.swapSkill(t,t-1);break;case"downBtn":this.swapSkill(t,t+1);break;case"learnBtn":var i=Ng.userVO.getValue(1006),n=this.skillList.dataSource[t],o=g.database.getSkillLearn(n.id,n.level+1);if(o.needLevel>i)return void x.getInstance().sendNotification("prompted_info_show",{info:"人物等级不足。"});var s=Ng.userVO.getValue(1009);if(o.costSilver>s)return void x.getInstance().sendNotification("prompted_info_show",{info:"需要铜币不足。"});xc.instance.learnSkill(this.skillList.dataSource[t].id)}},i.swapSkill=function(e,t){var i;i=this.skillList.dataSource[e],this.skillList.dataSource[e]=this.skillList.dataSource[t],this.skillList.dataSource[t]=i,xc.instance.changePosition(this.skillList.dataSource),this.skillList.refresh()},t}(SC),yN=function(e){function t(){this._pager=null,t.__super.call(this),this.listAlc.renderHandler=new h(this,this.onAlcRender),this.pgUp.on("click",this,this._onPage),this.pgDown.on("click",this,this._onPage),this.pgFresh.on("click",this,this._onPage)}o(t,"modules.alliance.view.componets.AllianceView",e);var i=t.prototype;return i.onAlcRender=function(e,t){if(e.dataSource){var i,n=e.dataSource;i=e.getChildByName("dName"),i.text=n.name,i.color=Lt.getAlcColor(n.allianceLevel),i=e.getChildByName("dLv"),i.text=n.allianceLevel+"级",i=e.getChildByName("dNum");var o=g.database.getData("alliance",n.allianceLevel);i.text=n.members+"/"+o.memberMax+"人",n.members>=o.memberMax?i.color="#ffffff":i.color="#00dc24"}},i._onPage=function(e){null!=this._pager&&e.target&&(e.target==this.pgUp?kc.instance.listAlliances(this._pager.pager.pageNumber-1):e.target==this.pgDown?kc.instance.listAlliances(this._pager.pager.pageNumber+1):e.target==this.pgFresh&&kc.instance.listAlliances(this._pager.pager.pageNumber))},i.showHome=function(e){this.gate.visible=!1,this.home.visible=!0;var t=Ng.userVO.getValue(7012),i=Ng.userVO.getValue(7013),n=this.home.getChildByName("nameAlc"),o=Lt.getAlcColor(i);n.text=t,n.color=o,n=this.home.getChildByName("lvAlc"),n.text=i+"级",n.color=o},i.showGate=function(e){if(this._pager=e,this.gate.visible=!0,this.home.visible=!1,null==e)this.pgNum.text="/",this.listAlc.visible=!1;else{this.pgNum.text=this._pager.pager.pageNumber+"/"+this._pager.pager.totalPage,this.listAlc.dataSource=e.pager.recoards;var t=this.gate.getChildByName("lbEmpty");e.pager.recoards.length<=0?t.visible=!0:t.visible=!1,this.listAlc.visible=!0}},t}(cC),bN=function(e){function t(){this._bone=null,this._renderAttr=new h(this,this.onRenderAttr),t.__super.call(this),this.listProps.renderHandler=new h(this,this.onFoodRender),this.btnSp.visible=!1,this.lbSp.visible=!1,this.panelNow.visible=!1,this.panelNext.visible=!1,this.listProps.visible=!1,this.costSilver.text="--"}o(t,"modules.bone.view.componets.BoneView",e);var i=t.prototype;return i.onFoodRender=function(e,t){if(this.listProps.dataSource){var i=this.listProps.dataSource[t],n=e.getChildByName("name");switch(i.quality){case 3:n.text="绿色材料",n.color="#00dc24";break;case 4:n.text="黄色材料",n.color="#fffc00";break;case 5:n.text="红色材料",n.color="#e70626";break;case 9:n.text="红色特殊材料",n.color="#e70626";break;case 6:n.text="紫色材料",n.color="#c527ff";break;case 10:n.text="紫色特殊材料",n.color="#c527ff"}var o=e.getChildByName("nature");if(i.matchNature){o.visible=!0;var s=Ng.userVO.getValue(1004);o.index=s-1}else o.visible=!1;n=e.getChildByName("level"),i.level<=0?n.text="任意等级":n.text=i.level+"级以上",n=e.getChildByName("count");var r=e.getChildByName("putIn");switch(t){case 0:n.text=this._bone.propOneNum+"/"+i.count,this._bone.propOneNum>=i.count?(r.visible=!1,n.color="#00dc24"):(r.visible=!0,n.color="#e70626");break;case 1:n.text=this._bone.propTwoNum+"/"+i.count,this._bone.propTwoNum>=i.count?(r.visible=!1,n.color="#00dc24"):(r.visible=!0,n.color="#e70626");break;case 2:n.text=this._bone.propThreeNum+"/"+i.count,this._bone.propThreeNum>=i.count?(r.visible=!1,n.color="#00dc24"):(r.visible=!0,n.color="#e70626")}}},i.showInfo=function(e){this.btnSp.visible=!0,this.lbSp.visible=!0,this.panelNow.visible=!0,this.panelNext.visible=!0,this.listProps.visible=!0,this._bone=e;var t=Ng.userVO.getValue(1004),i=(Math.floor(e.boneId/9),e.boneId%9);this.showAttr(this.panelNow,e,!1,t),this.listProps.dataSource=e.nextFoodArr,e.nextSilver?(this.panelNext.visible=!0,this.attrArrow.visible=!0,this.showAttr(this.panelNext,e,!0,t),this.costSilver.text=""+e.nextSilver,this.lbCdn.text="提升条件"):(this.panelNext.visible=!1,this.attrArrow.visible=!1,this.costSilver.text="--",this.lbCdn.text="已是最高等级"),8==i?this.submit.label="突破":this.submit.label="升级",this.freshSilver(),e.variation>0?(this.lbSp.text=e.variation+"级变异 灵根属性 + "+mt.getPercentAdd(e.variation)+"%",this.lbSp.color=mt.getSpColor(e.variation),this.lbSp.visible=!0,this.btnSp.visible=e.variation<10):(this.lbSp.visible=!1,this.btnSp.visible=!1)},i.freshSilver=function(){if(this._bone){var e=Ng.userVO.getValue(1009);this._bone.nextSilver>e?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"}},i.onRenderAttr=function(e,t){var i=e.dataSource,n=e.getChildByName("base"),o=e.getChildByName("sp");n.text=i.base.text,n.color=i.base.color,o.text=i.sp.text,o.color=i.sp.color,o.x=n.width},i.showAttr=function(e,t,i,n){var o=e.getChildByName("name"),s=i?t.boneId+1:t.boneId,r=Math.floor(s/9),a=s%9;o.text=mt.nameArr[r]+R.getName(n)+"灵根",o.color=mt.colorArr[r];var l=e.getChildByName("nature");l.index=n-1,l.x=o.x+o.width,o=e.getChildByName("name_g"),o.text=mt.clzArr[a],o.color=mt.colorArr[r],o.x=l.x+l.width;var h,c,u=0,d=mt.getSpColor(t.variation),p=mt.getPercentAdd(t.variation),f=e.getChildByName("attrs"),_=new Array;for(var m in t.currentAttrs.keys){c=t.currentAttrs.keys[m];var g=t.currentAttrs.get(c),v=I.getName(c),y=I.getValueStr(c,g,!0);p>0?(u=vo["int"](g*p/100),1>u&&(u=1),h=I.getValueStr(c,u,!0)):h="",_.push({base:{text:v+" "+y,color:o.color},sp:{x:24*y.length,text:h,color:d}})}if(null==f.renderHandler&&(f.renderHandler=this._renderAttr),f.dataSource=_,i)if(t.nextAttrsAdd.keys.length){var b=t.nextAttrsAdd.keys[0],E=t.nextAttrsAdd.get(b),x=0;if(t.currentAttrs.get(b)){var m;for(m in t.currentAttrs.keys){if(c=t.currentAttrs.keys[m],c==b){v=I.getName(c);var S=E+t.currentAttrs.get(c),w=I.getValueStr(c,S,!0);p>0?(u=vo["int"](S*p/100),1>u&&(u=1),h=I.getValueStr(c,u,!0)):h="",_[x]={base:{text:v+" "+w,color:o.color},sp:{x:24*w.length,text:h,color:d}},f.refresh(),o=f.getCell(x),this.attrArrow.pos(-2,26),o.addChild(this.attrArrow),this.attrArrow.visible=!0;break}x++}}else v=I.getName(b),y=I.getValueStr(b,E,!0),p>0?(u=vo["int"](E*p/100),1>u&&(u=1),h=I.getValueStr(b,u,!0)):h="",_.push({base:{text:v+" "+y,color:o.color},sp:{x:24*y.length,text:h,color:d}}),f.refresh(),o=f.getCell(_.length-1),this.attrArrow.pos(-2,26),o.addChild(this.attrArrow),this.attrArrow.visible=!0}else this.attrArrow.visible=!1},t}(xC),EN=function(e){function t(){t.__super.call(this),this.attributes.scrollBar.hide=!0;var e=M.heightScaleNum(this);e>0&&(this.attributes.height+=e,this.height+=e),this.cbDetail.clickHandler=new h(this,this.freshAttribute)}o(t,"modules.user.view.componets.RoleView",e);var i=t.prototype;return i.showInfo=function(e){var t="编号:"+v.serverId+"-";t+=v.account.length>=32?v.account.substring(16):v.account,this.userId.changeText(t),this.nameTxt.text=e.getValue(1002);var i=e.getValue(1027);this.nameTxt.color=N.getColor(i),this.level.changeText(e.getValue(1006));var n=e.getValue(1008);0==n?this.exp.changeText(""):this.exp.changeText(e.getValue(1007)+"/"+n),this.silver.changeText(e.getValue(1009)),this.changeNature(e),this.changeAlliance(e);var o=e.getValue(7006);if(o>0){var s=g.database.getData("achieve",o);s?(this.achieveTitle.text=s.name,this.achieveTitle.color=N.getColor(s.quailty),this.txtStar.text=N.getStar(s.quailty),this.txtStar.color=this.achieveTitle.color,this.txtStar.x=this.achieveTitle.x+this.achieveTitle.width,this.achieveTitle.visible=!0):this.achieveTitle.visible=!1}else this.achieveTitle.visible=!1,this.txtStar.text=""},i.changeAlliance=function(e){var t=e.getValue(7011);t>0?(this.alliance.text="【"+e.getValue(7012)+"】"+e.getValue(7013)+"级",this.alliance.color=Lt.getAlcColor(e.getValue(7013))):(this.alliance.text="无",this.alliance.color="#ffffff")},i.changeNature=function(e){var t=e.getValue(1004);this.nature.index=t-1;var i=this.nameTxt.x+this.nameTxt.width;this.nature.x=i,this.achieveTitle.x=i+25,this.freshAttribute()},i.freshExp=function(){var e=Ng.userVO,t=e.getValue(1008);0==t?this.exp.changeText(""):this.exp.changeText(e.getValue(1007)+"/"+t)},i.freshLevel=function(){var e=Ng.userVO;this.level.changeText(e.getValue(1006)),this.freshExp(),this.freshAttribute()},i.freshCurrency=function(){var e=Ng.userVO;this.silver.changeText(e.getValue(1009))},i.freshAttribute=function(){var e,t=Ng.userVO,i=[],n=0;for(var o in I.ROLE_ATTRIBUTE_SHOW){e=I.ROLE_ATTRIBUTE_SHOW[o];var s=t.getValue(e);if(n=0,s){var r=I.getName(e),a=I.getValueStr(e,s),l=null;switch(e){case 1205:4==t.getValue(1004)?12e3==s&&(r+="(满)"):8e3==s&&(r+="(满)");break;case 1106:n=t.getValue(1502);break;case 1107:n=t.getValue(1503);break;case 1201:n=t.getValue(1504);break;case 1202:n=t.getValue(1505);break;case 1203:s/=10,n=t.getValue(1506);break;case 1204:s/=10,n=t.getValue(1507)}n>0&&(l=this._dealPercentShow(s,n),null!=l&&(a=l)),i.push({key:r,value:a})}}this.attributes.dataSource=i},i._dealPercentShow=function(e,t){if(t>0){if(this.cbDetail.selected){var i=Math.ceil(e/(1+t/1e4)),n=vo["int"](i*t/1e4),o=""+(e-n);return o=vo.toFixed(o),o+"+"+n+"("+t/100+"%)"}return null}return null},t}(wC),xN=function(e){function t(){this._selectIndex=-1,this._selectClip=null,t.__super.call(this),M.drawBlackBg(this,!1),this.on("mouseup",this,this.onMouse);var e=0;this.selectHandler(e)}o(t,"modules.user.view.componets.SelectWuxingView",e);var n=t.prototype;return n.onLoop=function(){i.timer.loop(300,this,this.onClock)},n.offLoop=function(){i.timer.clear(this,this.onClock)},n.onClock=function(){"ui/clip_nature_1.png"==this._selectClip.skin?this._selectClip.skin="ui/clip_nature_0.png":this._selectClip.skin="ui/clip_nature_1.png"},n.onMouse=function(e){if(e.target)switch(e.target.name){case"wx_1":this.selectHandler(0);break;case"wx_2":this.selectHandler(1);break;case"wx_3":this.selectHandler(2);break;case"wx_4":this.selectHandler(3);break;case"wx_5":this.selectHandler(4);break;case"btnSure":Yc.instance.selectWuxing(this._selectIndex+1)}},n.selectHandler=function(e){for(var t=1;5>=t;t++){var i=this.getChildByName("wx_"+t);e==t-1?(this._selectClip=i,i.skin="ui/clip_nature_1.png"):i.skin="ui/clip_nature_0.png"}switch(e){case 0:this.txtStyle.text="【优势：前中期】",this.txtSelect.text="金系特点：\n        攻击力高，反弹伤害高，属于高攻类型，拥有会心一击几率后，可造成双倍伤害，拥有击晕攻击几率后，可使敌方眩晕一定时间。\n";break;case 1:this.txtStyle.text="【优势：大后期】",this.txtSelect.text="木系特点：\n        生命值高，生命恢复快，属于血牛类型，并且拥有中毒攻击几率后，便可使敌方每秒损失真实伤害，大大提高伤害。\n";break;case 2:this.txtStyle.text="【优势：中后期】",this.txtSelect.text="水系特点：\n        技能触发率高，法力值高，法力恢复高，并且拥有冰冻攻击几率后，便可使敌方降低攻击速度和闪避。\n\n";break;case 3:this.txtStyle.text="【优势：中后期】",this.txtSelect.text="火系特点：\n        攻速快，命中高，闪避高，属于敏捷类型，并且拥有致盲攻击几率后，便可使敌方降低命中属性，大大增幅自己闪避高的特点。\n";break;case 4:this.txtStyle.text="【优势：大后期】",this.txtSelect.text="土系特点：\n        防御高，高减免，特殊抵抗状态高，并且拥有虚弱攻击几率后，便可使敌人降低攻击和防御属性，大大增幅自己防御高的特点。\n"}this._selectIndex=e,this.iconSelect.index=e},t}(RC),SN=function(e){function t(){this.taskJump=null,this._taskshowset=!0,this._taskshowbase=!0,t.__super.call(this),this.zOrder=1e3,this.mouseThrough=!0,this.mouseEnabled=!0;this.lbDate.text="",this.taskbar.visible=!1}o(t,"modules.head.view.HeadBar",e);var i=t.prototype;return i.changeTaskShowSet=function(e){},i.fresh=function(e){this.txtSilver.changeText(lo.transform(e.getValue(1009))),this.txtGold.changeText(e.getValue(1010)),this.txtJade.changeText(e.getValue(1019))},i.showTask=function(e,t){void 0===t&&(t=!1)},t}(mC),wN=function(e){function t(e){this.levelData=null,this._mousePosHandler=null,this._vo=null,this._renderHandler=new h(this,this.onPosRender),t.__super.call(this),this._mousePosHandler=e,this.attributes.dataSource=[],this.levelList.dataSource=[],this.levelList.renderHandler=new h(this,this.onLevelRender)}o(t,"modules.handbook.view.componets.HandbookView",e);var i=t.prototype;return i.freshList=function(){this.levelList.dataSource=this.levelData,this.levelList.visible=!0},i.onLevelRender=function(e,t){var i,n=e.getChildByName("name"),o=e.dataSource,s=0;switch(o){case Li.SP_EQUIP[0].lv:s=1,i=Li.SP_EQUIP[0].name;break;case Li.SP_EQUIP[1].lv:s=1,i=Li.SP_EQUIP[1].name;break;case Li.SP_EQUIP[2].lv:s=1,i=Li.SP_EQUIP[2].name;break;case Li.SP_EQUIP[3].lv:s=1,i=Li.SP_EQUIP[3].name;break;default:s=7,i=o+"级图鉴"}if(n.text=i,this._vo){var r=this._vo.getBook(o),a=e.getChildByName("lbPos"),l=e.getChildByName("posList");l.renderHandler=this._renderHandler,l.mouseEnabled=!0,l.mouseHandler=this._mousePosHandler;var h=0;r?(a.text="激活部位：("+r.getLightedNum()+"/"+s+")",l.dataSource=r.getPosArr(),h=r.getSuitColor()):(a.text="激活部位：(0/"+s+")",l.dataSource=Li.getEmptPosArr(o));var c="#b0bcb0",u="+0%";switch(h){case 5:u="+0.5%",c="#e70626";break;case 6:u="+2%",c="#c527ff"}n=e.getChildByName("attribute1"),n.text="攻击"+u,n.color=c,n=e.getChildByName("attribute2"),n.text="防御"+u,n.color=c,n=e.getChildByName("attribute3"),n.text="生命"+u,n.color=c,n=e.getChildByName("attribute4"),n.text="法力"+u,n.color=c}},i.onPosRender=function(e,t){var i=e.dataSource,n=i.p,o=i.q,s=e.getChildByName("name");switch(s.text=L.getTypeNameSimple(n),o){case 5:s.color="#e70626",s.underline=!0,s.underlineColor="#e70626";break;case 6:s.color="#c527ff",s.underline=!1,s.underlineColor="#c527ff";break;default:s.color="#b0bcb0",s.underline=!0,s.underlineColor="#ffffff"}},i.showInfo=function(e){this._vo=e,null==e||this.showAttrs(e.suitAttr,"#00dc24"),this.levelData=[];var t=Ng.userVO.getValue(1006);t>=15&&25>t&&(t=25);for(var i=25;t>=i;i+=5)this.levelData.push(i),40!=i&&55!=i&&70!=i&&85!=i||this.levelData.push(-i);this.freshList()},i.showAttrs=function(e,t){var i,n,o,s,r,a=[];for(r in Li.KEY_SUIT){switch(i=Li.KEY_SUIT[r],o=I.getName(i),n=e.get(i),null==n&&(n=0),i){case 1106:case 1107:case 1201:case 1202:s=n/100+"%";break;default:s=I.getValueStr(i,n)}a.push({text:o+" + "+s,color:n>0?t:"#b0bcb0"})}this.attributes.dataSource=a},t}(gC),CN=function(e){function t(){t.__super.call(this)}return o(t,"modules.pet.view.componets.PetskillBookView",e),t}(pC),TN=function(e){function t(){this.pets=null,this.selectPet=null,this.selectPop=new gL(new h(this,this.onGhostDress)),t.__super.call(this),this.tabPets.labels="",this.clear(),this.txtEmptyInfo.visible=!1,this.dressGhosts.scrollBar.hide=!0,this.tabPets.selectHandler=new h(this,this.onSelect),this.dressGhosts.renderHandler=new h(this,this.onGhostRender),this.dressGhosts.mouseEnabled=!0,this.dressGhosts.mouseHandler=new h(this,this.onMouse)}o(t,"modules.pet.view.componets.PetView",e);var i=t.prototype;return i.clear=function(){this.attributesList.scrollBar.hide=!0,this.attributesList.visible=!1,this.dressGhosts.visible=!1,this.nameTxt.text="--",this.level.text="--",this.quality.text="--",this.nature.index=-1,this.desc.text="",this.btnDrop.visible=!1,this.btnFightOn.visible=!1,this.btnUpgrade.visible=!1,this.chgNature.visible=!1,this.chat.visible=!1},i.onMouse=function(e,t){if("click"==e.type){var i=null;switch(e.target.name){case"changeBtn":var n,o=x.getInstance().retrieveProxy("GoodsProxy"),s=o.listItems(0),r=[];for(var a in s)if(n=s[a],!(null==n||n.count<=0)&&n instanceof modules.goods.model.data.PackProp){var l=n;l.propConf.level==t+1&&10==l.propConf.propType&&r.push(n)}i=this.dressGhosts.dataSource[t],this.selectPop.popSelect(this.selectPet,i,r,t);break;case"takeOffBtn":if(i=this.dressGhosts.dataSource[t],6==i.quality&&this.pets){var h=this.pets[this.tabPets.selectedIndex];if(h.level>=70)return void x.getInstance().sendNotification("SHOW_PET_ORANGE_GHOST_PAGE",{ghost:i,pet:h})}cu.instance.takeOffGhost(this.selectPet.id,t)}}},i.onGhostDress=function(e,t){cu.instance.dressGhost(this.selectPet.id,e.id,t)},i.freshPets=function(e){this.pets=e,this.freshTitles(),this.onSelect(this.tabPets.selectedIndex)},i.changePet=function(e){this.selectPet==e&&this.onSelect(this.tabPets.selectedIndex)},i.freshTitles=function(){var e,t=[];for(var i in this.pets)e=this.pets[i],1==e.state?t.push(e.getRealName()+"●战"):0==e.state&&t.push(e.getRealName());if(0==t.length?this.txtEmptyInfo.visible=!0:this.txtEmptyInfo.visible=!1,0==t.length)for(var n=0;5>n;n++)t.push("宠物格"+(n+1));this.tabPets.labels=t.join(),this.tabPets.selectedIndex>t.length-1?this.tabPets.selectedIndex=0:this.onSelect(this.tabPets.selectedIndex)},i.dropPetFresh=function(){this.tabPets.selectedIndex=0,this.onSelect(0)},i.freshAttribut=function(e){this.pets&&e==this.pets[this.tabPets.selectedIndex]&&this.showAttributs(e)},i.onSelect=function(e){if(this.pets){if(this.selectPet=this.pets[e],null==this.selectPet)return this.clear(),void x.getInstance().sendNotification("SHOW_PET_SHOP_PAGE",!0);this.btnDrop.visible=!0,this.btnFightOn.visible=!0,this.btnUpgrade.visible=!0,this.chat.visible=!0,this.nameTxt.text=this.selectPet.getRealName(),this.nameTxt.color=N.getColor(this.selectPet.getRealQuality()),this.nature.x=this.nameTxt.x+this.nameTxt.width,this.nature.index=this.selectPet.petCfg.nature-1,this.level.text=this.selectPet.level+"";var t=this.selectPet.qualityLevel+this.selectPet.getQrangeQualityLeveLAdd()+"";this.selectPet.qualityLevel>=this.selectPet.petCfg.maxQuality?(t+="（满）",
this.quality.color="#c527ff"):this.quality.color="#00dc24",this.selectPet.addQuality&&(t=t+" + "+this.selectPet.addQuality),this.quality.text=t,this.growAdd.text=100+this.selectPet.growAdd+"%",this.freshAttribute(e),this.freshDressed(e),1==this.selectPet.state?this.btnFightOn.label="休  息":this.btnFightOn.label="协  战",this.desc.text=this.selectPet.petCfg.desc,this.desc.color=this.nameTxt.color,this.chgNature.visible=this.selectPet.petCfg.quality>=6}},i.freshAttribute=function(e){if(this.pets){var t=this.pets[e];null!=t&&(t.attributes.keys.length?this.showAttributs(t):(this.attributesList.visible=!1,cu.instance.queryAttributes(t.id)))}},i.showAttributs=function(e){if(null!=e){var t,i=[];for(var n in e.attributes.keys){t=e.attributes.keys[n];var o=e.attributes.get(t);if(o){var s=I.getValueStr(t,o);i.push({key:I.getName(t),value:s})}}this.attributesList.dataSource=i,this.attributesList.visible=!0}},i.freshDressed=function(e){if(this.pets){var t=this.pets[e];if(null!=t){for(var i=[],n=x.getInstance().retrieveProxy("GoodsProxy"),o=0;8>o;o++){var s=t.ghosts.get(o);if(s){var r=n.getItemById(s,0);i.push(r)}else i.push(null)}this.dressGhosts.dataSource=i,this.dressGhosts.visible=!0}}},i.freshDressedNow=function(){this.freshDressed(this.tabPets.selectedIndex)},i.onGhostRender=function(e,t){if(this.pets){var i=this.pets[this.tabPets.selectedIndex],n=e.getChildByName("name"),o=e.getChildByName("nature"),s=e.getChildByName("attribute1"),r=e.getChildByName("attribute2"),a=e.getChildByName("changeBtn"),l=e.getChildByName("takeOffBtn");if(this.dressGhosts.dataSource){var h=this.dressGhosts.dataSource[t];if(h){n.text=h.propConf.name,n.color=N.getColor(h.quality);var c=n.x+n.width;o.x=c,o.index=h.propConf.nature-1;var u=h.baseAttr[0],d=I.getName(u.key);return s.text=d+I.getValueStr(u.key,u.value,!0),s.color="#0084ff",u=h.baseAttr[1],d=I.getName(u.key),r.text=d+I.getValueStr(u.key,u.value,!0),a.label="更换",a.visible=!0,6==h.quality&&i&&i.level>=70?l.label="进阶":l.label="卸下",void(l.visible=!0)}}n.text=tn.GHOST_POS[t],n.color="#ffffff",o.index=-1,l.visible=!1;var p=10*(t+1);i&&i.level<p?(s.text="灵宠"+p+"级可装备兽魂",s.color="#e70626",r.text="",a.visible=!1):(s.text="未装备兽魂",s.color="#fffc00",r.text="",a.label="装备",a.visible=!0)}},t}(vC),IN=function(e){function t(){t.__super.call(this)}return o(t,"modules.meridian.view.componets.MeridianView",e),t}(yC),AN=function(e){function t(){t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.listTalisman.height+=e,this.notice.y+=e,this.height+=e),this.panelNow.visible=!1,this.panelNext.visible=!1,this.costGas.visible=!1,this.submit.visible=!1,this.dressNum.visible=!1,this.listTalisman.visible=!1}o(t,"modules.culture.view.componets.CultureView",e);var i=t.prototype;return i.showInfo=function(e){this.panelNow.visible=!0,this.panelNext.visible=!0,this.costGas.visible=!0,this.dressNum.visible=!0,this.listTalisman.visible=!0,this.showCulture(this.panelNow,e.current),this.showCulture(this.panelNext,e.next,!0),this.changeGas(e)},i.changeGas=function(e){this.submit.visible=!1,e.next?(this.costGas.text=e.gas+"/"+e.next.needGas,e.gas>=e.next.needGas?(this.costGas.color="#00dc24",this.submit.visible=!0):this.costGas.color="#e70626"):this.costGas.text=e.gas+""},i.showCulture=function(e,t,i){void 0===i&&(i=!1);var n,o=new Array;t?(n=e.getChildByName("name"),n.text=t.name,n.color=N.getColor(t.grade+1),o.push({text:"攻击 +"+t.attrPercent/100+"%",color:n.color}),o.push({text:"防御 +"+t.attrPercent/100+"%",color:n.color}),o.push({text:"生命 +"+t.attrPercent/100+"%",color:n.color}),o.push({text:"法力 +"+t.attrPercent/100+"%",color:n.color})):i?(n=e.getChildByName("name"),n.text="已是高境界",n.color="#e70626",o.push({text:"已是高境界",color:n.color})):(n=e.getChildByName("name"),n.text="凡人",n.color="#ffffff",o.push({text:"无加成",color:n.color}));var s=e.getChildByName("attrs");s.dataSource=o},t}(EC),NN=function(e){function t(){this._equipIndex=0,this._rebuildEqNatue=0,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e);var i=this.towerShop.getChildByName("towerShop"),n=this.talismanUp.getChildByName("talismanUp"),o=this.lottery.getChildByName("info");this.mixEquip.style.fontSize=26,n.style.fontSize=26,this.equipDress.style.fontSize=26,this.roleInfo.style.fontSize=24,i.style.fontSize=26,this.petShop.style.fontSize=26,this.towerShopRate.style.fontSize=26,this.exchange.style.fontSize=26,this.allianceTitle.style.fontSize=26,this.alcarule.style.fontSize=26,this.pearl.style.fontSize=26,this.alcmine.style.fontSize=26,this.demon.style.fontSize=26,this.arena.style.fontSize=26,this.petSkillStore.style.fontSize=26,this.worldboss.style.fontSize=26,o.style.fontSize=26,this.mixEquip.style.color="#ffffff",n.style.color="#ffffff",this.equipDress.style.color="#ffffff",this.roleInfo.style.color="#ffffff",i.style.color="#ffffff",this.petShop.style.color="#ffffff",this.towerShopRate.style.color="#ffffff",this.exchange.style.color="#ffffff",this.allianceTitle.style.color="#ffffff",this.alcarule.style.color="#ffffff",this.pearl.style.color="#ffffff",this.alcmine.style.color="#ffffff",this.demon.style.color="#ffffff",this.arena.style.color="#ffffff",this.petSkillStore.style.color="#ffffff",this.worldboss.style.color="#ffffff",o.style.color="#ffffff",this.mixEquip.style.leading=10,n.style.leading=6,this.equipDress.style.leading=10,this.roleInfo.style.leading=10,i.style.leading=6,this.petShop.style.leading=6,this.towerShopRate.style.leading=6,this.exchange.style.leading=6,this.allianceTitle.style.leading=6,this.alcarule.style.leading=6,this.pearl.style.leading=6,this.alcmine.style.leading=6,this.demon.style.leading=6,this.arena.style.leading=6,this.petSkillStore.style.leading=6,this.worldboss.style.leading=6,o.style.leading=6,this.mixEquip.innerHTML="1、锻造<font color='#1a9915'>最多</font>只能放入1个<font color='#0084ff'>特殊材料</font>，其余放普通材料<br>2、锻造装备也可不放入<font color='#0084ff'>特殊材料</font>进行锻造<br>3、放入的<font color='#0084ff'>特殊材料</font>会有完全保留，保留一半，完全消失3种情况<br>4、可放入<font color='#1a9915'>相生材料</font>增加保留<font color='#0084ff'>特殊材料</font>概率，以及额外属性<br>5、若你锻造金系装备，<font color='#1a9915'>相生材料</font>选用土系<br>6、你锻造的装备可放入其他五行的<font color='#0084ff'>特殊材料</font><br><br><font color='#fffc00'>金</font>克<font color='#00dc24'>木</font>、<font color='#00dc24'>木</font>克<font color='#c527ff'>土</font>、<font color='#c527ff'>土</font>克<font color='#0084ff'>水</font>、<font color='#0084ff'>水</font>克<font color='#e70626'>火</font>、<font color='#e70626'>火</font>克<font color='#fffc00'>金</font><br><font color='#fffc00'>金</font>生<font color='#0084ff'>水</font>、<font color='#0084ff'>水</font>生<font color='#00dc24'>木</font>、<font color='#00dc24'>木</font>生<font color='#e70626'>火</font>、<font color='#e70626'>火</font>生<font color='#c527ff'>土</font>、<font color='#c527ff'>土</font>生<font color='#fffc00'>金</font>",this.roleInfo.innerHTML="1、<font color='#1a9915'>生命/法力恢复</font>：在战斗中的持续恢复值<br>2、<font color='#1a9915'>生命/法力回复率</font>：加成对应恢复数值<br>3、<font color='#1a9915'>金系状态反弹</font>：对手攻击你时，有概率晕眩<br>4、<font color='#1a9915'>木系状态反弹</font>：对手攻击你时，有概率中毒<br>5、<font color='#1a9915'>水系状态反弹</font>：对手攻击你时，有概率冰冻<br>6、<font color='#1a9915'>火系状态反弹</font>：对手攻击你时，有概率致盲<br>7、<font color='#1a9915'>土系状态反弹</font>：对手攻击你时，有概率虚弱<br>8、<font color='#1a9915'>中毒</font>：一定时间内持续掉血，为真实伤害，无视防御<br>9、<font color='#1a9915'>冰冻</font>：降低对手攻击速度和闪避<br>10、<font color='#1a9915'>致盲</font>：降低对手命中属性<br>11、<font color='#1a9915'>虚弱</font>：降低对手攻击和防御属性，抑制法力回复效率<br>12、<font color='#1a9915'>会心一击</font>：造成双倍伤害<br>13、<font color='#1a9915'>重伤攻击几率</font>：降低敌方回血效率<br>14、<font color='#1a9915'>韧性</font>：抵抗会心一击的概率<br>15、<font color='#1a9915'>状态延长</font>：延长自身有益和敌方减益状态<br>16、<font color='#1a9915'>破招概率</font>：受到技能伤害时有概率使敌方无法释放技能<br>17、<font color='#1a9915'>技能攻击</font>：触发技能时额外增加攻击力<br>18、<font color='#1a9915'>净化概率</font>：受到攻击闪避时，有概率触发净化自身减益效果<br>19、<font color='#1a9915'>不屈</font>：受到攻击最终伤害减免百分比<br>20、<font color='#1a9915'>无视防御</font>：攻击对方时，无视掉对方防御力的百分比<br>21、<font color='#1a9915'>增加伤害</font>：给对方造成伤害时，额外增加百分比伤害<br>22、<font color='#1a9915'>伤害反射</font>：反弹对自身造成伤害的百分比<br>23、<font color='#1a9915'>无视闪避</font>：无视对方闪避的概率<br>24、<font color='#1a9915'>凝心剑术</font>：使用技能时，额外给对方造成伤害百分比，并提高该技能的法力消耗量的百分比<br>25、<font color='#1a9915'>状态反弹</font>：对手攻击你时造成的不良状态有概率反弹给对方<br>26、<font color='#1a9915'>诅咒</font>：攻击时有概率清除对方所有增益效果<br>27、<font color='#1a9915'>破·X防</font>：降低所有对手对应的五行防御力，组队可叠加生效<br>28、<font color='#1a9915'>特殊属性抗性</font>：抵抗有害状态属性，数值越高抵抗概率越大<br>29、<font color='#1a9915'>无视攻击免疫</font>：减少对方攻击免疫概率<br>30、<font color='#1a9915'>法力燃烧</font>：造成伤害时，消耗对方该伤害百分比的法力值<br>31、<font color='#1a9915'>精准打击</font>：该次攻击将有概率无视对方闪避和攻击免疫<br>32、<font color='#1a9915'>X系技能减免</font>：减少对应五行技能的伤害<br>",i.innerHTML="1、威望通过试炼之塔战斗获得，层数越高威望越多，单次活动最高获得100点<br>2、套装属性:<br>",this.equipDress.innerHTML="1、套装只需要头盔，衣服，鞋子就可以激活<br>2、其余部位可去寻找适合自己属性的装备<br>3、基础属性：武器，防御，饰品拥有白色的基础属性<br>4、<font color='#0000ff'>随机属性</font>：每件装备必然会出一条<font color='#0000ff'>随机属性</font><br>&nbsp;&nbsp;部分装备拥有特殊的随机属性，锻造时可预览<br>5、<font color='#46A3FF'>特殊材料属性</font>：每种特殊材料属性都不同,可选择适合自己的属性融入装备中<br>6、<font color='#7985e0'>相生属性</font>：利用五行相生原理锻造的附加属性<br>7、<font color='#1a9915'>点化属性</font>：黄色以上装备可点化，部分装备拥有特殊点化属性<br>",n.innerHTML="1、升品时，已有属性不会改变，有50%概率增加一条属性<br>2、若达到紫色品质，属性只有3条，洗炼有50%概率变成4条<br>3、洗炼只会增加或不变属性条目不会减少<br>4、第一条属性只跟五行有关，属性两条里面随机<br>",this.petShop.innerHTML="概率公示：<br>宠物		&nbsp;&nbsp;出现概率&nbsp;&nbsp;保底次数(自动寻找)<br><font color='#00dc24'>绿宠	&nbsp;&nbsp;20%	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;无</font><br><font color='#fffc00'>黄宠	&nbsp;&nbsp;2.00%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;40</font><br><font color='#e70626'>红宠	&nbsp;&nbsp;0.20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;150</font><br><font color='#c527ff'>紫宠	&nbsp;&nbsp;0.02%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;750</font><br><br>紫宠和保底次数仅在自动寻找中出现，保底次数不包含单次寻找次数",this.towerShopRate.innerHTML="兑换装备材料概率：<br><font color='#0084ff'>蓝色材料&nbsp;&nbsp;50.40%</font><br><font color='#00dc24'>绿色材料&nbsp;&nbsp;31.50%</font><br><font color='#fffc00'>黄色材料&nbsp;&nbsp;7.20%</font><br><font color='#c527ff'>紫色材料&nbsp;&nbsp;0.90%</font><br><font color='#00dc24'>绿特材料&nbsp;&nbsp;5.40%</font><br><font color='#fffc00'>黄特材料&nbsp;&nbsp;4%</font><br><font color='#e70626'>红特材料&nbsp;&nbsp;0.50%</font><br><font color='#c527ff'>紫特材料&nbsp;&nbsp;0.10%</font><br>&nbsp;<br><font color='#ffffff'>同种材料兑换20个，保底出一个特材</font>";var s=this.towerShop.getChildByName("suits"),r=this.towerShop.getChildByName("lvBar");r.selectHandler=new h(this,this.onSuitLv),s.renderHandler=new h(this,this.suitRender),r.selectedIndex=0;var a=this.towerShop.getChildByName("equipView");a.on("click",this,this.ontTowerEquip);var l=this.talismanUp.getChildByName("tbGrad");l.selectHandler=new h(this,this.onGradTb),s=this.talismanUp.getChildByName("items"),s.renderHandler=new h(this,this.talismanRender);var c=this.equipRebuild.getChildByName("tbNature");c.selectHandler=new h(this,this.onEquipNatureTb);var u=this.equipRebuild.getChildByName("tbEquip");u.selectHandler=new h(this,this.onEquipTb),s=this.equipRebuild.getChildByName("items"),s.renderHandler=new h(this,this.oneEquipRender);var d=this.lottery.getChildByName("tbAwd");d.selectHandler=new h(this,this.onLotteryTb),s=this.lottery.getChildByName("listSkill"),d.selectedIndex=0,s.renderHandler=new h(this,this.onPetSkillRender),s.dataSource=[41,42,43,44,45],s=this.lottery.getChildByName("bloodList"),s.renderHandler=new h(this,this.onBloodListRender),s.dataSource=[40101,40201,40301,40401,40501],this.exchange.innerHTML="1、不能购买比自身等级高5级的物品<br>2、激活任意月卡可拥有10个上架位置<br>3、上架商品需要等待一定时间后显示在交易所内<br>4、成功交易后需要扣除15%手续费<br>",this.allianceTitle.innerHTML="<font color='#c527ff'>宗主</font>：贡献加成10%，拥有宗门所有权限，只有一位<br><font color='#e70626'>副宗主：</font>贡献加成10%，可提拔精英以上成员，可踢出成员，只有一位<br><font color='#fffc00'>长老：</font>贡献加成8%，可提拔精英以上成员，只有二位<br><font color='#00dc24'>护法：</font>贡献加成7%，只有二位<br><font color='#0084ff'>精英：</font>贡献加成5%<br>成员：普通成员，贡献达到3000自动晋升为精英<br>升级建筑：需要<font color='#00dc24'>护法</font>以上官员<br>(宗主可禁止官员升级建筑)<br>&nbsp;<br>&nbsp;<br><font color='#6b9eec'>注意：成员任职后7日内不能降职</font><br><font color='#e70626'>宗主超过3天不在线，次日凌晨系统将发起弹劾。继承规则:3天内活跃的成员，优先职位排序再看历史贡献，最后入宗时间。</font><br>&nbsp;<br>特殊说明：<br><font color='#e70626'>1.官员主动踢出3天内在线成员，将扣除其贡献的所有宗门资源</font>；<br>2.成员需要达到精英才可被任命官职。",this.pearl.innerHTML="1、只有激活9件灵珠，才可激活灵珠套装；<br>2、灵珠套装等级=所有灵珠等级之和除以9；（去除小数点取整）<br>3、灵珠可以更换五行，第一次不消耗道具，第二次需要消耗女娲石；<br>4、四维指的是攻击、防御、血量、蓝量；<br>5、灵珠的等级不得超过炼器等级。",this.alcmine.innerHTML="1、矿场等级越高，可开启的队伍越多；<br>2、队伍中只要布置任意成员，该队伍即可自动采集（没有队员的队伍无法采集资源）；<br>3、每个队伍需要一定的战斗力，防止遭遇其他宗门队伍时，显得无力对应(宗主有权组织队伍)；<br>4、采集的队伍主动进攻并获胜，则宗门所有成员宗门宝箱加1（数量不能超过每日上限，上限与宗门等级相关）；<br>5、每个队伍获得的宗门宝箱有上限，队员额外奖励3个宗门箱（宗门宝箱每晚8点结算发放）；<br>6、每晚8点自动结算队伍获得的铁矿，宗门获得资源（铁矿自动上交，胜败次数置0）；<br>7、队伍有获胜奖励未结算时不可换阵(20:05至00:00不受限制);<br>8、队伍里所有队员都超过3天未上线，系统将置空该队。<br>",this.demon.innerHTML="1、伏魔装备获取途径：特殊副本-伏魔秘境，商城每日福利；<br>2、所有部位都装备后激活套装属性；（套装等级=最小的装备等级）<br>3、套装抗腐蚀属性用于轮回之地，抵抗【腐蚀】效果；<br>4、伏魔装备可以4合1，合成更高级装备。",this.arena.innerHTML="1、周1至周5本服擂台，周六周日跨服擂台；<br>2、跨服擂台每周五22点开启；<br>3、跨服擂台按战斗力匹配分组，每12人分一组。最后有余数的全部统一分配到最后一组；<br>4、周五22:00:00清除本服擂台数据，周日22:00:00清除跨服擂台数据；<br>5、本服擂台初始10个擂台，满12人之后每多3人参与，将新增一个普通擂台（上限最多新增30个）；<br>6、跨服擂台和本服擂台同时仅存在一个；<br>7、每日最多可尝试夺擂20次，过后每次需花费20元宝；<br>8、擂主占领满8小时后，会留下分身继续占擂，分身具有本体70%战斗力，不会产出收益，若没人击败分身，15分钟后擂主本体继续占领擂台；<br>9、离线时间高于12小时，擂台分身后将自动离开擂台；<br>10、开服不足30天的区，跨服擂台期间仅本服参与；<br>11、60级可获得高级资源宝箱，可开出少量真龙血脉，80级可获得顶级资源宝箱，可开出大量真龙血脉，90级可获得超级资源宝箱，可开出威望。<br>周末跨服擂台战力分组说明：<br>档位&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;等级&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;境界<br>1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;32～45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;炼气<br>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;46～50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;炼气<br>3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51～54&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;筑基<br>4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;55～59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;金丹<br>5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60～69&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;金丹<br>6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;70～79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;元婴<br>7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80～89&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;化神<br>8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90～94&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;炼虚<br>9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;95～99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;炼虚<br>10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;合体<br>(例：若玩家等级不到55级，金丹境界，则该玩家会被分配至第4档。)",this.petSkillStore.innerHTML="灵宠战技阁概率公示<br>碎片&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;78%<br>战技&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18%<br>绝技&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4%<br>&nbsp;<br>10连抽最少一个战技;<br>保底连续50次没抽到绝技，直接给一个。",this.worldboss.innerHTML="1、全服同境界的玩家喂养同一个世界首领；<br>2、喂养度第一可获得高额奖励，并且可指定周末开启攻打首领的时间；<br>3、喂养度必须超过1000方可参与攻打；（开战后关闭喂养，同时可领取喂养排名奖励）<br>4、喂养度满后将于周末开启，若当前已是周末则顺延至下周末开启；<br>5、战斗期间进入战场将自动攻击首领，离开战场将中断攻击；（击败首领后即可领取伤害排名奖励）<br>6、周末击败首领后将于周一重置并重新开启喂养；<br>7、若所在境界中喂养人数过少，周五将显示首领喂养加成后的值，周六0时将判定是否达到开启标准，达标将默认周六早上11时开启世界首领；<br>8、若世界首领未开启，则周日晚22:30会自动增加20万喂养度，直到开启为止；（人少情况下加成不计算系统给的喂养度）<br>9、伤害奖励若未领取，将保留到下一次开启。<br><font color='#e70626'>注意：当前世界首领为新系统，不排除优化的可能性。</font>",o.innerHTML="大转盘说明<br>1、活动持续30天，活动期间内，在商城、战技阁、重置五行宫消耗的元宝都可激活抽奖条件；<br>2、抽到绝技和血脉将随机获得，下轮活动获得不会重复；<br>3、抽到多倍收益时将直接生效，仅对挂机副本中的经验、灵气、宠物装备生效；<br>4、每次活动最多12个奖品，100%获得其中1个物品，且不会重复。<br>"}o(t,"common.view.componets.FunNoticeView",e);var i=t.prototype;return i.onGradTb=function(e){var t=this.talismanUp.getChildByName("items");t.renderHandler=new h(this,this.talismanRender);var i,n=[],o=g.database.getDict("talismanattr").values;if(v.LIMIT_DUNGEON_OPEN_VERSION){var s;for(s in o)if(i=o[s],i.id>1e3&&1==e)n.push(i);else if(i.id<1e3&&0==e){if(i.id%10>=4)continue;n.push(i)}}else{var s;for(s in o)i=o[s],i.id>1e3&&n.push(i)}t.dataSource=n},i.onEquipNatureTb=function(e){var t=e+1,i=this.equipRebuild.getChildByName("items"),n=g.database.getData("equip",1020+t);n&&(i.dataSource=[1,2,3,4,5,6],this._rebuildEqNatue=t)},i.onEquipTb=function(e){this._equipIndex=e;var t=this.equipRebuild.getChildByName("tbNature");this.onEquipNatureTb(t.selectedIndex)},i.oneEquipRender=function(e,t){for(var i=e.dataSource-1,n=2;6>=n;n++){var o=0;o=0==this._equipIndex?1e3+10*n+this._rebuildEqNatue:3e3+10*n+this._rebuildEqNatue;var s,r=g.database.getData("equip",o),a=r.exAttr[i];2==n&&(s=e.getChildByName("name"),s.text=I.getName(a.key)),s=e.getChildByName("a"+n),s.text=I.getValueMinMaxStr(a.key,a.min,a.max)}},i.onSuitLv=function(e){var t=this.towerShop.getChildByName("suits");switch(e){case 0:t.dataSource=[1041,1042,1043,1044,1045];break;case 1:t.dataSource=[1046,1047,1048,1049,1050];break;case 2:t.dataSource=[1066,1067,1068,1069,1070];break;case 3:t.dataSource=[1096,1097,1098,1099,1100]}},i.ontTowerEquip=function(){var e=this.towerShop.getChildByName("lvBar"),t=0;switch(e.selectedIndex){case 0:t=40;break;case 1:t=60;break;case 2:t=80;break;case 3:t=100}x.getInstance().sendNotification("OPEN_EQUIP_PREVIEW",t,null)},i.onLotteryTb=function(e){var t=this.lottery.getChildByName("listSkill"),i=this.lottery.getChildByName("bloodList");switch(e){case 0:t.visible=!0,i.visible=!1;break;case 1:t.visible=!1,i.visible=!0}},i.onPetSkillRender=function(e,t){if(null!=e.dataSource){var i=e.dataSource;Qi.renderSkill(e,i,1,!1)}},i.onBloodListRender=function(e,t){if(null!=e.dataSource){var i=e.dataSource,n=g.database.getData("props",i);Ln.renderBloodSimpleByCfg(e,n)}},i.talismanRender=function(e,t){var i=e.dataSource,n=e.getChildByName("name"),o=i.id%10;o>=5?n.text=I.getName(i.key)+"(炼虚)":o>=4?n.text=I.getName(i.key)+"(元婴)":n.text=I.getName(i.key),o>=3?n.color="#e70626":n.color="#ffffff";for(var s=1;6>=s;s++){var r=i.getValue(s);n=e.getChildByName("a"+s),r>0?n.text=I.getValueStr(i.key,r,!1):n.text="--"}},i.suitRender=function(e,t){var i=g.database.getData("equipsuit",e.dataSource);if(i){var n=(Ng.userVO.getValue(1004),Ng.userVO.getValue(1006),e.getChildByName("dName"));n.text=i.name;var o=n.x+i.name.length*n.fontSize;e.getChildByName("dNature").index=i.nature-1,e.getChildByName("dNature").x=o;var s=i.purpleAttr;if(0!=s.length)for(var r=0;6>r;r++){var a=e.getChildByName("suitInfo_"+r);if(a.color="#c527ff",r<s.length){var l=s[r],h=I.getName(l.key),c=I.getValueStr(l.key,l.value,!0);a.text=h+" "+c}else a.text=""}}},i.popNotice=function(e,t){switch(this.mixEquip.visible=!1,this.talismanUp.visible=!1,this.equipDress.visible=!1,this.roleInfo.visible=!1,this.towerShop.visible=!1,this.vipMonth.visible=!1,this.activecodes.visible=!1,this.skyPieceFrom.visible=!1,this.petShop.visible=!1,this.towerShopRate.visible=!1,this.equipRebuild.visible=!1,this.exchange.visible=!1,this.allianceTitle.visible=!1,this.alcarule.visible=!1,this.equipGhostBox.visible=!1,this.alcBoss.visible=!1,this.pearl.visible=!1,this.alcmine.visible=!1,this.demon.visible=!1,this.arena.visible=!1,this.petSkillStore.visible=!1,this.worldboss.visible=!1,this.lottery.visible=!1,e){case 1:this.roleInfo.visible=!0;break;case 2:this.mixEquip.visible=!0;break;case 3:this.towerShop.visible=!0;break;case 4:this.talismanUp.visible=!0;var i=this.talismanUp.getChildByName("tbGrad");i.visible=v.LIMIT_DUNGEON_OPEN_VERSION,this.onGradTb(i.selectedIndex);break;case 5:this.equipDress.visible=!0;break;case 100:this.vipMonth.visible=!0;break;case 6:this.activecodes.visible=!0;break;case 7:this.skyPieceFrom.visible=!0;break;case 8:this.petShop.visible=!0;break;case 9:this.towerShopRate.visible=!0;break;case 10:this.equipRebuild.visible=!0;var n=this.equipRebuild.getChildByName("tbNature");if(t){var o=t,s=this.equipRebuild.getChildByName("tbEquip");s.selectedIndex=o.equipConf.level>=70?1:0,n.selectedIndex=o.equipConf.nature-1}else-1==n.selectedIndex&&(n.selectedIndex=Ng.userVO.getValue(1004)-1);break;case 11:this.exchange.visible=!0;break;case 12:this.allianceTitle.visible=!0;break;case 13:this.alcarule.visible=!0,"sign"==t?this.alcarule.innerHTML="<font color='#00dc24'>报名说明:</font><br>1、宗门人数不得少于10人，大于等于10人才可报名<br>2、每周一0时至周四下午18:00可报名参与宗门战，报名后等待匹配对手<br>3、只有宗主或副宗主才有资格进行报名<br>4、报名时间截止的时候，宗门成员不可退出或踢出或解散宗门<br>5、报名时间宗门成员可领取上届宗门战特殊奖励，逾期作废。<br>":"lineup"==t?this.alcarule.innerHTML="<font color='#00dc24'>布阵说明:</font><br>1、只有宗主或宗主指定成员才可布阵。<br>2、不一定所有组都要满员参战<br>3、玩家自己所在组里可进行鼓舞，每人最多鼓舞5级，3人最多鼓舞15级，加成四维属性15%<br>4、布阵截止时间为周五晚21:00<br>5、精英组获胜后可获得500积分<br>6、进攻组获胜后可获得300积分<br>7、防御组抵御对方进攻组，防御成功后对方不加积分。<br>":"fight"==t&&(this.alcarule.innerHTML="<font color='#00dc24'>战斗说明:</font><br>1、周六早上9:00开始战斗，持续至周日下午15:00<br>2、精英组：对战精英组，自动进行，最多进行3轮，三局两胜制，9:30第一场战斗，10点第二场战斗，10:30第三场战斗。获胜后获得500积分。<br>3、进攻组：最多有2次进攻机会，可攻击对方防守组，赢过一次后，无法再进行攻击。获胜后获得300积分。<br>4、防守组：等待对方来进攻，防守获胜后使对方无法获得战斗积分<br>5、最后双方积分多的那方为获胜方<br>6、获胜方获得大额宗门资源奖励，失败方获得小额宗门资源奖励<br>");break;case 14:this.equipGhostBox.visible=!0;break;case 15:this.alcBoss.visible=!0;break;case 16:this.pearl.visible=!0;break;case 17:this.alcmine.visible=!0;break;case 18:this.demon.visible=!0;break;case 19:this.arena.visible=!0;break;case 21:this.petSkillStore.visible=!0;break;case 22:this.worldboss.visible=!0;break;case 23:this.lottery.visible=!0;break;default:return}this.popup()},t}(XC),PN=function(e){function t(){this._handler=null,this._vo=null,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!1),this.sure.clickHandler=new h(this,this.onSure),this.cancel.clickHandler=new h(this,this.onCancel),this.num.on("blur",this,this.onChangeNum),this.reset()}o(t,"common.view.componets.ConfirmUseView",e);var i=t.prototype;return i.reset=function(){this._handler=null,this._vo=null},i.showProp=function(e,t,i){void 0===i&&(i=!0);var n=this.nameLb;n.color=N.getColor(e.quality),n.text=e.propConf.name,n=this.count,n.text="持有："+e.count+"个",this._vo=e;var o=this.num;o.text=""+(i?e.count:1),this._handler=t,this.popup()},i.onChangeNum=function(e){if(this._vo){var t=this.num,i=vo["int"](t.text);isNaN(i)?t.text=""+this._vo.count:i>this._vo.count?t.text=""+this._vo.count:1>i&&(t.text="1")}},i.onSure=function(e){if(this._handler){var t=this.num;this._handler.runWith([1,t.text])}this.close(),this.reset()},i.onCancel=function(e){this._handler&&this._handler.runWith(0),this.close(),this.reset()},t.SURE=1,t.CANCEL=0,t}(iI),RN=function(e){function t(){this._handler=null,this._vo=null,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!1),this.sure.clickHandler=new h(this,this.onSure),this.cancel.clickHandler=new h(this,this.onCancel),this.num.on("blur",this,this.onChangeNum),this.reset()}o(t,"common.view.componets.ConfirmNumView",e);var i=t.prototype;return i.reset=function(){this._handler=null,this._vo=null},i.showProp=function(e){var t=0,i=this.nameLb;i.color=N.getColor(e.quality),i.text=e.propConf.name,t=i.x+i.width;var n=this.nature;n.index=e.propConf.nature-1,n.x=t,n.visible=!0,t=t+n.width+5,i=this.count,i.text="持有："+e.count+"个",this._vo=e,i=this.silver,i.text=e.count*e.propConf.silverPrice+"",e.quality>=5?(this.doubleCfm.selected=!1,this.doubleCfm.visible=!0):(this.doubleCfm.selected=!0,this.doubleCfm.visible=!1)},i.showEquip=function(e){var t,i=0;t=this.nameLb,t.color=N.getColor(e.quality),t.text=e.equipConf.name,i=t.x+t.width;var n=this.nature;n.index=e.equipConf.nature-1,n.x=i,n.visible=!0,i=i+n.width+5,t=this.count,t.text="",e.quality>=5?(this.doubleCfm.selected=!1,this.doubleCfm.visible=!0):(this.doubleCfm.selected=!0,this.doubleCfm.visible=!1)},i.onChangeNum=function(e){if(this._vo){var t,i=this.num,n=vo["int"](i.text);t=this.silver,isNaN(n)||n>this._vo.count?t.text="输入数量有误":t.text=n*this._vo.propConf.silverPrice+""}},i.showNum=function(e,t){var i=this.num;i.text=""+e,this._handler=t,this.popup()},i.onSure=function(e){if(this._handler)if(this.doubleCfm.visible&&0==this.doubleCfm.selected)x.getInstance().sendNotification("prompted_info_show",{info:"特殊操作，需要勾选再次确认"});else{var t=this.num;this._handler.runWith([1,t.text])}this.close(),this.reset()},i.onCancel=function(e){this._handler&&this._handler.runWith(0),this.close(),this.reset()},t.SURE=1,t.CANCEL=0,t}(nI),LN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.btnEnter.visible=!1,this.btnEnter.pos(620,20),this.tabBar.selectHandler=new h(this,this.onTab),this.items.renderHandler=new h(this,this.itemRender)}o(t,"modules.forest.view.componets.ForestSelectPop",e);var i=t.prototype;return i.onTab=function(e){0>e||e>t.itemDatas.length-1||(this.items.dataSource=t.itemDatas[e])},i.itemRender=function(e,t){var i=e.dataSource;1==this.tabDiff.selectedIndex&&(i+=1);var n=g.database.getData("props",i),o=e.getChildByName("dName");o.text=n.name,o.color=N.getColor(n.quality);var s=o.x+n.name.length*o.fontSize;e.getChildByName("dNature").index=n.nature-1,e.getChildByName("dNature").x=s;var r=n.baseAttr[0],a=I.getName(r.key);o=e.getChildByName("suitInfo_0"),o.text=a+I.getValueStr(r.key,r.min,!0),r=n.baseAttr[1],a=I.getName(r.key),o=e.getChildByName("suitInfo_1"),o.text=a+I.getValueStr(r.key,r.min,!0)},n(t,["itemDatas",function(){return this.itemDatas=[[20016,20026,20036,20046,20056],[20066,20076,20086,20096,20106],[20116,20126,20136,20146,20156],[20166,20176,20186,20196,20206],[20216,20226,20236,20246,20256],[20266,20276,20286,20296,20306],[20316,20326,20336,20346,20356],[20366,20376,20386,20396,20406]]}]),t}(xT),ON=function(e){function t(){this._vip=null,t.__super.call(this),M.drawBlackBg(this,!0);var e;e=T.IS_ON_MINI||Q.isLayaAndIos()?Or.onQQMiniGame||X.openJade()?[{id:1,lt:1,big:1,old:96,now:88},{id:2,lt:12,big:0,old:336,now:300},{id:3,lt:0,big:12,old:816,now:730},{id:4,lt:12,big:12,old:1030,now:888}]:[{id:1,lt:1,big:1,old:96,now:88}]:[{id:1,lt:1,big:1,old:96,now:88},{id:2,lt:12,big:0,old:336,now:300},{id:3,lt:0,big:12,old:816,now:730},{id:4,lt:12,big:12,old:1030,now:888}],this.list.dataSource=e,this.list.renderHandler=new h(this,this.onRender)}o(t,"modules.marcket.view.componets.MonthCardBuyPop",e);var i=t.prototype;return i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("name1");i.lt>0?n.text="黄金月卡 * "+i.lt+(i.big>0?" + ":""):n.text="";var o=e.getChildByName("name2");i.big>0?o.text="至尊月卡 * "+i.big+(4==i.id?"『年』":""):o.text="",o.x=n.x+n.width;var s=e.getChildByName("oldPrice");s.text="原价"+i.old+(X.openJade()&&!qt.canJumpPay(i.now)?"仙玉":"元"),s=e.getChildByName("nowPrice"),s.text="现价"+i.now+(X.openJade()&&!qt.canJumpPay(i.now)?"仙玉":"元"),s=e.getChildByName("lbCD");var r=e.getChildByName("btnBuy");if(this._vip){var a=g.clock.currentTime,l=this._vip.groupBuyTime.get(i.id);if(l>a){l-=a;var h=0;h=i.id>1?30:1,l=Math.ceil(l/864e5)-h,l>1?(s.text=l+"天后可再次购买",r.visible=!1):(s.text="",r.visible=!0)}else s.text="",r.visible=!0}else s.text="",r.visible=!1;s=e.getChildByName("lbYear"),s.visible=4==i.id&&r.visible},i.updateVipInfo=function(e){this._vip=e,this.list.refresh()},t}(pT),MN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);var e=M.heightScaleNum(this);e>0&&(this.list.height+=e,this.lbInfo.y+=e,this.btnFresh.y+=e,this.getChildByName("close").y+=e,this.height+=e)}return o(t,"modules.home.view.componets.SpDungeonRank",e),t}(fT),DN=function(e){function t(){this._prop=null,this._max=0,this._price=0,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!0),this.buyNum.on("blur",this,this.onAimCountChanged),this.btnSure.clickHandler=new h(this,this.onBuy)}o(t,"modules.marcket.view.componets.BuyBookMoreView",e);var i=t.prototype;return i.onAimCountChanged=function(){var e=vo["int"](this.buyNum.text),t=Ng.userVO.getValue(1010);if(isNaN(e)||0>e)this.costGold.text=""+this._price+"元宝",this.costGold.color="#f4b922";else{e>this._max&&(e=this._max,this.buyNum.text=""+e);var i=this._price*e;this.costGold.text=String(i)+"元宝",i>t?this.costGold.color="#e70626":this.costGold.color="#f4b922"}},i.popProps=function(e,t,i){this._prop=e,this._max=i,this._price=t,Ln.renderPropsByCfg(this.props,e,1);var n=this.props.getChildByName("binding");n.visible=!0;var o=this.props.getChildByName("level");n.x=o.x+o.width+5,this.lbMax.text="剩余可购买："+i+"个",this.goldPrice.text="每个"+t+"元宝",this.buyNum.text="1",this.onAimCountChanged(),this.popup()},i.onBuy=function(){var e=Ng.userVO.getValue(1010),t=vo["int"](this.buyNum.text);if(0>=t&&(t=1),t>this._max)return void x.getInstance().sendNotification("prompted_info_show",{info:"超过可购买上限"});var i=this._price*t;return i>e?void x.getInstance().sendNotification("prompted_info_show",{info:"购买需要"+i+"元宝"}):(pc.instance.buyBook(this._prop.id,t),this.close(),void k.goldenCost("购买book",1,i))},t}(NT),kN=function(e){function t(){this._market=null,this._price=0,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!0),this.lbMax.visible=!1,this.buyNum.on("blur",this,this.onAimCountChanged),this.btnSure.clickHandler=new h(this,this.onBuy)}o(t,"modules.marcket.view.componets.BuyPropMoreView",e);var i=t.prototype;return i.onAimCountChanged=function(){var e=vo["int"](this.buyNum.text),t=Ng.userVO.getValue(1010),i=this._price,n=vo["int"](t/i);if(isNaN(e)||0>e)this.costGold.text=""+i+"元宝",this.costGold.color="#f4b922",this.buyNum.text="1";else{e>n&&(e=n,this.buyNum.text=""+e),this.costGold.text="";var o=i*e;this.costGold.text=String(o)+"元宝",o>t?this.costGold.color="#e70626":this.costGold.color="#f4b922"}},i.popProps=function(e,t,i){this._price=i,this._market=e,Ln.renderPropsByCfg(this.props,t,1),this.goldPrice.text="每个仅需"+this._price+"元宝",this.buyNum.text="1",this.unit.text="个",this.onAimCountChanged(),this.popup()},i.popPropsStone=function(e,t,i,n){this._price=i,this._market=e,Ln.renderPropsByCfg(this.props,t,n),this.goldPrice.text="每组仅需"+this._price+"元宝",this.buyNum.text="1",this.unit.text="组",this.onAimCountChanged(),this.popup()},i.onBuy=function(){var e=this,t=Ng.userVO.getValue(1010),i=vo["int"](this.buyNum.text);if(0>=i&&(i=1),i>1e7)return void x.getInstance().sendNotification("prompted_info_show",{info:"单次最多购买1000万个"});var n=this._price*i;return n>t?void x.getInstance().sendNotification("prompted_info_show",{info:"购买需要"+n+"元宝"}):void(n>=1500?x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"购买需要<font color='#fffc00'>"+n+"元宝</font>，是否确认？",handler:h.create(this,function(t){t&&(pc.instance.buy(e._market.id,i),k.goldenCost("商场购买"+e._market.id,i,e._price),e.close())})}):(pc.instance.buy(this._market.id,i),k.goldenCost("商场购买"+this._market.id,i,this._price),this.close()))},t}(NT),BN=function(e){function t(){this.btnCopy=null,t.__super.call(this);var e=M.heightScaleNum(this);if(e>0&&(this.height+=e),Q.isLaya())this.btnSure.clickHandler=new h(this,this._onLayaCopy);else{var i=Or.getElementById("layaContainer");this.btnCopy=Or.createElement("button"),this.btnCopy.id="btnCopy",this.btnCopy.className="btnCopy",this.btnCopy.style.position="absolute",this.btnCopy.style["font-size"]="28px",this.btnCopy.style.color="#ffffff",this.btnCopy.style.opacity="0",i.appendChild(this.btnCopy);try{new Or.window.ClipboardJS(".btnCopy",{text:this._onCopy})}catch(n){}}}o(t,"common.view.componets.AlertCopyView",e);var n=t.prototype;return n.popCopyInfo=function(e,i){this.title.text=null!=i?i:"成功复制到剪贴板",t._copyeTxt=e,this.popup()},n._onLayaCopy=function(){Q.isLaya()&&Q.CopyTextToClipboard(t._copyeTxt),this.close()},n._onCopy=function(){return x.getInstance().sendNotification("POP_ALERT_COPY"),t._copyeTxt},n.onOpened=function(){Q.isLaya()||(this.fitDOM(),i.stage.on("resize",this,this.fitDOM))},n.onClosed=function(e){Q.isLaya()||(i.stage.off("resize",this,this.fitDOM),Dr.fitDOMElementInArea(this.btnCopy,this.btnSure,-1e3,-1e3,0,0))},n.fitDOM=function(){Dr.fitDOMElementInArea(this.btnCopy,this.btnSure,0,0,this.btnSure.width,this.btnSure.height)},t._copyeTxt=null,t}(rA),VN=function(e){function t(){t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!1),this.txtInfo.style.fontSize=26,this.txtInfo.style.leading=10,this.txtInfo.style.color="#ffffff",this.txtInfo.style.align="center",this.zOrder=10002}o(t,"common.view.componets.AlertView",e);var i=t.prototype;return i.showInfo=function(e,t){this.txtInfo.innerHTML=e,this.closeHandler=t},t}($I),FN=function(e){function t(){this.isStoping=!1,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!1),this.noticePanel.vScrollBarSkin="",this.noticePanel.vScrollBar.elasticBackTime=600,this.noticePanel.vScrollBar.elasticDistance=200,this.notice.style.lineHeight=40,this.notice.style.fontSize=26,this.notice.style.color="#ffffff",this.back.getChildByName("back").on("click",this,this.onBack)}o(t,"common.view.componets.GameNoticeView",e);
var i=t.prototype;return i.onBack=function(){Ts.removeItem("_sever_selectd"),X.logout(!0)},i.showInfo=function(e,t){try{var i=e.replace(/「/g,"'");this.notice.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;"+i}catch(n){this.notice.innerHTML="公告排版有误,请联系管理员"}this.noticePanel.refresh(),this.isStoping=0!=t,this.serviceStop.visible=this.isStoping,this.isStoping?(this.back.visible=!0,this.btnClose.visible=!1):(this.back.visible=!1,this.btnClose.visible=!0),this.popup(),op.miniRegisterStep(13)},t}(EA),GN=function(e){function t(e){this.hangContext=null,this.fighterCellA=null,this.fighterCellB=null,this.isSp=0,this.helper=null,this.reporter=null,this._appendReportCache=[],this._lastBr=!1,this.showWaitAward=!1,void 0===e&&(e=0),t.__super.call(this),M.drawBlackBg(this,!0);var i=M.heightScaleNum(this);i>0&&(this.panelReports.height+=i,this.btnAward.y+=i,this.btnBoss.y+=i,this.getChildByName("close").y+=i,this.height+=i),this.isSp=e,this.panelReports.vScrollBar.hide=!0,this.reporter=new Ie(this.panelReports),this.fighterCellA=new Ne(this.fighterA),this.fighterCellB=new Ne(this.fighterB),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max,this.clearReport.clickHandler=new h(this,this.clear),this.dungeonNotice.visible=!1,this.dungeonNotice.text="",this.helper=new Ae(this)}o(t,"modules.fight.view.components.FightingLivePage",e);var n=t.prototype;return n.appendReport=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),t?(this._lastBr?_o.startWith(e,"<br>")&&(e=e.substr(4)):_o.startWith(e,"<br>")||(e="<br>"+e),_o.endWith(e,"<br>")||(e+="<br>"),this._lastBr=!0):this._lastBr=_o.endWith(e,"<br>"),this.isPopup?(this.reporter.appendReport(e),i&&this.reporter.layout()):(this._appendReportCache.push(e),this._appendReportCache.length>100&&this._appendReportCache.shift())},n.onOpened=function(){if(this._appendReportCache.length>0){var e;for(var t in this._appendReportCache)e=this._appendReportCache[t],this.reporter.appendReport(e);this._appendReportCache.length=0,this.reporter.layout()}},n.clear=function(){this._appendReportCache.length=0,this.reporter.clear(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max},n.initFightStart=function(e){if(i.timer.clear(this,this.onSearching),this.showWaitAward=!1,this.hangContext=e,this.fighterCellA.showFighter(e.fighterA,this.isSp),this.fighterCellA.visible(!0),e.fighterB&&0!=e.fighterB.unitId.id&&!e.fighterB.isDead()?(this.fighterCellB.showFighter(e.fighterB,!0),this.fighterCellB.visible(!0)):this.fighterCellB.visible(!1),this.fighterCellA.clearTips(),this.fighterCellB.clearTips(),e.fighterB&&!e.fighterB.isDead()){var t=e.fighterB.getValue(1002),n=e.fighterB.getValue(1004);switch(t="<font color='"+R.getColor(n)+"'>【"+t+"】</font>",this.isSp){case 1:e.fighterA.unitId.equals(Ng.userVO.unitId)?(this.appendReport("<font color='#ffffff'>挑战对手</font>",!1),this.appendReport(t)):(t=e.fighterA.getValue(1002),n=e.fighterA.getValue(1004),t="<font color='"+R.getColor(n)+"'>【"+t+"】</font>",this.appendReport(t+"<font color='#ffffff'>前来挑战</font>",!0));break;case 2:this.appendReport("<font color='#ffffff'>找到猎物</font>",!1),this.appendReport(t);break;case 3:this.appendReport("被"+t+"<font color='#ff0000'>发现</font>",!0);break;default:this.reporter.getReportsNum()<=0&&(this.appendReport("<font color='#ffffff'>找到怪物</font>",!1),this.appendReport(t))}var o=e.fighterA.getValue(1004);R.isHurt(o,n)?this.appendReport("<font color='"+R.getColor(n)+"'>对方</font>的五行正被<font color='"+R.getColor(o)+"'>您</font>克制"):R.isHurt(n,o)&&this.appendReport("<font color='"+R.getColor(o)+"'>您</font>的五行正被<font color='"+R.getColor(n)+"'>对方</font>克制"),this.reporter.layout()}},n.getPvpWinner=function(){return null==this.hangContext||null==this.hangContext.fighterA||null==this.hangContext.fighterB?null:0!=this.hangContext.fighterA.unitId.type||0!=this.hangContext.fighterB.unitId.type?null:this.hangContext.fighterA.isDead()?this.hangContext.fighterB.unitId:this.hangContext.fighterB.isDead()?this.hangContext.fighterA.unitId:null},n.receiveFightReports=function(e){if(i.timer.clear(this,this.onSearching),this.hangContext){if(e.length){for(var t="",n=0;n<e.length;n++){var o=e[n],s=o.getHtml(this.hangContext,n,e.length);s&&(t+=_o.endWith(t,"<br>")&&_o.startWith(s,"<br>")?s.substr(4):s),this.act(o),o.recover()}""!=t&&this.appendReport(t,!0)}}else this.fighterCellB.visible(!1),this.appendReport("<br><font color='#ffffff'>切换战斗中，请稍候...</font>");if(this.hangContext&&this.hangContext.fighterA.isDead()&&(this.fighterCellA.setSpeed(0),this.fighterCellB.setSpeed(0),1!=this.isSp||this.hangContext.fighterA.unitId.equals(Ng.userVO.unitId)?(this.fighterCellB.hideDelay(this,this.onHideRight),1==this.isSp?this.appendReport("<font color='#ff0000'>挑战失利</font>",!0):2==this.isSp?this.appendReport("<font color='#ff0000'>战斗失利</font>",!0):(this.appendReport("<font color='#ff0000'>战斗失败，等待回复...</font>",!0),this.appendReport("<font color='#00ff00'>正在打坐调养...</font>",!0))):(this.fighterCellB.hideDelay(this,this.onHideLeft),this.appendReport("<font color='#ffff00'>防守胜利</font>",!0))),this.hangContext&&this.hangContext.fighterB.isDead()&&this.fighterCellB.hp.visible){if(this.fighterCellA.setSpeed(0),this.fighterCellB.setSpeed(0),this.hangContext.fighterB.isDead()&&this.hangContext.fighterB.isBoss){var r=x.getInstance().retrieveMediator("GuideTaskManager");r&&r.killedBoss()}1!=this.isSp||this.hangContext.fighterA.unitId.equals(Ng.userVO.unitId)?(this.fighterCellB.hideDelay(this,this.onHideRight),this.hangContext.fighterA.isDead()||0!=this.showWaitAward||(this.showWaitAward=!0,1==this.isSp||2==this.isSp?this.appendReport("<font color='#ffff00'>挑战胜利</font>",!0):this.appendReport("<font color='#ffff00'>战斗胜利，查看收获</font>",!0))):(this.fighterCellB.hideDelay(this,this.onHideLeft),this.appendReport("<font color='#ff0000'>防守失败</font>",!0))}this.reporter.layout()},n.onHideRight=function(){this.fighterCellB.visible(!1)},n.onHideLeft=function(){this.fighterCellA.visible(!1)},n.act=function(e){if(null!=this.hangContext){var t,i,n,o;e.unitidFrom.equals(this.hangContext.fighterA.unitId)?(n=this.hangContext.fighterA,t=this.fighterCellA):e.unitidFrom.equals(this.hangContext.fighterB.unitId)&&(n=this.hangContext.fighterB,t=this.fighterCellB),e.unitidTo.equals(this.hangContext.fighterA.unitId)?(o=this.hangContext.fighterA,i=this.fighterCellA):e.unitidTo.equals(this.hangContext.fighterB.unitId)&&(o=this.hangContext.fighterB,i=this.fighterCellB),o&&null!=i&&null!=t&&this.helper.act(this.hangContext,e,t,i,n,o)}},n.receiveFightAwards=function(e){e.exp>0&&this.appendReport("<font color='#0084ff'>获得经验 +"+e.exp+"</font>",!0),e.gas>0&&this.appendReport("<font color='#00dc24'>获得灵气 +"+e.gas+"</font>",!0),e.silver>0&&this.appendReport("<font color='#fffc00'>获得铜币 +"+e.silver+"</font>",!0),e.donate>0&&this.appendReport("<font color='#00dc24'>获得贡献 +"+e.donate+"</font>",!0),e.gasM>0?this.appendReport("<font color='#3eede7'>获得真元 +"+e.gasM+"</font>",!0):-1==e.gasM&&this.appendReport("<font color='#e70626'>您的真元已满，无法获取，请尽快使用。</font>",!0),e.renderItems(this,!1),this.isSp||(this.onSearching(),i.timer.loop(3e3,this,this.onSearching)),this.reporter.layout()},n.onSearching=function(){this.appendReport("<font color='#cc0000'>正在寻找怪物...</font>",!0),this.reporter.layout()},n.levelUP=function(){this.appendReport("<font color='#00ff00'>恭喜您升级啦^^</font>",!0),this.reporter.layout()},t}(qC),HN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,0),this.errorInfo.text=""}return o(t,"gamelogin.view.componets.VisitorBindView",e),t}(eN),UN=function(e){function t(){this._vo=null,t.__super.call(this),M.drawBlackBg(this,!1),this.list.renderHandler=new h(this,this.onRender)}o(t,"modules.talisman.view.componets.TalismanChgNature",e);var i=t.prototype;return i.showTalisman=function(e){this._vo=e,this.aimTalisman.dataSource=e,Ln.renderTalisman(this.aimTalisman,e);var t;switch(this._vo.talismanConf.nature){case 1:t=[2,3,4,5];break;case 2:t=[1,3,4,5];break;case 3:t=[1,2,4,5];break;case 4:t=[1,2,3,5];break;case 5:t=[1,2,3,4]}this.list.dataSource=t,this.popup()},i.onRender=function(e,t){if(null!=this._vo){var i=e.getChildByName("itm");Ln.renderTalismanNatureOverview(i,this._vo,e.dataSource)}},t}(WC),zN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1);var e=M.heightScaleNum(this);e>0&&(this.canUsed.height+=e,this.height+=e),this.canUsed.scrollBar.hide=!0,this.canUsed.renderHandler=new h(this,this.onTalismanRender),this.canUsed.mouseEnabled=!0,this.canUsed.mouseHandler=new h(this,this.onMouse)}o(t,"modules.talisman.view.componets.TalismanDressChangeView",e);var i=t.prototype;return i.popSelect=function(e,t,i){e?Ln.renderTalisman(this.dressed,e):Ln.renderTalismanEmptyGrid(this.dressed,i),t.length<=0?(this.emptTxt.visible=!0,this.canUsed.visible=!1):(this.emptTxt.visible=!1,this.canUsed.visible=!0,this.canUsed.dataSource=t),this.popup()},i.onTalismanRender=function(e,t){if(this.canUsed.dataSource){var i=this.canUsed.dataSource[t];Ln.renderTalisman(e.getChildByName("talisman"),i)}},i.onMouse=function(e,t){if("click"==e.type&&"btnChange"==e.target.name){var i=this.canUsed.dataSource[t];gc.instance.dress(i.id,0),this.close()}},t}(YC),WN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,0)}return o(t,"gamelogin.view.componets.MiniLoginView",e),t}(nN),YN=function(e){function t(){this._handler=null,this.isDoubleExt=!1,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!1),this.sure.clickHandler=new h(this,this.onSure),this.cancel.clickHandler=new h(this,this.onCancel),this.info.style.fontSize=26,this.info.style.leading=10,this.info.style.color="#ffffff",this.info.style.align="center",this.reset()}o(t,"common.view.componets.ConfirmView",e);var i=t.prototype;return i.reset=function(){this._handler=null},i.showInfo=function(e,t){this.info.innerHTML=e,this._handler=t,this.popup()},i.onSure=function(e){this._handler&&(this.doubleCfm.visible?this.isDoubleExt?this._handler.runWith([1,this.doubleCfm.selected]):this.doubleCfm.selected?this._handler.runWith(1):x.getInstance().sendNotification("prompted_info_show",{info:"特殊操作，需要勾选再次确认"}):this.inputCfm.visible?this._handler.runWith([1,this.inputCfm.text]):this._handler.runWith(1)),this.close(),this.reset()},i.onCancel=function(e){this._handler&&this._handler.runWith(0),this.close(),this.reset()},t.SURE=1,t.CANCEL=0,t}(zA),qN=function(e){function t(){this.changeHandler=null,this.txtReports=null,t.__super.call(this),M.drawBlackBg(this,!0),this.txtReports=new uw,this.txtReports.width=this.panelReports.width,this.txtReports.style.lineHeight=40,this.txtReports.style.fontSize=24,this.txtReports.style.color="#ffffff",this.txtReports.style.bold=!0,this.panelReports.vScrollBar.hide=!0,this.panelReports.addChild(this.txtReports),this.lodeNoView.x=this.lodeYesView.x,this.lodeYesView.visible=!1,this.lodeNoView.visible=!0,this.logView.visible=!1,this.lodeView.visible=!0,this.listLode.mouseEnabled=!0,this.listLode.scrollBar.hide=!0,this.listLode.dataSource=[],this.listLode.scrollBar.elasticBackTime=200,this.listLode.scrollBar.elasticDistance=100,this.listLode.scrollBar.changeHandler=new h(this,this.onScrollChangeItem);var e=M.heightScaleNum(this);e>0&&(this.height+=e)}o(t,"modules.lode.view.componets.LodeView",e);var i=t.prototype;return i.onScrollChangeItem=function(e){e<this.listLode.scrollBar.min&&Math.abs(e)>.8*this.listLode.scrollBar.elasticDistance?this.changeHandler&&this.changeHandler.runWith(0):e>this.listLode.scrollBar.max&&Math.abs(e-this.listLode.scrollBar.max)>.8*this.listLode.scrollBar.elasticDistance&&this.changeHandler&&this.changeHandler.runWith(1)},i.onClosed=function(e){x.getInstance().sendNotification("CLOSE_LODE_PAGE")},t}(fA),KN=function(e){function t(){this._teamId=0,this._pos=0,this._vo=null,t.__super.call(this),M.drawBlackBg(this,!0),this.list.renderHandler=new h(this,this.onRender),this.tbFilter.selectHandler=new h(this,this.onFilter)}o(t,"modules.alca.view.componets.AlcaLineUpSelect",e);var i=t.prototype;return i.showMembers=function(e,t,i){this._vo=e,this._teamId=t,this._pos=i,this.onFilter(this.tbFilter.selectedIndex)},i.onFilter=function(e){if(1==e)this.list.dataSource=this._vo.memeberList;else{var t,i=[];for(var n in this._vo.memeberList)t=this._vo.memeberList[n],this._vo.getTeamId(t.playerId)<=0&&i.push(t);this.list.dataSource=i}},i.onRender=function(e,t){var i=e.dataSource;if(null!=i&&null!=this._vo){var n=e.getChildByName("name");n.text=i.name,Ng.userVO.unitId.id==i.playerId?n.color="#00dc24":n.color="#0084ff";var o=e.getChildByName("nature");o.index=i.nature-1,o.x=n.x+n.width,n=e.getChildByName("level"),n.text=i.level+"级",n.x=o.x+o.width;var s=e.getChildByName("btnJoin"),r=this._vo.hasDrug(i.playerId);n=e.getChildByName("drug"),0>=r?(n.text="未鼓舞",n.color="#b0bcb0"):(n.text="鼓舞+"+r,r>=5?n.color="#00dc24":n.color="#ffffff");var a=this._vo.getTeamId(i.playerId);n=e.getChildByName("state"),0>=a?(n.text="未上阵",n.color="#b0bcb0",s.label="上阵"):(n.text=be.getTeamName(a),n.color=be.getTeamColor(a),s.label="换位")}},t}(lI),XN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.alca.view.componets.AlcaLineupView",e),t}(cI),QN=function(e){function t(){this._logs=null,t.__super.call(this),M.drawBlackBg(this,!0),this.nameFilter.mouseEnabled=!0,this.nameFilter.on("blur",this,this.onFilter),this.list.renderHandler=new h(this,this.onRender),this.infoMine.style.fontSize=24,this.infoMine.style.leading=6,this.infoMine.style.color="#ffffff"}o(t,"modules.alca.view.componets.AlcaAwardLogs",e);var i=t.prototype;return i.onFilter=function(){var e=null;if(null==this._logs||0==this._logs.length)e=null;else if(null==this.nameFilter.text||""==this.nameFilter.text)e=this._logs;else{e=[];var t;for(var i in this._logs)t=this._logs[i],t&&(-1!=t.allianceNameA.indexOf(this.nameFilter.text)||null!=t.allianceNameB&&-1!=t.allianceNameB.indexOf(this.nameFilter.text))&&e.push(t)}null==e||0==e.length?(this.lbEmpty.visible=!0,this.list.visible=!1):(this.lbEmpty.visible=!1,this.list.visible=!0,this.list.dataSource=e)},i.popLogs=function(e){this._logs=e;var t,i=null,n=0;for(var o in e){if(t=e[o],t.allianceIdA==Ng.userVO.getValue(7011)){n=t.awardA,i=t.allianceNameB;break}if(t.allianceIdB>0&&t.allianceIdB==Ng.userVO.getValue(7011)){n=t.awardB,i=t.allianceNameA;break}}0==n?this.infoMine.innerHTML="未参赛":null==i||""==i?this.infoMine.innerHTML="<font color='#00dc24'>上天眷顾，未逢对手，直接获胜</font>。<font color='#fffc00'>宗门资源+"+t.awardA+"</font>":0>n?this.infoMine.innerHTML="对阵<font color='#e70626'>"+i+"</font>，<font color='#e70626'>失败</font>，<font color='#fffc00'>宗门资源+"+-n+"</font>":this.infoMine.innerHTML="对阵<font color='#e70626'>"+i+"</font>，<font color='#00dc24'>获胜</font>，<font color='#fffc00'>宗门资源+"+n+"</font>",this.nameFilter.text="",this.onFilter(),this.popup()},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("info");n.style.fontSize=24,n.style.leading=6,n.style.color="#ffffff",n.innerHTML=i.getInfo()},t}(rI),jN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}o(t,"modules.alca.view.componets.AlcaSignupView",e);var i=t.prototype;return i.showSignup=function(e){e?(this.lbInfo.text="正在匹配对手，周五00:00将进入布阵界面",this.lbInfo.color="#00dc24",this.lbInfo.visible=!0,this.btnSign.visible=!1):(this.lbInfo.visible=!1,this.btnSign.visible=!0,this.btnSign.label="现在报名"),this.isPopup||this.popup()},i.showGameDelay=function(){this.lbInfo.text="由于报名宗门数量过少，本届宗门战已取消。",this.lbInfo.color="#fffc00",this.lbInfo.visible=!0,this.btnSign.visible=!1,this.isPopup||this.popup()},i.showSignOuttime=function(){this.lbInfo.text="本次宗门战未报名参赛",this.lbInfo.color="#fffc00",this.lbInfo.visible=!0,this.btnSign.visible=!1,this.isPopup||this.popup()},i.showRollEmpty=function(){this.lbInfo.text="贵宗门被上天眷顾，本轮宗门战未找到对手，赛后奖励自动发放。",this.lbInfo.color="#00dc24",this.lbInfo.visible=!0,this.btnSign.visible=!1,this.isPopup||this.popup()},i.showLineup=function(){this.lbInfo.text="正在进行布阵",this.lbInfo.visible=!0,this.btnSign.visible=!0,this.btnSign.label="开始布阵",this.isPopup||this.popup()},i.showWaitFight=function(){this.lbInfo.text="布阵已完成，等待开赛",this.lbInfo.visible=!0,this.btnSign.visible=!0,this.btnSign.label="查看布阵",this.isPopup||this.popup()},i.showFighting=function(){this.lbInfo.text="宗门战，比赛进行中",this.lbInfo.visible=!0,this.btnSign.visible=!0,this.btnSign.label="进入比赛",this.isPopup||this.popup()},i.showFightOver=function(e){e.signDate<0?e.award>0?this.lbInfo.text="宗门战获胜，获得宗门资源："+e.award:this.lbInfo.text="宗门战失败，获得宗门资源："+-e.award:this.lbInfo.text="宗门战比赛结束，正在结算奖励",this.lbInfo.visible=!0,this.btnSign.visible=!0,this.btnSign.label="查看赛况",this.isPopup||this.popup()},t}(sI),ZN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.txtTitle.text="",this.scoreE.text="",this.scoreM.text=""}return o(t,"modules.alca.view.componets.AlcaFightView",e),t}(aI),JN=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.alca.view.componets.AlcaAttackSelect",e),t}(uI),$N=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.alca.view.componets.AlcaVideoLogsView",e),t}(dI),eP=function(e){function t(){this.branchListAsc=null,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!1),this.serverList.scrollBar.hide=!0,this.serverList.renderHandler=new h(this,this.onRender),this.lastplays.renderHandler=new h(this,this.onRender),this.opening.visible=g.clock.currentTime<16281324e5,this.groupList.renderHandler=new h(this,this.onGroupRender),this.groupList.mouseEnabled=!0,this.groupList.mouseHandler=new h(this,this.onGroupClick),this.checkSort.selected="true"==Ts.getItem("_check_sort_selectd"),this.checkSort.clickHandler=new h(this,this.showBranchs)}o(t,"common.view.componets.ServerListView",e);var i=t.prototype;return i.showBranchs=function(){var e=this.groupList.selectedItem;if(e){var t=[],i=0,n=0;if(this.checkSort.selected){for(i=12*e.i,n=0;12>n;n++)i>=0&&i<this.branchListAsc.length&&t.push(this.branchListAsc[i]),i+=1;this.serverList.dataSource=t,Ts.setItem("_check_sort_selectd","true")}else{for(i=12*(e.i+1)-1,n=0;12>n;n++)i>=0&&i<this.branchListAsc.length&&t.push(this.branchListAsc[i]),i-=1;this.serverList.dataSource=t,Ts.setItem("_check_sort_selectd","false")}}},i.receiveBranch=function(e){this.branchListAsc=e;for(var t=Math.ceil(e.length/12),i=[],n=!1,o=0;t>o;o++){var s=12*o+1,r=12*(o+1);if(r>e.length&&(r=e.length),s==r){var a=e[o];"close"!=a.state&&"full"!=a.state||(n=!0)}i.unshift({i:o,text:(1==s?"S0":"S")+s+"-"+r})}n&&this.groupList.length>1?this.groupList.selectedIndex=1:this.groupList.selectedIndex=0,this.groupList.dataSource=i,this.showBranchs()},i.onGroupRender=function(e,t){var i=e;this.groupList.selectedIndex==t?(i.underline=!1,i.bold=!0,i.color="#00dc24",i.fontSize=34):(i.underline=!0,i.bold=!1,i.color="#ffffff",i.fontSize=32)},i.onGroupClick=function(e,t){if("click"==e.type){if(this.groupList.selectedIndex==t)return;this.groupList.selectedIndex=t,this.groupList.refresh(),this.showBranchs()}},i.onRender=function(e,i){var n=e.dataSource;t.renderServer(e,n)},t.renderServer=function(e,t){var i=e.getChildByName("btnEnter"),n=t.name;"s"==n.charAt(0)?i.labelColors="#c527ff":i.labelColors="",i.label=n.toUpperCase();var o=e.getChildByName("state"),s=e.getChildByName("desc");switch(s&&(s.text=""),t.state){case"open":o.text="";break;case"new":o.text="推荐",o.color="#c527ff";break;case"full":o.text="爆满",o.color="#e70626";break;case"close":o.text="预备",o.color="#b0bcb0",s&&(s.text=t.desc);break;default:o.text=t.state}},t.KEY_SORT_SELECTED="_check_sort_selectd",t._pageSize=12,t}(tN),tP=function(e){function t(){this._vo=null,t.__super.call(this),M.drawBlackBg(this,!1),this.list.renderHandler=new h(this,this.onRender)}o(t,"modules.alca.view.componets.LineupAutorSelect",e);var i=t.prototype;return i.showMembers=function(e){this._vo=e,this.list.dataSource=e.memeberList},i.onRender=function(e,t){var i=e.dataSource;if(null!=i&&null!=this._vo&&this._vo.inited()){var n=e.getChildByName("btnJoin"),o=e.getChildByName("name");o.text=i.name,Ng.userVO.unitId.id==i.playerId?(o.color="#00dc24",n.visible=!1):(o.color="#0084ff",n.visible=!0);var s=e.getChildByName("nature");s.index=i.nature-1,s.x=o.x+o.width,o=e.getChildByName("level"),o.text=i.level+"级",o.x=s.x+s.width;var r=Et.getTitle(i.title);o=e.getChildByName("title"),o.text=r.name,o.color=r.color,this._vo.authorizeLine==i.playerId&&(n.visible=!1)}},t}(hI),iP=(function(e){function t(){if(this.changeHandler=null,this.jadePays=null,this.jadeAimGold=null,this.jadeNeed=null,this.jadeAimBook=null,this.jadeNeedBook=null,this.txtReports=null,t.__super.call(this),M.drawBlackBg(this,!0),this.logPanel.x=this.buyBox.x,this.addPanel.x=this.buyBox.x,this.jadePanel.x=this.buyBox.x,this.logPanel.vScrollBar.hide=!0,this.addPanel.vScrollBar.hide=!0,this.listContainer.scrollBar.hide=!0,this.listContainer.scrollBar.elasticBackTime=200,this.listContainer.scrollBar.elasticDistance=100,this.listContainer.scrollBar.changeHandler=new h(this,this.onScrollChangeItem),this.lbLv.visible=!1,this.inputLv.visible=!1,this.jadePays=this.jadePanel.getChildByName("jadePays"),v.OPEN_PAYMENT,1){this.jadePays.visible=!1,this.jadePanel.getChildByName("lbBuyjade").visible=!1;var e=this;i.stage.on("OnBuyBat",this,function(t){if(1==t){e.jadePays.scrollBar.hide=!0,e.jadePays.renderHandler=new h(e,e.onPaymentRender);var i=[{id:10012,jade:120,money:12},{id:10050,jade:515,money:50},{id:10098,jade:1029,money:98},{id:10198,jade:2119,money:198},{id:10648,jade:7128,money:648}];e.jadePays.dataSource=i,e.jadePays.mouseEnabled=!0,e.jadePays.mouseHandler=new h(e,e.onPayment),e.jadePays.visible=!0,e.jadePanel.getChildByName("lbBuyjade").visible=!0}})}else{this.jadePays.scrollBar.hide=!0,this.jadePays.renderHandler=new h(this,this.onPaymentRender);var n=[{id:10012,jade:120,money:12},{id:10050,jade:515,money:50},{id:10098,jade:1029,money:98},{id:10198,jade:2119,money:198},{id:10648,jade:7128,money:648}];this.jadePays.dataSource=n,this.jadePays.mouseEnabled=!0,this.jadePays.mouseHandler=new h(this,this.onPayment)}this.jadeAimGold=this.jadePanel.getChildByName("aimGolden"),this.jadeNeed=this.jadePanel.getChildByName("needJade"),this.jadeAimGold.on("blur",this,this.onAimGolden),this.jadeAimGold.text="10",this.onAimGolden(null),this.jadePanel.getChildByName("btnChange").clickHandler=new h(this,this.onGoldenChange),this.jadePanel.visible=!1,this.txtReports=new uw,this.txtReports.width=this.logPanel.width,this.txtReports.style.lineHeight=40,this.txtReports.style.fontSize=26,this.txtReports.style.color="#ffffff",this.logPanel.addChild(this.txtReports)}o(t,"modules.exchange.view.componets.ExchangeView",e);var n=t.prototype;return n.freshLogs=function(e){this.txtReports.height>0&&(this.txtReports.innerHTML="",this.txtReports.height=0);var t,i=Ng.userVO.unitId.id;for(var n in e){t=e[n];var o,s=ro.newDate(t.actTime),r=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+" "+s.getHours()+":"+s.getMinutes()+"<br>";if(1==t.type)o=g.database.getData("equip",t.baseId);else{if(0!=t.type){if(3==t.type){r+="&nbsp;&nbsp;您花费<font color='red'>"+t.price+"仙玉</font>，兑换了<font color='yellow'>"+t.count+"元宝</font><br>",this.txtReports.appendHTML(r);continue}continue}o=g.database.getData("props",t.baseId)}var a=t.price*t.count;if(t.playerId==i){r+="&nbsp;&nbsp;您的<font color='"+N.getColor(o.quality)+"'>"+o.name+"</font>",t.count>1&&(r+="*"+t.count);var l=vo["int"](15*a/100);1>l&&(l=1),r+="，以"+a+"仙玉出售，扣除"+l+"仙玉手续费<br>"}else r+="&nbsp;&nbsp;您购买的<font color='"+N.getColor(o.quality)+"'>"+o.name+"</font>",t.count>1&&(r+="*"+t.count),r+="，已放入背包，花费了"+a+"仙玉<br>";this.txtReports.appendHTML(r)}this.logPanel.refresh()},n.freshJade=function(){if(this.isPopup){var e=Ng.userVO.getValue(1019),t="持有:"+e+"仙玉",i=this.jadePanel.getChildByName("jadeHas");i.text=t,i=this.buyBox.getChildByName("jadeHas"),i.text=t}},n.onBookChange=function(){var e=vo["int"](this.jadeAimBook.text);if(e>=1&&1e7>e){var t=100*e,i=Ng.userVO.getValue(1019);if(t>i)return void x.getInstance().sendNotification("prompted_info_show",{info:"兑换"+e+"个器灵需要"+t+"仙玉"});x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"兑换"+e+"器灵需要<font color='#fffc00'>"+t+"仙玉</font>，是否确认？",handler:h.create(this,function(t){t&&yc.instance.changeHandbook(e)})})}else x.getInstance().sendNotification("prompted_info_show",{info:"请输入正确的换取数量"})},n.onGoldenChange=function(){var e=vo["int"](this.jadeAimGold.text);if(e>=10&&1e7>e){var t=e/10*15,i=Ng.userVO.getValue(1019);if(t>i)return void x.getInstance().sendNotification("prompted_info_show",{info:"兑换元宝需要"+t+"仙玉"});x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"兑换元宝需要<font color='#fffc00'>"+t+"仙玉</font>，是否确认？",handler:h.create(this,function(t){t&&yc.instance.changeGolden(e)})})}else x.getInstance().sendNotification("prompted_info_show",{info:"请输入正确的换取元宝数量"})},n.onAimBook=function(e){var t=vo["int"](this.jadeAimBook.text);return isNaN(t)||1>t||t>1e7?void(this.jadeNeedBook.text=""):0>=t?void(this.jadeNeedBook.text="请确认兑换数量"):void(this.jadeNeedBook.text="需要:"+100*t+"仙玉")},n.onAimGolden=function(e){var t=vo["int"](this.jadeAimGold.text);return isNaN(t)||10>t||t>1e7?void(this.jadeNeed.text=""):t%10!=0?void(this.jadeNeed.text="获取元宝数必需是10的倍数"):void(this.jadeNeed.text="需要:"+t/10*15+"仙玉")},n.onPayment=function(e,t){if("click"==e.type&&"btnBuy"==e.target.name&&this.jadePays.dataSource){var i=this.jadePays.dataSource[t],n=x.getInstance().retrieveProxy("MarketProxy");n.payment(i.id)}},n.onPaymentRender=function(e,t){if(this.jadePays.dataSource){var i,n=this.jadePays.dataSource[t];i=e.getChildByName("money"),i.text=n.money+" 元";var o=n.jade-10*n.money;if(0>=o)i=e.getChildByName("jade"),i.text=n.jade+" 仙玉",i=e.getChildByName("jadeAdd"),i.text="",i=e.getChildByName("lbRate"),i.text="";else{i=e.getChildByName("jade"),i.text=n.jade-o+"";var s=i.x+i.width+5;i=e.getChildByName("jadeAdd"),i.text=" + "+o+" 仙玉",i.x=s,i=e.getChildByName("lbRate"),i.text="送"+vo["int"](o/n.money*10)+"%"}}},n.onScrollChangeItem=function(e){e<this.listContainer.scrollBar.min&&Math.abs(e)>.8*this.listContainer.scrollBar.elasticDistance?this.changeHandler&&this.changeHandler.runWith(0):e>this.listContainer.scrollBar.max&&Math.abs(e-this.listContainer.scrollBar.max)>.8*this.listContainer.scrollBar.elasticDistance&&this.changeHandler&&this.changeHandler.runWith(1)},n.destroy=function(e){void 0===e&&(e=!0),laya.ui.View.prototype.destroy.call(this,e),this.changeHandler=null},t}(QC),function(e){function t(){this._putonConfirmPop=null,this.propsPool=[],this.packAllProps=[],this._pauseFilter=!1,this._vo=null,this._filterHandler=new h(this,this.onFilter),t.__super.call(this),M.drawBlackBg(this,!0),this.typeBar.selectHandler=new h(this,this.onTypeSelect),this.props.scrollBar.hide=!0,this.props.renderHandler=new h(this,this.onPropsRender),this.props.mouseEnabled=!0,this.props.mouseHandler=new h(this,this.onMouse),this._putonConfirmPop=new nP,this._putonConfirmPop.btnSure.clickHandler=new h(this,this.onSure),this.qualityFilter.visibleNum=7,this.natureFilter.selectHandler=this._filterHandler,this.qualityFilter.selectHandler=this._filterHandler,this.typeFilter.selectHandler=this._filterHandler,this.levelFilter.on("blur",this,this.onFilter)}o(t,"modules.exchange.view.componets.ExchangeSelectPropsPop",e);var i=t.prototype;return i.popPops=function(e){this.packAllProps=e,this.onFilter(this.typeBar.selectedIndex),this.popup()},i.onTypeSelect=function(e){console.log("onTypeSelect"+e),this._pauseFilter=!0;var t=0;switch(e){case 0:this.typeLb.visible=!0,this.typeFilter.visible=!0,t=this.typeFilter.x+this.typeFilter.width+20;break;case 1:this.typeLb.visible=!1,this.typeFilter.visible=!1,t=this.typeLb.x}this.natureLb.x=t,t+=this.natureLb.width,this.natureFilter.x=t,t+=this.natureFilter.width+20,this.qualityLb.x=t,t+=this.qualityLb.width,this.qualityFilter.x=t,this._pauseFilter=!1,this.onFilter()},i.onFilter=function(e){if(void 0===e&&(e=0),!this._pauseFilter){var t=this.natureFilter.selectedIndex,i=this.qualityFilter.selectedIndex,n=this.typeFilter.selectedIndex;0==this.typeBar.selectedIndex&&4==n?(this.levelFilter.visible=!0,this.qualityLb.text="等级：",this.qualityFilter.visible=!1):(this.levelFilter.visible=!1,this.qualityLb.text="品质：",this.qualityFilter.visible=!0);var o=vo["int"](this.levelFilter.text);isNaN(o)||0>=o?o=0:5>o?o=5:o-=o%5,this.props.scrollBar.value=0,this.propsPool=[];var s;for(var r in this.packAllProps)if(s=this.packAllProps[r],!(null==s||s.count<=0))switch(this.typeBar.selectedIndex){case 0:if(this.props.itemRender=dN,0==s.goodsType){var a=s;if(20==a.propConf.propType)continue;if(22==a.propConf.propType){if(1==a.binding){if(t>0&&a.propConf.nature!=t)continue;if(o>0&&a.propConf.level!=o)continue;if(0==n&&i>0&&i!=a.propConf.quality)continue;if(n>0&&4!=n)continue;this.propsPool.push(s)}continue}if(-1!=a.propConf.name.indexOf("梼杌")||-1!=a.propConf.name.indexOf("帝江")||-1!=a.propConf.name.indexOf("九婴")){if(t>0&&a.propConf.nature!=t)continue;if(i>0&&a.propConf.quality!=i)continue;switch(n){case 1:if(-1==a.propConf.name.indexOf("图纸"))continue;break;case 2:if(-1==a.propConf.name.indexOf("皮"))continue;break;case 3:if(-1==a.propConf.name.indexOf("之灵"))continue;break;case 4:continue}this.propsPool.push(s)}}break;case 1:if(this.props.itemRender=uN,1==s.goodsType){var l=s;if(-1!=l.equipConf.name.indexOf("梼杌")||-1!=l.equipConf.name.indexOf("帝江")||-1!=l.equipConf.name.indexOf("九婴")){if(t>0&&l.equipConf.nature!=t)continue;if(i>0&&l.equipConf.quality!=i)continue;this.propsPool.push(s)}}}this.props.array=this.propsPool}},i.onPropsRender=function(e,t){if(null!=e.dataSource){var i=e.dataSource;if(i instanceof modules.goods.model.data.PackProp&&e instanceof modules.exchange.view.componets.ExchangePropCellView)Ln.renderProps(e,i),Ln.changeCountShow(e,i.count);else{if(!(i instanceof modules.goods.model.data.PackEquip&&e instanceof modules.exchange.view.componets.ExchangeEquipCellView))return;Ln.renderEquip(e,i)}e.price.text="",e.btnTake.label="上架"}},i.onMouse=function(e,t){"click"==e.type&&"btnBuy"==e.target.name&&(this._vo=this.propsPool[t],this._putonConfirmPop.pop(this._vo))},i.onSure=function(){var e=vo["int"](this._putonConfirmPop.saleNum.text),t=vo["int"](this._putonConfirmPop.salePrice.text);if(1>e||e>this._vo.count)return void x.getInstance().sendNotification("prompted_info_show",{info:"上架数量不足"});var i=2;if(0==this._vo.goodsType){var n=this._vo;22==n.propConf.propType&&(i=20)}return i>t||t>1e7?void x.getInstance().sendNotification("prompted_info_show",{info:"上架价格不能低于"+i+"仙玉"}):(yc.instance.putOn(this._vo.id,this._vo.goodsType,t,e),this._putonConfirmPop.close(),void this.close())},t}(jC)),nP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.salePrice.on("blur",this,this.onPrice)}o(t,"modules.exchange.view.componets.ExchangePutOnConfirm",e);var i=t.prototype;return i.onPrice=function(e){var t=vo["int"](this.salePrice.text);return isNaN(t)?void(this.salePrice.text="2"):t>9999999?void(this.salePrice.text="9999999"):void 0},i.pop=function(e){if(this.saleNum.text=""+e.count,this.salePrice.text="0",e instanceof modules.goods.model.data.PackEquip)Ln.renderEquip(this.equip,e),this.equip.visible=!0,this.prop.visible=!1,this.saleNum.editable=!1;else{if(!(e instanceof modules.goods.model.data.PackProp))return;Ln.renderProps(this.prop,e),this.equip.visible=!1,this.prop.visible=!0,this.saleNum.editable=e.count>1}this.hasJade.text=Ng.userVO.getValue(1019)+"",this.popup()},t}(JC),oP=(function(e){function t(){this._item=null,t.__super.call(this),M.drawBlackBg(this,!0),this.aimCount.on("blur",this,this.onCount)}o(t,"modules.exchange.view.componets.ExchangeBuyConfirm",e);var i=t.prototype;return i.onCount=function(e){if(null!=this._item){var t=vo["int"](this.aimCount.text);if(isNaN(t)||1>t||t>this._item.count)return void(this.needJade.text="请输入正确的购买数量");t*=this._item.price,Ng.userVO.getValue(1019)>=t?this.needJade.color="#fffc00":this.needJade.color="#e70626",this.needJade.text="需要:"+t+"仙玉"}},i.popVo=function(e){switch(this._item=e,e.type){case 1:Ln.renderExchangeItem(this.equip,e),this.equip.visible=!0,this.prop.visible=!1,this.equip.price.text=e.price+" 仙玉";
break;case 0:Ln.renderExchangeItem(this.prop,e),this.equip.visible=!1,this.prop.visible=!0,this.prop.price.text="单价:"+e.price+"仙玉"}this.aimCount.editable=e.count>1,this.aimCount.text=""+e.count,this.onCount(null),this.hasJade.text=Ng.userVO.getValue(1019)+"",this.popup()},s(0,i,"_aimCount",function(){var e=vo["int"](this.aimCount.text);return isNaN(e)?0:e}),t}(ZC),function(e){function t(){this.monthVipList=null,this.jadeCardCell=null,this.vipExtCardCell=null,this.bookList=null,this._vip=null,this._paytotal=null,this.tabBarArr=[],this._pmd=null,t.__super.call(this),M.drawBlackBg(this,!0),this.stoneList.x=this.vipList.x,this.goldList.x=this.vipList.x,this.hotStoneList.x=this.vipList.x,this.mVip.x=this.vipList.x,this.bookshop.x=this.vipList.x,this.equipGhost.x=this.vipList.x,this.boxWelfare.x=this.vipList.x,this.boxDaily.x=this.vipList.x,this.jadeList.x=this.vipList.x,this.goldList.scrollBar.hide=!0;var e=M.heightScaleNum(this);e>0&&(this.vipList.height+=e,this.stoneList.height+=e,this.goldList.height+=e,this.height+=e),this.vipList.scrollBar.hide=!0,this.vipList.renderHandler=new h(this,this.onVipRender),this.stoneList.scrollBar.hide=!0,this.hotStoneList.scrollBar.hide=!0,this.equipGhost.scrollBar.hide=!0,this.jadeList.scrollBar.hide=!0,this.monthVipList=this.mVip.getChildByName("monthList"),this.jadeCardCell=this.mVip.getChildByName("jadeCard"),this.jadeCardCell.visible=!1,this.vipExtCardCell=this.mVip.getChildByName("vipExtCard"),this.vipExtCardCell.visible=!1,this.goldList.renderHandler=new h(this,this.onPaymentRender),this.monthVipList.dataSource=null,this.monthVipList.renderHandler=new h(this,this.onMvipRender),this.bookList=this.bookshop.getChildByName("books"),this.bookList.renderHandler=new h(this,this.onBookRender),op.isOnMiniIos()?this.shop_name.text="功能":this.shop_name.text="商店",this.addListenerWelfareTimer(),this.tabBar.selectedIndex=-1,(v.OPEN_PAYMENT||X.openJade())&&(this.boxWelfare.getChildByName("boxWeek").visible=!0)}o(t,"modules.marcket.view.componets.MarcketView",e);var n=t.prototype;return n.addListenerWelfareTimer=function(){i.timer.loop(1e3,this,this.onWelfareTimer)},n.onWelfareTimer=function(){var e=!1,t=Ts.getItem("FULI_SPEED"+v.playerId),n=this.boxWelfare.getChildByName("boxAd").getChildByName("btnWelfare");if(null!=t&&""!=t){var o=Number(Ts.getItem("FULI_SPEED"+v.playerId)),s=o-g.clock.currentTime;if(0>s)n.text.changeText("福利宝箱"),n.getChildByName("icon").visible=!0,e=!0;else{var r="冷却中"+this.countDownToString(s);n.text.changeText(r),n.getChildByName("icon").visible=!1}}else n.text.changeText("福利宝箱"),n.getChildByName("icon").visible=!0,e=!0;e&&(i.timer.clear(this,this.onWelfareTimer),Ts.setItem("FULI_SPEED"+v.playerId,""),x.getInstance().sendNotification("BOX_WELFARE_RED"))},n.countDownToString=function(e){var t=Math.floor(e/6e4),i=Math.floor(t/60);t-=60*i;var n,o=Math.floor(e%6e4/1e3);return n=i+(10>t?":0":":")+t+(10>o?":0":":")+o},n.onBookRender=function(e,t){var i=e.dataSource,n=g.database.getData("props",i);Ln.renderPropsByCfg(e,n,1);var o=e.getChildByName("binding");o.visible=!0;var s=e.getChildByName("level");o.x=s.x+s.width+5;var r=re.queryBookGoldenPrice(n);o=e.getChildByName("price"),o.text=r+"元宝",o.visible=!0,o.color="#fffc00"},n.onMvipRender=function(e,t){var i=e.dataSource;if(null!=i){var n,o=e.getChildByName("closed"),s=e.getChildByName("opened");if(i.isEffecting){o.visible=!1,s.visible=!0,n=s.getChildByName("name"),n.text=i.name+"（"+i.liveDay+"天）",n.color=i.color,n=s.getChildByName("goldGeted"),n.text="累计已经领取："+i.goldGeted+"元宝",n=s.getChildByName("todayGold");var r=s.getChildByName("btnAward"),a=s.getChildByName("btnBuy"),l=s.getChildByName("desc"),h=i.awardTemp;a.label="提前续费",a.visible=v.OPEN_PAYMENT||X.openJade(),i.isSigned?h>0?(r.visible=!0,l.color="#00dc24",l.text="今日可领取：",n.text=h+"元宝"):(r.visible=!1,1==i.liveDay?(l.color="#fffc00",l.text="月卡明天到期，您可以立即续费",a.label="续  费",n.text=""):(l.color="#ffffff",l.text="明日可领取：",n.text=i.goldDaily+"元宝")):(h+=i.goldDaily,r.visible=!0,l.color="#00dc24",l.text="今日可领取：",n.text=h+"元宝"),n=s.getChildByName("funAdd"),n.text="所有功能增加"+i.funAdd+"级"}else o.visible=!0,s.visible=!1,n=o.getChildByName("name"),n.text=i.name+"（30天）",n.color=i.color,n=o.getChildByName("costRmb"),n.text="仅售："+i.money+(X.openJade()&&!qt.canJumpPay(i.money)?"仙玉":"元"),n=o.getChildByName("desc"),n.text="激活后可直接领取"+10*i.money+"元宝，随后每日可领取"+i.goldDaily+"元宝",n=o.getChildByName("descTotal"),n.text="累积可领取"+i.goldTotal+"元宝",n=o.getChildByName("funAdd"),n.text="所有功能增加"+i.funAdd+"级"}},n.freshPaytotalAddFun=function(e){e&&(this._paytotal=e,this._vip&&this.freshMVIP(this._vip)),this.tabBarArr.length=0,this.tabBarArr.push("功能"),v.OPEN_PAYMENT?this.tabBarArr.push("月卡"):(X.openJade()||this._vip&&this._vip.vipMontAdd>0)&&this.tabBarArr.push("月卡"),this.tabBarArr.push("珍宝");var t=Ng.userVO.getValue(1006);t>=5&&this.tabBarArr.push("福利"),this.tabBarArr.push("宝箱"),v.OPEN_PAYMENT?(this.tabBarArr.push("每日"),X.openJade()?(this.tabBarArr.push("元宝"),this.tabBarArr.push("仙玉")):this.tabBarArr.push("充值")):X.openJade()&&(this.tabBarArr.push("每日"),this.tabBarArr.push("元宝")),this.tabBar.labels=this.tabBarArr.join(",")},n.freshMVIP=function(e){this._vip=e,this.vipList.refresh(),this.monthVipList.dataSource?this.monthVipList.refresh():this.monthVipList.dataSource=[e.goldenVip,e.diamondVip]},n.onPaymentRender=function(e,t){if(this.goldList.dataSource){var i,n=this.goldList.dataSource[t];i=e.getChildByName("money");var o=e.getChildByName("txtJade"),s=e.getChildByName("btnBuy");X.openJade()&&!qt.canJumpPay(n.money)?(o.visible=!1,i.text="",s.label=n.money+"仙玉"):(o.visible=!1,i.text=n.money+" 元",s.label="购买");var r=NaN,a=x.getInstance().retrieveProxy("MarketProxy"),l=a.isDoublePayVisble(n.money);if(l>0)i=e.getChildByName("golden"),i.text=10*n.money+"",r=i.x+i.width+5,i=e.getChildByName("goldenAdd"),i.text=" + "+10*n.money+" 元宝",i.x=r,i=e.getChildByName("lbRate"),i.text="活动双倍",i=e.getChildByName("des"),i.visible=!0,2==l?i.changeText("可双倍一次，每月20日重置"):3==l?i.changeText("活动期间可双倍一次"):n.money<=648&&i.changeText("648以内档位，每档都有一次双倍机会");else{var h=n.gold-10*n.money;0>=h?(i=e.getChildByName("golden"),i.text=n.gold+" 元宝",i=e.getChildByName("goldenAdd"),i.text="",i=e.getChildByName("lbRate"),i.text=""):(i=e.getChildByName("golden"),i.text=n.gold-h+"",r=i.x+i.width+5,i=e.getChildByName("goldenAdd"),i.text=" + "+h+" 元宝",i.x=r,i=e.getChildByName("lbRate"),i.text="送"+vo["int"](h/n.money*10)+"%"),i=e.getChildByName("des"),i.visible=!1}}},n.onVipRender=function(e,t){if(this.vipList.dataSource){var i=e.getChildByName("info"),n=e.getChildByName("current"),o=e.getChildByName("currentVip"),s=e.getChildByName("currentPay"),r=e.getChildByName("costGold"),a=e.getChildByName("btnBuy");op.isOnMiniIos()&&(a.label="激活");var l=this._vip.vipMontAdd,h=0,c=0;this._paytotal&&(h=this._paytotal.getVipFunAdd(),c=this._paytotal.addVipFunTime()),l+=h;var u="",d="",p=this.vipList.dataSource[t],f=10;if(p){var _=e.getChildByName("ntc");switch(_.visible=!1,p.type){case 5:i.text="经验增加 + "+p.add/100+"%",n.text="永久经验增加 + "+p.current/100+"%",l>0&&(u=" + "+p.add*l/100+"%"),f-=p.current/p.add,f+=c;break;case 2:i.text="铜币获取 + "+p.add/100+"%",n.text="卖材料、五行宫、打怪铜币 + "+p.current/100+"%",l>0&&(u=" + "+p.add*l/100+"%"),f-=p.current/p.add,f+=c;break;case 0:i.text="材料掉率 + "+p.add/100+"%",n.text="永久材料掉率 + "+p.current/100+"%",l>0&&(u=" + "+p.add*l/100+"%"),f-=p.current/p.add,f+=c,_.visible=!0;break;case 1006:i.text="灵气增加 + "+p.add/100+"%",n.text="永久灵气增加 + "+p.current/100+"%",l>0&&(u=" + "+p.add*l/100+"%"),this._paytotal&&this._paytotal.getGasAddPercent()>0&&(d=" + "+this._paytotal.getGasAddPercent()+"%"),f-=p.current/p.add,f+=c;break;case 1001:i.text="单次离线上限：5小时 + "+p.add/3600+"小时",n.text="单次离线上限：5小时 + "+(p.current/3600-5)+"小时",l>0&&(u=" + "+p.add*l/3600+"小时"),f-=(p.current-18e3)/p.add;break;case 1002:i.text="可采集灵石时长 + "+p.add/3600+"小时",n.text="永久可采集灵石时长  "+p.current/3600+"小时",l>0&&(u=" + "+p.add*l/3600+"小时"),f-=(p.current-21600)/p.add;break;case 1005:i.text="采集灵石时,每小时额外 + "+60*p.add+"个",n.text="永久采集灵石时,每小时额外 + "+60*p.current+"个",l>0&&(u=" + "+60*p.add*l+"个"),f-=p.current/p.add;break;case 1003:i.text="强化失败返还灵石 + "+p.add/100+"%",n.text="当前强化失败返还灵石  "+p.current/100+"%",l>0&&(u=" + "+p.add*l/100+"%"),f-=p.current/p.add;break;case 1004:i.text="魔核掉落数量 + "+p.add/100+"%",n.text="永久魔核掉落数量 +  "+p.current/100+"%",l>0&&(u=" + "+p.add*l/100+"%"),this._paytotal&&this._paytotal.getForestPetFoodAddPercent()>0&&(d=" + "+this._paytotal.getForestPetFoodAddPercent()+"%"),f-=p.current/p.add,f+=c;break;case 1007:i.text="遇到BOSS概率 + "+p.add/100+"%",n.text="永久遇到BOSS概率 +  "+p.current/100+"%",l>0&&(u=" + "+p.add*l/100+"%"),this._paytotal&&this._paytotal.getSimpleBossRateAdd()>0&&(d=" + "+this._paytotal.getSimpleBossRateAdd()+"%"),f-=p.current/p.add,_.visible=!0}var m=e.getChildByName("maxCount");0>=f?(i.text="",r.text="已达购买上限",a.visible=!1,m.visible=!1):(r.text=p.costGold+"元宝",a.visible=!0,m.visible=!0,T.IS_ON_MINI&&Or.onIOS?m.text="还可激活"+f+"次":m.text="还可购买"+f+"次"),o.x=n.x+n.width,""!=u?o.text=u:o.text="",h>0?o.color="#c527ff":o.color="#00dc24",s.x=o.x+o.width,""!=d?s.text=d:s.text=""}}},n.showDaily=function(e,t){this._pmd=e;var i=this.boxDaily.getChildByName("daily"),n=i.getChildByName("lbBuyed"),o=i.getChildByName("btnBuy"),s=i.getChildByName("btnPay");e.buyTime<=0||!ro.isTodayTs(e.buyTime)?(n.visible=!1,o.visible=!0,s.visible=!0):(n.visible=!0,o.visible=!1,s.visible=!1);var r=0,a=i.getChildByName("name"),l=i.getChildByName("desc"),h=g.database.getData("marketdaily",e.item);switch(h.propId){case-1:if(!t)return;var c=In.queryCountPerM(t.passedId);r=6*c*60*5,a.text="灵石 "+r+"个",a.color="#00dc24",l.text="五行宫通关层数越高，购买所获得的灵石将越多";break;case-2:var u=Ng.userVO.getValue(1006);a.text=3300*u*66+" 铜币",a.color="#ffffff",l.text="等级越高购买所获得的铜币越多";break;default:var d=g.database.getData("props",h.propId);d?(r=h.count,1==r?a.text=d.name+" 1个":a.text=d.name+" "+r+"个",a.color=N.getColor(d.quality),l.text=d.desc):a.text="未知物品id:"+h.propId}var p=i.getChildByName("costGoldOld"),f=i.getChildByName("costRmb");h.priceOld>0?p.text="原价"+h.priceOld+"元宝":p.text="",p.visible=!n.visible,a=i.getChildByName("costGold"),h.gold>0?(a.text="仅需"+h.gold+"元宝",p.x=a.x):(a.text="",o.visible=!1,p.x=f.x),a.visible=!n.visible,f.text="仅需"+h.rmb+(X.openJade()&&!qt.canJumpPay(h.rmb)?"仙玉":"元"),f.visible=!n.visible,X.openJade()&&!qt.canJumpPay(h.rmb)&&(s.label="仙玉购买")},n.showDailyPearl=function(e){var t=this.boxDaily.getChildByName("pearl"),i=t.getChildByName("contentPearl"),n=t.getChildByName("lbBuyed");ro.isTodayTs(e.buyTimePearl)?(i.visible=!1,n.visible=!0):(i.visible=!0,n.visible=!1)},t}(xA)),sP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.logs.scrollBar.hide=!0,this.logs.renderHandler=new h(this,this.onRender)}o(t,"modules.record.view.RecordView",e);var i=t.prototype;return i.onRender=function(e,t){if(e.dataSource){var i=e.getChildByName("log");i.style.fontSize=24,i.style.leading=6,i.style.color="#ffffff",i.innerHTML=this.getHtml(e.dataSource)}},i.getHtml=function(e){var t="",i=ro.newDate(e.time);if(t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+"&nbsp;&nbsp;<br>",100==e.type){var n=qt.getOne(e.itemId);t+="花费<font color='#fffc00'>"+e.value+"仙玉</font>，获得<font color='#00dc24'>"+n.name+"</font>"}else t+="<font color='#00dc24'>【"+e.typeName+"】</font>花费<font color='#fffc00'>"+e.value+"元宝</font>";return t},t}(lT),rP=function(e){function t(){this.hangContext=null,this.helper=null,this.reporter=null,this._appendReportCache=[],this._lastBr=!1,this._grpCellsA=null,this._grpCellsB=null,this.showWaitAward=!1,this._key2Cell=new uo,t.__super.call(this),M.drawBlackBg(this,!1);var e=M.heightScaleNum(this);e>0&&(this.panelReports.height+=e,this.btnAward.y+=e,this.getChildByName("close").y+=e,this.height+=e),this.panelReports.vScrollBar.hide=!0,this.reporter=new Ie(this.panelReports),this.grpA.renderHandler=new h(this,this.onMemberRenderA),this.grpB.renderHandler=new h(this,this.onMemberRenderB);var i;this._grpCellsA=new Array;var n;for(n in this.grpA.cells)i=this.grpA.cells[n],this._grpCellsA.push(new Ne(i));this._grpCellsB=new Array;var n;for(n in this.grpB.cells)i=this.grpB.cells[n],this._grpCellsB.push(new Ne(i));this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max,this.clearReport.clickHandler=new h(this,this.clear),this.helper=new Ae(this)}o(t,"modules.fight.view.components.FightingLiveTeamPage",e);var i=t.prototype;return i.appendReport=function(e,t){void 0===t&&(t=!1),t?(this._lastBr&&_o.startWith(e,"<br>")&&(e=e.substr(4)),_o.endWith(e,"<br>")||(e+="<br>"),this._lastBr=!0):this._lastBr=_o.endWith(e,"<br>"),this.isPopup?this.reporter.appendReport(e):(this._appendReportCache.push(e),this._appendReportCache.length>100&&this._appendReportCache.shift())},i.onOpened=function(){if(this._appendReportCache.length>0){var e;for(var t in this._appendReportCache)e=this._appendReportCache[t],this.reporter.appendReport(e);this._appendReportCache.length=0,this.reporter.layout()}x.getInstance().sendNotification("SHOW_HIDE_HEAD_BAR",!1)},i.onClosed=function(e){x.getInstance().sendNotification("SHOW_HIDE_HEAD_BAR",!0)},i._memberRender=function(e,t){null==t||0==t.unitId.id&&0==t.unitId.type?e.visible(!1):(e.showFighter(t,!0),e.visible(!0),this._key2Cell.set(t.unitId.key,e))},i.onMemberRenderA=function(e,t){var i=this._grpCellsA[t],n=e.dataSource;this._memberRender(i,n)},i.onMemberRenderB=function(e,t){var i=this._grpCellsB[t],n=e.dataSource;this._memberRender(i,n)},i.clear=function(){this._appendReportCache.length=0,this.reporter.clear(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max},i.initFightStart=function(e){this.showWaitAward=!1,this._key2Cell.clear(),this.hangContext=e,this.grpA.dataSource=e.grpA.members,this.grpB.dataSource=e.grpB.members;var t,i;for(i in this._grpCellsA)t=this._grpCellsA[i],t.clearTips();var i;for(i in this._grpCellsB)t=this._grpCellsB[i],t.clearTips();e.grpB&&(e.grpB.isDead()?this.appendReport("<font color='#ffff00'>战斗结束</font>",!0):this.appendReport("<font color='#ffffff'>挑战开始</font>",!0),this.panelReports.refresh()),this.grpA.visible=!0,this.grpB.visible=!0},i.receiveFightReports=function(e){if(this.hangContext){if(e.length){for(var t="",i=0;i<e.length;i++){var n=e[i],o=n.getHtml(this.hangContext,i,e.length);o&&(t+=_o.endWith(t,"<br>")&&_o.startWith(o,"<br>")?o.substr(4):o),this.act(n),n.recover()}""!=t&&this.appendReport(t,!0)}}else this.grpB.visible=!1,this.appendReport("<font color='#ffffff'>切换战斗中，请稍候...</font>",!0);var s;if(this.hangContext&&this.hangContext.grpA.isDead()){var r;for(r in this._grpCellsA)s=this._grpCellsA[r],s.setSpeed(0);var r;for(r in this._grpCellsB)s=this._grpCellsB[r],s.setSpeed(0);this.grpA.visible=!1,this.appendReport("<font color='#ff0000'>战斗结束</font>",!0)}else if(this.hangContext&&this.hangContext.grpB.isDead()){var r;for(r in this._grpCellsA)s=this._grpCellsA[r],s.setSpeed(0);var r;for(r in this._grpCellsB)s=this._grpCellsB[r],s.setSpeed(0);this.grpB.visible=!1,0==this.showWaitAward&&(this.showWaitAward=!0,this.appendReport("<font color='#ffff00'>战斗结束</font>",!0))}this.reporter.layout()},i.act=function(e){if(null!=this.hangContext){var t,i,n=this._key2Cell.get(e.unitidFrom.key),o=this._key2Cell.get(e.unitidTo.key);t=this.hangContext.grpA.getFighter(e.unitidFrom.key),t||(t=this.hangContext.grpB.getFighter(e.unitidFrom.key)),e.unitidFrom.key==e.unitidTo.key?i=t:(i=this.hangContext.grpB.getFighter(e.unitidTo.key),i||(i=this.hangContext.grpA.getFighter(e.unitidTo.key))),i&&null!=o&&null!=n&&this.helper.act(this.hangContext,e,n,o,t,i)}},i.receiveFightAwards=function(e){e.exp>0&&this.appendReport("<br><font color='#0000ff'>获得经验 +"+e.exp+"</font>"),e.gas>0&&this.appendReport("<br><font color='#00ff00'>获得灵气 +"+e.gas+"</font>"),e.silver>0&&this.appendReport("<br><font color='#ffff00'>获得铜币 +"+e.silver+"</font>"),e.renderItems(this,!0),this.reporter.layout()},i.levelUP=function(){this.appendReport("<font color='#00ff00'>恭喜您升级啦^^</font>",!0),this.reporter.layout()},t}(oI),aP=function(e){function t(){this._stoneList=null,this._aimTalisman=null,this._stones=null,this.lockIndex=null,this.needStoneNum=0,t.__super.call(this),this._selectStoneIndex=new go,M.drawBlackBg(this,!1),this.checkBox0.clickHandler=new h(this,this.onLock),this.checkBox1.clickHandler=new h(this,this.onLock),this.checkBox2.clickHandler=new h(this,this.onLock),this.checkBox3.clickHandler=new h(this,this.onLock),this.btnSubmit.clickHandler=new h(this,this.onSubmit),this.btnGoBuy.clickHandler=new h(this,this.onGoBuy),this._stoneList=this.stoneMater.getChildByName("stones"),this._stoneList.scrollBar.hide=!0,this._stoneList.renderHandler=new h(this,this.onStoneRender),this._stoneList.mouseEnabled=!0,this._stoneList.mouseHandler=new h(this,this.onMouseStone)}o(t,"modules.talisman.view.componets.TalismanRebuildView",e);var i=t.prototype;return i.onStoneRender=function(e,t){if(this._stoneList.dataSource){var i=e.getChildByName("props");Ln.renderProps(i,e.dataSource);var n=e.getChildByName("sureUse");n.selected=this._selectStoneIndex.contain(t),n.selected?i.alpha=1:i.alpha=.5}},i.onMouseStone=function(e,t){if("click"==e.type&&"sureUse"==e.target.name){var i=e.target,n=this._stoneList.getCell(t),o=n.getChildByName("props");i.selected?(o.alpha=1,this._selectStoneIndex.add(t)):(o.alpha=.5,this._selectStoneIndex.remove(t))}},i.onGoBuy=function(){this.close(),x.getInstance().sendNotification("OPEN_MARCKET_VIEW","珍宝")},i.onSubmit=function(){var e=this;if(this._aimTalisman){var t=this.needStoneNum+this.lockIndex.length,i=(Re.getRebuildStone(this._aimTalisman),Re.getMaxAttrCount(this._aimTalisman));if(this.lockIndex.length>=i)return void x.getInstance().sendNotification("prompted_info_show",{info:"所有属性都被锁定，无法洗炼，请确认后再试。"});this.showStone();var n=new uo,o=0,s="";if(null!=this._stones)for(var r=0;r<this._stones.length;r++)if(this._selectStoneIndex.contain(r)){var a=this._stones[r],l=0;if(o+a.count>=t){l=t-o,n.set(a.id,l),o+=l,s+="<font color='"+N.getColor(a.quality)+"'>【"+a.propConf.name+"】*"+l+"</font>";break}l=a.count,n.set(a.id,l),o+=l,s+="<font color='"+N.getColor(a.quality)+"'>【"+a.propConf.name+"】*"+l+"</font>"}if(t>o)return void x.getInstance().sendNotification("prompted_info_show",{info:"需要消耗天籁石"+t+"个"});x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗"+s+"<br>洗练法宝？",handler:h.create(this,function(t){t&&(e.close(),gc.instance.rebuildDelay(e._aimTalisman.id,n,e.lockIndex))})})}},i.onLock=function(){this._aimTalisman&&(this.lockIndex.length=0,this.checkBox0.selected&&this.lockIndex.push(0),this.checkBox1.selected&&this.lockIndex.push(1),this.checkBox2.selected&&this.lockIndex.push(2),this.checkBox3.selected&&this.lockIndex.push(3),this.showStone(),Ln.renderTalismanOverview(this.viewTalisman,this._aimTalisman,this.lockIndex))},i.showStone=function(){var e=this.needStoneNum+this.lockIndex.length,t=Re.getRebuildStone(this._aimTalisman),i=this.stoneMater.getChildByName("costNum");i.style.fontSize=26,i.style.color="#00dc24",i.innerHTML="消耗<font color='"+N.getColor(t.quality)+"'>"+t.name.substr(0,2)+"(或以上品级)天籁石</font>："+e+"个"},i.popSelect=function(e,t){this._selectStoneIndex.clear(),this._stones=t;var i=this._aimTalisman==e;this._aimTalisman=null,i||(this.checkBox0.selected=!1,this.checkBox1.selected=!1,this.checkBox2.selected=!1,this.checkBox3.selected=!1,this.checkBox0.visible=!1,this.checkBox1.visible=!1,this.checkBox2.visible=!1,this.checkBox3.visible=!1,this.lockIndex=[]);for(var n=0;n<e.baseAttr.length;n++)switch(n){case 0:this.checkBox0.visible=!0;break;case 1:this.checkBox1.visible=!0;break;case 2:this.checkBox2.visible=!0;break;case 3:this.checkBox3.visible=!0}this._aimTalisman=e,this.needStoneNum=Re.getRebuildNeedStoneNum(e),Ln.renderTalisman(this.aimTalisman,e);this.stoneMater.getChildByName("props");null!=t&&t.length>0?(this._stoneList.dataSource=t,this._stoneList.visible=!0,this.btnGoBuy.visible=!1):(this._stoneList.visible=!1,this.btnGoBuy.visible=!0),this.onLock(),this.popup()},t}(FT),lP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}o(t,"modules.marcket.view.componets.EquipGhostSelect",e);var i=t.prototype;return i.popInfo=function(e,t){var i=e.equipGhostId;if(!(0>=i)){var n=g.database.getData("props",i);if(null!=n){if(Ln.renderPropsByCfg(this.props,n,1),n.quality<5)this.btnClose.visible=!1,this.btnSure.visible=!0,this.btnChg.visible=!1,this.btnAward.visible=!1,this.lbCost.text="";else{this.btnClose.visible=!0,this.btnSure.visible=!1,this.btnChg.visible=!0,this.btnAward.visible=!0;var o=50+50*e.equipGhostTimes;o>200&&(o=200),this.lbCost.text="转换五行花费："+o+"元宝"}this.title.text=t,this.popup()}}},t}(LA),hP=function(e){function t(){this.d=null,t.__super.call(this),M.drawBlackBg(this,!0),this.aimQ.selectHandler=new h(this,this.onQuality)}o(t,"modules.marcket.view.componets.EquipGhostAuto",e);var i=t.prototype;return i.popInfo=function(e){this.d=e,this.aimQ.selectedIndex=0,this.title.text="自动开启"+e.name,this.title.color="#c527ff",this.popup()},i.onQuality=function(e){switch(e){case 0:this.goldNeed.text="请选择品质";break;case 1:this.goldNeed.text="最多需要次数：30";break;case 2:this.goldNeed.text="最多需要次数：100"}},t}(OA),cP=function(e){function t(e){this.selectHandler=null,this.spEnable=!1,this.propPoolSrc=null,t.__super.call(this),M.drawBlackBg(this,!0);var i=M.heightScaleNum(this);i>0&&(this.props.height+=i,this.height+=i),this.props.scrollBar.hide=!0,this.props.renderHandler=new h(this,this.onPropsRender),this.selectHandler=e,this.props.mouseEnabled=!0,this.props.mouseHandler=new h(this,this.onMouse),this.emptyBtn.clickHandler=new h(this,this.onEmptyBtn),this.cbNature.selectHandler=new h(this,this.filterProps),this.minLv.on("blur",this,this.filterProps),this.qualityFilter.visibleNum=7,this.qualityFilter.selectHandler=new h(this,this.filterPropsQuailty)}o(t,"modules.smithy.view.componets.SelectPropsPop",e);var i=t.prototype;return i.onPropsRender=function(e,t){if(this.props.dataSource){var i=this.props.dataSource[t];Ln.renderProps(e,i),Ln.changeCountShow(e,i.countTmp),this.spEnable||2!=i.propConf.propType?e.alpha=1:e.alpha=.3}},i.onMouse=function(e,t){if("click"==e.type)if(1!=this.props.getCell(t).alpha)x.getInstance().sendNotification("prompted_info_show",{info:"锻造最多只能放入1个特殊材料"});else{var i=this.props.getCell(t).dataSource;this.selectHandler.runWith(i)}},i.onEmptyBtn=function(){x.getInstance().sendNotification("CLOSE_ALL_DIALOG"),x.getInstance().sendNotification("OPEN_BAGPACK_VIEW","props")},i.popPops=function(e,t){this.propPoolSrc=e,this.spEnable=t,this.filterProps(),this.popup()},i.filterPropsQuailty=function(e){this.filterProps()},i.filterProps=function(){var e=this.props.getChildByName("txtPutin");e.visible=!1;var t=null,i=this.cbNature.selectedIndex,n=vo["int"](this.minLv.text);isNaN(n)&&(n=0);var o=this.qualityFilter.selectedIndex;if(null==this.propPoolSrc||0==this.propPoolSrc.length)t=this.propPoolSrc;else{t=[];var s;for(var r in this.propPoolSrc)s=this.propPoolSrc[r],0!=i&&s.propConf.nature!=i||!(s.propConf.level>=n)||0!=o&&s.propConf.quality!=o||t.push(s)}null==t||0==t.length?(this.emptyInfo.visible=!0,this.emptyBtn.visible=!0,this.props.visible=!1):(this.props.dataSource=t,this.emptyInfo.visible=!1,this.emptyBtn.visible=!1,this.props.visible=!0,(Eb.isNewGuy&&1210012==t[0].propConf.id||110001==t[0].propConf.type)&&(e.visible=!0))},t}(mT),uP=function(e){function t(){this._equip=null,t.__super.call(this),M.drawBlackBg(this,!1),this.btnDress.clickHandler=new h(this,this.onDress)}o(t,"modules.smithy.view.componets.SmithySuccessPop",e);var i=t.prototype;return i.showEquip=function(e,t){void 0===t&&(t=!1),Ln.renderEquip(this.equip,e),this.title.text="恭喜您锻造成功，获得装备",this.props.visible=!1,this.equip.visible=!0,this.btnDress.visible=!0,this._equip=e,this.closeBtn.visible=!t,this.popup()},i.showPropIdentify=function(e){Ln.renderProps(this.props,e),this.title.text="恭喜您鉴定成功",this.props.visible=!0,this.equip.visible=!1,this.btnDress.visible=!1,this.closeBtn.visible=!0,this.popup()},i.showPropRebuild=function(e){Ln.renderProps(this.props,e),Ln.changeCountShow(this.props,0),this.title.text="恭喜您重铸成功，获得物品",this.props.visible=!0,this.equip.visible=!1,this.btnDress.visible=!1,this.closeBtn.visible=!0,this.popup()},i.showProp=function(e,t){var i=g.database.getData("props",e);Ln.renderPropsByCfg(this.props,i,t),this.title.text="恭喜您合成成功，获得物品",this.props.visible=!0,this.equip.visible=!1,this.btnDress.visible=!1,this.closeBtn.visible=!0,this.popup()},i.onDress=function(){var e=Ng.userVO.getValue(1006),t=Ng.userVO.getValue(1004);return e<this._equip.equipConf.level?void x.getInstance().sendNotification("prompted_info_show",{info:"级别不足，无法装备。"}):0!=this._equip.equipConf.needNature&&t!=this._equip.equipConf.needNature?void x.getInstance().sendNotification("prompted_info_show",{info:"五行限制，无法装备。"}):(bu.instance.dress(this._equip.id,-1),x.getInstance().sendNotification("prompted_info_show",{info:"装备穿戴成功"}),void this.close())},t}(CT),dP=function(e){function t(){this.proxy=null,t.__super.call(this),M.drawBlackBg(this,!0),this.goldenList.scrollBar.hide=!0,this.goldenList.renderHandler=new h(this,this.onGoldRender),this.goldenList.mouseHandler=new h(this,this.onMouseBox)}o(t,"modules.activity7day.view.componets.Activity7DayView",e);var i=t.prototype;return i.showInfo=function(e){this.proxy=x.getInstance().retrieveProxy("Activity7DayPropxy");var t="活动剩余：";this.proxy.leftDay>0?t=t+this.proxy.leftDay+"天":t+="23点59分结束",this.tips.text=t+"(该活动结束后将消失，以后不再出现)",this.proxy.leftDay<=3?this.tips.color="#e70626":this.tips.color="#00dc24";var i;if(i=e?g.database.getJsonObj("activity7day_v1"):g.database.getJsonObj("activity7day"),this.proxy.nowDay>=7)this.goldenList.dataSource=i;else{var n,o=[],s=[];for(var r in i)n=i[r],n.index>=7||n.index+1<=this.proxy.nowDay?o.push(n):s.push(n);o=o.concat(s),this.goldenList.dataSource=o}},i.onGoldRender=function(e,t){var i=e.getChildByName("title"),n=e.getChildByName("lbState"),o=e.getChildByName("content");o.style.fontSize=24,o.style.color="#ffffff";var s=e.getChildByName("award");s.style.fontSize=24,s.style.color="#ffffff";var r=e.getChildByName("progress");r.style.fontSize=24,r.style.color="#ffffff";var a=e.getChildByName("btnAward"),l=e.dataSource;if(a.visible=!1,r.innerHTML="--",n.text="",""==l.title){i.text="特殊奖励",i.color=N.getColor(l.index-2),o.innerHTML=l.content,s.innerHTML=l.award;var h=this.proxy.effectFinishNum;r.innerHTML=h+"/"+l.id,h>=l.id&&(-1==this.proxy.day7data.awardsExts.indexOf(l.id)?(a.label="可领取",a.visible=!0):(r.innerHTML="<font color='#00dc24'>已领取</font>",n.text="已领取",n.color="#00dc24")),e.alpha=1}else{i.color="#ffffff";var c=ro.dateDiffByMs(g.clock.currentTime,this.proxy.day7data.begin);if(!(c>=l.id))return e.alpha=.6,o.innerHTML="<font color='#e70626'>未开启</font>",void(s.innerHTML="<font color='#fffc00'>未知</font>");var u="#e70626";if(this.proxy.day7data.finishedIds.indexOf(l.id)>=0&&(-1==this.proxy.day7data.awardedIds.indexOf(l.id)?(r.innerHTML="<font color='#00dc24'>已达成</font>",a.label="可领取",a.visible=!0,u="#00dc24"):(r.innerHTML="<font color='#00dc24'>已领取</font>",u="#ffffff",n.text="已领取",n.color="#00dc24")),i.text=l.title,op.isOnMiniIos()?o.innerHTML=l.content.split("累充").join("获取积分"):o.innerHTML=l.content,s.innerHTML=l.award,"#e70626"==u){var d=0;switch(null!=this.proxy.day7Dict.get(l.id)&&(d=this.proxy.day7Dict.get(l.id)),l.id){case 1:r.innerHTML="<font color='"+u+"'>"+d+"</font>/15";break;case 2:var p=Math.floor(d/9);r.innerHTML=mt.nameArr[p]+"/<font color='#00dc24'>极品</font>";break;case 3:r.innerHTML="<font color='"+u+"'>"+d+"</font>/30";break;case 4:r.innerHTML="<font color='"+u+"'>"+d+"</font>/4";break;case 5:r.innerHTML="<font color='"+u+"'>"+d+"</font>/5";break;case 6:r.innerHTML="<font color='"+u+"'>"+vo["int"](d/100)+"%</font> / 50%";break;case 7:r.innerHTML="<font color='"+u+"'>0</font>/1"}}e.alpha=1}},i.onMouseBox=function(e,t){if("click"==e.type&&"btnAward"==e.target.name){var i=this.goldenList.dataSource[t];""==i.title?Ec.instance.takeAwardEx(i.id):Ec.instance.takeAward(i.id)}},t}(YT),pP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}o(t,"modules.smithy.view.componets.SmithyEquipConfirm",e);var i=t.prototype;return i.pop=function(e){Ln.renderEquipByCfg(this.equip,e),this.popup()},t}(IT),fP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.talismanList.scrollBar.hide=!0;var e=M.heightScaleNum(this);e>0&&(this.talismanList.height+=e),this.talismanList.renderHandler=new h(this,this.onTalismanRender)}o(t,"modules.talisman.view.componets.TalismanSelectPop",e);var i=t.prototype;return i.onTalismanRender=function(e,t){if(this.talismanList.dataSource){var i=this.talismanList.dataSource[t],n=e;Ln.renderTalisman(n,i)}},i.popPops=function(e){null==e||0==e.length?(this.emptyInfo.visible=!0,this.talismanList.visible=!1):(this.talismanList.dataSource=e,this.emptyInfo.visible=!1,this.talismanList.visible=!0),this.popup()},t}(sA),_P=function(e){function t(){this.txtReports=null,this.reportsNum=0,t.__super.call(this),M.drawBlackBg(this,!1);var e=M.heightScaleNum(this);e>0&&(this.panelReports.height+=e,this.getChildByName("close").y+=e,this.height+=e),this.panelReports.vScrollBar.hide=!0,this.txtReports=new uw,this.txtReports.width=this.panelReports.width,this.txtReports.style.lineHeight=40,this.txtReports.style.fontSize=26,this.txtReports.style.color="#ffffff",this.txtReports.style.bold=!0,this.panelReports.addChild(this.txtReports)}o(t,"modules.fight.view.components.FightingAwardsPop",e);var i=t.prototype;return i.clear=function(){this.txtReports.innerHTML="",this.txtReports.height=0,this.reportsNum=0},i.receiveFightAwards=function(e){this.reportsNum>200&&(this.txtReports.innerHTML="",this.txtReports.height=0,this.reportsNum=0),e.exp>0&&(this.txtReports.appendHTML("<br><font color='#0084ff'>获得经验 +"+e.exp+"</font>"),this.reportsNum+=1),e.gas>0&&(this.txtReports.appendHTML("<br><font color='#00dc24'>获得灵气 +"+e.gas+"</font>"),this.reportsNum+=1),e.silver>0&&(this.txtReports.appendHTML("<br><font color='#fffc00'>获得铜币 +"+e.silver+"</font>"),this.reportsNum+=1),e.gasM>0?(this.txtReports.appendHTML("<br><font color='#3eede7'>获得真元 +"+e.gasM+"</font>"),this.reportsNum+=1):-1==e.gasM&&(this.txtReports.appendHTML("<br><font color='#e70626'>您的真元已满，无法获取，请尽快使用。</font>"),this.reportsNum+=1),e.renderItems(this.txtReports),this.reportsNum+=e.itemSize,this.panelReports.refresh(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max},i.receiveOfflineAwards=function(e){if(this.txtReports.innerHTML="",this.txtReports.height=0,this.reportsNum=0,e.exp>0&&this.txtReports.appendHTML("<br><font color='#0084ff'>离线经验 +"+e.exp+"</font>"),e.gas>0&&this.txtReports.appendHTML("<br><font color='#00dc24'>离线灵气 +"+e.gas+"</font>"),e.silver>0&&this.txtReports.appendHTML("<br><font color='#fffc00'>离线铜币 +"+e.silver+"</font>"),e.gasM>0?this.txtReports.appendHTML("<br><font color='#3eede7'>获得真元 +"+e.gasM+"</font>"):-1==e.gasM&&(this.txtReports.appendHTML("<br><font color='#e70626'>您的真元已满，无法获取，请尽快使用。</font>"),this.reportsNum+=1),e.renderItems(this.txtReports),this.receiveOfflineAwardsExt(e.extAward),0==e.gold)this.txtReports.appendHTML("<br><font color='#ffffff' size='16'>您的离线时间过短，无法统计收益，实际离线收益已获取</font>");else if(-1==e.gold)this.txtReports.appendHTML("<br><font color='#e70626' size='16'>因副本怪物太强，您未能战斗胜利，因此无法获得收益，请切换至普通关卡</font>");else{var t=vo["int"](e.gold/60);t=Math.abs(t),1>t&&(t=1),this.txtReports.appendHTML("<br><font color='#ffffff'>-----以上是您的离线收获^^,您已离线"+t+"分钟-----</font>")}e.gold<-1&&this.txtReports.appendHTML("<br><font color='#e70626' size='16'>您的离线时间已达上限，等级越高时间越长（基础最多300分钟），在商城可购买额外离线时长</font>"),this.panelReports.refresh(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max,this.popup()},i.receiveOfflineAwardsExt=function(e){null==e||e.isEmpty||(this.txtReports.appendHTML("<br><font color='#ffffff'>-----以下是您离线期间开启宝箱信息-----</font>"),e.renderItems(this.txtReports),e.exp>0&&this.txtReports.appendHTML("<br><font color='#0084ff'>获得经验 +"+e.exp+"</font>"),e.gas>0&&this.txtReports.appendHTML("<br><font color='#00dc24'>获得灵气 +"+e.gas+"</font>"),e.silver>0&&this.txtReports.appendHTML("<br><font color='#fffc00'>获得铜币 +"+e.silver+"</font>"),
e.gasM>0?this.txtReports.appendHTML("<br><font color='#3eede7'>获得真元 +"+e.gasM+"</font>"):-1==e.gasM&&(this.txtReports.appendHTML("<br><font color='#e70626'>您的真元已满，无法获取，请尽快使用。</font>"),this.reportsNum+=1),e.gold>0&&(this.txtReports.appendHTML("<br><font color='#fffc00'>获得元宝 +"+e.gold+"</font>"),this.reportsNum+=1))},t}(MA),mP=function(e){function t(){this.talismanSelectPop=null,this._stoneList=null,this.gridIndex=0,this.hasMetas=!1,this.propsMetas=null,this.propsPool=null,this._aimTalisman=null,this._stones=null,t.__super.call(this),this._selectStoneIndex=new go,M.drawBlackBg(this,!1),this.tabMater.selectHandler=new h(this,this.onTab),this.onTab(0),this.stoneMater.x=this.listTalisman.x,this.talismanSelectPop=new fP,this.talismanSelectPop.talismanList.mouseEnabled=!0,this.talismanSelectPop.talismanList.mouseHandler=new h(this,this.onPropPopSelect),this.listTalisman.renderHandler=new h(this,this.onTalismanRender),this.listTalisman.mouseEnabled=!0,this.listTalisman.mouseHandler=new h(this,this.onMouseItem),this._stoneList=this.stoneMater.getChildByName("stones"),this._stoneList.scrollBar.hide=!0,this._stoneList.renderHandler=new h(this,this.onStoneRender),this._stoneList.mouseEnabled=!0,this._stoneList.mouseHandler=new h(this,this.onMouseStone),this.btnGoBuy.clickHandler=new h(this,this.onGoBuy),this.btnSubmit.clickHandler=new h(this,this.onSubmit)}o(t,"modules.talisman.view.componets.TalismanUpgradeView",e);var i=t.prototype;return i.onGoBuy=function(){this.close(),x.getInstance().sendNotification("OPEN_MARCKET_VIEW","珍宝")},i.onStoneRender=function(e,t){if(this._stoneList.dataSource){var i=e.getChildByName("props");Ln.renderProps(i,e.dataSource);var n=e.getChildByName("sureUse");n.selected=this._selectStoneIndex.contain(t),n.selected?i.alpha=1:i.alpha=.5}},i.onMouseStone=function(e,t){if("click"==e.type&&"sureUse"==e.target.name){var i=e.target,n=this._stoneList.getCell(t),o=n.getChildByName("props");i.selected?(o.alpha=1,this._selectStoneIndex.add(t)):(o.alpha=.5,this._selectStoneIndex.remove(t))}},i.onTalismanRender=function(e,t){if(this.listTalisman.dataSource){var i=this.listTalisman.dataSource[t],n=e.getChildByName("btnPutin"),o=e.getChildByName("talisman");i?(Ln.renderTalisman(o,i),o.visible=!0,n.visible=!1):(o.visible=!1,n.visible=!0)}},i.onMouseItem=function(e,t){"click"==e.type&&(this.gridIndex=t,this.talismanSelectPop.popPops(this.propsPool))},i.onPropPopSelect=function(e,t){if("click"==e.type&&this.propsPool&&this.propsPool[t]){var i=this.propsPool[t];this.propsPool.splice(t,1),this.talismanSelectPop.close();var n=this.propsMetas[this.gridIndex];if(n){this.propsPool.push(n)}this.propsMetas[this.gridIndex]=i,this.hasMetas=!0,this.onTalismanRender(this.listTalisman.getCell(this.gridIndex),this.gridIndex)}},i.popSelect=function(e,t,i){this._selectStoneIndex.clear(),this._aimTalisman=e,this._stones=i,Ln.renderTalisman(this.aimTalisman,e),this.propsPool=t,this.propsMetas=[null,null,null];for(var n=0;3>n;n++)this.propsPool.length>0&&(this.propsMetas[n]=this.propsPool.shift());this.listTalisman.dataSource=this.propsMetas;var o=Re.getUpgradeStone(e);this.stoneMater.getChildByName("props");null!=i&&i.length>0?(this._stoneList.dataSource=i,this._stoneList.visible=!0,this.btnGoBuy.visible=!1):(this._stoneList.visible=!1,this.btnGoBuy.visible=!0);var s=this.stoneMater.getChildByName("costNum");s.style.fontSize=26,s.style.color="#00dc24";var r=Re.getUpgradeStoneNum(e),a=0;a=this._aimTalisman.quality<5?5:6,s.innerHTML="消耗<font color='"+N.getColor(a)+"'>"+o.name.substr(0,2)+"(或以上品级)天籁石</font>："+r+"个",e.quality>=5?(this.tabMater.selectedIndex=1,this.tabMater.visible=!1):(this.tabMater.visible=!0,this.onTab(this.tabMater.selectedIndex)),this.popup()},i.onSubmit=function(){var e=this,t=Ng.userVO.getValue(1009);switch(this.tabMater.selectedIndex){case 0:if(t<3*this._aimTalisman.getPrice())return void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，请稍后再试"});var i;for(var n in this.propsMetas)if(i=this.propsMetas[n],null==i)return void x.getInstance().sendNotification("prompted_info_show",{info:"材料不足，请放入后再试"});x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗3个材料，提升法宝品质？",handler:h.create(this,function(t){t&&(gc.instance.upgrade(e._aimTalisman.id,e.propsMetas),e.close())})});break;case 1:if(t<ad.getPriceBy(this._aimTalisman.quality+1))return void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，请放稍后再试"});var o=Re.getUpgradeStoneNum(this._aimTalisman),s=new uo,r=0,a="";if(null!=this._stones)for(var l=0;l<this._stones.length;l++)if(this._selectStoneIndex.contain(l)){var c=this._stones[l],u=0;if(r+c.count>=o){u=o-r,s.set(c.id,u),r+=u,a+="<font color='"+N.getColor(c.quality)+"'>【"+c.propConf.name+"】*"+u+"</font>";break}u=c.count,s.set(c.id,u),r+=u,a+="<font color='"+N.getColor(c.quality)+"'>【"+c.propConf.name+"】*"+u+"</font>"}r>=o?x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗"+a+"<br>提升法宝品质？",handler:h.create(this,function(t){t&&(gc.instance.upgradeByStone(e._aimTalisman.id,s),e.close())})}):x.getInstance().sendNotification("prompted_info_show",{info:"材料不足，需要消耗"+o+"个天籁石"})}},i.onTab=function(e){var t=0,i=0;switch(e){case 0:this._aimTalisman&&(i=3*this._aimTalisman.getPrice(),t=Ng.userVO.getValue(1009),this.costSilver.text=""+i,i>t?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"),this.listTalisman.visible=!0,this.stoneMater.visible=!1;break;case 1:this._aimTalisman&&(i=ad.getPriceBy(this._aimTalisman.quality+1),t=Ng.userVO.getValue(1009),this.costSilver.text=""+i,i>t?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"),this.listTalisman.visible=!1,this.stoneMater.visible=!0}},t}(_A),gP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.graphList.scrollBar.hide=!0;var e=M.heightScaleNum(this);e>0&&(this.graphList.height+=e),this.graphList.renderHandler=new h(this,this.onRender)}o(t,"modules.smithy.view.componets.GraphSelectPop",e);var i=t.prototype;return i.onRender=function(e,t){if(this.graphList.dataSource){var i=this.graphList.dataSource[t],n=e;Ln.renderProps(n,i),Ln.changeCountShow(n,i.countTmp)}},i.popPops=function(e){null==e||0==e.length?(this.emptyInfo.visible=!0,this.graphList.visible=!1):(this.graphList.dataSource=e,this.emptyInfo.visible=!1,this.graphList.visible=!0),this.popup()},t}(eI),vP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);var e=M.heightScaleNum(this);e>0&&(this.submit.y+=e,this.ntc.y+=e,this.lbInfo.y+=e,this.height+=e)}return o(t,"modules.smithy.view.componets.SmithyEquipView",e),t}($T),yP=function(e){function t(){this._vo=null,t.__super.call(this),M.drawBlackBg(this,!1),this.keepOld.clickHandler=new h(this,this.onKeepOld),this.useNew.clickHandler=new h(this,this.onKeepNew)}o(t,"modules.talisman.view.componets.TalismanChoseView",e);var i=t.prototype;return i.onKeepOld=function(){this.close(),gc.instance.rebuildChose(this._vo.id,!0)},i.onKeepNew=function(){this.close(),gc.instance.rebuildChose(this._vo.id,!1)},i.showTalisman=function(e){this._vo=e,Ln.renderTalisman(this.aimTalisman,e),Ln.renderTalismanTempAttr(this.viewTalisman,e),this.popup()},t}(IA),bP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.talisman.view.componets.TalismanOptionSuccess",e),t}(AA),EP=function(e){function t(){t.__super.call(this),this.natureBar.visible=!1,this.lbTitle.text="试练之塔排行",this.rankTitle.text="层数",this.lbInfo.text="小贴示：仅显示前10名，排名每天挑战后更新。",M.drawBlackBg(this,!0);var e=M.heightScaleNum(this);e>0&&(this.list.height+=e,this.lbInfo.y+=e,this.btnFresh.y+=e,this.getChildByName("close").y+=e,this.height+=e)}return o(t,"modules.tower.view.componets.TowerRank",e),t}(fT),xP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.lbHour.on("blur",this,this.onHour),this.lbMin.on("blur",this,this.onMinute)}o(t,"modules.worldboss.view.componets.WorldBossChg",e);var i=t.prototype;return i.onHour=function(e){var t=vo["int"](this.lbHour.text);return isNaN(t)?void(this.lbHour.text=""):11>t||t>22?void(this.lbHour.text=""):void(10>t&&(this.lbHour.text="0"+t))},i.onMinute=function(e){var t=vo["int"](this.lbMin.text);return isNaN(t)?void(this.lbMin.text=""):0>t||t>59?void(this.lbMin.text=""):void(10>t&&(this.lbMin.text="0"+t))},i.showInfo=function(e){if(e.openDate>0){var t=ro.newDate(e.openDate),i=t.getHours(),n=t.getMinutes(),o=t.getDay();switch(o){case 6:this.cbWeek.selectedIndex=1;break;case 0:this.cbWeek.selectedIndex=2;break;default:this.cbWeek.selectedIndex=0}this.lbHour.text=10>i?"0"+i:i+"",this.lbMin.text=10>=n?"0"+n:n+""}else this.cbWeek.selectedIndex=0,this.lbHour.text="",this.lbMin.text="";this.popup()},t}(DT),SP=function(e){function t(){this._propPool=null,this._talismamPool=null,this._confirm=!1,this.selectedProps=new uo,this.selectedTalismans=new go,t.__super.call(this),M.drawBlackBg(this,!1),this.tabBar.selectHandler=new h(this,this.onTab),this.props.list.renderHandler=new h(this,this.onRenderProp),this.props.list.mouseEnabled=!0,this.props.list.mouseHandler=new h(this,this.onMouseProp),this.talismans.list.renderHandler=new h(this,this.onRenderTalisman),this.talismans.list.mouseEnabled=!0,this.talismans.list.mouseHandler=new h(this,this.onMouseTalisman),this.onTab(0),this.cbNature.selectHandler=new h(this,this.onFilter)}o(t,"modules.worldboss.view.componets.WorldBossFeedPop",e);var i=t.prototype;return i.onTab=function(e){switch(e){case 0:this.props.visible=!0,this.talismans.visible=!1;break;case 1:this.props.visible=!1,this.talismans.visible=!0}this.onFilter(this.cbNature.selectedIndex)},i.onFilter=function(e){if(0==this.tabBar.selectedIndex){this.selectedProps.clear(),this._confirm=!1;var t=null;if(0>=e)t=this._propPool;else{t=[];var i;for(var n in this._propPool)i=this._propPool[n],i.quality==e&&t.push(i)}null==t||0==t.length?(this.emptyInfo.visible=!0,this.props.list.visible=!1):(this.emptyInfo.visible=!1,this.props.list.visible=!0,this.props.list.dataSource=t)}else{this.selectedTalismans.clear(),this._confirm=!1;var o=null;if(0>=e)o=this._talismamPool;else{o=[];var s;for(var r in this._talismamPool)s=this._talismamPool[r],s.quality==e&&o.push(s)}null==o||0==o.length?(this.emptyInfo.visible=!0,this.talismans.list.visible=!1):(this.emptyInfo.visible=!1,this.talismans.list.visible=!0,this.talismans.list.dataSource=o)}},i.showProps=function(e,t){this._propPool=e,this._talismamPool=t,this.onFilter(this.cbNature.selectedIndex),this.popup()},i.onRenderProp=function(e,t){if(this.props.list.dataSource){var i=this.props.list.dataSource[t],n=e.getChildByName("grid"),o=e.getChildByName("checkBox");this.selectedProps.get(i.id)?o.selected=!0:o.selected=!1,Ln.renderProps(n,i),Ln.changeCountShow(n,0);var s=e.getChildByName("inputNum"),r=e.getChildByName("lbUnit");s.text=i.countTmp+"",s.prompt=i.count+"",s.visible=o.selected,r.visible=o.selected;var a=e.getChildByName("has");a.text="持有："+i.count+"个";var l=e.getChildByName("price");l.text="喂养值："+$e.queryPrice(i)+"点/个"}},i.onBlur=function(e){var t=vo["int"](e.text),i=vo["int"](e.prompt),n=e.parent,o=n.dataSource;isNaN(t)||1>t?(e.text="1",o.countTmp=1):t>i?(e.text=i+"",o.countTmp=i):o.countTmp=t},i.onMouseProp=function(e,t){if("click"==e.type){var i=this.props.list.dataSource[t];switch(e.target.name){case"checkBox":var n=e.target;n.selected?(this.selectedProps.set(i.id,i),i.quality>=5?(this._confirm=!0,i.countTmp=1):i.countTmp=i.count):this.selectedProps.remove(i.id);var o=this.props.list.getCell(t).getChildByName("inputNum"),s=this.props.list.getCell(t).getChildByName("lbUnit");o.text=i.countTmp+"",o.visible=n.selected,s.visible=n.selected,o.hasListener("blur")||o.on("blur",this,this.onBlur)}}},i.onRenderTalisman=function(e,t){if(this.talismans.list.dataSource){var i=this.talismans.list.dataSource[t],n=e.getChildByName("grid"),o=e.getChildByName("checkBox");this.selectedTalismans.contain(i)?o.selected=!0:o.selected=!1,Ln.renderTalisman(n,i);var s=e.getChildByName("price");s.text="喂养值："+$e.queryPriceOfTalisman(i)+"点"}},i.onMouseTalisman=function(e,t){if("click"==e.type&&"checkBox"==e.target.name){var i=this.talismans.list.dataSource[t],n=e.target;n.selected?(this.selectedTalismans.add(i),i.quality>=5&&(this._confirm=!0)):this.selectedTalismans.remove(i)}},t}(BT),wP=function(e){function t(){this.lastDamag=null,this._bossOpenDate=NaN,this.otherFighter=new uo,t.__super.call(this),M.drawBlackBg(this,!1);var e=this.hp.getChildByName("bgRed");t.PRESS_BG_WIDTH=e.width,this.head.pos(0,0)}o(t,"modules.worldboss.view.componets.WorldBossHome",e);var n=t.prototype;return n.showHead=function(e){var t,i=this.head.getChildByName("head"),n=e.getValue(1011),o=e.getValue(1005);return t=0==o?"w"+n:"m"+n,i.skin="ui/head/"+t+".png",this.head},n.popDamage=function(e){var t=oS.getOne();t.pos(this.head.x,0),t.popHurt(e,!1),t.lb.color="#e70626",this.hp.addChild(t)},n.clear=function(){this.head.x=-100,this.lastDamag=null;var e;for(var t in this.otherFighter.values)e=this.otherFighter.values[t],Lr.clearTween(e),e.clear();this.otherFighter.clear(),i.timer.clear(this,this._showOtherPlayerDelay)},n.showOtherPlayer=function(e){this.lastDamag=e,this._showOtherPlayerDelay(),i.timer.loop(1e3,this,this._showOtherPlayerDelay)},n._showOtherPlayerDelay=function(){if(!(this.otherFighter.keys.length>=10||null==this.lastDamag||0==this.lastDamag.length)){var e,t=0;for(var i in this.lastDamag)if(e=this.lastDamag[i],null==this.otherFighter.get(e.playerId)){var n=sS.getOne();n.randomIcon(),n.damge=e,this.otherFighter.set(e.playerId,n);var o=fo.RandomBetweenTwoNumbers(3e3,8e3),s=vo["int"](o/1e3),r=fo.RandomBetweenTwoNumbers(0,5*this.head.width),a=this.hp.y+s*this.head.height;if(n.pos(r,a),this.addChild(n),Lr.to(n,{y:this.hp.y+20},o,null,h.create(this,this.onMoveEnd,[n])),t+=1,t>=3)break}}},n.onMoveEnd=function(e){this.otherFighter.remove(e.damge.playerId);var t=oS.getOne();t.pos(e.x,0),t.popHurt(-e.damge.damage,!1),t.lb.color="#ffffff",this.hp.addChild(t),this.freshBossHp(),e.clear()},n.showBoss=function(e){null==e||e.id<=0||(this.bossName.text=Re.getClutureName(e.culture)+"首领",this.bossName.color=Re.getCultureColor(e.culture),this._bossOpenDate=e.openDate,this.freshBossHp())},n.freshBossHp=function(){var e=this.hp.getChildByName("bgRed"),t=this.hp.getChildByName("bgYellow"),i=$e.BOSS_LIVE_TIME-(g.clock.currentTime-this._bossOpenDate);0>i&&(i=0);var n=$e.BOSS_LIVE_TIME;i>n&&(i=n);var o=n/3,s=Math.ceil(i/o),r=0;switch(s){case 2:r=i-o,e.skin="ui/bgHp.png",t.skin="ui/bgHp2.png",this.showPress(e,1,1),this.showPress(t,r,o);break;case 3:r=i-o-o,e.skin="ui/bgHp2.png",t.skin="ui/bgHp3.png",this.showPress(e,1,1),this.showPress(t,r,o);break;case 4:r=i-o-o-o,e.skin="ui/bgHp3.png",t.skin="ui/bgHp4.png",this.showPress(e,1,1),this.showPress(t,r,o);break;case 1:default:r=i,e.skin="ui/bgHp.png",t.skin="ui/bgHp2.png",this.showPress(e,r,o),this.showPress(t,0,1)}},n.showPress=function(e,i,n){isNaN(n)||0==n||0==i?(e.width=0,e.visible=!1):(e.visible=!0,e.width=t.PRESS_BG_WIDTH*i/n)},t.PRESS_BG_WIDTH=0,t}(kT),CP=function(e){function t(){this.feedPerson=0,this.fightPerson=0,this.pwb=null,t.__super.call(this),M.drawBlackBg(this,!1),this.listFeed.ranks.renderHandler=new h(this,this.onFeedRender),this.listFight.ranks.renderHandler=new h(this,this.onFightRender);var e=new h(this,this.onClick);this.listFeed.ranks.mouseEnabled=!0,this.listFeed.ranks.mouseHandler=e,this.listFight.ranks.mouseEnabled=!0,this.listFight.ranks.mouseHandler=e,this.lbNotice.style.fontSize=26,this.lbNotice.style.color="#ffffff",this.lbNotice.style.leading=10}o(t,"modules.worldboss.view.componets.WorldBossRankView",e);var i=t.prototype;return i.showInfo=function(e,t,i){this.feedPerson=e.feedPerson,this.fightPerson=e.fightPerson,this.pwb=i,e.isOpen()?(this.tab.labels="喂养排行,伤害排行",this.listFight.ranks.dataSource=t.top10fight,this.btnFeed.visible=!1,e.isKilled()||(this.tab.selectedIndex=1)):(this.tab.labels="喂养排行",this.tab.selectedIndex=0,this.btnFeed.visible=!0),this.listFeed.ranks.dataSource=t.top10feed;var n=$e.checkFriPoorExp(e);n>0?(this.lbNotice.style.color="#ffffff",this.lbNotice.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;当前累计<font color='#00dc24'>喂养度"+(e.exp+e.expExt)+"</font>，由于喂养人数过少；截止周六0点喂养度<font color='#e70626'>可提升为"+(n+e.expExt)+"</font>；若截止时间后仍未开启，则喂养度恢复正常保留至下周。"):(this.lbNotice.style.color="#0084ff",this.lbNotice.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;小贴士：喂养排行第一可更改开启世界首领时间。<br>喂养奖励在开启后方可领取，伤害奖励在打完后方可领取。")},i.onFeedRender=function(e,t){var i=e.dataSource,n=e.getChildByName("lbNo");n.text=i.rank+"",i.rank<1?(n.text="--",n.color="#b0bcb0"):i.rank<=6?n.color=N.getColor(7-i.rank):n.color="#ffffff",n=e.getChildByName("lbName"),n.text=i.name,v.playerId==i.playerId?(n.color="#00dc24",n.underline=!1):(n.color="#0084ff",n.underline=!0),n=e.getChildByName("lbValue"),n.text=i.value+"",n=e.getChildByName("lbAward"),n.text=$e.queryFeedAwardStr(i.rank,this.feedPerson,i.value),n.color="#e70626"},i.onFightRender=function(e,t){var i=e.dataSource,n=e.getChildByName("lbNo");n.text=i.rank+"",i.rank<1?(n.text="--",n.color="#b0bcb0"):i.rank<=6?n.color=N.getColor(7-i.rank):n.color="#ffffff",n=e.getChildByName("lbName"),n.text=i.name,v.playerId==i.playerId?(n.color="#00dc24",n.underline=!1):(n.color="#0084ff",n.underline=!0),n=e.getChildByName("lbValue"),n.text=i.value+"",n=e.getChildByName("lbAward"),this.pwb&&i.playerId==this.pwb.playerId&&this.pwb.feed<1e3?(n.text="喂养不足1000",n.color="#ffffff"):(n.text=$e.queryFightAwardStr(i.rank,this.fightPerson,i.value),n.color="#e70626")},i.onClick=function(e,t){if("click"==e.type){var i=null;if(this.listFeed.visible)i=this.listFeed.ranks.getCell(t);else{if(!this.listFight.visible)return;i=this.listFight.ranks.getCell(t)}var n=i.dataSource;if(null==n)return;v.playerId==n.playerId?x.getInstance().sendNotification("ROLE_VIEW"):x.getInstance().sendNotification("SHOW_LOOK_PAGE",{playerId:n.playerId,name:n.name,nature:n.nature,level:n.level})}},t}(VT),TP=function(e){function t(){this.itemId=0,t.__super.call(this),this.buyB.x=this.buyA.x,this.buyC.x=this.buyA.x;var e=M.heightScaleNum(this);e>0&&(this.height+=e)}o(t,"modules.tower.view.componets.TowerShopPop",e);var i=t.prototype;return i.popItem=function(e,t,i){this.itemId=e;var n;n=this.buyB.getChildByName("name"),n.text=t.text,n.color=t.color,n=this.buyB.getChildByName("costCoin"),n.text=i,this.buyB.getChildByName("count").text="1",this.buyA.visible=!1,this.buyB.visible=!0,this.buyC.visible=!1,this.popup()},i.popItemNature=function(e,t,i,n){this.itemId=e,-1==this.nature.selectedIndex&&(this.nature.selectedIndex=n-1);var o;o=this.buyA.getChildByName("name"),o.text=t.text,o.color=t.color,o=this.buyA.getChildByName("costCoin"),o.text=i,this.buyA.getChildByName("count").text="1",this.buyA.visible=!0,this.buyB.visible=!1,this.buyC.visible=!1,this.popup()},i.popBuyPoint=function(e){this.itemId=e,this.buyA.visible=!1,this.buyB.visible=!1,this.buyC.visible=!0,this.popup()},s(0,i,"count",function(){var e=0;return this.buyA.visible?e=vo["int"](this.buyA.getChildByName("count").text):this.buyB.visible?e=vo["int"](this.buyB.getChildByName("count").text):this.buyC.visible&&(e=vo["int"](this.buyC.getChildByName("count").text)),(isNaN(e)||1>e||e>1e7)&&(e=1),e}),t}(HT),IP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.panelList.vScrollBar.hide=!0}return o(t,"modules.activity.view.componets.ActivityTemp",e),t}(UT),AP=function(e){function t(){t.__super.call(this)}return o(t,"modules.activity.view.componets.ActivityLimitView",e),t}(WT),NP=function(e){function t(){this._confirm=!1,this._index=0,this._needNum=0,this.selectedProps=new uo,t.__super.call(this),M.drawBlackBg(this,!1);var e=M.heightScaleNum(this);e>0&&(this.list.height+=e,this.height+=e,this.submit.y+=e),this.list.scrollBar.hide=!0,this.list.renderHandler=new h(this,this.onPropsRender),this.list.mouseEnabled=!0,this.list.mouseHandler=new h(this,this.onMouse),this.submit.clickHandler=new h(this,this.onSubmit)}o(t,"modules.bone.view.componets.BoneFeedPop",e);var i=t.prototype;return i.onPropsRender=function(e,t){if(this.list.dataSource){var i=this.list.dataSource[t],n=e.getChildByName("grid"),o=e.getChildByName("checkBox");this.selectedProps.get(i.id)?o.selected=!0:o.selected=!1,Ln.renderProps(n,i),Ln.changeCountShow(n,0);var s=e.getChildByName("inNum"),r=e.getChildByName("btnD"),a=e.getChildByName("btnU");s.text=i.countTmp+"",s.visible=o.selected,r.visible=o.selected,a.visible=o.selected;var l=e.getChildByName("has");l.text="持有："+i.count+"个"}},i.onMouse=function(e,t){if("click"==e.type){var i,n=this.list.dataSource[t];switch(e.target.name){case"checkBox":var o=e.target;o.selected?(this.selectedProps.set(n.id,n),5==n.quality&&1==n.propConf.propType||(this._confirm=!0),n.countTmp=1):this.selectedProps.remove(n.id);var s=this.list.getCell(t).getChildByName("btnD"),r=this.list.getCell(t).getChildByName("btnU");i=this.list.getCell(t).getChildByName("inNum"),i.visible=o.selected,i.text=n.countTmp+"",s.visible=o.selected,r.visible=o.selected;break;case"btnD":n.countTmp>1&&(i=this.list.getCell(t).getChildByName("inNum"),n.countTmp-=1,i.text=n.countTmp+"");break;case"btnU":n.countTmp<n.count&&n.countTmp<this._needNum&&(i=this.list.getCell(t).getChildByName("inNum"),n.countTmp+=1,i.text=n.countTmp+"")}}},i.popPops=function(e,t,i){this._index=e,this._needNum=i,this.selectedProps.clear(),this._confirm=!1,null==t||0==t.length?(this.emptyInfo.visible=!0,this.list.visible=!1,this.submit.visible=!1):(this.list.dataSource=t,this.emptyInfo.visible=!1,this.list.visible=!0,this.submit.visible=!0),this.popup()},i.onSubmit=function(){var e=this;this.selectedProps.keys.length?this._confirm?x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗所选材料用于升级灵根？",handler:h.create(this,function(t){t&&(Dc.instance.feed(e._index,e.selectedProps,e._needNum),e.close())})}):(Dc.instance.feed(this._index,this.selectedProps,this._needNum),this.close()):x.getInstance().sendNotification("prompted_info_show",{info:"请选择材料"})},t}(wT),PP=function(e){function t(){this._vo=null,t.__super.call(this),M.drawBlackBg(this,!1),this.keepOld.clickHandler=new h(this,this.onKeepOld),this.useNew.clickHandler=new h(this,this.onKeepNew)}o(t,"modules.smithy.view.componets.EquipChoseView",e);var i=t.prototype;return i.onKeepOld=function(){this.close(),Sc.instance.rebuildChose(this._vo.id,!0)},i.onKeepNew=function(){this.close(),Sc.instance.rebuildChose(this._vo.id,!1)},i.showEquip=function(e){this._vo=e,Ln.renderEquip(this.aimEquip,e,0,!1),Ln.renderEquip(this.viewEquip,e,0,!0),this.popup()},t}(PA),RP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.mail.view.componets.MailListView",e),t}(jT),LP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.mail.view.componets.MailDetailView",e),t}(ZT),OP=function(e){function t(){this.graphSelectPop=null,this._stoneList=null,this.gridIndex=0,this.hasMetas=!1,this.propsMetas=null,this.propsPool=null,this._aimGraph=null,this._stones=null,t.__super.call(this),this._selectStoneIndex=new go,M.drawBlackBg(this,!1),this.tabMater.selectHandler=new h(this,this.onTab),this.onTab(0),this.stoneMater.x=this.listGraph.x,this.graphSelectPop=new gP,this.graphSelectPop.graphList.mouseEnabled=!0,this.graphSelectPop.graphList.mouseHandler=new h(this,this.onPropPopSelect),this.listGraph.renderHandler=new h(this,this.onGraphRender),this.listGraph.mouseEnabled=!0,this.listGraph.mouseHandler=new h(this,this.onMouseItem),this._stoneList=this.stoneMater.getChildByName("stones"),this._stoneList.scrollBar.hide=!0,this._stoneList.renderHandler=new h(this,this.onStoneRender),this._stoneList.mouseEnabled=!0,this._stoneList.mouseHandler=new h(this,this.onMouseStone),this.btnGoBuy.clickHandler=new h(this,this.onGoBuy),this.btnSubmit.clickHandler=new h(this,this.onSubmit)}o(t,"modules.smithy.view.componets.GraphUpgradeView",e);var i=t.prototype;return i.onGoBuy=function(){this.close(),x.getInstance().sendNotification("OPEN_MARCKET_VIEW","珍宝")},i.onStoneRender=function(e,t){if(this._stoneList.dataSource){var i=e.getChildByName("props");Ln.renderProps(i,e.dataSource);var n=e.getChildByName("sureUse");n.selected=this._selectStoneIndex.contain(t),n.selected?i.alpha=1:i.alpha=.5}},i.onMouseStone=function(e,t){if("click"==e.type&&"sureUse"==e.target.name){var i=e.target,n=this._stoneList.getCell(t),o=n.getChildByName("props");i.selected?(o.alpha=1,this._selectStoneIndex.add(t)):(o.alpha=.5,this._selectStoneIndex.remove(t))}},i.onGraphRender=function(e,t){if(this.listGraph.dataSource){var i=this.listGraph.dataSource[t],n=e.getChildByName("btnPutin"),o=e.getChildByName("graph");i?(Ln.renderProps(o,i),Ln.changeCountShow(o,1),o.visible=!0,n.visible=!1):(o.visible=!1,n.visible=!0)}},i.onMouseItem=function(e,t){"click"==e.type&&(this.gridIndex=t,this.graphSelectPop.popPops(this.propsPool))},i.onPropPopSelect=function(e,t){if("click"==e.type&&this.propsPool&&this.propsPool[t]){var i=this.propsPool[t];i.countTmp-=1,i.countTmp<=0&&this.propsPool.splice(t,1),this.graphSelectPop.close();var n=this.propsMetas[this.gridIndex];n&&(n.countTmp>0?n.countTmp+=1:(n.countTmp+=1,this.propsPool.push(n))),this.propsMetas[this.gridIndex]=i,this.hasMetas=!0,this.onGraphRender(this.listGraph.getCell(this.gridIndex),this.gridIndex)}},i.popSelect=function(e,t,i){this._selectStoneIndex.clear(),this._aimGraph=e,this._stones=i,Ln.renderProps(this.aimGraph,e),Ln.changeCountShow(this.aimGraph,1),this.propsPool=t,this.propsMetas=[null,null,null];for(var n=0;3>n;n++)if(this.propsPool.length>0){var o=this.propsPool[0];o.countTmp--,o.countTmp<=0&&this.propsPool.shift(),this.propsMetas[n]=o}this.listGraph.dataSource=this.propsMetas;var s=qe.getUpgradeStone(e);this.stoneMater.getChildByName("props");null!=i&&i.length>0?(this._stoneList.dataSource=i,this._stoneList.visible=!0,this.btnGoBuy.visible=!1):(this._stoneList.visible=!1,this.btnGoBuy.visible=!0);var r=this.stoneMater.getChildByName("costNum");r.style.fontSize=26,r.style.color="#00dc24";var a=qe.getUpgradeStoneNum(e),l=0;l=this._aimGraph.quality<5?5:6,r.innerHTML="消耗<font color='"+N.getColor(l)+"'>"+s.name.substr(0,2)+"(或以上品级)天籁石</font>："+a+"个",e.quality>=5?(this.tabMater.selectedIndex=1,this.tabMater.visible=!1):(this.tabMater.visible=!0,this.onTab(this.tabMater.selectedIndex)),this.popup()},i.onSubmit=function(){switch(this.tabMater.selectedIndex){case 0:this._byMetial();break;case 1:this._byStone()}},i._byMetial=function(){var e=this,t=Ng.userVO.getValue(1009);if(t<3*this._aimGraph.propConf.silverPrice)return void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，请稍后再试"});var i,n=new uo;for(var o in this.propsMetas){if(i=this.propsMetas[o],null==i)return void x.getInstance().sendNotification("prompted_info_show",{info:"材料不足，请放入后再试"});var s=n.get(i.id);null==s&&(s=0),n.set(i.id,s+1)}x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗3个材料，提升图纸品质？",handler:h.create(this,function(t){t&&(Sc.instance.upgradeGraphSimple(e._aimGraph.id,n),e.close())})})},i._byStone=function(){var e=this,t=Ng.userVO.getValue(1009);if(t<ad.getPriceBy(this._aimGraph.quality+1))return void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，请放稍后再试"});var i=qe.getUpgradeStoneNum(this._aimGraph),n=new uo,o=0,s="";if(null!=this._stones)for(var r=0;r<this._stones.length;r++)if(this._selectStoneIndex.contain(r)){var a=this._stones[r],l=0;if(o+a.count>=i){l=i-o,n.set(a.id,l),o+=l,s+="<font color='"+N.getColor(a.quality)+"'>【"+a.propConf.name+"】*"+l+"</font>";break}l=a.count,n.set(a.id,l),o+=l,s+="<font color='"+N.getColor(a.quality)+"'>【"+a.propConf.name+"】*"+l+"</font>"}o>=i?x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗"+s+"<br>提升图纸品质？",handler:h.create(this,function(t){t&&(Sc.instance.upgradeGraphByStone(e._aimGraph.id,n),e.close())})}):x.getInstance().sendNotification("prompted_info_show",{info:"材料不足，需要消耗"+i+"个天籁石"})},i.onTab=function(e){var t=0,i=0;switch(e){case 0:this._aimGraph&&(i=3*this._aimGraph.propConf.silverPrice,t=Ng.userVO.getValue(1009),this.costSilver.text=""+i,i>t?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"),this.listGraph.visible=!0,this.stoneMater.visible=!1;break;case 1:this._aimGraph&&(i=ad.getPriceBy(this._aimGraph.quality+1),t=Ng.userVO.getValue(1009),this.costSilver.text=""+i,i>t?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"),this.listGraph.visible=!1,this.stoneMater.visible=!0}},t}(BA),MP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.myCoin.text="--",this.items.scrollBar.hide=!0;var e=M.heightScaleNum(this);e>0&&(this.items.height+=e,this.tips.y+=e,this.height+=e)}return o(t,"modules.tower.view.componets.TowerShopView",e),t}(iA),DP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.equip.view.componets.EquipOptionSuccess",e),t}(zC),kP=function(e){function t(){this._stones=null,this._equip=null,t.__super.call(this),M.drawBlackBg(this,!1),this.itemList.scrollBar.hide=!0,this.itemList.renderHandler=new h(this,this.onRender),this.itemList.mouseEnabled=!0,this.itemList.mouseHandler=new h(this,this.onClick)}o(t,"modules.equip.view.componets.EquipEnchantmentView",e);var i=t.prototype;return i.onClick=function(e,t){var i=this;if("click"==e.type&&"btnUse"==e.target.name){var n=this.itemList.getCell(t).dataSource;x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定使用一个<font color='"+N.getColor(n.quality)+"'>【"+n.propConf.name+"】</font>对装备熔灵？",handler:h.create(this,function(e){e&&(i.close(),Sc.instance.enchantment(i._equip.id,n.id))})})}},i.onRender=function(e,t){if(this.itemList.dataSource){var i=e.getChildByName("props");Ln.renderProps(i,e.dataSource)}},i.popSelect=function(e,t){this._equip=e,Ln.renderEquip(this.aimEquip,e),this._stones=t,null!=t&&t.length>0?(this.itemList.dataSource=t,this.itemList.visible=!0,this.lbEmpty.visible=!1):(this.itemList.visible=!1,this.lbEmpty.visible=!0),this.popup()},t}(_T),BP=function(e){function t(){t.__super.call(this)}return o(t,"modules.tower.view.componets.TowerShopRecover",e),t}(HA),VP=function(e){function t(){this.pa=null,t.__super.call(this),M.drawBlackBg(this,!0)}o(t,"modules.alliance.view.componets.AllianceDonateView",e);var i=t.prototype;return i.showInfo=function(e){null!=e&&(this.freshInfo(e),this.popup())},i.freshInfo=function(e){this.pa=e;var t=Et.getTitle(e.title).donateRate;this.dFree.text=vo["int"](100*t/1e4),this.d100.text=vo["int"](300*t/1e4),this.d300.text=vo["int"](1e3*t/1e4),this.lbToday.visible=e.isDonateToday()},t}(pI),FP=function(e){function t(){this.itemDic=null,t.__super.call(this),M.drawBlackBg(this,!0),this.items.renderHandler=new h(this,this.onItemRender),this.items.dataSource=new Array(6),this.items.mouseEnabled=!0,this.items.mouseHandler=new h(this,this.onMouse)}o(t,"modules.shop.view.componets.ShopView",e);var i=t.prototype;return i.fresh=function(e){this.itemDic=e,this.items.refresh()},i.onItemRender=function(e,t){if(this.itemDic){var i=this.itemDic.get(t);if(null==i)e.visible=!1;else{e.visible=!0;var n=g.database.getData("props",i.id);if(n){Ln.renderPropsByCfg(e,n,i.count);var o=e.getChildByName("price");o.text=i.gold+"元宝",o.visible=!0,o.color="#fffc00"}else console.log("cfg is null:"+i)}}},i.onMouse=function(e,t){if("click"==e.type&&this.itemDic){var i=this.itemDic.get(t);if(null!=i){if(i.gold>Ng.userVO.getValue(1010))return void x.getInstance().sendNotification("prompted_info_show",{info:"您的元宝不足，暂时不能购买。"});var n=g.database.getData("props",i.id),o=N.getColor(n.quality);x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"花费<font color='#fffc00'>"+i.gold+"元宝</font>,购买<font color='"+o+"'>【"+n.name+"】</font>*"+i.count,handler:h.create(this,function(e){e&&(Mc.instance.buy(t),k.goldenCost("森林店购买"+n.id,1,i.gold))})})}}},t}(pA),GP=function(e){function t(){this._$8_btnAward=null,this.lbCount=null,this.investType=0,t.__super.call(this),M.drawBlackBg(this,!0),this.score.text="",this.timeTips.text="",this.goldenList.scrollBar.hide=!0,this.goldenList.renderHandler=new h(this,this.onGoldRender),this.goldenList.mouseHandler=new h(this,this.onMouseBox),this.tabBar.selectHandler=new h(this,this.onTabBar),
this.btnAward.clickHandler=new h(this,this.onLibaoBuy)}o(t,"modules.activityinvest.view.componets.ActivityInvestView",e);var i=t.prototype;return i.onTabBar=function(e){var t=x.getInstance().retrieveProxy("ActivityInvestPropxy");this.investType=t.getDataIndex(e),this.showInfo()},i.freshTab=function(){var e=x.getInstance().retrieveProxy("ActivityInvestPropxy");this.tabBar.labels=e.getTabLabel();var t=this.tabBar.selectedIndex;0>t&&(t=0),this.tabBar.selectedIndex=-1,this.tabBar.selectedIndex=t},i.showInfo=function(){var e=x.getInstance().retrieveProxy("ActivityInvestPropxy");if(null!=e.investdata){var t=g.database.getJsonObj("activityInvest"),i=t[this.investType];if(null!=i){var n="活动剩余：";e.leftDay>0?n=n+e.leftDay+"天":n+="23点59分结束",this.tips.text="小贴示：投资后最高可返还"+i.goldMax+"元宝，且无时间限制。",this.timeTips.text=n+"(过期后将不再出现，已购买的除外)",this.btnAward.label="投资"+i.gold+"元宝",-1==e.investdata.buyedIds.indexOf(this.investType)?(this.btnAward.visible=!0,this.timeTips.color="#fffc00"):(this.btnAward.visible=!1,this.timeTips.color="#00dc24",this.timeTips.text="已投资");var o=null==e.scoreDict.get(this.investType)?0:e.scoreDict.get(this.investType);this.score.text=i.score+"："+o,this.goldenList.dataSource=i.data}}},i.onGoldRender=function(e,t){var i=e.dataSource,n=x.getInstance().retrieveProxy("ActivityInvestPropxy"),o=e.getChildByName("lbState"),s=e.getChildByName("content");s.style.fontSize=24,s.style.color="#ffffff";var r=e.getChildByName("award");r.style.fontSize=24,r.style.color="#ffffff";var a=e.getChildByName("btnAward");if(a.visible=!1,o.text="",s.innerHTML=i.content,r.innerHTML=i.award,-1==n.investdata.buyedIds.indexOf(this.investType))return o.text="未投资",void(o.color="#e70626");var l=null==n.scoreDict.get(this.investType)?0:n.scoreDict.get(this.investType);n.investdata.awardedIds.indexOf(i.id)>=0?(o.text="已领取",o.color="#00dc24"):l>=i.score?(a.label="可领取",a.visible=!0,s.style.color="#00dc24"):(s.style.color="#e70626",o.text="未达成",o.color="#e70626")},i.onMouseBox=function(e,t){if("click"==e.type&&"btnAward"==e.target.name){var i=this.goldenList.dataSource[t];Vc.instance.takeAward(this.investType,i.index)}},i.onLibaoBuy=function(){var e=this,t=g.database.getJsonObj("activityInvest"),i=t[this.investType];if(Ng.userVO.getValue(1010)<i.gold)return void x.getInstance().sendNotification("prompted_info_show",{info:"您的元宝不足"});x.getInstance().retrieveProxy("ActivityInvestPropxy");x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"购买需要<font color='#fffc00'>"+i.gold+"元宝</font>，是否确认？",handler:h.create(this,function(t){t&&Vc.instance.buy(e.investType)})})},t}(XT),HP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.qualityRate.renderHandler=new h(this,this.onRender),this.taskInfo.style.fontSize=26,this.taskInfo.style.leading=6,this.taskInfo.style.color="#ffffff"}o(t,"modules.alliance.view.componets.AllianceTaskView",e);var i=t.prototype;return i.showLevel=function(e){this.taskLv.text=e.taskLevel+"";var t=g.database.getData("alliance",e.taskLevel);t&&(this.qualityRate.dataSource=t.taskRate)},i.showInfo=function(e){e.finishCount>=5?(this.finishCount.text="今日任务已完成",this.finishCount.color="#fffc00",this.btnDrop.visible=!1,this.btnFast.visible=!1,this.btnFinish.visible=!1,this.btnFresh.visible=!1,this.taskName.text="",this.taskAward.text="",this.taskInfo.innerHTML=""):(this.finishCount.text=e.finishCount+1+"/5",this.finishCount.color="#00dc24",this.btnDrop.visible=!0,this.btnFast.visible=!0,this.btnFinish.visible=!0,this.btnFresh.visible=!0,this.taskName.text=e.getName(),this.taskName.color=N.getColor(e.quality),this.taskAward.text=e.getAward()+"资源、"+e.getAward()+"贡献",this.taskAward.color=N.getColor(e.quality),this.taskInfo.innerHTML=e.getInfo())},i.onRender=function(e,t){var i=e.dataSource,n=e;n.text=N.getName(t+1)+i/100+"%",n.color=N.getColor(t+1)},t}(fI),UP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.logs.dataSource=[],this.lbEmpty.visible=!1,this.logs.scrollBar.hide=!0,this.logs.renderHandler=new h(this,this.onRender)}o(t,"modules.alliance.view.componets.AllianceLogView",e);var i=t.prototype;return i.onRender=function(e,t){if(e.dataSource){var i=e.getChildByName("log");i.style.fontSize=24,i.style.leading=6,i.style.color="#ffffff",e.dataSource instanceof modules.alliance.model.AllianceDonate?i.innerHTML=this.getHtmlDonate(e.dataSource):i.innerHTML=this.getHtmlAlliance(e.dataSource)}},i.getHtmlDonate=function(e){var t="",i=ro.newDate(e.date);if(t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+"<br>",t+=e.playerId==Ng.userVO.unitId.id?"<font color='#00dc24'>"+e.name+"</font>":"<font color='#f19e21'>"+e.name+"</font>",24==e.type){t+="&nbsp;矿场捐献&nbsp;";var n=e.exvalue,o=e.golden,s=g.database.getData("props",n);if(null==s)return t;var r=Di.queryExpPrice(s)*o;t+="<font color='"+N.getColor(s.quality)+"'>"+s.name+"</font>*"+o,t+="，获得：<font color='#00dc24'>"+e.donate+"贡献</font>，<font color='#fffc00'>宗门矿场经验 + "+r+"</font>"}else{if(e.golden>0){var a;switch(e.golden){case 100:a="#e70626",t+="<font color='"+a+"'>&nbsp;高级进贡</font>";break;case 200:a="#c527ff",t+="<font color='"+a+"'>&nbsp;豪华进贡</font>";break;default:a="#c527ff",t+="<font color='"+a+"'>&nbsp;进贡元宝"+e.golden+"</font>"}}else t+=e.golden<0?"<font color='#fffc00'>&nbsp;进贡原木"+-e.golden+"</font>":"&nbsp;免费进贡";t+="，获得：<font color='#00dc24'>"+e.donate+"贡献</font>",e.resource>0&&(t+="，<font color='#fffc00'>宗门资源 + "+e.resource+"</font>")}return t},i.getHtmlAlliance=function(e){var t="",i=ro.newDate(e.date);t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+"&nbsp;&nbsp;<br>";var n,o;switch(n=e.playerId==Ng.userVO.unitId.id?"<font color='#00dc24'>"+e.name+"</font>":"<font color='#f19e21'>"+e.name+"</font>",o=e.targetId==Ng.userVO.unitId.id?"<font color='#00dc24'>"+e.targetName+"</font>":"<font color='#f19e21'>"+e.targetName+"</font>",e.type){case 3:t+=o+"&nbsp;加入宗门";break;case 4:t+=e.playerId==e.targetId?o+"&nbsp;退出宗门":o+"&nbsp;被&nbsp;"+n+"&nbsp;踢出宗门",e.value>0&&(t+="，<font color='#e70626'>宗门资源 -"+e.value+"</font>");break;case 5:t+=n+"&nbsp;修改入宗条件";break;case 6:var s=Et.getTitle(e.value);t+=n+"&nbsp;任命"+o+"为<font color='"+s.color+"'>【"+s.name+"】</font>";break;case 7:t+=n+"&nbsp;让位宗主于"+o;break;case 8:t+="宗门升级至"+e.value+"级";break;case 9:t+=n+"&nbsp;升级功法阁至"+e.value+"级";break;case 10:t+=n+"&nbsp;解散宗门";break;case 11:t+=n+"&nbsp;升级任务堂至"+e.value+"级";break;case 20:t+=n+"被弹劾&nbsp;让位宗主于"+o;break;case 21:t+=e.targetId>=0?"宗门战<font color='green'>获胜</font>，<font color='#fffc00'>宗门资源 + "+e.value+"</font>":"宗门战<font color='red'>失败</font>，<font color='#fffc00'>宗门资源 + "+e.value+"</font>";break;case 22:t+="宗门BOSS<font color='#e70626'>击杀凶兽</font>，<font color='#fffc00'>宗门资源 + "+e.value+"</font>";break;case 23:t+="宗门矿场升级至"+e.value+"级";break;case 25:t+="宗门矿场<font color='#e70626'>结算采集</font>，<font color='#fffc00'>宗门资源 + "+e.value+"</font>"}return t},t}(SI),zP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.logs.dataSource=[],this.lbEmpty.visible=!1,this.logs.scrollBar.hide=!0,this.logs.renderHandler=new h(this,this.onRender)}o(t,"modules.alliance.view.componets.AllianceTaskLogView",e);var i=t.prototype;return i.onRender=function(e,t){if(e.dataSource){var i=e.getChildByName("log");i.style.fontSize=24,i.style.leading=6,i.style.color="#ffffff",i.innerHTML=this.getHtmlAlliance(e.dataSource)}},i.getHtmlAlliance=function(e){var t="",i=ro.newDate(e.date);t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+"&nbsp;&nbsp;<br>";var n;n=e.playerId==Ng.userVO.unitId.id?"<font color='#00dc24'>"+e.playerName+"</font>":"<font color='#f19e21'>"+e.playerName+"</font>";var o="<font color='"+N.getColor(e.quality)+"'>【"+Tt.getTaskName(e.type)+"】</font>";if(e.info)t+=e.info;else{var s=Tt.getTaskAward(e.quality);t+=n+o+"&nbsp;奖励&nbsp;<font color='#00dc24'>资源+"+s+"、贡献+"+s+"</font>"}return t},i.showLogs=function(e){null==e||e.length<=0?(this.lbEmpty.visible=!0,this.logs.visible=!1):(this.lbEmpty.visible=!1,this.logs.visible=!0,this.logs.dataSource=e),this.popup()},t}(_I),WP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}o(t,"modules.alliance.view.componets.AllianceNoticeView",e);var i=t.prototype;return i.showInfo=function(e){e.masterId==Ng.userVO.unitId.id?(this.txtNotice.visible=!0,this.lbNotice.visible=!1,this.lbAlert.visible=!0,this.btnSure.visible=!0,this.lbNotice.text=e.notice,this.txtNotice.text=e.notice,this.lbEmpty.visible=!1):(this.txtNotice.visible=!1,this.lbNotice.visible=!0,this.lbAlert.visible=!1,this.btnSure.visible=!1,this.txtNotice.text=e.notice,this.lbNotice.text=e.notice,this.lbEmpty.visible=""==e.notice),this.popup()},t}(wI),YP=function(e){function t(){this._pa=null,t.__super.call(this),M.drawBlackBg(this,!0),this.list.scrollBar.hide=!0,this.list.renderHandler=new h(this,this.onRender)}o(t,"modules.alliance.view.componets.AllianceMemeberView",e);var i=t.prototype;return i.onRender=function(e,t){var i=e.dataSource;if(i){var n=i.playerId==Ng.userVO.unitId.id,o=0,s=e.getChildByName("name");s.text=i.name,n?s.color="#00dc24":s.color="#f19e21",o=s.x+s.width,s=e.getChildByName("vip"),s.x=o-4;var r=de.getTag(i.vip);null!=r?(s.text=r,s.color=de.getTagColor(i.vip),s.visible=!0,o=s.x+s.width):s.visible=!1;var a=e.getChildByName("nature");if(a.index=i.nature-1,a.x=o,o=a.x+a.width,s=e.getChildByName("level"),s.text=i.level+"级",s.x=o,s=e.getChildByName("state"),v.IS_THIRD_PT,0)if(i.online)s.text="【在线】",s.color="#00dc24";else{var l=ro.newDate(g.clock.currentTime),h=ro.newDate(i.lastOnline),c=ro.dateDiffHour(l,h);c>=24?(c=Math.floor(c/24),s.text="【"+c+"天前在线】",c>=3?s.color="#e70626":s.color="#fffc00"):c>=1?(s.text="【"+c+"小时前在线】",s.color="#0084ff"):(s.text="【刚刚在线】",s.color="#00dc24")}else s.text="";s=e.getChildByName("donate"),0==this.tbRank.selectedIndex?s.text=i.hisdonate+"":s.text=i.todayDonate+"";var u=Et.getTitle(i.title);s=e.getChildByName("title"),s.text=u.name,s.color=u.color;var d=e.getChildByName("btnKick"),p=e.getChildByName("btnTitle");this._pa?n?(d.visible=!0,p.visible=!1,this._pa.title==Et.MASTER.ordinal?d.label="解散":d.label="退宗"):(d.label="踢出",d.visible=!n&&Et.canKick(this._pa.title,i.title),p.visible=!n&&Et.canTile(this._pa.title,i.title)):(d.visible=!1,p.visible=!1)}},i.popup=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0),laya.ui.Dialog.prototype.popup.call(this,e,t),this.list.visible=!1,this.lvMin.visible=!1,this.cbState.visible=!1,this.btnSave.visible=!1,this.btnApplys.visible=!1,this._pa=null},i.showInfo=function(e,t){this._pa=e,this.lvMin.text=t.limitLv+"",this.lvMin.editable=Et.canChgApplySet(this._pa.title),this.lvMin.visible=!0,this.cbState.selected=t.vilidState,this.cbState.mouseEnabled=Et.canChgApplySet(this._pa.title),this.cbState.visible=!0,this.btnSave.visible=Et.canChgApplySet(this._pa.title),this.notPower.visible=!this.btnSave.visible,this.btnApplys.visible=Et.canDealApply(this._pa.title),this.list.visible&&this.list.refresh()},i.showMembers=function(e){this.list.dataSource=e.pager.recoards,this.list.visible=!0},t}(gI),qP=function(e){function t(){this.prop=null,this._pa=null,t.__super.call(this),this.num.on("blur",this,this.onChangeNum)}o(t,"modules.alliance.view.componets.cell.ConfirmDonatePop",e);var i=t.prototype;return i.showProp=function(e,t){this.prop=e,this._pa=t;var i=0,n=this.nameLb;n.color=N.getColor(e.quality),n.text=e.propConf.name,i=n.x+n.width;var o=this.nature;o.index=e.propConf.nature-1,o.x=i,o.visible=!0,i=i+o.width+5,n=this.count,n.text="持有："+e.count+"个",this.num.text=e.count+"",this.onChangeNum(),this.popup()},i.onChangeNum=function(e){if(this.prop&&this._pa){var t=this.num,i=vo["int"](t.text);if(isNaN(i)||i>this.prop.count)this.resource.text="输入数量有误",this.donate.text="";else{this.resource.text=5*i+"";var n=Et.getTitle(this._pa.title);this.donate.text=vo["int"](5*i*n.donateRate/1e4)+""}}},t}(RI),KP=function(e){function t(){this._playerAlliance=null,this._passiveSkills=null,t.__super.call(this),M.drawBlackBg(this,!0),this.skills.renderHandler=new h(this,this.onRender)}o(t,"modules.alliance.view.componets.AllianceSkillView",e);var i=t.prototype;return i.showInfo=function(e){this._playerAlliance=e,this.level.text=""+e.skillLevel;var t=g.database.getData("allianceskill",e.skillLevel);t?(this.attack_c.text="+ "+2*t.totalAttr,this.defense_c.text="+ "+1*t.totalAttr,this.hp_c.text="+ "+8*t.totalAttr,this.mp_c.text="+ "+4*t.totalAttr,this.attack_c.color=t.color,this.defense_c.color=t.color,this.hp_c.color=t.color,this.mp_c.color=t.color):(this.attack_c.text="",this.defense_c.text="",this.hp_c.text="",this.mp_c.text="");var i=Ng.userVO.getValue(7014);this.bookLevel.color="#ffffff";var n=g.database.getData("allianceskill",e.skillLevel+1);n?(n.attr<=0?(this.attack_n.text="",this.defense_n.text="开启技能",this.defense_n.color="#c527ff",this.hp_n.text="",this.mp_n.text=""):(this.attack_n.text="+ "+2*n.totalAttr,this.defense_n.text="+ "+1*n.totalAttr,this.hp_n.text="+ "+8*n.totalAttr,this.mp_n.text="+ "+4*n.totalAttr,this.attack_n.color=n.color,this.defense_n.color=n.color,this.hp_n.color=n.color,this.mp_n.color=n.color),this.hasDonate.text=""+e.donate,this.needDonate.text=n.needDonate,n.needDonate>e.donate?this.needDonate.color="#e70626":this.needDonate.color="#00dc24",this.bookLevel.text=""+n.needHouseLv,n.needHouseLv>i&&(this.bookLevel.color="#e70626"),this.needHeroLv.text=""+n.needHeroLv,Ng.userVO.getValue(1006)>=n.needHeroLv?this.needHeroLv.color="#00dc24":this.needHeroLv.color="#e70626"):(this.hasDonate.text=""+e.donate,this.bookLevel.text="",this.attack_n.text="",this.defense_n.text="已是最高级",this.defense_n.color="#c527ff",this.hp_n.text="",this.mp_n.text="",this.needDonate.text="",this.needHeroLv.text="")},i.showSkills=function(e,t){this._passiveSkills=e,this.skills.dataSource=ze.getBaseSkills(t)},i.onRender=function(e,t){if(null!=this._passiveSkills){var i,n=e.dataSource,o=1e6+n,s=g.database.getData("skill",n),r=g.database.getData("skill",o);i=e.getChildByName("name1"),i.text="【"+s.name+"】",i=e.getChildByName("name2"),i.text="【"+r.name+"】";var a=e.getChildByName("lbNeedLv"),l=e.getChildByName("silver"),h=e.getChildByName("info"),c=e.getChildByName("learnBtn"),u=this._passiveSkills.get(o);if(i=e.getChildByName("level"),null==u){e.alpha=.6,i.text="",c.visible=!1;var d=ze.getPassiveSkillNeedLevel(n);a.text="宗门功法"+d+"级可学习",l.text="",h.text=r.getSkillInfo(0)}else{e.alpha=1,i.text="Lv."+u.level,c.visible=!0,u.level>0?c.label="升级":c.label="学习";var p=g.database.getData("allianceskill",u.level+1);p?(a.text="",l.text=""+p.needSilver,h.text="【升级后】"+r.getSkillInfo(u.level+1)):(a.text="技能已满级",l.text="",c.visible=!1,h.text=r.getSkillInfo(u.level))}}},t}(DI),XP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}o(t,"modules.alliance.view.componets.cell.ConfirmDisbandPop",e);var i=t.prototype;return i.popInfo=function(e){this.aName.text=e.name,this.doubleSure.text="",this.popup()},t}(PI),QP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.talismans.x=this.props.x,this.equips.x=this.props.x,this.props.renderHandler=new h(this,this.onPropsRender),this.talismans.renderHandler=new h(this,this.onTalimsmanRender),this.equips.renderHandler=new h(this,this.onEquipRender)}o(t,"modules.alliance.view.componets.cell.AlcTaskSelectPop",e);var i=t.prototype;return i.onEquipRender=function(e,t){if(this.equips.dataSource){var i=this.equips.dataSource[t];Ln.renderEquip(e.getChildByName("equip"),i);var n=e.getChildByName("ckDouble");i.quality>=4?(n.visible=!0,n.selected=!1):(n.visible=!1,n.selected=!0)}},i.onPropsRender=function(e,t){if(this.props.dataSource){var i=this.props.dataSource[t];Ln.renderProps(e.getChildByName("prop"),i);var n=e.getChildByName("ckDouble");i.quality>=5?2==i.propConf.propType&&5==i.quality?(n.visible=!1,n.selected=!0):(n.visible=!0,n.selected=!1):(n.visible=!1,n.selected=!0)}},i.onTalimsmanRender=function(e,t){if(this.talismans.dataSource){var i=this.talismans.dataSource[t];Ln.renderTalisman(e.getChildByName("talisman"),i,!0);var n=e.getChildByName("ckDouble");i.quality>=5?(n.visible=!0,n.selected=!1):(n.visible=!1,n.selected=!0)}},i.showTalismans=function(e){this.talismans.dataSource=e,this.talismans.visible=!0,this.props.visible=!1,this.equips.visible=!1,this.popup()},i.showProps=function(e){this.props.dataSource=e,this.talismans.visible=!1,this.props.visible=!0,this.equips.visible=!1,this.popup()},i.showEqups=function(e){this.equips.dataSource=e,this.talismans.visible=!1,this.props.visible=!1,this.equips.visible=!0,this.popup()},t}(NI),jP=function(e){function t(){this.member=null,this._titleArr=null,t.__super.call(this),M.drawBlackBg(this,!0),this.aimTitle.selectHandler=new h(this,this.onTitle)}o(t,"modules.alliance.view.componets.cell.ApointTitlePop",e);var i=t.prototype;return i.popInfo=function(e,t){this.member=t,this.mName.text=t.name,this.nature.index=t.nature-1,this.level.text=t.level+"级",this.donate.text=t.donate+"";var i=Et.getTitle(t.title);this.title.text=i.name,this.title.color=i.color,this._titleArr=[];var n;for(var o in Et.ALL_TITLES)if(n=Et.ALL_TITLES[o],n.ordinal!=t.title&&!(n.ordinal<Et.MEMBER.ordinal)){if(n.ordinal>=e.title)break;this._titleArr.push(n.name)}e.title==Et.MASTER.ordinal&&t.title>=Et.PROLAW.ordinal&&this._titleArr.push(Et.MASTER.name),this.aimTitle.labels=this._titleArr.join(","),this.aimTitle.selectedIndex=0,this.popup()},i.onTitle=function(e){var t=this._titleArr[this.aimTitle.selectedIndex];t==Et.MASTER.name?(this.doubleSure.text="",this.doubleSure.visible=!0):this.doubleSure.visible=!1},s(0,i,"aimTitleEnum",function(){var e=this._titleArr[this.aimTitle.selectedIndex],t=Et.getTitleByName(e);return t}),t}(LI),ZP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.list.dataSource=[],this.list.renderHandler=new h(this,this.onRender)}o(t,"modules.alliance.view.componets.AllianceRankView",e);var i=t.prototype;return i.showInf=function(e){this.list.dataSource=e.pager.recoards},i.onRender=function(e,t){if(e.dataSource){var i,n=e.dataSource,o=t+1;switch(i=e.getChildByName("dRank"),i.text=""+o,o){case 1:i.color="#c527ff";break;case 2:i.color="#e70626";break;case 3:i.color="#fffc00";break;case 4:i.color="#00dc24";break;case 5:i.color="#0084ff";break;default:i.color="#ffffff"}i=e.getChildByName("dName"),i.text="【"+n.name+"】"+n.allianceLevel+"级",i.color=Lt.getAlcColor(n.allianceLevel),i=e.getChildByName("dMaster"),i.text=n.masterName,i.color="#c527ff",i=e.getChildByName("dNum");var s=g.database.getData("alliance",n.allianceLevel);i.text=n.members+"/"+s.memberMax,i.color="#00dc24"}},t}(MI),JP=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.list.scrollBar.hide=!0,this.list.renderHandler=new h(this,this.onRender),this.lbEmpty.visible=!1}o(t,"modules.alliance.view.componets.AllianceApplyView",e);var i=t.prototype;return i.onRender=function(e,t){var i=e.dataSource;if(i){var n=0,o=e.getChildByName("name");o.text=i.name,n=o.x+o.width;var s=e.getChildByName("nature");s.index=i.nature-1,s.x=n,n=s.x+s.width,o=e.getChildByName("level"),o.text=i.level+"级",o.x=n,n=o.x+o.width,o=e.getChildByName("vip");var r=de.getTag(i.vip);null!=r?(o.text=r,o.color=de.getTagColor(i.vip)):o.text="",o.x=n}},t}(OI),$P=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.btnUp.visible=!1}o(t,"modules.alliance.view.componets.AllianceBuildingView",e);var i=t.prototype;return i.showInfo=function(e){null!=e&&(this.freshInfo(e),this.popup())},i.freshInfo=function(e){this.alcLv.text=e.allianceLevel+"",this.alcSrc.text=e.resource+"";var t=g.database.getData("alliance",e.allianceLevel);this.mbMax.text=e.member+"/"+t.memberMax+"人",e.member>=t.memberMax?this.mbMax.color="#e70626":this.mbMax.color="#00dc24";var i=g.database.getData("alliance",e.allianceLevel+1);i?(this.alcNeed.text=i.needSrc,e.resource>=i.needSrc?(this.alcNeed.color="#00dc24",this.btnUp.labelColors="#00dc24"):(this.alcNeed.color="#e70626",this.btnUp.labelColors="#e70626"),this.mbMaxNt.text=i.memberMax+"人"):(this.alcNeed.text="",this.mbMaxNt.text="已满级"),this.bookLv.text=e.booksLevel+"",this.skillMax.text=5*e.booksLevel+"";var n=g.database.getData("alliance",e.booksLevel+1);n?(this.skillMaxNt.text=5*(e.booksLevel+1)+"",this.bookNeed.text=n.needSrc4Book,e.resource>=n.needSrc4Book?(this.bookNeed.color="#00dc24",this.btnBookUp.labelColors="#00dc24"):(this.bookNeed.color="#e70626",this.btnBookUp.labelColors="#e70626"),this.btnBookUp.visible=!0):(this.skillMaxNt.text="已满级",this.bookNeed.text="",this.btnBookUp.visible=!1),this.taskLv.text=e.taskLevel+"";var o=g.database.getData("alliance",e.taskLevel+1);o?(this.taskNeed.text=o.needSrc4Task+"",e.resource>=o.needSrc4Task?(this.taskNeed.color="#00dc24",this.btnTaskUp.labelColors="#00dc24"):(this.taskNeed.color="#e70626",this.btnTaskUp.labelColors="#e70626"),this.btnTaskUp.visible=!0):(this.taskNeed.text="已满级",this.btnTaskUp.visible=!1),this.lockBuiding.selected=e.buildingLock,e.masterId==Ng.userVO.unitId.id?(this.lockBuiding.mouseEnabled=!0,this.notPower.visible=!1):(this.lockBuiding.mouseEnabled=!1,this.notPower.visible=!0)},t}(kI),eR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}o(t,"modules.pay.view.componets.PaymentSelect",e);var n=t.prototype;return n.popSelect=function(e){void 0===e&&(e=!1),e?this.btnWX.visible=!1:this.btnWX.visible=!0,this.loging.visible=!1,this.paying.visible=!1,this.pSelect.visible=!0,this.btnFrame.visible=!1},n.popPaying=function(){this.pSelect.visible=!1,this.loging.visible=!0,i.timer.once(5e3,this,this.showQuitBtn),i.stage.on("focus",this,this.onFOCUS)},n.onFOCUS=function(e){i.stage.off("focus",this,this.onFOCUS),this.showQuitBtn()},n.showQuitBtn=function(){this.paying.visible=!0,this.btnFrame.visible=!0,this.loging.visible=!1,i.timer.clear(this,this.showQuitBtn)},t}(JT),tR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pearl.view.componets.PearlActiveView",e),t}(BI),iR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pearl.view.componets.PearlLevelUpView",e),t}(VI),nR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pearl.view.componets.PearlDressView",e),t}(FI),oR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pearl.view.componets.PearlChgView",e),t}(GI),sR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);M.heightScaleNum(this);this.dressed.renderHandler=new h(this,this.onRender)}o(t,"modules.blood.view.componets.BloodView",e);var i=t.prototype;return i.fresh=function(e,t){this.bloodPieces.text=e.bloodPiece+"",this.aimNum.text=vo["int"](e.bloodPiece/50),this.dressed.dataSource=e.bloodArr,this.dressed.visible=!0},i.onRender=function(e,t){var i=Ng.userVO.getValue(1006),n=e.getChildByName("item"),o=e.getChildByName("openInfo"),s=e.getChildByName("btnQuality"),r=e.getChildByName("btnLevel"),a=e.getChildByName("btnDress"),l=e.getChildByName("btnRebuild"),h=e.dataSource,c=x.getInstance().retrieveProxy("GoodsProxy"),u=e.getChildByName("chat");if(u.visible=!1,h){if(h.id){n.visible=!0,r.visible=!0;var d=c.getItemById(h.id,0);if(null==d)return n.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,void(l.visible=!1);Ln.renderBlood(n,d,h.lv),a.label="更换",v.enableChat()&&!v.limitChat&&u&&(u.visible=!0),d.quality<6?(s.label="升品",s.visible=!0,l.visible=!1):6==d.quality?(s.label="进阶",s.visible=!0,l.visible=!1):(s.label="培养",s.visible=!0,l.visible=!0)}else n.visible=!1,s.visible=!1,r.visible=!1,l.visible=!1,a.label="佩戴";a.visible=!0,o.text=""}else{n.visible=!1,s.visible=!1,r.visible=!1,a.visible=!1,l.visible=!1;var p=hi.getOpenLevel(t),f=hi.openGradNeedPropsNum(t);o.text="开启条件：人物"+p+"级，消耗【兽血皿】x"+f,p>i?o.color="#e70626":o.color="#ffffff"}},t}(aT),rR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);var e=M.heightScaleNum(this);e>0&&(this.equips.height+=e,this.lbInfo.y+=e,this.height+=e)}return o(t,"modules.equip.view.componets.EquipDressedView",e),t}(eA),aR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.oldguy.view.componets.OldGuyView",e),t}(UI),lR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.mystery.view.componets.MysteryGateView",e),t}(WI),hR=function(e){function t(){this.autoAimBg=null,this.montains=null,this.monsters=null,this.nature=null,this.player=null,this.borns=null,t.__super.call(this),M.drawBlackBg(this,!1),this.head.pos(0,0),this.autoAimBg=new Bd,this.autoAimBg.graphics.drawRect(2,2,124,124,"#00dc24"),this.autoAimBg.alpha=.3}o(t,"modules.mystery.view.componets.MysteryMapView",e);var i=t.prototype;return i.clearMap=function(){var e,t=0;if(null!=this.montains)for(t=0;t<this.montains.length;t++)e=this.montains[t],e.removeSelf();if(null!=this.monsters)for(t=0;t<this.monsters.length;t++)e=this.monsters[t],e.removeSelf();if(null!=this.borns)for(t=0;t<this.borns.length;t++)e=this.borns[t],e.removeSelf();if(null!=this.player)for(t=0;t<this.player.length;t++)e=this.player[t],e.removeSelf();if(null!=this.nature)for(t=0;t<this.nature.length;t++){var i=this.nature[t];i.removeSelf()}},i.getEmptyMontain=function(){var e;if(null!=this.montains){for(var t=0;t<this.montains.length;t++)if(e=this.montains[t],!e.parent)return e}else this.montains=[];return e=new rw("samsara/montain.png"),e.staticCache=!0,e.pos(0,6),this.montains.push(e),e},i.getEmptyMonster=function(){var e;if(null!=this.monsters){for(var t=0;t<this.monsters.length;t++)if(e=this.monsters[t],!e.parent)return e}else this.monsters=[];return e=new rw("samsara/monster.png"),e.staticCache=!0,e.pos(15,9),this.monsters.push(e),e},i.getBornMonster=function(){var e;if(null!=this.borns){for(var t=0;t<this.borns.length;t++)if(e=this.borns[t],!e.parent)return e}else this.borns=[];e=new rw("samsara/monster.png"),e.pos(15,9);var i=new Bd;i.graphics.drawRect(-e.x+2,-e.y+2,124,124,"#e70626"),i.alpha=.3,e.addChild(i);var n=new iw;return n.color="#00dc24",n.fontSize=26,n.stroke=2,n.strokeColor="#000000",n.bold=!0,n.name="clock",n.pos(-2,80),e.addChild(n),this.borns.push(e),e},i.getEmptyPlayer=function(){var e;if(null!=this.player){for(var t=0;t<this.player.length;t++)if(e=this.player[t],!e.parent)return e}else this.player=[];return e=new rw(""),e.pos(19,17),e.width=87,e.height=83,this.player.push(e),e},i.getEmptyNature=function(){var e;if(null!=this.nature){for(var t=0;t<this.nature.length;t++)if(e=this.nature[t],!e.parent)return e}else this.nature=[];return e=new aw("ui/clip_wuxing.png",1,5),e.pos(80,77),this.nature.push(e),e},i.showHead=function(e){var t,i=this.head.getChildByName("head"),n=Ng.userVO.getValue(1011),o=Ng.userVO.getValue(1005);return t=0==o?"w"+n:"m"+n,i.skin="ui/head/"+t+".png",this.head},i.randomAnswerPos=function(){var e=fo.RandomBetweenTwoNumbers(100,this.anwser.width-this.answerPop.width-100),t=fo.RandomBetweenTwoNumbers(120,120+this.answerPop.height);this.answerPop.pos(e,t)},t}(zI),cR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.mystery.view.componets.MysteryHangView",e),t}(YI),uR=function(e){function t(){this._stoneList=null,this._aimEquip=null,this._stones=null,this.lockIndex=null,this.needStoneNum=0,t.__super.call(this),this._selectStoneIndex=new go,M.drawBlackBg(this,!1),this.checkBox0.clickHandler=new h(this,this.onLock),this.checkBox1.clickHandler=new h(this,this.onLock),this.checkBox2.clickHandler=new h(this,this.onLock),this.btnSubmit.clickHandler=new h(this,this.onSubmit),this.btnGoBuy.clickHandler=new h(this,this.onGoBuy),this._stoneList=this.stoneMater.getChildByName("stones"),this._stoneList.scrollBar.hide=!0,this._stoneList.renderHandler=new h(this,this.onStoneRender),this._stoneList.mouseEnabled=!0,this._stoneList.mouseHandler=new h(this,this.onMouseStone)}o(t,"modules.equip.view.componets.EquipRebuildView",e);var i=t.prototype;return i.onStoneRender=function(e,t){if(this._stoneList.dataSource){var i=e.getChildByName("props");Ln.renderProps(i,e.dataSource);var n=e.getChildByName("sureUse");n.selected=this._selectStoneIndex.contain(t),n.selected?i.alpha=1:i.alpha=.5}},i.onMouseStone=function(e,t){if("click"==e.type&&"sureUse"==e.target.name){var i=e.target,n=this._stoneList.getCell(t),o=n.getChildByName("props");i.selected?(o.alpha=1,this._selectStoneIndex.add(t)):(o.alpha=.5,this._selectStoneIndex.remove(t))}},i.onGoBuy=function(){this.close(),x.getInstance().sendNotification("OPEN_MARCKET_VIEW","珍宝")},i.onSubmit=function(){var e=this;if(this._aimEquip){var t=this.needStoneNum+this.lockIndex.length,i=(Ft.getRebuildStone(this._aimEquip),this._aimEquip.exAttr.length);if(this.lockIndex.length>=i)return void x.getInstance().sendNotification("prompted_info_show",{info:"所有属性都被锁定，无法洗炼，请确认后再试。"});this.showStone();var n=new uo,o=0,s="";if(null!=this._stones)for(var r=0;r<this._stones.length;r++)if(this._selectStoneIndex.contain(r)){var a=this._stones[r],l=0;if(o+a.count>=t){l=t-o,n.set(a.id,l),o+=l,s+="<font color='"+N.getColor(a.quality)+"'>【"+a.propConf.name+"】*"+l+"</font>";break}l=a.count,n.set(a.id,l),o+=l,s+="<font color='"+N.getColor(a.quality)+"'>【"+a.propConf.name+"】*"+l+"</font>"}if(t>o)return void x.getInstance().sendNotification("prompted_info_show",{info:"需要消耗天籁石"+t+"个"});x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗"+s+"<br>洗练装备？",handler:h.create(this,function(t){t&&(e.close(),Sc.instance.rebuildEquipExDelay(e._aimEquip.id,n,e.lockIndex))})})}},i.onLock=function(){this._aimEquip&&(this.lockIndex.length=0,this.checkBox0.selected&&this.lockIndex.push(0),this.checkBox1.selected&&this.lockIndex.push(1),this.checkBox2.selected&&this.lockIndex.push(2),this.showStone())},i.showStone=function(){var e=this.needStoneNum+this.lockIndex.length,t=Ft.getRebuildStone(this._aimEquip),i=this.stoneMater.getChildByName("costNum");i.style.fontSize=26,i.style.color="#00dc24",i.innerHTML="消耗<font color='"+N.getColor(t.quality)+"'>"+t.name.substr(0,2)+"(或以上品级)天籁石</font>："+e+"个"},i.popSelect=function(e,t){this._selectStoneIndex.clear(),this._stones=t;var i=this._aimEquip==e;this._aimEquip=null,i||(this.checkBox0.selected=!1,this.checkBox1.selected=!1,this.checkBox2.selected=!1,this.checkBox0.visible=!1,this.checkBox1.visible=!1,this.checkBox2.visible=!1,this.lockIndex=[]);for(var n=0;n<e.exAttr.length;n++)switch(n){case 0:this.checkBox0.visible=!0;break;case 1:this.checkBox1.visible=!0;break;case 2:this.checkBox2.visible=!0}this._aimEquip=e,Ln.renderEquip(this.aimEquip,e),this.needStoneNum=Ft.getRebuildNeedStoneNum(e);this.stoneMater.getChildByName("props");null!=t&&t.length>0?(this._stoneList.dataSource=t,this._stoneList.visible=!0,this.btnGoBuy.visible=!1):(this._stoneList.visible=!1,this.btnGoBuy.visible=!0),this.onLock(),this.popup()},t}(DA),dR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.ranks.dataSource=[]}return o(t,"modules.ladder.view.componets.LadderTop10View",e),t}(KI),pR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.logs.dataSource=[],this.logs.renderHandler=new h(this,this.onRender)}o(t,"modules.ladder.view.componets.LadderLogView",e);var i=t.prototype;return i.onRender=function(e,t){var i,n=e.dataSource;1==n.action?(i="你攻击了<font color='#fffc00'>"+n.name+"</font>",n.win?(i+="<font color='#00dc24'>获胜</font>，威望+5",n.value>0&&(i+="，排名上升至"+n.value)):i+="<font color='#e70626'>失败</font>，威望+2"):(i="<font color='#fffc00'>"+n.name+"</font>攻击了你",n.win?(i+="，<font color='#e70626'>防守失败</font>",n.value>0&&(i+="，排名下将至"+n.value)):i+="，<font color='#00dc24'>防守成功</font>");var o=e.getChildByName("log");o.style.fontSize=24,o.style.leading=6,o.style.color="#ffffff",o.innerHTML=i},t}(XI),fR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.ranks.dataSource=[]}return o(t,"modules.ladder.view.componets.LadderView",e),t}(qI),_R=function(e){function t(){this.rebatePearlView=null,t.__super.call(this),M.drawBlackBg(this,!0),this.rebatePearlView=new wi(this.rebatePearl)}o(t,"modules.rebate.view.componets.RebatePopView",e);var i=t.prototype;return i.onOpened=function(){
this.rebatePearlView.onOpened()},i.onClosed=function(e){this.rebatePearlView.onClosed()},i.updataView=function(){this.rebatePearlView.updataRebatePearlView()},t}(bT),mR=function(e){function t(e){this.selectHandler=null,t.__super.call(this),M.drawBlackBg(this,!1);var i=M.heightScaleNum(this);i>0&&(this.canUsedEqups.height+=i,this.height+=i),this.canUsedEqups.scrollBar.hide=!0,this.canUsedEqups.renderHandler=new h(this,this.onEquipRender),this.selectHandler=e,this.canUsedEqups.mouseEnabled=!0,this.canUsedEqups.mouseHandler=new h(this,this.onMouse)}o(t,"modules.equip.view.componets.EquipDressChangeView",e);var i=t.prototype;return i.popSelect=function(e,t,i){e?Ln.renderEquip(this.dressedEquip,e):Ln.renderEquipEmptyGrid(this.dressedEquip,i),t.length<=0?(this.emptTxt.visible=!0,this.canUsedEqups.visible=!1):(this.emptTxt.visible=!1,this.canUsedEqups.visible=!0,this.canUsedEqups.dataSource=t),this.popup()},i.onEquipRender=function(e,t){if(this.canUsedEqups.dataSource){var i=this.canUsedEqups.dataSource[t];Ln.renderEquip(e.getChildByName("equip"),i)}},i.onMouse=function(e,t){"click"==e.type&&"btnChange"==e.target.name&&this.selectHandler.runWith(this.canUsedEqups.dataSource[t])},t}(jA),gR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.props.x=this.equips.x}return o(t,"modules.equip.view.componets.EquipPreview",e),t}(ZA),vR=function(e){function t(){this._gift=null,this._current=null,t.__super.call(this),M.drawBlackBg(this,!0),this.items.renderHandler=new h(this,this.onItemRender),this.items.mouseEnabled=!0,this.items.mouseHandler=new h(this,this.onItemClick),this.btnBuy.clickHandler=new h(this,this.onPay),this.items.visible=!1}o(t,"modules.gift.view.GiftFutureView",e);var i=t.prototype;return i.onItemClick=function(e,t){if(null!=this._current){var i=this._current.id;if("click"==e.type&&"btnAward"==e.target.name){var n,o=this._gift.getLastAwarded(i),s=Ng.userVO.getValue(1006),r=g.database.getData("giftfuture",i);for(var a in r.awardsDic.keys)if(n=r.awardsDic.keys[a],n>o&&s>=n){tu.instance.award(i,n);break}}}},i.onPay=function(){if(null!=this._current){var e=x.getInstance().retrieveProxy("MarketProxy");e.payment(this._current.payId)}},i.onItemRender=function(e,t){if(null!=this._current){var i=this._current.id,n=e.dataSource,o=g.database.getData("giftfuture",i),s=o.getAwards(n),r=e.getChildByName("level");r.text=n+"级";var a,l="";for(var h in s){a=s[h];var c=a[0],u=a[1],d=a[2];switch(c){case 3:l=l+d+"元宝  ";break;case 2:l=l+d+"铜币  ";break;case 0:var p=g.database.getData("props",u);l=l+"【"+p.name+"】*"+d+"  "}}r=e.getChildByName("name"),r.text=l;var f=e.getChildByName("buyed"),_=e.getChildByName("btnAward");if(this._gift.isBuyed(i)){var m=this._gift.getLastAwarded(i),v=Ng.userVO.getValue(1006);m>=n?(f.visible=!0,f.text="已领取",f.color="#00dc24",_.visible=!1):v>=n?(f.visible=!1,_.visible=!0):(f.visible=!0,f.text="等级不足",f.color="#fffc00",_.visible=!1)}else f.visible=!1,_.visible=!1}},i.showGift=function(e,t){if(this._current=t,null!=this._current){this._gift=e;var i=this._current.id,n=g.database.getData("giftfuture",i);this.items.dataSource=n.awardsDic.keys,this.items.visible=!0,X.openJade()?3==this._current.rmb&&v.OPEN_PAYMENT&&!v.IS_GLOBAL_VERSION?this.btnBuy.label="充值"+this._current.rmb+"元投资":this.btnBuy.label="花费"+this._current.rmb+"仙玉投资":this.btnBuy.label="充值"+this._current.rmb+"元投资",this.btnBuy.visible=!this._gift.isBuyed(i),this.desc.text=this._current.desc,this.tips.visible=this._current.level<=1}},t}(dT),yR=function(e){function t(){this._drug=null,t.__super.call(this),M.drawBlackBg(this,!0),this.doubleSure.visible=!1,this.aimNature.selectHandler=new h(this,this.onChgAim)}o(t,"modules.user.view.componets.ConfirmChgNatureView",e);var i=t.prototype;return i.popInfo=function(e,t){this.pname.text=e.getValue(1002);var i=e.getValue(1027);this.pname.color=N.getColor(i);var n=e.getValue(1004);this.cnature.index=n-1;var o=this.pname.x+this.pname.width;this.cnature.x=o,this.doubleSure.text="",this.aimNature.selectedIndex=0,this._drug=null;var s=e.getValue(1006),r=e.getValue(1022),a=!1,l=Ng.userVO.getValue(1026);if(l%10>0)this.needProps.text="活动次数1次",this.needProps.color="#00dc24",this.hasProps.text="",a=!0;else if(0==r&&50>=s){var h=g.clock.todayZero,c=Ng.userVO.getValue(19001),u=ro.dateDiff(h,ro.newDate(c));30>=u&&(this.needProps.text="可免费更换一次五行",this.needProps.color="#00dc24",this.hasProps.text="",a=!0)}if(!a){var d=1,p=g.database.getData("props",500008);this.needProps.text="【"+p.name+"】"+d+"个",this.needProps.color=N.getColor(p.quality),t?(this.hasProps.text="持有"+t.count+"个",t.count>=d?(this.hasProps.color="#00dc24",this._drug=t):this.hasProps.color="#e70626"):(this.hasProps.text="持有0个",this.hasProps.color="#e70626")}this.popup()},i.onChgAim=function(e){0==e?this.doubleSure.visible=!1:(this.doubleSure.text="",this.doubleSure.prompt="确认请输入 ‘转成"+R.getName(e)+"’",this.doubleSure.visible=!0)},s(0,i,"drug",function(){return this._drug}),t}(dA),bR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1),this.bloodList.scrollBar.hide=!0;var e=M.heightScaleNum(this);e>0&&(this.bloodList.height+=e),this.bloodList.renderHandler=new h(this,this.onbloodRender)}o(t,"modules.blood.view.componets.BloodSelectPop",e);var i=t.prototype;return i.onbloodRender=function(e,t){if(this.bloodList.dataSource){var i=this.bloodList.dataSource[t],n=e;Ln.renderBloodSimple(n,i)}},i.popPops=function(e){null==e||0==e.length?(this.emptyInfo.visible=!0,this.bloodList.visible=!1):(this.bloodList.dataSource=e,this.emptyInfo.visible=!1,this.bloodList.visible=!0),this.popup()},t}(HI),ER=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);M.heightScaleNum(this)}return o(t,"modules.blood.view.componets.BloodDressChangeView",e),t}(SA),xR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.blood.view.componets.BloodMoveOrangeView",e),t}(CA),SR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);M.heightScaleNum(this)}return o(t,"modules.blood.view.componets.BloodUpLevel",e),t}(wA),wR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}o(t,"modules.surprise.view.componets.SurpriseView",e);var i=t.prototype;return i.showItem1=function(e,i){void 0===i&&(i=!1),t.renderInfo(this.item1,e,!1,i)},i.showItem2=function(e,i){void 0===i&&(i=!1),t.renderInfo(this.item2,e,!1,i)},t.renderInfo=function(e,t,i,n){void 0===n&&(n=!1);var o=e.getChildByName("info");o.style.fontSize=24,o.style.bold=!0,o.style.color="#ffffff";var s=e.getChildByName("name"),r=e.getChildByName("limit"),a=e.getChildByName("lbTs");null==t?(s.text="",o.innerHTML="",r.visible=!1,a.text=""):(s.text=t.props.name+" "+t.count+"个",s.color=N.getColor(t.props.quality),o.innerHTML=t.props.desc,r.visible=t.isLimit(),a.text=i?"选择":"移出"),a.visible=!n},t}(tA),CR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);var e=M.heightScaleNum(this);e>0&&(this.height+=e,this.btnSubmit.y+=e,this.checkProtect.y+=e,this.lbAlert.y+=e)}return o(t,"modules.star.view.componets.StarView",e),t}(TT),TR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.captcha.view.componets.CaptchaView",e),t}(nA),IR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.petpvp.view.componets.PetPvpRoomView",e),t}(oT),AR=function(e){function t(){this.txtReports=null,t.__super.call(this),M.drawBlackBg(this,!0),this.infoPanel.vScrollBar.hide=!0,this.txtReports=new uw,this.txtReports.width=this.infoPanel.width,this.txtReports.style.lineHeight=40,this.txtReports.style.fontSize=26,this.txtReports.style.color="#ffffff",this.infoPanel.addChild(this.txtReports)}o(t,"modules.notice.view.componets.PlayNoticeView",e);var i=t.prototype;return i.showHtml=function(e){try{this.txtReports.innerHTML=e}catch(t){this.txtReports.innerHTML="排版格式有误,请联系管理员"}this.infoPanel.refresh()},t}(oA),NR=function(e){function t(){this.bloodSelectPop=null,this._stoneList=null,this.gridIndex=0,this.hasMetas=!1,this.propsMetas=null,this.propsPool=null,this._aimblood=null,this._stones=null,t.__super.call(this),this._selectStoneIndex=new go,M.drawBlackBg(this,!0),this.tabMater.selectHandler=new h(this,this.onTab),this.onTab(0),this.stoneMater.x=this.metList.x,this.bloodSelectPop=new bR,this.bloodSelectPop.bloodList.mouseEnabled=!0,this.bloodSelectPop.bloodList.mouseHandler=new h(this,this.onPropPopSelect),this.metList.renderHandler=new h(this,this.onbloodRender),this.metList.mouseEnabled=!0,this.metList.mouseHandler=new h(this,this.onMouseItem),this._stoneList=this.stoneMater.getChildByName("stones"),this._stoneList.scrollBar.hide=!0,this._stoneList.renderHandler=new h(this,this.onStoneRender),this._stoneList.mouseEnabled=!0,this._stoneList.mouseHandler=new h(this,this.onMouseStone),this.btnGoBuy.clickHandler=new h(this,this.onGoBuy),this.btnSubmit.clickHandler=new h(this,this.onSubmit)}o(t,"modules.blood.view.componets.BloodUpQuality",e);var i=t.prototype;return i.onGoBuy=function(){this.close(),x.getInstance().sendNotification("OPEN_MARCKET_VIEW","珍宝")},i.onStoneRender=function(e,t){if(this._stoneList.dataSource){var i=e.getChildByName("props");Ln.renderProps(i,e.dataSource);var n=e.getChildByName("sureUse");n.selected=this._selectStoneIndex.contain(t),n.selected?i.alpha=1:i.alpha=.5}},i.onMouseStone=function(e,t){if("click"==e.type&&"sureUse"==e.target.name){var i=e.target,n=this._stoneList.getCell(t),o=n.getChildByName("props");i.selected?(o.alpha=1,this._selectStoneIndex.add(t)):(o.alpha=.5,this._selectStoneIndex.remove(t))}},i.onbloodRender=function(e,t){if(this.metList.dataSource){var i=this.metList.dataSource[t],n=e.getChildByName("btnPutin"),o=e.getChildByName("blood");if(i){Ln.renderBlood(o,i),o.visible=!0,n.visible=!1;var s=o.getChildByName("count");s&&(s.visible=!1)}else o.visible=!1,n.visible=!0}},i.onMouseItem=function(e,t){"click"==e.type&&(this.gridIndex=t,this.bloodSelectPop.popPops(this.propsPool))},i.onPropPopSelect=function(e,t){if("click"==e.type&&this.propsPool&&this.propsPool[t]){var i=this.propsPool[t];i.countTmp--,i.countTmp<=0&&(this.propsPool.splice(t,1),this.bloodSelectPop.bloodList.refresh()),this.bloodSelectPop.close();var n=this.propsMetas[this.gridIndex];if(n){n.countTmp++;var o,s=!1;for(var r in this.propsPool)if(o=this.propsPool[r],o&&o.id==n.id){s=!0;break}s||this.propsPool.push(n),this.bloodSelectPop.bloodList.refresh()}this.propsMetas[this.gridIndex]=i,this.hasMetas=!0,this.onbloodRender(this.metList.getCell(this.gridIndex),this.gridIndex)}},i.popSelect=function(e,t,i){this._selectStoneIndex.clear(),this._aimblood=e,this._stones=i,Ln.renderBlood(this.aimBlood,e),this.propsPool=t,this.propsMetas=[null,null,null];for(var n=0;3>n;n++)this.propsPool.length>0&&(this.propsMetas[n]=this.propsPool.shift());this.metList.dataSource=this.propsMetas;var o=hi.getUpgradeStone(e);this.stoneMater.getChildByName("props");null!=i&&i.length>0?(this._stoneList.dataSource=i,this._stoneList.visible=!0,this.btnGoBuy.visible=!1):(this._stoneList.visible=!1,this.btnGoBuy.visible=!0);var s=this.stoneMater.getChildByName("costNum");s.style.fontSize=26,s.style.color="#00dc24";var r=hi.getUpgradeStoneNum(e.quality),a=0;a=this._aimblood.quality<5?5:6,s.innerHTML="消耗<font color='"+N.getColor(a)+"'>"+o.name.substr(0,2)+"(或以上品级)天籁石</font>："+r+"个",this.onTab(this.tabMater.selectedIndex),this.popup()},i.onSubmit=function(){var e=this,t=Ng.userVO.getValue(1009);switch(this.tabMater.selectedIndex){case 0:if(t<3*this._aimblood.propConf.silverPrice)return void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，请稍后再试"});var i;for(var n in this.propsMetas)if(i=this.propsMetas[n],null==i)return void x.getInstance().sendNotification("prompted_info_show",{info:"材料不足，请放入后再试"});x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗3个材料，提升血脉品质？",handler:h.create(this,function(t){t&&(Kc.instance.upgradeQuailty(e._aimblood.id,e.propsMetas),e.close())})});break;case 1:if(t<hi.getPriceBy(this._aimblood.quality+1))return void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，请放稍后再试"});var o=hi.getUpgradeStoneNum(this._aimblood.quality),s=new uo,r=0,a="";if(null!=this._stones)for(var l=0;l<this._stones.length;l++)if(this._selectStoneIndex.contain(l)){var c=this._stones[l],u=0;if(r+c.count>=o){u=o-r,s.set(c.id,u),r+=u,a+="<font color='"+N.getColor(c.quality)+"'>【"+c.propConf.name+"】*"+u+"</font>";break}u=c.count,s.set(c.id,u),r+=u,a+="<font color='"+N.getColor(c.quality)+"'>【"+c.propConf.name+"】*"+u+"</font>"}r>=o?x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"确定消耗"+a+"<br>提升血脉品质？",handler:h.create(this,function(t){t&&(Kc.instance.upgradeQualityByStone(e._aimblood.id,s),e.close())})},"duble"):x.getInstance().sendNotification("prompted_info_show",{info:"材料不足，需要消耗"+o+"个天籁石"})}},i.onTab=function(e){var t=0,i=0;switch(e){case 0:this._aimblood&&(i=3*this._aimblood.propConf.silverPrice,t=Ng.userVO.getValue(1009),this.costSilver.text=""+i,i>t?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"),this.metList.visible=!0,this.stoneMater.visible=!1;break;case 1:this._aimblood&&(i=hi.getPriceBy(this._aimblood.quality+1),t=Ng.userVO.getValue(1009),this.costSilver.text=""+i,i>t?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"),this.metList.visible=!1,this.stoneMater.visible=!0}},t}(YA),PR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.goldenList.scrollBar.hide=!0,this.goldenList.renderHandler=new h(this,this.onGoldRender),this.goldenList.mouseHandler=new h(this,this.onMouseBox),this.btnAward.clickHandler=new h(this,this.onLibaoBuy),X.openJade()&&!qt.canJumpPay(30)?this.btnAward.label="30仙玉购买":this.btnAward.label="30元购买",this.btnAward.visible=!1,this.goldenList.visible=!1}o(t,"modules.activitypayweek.view.componets.ActivityPayWeekView",e);var i=t.prototype;return i.showInfo=function(){var e=x.getInstance().retrieveProxy("ActivityPayWeekProxy"),t=e.getActTypeObj();return null==t||null==e.payweekdata?(this.btnAward.visible=!1,void(this.goldenList.visible=!1)):(7==e.payweekdata.awardId?e.todayAwarded?(this.timeTips.text="【明日可购买】",this.btnAward.visible=!1,this.timeTips.color="#e70626"):(this.timeTips.text="【已全部领取，购买后重置】",this.btnAward.visible=!0,X.openJade()&&!qt.canJumpPay(30)?this.btnAward.label="30仙玉再次购买":this.btnAward.label="30元再次购买",this.timeTips.color="#fffc00"):-1==e.payweekdata.awardId?(this.timeTips.text="【未购买】",this.btnAward.visible=!0,X.openJade()&&!qt.canJumpPay(30)?this.btnAward.label="30仙玉购买":this.btnAward.label="充值30元购买",this.timeTips.color="#fffc00"):e.payweekdata.awardId>=0&&(this.btnAward.visible=!1,this.timeTips.text="【超值福利进行中】",this.timeTips.color="#00dc24"),this.goldenList.dataSource=t,void(this.goldenList.visible=!0))},i.onGoldRender=function(e,t){var i=e.dataSource,n=x.getInstance().retrieveProxy("ActivityPayWeekProxy");if(null!=n&&null!=n.payweekdata){var o=e.getChildByName("lbState"),s=e.getChildByName("content");s.style.fontSize=24,s.style.color="#ffffff";var r=e.getChildByName("award");r.style.fontSize=24,r.style.color="#ffffff";var a=e.getChildByName("btnAward");if(a.visible=!1,o.text="",s.innerHTML=i.title,0==t){var l="",h=x.getInstance().retrieveProxy("DungeonProxy");if(h.dungeonSpInfo){var c=In.queryCountPerM(h.dungeonSpInfo.passedId),u=12*c*60;l="灵石："+u+"个"}else l="12小时灵石采集";r.innerHTML="<font color='#00dc24'>"+l+"</font>"}else r.innerHTML=i.award;n.payweekdata.awardId==i.id?(n.todayAwarded?o.text="今日已领取":o.text="已领取",o.color="#00dc24"):n.payweekdata.awardId>i.id?(o.text="已领取",o.color="#00dc24"):n.payweekdata.awardId>=0?n.payweekdata.awardId+1==i.id?n.todayAwarded?(o.text="明日可领取",o.color="#fffc00"):(a.label="可领取",a.visible=!0,s.style.color="#00dc24"):(o.text="待领取",o.color="#0084ff"):(s.style.color="#e70626",o.text="未激活",o.color="#e70626")}},i.onMouseBox=function(e,t){if("click"==e.type&&"btnAward"==e.target.name){var i=this.goldenList.dataSource[t];ru.instance.takeAward(i.id)}},i.onLibaoBuy=function(){var e=x.getInstance().retrieveProxy("MarketProxy");e.payment(800)},t}(QT),RR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.alcm.view.componets.AlcmVideoLogs",e),t}(TI),LR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.alcm.view.componets.AlcmLineupView",e),t}(CI),OR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.alcm.view.componets.AlcmDonateView",e),t}(AI),MR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.alcm.view.componets.AlcmView",e),t}(II),DR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.equips.renderHandler=new h(this,this.onRender)}o(t,"modules.handbook.view.componets.LightEquipSelect",e);var i=t.prototype;return i.onRender=function(e,t){var i=e.dataSource;Ln.renderEquip(e.getChildByName("equip"),i)},i.popEquips=function(e){this.equips.dataSource=e,this.emptTxt.visible=null==e||0==e.length,this.popup()},t}(aA),kR=function(e){function t(){this.pet=null,t.__super.call(this),M.drawBlackBg(this,!0),this.attributes.scrollBar.hide=!0,this.attributesAfter.scrollBar.hide=!0}o(t,"modules.pet.view.componets.PetUpgradeView",e);var i=t.prototype;return i.showPet=function(e){this.pet=e,this.nameTxt.text=e.petCfg.name,this.nameTxt.color=N.getColor(e.getRealQuality()),this.nature.index=e.petCfg.nature-1,this.level.text=e.level+"";var t=e.qualityLevel+e.getQrangeQualityLeveLAdd()+"";e.qualityLevel>=e.petCfg.maxQuality?(t+="（满）",this.quality.color="#c527ff"):this.quality.color="#00dc24",e.addQuality&&(t=t+" + "+e.addQuality),this.quality.text=t;var i,n,o,s=[],r=0;for(o in e.attributes.keys)r=e.attributes.keys[o],i=e.attributes.get(r),i&&(n=I.getValueStr(r,i),s.push({key:I.getName(r),value:n}));this.attributes.dataSource=s,s=[];var o,a=e.qualityLevel+e.addQuality+e.getQrangeQualityLeveLAdd();for(o in e.attributes.keys)if(r=e.attributes.keys[o],i=e.attributes.get(r)){var l=Vo.getUpgradeAttrAdd(e.petCfg.nature,r);l=vo["int"](l*a/100),n=I.getValueStr(r,i+l),s.push({key:I.getName(r),value:n})}this.attributesAfter.dataSource=s,this.freshCost()},i.freshCost=function(){if(this.pet){var e=g.database.getData("petupgrade",this.pet.level+1);if(e){var t=Ng.userVO.getValue(1023),i=e.needCount,n=x.getInstance().retrieveProxy("PayTotalPropxy");if(n&&n.info){var o=n.info.costPetFoodRate();o>0&&(i=vo["int"](i*(100-o)/100))}var s=""+t;t>1e8&&(s=vo.toFixed(t/1e8+"")+"亿");var r=""+i;i>1e8&&(r=vo.toFixed(i/1e8+"")+"亿"),this.txtCost.text="魔核："+s+"/"+r,t>=i?this.txtCost.color="#00dc24":this.txtCost.color="#e70626",this.btnUpgrade.visible=!0}else this.txtCost.text="已是最高级",this.btnUpgrade.visible=!1}},t}(UC),BR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetEquipChangeView",e),t}(rT),VR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetEquipBreakView",e),t}($C),FR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetEquipDressView",e),t}(nT),GR=function(e){function t(){this._petA=null,this._petB=null,this._natureArr=null,t.__super.call(this),M.drawBlackBg(this,!0),this.aimNature.selectHandler=new h(this,this.onNatureChg)}o(t,"modules.pet.view.componets.PetChgNatureView",e);var i=t.prototype;return i.popInfo=function(e,t){if(this._petA=e,this._petB=t,this._showPet(this.petA,this._petA),this._showPet(this.petB,this._petB),null==this._natureArr){this._natureArr=[];for(var i=0;5>i;i++){var n=i+1;this._natureArr.push(R.CHINESE_NAMES[n])}this.aimNature.labels=this._natureArr.join(",")}this.aimNature.selectedIndex=0,this.doubleSure.text="",this.popup()},i.onNatureChg=function(e){var i,n=Math.max(this._petA.level,this._petB.level),o=Math.max(this._petA.qualityLevel,this._petB.qualityLevel),s=this._natureArr[e],r=R.CHINESE_NAMES.indexOf(s),a=0;if(this._petA.color>6)a=this._petA.color,i=this._petA.nickName;else if(this._petB.color>6)a=this._petB.color,i=this._petB.nickName;else{a=6;var l=t.nature2petId[r-1],h=g.database.getData("pet",l);i=h?h.name:"??"}var c=this.aimPet.getChildByName("nameTxt");c.text=i,c.color=N.getColor(a);var u=this.aimPet.getChildByName("nature");u.index=r-1,u.x=c.x+c.width+5,c=this.aimPet.getChildByName("level"),c.text=n+"",c=this.aimPet.getChildByName("quality"),c.text=o+""},i._showPet=function(e,t){var i=e.getChildByName("nameTxt");i.text=t.getRealName(),i.color=N.getColor(t.getRealQuality());var n=e.getChildByName("nature");n.index=t.petCfg.nature-1,n.x=i.x+i.width+5,i=e.getChildByName("level"),i.text=t.level+"",i=e.getChildByName("quality"),i.text=t.qualityLevel+""},i.getAimNature=function(){return R.parseByChineseName(this.aimNature.selectedLabel)},n(t,["nature2petId",function(){return this.nature2petId=[26,27,28,29,20]}]),t}(KC),HR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetEquipFeedUpView",e),t}(tT),UR=function(e){function t(){this._vo=null,t.__super.call(this),M.drawBlackBg(this,!1),this.list.renderHandler=new h(this,this.onRender)}o(t,"modules.alcboss.view.componets.ResetAutorSelect",e);var i=t.prototype;return i.showMembers=function(e){this._vo=e,this.list.dataSource=e.memeberList},i.onRender=function(e,t){var i=e.dataSource;if(null!=i&&null!=this._vo&&this._vo.inited()){var n=e.getChildByName("btnJoin"),o=e.getChildByName("name");o.text=i.name,Ng.userVO.unitId.id==i.playerId?(o.color="#00dc24",n.visible=!1):(o.color="#0084ff",n.visible=!0);var s=e.getChildByName("nature");s.index=i.nature-1,s.x=o.x+o.width,o=e.getChildByName("level"),o.text=i.level+"级",o.x=s.x+s.width;var r=Et.getTitle(i.title);o=e.getChildByName("title"),o.text=r.name,o.color=r.color,this._vo.authorizeLine==i.playerId&&(n.visible=!1)}},t}(yI),zR=function(e){function t(){this.txtReports=null,t.__super.call(this),M.drawBlackBg(this,!0),this.panelLogs.vScrollBar.hide=!0,this.txtReports=new uw,this.txtReports.width=this.panelLogs.width,this.txtReports.style.lineHeight=40,this.txtReports.style.fontSize=26,this.txtReports.style.color="#ffffff",this.txtReports.style.bold=!0,this.panelLogs.addChild(this.txtReports)}o(t,"modules.alcboss.view.componets.AlcBossLogView",e);var i=t.prototype;return i.clear=function(){this.txtReports.innerHTML="",this.txtReports.height=0},i.showLogs=function(e){this.clear();var t;for(var i in e){t=e[i];var n=ro.newDate(t.actTime),o=ro.parseSimple(n);if(0==t.type)o+=" 你攻击了<font color='#e70626'>凶兽</font>，获得<font color='#00dc24'>"+t.donate+"宗门贡献</font>";else if(1==t.type&&(o+=" 宗门<font color='#e70626'>凶兽</font>被击杀，宗门获得<font color='#00dc24'>"+t.donate+"资源</font>",t.awards)){o+="，个人获得";var s,r=t.awards.split("|");for(var a in r){s=r[a];var l=s.split("_");if(l.length>=3)if("3"==l[0])o+="<font color='#fffc00'>"+l[2]+"元宝</font>";else if("0"==l[0]){var h="";switch(l[2]){case"5":h="第一名";break;case"3":h="第二名";break;case"2":h="第三名"}o+="，您的伤害排行为"+h+"，额外获得<font color='#c527ff'>天籁石碎片*"+l[2]+"</font>"}}}o+="<br>",this.txtReports.appendHTML(o)}this.panelLogs.refresh()},t}(bI),WR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.list.dataSource=[],this.list.renderHandler=new h(this,this.onRender)}o(t,"modules.alcboss.view.componets.AlcBossPassRankView",e);var i=t.prototype;return i.showInf=function(e){this.list.dataSource=e.pager.recoards},i.onRender=function(e,t){if(e.dataSource){var i,n=e.dataSource,o=t+1;switch(i=e.getChildByName("dRank"),i.text=""+o,o){case 1:i.color="#c527ff";break;case 2:i.color="#e70626";break;case 3:i.color="#fffc00";break;case 4:i.color="#00dc24";break;case 5:i.color="#0084ff";break;default:i.color="#ffffff"}i=e.getChildByName("dName"),i.text="【"+n.name+"】"+n.allianceLevel+"级",i.color=Lt.getAlcColor(n.allianceLevel),i=e.getChildByName("dNum"),i.text="第"+n.members+"层",i.color="#00dc24"}},t}(vI),YR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetEquipStarView",e),t}(eT),qR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.clear()}o(t,"modules.alcboss.view.componets.AlcBossView",e);var i=t.prototype;return i.clear=function(){this.level.text="",this.maxPass.text="",this.bossName.text="",this.hp.text="",this.times.text="",this.lbGold.text="",this.lbPiece.text="",this.txtAuthorizer.visible=!1,this.btnAuthorize.visible=!1,this.btnReset.visible=!1},i.showBoss=function(e){this.level.text="当前：第"+e.baseId+"层",this.maxPass.text="最大通关：第"+e.maxPassed+"层",this.bossName.text="凶兽："+Yi.getBossLevel(e.baseId)+"级"+Yi.getBossName(e.baseId),this.nature.index=Yi.getBossNature(e.baseId)-1;var t=Math.ceil(1e4*e.hp/e.hpMax);0>=t&&(t=1),this.hp.text="剩余血量："+t/100+"%"},i.showPlayerBoss=function(e){this.times.text="今日剩余挑战次数："+(1-e.fightTime),e.goldAward>0?(this.lbAward.text="累积待领取奖励：",this.lbGold.text=e.goldAward+"元宝"):(this.lbAward.text="累积待领取奖励：无",this.lbGold.text=""),e.pieceAward>0?this.lbPiece.text="天籁石碎片*"+e.pieceAward:this.lbPiece.text=""},t}(xI),KR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.list.dataSource=[],this.list.scrollBar.hide=!0,this.list.renderHandler=new h(this,this.onRender)}o(t,"modules.alcboss.view.componets.AlcBossRankView",e);var i=t.prototype;return i.onRender=function(e,t){if(e.dataSource){var i=e.dataSource,n=e.getChildByName("dRank"),o=t+1;switch(n.text="第"+o+"名",o){case 1:n.color="#c527ff";break;case 2:n.color="#e70626";break;case 3:n.color="#fffc00";break;default:n.color="#ffffff"}n=e.getChildByName("dName"),n.text=i.name,Ng.userVO.unitId.id==i.playerId?n.color="#00dc24":n.color="#0084ff",n=e.getChildByName("dDmg"),i.hpDamage>1e5?n.text=vo["int"](i.hpDamage/1e4)+"万":n.text=new String(i.hpDamage),n=e.getChildByName("dPct"),n.text=i.percent/100+"%",n=e.getChildByName("dfighted"),n.visible=i.fighted>=1}},t}(EI),XR=function(e){function t(){this._info=null,this.selectedProps=new go,t.__super.call(this),M.drawBlackBg(this,!0),this.list.renderHandler=new h(this,this.onRender),this.list.mouseEnabled=!0,this.list.mouseHandler=new h(this,this.onMouseProp)}o(t,"modules.pet.view.componets.PetEquipFeedView",e);var i=t.prototype;return i.showProps=function(e,t){this.selectedProps.clear(),this._info=t,this.list.dataSource=e,this.popup()},i.onRender=function(e,t){if(this.list.dataSource){var i=this.list.dataSource[t],n=e.getChildByName("grid"),o=e.getChildByName("checkBox");this.selectedProps.contain(i)?o.selected=!0:o.selected=!1,Ln.renderPetEquip(n,i);var s=e.getChildByName("inputNum"),r=e.getChildByName("lbUnit");s.text=i.countTmp+"",s.prompt=i.count+"",s.visible=o.selected,r.visible=o.selected;var a=e.getChildByName("lbExp");a.text="培炼值"+an.queryMaterialExp(i)+"/个"}},i.onBlur=function(e){var t=vo["int"](e.text),i=vo["int"](e.prompt),n=e.parent,o=n.dataSource;isNaN(t)||1>t?(e.text="1",o.countTmp=1):t>i?(e.text=i+"",o.countTmp=i):o.countTmp=t},i.onMouseProp=function(e,t){if("click"==e.type){var i=this.list.dataSource[t];switch(e.target.name){case"checkBox":var n=e.target;n.selected?(this.selectedProps.add(i),i.quality>=5?i.countTmp=1:i.countTmp=i.count):this.selectedProps.remove(i);var o=this.list.getCell(t).getChildByName("inputNum"),s=this.list.getCell(t).getChildByName("lbUnit");o.text=i.countTmp+"",o.visible=n.selected,s.visible=n.selected,o.hasListener("blur")||o.on("blur",this,this.onBlur)}}},t}(iT),QR=function(e){function t(){this.aimQ=0,this.fruit=null,t.__super.call(this),M.drawBlackBg(this,!0),this.aimQuality.selectHandler=new h(this,this.selectQuality),this.selectQuality()}o(t,"modules.pet.view.componets.PetShopFruitAutoPop",e);var i=t.prototype;return i.selectQuality=function(e){void 0===e&&(e=0),this.aimQ=e+2},i.showInfo=function(e){this.fruitCount.text=e.count+"个",this.fruit=e,this.popup()},t}(vT),jR=function(e){function t(){this.montains=null,this.monsters=null,this.arrows=null,this.nature=null,this.drugs=null,t.__super.call(this),M.drawBlackBg(this,!1),this.head.pos(0,0);var e=this.head.getChildByName("bgRed");t._hpBgW=e.width}o(t,"modules.samsara.view.componets.SamsaraView",e);var i=t.prototype;return i.clearMap=function(){var e,t=0;if(null!=this.montains)for(t=0;t<this.montains.length;t++)e=this.montains[t],e.removeSelf();if(null!=this.monsters)for(t=0;t<this.monsters.length;t++)e=this.monsters[t],e.removeSelf();if(null!=this.arrows)for(t=0;t<this.arrows.length;t++)e=this.arrows[t],e.removeSelf();if(null!=this.nature)for(t=0;t<this.nature.length;t++)e=this.nature[t],e.removeSelf();if(null!=this.drugs)for(t=0;t<this.drugs.length;t++)e=this.drugs[t],e.removeSelf()},i.getEmptyMontain=function(){var e;if(null!=this.montains){for(var t=0;t<this.montains.length;t++)if(e=this.montains[t],!e.parent)return e}else this.montains=[];return e=new rw("samsara/montain.png"),e.staticCache=!0,e.pos(0,6),this.montains.push(e),e},i.getEmptyMonster=function(){var e;if(null!=this.monsters){for(var t=0;t<this.monsters.length;t++)if(e=this.monsters[t],!e.parent)return e}else this.monsters=[];return e=new rw("samsara/monster.png"),e.staticCache=!0,e.pos(15,9),this.monsters.push(e),e},i.getEmptyArrow=function(){var e;if(null!=this.arrows){for(var t=0;t<this.arrows.length;t++)if(e=this.arrows[t],!e.parent)return e}else this.arrows=[];return e=new rw,e.pos(10,75),this.arrows.push(e),e},i.getEmptyNature=function(){var e;if(null!=this.nature){for(var t=0;t<this.nature.length;t++)if(e=this.nature[t],!e.parent)return e}else this.nature=[];return e=new aw("ui/clip_wuxing.png",1,5),e.pos(80,77),this.nature.push(e),e},i.getEmptyDrug=function(){var e;if(null!=this.drugs){for(var t=0;t<this.drugs.length;t++)if(e=this.drugs[t],!e.parent)return e}else this.drugs=[];return e=new rw("samsara/drug.png"),e.staticCache=!0,e.pos(0,6),this.drugs.push(e),e},i.showHead=function(e){var i,n=this.head.getChildByName("head"),o=Ng.userVO.getValue(1011),s=Ng.userVO.getValue(1005);return i=0==s?"w"+o:"m"+o,n.skin="ui/head/"+i+".png",n=this.head.getChildByName("bgRed"),n.width=t._hpBgW*(e.hp/e.hpMax),n=this.head.getChildByName("bgBlue"),n.width=t._hpBgW*(e.mp/e.mpMax),this.head},t._hpBgW=0,t}(hA),ZR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}o(t,"modules.samsara.view.componets.SamsaraChallengView",e);var i=t.prototype;return i.popInfo=function(e){this.gradeNow.text="当前关卡："+e.baseId+"层";for(var t=[],i=e.baseId+1;i<=e.baseId+10&&96>=i;i++)t.push("  "+i+"层");this.cbCross.labels=t.join(","),this.cbCross.selectedIndex=0,this.popup()},t}(uA),JR=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetEquipRefineView",e),t}(sT),$R=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1);var e,i=[],n=g.database.getDict("samsara");for(var o in n.values)if(e=n.values[o],e.awdProp>0){var s=g.database.getData("props",e.awdProp);i.push({_id:e.id,id:"第"+e.id+"层：",gas:e.awdGas+"真元",prop:{text:s.name+"*1",color:N.getColor(s.quality)},attr:"攻防+"+e.awdAttack+" 生命+"+e.awdHP+" 法力+"+e.awdMP})}this.list.dataSource=i}o(t,"modules.samsara.view.componets.SamsaraAwdView",e);var i=t.prototype;return i.showAwd=function(e){var t;for(var i in this.list.cells){t=this.list.cells[i];var n=t.dataSource;e.baseId>n._id?t.alpha=1:t.alpha=.5}this.popup()},t}(cA),eL=function(e){function t(){this.aimQ=0,t.__super.call(this),M.drawBlackBg(this,!0),this.aimQuality.selectHandler=new h(this,this.selectQuality),this.selectQuality()}o(t,"modules.pet.view.componets.PetShopFreshAutoPop",e);var i=t.prototype;return i.selectQuality=function(e){switch(void 0===e&&(e=0),this.aimQ=e+4,this.aimQ){case 4:this.maxGold.text="800";break;case 5:this.maxGold.text="3000";break;case 6:this.maxGold.text="15000"}},t}(ST),tL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);var e=M.heightScaleNum(this);e>0&&(this.height+=e)}return o(t,"modules.rolegroup.view.componets.RolegroupView",e),t}(iN),iL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.pet.view.componets.PetMakeOrangeGhostView",e),t}(GT),nL=function(e){function t(e){this.shop=null,this.hasNicePet=null,this.onTakeHandler=null,
t.__super.call(this),M.drawBlackBg(this,!0),this.onTakeHandler=e,this.pets.dataSource=[],this.pets.renderHandler=new h(this,this.onPetRender),this.pets.mouseEnabled=!0,this.pets.mouseHandler=new h(this,this.onPetMouse),this.txtFreshCD.visible=!1,this.txtAlert.visible=!1}o(t,"modules.pet.view.componets.PetShopView",e);var n=t.prototype;return n.onPetMouse=function(e,t){"click"==e.type&&"takeBtn"==e.target.name&&this.onTakeHandler.runWith(t)},n.fresh=function(e){this.shop=e,this.hasNicePet=null;var t,n=[];for(var o in e.petIds)if(t=e.petIds[o],0==t)n.push(null);else{var s=g.database.getData("pet",t);n.push(s),s.quality>=4&&(this.hasNicePet=s)}this.pets.dataSource=n,e.freshTime-g.clock.currentTime>0&&x.getInstance().sendNotification("GUIDE_PET_SHOP_FREE",!1),i.timer.loop(1e3,this,this.onBoxTimer)},n.onBoxTimer=function(){var e=this.shop.freshTime-g.clock.currentTime;if(e>0){var t=Math.floor(e/6e4),n=Math.floor(t/60);t-=60*n;var o,s=Math.floor(e%6e4/1e3);if(t>0||n>0)o=n+(10>t?":0":":")+t+(10>s?":0":":")+s;else{var r=Math.floor(e%1e3/100);o=(10>s?"0":"")+s+"."+r}this.txtFreshCD.changeText("寻找时间   "+o),this.txtFreshCD.visible=!0,this.txtAlert.visible=!0}else this.txtFreshCD.visible=!1,this.txtAlert.visible=!1,x.getInstance().sendNotification("GUIDE_PET_SHOP_FREE",!0),i.timer.clear(this,this.onBoxTimer)},n.onPetRender=function(e,t){if(this.pets.dataSource){var i,n,o,s=this.pets.dataSource[t];null==s?(i=e.getChildByName("name"),i.text="",n=e.getChildByName("bg"),n.index=-1,n=e.getChildByName("nature"),n.index=-1,i=e.getChildByName("quality"),i.text="已捕捉",i=e.getChildByName("desc"),i.text="",o=e.getChildByName("takeBtn"),o.visible=!1):(i=e.getChildByName("name"),i.text=s.name,i.color=N.getColor(s.quality),n=e.getChildByName("bg"),n.index=s.quality-1,n=e.getChildByName("nature"),n.index=s.nature-1,i=e.getChildByName("quality"),i.text="资质："+s.qualityLevel,i=e.getChildByName("desc"),i.text=s.desc,o=e.getChildByName("takeBtn"),o.visible=!0)}},t}(tI),oL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.lbMax.visible=!1}return o(t,"modules.alcshop.view.componets.AlcshopBuyMore",e),t}(NT),sL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetSkillDressSelectView",e),t}(jI),rL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetSkillUpgradView",e),t}(JI),aL=function(e){function t(){t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.listRank.height+=e,this.listLogs.height+=e,this.lbInfo.y+=e,this.getChildByName("close").y+=e,this.height+=e),M.drawBlackBg(this,!0)}return o(t,"modules.arena.view.componets.ArenaRank",e),t}(gT),lL=function(e){function t(){this.vo=null,this._stoneIndex=0,this.stone=null,this.stoneList=null,t.__super.call(this),M.drawBlackBg(this,!0),this.submit.clickHandler=new h(this,this.onSubmit),this.btnNext.clickHandler=new h(this,this.nextStone)}o(t,"modules.bagpack.view.componets.SmityPropSpPop",e);var i=t.prototype;return i.popProp=function(e,t,i){this.vo=e,this.stoneList=t,this._stoneIndex=-1,Ln.renderProps(this.costProp,this.vo),null!=t&&t.length>0?(this.costStone.visible=!0,this.notHasStone.visible=!1,this.btnNext.visible=!0,this.nextStone()):(this.costStone.visible=!1,this.notHasStone.visible=!0,this.btnNext.visible=!1);var n=g.database.getData("props",this.vo.propConf.id+1);Ln.renderPropsByCfg(this.aimProp,n,0),this.costSilver.text=String(n.silverPrice);var o=Ng.userVO.getValue(1009);n.silverPrice>o?this.costSilver.color="#e70626":this.costSilver.color="#ffffff";var s=g.database.getData("props",i);s?(this.txtStoneLm.text="需要【"+s.name+"】或更高品质",this.txtStoneLm.color=N.getColor(s.quality)):this.txtStoneLm.text="",this.popup()},i.nextStone=function(){null!=this.stoneList&&this.stoneList.length>0&&(-1==this._stoneIndex?this._stoneIndex+=1:1==this.stoneList.length?x.getInstance().sendNotification("prompted_info_show",{info:"没有其他可用天籁石了，您可在商城-珍宝中购买。"}):(this._stoneIndex+=1,this._stoneIndex>=this.stoneList.length&&(this._stoneIndex=0)),this.stone=this.stoneList[this._stoneIndex],Ln.renderProps(this.costStone,this.stone))},i.onSubmit=function(){if(null==this.stone)return void x.getInstance().sendNotification("prompted_info_show",{info:"材料不足，无法合成。"});var e=Ng.userVO.getValue(1009),t=g.database.getData("props",this.vo.propConf.id+1);return t.silverPrice>e?void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，无法合成。"}):(Sc.instance.mixPropSP(this.vo.id,this.stone.id),void this.close())},t}(uT),hL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.pet.view.componets.PetSkillDressView",e),t}(ZI),cL=function(e){function t(){this.costSilver=0,t.__super.call(this),M.drawBlackBg(this,!1),this.logs.scrollBar.hide=!0,this.logs.dataSource=[],this.logs.renderHandler=new h(this,this.onRender);var e=M.heightScaleNum(this);e>0&&(this.logs.height+=e,this.getChildByName("close").y+=e,this.height+=e)}o(t,"modules.arena.view.componets.ArenaGlobalLogView",e);var i=t.prototype;return i.onRender=function(e,t){if(this.logs.dataSource){var i=this.logs.dataSource[t],n=e.getChildByName("log");n.style.fontSize=26,n.style.leading=6,n.style.color="#ffffff",n.innerHTML=i.getHtmlStr(this.costSilver)}},t}(ET),uL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.alcshop.view.componets.AlcshopView",e),t}(mI),dL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.paytotal.view.PayTotalView",e),t}(qT),pL=function(e){function t(){this.submitSimple=null,this.lbDesc=null,this.aimCount=null,this.submit=null,this.costSilver=null,this.costProp=null,this.aimProp=null,this.vo=null,this.aimPropCfg=null,this.aimMaxNum=0,t.__super.call(this),M.drawBlackBg(this,!0),this.fast.x=this.simple.x,this.onTab(0),this.tab.selectHandler=new h(this,this.onTab),this.lbDesc=this.simple.getChildByName("lbDesc"),this.aimCount=this.simple.getChildByName("aimCount"),this.submit=this.simple.getChildByName("btnSubmit"),this.submitSimple=this.submit,this.costSilver=this.simple.getChildByName("costSilver"),this.costProp=this.simple.getChildByName("costProp"),this.aimProp=this.simple.getChildByName("aimProp"),this.aimCount.on("blur",this,this.onAimCountChanged),this.submit.on("mousedown",this,this.onSubmit)}o(t,"modules.bagpack.view.componets.SmityPropCommPop",e);var i=t.prototype;return i.showFast=function(e){},i.onTab=function(e){switch(e){case 0:this.simple.visible=!0,this.fast.visible=!1;break;case 1:if(Ng.userVO.getValue(1006)<30)return this.tab.selectedIndex=0,void x.getInstance().sendNotification("prompted_info_show",{info:"30级开启"});this.showFast(this.vo),this.simple.visible=!1,this.fast.visible=!0}},i.onAimCountChanged=function(){var e=vo["int"](this.aimCount.text);if((isNaN(e)||0>e||e>this.aimMaxNum)&&(this.aimCount.text=String(this.aimMaxNum),e=this.aimMaxNum,x.getInstance().sendNotification("prompted_info_show",{info:"目标数量有误"})),this.vo&&(1==this.vo.propConf.propType||16==this.vo.propConf.propType||9==this.vo.propConf.propType)){var t=this.dealSilverCost(this.vo.propConf,3,e);this.costSilver.text=String(t);var i=Ng.userVO.getValue(1009);t>i?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"}},i.popProp=function(e){this.tab.selectedIndex=0,this.tab.visible=!1;var t=0;if(1==e.propConf.propType||16==e.propConf.propType||9==e.propConf.propType){this.tab.visible=!0,this.vo=e,this.aimMaxNum=vo["int"](this.vo.count/3),this.aimMaxNum>9999&&(this.aimMaxNum=9999),Ln.renderProps(this.costProp,this.vo),this.aimPropCfg=g.database.getData("props",this.vo.propConf.id+1),Ln.renderPropsByCfg(this.aimProp,this.aimPropCfg,0),t=vo["int"](this.vo.count/3),t>27&&(t=27),this.aimCount.text=String(t);var i=this.dealSilverCost(e.propConf,3,t);this.costSilver.text=String(i);var n=Ng.userVO.getValue(1009);i>n?this.costSilver.color="#e70626":this.costSilver.color="#ffffff",this.lbDesc.text="每消耗3个原材料合成1个目标材料。"}else 5==e.propConf.propType&&(this.vo=e,this.aimMaxNum=vo["int"](this.vo.count/100),Ln.renderProps(this.costProp,this.vo),this.aimPropCfg=g.database.getData("props",vo["int"](this.vo.propConf.attributes)),Ln.renderPropsByCfg(this.aimProp,this.aimPropCfg,0),t=vo["int"](this.vo.count/100),this.aimCount.text=String(t),this.costSilver.text="0",this.lbDesc.text="每消耗100个碎片合成1个。");this.popup()},i.onSubmit=function(e){if(this.aimMaxNum<1)return void x.getInstance().sendNotification("prompted_info_show",{info:"材料不足，无法合成。"});var t=vo["int"](this.aimCount.text);if(isNaN(t)||0>t||t>this.aimMaxNum)return x.getInstance().sendNotification("prompted_info_show",{info:"请输入正确数量"}),this.aimCount.text=String(this.aimMaxNum),void this.onAimCountChanged();if(1==this.vo.propConf.propType||16==this.vo.propConf.propType){var i=this.dealSilverCost(this.vo.propConf,3,t),n=Ng.userVO.getValue(1009);if(i>n)return void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，无法合成。"})}return Eb.isNewGuy&&this.vo.quality>=2?void x.getInstance().sendNotification("prompted_info_show",{info:"新手期间最高可合到蓝色品质。"}):(Sc.instance.mixProp(this.vo.id,t),void this.close())},i.dealSilverCost=function(e,t,i){var n=i*e.silverPrice*t;if(e.level<30||(n*=e.level<34?1.5:e.level<40?2:e.level<45?2.5:e.level<50?3:e.level<60?4:(e.level<70,5)),e.level>=30)switch(e.quality){case 1:break;case 2:n*=1.5;break;case 3:n*=2.25;break;case 4:n*=3.375}return n=vo["int"](n)},t}(AT),fL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0)}return o(t,"modules.bagpack.view.componets.RebuildCoatSpecialPop",e),t}(PT),_L=function(e){function t(){this._foodNormalCount=0,this._foodNiceCount=0,this._foodNormal=new uo,this._foodNice=new uo,t.__super.call(this),M.drawBlackBg(this,!0),this.breakFood.x=this.mixFood.x,this.aimNice.on("blur",this,this.onNiceNum),this.breakNum.on("blur",this,this.onBreakNum),this.btnMix.clickHandler=new h(this,this.onMix),this.btnBreak.clickHandler=new h(this,this.onBreak)}o(t,"modules.bagpack.view.componets.ExchangePetFoodPop",e);var i=t.prototype;return i.fresh=function(){this._foodNormal.clear(),this._foodNice.clear(),this._foodNormalCount=0,this._foodNiceCount=0;var e,t=x.getInstance().retrieveProxy("GoodsProxy"),i=t.listItems(0);for(var n in i)if(e=i[n],!(null==e||e.count<=0)&&0==e.goodsType){var o=e;11==o.propConf.propType&&(3e4==o.propConf.id?(this._foodNormal.set(o.id,o.count),this._foodNormalCount+=o.count):(this._foodNice.set(o.id,o.count),this._foodNiceCount+=o.count))}},i.onNiceNum=function(){var e=vo["int"](this.aimNice.text);isNaN(e)||1>e||e>1e4?(this.needNormal.text="合成数有误请确认",this.needNormal.color="#e70626"):(e=1e6*e,this.needNormal.text=e+"个",e>this._foodNormalCount?this.needNormal.color="#e70626":this.needNormal.color="#00dc24")},i.onBreakNum=function(){var e=vo["int"](this.breakNum.text);isNaN(e)||1>e||e>100?(this.awardNum.text="分解数有误请确认",this.awardNum.color="#e70626"):(this.awardNum.text=1e6*e+"个",e>this._foodNiceCount?this.awardNum.color="#e70626":this.awardNum.color="#00dc24")},i.onMix=function(){var e=vo["int"](this.aimNice.text);isNaN(e)||1>e||e>1e4?(this.needNormal.text="合成数有误请确认",this.needNormal.color="#e70626"):"#e70626"==this.needNormal.color||(bu.instance.mixPetFood(this._foodNormal,e),this.close())},i.onBreak=function(){var e=vo["int"](this.breakNum.text);isNaN(e)||1>e||e>100?(this.awardNum.text="分解数有误请确认",this.awardNum.color="#e70626"):"#e70626"==this.awardNum.color||(bu.instance.breakPetFood(this._foodNice.keys[0],e),this.close())},i.showMix=function(){this.fresh(),this.mixFood.visible=!0,this.breakFood.visible=!1,this.hasNormal.text=this._foodNormalCount+"个",this.aimNice.text="1",this.onNiceNum(),this.popup()},i.showBreak=function(){this.fresh(),this.mixFood.visible=!1,this.breakFood.visible=!0,this.hasNice.text=this._foodNiceCount+"个",this.breakNum.text="1",this.onBreakNum(),this.popup()},t}(LT),mL=function(e){function t(){this.voGhost=null,this.aimPropCfg=null,this.aimMaxNum=0,this.perOneNeedNum=0,t.__super.call(this),M.drawBlackBg(this,!0),this.submit.on("mousedown",this,this.onSubmit),this.aimPosition.selectHandler=new h(this,this.freshAim),this.aimQuality.selectHandler=new h(this,this.freshAim),this.aimCount.on("blur",this,this.onAimCountChanged)}o(t,"modules.bagpack.view.componets.ExchangeGhostPop",e);var i=t.prototype;return i.onAimCountChanged=function(){var e=vo["int"](this.aimCount.text);if(isNaN(e)||0>e)this.aimCount.text=String(this.aimMaxNum);else if(this.voGhost&&this.perOneNeedNum){this.costGhostNum.text="消耗精元"+String(e*this.perOneNeedNum)+"个",this.voGhost.count<e*this.perOneNeedNum?this.costGhostNum.color="#e70626":this.costGhostNum.color="#00dc24";var t=e*this.voGhost.propConf.silverPrice*this.perOneNeedNum;t=kn.getGhostExchangeCostSilver(t,this.aimPropCfg.quality),this.costSilver.text=String(t);var i=Ng.userVO.getValue(1009);t>i?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"}},i.popProp=function(e){this.voGhost=e,Ln.renderProps(this.costProp,this.voGhost),this.hasGhostNum.text="现有精元"+this.voGhost.count+"个",this.freshAim(),this.showMinAim(),this.popup()},i.showMinAim=function(){var e=1;this.aimCount.text=String(e),this.onAimCountChanged()},i.freshAim=function(e){void 0===e&&(e=0);var i=this.aimPosition.selectedIndex+1;this.adviceNumInfo.text=t.ADVICE_NUM_ARR[this.aimPosition.selectedIndex];var n=this.aimQuality.selectedIndex+1,o=this.voGhost.propConf.type+1e4*i;if(this.aimPropCfg=g.database.getPropForGhost(o,n),this.aimPropCfg){Ln.renderPropsByCfg(this.aimProp,this.aimPropCfg,0);var s=vo["int"](this.aimCount.text);if(this.perOneNeedNum=kn.getDropGhostNum(i,n),this.perOneNeedNum=vo["int"](this.perOneNeedNum*kn.getExchangeGhostRate(this.voGhost.propConf.level)/100),this.aimMaxNum=vo["int"](this.voGhost.count/this.perOneNeedNum),s*this.perOneNeedNum>=this.voGhost.count||0>=s&&this.aimMaxNum>0)this.showMinAim();else{this.costGhostNum.text="消耗精元"+String(s*this.perOneNeedNum)+"个",this.voGhost.count<s*this.perOneNeedNum?this.costGhostNum.color="#e70626":this.costGhostNum.color="#00dc24";var r=this.voGhost.propConf.silverPrice*s*this.perOneNeedNum;r=kn.getGhostExchangeCostSilver(r,this.aimPropCfg.quality),this.costSilver.text=String(r);var a=Ng.userVO.getValue(1009);r>a?this.costSilver.color="#e70626":this.costSilver.color="#ffffff"}}},i.onSubmit=function(e){var t=vo["int"](this.aimCount.text);if(1>t||this.voGhost.count<t*this.perOneNeedNum)return void x.getInstance().sendNotification("prompted_info_show",{info:"精元不足，无法兑换。"});var i=Ng.userVO.getValue(1009),n=this.voGhost.propConf.silverPrice*t*this.perOneNeedNum;return n=kn.getGhostExchangeCostSilver(n,this.aimPropCfg.quality),n>i?void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，无法兑换。"}):(Sc.instance.exchangeGhost(this.voGhost.id,t,this.aimPropCfg.id),void this.close())},n(t,["ADVICE_NUM_ARR",function(){return this.ADVICE_NUM_ARR=["锻造武器需要6个材料","锻造防具需要3~5个材料","锻造饰品需要4个材料"]}]),t}(RT),gL=function(e){function t(e){this.selectHandler=null,this.aimPosition=0,this.selectPet=null,this._dressed=null,t.__super.call(this),M.drawBlackBg(this,!1);var i=M.heightScaleNum(this);i>0&&(this.canUsedGhosts.height+=i,this.height+=i),this.canUsedGhosts.scrollBar.hide=!0,this.canUsedGhosts.renderHandler=new h(this,this.onEquipRender),this.selectHandler=e,this.canUsedGhosts.mouseEnabled=!0,this.canUsedGhosts.mouseHandler=new h(this,this.onMouse),this.chgNature.clickHandler=new h(this,this.onChgNature)}o(t,"modules.pet.view.componets.PetDressGhostChangeView",e);var i=t.prototype;return i.popSelect=function(e,t,i,n){this.aimPosition=n,this.selectPet=e,this._dressed=t,t?(this.renderGhost(this.dressedGhost,t),this.dressedGhost.visible=!0,this.chgNature.visible=t.propConf.quality>=6):(this.dressedGhost.visible=!1,this.chgNature.visible=!1),i.length<=0?(this.emptTxt.visible=!0,this.canUsedGhosts.visible=!1):(this.emptTxt.visible=!1,this.canUsedGhosts.visible=!0,this.canUsedGhosts.dataSource=i),this.popup()},i.onEquipRender=function(e,t){if(this.canUsedGhosts.dataSource){var i=this.canUsedGhosts.dataSource[t];this.renderGhost(e,i)}},i.renderGhost=function(e,t){var i=e.getChildByName("name"),n=e.getChildByName("nature"),o=e.getChildByName("attribute1"),s=e.getChildByName("attribute2");e.getChildByName("changeBtn"),e.getChildByName("takeOffBtn");i.text=t.propConf.name,i.color=N.getColor(t.quality);var r=i.x+i.width;n.x=r,n.index=t.propConf.nature-1;var a=t.baseAttr[0],l=I.getName(a.key);o.text=l+I.getValueStr(a.key,a.value,!0),a=t.baseAttr[1],l=I.getName(a.key),s.text=l+I.getValueStr(a.key,a.value,!0)},i.onMouse=function(e,t){"click"==e.type&&"changeBtn"==e.target.name&&(this.selectHandler.runWith([this.canUsedGhosts.dataSource[t],this.aimPosition]),this.close())},i.onChgNature=function(){x.getInstance().sendNotification("SHOW_PET_CHG_GHOST_NATURE_PAGE",{pet:this.selectPet,ghost:this._dressed}),this.close()},t}(NA),vL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.pet.view.componets.PetGhostChgNatureView",e),t}(TA),yL=function(e){function t(){this.vo=null,t.__super.call(this),M.drawBlackBg(this,!1),this.btnSure.clickHandler=new h(this,this.onSure)}o(t,"modules.goods.view.componets.ChangeNamePop",e);var i=t.prototype;return i.popInfo=function(e){this.vo=e,this.erro.text="",this.newName.text="",this.oldName.text=Ng.userVO.getValue(1002);var t=Ng.userVO.getValue(1027);this.oldName.color=N.getColor(t),this.popup()},i.onSure=function(){var e=this.newName.text;if(null==e||""==e)return void(this.erro.text="名字不可为空");if(e==this.oldName.text)return void(this.erro.text="名字未改变");e=e.replace(/\s*$/g,""),e=e.replace(/^\s*/g,""),this.newName.text=e;var t=mo.getCharLength(e);return 4>t||t>16?void(this.erro.text="长度二到四个中文"):mo.isLegalWord(e)?(this.erro.text="",void bu.instance.changePlayerName(this.vo.id,e)):void(this.erro.text="角色名有不合法字符")},t}(cT),bL=function(e){function t(){this.petA=null,t.__super.call(this),M.drawBlackBg(this,!0),this.pets.renderHandler=new h(this,this.onRender)}o(t,"modules.pet.view.componets.PetSelectView",e);var i=t.prototype;return i.popInfo=function(e,t){this.petA=e,this.pets.dataSource=t,this.popup()},i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("nameTxt");n.text=i.getRealName(),n.color=N.getColor(i.getRealQuality());var o=e.getChildByName("nature");o.index=i.petCfg.nature-1,o.x=n.x+n.width+5,n=e.getChildByName("level"),n.text=i.level+"",n=e.getChildByName("quality"),n.text=i.qualityLevel+""},t}(kA),EL=function(e){function t(){t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!0)}return o(t,"modules.team.view.componets.TeamSelfView",e),t}(gA),xL=function(e){function t(){t.__super.call(this),this.autoStart.visible=!1;var e=M.heightScaleNum(this);e>0&&(this.height+=e),this.teams.scrollBar.hide=!0,M.drawBlackBg(this,!0)}return o(t,"modules.team.view.componets.TeamListView",e),t}(vA),SL=function(e){function t(){this.teamId=0,t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!0),this.btnJoin.clickHandler=new h(this,this.onJoin)}o(t,"modules.team.view.componets.TeamJoinPwdView",e);var i=t.prototype;return i.popInfo=function(e){this.teamId=e.id,this.dName.text=e.desc,this.pwd.text="",this.popup()},i.onJoin=function(){var e=this.pwd.text;null==e||""==e?x.getInstance().sendNotification("prompted_info_show",{info:"请输入口令"}):pu.instance.joinWithPwd(this.teamId,e)},t}(mA),wL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);var e=M.heightScaleNum(this);e>0&&(this.btnSubmit.y+=e,this.btnLogout.y+=e,this.btnIdentify.y+=e,this.height+=e)}return o(t,"modules.setting.view.compontes.SettingView",e),t}(hT),CL=function(e){function t(){t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!0)}return o(t,"modules.team.view.componets.TeamGateView",e),t}(yA),TL=function(e){function t(){t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!0),this.logs.scrollBar.hide=!0,this.logs.renderHandler=new h(this,this.onRender)}o(t,"modules.team.view.componets.TeamLogsView",e);var i=t.prototype;return i.onRender=function(e,t){var i=e.dataSource,n=e.getChildByName("log");n.style.fontSize=26,n.style.leading=6,n.style.color="#ffffff",n.innerHTML=this.getHtml(i)},i.getHtml=function(e){var t="",i=ro.newDate(e.actTime);t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+"&nbsp;&nbsp;";var n=g.database.getData("dungeonteam",e.dungeonId);t+="通关副本【"+n.name+"】<br>";var o=e.awards;if(o){var s=o.split("|");if(s.length>0){t+="<br>获得奖励：";var r,a=0;for(var l in s){r=s[l];var h=r.split("_");if(3==h.length){var c=vo["int"](h[0]),u=vo["int"](h[1]),d=vo["int"](h[2]);switch(c){case 2:t+=d+"铜币 ";break;case 3:t+=d+"元宝 ";break;case 5:t+=d+"经验 ";break;case 7:a=d;break;case 0:var p=g.database.getData("props",u);if(p){if(19==p.propType){if(0==d){t+="<font color='#e70626'>没有加入宗门，无法获得【原木】</font>";break}if(0>d){var f=5*-d;t+="<font color='"+N.getColor(p.quality)+"'>【"+p.name+"】</font>*"+-d+" ",t+="<font color='#fffc00'>（自动进贡，获得贡献+"+a+"、资源+"+f+"）</font>";break}}t+="<font color='"+N.getColor(p.quality)+"'>【"+p.name+"】</font>*"+d+" "}}}}}}return t},t}(bA),IL=function(e){function t(){this.pet=null,this.drug=null,t.__super.call(this),M.drawBlackBg(this,!0)}o(t,"modules.pet.view.componets.PetOrangeDrugView",e);var i=t.prototype;return i.showPet=function(e,t){this.nickname.text="",this.erro.text="",this.pet=e,this.drug=t,this.nameTxt.text=e.getRealName(),this.nameTxt.color=N.getColor(e.getRealQuality()),this.nature.index=e.petCfg.nature-1,this.level.text=e.level+"";var i=e.qualityLevel+"";e.qualityLevel>=e.petCfg.maxQuality?(i+="（满）",this.quality.color="#c527ff"):this.quality.color="#00dc24",e.addQuality&&(i=i+" + "+e.addQuality),this.quality.text=i;var n,o,s,r=[],a=0;for(s in e.attributes.keys)a=e.attributes.keys[s],n=e.attributes.get(a),n&&(o=I.getValueStr(a,n),r.push({key:I.getName(a),value:o}));this.attributes.dataSource=r,this.popup()},t}(WA),AL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.raenaList.visible=!1,this.raenaList.scrollBar.hide=!0}return o(t,"modules.arena.view.componets.ArenaView",e),t}(QI),NL=function(e){function t(){this._vo=null,t.__super.call(this),M.drawBlackBg(this,!0);var e=this.task.getChildByName("taskAim");e.style.fontSize=26,e.style.color="#ffffff",e.style.leading=3;var i=this.taskD.getChildByName("taskdList");i.scrollBar.hide=!0;var n=this.achieve.getChildByName("achieveList");n.scrollBar.hide=!0,n.renderHandler=new h(this,this.onAchieveRender),this.achieve.x=this.task.x}o(t,"modules.task.view.componets.TaskAchieveView",e);var i=t.prototype;return i.freshTask=function(e){var t=this.task.getChildByName("taskAim"),i=this.task.getChildByName("taskGold"),n=this.task.getChildByName("taskSilver"),o=this.task.getChildByName("taskState"),s=this.task.getChildByName("btnTask"),r=e.lastTask,a=this.achieve.getChildByName("achieveList"),l=this.achieve.getChildByName("notOpen");if(null==r)t.innerHTML="暂无新的任务",i.text="",n.text="",o.text="",s.visible=!1,l.visible=!1,a.visible=!0;else{var h=r.info,c=0,u=0;switch(r.id){case 18:u=Ng.userVO.getValue(1004),c=70;break;case 23:u=Ng.userVO.getValue(1004),c=150;break;case 34:u=Ng.userVO.getValue(1004),u=R.getBornOf(u),c=500;break;case 33:u=Ng.userVO.getValue(1004),c=1e3;break;case 24:u=Ng.userVO.getValue(1004)}if(u>0){var d="<font color='"+R.getColor(u)+"'>"+R.getName(u)+"系</font>";h=h.replace("{0}",d)}t.innerHTML=h,i.text=r.golden,n.text=r.silver,0==e.lastState?(c>0?o.text="进度:"+e.value+"/"+c:o.text="【未完成】",o.color="#e70626",s.visible=!1):(o.text="【已完成】",o.color="#00dc24",s.visible=!0),r.id<8?(a.visible=!1,l.visible=!0):(a.visible=!0,l.visible=!1)}},i.freshAchieve=function(e){var t=this.achieve.getChildByName("achieveTitle"),i=this.achieve.getChildByName("txtStar"),n=this.achieve.getChildByName("btnOffTitle"),o=this.achieve.getChildByName("achieveList");this._vo=e;var s=Ng.userVO.getValue(7006);if(s>0){var r=g.database.getData("achieve",s);r&&(t.text=r.name,t.color=N.getColor(r.quailty),i.text=N.getStar(r.quailty),i.color=t.color,i.x=t.x+t.width-5),n.visible=!0}else t.color="#ffffff",t.text="未佩戴",i.text="",n.visible=!1;var a,l,h=this.achieve.getChildByName("attribute1"),c=this.achieve.getChildByName("attribute2"),u=this.achieve.getChildByName("attribute3"),d=this.achieve.getChildByName("attribute4"),p=0;for(var f in e.baseAttrOnce.keys){l=e.baseAttrOnce.keys[f];var _=e.baseAttrOnce.get(l)*e.totalAwardNum;switch(p+=1){case 1:a=h;break;case 2:a=c;break;case 3:a=u;break;case 4:a=d}_>0?a.text=I.getName(l)+I.getValueStr(l,_,!0):a.text=""}e.totalAwardNum<=0?(h.text="未激活",h.color="#b0bcb0"):h.color="#0084ff",o.dataSource?o.refresh():o.dataSource=e.achieveList},i.onAchieveRender=function(e,t){var i=this.achieve.getChildByName("achieveList");if(i.dataSource){var n=i.dataSource[t],o=n.vo;T.IS_ON_MINI&&Or.onIOS&&(o.cndname=o.cndname.replace("商城功能","功能").replace("商城","功能").replace("购买","激活"));var s=e.getChildByName("lastFinish"),r=e.getChildByName("achieving"),a=e.getChildByName("achieving1"),l=e.getChildByName("txtGold"),h=e.getChildByName("awardState"),c=e.getChildByName("btnAchieve");r.color="#b0bcb0",h.visible=!1,a.text=""+this._vo.getAchievingVal(o.type);var u=e.getChildByName("bgA");u.visible=!0;var d,p=Ng.userVO.getValue(7006);switch(e.visible=!0,n.state){case 0:d=g.database.getData("achieve",o.id-1),d?(s.text=d.cndname,p!=d.id?(c.visible=!0,c.label="佩戴称号"):c.visible=!1):(s.text="--",c.visible=!1),r.text=o.cndname,l.text=""+o.awardgolden,this.freshTitleStar(e,d,o),this.freshAttr(e,d);break;case 1:d=g.database.getData("achieve",o.id+1),d?r.text=d.cndname:(r.text="已经是最高成就",r.color="#c527ff",u.visible=!1),s.text=o.cndname,c.visible=!0,h.visible=!0,c.label="领取奖励",l.text=""+o.awardgolden,this.freshTitleStar(e,o),this.freshAttr(e,o);break;case 2:r.text="已经是最高成就",r.color="#c527ff",u.visible=!1,s.text=o.cndname,p!=o.id?(c.visible=!0,c.label="佩戴称号"):c.visible=!1,l.text="",this.freshTitleStar(e,o),this.freshAttr(e,o)}}},i.freshTitleStar=function(e,t,i){var n;if(t){n=e.getChildByName("title"),n.text=t.name,n.color=N.getColor(t.quailty);var o=n.x+n.width-5;n=e.getChildByName("txtStar"),n.text=N.getStar(t.quailty),n.color=N.getColor(t.quailty),n.x=o}else n=e.getChildByName("title"),n.text=i.name,n.color="#b0bcb0",n=e.getChildByName("txtStar"),n.text=""},i.freshAttr=function(e,t){var i,n,o,s=0,r=0;for(var a in this._vo.baseAttrOnce.keys)if(o=this._vo.baseAttrOnce.keys[a],r+=1,t){if(i=I.getName(o),s=this._vo.baseAttrOnce.get(o)*t.quailty,n=e.getChildByName("attribute"+r),n.text=i+I.getValueStr(o,s,!0),n.color=N.getColor(t.quailty),n=e.getChildByName("attribute"+10*r),n.text=i+I.getValueStr(o,s+this._vo.baseAttrOnce.get(o),!0),t.quailty>=6){var l=g.database.getData("achieve",t.id+1);null==l&&(n.text="")}}else n=e.getChildByName("attribute"+r),2==r?(n.text="未激活",n.color="#b0bcb0"):n.text="",i=I.getName(o),s=this._vo.baseAttrOnce.get(o),n=e.getChildByName("attribute"+10*r),n.text=i+I.getValueStr(o,s,!0)},t}(UA),PL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0);var e=M.heightScaleNum(this);e>0&&(this.propsList.height+=e,this.equipList.height+=e,this.boxList.height+=e,this.talismanList.height+=e,this.height+=e),this.posFilter.visibleNum=10}return o(t,"modules.bagpack.view.componets.BagpackView",e),t}(lA),RL=function(e){function t(){this.btnAward=null,this.lbCount=null,t.__super.call(this),M.drawBlackBg(this,!0),this.description.style.fontSize=26,this.description.style.color="#ffffff",this.goldenList.scrollBar.hide=!0,this.goldenList.renderHandler=new h(this,this.onGoldRender),this.goldenList.mouseHandler=new h(this,this.onMouseBox),this.btnAward=this.libao.getChildByName("btnAward"),this.btnAward.clickHandler=new h(this,this.onLibaoBuy),this.lbCount=this.libao.getChildByName("lbCount")}o(t,"modules.activityweek.view.componets.ActivityWeekView",e);var i=t.prototype;return i.showInfo=function(){var e=x.getInstance().retrieveProxy("ActivityWeekPropxy"),t=e.getActTypeObj();if(null!=t){this.timeTips.text=e.getActEndTime(),this.title.text=t.title,this.tips.text=t.tips,this.score.text="当前拥有积分："+e.weekdata.point,this.description.innerHTML=t.description;var i="",n=x.getInstance().retrieveProxy("DungeonProxy");if(n.dungeonSpInfo){var o=In.queryCountPerM(n.dungeonSpInfo.passedId),s=6*o*60;i="灵石："+s+"个"}else i="6小时灵石采集";var r=this.libao.getChildByName("content");r.style.fontSize=24,r.style.color="#00dc24",r.innerHTML=t.libao.content+i,this.btnAward.label=t.libao.gold,v.OPEN_PAYMENT||(this.btnAward.label=this.btnAward.label.replace("购买","激活")),e.weekdata.buyTimes>=t.libao.totalCount?(this.lbCount.text="今日购买次数已达上限",this.btnAward.visible=!1):this.lbCount.text=e.weekdata.buyTimes+"/"+t.libao.totalCount,this.goldenList.dataSource=t.data}},i.onGoldRender=function(e,t){var i=e.dataSource,n=x.getInstance().retrieveProxy("ActivityWeekPropxy"),o=e.getChildByName("lbState"),s=e.getChildByName("content");s.style.fontSize=24,s.style.color="#ffffff";var r=e.getChildByName("award");r.style.fontSize=24,r.style.color="#ffffff";var a=e.getChildByName("btnAward");a.visible=!1,o.text="",s.innerHTML=i.content,r.innerHTML=i.award,n.weekdata.awardedIds.indexOf(i.id)>=0?(o.text="已领取",o.color="#00dc24"):n.weekdata.point>=i.score?i.id==n.minIdCanAward?(a.label="可领取",a.visible=!0,s.style.color="#00dc24"):(o.text="待领取",o.color="#0084ff"):(s.style.color="#e70626",o.text="未达成",o.color="#e70626")},i.onMouseBox=function(e,t){if("click"==e.type&&"btnAward"==e.target.name){var i=this.goldenList.dataSource[t];Cu.instance.takeAward(i.id)}},i.onLibaoBuy=function(){if(Ng.userVO.getValue(1010)<366)return void x.getInstance().sendNotification("prompted_info_show",{info:"您的元宝不足"});var e=x.getInstance().retrieveProxy("ActivityWeekPropxy");x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"购买需要<font color='#fffc00'>366元宝</font>，是否确认？",handler:h.create(this,function(t){t&&Cu.instance.takeAwardEx(e.weekdata.type)})})},t}(zT),LL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!0),this.actList.renderHandler=new h(this,this.onRender),this.actList.mouseEnabled=!0,this.actList.mouseHandler=new h(this,this.onMouse),this.actList.dataSource=[g.database.getJsonObj("activityTianNai"),g.database.getJsonObj("activityLingshi"),g.database.getJsonObj("activityLingzhu")]}o(t,"modules.activityweek.view.componets.ActivityWeekPass",e);var i=t.prototype;return i.onRender=function(e,t){var i=this.actList.dataSource[t],n=e.getChildByName("name");n.text=i.title;var o=e.getChildByName("info");o.style.fontSize=26,o.style.color="#ffffff",o.innerHTML=i.description},i.onMouse=function(e,t){var i=this;if("click"==e.type&&"btnSure"==e.target.name){var n=this.actList.dataSource[t],o=t+1;x.getInstance().sendNotification("POP_CONFIRM_INFO",{info:"快速开启下一轮<font color='#fffc00'>【"+n.title+"】</font>，是否确认？",handler:h.create(this,function(e){e&&(Cu.instance.fastChg(o),i.close())})})}},t}(KT),OL=function(e){function t(){this.dressGhosts=null,this.talismanList=null,t.__super.call(this),M.drawBlackBg(this,!1),this.attributes.scrollBar.hide=!0,this.equips.scrollBar.hide=!0,this.equips.x=this.boxAttributes.x,this.bone.x=this.boxAttributes.x,this.pet.x=this.boxAttributes.x,this.culture.x=this.boxAttributes.x,this.bloods.x=this.boxAttributes.x,this.petSkill.x=this.boxAttributes.x,this.pearls.x=this.boxAttributes.x,this.equipBar.x=this.boxAttributes.x,this.demons.x=this.boxAttributes.x,this.petBar.x=this.boxAttributes.x,this.talismanList=this.culture.getChildByName("listTalisman"),this.talismanList.scrollBar.hide=!0,this.pet.getChildByName("attributes").scrollBar.hide=!0,this.dressGhosts=this.pet.getChildByName("dressGhosts");var e=M.heightScaleNum(this);e>0&&(this.equips.height+=e,this.boxAttributes.height+=e,this.culture.height+=e,this.talismanList.height+=e,this.height+=e)}return o(t,"modules.look.view.componets.LookOtherView",e),t}(yT),ML=function(e){function t(){this.titleLb=null,this.txtReports=null,t.__super.call(this),M.drawBlackBg(this,!1),this.panelReports.vScrollBar.hide=!0,this.txtReports=new uw,
this.txtReports.width=this.panelReports.width,this.txtReports.style.lineHeight=40,this.txtReports.style.fontSize=32,this.txtReports.style.color="#ffffff",this.txtReports.style.bold=!0,this.panelReports.addChild(this.txtReports),this.titleLb=this.getChildByName("lbTitle")}o(t,"modules.goods.view.componets.CommAwardPop",e);var i=t.prototype;return i.popAwardsSimple=function(e,t){this.titleLb.text=e,this.txtReports.innerHTML="",t&&this.txtReports.appendHTML(t),this.panelReports.refresh(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max,this.popup()},i.popAwards=function(e,t,i){if(!t.isEmpty){if(this.titleLb.text=e,this.txtReports.innerHTML="",t.exp>0)this.txtReports.appendHTML("<br><font color='#0000ff'>获得经验 +"+t.exp+"</font>");else if(t.exp<-1){var n=-t.exp;n=vo["int"](n/ro.T_1H),n>=24?(n/=24,this.txtReports.appendHTML("<br><font color='#00ff00'>获得3倍收益 +"+n+"天</font>")):this.txtReports.appendHTML("<br><font color='#00ff00'>获得3倍收益 +"+n+"小时</font>")}if(t.towerCoin>0&&this.txtReports.appendHTML("<br><font color='#00ff00'>获得威望 +"+t.towerCoin+"</font>"),t.gas>0?this.txtReports.appendHTML("<br><font color='#00ff00'>获得灵气 +"+t.gas+"</font>"):t.gas<0&&this.txtReports.appendHTML("<br><font color='#fffc00'>获得仙玉 +"+-t.gas+"</font>"),t.silver>0&&this.txtReports.appendHTML("<br><font color='#ffffff'>获得铜币 +"+t.silver+"</font>"),t.gasM>0?this.txtReports.appendHTML("<br><font color='#3eede7'>获得真元 +"+t.gasM+"</font>"):t.gasM<-1&&this.txtReports.appendHTML("<br><font color='#00ff00'>获得威望 +"+-t.gasM+"</font>"),t.gold>0)this.txtReports.appendHTML("<br><font color='#fffc00'>获得元宝 +"+t.gold+"</font>"),k.goldenAward(t.gold,e);else if(t.gold<0)switch(t.gold){case-101:this.txtReports.appendHTML("<br>您已激活<font color='#c527ff'>“至尊月卡”</font>30天，请到商城-月卡页面领取。");break;case-100:case-102:this.txtReports.appendHTML("<br>您已激活<font color='#e70626'>“黄金月卡”</font>30天，请到商城-月卡页面领取。");break;case-103:this.txtReports.appendHTML("<br>您已激活<font color='#e70626'>“商会卡”</font>30天,可在商城-交易所上架物品。");break;case-104:this.txtReports.appendHTML("<br>您已激活<font color='#c527ff'>“年卡”</font>请到商城-月卡页面领取。");break;case-105:this.txtReports.appendHTML("<br>您已激活<font color='#c527ff'>“黄金月卡*12”</font>请到商城-月卡页面领取。");break;case-106:this.txtReports.appendHTML("<br>您已激活<font color='#c527ff'>“至尊月卡*12”</font>请到商城-月卡页面领取。");break;case-107:this.txtReports.appendHTML("<br>您已激活<font color='#c527ff'>“黄金有卡+至尊月卡”</font>请到商城-月卡页面领取。");break;case-108:this.txtReports.appendHTML("<br>您已激活<font color='#e70626'>“钻石月卡”</font>30天，请到商城-月卡页面领取。")}t.renderItems(this.txtReports),i&&this.txtReports.appendHTML(i),this.panelReports.refresh(),this.panelReports.vScrollBar.value=this.panelReports.vScrollBar.max,this.popup()}},t}(MA),DL=function(e){function t(){this._vo=null,t.__super.call(this),M.drawBlackBg(this,!1)}o(t,"modules.guard.view.componets.GuardPoolView",e);var n=t.prototype;return n.showInfo=function(e){if(null!=e){this._vo=e;var t=e.guardTemp;null==t?(this.nameTmp.text="暂无可抓捕护卫",this.nameTmp.underline=!1,this.nameTmp.color="#e70626",this.extVip.visible=!1,this.nature.index=-1,this.level.text=""):(this.nameTmp.text=t.name,this.nameTmp.underline=!0,this.nameTmp.color="#00dc24",this.nature.index=t.nature-1,this.level.text="Lv."+t.level,t.extVip>g.clock.currentTime?(this.extVip.visible=!0,this.extVip.x=this.nameTmp.x+this.nameTmp.width,this.nature.x=this.extVip.x+this.extVip.width-5):(this.extVip.visible=!1,this.nature.x=this.nameTmp.x+this.nameTmp.width),this.level.x=this.nature.x+this.nature.width),e.guardTempHost?(this.lbHost.visible=!0,this.nameHost.text=e.guardTempHost.name,this.nameHost.color="#e70626",this.natureHost.x=this.nameHost.x+this.nameHost.width,this.natureHost.index=e.guardTempHost.nature-1,this.levelHost.text="Lv."+e.guardTempHost.level,this.levelHost.x=this.natureHost.x+this.natureHost.width):(this.lbHost.visible=!1,this.nameHost.text="",this.natureHost.index=-1,this.levelHost.text=""),this.on("click",this,this.onClick),this.clock()}},n.onClosed=function(e){laya.ui.Dialog.prototype.onClosed.call(this,e),i.timer.clear(this,this.clock)},n.onOpened=function(){laya.ui.Dialog.prototype.onOpened.call(this),i.timer.loop(1e3,this,this.clock)},n.onClick=function(e){if(null!=this._vo){var t=null;e.target==this.nameTmp?t=this._vo.guardTemp:e.target==this.nameHost&&(t=this._vo.guardTempHost),null!=t&&x.getInstance().sendNotification("SHOW_LOOK_PAGE",{playerId:t.id,name:t.name,nature:t.nature,level:t.level})}},n.clock=function(){if(null!=this._vo){var e=NaN;this._vo.catchCd>g.clock.currentTime?(e=this._vo.catchCd-g.clock.currentTime,ao.me.update(e),this.fightCd.text="抓捕该护卫冷却时间："+ao.me.formatStringFullHour):this.fightCd.text="抓捕该护卫已尝试："+this._vo.catchFail+"次",e=this._vo.freshTime+216e5,e>g.clock.currentTime?(e-=g.clock.currentTime,ao.me.update(e),this.freshCd.text="免费刷新冷却时间："+ao.me.formatStringFullHour):this.freshCd.text="当前可免费刷新1次"}},t}(VA),kL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.guard.view.componets.GuardHomeView",e),t}(FA),BL=function(e){function t(){t.__super.call(this);var e=M.heightScaleNum(this);e>0&&(this.height+=e),M.drawBlackBg(this,!1)}return o(t,"modules.adult.view.componets.IdentifyPop",e),t}(GA),VL=function(e){function t(){this.drawing=!1,this._rollIndexs=[0,1,2,3,7,11,15,14,13,12,8,4],this._rollCells=null,this._rollingIndex=0,this._rollingCount=0,this._speed=0,this._toId=0,this._count=0,t.__super.call(this),M.drawBlackBg(this,!1),this.items.dataSource=[1,2,3,4,5,0,0,6,7,0,0,8,9,10,11,12]}o(t,"modules.lottery.view.componets.LotteryView",e);var n=t.prototype;return n.idle=function(e){this._rollCells=[];var t;for(var n in this._rollIndexs){t=this._rollIndexs[n];var o=this.items.dataSource[t],s=e&&e.awards.contain(o);s||this._rollCells.push(this.items.getCell(t))}this._rollCells.length>0?i.timer.loop(1e3,this,this.onIdle):this.showLight(null,!1)},n.onIdle=function(){if(this.isPopup){var e;if(1==this._rollCells.length)this.lightR.parent?this.showLight(null,!1):(e=this._rollCells[0],this.showLight(e));else{var t=fo.RandomBetweenTwoNumbers(0,this._rollCells.length-1);e=this._rollCells[t],e==this.lightR.parent&&this._rollCells.length>1&&(t>0?t-=1:t+=1,e=this._rollCells[t]),this.showLight(e)}}},n.rollingTo=function(e){if(this._count=0,this._rollingIndex=0,this._toId=e,!(this._rollCells.length<=0)){if(1==this._rollCells.length){var t=this._rollCells[0];this.showLight(t),i.timer.once(1e3,this,this.oncComplete)}else this._speed=100,i.timer.once(this._speed,this,this.onRolling);i.timer.clear(this,this.onIdle)}},n.onRolling=function(){var e=this._rollCells[this._rollingIndex];if(this._rollingIndex+=1,this._rollingIndex>this._rollCells.length-1&&(this._rollingIndex=0),this.showLight(e),0==this._speed?(this._count+=1,this._count<2*this._rollCells.length||(this._speed-=5)):this._speed-=5,this._speed<-150&&(this._speed<-1e3&&(this._speed=-1e3),e.dataSource==this._toId))return void i.timer.once(1e3,this,this.oncComplete);var t=this._speed>0?this._speed:-this._speed;10>t&&(t=10),i.timer.once(t,this,this.onRolling)},n.oncComplete=function(){this.event("complete")},n.clear=function(){this.drawing=!1,this.showLight(null,!1),i.timer.clear(this,this.onIdle),i.timer.clear(this,this.onRolling)},n.showLight=function(e,t){void 0===t&&(t=!0);var i,n;t?(n=this.lightR.parent,n&&(i=n.getChildByName("mask1"),i.visible=!0),e.addChild(this.lightR),i=e.getChildByName("mask1"),i.visible=!1):(n=this.lightR.parent,n&&(i=n.getChildByName("mask1"),i.visible=!0),this.lightR.removeSelf())},t}(qA),FL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.demon.view.componets.DemonUpgradeView",e),t}(KA),GL=function(e){function t(){t.__super.call(this),M.drawBlackBg(this,!1)}return o(t,"modules.demon.view.componets.DemonDressView",e),t}(QA),HL=function(e){function t(e){this.selectHandler=null,t.__super.call(this),M.drawBlackBg(this,!1),this.canUsedEqups.scrollBar.hide=!0,this.canUsedEqups.renderHandler=new h(this,this.onEquipRender),this.selectHandler=e,this.canUsedEqups.mouseEnabled=!0,this.canUsedEqups.mouseHandler=new h(this,this.onMouse)}o(t,"modules.demon.view.componets.DemonDressChgView",e);var i=t.prototype;return i.popSelect=function(e,t,i){e?Ln.renderDemon(this.dressed,e):Ln.renderDemonEmptyGrid(this.dressed,i),t.length<=0?(this.emptTxt.visible=!0,this.canUsedEqups.visible=!1):(this.emptTxt.visible=!1,this.canUsedEqups.visible=!0,this.canUsedEqups.dataSource=t),this.popup()},i.onEquipRender=function(e,t){if(this.canUsedEqups.dataSource){var i=this.canUsedEqups.dataSource[t];Ln.renderDemon(e.getChildByName("demon"),i)}},i.onMouse=function(e,t){"click"==e.type&&"btnChange"==e.target.name&&this.selectHandler.runWith(this.canUsedEqups.dataSource[t])},t}(XA),UL=function(e){function t(){this.nextBtn=null,t.__super.call(this),this.nextBtn=new ow,this.nextBtn.skin="comp/button.png",this.nextBtn.sizeGrid="9,37,8,16",this.nextBtn.stateNum=2,this.nextBtn.label="继续挑战",this.nextBtn.width=73,this.nextBtn.height=30,this.nextBtn.pos(79,557),this.addChild(this.nextBtn),this.getChildByName("close").x=243;var e=M.heightScaleNum(this);e>0&&(this.nextBtn.y+=e,this.height+=e)}o(t,"modules.fight.view.components.FightAwardsPopForSp",e);var i=t.prototype;return i.appendHtml=function(e){this.txtReports.appendHTML(e)},t}(_P),zL=function(e){function t(){this.txtPutin=null,this.aimCount1=null,this.submit1=null,this.costSilver1=null,this.materials=null,this.aimProp1=null,this.aimQ=null,this.aimBaseId=0,this.needSilver=0,this.QualitySumarryMp=new uo,t.__super.call(this),this.txtPutin=this.fast.getChildByName("txtPutin"),this.aimCount1=this.fast.getChildByName("aimCount"),this.submit1=this.fast.getChildByName("btnSubmit"),this.costSilver1=this.fast.getChildByName("costSilver"),this.materials=this.fast.getChildByName("maters"),this.aimProp1=this.fast.getChildByName("aimProp"),this.aimQ=this.fast.getChildByName("aimQ"),this.materials.renderHandler=new h(this,this.onRenderMat),this.aimQ.selectHandler=new h(this,this.onQualityChg),this.aimCount1.on("blur",this,this._$9_onAimCountChanged),this.submit1.on("mousedown",this,this._$9_onSubmit)}o(t,"modules.bagpack.view.componets.SmityPropCommFastPop",e);var i=t.prototype;return i.showFast=function(e){if(this.aimQ.visible=!1,this.aimCount1.visible=!1,1==e.propConf.propType||16==e.propConf.propType||9==e.propConf.propType){this.QualitySumarryMp.clear(),this.aimBaseId=Math.floor(e.propConf.id/10);var t,i,n=x.getInstance().retrieveProxy("GoodsProxy"),o=n.listItems(0);for(var s in o)if(i=o[s],!(null==i||i.count<=0)&&i instanceof modules.goods.model.data.PackProp){var r=i;r.quality<=5&&r.propConf.id==10*this.aimBaseId+r.quality&&(t=this.QualitySumarryMp.get(r.quality),null==t&&(t={has:r.count},this.QualitySumarryMp.set(r.quality,t)),t.C=r)}for(var a,l=2;5>=l;l++){a=this.QualitySumarryMp.get(l-1),null==a?(a={has:0,max:0},this.QualitySumarryMp.set(l-1,a)):2==l&&(a.max=a.has),t=this.QualitySumarryMp.get(l),null==t&&(t={has:0,max:0},this.QualitySumarryMp.set(l,t));var h=Math.floor(a.max/3);t.max=t.has+h}this.aimQ.selectedIndex=3,this.aimCount1.text="1",this.dealMaterials(),this.aimQ.visible=!0,this.aimCount1.visible=!0}},i.dealMaterials=function(){var e=vo["int"](this.aimCount1.text),t=this.aimQ.selectedIndex+2;this.needSilver=0;var i=this.QualitySumarryMp.get(t),n=[-1,-1,-1,-1];if(0==e||e>i.max-i.has)this.txtPutin.visible=!0;else{for(var o=e*this.getCommonPropCountEqWhite(t),s=0,r=t-1;r>0;r--){i=this.QualitySumarryMp.get(r);var a=i.has*this.getCommonPropCountEqWhite(r);if(a+s>=o){var l=o-s;l/=this.getCommonPropCountEqWhite(r),s=o,n[r-1]=l,this.needSilver+=this.dealSilverCost(i.C.propConf,l,1);break}s+=a,n[r-1]=i.has,i.has>0&&(this.needSilver+=this.dealSilverCost(i.C.propConf,i.has,1))}s==o?this.txtPutin.visible=!1:this.txtPutin.visible=!0}this.materials.dataSource=n;var h=10*this.aimBaseId+t,c=g.database.getData("props",h);Ln.renderPropsByCfg(this.aimProp1,c,0);var u=this.fast.getChildByName("txtHas");i=this.QualitySumarryMp.get(t);var d=i?i.has:0;u.text="当前拥有数量："+d+"个",this.costSilver1.text=this.needSilver+""},i.onRenderMat=function(e,t){var i=t+1,n=10*this.aimBaseId+i,o=g.database.getData("props",n),s=e.dataSource;Ln.renderPropsByCfg(e,o,s);var r=this.QualitySumarryMp.get(i);if(0>=s)s=r?r.has:0,e.alpha=.3;else if(e.alpha=1,r&&r.C){var a=e.getChildByName("count");a.text="消耗："+s+"/"+r.C.count+"个"}},i.onQualityChg=function(){if(this.aimQ.visible){var e=this.aimQ.selectedIndex+2;this.QualitySumarryMp.get(e);this.aimCount1.text="1",this.dealMaterials()}},i._$9_onAimCountChanged=function(){var e=vo["int"](this.aimCount1.text),t=this.aimQ.selectedIndex+2,i=this.QualitySumarryMp.get(t);(isNaN(e)||0>=e||e>i.max-i.has)&&(this.aimCount1.text="1",e=1,x.getInstance().sendNotification("prompted_info_show",{info:"目标数量有误"})),this.dealMaterials(),this.submit1.visible=!0},i.getCommonPropCountEqWhite=function(e){switch(e){case 1:return 1;case 2:return 3;case 3:return 9;case 4:return 27;case 5:return 81;case 6:return 243}return 729},i._$9_onSubmit=function(e){if(this.txtPutin.visible)return void x.getInstance().sendNotification("prompted_info_show",{info:"合成需要的材料不足"});var t=vo["int"](this.aimCount1.text),i=this.aimQ.selectedIndex+2,n=this.QualitySumarryMp.get(i);if(isNaN(t)||0>t||t>n.max-n.has)return void x.getInstance().sendNotification("prompted_info_show",{info:"请输入正确数量"});var o=Ng.userVO.getValue(1009);if(this.needSilver>o)return void x.getInstance().sendNotification("prompted_info_show",{info:"铜币不足，无法合成。"});for(var s=[],r=this.materials.dataSource,a=0;a<r.length;a++){var l=r[a];l>0&&(n=this.QualitySumarryMp.get(a+1),s.push({id:n.C.id,count:l}))}return 0==s.length?void x.getInstance().sendNotification("prompted_info_show",{info:"合成需要的材料不足"}):(Sc.instance.mixPropFast(i,t,s),void this.close())},t}(pL);i.__init([Au,l,br,js,yr,Or,Sd,Ts,mi,Jn,Yr,Sw,hp,Gw,Ns]),new T}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(t[i]=n)}});